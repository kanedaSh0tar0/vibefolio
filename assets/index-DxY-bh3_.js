var $P=Object.defineProperty;var MR=i=>{throw TypeError(i)};var tF=(i,t,e)=>t in i?$P(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Je=(i,t,e)=>tF(i,typeof t!="symbol"?t+"":t,e),CT=(i,t,e)=>t.has(i)||MR("Cannot "+e);var x=(i,t,e)=>(CT(i,t,"read from private field"),e?e.call(i):t.get(i)),W=(i,t,e)=>t.has(i)?MR("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),G=(i,t,e,n)=>(CT(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),V=(i,t,e)=>(CT(i,t,"access private method"),e);var Ea=(i,t,e,n)=>({set _(s){G(i,t,s,e)},get _(){return x(i,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function UE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var wT={exports:{}},Q2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TR;function eF(){if(TR)return Q2;TR=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,r){var a=null;if(r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),"key"in s){r={};for(var l in s)l!=="key"&&(r[l]=s[l])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:a,ref:s!==void 0?s:null,props:r}}return Q2.Fragment=t,Q2.jsx=e,Q2.jsxs=e,Q2}var CR;function nF(){return CR||(CR=1,wT.exports=eF()),wT.exports}var k=nF(),RT={exports:{}},hn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wR;function iF(){if(wR)return hn;wR=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(J){return J===null||typeof J!="object"?null:(J=g&&J[g]||J["@@iterator"],typeof J=="function"?J:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function M(J,at,xt){this.props=J,this.context=at,this.refs=C,this.updater=xt||_}M.prototype.isReactComponent={},M.prototype.setState=function(J,at){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,at,"setState")},M.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function S(){}S.prototype=M.prototype;function R(J,at,xt){this.props=J,this.context=at,this.refs=C,this.updater=xt||_}var D=R.prototype=new S;D.constructor=R,b(D,M.prototype),D.isPureReactComponent=!0;var B=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function F(J,at,xt,Et,ct,wt){return xt=wt.ref,{$$typeof:i,type:J,key:at,ref:xt!==void 0?xt:null,props:wt}}function z(J,at){return F(J.type,at,void 0,void 0,void 0,J.props)}function U(J){return typeof J=="object"&&J!==null&&J.$$typeof===i}function P(J){var at={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(xt){return at[xt]})}var X=/\/+/g;function ot(J,at){return typeof J=="object"&&J!==null&&J.key!=null?P(""+J.key):at.toString(36)}function it(){}function ut(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(it,it):(J.status="pending",J.then(function(at){J.status==="pending"&&(J.status="fulfilled",J.value=at)},function(at){J.status==="pending"&&(J.status="rejected",J.reason=at)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function dt(J,at,xt,Et,ct){var wt=typeof J;(wt==="undefined"||wt==="boolean")&&(J=null);var Bt=!1;if(J===null)Bt=!0;else switch(wt){case"bigint":case"string":case"number":Bt=!0;break;case"object":switch(J.$$typeof){case i:case t:Bt=!0;break;case m:return Bt=J._init,dt(Bt(J._payload),at,xt,Et,ct)}}if(Bt)return ct=ct(J),Bt=Et===""?"."+ot(J,0):Et,B(ct)?(xt="",Bt!=null&&(xt=Bt.replace(X,"$&/")+"/"),dt(ct,at,xt,"",function(ve){return ve})):ct!=null&&(U(ct)&&(ct=z(ct,xt+(ct.key==null||J&&J.key===ct.key?"":(""+ct.key).replace(X,"$&/")+"/")+Bt)),at.push(ct)),1;Bt=0;var Ut=Et===""?".":Et+":";if(B(J))for(var Wt=0;Wt<J.length;Wt++)Et=J[Wt],wt=Ut+ot(Et,Wt),Bt+=dt(Et,at,xt,wt,ct);else if(Wt=v(J),typeof Wt=="function")for(J=Wt.call(J),Wt=0;!(Et=J.next()).done;)Et=Et.value,wt=Ut+ot(Et,Wt++),Bt+=dt(Et,at,xt,wt,ct);else if(wt==="object"){if(typeof J.then=="function")return dt(ut(J),at,xt,Et,ct);throw at=String(J),Error("Objects are not valid as a React child (found: "+(at==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":at)+"). If you meant to render a collection of children, use an array instead.")}return Bt}function j(J,at,xt){if(J==null)return J;var Et=[],ct=0;return dt(J,Et,"","",function(wt){return at.call(xt,wt,ct++)}),Et}function tt(J){if(J._status===-1){var at=J._result;at=at(),at.then(function(xt){(J._status===0||J._status===-1)&&(J._status=1,J._result=xt)},function(xt){(J._status===0||J._status===-1)&&(J._status=2,J._result=xt)}),J._status===-1&&(J._status=0,J._result=at)}if(J._status===1)return J._result.default;throw J._result}var nt=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var at=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(at))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)};function _t(){}return hn.Children={map:j,forEach:function(J,at,xt){j(J,function(){at.apply(this,arguments)},xt)},count:function(J){var at=0;return j(J,function(){at++}),at},toArray:function(J){return j(J,function(at){return at})||[]},only:function(J){if(!U(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},hn.Component=M,hn.Fragment=e,hn.Profiler=s,hn.PureComponent=R,hn.StrictMode=n,hn.Suspense=u,hn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,hn.__COMPILER_RUNTIME={__proto__:null,c:function(J){return N.H.useMemoCache(J)}},hn.cache=function(J){return function(){return J.apply(null,arguments)}},hn.cloneElement=function(J,at,xt){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var Et=b({},J.props),ct=J.key,wt=void 0;if(at!=null)for(Bt in at.ref!==void 0&&(wt=void 0),at.key!==void 0&&(ct=""+at.key),at)!I.call(at,Bt)||Bt==="key"||Bt==="__self"||Bt==="__source"||Bt==="ref"&&at.ref===void 0||(Et[Bt]=at[Bt]);var Bt=arguments.length-2;if(Bt===1)Et.children=xt;else if(1<Bt){for(var Ut=Array(Bt),Wt=0;Wt<Bt;Wt++)Ut[Wt]=arguments[Wt+2];Et.children=Ut}return F(J.type,ct,void 0,void 0,wt,Et)},hn.createContext=function(J){return J={$$typeof:a,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:r,_context:J},J},hn.createElement=function(J,at,xt){var Et,ct={},wt=null;if(at!=null)for(Et in at.key!==void 0&&(wt=""+at.key),at)I.call(at,Et)&&Et!=="key"&&Et!=="__self"&&Et!=="__source"&&(ct[Et]=at[Et]);var Bt=arguments.length-2;if(Bt===1)ct.children=xt;else if(1<Bt){for(var Ut=Array(Bt),Wt=0;Wt<Bt;Wt++)Ut[Wt]=arguments[Wt+2];ct.children=Ut}if(J&&J.defaultProps)for(Et in Bt=J.defaultProps,Bt)ct[Et]===void 0&&(ct[Et]=Bt[Et]);return F(J,wt,void 0,void 0,null,ct)},hn.createRef=function(){return{current:null}},hn.forwardRef=function(J){return{$$typeof:l,render:J}},hn.isValidElement=U,hn.lazy=function(J){return{$$typeof:m,_payload:{_status:-1,_result:J},_init:tt}},hn.memo=function(J,at){return{$$typeof:f,type:J,compare:at===void 0?null:at}},hn.startTransition=function(J){var at=N.T,xt={};N.T=xt;try{var Et=J(),ct=N.S;ct!==null&&ct(xt,Et),typeof Et=="object"&&Et!==null&&typeof Et.then=="function"&&Et.then(_t,nt)}catch(wt){nt(wt)}finally{N.T=at}},hn.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},hn.use=function(J){return N.H.use(J)},hn.useActionState=function(J,at,xt){return N.H.useActionState(J,at,xt)},hn.useCallback=function(J,at){return N.H.useCallback(J,at)},hn.useContext=function(J){return N.H.useContext(J)},hn.useDebugValue=function(){},hn.useDeferredValue=function(J,at){return N.H.useDeferredValue(J,at)},hn.useEffect=function(J,at,xt){var Et=N.H;if(typeof xt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Et.useEffect(J,at)},hn.useId=function(){return N.H.useId()},hn.useImperativeHandle=function(J,at,xt){return N.H.useImperativeHandle(J,at,xt)},hn.useInsertionEffect=function(J,at){return N.H.useInsertionEffect(J,at)},hn.useLayoutEffect=function(J,at){return N.H.useLayoutEffect(J,at)},hn.useMemo=function(J,at){return N.H.useMemo(J,at)},hn.useOptimistic=function(J,at){return N.H.useOptimistic(J,at)},hn.useReducer=function(J,at,xt){return N.H.useReducer(J,at,xt)},hn.useRef=function(J){return N.H.useRef(J)},hn.useState=function(J){return N.H.useState(J)},hn.useSyncExternalStore=function(J,at,xt){return N.H.useSyncExternalStore(J,at,xt)},hn.useTransition=function(){return N.H.useTransition()},hn.version="19.1.0",hn}var RR;function i0(){return RR||(RR=1,RT.exports=iF()),RT.exports}var lt=i0();const Oa=UE(lt);var LT={exports:{}},j2={},DT={exports:{}},BT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LR;function sF(){return LR||(LR=1,function(i){function t(j,tt){var nt=j.length;j.push(tt);t:for(;0<nt;){var _t=nt-1>>>1,J=j[_t];if(0<s(J,tt))j[_t]=tt,j[nt]=J,nt=_t;else break t}}function e(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var tt=j[0],nt=j.pop();if(nt!==tt){j[0]=nt;t:for(var _t=0,J=j.length,at=J>>>1;_t<at;){var xt=2*(_t+1)-1,Et=j[xt],ct=xt+1,wt=j[ct];if(0>s(Et,nt))ct<J&&0>s(wt,Et)?(j[_t]=wt,j[ct]=nt,_t=ct):(j[_t]=Et,j[xt]=nt,_t=xt);else if(ct<J&&0>s(wt,nt))j[_t]=wt,j[ct]=nt,_t=ct;else break t}}return tt}function s(j,tt){var nt=j.sortIndex-tt.sortIndex;return nt!==0?nt:j.id-tt.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();i.unstable_now=function(){return a.now()-l}}var u=[],f=[],m=1,g=null,v=3,_=!1,b=!1,C=!1,M=!1,S=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function B(j){for(var tt=e(f);tt!==null;){if(tt.callback===null)n(f);else if(tt.startTime<=j)n(f),tt.sortIndex=tt.expirationTime,t(u,tt);else break;tt=e(f)}}function N(j){if(C=!1,B(j),!b)if(e(u)!==null)b=!0,I||(I=!0,ot());else{var tt=e(f);tt!==null&&dt(N,tt.startTime-j)}}var I=!1,F=-1,z=5,U=-1;function P(){return M?!0:!(i.unstable_now()-U<z)}function X(){if(M=!1,I){var j=i.unstable_now();U=j;var tt=!0;try{t:{b=!1,C&&(C=!1,R(F),F=-1),_=!0;var nt=v;try{e:{for(B(j),g=e(u);g!==null&&!(g.expirationTime>j&&P());){var _t=g.callback;if(typeof _t=="function"){g.callback=null,v=g.priorityLevel;var J=_t(g.expirationTime<=j);if(j=i.unstable_now(),typeof J=="function"){g.callback=J,B(j),tt=!0;break e}g===e(u)&&n(u),B(j)}else n(u);g=e(u)}if(g!==null)tt=!0;else{var at=e(f);at!==null&&dt(N,at.startTime-j),tt=!1}}break t}finally{g=null,v=nt,_=!1}tt=void 0}}finally{tt?ot():I=!1}}}var ot;if(typeof D=="function")ot=function(){D(X)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,ut=it.port2;it.port1.onmessage=X,ot=function(){ut.postMessage(null)}}else ot=function(){S(X,0)};function dt(j,tt){F=S(function(){j(i.unstable_now())},tt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(j){switch(v){case 1:case 2:case 3:var tt=3;break;default:tt=v}var nt=v;v=tt;try{return j()}finally{v=nt}},i.unstable_requestPaint=function(){M=!0},i.unstable_runWithPriority=function(j,tt){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var nt=v;v=j;try{return tt()}finally{v=nt}},i.unstable_scheduleCallback=function(j,tt,nt){var _t=i.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?_t+nt:_t):nt=_t,j){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=nt+J,j={id:m++,callback:tt,priorityLevel:j,startTime:nt,expirationTime:J,sortIndex:-1},nt>_t?(j.sortIndex=nt,t(f,j),e(u)===null&&j===e(f)&&(C?(R(F),F=-1):C=!0,dt(N,nt-_t))):(j.sortIndex=J,t(u,j),b||_||(b=!0,I||(I=!0,ot()))),j},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(j){var tt=v;return function(){var nt=v;v=tt;try{return j.apply(this,arguments)}finally{v=nt}}}}(BT)),BT}var DR;function rF(){return DR||(DR=1,DT.exports=sF()),DT.exports}var OT={exports:{}},Xr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BR;function aF(){if(BR)return Xr;BR=1;var i=i0();function t(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(u,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:u,containerInfo:f,implementation:m}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Xr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Xr.createPortal=function(u,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return r(u,f,null,m)},Xr.flushSync=function(u){var f=a.T,m=n.p;try{if(a.T=null,n.p=2,u)return u()}finally{a.T=f,n.p=m,n.d.f()}},Xr.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(u,f))},Xr.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},Xr.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var m=f.as,g=l(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:_}):m==="script"&&n.d.X(u,{crossOrigin:g,integrity:v,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Xr.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=l(f.as,f.crossOrigin);n.d.M(u,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(u)},Xr.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=l(m,f.crossOrigin);n.d.L(u,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Xr.preloadModule=function(u,f){if(typeof u=="string")if(f){var m=l(f.as,f.crossOrigin);n.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(u)},Xr.requestFormReset=function(u){n.d.r(u)},Xr.unstable_batchedUpdates=function(u,f){return u(f)},Xr.useFormState=function(u,f,m){return a.H.useFormState(u,f,m)},Xr.useFormStatus=function(){return a.H.useHostTransitionStatus()},Xr.version="19.1.0",Xr}var OR;function hD(){if(OR)return OT.exports;OR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),OT.exports=aF(),OT.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NR;function oF(){if(NR)return j2;NR=1;var i=rF(),t=i0(),e=hD();function n(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function r(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function a(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(r(o)!==o)throw Error(n(188))}function u(o){var c=o.alternate;if(!c){if(c=r(o),c===null)throw Error(n(188));return c!==o?null:o}for(var p=o,y=c;;){var E=p.return;if(E===null)break;var w=E.alternate;if(w===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===w.child){for(w=E.child;w;){if(w===p)return l(E),o;if(w===y)return l(E),c;w=w.sibling}throw Error(n(188))}if(p.return!==y.return)p=E,y=w;else{for(var H=!1,q=E.child;q;){if(q===p){H=!0,p=E,y=w;break}if(q===y){H=!0,y=E,p=w;break}q=q.sibling}if(!H){for(q=w.child;q;){if(q===p){H=!0,p=w,y=E;break}if(q===y){H=!0,y=w,p=E;break}q=q.sibling}if(!H)throw Error(n(189))}}if(p.alternate!==y)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?o:c}function f(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=f(o),c!==null)return c;o=o.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),D=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function ot(o){return o===null||typeof o!="object"?null:(o=X&&o[X]||o["@@iterator"],typeof o=="function"?o:null)}var it=Symbol.for("react.client.reference");function ut(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===it?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case M:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case I:return"SuspenseList";case U:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case _:return"Portal";case D:return(o.displayName||"Context")+".Provider";case R:return(o._context.displayName||"Context")+".Consumer";case B:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case F:return c=o.displayName||null,c!==null?c:ut(o.type)||"Memo";case z:c=o._payload,o=o._init;try{return ut(o(c))}catch{}}return null}var dt=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt={pending:!1,data:null,method:null,action:null},_t=[],J=-1;function at(o){return{current:o}}function xt(o){0>J||(o.current=_t[J],_t[J]=null,J--)}function Et(o,c){J++,_t[J]=o.current,o.current=c}var ct=at(null),wt=at(null),Bt=at(null),Ut=at(null);function Wt(o,c){switch(Et(Bt,c),Et(wt,o),Et(ct,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?$7(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=$7(c),o=tR(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}xt(ct),Et(ct,o)}function ve(){xt(ct),xt(wt),xt(Bt)}function ee(o){o.memoizedState!==null&&Et(Ut,o);var c=ct.current,p=tR(c,o.type);c!==p&&(Et(wt,o),Et(ct,p))}function Ye(o){wt.current===o&&(xt(ct),xt(wt)),Ut.current===o&&(xt(Ut),H2._currentValue=nt)}var we=Object.prototype.hasOwnProperty,re=i.unstable_scheduleCallback,Z=i.unstable_cancelCallback,Kt=i.unstable_shouldYield,Ft=i.unstable_requestPaint,Vt=i.unstable_now,Gt=i.unstable_getCurrentPriorityLevel,be=i.unstable_ImmediatePriority,qt=i.unstable_UserBlockingPriority,$=i.unstable_NormalPriority,Q=i.unstable_LowPriority,vt=i.unstable_IdlePriority,It=i.log,jt=i.unstable_setDisableYieldValue,Ot=null,ne=null;function te(o){if(typeof It=="function"&&jt(o),ne&&typeof ne.setStrictMode=="function")try{ne.setStrictMode(Ot,o)}catch{}}var ge=Math.clz32?Math.clz32:_e,De=Math.log,Jt=Math.LN2;function _e(o){return o>>>=0,o===0?32:31-(De(o)/Jt|0)|0}var Se=256,Te=4194304;function ce(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function rn(o,c,p){var y=o.pendingLanes;if(y===0)return 0;var E=0,w=o.suspendedLanes,H=o.pingedLanes;o=o.warmLanes;var q=y&134217727;return q!==0?(y=q&~w,y!==0?E=ce(y):(H&=q,H!==0?E=ce(H):p||(p=q&~o,p!==0&&(E=ce(p))))):(q=y&~w,q!==0?E=ce(q):H!==0?E=ce(H):p||(p=y&~o,p!==0&&(E=ce(p)))),E===0?0:c!==0&&c!==E&&(c&w)===0&&(w=E&-E,p=c&-c,w>=p||w===32&&(p&4194048)!==0)?c:E}function He(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Gn(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var o=Se;return Se<<=1,(Se&4194048)===0&&(Se=256),o}function ue(){var o=Te;return Te<<=1,(Te&62914560)===0&&(Te=4194304),o}function Nt(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function Qt(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function fe(o,c,p,y,E,w){var H=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var q=o.entanglements,st=o.expirationTimes,St=o.hiddenUpdates;for(p=H&~p;0<p;){var zt=31-ge(p),Xt=1<<zt;q[zt]=0,st[zt]=-1;var Tt=St[zt];if(Tt!==null)for(St[zt]=null,zt=0;zt<Tt.length;zt++){var Lt=Tt[zt];Lt!==null&&(Lt.lane&=-536870913)}p&=~Xt}y!==0&&he(o,y,0),w!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=w&~(H&~c))}function he(o,c,p){o.pendingLanes|=c,o.suspendedLanes&=~c;var y=31-ge(c);o.entangledLanes|=c,o.entanglements[y]=o.entanglements[y]|1073741824|p&4194090}function qe(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var y=31-ge(p),E=1<<y;E&c|o[y]&c&&(o[y]|=c),p&=~E}}function Jn(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ei(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Cn(){var o=tt.p;return o!==0?o:(o=window.event,o===void 0?32:_R(o.type))}function Ur(o,c){var p=tt.p;try{return tt.p=o,c()}finally{tt.p=p}}var ls=Math.random().toString(36).slice(2),Ji="__reactFiber$"+ls,cs="__reactProps$"+ls,$s="__reactContainer$"+ls,Pr="__reactEvents$"+ls,mp="__reactListeners$"+ls,lo="__reactHandles$"+ls,gr="__reactResources$"+ls,co="__reactMarker$"+ls;function ti(o){delete o[Ji],delete o[cs],delete o[Pr],delete o[mp],delete o[lo]}function uo(o){var c=o[Ji];if(c)return c;for(var p=o.parentNode;p;){if(c=p[$s]||p[Ji]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=sR(o);o!==null;){if(p=o[Ji])return p;o=sR(o)}return c}o=p,p=o.parentNode}return null}function ho(o){if(o=o[Ji]||o[$s]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Nc(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(n(33))}function Nl(o){var c=o[gr];return c||(c=o[gr]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Zi(o){o[co]=!0}var uf=new Set,hf={};function fo(o,c){Y(o,c),Y(o+"Capture",c)}function Y(o,c){for(hf[o]=c,o=0;o<c.length;o++)uf.add(c[o])}var pt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ct={},Rt={};function yt(o){return we.call(Rt,o)?!0:we.call(Ct,o)?!1:pt.test(o)?Rt[o]=!0:(Ct[o]=!0,!1)}function Yt(o,c,p){if(yt(c))if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+p)}}function se(o,c,p){if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+p)}}function ae(o,c,p,y){if(y===null)o.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(p);return}o.setAttributeNS(c,p,""+y)}}var Ae,Ge;function Oe(o){if(Ae===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);Ae=c&&c[1]||"",Ge=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ae+o+Ge}var Ce=!1;function pn(o,c){if(!o||Ce)return"";Ce=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var Xt=function(){throw Error()};if(Object.defineProperty(Xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xt,[])}catch(Lt){var Tt=Lt}Reflect.construct(o,[],Xt)}else{try{Xt.call()}catch(Lt){Tt=Lt}o.call(Xt.prototype)}}else{try{throw Error()}catch(Lt){Tt=Lt}(Xt=o())&&typeof Xt.catch=="function"&&Xt.catch(function(){})}}catch(Lt){if(Lt&&Tt&&typeof Lt.stack=="string")return[Lt.stack,Tt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=y.DetermineComponentFrameRoot(),H=w[0],q=w[1];if(H&&q){var st=H.split(`
`),St=q.split(`
`);for(E=y=0;y<st.length&&!st[y].includes("DetermineComponentFrameRoot");)y++;for(;E<St.length&&!St[E].includes("DetermineComponentFrameRoot");)E++;if(y===st.length||E===St.length)for(y=st.length-1,E=St.length-1;1<=y&&0<=E&&st[y]!==St[E];)E--;for(;1<=y&&0<=E;y--,E--)if(st[y]!==St[E]){if(y!==1||E!==1)do if(y--,E--,0>E||st[y]!==St[E]){var zt=`
`+st[y].replace(" at new "," at ");return o.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",o.displayName)),zt}while(1<=y&&0<=E);break}}}finally{Ce=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?Oe(p):""}function In(o){switch(o.tag){case 26:case 27:case 5:return Oe(o.type);case 16:return Oe("Lazy");case 13:return Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return pn(o.type,!1);case 11:return pn(o.type.render,!1);case 1:return pn(o.type,!0);case 31:return Oe("Activity");default:return""}}function Mi(o){try{var c="";do c+=In(o),o=o.return;while(o);return c}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function yn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function bn(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ie(o){var c=bn(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),y=""+o[c];if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var E=p.get,w=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return E.call(this)},set:function(H){y=""+H,w.call(this,H)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(H){y=""+H},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Ri(o){o._valueTracker||(o._valueTracker=Ie(o))}function Dn(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return o&&(y=bn(o)?o.checked?"true":"false":o.value),o=y,o!==p?(c.setValue(o),!0):!1}function Bs(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Wo=/[\n"\\]/g;function ri(o){return o.replace(Wo,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Ko(o,c,p,y,E,w,H,q){o.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.type=H:o.removeAttribute("type"),c!=null?H==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+yn(c)):o.value!==""+yn(c)&&(o.value=""+yn(c)):H!=="submit"&&H!=="reset"||o.removeAttribute("value"),c!=null?Os(o,H,yn(c)):p!=null?Os(o,H,yn(p)):y!=null&&o.removeAttribute("value"),E==null&&w!=null&&(o.defaultChecked=!!w),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?o.name=""+yn(q):o.removeAttribute("name")}function ei(o,c,p,y,E,w,H,q){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.type=w),c!=null||p!=null){if(!(w!=="submit"&&w!=="reset"||c!=null))return;p=p!=null?""+yn(p):"",c=c!=null?""+yn(c):p,q||c===o.value||(o.value=c),o.defaultValue=c}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=q?o.checked:!!y,o.defaultChecked=!!y,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(o.name=H)}function Os(o,c,p){c==="number"&&Bs(o.ownerDocument)===o||o.defaultValue===""+p||(o.defaultValue=""+p)}function $i(o,c,p,y){if(o=o.options,c){c={};for(var E=0;E<p.length;E++)c["$"+p[E]]=!0;for(p=0;p<o.length;p++)E=c.hasOwnProperty("$"+o[p].value),o[p].selected!==E&&(o[p].selected=E),E&&y&&(o[p].defaultSelected=!0)}else{for(p=""+yn(p),c=null,E=0;E<o.length;E++){if(o[E].value===p){o[E].selected=!0,y&&(o[E].defaultSelected=!0);return}c!==null||o[E].disabled||(c=o[E])}c!==null&&(c.selected=!0)}}function ys(o,c,p){if(c!=null&&(c=""+yn(c),c!==o.value&&(o.value=c),p==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=p!=null?""+yn(p):""}function _s(o,c,p,y){if(c==null){if(y!=null){if(p!=null)throw Error(n(92));if(dt(y)){if(1<y.length)throw Error(n(93));y=y[0]}p=y}p==null&&(p=""),c=p}p=yn(c),o.defaultValue=p,y=o.textContent,y===p&&y!==""&&y!==null&&(o.value=y)}function vr(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var Jo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gp(o,c,p){var y=c.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":y?o.setProperty(c,p):typeof p!="number"||p===0||Jo.has(c)?c==="float"?o.cssFloat=p:o[c]=(""+p).trim():o[c]=p+"px"}function vp(o,c,p){if(c!=null&&typeof c!="object")throw Error(n(62));if(o=o.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var E in c)y=c[E],c.hasOwnProperty(E)&&p[E]!==y&&gp(o,E,y)}else for(var w in c)c.hasOwnProperty(w)&&gp(o,w,c[w])}function d0(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yp(o){return Xx.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var p0=null;function m0(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ic=null,Gu=null;function By(o){var c=ho(o);if(c&&(o=c.stateNode)){var p=o[cs]||null;t:switch(o=c.stateNode,c.type){case"input":if(Ko(o,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+ri(""+c)+'"][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==o&&y.form===o.form){var E=y[cs]||null;if(!E)throw Error(n(90));Ko(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(c=0;c<p.length;c++)y=p[c],y.form===o.form&&Dn(y)}break t;case"textarea":ys(o,p.value,p.defaultValue);break t;case"select":c=p.value,c!=null&&$i(o,!!p.multiple,c,!1)}}}var _p=!1;function Oy(o,c,p){if(_p)return o(c,p);_p=!0;try{var y=o(c);return y}finally{if(_p=!1,(Ic!==null||Gu!==null)&&(dl(),Ic&&(c=Ic,o=Gu,Gu=Ic=null,By(c),o)))for(c=0;c<o.length;c++)By(o[c])}}function ff(o,c){var p=o.stateNode;if(p===null)return null;var y=p[cs]||null;if(y===null)return null;p=y[c];t:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break t;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(n(231,c,typeof p));return p}var Zo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ap=!1;if(Zo)try{var df={};Object.defineProperty(df,"passive",{get:function(){Ap=!0}}),window.addEventListener("test",df,df),window.removeEventListener("test",df,df)}catch{Ap=!1}var Il=null,Ny=null,g0=null;function Iy(){if(g0)return g0;var o,c=Ny,p=c.length,y,E="value"in Il?Il.value:Il.textContent,w=E.length;for(o=0;o<p&&c[o]===E[o];o++);var H=p-o;for(y=1;y<=H&&c[p-y]===E[w-y];y++);return g0=E.slice(o,1<y?1-y:void 0)}function Uc(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function pf(){return!0}function xp(){return!1}function yr(o){function c(p,y,E,w,H){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=w,this.target=H,this.currentTarget=null;for(var q in o)o.hasOwnProperty(q)&&(p=o[q],this[q]=p?p(w):w[q]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?pf:xp,this.isPropagationStopped=xp,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=pf)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=pf)},persist:function(){},isPersistent:pf}),c}var Pc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mf=yr(Pc),gf=m({},Pc,{view:0,detail:0}),qx=yr(gf),Ul,vf,yf,_f=m({},gf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==yf&&(yf&&o.type==="mousemove"?(Ul=o.screenX-yf.screenX,vf=o.screenY-yf.screenY):vf=Ul=0,yf=o),Ul)},movementY:function(o){return"movementY"in o?o.movementY:vf}}),Uy=yr(_f),Yx=m({},_f,{dataTransfer:0}),jM=yr(Yx),Ns=m({},gf,{relatedTarget:0}),v0=yr(Ns),Wx=m({},Pc,{animationName:0,elapsedTime:0,pseudoElement:0}),Kx=yr(Wx),Jx=m({},Pc,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Zx=yr(Jx),bp=m({},Pc,{data:0}),y0=yr(bp),$x={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Py(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=eb[o])?!!c[o]:!1}function Sp(){return Py}var nb=m({},gf,{key:function(o){if(o.key){var c=$x[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Uc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?tb[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sp,charCode:function(o){return o.type==="keypress"?Uc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Uc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Fy=yr(nb),Hy=m({},_f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_0=yr(Hy),ib=m({},gf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sp}),zy=yr(ib),sb=m({},Pc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pl=yr(sb),Gy=m({},_f,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),XM=yr(Gy),rb=m({},Pc,{newState:0,oldState:0}),Fc=yr(rb),Fl=[9,13,27,32],Ep=Zo&&"CompositionEvent"in window,ku=null;Zo&&"documentMode"in document&&(ku=document.documentMode);var Mp=Zo&&"TextEvent"in window&&!ku,Tp=Zo&&(!Ep||ku&&8<ku&&11>=ku),Hc=" ",Is=!1;function Cp(o,c){switch(o){case"keyup":return Fl.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ky(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var zc=!1;function wp(o,c){switch(o){case"compositionend":return ky(c);case"keypress":return c.which!==32?null:(Is=!0,Hc);case"textInput":return o=c.data,o===Hc&&Is?null:o;default:return null}}function Vy(o,c){if(zc)return o==="compositionend"||!Ep&&Cp(o,c)?(o=Iy(),g0=Ny=Il=null,zc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Tp&&c.locale!=="ko"?null:c.data;default:return null}}var A0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qy(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!A0[o.type]:c==="textarea"}function Fr(o,c,p,y){Ic?Gu?Gu.push(y):Gu=[y]:Ic=y,c=sS(c,"onChange"),0<c.length&&(p=new mf("onChange","change",null,p,y),o.push({event:p,listeners:c}))}var Af=null,Vu=null;function ab(o){Y7(o,0)}function Rp(o){var c=Nc(o);if(Dn(c))return o}function x0(o,c){if(o==="change")return c}var b0=!1;if(Zo){var S0;if(Zo){var xf="oninput"in document;if(!xf){var bf=document.createElement("div");bf.setAttribute("oninput","return;"),xf=typeof bf.oninput=="function"}S0=xf}else S0=!1;b0=S0&&(!document.documentMode||9<document.documentMode)}function Ti(){Af&&(Af.detachEvent("onpropertychange",ob),Vu=Af=null)}function ob(o){if(o.propertyName==="value"&&Rp(Vu)){var c=[];Fr(c,Vu,o,m0(o)),Oy(ab,c)}}function qM(o,c,p){o==="focusin"?(Ti(),Af=c,Vu=p,Af.attachEvent("onpropertychange",ob)):o==="focusout"&&Ti()}function lb(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Rp(Vu)}function Lp(o,c){if(o==="click")return Rp(c)}function Gc(o,c){if(o==="input"||o==="change")return Rp(c)}function cb(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Hr=typeof Object.is=="function"?Object.is:cb;function po(o,c){if(Hr(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!we.call(c,E)||!Hr(o[E],c[E]))return!1}return!0}function zr(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function jy(o,c){var p=zr(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=c&&y>=c)return{node:p,offset:c-o};o=y}t:{for(;p;){if(p.nextSibling){p=p.nextSibling;break t}p=p.parentNode}p=void 0}p=zr(p)}}function Xy(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Xy(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function qy(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Bs(o.document);c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)o=c.contentWindow;else break;c=Bs(o.document)}return c}function Dp(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var Yy=Zo&&"documentMode"in document&&11>=document.documentMode,Hl=null,E0=null,Bp=null,M0=!1;function Wy(o,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;M0||Hl==null||Hl!==Bs(y)||(y=Hl,"selectionStart"in y&&Dp(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Bp&&po(Bp,y)||(Bp=y,y=sS(E0,"onSelect"),0<y.length&&(c=new mf("onSelect","select",null,c,p),o.push({event:c,listeners:y}),c.target=Hl)))}function Us(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var kc={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},T0={},ub={};Zo&&(ub=document.createElement("div").style,"AnimationEvent"in window||(delete kc.animationend.animation,delete kc.animationiteration.animation,delete kc.animationstart.animation),"TransitionEvent"in window||delete kc.transitionend.transition);function zl(o){if(T0[o])return T0[o];if(!kc[o])return o;var c=kc[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in ub)return T0[o]=c[p];return o}var _r=zl("animationend"),Ky=zl("animationiteration"),Gr=zl("animationstart"),hb=zl("transitionrun"),Gl=zl("transitionstart"),Sf=zl("transitioncancel"),kl=zl("transitionend"),C0=new Map,Op="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Op.push("scrollEnd");function As(o,c){C0.set(o,c),fo(c,[o])}var Jy=new WeakMap;function Ps(o,c){if(typeof o=="object"&&o!==null){var p=Jy.get(o);return p!==void 0?p:(c={value:o,source:c,stack:Mi(c)},Jy.set(o,c),c)}return{value:o,source:c,stack:Mi(c)}}var tr=[],Fa=0,w0=0;function Np(){for(var o=Fa,c=w0=Fa=0;c<o;){var p=tr[c];tr[c++]=null;var y=tr[c];tr[c++]=null;var E=tr[c];tr[c++]=null;var w=tr[c];if(tr[c++]=null,y!==null&&E!==null){var H=y.pending;H===null?E.next=E:(E.next=H.next,H.next=E),y.pending=E}w!==0&&Zy(p,E,w)}}function Vc(o,c,p,y){tr[Fa++]=o,tr[Fa++]=c,tr[Fa++]=p,tr[Fa++]=y,w0|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function R0(o,c,p,y){return Vc(o,c,p,y),Ef(o)}function Vl(o,c){return Vc(o,null,null,c),Ef(o)}function Zy(o,c,p){o.lanes|=p;var y=o.alternate;y!==null&&(y.lanes|=p);for(var E=!1,w=o.return;w!==null;)w.childLanes|=p,y=w.alternate,y!==null&&(y.childLanes|=p),w.tag===22&&(o=w.stateNode,o===null||o._visibility&1||(E=!0)),o=w,w=w.return;return o.tag===3?(w=o.stateNode,E&&c!==null&&(E=31-ge(p),o=w.hiddenUpdates,y=o[E],y===null?o[E]=[c]:y.push(c),c.lane=p|536870912),w):null}function Ef(o){if(50<fl)throw fl=0,oh=null,Error(n(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Qc={};function $y(o,c,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(o,c,p,y){return new $y(o,c,p,y)}function Ip(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Gi(o,c){var p=o.alternate;return p===null?(p=kr(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function t2(o,c){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,c=p.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function xs(o,c,p,y,E,w){var H=0;if(y=o,typeof o=="function")Ip(o)&&(H=1);else if(typeof o=="string")H=zP(o,p,ct.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case U:return o=kr(31,p,c,E),o.elementType=U,o.lanes=w,o;case b:return jc(p.children,E,w,c);case C:H=8,E|=24;break;case M:return o=kr(12,p,c,E|2),o.elementType=M,o.lanes=w,o;case N:return o=kr(13,p,c,E),o.elementType=N,o.lanes=w,o;case I:return o=kr(19,p,c,E),o.elementType=I,o.lanes=w,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case S:case D:H=10;break t;case R:H=9;break t;case B:H=11;break t;case F:H=14;break t;case z:H=16,y=null;break t}H=29,p=Error(n(130,o===null?"null":typeof o,"")),y=null}return c=kr(H,p,c,E),c.elementType=o,c.type=y,c.lanes=w,c}function jc(o,c,p,y){return o=kr(7,o,y,c),o.lanes=p,o}function Up(o,c,p){return o=kr(6,o,null,c),o.lanes=p,o}function L0(o,c,p){return c=kr(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var Mf=[],Vr=0,Pp=null,Tf=0,Fs=[],ca=0,Xc=null,$o=1,tl="";function Ql(o,c){Mf[Vr++]=Tf,Mf[Vr++]=Pp,Pp=o,Tf=c}function D0(o,c,p){Fs[ca++]=$o,Fs[ca++]=tl,Fs[ca++]=Xc,Xc=o;var y=$o;o=tl;var E=32-ge(y)-1;y&=~(1<<E),p+=1;var w=32-ge(c)+E;if(30<w){var H=E-E%5;w=(y&(1<<H)-1).toString(32),y>>=H,E-=H,$o=1<<32-ge(c)+E|p<<E|y,tl=w+o}else $o=1<<w|p<<E|y,tl=o}function e2(o){o.return!==null&&(Ql(o,1),D0(o,1,0))}function n2(o){for(;o===Pp;)Pp=Mf[--Vr],Mf[Vr]=null,Tf=Mf[--Vr],Mf[Vr]=null;for(;o===Xc;)Xc=Fs[--ca],Fs[ca]=null,tl=Fs[--ca],Fs[ca]=null,$o=Fs[--ca],Fs[ca]=null}var Ar=null,Li=null,kn=!1,Ha=null,ua=!1,B0=Error(n(519));function qc(o){var c=Error(n(418,""));throw Qu(Ps(c,o)),B0}function fb(o){var c=o.stateNode,p=o.type,y=o.memoizedProps;switch(c[Ji]=o,c[cs]=y,p){case"dialog":wn("cancel",c),wn("close",c);break;case"iframe":case"object":case"embed":wn("load",c);break;case"video":case"audio":for(p=0;p<O2.length;p++)wn(O2[p],c);break;case"source":wn("error",c);break;case"img":case"image":case"link":wn("error",c),wn("load",c);break;case"details":wn("toggle",c);break;case"input":wn("invalid",c),ei(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Ri(c);break;case"select":wn("invalid",c);break;case"textarea":wn("invalid",c),_s(c,y.value,y.defaultValue,y.children),Ri(c)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||c.textContent===""+p||y.suppressHydrationWarning===!0||Z7(c.textContent,p)?(y.popover!=null&&(wn("beforetoggle",c),wn("toggle",c)),y.onScroll!=null&&wn("scroll",c),y.onScrollEnd!=null&&wn("scrollend",c),y.onClick!=null&&(c.onclick=rS),c=!0):c=!1,c||qc(o)}function i2(o){for(Ar=o.return;Ar;)switch(Ar.tag){case 5:case 13:ua=!1;return;case 27:case 3:ua=!0;return;default:Ar=Ar.return}}function mo(o){if(o!==Ar)return!1;if(!kn)return i2(o),kn=!0,!1;var c=o.tag,p;if((p=c!==3&&c!==27)&&((p=c===5)&&(p=o.type,p=!(p!=="form"&&p!=="button")||dT(o.type,o.memoizedProps)),p=!p),p&&Li&&qc(o),i2(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));t:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(p=o.data,p==="/$"){if(c===0){Li=sc(o.nextSibling);break t}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++;o=o.nextSibling}Li=null}}else c===27?(c=Li,Jf(o.type)?(o=vT,vT=null,Li=o):Li=c):Li=Ar?sc(o.stateNode.nextSibling):null;return!0}function Cf(){Li=Ar=null,kn=!1}function jn(){var o=Ha;return o!==null&&(ze===null?ze=o:ze.push.apply(ze,o),Ha=null),o}function Qu(o){Ha===null?Ha=[o]:Ha.push(o)}var s2=at(null),Yc=null,jl=null;function Wc(o,c,p){Et(s2,c._currentValue),c._currentValue=p}function Xl(o){o._currentValue=s2.current,xt(s2)}function r2(o,c,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===p)break;o=o.return}}function Fp(o,c,p,y){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var w=E.dependencies;if(w!==null){var H=E.child;w=w.firstContext;t:for(;w!==null;){var q=w;w=E;for(var st=0;st<c.length;st++)if(q.context===c[st]){w.lanes|=p,q=w.alternate,q!==null&&(q.lanes|=p),r2(w.return,p,o),y||(H=null);break t}w=q.next}}else if(E.tag===18){if(H=E.return,H===null)throw Error(n(341));H.lanes|=p,w=H.alternate,w!==null&&(w.lanes|=p),r2(H,p,o),H=null}else H=E.child;if(H!==null)H.return=E;else for(H=E;H!==null;){if(H===o){H=null;break}if(E=H.sibling,E!==null){E.return=H.return,H=E;break}H=H.return}E=H}}function za(o,c,p,y){o=null;for(var E=c,w=!1;E!==null;){if(!w){if((E.flags&524288)!==0)w=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var H=E.alternate;if(H===null)throw Error(n(387));if(H=H.memoizedProps,H!==null){var q=E.type;Hr(E.pendingProps.value,H.value)||(o!==null?o.push(q):o=[q])}}else if(E===Ut.current){if(H=E.alternate,H===null)throw Error(n(387));H.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(H2):o=[H2])}E=E.return}o!==null&&Fp(c,o,p,y),c.flags|=262144}function Hp(o){for(o=o.firstContext;o!==null;){if(!Hr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function el(o){Yc=o,jl=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ii(o){return O0(Yc,o)}function zp(o,c){return Yc===null&&el(o),O0(o,c)}function O0(o,c){var p=c._currentValue;if(c={context:c,memoizedValue:p,next:null},jl===null){if(o===null)throw Error(n(308));jl=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else jl=jl.next=c;return p}var a2=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(p,y){o.push(y)}};this.abort=function(){c.aborted=!0,o.forEach(function(p){return p()})}},YM=i.unstable_scheduleCallback,db=i.unstable_NormalPriority,ts={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function N0(){return{controller:new a2,data:new Map,refCount:0}}function wf(o){o.refCount--,o.refCount===0&&YM(db,function(){o.controller.abort()})}var Rf=null,Gp=0,tn=0,Lf=null;function ha(o,c){if(Rf===null){var p=Rf=[];Gp=0,tn=sT(),Lf={status:"pending",value:void 0,then:function(y){p.push(y)}}}return Gp++,c.then(I0,I0),c}function I0(){if(--Gp===0&&Rf!==null){Lf!==null&&(Lf.status="fulfilled");var o=Rf;Rf=null,tn=0,Lf=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function WM(o,c){var p=[],y={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return o.then(function(){y.status="fulfilled",y.value=c;for(var E=0;E<p.length;E++)(0,p[E])(c)},function(E){for(y.status="rejected",y.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),y}var kp=j.S;j.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&ha(o,c),kp!==null&&kp(o,c)};var Ga=at(null);function Kc(){var o=Ga.current;return o!==null?o:We.pooledCache}function Vp(o,c){c===null?Et(Ga,Ga.current):Et(Ga,c.pool)}function U0(){var o=Kc();return o===null?null:{parent:ts._currentValue,pool:o}}var Qp=Error(n(460)),o2=Error(n(474)),go=Error(n(542)),jp={then:function(){}};function P0(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Df(){}function F0(o,c,p){switch(p=o[p],p===void 0?o.push(c):p!==c&&(c.then(Df,Df),c=p),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,pb(o),o;default:if(typeof c.status=="string")c.then(Df,Df);else{if(o=We,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=c,o.status="pending",o.then(function(y){if(c.status==="pending"){var E=c;E.status="fulfilled",E.value=y}},function(y){if(c.status==="pending"){var E=c;E.status="rejected",E.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,pb(o),o}throw ka=c,Qp}}var ka=null;function l2(){if(ka===null)throw Error(n(459));var o=ka;return ka=null,o}function pb(o){if(o===Qp||o===go)throw Error(n(483))}var ql=!1;function c2(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qe(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function nl(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Yl(o,c,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(Xn&2)!==0){var E=y.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),y.pending=c,c=Ef(o),Zy(o,null,p),c}return Vc(o,y,c,p),Ef(o)}function ju(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194048)!==0)){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,qe(o,p)}}function Bf(o,c){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var H={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};w===null?E=w=H:w=w.next=H,p=p.next}while(p!==null);w===null?E=w=c:w=w.next=c}else E=w=c;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:w,shared:y.shared,callbacks:y.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}var u2=!1;function Xp(){if(u2){var o=Lf;if(o!==null)throw o}}function Of(o,c,p,y){u2=!1;var E=o.updateQueue;ql=!1;var w=E.firstBaseUpdate,H=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var st=q,St=st.next;st.next=null,H===null?w=St:H.next=St,H=st;var zt=o.alternate;zt!==null&&(zt=zt.updateQueue,q=zt.lastBaseUpdate,q!==H&&(q===null?zt.firstBaseUpdate=St:q.next=St,zt.lastBaseUpdate=st))}if(w!==null){var Xt=E.baseState;H=0,zt=St=st=null,q=w;do{var Tt=q.lane&-536870913,Lt=Tt!==q.lane;if(Lt?(Ue&Tt)===Tt:(y&Tt)===Tt){Tt!==0&&Tt===tn&&(u2=!0),zt!==null&&(zt=zt.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});t:{var Xe=o,ke=q;Tt=c;var yi=p;switch(ke.tag){case 1:if(Xe=ke.payload,typeof Xe=="function"){Xt=Xe.call(yi,Xt,Tt);break t}Xt=Xe;break t;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=ke.payload,Tt=typeof Xe=="function"?Xe.call(yi,Xt,Tt):Xe,Tt==null)break t;Xt=m({},Xt,Tt);break t;case 2:ql=!0}}Tt=q.callback,Tt!==null&&(o.flags|=64,Lt&&(o.flags|=8192),Lt=E.callbacks,Lt===null?E.callbacks=[Tt]:Lt.push(Tt))}else Lt={lane:Tt,tag:q.tag,payload:q.payload,callback:q.callback,next:null},zt===null?(St=zt=Lt,st=Xt):zt=zt.next=Lt,H|=Tt;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;Lt=q,q=Lt.next,Lt.next=null,E.lastBaseUpdate=Lt,E.shared.pending=null}}while(!0);zt===null&&(st=Xt),E.baseState=st,E.firstBaseUpdate=St,E.lastBaseUpdate=zt,w===null&&(E.shared.lanes=0),Eo|=H,o.lanes=H,o.memoizedState=Xt}}function Nf(o,c){if(typeof o!="function")throw Error(n(191,o));o.call(c)}function mb(o,c){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)Nf(p[o],c)}var If=at(null),H0=at(0);function gb(o,c){o=Ya,Et(H0,o),Et(If,c),Ya=o|c.baseLanes}function h2(){Et(H0,Ya),Et(If,If.current)}function qp(){Ya=H0.current,xt(If),xt(H0)}var Wl=0,en=null,Zn=null,es=null,z0=!1,Jc=!1,xr=!1,us=0,Va=0,Hs=null,vb=0;function ki(){throw Error(n(321))}function er(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!Hr(o[p],c[p]))return!1;return!0}function Kl(o,c,p,y,E,w){return Wl=w,en=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,j.H=o===null||o.memoizedState===null?W0:C2,xr=!1,w=p(y,E),xr=!1,Jc&&(w=_b(c,p,y,E)),yb(o),w}function yb(o){j.H=Kp;var c=Zn!==null&&Zn.next!==null;if(Wl=0,es=Zn=en=null,z0=!1,Va=0,Hs=null,c)throw Error(n(300));o===null||bs||(o=o.dependencies,o!==null&&Hp(o)&&(bs=!0))}function _b(o,c,p,y){en=o;var E=0;do{if(Jc&&(Hs=null),Va=0,Jc=!1,25<=E)throw Error(n(301));if(E+=1,es=Zn=null,o.updateQueue!=null){var w=o.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}j.H=jb,w=c(p,y)}while(Jc);return w}function KM(){var o=j.H,c=o.useState()[0];return c=typeof c.then=="function"?vo(c):c,o=o.useState()[0],(Zn!==null?Zn.memoizedState:null)!==o&&(en.flags|=1024),c}function f2(){var o=us!==0;return us=0,o}function G0(o,c,p){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~p}function d2(o){if(z0){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}z0=!1}Wl=0,es=Zn=en=null,Jc=!1,Va=us=0,Hs=null}function br(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return es===null?en.memoizedState=es=o:es=es.next=o,es}function ns(){if(Zn===null){var o=en.alternate;o=o!==null?o.memoizedState:null}else o=Zn.next;var c=es===null?en.memoizedState:es.next;if(c!==null)es=c,Zn=o;else{if(o===null)throw en.alternate===null?Error(n(467)):Error(n(310));Zn=o,o={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},es===null?en.memoizedState=es=o:es=es.next=o}return es}function Zc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vo(o){var c=Va;return Va+=1,Hs===null&&(Hs=[]),o=F0(Hs,o,c),c=en,(es===null?c.memoizedState:es.next)===null&&(c=c.alternate,j.H=c===null||c.memoizedState===null?W0:C2),o}function k0(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return vo(o);if(o.$$typeof===D)return Ii(o)}throw Error(n(438,String(o)))}function p2(o){var c=null,p=en.updateQueue;if(p!==null&&(c=p.memoCache),c==null){var y=en.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(E){return E.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),p===null&&(p=Zc(),en.updateQueue=p),p.memoCache=c,p=c.data[c.index],p===void 0)for(p=c.data[c.index]=Array(o),y=0;y<o;y++)p[y]=P;return c.index++,p}function Jl(o,c){return typeof c=="function"?c(o):c}function $c(o){var c=ns();return m2(c,Zn,o)}function m2(o,c,p){var y=o.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=p;var E=o.baseQueue,w=y.pending;if(w!==null){if(E!==null){var H=E.next;E.next=w.next,w.next=H}c.baseQueue=E=w,y.pending=null}if(w=o.baseState,E===null)o.memoizedState=w;else{c=E.next;var q=H=null,st=null,St=c,zt=!1;do{var Xt=St.lane&-536870913;if(Xt!==St.lane?(Ue&Xt)===Xt:(Wl&Xt)===Xt){var Tt=St.revertLane;if(Tt===0)st!==null&&(st=st.next={lane:0,revertLane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),Xt===tn&&(zt=!0);else if((Wl&Tt)===Tt){St=St.next,Tt===tn&&(zt=!0);continue}else Xt={lane:0,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},st===null?(q=st=Xt,H=w):st=st.next=Xt,en.lanes|=Tt,Eo|=Tt;Xt=St.action,xr&&p(w,Xt),w=St.hasEagerState?St.eagerState:p(w,Xt)}else Tt={lane:Xt,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},st===null?(q=st=Tt,H=w):st=st.next=Tt,en.lanes|=Xt,Eo|=Xt;St=St.next}while(St!==null&&St!==c);if(st===null?H=w:st.next=q,!Hr(w,o.memoizedState)&&(bs=!0,zt&&(p=Lf,p!==null)))throw p;o.memoizedState=w,o.baseState=H,o.baseQueue=st,y.lastRenderedState=w}return E===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function g2(o){var c=ns(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=o;var y=p.dispatch,E=p.pending,w=c.memoizedState;if(E!==null){p.pending=null;var H=E=E.next;do w=o(w,H.action),H=H.next;while(H!==E);Hr(w,c.memoizedState)||(bs=!0),c.memoizedState=w,c.baseQueue===null&&(c.baseState=w),p.lastRenderedState=w}return[w,y]}function Ab(o,c,p){var y=en,E=ns(),w=kn;if(w){if(p===void 0)throw Error(n(407));p=p()}else p=c();var H=!Hr((Zn||E).memoizedState,p);H&&(E.memoizedState=p,bs=!0),E=E.queue;var q=bb.bind(null,y,E,o);if(Ff(2048,8,q,[o]),E.getSnapshot!==c||H||es!==null&&es.memoizedState.tag&1){if(y.flags|=2048,Pf(9,Yp(),xb.bind(null,y,E,p,c),null),We===null)throw Error(n(349));w||(Wl&124)!==0||Uf(y,c,p)}return p}function Uf(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=en.updateQueue,c===null?(c=Zc(),en.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function xb(o,c,p,y){c.value=p,c.getSnapshot=y,Sb(c)&&Eb(o)}function bb(o,c,p){return p(function(){Sb(c)&&Eb(o)})}function Sb(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!Hr(o,p)}catch{return!0}}function Eb(o){var c=Vl(o,2);c!==null&&Mr(c,o,2)}function v2(o){var c=br();if(typeof o=="function"){var p=o;if(o=p(),xr){te(!0);try{p()}finally{te(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jl,lastRenderedState:o},c}function Mb(o,c,p,y){return o.baseState=p,m2(o,Zn,typeof y=="function"?y:Jl)}function JM(o,c,p,y,E){if(Y0(o))throw Error(n(485));if(o=c.action,o!==null){var w={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){w.listeners.push(H)}};j.T!==null?p(!0):w.isTransition=!1,y(w),p=c.pending,p===null?(w.next=c.pending=w,Tb(c,w)):(w.next=p.next,c.pending=p.next=w)}}function Tb(o,c){var p=c.action,y=c.payload,E=o.state;if(c.isTransition){var w=j.T,H={};j.T=H;try{var q=p(E,y),st=j.S;st!==null&&st(H,q),Cb(o,c,q)}catch(St){y2(o,c,St)}finally{j.T=w}}else try{w=p(E,y),Cb(o,c,w)}catch(St){y2(o,c,St)}}function Cb(o,c,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){wb(o,c,y)},function(y){return y2(o,c,y)}):wb(o,c,p)}function wb(o,c,p){c.status="fulfilled",c.value=p,Rb(c),o.state=p,c=o.pending,c!==null&&(p=c.next,p===c?o.pending=null:(p=p.next,c.next=p,Tb(o,p)))}function y2(o,c,p){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=p,Rb(c),c=c.next;while(c!==y)}o.action=null}function Rb(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function _2(o,c){return c}function Lb(o,c){if(kn){var p=We.formState;if(p!==null){t:{var y=en;if(kn){if(Li){e:{for(var E=Li,w=ua;E.nodeType!==8;){if(!w){E=null;break e}if(E=sc(E.nextSibling),E===null){E=null;break e}}w=E.data,E=w==="F!"||w==="F"?E:null}if(E){Li=sc(E.nextSibling),y=E.data==="F!";break t}}qc(y)}y=!1}y&&(c=p[0])}}return p=br(),p.memoizedState=p.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_2,lastRenderedState:c},p.queue=y,p=Vb.bind(null,en,y),y.dispatch=p,y=v2(!1),w=q0.bind(null,en,!1,y.queue),y=br(),E={state:c,dispatch:null,action:o,pending:null},y.queue=E,p=JM.bind(null,en,E,w,p),E.dispatch=p,y.memoizedState=o,[c,p,!1]}function Db(o){var c=ns();return Bb(c,Zn,o)}function Bb(o,c,p){if(c=m2(o,c,_2)[0],o=$c(Jl)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=vo(c)}catch(H){throw H===Qp?go:H}else y=c;c=ns();var E=c.queue,w=E.dispatch;return p!==c.memoizedState&&(en.flags|=2048,Pf(9,Yp(),ZM.bind(null,E,p),null)),[y,w,o]}function ZM(o,c){o.action=c}function Ob(o){var c=ns(),p=Zn;if(p!==null)return Bb(c,p,o);ns(),c=c.memoizedState,p=ns();var y=p.queue.dispatch;return p.memoizedState=o,[c,y,!1]}function Pf(o,c,p,y){return o={tag:o,create:p,deps:y,inst:c,next:null},c=en.updateQueue,c===null&&(c=Zc(),en.updateQueue=c),p=c.lastEffect,p===null?c.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,c.lastEffect=o),o}function Yp(){return{destroy:void 0,resource:void 0}}function A2(){return ns().memoizedState}function V0(o,c,p,y){var E=br();y=y===void 0?null:y,en.flags|=o,E.memoizedState=Pf(1|c,Yp(),p,y)}function Ff(o,c,p,y){var E=ns();y=y===void 0?null:y;var w=E.memoizedState.inst;Zn!==null&&y!==null&&er(y,Zn.memoizedState.deps)?E.memoizedState=Pf(c,w,p,y):(en.flags|=o,E.memoizedState=Pf(1|c,w,p,y))}function x2(o,c){V0(8390656,8,o,c)}function b2(o,c){Ff(2048,8,o,c)}function Q0(o,c){return Ff(4,2,o,c)}function j0(o,c){return Ff(4,4,o,c)}function Nb(o,c){if(typeof c=="function"){o=o();var p=c(o);return function(){typeof p=="function"?p():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Ib(o,c,p){p=p!=null?p.concat([o]):null,Ff(4,4,Nb.bind(null,c,o),p)}function S2(){}function Ub(o,c){var p=ns();c=c===void 0?null:c;var y=p.memoizedState;return c!==null&&er(c,y[1])?y[0]:(p.memoizedState=[o,c],o)}function E2(o,c){var p=ns();c=c===void 0?null:c;var y=p.memoizedState;if(c!==null&&er(c,y[1]))return y[0];if(y=o(),xr){te(!0);try{o()}finally{te(!1)}}return p.memoizedState=[y,c],y}function X0(o,c,p){return p===void 0||(Wl&1073741824)!==0?o.memoizedState=c:(o.memoizedState=p,o=a1(),en.lanes|=o,Eo|=o,p)}function Pb(o,c,p,y){return Hr(p,c)?p:If.current!==null?(o=X0(o,p,y),Hr(o,c)||(bs=!0),o):(Wl&42)===0?(bs=!0,o.memoizedState=p):(o=a1(),en.lanes|=o,Eo|=o,c)}function Fb(o,c,p,y,E){var w=tt.p;tt.p=w!==0&&8>w?w:8;var H=j.T,q={};j.T=q,q0(o,!1,c,p);try{var st=E(),St=j.S;if(St!==null&&St(q,st),st!==null&&typeof st=="object"&&typeof st.then=="function"){var zt=WM(st,y);Wp(o,c,zt,Fi(o))}else Wp(o,c,y,Fi(o))}catch(Xt){Wp(o,c,{then:function(){},status:"rejected",reason:Xt},Fi())}finally{tt.p=w,j.T=H}}function $M(){}function M2(o,c,p,y){if(o.tag!==5)throw Error(n(476));var E=Hb(o).queue;Fb(o,E,c,nt,p===null?$M:function(){return zb(o),p(y)})}function Hb(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:nt,baseState:nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jl,lastRenderedState:nt},next:null};var p={};return c.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jl,lastRenderedState:p},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function zb(o){var c=Hb(o).next.queue;Wp(o,c,{},Fi())}function T2(){return Ii(H2)}function Gb(){return ns().memoizedState}function kb(){return ns().memoizedState}function tT(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var p=Fi();o=nl(p);var y=Yl(c,o,p);y!==null&&(Mr(y,c,p),ju(y,c,p)),c={cache:N0()},o.payload=c;return}c=c.return}}function eT(o,c,p){var y=Fi();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},Y0(o)?Qb(c,p):(p=R0(o,c,p,y),p!==null&&(Mr(p,o,y),fa(p,c,y)))}function Vb(o,c,p){var y=Fi();Wp(o,c,p,y)}function Wp(o,c,p,y){var E={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(Y0(o))Qb(c,E);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=c.lastRenderedReducer,w!==null))try{var H=c.lastRenderedState,q=w(H,p);if(E.hasEagerState=!0,E.eagerState=q,Hr(q,H))return Vc(o,c,E,0),We===null&&Np(),!1}catch{}finally{}if(p=R0(o,c,E,y),p!==null)return Mr(p,o,y),fa(p,c,y),!0}return!1}function q0(o,c,p,y){if(y={lane:2,revertLane:sT(),action:y,hasEagerState:!1,eagerState:null,next:null},Y0(o)){if(c)throw Error(n(479))}else c=R0(o,p,y,2),c!==null&&Mr(c,o,2)}function Y0(o){var c=o.alternate;return o===en||c!==null&&c===en}function Qb(o,c){Jc=z0=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function fa(o,c,p){if((p&4194048)!==0){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,qe(o,p)}}var Kp={readContext:Ii,use:k0,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useLayoutEffect:ki,useInsertionEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useSyncExternalStore:ki,useId:ki,useHostTransitionStatus:ki,useFormState:ki,useActionState:ki,useOptimistic:ki,useMemoCache:ki,useCacheRefresh:ki},W0={readContext:Ii,use:k0,useCallback:function(o,c){return br().memoizedState=[o,c===void 0?null:c],o},useContext:Ii,useEffect:x2,useImperativeHandle:function(o,c,p){p=p!=null?p.concat([o]):null,V0(4194308,4,Nb.bind(null,c,o),p)},useLayoutEffect:function(o,c){return V0(4194308,4,o,c)},useInsertionEffect:function(o,c){V0(4,2,o,c)},useMemo:function(o,c){var p=br();c=c===void 0?null:c;var y=o();if(xr){te(!0);try{o()}finally{te(!1)}}return p.memoizedState=[y,c],y},useReducer:function(o,c,p){var y=br();if(p!==void 0){var E=p(c);if(xr){te(!0);try{p(c)}finally{te(!1)}}}else E=c;return y.memoizedState=y.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},y.queue=o,o=o.dispatch=eT.bind(null,en,o),[y.memoizedState,o]},useRef:function(o){var c=br();return o={current:o},c.memoizedState=o},useState:function(o){o=v2(o);var c=o.queue,p=Vb.bind(null,en,c);return c.dispatch=p,[o.memoizedState,p]},useDebugValue:S2,useDeferredValue:function(o,c){var p=br();return X0(p,o,c)},useTransition:function(){var o=v2(!1);return o=Fb.bind(null,en,o.queue,!0,!1),br().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,p){var y=en,E=br();if(kn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=c(),We===null)throw Error(n(349));(Ue&124)!==0||Uf(y,c,p)}E.memoizedState=p;var w={value:p,getSnapshot:c};return E.queue=w,x2(bb.bind(null,y,w,o),[o]),y.flags|=2048,Pf(9,Yp(),xb.bind(null,y,w,p,c),null),p},useId:function(){var o=br(),c=We.identifierPrefix;if(kn){var p=tl,y=$o;p=(y&~(1<<32-ge(y)-1)).toString(32)+p,c="«"+c+"R"+p,p=us++,0<p&&(c+="H"+p.toString(32)),c+="»"}else p=vb++,c="«"+c+"r"+p.toString(32)+"»";return o.memoizedState=c},useHostTransitionStatus:T2,useFormState:Lb,useActionState:Lb,useOptimistic:function(o){var c=br();c.memoizedState=c.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=p,c=q0.bind(null,en,!0,p),p.dispatch=c,[o,c]},useMemoCache:p2,useCacheRefresh:function(){return br().memoizedState=tT.bind(null,en)}},C2={readContext:Ii,use:k0,useCallback:Ub,useContext:Ii,useEffect:b2,useImperativeHandle:Ib,useInsertionEffect:Q0,useLayoutEffect:j0,useMemo:E2,useReducer:$c,useRef:A2,useState:function(){return $c(Jl)},useDebugValue:S2,useDeferredValue:function(o,c){var p=ns();return Pb(p,Zn.memoizedState,o,c)},useTransition:function(){var o=$c(Jl)[0],c=ns().memoizedState;return[typeof o=="boolean"?o:vo(o),c]},useSyncExternalStore:Ab,useId:Gb,useHostTransitionStatus:T2,useFormState:Db,useActionState:Db,useOptimistic:function(o,c){var p=ns();return Mb(p,Zn,o,c)},useMemoCache:p2,useCacheRefresh:kb},jb={readContext:Ii,use:k0,useCallback:Ub,useContext:Ii,useEffect:b2,useImperativeHandle:Ib,useInsertionEffect:Q0,useLayoutEffect:j0,useMemo:E2,useReducer:g2,useRef:A2,useState:function(){return g2(Jl)},useDebugValue:S2,useDeferredValue:function(o,c){var p=ns();return Zn===null?X0(p,o,c):Pb(p,Zn.memoizedState,o,c)},useTransition:function(){var o=g2(Jl)[0],c=ns().memoizedState;return[typeof o=="boolean"?o:vo(o),c]},useSyncExternalStore:Ab,useId:Gb,useHostTransitionStatus:T2,useFormState:Ob,useActionState:Ob,useOptimistic:function(o,c){var p=ns();return Zn!==null?Mb(p,Zn,o,c):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:p2,useCacheRefresh:kb},Xu=null,Jp=0;function Zp(o){var c=Jp;return Jp+=1,Xu===null&&(Xu=[]),F0(Xu,o,c)}function Hf(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function K0(o,c){throw c.$$typeof===g?Error(n(525)):(o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function Xb(o){var c=o._init;return c(o._payload)}function qb(o){function c(gt,ft){if(o){var bt=gt.deletions;bt===null?(gt.deletions=[ft],gt.flags|=16):bt.push(ft)}}function p(gt,ft){if(!o)return null;for(;ft!==null;)c(gt,ft),ft=ft.sibling;return null}function y(gt){for(var ft=new Map;gt!==null;)gt.key!==null?ft.set(gt.key,gt):ft.set(gt.index,gt),gt=gt.sibling;return ft}function E(gt,ft){return gt=Gi(gt,ft),gt.index=0,gt.sibling=null,gt}function w(gt,ft,bt){return gt.index=bt,o?(bt=gt.alternate,bt!==null?(bt=bt.index,bt<ft?(gt.flags|=67108866,ft):bt):(gt.flags|=67108866,ft)):(gt.flags|=1048576,ft)}function H(gt){return o&&gt.alternate===null&&(gt.flags|=67108866),gt}function q(gt,ft,bt,kt){return ft===null||ft.tag!==6?(ft=Up(bt,gt.mode,kt),ft.return=gt,ft):(ft=E(ft,bt),ft.return=gt,ft)}function st(gt,ft,bt,kt){var Ee=bt.type;return Ee===b?zt(gt,ft,bt.props.children,kt,bt.key):ft!==null&&(ft.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===z&&Xb(Ee)===ft.type)?(ft=E(ft,bt.props),Hf(ft,bt),ft.return=gt,ft):(ft=xs(bt.type,bt.key,bt.props,null,gt.mode,kt),Hf(ft,bt),ft.return=gt,ft)}function St(gt,ft,bt,kt){return ft===null||ft.tag!==4||ft.stateNode.containerInfo!==bt.containerInfo||ft.stateNode.implementation!==bt.implementation?(ft=L0(bt,gt.mode,kt),ft.return=gt,ft):(ft=E(ft,bt.children||[]),ft.return=gt,ft)}function zt(gt,ft,bt,kt,Ee){return ft===null||ft.tag!==7?(ft=jc(bt,gt.mode,kt,Ee),ft.return=gt,ft):(ft=E(ft,bt),ft.return=gt,ft)}function Xt(gt,ft,bt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return ft=Up(""+ft,gt.mode,bt),ft.return=gt,ft;if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case v:return bt=xs(ft.type,ft.key,ft.props,null,gt.mode,bt),Hf(bt,ft),bt.return=gt,bt;case _:return ft=L0(ft,gt.mode,bt),ft.return=gt,ft;case z:var kt=ft._init;return ft=kt(ft._payload),Xt(gt,ft,bt)}if(dt(ft)||ot(ft))return ft=jc(ft,gt.mode,bt,null),ft.return=gt,ft;if(typeof ft.then=="function")return Xt(gt,Zp(ft),bt);if(ft.$$typeof===D)return Xt(gt,zp(gt,ft),bt);K0(gt,ft)}return null}function Tt(gt,ft,bt,kt){var Ee=ft!==null?ft.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return Ee!==null?null:q(gt,ft,""+bt,kt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case v:return bt.key===Ee?st(gt,ft,bt,kt):null;case _:return bt.key===Ee?St(gt,ft,bt,kt):null;case z:return Ee=bt._init,bt=Ee(bt._payload),Tt(gt,ft,bt,kt)}if(dt(bt)||ot(bt))return Ee!==null?null:zt(gt,ft,bt,kt,null);if(typeof bt.then=="function")return Tt(gt,ft,Zp(bt),kt);if(bt.$$typeof===D)return Tt(gt,ft,zp(gt,bt),kt);K0(gt,bt)}return null}function Lt(gt,ft,bt,kt,Ee){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return gt=gt.get(bt)||null,q(ft,gt,""+kt,Ee);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case v:return gt=gt.get(kt.key===null?bt:kt.key)||null,st(ft,gt,kt,Ee);case _:return gt=gt.get(kt.key===null?bt:kt.key)||null,St(ft,gt,kt,Ee);case z:var En=kt._init;return kt=En(kt._payload),Lt(gt,ft,bt,kt,Ee)}if(dt(kt)||ot(kt))return gt=gt.get(bt)||null,zt(ft,gt,kt,Ee,null);if(typeof kt.then=="function")return Lt(gt,ft,bt,Zp(kt),Ee);if(kt.$$typeof===D)return Lt(gt,ft,bt,zp(ft,kt),Ee);K0(ft,kt)}return null}function Xe(gt,ft,bt,kt){for(var Ee=null,En=null,Be=ft,Ve=ft=0,sr=null;Be!==null&&Ve<bt.length;Ve++){Be.index>Ve?(sr=Be,Be=null):sr=Be.sibling;var Yn=Tt(gt,Be,bt[Ve],kt);if(Yn===null){Be===null&&(Be=sr);break}o&&Be&&Yn.alternate===null&&c(gt,Be),ft=w(Yn,ft,Ve),En===null?Ee=Yn:En.sibling=Yn,En=Yn,Be=sr}if(Ve===bt.length)return p(gt,Be),kn&&Ql(gt,Ve),Ee;if(Be===null){for(;Ve<bt.length;Ve++)Be=Xt(gt,bt[Ve],kt),Be!==null&&(ft=w(Be,ft,Ve),En===null?Ee=Be:En.sibling=Be,En=Be);return kn&&Ql(gt,Ve),Ee}for(Be=y(Be);Ve<bt.length;Ve++)sr=Lt(Be,gt,Ve,bt[Ve],kt),sr!==null&&(o&&sr.alternate!==null&&Be.delete(sr.key===null?Ve:sr.key),ft=w(sr,ft,Ve),En===null?Ee=sr:En.sibling=sr,En=sr);return o&&Be.forEach(function(nd){return c(gt,nd)}),kn&&Ql(gt,Ve),Ee}function ke(gt,ft,bt,kt){if(bt==null)throw Error(n(151));for(var Ee=null,En=null,Be=ft,Ve=ft=0,sr=null,Yn=bt.next();Be!==null&&!Yn.done;Ve++,Yn=bt.next()){Be.index>Ve?(sr=Be,Be=null):sr=Be.sibling;var nd=Tt(gt,Be,Yn.value,kt);if(nd===null){Be===null&&(Be=sr);break}o&&Be&&nd.alternate===null&&c(gt,Be),ft=w(nd,ft,Ve),En===null?Ee=nd:En.sibling=nd,En=nd,Be=sr}if(Yn.done)return p(gt,Be),kn&&Ql(gt,Ve),Ee;if(Be===null){for(;!Yn.done;Ve++,Yn=bt.next())Yn=Xt(gt,Yn.value,kt),Yn!==null&&(ft=w(Yn,ft,Ve),En===null?Ee=Yn:En.sibling=Yn,En=Yn);return kn&&Ql(gt,Ve),Ee}for(Be=y(Be);!Yn.done;Ve++,Yn=bt.next())Yn=Lt(Be,gt,Ve,Yn.value,kt),Yn!==null&&(o&&Yn.alternate!==null&&Be.delete(Yn.key===null?Ve:Yn.key),ft=w(Yn,ft,Ve),En===null?Ee=Yn:En.sibling=Yn,En=Yn);return o&&Be.forEach(function(ZP){return c(gt,ZP)}),kn&&Ql(gt,Ve),Ee}function yi(gt,ft,bt,kt){if(typeof bt=="object"&&bt!==null&&bt.type===b&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case v:t:{for(var Ee=bt.key;ft!==null;){if(ft.key===Ee){if(Ee=bt.type,Ee===b){if(ft.tag===7){p(gt,ft.sibling),kt=E(ft,bt.props.children),kt.return=gt,gt=kt;break t}}else if(ft.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===z&&Xb(Ee)===ft.type){p(gt,ft.sibling),kt=E(ft,bt.props),Hf(kt,bt),kt.return=gt,gt=kt;break t}p(gt,ft);break}else c(gt,ft);ft=ft.sibling}bt.type===b?(kt=jc(bt.props.children,gt.mode,kt,bt.key),kt.return=gt,gt=kt):(kt=xs(bt.type,bt.key,bt.props,null,gt.mode,kt),Hf(kt,bt),kt.return=gt,gt=kt)}return H(gt);case _:t:{for(Ee=bt.key;ft!==null;){if(ft.key===Ee)if(ft.tag===4&&ft.stateNode.containerInfo===bt.containerInfo&&ft.stateNode.implementation===bt.implementation){p(gt,ft.sibling),kt=E(ft,bt.children||[]),kt.return=gt,gt=kt;break t}else{p(gt,ft);break}else c(gt,ft);ft=ft.sibling}kt=L0(bt,gt.mode,kt),kt.return=gt,gt=kt}return H(gt);case z:return Ee=bt._init,bt=Ee(bt._payload),yi(gt,ft,bt,kt)}if(dt(bt))return Xe(gt,ft,bt,kt);if(ot(bt)){if(Ee=ot(bt),typeof Ee!="function")throw Error(n(150));return bt=Ee.call(bt),ke(gt,ft,bt,kt)}if(typeof bt.then=="function")return yi(gt,ft,Zp(bt),kt);if(bt.$$typeof===D)return yi(gt,ft,zp(gt,bt),kt);K0(gt,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint"?(bt=""+bt,ft!==null&&ft.tag===6?(p(gt,ft.sibling),kt=E(ft,bt),kt.return=gt,gt=kt):(p(gt,ft),kt=Up(bt,gt.mode,kt),kt.return=gt,gt=kt),H(gt)):p(gt,ft)}return function(gt,ft,bt,kt){try{Jp=0;var Ee=yi(gt,ft,bt,kt);return Xu=null,Ee}catch(Be){if(Be===Qp||Be===go)throw Be;var En=kr(29,Be,null,gt.mode);return En.lanes=kt,En.return=gt,En}finally{}}}var qu=qb(!0),Yb=qb(!1),ai=at(null),yo=null;function tu(o){var c=o.alternate;Et(Vi,Vi.current&1),Et(ai,o),yo===null&&(c===null||If.current!==null||c.memoizedState!==null)&&(yo=o)}function Wb(o){if(o.tag===22){if(Et(Vi,Vi.current),Et(ai,o),yo===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(yo=o)}}else eu()}function eu(){Et(Vi,Vi.current),Et(ai,ai.current)}function il(o){xt(ai),yo===o&&(yo=null),xt(Vi)}var Vi=at(0);function Zl(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||gT(p)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function nu(o,c,p,y){c=o.memoizedState,p=p(y,c),p=p==null?c:m({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Sr={enqueueSetState:function(o,c,p){o=o._reactInternals;var y=Fi(),E=nl(y);E.payload=c,p!=null&&(E.callback=p),c=Yl(o,E,y),c!==null&&(Mr(c,o,y),ju(c,o,y))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var y=Fi(),E=nl(y);E.tag=1,E.payload=c,p!=null&&(E.callback=p),c=Yl(o,E,y),c!==null&&(Mr(c,o,y),ju(c,o,y))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=Fi(),y=nl(p);y.tag=2,c!=null&&(y.callback=c),c=Yl(o,y,p),c!==null&&(Mr(c,o,p),ju(c,o,p))}};function Kb(o,c,p,y,E,w,H){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,w,H):c.prototype&&c.prototype.isPureReactComponent?!po(p,y)||!po(E,w):!0}function Jb(o,c,p,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==o&&Sr.enqueueReplaceState(c,c.state,null)}function sl(o,c){var p=c;if("ref"in c){p={};for(var y in c)y!=="ref"&&(p[y]=c[y])}if(o=o.defaultProps){p===c&&(p=m({},p));for(var E in o)p[E]===void 0&&(p[E]=o[E])}return p}var Yu=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function $p(o){Yu(o)}function J0(o){console.error(o)}function Zb(o){Yu(o)}function Z0(o,c){try{var p=o.onUncaughtError;p(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function Qa(o,c,p){try{var y=o.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function $0(o,c,p){return p=nl(p),p.tag=3,p.payload={element:null},p.callback=function(){Z0(o,c)},p}function $b(o){return o=nl(o),o.tag=3,o}function t1(o,c,p,y){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var w=y.value;o.payload=function(){return E(w)},o.callback=function(){Qa(c,p,y)}}var H=p.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(o.callback=function(){Qa(c,p,y),typeof E!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var q=y.stack;this.componentDidCatch(y.value,{componentStack:q!==null?q:""})})}function nT(o,c,p,y,E){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=p.alternate,c!==null&&za(c,p,E,!0),p=ai.current,p!==null){switch(p.tag){case 13:return yo===null?h():p.alternate===null&&xi===0&&(xi=3),p.flags&=-257,p.flags|=65536,p.lanes=E,y===jp?p.flags|=16384:(c=p.updateQueue,c===null?p.updateQueue=new Set([y]):c.add(y),Dt(o,y,E)),!1;case 22:return p.flags|=65536,y===jp?p.flags|=16384:(c=p.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=c):(p=c.retryQueue,p===null?c.retryQueue=new Set([y]):p.add(y)),Dt(o,y,E)),!1}throw Error(n(435,p.tag))}return Dt(o,y,E),h(),!1}if(kn)return c=ai.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=E,y!==B0&&(o=Error(n(422),{cause:y}),Qu(Ps(o,p)))):(y!==B0&&(c=Error(n(423),{cause:y}),Qu(Ps(c,p))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,y=Ps(y,p),E=$0(o.stateNode,y,E),Bf(o,E),xi!==4&&(xi=2)),!1;var w=Error(n(520),{cause:y});if(w=Ps(w,p),qn===null?qn=[w]:qn.push(w),xi!==4&&(xi=2),c===null)return!0;y=Ps(y,p),p=c;do{switch(p.tag){case 3:return p.flags|=65536,o=E&-E,p.lanes|=o,o=$0(p.stateNode,y,o),Bf(p,o),!1;case 1:if(c=p.type,w=p.stateNode,(p.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Aa===null||!Aa.has(w))))return p.flags|=65536,E&=-E,p.lanes|=E,E=$b(E),t1(E,o,p,y),Bf(p,E),!1}p=p.return}while(p!==null);return!1}var tS=Error(n(461)),bs=!1;function Qi(o,c,p,y){c.child=o===null?Yb(c,null,p,y):qu(c,o.child,p,y)}function Qr(o,c,p,y,E){p=p.render;var w=c.ref;if("ref"in y){var H={};for(var q in y)q!=="ref"&&(H[q]=y[q])}else H=y;return el(c),y=Kl(o,c,p,H,w,E),q=f2(),o!==null&&!bs?(G0(o,c,E),Ss(o,c,E)):(kn&&q&&e2(c),c.flags|=1,Qi(o,c,y,E),c.child)}function jr(o,c,p,y,E){if(o===null){var w=p.type;return typeof w=="function"&&!Ip(w)&&w.defaultProps===void 0&&p.compare===null?(c.tag=15,c.type=w,w2(o,c,w,y,E)):(o=xs(p.type,null,y,c,c.mode,E),o.ref=c.ref,o.return=c,c.child=o)}if(w=o.child,!tm(o,E)){var H=w.memoizedProps;if(p=p.compare,p=p!==null?p:po,p(H,y)&&o.ref===c.ref)return Ss(o,c,E)}return c.flags|=1,o=Gi(w,y),o.ref=c.ref,o.return=c,c.child=o}function w2(o,c,p,y,E){if(o!==null){var w=o.memoizedProps;if(po(w,y)&&o.ref===c.ref)if(bs=!1,c.pendingProps=y=w,tm(o,E))(o.flags&131072)!==0&&(bs=!0);else return c.lanes=o.lanes,Ss(o,c,E)}return zf(o,c,p,y,E)}function Wu(o,c,p){var y=c.pendingProps,E=y.children,w=o!==null?o.memoizedState:null;if(y.mode==="hidden"){if((c.flags&128)!==0){if(y=w!==null?w.baseLanes|p:p,o!==null){for(E=c.child=o.child,w=0;E!==null;)w=w|E.lanes|E.childLanes,E=E.sibling;c.childLanes=w&~y}else c.childLanes=0,c.child=null;return Ku(o,c,y,p)}if((p&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Vp(c,w!==null?w.cachePool:null),w!==null?gb(c,w):h2(),Wb(c);else return c.lanes=c.childLanes=536870912,Ku(o,c,w!==null?w.baseLanes|p:p,p)}else w!==null?(Vp(c,w.cachePool),gb(c,w),eu(),c.memoizedState=null):(o!==null&&Vp(c,null),h2(),eu());return Qi(o,c,E,p),c.child}function Ku(o,c,p,y){var E=Kc();return E=E===null?null:{parent:ts._currentValue,pool:E},c.memoizedState={baseLanes:p,cachePool:E},o!==null&&Vp(c,null),h2(),Wb(c),o!==null&&za(o,c,y,!0),null}function Ju(o,c){var p=c.ref;if(p===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(o===null||o.ref!==p)&&(c.flags|=4194816)}}function zf(o,c,p,y,E){return el(c),p=Kl(o,c,p,y,void 0,E),y=f2(),o!==null&&!bs?(G0(o,c,E),Ss(o,c,E)):(kn&&y&&e2(c),c.flags|=1,Qi(o,c,p,E),c.child)}function da(o,c,p,y,E,w){return el(c),c.updateQueue=null,p=_b(c,y,p,E),yb(o),y=f2(),o!==null&&!bs?(G0(o,c,w),Ss(o,c,w)):(kn&&y&&e2(c),c.flags|=1,Qi(o,c,p,w),c.child)}function pa(o,c,p,y,E){if(el(c),c.stateNode===null){var w=Qc,H=p.contextType;typeof H=="object"&&H!==null&&(w=Ii(H)),w=new p(y,w),c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Sr,c.stateNode=w,w._reactInternals=c,w=c.stateNode,w.props=y,w.state=c.memoizedState,w.refs={},c2(c),H=p.contextType,w.context=typeof H=="object"&&H!==null?Ii(H):Qc,w.state=c.memoizedState,H=p.getDerivedStateFromProps,typeof H=="function"&&(nu(c,p,H,y),w.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(H=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),H!==w.state&&Sr.enqueueReplaceState(w,w.state,null),Of(c,y,w,E),Xp(),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(o===null){w=c.stateNode;var q=c.memoizedProps,st=sl(p,q);w.props=st;var St=w.context,zt=p.contextType;H=Qc,typeof zt=="object"&&zt!==null&&(H=Ii(zt));var Xt=p.getDerivedStateFromProps;zt=typeof Xt=="function"||typeof w.getSnapshotBeforeUpdate=="function",q=c.pendingProps!==q,zt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(q||St!==H)&&Jb(c,w,y,H),ql=!1;var Tt=c.memoizedState;w.state=Tt,Of(c,y,w,E),Xp(),St=c.memoizedState,q||Tt!==St||ql?(typeof Xt=="function"&&(nu(c,p,Xt,y),St=c.memoizedState),(st=ql||Kb(c,p,st,y,Tt,St,H))?(zt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(c.flags|=4194308)):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=St),w.props=y,w.state=St,w.context=H,y=st):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{w=c.stateNode,Qe(o,c),H=c.memoizedProps,zt=sl(p,H),w.props=zt,Xt=c.pendingProps,Tt=w.context,St=p.contextType,st=Qc,typeof St=="object"&&St!==null&&(st=Ii(St)),q=p.getDerivedStateFromProps,(St=typeof q=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(H!==Xt||Tt!==st)&&Jb(c,w,y,st),ql=!1,Tt=c.memoizedState,w.state=Tt,Of(c,y,w,E),Xp();var Lt=c.memoizedState;H!==Xt||Tt!==Lt||ql||o!==null&&o.dependencies!==null&&Hp(o.dependencies)?(typeof q=="function"&&(nu(c,p,q,y),Lt=c.memoizedState),(zt=ql||Kb(c,p,zt,y,Tt,Lt,st)||o!==null&&o.dependencies!==null&&Hp(o.dependencies))?(St||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(y,Lt,st),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(y,Lt,st)),typeof w.componentDidUpdate=="function"&&(c.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof w.componentDidUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Lt),w.props=y,w.state=Lt,w.context=st,y=zt):(typeof w.componentDidUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=1024),y=!1)}return w=y,Ju(o,c),y=(c.flags&128)!==0,w||y?(w=c.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:w.render(),c.flags|=1,o!==null&&y?(c.child=qu(c,o.child,null,E),c.child=qu(c,null,p,E)):Qi(o,c,p,E),c.memoizedState=w.state,o=c.child):o=Ss(o,c,E),o}function iu(o,c,p,y){return Cf(),c.flags|=256,Qi(o,c,p,y),c.child}var _o={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ao(o){return{baseLanes:o,cachePool:U0()}}function hs(o,c,p){return o=o!==null?o.childLanes&~p:0,c&&(o|=Wa),o}function Gf(o,c,p){var y=c.pendingProps,E=!1,w=(c.flags&128)!==0,H;if((H=w)||(H=o!==null&&o.memoizedState===null?!1:(Vi.current&2)!==0),H&&(E=!0,c.flags&=-129),H=(c.flags&32)!==0,c.flags&=-33,o===null){if(kn){if(E?tu(c):eu(),kn){var q=Li,st;if(st=q){t:{for(st=q,q=ua;st.nodeType!==8;){if(!q){q=null;break t}if(st=sc(st.nextSibling),st===null){q=null;break t}}q=st}q!==null?(c.memoizedState={dehydrated:q,treeContext:Xc!==null?{id:$o,overflow:tl}:null,retryLane:536870912,hydrationErrors:null},st=kr(18,null,null,0),st.stateNode=q,st.return=c,c.child=st,Ar=c,Li=null,st=!0):st=!1}st||qc(c)}if(q=c.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return gT(q)?c.lanes=32:c.lanes=536870912,null;il(c)}return q=y.children,y=y.fallback,E?(eu(),E=c.mode,q=Zu({mode:"hidden",children:q},E),y=jc(y,E,p,null),q.return=c,y.return=c,q.sibling=y,c.child=q,E=c.child,E.memoizedState=Ao(p),E.childLanes=hs(o,H,p),c.memoizedState=_o,y):(tu(c),rl(c,q))}if(st=o.memoizedState,st!==null&&(q=st.dehydrated,q!==null)){if(w)c.flags&256?(tu(c),c.flags&=-257,c=zs(o,c,p)):c.memoizedState!==null?(eu(),c.child=o.child,c.flags|=128,c=null):(eu(),E=y.fallback,q=c.mode,y=Zu({mode:"visible",children:y.children},q),E=jc(E,q,p,null),E.flags|=2,y.return=c,E.return=c,y.sibling=E,c.child=y,qu(c,o.child,null,p),y=c.child,y.memoizedState=Ao(p),y.childLanes=hs(o,H,p),c.memoizedState=_o,c=E);else if(tu(c),gT(q)){if(H=q.nextSibling&&q.nextSibling.dataset,H)var St=H.dgst;H=St,y=Error(n(419)),y.stack="",y.digest=H,Qu({value:y,source:null,stack:null}),c=zs(o,c,p)}else if(bs||za(o,c,p,!1),H=(p&o.childLanes)!==0,bs||H){if(H=We,H!==null&&(y=p&-p,y=(y&42)!==0?1:Jn(y),y=(y&(H.suspendedLanes|p))!==0?0:y,y!==0&&y!==st.retryLane))throw st.retryLane=y,Vl(o,y),Mr(H,o,y),tS;q.data==="$?"||h(),c=zs(o,c,p)}else q.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=st.treeContext,Li=sc(q.nextSibling),Ar=c,kn=!0,Ha=null,ua=!1,o!==null&&(Fs[ca++]=$o,Fs[ca++]=tl,Fs[ca++]=Xc,$o=o.id,tl=o.overflow,Xc=c),c=rl(c,y.children),c.flags|=4096);return c}return E?(eu(),E=y.fallback,q=c.mode,st=o.child,St=st.sibling,y=Gi(st,{mode:"hidden",children:y.children}),y.subtreeFlags=st.subtreeFlags&65011712,St!==null?E=Gi(St,E):(E=jc(E,q,p,null),E.flags|=2),E.return=c,y.return=c,y.sibling=E,c.child=y,y=E,E=c.child,q=o.child.memoizedState,q===null?q=Ao(p):(st=q.cachePool,st!==null?(St=ts._currentValue,st=st.parent!==St?{parent:St,pool:St}:st):st=U0(),q={baseLanes:q.baseLanes|p,cachePool:st}),E.memoizedState=q,E.childLanes=hs(o,H,p),c.memoizedState=_o,y):(tu(c),p=o.child,o=p.sibling,p=Gi(p,{mode:"visible",children:y.children}),p.return=c,p.sibling=null,o!==null&&(H=c.deletions,H===null?(c.deletions=[o],c.flags|=16):H.push(o)),c.child=p,c.memoizedState=null,p)}function rl(o,c){return c=Zu({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Zu(o,c){return o=kr(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function zs(o,c,p){return qu(c,o.child,null,p),o=rl(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function Gs(o,c,p){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),r2(o.return,c,p)}function Bn(o,c,p,y,E){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E}:(w.isBackwards=c,w.rendering=null,w.renderingStartTime=0,w.last=y,w.tail=p,w.tailMode=E)}function ja(o,c,p){var y=c.pendingProps,E=y.revealOrder,w=y.tail;if(Qi(o,c,y.children,p),y=Vi.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Gs(o,p,c);else if(o.tag===19)Gs(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break t;for(;o.sibling===null;){if(o.return===null||o.return===c)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}switch(Et(Vi,y),E){case"forwards":for(p=c.child,E=null;p!==null;)o=p.alternate,o!==null&&Zl(o)===null&&(E=p),p=p.sibling;p=E,p===null?(E=c.child,c.child=null):(E=p.sibling,p.sibling=null),Bn(c,!1,E,p,w);break;case"backwards":for(p=null,E=c.child,c.child=null;E!==null;){if(o=E.alternate,o!==null&&Zl(o)===null){c.child=E;break}o=E.sibling,E.sibling=p,p=E,E=o}Bn(c,!0,p,null,w);break;case"together":Bn(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ss(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),Eo|=c.lanes,(p&c.childLanes)===0)if(o!==null){if(za(o,c,p,!1),(p&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,p=Gi(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=Gi(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function tm(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Hp(o)))}function Xa(o,c,p){switch(c.tag){case 3:Wt(c,c.stateNode.containerInfo),Wc(c,ts,o.memoizedState.cache),Cf();break;case 27:case 5:ee(c);break;case 4:Wt(c,c.stateNode.containerInfo);break;case 10:Wc(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(tu(c),c.flags|=128,null):(p&c.child.childLanes)!==0?Gf(o,c,p):(tu(c),o=Ss(o,c,p),o!==null?o.sibling:null);tu(c);break;case 19:var E=(o.flags&128)!==0;if(y=(p&c.childLanes)!==0,y||(za(o,c,p,!1),y=(p&c.childLanes)!==0),E){if(y)return ja(o,c,p);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Et(Vi,Vi.current),y)break;return null;case 22:case 23:return c.lanes=0,Wu(o,c,p);case 24:Wc(c,ts,o.memoizedState.cache)}return Ss(o,c,p)}function $u(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps)bs=!0;else{if(!tm(o,p)&&(c.flags&128)===0)return bs=!1,Xa(o,c,p);bs=(o.flags&131072)!==0}else bs=!1,kn&&(c.flags&1048576)!==0&&D0(c,Tf,c.index);switch(c.lanes=0,c.tag){case 16:t:{o=c.pendingProps;var y=c.elementType,E=y._init;if(y=E(y._payload),c.type=y,typeof y=="function")Ip(y)?(o=sl(y,o),c.tag=1,c=pa(null,c,y,o,p)):(c.tag=0,c=zf(null,c,y,o,p));else{if(y!=null){if(E=y.$$typeof,E===B){c.tag=11,c=Qr(null,c,y,o,p);break t}else if(E===F){c.tag=14,c=jr(null,c,y,o,p);break t}}throw c=ut(y)||y,Error(n(306,c,""))}}return c;case 0:return zf(o,c,c.type,c.pendingProps,p);case 1:return y=c.type,E=sl(y,c.pendingProps),pa(o,c,y,E,p);case 3:t:{if(Wt(c,c.stateNode.containerInfo),o===null)throw Error(n(387));y=c.pendingProps;var w=c.memoizedState;E=w.element,Qe(o,c),Of(c,y,null,p);var H=c.memoizedState;if(y=H.cache,Wc(c,ts,y),y!==w.cache&&Fp(c,[ts],p,!0),Xp(),y=H.element,w.isDehydrated)if(w={element:y,isDehydrated:!1,cache:H.cache},c.updateQueue.baseState=w,c.memoizedState=w,c.flags&256){c=iu(o,c,y,p);break t}else if(y!==E){E=Ps(Error(n(424)),c),Qu(E),c=iu(o,c,y,p);break t}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Li=sc(o.firstChild),Ar=c,kn=!0,Ha=null,ua=!0,p=Yb(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Cf(),y===E){c=Ss(o,c,p);break t}Qi(o,c,y,p)}c=c.child}return c;case 26:return Ju(o,c),o===null?(p=lR(c.type,null,c.pendingProps,null))?c.memoizedState=p:kn||(p=c.type,o=c.pendingProps,y=aS(Bt.current).createElement(p),y[Ji]=c,y[cs]=o,Tr(y,p,o),Zi(y),c.stateNode=y):c.memoizedState=lR(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return ee(c),o===null&&kn&&(y=c.stateNode=rR(c.type,c.pendingProps,Bt.current),Ar=c,ua=!0,E=Li,Jf(c.type)?(vT=E,Li=sc(y.firstChild)):Li=E),Qi(o,c,c.pendingProps.children,p),Ju(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&kn&&((E=y=Li)&&(y=CP(y,c.type,c.pendingProps,ua),y!==null?(c.stateNode=y,Ar=c,Li=sc(y.firstChild),ua=!1,E=!0):E=!1),E||qc(c)),ee(c),E=c.type,w=c.pendingProps,H=o!==null?o.memoizedProps:null,y=w.children,dT(E,w)?y=null:H!==null&&dT(E,H)&&(c.flags|=32),c.memoizedState!==null&&(E=Kl(o,c,KM,null,null,p),H2._currentValue=E),Ju(o,c),Qi(o,c,y,p),c.child;case 6:return o===null&&kn&&((o=p=Li)&&(p=wP(p,c.pendingProps,ua),p!==null?(c.stateNode=p,Ar=c,Li=null,o=!0):o=!1),o||qc(c)),null;case 13:return Gf(o,c,p);case 4:return Wt(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=qu(c,null,y,p):Qi(o,c,y,p),c.child;case 11:return Qr(o,c,c.type,c.pendingProps,p);case 7:return Qi(o,c,c.pendingProps,p),c.child;case 8:return Qi(o,c,c.pendingProps.children,p),c.child;case 12:return Qi(o,c,c.pendingProps.children,p),c.child;case 10:return y=c.pendingProps,Wc(c,c.type,y.value),Qi(o,c,y.children,p),c.child;case 9:return E=c.type._context,y=c.pendingProps.children,el(c),E=Ii(E),y=y(E),c.flags|=1,Qi(o,c,y,p),c.child;case 14:return jr(o,c,c.type,c.pendingProps,p);case 15:return w2(o,c,c.type,c.pendingProps,p);case 19:return ja(o,c,p);case 31:return y=c.pendingProps,p=c.mode,y={mode:y.mode,children:y.children},o===null?(p=Zu(y,p),p.ref=c.ref,c.child=p,p.return=c,c=p):(p=Gi(o.child,y),p.ref=c.ref,c.child=p,p.return=c,c=p),c;case 22:return Wu(o,c,p);case 24:return el(c),y=Ii(ts),o===null?(E=Kc(),E===null&&(E=We,w=N0(),E.pooledCache=w,w.refCount++,w!==null&&(E.pooledCacheLanes|=p),E=w),c.memoizedState={parent:y,cache:E},c2(c),Wc(c,ts,E)):((o.lanes&p)!==0&&(Qe(o,c),Of(c,null,null,p),Xp()),E=o.memoizedState,w=c.memoizedState,E.parent!==y?(E={parent:y,cache:y},c.memoizedState=E,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=E),Wc(c,ts,y)):(y=w.cache,Wc(c,ts,y),y!==E.cache&&Fp(c,[ts],p,!0))),Qi(o,c,c.pendingProps.children,p),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function xo(o){o.flags|=4}function em(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!dR(c)){if(c=ai.current,c!==null&&((Ue&4194048)===Ue?yo!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||c!==yo))throw ka=jp,o2;o.flags|=8192}}function $l(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?ue():536870912,o.lanes|=c,Pn|=c)}function th(o,c){if(!kn)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function pi(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(c)for(var E=o.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=y,o.childLanes=p,c}function R2(o,c,p){var y=c.pendingProps;switch(n2(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(c),null;case 1:return pi(c),null;case 3:return p=c.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),Xl(ts),ve(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(mo(c)?xo(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,jn())),pi(c),null;case 26:return p=c.memoizedState,o===null?(xo(c),p!==null?(pi(c),em(c,p)):(pi(c),c.flags&=-16777217)):p?p!==o.memoizedState?(xo(c),pi(c),em(c,p)):(pi(c),c.flags&=-16777217):(o.memoizedProps!==y&&xo(c),pi(c),c.flags&=-16777217),null;case 27:Ye(c),p=Bt.current;var E=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==y&&xo(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return pi(c),null}o=ct.current,mo(c)?fb(c):(o=rR(E,y,p),c.stateNode=o,xo(c))}return pi(c),null;case 5:if(Ye(c),p=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==y&&xo(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return pi(c),null}if(o=ct.current,mo(c))fb(c);else{switch(E=aS(Bt.current),o){case 1:o=E.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:o=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":o=E.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":o=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":o=E.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof y.is=="string"?E.createElement("select",{is:y.is}):E.createElement("select"),y.multiple?o.multiple=!0:y.size&&(o.size=y.size);break;default:o=typeof y.is=="string"?E.createElement(p,{is:y.is}):E.createElement(p)}}o[Ji]=c,o[cs]=y;t:for(E=c.child;E!==null;){if(E.tag===5||E.tag===6)o.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===c)break t;for(;E.sibling===null;){if(E.return===null||E.return===c)break t;E=E.return}E.sibling.return=E.return,E=E.sibling}c.stateNode=o;t:switch(Tr(o,p,y),p){case"button":case"input":case"select":case"textarea":o=!!y.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&xo(c)}}return pi(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==y&&xo(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(n(166));if(o=Bt.current,mo(c)){if(o=c.stateNode,p=c.memoizedProps,y=null,E=Ar,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}o[Ji]=c,o=!!(o.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||Z7(o.nodeValue,p)),o||qc(c)}else o=aS(o).createTextNode(y),o[Ji]=c,c.stateNode=o}return pi(c),null;case 13:if(y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=mo(c),y!==null&&y.dehydrated!==null){if(o===null){if(!E)throw Error(n(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[Ji]=c}else Cf(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;pi(c),E=!1}else E=jn(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return c.flags&256?(il(c),c):(il(c),null)}if(il(c),(c.flags&128)!==0)return c.lanes=p,c;if(p=y!==null,o=o!==null&&o.memoizedState!==null,p){y=c.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool);var w=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(w=y.memoizedState.cachePool.pool),w!==E&&(y.flags|=2048)}return p!==o&&p&&(c.child.flags|=8192),$l(c,c.updateQueue),pi(c),null;case 4:return ve(),o===null&&lT(c.stateNode.containerInfo),pi(c),null;case 10:return Xl(c.type),pi(c),null;case 19:if(xt(Vi),E=c.memoizedState,E===null)return pi(c),null;if(y=(c.flags&128)!==0,w=E.rendering,w===null)if(y)th(E,!1);else{if(xi!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(w=Zl(o),w!==null){for(c.flags|=128,th(E,!1),o=w.updateQueue,c.updateQueue=o,$l(c,o),c.subtreeFlags=0,o=p,p=c.child;p!==null;)t2(p,o),p=p.sibling;return Et(Vi,Vi.current&1|2),c.child}o=o.sibling}E.tail!==null&&Vt()>nr&&(c.flags|=128,y=!0,th(E,!1),c.lanes=4194304)}else{if(!y)if(o=Zl(w),o!==null){if(c.flags|=128,y=!0,o=o.updateQueue,c.updateQueue=o,$l(c,o),th(E,!0),E.tail===null&&E.tailMode==="hidden"&&!w.alternate&&!kn)return pi(c),null}else 2*Vt()-E.renderingStartTime>nr&&p!==536870912&&(c.flags|=128,y=!0,th(E,!1),c.lanes=4194304);E.isBackwards?(w.sibling=c.child,c.child=w):(o=E.last,o!==null?o.sibling=w:c.child=w,E.last=w)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=Vt(),c.sibling=null,o=Vi.current,Et(Vi,y?o&1|2:o&1),c):(pi(c),null);case 22:case 23:return il(c),qp(),y=c.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(p&536870912)!==0&&(c.flags&128)===0&&(pi(c),c.subtreeFlags&6&&(c.flags|=8192)):pi(c),p=c.updateQueue,p!==null&&$l(c,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048),o!==null&&xt(Ga),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),Xl(ts),pi(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function kf(o,c){switch(n2(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Xl(ts),ve(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Ye(c),null;case 13:if(il(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Cf()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return xt(Vi),null;case 4:return ve(),null;case 10:return Xl(c.type),null;case 22:case 23:return il(c),qp(),o!==null&&xt(Ga),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Xl(ts),null;case 25:return null;default:return null}}function Vf(o,c){switch(n2(c),c.tag){case 3:Xl(ts),ve();break;case 26:case 27:case 5:Ye(c);break;case 4:ve();break;case 13:il(c);break;case 19:xt(Vi);break;case 10:Xl(c.type);break;case 22:case 23:il(c),qp(),o!==null&&xt(Ga);break;case 24:Xl(ts)}}function eh(o,c){try{var p=c.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var E=y.next;p=E;do{if((p.tag&o)===o){y=void 0;var w=p.create,H=p.inst;y=w(),H.destroy=y}p=p.next}while(p!==E)}}catch(q){ht(c,c.return,q)}}function ma(o,c,p){try{var y=c.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var w=E.next;y=w;do{if((y.tag&o)===o){var H=y.inst,q=H.destroy;if(q!==void 0){H.destroy=void 0,E=c;var st=p,St=q;try{St()}catch(zt){ht(E,st,zt)}}}y=y.next}while(y!==w)}}catch(zt){ht(c,c.return,zt)}}function nh(o){var c=o.updateQueue;if(c!==null){var p=o.stateNode;try{mb(c,p)}catch(y){ht(o,o.return,y)}}}function tc(o,c,p){p.props=sl(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(y){ht(o,c,y)}}function ih(o,c){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof p=="function"?o.refCleanup=p(y):p.current=y}}catch(E){ht(o,c,E)}}function al(o,c){var p=o.ref,y=o.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(E){ht(o,c,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){ht(o,c,E)}else p.current=null}function Qf(o){var c=o.type,p=o.memoizedProps,y=o.stateNode;try{t:switch(c){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break t;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(E){ht(o,o.return,E)}}function nm(o,c,p){try{var y=o.stateNode;bP(y,o.type,p,c),y[cs]=c}catch(E){ht(o,o.return,E)}}function im(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Jf(o.type)||o.tag===4}function su(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||im(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Jf(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ru(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(o,c):(c=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,c.appendChild(o),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=rS));else if(y!==4&&(y===27&&Jf(o.type)&&(p=o.stateNode,c=null),o=o.child,o!==null))for(ru(o,c,p),o=o.sibling;o!==null;)ru(o,c,p),o=o.sibling}function au(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(y!==4&&(y===27&&Jf(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(au(o,c,p),o=o.sibling;o!==null;)au(o,c,p),o=o.sibling}function ou(o){var c=o.stateNode,p=o.memoizedProps;try{for(var y=o.type,E=c.attributes;E.length;)c.removeAttributeNode(E[0]);Tr(c,y,p),c[Ji]=o,c[cs]=p}catch(w){ht(o,o.return,w)}}var ol=!1,mi=!1,jf=!1,ga=typeof WeakSet=="function"?WeakSet:Set,oi=null;function fs(o,c){if(o=o.containerInfo,hT=fS,o=qy(o),Dp(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else t:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,w=y.focusNode;y=y.focusOffset;try{p.nodeType,w.nodeType}catch{p=null;break t}var H=0,q=-1,st=-1,St=0,zt=0,Xt=o,Tt=null;e:for(;;){for(var Lt;Xt!==p||E!==0&&Xt.nodeType!==3||(q=H+E),Xt!==w||y!==0&&Xt.nodeType!==3||(st=H+y),Xt.nodeType===3&&(H+=Xt.nodeValue.length),(Lt=Xt.firstChild)!==null;)Tt=Xt,Xt=Lt;for(;;){if(Xt===o)break e;if(Tt===p&&++St===E&&(q=H),Tt===w&&++zt===y&&(st=H),(Lt=Xt.nextSibling)!==null)break;Xt=Tt,Tt=Xt.parentNode}Xt=Lt}p=q===-1||st===-1?null:{start:q,end:st}}else p=null}p=p||{start:0,end:0}}else p=null;for(fT={focusedElem:o,selectionRange:p},fS=!1,oi=c;oi!==null;)if(c=oi,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,oi=o;else for(;oi!==null;){switch(c=oi,w=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&w!==null){o=void 0,p=c,E=w.memoizedProps,w=w.memoizedState,y=p.stateNode;try{var Xe=sl(p.type,E,p.elementType===p.type);o=y.getSnapshotBeforeUpdate(Xe,w),y.__reactInternalSnapshotBeforeUpdate=o}catch(ke){ht(p,p.return,ke)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,p=o.nodeType,p===9)mT(o);else if(p===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":mT(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=c.sibling,o!==null){o.return=c.return,oi=o;break}oi=c.return}}function ec(o,c,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Er(o,p),y&4&&eh(5,p);break;case 1:if(Er(o,p),y&4)if(o=p.stateNode,c===null)try{o.componentDidMount()}catch(H){ht(p,p.return,H)}else{var E=sl(p.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(E,c,o.__reactInternalSnapshotBeforeUpdate)}catch(H){ht(p,p.return,H)}}y&64&&nh(p),y&512&&ih(p,p.return);break;case 3:if(Er(o,p),y&64&&(o=p.updateQueue,o!==null)){if(c=null,p.child!==null)switch(p.child.tag){case 27:case 5:c=p.child.stateNode;break;case 1:c=p.child.stateNode}try{mb(o,c)}catch(H){ht(p,p.return,H)}}break;case 27:c===null&&y&4&&ou(p);case 26:case 5:Er(o,p),c===null&&y&4&&Qf(p),y&512&&ih(p,p.return);break;case 12:Er(o,p);break;case 13:Er(o,p),y&4&&lu(o,p),y&64&&(o=p.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(p=bi.bind(null,p),RP(o,p))));break;case 22:if(y=p.memoizedState!==null||ol,!y){c=c!==null&&c.memoizedState!==null||mi,E=ol;var w=mi;ol=y,(mi=c)&&!w?ll(o,p,(p.subtreeFlags&8772)!==0):Er(o,p),ol=E,mi=w}break;case 30:break;default:Er(o,p)}}function ln(o){var c=o.alternate;c!==null&&(o.alternate=null,ln(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&ti(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Fe=null,Un=!1;function qa(o,c,p){for(p=p.child;p!==null;)sh(o,c,p),p=p.sibling}function sh(o,c,p){if(ne&&typeof ne.onCommitFiberUnmount=="function")try{ne.onCommitFiberUnmount(Ot,p)}catch{}switch(p.tag){case 26:mi||al(p,c),qa(o,c,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:mi||al(p,c);var y=Fe,E=Un;Jf(p.type)&&(Fe=p.stateNode,Un=!1),qa(o,c,p),I2(p.stateNode),Fe=y,Un=E;break;case 5:mi||al(p,c);case 6:if(y=Fe,E=Un,Fe=null,qa(o,c,p),Fe=y,Un=E,Fe!==null)if(Un)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(p.stateNode)}catch(w){ht(p,c,w)}else try{Fe.removeChild(p.stateNode)}catch(w){ht(p,c,w)}break;case 18:Fe!==null&&(Un?(o=Fe,iR(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,p.stateNode),V2(o)):iR(Fe,p.stateNode));break;case 4:y=Fe,E=Un,Fe=p.stateNode.containerInfo,Un=!0,qa(o,c,p),Fe=y,Un=E;break;case 0:case 11:case 14:case 15:mi||ma(2,p,c),mi||ma(4,p,c),qa(o,c,p);break;case 1:mi||(al(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"&&tc(p,c,y)),qa(o,c,p);break;case 21:qa(o,c,p);break;case 22:mi=(y=mi)||p.memoizedState!==null,qa(o,c,p),mi=y;break;default:qa(o,c,p)}}function lu(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{V2(o)}catch(p){ht(c,c.return,p)}}function e1(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new ga),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new ga),c;default:throw Error(n(435,o.tag))}}function rh(o,c){var p=e1(o);c.forEach(function(y){var E=je.bind(null,o,y);p.has(y)||(p.add(y),y.then(E,E))})}function Es(o,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y],w=o,H=c,q=H;t:for(;q!==null;){switch(q.tag){case 27:if(Jf(q.type)){Fe=q.stateNode,Un=!1;break t}break;case 5:Fe=q.stateNode,Un=!1;break t;case 3:case 4:Fe=q.stateNode.containerInfo,Un=!0;break t}q=q.return}if(Fe===null)throw Error(n(160));sh(w,H,E),Fe=null,Un=!1,w=E.alternate,w!==null&&(w.return=null),E.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)n1(c,o),c=c.sibling}var bo=null;function n1(o,c){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Es(c,o),Ui(o),y&4&&(ma(3,o,o.return),eh(3,o),ma(5,o,o.return));break;case 1:Es(c,o),Ui(o),y&512&&(mi||p===null||al(p,p.return)),y&64&&ol&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var E=bo;if(Es(c,o),Ui(o),y&512&&(mi||p===null||al(p,p.return)),y&4){var w=p!==null?p.memoizedState:null;if(y=o.memoizedState,p===null)if(y===null)if(o.stateNode===null){t:{y=o.type,p=o.memoizedProps,E=E.ownerDocument||E;e:switch(y){case"title":w=E.getElementsByTagName("title")[0],(!w||w[co]||w[Ji]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=E.createElement(y),E.head.insertBefore(w,E.querySelector("head > title"))),Tr(w,y,p),w[Ji]=o,Zi(w),y=w;break t;case"link":var H=hR("link","href",E).get(y+(p.href||""));if(H){for(var q=0;q<H.length;q++)if(w=H[q],w.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&w.getAttribute("rel")===(p.rel==null?null:p.rel)&&w.getAttribute("title")===(p.title==null?null:p.title)&&w.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){H.splice(q,1);break e}}w=E.createElement(y),Tr(w,y,p),E.head.appendChild(w);break;case"meta":if(H=hR("meta","content",E).get(y+(p.content||""))){for(q=0;q<H.length;q++)if(w=H[q],w.getAttribute("content")===(p.content==null?null:""+p.content)&&w.getAttribute("name")===(p.name==null?null:p.name)&&w.getAttribute("property")===(p.property==null?null:p.property)&&w.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&w.getAttribute("charset")===(p.charSet==null?null:p.charSet)){H.splice(q,1);break e}}w=E.createElement(y),Tr(w,y,p),E.head.appendChild(w);break;default:throw Error(n(468,y))}w[Ji]=o,Zi(w),y=w}o.stateNode=y}else fR(E,o.type,o.stateNode);else o.stateNode=uR(E,y,o.memoizedProps);else w!==y?(w===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):w.count--,y===null?fR(E,o.type,o.stateNode):uR(E,y,o.memoizedProps)):y===null&&o.stateNode!==null&&nm(o,o.memoizedProps,p.memoizedProps)}break;case 27:Es(c,o),Ui(o),y&512&&(mi||p===null||al(p,p.return)),p!==null&&y&4&&nm(o,o.memoizedProps,p.memoizedProps);break;case 5:if(Es(c,o),Ui(o),y&512&&(mi||p===null||al(p,p.return)),o.flags&32){E=o.stateNode;try{vr(E,"")}catch(Lt){ht(o,o.return,Lt)}}y&4&&o.stateNode!=null&&(E=o.memoizedProps,nm(o,E,p!==null?p.memoizedProps:E)),y&1024&&(jf=!0);break;case 6:if(Es(c,o),Ui(o),y&4){if(o.stateNode===null)throw Error(n(162));y=o.memoizedProps,p=o.stateNode;try{p.nodeValue=y}catch(Lt){ht(o,o.return,Lt)}}break;case 3:if(cS=null,E=bo,bo=oS(c.containerInfo),Es(c,o),bo=E,Ui(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{V2(c.containerInfo)}catch(Lt){ht(o,o.return,Lt)}jf&&(jf=!1,cu(o));break;case 4:y=bo,bo=oS(o.stateNode.containerInfo),Es(c,o),Ui(o),bo=y;break;case 12:Es(c,o),Ui(o);break;case 13:Es(c,o),Ui(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(ni=Vt()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,rh(o,y)));break;case 22:E=o.memoizedState!==null;var st=p!==null&&p.memoizedState!==null,St=ol,zt=mi;if(ol=St||E,mi=zt||st,Es(c,o),mi=zt,ol=St,Ui(o),y&8192)t:for(c=o.stateNode,c._visibility=E?c._visibility&-2:c._visibility|1,E&&(p===null||st||ol||mi||va(o)),p=null,c=o;;){if(c.tag===5||c.tag===26){if(p===null){st=p=c;try{if(w=st.stateNode,E)H=w.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{q=st.stateNode;var Xt=st.memoizedProps.style,Tt=Xt!=null&&Xt.hasOwnProperty("display")?Xt.display:null;q.style.display=Tt==null||typeof Tt=="boolean"?"":(""+Tt).trim()}}catch(Lt){ht(st,st.return,Lt)}}}else if(c.tag===6){if(p===null){st=c;try{st.stateNode.nodeValue=E?"":st.memoizedProps}catch(Lt){ht(st,st.return,Lt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break t;for(;c.sibling===null;){if(c.return===null||c.return===o)break t;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=o.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,rh(o,p))));break;case 19:Es(c,o),Ui(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,rh(o,y)));break;case 30:break;case 21:break;default:Es(c,o),Ui(o)}}function Ui(o){var c=o.flags;if(c&2){try{for(var p,y=o.return;y!==null;){if(im(y)){p=y;break}y=y.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var E=p.stateNode,w=su(o);au(o,w,E);break;case 5:var H=p.stateNode;p.flags&32&&(vr(H,""),p.flags&=-33);var q=su(o);au(o,q,H);break;case 3:case 4:var st=p.stateNode.containerInfo,St=su(o);ru(o,St,st);break;default:throw Error(n(161))}}catch(zt){ht(o,o.return,zt)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function cu(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;cu(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function Er(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)ec(o,c.alternate,c),c=c.sibling}function va(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:ma(4,c,c.return),va(c);break;case 1:al(c,c.return);var p=c.stateNode;typeof p.componentWillUnmount=="function"&&tc(c,c.return,p),va(c);break;case 27:I2(c.stateNode);case 26:case 5:al(c,c.return),va(c);break;case 22:c.memoizedState===null&&va(c);break;case 30:va(c);break;default:va(c)}o=o.sibling}}function ll(o,c,p){for(p=p&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,E=o,w=c,H=w.flags;switch(w.tag){case 0:case 11:case 15:ll(E,w,p),eh(4,w);break;case 1:if(ll(E,w,p),y=w,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(St){ht(y,y.return,St)}if(y=w,E=y.updateQueue,E!==null){var q=y.stateNode;try{var st=E.shared.hiddenCallbacks;if(st!==null)for(E.shared.hiddenCallbacks=null,E=0;E<st.length;E++)Nf(st[E],q)}catch(St){ht(y,y.return,St)}}p&&H&64&&nh(w),ih(w,w.return);break;case 27:ou(w);case 26:case 5:ll(E,w,p),p&&y===null&&H&4&&Qf(w),ih(w,w.return);break;case 12:ll(E,w,p);break;case 13:ll(E,w,p),p&&H&4&&lu(E,w);break;case 22:w.memoizedState===null&&ll(E,w,p),ih(w,w.return);break;case 30:break;default:ll(E,w,p)}c=c.sibling}}function i1(o,c){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&wf(p))}function s1(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&wf(o))}function li(o,c,p,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)r1(o,c,p,y),c=c.sibling}function r1(o,c,p,y){var E=c.flags;switch(c.tag){case 0:case 11:case 15:li(o,c,p,y),E&2048&&eh(9,c);break;case 1:li(o,c,p,y);break;case 3:li(o,c,p,y),E&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&wf(o)));break;case 12:if(E&2048){li(o,c,p,y),o=c.stateNode;try{var w=c.memoizedProps,H=w.id,q=w.onPostCommit;typeof q=="function"&&q(H,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(st){ht(c,c.return,st)}}else li(o,c,p,y);break;case 13:li(o,c,p,y);break;case 23:break;case 22:w=c.stateNode,H=c.alternate,c.memoizedState!==null?w._visibility&2?li(o,c,p,y):So(o,c):w._visibility&2?li(o,c,p,y):(w._visibility|=2,nc(o,c,p,y,(c.subtreeFlags&10256)!==0)),E&2048&&i1(H,c);break;case 24:li(o,c,p,y),E&2048&&s1(c.alternate,c);break;default:li(o,c,p,y)}}function nc(o,c,p,y,E){for(E=E&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var w=o,H=c,q=p,st=y,St=H.flags;switch(H.tag){case 0:case 11:case 15:nc(w,H,q,st,E),eh(8,H);break;case 23:break;case 22:var zt=H.stateNode;H.memoizedState!==null?zt._visibility&2?nc(w,H,q,st,E):So(w,H):(zt._visibility|=2,nc(w,H,q,st,E)),E&&St&2048&&i1(H.alternate,H);break;case 24:nc(w,H,q,st,E),E&&St&2048&&s1(H.alternate,H);break;default:nc(w,H,q,st,E)}c=c.sibling}}function So(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var p=o,y=c,E=y.flags;switch(y.tag){case 22:So(p,y),E&2048&&i1(y.alternate,y);break;case 24:So(p,y),E&2048&&s1(y.alternate,y);break;default:So(p,y)}c=c.sibling}}var ya=8192;function Xf(o){if(o.subtreeFlags&ya)for(o=o.child;o!==null;)eS(o),o=o.sibling}function eS(o){switch(o.tag){case 26:Xf(o),o.flags&ya&&o.memoizedState!==null&&kP(bo,o.memoizedState,o.memoizedProps);break;case 5:Xf(o);break;case 3:case 4:var c=bo;bo=oS(o.stateNode.containerInfo),Xf(o),bo=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=ya,ya=16777216,Xf(o),ya=c):Xf(o));break;default:Xf(o)}}function nS(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function gi(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];oi=y,ul(y,o)}nS(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)L2(o),o=o.sibling}function L2(o){switch(o.tag){case 0:case 11:case 15:gi(o),o.flags&2048&&ma(9,o,o.return);break;case 3:gi(o);break;case 12:gi(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,cl(o)):gi(o);break;default:gi(o)}}function cl(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];oi=y,ul(y,o)}nS(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:ma(8,c,c.return),cl(c);break;case 22:p=c.stateNode,p._visibility&2&&(p._visibility&=-3,cl(c));break;default:cl(c)}o=o.sibling}}function ul(o,c){for(;oi!==null;){var p=oi;switch(p.tag){case 0:case 11:case 15:ma(8,p,c);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:wf(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,oi=y;else t:for(p=o;oi!==null;){y=oi;var E=y.sibling,w=y.return;if(ln(y),y===p){oi=null;break t}if(E!==null){E.return=w,oi=E;break t}oi=w}}}var Pi={getCacheForType:function(o){var c=Ii(ts),p=c.data.get(o);return p===void 0&&(p=o(),c.data.set(o,p)),p}},D2=typeof WeakMap=="function"?WeakMap:Map,Xn=0,We=null,mn=null,Ue=0,an=0,Di=null,_a=!1,qf=!1,Yf=!1,Ya=0,xi=0,Eo=0,hl=0,ah=0,Wa=0,Pn=0,qn=null,ze=null,Sn=!1,ni=0,nr=1/0,Ka=null,Aa=null,ds=0,ir=null,ci=null,xa=0,ic=0,sm=null,ba=null,fl=0,oh=null;function Fi(){if((Xn&2)!==0&&Ue!==0)return Ue&-Ue;if(j.T!==null){var o=tn;return o!==0?o:sT()}return Cn()}function a1(){Wa===0&&(Wa=(Ue&536870912)===0||kn?mt():536870912);var o=ai.current;return o!==null&&(o.flags|=32),Wa}function Mr(o,c,p){(o===We&&(an===2||an===9)||o.cancelPendingCommit!==null)&&(hu(o,0),Mo(o,Ue,Wa,!1)),Qt(o,p),((Xn&2)===0||o!==We)&&(o===We&&((Xn&2)===0&&(hl|=p),xi===4&&Mo(o,Ue,Wa,!1)),pu(o))}function Wf(o,c,p){if((Xn&6)!==0)throw Error(n(327));var y=!p&&(c&124)===0&&(c&o.expiredLanes)===0||He(o,c),E=y?T(o,c):d(o,c,!0),w=y;do{if(E===0){qf&&!y&&Mo(o,c,0,!1);break}else{if(p=o.current.alternate,w&&!uu(p)){E=d(o,c,!1),w=!1;continue}if(E===2){if(w=c,o.errorRecoveryDisabledLanes&w)var H=0;else H=o.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){c=H;t:{var q=o;E=qn;var st=q.current.memoizedState.isDehydrated;if(st&&(hu(q,H).flags|=256),H=d(q,H,!1),H!==2){if(Yf&&!st){q.errorRecoveryDisabledLanes|=w,hl|=w,E=4;break t}w=ze,ze=E,w!==null&&(ze===null?ze=w:ze.push.apply(ze,w))}E=H}if(w=!1,E!==2)continue}}if(E===1){hu(o,0),Mo(o,c,0,!0);break}t:{switch(y=o,w=E,w){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:Mo(y,c,Wa,!_a);break t;case 2:ze=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(E=ni+300-Vt(),10<E)){if(Mo(y,c,Wa,!_a),rn(y,0,!0)!==0)break t;y.timeoutHandle=eR(rm.bind(null,y,p,ze,Ka,Sn,c,Wa,hl,Pn,_a,w,2,-0,0),E);break t}rm(y,p,ze,Ka,Sn,c,Wa,hl,Pn,_a,w,0,-0,0)}}break}while(!0);pu(o)}function rm(o,c,p,y,E,w,H,q,st,St,zt,Xt,Tt,Lt){if(o.timeoutHandle=-1,Xt=c.subtreeFlags,(Xt&8192||(Xt&16785408)===16785408)&&(F2={stylesheets:null,count:0,unsuspend:GP},eS(c),Xt=VP(),Xt!==null)){o.cancelPendingCommit=Xt($t.bind(null,o,c,w,p,y,E,H,q,st,zt,1,Tt,Lt)),Mo(o,w,H,!St);return}$t(o,c,w,p,y,E,H,q,st)}function uu(o){for(var c=o;;){var p=c.tag;if((p===0||p===11||p===15)&&c.flags&16384&&(p=c.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var E=p[y],w=E.getSnapshot;E=E.value;try{if(!Hr(w(),E))return!1}catch{return!1}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Mo(o,c,p,y){c&=~ah,c&=~hl,o.suspendedLanes|=c,o.pingedLanes&=~c,y&&(o.warmLanes|=c),y=o.expirationTimes;for(var E=c;0<E;){var w=31-ge(E),H=1<<w;y[w]=-1,E&=~H}p!==0&&he(o,p,c)}function dl(){return(Xn&6)===0?(B2(0),!1):!0}function lh(){if(mn!==null){if(an===0)var o=mn.return;else o=mn,jl=Yc=null,d2(o),Xu=null,Jp=0,o=mn;for(;o!==null;)Vf(o.alternate,o),o=o.return;mn=null}}function hu(o,c){var p=o.timeoutHandle;p!==-1&&(o.timeoutHandle=-1,EP(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),lh(),We=o,mn=p=Gi(o.current,null),Ue=c,an=0,Di=null,_a=!1,qf=He(o,c),Yf=!1,Pn=Wa=ah=hl=Eo=xi=0,ze=qn=null,Sn=!1,(c&8)!==0&&(c|=c&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=c;0<y;){var E=31-ge(y),w=1<<E;c|=o[E],y&=~w}return Ya=c,Np(),p}function o1(o,c){en=null,j.H=Kp,c===Qp||c===go?(c=l2(),an=3):c===o2?(c=l2(),an=4):an=c===tS?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Di=c,mn===null&&(xi=1,Z0(o,Ps(c,o.current)))}function Kf(){var o=j.H;return j.H=Kp,o===null?Kp:o}function l1(){var o=j.A;return j.A=Pi,o}function h(){xi=4,_a||(Ue&4194048)!==Ue&&ai.current!==null||(qf=!0),(Eo&134217727)===0&&(hl&134217727)===0||We===null||Mo(We,Ue,Wa,!1)}function d(o,c,p){var y=Xn;Xn|=2;var E=Kf(),w=l1();(We!==o||Ue!==c)&&(Ka=null,hu(o,c)),c=!1;var H=xi;t:do try{if(an!==0&&mn!==null){var q=mn,st=Di;switch(an){case 8:lh(),H=6;break t;case 3:case 2:case 9:case 6:ai.current===null&&(c=!0);var St=an;if(an=0,Di=null,rt(o,q,st,St),p&&qf){H=0;break t}break;default:St=an,an=0,Di=null,rt(o,q,st,St)}}A(),H=xi;break}catch(zt){o1(o,zt)}while(!0);return c&&o.shellSuspendCounter++,jl=Yc=null,Xn=y,j.H=E,j.A=w,mn===null&&(We=null,Ue=0,Np()),H}function A(){for(;mn!==null;)O(mn)}function T(o,c){var p=Xn;Xn|=2;var y=Kf(),E=l1();We!==o||Ue!==c?(Ka=null,nr=Vt()+500,hu(o,c)):qf=He(o,c);t:do try{if(an!==0&&mn!==null){c=mn;var w=Di;e:switch(an){case 1:an=0,Di=null,rt(o,c,w,1);break;case 2:case 9:if(P0(w)){an=0,Di=null,K(c);break}c=function(){an!==2&&an!==9||We!==o||(an=7),pu(o)},w.then(c,c);break t;case 3:an=7;break t;case 4:an=5;break t;case 7:P0(w)?(an=0,Di=null,K(c)):(an=0,Di=null,rt(o,c,w,7));break;case 5:var H=null;switch(mn.tag){case 26:H=mn.memoizedState;case 5:case 27:var q=mn;if(!H||dR(H)){an=0,Di=null;var st=q.sibling;if(st!==null)mn=st;else{var St=q.return;St!==null?(mn=St,At(St)):mn=null}break e}}an=0,Di=null,rt(o,c,w,5);break;case 6:an=0,Di=null,rt(o,c,w,6);break;case 8:lh(),xi=6;break t;default:throw Error(n(462))}}L();break}catch(zt){o1(o,zt)}while(!0);return jl=Yc=null,j.H=y,j.A=E,Xn=p,mn!==null?0:(We=null,Ue=0,Np(),xi)}function L(){for(;mn!==null&&!Kt();)O(mn)}function O(o){var c=$u(o.alternate,o,Ya);o.memoizedProps=o.pendingProps,c===null?At(o):mn=c}function K(o){var c=o,p=c.alternate;switch(c.tag){case 15:case 0:c=da(p,c,c.pendingProps,c.type,void 0,Ue);break;case 11:c=da(p,c,c.pendingProps,c.type.render,c.ref,Ue);break;case 5:d2(c);default:Vf(p,c),c=mn=t2(c,Ya),c=$u(p,c,Ya)}o.memoizedProps=o.pendingProps,c===null?At(o):mn=c}function rt(o,c,p,y){jl=Yc=null,d2(c),Xu=null,Jp=0;var E=c.return;try{if(nT(o,E,c,p,Ue)){xi=1,Z0(o,Ps(p,o.current)),mn=null;return}}catch(w){if(E!==null)throw mn=E,w;xi=1,Z0(o,Ps(p,o.current)),mn=null;return}c.flags&32768?(kn||y===1?o=!0:qf||(Ue&536870912)!==0?o=!1:(_a=o=!0,(y===2||y===9||y===3||y===6)&&(y=ai.current,y!==null&&y.tag===13&&(y.flags|=16384))),Ht(c,o)):At(c)}function At(o){var c=o;do{if((c.flags&32768)!==0){Ht(c,_a);return}o=c.return;var p=R2(c.alternate,c,Ya);if(p!==null){mn=p;return}if(c=c.sibling,c!==null){mn=c;return}mn=c=o}while(c!==null);xi===0&&(xi=5)}function Ht(o,c){do{var p=kf(o.alternate,o);if(p!==null){p.flags&=32767,mn=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!c&&(o=o.sibling,o!==null)){mn=o;return}mn=o=p}while(o!==null);xi=6,mn=null}function $t(o,c,p,y,E,w,H,q,st){o.cancelPendingCommit=null;do fu();while(ds!==0);if((Xn&6)!==0)throw Error(n(327));if(c!==null){if(c===o.current)throw Error(n(177));if(w=c.lanes|c.childLanes,w|=w0,fe(o,p,w,H,q,st),o===We&&(mn=We=null,Ue=0),ci=c,ir=o,xa=p,ic=w,sm=E,ba=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Vn($,function(){return du(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=j.T,j.T=null,E=tt.p,tt.p=2,H=Xn,Xn|=4;try{fs(o,c,p)}finally{Xn=H,tt.p=E,j.T=y}}ds=1,de(),ye(),Ke()}}function de(){if(ds===1){ds=0;var o=ir,c=ci,p=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||p){p=j.T,j.T=null;var y=tt.p;tt.p=2;var E=Xn;Xn|=4;try{n1(c,o);var w=fT,H=qy(o.containerInfo),q=w.focusedElem,st=w.selectionRange;if(H!==q&&q&&q.ownerDocument&&Xy(q.ownerDocument.documentElement,q)){if(st!==null&&Dp(q)){var St=st.start,zt=st.end;if(zt===void 0&&(zt=St),"selectionStart"in q)q.selectionStart=St,q.selectionEnd=Math.min(zt,q.value.length);else{var Xt=q.ownerDocument||document,Tt=Xt&&Xt.defaultView||window;if(Tt.getSelection){var Lt=Tt.getSelection(),Xe=q.textContent.length,ke=Math.min(st.start,Xe),yi=st.end===void 0?ke:Math.min(st.end,Xe);!Lt.extend&&ke>yi&&(H=yi,yi=ke,ke=H);var gt=jy(q,ke),ft=jy(q,yi);if(gt&&ft&&(Lt.rangeCount!==1||Lt.anchorNode!==gt.node||Lt.anchorOffset!==gt.offset||Lt.focusNode!==ft.node||Lt.focusOffset!==ft.offset)){var bt=Xt.createRange();bt.setStart(gt.node,gt.offset),Lt.removeAllRanges(),ke>yi?(Lt.addRange(bt),Lt.extend(ft.node,ft.offset)):(bt.setEnd(ft.node,ft.offset),Lt.addRange(bt))}}}}for(Xt=[],Lt=q;Lt=Lt.parentNode;)Lt.nodeType===1&&Xt.push({element:Lt,left:Lt.scrollLeft,top:Lt.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Xt.length;q++){var kt=Xt[q];kt.element.scrollLeft=kt.left,kt.element.scrollTop=kt.top}}fS=!!hT,fT=hT=null}finally{Xn=E,tt.p=y,j.T=p}}o.current=c,ds=2}}function ye(){if(ds===2){ds=0;var o=ir,c=ci,p=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||p){p=j.T,j.T=null;var y=tt.p;tt.p=2;var E=Xn;Xn|=4;try{ec(o,c.alternate,c)}finally{Xn=E,tt.p=y,j.T=p}}ds=3}}function Ke(){if(ds===4||ds===3){ds=0,Ft();var o=ir,c=ci,p=xa,y=ba;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ds=5:(ds=0,ci=ir=null,Sa(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(Aa=null),Ei(p),c=c.stateNode,ne&&typeof ne.onCommitFiberRoot=="function")try{ne.onCommitFiberRoot(Ot,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=j.T,E=tt.p,tt.p=2,j.T=null;try{for(var w=o.onRecoverableError,H=0;H<y.length;H++){var q=y[H];w(q.value,{componentStack:q.stack})}}finally{j.T=c,tt.p=E}}(xa&3)!==0&&fu(),pu(o),E=o.pendingLanes,(p&4194090)!==0&&(E&42)!==0?o===oh?fl++:(fl=0,oh=o):fl=0,B2(0)}}function Sa(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,wf(c)))}function fu(o){return de(),ye(),Ke(),du()}function du(){if(ds!==5)return!1;var o=ir,c=ic;ic=0;var p=Ei(xa),y=j.T,E=tt.p;try{tt.p=32>p?32:p,j.T=null,p=sm,sm=null;var w=ir,H=xa;if(ds=0,ci=ir=null,xa=0,(Xn&6)!==0)throw Error(n(331));var q=Xn;if(Xn|=4,L2(w.current),r1(w,w.current,H,p),Xn=q,B2(0,!1),ne&&typeof ne.onPostCommitFiberRoot=="function")try{ne.onPostCommitFiberRoot(Ot,w)}catch{}return!0}finally{tt.p=E,j.T=y,Sa(o,c)}}function Mt(o,c,p){c=Ps(p,c),c=$0(o.stateNode,c,2),o=Yl(o,c,2),o!==null&&(Qt(o,2),pu(o))}function ht(o,c,p){if(o.tag===3)Mt(o,o,p);else for(;c!==null;){if(c.tag===3){Mt(c,o,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Aa===null||!Aa.has(y))){o=Ps(p,o),p=$b(2),y=Yl(c,p,2),y!==null&&(t1(p,y,c,o),Qt(y,2),pu(y));break}}c=c.return}}function Dt(o,c,p){var y=o.pingCache;if(y===null){y=o.pingCache=new D2;var E=new Set;y.set(c,E)}else E=y.get(c),E===void 0&&(E=new Set,y.set(c,E));E.has(p)||(Yf=!0,E.add(p),o=Zt.bind(null,o,c,p),c.then(o,o))}function Zt(o,c,p){var y=o.pingCache;y!==null&&y.delete(c),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,We===o&&(Ue&p)===p&&(xi===4||xi===3&&(Ue&62914560)===Ue&&300>Vt()-ni?(Xn&2)===0&&hu(o,0):ah|=p,Pn===Ue&&(Pn=0)),pu(o)}function Re(o,c){c===0&&(c=ue()),o=Vl(o,c),o!==null&&(Qt(o,c),pu(o))}function bi(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),Re(o,p)}function je(o,c){var p=0;switch(o.tag){case 13:var y=o.stateNode,E=o.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(n(314))}y!==null&&y.delete(c),Re(o,p)}function Vn(o,c){return re(o,c)}var ji=null,_n=null,pl=!1,c1=!1,iT=!1,am=0;function pu(o){o!==_n&&o.next===null&&(_n===null?ji=_n=o:_n=_n.next=o),c1=!0,pl||(pl=!0,mP())}function B2(o,c){if(!iT&&c1){iT=!0;do for(var p=!1,y=ji;y!==null;){if(o!==0){var E=y.pendingLanes;if(E===0)var w=0;else{var H=y.suspendedLanes,q=y.pingedLanes;w=(1<<31-ge(42|o)+1)-1,w&=E&~(H&~q),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(p=!0,j7(y,w))}else w=Ue,w=rn(y,y===We?w:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(w&3)===0||He(y,w)||(p=!0,j7(y,w));y=y.next}while(p);iT=!1}}function pP(){k7()}function k7(){c1=pl=!1;var o=0;am!==0&&(SP()&&(o=am),am=0);for(var c=Vt(),p=null,y=ji;y!==null;){var E=y.next,w=V7(y,c);w===0?(y.next=null,p===null?ji=E:p.next=E,E===null&&(_n=p)):(p=y,(o!==0||(w&3)!==0)&&(c1=!0)),y=E}B2(o)}function V7(o,c){for(var p=o.suspendedLanes,y=o.pingedLanes,E=o.expirationTimes,w=o.pendingLanes&-62914561;0<w;){var H=31-ge(w),q=1<<H,st=E[H];st===-1?((q&p)===0||(q&y)!==0)&&(E[H]=Gn(q,c)):st<=c&&(o.expiredLanes|=q),w&=~q}if(c=We,p=Ue,p=rn(o,o===c?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,p===0||o===c&&(an===2||an===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&Z(y),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||He(o,p)){if(c=p&-p,c===o.callbackPriority)return c;switch(y!==null&&Z(y),Ei(p)){case 2:case 8:p=qt;break;case 32:p=$;break;case 268435456:p=vt;break;default:p=$}return y=Q7.bind(null,o),p=re(p,y),o.callbackPriority=c,o.callbackNode=p,c}return y!==null&&y!==null&&Z(y),o.callbackPriority=2,o.callbackNode=null,2}function Q7(o,c){if(ds!==0&&ds!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if(fu()&&o.callbackNode!==p)return null;var y=Ue;return y=rn(o,o===We?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(Wf(o,y,c),V7(o,Vt()),o.callbackNode!=null&&o.callbackNode===p?Q7.bind(null,o):null)}function j7(o,c){if(fu())return null;Wf(o,c,!0)}function mP(){MP(function(){(Xn&6)!==0?re(be,pP):k7()})}function sT(){return am===0&&(am=mt()),am}function X7(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:yp(""+o)}function q7(o,c){var p=c.ownerDocument.createElement("input");return p.name=c.name,p.value=c.value,o.id&&p.setAttribute("form",o.id),c.parentNode.insertBefore(p,c),o=new FormData(o),p.parentNode.removeChild(p),o}function gP(o,c,p,y,E){if(c==="submit"&&p&&p.stateNode===E){var w=X7((E[cs]||null).action),H=y.submitter;H&&(c=(c=H[cs]||null)?X7(c.formAction):H.getAttribute("formAction"),c!==null&&(w=c,H=null));var q=new mf("action","action",null,y,E);o.push({event:q,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(am!==0){var st=H?q7(E,H):new FormData(E);M2(p,{pending:!0,data:st,method:E.method,action:w},null,st)}}else typeof w=="function"&&(q.preventDefault(),st=H?q7(E,H):new FormData(E),M2(p,{pending:!0,data:st,method:E.method,action:w},w,st))},currentTarget:E}]})}}for(var rT=0;rT<Op.length;rT++){var aT=Op[rT],vP=aT.toLowerCase(),yP=aT[0].toUpperCase()+aT.slice(1);As(vP,"on"+yP)}As(_r,"onAnimationEnd"),As(Ky,"onAnimationIteration"),As(Gr,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(hb,"onTransitionRun"),As(Gl,"onTransitionStart"),As(Sf,"onTransitionCancel"),As(kl,"onTransitionEnd"),Y("onMouseEnter",["mouseout","mouseover"]),Y("onMouseLeave",["mouseout","mouseover"]),Y("onPointerEnter",["pointerout","pointerover"]),Y("onPointerLeave",["pointerout","pointerover"]),fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fo("onBeforeInput",["compositionend","keypress","textInput","paste"]),fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var O2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_P=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(O2));function Y7(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],E=y.event;y=y.listeners;t:{var w=void 0;if(c)for(var H=y.length-1;0<=H;H--){var q=y[H],st=q.instance,St=q.currentTarget;if(q=q.listener,st!==w&&E.isPropagationStopped())break t;w=q,E.currentTarget=St;try{w(E)}catch(zt){Yu(zt)}E.currentTarget=null,w=st}else for(H=0;H<y.length;H++){if(q=y[H],st=q.instance,St=q.currentTarget,q=q.listener,st!==w&&E.isPropagationStopped())break t;w=q,E.currentTarget=St;try{w(E)}catch(zt){Yu(zt)}E.currentTarget=null,w=st}}}}function wn(o,c){var p=c[Pr];p===void 0&&(p=c[Pr]=new Set);var y=o+"__bubble";p.has(y)||(W7(c,o,2,!1),p.add(y))}function oT(o,c,p){var y=0;c&&(y|=4),W7(p,o,y,c)}var iS="_reactListening"+Math.random().toString(36).slice(2);function lT(o){if(!o[iS]){o[iS]=!0,uf.forEach(function(p){p!=="selectionchange"&&(_P.has(p)||oT(p,!1,o),oT(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[iS]||(c[iS]=!0,oT("selectionchange",!1,c))}}function W7(o,c,p,y){switch(_R(c)){case 2:var E=XP;break;case 8:E=qP;break;default:E=bT}p=E.bind(null,c,p,o),E=void 0,!Ap||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),y?E!==void 0?o.addEventListener(c,p,{capture:!0,passive:E}):o.addEventListener(c,p,!0):E!==void 0?o.addEventListener(c,p,{passive:E}):o.addEventListener(c,p,!1)}function cT(o,c,p,y,E){var w=y;if((c&1)===0&&(c&2)===0&&y!==null)t:for(;;){if(y===null)return;var H=y.tag;if(H===3||H===4){var q=y.stateNode.containerInfo;if(q===E)break;if(H===4)for(H=y.return;H!==null;){var st=H.tag;if((st===3||st===4)&&H.stateNode.containerInfo===E)return;H=H.return}for(;q!==null;){if(H=uo(q),H===null)return;if(st=H.tag,st===5||st===6||st===26||st===27){y=w=H;continue t}q=q.parentNode}}y=y.return}Oy(function(){var St=w,zt=m0(p),Xt=[];t:{var Tt=C0.get(o);if(Tt!==void 0){var Lt=mf,Xe=o;switch(o){case"keypress":if(Uc(p)===0)break t;case"keydown":case"keyup":Lt=Fy;break;case"focusin":Xe="focus",Lt=v0;break;case"focusout":Xe="blur",Lt=v0;break;case"beforeblur":case"afterblur":Lt=v0;break;case"click":if(p.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Lt=Uy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Lt=jM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Lt=zy;break;case _r:case Ky:case Gr:Lt=Kx;break;case kl:Lt=Pl;break;case"scroll":case"scrollend":Lt=qx;break;case"wheel":Lt=XM;break;case"copy":case"cut":case"paste":Lt=Zx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Lt=_0;break;case"toggle":case"beforetoggle":Lt=Fc}var ke=(c&4)!==0,yi=!ke&&(o==="scroll"||o==="scrollend"),gt=ke?Tt!==null?Tt+"Capture":null:Tt;ke=[];for(var ft=St,bt;ft!==null;){var kt=ft;if(bt=kt.stateNode,kt=kt.tag,kt!==5&&kt!==26&&kt!==27||bt===null||gt===null||(kt=ff(ft,gt),kt!=null&&ke.push(N2(ft,kt,bt))),yi)break;ft=ft.return}0<ke.length&&(Tt=new Lt(Tt,Xe,null,p,zt),Xt.push({event:Tt,listeners:ke}))}}if((c&7)===0){t:{if(Tt=o==="mouseover"||o==="pointerover",Lt=o==="mouseout"||o==="pointerout",Tt&&p!==p0&&(Xe=p.relatedTarget||p.fromElement)&&(uo(Xe)||Xe[$s]))break t;if((Lt||Tt)&&(Tt=zt.window===zt?zt:(Tt=zt.ownerDocument)?Tt.defaultView||Tt.parentWindow:window,Lt?(Xe=p.relatedTarget||p.toElement,Lt=St,Xe=Xe?uo(Xe):null,Xe!==null&&(yi=r(Xe),ke=Xe.tag,Xe!==yi||ke!==5&&ke!==27&&ke!==6)&&(Xe=null)):(Lt=null,Xe=St),Lt!==Xe)){if(ke=Uy,kt="onMouseLeave",gt="onMouseEnter",ft="mouse",(o==="pointerout"||o==="pointerover")&&(ke=_0,kt="onPointerLeave",gt="onPointerEnter",ft="pointer"),yi=Lt==null?Tt:Nc(Lt),bt=Xe==null?Tt:Nc(Xe),Tt=new ke(kt,ft+"leave",Lt,p,zt),Tt.target=yi,Tt.relatedTarget=bt,kt=null,uo(zt)===St&&(ke=new ke(gt,ft+"enter",Xe,p,zt),ke.target=bt,ke.relatedTarget=yi,kt=ke),yi=kt,Lt&&Xe)e:{for(ke=Lt,gt=Xe,ft=0,bt=ke;bt;bt=u1(bt))ft++;for(bt=0,kt=gt;kt;kt=u1(kt))bt++;for(;0<ft-bt;)ke=u1(ke),ft--;for(;0<bt-ft;)gt=u1(gt),bt--;for(;ft--;){if(ke===gt||gt!==null&&ke===gt.alternate)break e;ke=u1(ke),gt=u1(gt)}ke=null}else ke=null;Lt!==null&&K7(Xt,Tt,Lt,ke,!1),Xe!==null&&yi!==null&&K7(Xt,yi,Xe,ke,!0)}}t:{if(Tt=St?Nc(St):window,Lt=Tt.nodeName&&Tt.nodeName.toLowerCase(),Lt==="select"||Lt==="input"&&Tt.type==="file")var Ee=x0;else if(Qy(Tt))if(b0)Ee=Gc;else{Ee=lb;var En=qM}else Lt=Tt.nodeName,!Lt||Lt.toLowerCase()!=="input"||Tt.type!=="checkbox"&&Tt.type!=="radio"?St&&d0(St.elementType)&&(Ee=x0):Ee=Lp;if(Ee&&(Ee=Ee(o,St))){Fr(Xt,Ee,p,zt);break t}En&&En(o,Tt,St),o==="focusout"&&St&&Tt.type==="number"&&St.memoizedProps.value!=null&&Os(Tt,"number",Tt.value)}switch(En=St?Nc(St):window,o){case"focusin":(Qy(En)||En.contentEditable==="true")&&(Hl=En,E0=St,Bp=null);break;case"focusout":Bp=E0=Hl=null;break;case"mousedown":M0=!0;break;case"contextmenu":case"mouseup":case"dragend":M0=!1,Wy(Xt,p,zt);break;case"selectionchange":if(Yy)break;case"keydown":case"keyup":Wy(Xt,p,zt)}var Be;if(Ep)t:{switch(o){case"compositionstart":var Ve="onCompositionStart";break t;case"compositionend":Ve="onCompositionEnd";break t;case"compositionupdate":Ve="onCompositionUpdate";break t}Ve=void 0}else zc?Cp(o,p)&&(Ve="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Ve="onCompositionStart");Ve&&(Tp&&p.locale!=="ko"&&(zc||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&zc&&(Be=Iy()):(Il=zt,Ny="value"in Il?Il.value:Il.textContent,zc=!0)),En=sS(St,Ve),0<En.length&&(Ve=new y0(Ve,o,null,p,zt),Xt.push({event:Ve,listeners:En}),Be?Ve.data=Be:(Be=ky(p),Be!==null&&(Ve.data=Be)))),(Be=Mp?wp(o,p):Vy(o,p))&&(Ve=sS(St,"onBeforeInput"),0<Ve.length&&(En=new y0("onBeforeInput","beforeinput",null,p,zt),Xt.push({event:En,listeners:Ve}),En.data=Be)),gP(Xt,o,St,p,zt)}Y7(Xt,c)})}function N2(o,c,p){return{instance:o,listener:c,currentTarget:p}}function sS(o,c){for(var p=c+"Capture",y=[];o!==null;){var E=o,w=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||w===null||(E=ff(o,p),E!=null&&y.unshift(N2(o,E,w)),E=ff(o,c),E!=null&&y.push(N2(o,E,w))),o.tag===3)return y;o=o.return}return[]}function u1(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function K7(o,c,p,y,E){for(var w=c._reactName,H=[];p!==null&&p!==y;){var q=p,st=q.alternate,St=q.stateNode;if(q=q.tag,st!==null&&st===y)break;q!==5&&q!==26&&q!==27||St===null||(st=St,E?(St=ff(p,w),St!=null&&H.unshift(N2(p,St,st))):E||(St=ff(p,w),St!=null&&H.push(N2(p,St,st)))),p=p.return}H.length!==0&&o.push({event:c,listeners:H})}var AP=/\r\n?/g,xP=/\u0000|\uFFFD/g;function J7(o){return(typeof o=="string"?o:""+o).replace(AP,`
`).replace(xP,"")}function Z7(o,c){return c=J7(c),J7(o)===c}function rS(){}function vi(o,c,p,y,E,w){switch(p){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||vr(o,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&vr(o,""+y);break;case"className":se(o,"class",y);break;case"tabIndex":se(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":se(o,p,y);break;case"style":vp(o,y,w);break;case"data":if(c!=="object"){se(o,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||p!=="href")){o.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=yp(""+y),o.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(p==="formAction"?(c!=="input"&&vi(o,c,"name",E.name,E,null),vi(o,c,"formEncType",E.formEncType,E,null),vi(o,c,"formMethod",E.formMethod,E,null),vi(o,c,"formTarget",E.formTarget,E,null)):(vi(o,c,"encType",E.encType,E,null),vi(o,c,"method",E.method,E,null),vi(o,c,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=yp(""+y),o.setAttribute(p,y);break;case"onClick":y!=null&&(o.onclick=rS);break;case"onScroll":y!=null&&wn("scroll",o);break;case"onScrollEnd":y!=null&&wn("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(n(60));o.innerHTML=p}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}p=yp(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""+y):o.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""):o.removeAttribute(p);break;case"capture":case"download":y===!0?o.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,y):o.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(p,y):o.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(p):o.setAttribute(p,y);break;case"popover":wn("beforetoggle",o),wn("toggle",o),Yt(o,"popover",y);break;case"xlinkActuate":ae(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ae(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ae(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ae(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ae(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ae(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ae(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ae(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ae(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Yt(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Dy.get(p)||p,Yt(o,p,y))}}function uT(o,c,p,y,E,w){switch(p){case"style":vp(o,y,w);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(n(60));o.innerHTML=p}}break;case"children":typeof y=="string"?vr(o,y):(typeof y=="number"||typeof y=="bigint")&&vr(o,""+y);break;case"onScroll":y!=null&&wn("scroll",o);break;case"onScrollEnd":y!=null&&wn("scrollend",o);break;case"onClick":y!=null&&(o.onclick=rS);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hf.hasOwnProperty(p))t:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),c=p.slice(2,E?p.length-7:void 0),w=o[cs]||null,w=w!=null?w[p]:null,typeof w=="function"&&o.removeEventListener(c,w,E),typeof y=="function")){typeof w!="function"&&w!==null&&(p in o?o[p]=null:o.hasAttribute(p)&&o.removeAttribute(p)),o.addEventListener(c,y,E);break t}p in o?o[p]=y:y===!0?o.setAttribute(p,""):Yt(o,p,y)}}}function Tr(o,c,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wn("error",o),wn("load",o);var y=!1,E=!1,w;for(w in p)if(p.hasOwnProperty(w)){var H=p[w];if(H!=null)switch(w){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:vi(o,c,w,H,p,null)}}E&&vi(o,c,"srcSet",p.srcSet,p,null),y&&vi(o,c,"src",p.src,p,null);return;case"input":wn("invalid",o);var q=w=H=E=null,st=null,St=null;for(y in p)if(p.hasOwnProperty(y)){var zt=p[y];if(zt!=null)switch(y){case"name":E=zt;break;case"type":H=zt;break;case"checked":st=zt;break;case"defaultChecked":St=zt;break;case"value":w=zt;break;case"defaultValue":q=zt;break;case"children":case"dangerouslySetInnerHTML":if(zt!=null)throw Error(n(137,c));break;default:vi(o,c,y,zt,p,null)}}ei(o,w,q,st,St,H,E,!1),Ri(o);return;case"select":wn("invalid",o),y=H=w=null;for(E in p)if(p.hasOwnProperty(E)&&(q=p[E],q!=null))switch(E){case"value":w=q;break;case"defaultValue":H=q;break;case"multiple":y=q;default:vi(o,c,E,q,p,null)}c=w,p=H,o.multiple=!!y,c!=null?$i(o,!!y,c,!1):p!=null&&$i(o,!!y,p,!0);return;case"textarea":wn("invalid",o),w=E=y=null;for(H in p)if(p.hasOwnProperty(H)&&(q=p[H],q!=null))switch(H){case"value":y=q;break;case"defaultValue":E=q;break;case"children":w=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(91));break;default:vi(o,c,H,q,p,null)}_s(o,y,E,w),Ri(o);return;case"option":for(st in p)if(p.hasOwnProperty(st)&&(y=p[st],y!=null))switch(st){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:vi(o,c,st,y,p,null)}return;case"dialog":wn("beforetoggle",o),wn("toggle",o),wn("cancel",o),wn("close",o);break;case"iframe":case"object":wn("load",o);break;case"video":case"audio":for(y=0;y<O2.length;y++)wn(O2[y],o);break;case"image":wn("error",o),wn("load",o);break;case"details":wn("toggle",o);break;case"embed":case"source":case"link":wn("error",o),wn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(St in p)if(p.hasOwnProperty(St)&&(y=p[St],y!=null))switch(St){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:vi(o,c,St,y,p,null)}return;default:if(d0(c)){for(zt in p)p.hasOwnProperty(zt)&&(y=p[zt],y!==void 0&&uT(o,c,zt,y,p,void 0));return}}for(q in p)p.hasOwnProperty(q)&&(y=p[q],y!=null&&vi(o,c,q,y,p,null))}function bP(o,c,p,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,w=null,H=null,q=null,st=null,St=null,zt=null;for(Lt in p){var Xt=p[Lt];if(p.hasOwnProperty(Lt)&&Xt!=null)switch(Lt){case"checked":break;case"value":break;case"defaultValue":st=Xt;default:y.hasOwnProperty(Lt)||vi(o,c,Lt,null,y,Xt)}}for(var Tt in y){var Lt=y[Tt];if(Xt=p[Tt],y.hasOwnProperty(Tt)&&(Lt!=null||Xt!=null))switch(Tt){case"type":w=Lt;break;case"name":E=Lt;break;case"checked":St=Lt;break;case"defaultChecked":zt=Lt;break;case"value":H=Lt;break;case"defaultValue":q=Lt;break;case"children":case"dangerouslySetInnerHTML":if(Lt!=null)throw Error(n(137,c));break;default:Lt!==Xt&&vi(o,c,Tt,Lt,y,Xt)}}Ko(o,H,q,st,St,zt,w,E);return;case"select":Lt=H=q=Tt=null;for(w in p)if(st=p[w],p.hasOwnProperty(w)&&st!=null)switch(w){case"value":break;case"multiple":Lt=st;default:y.hasOwnProperty(w)||vi(o,c,w,null,y,st)}for(E in y)if(w=y[E],st=p[E],y.hasOwnProperty(E)&&(w!=null||st!=null))switch(E){case"value":Tt=w;break;case"defaultValue":q=w;break;case"multiple":H=w;default:w!==st&&vi(o,c,E,w,y,st)}c=q,p=H,y=Lt,Tt!=null?$i(o,!!p,Tt,!1):!!y!=!!p&&(c!=null?$i(o,!!p,c,!0):$i(o,!!p,p?[]:"",!1));return;case"textarea":Lt=Tt=null;for(q in p)if(E=p[q],p.hasOwnProperty(q)&&E!=null&&!y.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:vi(o,c,q,null,y,E)}for(H in y)if(E=y[H],w=p[H],y.hasOwnProperty(H)&&(E!=null||w!=null))switch(H){case"value":Tt=E;break;case"defaultValue":Lt=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(n(91));break;default:E!==w&&vi(o,c,H,E,y,w)}ys(o,Tt,Lt);return;case"option":for(var Xe in p)if(Tt=p[Xe],p.hasOwnProperty(Xe)&&Tt!=null&&!y.hasOwnProperty(Xe))switch(Xe){case"selected":o.selected=!1;break;default:vi(o,c,Xe,null,y,Tt)}for(st in y)if(Tt=y[st],Lt=p[st],y.hasOwnProperty(st)&&Tt!==Lt&&(Tt!=null||Lt!=null))switch(st){case"selected":o.selected=Tt&&typeof Tt!="function"&&typeof Tt!="symbol";break;default:vi(o,c,st,Tt,y,Lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in p)Tt=p[ke],p.hasOwnProperty(ke)&&Tt!=null&&!y.hasOwnProperty(ke)&&vi(o,c,ke,null,y,Tt);for(St in y)if(Tt=y[St],Lt=p[St],y.hasOwnProperty(St)&&Tt!==Lt&&(Tt!=null||Lt!=null))switch(St){case"children":case"dangerouslySetInnerHTML":if(Tt!=null)throw Error(n(137,c));break;default:vi(o,c,St,Tt,y,Lt)}return;default:if(d0(c)){for(var yi in p)Tt=p[yi],p.hasOwnProperty(yi)&&Tt!==void 0&&!y.hasOwnProperty(yi)&&uT(o,c,yi,void 0,y,Tt);for(zt in y)Tt=y[zt],Lt=p[zt],!y.hasOwnProperty(zt)||Tt===Lt||Tt===void 0&&Lt===void 0||uT(o,c,zt,Tt,y,Lt);return}}for(var gt in p)Tt=p[gt],p.hasOwnProperty(gt)&&Tt!=null&&!y.hasOwnProperty(gt)&&vi(o,c,gt,null,y,Tt);for(Xt in y)Tt=y[Xt],Lt=p[Xt],!y.hasOwnProperty(Xt)||Tt===Lt||Tt==null&&Lt==null||vi(o,c,Xt,Tt,y,Lt)}var hT=null,fT=null;function aS(o){return o.nodeType===9?o:o.ownerDocument}function $7(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tR(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function dT(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var pT=null;function SP(){var o=window.event;return o&&o.type==="popstate"?o===pT?!1:(pT=o,!0):(pT=null,!1)}var eR=typeof setTimeout=="function"?setTimeout:void 0,EP=typeof clearTimeout=="function"?clearTimeout:void 0,nR=typeof Promise=="function"?Promise:void 0,MP=typeof queueMicrotask=="function"?queueMicrotask:typeof nR<"u"?function(o){return nR.resolve(null).then(o).catch(TP)}:eR;function TP(o){setTimeout(function(){throw o})}function Jf(o){return o==="head"}function iR(o,c){var p=c,y=0,E=0;do{var w=p.nextSibling;if(o.removeChild(p),w&&w.nodeType===8)if(p=w.data,p==="/$"){if(0<y&&8>y){p=y;var H=o.ownerDocument;if(p&1&&I2(H.documentElement),p&2&&I2(H.body),p&4)for(p=H.head,I2(p),H=p.firstChild;H;){var q=H.nextSibling,st=H.nodeName;H[co]||st==="SCRIPT"||st==="STYLE"||st==="LINK"&&H.rel.toLowerCase()==="stylesheet"||p.removeChild(H),H=q}}if(E===0){o.removeChild(w),V2(c);return}E--}else p==="$"||p==="$?"||p==="$!"?E++:y=p.charCodeAt(0)-48;else y=0;p=w}while(p);V2(c)}function mT(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var p=c;switch(c=c.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":mT(p),ti(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}o.removeChild(p)}}function CP(o,c,p,y){for(;o.nodeType===1;){var E=p;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[co])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(w=o.getAttribute("rel"),w==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(w!==E.rel||o.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(w=o.getAttribute("src"),(w!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&w&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var w=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===w)return o}else return o;if(o=sc(o.nextSibling),o===null)break}return null}function wP(o,c,p){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!p||(o=sc(o.nextSibling),o===null))return null;return o}function gT(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function RP(o,c){var p=o.ownerDocument;if(o.data!=="$?"||p.readyState==="complete")c();else{var y=function(){c(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function sc(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var vT=null;function sR(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}function rR(o,c,p){switch(c=aS(p),o){case"html":if(o=c.documentElement,!o)throw Error(n(452));return o;case"head":if(o=c.head,!o)throw Error(n(453));return o;case"body":if(o=c.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function I2(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);ti(o)}var ml=new Map,aR=new Set;function oS(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ch=tt.d;tt.d={f:LP,r:DP,D:BP,C:OP,L:NP,m:IP,X:PP,S:UP,M:FP};function LP(){var o=ch.f(),c=dl();return o||c}function DP(o){var c=ho(o);c!==null&&c.tag===5&&c.type==="form"?zb(c):ch.r(o)}var h1=typeof document>"u"?null:document;function oR(o,c,p){var y=h1;if(y&&typeof c=="string"&&c){var E=ri(c);E='link[rel="'+o+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),aR.has(E)||(aR.add(E),o={rel:o,crossOrigin:p,href:c},y.querySelector(E)===null&&(c=y.createElement("link"),Tr(c,"link",o),Zi(c),y.head.appendChild(c)))}}function BP(o){ch.D(o),oR("dns-prefetch",o,null)}function OP(o,c){ch.C(o,c),oR("preconnect",o,c)}function NP(o,c,p){ch.L(o,c,p);var y=h1;if(y&&o&&c){var E='link[rel="preload"][as="'+ri(c)+'"]';c==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+ri(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+ri(p.imageSizes)+'"]')):E+='[href="'+ri(o)+'"]';var w=E;switch(c){case"style":w=f1(o);break;case"script":w=d1(o)}ml.has(w)||(o=m({rel:"preload",href:c==="image"&&p&&p.imageSrcSet?void 0:o,as:c},p),ml.set(w,o),y.querySelector(E)!==null||c==="style"&&y.querySelector(U2(w))||c==="script"&&y.querySelector(P2(w))||(c=y.createElement("link"),Tr(c,"link",o),Zi(c),y.head.appendChild(c)))}}function IP(o,c){ch.m(o,c);var p=h1;if(p&&o){var y=c&&typeof c.as=="string"?c.as:"script",E='link[rel="modulepreload"][as="'+ri(y)+'"][href="'+ri(o)+'"]',w=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=d1(o)}if(!ml.has(w)&&(o=m({rel:"modulepreload",href:o},c),ml.set(w,o),p.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(P2(w)))return}y=p.createElement("link"),Tr(y,"link",o),Zi(y),p.head.appendChild(y)}}}function UP(o,c,p){ch.S(o,c,p);var y=h1;if(y&&o){var E=Nl(y).hoistableStyles,w=f1(o);c=c||"default";var H=E.get(w);if(!H){var q={loading:0,preload:null};if(H=y.querySelector(U2(w)))q.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":c},p),(p=ml.get(w))&&yT(o,p);var st=H=y.createElement("link");Zi(st),Tr(st,"link",o),st._p=new Promise(function(St,zt){st.onload=St,st.onerror=zt}),st.addEventListener("load",function(){q.loading|=1}),st.addEventListener("error",function(){q.loading|=2}),q.loading|=4,lS(H,c,y)}H={type:"stylesheet",instance:H,count:1,state:q},E.set(w,H)}}}function PP(o,c){ch.X(o,c);var p=h1;if(p&&o){var y=Nl(p).hoistableScripts,E=d1(o),w=y.get(E);w||(w=p.querySelector(P2(E)),w||(o=m({src:o,async:!0},c),(c=ml.get(E))&&_T(o,c),w=p.createElement("script"),Zi(w),Tr(w,"link",o),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(E,w))}}function FP(o,c){ch.M(o,c);var p=h1;if(p&&o){var y=Nl(p).hoistableScripts,E=d1(o),w=y.get(E);w||(w=p.querySelector(P2(E)),w||(o=m({src:o,async:!0,type:"module"},c),(c=ml.get(E))&&_T(o,c),w=p.createElement("script"),Zi(w),Tr(w,"link",o),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(E,w))}}function lR(o,c,p,y){var E=(E=Bt.current)?oS(E):null;if(!E)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(c=f1(p.href),p=Nl(E).hoistableStyles,y=p.get(c),y||(y={type:"style",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){o=f1(p.href);var w=Nl(E).hoistableStyles,H=w.get(o);if(H||(E=E.ownerDocument||E,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(o,H),(w=E.querySelector(U2(o)))&&!w._p&&(H.instance=w,H.state.loading=5),ml.has(o)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},ml.set(o,p),w||HP(E,o,p,H.state))),c&&y===null)throw Error(n(528,""));return H}if(c&&y!==null)throw Error(n(529,""));return null;case"script":return c=p.async,p=p.src,typeof p=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=d1(p),p=Nl(E).hoistableScripts,y=p.get(c),y||(y={type:"script",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function f1(o){return'href="'+ri(o)+'"'}function U2(o){return'link[rel="stylesheet"]['+o+"]"}function cR(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function HP(o,c,p,y){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=o.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),Tr(c,"link",p),Zi(c),o.head.appendChild(c))}function d1(o){return'[src="'+ri(o)+'"]'}function P2(o){return"script[async]"+o}function uR(o,c,p){if(c.count++,c.instance===null)switch(c.type){case"style":var y=o.querySelector('style[data-href~="'+ri(p.href)+'"]');if(y)return c.instance=y,Zi(y),y;var E=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),Zi(y),Tr(y,"style",E),lS(y,p.precedence,o),c.instance=y;case"stylesheet":E=f1(p.href);var w=o.querySelector(U2(E));if(w)return c.state.loading|=4,c.instance=w,Zi(w),w;y=cR(p),(E=ml.get(E))&&yT(y,E),w=(o.ownerDocument||o).createElement("link"),Zi(w);var H=w;return H._p=new Promise(function(q,st){H.onload=q,H.onerror=st}),Tr(w,"link",y),c.state.loading|=4,lS(w,p.precedence,o),c.instance=w;case"script":return w=d1(p.src),(E=o.querySelector(P2(w)))?(c.instance=E,Zi(E),E):(y=p,(E=ml.get(w))&&(y=m({},p),_T(y,E)),o=o.ownerDocument||o,E=o.createElement("script"),Zi(E),Tr(E,"link",y),o.head.appendChild(E),c.instance=E);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,lS(y,p.precedence,o));return c.instance}function lS(o,c,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,w=E,H=0;H<y.length;H++){var q=y[H];if(q.dataset.precedence===c)w=q;else if(w!==E)break}w?w.parentNode.insertBefore(o,w.nextSibling):(c=p.nodeType===9?p.head:p,c.insertBefore(o,c.firstChild))}function yT(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function _T(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var cS=null;function hR(o,c,p){if(cS===null){var y=new Map,E=cS=new Map;E.set(p,y)}else E=cS,y=E.get(p),y||(y=new Map,E.set(p,y));if(y.has(o))return y;for(y.set(o,null),p=p.getElementsByTagName(o),E=0;E<p.length;E++){var w=p[E];if(!(w[co]||w[Ji]||o==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var H=w.getAttribute(c)||"";H=o+H;var q=y.get(H);q?q.push(w):y.set(H,[w])}}return y}function fR(o,c,p){o=o.ownerDocument||o,o.head.insertBefore(p,c==="title"?o.querySelector("head > title"):null)}function zP(o,c,p){if(p===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function dR(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var F2=null;function GP(){}function kP(o,c,p){if(F2===null)throw Error(n(475));var y=F2;if(c.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=f1(p.href),w=o.querySelector(U2(E));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(y.count++,y=uS.bind(y),o.then(y,y)),c.state.loading|=4,c.instance=w,Zi(w);return}w=o.ownerDocument||o,p=cR(p),(E=ml.get(E))&&yT(p,E),w=w.createElement("link"),Zi(w);var H=w;H._p=new Promise(function(q,st){H.onload=q,H.onerror=st}),Tr(w,"link",p),c.instance=w}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(y.count++,c=uS.bind(y),o.addEventListener("load",c),o.addEventListener("error",c))}}function VP(){if(F2===null)throw Error(n(475));var o=F2;return o.stylesheets&&o.count===0&&AT(o,o.stylesheets),0<o.count?function(c){var p=setTimeout(function(){if(o.stylesheets&&AT(o,o.stylesheets),o.unsuspend){var y=o.unsuspend;o.unsuspend=null,y()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(p)}}:null}function uS(){if(this.count--,this.count===0){if(this.stylesheets)AT(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var hS=null;function AT(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,hS=new Map,c.forEach(QP,o),hS=null,uS.call(o))}function QP(o,c){if(!(c.state.loading&4)){var p=hS.get(o);if(p)var y=p.get(null);else{p=new Map,hS.set(o,p);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<E.length;w++){var H=E[w];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(p.set(H.dataset.precedence,H),y=H)}y&&p.set(null,y)}E=c.instance,H=E.getAttribute("data-precedence"),w=p.get(H)||y,w===y&&p.set(null,E),p.set(H,E),this.count++,y=uS.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),w?w.parentNode.insertBefore(E,w.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),c.state.loading|=4}}var H2={$$typeof:D,Provider:null,Consumer:null,_currentValue:nt,_currentValue2:nt,_threadCount:0};function jP(o,c,p,y,E,w,H,q){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=w,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function pR(o,c,p,y,E,w,H,q,st,St,zt,Xt){return o=new jP(o,c,p,H,q,st,St,Xt),c=1,w===!0&&(c|=24),w=kr(3,null,null,c),o.current=w,w.stateNode=o,c=N0(),c.refCount++,o.pooledCache=c,c.refCount++,w.memoizedState={element:y,isDehydrated:p,cache:c},c2(w),o}function mR(o){return o?(o=Qc,o):Qc}function gR(o,c,p,y,E,w){E=mR(E),y.context===null?y.context=E:y.pendingContext=E,y=nl(c),y.payload={element:p},w=w===void 0?null:w,w!==null&&(y.callback=w),p=Yl(o,y,c),p!==null&&(Mr(p,o,c),ju(p,o,c))}function vR(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function xT(o,c){vR(o,c),(o=o.alternate)&&vR(o,c)}function yR(o){if(o.tag===13){var c=Vl(o,67108864);c!==null&&Mr(c,o,67108864),xT(o,67108864)}}var fS=!0;function XP(o,c,p,y){var E=j.T;j.T=null;var w=tt.p;try{tt.p=2,bT(o,c,p,y)}finally{tt.p=w,j.T=E}}function qP(o,c,p,y){var E=j.T;j.T=null;var w=tt.p;try{tt.p=8,bT(o,c,p,y)}finally{tt.p=w,j.T=E}}function bT(o,c,p,y){if(fS){var E=ST(y);if(E===null)cT(o,c,y,dS,p),AR(o,y);else if(WP(E,o,c,p,y))y.stopPropagation();else if(AR(o,y),c&4&&-1<YP.indexOf(o)){for(;E!==null;){var w=ho(E);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var H=ce(w.pendingLanes);if(H!==0){var q=w;for(q.pendingLanes|=2,q.entangledLanes|=2;H;){var st=1<<31-ge(H);q.entanglements[1]|=st,H&=~st}pu(w),(Xn&6)===0&&(nr=Vt()+500,B2(0))}}break;case 13:q=Vl(w,2),q!==null&&Mr(q,w,2),dl(),xT(w,2)}if(w=ST(y),w===null&&cT(o,c,y,dS,p),w===E)break;E=w}E!==null&&y.stopPropagation()}else cT(o,c,y,null,p)}}function ST(o){return o=m0(o),ET(o)}var dS=null;function ET(o){if(dS=null,o=uo(o),o!==null){var c=r(o);if(c===null)o=null;else{var p=c.tag;if(p===13){if(o=a(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return dS=o,null}function _R(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gt()){case be:return 2;case qt:return 8;case $:case Q:return 32;case vt:return 268435456;default:return 32}default:return 32}}var MT=!1,Zf=null,$f=null,td=null,z2=new Map,G2=new Map,ed=[],YP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AR(o,c){switch(o){case"focusin":case"focusout":Zf=null;break;case"dragenter":case"dragleave":$f=null;break;case"mouseover":case"mouseout":td=null;break;case"pointerover":case"pointerout":z2.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":G2.delete(c.pointerId)}}function k2(o,c,p,y,E,w){return o===null||o.nativeEvent!==w?(o={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:w,targetContainers:[E]},c!==null&&(c=ho(c),c!==null&&yR(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),o)}function WP(o,c,p,y,E){switch(c){case"focusin":return Zf=k2(Zf,o,c,p,y,E),!0;case"dragenter":return $f=k2($f,o,c,p,y,E),!0;case"mouseover":return td=k2(td,o,c,p,y,E),!0;case"pointerover":var w=E.pointerId;return z2.set(w,k2(z2.get(w)||null,o,c,p,y,E)),!0;case"gotpointercapture":return w=E.pointerId,G2.set(w,k2(G2.get(w)||null,o,c,p,y,E)),!0}return!1}function xR(o){var c=uo(o.target);if(c!==null){var p=r(c);if(p!==null){if(c=p.tag,c===13){if(c=a(p),c!==null){o.blockedOn=c,Ur(o.priority,function(){if(p.tag===13){var y=Fi();y=Jn(y);var E=Vl(p,y);E!==null&&Mr(E,p,y),xT(p,y)}});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function pS(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=ST(o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);p0=y,p.target.dispatchEvent(y),p0=null}else return c=ho(p),c!==null&&yR(c),o.blockedOn=p,!1;c.shift()}return!0}function bR(o,c,p){pS(o)&&p.delete(c)}function KP(){MT=!1,Zf!==null&&pS(Zf)&&(Zf=null),$f!==null&&pS($f)&&($f=null),td!==null&&pS(td)&&(td=null),z2.forEach(bR),G2.forEach(bR)}function mS(o,c){o.blockedOn===c&&(o.blockedOn=null,MT||(MT=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,KP)))}var gS=null;function SR(o){gS!==o&&(gS=o,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){gS===o&&(gS=null);for(var c=0;c<o.length;c+=3){var p=o[c],y=o[c+1],E=o[c+2];if(typeof y!="function"){if(ET(y||p)===null)continue;break}var w=ho(p);w!==null&&(o.splice(c,3),c-=3,M2(w,{pending:!0,data:E,method:p.method,action:y},y,E))}}))}function V2(o){function c(st){return mS(st,o)}Zf!==null&&mS(Zf,o),$f!==null&&mS($f,o),td!==null&&mS(td,o),z2.forEach(c),G2.forEach(c);for(var p=0;p<ed.length;p++){var y=ed[p];y.blockedOn===o&&(y.blockedOn=null)}for(;0<ed.length&&(p=ed[0],p.blockedOn===null);)xR(p),p.blockedOn===null&&ed.shift();if(p=(o.ownerDocument||o).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var E=p[y],w=p[y+1],H=E[cs]||null;if(typeof w=="function")H||SR(p);else if(H){var q=null;if(w&&w.hasAttribute("formAction")){if(E=w,H=w[cs]||null)q=H.formAction;else if(ET(E)!==null)continue}else q=H.action;typeof q=="function"?p[y+1]=q:(p.splice(y,3),y-=3),SR(p)}}}function TT(o){this._internalRoot=o}vS.prototype.render=TT.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));var p=c.current,y=Fi();gR(p,y,o,c,null,null)},vS.prototype.unmount=TT.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;gR(o.current,2,null,o,null,null),dl(),c[$s]=null}};function vS(o){this._internalRoot=o}vS.prototype.unstable_scheduleHydration=function(o){if(o){var c=Cn();o={blockedOn:null,target:o,priority:c};for(var p=0;p<ed.length&&c!==0&&c<ed[p].priority;p++);ed.splice(p,0,o),p===0&&xR(o)}};var ER=t.version;if(ER!=="19.1.0")throw Error(n(527,ER,"19.1.0"));tt.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=u(c),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var JP={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yS.isDisabled&&yS.supportsFiber)try{Ot=yS.inject(JP),ne=yS}catch{}}return j2.createRoot=function(o,c){if(!s(o))throw Error(n(299));var p=!1,y="",E=$p,w=J0,H=Zb,q=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(E=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(H=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(q=c.unstable_transitionCallbacks)),c=pR(o,1,!1,null,null,p,y,E,w,H,q,null),o[$s]=c.current,lT(o),new TT(c)},j2.hydrateRoot=function(o,c,p){if(!s(o))throw Error(n(299));var y=!1,E="",w=$p,H=J0,q=Zb,st=null,St=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(w=p.onUncaughtError),p.onCaughtError!==void 0&&(H=p.onCaughtError),p.onRecoverableError!==void 0&&(q=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(st=p.unstable_transitionCallbacks),p.formState!==void 0&&(St=p.formState)),c=pR(o,1,!0,c,p??null,y,E,w,H,q,st,St),c.context=mR(null),p=c.current,y=Fi(),y=Jn(y),E=nl(y),E.callback=null,Yl(p,E,y),p=y,c.current.lanes=p,Qt(c,p),pu(c),o[$s]=c.current,lT(o),new vS(c)},j2.version="19.1.0",j2}var IR;function lF(){if(IR)return LT.exports;IR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),LT.exports=oF(),LT.exports}var cF=lF(),pr=function(){return pr=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},pr.apply(this,arguments)};function iy(i,t,e){if(e||arguments.length===2)for(var n=0,s=t.length,r;n<s;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return i.concat(r||Array.prototype.slice.call(t))}var Bi="-ms-",D_="-moz-",ii="-webkit-",fD="comm",PE="rule",pw="decl",uF="@import",dD="@keyframes",hF="@layer",pD=Math.abs,mw=String.fromCharCode,c5=Object.assign;function fF(i,t){return dr(i,0)^45?(((t<<2^dr(i,0))<<2^dr(i,1))<<2^dr(i,2))<<2^dr(i,3):0}function mD(i){return i.trim()}function Ah(i,t){return(i=t.exec(i))?i[0]:i}function gn(i,t,e){return i.replace(t,e)}function M4(i,t,e){return i.indexOf(t,e)}function dr(i,t){return i.charCodeAt(t)|0}function sy(i,t,e){return i.slice(t,e)}function Uu(i){return i.length}function gD(i){return i.length}function u_(i,t){return t.push(i),i}function dF(i,t){return i.map(t).join("")}function UR(i,t){return i.filter(function(e){return!Ah(e,t)})}var FE=1,ry=1,vD=0,Ll=0,ws=0,xy="";function HE(i,t,e,n,s,r,a,l){return{value:i,root:t,parent:e,type:n,props:s,children:r,line:FE,column:ry,length:a,return:"",siblings:l}}function fd(i,t){return c5(HE("",null,null,"",null,null,0,i.siblings),i,{length:-i.length},t)}function p1(i){for(;i.root;)i=fd(i.root,{children:[i]});u_(i,i.siblings)}function pF(){return ws}function mF(){return ws=Ll>0?dr(xy,--Ll):0,ry--,ws===10&&(ry=1,FE--),ws}function Rc(){return ws=Ll<vD?dr(xy,Ll++):0,ry++,ws===10&&(ry=1,FE++),ws}function Ig(){return dr(xy,Ll)}function T4(){return Ll}function zE(i,t){return sy(xy,i,t)}function u5(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gF(i){return FE=ry=1,vD=Uu(xy=i),Ll=0,[]}function vF(i){return xy="",i}function NT(i){return mD(zE(Ll-1,h5(i===91?i+2:i===40?i+1:i)))}function yF(i){for(;(ws=Ig())&&ws<33;)Rc();return u5(i)>2||u5(ws)>3?"":" "}function _F(i,t){for(;--t&&Rc()&&!(ws<48||ws>102||ws>57&&ws<65||ws>70&&ws<97););return zE(i,T4()+(t<6&&Ig()==32&&Rc()==32))}function h5(i){for(;Rc();)switch(ws){case i:return Ll;case 34:case 39:i!==34&&i!==39&&h5(ws);break;case 40:i===41&&h5(i);break;case 92:Rc();break}return Ll}function AF(i,t){for(;Rc()&&i+ws!==57;)if(i+ws===84&&Ig()===47)break;return"/*"+zE(t,Ll-1)+"*"+mw(i===47?i:Rc())}function xF(i){for(;!u5(Ig());)Rc();return zE(i,Ll)}function bF(i){return vF(C4("",null,null,null,[""],i=gF(i),0,[0],i))}function C4(i,t,e,n,s,r,a,l,u){for(var f=0,m=0,g=a,v=0,_=0,b=0,C=1,M=1,S=1,R=0,D="",B=s,N=r,I=n,F=D;M;)switch(b=R,R=Rc()){case 40:if(b!=108&&dr(F,g-1)==58){M4(F+=gn(NT(R),"&","&\f"),"&\f",pD(f?l[f-1]:0))!=-1&&(S=-1);break}case 34:case 39:case 91:F+=NT(R);break;case 9:case 10:case 13:case 32:F+=yF(b);break;case 92:F+=_F(T4()-1,7);continue;case 47:switch(Ig()){case 42:case 47:u_(SF(AF(Rc(),T4()),t,e,u),u);break;default:F+="/"}break;case 123*C:l[f++]=Uu(F)*S;case 125*C:case 59:case 0:switch(R){case 0:case 125:M=0;case 59+m:S==-1&&(F=gn(F,/\f/g,"")),_>0&&Uu(F)-g&&u_(_>32?FR(F+";",n,e,g-1,u):FR(gn(F," ","")+";",n,e,g-2,u),u);break;case 59:F+=";";default:if(u_(I=PR(F,t,e,f,m,s,l,D,B=[],N=[],g,r),r),R===123)if(m===0)C4(F,t,I,I,B,r,g,l,N);else switch(v===99&&dr(F,3)===110?100:v){case 100:case 108:case 109:case 115:C4(i,I,I,n&&u_(PR(i,I,I,0,0,s,l,D,s,B=[],g,N),N),s,N,g,l,n?B:N);break;default:C4(F,I,I,I,[""],N,0,l,N)}}f=m=_=0,C=S=1,D=F="",g=a;break;case 58:g=1+Uu(F),_=b;default:if(C<1){if(R==123)--C;else if(R==125&&C++==0&&mF()==125)continue}switch(F+=mw(R),R*C){case 38:S=m>0?1:(F+="\f",-1);break;case 44:l[f++]=(Uu(F)-1)*S,S=1;break;case 64:Ig()===45&&(F+=NT(Rc())),v=Ig(),m=g=Uu(D=F+=xF(T4())),R++;break;case 45:b===45&&Uu(F)==2&&(C=0)}}return r}function PR(i,t,e,n,s,r,a,l,u,f,m,g){for(var v=s-1,_=s===0?r:[""],b=gD(_),C=0,M=0,S=0;C<n;++C)for(var R=0,D=sy(i,v+1,v=pD(M=a[C])),B=i;R<b;++R)(B=mD(M>0?_[R]+" "+D:gn(D,/&\f/g,_[R])))&&(u[S++]=B);return HE(i,t,e,s===0?PE:l,u,f,m,g)}function SF(i,t,e,n){return HE(i,t,e,fD,mw(pF()),sy(i,2,-2),0,n)}function FR(i,t,e,n,s){return HE(i,t,e,pw,sy(i,0,n),sy(i,n+1,-1),n,s)}function yD(i,t,e){switch(fF(i,t)){case 5103:return ii+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ii+i+i;case 4789:return D_+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return ii+i+D_+i+Bi+i+i;case 5936:switch(dr(i,t+11)){case 114:return ii+i+Bi+gn(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return ii+i+Bi+gn(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return ii+i+Bi+gn(i,/[svh]\w+-[tblr]{2}/,"lr")+i}case 6828:case 4268:case 2903:return ii+i+Bi+i+i;case 6165:return ii+i+Bi+"flex-"+i+i;case 5187:return ii+i+gn(i,/(\w+).+(:[^]+)/,ii+"box-$1$2"+Bi+"flex-$1$2")+i;case 5443:return ii+i+Bi+"flex-item-"+gn(i,/flex-|-self/g,"")+(Ah(i,/flex-|baseline/)?"":Bi+"grid-row-"+gn(i,/flex-|-self/g,""))+i;case 4675:return ii+i+Bi+"flex-line-pack"+gn(i,/align-content|flex-|-self/g,"")+i;case 5548:return ii+i+Bi+gn(i,"shrink","negative")+i;case 5292:return ii+i+Bi+gn(i,"basis","preferred-size")+i;case 6060:return ii+"box-"+gn(i,"-grow","")+ii+i+Bi+gn(i,"grow","positive")+i;case 4554:return ii+gn(i,/([^-])(transform)/g,"$1"+ii+"$2")+i;case 6187:return gn(gn(gn(i,/(zoom-|grab)/,ii+"$1"),/(image-set)/,ii+"$1"),i,"")+i;case 5495:case 3959:return gn(i,/(image-set\([^]*)/,ii+"$1$`$1");case 4968:return gn(gn(i,/(.+:)(flex-)?(.*)/,ii+"box-pack:$3"+Bi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ii+i+i;case 4200:if(!Ah(i,/flex-|baseline/))return Bi+"grid-column-align"+sy(i,t)+i;break;case 2592:case 3360:return Bi+gn(i,"template-","")+i;case 4384:case 3616:return e&&e.some(function(n,s){return t=s,Ah(n.props,/grid-\w+-end/)})?~M4(i+(e=e[t].value),"span",0)?i:Bi+gn(i,"-start","")+i+Bi+"grid-row-span:"+(~M4(e,"span",0)?Ah(e,/\d+/):+Ah(e,/\d+/)-+Ah(i,/\d+/))+";":Bi+gn(i,"-start","")+i;case 4896:case 4128:return e&&e.some(function(n){return Ah(n.props,/grid-\w+-start/)})?i:Bi+gn(gn(i,"-end","-span"),"span ","")+i;case 4095:case 3583:case 4068:case 2532:return gn(i,/(.+)-inline(.+)/,ii+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Uu(i)-1-t>6)switch(dr(i,t+1)){case 109:if(dr(i,t+4)!==45)break;case 102:return gn(i,/(.+:)(.+)-([^]+)/,"$1"+ii+"$2-$3$1"+D_+(dr(i,t+3)==108?"$3":"$2-$3"))+i;case 115:return~M4(i,"stretch",0)?yD(gn(i,"stretch","fill-available"),t,e)+i:i}break;case 5152:case 5920:return gn(i,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,s,r,a,l,u,f){return Bi+s+":"+r+f+(a?Bi+s+"-span:"+(l?u:+u-+r)+f:"")+i});case 4949:if(dr(i,t+6)===121)return gn(i,":",":"+ii)+i;break;case 6444:switch(dr(i,dr(i,14)===45?18:11)){case 120:return gn(i,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ii+(dr(i,14)===45?"inline-":"")+"box$3$1"+ii+"$2$3$1"+Bi+"$2box$3")+i;case 100:return gn(i,":",":"+Bi)+i}break;case 5719:case 2647:case 2135:case 3927:case 2391:return gn(i,"scroll-","scroll-snap-")+i}return i}function f3(i,t){for(var e="",n=0;n<i.length;n++)e+=t(i[n],n,i,t)||"";return e}function EF(i,t,e,n){switch(i.type){case hF:if(i.children.length)break;case uF:case pw:return i.return=i.return||i.value;case fD:return"";case dD:return i.return=i.value+"{"+f3(i.children,n)+"}";case PE:if(!Uu(i.value=i.props.join(",")))return""}return Uu(e=f3(i.children,n))?i.return=i.value+"{"+e+"}":""}function MF(i){var t=gD(i);return function(e,n,s,r){for(var a="",l=0;l<t;l++)a+=i[l](e,n,s,r)||"";return a}}function TF(i){return function(t){t.root||(t=t.return)&&i(t)}}function CF(i,t,e,n){if(i.length>-1&&!i.return)switch(i.type){case pw:i.return=yD(i.value,i.length,e);return;case dD:return f3([fd(i,{value:gn(i.value,"@","@"+ii)})],n);case PE:if(i.length)return dF(e=i.props,function(s){switch(Ah(s,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":p1(fd(i,{props:[gn(s,/:(read-\w+)/,":"+D_+"$1")]})),p1(fd(i,{props:[s]})),c5(i,{props:UR(e,n)});break;case"::placeholder":p1(fd(i,{props:[gn(s,/:(plac\w+)/,":"+ii+"input-$1")]})),p1(fd(i,{props:[gn(s,/:(plac\w+)/,":"+D_+"$1")]})),p1(fd(i,{props:[gn(s,/:(plac\w+)/,Bi+"input-$1")]})),p1(fd(i,{props:[s]})),c5(i,{props:UR(e,n)});break}return""})}}var wF={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ro={},ay=typeof process<"u"&&Ro!==void 0&&(Ro.REACT_APP_SC_ATTR||Ro.SC_ATTR)||"data-styled",_D="active",AD="data-styled-version",GE="6.1.17",gw=`/*!sc*/
`,d3=typeof window<"u"&&"HTMLElement"in window,RF=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Ro!==void 0&&Ro.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Ro.REACT_APP_SC_DISABLE_SPEEDY!==""?Ro.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Ro.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Ro!==void 0&&Ro.SC_DISABLE_SPEEDY!==void 0&&Ro.SC_DISABLE_SPEEDY!==""&&Ro.SC_DISABLE_SPEEDY!=="false"&&Ro.SC_DISABLE_SPEEDY),LF={},kE=Object.freeze([]),oy=Object.freeze({});function xD(i,t,e){return e===void 0&&(e=oy),i.theme!==e.theme&&i.theme||t||e.theme}var bD=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),DF=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,BF=/(^-|-$)/g;function HR(i){return i.replace(DF,"-").replace(BF,"")}var OF=/(a)(d)/gi,_S=52,zR=function(i){return String.fromCharCode(i+(i>25?39:97))};function f5(i){var t,e="";for(t=Math.abs(i);t>_S;t=t/_S|0)e=zR(t%_S)+e;return(zR(t%_S)+e).replace(OF,"$1-$2")}var IT,SD=5381,q1=function(i,t){for(var e=t.length;e;)i=33*i^t.charCodeAt(--e);return i},ED=function(i){return q1(SD,i)};function vw(i){return f5(ED(i)>>>0)}function NF(i){return i.displayName||i.name||"Component"}function UT(i){return typeof i=="string"&&!0}var MD=typeof Symbol=="function"&&Symbol.for,TD=MD?Symbol.for("react.memo"):60115,IF=MD?Symbol.for("react.forward_ref"):60112,UF={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},PF={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},CD={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},FF=((IT={})[IF]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},IT[TD]=CD,IT);function GR(i){return("type"in(t=i)&&t.type.$$typeof)===TD?CD:"$$typeof"in i?FF[i.$$typeof]:UF;var t}var HF=Object.defineProperty,zF=Object.getOwnPropertyNames,kR=Object.getOwnPropertySymbols,GF=Object.getOwnPropertyDescriptor,kF=Object.getPrototypeOf,VR=Object.prototype;function wD(i,t,e){if(typeof t!="string"){if(VR){var n=kF(t);n&&n!==VR&&wD(i,n,e)}var s=zF(t);kR&&(s=s.concat(kR(t)));for(var r=GR(i),a=GR(t),l=0;l<s.length;++l){var u=s[l];if(!(u in PF||e&&e[u]||a&&u in a||r&&u in r)){var f=GF(t,u);try{HF(i,u,f)}catch{}}}}return i}function Hg(i){return typeof i=="function"}function yw(i){return typeof i=="object"&&"styledComponentId"in i}function Bm(i,t){return i&&t?"".concat(i," ").concat(t):i||t||""}function p3(i,t){if(i.length===0)return"";for(var e=i[0],n=1;n<i.length;n++)e+=i[n];return e}function X_(i){return i!==null&&typeof i=="object"&&i.constructor.name===Object.name&&!("props"in i&&i.$$typeof)}function d5(i,t,e){if(e===void 0&&(e=!1),!e&&!X_(i)&&!Array.isArray(i))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)i[n]=d5(i[n],t[n]);else if(X_(t))for(var n in t)i[n]=d5(i[n],t[n]);return i}function _w(i,t){Object.defineProperty(i,"toString",{value:t})}function Jd(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(i," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var VF=function(){function i(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return i.prototype.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},i.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,s=n.length,r=s;t>=r;)if((r<<=1)<0)throw Jd(16,"".concat(t));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var a=s;a<r;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(t+1),u=(a=0,e.length);a<u;a++)this.tag.insertRule(l,e[a])&&(this.groupSizes[t]++,l++)},i.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),s=n+e;this.groupSizes[t]=0;for(var r=n;r<s;r++)this.tag.deleteRule(n)}},i.prototype.getGroup=function(t){var e="";if(t>=this.length||this.groupSizes[t]===0)return e;for(var n=this.groupSizes[t],s=this.indexOfGroup(t),r=s+n,a=s;a<r;a++)e+="".concat(this.tag.getRule(a)).concat(gw);return e},i}(),w4=new Map,m3=new Map,R4=1,AS=function(i){if(w4.has(i))return w4.get(i);for(;m3.has(R4);)R4++;var t=R4++;return w4.set(i,t),m3.set(t,i),t},QF=function(i,t){R4=t+1,w4.set(i,t),m3.set(t,i)},jF="style[".concat(ay,"][").concat(AD,'="').concat(GE,'"]'),XF=new RegExp("^".concat(ay,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),qF=function(i,t,e){for(var n,s=e.split(","),r=0,a=s.length;r<a;r++)(n=s[r])&&i.registerName(t,n)},YF=function(i,t){for(var e,n=((e=t.textContent)!==null&&e!==void 0?e:"").split(gw),s=[],r=0,a=n.length;r<a;r++){var l=n[r].trim();if(l){var u=l.match(XF);if(u){var f=0|parseInt(u[1],10),m=u[2];f!==0&&(QF(m,f),qF(i,m,u[3]),i.getTag().insertRules(f,s)),s.length=0}else s.push(l)}}},QR=function(i){for(var t=document.querySelectorAll(jF),e=0,n=t.length;e<n;e++){var s=t[e];s&&s.getAttribute(ay)!==_D&&(YF(i,s),s.parentNode&&s.parentNode.removeChild(s))}};function WF(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var RD=function(i){var t=document.head,e=i||t,n=document.createElement("style"),s=function(l){var u=Array.from(l.querySelectorAll("style[".concat(ay,"]")));return u[u.length-1]}(e),r=s!==void 0?s.nextSibling:null;n.setAttribute(ay,_D),n.setAttribute(AD,GE);var a=WF();return a&&n.setAttribute("nonce",a),e.insertBefore(n,r),n},KF=function(){function i(t){this.element=RD(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,s=0,r=n.length;s<r;s++){var a=n[s];if(a.ownerNode===e)return a}throw Jd(17)}(this.element),this.length=0}return i.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch{return!1}},i.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},i.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},i}(),JF=function(){function i(t){this.element=RD(t),this.nodes=this.element.childNodes,this.length=0}return i.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},i.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},i.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},i}(),ZF=function(){function i(t){this.rules=[],this.length=0}return i.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},i.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},i.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},i}(),jR=d3,$F={isServer:!d3,useCSSOMInjection:!RF},g3=function(){function i(t,e,n){t===void 0&&(t=oy),e===void 0&&(e={});var s=this;this.options=pr(pr({},$F),t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&d3&&jR&&(jR=!1,QR(this)),_w(this,function(){return function(r){for(var a=r.getTag(),l=a.length,u="",f=function(g){var v=function(S){return m3.get(S)}(g);if(v===void 0)return"continue";var _=r.names.get(v),b=a.getGroup(g);if(_===void 0||!_.size||b.length===0)return"continue";var C="".concat(ay,".g").concat(g,'[id="').concat(v,'"]'),M="";_!==void 0&&_.forEach(function(S){S.length>0&&(M+="".concat(S,","))}),u+="".concat(b).concat(C,'{content:"').concat(M,'"}').concat(gw)},m=0;m<l;m++)f(m);return u}(s)})}return i.registerId=function(t){return AS(t)},i.prototype.rehydrate=function(){!this.server&&d3&&QR(this)},i.prototype.reconstructWithOptions=function(t,e){return e===void 0&&(e=!0),new i(pr(pr({},this.options),t),this.gs,e&&this.names||void 0)},i.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},i.prototype.getTag=function(){return this.tag||(this.tag=(t=function(e){var n=e.useCSSOMInjection,s=e.target;return e.isServer?new ZF(s):n?new KF(s):new JF(s)}(this.options),new VF(t)));var t},i.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},i.prototype.registerName=function(t,e){if(AS(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},i.prototype.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(AS(t),n)},i.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},i.prototype.clearRules=function(t){this.getTag().clearGroup(AS(t)),this.clearNames(t)},i.prototype.clearTag=function(){this.tag=void 0},i}(),tH=/&/g,eH=/^\s*\/\/.*$/gm;function LD(i,t){return i.map(function(e){return e.type==="rule"&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(e.children)&&e.type!=="@keyframes"&&(e.children=LD(e.children,t)),e})}function nH(i){var t,e,n,s=oy,r=s.options,a=r===void 0?oy:r,l=s.plugins,u=l===void 0?kE:l,f=function(v,_,b){return b.startsWith(e)&&b.endsWith(e)&&b.replaceAll(e,"").length>0?".".concat(t):v},m=u.slice();m.push(function(v){v.type===PE&&v.value.includes("&")&&(v.props[0]=v.props[0].replace(tH,e).replace(n,f))}),a.prefix&&m.push(CF),m.push(EF);var g=function(v,_,b,C){_===void 0&&(_=""),b===void 0&&(b=""),C===void 0&&(C="&"),t=C,e=_,n=new RegExp("\\".concat(e,"\\b"),"g");var M=v.replace(eH,""),S=bF(b||_?"".concat(b," ").concat(_," { ").concat(M," }"):M);a.namespace&&(S=LD(S,a.namespace));var R=[];return f3(S,MF(m.concat(TF(function(D){return R.push(D)})))),R};return g.hash=u.length?u.reduce(function(v,_){return _.name||Jd(15),q1(v,_.name)},SD).toString():"",g}var iH=new g3,p5=nH(),DD=Oa.createContext({shouldForwardProp:void 0,styleSheet:iH,stylis:p5});DD.Consumer;Oa.createContext(void 0);function m5(){return lt.useContext(DD)}var BD=function(){function i(t,e){var n=this;this.inject=function(s,r){r===void 0&&(r=p5);var a=n.name+r.hash;s.hasNameForId(n.id,a)||s.insertRules(n.id,a,r(n.rules,a,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,_w(this,function(){throw Jd(12,String(n.name))})}return i.prototype.getName=function(t){return t===void 0&&(t=p5),this.name+t.hash},i}(),sH=function(i){return i>="A"&&i<="Z"};function XR(i){for(var t="",e=0;e<i.length;e++){var n=i[e];if(e===1&&n==="-"&&i[0]==="-")return i;sH(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var OD=function(i){return i==null||i===!1||i===""},ND=function(i){var t,e,n=[];for(var s in i){var r=i[s];i.hasOwnProperty(s)&&!OD(r)&&(Array.isArray(r)&&r.isCss||Hg(r)?n.push("".concat(XR(s),":"),r,";"):X_(r)?n.push.apply(n,iy(iy(["".concat(s," {")],ND(r),!1),["}"],!1)):n.push("".concat(XR(s),": ").concat((t=s,(e=r)==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||t in wF||t.startsWith("--")?String(e).trim():"".concat(e,"px")),";")))}return n};function Yd(i,t,e,n){if(OD(i))return[];if(yw(i))return[".".concat(i.styledComponentId)];if(Hg(i)){if(!Hg(r=i)||r.prototype&&r.prototype.isReactComponent||!t)return[i];var s=i(t);return Yd(s,t,e,n)}var r;return i instanceof BD?e?(i.inject(e,n),[i.getName(n)]):[i]:X_(i)?ND(i):Array.isArray(i)?Array.prototype.concat.apply(kE,i.map(function(a){return Yd(a,t,e,n)})):[i.toString()]}function ID(i){for(var t=0;t<i.length;t+=1){var e=i[t];if(Hg(e)&&!yw(e))return!1}return!0}var rH=ED(GE),aH=function(){function i(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&ID(t),this.componentId=e,this.baseHash=q1(rH,e),this.baseStyle=n,g3.registerId(e)}return i.prototype.generateAndInjectStyles=function(t,e,n){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))s=Bm(s,this.staticRulesId);else{var r=p3(Yd(this.rules,t,e,n)),a=f5(q1(this.baseHash,r)>>>0);if(!e.hasNameForId(this.componentId,a)){var l=n(r,".".concat(a),void 0,this.componentId);e.insertRules(this.componentId,a,l)}s=Bm(s,a),this.staticRulesId=a}else{for(var u=q1(this.baseHash,n.hash),f="",m=0;m<this.rules.length;m++){var g=this.rules[m];if(typeof g=="string")f+=g;else if(g){var v=p3(Yd(g,t,e,n));u=q1(u,v+m),f+=v}}if(f){var _=f5(u>>>0);e.hasNameForId(this.componentId,_)||e.insertRules(this.componentId,_,n(f,".".concat(_),void 0,this.componentId)),s=Bm(s,_)}}return s},i}(),ly=Oa.createContext(void 0);ly.Consumer;function VE(){var i=lt.useContext(ly);if(!i)throw Jd(18);return i}function oH(i){var t=Oa.useContext(ly),e=lt.useMemo(function(){return function(n,s){if(!n)throw Jd(14);if(Hg(n)){var r=n(s);return r}if(Array.isArray(n)||typeof n!="object")throw Jd(8);return s?pr(pr({},s),n):n}(i.theme,t)},[i.theme,t]);return i.children?Oa.createElement(ly.Provider,{value:e},i.children):null}var PT={};function lH(i,t,e){var n=yw(i),s=i,r=!UT(i),a=t.attrs,l=a===void 0?kE:a,u=t.componentId,f=u===void 0?function(B,N){var I=typeof B!="string"?"sc":HR(B);PT[I]=(PT[I]||0)+1;var F="".concat(I,"-").concat(vw(GE+I+PT[I]));return N?"".concat(N,"-").concat(F):F}(t.displayName,t.parentComponentId):u,m=t.displayName,g=m===void 0?function(B){return UT(B)?"styled.".concat(B):"Styled(".concat(NF(B),")")}(i):m,v=t.displayName&&t.componentId?"".concat(HR(t.displayName),"-").concat(t.componentId):t.componentId||f,_=n&&s.attrs?s.attrs.concat(l).filter(Boolean):l,b=t.shouldForwardProp;if(n&&s.shouldForwardProp){var C=s.shouldForwardProp;if(t.shouldForwardProp){var M=t.shouldForwardProp;b=function(B,N){return C(B,N)&&M(B,N)}}else b=C}var S=new aH(e,v,n?s.componentStyle:void 0);function R(B,N){return function(I,F,z){var U=I.attrs,P=I.componentStyle,X=I.defaultProps,ot=I.foldedComponentIds,it=I.styledComponentId,ut=I.target,dt=Oa.useContext(ly),j=m5(),tt=I.shouldForwardProp||j.shouldForwardProp,nt=xD(F,dt,X)||oy,_t=function(wt,Bt,Ut){for(var Wt,ve=pr(pr({},Bt),{className:void 0,theme:Ut}),ee=0;ee<wt.length;ee+=1){var Ye=Hg(Wt=wt[ee])?Wt(ve):Wt;for(var we in Ye)ve[we]=we==="className"?Bm(ve[we],Ye[we]):we==="style"?pr(pr({},ve[we]),Ye[we]):Ye[we]}return Bt.className&&(ve.className=Bm(ve.className,Bt.className)),ve}(U,F,nt),J=_t.as||ut,at={};for(var xt in _t)_t[xt]===void 0||xt[0]==="$"||xt==="as"||xt==="theme"&&_t.theme===nt||(xt==="forwardedAs"?at.as=_t.forwardedAs:tt&&!tt(xt,J)||(at[xt]=_t[xt]));var Et=function(wt,Bt){var Ut=m5(),Wt=wt.generateAndInjectStyles(Bt,Ut.styleSheet,Ut.stylis);return Wt}(P,_t),ct=Bm(ot,it);return Et&&(ct+=" "+Et),_t.className&&(ct+=" "+_t.className),at[UT(J)&&!bD.has(J)?"class":"className"]=ct,z&&(at.ref=z),lt.createElement(J,at)}(D,B,N)}R.displayName=g;var D=Oa.forwardRef(R);return D.attrs=_,D.componentStyle=S,D.displayName=g,D.shouldForwardProp=b,D.foldedComponentIds=n?Bm(s.foldedComponentIds,s.styledComponentId):"",D.styledComponentId=v,D.target=n?s.target:i,Object.defineProperty(D,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(B){this._foldedDefaultProps=n?function(N){for(var I=[],F=1;F<arguments.length;F++)I[F-1]=arguments[F];for(var z=0,U=I;z<U.length;z++)d5(N,U[z],!0);return N}({},s.defaultProps,B):B}}),_w(D,function(){return".".concat(D.styledComponentId)}),r&&wD(D,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),D}function qR(i,t){for(var e=[i[0]],n=0,s=t.length;n<s;n+=1)e.push(t[n],i[n+1]);return e}var YR=function(i){return Object.assign(i,{isCss:!0})};function q_(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Hg(i)||X_(i))return YR(Yd(qR(kE,iy([i],t,!0))));var n=i;return t.length===0&&n.length===1&&typeof n[0]=="string"?Yd(n):YR(Yd(qR(n,t)))}function g5(i,t,e){if(e===void 0&&(e=oy),!t)throw Jd(1,t);var n=function(s){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return i(t,e,q_.apply(void 0,iy([s],r,!1)))};return n.attrs=function(s){return g5(i,t,pr(pr({},e),{attrs:Array.prototype.concat(e.attrs,s).filter(Boolean)}))},n.withConfig=function(s){return g5(i,t,pr(pr({},e),s))},n}var UD=function(i){return g5(lH,i)},ie=UD;bD.forEach(function(i){ie[i]=UD(i)});var cH=function(){function i(t,e){this.rules=t,this.componentId=e,this.isStatic=ID(t),g3.registerId(this.componentId+1)}return i.prototype.createStyles=function(t,e,n,s){var r=s(p3(Yd(this.rules,e,n,s)),""),a=this.componentId+t;n.insertRules(a,a,r)},i.prototype.removeStyles=function(t,e){e.clearRules(this.componentId+t)},i.prototype.renderStyles=function(t,e,n,s){t>2&&g3.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,s)},i}();function uH(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=q_.apply(void 0,iy([i],t,!1)),s="sc-global-".concat(vw(JSON.stringify(n))),r=new cH(n,s),a=function(u){var f=m5(),m=Oa.useContext(ly),g=Oa.useRef(f.styleSheet.allocateGSInstance(s)).current;return f.styleSheet.server&&l(g,u,f.styleSheet,m,f.stylis),Oa.useLayoutEffect(function(){if(!f.styleSheet.server)return l(g,u,f.styleSheet,m,f.stylis),function(){return r.removeStyles(g,f.styleSheet)}},[g,u,f.styleSheet,m,f.stylis]),null};function l(u,f,m,g,v){if(r.isStatic)r.renderStyles(u,LF,m,v);else{var _=pr(pr({},f),{theme:xD(f,g,a.defaultProps)});r.renderStyles(u,_,m,v)}}return Oa.memo(a)}function by(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=p3(q_.apply(void 0,iy([i],t,!1))),s=vw(n);return new BD(s,n)}const hH=by`
    from {
      text-shadow: 0.5px 0 0 #ea36af, -1px 0 0 #75fa69;
    }
    to {
      text-shadow: 1px 0.5px 1px #ea36af, -0.5px -0.5px 1px #75fa69;
    }
`,fH=uH`
  :root {
    --white-color: #F8F8FF;
  }

  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    animation-duration: 0.01s;
    animation-name: ${hH};
    animation-iteration-count: infinite;
    animation-direction: alternate;
  }

  html {
    font-size: clamp(12px, 0.75vw + 0.5rem, 26px);
    cursor: url("cursor/Arrow1.cur"), auto;
  }

  html, body {
    user-select: none; 
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: ${({theme:i})=>i.fontFamily};
    letter-spacing: 0.1em;
    line-height: 1.5;
    color: ${({theme:i})=>i.pallet.textColor};
    background-color: ${({theme:i})=>i.pallet.mainColor};
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    letter-spacing: -0.5px;
  }

  img, picture, video, svg {
    display: block;
    max-width: 100%;
  }

  canvas {4
    min-width: 100vw;
    min-height: 100vh;
  }

  input, button, textarea, select {
    font: inherit;
  }

  input:hover, textarea:hover {
    caret-color: ${({theme:i})=>i.pallet.textColor};
    cursor: url("cursor/Win95ZBlinkCur.cur"), auto;
  }

  button {
    background: none;
    border: none;
  }

  a {
    text-decoration: none;
    color: inherit;
  }
`,dH=ie.div`
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;

  &::before {
    content: "";
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.1),
      rgba(0, 0, 0, 0.1) 1px,
      transparent 2px,
      transparent 4px
    );
    pointer-events: none;
    mix-blend-mode: overlay;
  }

  &::after {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
      ellipse at center,
      rgba(0, 0, 0, 0) 60%,
      rgba(0, 0, 0, 0.4) 100%
    );
    pointer-events: none;
    mix-blend-mode: multiply;
  }
`,pH=ie.div`
  opacity: ${({bootDone:i})=>i?1:0};
  transition: opacity 2s ease-in-out;
  pointerevents: ${({bootDone:i})=>i?"auto":"none"};
`;var FT={exports:{}},HT={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WR;function mH(){if(WR)return HT;WR=1;var i=i0();function t(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var e=typeof Object.is=="function"?Object.is:t,n=i.useSyncExternalStore,s=i.useRef,r=i.useEffect,a=i.useMemo,l=i.useDebugValue;return HT.useSyncExternalStoreWithSelector=function(u,f,m,g,v){var _=s(null);if(_.current===null){var b={hasValue:!1,value:null};_.current=b}else b=_.current;_=a(function(){function M(N){if(!S){if(S=!0,R=N,N=g(N),v!==void 0&&b.hasValue){var I=b.value;if(v(I,N))return D=I}return D=N}if(I=D,e(R,N))return I;var F=g(N);return v!==void 0&&v(I,F)?(R=N,I):(R=N,D=F)}var S=!1,R,D,B=m===void 0?null:m;return[function(){return M(f())},B===null?void 0:function(){return M(B())}]},[f,m,g,v]);var C=n(u,_[0],_[1]);return r(function(){b.hasValue=!0,b.value=C},[C]),l(C),C},HT}var KR;function gH(){return KR||(KR=1,FT.exports=mH()),FT.exports}var vH=gH();function yH(i){i()}function _H(){let i=null,t=null;return{clear(){i=null,t=null},notify(){yH(()=>{let e=i;for(;e;)e.callback(),e=e.next})},get(){const e=[];let n=i;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let n=!0;const s=t={callback:e,next:null,prev:t};return s.prev?s.prev.next=s:i=s,function(){!n||i===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:i=s.next)}}}}var JR={notify(){},get:()=>[]};function AH(i,t){let e,n=JR,s=0,r=!1;function a(C){m();const M=n.subscribe(C);let S=!1;return()=>{S||(S=!0,M(),g())}}function l(){n.notify()}function u(){b.onStateChange&&b.onStateChange()}function f(){return r}function m(){s++,e||(e=i.subscribe(u),n=_H())}function g(){s--,e&&s===0&&(e(),e=void 0,n.clear(),n=JR)}function v(){r||(r=!0,m())}function _(){r&&(r=!1,g())}const b={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:f,trySubscribe:v,tryUnsubscribe:_,getListeners:()=>n};return b}var xH=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bH=xH(),SH=()=>typeof navigator<"u"&&navigator.product==="ReactNative",EH=SH(),MH=()=>bH||EH?lt.useLayoutEffect:lt.useEffect,TH=MH(),zT=Symbol.for("react-redux-context"),GT=typeof globalThis<"u"?globalThis:{};function CH(){if(!lt.createContext)return{};const i=GT[zT]??(GT[zT]=new Map);let t=i.get(lt.createContext);return t||(t=lt.createContext(null),i.set(lt.createContext,t)),t}var Zd=CH();function wH(i){const{children:t,context:e,serverState:n,store:s}=i,r=lt.useMemo(()=>{const u=AH(s);return{store:s,subscription:u,getServerState:n?()=>n:void 0}},[s,n]),a=lt.useMemo(()=>s.getState(),[s]);TH(()=>{const{subscription:u}=r;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==s.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[r,a]);const l=e||Zd;return lt.createElement(l.Provider,{value:r},t)}var RH=wH;function Aw(i=Zd){return function(){return lt.useContext(i)}}var PD=Aw();function FD(i=Zd){const t=i===Zd?PD:Aw(i),e=()=>{const{store:n}=t();return n};return Object.assign(e,{withTypes:()=>e}),e}var HD=FD();function LH(i=Zd){const t=i===Zd?HD:FD(i),e=()=>t().dispatch;return Object.assign(e,{withTypes:()=>e}),e}var DH=LH(),BH=(i,t)=>i===t;function OH(i=Zd){const t=i===Zd?PD:Aw(i),e=(n,s={})=>{const{equalityFn:r=BH}=typeof s=="function"?{equalityFn:s}:s,a=t(),{store:l,subscription:u,getServerState:f}=a;lt.useRef(!0);const m=lt.useCallback({[n.name](v){return n(v)}}[n.name],[n]),g=vH.useSyncExternalStoreWithSelector(u.addNestedSub,l.getState,f||l.getState,m,r);return lt.useDebugValue(g),g};return Object.assign(e,{withTypes:()=>e}),e}var NH=OH();const lp=DH.withTypes(),xw=NH.withTypes();HD.withTypes();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const s0="176",IH={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},UH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},zD=0,v5=1,GD=2,PH=3,kD=0,QE=1,B_=2,cc=3,Dc=0,qs=1,Da=2,aa=0,Ug=1,y5=2,_5=3,A5=4,VD=5,gd=100,QD=101,jD=102,XD=103,qD=104,YD=200,WD=201,KD=202,JD=203,v3=204,y3=205,ZD=206,$D=207,tB=208,eB=209,nB=210,iB=211,sB=212,rB=213,aB=214,_3=0,A3=1,x3=2,zg=3,b3=4,S3=5,E3=6,M3=7,Tx=0,oB=1,lB=2,Lc=0,cB=1,uB=2,hB=3,bw=4,fB=5,dB=6,pB=7,x5="attached",mB="detached",jE=300,rf=301,$d=302,Y_=303,W_=304,Sy=306,tp=1e3,zo=1001,cy=1002,os=1003,XE=1004,FH=1004,Om=1005,HH=1005,Ni=1006,Z1=1007,zH=1007,Cl=1008,GH=1008,Ws=1009,Sw=1010,Ew=1011,uy=1012,qE=1013,Hu=1014,Na=1015,r0=1016,YE=1017,WE=1018,Gg=1020,Mw=35902,Tw=1021,Cw=1022,ia=1023,hy=1026,kg=1027,KE=1028,Cx=1029,ww=1030,JE=1031,kH=1032,ZE=1033,O_=33776,N_=33777,I_=33778,U_=33779,T3=35840,C3=35841,w3=35842,R3=35843,L3=36196,D3=37492,B3=37496,O3=37808,N3=37809,I3=37810,U3=37811,P3=37812,F3=37813,H3=37814,z3=37815,G3=37816,k3=37817,V3=37818,Q3=37819,j3=37820,X3=37821,P_=36492,q3=36494,Y3=36495,Rw=36283,W3=36284,K3=36285,J3=36286,gB=2200,vB=2201,yB=2202,fy=2300,dy=2301,L4=2302,Nm=2400,Im=2401,K_=2402,$E=2500,Lw=2501,_B=0,Dw=1,Z3=2,cp=3200,AB=3201,VH=3202,QH=3203,up=0,xB=1,Mc="",Kn="srgb",zu="srgb-linear",J_="linear",fi="srgb",jH=0,bm=7680,XH=7681,qH=7682,YH=7683,WH=34055,KH=34056,JH=5386,ZH=512,$H=513,tz=514,ez=515,nz=516,iz=517,sz=518,b5=519,bB=512,SB=513,EB=514,Bw=515,MB=516,TB=517,CB=518,wB=519,Z_=35044,rz=35048,az=35040,oz=35045,lz=35049,cz=35041,uz=35046,hz=35050,fz=35042,dz="100",S5="300 es",wl=2e3,$_=2001,pz={COMPUTE:"compute",RENDER:"render"},mz={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},gz={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};class Yo{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){const n=this._listeners;if(n===void 0)return;const s=n[t];if(s!==void 0){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const n=e[t.type];if(n!==void 0){t.target=this;const s=n.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,t);t.target=null}}}const qr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ZR=1234567;const Pg=Math.PI/180,py=180/Math.PI;function ko(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(qr[i&255]+qr[i>>8&255]+qr[i>>16&255]+qr[i>>24&255]+"-"+qr[t&255]+qr[t>>8&255]+"-"+qr[t>>16&15|64]+qr[t>>24&255]+"-"+qr[e&63|128]+qr[e>>8&255]+"-"+qr[e>>16&255]+qr[e>>24&255]+qr[n&255]+qr[n>>8&255]+qr[n>>16&255]+qr[n>>24&255]).toLowerCase()}function nn(i,t,e){return Math.max(t,Math.min(e,i))}function Ow(i,t){return(i%t+t)%t}function vz(i,t,e,n,s){return n+(i-t)*(s-n)/(e-t)}function yz(i,t,e){return i!==t?(e-i)/(t-i):0}function F_(i,t,e){return(1-e)*i+e*t}function _z(i,t,e,n){return F_(i,t,1-Math.exp(-e*n))}function Az(i,t=1){return t-Math.abs(Ow(i,t*2)-t)}function xz(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*(3-2*i))}function bz(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*i*(i*(i*6-15)+10))}function Sz(i,t){return i+Math.floor(Math.random()*(t-i+1))}function Ez(i,t){return i+Math.random()*(t-i)}function Mz(i){return i*(.5-Math.random())}function Tz(i){i!==void 0&&(ZR=i);let t=ZR+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Cz(i){return i*Pg}function wz(i){return i*py}function Rz(i){return(i&i-1)===0&&i!==0}function Lz(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Dz(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Bz(i,t,e,n,s){const r=Math.cos,a=Math.sin,l=r(e/2),u=a(e/2),f=r((t+n)/2),m=a((t+n)/2),g=r((t-n)/2),v=a((t-n)/2),_=r((n-t)/2),b=a((n-t)/2);switch(s){case"XYX":i.set(l*m,u*g,u*v,l*f);break;case"YZY":i.set(u*v,l*m,u*g,l*f);break;case"ZXZ":i.set(u*g,u*v,l*m,l*f);break;case"XZX":i.set(l*m,u*b,u*_,l*f);break;case"YXY":i.set(u*_,l*m,u*b,l*f);break;case"ZYZ":i.set(u*b,u*_,l*m,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Ba(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function cn(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const tA={DEG2RAD:Pg,RAD2DEG:py,generateUUID:ko,clamp:nn,euclideanModulo:Ow,mapLinear:vz,inverseLerp:yz,lerp:F_,damp:_z,pingpong:Az,smoothstep:xz,smootherstep:bz,randInt:Sz,randFloat:Ez,randFloatSpread:Mz,seededRandom:Tz,degToRad:Cz,radToDeg:wz,isPowerOfTwo:Rz,ceilPowerOfTwo:Lz,floorPowerOfTwo:Dz,setQuaternionFromProperEuler:Bz,normalize:cn,denormalize:Ba};class Pt{constructor(t=0,e=0){Pt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6],this.y=s[1]*e+s[4]*n+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=nn(this.x,t.x,e.x),this.y=nn(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=nn(this.x,t,e),this.y=nn(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(nn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),s=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*s+t.x,this.y=r*s+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class on{constructor(t,e,n,s,r,a,l,u,f){on.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,s,r,a,l,u,f)}set(t,e,n,s,r,a,l,u,f){const m=this.elements;return m[0]=t,m[1]=s,m[2]=l,m[3]=e,m[4]=r,m[5]=u,m[6]=n,m[7]=a,m[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,r=this.elements,a=n[0],l=n[3],u=n[6],f=n[1],m=n[4],g=n[7],v=n[2],_=n[5],b=n[8],C=s[0],M=s[3],S=s[6],R=s[1],D=s[4],B=s[7],N=s[2],I=s[5],F=s[8];return r[0]=a*C+l*R+u*N,r[3]=a*M+l*D+u*I,r[6]=a*S+l*B+u*F,r[1]=f*C+m*R+g*N,r[4]=f*M+m*D+g*I,r[7]=f*S+m*B+g*F,r[2]=v*C+_*R+b*N,r[5]=v*M+_*D+b*I,r[8]=v*S+_*B+b*F,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],l=t[5],u=t[6],f=t[7],m=t[8];return e*a*m-e*l*f-n*r*m+n*l*u+s*r*f-s*a*u}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],l=t[5],u=t[6],f=t[7],m=t[8],g=m*a-l*f,v=l*u-m*r,_=f*r-a*u,b=e*g+n*v+s*_;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const C=1/b;return t[0]=g*C,t[1]=(s*f-m*n)*C,t[2]=(l*n-s*a)*C,t[3]=v*C,t[4]=(m*e-s*u)*C,t[5]=(s*r-l*e)*C,t[6]=_*C,t[7]=(n*u-f*e)*C,t[8]=(a*e-n*r)*C,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,s,r,a,l){const u=Math.cos(r),f=Math.sin(r);return this.set(n*u,n*f,-n*(u*a+f*l)+a+t,-s*f,s*u,-s*(-f*a+u*l)+l+e,0,0,1),this}scale(t,e){return this.premultiply(kT.makeScale(t,e)),this}rotate(t){return this.premultiply(kT.makeRotation(-t)),this}translate(t,e){return this.premultiply(kT.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<9;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const kT=new on;function RB(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}const Oz={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Y1(i,t){return new Oz[i](t)}function eA(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function LB(){const i=eA("canvas");return i.style.display="block",i}const $R={};function D4(i){i in $R||($R[i]=!0,console.warn(i))}function Nz(i,t,e){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,e);break;default:n()}}setTimeout(r,e)})}function Iz(i){const t=i.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function Uz(i){const t=i.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const t6=new on().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),e6=new on().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Pz(){const i={enabled:!0,workingColorSpace:zu,spaces:{},convert:function(s,r,a){return this.enabled===!1||r===a||!r||!a||(this.spaces[r].transfer===fi&&(s.r=Zh(s.r),s.g=Zh(s.g),s.b=Zh(s.b)),this.spaces[r].primaries!==this.spaces[a].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===fi&&(s.r=$1(s.r),s.g=$1(s.g),s.b=$1(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Mc?J_:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,a){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[zu]:{primaries:t,whitePoint:n,transfer:J_,toXYZ:t6,fromXYZ:e6,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Kn},outputColorSpaceConfig:{drawingBufferColorSpace:Kn}},[Kn]:{primaries:t,whitePoint:n,transfer:fi,toXYZ:t6,fromXYZ:e6,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Kn}}}),i}const Fn=Pz();function Zh(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function $1(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let m1;class DB{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{m1===void 0&&(m1=eA("canvas")),m1.width=t.width,m1.height=t.height;const s=m1.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),n=m1}return n.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=eA("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const s=n.getImageData(0,0,t.width,t.height),r=s.data;for(let a=0;a<r.length;a++)r[a]=Zh(r[a]/255)*255;return n.putImageData(s,0,0),e}else if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(Zh(e[n]/255)*255):e[n]=Zh(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Fz=0;class Xd{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Fz++}),this.uuid=ko(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let a=0,l=s.length;a<l;a++)s[a].isDataTexture?r.push(VT(s[a].image)):r.push(VT(s[a]))}else r=VT(s);n.url=r}return e||(t.images[this.uuid]=n),n}}function VT(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?DB.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Hz=0;class wi extends Yo{constructor(t=wi.DEFAULT_IMAGE,e=wi.DEFAULT_MAPPING,n=zo,s=zo,r=Ni,a=Cl,l=ia,u=Ws,f=wi.DEFAULT_ANISOTROPY,m=Mc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Hz++}),this.uuid=ko(),this.name="",this.source=new Xd(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Pt(0,0),this.repeat=new Pt(1,1),this.center=new Pt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new on,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isTextureArray=t.isTextureArray,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==jE)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case tp:t.x=t.x-Math.floor(t.x);break;case zo:t.x=t.x<0?0:1;break;case cy:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case tp:t.y=t.y-Math.floor(t.y);break;case zo:t.y=t.y<0?0:1;break;case cy:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}wi.DEFAULT_IMAGE=null;wi.DEFAULT_MAPPING=jE;wi.DEFAULT_ANISOTROPY=1;class On{constructor(t=0,e=0,n=0,s=1){On.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,s){return this.x=t,this.y=e,this.z=n,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,s=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*s+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*s+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*s+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*s+a[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,s,r;const u=t.elements,f=u[0],m=u[4],g=u[8],v=u[1],_=u[5],b=u[9],C=u[2],M=u[6],S=u[10];if(Math.abs(m-v)<.01&&Math.abs(g-C)<.01&&Math.abs(b-M)<.01){if(Math.abs(m+v)<.1&&Math.abs(g+C)<.1&&Math.abs(b+M)<.1&&Math.abs(f+_+S-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const D=(f+1)/2,B=(_+1)/2,N=(S+1)/2,I=(m+v)/4,F=(g+C)/4,z=(b+M)/4;return D>B&&D>N?D<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(D),s=I/n,r=F/n):B>N?B<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(B),n=I/s,r=z/s):N<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(N),n=F/r,s=z/r),this.set(n,s,r,e),this}let R=Math.sqrt((M-b)*(M-b)+(g-C)*(g-C)+(v-m)*(v-m));return Math.abs(R)<.001&&(R=1),this.x=(M-b)/R,this.y=(g-C)/R,this.z=(v-m)/R,this.w=Math.acos((f+_+S-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=nn(this.x,t.x,e.x),this.y=nn(this.y,t.y,e.y),this.z=nn(this.z,t.z,e.z),this.w=nn(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=nn(this.x,t,e),this.y=nn(this.y,t,e),this.z=nn(this.z,t,e),this.w=nn(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class tM extends Yo{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=n.depth?n.depth:1,this.scissor=new On(0,0,t,e),this.scissorTest=!1,this.viewport=new On(0,0,t,e);const s={width:t,height:e,depth:this.depth};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ni,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},n);const r=new wi(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let l=0;l<a;l++)this.textures[l]=r.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=t,this.textures[s].image.height=e,this.textures[s].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const s=Object.assign({},t.textures[e].image);this.textures[e].source=new Xd(s)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ds extends tM{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class wx extends wi{constructor(t=null,e=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:s},this.magFilter=os,this.minFilter=os,this.wrapR=zo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class zz extends Ds{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new wx(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class eM extends wi{constructor(t=null,e=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:s},this.magFilter=os,this.minFilter=os,this.wrapR=zo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Gz extends Ds{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new eM(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class Or{constructor(t=0,e=0,n=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=s}static slerpFlat(t,e,n,s,r,a,l){let u=n[s+0],f=n[s+1],m=n[s+2],g=n[s+3];const v=r[a+0],_=r[a+1],b=r[a+2],C=r[a+3];if(l===0){t[e+0]=u,t[e+1]=f,t[e+2]=m,t[e+3]=g;return}if(l===1){t[e+0]=v,t[e+1]=_,t[e+2]=b,t[e+3]=C;return}if(g!==C||u!==v||f!==_||m!==b){let M=1-l;const S=u*v+f*_+m*b+g*C,R=S>=0?1:-1,D=1-S*S;if(D>Number.EPSILON){const N=Math.sqrt(D),I=Math.atan2(N,S*R);M=Math.sin(M*I)/N,l=Math.sin(l*I)/N}const B=l*R;if(u=u*M+v*B,f=f*M+_*B,m=m*M+b*B,g=g*M+C*B,M===1-l){const N=1/Math.sqrt(u*u+f*f+m*m+g*g);u*=N,f*=N,m*=N,g*=N}}t[e]=u,t[e+1]=f,t[e+2]=m,t[e+3]=g}static multiplyQuaternionsFlat(t,e,n,s,r,a){const l=n[s],u=n[s+1],f=n[s+2],m=n[s+3],g=r[a],v=r[a+1],_=r[a+2],b=r[a+3];return t[e]=l*b+m*g+u*_-f*v,t[e+1]=u*b+m*v+f*g-l*_,t[e+2]=f*b+m*_+l*v-u*g,t[e+3]=m*b-l*g-u*v-f*_,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,s){return this._x=t,this._y=e,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,s=t._y,r=t._z,a=t._order,l=Math.cos,u=Math.sin,f=l(n/2),m=l(s/2),g=l(r/2),v=u(n/2),_=u(s/2),b=u(r/2);switch(a){case"XYZ":this._x=v*m*g+f*_*b,this._y=f*_*g-v*m*b,this._z=f*m*b+v*_*g,this._w=f*m*g-v*_*b;break;case"YXZ":this._x=v*m*g+f*_*b,this._y=f*_*g-v*m*b,this._z=f*m*b-v*_*g,this._w=f*m*g+v*_*b;break;case"ZXY":this._x=v*m*g-f*_*b,this._y=f*_*g+v*m*b,this._z=f*m*b+v*_*g,this._w=f*m*g-v*_*b;break;case"ZYX":this._x=v*m*g-f*_*b,this._y=f*_*g+v*m*b,this._z=f*m*b-v*_*g,this._w=f*m*g+v*_*b;break;case"YZX":this._x=v*m*g+f*_*b,this._y=f*_*g+v*m*b,this._z=f*m*b-v*_*g,this._w=f*m*g-v*_*b;break;case"XZY":this._x=v*m*g-f*_*b,this._y=f*_*g-v*m*b,this._z=f*m*b+v*_*g,this._w=f*m*g+v*_*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,s=Math.sin(n);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],s=e[4],r=e[8],a=e[1],l=e[5],u=e[9],f=e[2],m=e[6],g=e[10],v=n+l+g;if(v>0){const _=.5/Math.sqrt(v+1);this._w=.25/_,this._x=(m-u)*_,this._y=(r-f)*_,this._z=(a-s)*_}else if(n>l&&n>g){const _=2*Math.sqrt(1+n-l-g);this._w=(m-u)/_,this._x=.25*_,this._y=(s+a)/_,this._z=(r+f)/_}else if(l>g){const _=2*Math.sqrt(1+l-n-g);this._w=(r-f)/_,this._x=(s+a)/_,this._y=.25*_,this._z=(u+m)/_}else{const _=2*Math.sqrt(1+g-n-l);this._w=(a-s)/_,this._x=(r+f)/_,this._y=(u+m)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(nn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const s=Math.min(1,e/n);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,s=t._y,r=t._z,a=t._w,l=e._x,u=e._y,f=e._z,m=e._w;return this._x=n*m+a*l+s*f-r*u,this._y=s*m+a*u+r*l-n*f,this._z=r*m+a*f+n*u-s*l,this._w=a*m-n*l-s*u-r*f,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,s=this._y,r=this._z,a=this._w;let l=a*t._w+n*t._x+s*t._y+r*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=a,this._x=n,this._y=s,this._z=r,this;const u=1-l*l;if(u<=Number.EPSILON){const _=1-e;return this._w=_*a+e*this._w,this._x=_*n+e*this._x,this._y=_*s+e*this._y,this._z=_*r+e*this._z,this.normalize(),this}const f=Math.sqrt(u),m=Math.atan2(f,l),g=Math.sin((1-e)*m)/f,v=Math.sin(e*m)/f;return this._w=a*g+this._w*v,this._x=n*g+this._x*v,this._y=s*g+this._y*v,this._z=r*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(t),s*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class et{constructor(t=0,e=0,n=0){et.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(n6.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(n6.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*s,this.y=r[1]*e+r[4]*n+r[7]*s,this.z=r[2]*e+r[5]*n+r[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,s=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*s+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*s+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*s+r[14])*a,this}applyQuaternion(t){const e=this.x,n=this.y,s=this.z,r=t.x,a=t.y,l=t.z,u=t.w,f=2*(a*s-l*n),m=2*(l*e-r*s),g=2*(r*n-a*e);return this.x=e+u*f+a*g-l*m,this.y=n+u*m+l*f-r*g,this.z=s+u*g+r*m-a*f,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*s,this.y=r[1]*e+r[5]*n+r[9]*s,this.z=r[2]*e+r[6]*n+r[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=nn(this.x,t.x,e.x),this.y=nn(this.y,t.y,e.y),this.z=nn(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=nn(this.x,t,e),this.y=nn(this.y,t,e),this.z=nn(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,s=t.y,r=t.z,a=e.x,l=e.y,u=e.z;return this.x=s*u-r*l,this.y=r*a-n*u,this.z=n*l-s*a,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return QT.copy(this).projectOnVector(t),this.sub(QT)}reflect(t){return this.sub(QT.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(nn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,s=this.z-t.z;return e*e+n*n+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const s=Math.sin(e)*t;return this.x=s*Math.sin(n),this.y=Math.cos(e)*t,this.z=s*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const QT=new et,n6=new Or;class Nr{constructor(t=new et(1/0,1/0,1/0),e=new et(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(rc.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(rc.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=rc.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const r=n.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let a=0,l=r.count;a<l;a++)t.isMesh===!0?t.getVertexPosition(a,rc):rc.fromBufferAttribute(r,a),rc.applyMatrix4(t.matrixWorld),this.expandByPoint(rc);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),xS.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),xS.copy(n.boundingBox)),xS.applyMatrix4(t.matrixWorld),this.union(xS)}const s=t.children;for(let r=0,a=s.length;r<a;r++)this.expandByObject(s[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,rc),rc.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(X2),bS.subVectors(this.max,X2),g1.subVectors(t.a,X2),v1.subVectors(t.b,X2),y1.subVectors(t.c,X2),id.subVectors(v1,g1),sd.subVectors(y1,v1),om.subVectors(g1,y1);let e=[0,-id.z,id.y,0,-sd.z,sd.y,0,-om.z,om.y,id.z,0,-id.x,sd.z,0,-sd.x,om.z,0,-om.x,-id.y,id.x,0,-sd.y,sd.x,0,-om.y,om.x,0];return!jT(e,g1,v1,y1,bS)||(e=[1,0,0,0,1,0,0,0,1],!jT(e,g1,v1,y1,bS))?!1:(SS.crossVectors(id,sd),e=[SS.x,SS.y,SS.z],jT(e,g1,v1,y1,bS))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,rc).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(rc).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(uh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),uh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),uh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),uh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),uh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),uh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),uh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),uh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(uh),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const uh=[new et,new et,new et,new et,new et,new et,new et,new et],rc=new et,xS=new Nr,g1=new et,v1=new et,y1=new et,id=new et,sd=new et,om=new et,X2=new et,bS=new et,SS=new et,lm=new et;function jT(i,t,e,n,s){for(let r=0,a=i.length-3;r<=a;r+=3){lm.fromArray(i,r);const l=s.x*Math.abs(lm.x)+s.y*Math.abs(lm.y)+s.z*Math.abs(lm.z),u=t.dot(lm),f=e.dot(lm),m=n.dot(lm);if(Math.max(-Math.max(u,f,m),Math.min(u,f,m))>l)return!1}return!0}const kz=new Nr,q2=new et,XT=new et;class mr{constructor(t=new et,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):kz.setFromPoints(t).getCenter(n);let s=0;for(let r=0,a=t.length;r<a;r++)s=Math.max(s,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;q2.subVectors(t,this.center);const e=q2.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),s=(n-this.radius)*.5;this.center.addScaledVector(q2,s/n),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(XT.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(q2.copy(t.center).add(XT)),this.expandByPoint(q2.copy(t.center).sub(XT))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const hh=new et,qT=new et,ES=new et,rd=new et,YT=new et,MS=new et,WT=new et;class Ey{constructor(t=new et,e=new et(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,hh)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=hh.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(hh.copy(this.origin).addScaledVector(this.direction,e),hh.distanceToSquared(t))}distanceSqToSegment(t,e,n,s){qT.copy(t).add(e).multiplyScalar(.5),ES.copy(e).sub(t).normalize(),rd.copy(this.origin).sub(qT);const r=t.distanceTo(e)*.5,a=-this.direction.dot(ES),l=rd.dot(this.direction),u=-rd.dot(ES),f=rd.lengthSq(),m=Math.abs(1-a*a);let g,v,_,b;if(m>0)if(g=a*u-l,v=a*l-u,b=r*m,g>=0)if(v>=-b)if(v<=b){const C=1/m;g*=C,v*=C,_=g*(g+a*v+2*l)+v*(a*g+v+2*u)+f}else v=r,g=Math.max(0,-(a*v+l)),_=-g*g+v*(v+2*u)+f;else v=-r,g=Math.max(0,-(a*v+l)),_=-g*g+v*(v+2*u)+f;else v<=-b?(g=Math.max(0,-(-a*r+l)),v=g>0?-r:Math.min(Math.max(-r,-u),r),_=-g*g+v*(v+2*u)+f):v<=b?(g=0,v=Math.min(Math.max(-r,-u),r),_=v*(v+2*u)+f):(g=Math.max(0,-(a*r+l)),v=g>0?r:Math.min(Math.max(-r,-u),r),_=-g*g+v*(v+2*u)+f);else v=a>0?-r:r,g=Math.max(0,-(a*v+l)),_=-g*g+v*(v+2*u)+f;return n&&n.copy(this.origin).addScaledVector(this.direction,g),s&&s.copy(qT).addScaledVector(ES,v),_}intersectSphere(t,e){hh.subVectors(t.center,this.origin);const n=hh.dot(this.direction),s=hh.dot(hh)-n*n,r=t.radius*t.radius;if(s>r)return null;const a=Math.sqrt(r-s),l=n-a,u=n+a;return u<0?null:l<0?this.at(u,e):this.at(l,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,s,r,a,l,u;const f=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,v=this.origin;return f>=0?(n=(t.min.x-v.x)*f,s=(t.max.x-v.x)*f):(n=(t.max.x-v.x)*f,s=(t.min.x-v.x)*f),m>=0?(r=(t.min.y-v.y)*m,a=(t.max.y-v.y)*m):(r=(t.max.y-v.y)*m,a=(t.min.y-v.y)*m),n>a||r>s||((r>n||isNaN(n))&&(n=r),(a<s||isNaN(s))&&(s=a),g>=0?(l=(t.min.z-v.z)*g,u=(t.max.z-v.z)*g):(l=(t.max.z-v.z)*g,u=(t.min.z-v.z)*g),n>u||l>s)||((l>n||n!==n)&&(n=l),(u<s||s!==s)&&(s=u),s<0)?null:this.at(n>=0?n:s,e)}intersectsBox(t){return this.intersectBox(t,hh)!==null}intersectTriangle(t,e,n,s,r){YT.subVectors(e,t),MS.subVectors(n,t),WT.crossVectors(YT,MS);let a=this.direction.dot(WT),l;if(a>0){if(s)return null;l=1}else if(a<0)l=-1,a=-a;else return null;rd.subVectors(this.origin,t);const u=l*this.direction.dot(MS.crossVectors(rd,MS));if(u<0)return null;const f=l*this.direction.dot(YT.cross(rd));if(f<0||u+f>a)return null;const m=-l*rd.dot(WT);return m<0?null:this.at(m/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ne{constructor(t,e,n,s,r,a,l,u,f,m,g,v,_,b,C,M){Ne.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,s,r,a,l,u,f,m,g,v,_,b,C,M)}set(t,e,n,s,r,a,l,u,f,m,g,v,_,b,C,M){const S=this.elements;return S[0]=t,S[4]=e,S[8]=n,S[12]=s,S[1]=r,S[5]=a,S[9]=l,S[13]=u,S[2]=f,S[6]=m,S[10]=g,S[14]=v,S[3]=_,S[7]=b,S[11]=C,S[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ne().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,s=1/_1.setFromMatrixColumn(t,0).length(),r=1/_1.setFromMatrixColumn(t,1).length(),a=1/_1.setFromMatrixColumn(t,2).length();return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,s=t.y,r=t.z,a=Math.cos(n),l=Math.sin(n),u=Math.cos(s),f=Math.sin(s),m=Math.cos(r),g=Math.sin(r);if(t.order==="XYZ"){const v=a*m,_=a*g,b=l*m,C=l*g;e[0]=u*m,e[4]=-u*g,e[8]=f,e[1]=_+b*f,e[5]=v-C*f,e[9]=-l*u,e[2]=C-v*f,e[6]=b+_*f,e[10]=a*u}else if(t.order==="YXZ"){const v=u*m,_=u*g,b=f*m,C=f*g;e[0]=v+C*l,e[4]=b*l-_,e[8]=a*f,e[1]=a*g,e[5]=a*m,e[9]=-l,e[2]=_*l-b,e[6]=C+v*l,e[10]=a*u}else if(t.order==="ZXY"){const v=u*m,_=u*g,b=f*m,C=f*g;e[0]=v-C*l,e[4]=-a*g,e[8]=b+_*l,e[1]=_+b*l,e[5]=a*m,e[9]=C-v*l,e[2]=-a*f,e[6]=l,e[10]=a*u}else if(t.order==="ZYX"){const v=a*m,_=a*g,b=l*m,C=l*g;e[0]=u*m,e[4]=b*f-_,e[8]=v*f+C,e[1]=u*g,e[5]=C*f+v,e[9]=_*f-b,e[2]=-f,e[6]=l*u,e[10]=a*u}else if(t.order==="YZX"){const v=a*u,_=a*f,b=l*u,C=l*f;e[0]=u*m,e[4]=C-v*g,e[8]=b*g+_,e[1]=g,e[5]=a*m,e[9]=-l*m,e[2]=-f*m,e[6]=_*g+b,e[10]=v-C*g}else if(t.order==="XZY"){const v=a*u,_=a*f,b=l*u,C=l*f;e[0]=u*m,e[4]=-g,e[8]=f*m,e[1]=v*g+C,e[5]=a*m,e[9]=_*g-b,e[2]=b*g-_,e[6]=l*m,e[10]=C*g+v}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Vz,t,Qz)}lookAt(t,e,n){const s=this.elements;return To.subVectors(t,e),To.lengthSq()===0&&(To.z=1),To.normalize(),ad.crossVectors(n,To),ad.lengthSq()===0&&(Math.abs(n.z)===1?To.x+=1e-4:To.z+=1e-4,To.normalize(),ad.crossVectors(n,To)),ad.normalize(),TS.crossVectors(To,ad),s[0]=ad.x,s[4]=TS.x,s[8]=To.x,s[1]=ad.y,s[5]=TS.y,s[9]=To.y,s[2]=ad.z,s[6]=TS.z,s[10]=To.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,r=this.elements,a=n[0],l=n[4],u=n[8],f=n[12],m=n[1],g=n[5],v=n[9],_=n[13],b=n[2],C=n[6],M=n[10],S=n[14],R=n[3],D=n[7],B=n[11],N=n[15],I=s[0],F=s[4],z=s[8],U=s[12],P=s[1],X=s[5],ot=s[9],it=s[13],ut=s[2],dt=s[6],j=s[10],tt=s[14],nt=s[3],_t=s[7],J=s[11],at=s[15];return r[0]=a*I+l*P+u*ut+f*nt,r[4]=a*F+l*X+u*dt+f*_t,r[8]=a*z+l*ot+u*j+f*J,r[12]=a*U+l*it+u*tt+f*at,r[1]=m*I+g*P+v*ut+_*nt,r[5]=m*F+g*X+v*dt+_*_t,r[9]=m*z+g*ot+v*j+_*J,r[13]=m*U+g*it+v*tt+_*at,r[2]=b*I+C*P+M*ut+S*nt,r[6]=b*F+C*X+M*dt+S*_t,r[10]=b*z+C*ot+M*j+S*J,r[14]=b*U+C*it+M*tt+S*at,r[3]=R*I+D*P+B*ut+N*nt,r[7]=R*F+D*X+B*dt+N*_t,r[11]=R*z+D*ot+B*j+N*J,r[15]=R*U+D*it+B*tt+N*at,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],s=t[8],r=t[12],a=t[1],l=t[5],u=t[9],f=t[13],m=t[2],g=t[6],v=t[10],_=t[14],b=t[3],C=t[7],M=t[11],S=t[15];return b*(+r*u*g-s*f*g-r*l*v+n*f*v+s*l*_-n*u*_)+C*(+e*u*_-e*f*v+r*a*v-s*a*_+s*f*m-r*u*m)+M*(+e*f*g-e*l*_-r*a*g+n*a*_+r*l*m-n*f*m)+S*(-s*l*m-e*u*g+e*l*v+s*a*g-n*a*v+n*u*m)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],l=t[5],u=t[6],f=t[7],m=t[8],g=t[9],v=t[10],_=t[11],b=t[12],C=t[13],M=t[14],S=t[15],R=g*M*f-C*v*f+C*u*_-l*M*_-g*u*S+l*v*S,D=b*v*f-m*M*f-b*u*_+a*M*_+m*u*S-a*v*S,B=m*C*f-b*g*f+b*l*_-a*C*_-m*l*S+a*g*S,N=b*g*u-m*C*u-b*l*v+a*C*v+m*l*M-a*g*M,I=e*R+n*D+s*B+r*N;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/I;return t[0]=R*F,t[1]=(C*v*r-g*M*r-C*s*_+n*M*_+g*s*S-n*v*S)*F,t[2]=(l*M*r-C*u*r+C*s*f-n*M*f-l*s*S+n*u*S)*F,t[3]=(g*u*r-l*v*r-g*s*f+n*v*f+l*s*_-n*u*_)*F,t[4]=D*F,t[5]=(m*M*r-b*v*r+b*s*_-e*M*_-m*s*S+e*v*S)*F,t[6]=(b*u*r-a*M*r-b*s*f+e*M*f+a*s*S-e*u*S)*F,t[7]=(a*v*r-m*u*r+m*s*f-e*v*f-a*s*_+e*u*_)*F,t[8]=B*F,t[9]=(b*g*r-m*C*r-b*n*_+e*C*_+m*n*S-e*g*S)*F,t[10]=(a*C*r-b*l*r+b*n*f-e*C*f-a*n*S+e*l*S)*F,t[11]=(m*l*r-a*g*r-m*n*f+e*g*f+a*n*_-e*l*_)*F,t[12]=N*F,t[13]=(m*C*s-b*g*s+b*n*v-e*C*v-m*n*M+e*g*M)*F,t[14]=(b*l*s-a*C*s-b*n*u+e*C*u+a*n*M-e*l*M)*F,t[15]=(a*g*s-m*l*s+m*n*u-e*g*u-a*n*v+e*l*v)*F,this}scale(t){const e=this.elements,n=t.x,s=t.y,r=t.z;return e[0]*=n,e[4]*=s,e[8]*=r,e[1]*=n,e[5]*=s,e[9]*=r,e[2]*=n,e[6]*=s,e[10]*=r,e[3]*=n,e[7]*=s,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,s))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),s=Math.sin(e),r=1-n,a=t.x,l=t.y,u=t.z,f=r*a,m=r*l;return this.set(f*a+n,f*l-s*u,f*u+s*l,0,f*l+s*u,m*l+n,m*u-s*a,0,f*u-s*l,m*u+s*a,r*u*u+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,s,r,a){return this.set(1,n,r,0,t,1,a,0,e,s,1,0,0,0,0,1),this}compose(t,e,n){const s=this.elements,r=e._x,a=e._y,l=e._z,u=e._w,f=r+r,m=a+a,g=l+l,v=r*f,_=r*m,b=r*g,C=a*m,M=a*g,S=l*g,R=u*f,D=u*m,B=u*g,N=n.x,I=n.y,F=n.z;return s[0]=(1-(C+S))*N,s[1]=(_+B)*N,s[2]=(b-D)*N,s[3]=0,s[4]=(_-B)*I,s[5]=(1-(v+S))*I,s[6]=(M+R)*I,s[7]=0,s[8]=(b+D)*F,s[9]=(M-R)*F,s[10]=(1-(v+C))*F,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,n){const s=this.elements;let r=_1.set(s[0],s[1],s[2]).length();const a=_1.set(s[4],s[5],s[6]).length(),l=_1.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),t.x=s[12],t.y=s[13],t.z=s[14],ac.copy(this);const f=1/r,m=1/a,g=1/l;return ac.elements[0]*=f,ac.elements[1]*=f,ac.elements[2]*=f,ac.elements[4]*=m,ac.elements[5]*=m,ac.elements[6]*=m,ac.elements[8]*=g,ac.elements[9]*=g,ac.elements[10]*=g,e.setFromRotationMatrix(ac),n.x=r,n.y=a,n.z=l,this}makePerspective(t,e,n,s,r,a,l=wl){const u=this.elements,f=2*r/(e-t),m=2*r/(n-s),g=(e+t)/(e-t),v=(n+s)/(n-s);let _,b;if(l===wl)_=-(a+r)/(a-r),b=-2*a*r/(a-r);else if(l===$_)_=-a/(a-r),b=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=f,u[4]=0,u[8]=g,u[12]=0,u[1]=0,u[5]=m,u[9]=v,u[13]=0,u[2]=0,u[6]=0,u[10]=_,u[14]=b,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(t,e,n,s,r,a,l=wl){const u=this.elements,f=1/(e-t),m=1/(n-s),g=1/(a-r),v=(e+t)*f,_=(n+s)*m;let b,C;if(l===wl)b=(a+r)*g,C=-2*g;else if(l===$_)b=r*g,C=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*f,u[4]=0,u[8]=0,u[12]=-v,u[1]=0,u[5]=2*m,u[9]=0,u[13]=-_,u[2]=0,u[6]=0,u[10]=C,u[14]=-b,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<16;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const _1=new et,ac=new Ne,Vz=new et(0,0,0),Qz=new et(1,1,1),ad=new et,TS=new et,To=new et,i6=new Ne,s6=new Or;class Qo{constructor(t=0,e=0,n=0,s=Qo.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,s=this._order){return this._x=t,this._y=e,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const s=t.elements,r=s[0],a=s[4],l=s[8],u=s[1],f=s[5],m=s[9],g=s[2],v=s[6],_=s[10];switch(e){case"XYZ":this._y=Math.asin(nn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-m,_),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-nn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-g,r),this._z=0);break;case"ZXY":this._x=Math.asin(nn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(u,r));break;case"ZYX":this._y=Math.asin(-nn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,_),this._z=Math.atan2(u,r)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(nn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,f),this._y=Math.atan2(-g,r)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-nn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(l,r)):(this._x=Math.atan2(-m,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return i6.makeRotationFromQuaternion(t),this.setFromRotationMatrix(i6,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return s6.setFromEuler(this),this.setFromQuaternion(s6,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Qo.DEFAULT_ORDER="XYZ";class my{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let jz=0;const r6=new et,A1=new Or,fh=new Ne,CS=new et,Y2=new et,Xz=new et,qz=new Or,a6=new et(1,0,0),o6=new et(0,1,0),l6=new et(0,0,1),c6={type:"added"},Yz={type:"removed"},x1={type:"childadded",child:null},KT={type:"childremoved",child:null};class Ln extends Yo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:jz++}),this.uuid=ko(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ln.DEFAULT_UP.clone();const t=new et,e=new Qo,n=new Or,s=new et(1,1,1);function r(){n.setFromEuler(e,!1)}function a(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ne},normalMatrix:{value:new on}}),this.matrix=new Ne,this.matrixWorld=new Ne,this.matrixAutoUpdate=Ln.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new my,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return A1.setFromAxisAngle(t,e),this.quaternion.multiply(A1),this}rotateOnWorldAxis(t,e){return A1.setFromAxisAngle(t,e),this.quaternion.premultiply(A1),this}rotateX(t){return this.rotateOnAxis(a6,t)}rotateY(t){return this.rotateOnAxis(o6,t)}rotateZ(t){return this.rotateOnAxis(l6,t)}translateOnAxis(t,e){return r6.copy(t).applyQuaternion(this.quaternion),this.position.add(r6.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(a6,t)}translateY(t){return this.translateOnAxis(o6,t)}translateZ(t){return this.translateOnAxis(l6,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(fh.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?CS.copy(t):CS.set(t,e,n);const s=this.parent;this.updateWorldMatrix(!0,!1),Y2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fh.lookAt(Y2,CS,this.up):fh.lookAt(CS,Y2,this.up),this.quaternion.setFromRotationMatrix(fh),s&&(fh.extractRotation(s.matrixWorld),A1.setFromRotationMatrix(fh),this.quaternion.premultiply(A1.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(c6),x1.child=t,this.dispatchEvent(x1),x1.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Yz),KT.child=t,this.dispatchEvent(KT),KT.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),fh.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),fh.multiply(t.parent.matrixWorld)),t.applyMatrix4(fh),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(c6),x1.child=t,this.dispatchEvent(x1),x1.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,s=this.children.length;n<s;n++){const a=this.children[n].getObjectByProperty(t,e);if(a!==void 0)return a}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Y2,t,Xz),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Y2,qz,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),s.instanceInfo=this._instanceInfo.map(l=>({...l})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(t),s.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function r(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(t)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(t.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let f=0,m=u.length;f<m;f++){const g=u[f];r(t.shapes,g)}else r(t.shapes,u)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(r(t.materials,this.material[u]));s.material=l}else s.material=r(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];s.animations.push(r(t.animations,u))}}if(e){const l=a(t.geometries),u=a(t.materials),f=a(t.textures),m=a(t.images),g=a(t.shapes),v=a(t.skeletons),_=a(t.animations),b=a(t.nodes);l.length>0&&(n.geometries=l),u.length>0&&(n.materials=u),f.length>0&&(n.textures=f),m.length>0&&(n.images=m),g.length>0&&(n.shapes=g),v.length>0&&(n.skeletons=v),_.length>0&&(n.animations=_),b.length>0&&(n.nodes=b)}return n.object=s,n;function a(l){const u=[];for(const f in l){const m=l[f];delete m.metadata,u.push(m)}return u}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const s=t.children[n];this.add(s.clone())}return this}}Ln.DEFAULT_UP=new et(0,1,0);Ln.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const oc=new et,dh=new et,JT=new et,ph=new et,b1=new et,S1=new et,u6=new et,ZT=new et,$T=new et,t8=new et,e8=new On,n8=new On,i8=new On;class ro{constructor(t=new et,e=new et,n=new et){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,s){s.subVectors(n,e),oc.subVectors(t,e),s.cross(oc);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(t,e,n,s,r){oc.subVectors(s,e),dh.subVectors(n,e),JT.subVectors(t,e);const a=oc.dot(oc),l=oc.dot(dh),u=oc.dot(JT),f=dh.dot(dh),m=dh.dot(JT),g=a*f-l*l;if(g===0)return r.set(0,0,0),null;const v=1/g,_=(f*u-l*m)*v,b=(a*m-l*u)*v;return r.set(1-_-b,b,_)}static containsPoint(t,e,n,s){return this.getBarycoord(t,e,n,s,ph)===null?!1:ph.x>=0&&ph.y>=0&&ph.x+ph.y<=1}static getInterpolation(t,e,n,s,r,a,l,u){return this.getBarycoord(t,e,n,s,ph)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(r,ph.x),u.addScaledVector(a,ph.y),u.addScaledVector(l,ph.z),u)}static getInterpolatedAttribute(t,e,n,s,r,a){return e8.setScalar(0),n8.setScalar(0),i8.setScalar(0),e8.fromBufferAttribute(t,e),n8.fromBufferAttribute(t,n),i8.fromBufferAttribute(t,s),a.setScalar(0),a.addScaledVector(e8,r.x),a.addScaledVector(n8,r.y),a.addScaledVector(i8,r.z),a}static isFrontFacing(t,e,n,s){return oc.subVectors(n,e),dh.subVectors(t,e),oc.cross(dh).dot(s)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,s){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,e,n,s){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return oc.subVectors(this.c,this.b),dh.subVectors(this.a,this.b),oc.cross(dh).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ro.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ro.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,s,r){return ro.getInterpolation(t,this.a,this.b,this.c,e,n,s,r)}containsPoint(t){return ro.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ro.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,s=this.b,r=this.c;let a,l;b1.subVectors(s,n),S1.subVectors(r,n),ZT.subVectors(t,n);const u=b1.dot(ZT),f=S1.dot(ZT);if(u<=0&&f<=0)return e.copy(n);$T.subVectors(t,s);const m=b1.dot($T),g=S1.dot($T);if(m>=0&&g<=m)return e.copy(s);const v=u*g-m*f;if(v<=0&&u>=0&&m<=0)return a=u/(u-m),e.copy(n).addScaledVector(b1,a);t8.subVectors(t,r);const _=b1.dot(t8),b=S1.dot(t8);if(b>=0&&_<=b)return e.copy(r);const C=_*f-u*b;if(C<=0&&f>=0&&b<=0)return l=f/(f-b),e.copy(n).addScaledVector(S1,l);const M=m*b-_*g;if(M<=0&&g-m>=0&&_-b>=0)return u6.subVectors(r,s),l=(g-m)/(g-m+(_-b)),e.copy(s).addScaledVector(u6,l);const S=1/(M+C+v);return a=C*S,l=v*S,e.copy(n).addScaledVector(b1,a).addScaledVector(S1,l)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const BB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},od={h:0,s:0,l:0},wS={h:0,s:0,l:0};function s8(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*6*(2/3-e):i}class oe{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){const s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Kn){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Fn.toWorkingColorSpace(this,e),this}setRGB(t,e,n,s=Fn.workingColorSpace){return this.r=t,this.g=e,this.b=n,Fn.toWorkingColorSpace(this,s),this}setHSL(t,e,n,s=Fn.workingColorSpace){if(t=Ow(t,1),e=nn(e,0,1),n=nn(n,0,1),e===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,a=2*n-r;this.r=s8(a,r,t+1/3),this.g=s8(a,r,t),this.b=s8(a,r,t-1/3)}return Fn.toWorkingColorSpace(this,s),this}setStyle(t,e=Kn){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const a=s[1],l=s[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=s[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(a===6)return this.setHex(parseInt(r,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Kn){const n=BB[t.toLowerCase()];return n!==void 0?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Zh(t.r),this.g=Zh(t.g),this.b=Zh(t.b),this}copyLinearToSRGB(t){return this.r=$1(t.r),this.g=$1(t.g),this.b=$1(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Kn){return Fn.fromWorkingColorSpace(Yr.copy(this),t),Math.round(nn(Yr.r*255,0,255))*65536+Math.round(nn(Yr.g*255,0,255))*256+Math.round(nn(Yr.b*255,0,255))}getHexString(t=Kn){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Fn.workingColorSpace){Fn.fromWorkingColorSpace(Yr.copy(this),e);const n=Yr.r,s=Yr.g,r=Yr.b,a=Math.max(n,s,r),l=Math.min(n,s,r);let u,f;const m=(l+a)/2;if(l===a)u=0,f=0;else{const g=a-l;switch(f=m<=.5?g/(a+l):g/(2-a-l),a){case n:u=(s-r)/g+(s<r?6:0);break;case s:u=(r-n)/g+2;break;case r:u=(n-s)/g+4;break}u/=6}return t.h=u,t.s=f,t.l=m,t}getRGB(t,e=Fn.workingColorSpace){return Fn.fromWorkingColorSpace(Yr.copy(this),e),t.r=Yr.r,t.g=Yr.g,t.b=Yr.b,t}getStyle(t=Kn){Fn.fromWorkingColorSpace(Yr.copy(this),t);const e=Yr.r,n=Yr.g,s=Yr.b;return t!==Kn?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(t,e,n){return this.getHSL(od),this.setHSL(od.h+t,od.s+e,od.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(od),t.getHSL(wS);const n=F_(od.h,wS.h,e),s=F_(od.s,wS.s,e),r=F_(od.l,wS.l,e);return this.setHSL(n,s,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,s=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*s,this.g=r[1]*e+r[4]*n+r[7]*s,this.b=r[2]*e+r[5]*n+r[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Yr=new oe;oe.NAMES=BB;let Wz=0;class gs extends Yo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Wz++}),this.uuid=ko(),this.name="",this.type="Material",this.blending=Ug,this.side=Dc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=v3,this.blendDst=y3,this.blendEquation=gd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new oe(0,0,0),this.blendAlpha=0,this.depthFunc=zg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=b5,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=bm,this.stencilZFail=bm,this.stencilZPass=bm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const s=this[e];if(s===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Ug&&(n.blending=this.blending),this.side!==Dc&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==v3&&(n.blendSrc=this.blendSrc),this.blendDst!==y3&&(n.blendDst=this.blendDst),this.blendEquation!==gd&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==zg&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==b5&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==bm&&(n.stencilFail=this.stencilFail),this.stencilZFail!==bm&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==bm&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const a=[];for(const l in r){const u=r[l];delete u.metadata,a.push(u)}return a}if(e){const r=s(t.textures),a=s(t.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const s=e.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Go extends gs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qo,this.combine=Tx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Yh=Kz();function Kz(){const i=new ArrayBuffer(4),t=new Float32Array(i),e=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let u=0;u<256;++u){const f=u-127;f<-27?(n[u]=0,n[u|256]=32768,s[u]=24,s[u|256]=24):f<-14?(n[u]=1024>>-f-14,n[u|256]=1024>>-f-14|32768,s[u]=-f-1,s[u|256]=-f-1):f<=15?(n[u]=f+15<<10,n[u|256]=f+15<<10|32768,s[u]=13,s[u|256]=13):f<128?(n[u]=31744,n[u|256]=64512,s[u]=24,s[u|256]=24):(n[u]=31744,n[u|256]=64512,s[u]=13,s[u|256]=13)}const r=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let f=u<<13,m=0;for(;(f&8388608)===0;)f<<=1,m-=8388608;f&=-8388609,m+=947912704,r[u]=f|m}for(let u=1024;u<2048;++u)r[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)a[u]=u<<23;a[31]=1199570944,a[32]=2147483648;for(let u=33;u<63;++u)a[u]=2147483648+(u-32<<23);a[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:t,uint32View:e,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:a,offsetTable:l}}function $a(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=nn(i,-65504,65504),Yh.floatView[0]=i;const t=Yh.uint32View[0],e=t>>23&511;return Yh.baseTable[e]+((t&8388607)>>Yh.shiftTable[e])}function h_(i){const t=i>>10;return Yh.uint32View[0]=Yh.mantissaTable[Yh.offsetTable[t]+(i&1023)]+Yh.exponentTable[t],Yh.floatView[0]}class Jz{static toHalfFloat(t){return $a(t)}static fromHalfFloat(t){return h_(t)}}const Ms=new et,RS=new Pt;let Zz=0;class zn{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Zz++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=Z_,this.updateRanges=[],this.gpuType=Na,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[t+s]=e.array[n+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)RS.fromBufferAttribute(this,e),RS.applyMatrix3(t),this.setXY(e,RS.x,RS.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.applyMatrix3(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.applyMatrix4(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.applyNormalMatrix(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.transformDirection(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=Ba(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=cn(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Ba(e,this.array)),e}setX(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Ba(e,this.array)),e}setY(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Ba(e,this.array)),e}setZ(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Ba(e,this.array)),e}setW(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,s){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=s,this}setXYZW(t,e,n,s,r){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array),r=cn(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=s,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Z_&&(t.usage=this.usage),t}}class $z extends zn{constructor(t,e,n){super(new Int8Array(t),e,n)}}class tG extends zn{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class eG extends zn{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class nG extends zn{constructor(t,e,n){super(new Int16Array(t),e,n)}}class Nw extends zn{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class iG extends zn{constructor(t,e,n){super(new Int32Array(t),e,n)}}class Iw extends zn{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class sG extends zn{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=h_(this.array[t*this.itemSize]);return this.normalized&&(e=Ba(e,this.array)),e}setX(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize]=$a(e),this}getY(t){let e=h_(this.array[t*this.itemSize+1]);return this.normalized&&(e=Ba(e,this.array)),e}setY(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+1]=$a(e),this}getZ(t){let e=h_(this.array[t*this.itemSize+2]);return this.normalized&&(e=Ba(e,this.array)),e}setZ(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+2]=$a(e),this}getW(t){let e=h_(this.array[t*this.itemSize+3]);return this.normalized&&(e=Ba(e,this.array)),e}setW(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+3]=$a(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array)),this.array[t+0]=$a(e),this.array[t+1]=$a(n),this}setXYZ(t,e,n,s){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array)),this.array[t+0]=$a(e),this.array[t+1]=$a(n),this.array[t+2]=$a(s),this}setXYZW(t,e,n,s,r){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array),r=cn(r,this.array)),this.array[t+0]=$a(e),this.array[t+1]=$a(n),this.array[t+2]=$a(s),this.array[t+3]=$a(r),this}}class Me extends zn{constructor(t,e,n){super(new Float32Array(t),e,n)}}let rG=0;const gl=new Ne,r8=new Ln,E1=new et,Co=new Nr,W2=new Nr,rr=new et;class $e extends Yo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:rG++}),this.uuid=ko(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(RB(t)?Iw:Nw)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new on().getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return gl.makeRotationFromQuaternion(t),this.applyMatrix4(gl),this}rotateX(t){return gl.makeRotationX(t),this.applyMatrix4(gl),this}rotateY(t){return gl.makeRotationY(t),this.applyMatrix4(gl),this}rotateZ(t){return gl.makeRotationZ(t),this.applyMatrix4(gl),this}translate(t,e,n){return gl.makeTranslation(t,e,n),this.applyMatrix4(gl),this}scale(t,e,n){return gl.makeScale(t,e,n),this.applyMatrix4(gl),this}lookAt(t){return r8.lookAt(t),r8.updateMatrix(),this.applyMatrix4(r8.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(E1).negate(),this.translate(E1.x,E1.y,E1.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Me(n,3))}else{const n=Math.min(t.length,e.count);for(let s=0;s<n;s++){const r=t[s];e.setXYZ(s,r.x,r.y,r.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Nr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new et(-1/0,-1/0,-1/0),new et(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,s=e.length;n<s;n++){const r=e[n];Co.setFromBufferAttribute(r),this.morphTargetsRelative?(rr.addVectors(this.boundingBox.min,Co.min),this.boundingBox.expandByPoint(rr),rr.addVectors(this.boundingBox.max,Co.max),this.boundingBox.expandByPoint(rr)):(this.boundingBox.expandByPoint(Co.min),this.boundingBox.expandByPoint(Co.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new mr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new et,1/0);return}if(t){const n=this.boundingSphere.center;if(Co.setFromBufferAttribute(t),e)for(let r=0,a=e.length;r<a;r++){const l=e[r];W2.setFromBufferAttribute(l),this.morphTargetsRelative?(rr.addVectors(Co.min,W2.min),Co.expandByPoint(rr),rr.addVectors(Co.max,W2.max),Co.expandByPoint(rr)):(Co.expandByPoint(W2.min),Co.expandByPoint(W2.max))}Co.getCenter(n);let s=0;for(let r=0,a=t.count;r<a;r++)rr.fromBufferAttribute(t,r),s=Math.max(s,n.distanceToSquared(rr));if(e)for(let r=0,a=e.length;r<a;r++){const l=e[r],u=this.morphTargetsRelative;for(let f=0,m=l.count;f<m;f++)rr.fromBufferAttribute(l,f),u&&(E1.fromBufferAttribute(t,f),rr.add(E1)),s=Math.max(s,n.distanceToSquared(rr))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.position,s=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zn(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),l=[],u=[];for(let z=0;z<n.count;z++)l[z]=new et,u[z]=new et;const f=new et,m=new et,g=new et,v=new Pt,_=new Pt,b=new Pt,C=new et,M=new et;function S(z,U,P){f.fromBufferAttribute(n,z),m.fromBufferAttribute(n,U),g.fromBufferAttribute(n,P),v.fromBufferAttribute(r,z),_.fromBufferAttribute(r,U),b.fromBufferAttribute(r,P),m.sub(f),g.sub(f),_.sub(v),b.sub(v);const X=1/(_.x*b.y-b.x*_.y);isFinite(X)&&(C.copy(m).multiplyScalar(b.y).addScaledVector(g,-_.y).multiplyScalar(X),M.copy(g).multiplyScalar(_.x).addScaledVector(m,-b.x).multiplyScalar(X),l[z].add(C),l[U].add(C),l[P].add(C),u[z].add(M),u[U].add(M),u[P].add(M))}let R=this.groups;R.length===0&&(R=[{start:0,count:t.count}]);for(let z=0,U=R.length;z<U;++z){const P=R[z],X=P.start,ot=P.count;for(let it=X,ut=X+ot;it<ut;it+=3)S(t.getX(it+0),t.getX(it+1),t.getX(it+2))}const D=new et,B=new et,N=new et,I=new et;function F(z){N.fromBufferAttribute(s,z),I.copy(N);const U=l[z];D.copy(U),D.sub(N.multiplyScalar(N.dot(U))).normalize(),B.crossVectors(I,U);const X=B.dot(u[z])<0?-1:1;a.setXYZW(z,D.x,D.y,D.z,X)}for(let z=0,U=R.length;z<U;++z){const P=R[z],X=P.start,ot=P.count;for(let it=X,ut=X+ot;it<ut;it+=3)F(t.getX(it+0)),F(t.getX(it+1)),F(t.getX(it+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new zn(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let v=0,_=n.count;v<_;v++)n.setXYZ(v,0,0,0);const s=new et,r=new et,a=new et,l=new et,u=new et,f=new et,m=new et,g=new et;if(t)for(let v=0,_=t.count;v<_;v+=3){const b=t.getX(v+0),C=t.getX(v+1),M=t.getX(v+2);s.fromBufferAttribute(e,b),r.fromBufferAttribute(e,C),a.fromBufferAttribute(e,M),m.subVectors(a,r),g.subVectors(s,r),m.cross(g),l.fromBufferAttribute(n,b),u.fromBufferAttribute(n,C),f.fromBufferAttribute(n,M),l.add(m),u.add(m),f.add(m),n.setXYZ(b,l.x,l.y,l.z),n.setXYZ(C,u.x,u.y,u.z),n.setXYZ(M,f.x,f.y,f.z)}else for(let v=0,_=e.count;v<_;v+=3)s.fromBufferAttribute(e,v+0),r.fromBufferAttribute(e,v+1),a.fromBufferAttribute(e,v+2),m.subVectors(a,r),g.subVectors(s,r),m.cross(g),n.setXYZ(v+0,m.x,m.y,m.z),n.setXYZ(v+1,m.x,m.y,m.z),n.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)rr.fromBufferAttribute(t,e),rr.normalize(),t.setXYZ(e,rr.x,rr.y,rr.z)}toNonIndexed(){function t(l,u){const f=l.array,m=l.itemSize,g=l.normalized,v=new f.constructor(u.length*m);let _=0,b=0;for(let C=0,M=u.length;C<M;C++){l.isInterleavedBufferAttribute?_=u[C]*l.data.stride+l.offset:_=u[C]*m;for(let S=0;S<m;S++)v[b++]=f[_++]}return new zn(v,m,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new $e,n=this.index.array,s=this.attributes;for(const l in s){const u=s[l],f=t(u,n);e.setAttribute(l,f)}const r=this.morphAttributes;for(const l in r){const u=[],f=r[l];for(let m=0,g=f.length;m<g;m++){const v=f[m],_=t(v,n);u.push(_)}e.morphAttributes[l]=u}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,u=a.length;l<u;l++){const f=a[l];e.addGroup(f.start,f.count,f.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(t[f]=u[f]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const u in n){const f=n[u];t.data.attributes[u]=f.toJSON(t.data)}const s={};let r=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],m=[];for(let g=0,v=f.length;g<v;g++){const _=f[g];m.push(_.toJSON(t.data))}m.length>0&&(s[u]=m,r=!0)}r&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone());const s=t.attributes;for(const f in s){const m=s[f];this.setAttribute(f,m.clone(e))}const r=t.morphAttributes;for(const f in r){const m=[],g=r[f];for(let v=0,_=g.length;v<_;v++)m.push(g[v].clone(e));this.morphAttributes[f]=m}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let f=0,m=a.length;f<m;f++){const g=a[f];this.addGroup(g.start,g.count,g.materialIndex)}const l=t.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=t.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const h6=new Ne,cm=new Ey,LS=new mr,f6=new et,DS=new et,BS=new et,OS=new et,a8=new et,NS=new et,d6=new et,IS=new et;class as extends Ln{constructor(t=new $e,e=new Go){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}getVertexPosition(t,e){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;e.fromBufferAttribute(s,t);const l=this.morphTargetInfluences;if(r&&l){NS.set(0,0,0);for(let u=0,f=r.length;u<f;u++){const m=l[u],g=r[u];m!==0&&(a8.fromBufferAttribute(g,t),a?NS.addScaledVector(a8,m):NS.addScaledVector(a8.sub(e),m))}e.add(NS)}return e}raycast(t,e){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),LS.copy(n.boundingSphere),LS.applyMatrix4(r),cm.copy(t.ray).recast(t.near),!(LS.containsPoint(cm.origin)===!1&&(cm.intersectSphere(LS,f6)===null||cm.origin.distanceToSquared(f6)>(t.far-t.near)**2))&&(h6.copy(r).invert(),cm.copy(t.ray).applyMatrix4(h6),!(n.boundingBox!==null&&cm.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,cm)))}_computeIntersections(t,e,n){let s;const r=this.geometry,a=this.material,l=r.index,u=r.attributes.position,f=r.attributes.uv,m=r.attributes.uv1,g=r.attributes.normal,v=r.groups,_=r.drawRange;if(l!==null)if(Array.isArray(a))for(let b=0,C=v.length;b<C;b++){const M=v[b],S=a[M.materialIndex],R=Math.max(M.start,_.start),D=Math.min(l.count,Math.min(M.start+M.count,_.start+_.count));for(let B=R,N=D;B<N;B+=3){const I=l.getX(B),F=l.getX(B+1),z=l.getX(B+2);s=US(this,S,t,n,f,m,g,I,F,z),s&&(s.faceIndex=Math.floor(B/3),s.face.materialIndex=M.materialIndex,e.push(s))}}else{const b=Math.max(0,_.start),C=Math.min(l.count,_.start+_.count);for(let M=b,S=C;M<S;M+=3){const R=l.getX(M),D=l.getX(M+1),B=l.getX(M+2);s=US(this,a,t,n,f,m,g,R,D,B),s&&(s.faceIndex=Math.floor(M/3),e.push(s))}}else if(u!==void 0)if(Array.isArray(a))for(let b=0,C=v.length;b<C;b++){const M=v[b],S=a[M.materialIndex],R=Math.max(M.start,_.start),D=Math.min(u.count,Math.min(M.start+M.count,_.start+_.count));for(let B=R,N=D;B<N;B+=3){const I=B,F=B+1,z=B+2;s=US(this,S,t,n,f,m,g,I,F,z),s&&(s.faceIndex=Math.floor(B/3),s.face.materialIndex=M.materialIndex,e.push(s))}}else{const b=Math.max(0,_.start),C=Math.min(u.count,_.start+_.count);for(let M=b,S=C;M<S;M+=3){const R=M,D=M+1,B=M+2;s=US(this,a,t,n,f,m,g,R,D,B),s&&(s.faceIndex=Math.floor(M/3),e.push(s))}}}}function aG(i,t,e,n,s,r,a,l){let u;if(t.side===qs?u=n.intersectTriangle(a,r,s,!0,l):u=n.intersectTriangle(s,r,a,t.side===Dc,l),u===null)return null;IS.copy(l),IS.applyMatrix4(i.matrixWorld);const f=e.ray.origin.distanceTo(IS);return f<e.near||f>e.far?null:{distance:f,point:IS.clone(),object:i}}function US(i,t,e,n,s,r,a,l,u,f){i.getVertexPosition(l,DS),i.getVertexPosition(u,BS),i.getVertexPosition(f,OS);const m=aG(i,t,e,n,DS,BS,OS,d6);if(m){const g=new et;ro.getBarycoord(d6,DS,BS,OS,g),s&&(m.uv=ro.getInterpolatedAttribute(s,l,u,f,g,new Pt)),r&&(m.uv1=ro.getInterpolatedAttribute(r,l,u,f,g,new Pt)),a&&(m.normal=ro.getInterpolatedAttribute(a,l,u,f,g,new et),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const v={a:l,b:u,c:f,normal:new et,materialIndex:0};ro.getNormal(DS,BS,OS,v.normal),m.face=v,m.barycoord=g}return m}class a0 extends $e{constructor(t=1,e=1,n=1,s=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:s,heightSegments:r,depthSegments:a};const l=this;s=Math.floor(s),r=Math.floor(r),a=Math.floor(a);const u=[],f=[],m=[],g=[];let v=0,_=0;b("z","y","x",-1,-1,n,e,t,a,r,0),b("z","y","x",1,-1,n,e,-t,a,r,1),b("x","z","y",1,1,t,n,e,s,a,2),b("x","z","y",1,-1,t,n,-e,s,a,3),b("x","y","z",1,-1,t,e,n,s,r,4),b("x","y","z",-1,-1,t,e,-n,s,r,5),this.setIndex(u),this.setAttribute("position",new Me(f,3)),this.setAttribute("normal",new Me(m,3)),this.setAttribute("uv",new Me(g,2));function b(C,M,S,R,D,B,N,I,F,z,U){const P=B/F,X=N/z,ot=B/2,it=N/2,ut=I/2,dt=F+1,j=z+1;let tt=0,nt=0;const _t=new et;for(let J=0;J<j;J++){const at=J*X-it;for(let xt=0;xt<dt;xt++){const Et=xt*P-ot;_t[C]=Et*R,_t[M]=at*D,_t[S]=ut,f.push(_t.x,_t.y,_t.z),_t[C]=0,_t[M]=0,_t[S]=I>0?1:-1,m.push(_t.x,_t.y,_t.z),g.push(xt/F),g.push(1-J/z),tt+=1}}for(let J=0;J<z;J++)for(let at=0;at<F;at++){const xt=v+at+dt*J,Et=v+at+dt*(J+1),ct=v+(at+1)+dt*(J+1),wt=v+(at+1)+dt*J;u.push(xt,Et,wt),u.push(Et,ct,wt),nt+=6}l.addGroup(_,nt,U),_+=nt,v+=tt}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new a0(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function gy(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const s=i[e][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=s.clone():Array.isArray(s)?t[e][n]=s.slice():t[e][n]=s}}return t}function Ca(i){const t={};for(let e=0;e<i.length;e++){const n=gy(i[e]);for(const s in n)t[s]=n[s]}return t}function oG(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}function OB(i){const t=i.getRenderTarget();return t===null?i.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Fn.workingColorSpace}const NB={clone:gy,merge:Ca};var lG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,cG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ks extends gs{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=lG,this.fragmentShader=cG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=gy(t.uniforms),this.uniformsGroups=oG(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?e.uniforms[s]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?e.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?e.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?e.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?e.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?e.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?e.uniforms[s]={type:"m4",value:a.toArray()}:e.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}let Rx=class extends Ln{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ne,this.projectionMatrix=new Ne,this.projectionMatrixInverse=new Ne,this.coordinateSystem=wl}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const ld=new et,p6=new Pt,m6=new Pt;class Rs extends Rx{constructor(t=50,e=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=py*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Pg*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return py*2*Math.atan(Math.tan(Pg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){ld.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(ld.x,ld.y).multiplyScalar(-t/ld.z),ld.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ld.x,ld.y).multiplyScalar(-t/ld.z)}getViewSize(t,e){return this.getViewBounds(t,p6,m6),e.subVectors(m6,p6)}setViewOffset(t,e,n,s,r,a){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(Pg*.5*this.fov)/this.zoom,n=2*e,s=this.aspect*n,r=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const u=a.fullWidth,f=a.fullHeight;r+=a.offsetX*s/u,e-=a.offsetY*n/f,s*=a.width/u,n*=a.height/f}const l=this.filmOffset;l!==0&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const M1=-90,T1=1;class IB extends Ln{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Rs(M1,T1,t,e);s.layers=this.layers,this.add(s);const r=new Rs(M1,T1,t,e);r.layers=this.layers,this.add(r);const a=new Rs(M1,T1,t,e);a.layers=this.layers,this.add(a);const l=new Rs(M1,T1,t,e);l.layers=this.layers,this.add(l);const u=new Rs(M1,T1,t,e);u.layers=this.layers,this.add(u);const f=new Rs(M1,T1,t,e);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,s,r,a,l,u]=e;for(const f of e)this.remove(f);if(t===wl)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(t===$_)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const f of e)this.add(f),f.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,a,l,u,f,m]=this.children,g=t.getRenderTarget(),v=t.getActiveCubeFace(),_=t.getActiveMipmapLevel(),b=t.xr.enabled;t.xr.enabled=!1;const C=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,s),t.render(e,r),t.setRenderTarget(n,1,s),t.render(e,a),t.setRenderTarget(n,2,s),t.render(e,l),t.setRenderTarget(n,3,s),t.render(e,u),t.setRenderTarget(n,4,s),t.render(e,f),n.texture.generateMipmaps=C,t.setRenderTarget(n,5,s),t.render(e,m),t.setRenderTarget(g,v,_),t.xr.enabled=b,n.texture.needsPMREMUpdate=!0}}class Lx extends wi{constructor(t=[],e=rf,n,s,r,a,l,u,f,m){super(t,e,n,s,r,a,l,u,f,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class UB extends Ds{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},s=[n,n,n,n,n,n];this.texture=new Lx(s,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Ni}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new a0(5,5,5),r=new Ks({name:"CubemapFromEquirect",uniforms:gy(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:qs,blending:aa});r.uniforms.tEquirect.value=e;const a=new as(s,r),l=e.minFilter;return e.minFilter===Cl&&(e.minFilter=Ni),new IB(1,10,this).update(t,a),e.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(t,e=!0,n=!0,s=!0){const r=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,n,s);t.setRenderTarget(r)}}class Kh extends Ln{constructor(){super(),this.isGroup=!0,this.type="Group"}}const uG={type:"move"};class B4{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Kh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Kh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new et,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new et),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Kh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new et,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new et),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let s=null,r=null,a=null;const l=this._targetRay,u=this._grip,f=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(f&&t.hand){a=!0;for(const C of t.hand.values()){const M=e.getJointPose(C,n),S=this._getHandJoint(f,C);M!==null&&(S.matrix.fromArray(M.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=M.radius),S.visible=M!==null}const m=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],v=m.position.distanceTo(g.position),_=.02,b=.005;f.inputState.pinching&&v>_+b?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!f.inputState.pinching&&v<=_-b&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else u!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),r!==null&&(u.matrix.fromArray(r.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,r.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(r.linearVelocity)):u.hasLinearVelocity=!1,r.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(r.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(s=e.getPose(t.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(uG)))}return l!==null&&(l.visible=s!==null),u!==null&&(u.visible=r!==null),f!==null&&(f.visible=a!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const n=new Kh;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class nM{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new oe(t),this.density=e}clone(){return new nM(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class iM{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new oe(t),this.near=e,this.far=n}clone(){return new iM(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let nA=class extends Ln{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Qo,this.environmentIntensity=1,this.environmentRotation=new Qo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}};class Dx{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Z_,this.updateRanges=[],this.version=0,this.uuid=ko()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let s=0,r=this.stride;s<r;s++)this.array[t+s]=e.array[n+s];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ko()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ko()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ma=new et;class ep{constructor(t,e,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Ma.fromBufferAttribute(this,e),Ma.applyMatrix4(t),this.setXYZ(e,Ma.x,Ma.y,Ma.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ma.fromBufferAttribute(this,e),Ma.applyNormalMatrix(t),this.setXYZ(e,Ma.x,Ma.y,Ma.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ma.fromBufferAttribute(this,e),Ma.transformDirection(t),this.setXYZ(e,Ma.x,Ma.y,Ma.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=Ba(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Ba(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Ba(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Ba(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Ba(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=s,this}setXYZW(t,e,n,s,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array),r=cn(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=s,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return new zn(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ep(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Uw extends gs{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new oe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let C1;const K2=new et,w1=new et,R1=new et,L1=new Pt,J2=new Pt,PB=new Ne,PS=new et,Z2=new et,FS=new et,g6=new Pt,o8=new Pt,v6=new Pt;class FB extends Ln{constructor(t=new Uw){if(super(),this.isSprite=!0,this.type="Sprite",C1===void 0){C1=new $e;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Dx(e,5);C1.setIndex([0,1,2,0,2,3]),C1.setAttribute("position",new ep(n,3,0,!1)),C1.setAttribute("uv",new ep(n,2,3,!1))}this.geometry=C1,this.material=t,this.center=new Pt(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),w1.setFromMatrixScale(this.matrixWorld),PB.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),R1.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&w1.multiplyScalar(-R1.z);const n=this.material.rotation;let s,r;n!==0&&(r=Math.cos(n),s=Math.sin(n));const a=this.center;HS(PS.set(-.5,-.5,0),R1,a,w1,s,r),HS(Z2.set(.5,-.5,0),R1,a,w1,s,r),HS(FS.set(.5,.5,0),R1,a,w1,s,r),g6.set(0,0),o8.set(1,0),v6.set(1,1);let l=t.ray.intersectTriangle(PS,Z2,FS,!1,K2);if(l===null&&(HS(Z2.set(-.5,.5,0),R1,a,w1,s,r),o8.set(0,1),l=t.ray.intersectTriangle(PS,FS,Z2,!1,K2),l===null))return;const u=t.ray.origin.distanceTo(K2);u<t.near||u>t.far||e.push({distance:u,point:K2.clone(),uv:ro.getInterpolation(K2,PS,Z2,FS,g6,o8,v6,new Pt),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function HS(i,t,e,n,s,r){L1.subVectors(i,e).addScalar(.5).multiply(n),s!==void 0?(J2.x=r*L1.x-s*L1.y,J2.y=s*L1.x+r*L1.y):J2.copy(L1),i.copy(t),i.x+=J2.x,i.y+=J2.y,i.applyMatrix4(PB)}const zS=new et,y6=new et;class HB extends Ln{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,s=e.length;n<s;n++){const r=e[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const s=this.levels;let r;for(r=0;r<s.length&&!(e<s[r].distance);r++);return s.splice(r,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let n=0;n<e.length;n++)if(e[n].distance===t){const s=e.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,s;for(n=1,s=e.length;n<s;n++){let r=e[n].distance;if(e[n].object.visible&&(r-=r*e[n].hysteresis),t<r)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){zS.setFromMatrixPosition(this.matrixWorld);const s=t.ray.origin.distanceTo(zS);this.getObjectForDistance(s).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){zS.setFromMatrixPosition(t.matrixWorld),y6.setFromMatrixPosition(this.matrixWorld);const n=zS.distanceTo(y6)/t.zoom;e[0].object.visible=!0;let s,r;for(s=1,r=e.length;s<r;s++){let a=e[s].distance;if(e[s].object.visible&&(a-=a*e[s].hysteresis),n>=a)e[s-1].object.visible=!1,e[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)e[s].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let s=0,r=n.length;s<r;s++){const a=n[s];e.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return e}}const _6=new et,A6=new On,x6=new On,hG=new et,b6=new Ne,GS=new et,l8=new mr,S6=new Ne,c8=new Ey;class Pw extends as{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=x5,this.bindMatrix=new Ne,this.bindMatrixInverse=new Ne,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Nr),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,GS),this.boundingBox.expandByPoint(GS)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new mr),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,GS),this.boundingSphere.expandByPoint(GS)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),l8.copy(this.boundingSphere),l8.applyMatrix4(s),t.ray.intersectsSphere(l8)!==!1&&(S6.copy(s).invert(),c8.copy(t.ray).applyMatrix4(S6),!(this.boundingBox!==null&&c8.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,c8)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new On,e=this.geometry.attributes.skinWeight;for(let n=0,s=e.count;n<s;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===x5?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===mB?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,s=this.geometry;A6.fromBufferAttribute(s.attributes.skinIndex,t),x6.fromBufferAttribute(s.attributes.skinWeight,t),_6.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const a=x6.getComponent(r);if(a!==0){const l=A6.getComponent(r);b6.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),e.addScaledVector(hG.copy(_6).applyMatrix4(b6),a)}}return e.applyMatrix4(this.bindMatrixInverse)}}class sM extends Ln{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Fu extends wi{constructor(t=null,e=1,n=1,s,r,a,l,u,f=os,m=os,g,v){super(null,a,l,u,f,m,s,r,g,v),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const E6=new Ne,fG=new Ne;class Bx{constructor(t=[],e=[]){this.uuid=ko(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new Ne)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new Ne;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let r=0,a=t.length;r<a;r++){const l=t[r]?t[r].matrixWorld:fG;E6.multiplyMatrices(l,e[r]),E6.toArray(n,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Bx(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Fu(e,t,t,ia,Na);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const s=this.bones[e];if(s.name===t)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,s=t.bones.length;n<s;n++){const r=t.bones[n];let a=e[r];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new sM),this.bones.push(a),this.boneInverses.push(new Ne().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let s=0,r=e.length;s<r;s++){const a=e[s];t.bones.push(a.uuid);const l=n[s];t.boneInverses.push(l.toArray())}return t}}class Vg extends zn{constructor(t,e,n,s=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const D1=new Ne,M6=new Ne,kS=[],T6=new Nr,dG=new Ne,$2=new as,t_=new mr;class Fw extends as{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Vg(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,dG)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Nr),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,D1),T6.copy(t.boundingBox).applyMatrix4(D1),this.boundingBox.union(T6)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new mr),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,D1),t_.copy(t.boundingSphere).applyMatrix4(D1),this.boundingSphere.union(t_)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const n=e.morphTargetInfluences,s=this.morphTexture.source.data.data,r=n.length+1,a=t*r+1;for(let l=0;l<n.length;l++)n[l]=s[a+l]}raycast(t,e){const n=this.matrixWorld,s=this.count;if($2.geometry=this.geometry,$2.material=this.material,$2.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),t_.copy(this.boundingSphere),t_.applyMatrix4(n),t.ray.intersectsSphere(t_)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,D1),M6.multiplyMatrices(n,D1),$2.matrixWorld=M6,$2.raycast(t,kS);for(let a=0,l=kS.length;a<l;a++){const u=kS[a];u.instanceId=r,u.object=this,e.push(u)}kS.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Vg(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const n=e.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new Fu(new Float32Array(s*this.count),s,this.count,KE,Na));const r=this.morphTexture.source.data.data;let a=0;for(let f=0;f<n.length;f++)a+=n[f];const l=this.geometry.morphTargetsRelative?1:1-a,u=s*t;r[u]=l,r.set(n,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const u8=new et,pG=new et,mG=new on;class md{constructor(t=new et(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,s){return this.normal.set(t,e,n),this.constant=s,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const s=u8.subVectors(n,e).cross(pG.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(u8),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||mG.getNormalMatrix(t),s=this.coplanarPoint(u8).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const um=new mr,VS=new et;class My{constructor(t=new md,e=new md,n=new md,s=new md,r=new md,a=new md){this.planes=[t,e,n,s,r,a]}set(t,e,n,s,r,a){const l=this.planes;return l[0].copy(t),l[1].copy(e),l[2].copy(n),l[3].copy(s),l[4].copy(r),l[5].copy(a),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=wl){const n=this.planes,s=t.elements,r=s[0],a=s[1],l=s[2],u=s[3],f=s[4],m=s[5],g=s[6],v=s[7],_=s[8],b=s[9],C=s[10],M=s[11],S=s[12],R=s[13],D=s[14],B=s[15];if(n[0].setComponents(u-r,v-f,M-_,B-S).normalize(),n[1].setComponents(u+r,v+f,M+_,B+S).normalize(),n[2].setComponents(u+a,v+m,M+b,B+R).normalize(),n[3].setComponents(u-a,v-m,M-b,B-R).normalize(),n[4].setComponents(u-l,v-g,M-C,B-D).normalize(),e===wl)n[5].setComponents(u+l,v+g,M+C,B+D).normalize();else if(e===$_)n[5].setComponents(l,g,C,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),um.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),um.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(um)}intersectsSprite(t){return um.center.set(0,0,0),um.radius=.7071067811865476,um.applyMatrix4(t.matrixWorld),this.intersectsSphere(um)}intersectsSphere(t){const e=this.planes,n=t.center,s=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const s=e[n];if(VS.x=s.normal.x>0?t.max.x:t.min.x,VS.y=s.normal.y>0?t.max.y:t.min.y,VS.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(VS)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const mu=new Ne,gu=new My;class rM{constructor(){this.coordinateSystem=wl}intersectsObject(t,e){if(!e.isArrayCamera||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(mu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),gu.setFromProjectionMatrix(mu,this.coordinateSystem),gu.intersectsObject(t))return!0}return!1}intersectsSprite(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(mu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),gu.setFromProjectionMatrix(mu,this.coordinateSystem),gu.intersectsSprite(t))return!0}return!1}intersectsSphere(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(mu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),gu.setFromProjectionMatrix(mu,this.coordinateSystem),gu.intersectsSphere(t))return!0}return!1}intersectsBox(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(mu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),gu.setFromProjectionMatrix(mu,this.coordinateSystem),gu.intersectsBox(t))return!0}return!1}containsPoint(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(mu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),gu.setFromProjectionMatrix(mu,this.coordinateSystem),gu.containsPoint(t))return!0}return!1}clone(){return new rM}}function h8(i,t){return i-t}function gG(i,t){return i.z-t.z}function vG(i,t){return t.z-i.z}class yG{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,n,s){const r=this.pool,a=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const l=r[this.index];a.push(l),this.index++,l.start=t,l.count=e,l.z=n,l.index=s}reset(){this.list.length=0,this.index=0}}const Ja=new Ne,_G=new oe(1,1,1),C6=new My,AG=new rM,QS=new Nr,hm=new mr,e_=new et,w6=new et,xG=new et,f8=new yG,Wr=new as,jS=[];function bG(i,t,e=0){const n=t.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==t.array.constructor){const s=i.count;for(let r=0;r<s;r++)for(let a=0;a<n;a++)t.setComponent(r+e,a,i.getComponent(r,a))}else t.array.set(i.array,e*n);t.needsUpdate=!0}function fm(i,t){if(i.constructor!==t.constructor){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++)t[n]=i[n]}else{const e=Math.min(i.length,t.length);t.set(new i.constructor(i.buffer,0,e))}}class zB extends as{constructor(t,e,n=e*2,s){super(new $e,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new Fu(e,t,t,ia,Na);this._matricesTexture=n}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),n=new Fu(e,t,t,Cx,Hu);this._indirectTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new Fu(e,t,t,ia,Na);n.colorSpace=Fn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in t.attributes){const a=t.getAttribute(r),{array:l,itemSize:u,normalized:f}=a,m=new l.constructor(n*u),g=new zn(m,u,f);e.setAttribute(r,g)}if(t.getIndex()!==null){const r=n>65535?new Uint32Array(s):new Uint16Array(s);e.setIndex(new zn(r,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(!t.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=t.getAttribute(n),r=e.getAttribute(n);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Nr);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let n=0,s=e.length;n<s;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,Ja),this.getBoundingBoxAt(r,QS).applyMatrix4(Ja),t.union(QS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new mr);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let n=0,s=e.length;n<s;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,Ja),this.getBoundingSphereAt(r,hm).applyMatrix4(Ja),t.union(hm)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:t};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(h8),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;Ja.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const a=this._colorsTexture;return a&&(_G.toArray(a.image.data,s*4),a.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(t,e=-1,n=-1){this._initializeGeometry(t),this._validateGeometry(t);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const a=t.getIndex();if(a!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?a.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(h8),u=this._availableGeometryIds.shift(),r[u]=s):(u=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(u,t),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,u}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,s=n.getIndex()!==null,r=n.getIndex(),a=e.getIndex(),l=this._geometryInfo[t];if(s&&a.count>l.reservedIndexCount||e.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=e.getAttribute("position").count;for(const m in n.attributes){const g=e.getAttribute(m),v=n.getAttribute(m);bG(g,v,u);const _=g.itemSize;for(let b=g.count,C=f;b<C;b++){const M=u+b;for(let S=0;S<_;S++)v.setComponent(M,S,0)}v.needsUpdate=!0,v.addUpdateRange(u*_,f*_)}if(s){const m=l.indexStart,g=l.reservedIndexCount;l.indexCount=e.getIndex().count;for(let v=0;v<a.count;v++)r.setX(m+v,u+a.getX(v));for(let v=a.count,_=g;v<_;v++)r.setX(m+v,u);r.needsUpdate=!0,r.addUpdateRange(m,l.reservedIndexCount)}return l.start=s?l.indexStart:l.vertexStart,l.count=s?l.indexCount:l.vertexCount,l.boundingBox=null,e.boundingBox!==null&&(l.boundingBox=e.boundingBox.clone()),l.boundingSphere=null,e.boundingSphere!==null&&(l.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const n=this._instanceInfo;for(let s=0,r=n.length;s<r;s++)n[s].active&&n[s].geometryIndex===t&&this.deleteInstance(s);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const n=this._geometryInfo,s=n.map((a,l)=>l).sort((a,l)=>n[a].vertexStart-n[l].vertexStart),r=this.geometry;for(let a=0,l=n.length;a<l;a++){const u=s[a],f=n[u];if(f.active!==!1){if(r.index!==null){if(f.indexStart!==e){const{indexStart:m,vertexStart:g,reservedIndexCount:v}=f,_=r.index,b=_.array,C=t-g;for(let M=m;M<m+v;M++)b[M]=b[M]+C;_.array.copyWithin(e,m,m+v),_.addUpdateRange(e,v),f.indexStart=e}e+=f.reservedIndexCount}if(f.vertexStart!==t){const{vertexStart:m,reservedVertexCount:g}=f,v=r.attributes;for(const _ in v){const b=v[_],{array:C,itemSize:M}=b;C.copyWithin(t*M,m*M,(m+g)*M),b.addUpdateRange(t*M,g*M)}f.vertexStart=t}t+=f.reservedVertexCount,f.start=r.index?f.indexStart:f.vertexStart,this._nextIndexStart=r.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[t];if(s.boundingBox===null){const r=new Nr,a=n.index,l=n.attributes.position;for(let u=s.start,f=s.start+s.count;u<f;u++){let m=u;a&&(m=a.getX(m)),r.expandByPoint(e_.fromBufferAttribute(l,m))}s.boundingBox=r}return e.copy(s.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[t];if(s.boundingSphere===null){const r=new mr;this.getBoundingBoxAt(t,QS),QS.getCenter(r.center);const a=n.index,l=n.attributes.position;let u=0;for(let f=s.start,m=s.start+s.count;f<m;f++){let g=f;a&&(g=a.getX(g)),e_.fromBufferAttribute(l,g),u=Math.max(u,r.center.distanceToSquared(e_))}r.radius=Math.sqrt(u),s.boundingSphere=r}return e.copy(s.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const n=this._matricesTexture,s=this._matricesTexture.image.data;return e.toArray(s,t*16),n.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}setInstanceCount(t){const e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(h8);e[e.length-1]===n.length;)n.pop(),e.pop();if(t<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const s=new Int32Array(t),r=new Int32Array(t);fm(this._multiDrawCounts,s),fm(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=t;const a=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;a.dispose(),this._initIndirectTexture(),fm(a.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),fm(l.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),fm(u.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const n=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...n.map(l=>l.vertexStart+l.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(u=>u.indexStart+u.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new $e,this._initializeGeometry(r));const a=this.geometry;r.index&&fm(r.index.array,a.index.array);for(const l in r.attributes)fm(r.attributes[l].array,a.attributes[l].array)}raycast(t,e){const n=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,a=this.geometry;Wr.material=this.material,Wr.geometry.index=a.index,Wr.geometry.attributes=a.attributes,Wr.geometry.boundingBox===null&&(Wr.geometry.boundingBox=new Nr),Wr.geometry.boundingSphere===null&&(Wr.geometry.boundingSphere=new mr);for(let l=0,u=n.length;l<u;l++){if(!n[l].visible||!n[l].active)continue;const f=n[l].geometryIndex,m=s[f];Wr.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(l,Wr.matrixWorld).premultiply(r),this.getBoundingBoxAt(f,Wr.geometry.boundingBox),this.getBoundingSphereAt(f,Wr.geometry.boundingSphere),Wr.raycast(t,jS);for(let g=0,v=jS.length;g<v;g++){const _=jS[g];_.object=this,_.batchId=l,e.push(_)}jS.length=0}Wr.material=null,Wr.geometry.index=null,Wr.geometry.attributes={},Wr.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._availableInstanceIds=t._availableInstanceIds.slice(),this._availableGeometryIds=t._availableGeometryIds.slice(),this._nextIndexStart=t._nextIndexStart,this._nextVertexStart=t._nextVertexStart,this._geometryCount=t._geometryCount,this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._indirectTexture=t._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,n,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=s.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,u=this._instanceInfo,f=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,_=this._indirectTexture,b=_.image.data,C=n.isArrayCamera?AG:C6;v&&!n.isArrayCamera&&(Ja.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),C6.setFromProjectionMatrix(Ja,t.coordinateSystem));let M=0;if(this.sortObjects){Ja.copy(this.matrixWorld).invert(),e_.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Ja),w6.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Ja);for(let D=0,B=u.length;D<B;D++)if(u[D].visible&&u[D].active){const N=u[D].geometryIndex;this.getMatrixAt(D,Ja),this.getBoundingSphereAt(N,hm).applyMatrix4(Ja);let I=!1;if(v&&(I=!C.intersectsSphere(hm,n)),!I){const F=g[N],z=xG.subVectors(hm.center,e_).dot(w6);f8.push(F.start,F.count,z,D)}}const S=f8.list,R=this.customSort;R===null?S.sort(r.transparent?vG:gG):R.call(this,S,n);for(let D=0,B=S.length;D<B;D++){const N=S[D];f[M]=N.start*l,m[M]=N.count,b[M]=N.index,M++}f8.reset()}else for(let S=0,R=u.length;S<R;S++)if(u[S].visible&&u[S].active){const D=u[S].geometryIndex;let B=!1;if(v&&(this.getMatrixAt(S,Ja),this.getBoundingSphereAt(D,hm).applyMatrix4(Ja),B=!C.intersectsSphere(hm,n)),!B){const N=g[D];f[M]=N.start*l,m[M]=N.count,b[M]=S,M++}}_.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(t,e,n,s,r,a){this.onBeforeRender(t,null,s,r,a)}}class oa extends gs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new oe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const $3=new et,tE=new et,R6=new Ne,n_=new Ey,XS=new mr,d8=new et,L6=new et;class af extends Ln{constructor(t=new $e,e=new oa){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[0];for(let s=1,r=e.count;s<r;s++)$3.fromBufferAttribute(e,s-1),tE.fromBufferAttribute(e,s),n[s]=n[s-1],n[s]+=$3.distanceTo(tE);t.setAttribute("lineDistance",new Me(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,s=this.matrixWorld,r=t.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),XS.copy(n.boundingSphere),XS.applyMatrix4(s),XS.radius+=r,t.ray.intersectsSphere(XS)===!1)return;R6.copy(s).invert(),n_.copy(t.ray).applyMatrix4(R6);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=this.isLineSegments?2:1,m=n.index,v=n.attributes.position;if(m!==null){const _=Math.max(0,a.start),b=Math.min(m.count,a.start+a.count);for(let C=_,M=b-1;C<M;C+=f){const S=m.getX(C),R=m.getX(C+1),D=qS(this,t,n_,u,S,R,C);D&&e.push(D)}if(this.isLineLoop){const C=m.getX(b-1),M=m.getX(_),S=qS(this,t,n_,u,C,M,b-1);S&&e.push(S)}}else{const _=Math.max(0,a.start),b=Math.min(v.count,a.start+a.count);for(let C=_,M=b-1;C<M;C+=f){const S=qS(this,t,n_,u,C,C+1,C);S&&e.push(S)}if(this.isLineLoop){const C=qS(this,t,n_,u,b-1,_,b-1);C&&e.push(C)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function qS(i,t,e,n,s,r,a){const l=i.geometry.attributes.position;if($3.fromBufferAttribute(l,s),tE.fromBufferAttribute(l,r),e.distanceSqToSegment($3,tE,d8,L6)>n)return;d8.applyMatrix4(i.matrixWorld);const f=t.ray.origin.distanceTo(d8);if(!(f<t.near||f>t.far))return{distance:f,point:L6.clone().applyMatrix4(i.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:i}}const D6=new et,B6=new et;class Bc extends af{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[];for(let s=0,r=e.count;s<r;s+=2)D6.fromBufferAttribute(e,s),B6.fromBufferAttribute(e,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+D6.distanceTo(B6);t.setAttribute("lineDistance",new Me(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Hw extends af{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class aM extends gs{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new oe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const O6=new Ne,E5=new Ey,YS=new mr,WS=new et;class zw extends Ln{constructor(t=new $e,e=new aM){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,s=this.matrixWorld,r=t.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),YS.copy(n.boundingSphere),YS.applyMatrix4(s),YS.radius+=r,t.ray.intersectsSphere(YS)===!1)return;O6.copy(s).invert(),E5.copy(t.ray).applyMatrix4(O6);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=n.index,g=n.attributes.position;if(f!==null){const v=Math.max(0,a.start),_=Math.min(f.count,a.start+a.count);for(let b=v,C=_;b<C;b++){const M=f.getX(b);WS.fromBufferAttribute(g,M),N6(WS,M,u,s,t,e,this)}}else{const v=Math.max(0,a.start),_=Math.min(g.count,a.start+a.count);for(let b=v,C=_;b<C;b++)WS.fromBufferAttribute(g,b),N6(WS,b,u,s,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function N6(i,t,e,n,s,r,a){const l=E5.distanceSqToPoint(i);if(l<e){const u=new et;E5.closestPointToPoint(i,u),u.applyMatrix4(n);const f=s.ray.origin.distanceTo(u);if(f<s.near||f>s.far)return;r.push({distance:f,distanceToRay:Math.sqrt(l),point:u,index:t,face:null,faceIndex:null,barycoord:null,object:a})}}class GB extends wi{constructor(t,e,n,s,r=Ni,a=Ni,l,u,f){super(t,e,n,s,r,a,l,u,f),this.isVideoTexture=!0,this.generateMipmaps=!1;const m=this;function g(){m.needsUpdate=!0,t.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class SG extends GB{constructor(t,e,n,s,r,a,l,u){super({},t,e,n,s,r,a,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class EG extends wi{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=os,this.minFilter=os,this.generateMipmaps=!1,this.needsUpdate=!0}}class oM extends wi{constructor(t,e,n,s,r,a,l,u,f,m,g,v){super(null,a,l,u,f,m,s,r,g,v),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class MG extends oM{constructor(t,e,n,s,r,a){super(t,e,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=zo,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class TG extends oM{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,rf),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class CG extends wi{constructor(t,e,n,s,r,a,l,u,f){super(t,e,n,s,r,a,l,u,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ox extends wi{constructor(t,e,n=Hu,s,r,a,l=os,u=os,f,m=hy){if(m!==hy&&m!==kg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,s,r,a,l,u,m,n,f),this.isDepthTexture=!0,this.image={width:t,height:e},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Xd(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class wG extends Ox{constructor(t=1,e=1,n=1){super(t,e),this.isDepthArrayTexture=!0,this.image={width:t,height:e,depth:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class lM extends $e{constructor(t=1,e=1,n=4,s=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:s,heightSegments:r},e=Math.max(0,e),n=Math.max(1,Math.floor(n)),s=Math.max(3,Math.floor(s)),r=Math.max(1,Math.floor(r));const a=[],l=[],u=[],f=[],m=e/2,g=Math.PI/2*t,v=e,_=2*g+v,b=n*2+r,C=s+1,M=new et,S=new et;for(let R=0;R<=b;R++){let D=0,B=0,N=0,I=0;if(R<=n){const U=R/n,P=U*Math.PI/2;B=-m-t*Math.cos(P),N=t*Math.sin(P),I=-t*Math.cos(P),D=U*g}else if(R<=n+r){const U=(R-n)/r;B=-m+U*e,N=t,I=0,D=g+U*v}else{const U=(R-n-r)/n,P=U*Math.PI/2;B=m+t*Math.sin(P),N=t*Math.cos(P),I=t*Math.sin(P),D=g+v+U*g}const F=Math.max(0,Math.min(1,D/_));let z=0;R===0?z=.5/s:R===b&&(z=-.5/s);for(let U=0;U<=s;U++){const P=U/s,X=P*Math.PI*2,ot=Math.sin(X),it=Math.cos(X);S.x=-N*it,S.y=B,S.z=N*ot,l.push(S.x,S.y,S.z),M.set(-N*it,I,N*ot),M.normalize(),u.push(M.x,M.y,M.z),f.push(P+z,F)}if(R>0){const U=(R-1)*C;for(let P=0;P<s;P++){const X=U+P,ot=U+P+1,it=R*C+P,ut=R*C+P+1;a.push(X,ot,it),a.push(ot,ut,it)}}}this.setIndex(a),this.setAttribute("position",new Me(l,3)),this.setAttribute("normal",new Me(u,3)),this.setAttribute("uv",new Me(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new lM(t.radius,t.height,t.capSegments,t.radialSegments,t.heightSegments)}}class cM extends $e{constructor(t=1,e=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:s},e=Math.max(3,e);const r=[],a=[],l=[],u=[],f=new et,m=new Pt;a.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let g=0,v=3;g<=e;g++,v+=3){const _=n+g/e*s;f.x=t*Math.cos(_),f.y=t*Math.sin(_),a.push(f.x,f.y,f.z),l.push(0,0,1),m.x=(a[v]/t+1)/2,m.y=(a[v+1]/t+1)/2,u.push(m.x,m.y)}for(let g=1;g<=e;g++)r.push(g,g+1,0);this.setIndex(r),this.setAttribute("position",new Me(a,3)),this.setAttribute("normal",new Me(l,3)),this.setAttribute("uv",new Me(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new cM(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Nx extends $e{constructor(t=1,e=1,n=1,s=32,r=1,a=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:s,heightSegments:r,openEnded:a,thetaStart:l,thetaLength:u};const f=this;s=Math.floor(s),r=Math.floor(r);const m=[],g=[],v=[],_=[];let b=0;const C=[],M=n/2;let S=0;R(),a===!1&&(t>0&&D(!0),e>0&&D(!1)),this.setIndex(m),this.setAttribute("position",new Me(g,3)),this.setAttribute("normal",new Me(v,3)),this.setAttribute("uv",new Me(_,2));function R(){const B=new et,N=new et;let I=0;const F=(e-t)/n;for(let z=0;z<=r;z++){const U=[],P=z/r,X=P*(e-t)+t;for(let ot=0;ot<=s;ot++){const it=ot/s,ut=it*u+l,dt=Math.sin(ut),j=Math.cos(ut);N.x=X*dt,N.y=-P*n+M,N.z=X*j,g.push(N.x,N.y,N.z),B.set(dt,F,j).normalize(),v.push(B.x,B.y,B.z),_.push(it,1-P),U.push(b++)}C.push(U)}for(let z=0;z<s;z++)for(let U=0;U<r;U++){const P=C[U][z],X=C[U+1][z],ot=C[U+1][z+1],it=C[U][z+1];(t>0||U!==0)&&(m.push(P,X,it),I+=3),(e>0||U!==r-1)&&(m.push(X,ot,it),I+=3)}f.addGroup(S,I,0),S+=I}function D(B){const N=b,I=new Pt,F=new et;let z=0;const U=B===!0?t:e,P=B===!0?1:-1;for(let ot=1;ot<=s;ot++)g.push(0,M*P,0),v.push(0,P,0),_.push(.5,.5),b++;const X=b;for(let ot=0;ot<=s;ot++){const ut=ot/s*u+l,dt=Math.cos(ut),j=Math.sin(ut);F.x=U*j,F.y=M*P,F.z=U*dt,g.push(F.x,F.y,F.z),v.push(0,P,0),I.x=dt*.5+.5,I.y=j*.5*P+.5,_.push(I.x,I.y),b++}for(let ot=0;ot<s;ot++){const it=N+ot,ut=X+ot;B===!0?m.push(ut,ut+1,it):m.push(ut+1,ut,it),z+=3}f.addGroup(S,z,B===!0?1:2),S+=z}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Nx(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Ix extends Nx{constructor(t=1,e=1,n=32,s=1,r=!1,a=0,l=Math.PI*2){super(0,t,e,n,s,r,a,l),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:a,thetaLength:l}}static fromJSON(t){return new Ix(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class hp extends $e{constructor(t=[],e=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:s};const r=[],a=[];l(s),f(n),m(),this.setAttribute("position",new Me(r,3)),this.setAttribute("normal",new Me(r.slice(),3)),this.setAttribute("uv",new Me(a,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function l(R){const D=new et,B=new et,N=new et;for(let I=0;I<e.length;I+=3)_(e[I+0],D),_(e[I+1],B),_(e[I+2],N),u(D,B,N,R)}function u(R,D,B,N){const I=N+1,F=[];for(let z=0;z<=I;z++){F[z]=[];const U=R.clone().lerp(B,z/I),P=D.clone().lerp(B,z/I),X=I-z;for(let ot=0;ot<=X;ot++)ot===0&&z===I?F[z][ot]=U:F[z][ot]=U.clone().lerp(P,ot/X)}for(let z=0;z<I;z++)for(let U=0;U<2*(I-z)-1;U++){const P=Math.floor(U/2);U%2===0?(v(F[z][P+1]),v(F[z+1][P]),v(F[z][P])):(v(F[z][P+1]),v(F[z+1][P+1]),v(F[z+1][P]))}}function f(R){const D=new et;for(let B=0;B<r.length;B+=3)D.x=r[B+0],D.y=r[B+1],D.z=r[B+2],D.normalize().multiplyScalar(R),r[B+0]=D.x,r[B+1]=D.y,r[B+2]=D.z}function m(){const R=new et;for(let D=0;D<r.length;D+=3){R.x=r[D+0],R.y=r[D+1],R.z=r[D+2];const B=M(R)/2/Math.PI+.5,N=S(R)/Math.PI+.5;a.push(B,1-N)}b(),g()}function g(){for(let R=0;R<a.length;R+=6){const D=a[R+0],B=a[R+2],N=a[R+4],I=Math.max(D,B,N),F=Math.min(D,B,N);I>.9&&F<.1&&(D<.2&&(a[R+0]+=1),B<.2&&(a[R+2]+=1),N<.2&&(a[R+4]+=1))}}function v(R){r.push(R.x,R.y,R.z)}function _(R,D){const B=R*3;D.x=t[B+0],D.y=t[B+1],D.z=t[B+2]}function b(){const R=new et,D=new et,B=new et,N=new et,I=new Pt,F=new Pt,z=new Pt;for(let U=0,P=0;U<r.length;U+=9,P+=6){R.set(r[U+0],r[U+1],r[U+2]),D.set(r[U+3],r[U+4],r[U+5]),B.set(r[U+6],r[U+7],r[U+8]),I.set(a[P+0],a[P+1]),F.set(a[P+2],a[P+3]),z.set(a[P+4],a[P+5]),N.copy(R).add(D).add(B).divideScalar(3);const X=M(N);C(I,P+0,R,X),C(F,P+2,D,X),C(z,P+4,B,X)}}function C(R,D,B,N){N<0&&R.x===1&&(a[D]=R.x-1),B.x===0&&B.z===0&&(a[D]=N/2/Math.PI+.5)}function M(R){return Math.atan2(R.z,-R.x)}function S(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new hp(t.vertices,t.indices,t.radius,t.details)}}class uM extends hp{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,s=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,a,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new uM(t.radius,t.detail)}}const KS=new et,JS=new et,p8=new et,ZS=new ro;class kB extends $e{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const s=Math.pow(10,4),r=Math.cos(Pg*e),a=t.getIndex(),l=t.getAttribute("position"),u=a?a.count:l.count,f=[0,0,0],m=["a","b","c"],g=new Array(3),v={},_=[];for(let b=0;b<u;b+=3){a?(f[0]=a.getX(b),f[1]=a.getX(b+1),f[2]=a.getX(b+2)):(f[0]=b,f[1]=b+1,f[2]=b+2);const{a:C,b:M,c:S}=ZS;if(C.fromBufferAttribute(l,f[0]),M.fromBufferAttribute(l,f[1]),S.fromBufferAttribute(l,f[2]),ZS.getNormal(p8),g[0]=`${Math.round(C.x*s)},${Math.round(C.y*s)},${Math.round(C.z*s)}`,g[1]=`${Math.round(M.x*s)},${Math.round(M.y*s)},${Math.round(M.z*s)}`,g[2]=`${Math.round(S.x*s)},${Math.round(S.y*s)},${Math.round(S.z*s)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let R=0;R<3;R++){const D=(R+1)%3,B=g[R],N=g[D],I=ZS[m[R]],F=ZS[m[D]],z=`${B}_${N}`,U=`${N}_${B}`;U in v&&v[U]?(p8.dot(v[U].normal)<=r&&(_.push(I.x,I.y,I.z),_.push(F.x,F.y,F.z)),v[U]=null):z in v||(v[z]={index0:f[R],index1:f[D],normal:p8.clone()})}}for(const b in v)if(v[b]){const{index0:C,index1:M}=v[b];KS.fromBufferAttribute(l,C),JS.fromBufferAttribute(l,M),_.push(KS.x,KS.y,KS.z),_.push(JS.x,JS.y,JS.z)}this.setAttribute("position",new Me(_,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Oc{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,s=this.getPoint(0),r=0;e.push(0);for(let a=1;a<=t;a++)n=this.getPoint(a/t),r+=n.distanceTo(s),e.push(r),s=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const n=this.getLengths();let s=0;const r=n.length;let a;e?a=e:a=t*n[r-1];let l=0,u=r-1,f;for(;l<=u;)if(s=Math.floor(l+(u-l)/2),f=n[s]-a,f<0)l=s+1;else if(f>0)u=s-1;else{u=s;break}if(s=u,n[s]===a)return s/(r-1);const m=n[s],v=n[s+1]-m,_=(a-m)/v;return(s+_)/(r-1)}getTangent(t,e){let s=t-1e-4,r=t+1e-4;s<0&&(s=0),r>1&&(r=1);const a=this.getPoint(s),l=this.getPoint(r),u=e||(a.isVector2?new Pt:new et);return u.copy(l).sub(a).normalize(),u}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e=!1){const n=new et,s=[],r=[],a=[],l=new et,u=new Ne;for(let _=0;_<=t;_++){const b=_/t;s[_]=this.getTangentAt(b,new et)}r[0]=new et,a[0]=new et;let f=Number.MAX_VALUE;const m=Math.abs(s[0].x),g=Math.abs(s[0].y),v=Math.abs(s[0].z);m<=f&&(f=m,n.set(1,0,0)),g<=f&&(f=g,n.set(0,1,0)),v<=f&&n.set(0,0,1),l.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],l),a[0].crossVectors(s[0],r[0]);for(let _=1;_<=t;_++){if(r[_]=r[_-1].clone(),a[_]=a[_-1].clone(),l.crossVectors(s[_-1],s[_]),l.length()>Number.EPSILON){l.normalize();const b=Math.acos(nn(s[_-1].dot(s[_]),-1,1));r[_].applyMatrix4(u.makeRotationAxis(l,b))}a[_].crossVectors(s[_],r[_])}if(e===!0){let _=Math.acos(nn(r[0].dot(r[t]),-1,1));_/=t,s[0].dot(l.crossVectors(r[0],r[t]))>0&&(_=-_);for(let b=1;b<=t;b++)r[b].applyMatrix4(u.makeRotationAxis(s[b],_*b)),a[b].crossVectors(s[b],r[b])}return{tangents:s,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class hM extends Oc{constructor(t=0,e=0,n=1,s=1,r=0,a=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=l,this.aRotation=u}getPoint(t,e=new Pt){const n=e,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(a?r=0:r=s),this.aClockwise===!0&&!a&&(r===s?r=-s:r=r-s);const l=this.aStartAngle+t*r;let u=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=u-this.aX,_=f-this.aY;u=v*m-_*g+this.aX,f=v*g+_*m+this.aY}return n.set(u,f)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class VB extends hM{constructor(t,e,n,s,r,a){super(t,e,n,n,s,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Gw(){let i=0,t=0,e=0,n=0;function s(r,a,l,u){i=r,t=l,e=-3*r+3*a-2*l-u,n=2*r-2*a+l+u}return{initCatmullRom:function(r,a,l,u,f){s(a,l,f*(l-r),f*(u-a))},initNonuniformCatmullRom:function(r,a,l,u,f,m,g){let v=(a-r)/f-(l-r)/(f+m)+(l-a)/m,_=(l-a)/m-(u-a)/(m+g)+(u-l)/g;v*=m,_*=m,s(a,l,v,_)},calc:function(r){const a=r*r,l=a*r;return i+t*r+e*a+n*l}}}const $S=new et,m8=new Gw,g8=new Gw,v8=new Gw;class QB extends Oc{constructor(t=[],e=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=s}getPoint(t,e=new et){const n=e,s=this.points,r=s.length,a=(r-(this.closed?0:1))*t;let l=Math.floor(a),u=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:u===0&&l===r-1&&(l=r-2,u=1);let f,m;this.closed||l>0?f=s[(l-1)%r]:($S.subVectors(s[0],s[1]).add(s[0]),f=$S);const g=s[l%r],v=s[(l+1)%r];if(this.closed||l+2<r?m=s[(l+2)%r]:($S.subVectors(s[r-1],s[r-2]).add(s[r-1]),m=$S),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let b=Math.pow(f.distanceToSquared(g),_),C=Math.pow(g.distanceToSquared(v),_),M=Math.pow(v.distanceToSquared(m),_);C<1e-4&&(C=1),b<1e-4&&(b=C),M<1e-4&&(M=C),m8.initNonuniformCatmullRom(f.x,g.x,v.x,m.x,b,C,M),g8.initNonuniformCatmullRom(f.y,g.y,v.y,m.y,b,C,M),v8.initNonuniformCatmullRom(f.z,g.z,v.z,m.z,b,C,M)}else this.curveType==="catmullrom"&&(m8.initCatmullRom(f.x,g.x,v.x,m.x,this.tension),g8.initCatmullRom(f.y,g.y,v.y,m.y,this.tension),v8.initCatmullRom(f.z,g.z,v.z,m.z,this.tension));return n.set(m8.calc(u),g8.calc(u),v8.calc(u)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(s.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const s=this.points[e];t.points.push(s.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(new et().fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function I6(i,t,e,n,s){const r=(n-t)*.5,a=(s-e)*.5,l=i*i,u=i*l;return(2*e-2*n+r+a)*u+(-3*e+3*n-2*r-a)*l+r*i+e}function RG(i,t){const e=1-i;return e*e*t}function LG(i,t){return 2*(1-i)*i*t}function DG(i,t){return i*i*t}function H_(i,t,e,n){return RG(i,t)+LG(i,e)+DG(i,n)}function BG(i,t){const e=1-i;return e*e*e*t}function OG(i,t){const e=1-i;return 3*e*e*i*t}function NG(i,t){return 3*(1-i)*i*i*t}function IG(i,t){return i*i*i*t}function z_(i,t,e,n,s){return BG(i,t)+OG(i,e)+NG(i,n)+IG(i,s)}class kw extends Oc{constructor(t=new Pt,e=new Pt,n=new Pt,s=new Pt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=s}getPoint(t,e=new Pt){const n=e,s=this.v0,r=this.v1,a=this.v2,l=this.v3;return n.set(z_(t,s.x,r.x,a.x,l.x),z_(t,s.y,r.y,a.y,l.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class jB extends Oc{constructor(t=new et,e=new et,n=new et,s=new et){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=s}getPoint(t,e=new et){const n=e,s=this.v0,r=this.v1,a=this.v2,l=this.v3;return n.set(z_(t,s.x,r.x,a.x,l.x),z_(t,s.y,r.y,a.y,l.y),z_(t,s.z,r.z,a.z,l.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Vw extends Oc{constructor(t=new Pt,e=new Pt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Pt){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Pt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class XB extends Oc{constructor(t=new et,e=new et){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new et){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new et){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Qw extends Oc{constructor(t=new Pt,e=new Pt,n=new Pt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Pt){const n=e,s=this.v0,r=this.v1,a=this.v2;return n.set(H_(t,s.x,r.x,a.x),H_(t,s.y,r.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class jw extends Oc{constructor(t=new et,e=new et,n=new et){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new et){const n=e,s=this.v0,r=this.v1,a=this.v2;return n.set(H_(t,s.x,r.x,a.x),H_(t,s.y,r.y,a.y),H_(t,s.z,r.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Xw extends Oc{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Pt){const n=e,s=this.points,r=(s.length-1)*t,a=Math.floor(r),l=r-a,u=s[a===0?a:a-1],f=s[a],m=s[a>s.length-2?s.length-1:a+1],g=s[a>s.length-3?s.length-1:a+2];return n.set(I6(l,u.x,f.x,m.x,g.x),I6(l,u.y,f.y,m.y,g.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const s=this.points[e];t.points.push(s.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(new Pt().fromArray(s))}return this}}var eE=Object.freeze({__proto__:null,ArcCurve:VB,CatmullRomCurve3:QB,CubicBezierCurve:kw,CubicBezierCurve3:jB,EllipseCurve:hM,LineCurve:Vw,LineCurve3:XB,QuadraticBezierCurve:Qw,QuadraticBezierCurve3:jw,SplineCurve:Xw});class qB extends Oc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new eE[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=n){const a=s[r]-n,l=this.curves[r],u=l.getLength(),f=u===0?0:1-a/u;return l.getPointAt(f,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,s=this.curves.length;n<s;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let s=0,r=this.curves;s<r.length;s++){const a=r[s],l=a.isEllipseCurve?t*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,u=a.getPoints(l);for(let f=0;f<u.length;f++){const m=u[f];n&&n.equals(m)||(e.push(m),n=m)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const s=t.curves[e];this.curves.push(s.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const s=this.curves[e];t.curves.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const s=t.curves[e];this.curves.push(new eE[s.type]().fromJSON(s))}return this}}class nE extends qB{constructor(t){super(),this.type="Path",this.currentPoint=new Pt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Vw(this.currentPoint.clone(),new Pt(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,s){const r=new Qw(this.currentPoint.clone(),new Pt(t,e),new Pt(n,s));return this.curves.push(r),this.currentPoint.set(n,s),this}bezierCurveTo(t,e,n,s,r,a){const l=new kw(this.currentPoint.clone(),new Pt(t,e),new Pt(n,s),new Pt(r,a));return this.curves.push(l),this.currentPoint.set(r,a),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Xw(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,s,r,a){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(t+l,e+u,n,s,r,a),this}absarc(t,e,n,s,r,a){return this.absellipse(t,e,n,n,s,r,a),this}ellipse(t,e,n,s,r,a,l,u){const f=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(t+f,e+m,n,s,r,a,l,u),this}absellipse(t,e,n,s,r,a,l,u){const f=new hM(t,e,n,s,r,a,l,u);if(this.curves.length>0){const g=f.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(f);const m=f.getPoint(1);return this.currentPoint.copy(m),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Fg extends nE{constructor(t){super(t),this.uuid=ko(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,s=this.holes.length;n<s;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const s=t.holes[e];this.holes.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const s=this.holes[e];t.holes.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const s=t.holes[e];this.holes.push(new nE().fromJSON(s))}return this}}function UG(i,t,e=2){const n=t&&t.length,s=n?t[0]*e:i.length;let r=YB(i,0,s,e,!0);const a=[];if(!r||r.next===r.prev)return a;let l,u,f;if(n&&(r=GG(i,t,r,e)),i.length>80*e){l=1/0,u=1/0;let m=-1/0,g=-1/0;for(let v=e;v<s;v+=e){const _=i[v],b=i[v+1];_<l&&(l=_),b<u&&(u=b),_>m&&(m=_),b>g&&(g=b)}f=Math.max(m-l,g-u),f=f!==0?32767/f:0}return iA(r,a,e,l,u,f,0),a}function YB(i,t,e,n,s){let r;if(s===ZG(i,t,e,n)>0)for(let a=t;a<e;a+=n)r=U6(a/n|0,i[a],i[a+1],r);else for(let a=e-n;a>=t;a-=n)r=U6(a/n|0,i[a],i[a+1],r);return r&&vy(r,r.next)&&(rA(r),r=r.next),r}function Qg(i,t){if(!i)return i;t||(t=i);let e=i,n;do if(n=!1,!e.steiner&&(vy(e,e.next)||Ki(e.prev,e,e.next)===0)){if(rA(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function iA(i,t,e,n,s,r,a){if(!i)return;!a&&r&&XG(i,n,s,r);let l=i;for(;i.prev!==i.next;){const u=i.prev,f=i.next;if(r?FG(i,n,s,r):PG(i)){t.push(u.i,i.i,f.i),rA(i),i=f.next,l=f.next;continue}if(i=f,i===l){a?a===1?(i=HG(Qg(i),t),iA(i,t,e,n,s,r,2)):a===2&&zG(i,t,e,n,s,r):iA(Qg(i),t,e,n,s,r,1);break}}}function PG(i){const t=i.prev,e=i,n=i.next;if(Ki(t,e,n)>=0)return!1;const s=t.x,r=e.x,a=n.x,l=t.y,u=e.y,f=n.y,m=Math.min(s,r,a),g=Math.min(l,u,f),v=Math.max(s,r,a),_=Math.max(l,u,f);let b=n.next;for(;b!==t;){if(b.x>=m&&b.x<=v&&b.y>=g&&b.y<=_&&f_(s,l,r,u,a,f,b.x,b.y)&&Ki(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function FG(i,t,e,n){const s=i.prev,r=i,a=i.next;if(Ki(s,r,a)>=0)return!1;const l=s.x,u=r.x,f=a.x,m=s.y,g=r.y,v=a.y,_=Math.min(l,u,f),b=Math.min(m,g,v),C=Math.max(l,u,f),M=Math.max(m,g,v),S=M5(_,b,t,e,n),R=M5(C,M,t,e,n);let D=i.prevZ,B=i.nextZ;for(;D&&D.z>=S&&B&&B.z<=R;){if(D.x>=_&&D.x<=C&&D.y>=b&&D.y<=M&&D!==s&&D!==a&&f_(l,m,u,g,f,v,D.x,D.y)&&Ki(D.prev,D,D.next)>=0||(D=D.prevZ,B.x>=_&&B.x<=C&&B.y>=b&&B.y<=M&&B!==s&&B!==a&&f_(l,m,u,g,f,v,B.x,B.y)&&Ki(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;D&&D.z>=S;){if(D.x>=_&&D.x<=C&&D.y>=b&&D.y<=M&&D!==s&&D!==a&&f_(l,m,u,g,f,v,D.x,D.y)&&Ki(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;B&&B.z<=R;){if(B.x>=_&&B.x<=C&&B.y>=b&&B.y<=M&&B!==s&&B!==a&&f_(l,m,u,g,f,v,B.x,B.y)&&Ki(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function HG(i,t){let e=i;do{const n=e.prev,s=e.next.next;!vy(n,s)&&KB(n,e,e.next,s)&&sA(n,s)&&sA(s,n)&&(t.push(n.i,e.i,s.i),rA(e),rA(e.next),e=i=s),e=e.next}while(e!==i);return Qg(e)}function zG(i,t,e,n,s,r){let a=i;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&WG(a,l)){let u=JB(a,l);a=Qg(a,a.next),u=Qg(u,u.next),iA(a,t,e,n,s,r,0),iA(u,t,e,n,s,r,0);return}l=l.next}a=a.next}while(a!==i)}function GG(i,t,e,n){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r]*n,u=r<a-1?t[r+1]*n:i.length,f=YB(i,l,u,n,!1);f===f.next&&(f.steiner=!0),s.push(YG(f))}s.sort(kG);for(let r=0;r<s.length;r++)e=VG(s[r],e);return e}function kG(i,t){let e=i.x-t.x;if(e===0&&(e=i.y-t.y,e===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(t.next.y-t.y)/(t.next.x-t.x);e=n-s}return e}function VG(i,t){const e=QG(i,t);if(!e)return t;const n=JB(e,i);return Qg(n,n.next),Qg(e,e.next)}function QG(i,t){let e=t;const n=i.x,s=i.y;let r=-1/0,a;if(vy(i,e))return e;do{if(vy(i,e.next))return e.next;if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){const g=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(g<=n&&g>r&&(r=g,a=e.x<e.next.x?e:e.next,g===n))return a}e=e.next}while(e!==t);if(!a)return null;const l=a,u=a.x,f=a.y;let m=1/0;e=a;do{if(n>=e.x&&e.x>=u&&n!==e.x&&WB(s<f?n:r,s,u,f,s<f?r:n,s,e.x,e.y)){const g=Math.abs(s-e.y)/(n-e.x);sA(e,i)&&(g<m||g===m&&(e.x>a.x||e.x===a.x&&jG(a,e)))&&(a=e,m=g)}e=e.next}while(e!==l);return a}function jG(i,t){return Ki(i.prev,i,t.prev)<0&&Ki(t.next,i,i.next)<0}function XG(i,t,e,n){let s=i;do s.z===0&&(s.z=M5(s.x,s.y,t,e,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,qG(s)}function qG(i){let t,e=1;do{let n=i,s;i=null;let r=null;for(t=0;n;){t++;let a=n,l=0;for(let f=0;f<e&&(l++,a=a.nextZ,!!a);f++);let u=e;for(;l>0||u>0&&a;)l!==0&&(u===0||!a||n.z<=a.z)?(s=n,n=n.nextZ,l--):(s=a,a=a.nextZ,u--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;n=a}r.nextZ=null,e*=2}while(t>1);return i}function M5(i,t,e,n,s){return i=(i-e)*s|0,t=(t-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function YG(i){let t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function WB(i,t,e,n,s,r,a,l){return(s-a)*(t-l)>=(i-a)*(r-l)&&(i-a)*(n-l)>=(e-a)*(t-l)&&(e-a)*(r-l)>=(s-a)*(n-l)}function f_(i,t,e,n,s,r,a,l){return!(i===a&&t===l)&&WB(i,t,e,n,s,r,a,l)}function WG(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!KG(i,t)&&(sA(i,t)&&sA(t,i)&&JG(i,t)&&(Ki(i.prev,i,t.prev)||Ki(i,t.prev,t))||vy(i,t)&&Ki(i.prev,i,i.next)>0&&Ki(t.prev,t,t.next)>0)}function Ki(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function vy(i,t){return i.x===t.x&&i.y===t.y}function KB(i,t,e,n){const s=e4(Ki(i,t,e)),r=e4(Ki(i,t,n)),a=e4(Ki(e,n,i)),l=e4(Ki(e,n,t));return!!(s!==r&&a!==l||s===0&&t4(i,e,t)||r===0&&t4(i,n,t)||a===0&&t4(e,i,n)||l===0&&t4(e,t,n))}function t4(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function e4(i){return i>0?1:i<0?-1:0}function KG(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&KB(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function sA(i,t){return Ki(i.prev,i,i.next)<0?Ki(i,t,i.next)>=0&&Ki(i,i.prev,t)>=0:Ki(i,t,i.prev)<0||Ki(i,i.next,t)<0}function JG(i,t){let e=i,n=!1;const s=(i.x+t.x)/2,r=(i.y+t.y)/2;do e.y>r!=e.next.y>r&&e.next.y!==e.y&&s<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==i);return n}function JB(i,t){const e=T5(i.i,i.x,i.y),n=T5(t.i,t.x,t.y),s=i.next,r=t.prev;return i.next=t,t.prev=i,e.next=s,s.prev=e,n.next=e,e.prev=n,r.next=n,n.prev=r,n}function U6(i,t,e,n){const s=T5(i,t,e);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function rA(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function T5(i,t,e){return{i,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function ZG(i,t,e,n){let s=0;for(let r=t,a=e-n;r<e;r+=n)s+=(i[a]-i[r])*(i[r+1]+i[a+1]),a=r;return s}class $G{static triangulate(t,e,n=2){return UG(t,e,n)}}class Cc{static area(t){const e=t.length;let n=0;for(let s=e-1,r=0;r<e;s=r++)n+=t[s].x*t[r].y-t[r].x*t[s].y;return n*.5}static isClockWise(t){return Cc.area(t)<0}static triangulateShape(t,e){const n=[],s=[],r=[];P6(t),F6(n,t);let a=t.length;e.forEach(P6);for(let u=0;u<e.length;u++)s.push(a),a+=e[u].length,F6(n,e[u]);const l=$G.triangulate(n,s);for(let u=0;u<l.length;u+=3)r.push(l.slice(u,u+3));return r}}function P6(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function F6(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class fM extends $e{constructor(t=new Fg([new Pt(.5,.5),new Pt(-.5,.5),new Pt(-.5,-.5),new Pt(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,s=[],r=[];for(let l=0,u=t.length;l<u;l++){const f=t[l];a(f)}this.setAttribute("position",new Me(s,3)),this.setAttribute("uv",new Me(r,2)),this.computeVertexNormals();function a(l){const u=[],f=e.curveSegments!==void 0?e.curveSegments:12,m=e.steps!==void 0?e.steps:1,g=e.depth!==void 0?e.depth:1;let v=e.bevelEnabled!==void 0?e.bevelEnabled:!0,_=e.bevelThickness!==void 0?e.bevelThickness:.2,b=e.bevelSize!==void 0?e.bevelSize:_-.1,C=e.bevelOffset!==void 0?e.bevelOffset:0,M=e.bevelSegments!==void 0?e.bevelSegments:3;const S=e.extrudePath,R=e.UVGenerator!==void 0?e.UVGenerator:tk;let D,B=!1,N,I,F,z;S&&(D=S.getSpacedPoints(m),B=!0,v=!1,N=S.computeFrenetFrames(m,!1),I=new et,F=new et,z=new et),v||(M=0,_=0,b=0,C=0);const U=l.extractPoints(f);let P=U.shape;const X=U.holes;if(!Cc.isClockWise(P)){P=P.reverse();for(let Z=0,Kt=X.length;Z<Kt;Z++){const Ft=X[Z];Cc.isClockWise(Ft)&&(X[Z]=Ft.reverse())}}function it(Z){const Ft=10000000000000001e-36;let Vt=Z[0];for(let Gt=1;Gt<=Z.length;Gt++){const be=Gt%Z.length,qt=Z[be],$=qt.x-Vt.x,Q=qt.y-Vt.y,vt=$*$+Q*Q,It=Math.max(Math.abs(qt.x),Math.abs(qt.y),Math.abs(Vt.x),Math.abs(Vt.y)),jt=Ft*It*It;if(vt<=jt){Z.splice(be,1),Gt--;continue}Vt=qt}}it(P),X.forEach(it);const ut=X.length,dt=P;for(let Z=0;Z<ut;Z++){const Kt=X[Z];P=P.concat(Kt)}function j(Z,Kt,Ft){return Kt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(Kt,Ft)}const tt=P.length;function nt(Z,Kt,Ft){let Vt,Gt,be;const qt=Z.x-Kt.x,$=Z.y-Kt.y,Q=Ft.x-Z.x,vt=Ft.y-Z.y,It=qt*qt+$*$,jt=qt*vt-$*Q;if(Math.abs(jt)>Number.EPSILON){const Ot=Math.sqrt(It),ne=Math.sqrt(Q*Q+vt*vt),te=Kt.x-$/Ot,ge=Kt.y+qt/Ot,De=Ft.x-vt/ne,Jt=Ft.y+Q/ne,_e=((De-te)*vt-(Jt-ge)*Q)/(qt*vt-$*Q);Vt=te+qt*_e-Z.x,Gt=ge+$*_e-Z.y;const Se=Vt*Vt+Gt*Gt;if(Se<=2)return new Pt(Vt,Gt);be=Math.sqrt(Se/2)}else{let Ot=!1;qt>Number.EPSILON?Q>Number.EPSILON&&(Ot=!0):qt<-Number.EPSILON?Q<-Number.EPSILON&&(Ot=!0):Math.sign($)===Math.sign(vt)&&(Ot=!0),Ot?(Vt=-$,Gt=qt,be=Math.sqrt(It)):(Vt=qt,Gt=$,be=Math.sqrt(It/2))}return new Pt(Vt/be,Gt/be)}const _t=[];for(let Z=0,Kt=dt.length,Ft=Kt-1,Vt=Z+1;Z<Kt;Z++,Ft++,Vt++)Ft===Kt&&(Ft=0),Vt===Kt&&(Vt=0),_t[Z]=nt(dt[Z],dt[Ft],dt[Vt]);const J=[];let at,xt=_t.concat();for(let Z=0,Kt=ut;Z<Kt;Z++){const Ft=X[Z];at=[];for(let Vt=0,Gt=Ft.length,be=Gt-1,qt=Vt+1;Vt<Gt;Vt++,be++,qt++)be===Gt&&(be=0),qt===Gt&&(qt=0),at[Vt]=nt(Ft[Vt],Ft[be],Ft[qt]);J.push(at),xt=xt.concat(at)}let Et;if(M===0)Et=Cc.triangulateShape(dt,X);else{const Z=[],Kt=[];for(let Ft=0;Ft<M;Ft++){const Vt=Ft/M,Gt=_*Math.cos(Vt*Math.PI/2),be=b*Math.sin(Vt*Math.PI/2)+C;for(let qt=0,$=dt.length;qt<$;qt++){const Q=j(dt[qt],_t[qt],be);ve(Q.x,Q.y,-Gt),Vt===0&&Z.push(Q)}for(let qt=0,$=ut;qt<$;qt++){const Q=X[qt];at=J[qt];const vt=[];for(let It=0,jt=Q.length;It<jt;It++){const Ot=j(Q[It],at[It],be);ve(Ot.x,Ot.y,-Gt),Vt===0&&vt.push(Ot)}Vt===0&&Kt.push(vt)}}Et=Cc.triangulateShape(Z,Kt)}const ct=Et.length,wt=b+C;for(let Z=0;Z<tt;Z++){const Kt=v?j(P[Z],xt[Z],wt):P[Z];B?(F.copy(N.normals[0]).multiplyScalar(Kt.x),I.copy(N.binormals[0]).multiplyScalar(Kt.y),z.copy(D[0]).add(F).add(I),ve(z.x,z.y,z.z)):ve(Kt.x,Kt.y,0)}for(let Z=1;Z<=m;Z++)for(let Kt=0;Kt<tt;Kt++){const Ft=v?j(P[Kt],xt[Kt],wt):P[Kt];B?(F.copy(N.normals[Z]).multiplyScalar(Ft.x),I.copy(N.binormals[Z]).multiplyScalar(Ft.y),z.copy(D[Z]).add(F).add(I),ve(z.x,z.y,z.z)):ve(Ft.x,Ft.y,g/m*Z)}for(let Z=M-1;Z>=0;Z--){const Kt=Z/M,Ft=_*Math.cos(Kt*Math.PI/2),Vt=b*Math.sin(Kt*Math.PI/2)+C;for(let Gt=0,be=dt.length;Gt<be;Gt++){const qt=j(dt[Gt],_t[Gt],Vt);ve(qt.x,qt.y,g+Ft)}for(let Gt=0,be=X.length;Gt<be;Gt++){const qt=X[Gt];at=J[Gt];for(let $=0,Q=qt.length;$<Q;$++){const vt=j(qt[$],at[$],Vt);B?ve(vt.x,vt.y+D[m-1].y,D[m-1].x+Ft):ve(vt.x,vt.y,g+Ft)}}}Bt(),Ut();function Bt(){const Z=s.length/3;if(v){let Kt=0,Ft=tt*Kt;for(let Vt=0;Vt<ct;Vt++){const Gt=Et[Vt];ee(Gt[2]+Ft,Gt[1]+Ft,Gt[0]+Ft)}Kt=m+M*2,Ft=tt*Kt;for(let Vt=0;Vt<ct;Vt++){const Gt=Et[Vt];ee(Gt[0]+Ft,Gt[1]+Ft,Gt[2]+Ft)}}else{for(let Kt=0;Kt<ct;Kt++){const Ft=Et[Kt];ee(Ft[2],Ft[1],Ft[0])}for(let Kt=0;Kt<ct;Kt++){const Ft=Et[Kt];ee(Ft[0]+tt*m,Ft[1]+tt*m,Ft[2]+tt*m)}}n.addGroup(Z,s.length/3-Z,0)}function Ut(){const Z=s.length/3;let Kt=0;Wt(dt,Kt),Kt+=dt.length;for(let Ft=0,Vt=X.length;Ft<Vt;Ft++){const Gt=X[Ft];Wt(Gt,Kt),Kt+=Gt.length}n.addGroup(Z,s.length/3-Z,1)}function Wt(Z,Kt){let Ft=Z.length;for(;--Ft>=0;){const Vt=Ft;let Gt=Ft-1;Gt<0&&(Gt=Z.length-1);for(let be=0,qt=m+M*2;be<qt;be++){const $=tt*be,Q=tt*(be+1),vt=Kt+Vt+$,It=Kt+Gt+$,jt=Kt+Gt+Q,Ot=Kt+Vt+Q;Ye(vt,It,jt,Ot)}}}function ve(Z,Kt,Ft){u.push(Z),u.push(Kt),u.push(Ft)}function ee(Z,Kt,Ft){we(Z),we(Kt),we(Ft);const Vt=s.length/3,Gt=R.generateTopUV(n,s,Vt-3,Vt-2,Vt-1);re(Gt[0]),re(Gt[1]),re(Gt[2])}function Ye(Z,Kt,Ft,Vt){we(Z),we(Kt),we(Vt),we(Kt),we(Ft),we(Vt);const Gt=s.length/3,be=R.generateSideWallUV(n,s,Gt-6,Gt-3,Gt-2,Gt-1);re(be[0]),re(be[1]),re(be[3]),re(be[1]),re(be[2]),re(be[3])}function we(Z){s.push(u[Z*3+0]),s.push(u[Z*3+1]),s.push(u[Z*3+2])}function re(Z){r.push(Z.x),r.push(Z.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return ek(e,n,t)}static fromJSON(t,e){const n=[];for(let r=0,a=t.shapes.length;r<a;r++){const l=e[t.shapes[r]];n.push(l)}const s=t.options.extrudePath;return s!==void 0&&(t.options.extrudePath=new eE[s.type]().fromJSON(s)),new fM(n,t.options)}}const tk={generateTopUV:function(i,t,e,n,s){const r=t[e*3],a=t[e*3+1],l=t[n*3],u=t[n*3+1],f=t[s*3],m=t[s*3+1];return[new Pt(r,a),new Pt(l,u),new Pt(f,m)]},generateSideWallUV:function(i,t,e,n,s,r){const a=t[e*3],l=t[e*3+1],u=t[e*3+2],f=t[n*3],m=t[n*3+1],g=t[n*3+2],v=t[s*3],_=t[s*3+1],b=t[s*3+2],C=t[r*3],M=t[r*3+1],S=t[r*3+2];return Math.abs(l-m)<Math.abs(a-f)?[new Pt(a,1-u),new Pt(f,1-g),new Pt(v,1-b),new Pt(C,1-S)]:[new Pt(l,1-u),new Pt(m,1-g),new Pt(_,1-b),new Pt(M,1-S)]}};function ek(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class dM extends hp{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new dM(t.radius,t.detail)}}class pM extends $e{constructor(t=[new Pt(0,-.5),new Pt(.5,0),new Pt(0,.5)],e=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:s},e=Math.floor(e),s=nn(s,0,Math.PI*2);const r=[],a=[],l=[],u=[],f=[],m=1/e,g=new et,v=new Pt,_=new et,b=new et,C=new et;let M=0,S=0;for(let R=0;R<=t.length-1;R++)switch(R){case 0:M=t[R+1].x-t[R].x,S=t[R+1].y-t[R].y,_.x=S*1,_.y=-M,_.z=S*0,C.copy(_),_.normalize(),u.push(_.x,_.y,_.z);break;case t.length-1:u.push(C.x,C.y,C.z);break;default:M=t[R+1].x-t[R].x,S=t[R+1].y-t[R].y,_.x=S*1,_.y=-M,_.z=S*0,b.copy(_),_.x+=C.x,_.y+=C.y,_.z+=C.z,_.normalize(),u.push(_.x,_.y,_.z),C.copy(b)}for(let R=0;R<=e;R++){const D=n+R*m*s,B=Math.sin(D),N=Math.cos(D);for(let I=0;I<=t.length-1;I++){g.x=t[I].x*B,g.y=t[I].y,g.z=t[I].x*N,a.push(g.x,g.y,g.z),v.x=R/e,v.y=I/(t.length-1),l.push(v.x,v.y);const F=u[3*I+0]*B,z=u[3*I+1],U=u[3*I+0]*N;f.push(F,z,U)}}for(let R=0;R<e;R++)for(let D=0;D<t.length-1;D++){const B=D+R*t.length,N=B,I=B+t.length,F=B+t.length+1,z=B+1;r.push(N,I,z),r.push(F,z,I)}this.setIndex(r),this.setAttribute("position",new Me(a,3)),this.setAttribute("uv",new Me(l,2)),this.setAttribute("normal",new Me(f,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new pM(t.points,t.segments,t.phiStart,t.phiLength)}}class Ux extends hp{constructor(t=1,e=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Ux(t.radius,t.detail)}}class Ty extends $e{constructor(t=1,e=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:s};const r=t/2,a=e/2,l=Math.floor(n),u=Math.floor(s),f=l+1,m=u+1,g=t/l,v=e/u,_=[],b=[],C=[],M=[];for(let S=0;S<m;S++){const R=S*v-a;for(let D=0;D<f;D++){const B=D*g-r;b.push(B,-R,0),C.push(0,0,1),M.push(D/l),M.push(1-S/u)}}for(let S=0;S<u;S++)for(let R=0;R<l;R++){const D=R+f*S,B=R+f*(S+1),N=R+1+f*(S+1),I=R+1+f*S;_.push(D,B,I),_.push(B,N,I)}this.setIndex(_),this.setAttribute("position",new Me(b,3)),this.setAttribute("normal",new Me(C,3)),this.setAttribute("uv",new Me(M,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ty(t.width,t.height,t.widthSegments,t.heightSegments)}}class mM extends $e{constructor(t=.5,e=1,n=32,s=1,r=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:s,thetaStart:r,thetaLength:a},n=Math.max(3,n),s=Math.max(1,s);const l=[],u=[],f=[],m=[];let g=t;const v=(e-t)/s,_=new et,b=new Pt;for(let C=0;C<=s;C++){for(let M=0;M<=n;M++){const S=r+M/n*a;_.x=g*Math.cos(S),_.y=g*Math.sin(S),u.push(_.x,_.y,_.z),f.push(0,0,1),b.x=(_.x/e+1)/2,b.y=(_.y/e+1)/2,m.push(b.x,b.y)}g+=v}for(let C=0;C<s;C++){const M=C*(n+1);for(let S=0;S<n;S++){const R=S+M,D=R,B=R+n+1,N=R+n+2,I=R+1;l.push(D,B,I),l.push(B,N,I)}}this.setIndex(l),this.setAttribute("position",new Me(u,3)),this.setAttribute("normal",new Me(f,3)),this.setAttribute("uv",new Me(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new mM(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class gM extends $e{constructor(t=new Fg([new Pt(0,.5),new Pt(-.5,-.5),new Pt(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],s=[],r=[],a=[];let l=0,u=0;if(Array.isArray(t)===!1)f(t);else for(let m=0;m<t.length;m++)f(t[m]),this.addGroup(l,u,m),l+=u,u=0;this.setIndex(n),this.setAttribute("position",new Me(s,3)),this.setAttribute("normal",new Me(r,3)),this.setAttribute("uv",new Me(a,2));function f(m){const g=s.length/3,v=m.extractPoints(e);let _=v.shape;const b=v.holes;Cc.isClockWise(_)===!1&&(_=_.reverse());for(let M=0,S=b.length;M<S;M++){const R=b[M];Cc.isClockWise(R)===!0&&(b[M]=R.reverse())}const C=Cc.triangulateShape(_,b);for(let M=0,S=b.length;M<S;M++){const R=b[M];_=_.concat(R)}for(let M=0,S=_.length;M<S;M++){const R=_[M];s.push(R.x,R.y,0),r.push(0,0,1),a.push(R.x,R.y)}for(let M=0,S=C.length;M<S;M++){const R=C[M],D=R[0]+g,B=R[1]+g,N=R[2]+g;n.push(D,B,N),u+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return nk(e,t)}static fromJSON(t,e){const n=[];for(let s=0,r=t.shapes.length;s<r;s++){const a=e[t.shapes[s]];n.push(a)}return new gM(n,t.curveSegments)}}function nk(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const s=i[e];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t}class Px extends $e{constructor(t=1,e=32,n=16,s=0,r=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:s,phiLength:r,thetaStart:a,thetaLength:l},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const u=Math.min(a+l,Math.PI);let f=0;const m=[],g=new et,v=new et,_=[],b=[],C=[],M=[];for(let S=0;S<=n;S++){const R=[],D=S/n;let B=0;S===0&&a===0?B=.5/e:S===n&&u===Math.PI&&(B=-.5/e);for(let N=0;N<=e;N++){const I=N/e;g.x=-t*Math.cos(s+I*r)*Math.sin(a+D*l),g.y=t*Math.cos(a+D*l),g.z=t*Math.sin(s+I*r)*Math.sin(a+D*l),b.push(g.x,g.y,g.z),v.copy(g).normalize(),C.push(v.x,v.y,v.z),M.push(I+B,1-D),R.push(f++)}m.push(R)}for(let S=0;S<n;S++)for(let R=0;R<e;R++){const D=m[S][R+1],B=m[S][R],N=m[S+1][R],I=m[S+1][R+1];(S!==0||a>0)&&_.push(D,B,I),(S!==n-1||u<Math.PI)&&_.push(B,N,I)}this.setIndex(_),this.setAttribute("position",new Me(b,3)),this.setAttribute("normal",new Me(C,3)),this.setAttribute("uv",new Me(M,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Px(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class vM extends hp{constructor(t=1,e=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new vM(t.radius,t.detail)}}class yM extends $e{constructor(t=1,e=.4,n=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:s,arc:r},n=Math.floor(n),s=Math.floor(s);const a=[],l=[],u=[],f=[],m=new et,g=new et,v=new et;for(let _=0;_<=n;_++)for(let b=0;b<=s;b++){const C=b/s*r,M=_/n*Math.PI*2;g.x=(t+e*Math.cos(M))*Math.cos(C),g.y=(t+e*Math.cos(M))*Math.sin(C),g.z=e*Math.sin(M),l.push(g.x,g.y,g.z),m.x=t*Math.cos(C),m.y=t*Math.sin(C),v.subVectors(g,m).normalize(),u.push(v.x,v.y,v.z),f.push(b/s),f.push(_/n)}for(let _=1;_<=n;_++)for(let b=1;b<=s;b++){const C=(s+1)*_+b-1,M=(s+1)*(_-1)+b-1,S=(s+1)*(_-1)+b,R=(s+1)*_+b;a.push(C,M,R),a.push(M,S,R)}this.setIndex(a),this.setAttribute("position",new Me(l,3)),this.setAttribute("normal",new Me(u,3)),this.setAttribute("uv",new Me(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new yM(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class _M extends $e{constructor(t=1,e=.4,n=64,s=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:s,p:r,q:a},n=Math.floor(n),s=Math.floor(s);const l=[],u=[],f=[],m=[],g=new et,v=new et,_=new et,b=new et,C=new et,M=new et,S=new et;for(let D=0;D<=n;++D){const B=D/n*r*Math.PI*2;R(B,r,a,t,_),R(B+.01,r,a,t,b),M.subVectors(b,_),S.addVectors(b,_),C.crossVectors(M,S),S.crossVectors(C,M),C.normalize(),S.normalize();for(let N=0;N<=s;++N){const I=N/s*Math.PI*2,F=-e*Math.cos(I),z=e*Math.sin(I);g.x=_.x+(F*S.x+z*C.x),g.y=_.y+(F*S.y+z*C.y),g.z=_.z+(F*S.z+z*C.z),u.push(g.x,g.y,g.z),v.subVectors(g,_).normalize(),f.push(v.x,v.y,v.z),m.push(D/n),m.push(N/s)}}for(let D=1;D<=n;D++)for(let B=1;B<=s;B++){const N=(s+1)*(D-1)+(B-1),I=(s+1)*D+(B-1),F=(s+1)*D+B,z=(s+1)*(D-1)+B;l.push(N,I,z),l.push(I,F,z)}this.setIndex(l),this.setAttribute("position",new Me(u,3)),this.setAttribute("normal",new Me(f,3)),this.setAttribute("uv",new Me(m,2));function R(D,B,N,I,F){const z=Math.cos(D),U=Math.sin(D),P=N/B*D,X=Math.cos(P);F.x=I*(2+X)*.5*z,F.y=I*(2+X)*U*.5,F.z=I*Math.sin(P)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new _M(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class AM extends $e{constructor(t=new jw(new et(-1,-1,0),new et(-1,1,0),new et(1,1,0)),e=64,n=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:s,closed:r};const a=t.computeFrenetFrames(e,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new et,u=new et,f=new Pt;let m=new et;const g=[],v=[],_=[],b=[];C(),this.setIndex(b),this.setAttribute("position",new Me(g,3)),this.setAttribute("normal",new Me(v,3)),this.setAttribute("uv",new Me(_,2));function C(){for(let D=0;D<e;D++)M(D);M(r===!1?e:0),R(),S()}function M(D){m=t.getPointAt(D/e,m);const B=a.normals[D],N=a.binormals[D];for(let I=0;I<=s;I++){const F=I/s*Math.PI*2,z=Math.sin(F),U=-Math.cos(F);u.x=U*B.x+z*N.x,u.y=U*B.y+z*N.y,u.z=U*B.z+z*N.z,u.normalize(),v.push(u.x,u.y,u.z),l.x=m.x+n*u.x,l.y=m.y+n*u.y,l.z=m.z+n*u.z,g.push(l.x,l.y,l.z)}}function S(){for(let D=1;D<=e;D++)for(let B=1;B<=s;B++){const N=(s+1)*(D-1)+(B-1),I=(s+1)*D+(B-1),F=(s+1)*D+B,z=(s+1)*(D-1)+B;b.push(N,I,z),b.push(I,F,z)}}function R(){for(let D=0;D<=e;D++)for(let B=0;B<=s;B++)f.x=D/e,f.y=B/s,_.push(f.x,f.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new AM(new eE[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class ZB extends $e{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],n=new Set,s=new et,r=new et;if(t.index!==null){const a=t.attributes.position,l=t.index;let u=t.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,m=u.length;f<m;++f){const g=u[f],v=g.start,_=g.count;for(let b=v,C=v+_;b<C;b+=3)for(let M=0;M<3;M++){const S=l.getX(b+M),R=l.getX(b+(M+1)%3);s.fromBufferAttribute(a,S),r.fromBufferAttribute(a,R),H6(s,r,n)===!0&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}}else{const a=t.attributes.position;for(let l=0,u=a.count/3;l<u;l++)for(let f=0;f<3;f++){const m=3*l+f,g=3*l+(f+1)%3;s.fromBufferAttribute(a,m),r.fromBufferAttribute(a,g),H6(s,r,n)===!0&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new Me(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function H6(i,t,e){const n=`${i.x},${i.y},${i.z}-${t.x},${t.y},${t.z}`,s=`${t.x},${t.y},${t.z}-${i.x},${i.y},${i.z}`;return e.has(n)===!0||e.has(s)===!0?!1:(e.add(n),e.add(s),!0)}var z6=Object.freeze({__proto__:null,BoxGeometry:a0,CapsuleGeometry:lM,CircleGeometry:cM,ConeGeometry:Ix,CylinderGeometry:Nx,DodecahedronGeometry:uM,EdgesGeometry:kB,ExtrudeGeometry:fM,IcosahedronGeometry:dM,LatheGeometry:pM,OctahedronGeometry:Ux,PlaneGeometry:Ty,PolyhedronGeometry:hp,RingGeometry:mM,ShapeGeometry:gM,SphereGeometry:Px,TetrahedronGeometry:vM,TorusGeometry:yM,TorusKnotGeometry:_M,TubeGeometry:AM,WireframeGeometry:ZB});class $B extends gs{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new oe(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class tO extends Ks{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Fx extends gs{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new oe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=up,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Bl extends Fx{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Pt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return nn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new oe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new oe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new oe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class eO extends gs{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new oe(16777215),this.specular=new oe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=up,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qo,this.combine=Tx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class nO extends gs{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new oe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=up,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class qw extends gs{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=up,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class iO extends gs{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=up,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qo,this.combine=Tx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Yw extends gs{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=cp,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Ww extends gs{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class sO extends gs{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new oe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=up,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class rO extends oa{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Um(i,t){return!i||i.constructor===t?i:typeof t.BYTES_PER_ELEMENT=="number"?new t(i):Array.prototype.slice.call(i)}function aO(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function oO(i){function t(s,r){return i[s]-i[r]}const e=i.length,n=new Array(e);for(let s=0;s!==e;++s)n[s]=s;return n.sort(t),n}function C5(i,t,e){const n=i.length,s=new i.constructor(n);for(let r=0,a=0;a!==n;++r){const l=e[r]*t;for(let u=0;u!==t;++u)s[a++]=i[l+u]}return s}function Kw(i,t,e,n){let s=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[s++];if(r===void 0)return;let a=r[n];if(a!==void 0)if(Array.isArray(a))do a=r[n],a!==void 0&&(t.push(r.time),e.push(...a)),r=i[s++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[n],a!==void 0&&(t.push(r.time),a.toArray(e,e.length)),r=i[s++];while(r!==void 0);else do a=r[n],a!==void 0&&(t.push(r.time),e.push(a)),r=i[s++];while(r!==void 0)}function ik(i,t,e,n,s=30){const r=i.clone();r.name=t;const a=[];for(let u=0;u<r.tracks.length;++u){const f=r.tracks[u],m=f.getValueSize(),g=[],v=[];for(let _=0;_<f.times.length;++_){const b=f.times[_]*s;if(!(b<e||b>=n)){g.push(f.times[_]);for(let C=0;C<m;++C)v.push(f.values[_*m+C])}}g.length!==0&&(f.times=Um(g,f.times.constructor),f.values=Um(v,f.values.constructor),a.push(f))}r.tracks=a;let l=1/0;for(let u=0;u<r.tracks.length;++u)l>r.tracks[u].times[0]&&(l=r.tracks[u].times[0]);for(let u=0;u<r.tracks.length;++u)r.tracks[u].shift(-1*l);return r.resetDuration(),r}function sk(i,t=0,e=i,n=30){n<=0&&(n=30);const s=e.tracks.length,r=t/n;for(let a=0;a<s;++a){const l=e.tracks[a],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const f=i.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===u});if(f===void 0)continue;let m=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let v=0;const _=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=_/3);const b=l.times.length-1;let C;if(r<=l.times[0]){const S=m,R=g-m;C=l.values.slice(S,R)}else if(r>=l.times[b]){const S=b*g+m,R=S+g-m;C=l.values.slice(S,R)}else{const S=l.createInterpolant(),R=m,D=g-m;S.evaluate(r),C=S.resultBuffer.slice(R,D)}u==="quaternion"&&new Or().fromArray(C).normalize().conjugate().toArray(C);const M=f.times.length;for(let S=0;S<M;++S){const R=S*_+v;if(u==="quaternion")Or.multiplyQuaternionsFlat(f.values,R,C,0,f.values,R);else{const D=_-v*2;for(let B=0;B<D;++B)f.values[R+B]-=C[B]}}}return i.blendMode=Lw,i}class rk{static convertArray(t,e){return Um(t,e)}static isTypedArray(t){return aO(t)}static getKeyframeOrder(t){return oO(t)}static sortedArray(t,e,n){return C5(t,e,n)}static flattenJSON(t,e,n,s){Kw(t,e,n,s)}static subclip(t,e,n,s,r=30){return ik(t,e,n,s,r)}static makeClipAdditive(t,e=0,n=t,s=30){return sk(t,e,n,s)}}class Cy{constructor(t,e,n,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,s=e[n],r=e[n-1];t:{e:{let a;n:{i:if(!(t<s)){for(let l=n+2;;){if(s===void 0){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(r=s,s=e[++n],t<s)break e}a=e.length;break n}if(!(t>=r)){const l=e[1];t<l&&(n=2,r=l);for(let u=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(s=r,r=e[--n-1],t>=r)break e}a=n,n=0;break n}break t}for(;n<a;){const l=n+a>>>1;t<e[l]?a=l:n=l+1}if(s=e[n],r=e[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,s)}return this.interpolate_(n,r,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=t*s;for(let a=0;a!==s;++a)e[a]=n[r+a];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class lO extends Cy{constructor(t,e,n,s){super(t,e,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Nm,endingEnd:Nm}}intervalChanged_(t,e,n){const s=this.parameterPositions;let r=t-2,a=t+1,l=s[r],u=s[a];if(l===void 0)switch(this.getSettings_().endingStart){case Im:r=t,l=2*e-n;break;case K_:r=s.length-2,l=e+s[r]-s[r+1];break;default:r=t,l=n}if(u===void 0)switch(this.getSettings_().endingEnd){case Im:a=t,u=2*n-e;break;case K_:a=1,u=n+s[1]-s[0];break;default:a=t-1,u=e}const f=(n-e)*.5,m=this.valueSize;this._weightPrev=f/(e-l),this._weightNext=f/(u-n),this._offsetPrev=r*m,this._offsetNext=a*m}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=t*l,f=u-l,m=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,_=this._weightNext,b=(n-e)/(s-e),C=b*b,M=C*b,S=-v*M+2*v*C-v*b,R=(1+v)*M+(-1.5-2*v)*C+(-.5+v)*b+1,D=(-1-_)*M+(1.5+_)*C+.5*b,B=_*M-_*C;for(let N=0;N!==l;++N)r[N]=S*a[m+N]+R*a[f+N]+D*a[u+N]+B*a[g+N];return r}}class Jw extends Cy{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=t*l,f=u-l,m=(n-e)/(s-e),g=1-m;for(let v=0;v!==l;++v)r[v]=a[f+v]*g+a[u+v]*m;return r}}class cO extends Cy{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t){return this.copySampleValue_(t-1)}}class Ol{constructor(t,e,n,s){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Um(e,this.TimeBufferType),this.values=Um(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Um(t.times,Array),values:Um(t.values,Array)};const s=t.getInterpolation();s!==t.DefaultInterpolation&&(n.interpolation=s)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new cO(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Jw(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new lO(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case fy:e=this.InterpolantFactoryMethodDiscrete;break;case dy:e=this.InterpolantFactoryMethodLinear;break;case L4:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return fy;case this.InterpolantFactoryMethodLinear:return dy;case this.InterpolantFactoryMethodSmooth:return L4}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,s=e.length;n!==s;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,s=e.length;n!==s;++n)e[n]*=t}return this}trim(t,e){const n=this.times,s=n.length;let r=0,a=s-1;for(;r!==s&&n[r]<t;)++r;for(;a!==-1&&n[a]>e;)--a;if(++a,r!==0||a!==s){r>=a&&(a=Math.max(a,1),r=a-1);const l=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*l,a*l)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,s=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let l=0;l!==r;l++){const u=n[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),t=!1;break}if(a!==null&&a>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,a),t=!1;break}a=u}if(s!==void 0&&aO(s))for(let l=0,u=s.length;l!==u;++l){const f=s[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===L4,r=t.length-1;let a=1;for(let l=1;l<r;++l){let u=!1;const f=t[l],m=t[l+1];if(f!==m&&(l!==1||f!==t[0]))if(s)u=!0;else{const g=l*n,v=g-n,_=g+n;for(let b=0;b!==n;++b){const C=e[g+b];if(C!==e[v+b]||C!==e[_+b]){u=!0;break}}}if(u){if(l!==a){t[a]=t[l];const g=l*n,v=a*n;for(let _=0;_!==n;++_)e[v+_]=e[g+_]}++a}}if(r>0){t[a]=t[r];for(let l=r*n,u=a*n,f=0;f!==n;++f)e[u+f]=e[l+f];++a}return a!==t.length?(this.times=t.slice(0,a),this.values=e.slice(0,a*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=this.constructor,s=new n(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}}Ol.prototype.ValueTypeName="";Ol.prototype.TimeBufferType=Float32Array;Ol.prototype.ValueBufferType=Float32Array;Ol.prototype.DefaultInterpolation=dy;class o0 extends Ol{constructor(t,e,n){super(t,e,n)}}o0.prototype.ValueTypeName="bool";o0.prototype.ValueBufferType=Array;o0.prototype.DefaultInterpolation=fy;o0.prototype.InterpolantFactoryMethodLinear=void 0;o0.prototype.InterpolantFactoryMethodSmooth=void 0;class Zw extends Ol{constructor(t,e,n,s){super(t,e,n,s)}}Zw.prototype.ValueTypeName="color";class jg extends Ol{constructor(t,e,n,s){super(t,e,n,s)}}jg.prototype.ValueTypeName="number";class uO extends Cy{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=(n-e)/(s-e);let f=t*l;for(let m=f+l;f!==m;f+=4)Or.slerpFlat(r,0,a,f-l,a,f,u);return r}}class np extends Ol{constructor(t,e,n,s){super(t,e,n,s)}InterpolantFactoryMethodLinear(t){return new uO(this.times,this.values,this.getValueSize(),t)}}np.prototype.ValueTypeName="quaternion";np.prototype.InterpolantFactoryMethodSmooth=void 0;class l0 extends Ol{constructor(t,e,n){super(t,e,n)}}l0.prototype.ValueTypeName="string";l0.prototype.ValueBufferType=Array;l0.prototype.DefaultInterpolation=fy;l0.prototype.InterpolantFactoryMethodLinear=void 0;l0.prototype.InterpolantFactoryMethodSmooth=void 0;class ip extends Ol{constructor(t,e,n,s){super(t,e,n,s)}}ip.prototype.ValueTypeName="vector";class Xg{constructor(t="",e=-1,n=[],s=$E){this.name=t,this.tracks=n,this.duration=e,this.blendMode=s,this.uuid=ko(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,s=1/(t.fps||1);for(let a=0,l=n.length;a!==l;++a)e.push(ok(n[a]).scale(s));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,s={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,a=n.length;r!==a;++r)e.push(Ol.toJSON(n[r]));return s}static CreateFromMorphTargetSequence(t,e,n,s){const r=e.length,a=[];for(let l=0;l<r;l++){let u=[],f=[];u.push((l+r-1)%r,l,(l+1)%r),f.push(0,1,0);const m=oO(u);u=C5(u,1,m),f=C5(f,1,m),!s&&u[0]===0&&(u.push(r),f.push(f[0])),a.push(new jg(".morphTargetInfluences["+e[l].name+"]",u,f).scale(1/n))}return new this(t,-1,a)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const s=t;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===e)return n[s];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const s={},r=/^([\w-]*?)([\d]+)$/;for(let l=0,u=t.length;l<u;l++){const f=t[l],m=f.name.match(r);if(m&&m.length>1){const g=m[1];let v=s[g];v||(s[g]=v=[]),v.push(f)}}const a=[];for(const l in s)a.push(this.CreateFromMorphTargetSequence(l,s[l],e,n));return a}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(g,v,_,b,C){if(_.length!==0){const M=[],S=[];Kw(_,M,S,b),M.length!==0&&C.push(new g(v,M,S))}},s=[],r=t.name||"default",a=t.fps||30,l=t.blendMode;let u=t.length||-1;const f=t.hierarchy||[];for(let g=0;g<f.length;g++){const v=f[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const _={};let b;for(b=0;b<v.length;b++)if(v[b].morphTargets)for(let C=0;C<v[b].morphTargets.length;C++)_[v[b].morphTargets[C]]=-1;for(const C in _){const M=[],S=[];for(let R=0;R!==v[b].morphTargets.length;++R){const D=v[b];M.push(D.time),S.push(D.morphTarget===C?1:0)}s.push(new jg(".morphTargetInfluence["+C+"]",M,S))}u=_.length*a}else{const _=".bones["+e[g].name+"]";n(ip,_+".position",v,"pos",s),n(np,_+".quaternion",v,"rot",s),n(ip,_+".scale",v,"scl",s)}}return s.length===0?null:new this(r,u,s,l)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,s=t.length;n!==s;++n){const r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ak(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return jg;case"vector":case"vector2":case"vector3":case"vector4":return ip;case"color":return Zw;case"quaternion":return np;case"bool":case"boolean":return o0;case"string":return l0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function ok(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=ak(i.type);if(i.times===void 0){const e=[],n=[];Kw(i.keys,e,n,"value"),i.times=e,i.values=n}return t.parse!==void 0?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const Jh={enabled:!1,files:{},add:function(i,t){this.enabled!==!1&&(this.files[i]=t)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class $w{constructor(t,e,n){const s=this;let r=!1,a=0,l=0,u;const f=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(m){l++,r===!1&&s.onStart!==void 0&&s.onStart(m,a,l),r=!0},this.itemEnd=function(m){a++,s.onProgress!==void 0&&s.onProgress(m,a,l),a===l&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(m){s.onError!==void 0&&s.onError(m)},this.resolveURL=function(m){return u?u(m):m},this.setURLModifier=function(m){return u=m,this},this.addHandler=function(m,g){return f.push(m,g),this},this.removeHandler=function(m){const g=f.indexOf(m);return g!==-1&&f.splice(g,2),this},this.getHandler=function(m){for(let g=0,v=f.length;g<v;g+=2){const _=f[g],b=f[g+1];if(_.global&&(_.lastIndex=0),_.test(m))return b}return null}}}const W1=new $w;let la=class{constructor(t){this.manager=t!==void 0?t:W1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(s,r){n.load(t,s,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}};la.DEFAULT_MATERIAL_NAME="__DEFAULT";const mh={};class lk extends Error{constructor(t,e){super(t),this.response=e}}class jo extends la{constructor(t){super(t),this.mimeType="",this.responseType=""}load(t,e,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Jh.get(t);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(mh[t]!==void 0){mh[t].push({onLoad:e,onProgress:n,onError:s});return}mh[t]=[],mh[t].push({onLoad:e,onProgress:n,onError:s});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(a).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const m=mh[t],g=f.body.getReader(),v=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),_=v?parseInt(v):0,b=_!==0;let C=0;const M=new ReadableStream({start(S){R();function R(){g.read().then(({done:D,value:B})=>{if(D)S.close();else{C+=B.byteLength;const N=new ProgressEvent("progress",{lengthComputable:b,loaded:C,total:_});for(let I=0,F=m.length;I<F;I++){const z=m[I];z.onProgress&&z.onProgress(N)}S.enqueue(B),R()}},D=>{S.error(D)})}}});return new Response(M)}else throw new lk(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(m=>new DOMParser().parseFromString(m,l));case"json":return f.json();default:if(l==="")return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,_=new TextDecoder(v);return f.arrayBuffer().then(b=>_.decode(b))}}}).then(f=>{Jh.add(t,f);const m=mh[t];delete mh[t];for(let g=0,v=m.length;g<v;g++){const _=m[g];_.onLoad&&_.onLoad(f)}}).catch(f=>{const m=mh[t];if(m===void 0)throw this.manager.itemError(t),f;delete mh[t];for(let g=0,v=m.length;g<v;g++){const _=m[g];_.onError&&_.onError(f)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class ck extends la{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new jo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(u){s?s(u):console.error(u),r.manager.itemError(t)}},n,s)}parse(t){const e=[];for(let n=0;n<t.length;n++){const s=Xg.parse(t[n]);e.push(s)}return e}}class uk extends la{constructor(t){super(t)}load(t,e,n,s){const r=this,a=[],l=new oM,u=new jo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(r.withCredentials);let f=0;function m(g){u.load(t[g],function(v){const _=r.parse(v,!0);a[g]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},f+=1,f===6&&(_.mipmapCount===1&&(l.minFilter=Ni),l.image=a,l.format=_.format,l.needsUpdate=!0,e&&e(l))},n,s)}if(Array.isArray(t))for(let g=0,v=t.length;g<v;++g)m(g);else u.load(t,function(g){const v=r.parse(g,!0);if(v.isCubemap){const _=v.mipmaps.length/v.mipmapCount;for(let b=0;b<_;b++){a[b]={mipmaps:[]};for(let C=0;C<v.mipmapCount;C++)a[b].mipmaps.push(v.mipmaps[b*v.mipmapCount+C]),a[b].format=v.format,a[b].width=v.width,a[b].height=v.height}l.image=a}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=Ni),l.format=v.format,l.needsUpdate=!0,e&&e(l)},n,s);return l}}class aA extends la{constructor(t){super(t)}load(t,e,n,s){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=Jh.get(t);if(a!==void 0)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;const l=eA("img");function u(){m(),Jh.add(t,this),e&&e(this),r.manager.itemEnd(t)}function f(g){m(),s&&s(g),r.manager.itemError(t),r.manager.itemEnd(t)}function m(){l.removeEventListener("load",u,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",f,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),r.manager.itemStart(t),l.src=t,l}}class hk extends la{constructor(t){super(t)}load(t,e,n,s){const r=new Lx;r.colorSpace=Kn;const a=new aA(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function u(f){a.load(t[f],function(m){r.images[f]=m,l++,l===6&&(r.needsUpdate=!0,e&&e(r))},void 0,s)}for(let f=0;f<t.length;++f)u(f);return r}}class fk extends la{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new Fu,l=new jo(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(r.withCredentials),l.load(t,function(u){let f;try{f=r.parse(u)}catch(m){if(s!==void 0)s(m);else{console.error(m);return}}f.image!==void 0?a.image=f.image:f.data!==void 0&&(a.image.width=f.width,a.image.height=f.height,a.image.data=f.data),a.wrapS=f.wrapS!==void 0?f.wrapS:zo,a.wrapT=f.wrapT!==void 0?f.wrapT:zo,a.magFilter=f.magFilter!==void 0?f.magFilter:Ni,a.minFilter=f.minFilter!==void 0?f.minFilter:Ni,a.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(a.colorSpace=f.colorSpace),f.flipY!==void 0&&(a.flipY=f.flipY),f.format!==void 0&&(a.format=f.format),f.type!==void 0&&(a.type=f.type),f.mipmaps!==void 0&&(a.mipmaps=f.mipmaps,a.minFilter=Cl),f.mipmapCount===1&&(a.minFilter=Ni),f.generateMipmaps!==void 0&&(a.generateMipmaps=f.generateMipmaps),a.needsUpdate=!0,e&&e(a,f)},n,s),a}}class hO extends la{constructor(t){super(t)}load(t,e,n,s){const r=new wi,a=new aA(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(l){r.image=l,r.needsUpdate=!0,e!==void 0&&e(r)},n,s),r}}let fp=class extends Ln{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new oe(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}};class fO extends fp{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ln.DEFAULT_UP),this.updateMatrix(),this.groundColor=new oe(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const y8=new Ne,G6=new et,k6=new et;class t7{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Pt(512,512),this.mapType=Ws,this.map=null,this.mapPass=null,this.matrix=new Ne,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new My,this._frameExtents=new Pt(1,1),this._viewportCount=1,this._viewports=[new On(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;G6.setFromMatrixPosition(t.matrixWorld),e.position.copy(G6),k6.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(k6),e.updateMatrixWorld(),y8.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(y8),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(y8)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class dk extends t7{constructor(){super(new Rs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=py*2*t.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;(n!==e.fov||s!==e.aspect||r!==e.far)&&(e.fov=n,e.aspect=s,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class e7 extends fp{constructor(t,e,n=0,s=Math.PI/3,r=0,a=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ln.DEFAULT_UP),this.updateMatrix(),this.target=new Ln,this.distance=n,this.angle=s,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new dk}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const V6=new Ne,i_=new et,_8=new et;class pk extends t7{constructor(){super(new Rs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Pt(4,2),this._viewportCount=6,this._viewports=[new On(2,1,1,1),new On(0,1,1,1),new On(3,1,1,1),new On(1,1,1,1),new On(3,0,1,1),new On(1,0,1,1)],this._cubeDirections=[new et(1,0,0),new et(-1,0,0),new et(0,0,1),new et(0,0,-1),new et(0,1,0),new et(0,-1,0)],this._cubeUps=[new et(0,1,0),new et(0,1,0),new et(0,1,0),new et(0,1,0),new et(0,0,1),new et(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,s=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),i_.setFromMatrixPosition(t.matrixWorld),n.position.copy(i_),_8.copy(n.position),_8.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(_8),n.updateMatrixWorld(),s.makeTranslation(-i_.x,-i_.y,-i_.z),V6.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(V6)}}class n7 extends fp{constructor(t,e,n=0,s=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new pk}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class wy extends Rx{constructor(t=-1,e=1,n=1,s=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=s,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,s,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-t,a=n+t,l=s+e,u=s-e;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=f*this.view.offsetX,a=r+f*this.view.width,l-=m*this.view.offsetY,u=l-m*this.view.height}this.projectionMatrix.makeOrthographic(r,a,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class mk extends t7{constructor(){super(new wy(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class i7 extends fp{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ln.DEFAULT_UP),this.updateMatrix(),this.target=new Ln,this.shadow=new mk}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class dO extends fp{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class pO extends fp{constructor(t,e,n=10,s=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class mO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new et)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,s=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*s),e.addScaledVector(a[2],.488603*r),e.addScaledVector(a[3],.488603*n),e.addScaledVector(a[4],1.092548*(n*s)),e.addScaledVector(a[5],1.092548*(s*r)),e.addScaledVector(a[6],.315392*(3*r*r-1)),e.addScaledVector(a[7],1.092548*(n*r)),e.addScaledVector(a[8],.546274*(n*n-s*s)),e}getIrradianceAt(t,e){const n=t.x,s=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],2*.511664*s),e.addScaledVector(a[2],2*.511664*r),e.addScaledVector(a[3],2*.511664*n),e.addScaledVector(a[4],2*.429043*n*s),e.addScaledVector(a[5],2*.429043*s*r),e.addScaledVector(a[6],.743125*r*r-.247708),e.addScaledVector(a[7],2*.429043*n*r),e.addScaledVector(a[8],.429043*(n*n-s*s)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(t,e+s*3);return this}toArray(t=[],e=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(t,e+s*3);return t}static getBasisAt(t,e){const n=t.x,s=t.y,r=t.z;e[0]=.282095,e[1]=.488603*s,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*s,e[5]=1.092548*s*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-s*s)}}class gO extends fp{constructor(t=new mO,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class xM extends la{constructor(t){super(t),this.textures={}}load(t,e,n,s){const r=this,a=new jo(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(u){s?s(u):console.error(u),r.manager.itemError(t)}},n,s)}parse(t){const e=this.textures;function n(r){return e[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),e[r]}const s=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(s.uuid=t.uuid),t.name!==void 0&&(s.name=t.name),t.color!==void 0&&s.color!==void 0&&s.color.setHex(t.color),t.roughness!==void 0&&(s.roughness=t.roughness),t.metalness!==void 0&&(s.metalness=t.metalness),t.sheen!==void 0&&(s.sheen=t.sheen),t.sheenColor!==void 0&&(s.sheenColor=new oe().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(s.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(t.emissive),t.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(t.specular),t.specularIntensity!==void 0&&(s.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(s.shininess=t.shininess),t.clearcoat!==void 0&&(s.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(s.dispersion=t.dispersion),t.iridescence!==void 0&&(s.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(s.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(s.transmission=t.transmission),t.thickness!==void 0&&(s.thickness=t.thickness),t.attenuationDistance!==void 0&&(s.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(s.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(s.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(s.fog=t.fog),t.flatShading!==void 0&&(s.flatShading=t.flatShading),t.blending!==void 0&&(s.blending=t.blending),t.combine!==void 0&&(s.combine=t.combine),t.side!==void 0&&(s.side=t.side),t.shadowSide!==void 0&&(s.shadowSide=t.shadowSide),t.opacity!==void 0&&(s.opacity=t.opacity),t.transparent!==void 0&&(s.transparent=t.transparent),t.alphaTest!==void 0&&(s.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(s.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(s.depthFunc=t.depthFunc),t.depthTest!==void 0&&(s.depthTest=t.depthTest),t.depthWrite!==void 0&&(s.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(s.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(s.blendSrc=t.blendSrc),t.blendDst!==void 0&&(s.blendDst=t.blendDst),t.blendEquation!==void 0&&(s.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(s.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(s.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(s.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(s.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(s.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(s.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(s.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(s.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(s.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(s.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(s.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(s.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(s.rotation=t.rotation),t.linewidth!==void 0&&(s.linewidth=t.linewidth),t.dashSize!==void 0&&(s.dashSize=t.dashSize),t.gapSize!==void 0&&(s.gapSize=t.gapSize),t.scale!==void 0&&(s.scale=t.scale),t.polygonOffset!==void 0&&(s.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(s.dithering=t.dithering),t.alphaToCoverage!==void 0&&(s.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(s.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(s.visible=t.visible),t.toneMapped!==void 0&&(s.toneMapped=t.toneMapped),t.userData!==void 0&&(s.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?s.vertexColors=t.vertexColors>0:s.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const r in t.uniforms){const a=t.uniforms[r];switch(s.uniforms[r]={},a.type){case"t":s.uniforms[r].value=n(a.value);break;case"c":s.uniforms[r].value=new oe().setHex(a.value);break;case"v2":s.uniforms[r].value=new Pt().fromArray(a.value);break;case"v3":s.uniforms[r].value=new et().fromArray(a.value);break;case"v4":s.uniforms[r].value=new On().fromArray(a.value);break;case"m3":s.uniforms[r].value=new on().fromArray(a.value);break;case"m4":s.uniforms[r].value=new Ne().fromArray(a.value);break;default:s.uniforms[r].value=a.value}}if(t.defines!==void 0&&(s.defines=t.defines),t.vertexShader!==void 0&&(s.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(s.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(s.glslVersion=t.glslVersion),t.extensions!==void 0)for(const r in t.extensions)s.extensions[r]=t.extensions[r];if(t.lights!==void 0&&(s.lights=t.lights),t.clipping!==void 0&&(s.clipping=t.clipping),t.size!==void 0&&(s.size=t.size),t.sizeAttenuation!==void 0&&(s.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(s.map=n(t.map)),t.matcap!==void 0&&(s.matcap=n(t.matcap)),t.alphaMap!==void 0&&(s.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(s.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(s.bumpScale=t.bumpScale),t.normalMap!==void 0&&(s.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(s.normalMapType=t.normalMapType),t.normalScale!==void 0){let r=t.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new Pt().fromArray(r)}return t.displacementMap!==void 0&&(s.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(s.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(s.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(s.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(s.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(s.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(s.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(s.specularMap=n(t.specularMap)),t.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(t.specularIntensityMap)),t.specularColorMap!==void 0&&(s.specularColorMap=n(t.specularColorMap)),t.envMap!==void 0&&(s.envMap=n(t.envMap)),t.envMapRotation!==void 0&&s.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(s.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(s.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(s.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(s.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(s.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(s.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(s.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(s.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(s.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Pt().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(s.iridescenceMap=n(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(s.transmissionMap=n(t.transmissionMap)),t.thicknessMap!==void 0&&(s.thicknessMap=n(t.thicknessMap)),t.anisotropyMap!==void 0&&(s.anisotropyMap=n(t.anisotropyMap)),t.sheenColorMap!==void 0&&(s.sheenColorMap=n(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(t.sheenRoughnessMap)),s}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return xM.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:$B,SpriteMaterial:Uw,RawShaderMaterial:tO,ShaderMaterial:Ks,PointsMaterial:aM,MeshPhysicalMaterial:Bl,MeshStandardMaterial:Fx,MeshPhongMaterial:eO,MeshToonMaterial:nO,MeshNormalMaterial:qw,MeshLambertMaterial:iO,MeshDepthMaterial:Yw,MeshDistanceMaterial:Ww,MeshBasicMaterial:Go,MeshMatcapMaterial:sO,LineDashedMaterial:rO,LineBasicMaterial:oa,Material:gs};return new e[t]}}class Wd{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class vO extends $e{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class yO extends la{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new jo(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(u){s?s(u):console.error(u),r.manager.itemError(t)}},n,s)}parse(t){const e={},n={};function s(_,b){if(e[b]!==void 0)return e[b];const M=_.interleavedBuffers[b],S=r(_,M.buffer),R=Y1(M.type,S),D=new Dx(R,M.stride);return D.uuid=M.uuid,e[b]=D,D}function r(_,b){if(n[b]!==void 0)return n[b];const M=_.arrayBuffers[b],S=new Uint32Array(M).buffer;return n[b]=S,S}const a=t.isInstancedBufferGeometry?new vO:new $e,l=t.data.index;if(l!==void 0){const _=Y1(l.type,l.array);a.setIndex(new zn(_,1))}const u=t.data.attributes;for(const _ in u){const b=u[_];let C;if(b.isInterleavedBufferAttribute){const M=s(t.data,b.data);C=new ep(M,b.itemSize,b.offset,b.normalized)}else{const M=Y1(b.type,b.array),S=b.isInstancedBufferAttribute?Vg:zn;C=new S(M,b.itemSize,b.normalized)}b.name!==void 0&&(C.name=b.name),b.usage!==void 0&&C.setUsage(b.usage),a.setAttribute(_,C)}const f=t.data.morphAttributes;if(f)for(const _ in f){const b=f[_],C=[];for(let M=0,S=b.length;M<S;M++){const R=b[M];let D;if(R.isInterleavedBufferAttribute){const B=s(t.data,R.data);D=new ep(B,R.itemSize,R.offset,R.normalized)}else{const B=Y1(R.type,R.array);D=new zn(B,R.itemSize,R.normalized)}R.name!==void 0&&(D.name=R.name),C.push(D)}a.morphAttributes[_]=C}t.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=t.data.groups||t.data.drawcalls||t.data.offsets;if(g!==void 0)for(let _=0,b=g.length;_!==b;++_){const C=g[_];a.addGroup(C.start,C.count,C.materialIndex)}const v=t.data.boundingSphere;if(v!==void 0){const _=new et;v.center!==void 0&&_.fromArray(v.center),a.boundingSphere=new mr(_,v.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}}class gk extends la{constructor(t){super(t)}load(t,e,n,s){const r=this,a=this.path===""?Wd.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const l=new jo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(u){let f=null;try{f=JSON.parse(u)}catch(g){s!==void 0&&s(g),console.error("THREE:ObjectLoader: Can't parse "+t+".",g.message);return}const m=f.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}r.parse(f,e)},n,s)}async loadAsync(t,e){const n=this,s=this.path===""?Wd.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const r=new jo(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const a=await r.loadAsync(t,e),l=JSON.parse(a),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await n.parseAsync(l)}parse(t,e){const n=this.parseAnimations(t.animations),s=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,s),a=this.parseImages(t.images,function(){e!==void 0&&e(f)}),l=this.parseTextures(t.textures,a),u=this.parseMaterials(t.materials,l),f=this.parseObject(t.object,r,u,l,n),m=this.parseSkeletons(t.skeletons,f);if(this.bindSkeletons(f,m),this.bindLightTargets(f),e!==void 0){let g=!1;for(const v in a)if(a[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&e(f)}return f}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),a=this.parseTextures(t.textures,r),l=this.parseMaterials(t.materials,a),u=this.parseObject(t.object,s,l,a,e),f=this.parseSkeletons(t.skeletons,u);return this.bindSkeletons(u,f),this.bindLightTargets(u),u}parseShapes(t){const e={};if(t!==void 0)for(let n=0,s=t.length;n<s;n++){const r=new Fg().fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},s={};if(e.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),t!==void 0)for(let r=0,a=t.length;r<a;r++){const l=new Bx().fromJSON(t[r],s);n[l.uuid]=l}return n}parseGeometries(t,e){const n={};if(t!==void 0){const s=new yO;for(let r=0,a=t.length;r<a;r++){let l;const u=t[r];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=s.parse(u);break;default:u.type in z6?l=z6[u.type].fromJSON(u,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),n[u.uuid]=l}}return n}parseMaterials(t,e){const n={},s={};if(t!==void 0){const r=new xM;r.setTextures(e);for(let a=0,l=t.length;a<l;a++){const u=t[a];n[u.uuid]===void 0&&(n[u.uuid]=r.parse(u)),s[u.uuid]=n[u.uuid]}}return s}parseAnimations(t){const e={};if(t!==void 0)for(let n=0;n<t.length;n++){const s=t[n],r=Xg.parse(s);e[r.uuid]=r}return e}parseImages(t,e){const n=this,s={};let r;function a(u){return n.manager.itemStart(u),r.load(u,function(){n.manager.itemEnd(u)},void 0,function(){n.manager.itemError(u),n.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const f=u,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;return a(m)}else return u.data?{data:Y1(u.type,u.data),width:u.width,height:u.height}:null}if(t!==void 0&&t.length>0){const u=new $w(e);r=new aA(u),r.setCrossOrigin(this.crossOrigin);for(let f=0,m=t.length;f<m;f++){const g=t[f],v=g.url;if(Array.isArray(v)){const _=[];for(let b=0,C=v.length;b<C;b++){const M=v[b],S=l(M);S!==null&&(S instanceof HTMLImageElement?_.push(S):_.push(new Fu(S.data,S.width,S.height)))}s[g.uuid]=new Xd(_)}else{const _=l(g.url);s[g.uuid]=new Xd(_)}}}return s}async parseImagesAsync(t){const e=this,n={};let s;async function r(a){if(typeof a=="string"){const l=a,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:e.resourcePath+l;return await s.loadAsync(u)}else return a.data?{data:Y1(a.type,a.data),width:a.width,height:a.height}:null}if(t!==void 0&&t.length>0){s=new aA(this.manager),s.setCrossOrigin(this.crossOrigin);for(let a=0,l=t.length;a<l;a++){const u=t[a],f=u.url;if(Array.isArray(f)){const m=[];for(let g=0,v=f.length;g<v;g++){const _=f[g],b=await r(_);b!==null&&(b instanceof HTMLImageElement?m.push(b):m.push(new Fu(b.data,b.width,b.height)))}n[u.uuid]=new Xd(m)}else{const m=await r(u.url);n[u.uuid]=new Xd(m)}}}return n}parseTextures(t,e){function n(r,a){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),a[r])}const s={};if(t!==void 0)for(let r=0,a=t.length;r<a;r++){const l=t[r];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),e[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=e[l.image],f=u.data;let m;Array.isArray(f)?(m=new Lx,f.length===6&&(m.needsUpdate=!0)):(f&&f.data?m=new Fu:m=new wi,f&&(m.needsUpdate=!0)),m.source=u,m.uuid=l.uuid,l.name!==void 0&&(m.name=l.name),l.mapping!==void 0&&(m.mapping=n(l.mapping,vk)),l.channel!==void 0&&(m.channel=l.channel),l.offset!==void 0&&m.offset.fromArray(l.offset),l.repeat!==void 0&&m.repeat.fromArray(l.repeat),l.center!==void 0&&m.center.fromArray(l.center),l.rotation!==void 0&&(m.rotation=l.rotation),l.wrap!==void 0&&(m.wrapS=n(l.wrap[0],Q6),m.wrapT=n(l.wrap[1],Q6)),l.format!==void 0&&(m.format=l.format),l.internalFormat!==void 0&&(m.internalFormat=l.internalFormat),l.type!==void 0&&(m.type=l.type),l.colorSpace!==void 0&&(m.colorSpace=l.colorSpace),l.minFilter!==void 0&&(m.minFilter=n(l.minFilter,j6)),l.magFilter!==void 0&&(m.magFilter=n(l.magFilter,j6)),l.anisotropy!==void 0&&(m.anisotropy=l.anisotropy),l.flipY!==void 0&&(m.flipY=l.flipY),l.generateMipmaps!==void 0&&(m.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(m.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(m.compareFunction=l.compareFunction),l.userData!==void 0&&(m.userData=l.userData),s[l.uuid]=m}return s}parseObject(t,e,n,s,r){let a;function l(v){return e[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),e[v]}function u(v){if(v!==void 0){if(Array.isArray(v)){const _=[];for(let b=0,C=v.length;b<C;b++){const M=v[b];n[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),_.push(n[M])}return _}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function f(v){return s[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),s[v]}let m,g;switch(t.type){case"Scene":a=new nA,t.background!==void 0&&(Number.isInteger(t.background)?a.background=new oe(t.background):a.background=f(t.background)),t.environment!==void 0&&(a.environment=f(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?a.fog=new iM(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(a.fog=new nM(t.fog.color,t.fog.density)),t.fog.name!==""&&(a.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(a.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(a.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&a.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":a=new Rs(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(a.focus=t.focus),t.zoom!==void 0&&(a.zoom=t.zoom),t.filmGauge!==void 0&&(a.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(a.filmOffset=t.filmOffset),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new wy(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(a.zoom=t.zoom),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new dO(t.color,t.intensity);break;case"DirectionalLight":a=new i7(t.color,t.intensity),a.target=t.target||"";break;case"PointLight":a=new n7(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new pO(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new e7(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),a.target=t.target||"";break;case"HemisphereLight":a=new fO(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=new gO().fromJSON(t);break;case"SkinnedMesh":m=l(t.geometry),g=u(t.material),a=new Pw(m,g),t.bindMode!==void 0&&(a.bindMode=t.bindMode),t.bindMatrix!==void 0&&a.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(a.skeleton=t.skeleton);break;case"Mesh":m=l(t.geometry),g=u(t.material),a=new as(m,g);break;case"InstancedMesh":m=l(t.geometry),g=u(t.material);const v=t.count,_=t.instanceMatrix,b=t.instanceColor;a=new Fw(m,g,v),a.instanceMatrix=new Vg(new Float32Array(_.array),16),b!==void 0&&(a.instanceColor=new Vg(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":m=l(t.geometry),g=u(t.material),a=new zB(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,g),a.geometry=m,a.perObjectFrustumCulled=t.perObjectFrustumCulled,a.sortObjects=t.sortObjects,a._drawRanges=t.drawRanges,a._reservedRanges=t.reservedRanges,a._geometryInfo=t.geometryInfo.map(C=>{let M=null,S=null;return C.boundingBox!==void 0&&(M=new Nr,M.min.fromArray(C.boundingBox.min),M.max.fromArray(C.boundingBox.max)),C.boundingSphere!==void 0&&(S=new mr,S.radius=C.boundingSphere.radius,S.center.fromArray(C.boundingSphere.center)),{...C,boundingBox:M,boundingSphere:S}}),a._instanceInfo=t.instanceInfo,a._availableInstanceIds=t._availableInstanceIds,a._availableGeometryIds=t._availableGeometryIds,a._nextIndexStart=t.nextIndexStart,a._nextVertexStart=t.nextVertexStart,a._geometryCount=t.geometryCount,a._maxInstanceCount=t.maxInstanceCount,a._maxVertexCount=t.maxVertexCount,a._maxIndexCount=t.maxIndexCount,a._geometryInitialized=t.geometryInitialized,a._matricesTexture=f(t.matricesTexture.uuid),a._indirectTexture=f(t.indirectTexture.uuid),t.colorsTexture!==void 0&&(a._colorsTexture=f(t.colorsTexture.uuid)),t.boundingSphere!==void 0&&(a.boundingSphere=new mr,a.boundingSphere.center.fromArray(t.boundingSphere.center),a.boundingSphere.radius=t.boundingSphere.radius),t.boundingBox!==void 0&&(a.boundingBox=new Nr,a.boundingBox.min.fromArray(t.boundingBox.min),a.boundingBox.max.fromArray(t.boundingBox.max));break;case"LOD":a=new HB;break;case"Line":a=new af(l(t.geometry),u(t.material));break;case"LineLoop":a=new Hw(l(t.geometry),u(t.material));break;case"LineSegments":a=new Bc(l(t.geometry),u(t.material));break;case"PointCloud":case"Points":a=new zw(l(t.geometry),u(t.material));break;case"Sprite":a=new FB(u(t.material));break;case"Group":a=new Kh;break;case"Bone":a=new sM;break;default:a=new Ln}if(a.uuid=t.uuid,t.name!==void 0&&(a.name=t.name),t.matrix!==void 0?(a.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(t.position!==void 0&&a.position.fromArray(t.position),t.rotation!==void 0&&a.rotation.fromArray(t.rotation),t.quaternion!==void 0&&a.quaternion.fromArray(t.quaternion),t.scale!==void 0&&a.scale.fromArray(t.scale)),t.up!==void 0&&a.up.fromArray(t.up),t.castShadow!==void 0&&(a.castShadow=t.castShadow),t.receiveShadow!==void 0&&(a.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(a.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(a.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(a.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(a.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(a.visible=t.visible),t.frustumCulled!==void 0&&(a.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(a.renderOrder=t.renderOrder),t.userData!==void 0&&(a.userData=t.userData),t.layers!==void 0&&(a.layers.mask=t.layers),t.children!==void 0){const v=t.children;for(let _=0;_<v.length;_++)a.add(this.parseObject(v[_],e,n,s,r))}if(t.animations!==void 0){const v=t.animations;for(let _=0;_<v.length;_++){const b=v[_];a.animations.push(r[b])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(a.autoUpdate=t.autoUpdate);const v=t.levels;for(let _=0;_<v.length;_++){const b=v[_],C=a.getObjectByProperty("uuid",b.object);C!==void 0&&a.addLevel(C,b.distance,b.hysteresis)}}return a}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=e[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const n=e.target,s=t.getObjectByProperty("uuid",n);s!==void 0?e.target=s:e.target=new Ln}})}}const vk={UVMapping:jE,CubeReflectionMapping:rf,CubeRefractionMapping:$d,EquirectangularReflectionMapping:Y_,EquirectangularRefractionMapping:W_,CubeUVReflectionMapping:Sy},Q6={RepeatWrapping:tp,ClampToEdgeWrapping:zo,MirroredRepeatWrapping:cy},j6={NearestFilter:os,NearestMipmapNearestFilter:XE,NearestMipmapLinearFilter:Om,LinearFilter:Ni,LinearMipmapNearestFilter:Z1,LinearMipmapLinearFilter:Cl};class _O extends la{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=Jh.get(t);if(a!==void 0){if(r.manager.itemStart(t),a.then){a.then(f=>{e&&e(f),r.manager.itemEnd(t)}).catch(f=>{s&&s(f)});return}return setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const u=fetch(t,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(f){return Jh.add(t,f),e&&e(f),r.manager.itemEnd(t),f}).catch(function(f){s&&s(f),Jh.remove(t),r.manager.itemError(t),r.manager.itemEnd(t)});Jh.add(t,u),r.manager.itemStart(t)}}let n4,s7=class{static getContext(){return n4===void 0&&(n4=new(window.AudioContext||window.webkitAudioContext)),n4}static setContext(t){n4=t}};class yk extends la{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new jo(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(u){try{const f=u.slice(0);s7.getContext().decodeAudioData(f,function(g){e(g)}).catch(l)}catch(f){l(f)}},n,s);function l(u){s?s(u):console.error(u),r.manager.itemError(t)}}}const X6=new Ne,q6=new Ne,dm=new Ne;class _k{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Rs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Rs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,dm.copy(t.projectionMatrix);const s=e.eyeSep/2,r=s*e.near/e.focus,a=e.near*Math.tan(Pg*e.fov*.5)/e.zoom;let l,u;q6.elements[12]=-s,X6.elements[12]=s,l=-a*e.aspect+r,u=a*e.aspect+r,dm.elements[0]=2*e.near/(u-l),dm.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(dm),l=-a*e.aspect-r,u=a*e.aspect-r,dm.elements[0]=2*e.near/(u-l),dm.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(dm)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(q6),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(X6)}}class AO extends Rs{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}let r7=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Y6(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Y6();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};function Y6(){return performance.now()}const pm=new et,W6=new Or,Ak=new et,mm=new et;class xk extends Ln{constructor(){super(),this.type="AudioListener",this.context=s7.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new r7}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(pm,W6,Ak),mm.set(0,0,-1).applyQuaternion(W6),e.positionX){const s=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(pm.x,s),e.positionY.linearRampToValueAtTime(pm.y,s),e.positionZ.linearRampToValueAtTime(pm.z,s),e.forwardX.linearRampToValueAtTime(mm.x,s),e.forwardY.linearRampToValueAtTime(mm.y,s),e.forwardZ.linearRampToValueAtTime(mm.z,s),e.upX.linearRampToValueAtTime(n.x,s),e.upY.linearRampToValueAtTime(n.y,s),e.upZ.linearRampToValueAtTime(n.z,s)}else e.setPosition(pm.x,pm.y,pm.z),e.setOrientation(mm.x,mm.y,mm.z,n.x,n.y,n.z)}}class xO extends Ln{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const gm=new et,K6=new Or,bk=new et,vm=new et;class Sk extends xO{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(gm,K6,bk),vm.set(0,0,1).applyQuaternion(K6);const e=this.panner;if(e.positionX){const n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(gm.x,n),e.positionY.linearRampToValueAtTime(gm.y,n),e.positionZ.linearRampToValueAtTime(gm.z,n),e.orientationX.linearRampToValueAtTime(vm.x,n),e.orientationY.linearRampToValueAtTime(vm.y,n),e.orientationZ.linearRampToValueAtTime(vm.z,n)}else e.setPosition(gm.x,gm.y,gm.z),e.setOrientation(vm.x,vm.y,vm.z)}}class Ek{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class bO{constructor(t,e,n){this.binding=t,this.valueSize=n;let s,r,a;switch(e){case"quaternion":s=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,s=this.valueSize,r=t*s+s;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==s;++l)n[r+l]=n[l];a=e}else{a+=e;const l=e/a;this._mixBufferRegion(n,r,0,l,s)}this.cumulativeWeight=a}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,s,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,s=t*e+e,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const u=e*this._origIndex;this._mixBufferRegion(n,s,u,1-r,e)}a>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*e,1,e);for(let u=e,f=e+e;u!==f;++u)if(n[u]!==n[u+e]){l.setValue(n,s);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,s=n*this._origIndex;t.getValue(e,s);for(let r=n,a=s;r!==a;++r)e[r]=e[s+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,s,r){if(s>=.5)for(let a=0;a!==r;++a)t[e+a]=t[n+a]}_slerp(t,e,n,s){Or.slerpFlat(t,e,t,e,t,n,s)}_slerpAdditive(t,e,n,s,r){const a=this._workIndex*r;Or.multiplyQuaternionsFlat(t,a,t,e,t,n),Or.slerpFlat(t,e,t,e,t,a,s)}_lerp(t,e,n,s,r){const a=1-s;for(let l=0;l!==r;++l){const u=e+l;t[u]=t[u]*a+t[n+l]*s}}_lerpAdditive(t,e,n,s,r){for(let a=0;a!==r;++a){const l=e+a;t[l]=t[l]+t[n+a]*s}}}const a7="\\[\\]\\.:\\/",Mk=new RegExp("["+a7+"]","g"),o7="[^"+a7+"]",Tk="[^"+a7.replace("\\.","")+"]",Ck=/((?:WC+[\/:])*)/.source.replace("WC",o7),wk=/(WCOD+)?/.source.replace("WCOD",Tk),Rk=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",o7),Lk=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",o7),Dk=new RegExp("^"+Ck+wk+Rk+Lk+"$"),Bk=["material","materials","bones","map"];class Ok{constructor(t,e,n){const s=n||Qn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,s)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=n.length;s!==r;++s)n[s].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class Qn{constructor(t,e,n){this.path=e,this.parsedPath=n||Qn.parseTrackName(e),this.node=Qn.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Qn.Composite(t,e,n):new Qn(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Mk,"")}static parseTrackName(t){const e=Dk.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=n.nodeName.substring(s+1);Bk.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(r){for(let a=0;a<r.length;a++){const l=r[a];if(l.name===e||l.uuid===e)return l;const u=n(l.children);if(u)return u}return null},s=n(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)t[e++]=n[s]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,s=e.propertyName;let r=e.propertyIndex;if(t||(t=Qn.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let f=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let m=0;m<t.length;m++)if(t[m].name===f){f=m;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(f!==void 0){if(t[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[f]}}const a=t[s];if(a===void 0){const f=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+s+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?l=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[r]!==void 0&&(r=t.morphTargetDictionary[r])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Qn.Composite=Ok;Qn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Qn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Qn.prototype.GetterByBindingType=[Qn.prototype._getValue_direct,Qn.prototype._getValue_array,Qn.prototype._getValue_arrayElement,Qn.prototype._getValue_toArray];Qn.prototype.SetterByBindingTypeAndVersioning=[[Qn.prototype._setValue_direct,Qn.prototype._setValue_direct_setNeedsUpdate,Qn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_array,Qn.prototype._setValue_array_setNeedsUpdate,Qn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_arrayElement,Qn.prototype._setValue_arrayElement_setNeedsUpdate,Qn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_fromArray,Qn.prototype._setValue_fromArray_setNeedsUpdate,Qn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Nk{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ko(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,s=arguments.length;n!==s;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,s=this._parsedPaths,r=this._bindings,a=r.length;let l,u=t.length,f=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const v=arguments[m],_=v.uuid;let b=e[_];if(b===void 0){b=u++,e[_]=b,t.push(v);for(let C=0,M=a;C!==M;++C)r[C].push(new Qn(v,n[C],s[C]))}else if(b<f){l=t[b];const C=--f,M=t[C];e[M.uuid]=b,t[b]=M,e[_]=C,t[C]=v;for(let S=0,R=a;S!==R;++S){const D=r[S],B=D[C];let N=D[b];D[b]=B,N===void 0&&(N=new Qn(v,n[S],s[S])),D[C]=N}}else t[b]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],f=u.uuid,m=e[f];if(m!==void 0&&m>=r){const g=r++,v=t[g];e[v.uuid]=m,t[m]=v,e[f]=g,t[g]=u;for(let _=0,b=s;_!==b;++_){const C=n[_],M=C[g],S=C[m];C[m]=M,C[g]=S}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_,a=t.length;for(let l=0,u=arguments.length;l!==u;++l){const f=arguments[l],m=f.uuid,g=e[m];if(g!==void 0)if(delete e[m],g<r){const v=--r,_=t[v],b=--a,C=t[b];e[_.uuid]=g,t[g]=_,e[C.uuid]=v,t[v]=C,t.pop();for(let M=0,S=s;M!==S;++M){const R=n[M],D=R[v],B=R[b];R[g]=D,R[v]=B,R.pop()}}else{const v=--a,_=t[v];v>0&&(e[_.uuid]=g),t[g]=_,t.pop();for(let b=0,C=s;b!==C;++b){const M=n[b];M[g]=M[v],M.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let s=n[t];const r=this._bindings;if(s!==void 0)return r[s];const a=this._paths,l=this._parsedPaths,u=this._objects,f=u.length,m=this.nCachedObjects_,g=new Array(f);s=r.length,n[t]=s,a.push(t),l.push(e),r.push(g);for(let v=m,_=u.length;v!==_;++v){const b=u[v];g[v]=new Qn(b,t,e)}return g}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const s=this._paths,r=this._parsedPaths,a=this._bindings,l=a.length-1,u=a[l],f=t[l];e[f]=n,a[n]=u,a.pop(),r[n]=r[l],r.pop(),s[n]=s[l],s.pop()}}}class SO{constructor(t,e,n=null,s=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=s;const r=e.tracks,a=r.length,l=new Array(a),u={endingStart:Nm,endingEnd:Nm};for(let f=0;f!==a;++f){const m=r[f].createInterpolant(null);l[f]=m,m.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vB,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n=!1){if(t.fadeOut(e),this.fadeIn(e),n===!0){const s=this._clip.duration,r=t._clip.duration,a=r/s,l=s/r;t.warp(1,a,e),this.warp(l,1,e)}return this}crossFadeTo(t,e,n=!1){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const s=this._mixer,r=s.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=s._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,f=l.sampleValues;return u[0]=r,u[1]=r+n,f[0]=t/a,f[1]=e/a,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,s){if(!this.enabled){this._updateWeight(t);return}const r=this._startTime;if(r!==null){const u=(t-r)*n;u<0||n===0?e=0:(this._startTime=null,e=n*u)}e*=this._updateTimeScale(t);const a=this._updateTime(e),l=this._updateWeight(t);if(l>0){const u=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case Lw:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(a),f[m].accumulateAdditive(l);break;case $E:default:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(a),f[m].accumulate(s,l)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(t)[0];e*=s,t>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(t)[0];e*=s,t>n.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let s=this.time+t,r=this._loopCount;const a=n===yB;if(t===0)return r===-1?s:a&&(r&1)===1?e-s:s;if(n===gB){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(s>=e)s=e;else if(s<0)s=0;else{this.time=s;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(r===-1&&(t>=0?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),s>=e||s<0){const l=Math.floor(s/e);s-=e*l,r+=Math.abs(l);const u=this.repetitions-r;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=t>0?e:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(u===1){const f=t<0;this._setEndings(f,!f,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=s;if(a&&(r&1)===1)return e-s}return s}_setEndings(t,e,n){const s=this._interpolantSettings;n?(s.endingStart=Im,s.endingEnd=Im):(t?s.endingStart=this.zeroSlopeAtStart?Im:Nm:s.endingStart=K_,e?s.endingEnd=this.zeroSlopeAtEnd?Im:Nm:s.endingEnd=K_)}_scheduleFading(t,e,n){const s=this._mixer,r=s.time;let a=this._weightInterpolant;a===null&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=r,u[0]=e,l[1]=r+t,u[1]=n,this}}const Ik=new Float32Array(1);class l7 extends Yo{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,s=t._clip.tracks,r=s.length,a=t._propertyBindings,l=t._interpolants,u=n.uuid,f=this._bindingsByRootAndName;let m=f[u];m===void 0&&(m={},f[u]=m);for(let g=0;g!==r;++g){const v=s[g],_=v.name;let b=m[_];if(b!==void 0)++b.referenceCount,a[g]=b;else{if(b=a[g],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,u,_));continue}const C=e&&e._propertyBindings[g].binding.parsedPath;b=new bO(Qn.create(n,_,C),v.ValueTypeName,v.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,u,_),a[g]=b}l[g].resultBuffer=b.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,s=t._clip.uuid,r=this._actionsByClip[s];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,s,n)}const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,n){const s=this._actions,r=this._actionsByClip;let a=r[e];if(a===void 0)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{const l=a.knownActions;t._byClipCacheIndex=l.length,l.push(t)}t._cacheIndex=s.length,s.push(t),a.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],s=t._cacheIndex;n._cacheIndex=s,e[s]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,a=this._actionsByClip,l=a[r],u=l.knownActions,f=u[u.length-1],m=t._byClipCacheIndex;f._byClipCacheIndex=m,u[m]=f,u.pop(),t._byClipCacheIndex=null;const g=l.actionByRoot,v=(t._localRoot||this._root).uuid;delete g[v],u.length===0&&delete a[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,s=this._nActiveActions++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,s=--this._nActiveActions,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const s=this._bindingsByRootAndName,r=this._bindings;let a=s[e];a===void 0&&(a={},s[e]=a),a[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,s=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,l=a[s],u=e[e.length-1],f=t._cacheIndex;u._cacheIndex=f,e[f]=u,e.pop(),delete l[r],Object.keys(l).length===0&&delete a[s]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,s=this._nActiveBindings++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,s=--this._nActiveBindings,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new Jw(new Float32Array(2),new Float32Array(2),1,Ik),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,s=--this._nActiveControlInterpolants,r=e[s];t.__cacheIndex=s,e[s]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const s=e||this._root,r=s.uuid;let a=typeof t=="string"?Xg.findByName(s,t):t;const l=a!==null?a.uuid:t,u=this._actionsByClip[l];let f=null;if(n===void 0&&(a!==null?n=a.blendMode:n=$E),u!==void 0){const g=u.actionByRoot[r];if(g!==void 0&&g.blendMode===n)return g;f=u.knownActions[0],a===null&&(a=f._clip)}if(a===null)return null;const m=new SO(this,a,e,n);return this._bindAction(m,f),this._addInactiveAction(m,l,r),m}existingAction(t,e){const n=e||this._root,s=n.uuid,r=typeof t=="string"?Xg.findByName(n,t):t,a=r?r.uuid:t,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[s]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,s=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1;for(let f=0;f!==n;++f)e[f]._update(s,t,r,a);const l=this._bindings,u=this._nActiveBindings;for(let f=0;f!==u;++f)l[f].apply(a);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,s=this._actionsByClip,r=s[n];if(r!==void 0){const a=r.knownActions;for(let l=0,u=a.length;l!==u;++l){const f=a[l];this._deactivateAction(f);const m=f._cacheIndex,g=e[e.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,g._cacheIndex=m,e[m]=g,e.pop(),this._removeInactiveBindingsForAction(f)}delete s[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const a in n){const l=n[a].actionByRoot,u=l[e];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const s=this._bindingsByRootAndName,r=s[e];if(r!==void 0)for(const a in r){const l=r[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Uk extends tM{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new eM(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class Pk extends tM{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isRenderTargetArray=!0,this.depth=n,this.texture=new wx(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class xn{constructor(t){this.value=t}clone(){return new xn(this.value.clone===void 0?this.value:this.value.clone())}}let Fk=0;class Hk extends Yo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Fk++}),this.name="",this.usage=Z_,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,s=e.length;n<s;n++){const r=Array.isArray(e[n])?e[n]:[e[n]];for(let a=0;a<r.length;a++)this.uniforms.push(r[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class zk extends Dx{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class Gk{constructor(t,e,n,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const J6=new Ne;class EO{constructor(t,e,n=0,s=1/0){this.ray=new Ey(t,e),this.near=n,this.far=s,this.camera=null,this.layers=new my,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return J6.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(J6),this}intersectObject(t,e=!0,n=[]){return w5(t,this,n,e),n.sort(Z6),n}intersectObjects(t,e=!0,n=[]){for(let s=0,r=t.length;s<r;s++)w5(t[s],this,n,e);return n.sort(Z6),n}}function Z6(i,t){return i.distance-t.distance}function w5(i,t,e,n){let s=!0;if(i.layers.test(t.layers)&&i.raycast(t,e)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let a=0,l=r.length;a<l;a++)w5(r[a],t,e,!0)}}class kk{constructor(t=1,e=0,n=0){this.radius=t,this.phi=e,this.theta=n}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=nn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(nn(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Vk{constructor(t=1,e=0,n=0){this.radius=t,this.theta=e,this.y=n}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return new this.constructor().copy(this)}}class c7{constructor(t,e,n,s){c7.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let n=0;n<4;n++)this.elements[n]=t[n+e];return this}set(t,e,n,s){const r=this.elements;return r[0]=t,r[2]=e,r[1]=n,r[3]=s,this}}const $6=new Pt;class Qk{constructor(t=new Pt(1/0,1/0),e=new Pt(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=$6.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,$6).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const tL=new et,i4=new et;class jk{constructor(t=new et,e=new et){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){tL.subVectors(t,this.start),i4.subVectors(this.end,this.start);const n=i4.dot(i4);let r=i4.dot(tL)/n;return e&&(r=nn(r,0,1)),r}closestPointToPoint(t,e,n){const s=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(s).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const eL=new et;class Xk extends Ln{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new $e,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,u=32;a<u;a++,l++){const f=a/u*Math.PI*2,m=l/u*Math.PI*2;s.push(Math.cos(f),Math.sin(f),1,Math.cos(m),Math.sin(m),1)}n.setAttribute("position",new Me(s,3));const r=new oa({fog:!1,toneMapped:!1});this.cone=new Bc(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),eL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(eL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const cd=new et,s4=new Ne,A8=new Ne;class MO extends Bc{constructor(t){const e=TO(t),n=new $e,s=[],r=[],a=new oe(0,0,1),l=new oe(0,1,0);for(let f=0;f<e.length;f++){const m=e[f];m.parent&&m.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(a.r,a.g,a.b),r.push(l.r,l.g,l.b))}n.setAttribute("position",new Me(s,3)),n.setAttribute("color",new Me(r,3));const u=new oa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,s=n.getAttribute("position");A8.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<e.length;r++){const l=e[r];l.parent&&l.parent.isBone&&(s4.multiplyMatrices(A8,l.matrixWorld),cd.setFromMatrixPosition(s4),s.setXYZ(a,cd.x,cd.y,cd.z),s4.multiplyMatrices(A8,l.parent.matrixWorld),cd.setFromMatrixPosition(s4),s.setXYZ(a+1,cd.x,cd.y,cd.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function TO(i){const t=[];i.isBone===!0&&t.push(i);for(let e=0;e<i.children.length;e++)t.push(...TO(i.children[e]));return t}class qk extends as{constructor(t,e,n){const s=new Px(e,4,2),r=new Go({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Yk=new et,nL=new oe,iL=new oe;class Wk extends Ln{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new Ux(e);s.rotateY(Math.PI*.5),this.material=new Go({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),a=new Float32Array(r.count*3);s.setAttribute("color",new zn(a,3)),this.add(new as(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");nL.copy(this.light.color),iL.copy(this.light.groundColor);for(let n=0,s=e.count;n<s;n++){const r=n<s/2?nL:iL;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(Yk.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Kk extends Bc{constructor(t=10,e=10,n=4473924,s=8947848){n=new oe(n),s=new oe(s);const r=e/2,a=t/e,l=t/2,u=[],f=[];for(let v=0,_=0,b=-l;v<=e;v++,b+=a){u.push(-l,0,b,l,0,b),u.push(b,0,-l,b,0,l);const C=v===r?n:s;C.toArray(f,_),_+=3,C.toArray(f,_),_+=3,C.toArray(f,_),_+=3,C.toArray(f,_),_+=3}const m=new $e;m.setAttribute("position",new Me(u,3)),m.setAttribute("color",new Me(f,3));const g=new oa({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Jk extends Bc{constructor(t=10,e=16,n=8,s=64,r=4473924,a=8947848){r=new oe(r),a=new oe(a);const l=[],u=[];if(e>1)for(let g=0;g<e;g++){const v=g/e*(Math.PI*2),_=Math.sin(v)*t,b=Math.cos(v)*t;l.push(0,0,0),l.push(_,0,b);const C=g&1?r:a;u.push(C.r,C.g,C.b),u.push(C.r,C.g,C.b)}for(let g=0;g<n;g++){const v=g&1?r:a,_=t-t/n*g;for(let b=0;b<s;b++){let C=b/s*(Math.PI*2),M=Math.sin(C)*_,S=Math.cos(C)*_;l.push(M,0,S),u.push(v.r,v.g,v.b),C=(b+1)/s*(Math.PI*2),M=Math.sin(C)*_,S=Math.cos(C)*_,l.push(M,0,S),u.push(v.r,v.g,v.b)}}const f=new $e;f.setAttribute("position",new Me(l,3)),f.setAttribute("color",new Me(u,3));const m=new oa({vertexColors:!0,toneMapped:!1});super(f,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const sL=new et,r4=new et,rL=new et;class Zk extends Ln{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let s=new $e;s.setAttribute("position",new Me([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new oa({fog:!1,toneMapped:!1});this.lightPlane=new af(s,r),this.add(this.lightPlane),s=new $e,s.setAttribute("position",new Me([0,0,0,0,0,1],3)),this.targetLine=new af(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),sL.setFromMatrixPosition(this.light.matrixWorld),r4.setFromMatrixPosition(this.light.target.matrixWorld),rL.subVectors(r4,sL),this.lightPlane.lookAt(r4),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(r4),this.targetLine.scale.z=rL.length()}}const a4=new et,is=new Rx;class $k extends Bc{constructor(t){const e=new $e,n=new oa({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(b,C){u(b),u(C)}function u(b){s.push(0,0,0),r.push(0,0,0),a[b]===void 0&&(a[b]=[]),a[b].push(s.length/3-1)}e.setAttribute("position",new Me(s,3)),e.setAttribute("color",new Me(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const f=new oe(16755200),m=new oe(16711680),g=new oe(43775),v=new oe(16777215),_=new oe(3355443);this.setColors(f,m,g,v,_)}setColors(t,e,n,s,r){const l=this.geometry.getAttribute("color");l.setXYZ(0,t.r,t.g,t.b),l.setXYZ(1,t.r,t.g,t.b),l.setXYZ(2,t.r,t.g,t.b),l.setXYZ(3,t.r,t.g,t.b),l.setXYZ(4,t.r,t.g,t.b),l.setXYZ(5,t.r,t.g,t.b),l.setXYZ(6,t.r,t.g,t.b),l.setXYZ(7,t.r,t.g,t.b),l.setXYZ(8,t.r,t.g,t.b),l.setXYZ(9,t.r,t.g,t.b),l.setXYZ(10,t.r,t.g,t.b),l.setXYZ(11,t.r,t.g,t.b),l.setXYZ(12,t.r,t.g,t.b),l.setXYZ(13,t.r,t.g,t.b),l.setXYZ(14,t.r,t.g,t.b),l.setXYZ(15,t.r,t.g,t.b),l.setXYZ(16,t.r,t.g,t.b),l.setXYZ(17,t.r,t.g,t.b),l.setXYZ(18,t.r,t.g,t.b),l.setXYZ(19,t.r,t.g,t.b),l.setXYZ(20,t.r,t.g,t.b),l.setXYZ(21,t.r,t.g,t.b),l.setXYZ(22,t.r,t.g,t.b),l.setXYZ(23,t.r,t.g,t.b),l.setXYZ(24,e.r,e.g,e.b),l.setXYZ(25,e.r,e.g,e.b),l.setXYZ(26,e.r,e.g,e.b),l.setXYZ(27,e.r,e.g,e.b),l.setXYZ(28,e.r,e.g,e.b),l.setXYZ(29,e.r,e.g,e.b),l.setXYZ(30,e.r,e.g,e.b),l.setXYZ(31,e.r,e.g,e.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,r.r,r.g,r.b),l.setXYZ(41,r.r,r.g,r.b),l.setXYZ(42,r.r,r.g,r.b),l.setXYZ(43,r.r,r.g,r.b),l.setXYZ(44,r.r,r.g,r.b),l.setXYZ(45,r.r,r.g,r.b),l.setXYZ(46,r.r,r.g,r.b),l.setXYZ(47,r.r,r.g,r.b),l.setXYZ(48,r.r,r.g,r.b),l.setXYZ(49,r.r,r.g,r.b),l.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap,n=1,s=1;is.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===wl?-1:0;ps("c",e,t,is,0,0,r),ps("t",e,t,is,0,0,1),ps("n1",e,t,is,-1,-1,r),ps("n2",e,t,is,n,-1,r),ps("n3",e,t,is,-1,s,r),ps("n4",e,t,is,n,s,r),ps("f1",e,t,is,-1,-1,1),ps("f2",e,t,is,n,-1,1),ps("f3",e,t,is,-1,s,1),ps("f4",e,t,is,n,s,1),ps("u1",e,t,is,n*.7,s*1.1,r),ps("u2",e,t,is,-1*.7,s*1.1,r),ps("u3",e,t,is,0,s*2,r),ps("cf1",e,t,is,-1,0,1),ps("cf2",e,t,is,n,0,1),ps("cf3",e,t,is,0,-1,1),ps("cf4",e,t,is,0,s,1),ps("cn1",e,t,is,-1,0,r),ps("cn2",e,t,is,n,0,r),ps("cn3",e,t,is,0,-1,r),ps("cn4",e,t,is,0,s,r),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ps(i,t,e,n,s,r,a){a4.set(s,r,a).unproject(n);const l=t[i];if(l!==void 0){const u=e.getAttribute("position");for(let f=0,m=l.length;f<m;f++)u.setXYZ(l[f],a4.x,a4.y,a4.z)}}const o4=new Nr;class tV extends Bc{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),r=new $e;r.setIndex(new zn(n,1)),r.setAttribute("position",new zn(s,3)),super(r,new oa({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&o4.setFromObject(this.object),o4.isEmpty())return;const t=o4.min,e=o4.max,n=this.geometry.attributes.position,s=n.array;s[0]=e.x,s[1]=e.y,s[2]=e.z,s[3]=t.x,s[4]=e.y,s[5]=e.z,s[6]=t.x,s[7]=t.y,s[8]=e.z,s[9]=e.x,s[10]=t.y,s[11]=e.z,s[12]=e.x,s[13]=e.y,s[14]=t.z,s[15]=t.x,s[16]=e.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=e.x,s[22]=t.y,s[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class eV extends Bc{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new $e;r.setIndex(new zn(n,1)),r.setAttribute("position",new Me(s,3)),super(r,new oa({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class nV extends af{constructor(t,e=1,n=16776960){const s=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new $e;a.setAttribute("position",new Me(r,3)),a.computeBoundingSphere(),super(a,new oa({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new $e;u.setAttribute("position",new Me(l,3)),u.computeBoundingSphere(),this.add(new as(u,new Go({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const aL=new et;let l4,x8;class iV extends Ln{constructor(t=new et(0,0,1),e=new et(0,0,0),n=1,s=16776960,r=n*.2,a=r*.2){super(),this.type="ArrowHelper",l4===void 0&&(l4=new $e,l4.setAttribute("position",new Me([0,0,0,0,1,0],3)),x8=new Ix(.5,1,5,1),x8.translate(0,-.5,0)),this.position.copy(e),this.line=new af(l4,new oa({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new as(x8,new Go({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{aL.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(aL,e)}}setLength(t,e=t*.2,n=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class sV extends Bc{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new $e;s.setAttribute("position",new Me(e,3)),s.setAttribute("color",new Me(n,3));const r=new oa({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(t,e,n){const s=new oe,r=this.geometry.attributes.color.array;return s.set(t),s.toArray(r,0),s.toArray(r,3),s.set(e),s.toArray(r,6),s.toArray(r,9),s.set(n),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class rV{constructor(){this.type="ShapePath",this.color=new oe,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new nE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,s){return this.currentPath.quadraticCurveTo(t,e,n,s),this}bezierCurveTo(t,e,n,s,r,a){return this.currentPath.bezierCurveTo(t,e,n,s,r,a),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(S){const R=[];for(let D=0,B=S.length;D<B;D++){const N=S[D],I=new Fg;I.curves=N.curves,R.push(I)}return R}function n(S,R){const D=R.length;let B=!1;for(let N=D-1,I=0;I<D;N=I++){let F=R[N],z=R[I],U=z.x-F.x,P=z.y-F.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(F=R[I],U=-U,z=R[N],P=-P),S.y<F.y||S.y>z.y)continue;if(S.y===F.y){if(S.x===F.x)return!0}else{const X=P*(S.x-F.x)-U*(S.y-F.y);if(X===0)return!0;if(X<0)continue;B=!B}}else{if(S.y!==F.y)continue;if(z.x<=S.x&&S.x<=F.x||F.x<=S.x&&S.x<=z.x)return!0}}return B}const s=Cc.isClockWise,r=this.subPaths;if(r.length===0)return[];let a,l,u;const f=[];if(r.length===1)return l=r[0],u=new Fg,u.curves=l.curves,f.push(u),f;let m=!s(r[0].getPoints());m=t?!m:m;const g=[],v=[];let _=[],b=0,C;v[b]=void 0,_[b]=[];for(let S=0,R=r.length;S<R;S++)l=r[S],C=l.getPoints(),a=s(C),a=t?!a:a,a?(!m&&v[b]&&b++,v[b]={s:new Fg,p:C},v[b].s.curves=l.curves,m&&b++,_[b]=[]):_[b].push({h:l,p:C[0]});if(!v[0])return e(r);if(v.length>1){let S=!1,R=0;for(let D=0,B=v.length;D<B;D++)g[D]=[];for(let D=0,B=v.length;D<B;D++){const N=_[D];for(let I=0;I<N.length;I++){const F=N[I];let z=!0;for(let U=0;U<v.length;U++)n(F.p,v[U].p)&&(D!==U&&R++,z?(z=!1,g[U].push(F)):S=!0);z&&g[D].push(F)}}R>0&&S===!1&&(_=g)}let M;for(let S=0,R=v.length;S<R;S++){u=v[S].s,f.push(u),M=_[S];for(let D=0,B=M.length;D<B;D++)u.holes.push(M[D].h)}return f}}class aV extends Yo{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function oV(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function lV(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function cV(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function R5(i,t,e,n){const s=uV(n);switch(e){case Tw:return i*t;case KE:return i*t/s.components*s.byteLength;case Cx:return i*t/s.components*s.byteLength;case ww:return i*t*2/s.components*s.byteLength;case JE:return i*t*2/s.components*s.byteLength;case Cw:return i*t*3/s.components*s.byteLength;case ia:return i*t*4/s.components*s.byteLength;case ZE:return i*t*4/s.components*s.byteLength;case O_:case N_:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case I_:case U_:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case C3:case R3:return Math.max(i,16)*Math.max(t,8)/4;case T3:case w3:return Math.max(i,8)*Math.max(t,8)/2;case L3:case D3:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case B3:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case O3:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case N3:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case I3:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case U3:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case P3:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case F3:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case H3:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case z3:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case G3:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case k3:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case V3:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case Q3:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case j3:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case X3:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case P_:case q3:case Y3:return Math.ceil(i/4)*Math.ceil(t/4)*16;case Rw:case W3:return Math.ceil(i/4)*Math.ceil(t/4)*8;case K3:case J3:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function uV(i){switch(i){case Ws:case Sw:return{byteLength:1,components:1};case uy:case Ew:case r0:return{byteLength:2,components:1};case YE:case WE:return{byteLength:2,components:4};case Hu:case qE:case Na:return{byteLength:4,components:1};case Mw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class hV{static contain(t,e){return oV(t,e)}static cover(t,e){return lV(t,e)}static fill(t){return cV(t)}static getByteLength(t,e,n,s){return R5(t,e,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:s0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=s0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function CO(){let i=null,t=!1,e=null,n=null;function s(r,a){e(r,a),n=i.requestAnimationFrame(s)}return{start:function(){t!==!0&&e!==null&&(n=i.requestAnimationFrame(s),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(r){e=r},setContext:function(r){i=r}}}function fV(i){const t=new WeakMap;function e(l,u){const f=l.array,m=l.usage,g=f.byteLength,v=i.createBuffer();i.bindBuffer(u,v),i.bufferData(u,f,m),l.onUploadCallback();let _;if(f instanceof Float32Array)_=i.FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?_=i.HALF_FLOAT:_=i.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=i.SHORT;else if(f instanceof Uint32Array)_=i.UNSIGNED_INT;else if(f instanceof Int32Array)_=i.INT;else if(f instanceof Int8Array)_=i.BYTE;else if(f instanceof Uint8Array)_=i.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:g}}function n(l,u,f){const m=u.array,g=u.updateRanges;if(i.bindBuffer(f,l),g.length===0)i.bufferSubData(f,0,m);else{g.sort((_,b)=>_.start-b.start);let v=0;for(let _=1;_<g.length;_++){const b=g[v],C=g[_];C.start<=b.start+b.count+1?b.count=Math.max(b.count,C.start+C.count-b.start):(++v,g[v]=C)}g.length=v+1;for(let _=0,b=g.length;_<b;_++){const C=g[_];i.bufferSubData(f,C.start*m.BYTES_PER_ELEMENT,m,C.start,C.count)}u.clearUpdateRanges()}u.onUploadCallback()}function s(l){return l.isInterleavedBufferAttribute&&(l=l.data),t.get(l)}function r(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=t.get(l);u&&(i.deleteBuffer(u.buffer),t.delete(l))}function a(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const m=t.get(l);(!m||m.version<l.version)&&t.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=t.get(l);if(f===void 0)t.set(l,e(l,u));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(f.buffer,l,u),f.version=l.version}}return{get:s,remove:r,update:a}}var dV=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,pV=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,mV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,gV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vV=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,yV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,_V=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,AV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,xV=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,bV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,SV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,EV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,MV=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,TV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,CV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,wV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,RV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,LV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,DV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,BV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,OV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,NV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,IV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,UV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,PV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,FV=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,HV=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,zV=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,GV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,kV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,VV="gl_FragColor = linearToOutputTexel( gl_FragColor );",QV=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,jV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,XV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,qV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,YV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,WV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,KV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,JV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,ZV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,$V=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,tQ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,eQ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,nQ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,iQ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,sQ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,rQ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,aQ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,oQ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lQ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,cQ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,uQ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,hQ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,fQ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,dQ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,pQ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,mQ=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,gQ=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vQ=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yQ=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,_Q=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,AQ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,xQ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,bQ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,SQ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,EQ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,MQ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,TQ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,CQ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,wQ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,RQ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,LQ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,DQ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,BQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,OQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,NQ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,IQ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,UQ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,PQ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,FQ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,HQ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,zQ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,GQ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,kQ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,VQ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,QQ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,jQ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,XQ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,qQ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,YQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,WQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,KQ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,JQ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ZQ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,$Q=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,tj=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ej=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,nj=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ij=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,sj=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,rj=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,aj=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,oj=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,lj=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cj=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uj=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,hj=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const fj=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,dj=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,mj=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vj=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yj=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,_j=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Aj=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,xj=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,bj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Sj=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ej=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Mj=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Tj=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Cj=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wj=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Rj=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lj=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Dj=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Bj=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Oj=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Nj=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ij=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Uj=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Pj=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fj=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Hj=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zj=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Gj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,kj=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Vj=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Qj=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fn={alphahash_fragment:dV,alphahash_pars_fragment:pV,alphamap_fragment:mV,alphamap_pars_fragment:gV,alphatest_fragment:vV,alphatest_pars_fragment:yV,aomap_fragment:_V,aomap_pars_fragment:AV,batching_pars_vertex:xV,batching_vertex:bV,begin_vertex:SV,beginnormal_vertex:EV,bsdfs:MV,iridescence_fragment:TV,bumpmap_pars_fragment:CV,clipping_planes_fragment:wV,clipping_planes_pars_fragment:RV,clipping_planes_pars_vertex:LV,clipping_planes_vertex:DV,color_fragment:BV,color_pars_fragment:OV,color_pars_vertex:NV,color_vertex:IV,common:UV,cube_uv_reflection_fragment:PV,defaultnormal_vertex:FV,displacementmap_pars_vertex:HV,displacementmap_vertex:zV,emissivemap_fragment:GV,emissivemap_pars_fragment:kV,colorspace_fragment:VV,colorspace_pars_fragment:QV,envmap_fragment:jV,envmap_common_pars_fragment:XV,envmap_pars_fragment:qV,envmap_pars_vertex:YV,envmap_physical_pars_fragment:rQ,envmap_vertex:WV,fog_vertex:KV,fog_pars_vertex:JV,fog_fragment:ZV,fog_pars_fragment:$V,gradientmap_pars_fragment:tQ,lightmap_pars_fragment:eQ,lights_lambert_fragment:nQ,lights_lambert_pars_fragment:iQ,lights_pars_begin:sQ,lights_toon_fragment:aQ,lights_toon_pars_fragment:oQ,lights_phong_fragment:lQ,lights_phong_pars_fragment:cQ,lights_physical_fragment:uQ,lights_physical_pars_fragment:hQ,lights_fragment_begin:fQ,lights_fragment_maps:dQ,lights_fragment_end:pQ,logdepthbuf_fragment:mQ,logdepthbuf_pars_fragment:gQ,logdepthbuf_pars_vertex:vQ,logdepthbuf_vertex:yQ,map_fragment:_Q,map_pars_fragment:AQ,map_particle_fragment:xQ,map_particle_pars_fragment:bQ,metalnessmap_fragment:SQ,metalnessmap_pars_fragment:EQ,morphinstance_vertex:MQ,morphcolor_vertex:TQ,morphnormal_vertex:CQ,morphtarget_pars_vertex:wQ,morphtarget_vertex:RQ,normal_fragment_begin:LQ,normal_fragment_maps:DQ,normal_pars_fragment:BQ,normal_pars_vertex:OQ,normal_vertex:NQ,normalmap_pars_fragment:IQ,clearcoat_normal_fragment_begin:UQ,clearcoat_normal_fragment_maps:PQ,clearcoat_pars_fragment:FQ,iridescence_pars_fragment:HQ,opaque_fragment:zQ,packing:GQ,premultiplied_alpha_fragment:kQ,project_vertex:VQ,dithering_fragment:QQ,dithering_pars_fragment:jQ,roughnessmap_fragment:XQ,roughnessmap_pars_fragment:qQ,shadowmap_pars_fragment:YQ,shadowmap_pars_vertex:WQ,shadowmap_vertex:KQ,shadowmask_pars_fragment:JQ,skinbase_vertex:ZQ,skinning_pars_vertex:$Q,skinning_vertex:tj,skinnormal_vertex:ej,specularmap_fragment:nj,specularmap_pars_fragment:ij,tonemapping_fragment:sj,tonemapping_pars_fragment:rj,transmission_fragment:aj,transmission_pars_fragment:oj,uv_pars_fragment:lj,uv_pars_vertex:cj,uv_vertex:uj,worldpos_vertex:hj,background_vert:fj,background_frag:dj,backgroundCube_vert:pj,backgroundCube_frag:mj,cube_vert:gj,cube_frag:vj,depth_vert:yj,depth_frag:_j,distanceRGBA_vert:Aj,distanceRGBA_frag:xj,equirect_vert:bj,equirect_frag:Sj,linedashed_vert:Ej,linedashed_frag:Mj,meshbasic_vert:Tj,meshbasic_frag:Cj,meshlambert_vert:wj,meshlambert_frag:Rj,meshmatcap_vert:Lj,meshmatcap_frag:Dj,meshnormal_vert:Bj,meshnormal_frag:Oj,meshphong_vert:Nj,meshphong_frag:Ij,meshphysical_vert:Uj,meshphysical_frag:Pj,meshtoon_vert:Fj,meshtoon_frag:Hj,points_vert:zj,points_frag:Gj,shadow_vert:kj,shadow_frag:Vj,sprite_vert:Qj,sprite_frag:jj},pe={common:{diffuse:{value:new oe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new on}},envmap:{envMap:{value:null},envMapRotation:{value:new on},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new on}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new on}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new on},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new on},normalScale:{value:new Pt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new on},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new on}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new on}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new on}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new oe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new oe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0},uvTransform:{value:new on}},sprite:{diffuse:{value:new oe(16777215)},opacity:{value:1},center:{value:new Pt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}}},Ec={basic:{uniforms:Ca([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:Ca([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,pe.lights,{emissive:{value:new oe(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:Ca([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,pe.lights,{emissive:{value:new oe(0)},specular:{value:new oe(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:Ca([pe.common,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.roughnessmap,pe.metalnessmap,pe.fog,pe.lights,{emissive:{value:new oe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},toon:{uniforms:Ca([pe.common,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.gradientmap,pe.fog,pe.lights,{emissive:{value:new oe(0)}}]),vertexShader:fn.meshtoon_vert,fragmentShader:fn.meshtoon_frag},matcap:{uniforms:Ca([pe.common,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,{matcap:{value:null}}]),vertexShader:fn.meshmatcap_vert,fragmentShader:fn.meshmatcap_frag},points:{uniforms:Ca([pe.points,pe.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:Ca([pe.common,pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:Ca([pe.common,pe.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:Ca([pe.common,pe.bumpmap,pe.normalmap,pe.displacementmap,{opacity:{value:1}}]),vertexShader:fn.meshnormal_vert,fragmentShader:fn.meshnormal_frag},sprite:{uniforms:Ca([pe.sprite,pe.fog]),vertexShader:fn.sprite_vert,fragmentShader:fn.sprite_frag},background:{uniforms:{uvTransform:{value:new on},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fn.background_vert,fragmentShader:fn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new on}},vertexShader:fn.backgroundCube_vert,fragmentShader:fn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:Ca([pe.common,pe.displacementmap,{referencePosition:{value:new et},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:Ca([pe.lights,pe.fog,{color:{value:new oe(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};Ec.physical={uniforms:Ca([Ec.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new on},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new on},clearcoatNormalScale:{value:new Pt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new on},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new on},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new on},sheen:{value:0},sheenColor:{value:new oe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new on},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new on},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new on},transmissionSamplerSize:{value:new Pt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new on},attenuationDistance:{value:0},attenuationColor:{value:new oe(0)},specularColor:{value:new oe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new on},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new on},anisotropyVector:{value:new Pt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new on}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag};const c4={r:0,b:0,g:0},ym=new Qo,Xj=new Ne;function qj(i,t,e,n,s,r,a){const l=new oe(0);let u=r===!0?0:1,f,m,g=null,v=0,_=null;function b(D){let B=D.isScene===!0?D.background:null;return B&&B.isTexture&&(B=(D.backgroundBlurriness>0?e:t).get(B)),B}function C(D){let B=!1;const N=b(D);N===null?S(l,u):N&&N.isColor&&(S(N,1),B=!0);const I=i.xr.getEnvironmentBlendMode();I==="additive"?n.buffers.color.setClear(0,0,0,1,a):I==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(i.autoClear||B)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function M(D,B){const N=b(B);N&&(N.isCubeTexture||N.mapping===Sy)?(m===void 0&&(m=new as(new a0(1,1,1),new Ks({name:"BackgroundCubeMaterial",uniforms:gy(Ec.backgroundCube.uniforms),vertexShader:Ec.backgroundCube.vertexShader,fragmentShader:Ec.backgroundCube.fragmentShader,side:qs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(I,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(m)),ym.copy(B.backgroundRotation),ym.x*=-1,ym.y*=-1,ym.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(ym.y*=-1,ym.z*=-1),m.material.uniforms.envMap.value=N,m.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=B.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(Xj.makeRotationFromEuler(ym)),m.material.toneMapped=Fn.getTransfer(N.colorSpace)!==fi,(g!==N||v!==N.version||_!==i.toneMapping)&&(m.material.needsUpdate=!0,g=N,v=N.version,_=i.toneMapping),m.layers.enableAll(),D.unshift(m,m.geometry,m.material,0,0,null)):N&&N.isTexture&&(f===void 0&&(f=new as(new Ty(2,2),new Ks({name:"BackgroundMaterial",uniforms:gy(Ec.background.uniforms),vertexShader:Ec.background.vertexShader,fragmentShader:Ec.background.fragmentShader,side:Dc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(f)),f.material.uniforms.t2D.value=N,f.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,f.material.toneMapped=Fn.getTransfer(N.colorSpace)!==fi,N.matrixAutoUpdate===!0&&N.updateMatrix(),f.material.uniforms.uvTransform.value.copy(N.matrix),(g!==N||v!==N.version||_!==i.toneMapping)&&(f.material.needsUpdate=!0,g=N,v=N.version,_=i.toneMapping),f.layers.enableAll(),D.unshift(f,f.geometry,f.material,0,0,null))}function S(D,B){D.getRGB(c4,OB(i)),n.buffers.color.setClear(c4.r,c4.g,c4.b,B,a)}function R(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(D,B=1){l.set(D),u=B,S(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(D){u=D,S(l,u)},render:C,addToRenderList:M,dispose:R}}function Yj(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=v(null);let r=s,a=!1;function l(P,X,ot,it,ut){let dt=!1;const j=g(it,ot,X);r!==j&&(r=j,f(r.object)),dt=_(P,it,ot,ut),dt&&b(P,it,ot,ut),ut!==null&&t.update(ut,i.ELEMENT_ARRAY_BUFFER),(dt||a)&&(a=!1,B(P,X,ot,it),ut!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(ut).buffer))}function u(){return i.createVertexArray()}function f(P){return i.bindVertexArray(P)}function m(P){return i.deleteVertexArray(P)}function g(P,X,ot){const it=ot.wireframe===!0;let ut=n[P.id];ut===void 0&&(ut={},n[P.id]=ut);let dt=ut[X.id];dt===void 0&&(dt={},ut[X.id]=dt);let j=dt[it];return j===void 0&&(j=v(u()),dt[it]=j),j}function v(P){const X=[],ot=[],it=[];for(let ut=0;ut<e;ut++)X[ut]=0,ot[ut]=0,it[ut]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:ot,attributeDivisors:it,object:P,attributes:{},index:null}}function _(P,X,ot,it){const ut=r.attributes,dt=X.attributes;let j=0;const tt=ot.getAttributes();for(const nt in tt)if(tt[nt].location>=0){const J=ut[nt];let at=dt[nt];if(at===void 0&&(nt==="instanceMatrix"&&P.instanceMatrix&&(at=P.instanceMatrix),nt==="instanceColor"&&P.instanceColor&&(at=P.instanceColor)),J===void 0||J.attribute!==at||at&&J.data!==at.data)return!0;j++}return r.attributesNum!==j||r.index!==it}function b(P,X,ot,it){const ut={},dt=X.attributes;let j=0;const tt=ot.getAttributes();for(const nt in tt)if(tt[nt].location>=0){let J=dt[nt];J===void 0&&(nt==="instanceMatrix"&&P.instanceMatrix&&(J=P.instanceMatrix),nt==="instanceColor"&&P.instanceColor&&(J=P.instanceColor));const at={};at.attribute=J,J&&J.data&&(at.data=J.data),ut[nt]=at,j++}r.attributes=ut,r.attributesNum=j,r.index=it}function C(){const P=r.newAttributes;for(let X=0,ot=P.length;X<ot;X++)P[X]=0}function M(P){S(P,0)}function S(P,X){const ot=r.newAttributes,it=r.enabledAttributes,ut=r.attributeDivisors;ot[P]=1,it[P]===0&&(i.enableVertexAttribArray(P),it[P]=1),ut[P]!==X&&(i.vertexAttribDivisor(P,X),ut[P]=X)}function R(){const P=r.newAttributes,X=r.enabledAttributes;for(let ot=0,it=X.length;ot<it;ot++)X[ot]!==P[ot]&&(i.disableVertexAttribArray(ot),X[ot]=0)}function D(P,X,ot,it,ut,dt,j){j===!0?i.vertexAttribIPointer(P,X,ot,ut,dt):i.vertexAttribPointer(P,X,ot,it,ut,dt)}function B(P,X,ot,it){C();const ut=it.attributes,dt=ot.getAttributes(),j=X.defaultAttributeValues;for(const tt in dt){const nt=dt[tt];if(nt.location>=0){let _t=ut[tt];if(_t===void 0&&(tt==="instanceMatrix"&&P.instanceMatrix&&(_t=P.instanceMatrix),tt==="instanceColor"&&P.instanceColor&&(_t=P.instanceColor)),_t!==void 0){const J=_t.normalized,at=_t.itemSize,xt=t.get(_t);if(xt===void 0)continue;const Et=xt.buffer,ct=xt.type,wt=xt.bytesPerElement,Bt=ct===i.INT||ct===i.UNSIGNED_INT||_t.gpuType===qE;if(_t.isInterleavedBufferAttribute){const Ut=_t.data,Wt=Ut.stride,ve=_t.offset;if(Ut.isInstancedInterleavedBuffer){for(let ee=0;ee<nt.locationSize;ee++)S(nt.location+ee,Ut.meshPerAttribute);P.isInstancedMesh!==!0&&it._maxInstanceCount===void 0&&(it._maxInstanceCount=Ut.meshPerAttribute*Ut.count)}else for(let ee=0;ee<nt.locationSize;ee++)M(nt.location+ee);i.bindBuffer(i.ARRAY_BUFFER,Et);for(let ee=0;ee<nt.locationSize;ee++)D(nt.location+ee,at/nt.locationSize,ct,J,Wt*wt,(ve+at/nt.locationSize*ee)*wt,Bt)}else{if(_t.isInstancedBufferAttribute){for(let Ut=0;Ut<nt.locationSize;Ut++)S(nt.location+Ut,_t.meshPerAttribute);P.isInstancedMesh!==!0&&it._maxInstanceCount===void 0&&(it._maxInstanceCount=_t.meshPerAttribute*_t.count)}else for(let Ut=0;Ut<nt.locationSize;Ut++)M(nt.location+Ut);i.bindBuffer(i.ARRAY_BUFFER,Et);for(let Ut=0;Ut<nt.locationSize;Ut++)D(nt.location+Ut,at/nt.locationSize,ct,J,at*wt,at/nt.locationSize*Ut*wt,Bt)}}else if(j!==void 0){const J=j[tt];if(J!==void 0)switch(J.length){case 2:i.vertexAttrib2fv(nt.location,J);break;case 3:i.vertexAttrib3fv(nt.location,J);break;case 4:i.vertexAttrib4fv(nt.location,J);break;default:i.vertexAttrib1fv(nt.location,J)}}}}R()}function N(){z();for(const P in n){const X=n[P];for(const ot in X){const it=X[ot];for(const ut in it)m(it[ut].object),delete it[ut];delete X[ot]}delete n[P]}}function I(P){if(n[P.id]===void 0)return;const X=n[P.id];for(const ot in X){const it=X[ot];for(const ut in it)m(it[ut].object),delete it[ut];delete X[ot]}delete n[P.id]}function F(P){for(const X in n){const ot=n[X];if(ot[P.id]===void 0)continue;const it=ot[P.id];for(const ut in it)m(it[ut].object),delete it[ut];delete ot[P.id]}}function z(){U(),a=!0,r!==s&&(r=s,f(r.object))}function U(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:l,reset:z,resetDefaultState:U,dispose:N,releaseStatesOfGeometry:I,releaseStatesOfProgram:F,initAttributes:C,enableAttribute:M,disableUnusedAttributes:R}}function Wj(i,t,e){let n;function s(f){n=f}function r(f,m){i.drawArrays(n,f,m),e.update(m,n,1)}function a(f,m,g){g!==0&&(i.drawArraysInstanced(n,f,m,g),e.update(m,n,g))}function l(f,m,g){if(g===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,f,0,m,0,g);let _=0;for(let b=0;b<g;b++)_+=m[b];e.update(_,n,1)}function u(f,m,g,v){if(g===0)return;const _=t.get("WEBGL_multi_draw");if(_===null)for(let b=0;b<f.length;b++)a(f[b],m[b],v[b]);else{_.multiDrawArraysInstancedWEBGL(n,f,0,m,0,v,0,g);let b=0;for(let C=0;C<g;C++)b+=m[C]*v[C];e.update(b,n,1)}}this.setMode=s,this.render=r,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function Kj(i,t,e,n){let s;function r(){if(s!==void 0)return s;if(t.has("EXT_texture_filter_anisotropic")===!0){const F=t.get("EXT_texture_filter_anisotropic");s=i.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(F){return!(F!==ia&&n.convert(F)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(F){const z=F===r0&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(F!==Ws&&n.convert(F)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==Na&&!z)}function u(F){if(F==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=e.precision!==void 0?e.precision:"highp";const m=u(f);m!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",m,"instead."),f=m);const g=e.logarithmicDepthBuffer===!0,v=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),_=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),b=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C=i.getParameter(i.MAX_TEXTURE_SIZE),M=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),S=i.getParameter(i.MAX_VERTEX_ATTRIBS),R=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),D=i.getParameter(i.MAX_VARYING_VECTORS),B=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),N=b>0,I=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:u,textureFormatReadable:a,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:g,reverseDepthBuffer:v,maxTextures:_,maxVertexTextures:b,maxTextureSize:C,maxCubemapSize:M,maxAttributes:S,maxVertexUniforms:R,maxVaryings:D,maxFragmentUniforms:B,vertexTextures:N,maxSamples:I}}function Jj(i){const t=this;let e=null,n=0,s=!1,r=!1;const a=new md,l=new on,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const _=g.length!==0||v||n!==0||s;return s=v,n=g.length,_},this.beginShadows=function(){r=!0,m(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(g,v){e=m(g,v,0)},this.setState=function(g,v,_){const b=g.clippingPlanes,C=g.clipIntersection,M=g.clipShadows,S=i.get(g);if(!s||b===null||b.length===0||r&&!M)r?m(null):f();else{const R=r?0:n,D=R*4;let B=S.clippingState||null;u.value=B,B=m(b,v,D,_);for(let N=0;N!==D;++N)B[N]=e[N];S.clippingState=B,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=R}};function f(){u.value!==e&&(u.value=e,u.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function m(g,v,_,b){const C=g!==null?g.length:0;let M=null;if(C!==0){if(M=u.value,b!==!0||M===null){const S=_+C*4,R=v.matrixWorldInverse;l.getNormalMatrix(R),(M===null||M.length<S)&&(M=new Float32Array(S));for(let D=0,B=_;D!==C;++D,B+=4)a.copy(g[D]).applyMatrix4(R,l),a.normal.toArray(M,B),M[B+3]=a.constant}u.value=M,u.needsUpdate=!0}return t.numPlanes=C,t.numIntersection=0,M}}function Zj(i){let t=new WeakMap;function e(a,l){return l===Y_?a.mapping=rf:l===W_&&(a.mapping=$d),a}function n(a){if(a&&a.isTexture){const l=a.mapping;if(l===Y_||l===W_)if(t.has(a)){const u=t.get(a).texture;return e(u,a.mapping)}else{const u=a.image;if(u&&u.height>0){const f=new UB(u.height);return f.fromEquirectangularTexture(i,a),t.set(a,f),a.addEventListener("dispose",s),e(f.texture,a.mapping)}else return null}}return a}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function r(){t=new WeakMap}return{get:n,dispose:r}}const K1=4,oL=[.125,.215,.35,.446,.526,.582],Rm=20,b8=new wy,lL=new oe;let S8=null,E8=0,M8=0,T8=!1;const Sm=(1+Math.sqrt(5))/2,B1=1/Sm,cL=[new et(-Sm,B1,0),new et(Sm,B1,0),new et(-B1,0,Sm),new et(B1,0,Sm),new et(0,Sm,-B1),new et(0,Sm,B1),new et(-1,1,-1),new et(1,1,-1),new et(-1,1,1),new et(1,1,1)],$j=new et;class L5{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,s=100,r={}){const{size:a=256,position:l=$j}=r;S8=this._renderer.getRenderTarget(),E8=this._renderer.getActiveCubeFace(),M8=this._renderer.getActiveMipmapLevel(),T8=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(t,n,s,u,l),e>0&&this._blur(u,0,0,e),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=fL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=hL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(S8,E8,M8),this._renderer.xr.enabled=T8,t.scissorTest=!1,u4(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===rf||t.mapping===$d?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),S8=this._renderer.getRenderTarget(),E8=this._renderer.getActiveCubeFace(),M8=this._renderer.getActiveMipmapLevel(),T8=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Ni,minFilter:Ni,generateMipmaps:!1,type:r0,format:ia,colorSpace:zu,depthBuffer:!1},s=uL(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=uL(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=tX(r)),this._blurMaterial=eX(r,t,e)}return s}_compileMaterial(t){const e=new as(this._lodPlanes[0],t);this._renderer.compile(e,b8)}_sceneToCubeUV(t,e,n,s,r){const u=new Rs(90,1,e,n),f=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],g=this._renderer,v=g.autoClear,_=g.toneMapping;g.getClearColor(lL),g.toneMapping=Lc,g.autoClear=!1;const b=new Go({name:"PMREM.Background",side:qs,depthWrite:!1,depthTest:!1}),C=new as(new a0,b);let M=!1;const S=t.background;S?S.isColor&&(b.color.copy(S),t.background=null,M=!0):(b.color.copy(lL),M=!0);for(let R=0;R<6;R++){const D=R%3;D===0?(u.up.set(0,f[R],0),u.position.set(r.x,r.y,r.z),u.lookAt(r.x+m[R],r.y,r.z)):D===1?(u.up.set(0,0,f[R]),u.position.set(r.x,r.y,r.z),u.lookAt(r.x,r.y+m[R],r.z)):(u.up.set(0,f[R],0),u.position.set(r.x,r.y,r.z),u.lookAt(r.x,r.y,r.z+m[R]));const B=this._cubeSize;u4(s,D*B,R>2?B:0,B,B),g.setRenderTarget(s),M&&g.render(C,u),g.render(t,u)}C.geometry.dispose(),C.material.dispose(),g.toneMapping=_,g.autoClear=v,t.background=S}_textureToCubeUV(t,e){const n=this._renderer,s=t.mapping===rf||t.mapping===$d;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=fL()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=hL());const r=s?this._cubemapMaterial:this._equirectMaterial,a=new as(this._lodPlanes[0],r),l=r.uniforms;l.envMap.value=t;const u=this._cubeSize;u4(e,0,0,3*u,2*u),n.setRenderTarget(e),n.render(a,b8)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),l=cL[(s-r-1)%cL.length];this._blur(t,r-1,r,a,l)}e.autoClear=n}_blur(t,e,n,s,r){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,s,"latitudinal",r),this._halfBlur(a,t,n,n,s,"longitudinal",r)}_halfBlur(t,e,n,s,r,a,l){const u=this._renderer,f=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,g=new as(this._lodPlanes[s],f),v=f.uniforms,_=this._sizeLods[n]-1,b=isFinite(r)?Math.PI/(2*_):2*Math.PI/(2*Rm-1),C=r/b,M=isFinite(r)?1+Math.floor(m*C):Rm;M>Rm&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${Rm}`);const S=[];let R=0;for(let F=0;F<Rm;++F){const z=F/C,U=Math.exp(-z*z/2);S.push(U),F===0?R+=U:F<M&&(R+=2*U)}for(let F=0;F<S.length;F++)S[F]=S[F]/R;v.envMap.value=t.texture,v.samples.value=M,v.weights.value=S,v.latitudinal.value=a==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:D}=this;v.dTheta.value=b,v.mipInt.value=D-n;const B=this._sizeLods[s],N=3*B*(s>D-K1?s-D+K1:0),I=4*(this._cubeSize-B);u4(e,N,I,3*B,2*B),u.setRenderTarget(e),u.render(g,b8)}}function tX(i){const t=[],e=[],n=[];let s=i;const r=i-K1+1+oL.length;for(let a=0;a<r;a++){const l=Math.pow(2,s);e.push(l);let u=1/l;a>i-K1?u=oL[a-i+K1-1]:a===0&&(u=0),n.push(u);const f=1/(l-2),m=-f,g=1+f,v=[m,m,g,m,g,g,m,m,g,g,m,g],_=6,b=6,C=3,M=2,S=1,R=new Float32Array(C*b*_),D=new Float32Array(M*b*_),B=new Float32Array(S*b*_);for(let I=0;I<_;I++){const F=I%3*2/3-1,z=I>2?0:-1,U=[F,z,0,F+2/3,z,0,F+2/3,z+1,0,F,z,0,F+2/3,z+1,0,F,z+1,0];R.set(U,C*b*I),D.set(v,M*b*I);const P=[I,I,I,I,I,I];B.set(P,S*b*I)}const N=new $e;N.setAttribute("position",new zn(R,C)),N.setAttribute("uv",new zn(D,M)),N.setAttribute("faceIndex",new zn(B,S)),t.push(N),s>K1&&s--}return{lodPlanes:t,sizeLods:e,sigmas:n}}function uL(i,t,e){const n=new Ds(i,t,e);return n.texture.mapping=Sy,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function u4(i,t,e,n,s){i.viewport.set(t,e,n,s),i.scissor.set(t,e,n,s)}function eX(i,t,e){const n=new Float32Array(Rm),s=new et(0,1,0);return new Ks({name:"SphericalGaussianBlur",defines:{n:Rm,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:u7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:aa,depthTest:!1,depthWrite:!1})}function hL(){return new Ks({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:u7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:aa,depthTest:!1,depthWrite:!1})}function fL(){return new Ks({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:u7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:aa,depthTest:!1,depthWrite:!1})}function u7(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function nX(i){let t=new WeakMap,e=null;function n(l){if(l&&l.isTexture){const u=l.mapping,f=u===Y_||u===W_,m=u===rf||u===$d;if(f||m){let g=t.get(l);const v=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return e===null&&(e=new L5(i)),g=f?e.fromEquirectangular(l,g):e.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,t.set(l,g),g.texture;if(g!==void 0)return g.texture;{const _=l.image;return f&&_&&_.height>0||m&&_&&s(_)?(e===null&&(e=new L5(i)),g=f?e.fromEquirectangular(l):e.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,t.set(l,g),l.addEventListener("dispose",r),g.texture):null}}}return l}function s(l){let u=0;const f=6;for(let m=0;m<f;m++)l[m]!==void 0&&u++;return u===f}function r(l){const u=l.target;u.removeEventListener("dispose",r);const f=t.get(u);f!==void 0&&(t.delete(u),f.dispose())}function a(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:a}}function iX(i){const t={};function e(n){if(t[n]!==void 0)return t[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return t[n]=s,s}return{has:function(n){return e(n)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const s=e(n);return s===null&&D4("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function sX(i,t,e,n){const s={},r=new WeakMap;function a(g){const v=g.target;v.index!==null&&t.remove(v.index);for(const b in v.attributes)t.remove(v.attributes[b]);v.removeEventListener("dispose",a),delete s[v.id];const _=r.get(v);_&&(t.remove(_),r.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,e.memory.geometries--}function l(g,v){return s[v.id]===!0||(v.addEventListener("dispose",a),s[v.id]=!0,e.memory.geometries++),v}function u(g){const v=g.attributes;for(const _ in v)t.update(v[_],i.ARRAY_BUFFER)}function f(g){const v=[],_=g.index,b=g.attributes.position;let C=0;if(_!==null){const R=_.array;C=_.version;for(let D=0,B=R.length;D<B;D+=3){const N=R[D+0],I=R[D+1],F=R[D+2];v.push(N,I,I,F,F,N)}}else if(b!==void 0){const R=b.array;C=b.version;for(let D=0,B=R.length/3-1;D<B;D+=3){const N=D+0,I=D+1,F=D+2;v.push(N,I,I,F,F,N)}}else return;const M=new(RB(v)?Iw:Nw)(v,1);M.version=C;const S=r.get(g);S&&t.remove(S),r.set(g,M)}function m(g){const v=r.get(g);if(v){const _=g.index;_!==null&&v.version<_.version&&f(g)}else f(g);return r.get(g)}return{get:l,update:u,getWireframeAttribute:m}}function rX(i,t,e){let n;function s(v){n=v}let r,a;function l(v){r=v.type,a=v.bytesPerElement}function u(v,_){i.drawElements(n,_,r,v*a),e.update(_,n,1)}function f(v,_,b){b!==0&&(i.drawElementsInstanced(n,_,r,v*a,b),e.update(_,n,b))}function m(v,_,b){if(b===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,_,0,r,v,0,b);let M=0;for(let S=0;S<b;S++)M+=_[S];e.update(M,n,1)}function g(v,_,b,C){if(b===0)return;const M=t.get("WEBGL_multi_draw");if(M===null)for(let S=0;S<v.length;S++)f(v[S]/a,_[S],C[S]);else{M.multiDrawElementsInstancedWEBGL(n,_,0,r,v,0,C,0,b);let S=0;for(let R=0;R<b;R++)S+=_[R]*C[R];e.update(S,n,1)}}this.setMode=s,this.setIndex=l,this.render=u,this.renderInstances=f,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function aX(i){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,a,l){switch(e.calls++,a){case i.TRIANGLES:e.triangles+=l*(r/3);break;case i.LINES:e.lines+=l*(r/2);break;case i.LINE_STRIP:e.lines+=l*(r-1);break;case i.LINE_LOOP:e.lines+=l*r;break;case i.POINTS:e.points+=l*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:s,update:n}}function oX(i,t,e){const n=new WeakMap,s=new On;function r(a,l,u){const f=a.morphTargetInfluences,m=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=m!==void 0?m.length:0;let v=n.get(l);if(v===void 0||v.count!==g){let P=function(){z.dispose(),n.delete(l),l.removeEventListener("dispose",P)};var _=P;v!==void 0&&v.texture.dispose();const b=l.morphAttributes.position!==void 0,C=l.morphAttributes.normal!==void 0,M=l.morphAttributes.color!==void 0,S=l.morphAttributes.position||[],R=l.morphAttributes.normal||[],D=l.morphAttributes.color||[];let B=0;b===!0&&(B=1),C===!0&&(B=2),M===!0&&(B=3);let N=l.attributes.position.count*B,I=1;N>t.maxTextureSize&&(I=Math.ceil(N/t.maxTextureSize),N=t.maxTextureSize);const F=new Float32Array(N*I*4*g),z=new wx(F,N,I,g);z.type=Na,z.needsUpdate=!0;const U=B*4;for(let X=0;X<g;X++){const ot=S[X],it=R[X],ut=D[X],dt=N*I*4*X;for(let j=0;j<ot.count;j++){const tt=j*U;b===!0&&(s.fromBufferAttribute(ot,j),F[dt+tt+0]=s.x,F[dt+tt+1]=s.y,F[dt+tt+2]=s.z,F[dt+tt+3]=0),C===!0&&(s.fromBufferAttribute(it,j),F[dt+tt+4]=s.x,F[dt+tt+5]=s.y,F[dt+tt+6]=s.z,F[dt+tt+7]=0),M===!0&&(s.fromBufferAttribute(ut,j),F[dt+tt+8]=s.x,F[dt+tt+9]=s.y,F[dt+tt+10]=s.z,F[dt+tt+11]=ut.itemSize===4?s.w:1)}}v={count:g,texture:z,size:new Pt(N,I)},n.set(l,v),l.addEventListener("dispose",P)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)u.getUniforms().setValue(i,"morphTexture",a.morphTexture,e);else{let b=0;for(let M=0;M<f.length;M++)b+=f[M];const C=l.morphTargetsRelative?1:1-b;u.getUniforms().setValue(i,"morphTargetBaseInfluence",C),u.getUniforms().setValue(i,"morphTargetInfluences",f)}u.getUniforms().setValue(i,"morphTargetsTexture",v.texture,e),u.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}return{update:r}}function lX(i,t,e,n){let s=new WeakMap;function r(u){const f=n.render.frame,m=u.geometry,g=t.get(u,m);if(s.get(g)!==f&&(t.update(g),s.set(g,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),s.get(u)!==f&&(e.update(u.instanceMatrix,i.ARRAY_BUFFER),u.instanceColor!==null&&e.update(u.instanceColor,i.ARRAY_BUFFER),s.set(u,f))),u.isSkinnedMesh){const v=u.skeleton;s.get(v)!==f&&(v.update(),s.set(v,f))}return g}function a(){s=new WeakMap}function l(u){const f=u.target;f.removeEventListener("dispose",l),e.remove(f.instanceMatrix),f.instanceColor!==null&&e.remove(f.instanceColor)}return{update:r,dispose:a}}const wO=new wi,dL=new Ox(1,1),RO=new wx,LO=new eM,DO=new Lx,pL=[],mL=[],gL=new Float32Array(16),vL=new Float32Array(9),yL=new Float32Array(4);function Ry(i,t,e){const n=i[0];if(n<=0||n>0)return i;const s=t*e;let r=pL[s];if(r===void 0&&(r=new Float32Array(s),pL[s]=r),t!==0){n.toArray(r,0);for(let a=1,l=0;a!==t;++a)l+=e,i[a].toArray(r,l)}return r}function Js(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function Zs(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function bM(i,t){let e=mL[t];e===void 0&&(e=new Int32Array(t),mL[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function cX(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function uX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Js(e,t))return;i.uniform2fv(this.addr,t),Zs(e,t)}}function hX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Js(e,t))return;i.uniform3fv(this.addr,t),Zs(e,t)}}function fX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Js(e,t))return;i.uniform4fv(this.addr,t),Zs(e,t)}}function dX(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Js(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),Zs(e,t)}else{if(Js(e,n))return;yL.set(n),i.uniformMatrix2fv(this.addr,!1,yL),Zs(e,n)}}function pX(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Js(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),Zs(e,t)}else{if(Js(e,n))return;vL.set(n),i.uniformMatrix3fv(this.addr,!1,vL),Zs(e,n)}}function mX(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Js(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),Zs(e,t)}else{if(Js(e,n))return;gL.set(n),i.uniformMatrix4fv(this.addr,!1,gL),Zs(e,n)}}function gX(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function vX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Js(e,t))return;i.uniform2iv(this.addr,t),Zs(e,t)}}function yX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Js(e,t))return;i.uniform3iv(this.addr,t),Zs(e,t)}}function _X(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Js(e,t))return;i.uniform4iv(this.addr,t),Zs(e,t)}}function AX(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function xX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Js(e,t))return;i.uniform2uiv(this.addr,t),Zs(e,t)}}function bX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Js(e,t))return;i.uniform3uiv(this.addr,t),Zs(e,t)}}function SX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Js(e,t))return;i.uniform4uiv(this.addr,t),Zs(e,t)}}function EX(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(dL.compareFunction=Bw,r=dL):r=wO,e.setTexture2D(t||r,s)}function MX(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTexture3D(t||LO,s)}function TX(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTextureCube(t||DO,s)}function CX(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTexture2DArray(t||RO,s)}function wX(i){switch(i){case 5126:return cX;case 35664:return uX;case 35665:return hX;case 35666:return fX;case 35674:return dX;case 35675:return pX;case 35676:return mX;case 5124:case 35670:return gX;case 35667:case 35671:return vX;case 35668:case 35672:return yX;case 35669:case 35673:return _X;case 5125:return AX;case 36294:return xX;case 36295:return bX;case 36296:return SX;case 35678:case 36198:case 36298:case 36306:case 35682:return EX;case 35679:case 36299:case 36307:return MX;case 35680:case 36300:case 36308:case 36293:return TX;case 36289:case 36303:case 36311:case 36292:return CX}}function RX(i,t){i.uniform1fv(this.addr,t)}function LX(i,t){const e=Ry(t,this.size,2);i.uniform2fv(this.addr,e)}function DX(i,t){const e=Ry(t,this.size,3);i.uniform3fv(this.addr,e)}function BX(i,t){const e=Ry(t,this.size,4);i.uniform4fv(this.addr,e)}function OX(i,t){const e=Ry(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function NX(i,t){const e=Ry(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function IX(i,t){const e=Ry(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function UX(i,t){i.uniform1iv(this.addr,t)}function PX(i,t){i.uniform2iv(this.addr,t)}function FX(i,t){i.uniform3iv(this.addr,t)}function HX(i,t){i.uniform4iv(this.addr,t)}function zX(i,t){i.uniform1uiv(this.addr,t)}function GX(i,t){i.uniform2uiv(this.addr,t)}function kX(i,t){i.uniform3uiv(this.addr,t)}function VX(i,t){i.uniform4uiv(this.addr,t)}function QX(i,t,e){const n=this.cache,s=t.length,r=bM(e,s);Js(n,r)||(i.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==s;++a)e.setTexture2D(t[a]||wO,r[a])}function jX(i,t,e){const n=this.cache,s=t.length,r=bM(e,s);Js(n,r)||(i.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==s;++a)e.setTexture3D(t[a]||LO,r[a])}function XX(i,t,e){const n=this.cache,s=t.length,r=bM(e,s);Js(n,r)||(i.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==s;++a)e.setTextureCube(t[a]||DO,r[a])}function qX(i,t,e){const n=this.cache,s=t.length,r=bM(e,s);Js(n,r)||(i.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==s;++a)e.setTexture2DArray(t[a]||RO,r[a])}function YX(i){switch(i){case 5126:return RX;case 35664:return LX;case 35665:return DX;case 35666:return BX;case 35674:return OX;case 35675:return NX;case 35676:return IX;case 5124:case 35670:return UX;case 35667:case 35671:return PX;case 35668:case 35672:return FX;case 35669:case 35673:return HX;case 5125:return zX;case 36294:return GX;case 36295:return kX;case 36296:return VX;case 35678:case 36198:case 36298:case 36306:case 35682:return QX;case 35679:case 36299:case 36307:return jX;case 35680:case 36300:case 36308:case 36293:return XX;case 36289:case 36303:case 36311:case 36292:return qX}}class WX{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=wX(e.type)}}class KX{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=YX(e.type)}}class JX{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const s=this.seq;for(let r=0,a=s.length;r!==a;++r){const l=s[r];l.setValue(t,e[l.id],n)}}}const C8=/(\w+)(\])?(\[|\.)?/g;function _L(i,t){i.seq.push(t),i.map[t.id]=t}function ZX(i,t,e){const n=i.name,s=n.length;for(C8.lastIndex=0;;){const r=C8.exec(n),a=C8.lastIndex;let l=r[1];const u=r[2]==="]",f=r[3];if(u&&(l=l|0),f===void 0||f==="["&&a+2===s){_L(e,f===void 0?new WX(l,i,t):new KX(l,i,t));break}else{let g=e.map[l];g===void 0&&(g=new JX(l),_L(e,g)),e=g}}}class O4{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=t.getActiveUniform(e,s),a=t.getUniformLocation(e,r.name);ZX(r,a,this)}}setValue(t,e,n,s){const r=this.map[e];r!==void 0&&r.setValue(t,n,s)}setOptional(t,e,n){const s=e[n];s!==void 0&&this.setValue(t,n,s)}static upload(t,e,n,s){for(let r=0,a=e.length;r!==a;++r){const l=e[r],u=n[l.id];u.needsUpdate!==!1&&l.setValue(t,u.value,s)}}static seqWithValue(t,e){const n=[];for(let s=0,r=t.length;s!==r;++s){const a=t[s];a.id in e&&n.push(a)}return n}}function AL(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const $X=37297;let tq=0;function eq(i,t){const e=i.split(`
`),n=[],s=Math.max(t-6,0),r=Math.min(t+6,e.length);for(let a=s;a<r;a++){const l=a+1;n.push(`${l===t?">":" "} ${l}: ${e[a]}`)}return n.join(`
`)}const xL=new on;function nq(i){Fn._getMatrix(xL,Fn.workingColorSpace,i);const t=`mat3( ${xL.elements.map(e=>e.toFixed(4))} )`;switch(Fn.getTransfer(i)){case J_:return[t,"LinearTransferOETF"];case fi:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[t,"LinearTransferOETF"]}}function bL(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),s=i.getShaderInfoLog(t).trim();if(n&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const a=parseInt(r[1]);return e.toUpperCase()+`

`+s+`

`+eq(i.getShaderSource(t),a)}else return s}function iq(i,t){const e=nq(t);return[`vec4 ${i}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function sq(i,t){let e;switch(t){case cB:e="Linear";break;case uB:e="Reinhard";break;case hB:e="Cineon";break;case bw:e="ACESFilmic";break;case dB:e="AgX";break;case pB:e="Neutral";break;case fB:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const h4=new et;function rq(){Fn.getLuminanceCoefficients(h4);const i=h4.x.toFixed(4),t=h4.y.toFixed(4),e=h4.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function aq(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(d_).join(`
`)}function oq(i){const t=[];for(const e in i){const n=i[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function lq(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(t,s),a=r.name;let l=1;r.type===i.FLOAT_MAT2&&(l=2),r.type===i.FLOAT_MAT3&&(l=3),r.type===i.FLOAT_MAT4&&(l=4),e[a]={type:r.type,location:i.getAttribLocation(t,a),locationSize:l}}return e}function d_(i){return i!==""}function SL(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function EL(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const cq=/^[ \t]*#include +<([\w\d./]+)>/gm;function D5(i){return i.replace(cq,hq)}const uq=new Map;function hq(i,t){let e=fn[t];if(e===void 0){const n=uq.get(t);if(n!==void 0)e=fn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return D5(e)}const fq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ML(i){return i.replace(fq,dq)}function dq(i,t,e,n){let s="";for(let r=parseInt(t);r<parseInt(e);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function TL(i){let t=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?t+=`
#define HIGH_PRECISION`:i.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function pq(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===QE?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===B_?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===cc&&(t="SHADOWMAP_TYPE_VSM"),t}function mq(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case rf:case $d:t="ENVMAP_TYPE_CUBE";break;case Sy:t="ENVMAP_TYPE_CUBE_UV";break}return t}function gq(i){let t="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case $d:t="ENVMAP_MODE_REFRACTION";break}return t}function vq(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Tx:t="ENVMAP_BLENDING_MULTIPLY";break;case oB:t="ENVMAP_BLENDING_MIX";break;case lB:t="ENVMAP_BLENDING_ADD";break}return t}function yq(i){const t=i.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:n,maxMip:e}}function _q(i,t,e,n){const s=i.getContext(),r=e.defines;let a=e.vertexShader,l=e.fragmentShader;const u=pq(e),f=mq(e),m=gq(e),g=vq(e),v=yq(e),_=aq(e),b=oq(r),C=s.createProgram();let M,S,R=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(M=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(d_).join(`
`),M.length>0&&(M+=`
`),S=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(d_).join(`
`),S.length>0&&(S+=`
`)):(M=[TL(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+m:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(d_).join(`
`),S=[TL(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.envMap?"#define "+m:"",e.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Lc?"#define TONE_MAPPING":"",e.toneMapping!==Lc?fn.tonemapping_pars_fragment:"",e.toneMapping!==Lc?sq("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",fn.colorspace_pars_fragment,iq("linearToOutputTexel",e.outputColorSpace),rq(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(d_).join(`
`)),a=D5(a),a=SL(a,e),a=EL(a,e),l=D5(l),l=SL(l,e),l=EL(l,e),a=ML(a),l=ML(l),e.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,M=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,S=["#define varying in",e.glslVersion===S5?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===S5?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const D=R+M+a,B=R+S+l,N=AL(s,s.VERTEX_SHADER,D),I=AL(s,s.FRAGMENT_SHADER,B);s.attachShader(C,N),s.attachShader(C,I),e.index0AttributeName!==void 0?s.bindAttribLocation(C,0,e.index0AttributeName):e.morphTargets===!0&&s.bindAttribLocation(C,0,"position"),s.linkProgram(C);function F(X){if(i.debug.checkShaderErrors){const ot=s.getProgramInfoLog(C).trim(),it=s.getShaderInfoLog(N).trim(),ut=s.getShaderInfoLog(I).trim();let dt=!0,j=!0;if(s.getProgramParameter(C,s.LINK_STATUS)===!1)if(dt=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,C,N,I);else{const tt=bL(s,N,"vertex"),nt=bL(s,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(C,s.VALIDATE_STATUS)+`

Material Name: `+X.name+`
Material Type: `+X.type+`

Program Info Log: `+ot+`
`+tt+`
`+nt)}else ot!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ot):(it===""||ut==="")&&(j=!1);j&&(X.diagnostics={runnable:dt,programLog:ot,vertexShader:{log:it,prefix:M},fragmentShader:{log:ut,prefix:S}})}s.deleteShader(N),s.deleteShader(I),z=new O4(s,C),U=lq(s,C)}let z;this.getUniforms=function(){return z===void 0&&F(this),z};let U;this.getAttributes=function(){return U===void 0&&F(this),U};let P=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=s.getProgramParameter(C,$X)),P},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(C),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=tq++,this.cacheKey=t,this.usedTimes=1,this.program=C,this.vertexShader=N,this.fragmentShader=I,this}let Aq=0;class xq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,s=this._getShaderStage(e),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return n===void 0&&(n=new bq(t),e.set(t,n)),n}}class bq{constructor(t){this.id=Aq++,this.code=t,this.usedTimes=0}}function Sq(i,t,e,n,s,r,a){const l=new my,u=new xq,f=new Set,m=[],g=s.logarithmicDepthBuffer,v=s.vertexTextures;let _=s.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function C(U){return f.add(U),U===0?"uv":`uv${U}`}function M(U,P,X,ot,it){const ut=ot.fog,dt=it.geometry,j=U.isMeshStandardMaterial?ot.environment:null,tt=(U.isMeshStandardMaterial?e:t).get(U.envMap||j),nt=tt&&tt.mapping===Sy?tt.image.height:null,_t=b[U.type];U.precision!==null&&(_=s.getMaxPrecision(U.precision),_!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",_,"instead."));const J=dt.morphAttributes.position||dt.morphAttributes.normal||dt.morphAttributes.color,at=J!==void 0?J.length:0;let xt=0;dt.morphAttributes.position!==void 0&&(xt=1),dt.morphAttributes.normal!==void 0&&(xt=2),dt.morphAttributes.color!==void 0&&(xt=3);let Et,ct,wt,Bt;if(_t){const Cn=Ec[_t];Et=Cn.vertexShader,ct=Cn.fragmentShader}else Et=U.vertexShader,ct=U.fragmentShader,u.update(U),wt=u.getVertexShaderID(U),Bt=u.getFragmentShaderID(U);const Ut=i.getRenderTarget(),Wt=i.state.buffers.depth.getReversed(),ve=it.isInstancedMesh===!0,ee=it.isBatchedMesh===!0,Ye=!!U.map,we=!!U.matcap,re=!!tt,Z=!!U.aoMap,Kt=!!U.lightMap,Ft=!!U.bumpMap,Vt=!!U.normalMap,Gt=!!U.displacementMap,be=!!U.emissiveMap,qt=!!U.metalnessMap,$=!!U.roughnessMap,Q=U.anisotropy>0,vt=U.clearcoat>0,It=U.dispersion>0,jt=U.iridescence>0,Ot=U.sheen>0,ne=U.transmission>0,te=Q&&!!U.anisotropyMap,ge=vt&&!!U.clearcoatMap,De=vt&&!!U.clearcoatNormalMap,Jt=vt&&!!U.clearcoatRoughnessMap,_e=jt&&!!U.iridescenceMap,Se=jt&&!!U.iridescenceThicknessMap,Te=Ot&&!!U.sheenColorMap,ce=Ot&&!!U.sheenRoughnessMap,rn=!!U.specularMap,He=!!U.specularColorMap,Gn=!!U.specularIntensityMap,mt=ne&&!!U.transmissionMap,ue=ne&&!!U.thicknessMap,Nt=!!U.gradientMap,Qt=!!U.alphaMap,fe=U.alphaTest>0,he=!!U.alphaHash,qe=!!U.extensions;let Jn=Lc;U.toneMapped&&(Ut===null||Ut.isXRRenderTarget===!0)&&(Jn=i.toneMapping);const Ei={shaderID:_t,shaderType:U.type,shaderName:U.name,vertexShader:Et,fragmentShader:ct,defines:U.defines,customVertexShaderID:wt,customFragmentShaderID:Bt,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:_,batching:ee,batchingColor:ee&&it._colorsTexture!==null,instancing:ve,instancingColor:ve&&it.instanceColor!==null,instancingMorph:ve&&it.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:Ut===null?i.outputColorSpace:Ut.isXRRenderTarget===!0?Ut.texture.colorSpace:zu,alphaToCoverage:!!U.alphaToCoverage,map:Ye,matcap:we,envMap:re,envMapMode:re&&tt.mapping,envMapCubeUVHeight:nt,aoMap:Z,lightMap:Kt,bumpMap:Ft,normalMap:Vt,displacementMap:v&&Gt,emissiveMap:be,normalMapObjectSpace:Vt&&U.normalMapType===xB,normalMapTangentSpace:Vt&&U.normalMapType===up,metalnessMap:qt,roughnessMap:$,anisotropy:Q,anisotropyMap:te,clearcoat:vt,clearcoatMap:ge,clearcoatNormalMap:De,clearcoatRoughnessMap:Jt,dispersion:It,iridescence:jt,iridescenceMap:_e,iridescenceThicknessMap:Se,sheen:Ot,sheenColorMap:Te,sheenRoughnessMap:ce,specularMap:rn,specularColorMap:He,specularIntensityMap:Gn,transmission:ne,transmissionMap:mt,thicknessMap:ue,gradientMap:Nt,opaque:U.transparent===!1&&U.blending===Ug&&U.alphaToCoverage===!1,alphaMap:Qt,alphaTest:fe,alphaHash:he,combine:U.combine,mapUv:Ye&&C(U.map.channel),aoMapUv:Z&&C(U.aoMap.channel),lightMapUv:Kt&&C(U.lightMap.channel),bumpMapUv:Ft&&C(U.bumpMap.channel),normalMapUv:Vt&&C(U.normalMap.channel),displacementMapUv:Gt&&C(U.displacementMap.channel),emissiveMapUv:be&&C(U.emissiveMap.channel),metalnessMapUv:qt&&C(U.metalnessMap.channel),roughnessMapUv:$&&C(U.roughnessMap.channel),anisotropyMapUv:te&&C(U.anisotropyMap.channel),clearcoatMapUv:ge&&C(U.clearcoatMap.channel),clearcoatNormalMapUv:De&&C(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Jt&&C(U.clearcoatRoughnessMap.channel),iridescenceMapUv:_e&&C(U.iridescenceMap.channel),iridescenceThicknessMapUv:Se&&C(U.iridescenceThicknessMap.channel),sheenColorMapUv:Te&&C(U.sheenColorMap.channel),sheenRoughnessMapUv:ce&&C(U.sheenRoughnessMap.channel),specularMapUv:rn&&C(U.specularMap.channel),specularColorMapUv:He&&C(U.specularColorMap.channel),specularIntensityMapUv:Gn&&C(U.specularIntensityMap.channel),transmissionMapUv:mt&&C(U.transmissionMap.channel),thicknessMapUv:ue&&C(U.thicknessMap.channel),alphaMapUv:Qt&&C(U.alphaMap.channel),vertexTangents:!!dt.attributes.tangent&&(Vt||Q),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!dt.attributes.color&&dt.attributes.color.itemSize===4,pointsUvs:it.isPoints===!0&&!!dt.attributes.uv&&(Ye||Qt),fog:!!ut,useFog:U.fog===!0,fogExp2:!!ut&&ut.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:Wt,skinning:it.isSkinnedMesh===!0,morphTargets:dt.morphAttributes.position!==void 0,morphNormals:dt.morphAttributes.normal!==void 0,morphColors:dt.morphAttributes.color!==void 0,morphTargetsCount:at,morphTextureStride:xt,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:U.dithering,shadowMapEnabled:i.shadowMap.enabled&&X.length>0,shadowMapType:i.shadowMap.type,toneMapping:Jn,decodeVideoTexture:Ye&&U.map.isVideoTexture===!0&&Fn.getTransfer(U.map.colorSpace)===fi,decodeVideoTextureEmissive:be&&U.emissiveMap.isVideoTexture===!0&&Fn.getTransfer(U.emissiveMap.colorSpace)===fi,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===Da,flipSided:U.side===qs,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:qe&&U.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(qe&&U.extensions.multiDraw===!0||ee)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return Ei.vertexUv1s=f.has(1),Ei.vertexUv2s=f.has(2),Ei.vertexUv3s=f.has(3),f.clear(),Ei}function S(U){const P=[];if(U.shaderID?P.push(U.shaderID):(P.push(U.customVertexShaderID),P.push(U.customFragmentShaderID)),U.defines!==void 0)for(const X in U.defines)P.push(X),P.push(U.defines[X]);return U.isRawShaderMaterial===!1&&(R(P,U),D(P,U),P.push(i.outputColorSpace)),P.push(U.customProgramCacheKey),P.join()}function R(U,P){U.push(P.precision),U.push(P.outputColorSpace),U.push(P.envMapMode),U.push(P.envMapCubeUVHeight),U.push(P.mapUv),U.push(P.alphaMapUv),U.push(P.lightMapUv),U.push(P.aoMapUv),U.push(P.bumpMapUv),U.push(P.normalMapUv),U.push(P.displacementMapUv),U.push(P.emissiveMapUv),U.push(P.metalnessMapUv),U.push(P.roughnessMapUv),U.push(P.anisotropyMapUv),U.push(P.clearcoatMapUv),U.push(P.clearcoatNormalMapUv),U.push(P.clearcoatRoughnessMapUv),U.push(P.iridescenceMapUv),U.push(P.iridescenceThicknessMapUv),U.push(P.sheenColorMapUv),U.push(P.sheenRoughnessMapUv),U.push(P.specularMapUv),U.push(P.specularColorMapUv),U.push(P.specularIntensityMapUv),U.push(P.transmissionMapUv),U.push(P.thicknessMapUv),U.push(P.combine),U.push(P.fogExp2),U.push(P.sizeAttenuation),U.push(P.morphTargetsCount),U.push(P.morphAttributeCount),U.push(P.numDirLights),U.push(P.numPointLights),U.push(P.numSpotLights),U.push(P.numSpotLightMaps),U.push(P.numHemiLights),U.push(P.numRectAreaLights),U.push(P.numDirLightShadows),U.push(P.numPointLightShadows),U.push(P.numSpotLightShadows),U.push(P.numSpotLightShadowsWithMaps),U.push(P.numLightProbes),U.push(P.shadowMapType),U.push(P.toneMapping),U.push(P.numClippingPlanes),U.push(P.numClipIntersection),U.push(P.depthPacking)}function D(U,P){l.disableAll(),P.supportsVertexTextures&&l.enable(0),P.instancing&&l.enable(1),P.instancingColor&&l.enable(2),P.instancingMorph&&l.enable(3),P.matcap&&l.enable(4),P.envMap&&l.enable(5),P.normalMapObjectSpace&&l.enable(6),P.normalMapTangentSpace&&l.enable(7),P.clearcoat&&l.enable(8),P.iridescence&&l.enable(9),P.alphaTest&&l.enable(10),P.vertexColors&&l.enable(11),P.vertexAlphas&&l.enable(12),P.vertexUv1s&&l.enable(13),P.vertexUv2s&&l.enable(14),P.vertexUv3s&&l.enable(15),P.vertexTangents&&l.enable(16),P.anisotropy&&l.enable(17),P.alphaHash&&l.enable(18),P.batching&&l.enable(19),P.dispersion&&l.enable(20),P.batchingColor&&l.enable(21),U.push(l.mask),l.disableAll(),P.fog&&l.enable(0),P.useFog&&l.enable(1),P.flatShading&&l.enable(2),P.logarithmicDepthBuffer&&l.enable(3),P.reverseDepthBuffer&&l.enable(4),P.skinning&&l.enable(5),P.morphTargets&&l.enable(6),P.morphNormals&&l.enable(7),P.morphColors&&l.enable(8),P.premultipliedAlpha&&l.enable(9),P.shadowMapEnabled&&l.enable(10),P.doubleSided&&l.enable(11),P.flipSided&&l.enable(12),P.useDepthPacking&&l.enable(13),P.dithering&&l.enable(14),P.transmission&&l.enable(15),P.sheen&&l.enable(16),P.opaque&&l.enable(17),P.pointsUvs&&l.enable(18),P.decodeVideoTexture&&l.enable(19),P.decodeVideoTextureEmissive&&l.enable(20),P.alphaToCoverage&&l.enable(21),U.push(l.mask)}function B(U){const P=b[U.type];let X;if(P){const ot=Ec[P];X=NB.clone(ot.uniforms)}else X=U.uniforms;return X}function N(U,P){let X;for(let ot=0,it=m.length;ot<it;ot++){const ut=m[ot];if(ut.cacheKey===P){X=ut,++X.usedTimes;break}}return X===void 0&&(X=new _q(i,P,U,r),m.push(X)),X}function I(U){if(--U.usedTimes===0){const P=m.indexOf(U);m[P]=m[m.length-1],m.pop(),U.destroy()}}function F(U){u.remove(U)}function z(){u.dispose()}return{getParameters:M,getProgramCacheKey:S,getUniforms:B,acquireProgram:N,releaseProgram:I,releaseShaderCache:F,programs:m,dispose:z}}function Eq(){let i=new WeakMap;function t(a){return i.has(a)}function e(a){let l=i.get(a);return l===void 0&&(l={},i.set(a,l)),l}function n(a){i.delete(a)}function s(a,l,u){i.get(a)[l]=u}function r(){i=new WeakMap}return{has:t,get:e,remove:n,update:s,dispose:r}}function Mq(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function CL(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function wL(){const i=[];let t=0;const e=[],n=[],s=[];function r(){t=0,e.length=0,n.length=0,s.length=0}function a(g,v,_,b,C,M){let S=i[t];return S===void 0?(S={id:g.id,object:g,geometry:v,material:_,groupOrder:b,renderOrder:g.renderOrder,z:C,group:M},i[t]=S):(S.id=g.id,S.object=g,S.geometry=v,S.material=_,S.groupOrder=b,S.renderOrder=g.renderOrder,S.z=C,S.group=M),t++,S}function l(g,v,_,b,C,M){const S=a(g,v,_,b,C,M);_.transmission>0?n.push(S):_.transparent===!0?s.push(S):e.push(S)}function u(g,v,_,b,C,M){const S=a(g,v,_,b,C,M);_.transmission>0?n.unshift(S):_.transparent===!0?s.unshift(S):e.unshift(S)}function f(g,v){e.length>1&&e.sort(g||Mq),n.length>1&&n.sort(v||CL),s.length>1&&s.sort(v||CL)}function m(){for(let g=t,v=i.length;g<v;g++){const _=i[g];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:e,transmissive:n,transparent:s,init:r,push:l,unshift:u,finish:m,sort:f}}function Tq(){let i=new WeakMap;function t(n,s){const r=i.get(n);let a;return r===void 0?(a=new wL,i.set(n,[a])):s>=r.length?(a=new wL,r.push(a)):a=r[s],a}function e(){i=new WeakMap}return{get:t,dispose:e}}function Cq(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new et,color:new oe};break;case"SpotLight":e={position:new et,direction:new et,color:new oe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new et,color:new oe,distance:0,decay:0};break;case"HemisphereLight":e={direction:new et,skyColor:new oe,groundColor:new oe};break;case"RectAreaLight":e={color:new oe,position:new et,halfWidth:new et,halfHeight:new et};break}return i[t.id]=e,e}}}function wq(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[t.id]=e,e}}}let Rq=0;function Lq(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function Dq(i){const t=new Cq,e=wq(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)n.probe.push(new et);const s=new et,r=new Ne,a=new Ne;function l(f){let m=0,g=0,v=0;for(let U=0;U<9;U++)n.probe[U].set(0,0,0);let _=0,b=0,C=0,M=0,S=0,R=0,D=0,B=0,N=0,I=0,F=0;f.sort(Lq);for(let U=0,P=f.length;U<P;U++){const X=f[U],ot=X.color,it=X.intensity,ut=X.distance,dt=X.shadow&&X.shadow.map?X.shadow.map.texture:null;if(X.isAmbientLight)m+=ot.r*it,g+=ot.g*it,v+=ot.b*it;else if(X.isLightProbe){for(let j=0;j<9;j++)n.probe[j].addScaledVector(X.sh.coefficients[j],it);F++}else if(X.isDirectionalLight){const j=t.get(X);if(j.color.copy(X.color).multiplyScalar(X.intensity),X.castShadow){const tt=X.shadow,nt=e.get(X);nt.shadowIntensity=tt.intensity,nt.shadowBias=tt.bias,nt.shadowNormalBias=tt.normalBias,nt.shadowRadius=tt.radius,nt.shadowMapSize=tt.mapSize,n.directionalShadow[_]=nt,n.directionalShadowMap[_]=dt,n.directionalShadowMatrix[_]=X.shadow.matrix,R++}n.directional[_]=j,_++}else if(X.isSpotLight){const j=t.get(X);j.position.setFromMatrixPosition(X.matrixWorld),j.color.copy(ot).multiplyScalar(it),j.distance=ut,j.coneCos=Math.cos(X.angle),j.penumbraCos=Math.cos(X.angle*(1-X.penumbra)),j.decay=X.decay,n.spot[C]=j;const tt=X.shadow;if(X.map&&(n.spotLightMap[N]=X.map,N++,tt.updateMatrices(X),X.castShadow&&I++),n.spotLightMatrix[C]=tt.matrix,X.castShadow){const nt=e.get(X);nt.shadowIntensity=tt.intensity,nt.shadowBias=tt.bias,nt.shadowNormalBias=tt.normalBias,nt.shadowRadius=tt.radius,nt.shadowMapSize=tt.mapSize,n.spotShadow[C]=nt,n.spotShadowMap[C]=dt,B++}C++}else if(X.isRectAreaLight){const j=t.get(X);j.color.copy(ot).multiplyScalar(it),j.halfWidth.set(X.width*.5,0,0),j.halfHeight.set(0,X.height*.5,0),n.rectArea[M]=j,M++}else if(X.isPointLight){const j=t.get(X);if(j.color.copy(X.color).multiplyScalar(X.intensity),j.distance=X.distance,j.decay=X.decay,X.castShadow){const tt=X.shadow,nt=e.get(X);nt.shadowIntensity=tt.intensity,nt.shadowBias=tt.bias,nt.shadowNormalBias=tt.normalBias,nt.shadowRadius=tt.radius,nt.shadowMapSize=tt.mapSize,nt.shadowCameraNear=tt.camera.near,nt.shadowCameraFar=tt.camera.far,n.pointShadow[b]=nt,n.pointShadowMap[b]=dt,n.pointShadowMatrix[b]=X.shadow.matrix,D++}n.point[b]=j,b++}else if(X.isHemisphereLight){const j=t.get(X);j.skyColor.copy(X.color).multiplyScalar(it),j.groundColor.copy(X.groundColor).multiplyScalar(it),n.hemi[S]=j,S++}}M>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=pe.LTC_FLOAT_1,n.rectAreaLTC2=pe.LTC_FLOAT_2):(n.rectAreaLTC1=pe.LTC_HALF_1,n.rectAreaLTC2=pe.LTC_HALF_2)),n.ambient[0]=m,n.ambient[1]=g,n.ambient[2]=v;const z=n.hash;(z.directionalLength!==_||z.pointLength!==b||z.spotLength!==C||z.rectAreaLength!==M||z.hemiLength!==S||z.numDirectionalShadows!==R||z.numPointShadows!==D||z.numSpotShadows!==B||z.numSpotMaps!==N||z.numLightProbes!==F)&&(n.directional.length=_,n.spot.length=C,n.rectArea.length=M,n.point.length=b,n.hemi.length=S,n.directionalShadow.length=R,n.directionalShadowMap.length=R,n.pointShadow.length=D,n.pointShadowMap.length=D,n.spotShadow.length=B,n.spotShadowMap.length=B,n.directionalShadowMatrix.length=R,n.pointShadowMatrix.length=D,n.spotLightMatrix.length=B+N-I,n.spotLightMap.length=N,n.numSpotLightShadowsWithMaps=I,n.numLightProbes=F,z.directionalLength=_,z.pointLength=b,z.spotLength=C,z.rectAreaLength=M,z.hemiLength=S,z.numDirectionalShadows=R,z.numPointShadows=D,z.numSpotShadows=B,z.numSpotMaps=N,z.numLightProbes=F,n.version=Rq++)}function u(f,m){let g=0,v=0,_=0,b=0,C=0;const M=m.matrixWorldInverse;for(let S=0,R=f.length;S<R;S++){const D=f[S];if(D.isDirectionalLight){const B=n.directional[g];B.direction.setFromMatrixPosition(D.matrixWorld),s.setFromMatrixPosition(D.target.matrixWorld),B.direction.sub(s),B.direction.transformDirection(M),g++}else if(D.isSpotLight){const B=n.spot[_];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(M),B.direction.setFromMatrixPosition(D.matrixWorld),s.setFromMatrixPosition(D.target.matrixWorld),B.direction.sub(s),B.direction.transformDirection(M),_++}else if(D.isRectAreaLight){const B=n.rectArea[b];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(M),a.identity(),r.copy(D.matrixWorld),r.premultiply(M),a.extractRotation(r),B.halfWidth.set(D.width*.5,0,0),B.halfHeight.set(0,D.height*.5,0),B.halfWidth.applyMatrix4(a),B.halfHeight.applyMatrix4(a),b++}else if(D.isPointLight){const B=n.point[v];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(M),v++}else if(D.isHemisphereLight){const B=n.hemi[C];B.direction.setFromMatrixPosition(D.matrixWorld),B.direction.transformDirection(M),C++}}}return{setup:l,setupView:u,state:n}}function RL(i){const t=new Dq(i),e=[],n=[];function s(m){f.camera=m,e.length=0,n.length=0}function r(m){e.push(m)}function a(m){n.push(m)}function l(){t.setup(e)}function u(m){t.setupView(e,m)}const f={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:s,state:f,setupLights:l,setupLightsView:u,pushLight:r,pushShadow:a}}function Bq(i){let t=new WeakMap;function e(s,r=0){const a=t.get(s);let l;return a===void 0?(l=new RL(i),t.set(s,[l])):r>=a.length?(l=new RL(i),a.push(l)):l=a[r],l}function n(){t=new WeakMap}return{get:e,dispose:n}}const Oq=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Nq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Iq(i,t,e){let n=new My;const s=new Pt,r=new Pt,a=new On,l=new Yw({depthPacking:AB}),u=new Ww,f={},m=e.maxTextureSize,g={[Dc]:qs,[qs]:Dc,[Da]:Da},v=new Ks({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Pt},radius:{value:4}},vertexShader:Oq,fragmentShader:Nq}),_=v.clone();_.defines.HORIZONTAL_PASS=1;const b=new $e;b.setAttribute("position",new zn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new as(b,v),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=QE;let S=this.type;this.render=function(I,F,z){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||I.length===0)return;const U=i.getRenderTarget(),P=i.getActiveCubeFace(),X=i.getActiveMipmapLevel(),ot=i.state;ot.setBlending(aa),ot.buffers.color.setClear(1,1,1,1),ot.buffers.depth.setTest(!0),ot.setScissorTest(!1);const it=S!==cc&&this.type===cc,ut=S===cc&&this.type!==cc;for(let dt=0,j=I.length;dt<j;dt++){const tt=I[dt],nt=tt.shadow;if(nt===void 0){console.warn("THREE.WebGLShadowMap:",tt,"has no shadow.");continue}if(nt.autoUpdate===!1&&nt.needsUpdate===!1)continue;s.copy(nt.mapSize);const _t=nt.getFrameExtents();if(s.multiply(_t),r.copy(nt.mapSize),(s.x>m||s.y>m)&&(s.x>m&&(r.x=Math.floor(m/_t.x),s.x=r.x*_t.x,nt.mapSize.x=r.x),s.y>m&&(r.y=Math.floor(m/_t.y),s.y=r.y*_t.y,nt.mapSize.y=r.y)),nt.map===null||it===!0||ut===!0){const at=this.type!==cc?{minFilter:os,magFilter:os}:{};nt.map!==null&&nt.map.dispose(),nt.map=new Ds(s.x,s.y,at),nt.map.texture.name=tt.name+".shadowMap",nt.camera.updateProjectionMatrix()}i.setRenderTarget(nt.map),i.clear();const J=nt.getViewportCount();for(let at=0;at<J;at++){const xt=nt.getViewport(at);a.set(r.x*xt.x,r.y*xt.y,r.x*xt.z,r.y*xt.w),ot.viewport(a),nt.updateMatrices(tt,at),n=nt.getFrustum(),B(F,z,nt.camera,tt,this.type)}nt.isPointLightShadow!==!0&&this.type===cc&&R(nt,z),nt.needsUpdate=!1}S=this.type,M.needsUpdate=!1,i.setRenderTarget(U,P,X)};function R(I,F){const z=t.update(C);v.defines.VSM_SAMPLES!==I.blurSamples&&(v.defines.VSM_SAMPLES=I.blurSamples,_.defines.VSM_SAMPLES=I.blurSamples,v.needsUpdate=!0,_.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Ds(s.x,s.y)),v.uniforms.shadow_pass.value=I.map.texture,v.uniforms.resolution.value=I.mapSize,v.uniforms.radius.value=I.radius,i.setRenderTarget(I.mapPass),i.clear(),i.renderBufferDirect(F,null,z,v,C,null),_.uniforms.shadow_pass.value=I.mapPass.texture,_.uniforms.resolution.value=I.mapSize,_.uniforms.radius.value=I.radius,i.setRenderTarget(I.map),i.clear(),i.renderBufferDirect(F,null,z,_,C,null)}function D(I,F,z,U){let P=null;const X=z.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(X!==void 0)P=X;else if(P=z.isPointLight===!0?u:l,i.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0||F.alphaToCoverage===!0){const ot=P.uuid,it=F.uuid;let ut=f[ot];ut===void 0&&(ut={},f[ot]=ut);let dt=ut[it];dt===void 0&&(dt=P.clone(),ut[it]=dt,F.addEventListener("dispose",N)),P=dt}if(P.visible=F.visible,P.wireframe=F.wireframe,U===cc?P.side=F.shadowSide!==null?F.shadowSide:F.side:P.side=F.shadowSide!==null?F.shadowSide:g[F.side],P.alphaMap=F.alphaMap,P.alphaTest=F.alphaToCoverage===!0?.5:F.alphaTest,P.map=F.map,P.clipShadows=F.clipShadows,P.clippingPlanes=F.clippingPlanes,P.clipIntersection=F.clipIntersection,P.displacementMap=F.displacementMap,P.displacementScale=F.displacementScale,P.displacementBias=F.displacementBias,P.wireframeLinewidth=F.wireframeLinewidth,P.linewidth=F.linewidth,z.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const ot=i.properties.get(P);ot.light=z}return P}function B(I,F,z,U,P){if(I.visible===!1)return;if(I.layers.test(F.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&P===cc)&&(!I.frustumCulled||n.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,I.matrixWorld);const it=t.update(I),ut=I.material;if(Array.isArray(ut)){const dt=it.groups;for(let j=0,tt=dt.length;j<tt;j++){const nt=dt[j],_t=ut[nt.materialIndex];if(_t&&_t.visible){const J=D(I,_t,U,P);I.onBeforeShadow(i,I,F,z,it,J,nt),i.renderBufferDirect(z,null,it,J,I,nt),I.onAfterShadow(i,I,F,z,it,J,nt)}}}else if(ut.visible){const dt=D(I,ut,U,P);I.onBeforeShadow(i,I,F,z,it,dt,null),i.renderBufferDirect(z,null,it,dt,I,null),I.onAfterShadow(i,I,F,z,it,dt,null)}}const ot=I.children;for(let it=0,ut=ot.length;it<ut;it++)B(ot[it],F,z,U,P)}function N(I){I.target.removeEventListener("dispose",N);for(const z in f){const U=f[z],P=I.target.uuid;P in U&&(U[P].dispose(),delete U[P])}}}const Uq={[_3]:A3,[x3]:E3,[b3]:M3,[zg]:S3,[A3]:_3,[E3]:x3,[M3]:b3,[S3]:zg};function Pq(i,t){function e(){let mt=!1;const ue=new On;let Nt=null;const Qt=new On(0,0,0,0);return{setMask:function(fe){Nt!==fe&&!mt&&(i.colorMask(fe,fe,fe,fe),Nt=fe)},setLocked:function(fe){mt=fe},setClear:function(fe,he,qe,Jn,Ei){Ei===!0&&(fe*=Jn,he*=Jn,qe*=Jn),ue.set(fe,he,qe,Jn),Qt.equals(ue)===!1&&(i.clearColor(fe,he,qe,Jn),Qt.copy(ue))},reset:function(){mt=!1,Nt=null,Qt.set(-1,0,0,0)}}}function n(){let mt=!1,ue=!1,Nt=null,Qt=null,fe=null;return{setReversed:function(he){if(ue!==he){const qe=t.get("EXT_clip_control");he?qe.clipControlEXT(qe.LOWER_LEFT_EXT,qe.ZERO_TO_ONE_EXT):qe.clipControlEXT(qe.LOWER_LEFT_EXT,qe.NEGATIVE_ONE_TO_ONE_EXT),ue=he;const Jn=fe;fe=null,this.setClear(Jn)}},getReversed:function(){return ue},setTest:function(he){he?Ut(i.DEPTH_TEST):Wt(i.DEPTH_TEST)},setMask:function(he){Nt!==he&&!mt&&(i.depthMask(he),Nt=he)},setFunc:function(he){if(ue&&(he=Uq[he]),Qt!==he){switch(he){case _3:i.depthFunc(i.NEVER);break;case A3:i.depthFunc(i.ALWAYS);break;case x3:i.depthFunc(i.LESS);break;case zg:i.depthFunc(i.LEQUAL);break;case b3:i.depthFunc(i.EQUAL);break;case S3:i.depthFunc(i.GEQUAL);break;case E3:i.depthFunc(i.GREATER);break;case M3:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Qt=he}},setLocked:function(he){mt=he},setClear:function(he){fe!==he&&(ue&&(he=1-he),i.clearDepth(he),fe=he)},reset:function(){mt=!1,Nt=null,Qt=null,fe=null,ue=!1}}}function s(){let mt=!1,ue=null,Nt=null,Qt=null,fe=null,he=null,qe=null,Jn=null,Ei=null;return{setTest:function(Cn){mt||(Cn?Ut(i.STENCIL_TEST):Wt(i.STENCIL_TEST))},setMask:function(Cn){ue!==Cn&&!mt&&(i.stencilMask(Cn),ue=Cn)},setFunc:function(Cn,Ur,ls){(Nt!==Cn||Qt!==Ur||fe!==ls)&&(i.stencilFunc(Cn,Ur,ls),Nt=Cn,Qt=Ur,fe=ls)},setOp:function(Cn,Ur,ls){(he!==Cn||qe!==Ur||Jn!==ls)&&(i.stencilOp(Cn,Ur,ls),he=Cn,qe=Ur,Jn=ls)},setLocked:function(Cn){mt=Cn},setClear:function(Cn){Ei!==Cn&&(i.clearStencil(Cn),Ei=Cn)},reset:function(){mt=!1,ue=null,Nt=null,Qt=null,fe=null,he=null,qe=null,Jn=null,Ei=null}}}const r=new e,a=new n,l=new s,u=new WeakMap,f=new WeakMap;let m={},g={},v=new WeakMap,_=[],b=null,C=!1,M=null,S=null,R=null,D=null,B=null,N=null,I=null,F=new oe(0,0,0),z=0,U=!1,P=null,X=null,ot=null,it=null,ut=null;const dt=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let j=!1,tt=0;const nt=i.getParameter(i.VERSION);nt.indexOf("WebGL")!==-1?(tt=parseFloat(/^WebGL (\d)/.exec(nt)[1]),j=tt>=1):nt.indexOf("OpenGL ES")!==-1&&(tt=parseFloat(/^OpenGL ES (\d)/.exec(nt)[1]),j=tt>=2);let _t=null,J={};const at=i.getParameter(i.SCISSOR_BOX),xt=i.getParameter(i.VIEWPORT),Et=new On().fromArray(at),ct=new On().fromArray(xt);function wt(mt,ue,Nt,Qt){const fe=new Uint8Array(4),he=i.createTexture();i.bindTexture(mt,he),i.texParameteri(mt,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(mt,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let qe=0;qe<Nt;qe++)mt===i.TEXTURE_3D||mt===i.TEXTURE_2D_ARRAY?i.texImage3D(ue,0,i.RGBA,1,1,Qt,0,i.RGBA,i.UNSIGNED_BYTE,fe):i.texImage2D(ue+qe,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,fe);return he}const Bt={};Bt[i.TEXTURE_2D]=wt(i.TEXTURE_2D,i.TEXTURE_2D,1),Bt[i.TEXTURE_CUBE_MAP]=wt(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Bt[i.TEXTURE_2D_ARRAY]=wt(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Bt[i.TEXTURE_3D]=wt(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),a.setClear(1),l.setClear(0),Ut(i.DEPTH_TEST),a.setFunc(zg),Ft(!1),Vt(v5),Ut(i.CULL_FACE),Z(aa);function Ut(mt){m[mt]!==!0&&(i.enable(mt),m[mt]=!0)}function Wt(mt){m[mt]!==!1&&(i.disable(mt),m[mt]=!1)}function ve(mt,ue){return g[mt]!==ue?(i.bindFramebuffer(mt,ue),g[mt]=ue,mt===i.DRAW_FRAMEBUFFER&&(g[i.FRAMEBUFFER]=ue),mt===i.FRAMEBUFFER&&(g[i.DRAW_FRAMEBUFFER]=ue),!0):!1}function ee(mt,ue){let Nt=_,Qt=!1;if(mt){Nt=v.get(ue),Nt===void 0&&(Nt=[],v.set(ue,Nt));const fe=mt.textures;if(Nt.length!==fe.length||Nt[0]!==i.COLOR_ATTACHMENT0){for(let he=0,qe=fe.length;he<qe;he++)Nt[he]=i.COLOR_ATTACHMENT0+he;Nt.length=fe.length,Qt=!0}}else Nt[0]!==i.BACK&&(Nt[0]=i.BACK,Qt=!0);Qt&&i.drawBuffers(Nt)}function Ye(mt){return b!==mt?(i.useProgram(mt),b=mt,!0):!1}const we={[gd]:i.FUNC_ADD,[QD]:i.FUNC_SUBTRACT,[jD]:i.FUNC_REVERSE_SUBTRACT};we[XD]=i.MIN,we[qD]=i.MAX;const re={[YD]:i.ZERO,[WD]:i.ONE,[KD]:i.SRC_COLOR,[v3]:i.SRC_ALPHA,[nB]:i.SRC_ALPHA_SATURATE,[tB]:i.DST_COLOR,[ZD]:i.DST_ALPHA,[JD]:i.ONE_MINUS_SRC_COLOR,[y3]:i.ONE_MINUS_SRC_ALPHA,[eB]:i.ONE_MINUS_DST_COLOR,[$D]:i.ONE_MINUS_DST_ALPHA,[iB]:i.CONSTANT_COLOR,[sB]:i.ONE_MINUS_CONSTANT_COLOR,[rB]:i.CONSTANT_ALPHA,[aB]:i.ONE_MINUS_CONSTANT_ALPHA};function Z(mt,ue,Nt,Qt,fe,he,qe,Jn,Ei,Cn){if(mt===aa){C===!0&&(Wt(i.BLEND),C=!1);return}if(C===!1&&(Ut(i.BLEND),C=!0),mt!==VD){if(mt!==M||Cn!==U){if((S!==gd||B!==gd)&&(i.blendEquation(i.FUNC_ADD),S=gd,B=gd),Cn)switch(mt){case Ug:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case y5:i.blendFunc(i.ONE,i.ONE);break;case _5:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case A5:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",mt);break}else switch(mt){case Ug:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case y5:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case _5:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case A5:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",mt);break}R=null,D=null,N=null,I=null,F.set(0,0,0),z=0,M=mt,U=Cn}return}fe=fe||ue,he=he||Nt,qe=qe||Qt,(ue!==S||fe!==B)&&(i.blendEquationSeparate(we[ue],we[fe]),S=ue,B=fe),(Nt!==R||Qt!==D||he!==N||qe!==I)&&(i.blendFuncSeparate(re[Nt],re[Qt],re[he],re[qe]),R=Nt,D=Qt,N=he,I=qe),(Jn.equals(F)===!1||Ei!==z)&&(i.blendColor(Jn.r,Jn.g,Jn.b,Ei),F.copy(Jn),z=Ei),M=mt,U=!1}function Kt(mt,ue){mt.side===Da?Wt(i.CULL_FACE):Ut(i.CULL_FACE);let Nt=mt.side===qs;ue&&(Nt=!Nt),Ft(Nt),mt.blending===Ug&&mt.transparent===!1?Z(aa):Z(mt.blending,mt.blendEquation,mt.blendSrc,mt.blendDst,mt.blendEquationAlpha,mt.blendSrcAlpha,mt.blendDstAlpha,mt.blendColor,mt.blendAlpha,mt.premultipliedAlpha),a.setFunc(mt.depthFunc),a.setTest(mt.depthTest),a.setMask(mt.depthWrite),r.setMask(mt.colorWrite);const Qt=mt.stencilWrite;l.setTest(Qt),Qt&&(l.setMask(mt.stencilWriteMask),l.setFunc(mt.stencilFunc,mt.stencilRef,mt.stencilFuncMask),l.setOp(mt.stencilFail,mt.stencilZFail,mt.stencilZPass)),be(mt.polygonOffset,mt.polygonOffsetFactor,mt.polygonOffsetUnits),mt.alphaToCoverage===!0?Ut(i.SAMPLE_ALPHA_TO_COVERAGE):Wt(i.SAMPLE_ALPHA_TO_COVERAGE)}function Ft(mt){P!==mt&&(mt?i.frontFace(i.CW):i.frontFace(i.CCW),P=mt)}function Vt(mt){mt!==zD?(Ut(i.CULL_FACE),mt!==X&&(mt===v5?i.cullFace(i.BACK):mt===GD?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Wt(i.CULL_FACE),X=mt}function Gt(mt){mt!==ot&&(j&&i.lineWidth(mt),ot=mt)}function be(mt,ue,Nt){mt?(Ut(i.POLYGON_OFFSET_FILL),(it!==ue||ut!==Nt)&&(i.polygonOffset(ue,Nt),it=ue,ut=Nt)):Wt(i.POLYGON_OFFSET_FILL)}function qt(mt){mt?Ut(i.SCISSOR_TEST):Wt(i.SCISSOR_TEST)}function $(mt){mt===void 0&&(mt=i.TEXTURE0+dt-1),_t!==mt&&(i.activeTexture(mt),_t=mt)}function Q(mt,ue,Nt){Nt===void 0&&(_t===null?Nt=i.TEXTURE0+dt-1:Nt=_t);let Qt=J[Nt];Qt===void 0&&(Qt={type:void 0,texture:void 0},J[Nt]=Qt),(Qt.type!==mt||Qt.texture!==ue)&&(_t!==Nt&&(i.activeTexture(Nt),_t=Nt),i.bindTexture(mt,ue||Bt[mt]),Qt.type=mt,Qt.texture=ue)}function vt(){const mt=J[_t];mt!==void 0&&mt.type!==void 0&&(i.bindTexture(mt.type,null),mt.type=void 0,mt.texture=void 0)}function It(){try{i.compressedTexImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function jt(){try{i.compressedTexImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Ot(){try{i.texSubImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function ne(){try{i.texSubImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function te(){try{i.compressedTexSubImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function ge(){try{i.compressedTexSubImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function De(){try{i.texStorage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Jt(){try{i.texStorage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function _e(){try{i.texImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Se(){try{i.texImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Te(mt){Et.equals(mt)===!1&&(i.scissor(mt.x,mt.y,mt.z,mt.w),Et.copy(mt))}function ce(mt){ct.equals(mt)===!1&&(i.viewport(mt.x,mt.y,mt.z,mt.w),ct.copy(mt))}function rn(mt,ue){let Nt=f.get(ue);Nt===void 0&&(Nt=new WeakMap,f.set(ue,Nt));let Qt=Nt.get(mt);Qt===void 0&&(Qt=i.getUniformBlockIndex(ue,mt.name),Nt.set(mt,Qt))}function He(mt,ue){const Qt=f.get(ue).get(mt);u.get(ue)!==Qt&&(i.uniformBlockBinding(ue,Qt,mt.__bindingPointIndex),u.set(ue,Qt))}function Gn(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),a.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),m={},_t=null,J={},g={},v=new WeakMap,_=[],b=null,C=!1,M=null,S=null,R=null,D=null,B=null,N=null,I=null,F=new oe(0,0,0),z=0,U=!1,P=null,X=null,ot=null,it=null,ut=null,Et.set(0,0,i.canvas.width,i.canvas.height),ct.set(0,0,i.canvas.width,i.canvas.height),r.reset(),a.reset(),l.reset()}return{buffers:{color:r,depth:a,stencil:l},enable:Ut,disable:Wt,bindFramebuffer:ve,drawBuffers:ee,useProgram:Ye,setBlending:Z,setMaterial:Kt,setFlipSided:Ft,setCullFace:Vt,setLineWidth:Gt,setPolygonOffset:be,setScissorTest:qt,activeTexture:$,bindTexture:Q,unbindTexture:vt,compressedTexImage2D:It,compressedTexImage3D:jt,texImage2D:_e,texImage3D:Se,updateUBOMapping:rn,uniformBlockBinding:He,texStorage2D:De,texStorage3D:Jt,texSubImage2D:Ot,texSubImage3D:ne,compressedTexSubImage2D:te,compressedTexSubImage3D:ge,scissor:Te,viewport:ce,reset:Gn}}function Fq(i,t,e,n,s,r,a){const l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new Pt,m=new WeakMap;let g;const v=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b($,Q){return _?new OffscreenCanvas($,Q):eA("canvas")}function C($,Q,vt){let It=1;const jt=qt($);if((jt.width>vt||jt.height>vt)&&(It=vt/Math.max(jt.width,jt.height)),It<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const Ot=Math.floor(It*jt.width),ne=Math.floor(It*jt.height);g===void 0&&(g=b(Ot,ne));const te=Q?b(Ot,ne):g;return te.width=Ot,te.height=ne,te.getContext("2d").drawImage($,0,0,Ot,ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+jt.width+"x"+jt.height+") to ("+Ot+"x"+ne+")."),te}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+jt.width+"x"+jt.height+")."),$;return $}function M($){return $.generateMipmaps}function S($){i.generateMipmap($)}function R($){return $.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?i.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function D($,Q,vt,It,jt=!1){if($!==null){if(i[$]!==void 0)return i[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Ot=Q;if(Q===i.RED&&(vt===i.FLOAT&&(Ot=i.R32F),vt===i.HALF_FLOAT&&(Ot=i.R16F),vt===i.UNSIGNED_BYTE&&(Ot=i.R8)),Q===i.RED_INTEGER&&(vt===i.UNSIGNED_BYTE&&(Ot=i.R8UI),vt===i.UNSIGNED_SHORT&&(Ot=i.R16UI),vt===i.UNSIGNED_INT&&(Ot=i.R32UI),vt===i.BYTE&&(Ot=i.R8I),vt===i.SHORT&&(Ot=i.R16I),vt===i.INT&&(Ot=i.R32I)),Q===i.RG&&(vt===i.FLOAT&&(Ot=i.RG32F),vt===i.HALF_FLOAT&&(Ot=i.RG16F),vt===i.UNSIGNED_BYTE&&(Ot=i.RG8)),Q===i.RG_INTEGER&&(vt===i.UNSIGNED_BYTE&&(Ot=i.RG8UI),vt===i.UNSIGNED_SHORT&&(Ot=i.RG16UI),vt===i.UNSIGNED_INT&&(Ot=i.RG32UI),vt===i.BYTE&&(Ot=i.RG8I),vt===i.SHORT&&(Ot=i.RG16I),vt===i.INT&&(Ot=i.RG32I)),Q===i.RGB_INTEGER&&(vt===i.UNSIGNED_BYTE&&(Ot=i.RGB8UI),vt===i.UNSIGNED_SHORT&&(Ot=i.RGB16UI),vt===i.UNSIGNED_INT&&(Ot=i.RGB32UI),vt===i.BYTE&&(Ot=i.RGB8I),vt===i.SHORT&&(Ot=i.RGB16I),vt===i.INT&&(Ot=i.RGB32I)),Q===i.RGBA_INTEGER&&(vt===i.UNSIGNED_BYTE&&(Ot=i.RGBA8UI),vt===i.UNSIGNED_SHORT&&(Ot=i.RGBA16UI),vt===i.UNSIGNED_INT&&(Ot=i.RGBA32UI),vt===i.BYTE&&(Ot=i.RGBA8I),vt===i.SHORT&&(Ot=i.RGBA16I),vt===i.INT&&(Ot=i.RGBA32I)),Q===i.RGB&&vt===i.UNSIGNED_INT_5_9_9_9_REV&&(Ot=i.RGB9_E5),Q===i.RGBA){const ne=jt?J_:Fn.getTransfer(It);vt===i.FLOAT&&(Ot=i.RGBA32F),vt===i.HALF_FLOAT&&(Ot=i.RGBA16F),vt===i.UNSIGNED_BYTE&&(Ot=ne===fi?i.SRGB8_ALPHA8:i.RGBA8),vt===i.UNSIGNED_SHORT_4_4_4_4&&(Ot=i.RGBA4),vt===i.UNSIGNED_SHORT_5_5_5_1&&(Ot=i.RGB5_A1)}return(Ot===i.R16F||Ot===i.R32F||Ot===i.RG16F||Ot===i.RG32F||Ot===i.RGBA16F||Ot===i.RGBA32F)&&t.get("EXT_color_buffer_float"),Ot}function B($,Q){let vt;return $?Q===null||Q===Hu||Q===Gg?vt=i.DEPTH24_STENCIL8:Q===Na?vt=i.DEPTH32F_STENCIL8:Q===uy&&(vt=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Q===null||Q===Hu||Q===Gg?vt=i.DEPTH_COMPONENT24:Q===Na?vt=i.DEPTH_COMPONENT32F:Q===uy&&(vt=i.DEPTH_COMPONENT16),vt}function N($,Q){return M($)===!0||$.isFramebufferTexture&&$.minFilter!==os&&$.minFilter!==Ni?Math.log2(Math.max(Q.width,Q.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?Q.mipmaps.length:1}function I($){const Q=$.target;Q.removeEventListener("dispose",I),z(Q),Q.isVideoTexture&&m.delete(Q)}function F($){const Q=$.target;Q.removeEventListener("dispose",F),P(Q)}function z($){const Q=n.get($);if(Q.__webglInit===void 0)return;const vt=$.source,It=v.get(vt);if(It){const jt=It[Q.__cacheKey];jt.usedTimes--,jt.usedTimes===0&&U($),Object.keys(It).length===0&&v.delete(vt)}n.remove($)}function U($){const Q=n.get($);i.deleteTexture(Q.__webglTexture);const vt=$.source,It=v.get(vt);delete It[Q.__cacheKey],a.memory.textures--}function P($){const Q=n.get($);if($.depthTexture&&($.depthTexture.dispose(),n.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let It=0;It<6;It++){if(Array.isArray(Q.__webglFramebuffer[It]))for(let jt=0;jt<Q.__webglFramebuffer[It].length;jt++)i.deleteFramebuffer(Q.__webglFramebuffer[It][jt]);else i.deleteFramebuffer(Q.__webglFramebuffer[It]);Q.__webglDepthbuffer&&i.deleteRenderbuffer(Q.__webglDepthbuffer[It])}else{if(Array.isArray(Q.__webglFramebuffer))for(let It=0;It<Q.__webglFramebuffer.length;It++)i.deleteFramebuffer(Q.__webglFramebuffer[It]);else i.deleteFramebuffer(Q.__webglFramebuffer);if(Q.__webglDepthbuffer&&i.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer)for(let It=0;It<Q.__webglColorRenderbuffer.length;It++)Q.__webglColorRenderbuffer[It]&&i.deleteRenderbuffer(Q.__webglColorRenderbuffer[It]);Q.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Q.__webglDepthRenderbuffer)}const vt=$.textures;for(let It=0,jt=vt.length;It<jt;It++){const Ot=n.get(vt[It]);Ot.__webglTexture&&(i.deleteTexture(Ot.__webglTexture),a.memory.textures--),n.remove(vt[It])}n.remove($)}let X=0;function ot(){X=0}function it(){const $=X;return $>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+s.maxTextures),X+=1,$}function ut($){const Q=[];return Q.push($.wrapS),Q.push($.wrapT),Q.push($.wrapR||0),Q.push($.magFilter),Q.push($.minFilter),Q.push($.anisotropy),Q.push($.internalFormat),Q.push($.format),Q.push($.type),Q.push($.generateMipmaps),Q.push($.premultiplyAlpha),Q.push($.flipY),Q.push($.unpackAlignment),Q.push($.colorSpace),Q.join()}function dt($,Q){const vt=n.get($);if($.isVideoTexture&&Gt($),$.isRenderTargetTexture===!1&&$.version>0&&vt.__version!==$.version){const It=$.image;if(It===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(It.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ct(vt,$,Q);return}}e.bindTexture(i.TEXTURE_2D,vt.__webglTexture,i.TEXTURE0+Q)}function j($,Q){const vt=n.get($);if($.version>0&&vt.__version!==$.version){ct(vt,$,Q);return}e.bindTexture(i.TEXTURE_2D_ARRAY,vt.__webglTexture,i.TEXTURE0+Q)}function tt($,Q){const vt=n.get($);if($.version>0&&vt.__version!==$.version){ct(vt,$,Q);return}e.bindTexture(i.TEXTURE_3D,vt.__webglTexture,i.TEXTURE0+Q)}function nt($,Q){const vt=n.get($);if($.version>0&&vt.__version!==$.version){wt(vt,$,Q);return}e.bindTexture(i.TEXTURE_CUBE_MAP,vt.__webglTexture,i.TEXTURE0+Q)}const _t={[tp]:i.REPEAT,[zo]:i.CLAMP_TO_EDGE,[cy]:i.MIRRORED_REPEAT},J={[os]:i.NEAREST,[XE]:i.NEAREST_MIPMAP_NEAREST,[Om]:i.NEAREST_MIPMAP_LINEAR,[Ni]:i.LINEAR,[Z1]:i.LINEAR_MIPMAP_NEAREST,[Cl]:i.LINEAR_MIPMAP_LINEAR},at={[bB]:i.NEVER,[wB]:i.ALWAYS,[SB]:i.LESS,[Bw]:i.LEQUAL,[EB]:i.EQUAL,[CB]:i.GEQUAL,[MB]:i.GREATER,[TB]:i.NOTEQUAL};function xt($,Q){if(Q.type===Na&&t.has("OES_texture_float_linear")===!1&&(Q.magFilter===Ni||Q.magFilter===Z1||Q.magFilter===Om||Q.magFilter===Cl||Q.minFilter===Ni||Q.minFilter===Z1||Q.minFilter===Om||Q.minFilter===Cl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri($,i.TEXTURE_WRAP_S,_t[Q.wrapS]),i.texParameteri($,i.TEXTURE_WRAP_T,_t[Q.wrapT]),($===i.TEXTURE_3D||$===i.TEXTURE_2D_ARRAY)&&i.texParameteri($,i.TEXTURE_WRAP_R,_t[Q.wrapR]),i.texParameteri($,i.TEXTURE_MAG_FILTER,J[Q.magFilter]),i.texParameteri($,i.TEXTURE_MIN_FILTER,J[Q.minFilter]),Q.compareFunction&&(i.texParameteri($,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri($,i.TEXTURE_COMPARE_FUNC,at[Q.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(Q.magFilter===os||Q.minFilter!==Om&&Q.minFilter!==Cl||Q.type===Na&&t.has("OES_texture_float_linear")===!1)return;if(Q.anisotropy>1||n.get(Q).__currentAnisotropy){const vt=t.get("EXT_texture_filter_anisotropic");i.texParameterf($,vt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Q.anisotropy,s.getMaxAnisotropy())),n.get(Q).__currentAnisotropy=Q.anisotropy}}}function Et($,Q){let vt=!1;$.__webglInit===void 0&&($.__webglInit=!0,Q.addEventListener("dispose",I));const It=Q.source;let jt=v.get(It);jt===void 0&&(jt={},v.set(It,jt));const Ot=ut(Q);if(Ot!==$.__cacheKey){jt[Ot]===void 0&&(jt[Ot]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,vt=!0),jt[Ot].usedTimes++;const ne=jt[$.__cacheKey];ne!==void 0&&(jt[$.__cacheKey].usedTimes--,ne.usedTimes===0&&U(Q)),$.__cacheKey=Ot,$.__webglTexture=jt[Ot].texture}return vt}function ct($,Q,vt){let It=i.TEXTURE_2D;(Q.isDataArrayTexture||Q.isCompressedArrayTexture)&&(It=i.TEXTURE_2D_ARRAY),Q.isData3DTexture&&(It=i.TEXTURE_3D);const jt=Et($,Q),Ot=Q.source;e.bindTexture(It,$.__webglTexture,i.TEXTURE0+vt);const ne=n.get(Ot);if(Ot.version!==ne.__version||jt===!0){e.activeTexture(i.TEXTURE0+vt);const te=Fn.getPrimaries(Fn.workingColorSpace),ge=Q.colorSpace===Mc?null:Fn.getPrimaries(Q.colorSpace),De=Q.colorSpace===Mc||te===ge?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Q.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Q.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,De);let Jt=C(Q.image,!1,s.maxTextureSize);Jt=be(Q,Jt);const _e=r.convert(Q.format,Q.colorSpace),Se=r.convert(Q.type);let Te=D(Q.internalFormat,_e,Se,Q.colorSpace,Q.isVideoTexture);xt(It,Q);let ce;const rn=Q.mipmaps,He=Q.isVideoTexture!==!0,Gn=ne.__version===void 0||jt===!0,mt=Ot.dataReady,ue=N(Q,Jt);if(Q.isDepthTexture)Te=B(Q.format===kg,Q.type),Gn&&(He?e.texStorage2D(i.TEXTURE_2D,1,Te,Jt.width,Jt.height):e.texImage2D(i.TEXTURE_2D,0,Te,Jt.width,Jt.height,0,_e,Se,null));else if(Q.isDataTexture)if(rn.length>0){He&&Gn&&e.texStorage2D(i.TEXTURE_2D,ue,Te,rn[0].width,rn[0].height);for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)ce=rn[Nt],He?mt&&e.texSubImage2D(i.TEXTURE_2D,Nt,0,0,ce.width,ce.height,_e,Se,ce.data):e.texImage2D(i.TEXTURE_2D,Nt,Te,ce.width,ce.height,0,_e,Se,ce.data);Q.generateMipmaps=!1}else He?(Gn&&e.texStorage2D(i.TEXTURE_2D,ue,Te,Jt.width,Jt.height),mt&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,Jt.width,Jt.height,_e,Se,Jt.data)):e.texImage2D(i.TEXTURE_2D,0,Te,Jt.width,Jt.height,0,_e,Se,Jt.data);else if(Q.isCompressedTexture)if(Q.isCompressedArrayTexture){He&&Gn&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ue,Te,rn[0].width,rn[0].height,Jt.depth);for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)if(ce=rn[Nt],Q.format!==ia)if(_e!==null)if(He){if(mt)if(Q.layerUpdates.size>0){const fe=R5(ce.width,ce.height,Q.format,Q.type);for(const he of Q.layerUpdates){const qe=ce.data.subarray(he*fe/ce.data.BYTES_PER_ELEMENT,(he+1)*fe/ce.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Nt,0,0,he,ce.width,ce.height,1,_e,qe)}Q.clearLayerUpdates()}else e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Nt,0,0,0,ce.width,ce.height,Jt.depth,_e,ce.data)}else e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Nt,Te,ce.width,ce.height,Jt.depth,0,ce.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else He?mt&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,Nt,0,0,0,ce.width,ce.height,Jt.depth,_e,Se,ce.data):e.texImage3D(i.TEXTURE_2D_ARRAY,Nt,Te,ce.width,ce.height,Jt.depth,0,_e,Se,ce.data)}else{He&&Gn&&e.texStorage2D(i.TEXTURE_2D,ue,Te,rn[0].width,rn[0].height);for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)ce=rn[Nt],Q.format!==ia?_e!==null?He?mt&&e.compressedTexSubImage2D(i.TEXTURE_2D,Nt,0,0,ce.width,ce.height,_e,ce.data):e.compressedTexImage2D(i.TEXTURE_2D,Nt,Te,ce.width,ce.height,0,ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?mt&&e.texSubImage2D(i.TEXTURE_2D,Nt,0,0,ce.width,ce.height,_e,Se,ce.data):e.texImage2D(i.TEXTURE_2D,Nt,Te,ce.width,ce.height,0,_e,Se,ce.data)}else if(Q.isDataArrayTexture)if(He){if(Gn&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ue,Te,Jt.width,Jt.height,Jt.depth),mt)if(Q.layerUpdates.size>0){const Nt=R5(Jt.width,Jt.height,Q.format,Q.type);for(const Qt of Q.layerUpdates){const fe=Jt.data.subarray(Qt*Nt/Jt.data.BYTES_PER_ELEMENT,(Qt+1)*Nt/Jt.data.BYTES_PER_ELEMENT);e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Qt,Jt.width,Jt.height,1,_e,Se,fe)}Q.clearLayerUpdates()}else e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Jt.width,Jt.height,Jt.depth,_e,Se,Jt.data)}else e.texImage3D(i.TEXTURE_2D_ARRAY,0,Te,Jt.width,Jt.height,Jt.depth,0,_e,Se,Jt.data);else if(Q.isData3DTexture)He?(Gn&&e.texStorage3D(i.TEXTURE_3D,ue,Te,Jt.width,Jt.height,Jt.depth),mt&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Jt.width,Jt.height,Jt.depth,_e,Se,Jt.data)):e.texImage3D(i.TEXTURE_3D,0,Te,Jt.width,Jt.height,Jt.depth,0,_e,Se,Jt.data);else if(Q.isFramebufferTexture){if(Gn)if(He)e.texStorage2D(i.TEXTURE_2D,ue,Te,Jt.width,Jt.height);else{let Nt=Jt.width,Qt=Jt.height;for(let fe=0;fe<ue;fe++)e.texImage2D(i.TEXTURE_2D,fe,Te,Nt,Qt,0,_e,Se,null),Nt>>=1,Qt>>=1}}else if(rn.length>0){if(He&&Gn){const Nt=qt(rn[0]);e.texStorage2D(i.TEXTURE_2D,ue,Te,Nt.width,Nt.height)}for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)ce=rn[Nt],He?mt&&e.texSubImage2D(i.TEXTURE_2D,Nt,0,0,_e,Se,ce):e.texImage2D(i.TEXTURE_2D,Nt,Te,_e,Se,ce);Q.generateMipmaps=!1}else if(He){if(Gn){const Nt=qt(Jt);e.texStorage2D(i.TEXTURE_2D,ue,Te,Nt.width,Nt.height)}mt&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,_e,Se,Jt)}else e.texImage2D(i.TEXTURE_2D,0,Te,_e,Se,Jt);M(Q)&&S(It),ne.__version=Ot.version,Q.onUpdate&&Q.onUpdate(Q)}$.__version=Q.version}function wt($,Q,vt){if(Q.image.length!==6)return;const It=Et($,Q),jt=Q.source;e.bindTexture(i.TEXTURE_CUBE_MAP,$.__webglTexture,i.TEXTURE0+vt);const Ot=n.get(jt);if(jt.version!==Ot.__version||It===!0){e.activeTexture(i.TEXTURE0+vt);const ne=Fn.getPrimaries(Fn.workingColorSpace),te=Q.colorSpace===Mc?null:Fn.getPrimaries(Q.colorSpace),ge=Q.colorSpace===Mc||ne===te?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Q.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Q.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ge);const De=Q.isCompressedTexture||Q.image[0].isCompressedTexture,Jt=Q.image[0]&&Q.image[0].isDataTexture,_e=[];for(let Qt=0;Qt<6;Qt++)!De&&!Jt?_e[Qt]=C(Q.image[Qt],!0,s.maxCubemapSize):_e[Qt]=Jt?Q.image[Qt].image:Q.image[Qt],_e[Qt]=be(Q,_e[Qt]);const Se=_e[0],Te=r.convert(Q.format,Q.colorSpace),ce=r.convert(Q.type),rn=D(Q.internalFormat,Te,ce,Q.colorSpace),He=Q.isVideoTexture!==!0,Gn=Ot.__version===void 0||It===!0,mt=jt.dataReady;let ue=N(Q,Se);xt(i.TEXTURE_CUBE_MAP,Q);let Nt;if(De){He&&Gn&&e.texStorage2D(i.TEXTURE_CUBE_MAP,ue,rn,Se.width,Se.height);for(let Qt=0;Qt<6;Qt++){Nt=_e[Qt].mipmaps;for(let fe=0;fe<Nt.length;fe++){const he=Nt[fe];Q.format!==ia?Te!==null?He?mt&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe,0,0,he.width,he.height,Te,he.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe,rn,he.width,he.height,0,he.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe,0,0,he.width,he.height,Te,ce,he.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe,rn,he.width,he.height,0,Te,ce,he.data)}}}else{if(Nt=Q.mipmaps,He&&Gn){Nt.length>0&&ue++;const Qt=qt(_e[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,ue,rn,Qt.width,Qt.height)}for(let Qt=0;Qt<6;Qt++)if(Jt){He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,0,0,_e[Qt].width,_e[Qt].height,Te,ce,_e[Qt].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,rn,_e[Qt].width,_e[Qt].height,0,Te,ce,_e[Qt].data);for(let fe=0;fe<Nt.length;fe++){const qe=Nt[fe].image[Qt].image;He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe+1,0,0,qe.width,qe.height,Te,ce,qe.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe+1,rn,qe.width,qe.height,0,Te,ce,qe.data)}}else{He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,0,0,Te,ce,_e[Qt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,rn,Te,ce,_e[Qt]);for(let fe=0;fe<Nt.length;fe++){const he=Nt[fe];He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe+1,0,0,Te,ce,he.image[Qt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe+1,rn,Te,ce,he.image[Qt])}}}M(Q)&&S(i.TEXTURE_CUBE_MAP),Ot.__version=jt.version,Q.onUpdate&&Q.onUpdate(Q)}$.__version=Q.version}function Bt($,Q,vt,It,jt,Ot){const ne=r.convert(vt.format,vt.colorSpace),te=r.convert(vt.type),ge=D(vt.internalFormat,ne,te,vt.colorSpace),De=n.get(Q),Jt=n.get(vt);if(Jt.__renderTarget=Q,!De.__hasExternalTextures){const _e=Math.max(1,Q.width>>Ot),Se=Math.max(1,Q.height>>Ot);jt===i.TEXTURE_3D||jt===i.TEXTURE_2D_ARRAY?e.texImage3D(jt,Ot,ge,_e,Se,Q.depth,0,ne,te,null):e.texImage2D(jt,Ot,ge,_e,Se,0,ne,te,null)}e.bindFramebuffer(i.FRAMEBUFFER,$),Vt(Q)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,It,jt,Jt.__webglTexture,0,Ft(Q)):(jt===i.TEXTURE_2D||jt>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&jt<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,It,jt,Jt.__webglTexture,Ot),e.bindFramebuffer(i.FRAMEBUFFER,null)}function Ut($,Q,vt){if(i.bindRenderbuffer(i.RENDERBUFFER,$),Q.depthBuffer){const It=Q.depthTexture,jt=It&&It.isDepthTexture?It.type:null,Ot=B(Q.stencilBuffer,jt),ne=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,te=Ft(Q);Vt(Q)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,te,Ot,Q.width,Q.height):vt?i.renderbufferStorageMultisample(i.RENDERBUFFER,te,Ot,Q.width,Q.height):i.renderbufferStorage(i.RENDERBUFFER,Ot,Q.width,Q.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,ne,i.RENDERBUFFER,$)}else{const It=Q.textures;for(let jt=0;jt<It.length;jt++){const Ot=It[jt],ne=r.convert(Ot.format,Ot.colorSpace),te=r.convert(Ot.type),ge=D(Ot.internalFormat,ne,te,Ot.colorSpace),De=Ft(Q);vt&&Vt(Q)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,De,ge,Q.width,Q.height):Vt(Q)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,De,ge,Q.width,Q.height):i.renderbufferStorage(i.RENDERBUFFER,ge,Q.width,Q.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Wt($,Q){if(Q&&Q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(i.FRAMEBUFFER,$),!(Q.depthTexture&&Q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const It=n.get(Q.depthTexture);It.__renderTarget=Q,(!It.__webglTexture||Q.depthTexture.image.width!==Q.width||Q.depthTexture.image.height!==Q.height)&&(Q.depthTexture.image.width=Q.width,Q.depthTexture.image.height=Q.height,Q.depthTexture.needsUpdate=!0),dt(Q.depthTexture,0);const jt=It.__webglTexture,Ot=Ft(Q);if(Q.depthTexture.format===hy)Vt(Q)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,jt,0,Ot):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,jt,0);else if(Q.depthTexture.format===kg)Vt(Q)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,jt,0,Ot):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,jt,0);else throw new Error("Unknown depthTexture format")}function ve($){const Q=n.get($),vt=$.isWebGLCubeRenderTarget===!0;if(Q.__boundDepthTexture!==$.depthTexture){const It=$.depthTexture;if(Q.__depthDisposeCallback&&Q.__depthDisposeCallback(),It){const jt=()=>{delete Q.__boundDepthTexture,delete Q.__depthDisposeCallback,It.removeEventListener("dispose",jt)};It.addEventListener("dispose",jt),Q.__depthDisposeCallback=jt}Q.__boundDepthTexture=It}if($.depthTexture&&!Q.__autoAllocateDepthBuffer){if(vt)throw new Error("target.depthTexture not supported in Cube render targets");const It=$.texture.mipmaps;It&&It.length>0?Wt(Q.__webglFramebuffer[0],$):Wt(Q.__webglFramebuffer,$)}else if(vt){Q.__webglDepthbuffer=[];for(let It=0;It<6;It++)if(e.bindFramebuffer(i.FRAMEBUFFER,Q.__webglFramebuffer[It]),Q.__webglDepthbuffer[It]===void 0)Q.__webglDepthbuffer[It]=i.createRenderbuffer(),Ut(Q.__webglDepthbuffer[It],$,!1);else{const jt=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ot=Q.__webglDepthbuffer[It];i.bindRenderbuffer(i.RENDERBUFFER,Ot),i.framebufferRenderbuffer(i.FRAMEBUFFER,jt,i.RENDERBUFFER,Ot)}}else{const It=$.texture.mipmaps;if(It&&It.length>0?e.bindFramebuffer(i.FRAMEBUFFER,Q.__webglFramebuffer[0]):e.bindFramebuffer(i.FRAMEBUFFER,Q.__webglFramebuffer),Q.__webglDepthbuffer===void 0)Q.__webglDepthbuffer=i.createRenderbuffer(),Ut(Q.__webglDepthbuffer,$,!1);else{const jt=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ot=Q.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Ot),i.framebufferRenderbuffer(i.FRAMEBUFFER,jt,i.RENDERBUFFER,Ot)}}e.bindFramebuffer(i.FRAMEBUFFER,null)}function ee($,Q,vt){const It=n.get($);Q!==void 0&&Bt(It.__webglFramebuffer,$,$.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),vt!==void 0&&ve($)}function Ye($){const Q=$.texture,vt=n.get($),It=n.get(Q);$.addEventListener("dispose",F);const jt=$.textures,Ot=$.isWebGLCubeRenderTarget===!0,ne=jt.length>1;if(ne||(It.__webglTexture===void 0&&(It.__webglTexture=i.createTexture()),It.__version=Q.version,a.memory.textures++),Ot){vt.__webglFramebuffer=[];for(let te=0;te<6;te++)if(Q.mipmaps&&Q.mipmaps.length>0){vt.__webglFramebuffer[te]=[];for(let ge=0;ge<Q.mipmaps.length;ge++)vt.__webglFramebuffer[te][ge]=i.createFramebuffer()}else vt.__webglFramebuffer[te]=i.createFramebuffer()}else{if(Q.mipmaps&&Q.mipmaps.length>0){vt.__webglFramebuffer=[];for(let te=0;te<Q.mipmaps.length;te++)vt.__webglFramebuffer[te]=i.createFramebuffer()}else vt.__webglFramebuffer=i.createFramebuffer();if(ne)for(let te=0,ge=jt.length;te<ge;te++){const De=n.get(jt[te]);De.__webglTexture===void 0&&(De.__webglTexture=i.createTexture(),a.memory.textures++)}if($.samples>0&&Vt($)===!1){vt.__webglMultisampledFramebuffer=i.createFramebuffer(),vt.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,vt.__webglMultisampledFramebuffer);for(let te=0;te<jt.length;te++){const ge=jt[te];vt.__webglColorRenderbuffer[te]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,vt.__webglColorRenderbuffer[te]);const De=r.convert(ge.format,ge.colorSpace),Jt=r.convert(ge.type),_e=D(ge.internalFormat,De,Jt,ge.colorSpace,$.isXRRenderTarget===!0),Se=Ft($);i.renderbufferStorageMultisample(i.RENDERBUFFER,Se,_e,$.width,$.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+te,i.RENDERBUFFER,vt.__webglColorRenderbuffer[te])}i.bindRenderbuffer(i.RENDERBUFFER,null),$.depthBuffer&&(vt.__webglDepthRenderbuffer=i.createRenderbuffer(),Ut(vt.__webglDepthRenderbuffer,$,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Ot){e.bindTexture(i.TEXTURE_CUBE_MAP,It.__webglTexture),xt(i.TEXTURE_CUBE_MAP,Q);for(let te=0;te<6;te++)if(Q.mipmaps&&Q.mipmaps.length>0)for(let ge=0;ge<Q.mipmaps.length;ge++)Bt(vt.__webglFramebuffer[te][ge],$,Q,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+te,ge);else Bt(vt.__webglFramebuffer[te],$,Q,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+te,0);M(Q)&&S(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(ne){for(let te=0,ge=jt.length;te<ge;te++){const De=jt[te],Jt=n.get(De);e.bindTexture(i.TEXTURE_2D,Jt.__webglTexture),xt(i.TEXTURE_2D,De),Bt(vt.__webglFramebuffer,$,De,i.COLOR_ATTACHMENT0+te,i.TEXTURE_2D,0),M(De)&&S(i.TEXTURE_2D)}e.unbindTexture()}else{let te=i.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(te=$.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(te,It.__webglTexture),xt(te,Q),Q.mipmaps&&Q.mipmaps.length>0)for(let ge=0;ge<Q.mipmaps.length;ge++)Bt(vt.__webglFramebuffer[ge],$,Q,i.COLOR_ATTACHMENT0,te,ge);else Bt(vt.__webglFramebuffer,$,Q,i.COLOR_ATTACHMENT0,te,0);M(Q)&&S(te),e.unbindTexture()}$.depthBuffer&&ve($)}function we($){const Q=$.textures;for(let vt=0,It=Q.length;vt<It;vt++){const jt=Q[vt];if(M(jt)){const Ot=R($),ne=n.get(jt).__webglTexture;e.bindTexture(Ot,ne),S(Ot),e.unbindTexture()}}}const re=[],Z=[];function Kt($){if($.samples>0){if(Vt($)===!1){const Q=$.textures,vt=$.width,It=$.height;let jt=i.COLOR_BUFFER_BIT;const Ot=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ne=n.get($),te=Q.length>1;if(te)for(let De=0;De<Q.length;De++)e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,ne.__webglMultisampledFramebuffer);const ge=$.texture.mipmaps;ge&&ge.length>0?e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ne.__webglFramebuffer[0]):e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ne.__webglFramebuffer);for(let De=0;De<Q.length;De++){if($.resolveDepthBuffer&&($.depthBuffer&&(jt|=i.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(jt|=i.STENCIL_BUFFER_BIT)),te){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,ne.__webglColorRenderbuffer[De]);const Jt=n.get(Q[De]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Jt,0)}i.blitFramebuffer(0,0,vt,It,0,0,vt,It,jt,i.NEAREST),u===!0&&(re.length=0,Z.length=0,re.push(i.COLOR_ATTACHMENT0+De),$.depthBuffer&&$.resolveDepthBuffer===!1&&(re.push(Ot),Z.push(Ot),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Z)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,re))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),te)for(let De=0;De<Q.length;De++){e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.RENDERBUFFER,ne.__webglColorRenderbuffer[De]);const Jt=n.get(Q[De]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.TEXTURE_2D,Jt,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ne.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&u){const Q=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Q])}}}function Ft($){return Math.min(s.maxSamples,$.samples)}function Vt($){const Q=n.get($);return $.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&Q.__useRenderToTexture!==!1}function Gt($){const Q=a.render.frame;m.get($)!==Q&&(m.set($,Q),$.update())}function be($,Q){const vt=$.colorSpace,It=$.format,jt=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||vt!==zu&&vt!==Mc&&(Fn.getTransfer(vt)===fi?(It!==ia||jt!==Ws)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",vt)),Q}function qt($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(f.width=$.naturalWidth||$.width,f.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(f.width=$.displayWidth,f.height=$.displayHeight):(f.width=$.width,f.height=$.height),f}this.allocateTextureUnit=it,this.resetTextureUnits=ot,this.setTexture2D=dt,this.setTexture2DArray=j,this.setTexture3D=tt,this.setTextureCube=nt,this.rebindTextures=ee,this.setupRenderTarget=Ye,this.updateRenderTargetMipmap=we,this.updateMultisampleRenderTarget=Kt,this.setupDepthRenderbuffer=ve,this.setupFrameBufferTexture=Bt,this.useMultisampledRTT=Vt}function BO(i,t){function e(n,s=Mc){let r;const a=Fn.getTransfer(s);if(n===Ws)return i.UNSIGNED_BYTE;if(n===YE)return i.UNSIGNED_SHORT_4_4_4_4;if(n===WE)return i.UNSIGNED_SHORT_5_5_5_1;if(n===Mw)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===Sw)return i.BYTE;if(n===Ew)return i.SHORT;if(n===uy)return i.UNSIGNED_SHORT;if(n===qE)return i.INT;if(n===Hu)return i.UNSIGNED_INT;if(n===Na)return i.FLOAT;if(n===r0)return i.HALF_FLOAT;if(n===Tw)return i.ALPHA;if(n===Cw)return i.RGB;if(n===ia)return i.RGBA;if(n===hy)return i.DEPTH_COMPONENT;if(n===kg)return i.DEPTH_STENCIL;if(n===KE)return i.RED;if(n===Cx)return i.RED_INTEGER;if(n===ww)return i.RG;if(n===JE)return i.RG_INTEGER;if(n===ZE)return i.RGBA_INTEGER;if(n===O_||n===N_||n===I_||n===U_)if(a===fi)if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===O_)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===N_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===I_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===U_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=t.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===O_)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===N_)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===I_)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===U_)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===T3||n===C3||n===w3||n===R3)if(r=t.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===T3)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===C3)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===w3)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===R3)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===L3||n===D3||n===B3)if(r=t.get("WEBGL_compressed_texture_etc"),r!==null){if(n===L3||n===D3)return a===fi?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===B3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===O3||n===N3||n===I3||n===U3||n===P3||n===F3||n===H3||n===z3||n===G3||n===k3||n===V3||n===Q3||n===j3||n===X3)if(r=t.get("WEBGL_compressed_texture_astc"),r!==null){if(n===O3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===N3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===I3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===U3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===P3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===F3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===H3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===z3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===G3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===k3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===V3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Q3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===j3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===X3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===P_||n===q3||n===Y3)if(r=t.get("EXT_texture_compression_bptc"),r!==null){if(n===P_)return a===fi?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===q3)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Y3)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Rw||n===W3||n===K3||n===J3)if(r=t.get("EXT_texture_compression_rgtc"),r!==null){if(n===P_)return r.COMPRESSED_RED_RGTC1_EXT;if(n===W3)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===K3)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===J3)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Gg?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:e}}const Hq=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,zq=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Gq{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(this.texture===null){const s=new wi,r=t.properties.get(s);r.__webglTexture=e.texture,(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=s}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,n=new Ks({vertexShader:Hq,fragmentShader:zq,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new as(new Ty(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class kq extends Yo{constructor(t,e){super();const n=this;let s=null,r=1,a=null,l="local-floor",u=1,f=null,m=null,g=null,v=null,_=null,b=null;const C=new Gq,M=e.getContextAttributes();let S=null,R=null;const D=[],B=[],N=new Pt;let I=null;const F=new Rs;F.viewport=new On;const z=new Rs;z.viewport=new On;const U=[F,z],P=new AO;let X=null,ot=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ct){let wt=D[ct];return wt===void 0&&(wt=new B4,D[ct]=wt),wt.getTargetRaySpace()},this.getControllerGrip=function(ct){let wt=D[ct];return wt===void 0&&(wt=new B4,D[ct]=wt),wt.getGripSpace()},this.getHand=function(ct){let wt=D[ct];return wt===void 0&&(wt=new B4,D[ct]=wt),wt.getHandSpace()};function it(ct){const wt=B.indexOf(ct.inputSource);if(wt===-1)return;const Bt=D[wt];Bt!==void 0&&(Bt.update(ct.inputSource,ct.frame,f||a),Bt.dispatchEvent({type:ct.type,data:ct.inputSource}))}function ut(){s.removeEventListener("select",it),s.removeEventListener("selectstart",it),s.removeEventListener("selectend",it),s.removeEventListener("squeeze",it),s.removeEventListener("squeezestart",it),s.removeEventListener("squeezeend",it),s.removeEventListener("end",ut),s.removeEventListener("inputsourceschange",dt);for(let ct=0;ct<D.length;ct++){const wt=B[ct];wt!==null&&(B[ct]=null,D[ct].disconnect(wt))}X=null,ot=null,C.reset(),t.setRenderTarget(S),_=null,v=null,g=null,s=null,R=null,Et.stop(),n.isPresenting=!1,t.setPixelRatio(I),t.setSize(N.width,N.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ct){r=ct,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ct){l=ct,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||a},this.setReferenceSpace=function(ct){f=ct},this.getBaseLayer=function(){return v!==null?v:_},this.getBinding=function(){return g},this.getFrame=function(){return b},this.getSession=function(){return s},this.setSession=async function(ct){if(s=ct,s!==null){if(S=t.getRenderTarget(),s.addEventListener("select",it),s.addEventListener("selectstart",it),s.addEventListener("selectend",it),s.addEventListener("squeeze",it),s.addEventListener("squeezestart",it),s.addEventListener("squeezeend",it),s.addEventListener("end",ut),s.addEventListener("inputsourceschange",dt),M.xrCompatible!==!0&&await e.makeXRCompatible(),I=t.getPixelRatio(),t.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Bt=null,Ut=null,Wt=null;M.depth&&(Wt=M.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Bt=M.stencil?kg:hy,Ut=M.stencil?Gg:Hu);const ve={colorFormat:e.RGBA8,depthFormat:Wt,scaleFactor:r};g=new XRWebGLBinding(s,e),v=g.createProjectionLayer(ve),s.updateRenderState({layers:[v]}),t.setPixelRatio(1),t.setSize(v.textureWidth,v.textureHeight,!1),R=new Ds(v.textureWidth,v.textureHeight,{format:ia,type:Ws,depthTexture:new Ox(v.textureWidth,v.textureHeight,Ut,void 0,void 0,void 0,void 0,void 0,void 0,Bt),stencilBuffer:M.stencil,colorSpace:t.outputColorSpace,samples:M.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const Bt={antialias:M.antialias,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:r};_=new XRWebGLLayer(s,e,Bt),s.updateRenderState({baseLayer:_}),t.setPixelRatio(1),t.setSize(_.framebufferWidth,_.framebufferHeight,!1),R=new Ds(_.framebufferWidth,_.framebufferHeight,{format:ia,type:Ws,colorSpace:t.outputColorSpace,stencilBuffer:M.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}R.isXRRenderTarget=!0,this.setFoveation(u),f=null,a=await s.requestReferenceSpace(l),Et.setContext(s),Et.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return C.getDepthTexture()};function dt(ct){for(let wt=0;wt<ct.removed.length;wt++){const Bt=ct.removed[wt],Ut=B.indexOf(Bt);Ut>=0&&(B[Ut]=null,D[Ut].disconnect(Bt))}for(let wt=0;wt<ct.added.length;wt++){const Bt=ct.added[wt];let Ut=B.indexOf(Bt);if(Ut===-1){for(let ve=0;ve<D.length;ve++)if(ve>=B.length){B.push(Bt),Ut=ve;break}else if(B[ve]===null){B[ve]=Bt,Ut=ve;break}if(Ut===-1)break}const Wt=D[Ut];Wt&&Wt.connect(Bt)}}const j=new et,tt=new et;function nt(ct,wt,Bt){j.setFromMatrixPosition(wt.matrixWorld),tt.setFromMatrixPosition(Bt.matrixWorld);const Ut=j.distanceTo(tt),Wt=wt.projectionMatrix.elements,ve=Bt.projectionMatrix.elements,ee=Wt[14]/(Wt[10]-1),Ye=Wt[14]/(Wt[10]+1),we=(Wt[9]+1)/Wt[5],re=(Wt[9]-1)/Wt[5],Z=(Wt[8]-1)/Wt[0],Kt=(ve[8]+1)/ve[0],Ft=ee*Z,Vt=ee*Kt,Gt=Ut/(-Z+Kt),be=Gt*-Z;if(wt.matrixWorld.decompose(ct.position,ct.quaternion,ct.scale),ct.translateX(be),ct.translateZ(Gt),ct.matrixWorld.compose(ct.position,ct.quaternion,ct.scale),ct.matrixWorldInverse.copy(ct.matrixWorld).invert(),Wt[10]===-1)ct.projectionMatrix.copy(wt.projectionMatrix),ct.projectionMatrixInverse.copy(wt.projectionMatrixInverse);else{const qt=ee+Gt,$=Ye+Gt,Q=Ft-be,vt=Vt+(Ut-be),It=we*Ye/$*qt,jt=re*Ye/$*qt;ct.projectionMatrix.makePerspective(Q,vt,It,jt,qt,$),ct.projectionMatrixInverse.copy(ct.projectionMatrix).invert()}}function _t(ct,wt){wt===null?ct.matrixWorld.copy(ct.matrix):ct.matrixWorld.multiplyMatrices(wt.matrixWorld,ct.matrix),ct.matrixWorldInverse.copy(ct.matrixWorld).invert()}this.updateCamera=function(ct){if(s===null)return;let wt=ct.near,Bt=ct.far;C.texture!==null&&(C.depthNear>0&&(wt=C.depthNear),C.depthFar>0&&(Bt=C.depthFar)),P.near=z.near=F.near=wt,P.far=z.far=F.far=Bt,(X!==P.near||ot!==P.far)&&(s.updateRenderState({depthNear:P.near,depthFar:P.far}),X=P.near,ot=P.far),F.layers.mask=ct.layers.mask|2,z.layers.mask=ct.layers.mask|4,P.layers.mask=F.layers.mask|z.layers.mask;const Ut=ct.parent,Wt=P.cameras;_t(P,Ut);for(let ve=0;ve<Wt.length;ve++)_t(Wt[ve],Ut);Wt.length===2?nt(P,F,z):P.projectionMatrix.copy(F.projectionMatrix),J(ct,P,Ut)};function J(ct,wt,Bt){Bt===null?ct.matrix.copy(wt.matrixWorld):(ct.matrix.copy(Bt.matrixWorld),ct.matrix.invert(),ct.matrix.multiply(wt.matrixWorld)),ct.matrix.decompose(ct.position,ct.quaternion,ct.scale),ct.updateMatrixWorld(!0),ct.projectionMatrix.copy(wt.projectionMatrix),ct.projectionMatrixInverse.copy(wt.projectionMatrixInverse),ct.isPerspectiveCamera&&(ct.fov=py*2*Math.atan(1/ct.projectionMatrix.elements[5]),ct.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(v===null&&_===null))return u},this.setFoveation=function(ct){u=ct,v!==null&&(v.fixedFoveation=ct),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=ct)},this.hasDepthSensing=function(){return C.texture!==null},this.getDepthSensingMesh=function(){return C.getMesh(P)};let at=null;function xt(ct,wt){if(m=wt.getViewerPose(f||a),b=wt,m!==null){const Bt=m.views;_!==null&&(t.setRenderTargetFramebuffer(R,_.framebuffer),t.setRenderTarget(R));let Ut=!1;Bt.length!==P.cameras.length&&(P.cameras.length=0,Ut=!0);for(let ee=0;ee<Bt.length;ee++){const Ye=Bt[ee];let we=null;if(_!==null)we=_.getViewport(Ye);else{const Z=g.getViewSubImage(v,Ye);we=Z.viewport,ee===0&&(t.setRenderTargetTextures(R,Z.colorTexture,Z.depthStencilTexture),t.setRenderTarget(R))}let re=U[ee];re===void 0&&(re=new Rs,re.layers.enable(ee),re.viewport=new On,U[ee]=re),re.matrix.fromArray(Ye.transform.matrix),re.matrix.decompose(re.position,re.quaternion,re.scale),re.projectionMatrix.fromArray(Ye.projectionMatrix),re.projectionMatrixInverse.copy(re.projectionMatrix).invert(),re.viewport.set(we.x,we.y,we.width,we.height),ee===0&&(P.matrix.copy(re.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),Ut===!0&&P.cameras.push(re)}const Wt=s.enabledFeatures;if(Wt&&Wt.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&g){const ee=g.getDepthInformation(Bt[0]);ee&&ee.isValid&&ee.texture&&C.init(t,ee,s.renderState)}}for(let Bt=0;Bt<D.length;Bt++){const Ut=B[Bt],Wt=D[Bt];Ut!==null&&Wt!==void 0&&Wt.update(Ut,wt,f||a)}at&&at(ct,wt),wt.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:wt}),b=null}const Et=new CO;Et.setAnimationLoop(xt),this.setAnimationLoop=function(ct){at=ct},this.dispose=function(){}}}const _m=new Qo,Vq=new Ne;function Qq(i,t){function e(M,S){M.matrixAutoUpdate===!0&&M.updateMatrix(),S.value.copy(M.matrix)}function n(M,S){S.color.getRGB(M.fogColor.value,OB(i)),S.isFog?(M.fogNear.value=S.near,M.fogFar.value=S.far):S.isFogExp2&&(M.fogDensity.value=S.density)}function s(M,S,R,D,B){S.isMeshBasicMaterial||S.isMeshLambertMaterial?r(M,S):S.isMeshToonMaterial?(r(M,S),g(M,S)):S.isMeshPhongMaterial?(r(M,S),m(M,S)):S.isMeshStandardMaterial?(r(M,S),v(M,S),S.isMeshPhysicalMaterial&&_(M,S,B)):S.isMeshMatcapMaterial?(r(M,S),b(M,S)):S.isMeshDepthMaterial?r(M,S):S.isMeshDistanceMaterial?(r(M,S),C(M,S)):S.isMeshNormalMaterial?r(M,S):S.isLineBasicMaterial?(a(M,S),S.isLineDashedMaterial&&l(M,S)):S.isPointsMaterial?u(M,S,R,D):S.isSpriteMaterial?f(M,S):S.isShadowMaterial?(M.color.value.copy(S.color),M.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function r(M,S){M.opacity.value=S.opacity,S.color&&M.diffuse.value.copy(S.color),S.emissive&&M.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(M.map.value=S.map,e(S.map,M.mapTransform)),S.alphaMap&&(M.alphaMap.value=S.alphaMap,e(S.alphaMap,M.alphaMapTransform)),S.bumpMap&&(M.bumpMap.value=S.bumpMap,e(S.bumpMap,M.bumpMapTransform),M.bumpScale.value=S.bumpScale,S.side===qs&&(M.bumpScale.value*=-1)),S.normalMap&&(M.normalMap.value=S.normalMap,e(S.normalMap,M.normalMapTransform),M.normalScale.value.copy(S.normalScale),S.side===qs&&M.normalScale.value.negate()),S.displacementMap&&(M.displacementMap.value=S.displacementMap,e(S.displacementMap,M.displacementMapTransform),M.displacementScale.value=S.displacementScale,M.displacementBias.value=S.displacementBias),S.emissiveMap&&(M.emissiveMap.value=S.emissiveMap,e(S.emissiveMap,M.emissiveMapTransform)),S.specularMap&&(M.specularMap.value=S.specularMap,e(S.specularMap,M.specularMapTransform)),S.alphaTest>0&&(M.alphaTest.value=S.alphaTest);const R=t.get(S),D=R.envMap,B=R.envMapRotation;D&&(M.envMap.value=D,_m.copy(B),_m.x*=-1,_m.y*=-1,_m.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(_m.y*=-1,_m.z*=-1),M.envMapRotation.value.setFromMatrix4(Vq.makeRotationFromEuler(_m)),M.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=S.reflectivity,M.ior.value=S.ior,M.refractionRatio.value=S.refractionRatio),S.lightMap&&(M.lightMap.value=S.lightMap,M.lightMapIntensity.value=S.lightMapIntensity,e(S.lightMap,M.lightMapTransform)),S.aoMap&&(M.aoMap.value=S.aoMap,M.aoMapIntensity.value=S.aoMapIntensity,e(S.aoMap,M.aoMapTransform))}function a(M,S){M.diffuse.value.copy(S.color),M.opacity.value=S.opacity,S.map&&(M.map.value=S.map,e(S.map,M.mapTransform))}function l(M,S){M.dashSize.value=S.dashSize,M.totalSize.value=S.dashSize+S.gapSize,M.scale.value=S.scale}function u(M,S,R,D){M.diffuse.value.copy(S.color),M.opacity.value=S.opacity,M.size.value=S.size*R,M.scale.value=D*.5,S.map&&(M.map.value=S.map,e(S.map,M.uvTransform)),S.alphaMap&&(M.alphaMap.value=S.alphaMap,e(S.alphaMap,M.alphaMapTransform)),S.alphaTest>0&&(M.alphaTest.value=S.alphaTest)}function f(M,S){M.diffuse.value.copy(S.color),M.opacity.value=S.opacity,M.rotation.value=S.rotation,S.map&&(M.map.value=S.map,e(S.map,M.mapTransform)),S.alphaMap&&(M.alphaMap.value=S.alphaMap,e(S.alphaMap,M.alphaMapTransform)),S.alphaTest>0&&(M.alphaTest.value=S.alphaTest)}function m(M,S){M.specular.value.copy(S.specular),M.shininess.value=Math.max(S.shininess,1e-4)}function g(M,S){S.gradientMap&&(M.gradientMap.value=S.gradientMap)}function v(M,S){M.metalness.value=S.metalness,S.metalnessMap&&(M.metalnessMap.value=S.metalnessMap,e(S.metalnessMap,M.metalnessMapTransform)),M.roughness.value=S.roughness,S.roughnessMap&&(M.roughnessMap.value=S.roughnessMap,e(S.roughnessMap,M.roughnessMapTransform)),S.envMap&&(M.envMapIntensity.value=S.envMapIntensity)}function _(M,S,R){M.ior.value=S.ior,S.sheen>0&&(M.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),M.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(M.sheenColorMap.value=S.sheenColorMap,e(S.sheenColorMap,M.sheenColorMapTransform)),S.sheenRoughnessMap&&(M.sheenRoughnessMap.value=S.sheenRoughnessMap,e(S.sheenRoughnessMap,M.sheenRoughnessMapTransform))),S.clearcoat>0&&(M.clearcoat.value=S.clearcoat,M.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(M.clearcoatMap.value=S.clearcoatMap,e(S.clearcoatMap,M.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,e(S.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(M.clearcoatNormalMap.value=S.clearcoatNormalMap,e(S.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===qs&&M.clearcoatNormalScale.value.negate())),S.dispersion>0&&(M.dispersion.value=S.dispersion),S.iridescence>0&&(M.iridescence.value=S.iridescence,M.iridescenceIOR.value=S.iridescenceIOR,M.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(M.iridescenceMap.value=S.iridescenceMap,e(S.iridescenceMap,M.iridescenceMapTransform)),S.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=S.iridescenceThicknessMap,e(S.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),S.transmission>0&&(M.transmission.value=S.transmission,M.transmissionSamplerMap.value=R.texture,M.transmissionSamplerSize.value.set(R.width,R.height),S.transmissionMap&&(M.transmissionMap.value=S.transmissionMap,e(S.transmissionMap,M.transmissionMapTransform)),M.thickness.value=S.thickness,S.thicknessMap&&(M.thicknessMap.value=S.thicknessMap,e(S.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=S.attenuationDistance,M.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(M.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(M.anisotropyMap.value=S.anisotropyMap,e(S.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=S.specularIntensity,M.specularColor.value.copy(S.specularColor),S.specularColorMap&&(M.specularColorMap.value=S.specularColorMap,e(S.specularColorMap,M.specularColorMapTransform)),S.specularIntensityMap&&(M.specularIntensityMap.value=S.specularIntensityMap,e(S.specularIntensityMap,M.specularIntensityMapTransform))}function b(M,S){S.matcap&&(M.matcap.value=S.matcap)}function C(M,S){const R=t.get(S).light;M.referencePosition.value.setFromMatrixPosition(R.matrixWorld),M.nearDistance.value=R.shadow.camera.near,M.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function jq(i,t,e,n){let s={},r={},a=[];const l=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function u(R,D){const B=D.program;n.uniformBlockBinding(R,B)}function f(R,D){let B=s[R.id];B===void 0&&(b(R),B=m(R),s[R.id]=B,R.addEventListener("dispose",M));const N=D.program;n.updateUBOMapping(R,N);const I=t.render.frame;r[R.id]!==I&&(v(R),r[R.id]=I)}function m(R){const D=g();R.__bindingPointIndex=D;const B=i.createBuffer(),N=R.__size,I=R.usage;return i.bindBuffer(i.UNIFORM_BUFFER,B),i.bufferData(i.UNIFORM_BUFFER,N,I),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,D,B),B}function g(){for(let R=0;R<l;R++)if(a.indexOf(R)===-1)return a.push(R),R;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(R){const D=s[R.id],B=R.uniforms,N=R.__cache;i.bindBuffer(i.UNIFORM_BUFFER,D);for(let I=0,F=B.length;I<F;I++){const z=Array.isArray(B[I])?B[I]:[B[I]];for(let U=0,P=z.length;U<P;U++){const X=z[U];if(_(X,I,U,N)===!0){const ot=X.__offset,it=Array.isArray(X.value)?X.value:[X.value];let ut=0;for(let dt=0;dt<it.length;dt++){const j=it[dt],tt=C(j);typeof j=="number"||typeof j=="boolean"?(X.__data[0]=j,i.bufferSubData(i.UNIFORM_BUFFER,ot+ut,X.__data)):j.isMatrix3?(X.__data[0]=j.elements[0],X.__data[1]=j.elements[1],X.__data[2]=j.elements[2],X.__data[3]=0,X.__data[4]=j.elements[3],X.__data[5]=j.elements[4],X.__data[6]=j.elements[5],X.__data[7]=0,X.__data[8]=j.elements[6],X.__data[9]=j.elements[7],X.__data[10]=j.elements[8],X.__data[11]=0):(j.toArray(X.__data,ut),ut+=tt.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,ot,X.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function _(R,D,B,N){const I=R.value,F=D+"_"+B;if(N[F]===void 0)return typeof I=="number"||typeof I=="boolean"?N[F]=I:N[F]=I.clone(),!0;{const z=N[F];if(typeof I=="number"||typeof I=="boolean"){if(z!==I)return N[F]=I,!0}else if(z.equals(I)===!1)return z.copy(I),!0}return!1}function b(R){const D=R.uniforms;let B=0;const N=16;for(let F=0,z=D.length;F<z;F++){const U=Array.isArray(D[F])?D[F]:[D[F]];for(let P=0,X=U.length;P<X;P++){const ot=U[P],it=Array.isArray(ot.value)?ot.value:[ot.value];for(let ut=0,dt=it.length;ut<dt;ut++){const j=it[ut],tt=C(j),nt=B%N,_t=nt%tt.boundary,J=nt+_t;B+=_t,J!==0&&N-J<tt.storage&&(B+=N-J),ot.__data=new Float32Array(tt.storage/Float32Array.BYTES_PER_ELEMENT),ot.__offset=B,B+=tt.storage}}}const I=B%N;return I>0&&(B+=N-I),R.__size=B,R.__cache={},this}function C(R){const D={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(D.boundary=4,D.storage=4):R.isVector2?(D.boundary=8,D.storage=8):R.isVector3||R.isColor?(D.boundary=16,D.storage=12):R.isVector4?(D.boundary=16,D.storage=16):R.isMatrix3?(D.boundary=48,D.storage=48):R.isMatrix4?(D.boundary=64,D.storage=64):R.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",R),D}function M(R){const D=R.target;D.removeEventListener("dispose",M);const B=a.indexOf(D.__bindingPointIndex);a.splice(B,1),i.deleteBuffer(s[D.id]),delete s[D.id],delete r[D.id]}function S(){for(const R in s)i.deleteBuffer(s[R]);a=[],s={},r={}}return{bind:u,update:f,dispose:S}}class OO{constructor(t={}){const{canvas:e=LB(),context:n=null,depth:s=!0,stencil:r=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:f=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:v=!1}=t;this.isWebGLRenderer=!0;let _;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=a;const b=new Uint32Array(4),C=new Int32Array(4);let M=null,S=null;const R=[],D=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Lc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const B=this;let N=!1;this._outputColorSpace=Kn;let I=0,F=0,z=null,U=-1,P=null;const X=new On,ot=new On;let it=null;const ut=new oe(0);let dt=0,j=e.width,tt=e.height,nt=1,_t=null,J=null;const at=new On(0,0,j,tt),xt=new On(0,0,j,tt);let Et=!1;const ct=new My;let wt=!1,Bt=!1;const Ut=new Ne,Wt=new Ne,ve=new et,ee=new On,Ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let we=!1;function re(){return z===null?nt:1}let Z=n;function Kt(Y,pt){return e.getContext(Y,pt)}try{const Y={alpha:!0,depth:s,stencil:r,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:f,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${s0}`),e.addEventListener("webglcontextlost",Qt,!1),e.addEventListener("webglcontextrestored",fe,!1),e.addEventListener("webglcontextcreationerror",he,!1),Z===null){const pt="webgl2";if(Z=Kt(pt,Y),Z===null)throw Kt(pt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Y){throw console.error("THREE.WebGLRenderer: "+Y.message),Y}let Ft,Vt,Gt,be,qt,$,Q,vt,It,jt,Ot,ne,te,ge,De,Jt,_e,Se,Te,ce,rn,He,Gn,mt;function ue(){Ft=new iX(Z),Ft.init(),He=new BO(Z,Ft),Vt=new Kj(Z,Ft,t,He),Gt=new Pq(Z,Ft),Vt.reverseDepthBuffer&&v&&Gt.buffers.depth.setReversed(!0),be=new aX(Z),qt=new Eq,$=new Fq(Z,Ft,Gt,qt,Vt,He,be),Q=new Zj(B),vt=new nX(B),It=new fV(Z),Gn=new Yj(Z,It),jt=new sX(Z,It,be,Gn),Ot=new lX(Z,jt,It,be),Te=new oX(Z,Vt,$),Jt=new Jj(qt),ne=new Sq(B,Q,vt,Ft,Vt,Gn,Jt),te=new Qq(B,qt),ge=new Tq,De=new Bq(Ft),Se=new qj(B,Q,vt,Gt,Ot,_,u),_e=new Iq(B,Ot,Vt),mt=new jq(Z,be,Vt,Gt),ce=new Wj(Z,Ft,be),rn=new rX(Z,Ft,be),be.programs=ne.programs,B.capabilities=Vt,B.extensions=Ft,B.properties=qt,B.renderLists=ge,B.shadowMap=_e,B.state=Gt,B.info=be}ue();const Nt=new kq(B,Z);this.xr=Nt,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const Y=Ft.get("WEBGL_lose_context");Y&&Y.loseContext()},this.forceContextRestore=function(){const Y=Ft.get("WEBGL_lose_context");Y&&Y.restoreContext()},this.getPixelRatio=function(){return nt},this.setPixelRatio=function(Y){Y!==void 0&&(nt=Y,this.setSize(j,tt,!1))},this.getSize=function(Y){return Y.set(j,tt)},this.setSize=function(Y,pt,Ct=!0){if(Nt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=Y,tt=pt,e.width=Math.floor(Y*nt),e.height=Math.floor(pt*nt),Ct===!0&&(e.style.width=Y+"px",e.style.height=pt+"px"),this.setViewport(0,0,Y,pt)},this.getDrawingBufferSize=function(Y){return Y.set(j*nt,tt*nt).floor()},this.setDrawingBufferSize=function(Y,pt,Ct){j=Y,tt=pt,nt=Ct,e.width=Math.floor(Y*Ct),e.height=Math.floor(pt*Ct),this.setViewport(0,0,Y,pt)},this.getCurrentViewport=function(Y){return Y.copy(X)},this.getViewport=function(Y){return Y.copy(at)},this.setViewport=function(Y,pt,Ct,Rt){Y.isVector4?at.set(Y.x,Y.y,Y.z,Y.w):at.set(Y,pt,Ct,Rt),Gt.viewport(X.copy(at).multiplyScalar(nt).round())},this.getScissor=function(Y){return Y.copy(xt)},this.setScissor=function(Y,pt,Ct,Rt){Y.isVector4?xt.set(Y.x,Y.y,Y.z,Y.w):xt.set(Y,pt,Ct,Rt),Gt.scissor(ot.copy(xt).multiplyScalar(nt).round())},this.getScissorTest=function(){return Et},this.setScissorTest=function(Y){Gt.setScissorTest(Et=Y)},this.setOpaqueSort=function(Y){_t=Y},this.setTransparentSort=function(Y){J=Y},this.getClearColor=function(Y){return Y.copy(Se.getClearColor())},this.setClearColor=function(){Se.setClearColor(...arguments)},this.getClearAlpha=function(){return Se.getClearAlpha()},this.setClearAlpha=function(){Se.setClearAlpha(...arguments)},this.clear=function(Y=!0,pt=!0,Ct=!0){let Rt=0;if(Y){let yt=!1;if(z!==null){const Yt=z.texture.format;yt=Yt===ZE||Yt===JE||Yt===Cx}if(yt){const Yt=z.texture.type,se=Yt===Ws||Yt===Hu||Yt===uy||Yt===Gg||Yt===YE||Yt===WE,ae=Se.getClearColor(),Ae=Se.getClearAlpha(),Ge=ae.r,Oe=ae.g,Ce=ae.b;se?(b[0]=Ge,b[1]=Oe,b[2]=Ce,b[3]=Ae,Z.clearBufferuiv(Z.COLOR,0,b)):(C[0]=Ge,C[1]=Oe,C[2]=Ce,C[3]=Ae,Z.clearBufferiv(Z.COLOR,0,C))}else Rt|=Z.COLOR_BUFFER_BIT}pt&&(Rt|=Z.DEPTH_BUFFER_BIT),Ct&&(Rt|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear(Rt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Qt,!1),e.removeEventListener("webglcontextrestored",fe,!1),e.removeEventListener("webglcontextcreationerror",he,!1),Se.dispose(),ge.dispose(),De.dispose(),qt.dispose(),Q.dispose(),vt.dispose(),Ot.dispose(),Gn.dispose(),mt.dispose(),ne.dispose(),Nt.dispose(),Nt.removeEventListener("sessionstart",Ji),Nt.removeEventListener("sessionend",cs),$s.stop()};function Qt(Y){Y.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function fe(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const Y=be.autoReset,pt=_e.enabled,Ct=_e.autoUpdate,Rt=_e.needsUpdate,yt=_e.type;ue(),be.autoReset=Y,_e.enabled=pt,_e.autoUpdate=Ct,_e.needsUpdate=Rt,_e.type=yt}function he(Y){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Y.statusMessage)}function qe(Y){const pt=Y.target;pt.removeEventListener("dispose",qe),Jn(pt)}function Jn(Y){Ei(Y),qt.remove(Y)}function Ei(Y){const pt=qt.get(Y).programs;pt!==void 0&&(pt.forEach(function(Ct){ne.releaseProgram(Ct)}),Y.isShaderMaterial&&ne.releaseShaderCache(Y))}this.renderBufferDirect=function(Y,pt,Ct,Rt,yt,Yt){pt===null&&(pt=Ye);const se=yt.isMesh&&yt.matrixWorld.determinant()<0,ae=Nc(Y,pt,Ct,Rt,yt);Gt.setMaterial(Rt,se);let Ae=Ct.index,Ge=1;if(Rt.wireframe===!0){if(Ae=jt.getWireframeAttribute(Ct),Ae===void 0)return;Ge=2}const Oe=Ct.drawRange,Ce=Ct.attributes.position;let pn=Oe.start*Ge,In=(Oe.start+Oe.count)*Ge;Yt!==null&&(pn=Math.max(pn,Yt.start*Ge),In=Math.min(In,(Yt.start+Yt.count)*Ge)),Ae!==null?(pn=Math.max(pn,0),In=Math.min(In,Ae.count)):Ce!=null&&(pn=Math.max(pn,0),In=Math.min(In,Ce.count));const Mi=In-pn;if(Mi<0||Mi===1/0)return;Gn.setup(yt,Rt,ae,Ct,Ae);let yn,bn=ce;if(Ae!==null&&(yn=It.get(Ae),bn=rn,bn.setIndex(yn)),yt.isMesh)Rt.wireframe===!0?(Gt.setLineWidth(Rt.wireframeLinewidth*re()),bn.setMode(Z.LINES)):bn.setMode(Z.TRIANGLES);else if(yt.isLine){let Ie=Rt.linewidth;Ie===void 0&&(Ie=1),Gt.setLineWidth(Ie*re()),yt.isLineSegments?bn.setMode(Z.LINES):yt.isLineLoop?bn.setMode(Z.LINE_LOOP):bn.setMode(Z.LINE_STRIP)}else yt.isPoints?bn.setMode(Z.POINTS):yt.isSprite&&bn.setMode(Z.TRIANGLES);if(yt.isBatchedMesh)if(yt._multiDrawInstances!==null)D4("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),bn.renderMultiDrawInstances(yt._multiDrawStarts,yt._multiDrawCounts,yt._multiDrawCount,yt._multiDrawInstances);else if(Ft.get("WEBGL_multi_draw"))bn.renderMultiDraw(yt._multiDrawStarts,yt._multiDrawCounts,yt._multiDrawCount);else{const Ie=yt._multiDrawStarts,Ri=yt._multiDrawCounts,Dn=yt._multiDrawCount,Bs=Ae?It.get(Ae).bytesPerElement:1,Wo=qt.get(Rt).currentProgram.getUniforms();for(let ri=0;ri<Dn;ri++)Wo.setValue(Z,"_gl_DrawID",ri),bn.render(Ie[ri]/Bs,Ri[ri])}else if(yt.isInstancedMesh)bn.renderInstances(pn,Mi,yt.count);else if(Ct.isInstancedBufferGeometry){const Ie=Ct._maxInstanceCount!==void 0?Ct._maxInstanceCount:1/0,Ri=Math.min(Ct.instanceCount,Ie);bn.renderInstances(pn,Mi,Ri)}else bn.render(pn,Mi)};function Cn(Y,pt,Ct){Y.transparent===!0&&Y.side===Da&&Y.forceSinglePass===!1?(Y.side=qs,Y.needsUpdate=!0,ti(Y,pt,Ct),Y.side=Dc,Y.needsUpdate=!0,ti(Y,pt,Ct),Y.side=Da):ti(Y,pt,Ct)}this.compile=function(Y,pt,Ct=null){Ct===null&&(Ct=Y),S=De.get(Ct),S.init(pt),D.push(S),Ct.traverseVisible(function(yt){yt.isLight&&yt.layers.test(pt.layers)&&(S.pushLight(yt),yt.castShadow&&S.pushShadow(yt))}),Y!==Ct&&Y.traverseVisible(function(yt){yt.isLight&&yt.layers.test(pt.layers)&&(S.pushLight(yt),yt.castShadow&&S.pushShadow(yt))}),S.setupLights();const Rt=new Set;return Y.traverse(function(yt){if(!(yt.isMesh||yt.isPoints||yt.isLine||yt.isSprite))return;const Yt=yt.material;if(Yt)if(Array.isArray(Yt))for(let se=0;se<Yt.length;se++){const ae=Yt[se];Cn(ae,Ct,yt),Rt.add(ae)}else Cn(Yt,Ct,yt),Rt.add(Yt)}),S=D.pop(),Rt},this.compileAsync=function(Y,pt,Ct=null){const Rt=this.compile(Y,pt,Ct);return new Promise(yt=>{function Yt(){if(Rt.forEach(function(se){qt.get(se).currentProgram.isReady()&&Rt.delete(se)}),Rt.size===0){yt(Y);return}setTimeout(Yt,10)}Ft.get("KHR_parallel_shader_compile")!==null?Yt():setTimeout(Yt,10)})};let Ur=null;function ls(Y){Ur&&Ur(Y)}function Ji(){$s.stop()}function cs(){$s.start()}const $s=new CO;$s.setAnimationLoop(ls),typeof self<"u"&&$s.setContext(self),this.setAnimationLoop=function(Y){Ur=Y,Nt.setAnimationLoop(Y),Y===null?$s.stop():$s.start()},Nt.addEventListener("sessionstart",Ji),Nt.addEventListener("sessionend",cs),this.render=function(Y,pt){if(pt!==void 0&&pt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(Y.matrixWorldAutoUpdate===!0&&Y.updateMatrixWorld(),pt.parent===null&&pt.matrixWorldAutoUpdate===!0&&pt.updateMatrixWorld(),Nt.enabled===!0&&Nt.isPresenting===!0&&(Nt.cameraAutoUpdate===!0&&Nt.updateCamera(pt),pt=Nt.getCamera()),Y.isScene===!0&&Y.onBeforeRender(B,Y,pt,z),S=De.get(Y,D.length),S.init(pt),D.push(S),Wt.multiplyMatrices(pt.projectionMatrix,pt.matrixWorldInverse),ct.setFromProjectionMatrix(Wt),Bt=this.localClippingEnabled,wt=Jt.init(this.clippingPlanes,Bt),M=ge.get(Y,R.length),M.init(),R.push(M),Nt.enabled===!0&&Nt.isPresenting===!0){const Yt=B.xr.getDepthSensingMesh();Yt!==null&&Pr(Yt,pt,-1/0,B.sortObjects)}Pr(Y,pt,0,B.sortObjects),M.finish(),B.sortObjects===!0&&M.sort(_t,J),we=Nt.enabled===!1||Nt.isPresenting===!1||Nt.hasDepthSensing()===!1,we&&Se.addToRenderList(M,Y),this.info.render.frame++,wt===!0&&Jt.beginShadows();const Ct=S.state.shadowsArray;_e.render(Ct,Y,pt),wt===!0&&Jt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Rt=M.opaque,yt=M.transmissive;if(S.setupLights(),pt.isArrayCamera){const Yt=pt.cameras;if(yt.length>0)for(let se=0,ae=Yt.length;se<ae;se++){const Ae=Yt[se];lo(Rt,yt,Y,Ae)}we&&Se.render(Y);for(let se=0,ae=Yt.length;se<ae;se++){const Ae=Yt[se];mp(M,Y,Ae,Ae.viewport)}}else yt.length>0&&lo(Rt,yt,Y,pt),we&&Se.render(Y),mp(M,Y,pt);z!==null&&F===0&&($.updateMultisampleRenderTarget(z),$.updateRenderTargetMipmap(z)),Y.isScene===!0&&Y.onAfterRender(B,Y,pt),Gn.resetDefaultState(),U=-1,P=null,D.pop(),D.length>0?(S=D[D.length-1],wt===!0&&Jt.setGlobalState(B.clippingPlanes,S.state.camera)):S=null,R.pop(),R.length>0?M=R[R.length-1]:M=null};function Pr(Y,pt,Ct,Rt){if(Y.visible===!1)return;if(Y.layers.test(pt.layers)){if(Y.isGroup)Ct=Y.renderOrder;else if(Y.isLOD)Y.autoUpdate===!0&&Y.update(pt);else if(Y.isLight)S.pushLight(Y),Y.castShadow&&S.pushShadow(Y);else if(Y.isSprite){if(!Y.frustumCulled||ct.intersectsSprite(Y)){Rt&&ee.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(Wt);const se=Ot.update(Y),ae=Y.material;ae.visible&&M.push(Y,se,ae,Ct,ee.z,null)}}else if((Y.isMesh||Y.isLine||Y.isPoints)&&(!Y.frustumCulled||ct.intersectsObject(Y))){const se=Ot.update(Y),ae=Y.material;if(Rt&&(Y.boundingSphere!==void 0?(Y.boundingSphere===null&&Y.computeBoundingSphere(),ee.copy(Y.boundingSphere.center)):(se.boundingSphere===null&&se.computeBoundingSphere(),ee.copy(se.boundingSphere.center)),ee.applyMatrix4(Y.matrixWorld).applyMatrix4(Wt)),Array.isArray(ae)){const Ae=se.groups;for(let Ge=0,Oe=Ae.length;Ge<Oe;Ge++){const Ce=Ae[Ge],pn=ae[Ce.materialIndex];pn&&pn.visible&&M.push(Y,se,pn,Ct,ee.z,Ce)}}else ae.visible&&M.push(Y,se,ae,Ct,ee.z,null)}}const Yt=Y.children;for(let se=0,ae=Yt.length;se<ae;se++)Pr(Yt[se],pt,Ct,Rt)}function mp(Y,pt,Ct,Rt){const yt=Y.opaque,Yt=Y.transmissive,se=Y.transparent;S.setupLightsView(Ct),wt===!0&&Jt.setGlobalState(B.clippingPlanes,Ct),Rt&&Gt.viewport(X.copy(Rt)),yt.length>0&&gr(yt,pt,Ct),Yt.length>0&&gr(Yt,pt,Ct),se.length>0&&gr(se,pt,Ct),Gt.buffers.depth.setTest(!0),Gt.buffers.depth.setMask(!0),Gt.buffers.color.setMask(!0),Gt.setPolygonOffset(!1)}function lo(Y,pt,Ct,Rt){if((Ct.isScene===!0?Ct.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[Rt.id]===void 0&&(S.state.transmissionRenderTarget[Rt.id]=new Ds(1,1,{generateMipmaps:!0,type:Ft.has("EXT_color_buffer_half_float")||Ft.has("EXT_color_buffer_float")?r0:Ws,minFilter:Cl,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Fn.workingColorSpace}));const Yt=S.state.transmissionRenderTarget[Rt.id],se=Rt.viewport||X;Yt.setSize(se.z*B.transmissionResolutionScale,se.w*B.transmissionResolutionScale);const ae=B.getRenderTarget();B.setRenderTarget(Yt),B.getClearColor(ut),dt=B.getClearAlpha(),dt<1&&B.setClearColor(16777215,.5),B.clear(),we&&Se.render(Ct);const Ae=B.toneMapping;B.toneMapping=Lc;const Ge=Rt.viewport;if(Rt.viewport!==void 0&&(Rt.viewport=void 0),S.setupLightsView(Rt),wt===!0&&Jt.setGlobalState(B.clippingPlanes,Rt),gr(Y,Ct,Rt),$.updateMultisampleRenderTarget(Yt),$.updateRenderTargetMipmap(Yt),Ft.has("WEBGL_multisampled_render_to_texture")===!1){let Oe=!1;for(let Ce=0,pn=pt.length;Ce<pn;Ce++){const In=pt[Ce],Mi=In.object,yn=In.geometry,bn=In.material,Ie=In.group;if(bn.side===Da&&Mi.layers.test(Rt.layers)){const Ri=bn.side;bn.side=qs,bn.needsUpdate=!0,co(Mi,Ct,Rt,yn,bn,Ie),bn.side=Ri,bn.needsUpdate=!0,Oe=!0}}Oe===!0&&($.updateMultisampleRenderTarget(Yt),$.updateRenderTargetMipmap(Yt))}B.setRenderTarget(ae),B.setClearColor(ut,dt),Ge!==void 0&&(Rt.viewport=Ge),B.toneMapping=Ae}function gr(Y,pt,Ct){const Rt=pt.isScene===!0?pt.overrideMaterial:null;for(let yt=0,Yt=Y.length;yt<Yt;yt++){const se=Y[yt],ae=se.object,Ae=se.geometry,Ge=se.group;let Oe=se.material;Oe.allowOverride===!0&&Rt!==null&&(Oe=Rt),ae.layers.test(Ct.layers)&&co(ae,pt,Ct,Ae,Oe,Ge)}}function co(Y,pt,Ct,Rt,yt,Yt){Y.onBeforeRender(B,pt,Ct,Rt,yt,Yt),Y.modelViewMatrix.multiplyMatrices(Ct.matrixWorldInverse,Y.matrixWorld),Y.normalMatrix.getNormalMatrix(Y.modelViewMatrix),yt.onBeforeRender(B,pt,Ct,Rt,Y,Yt),yt.transparent===!0&&yt.side===Da&&yt.forceSinglePass===!1?(yt.side=qs,yt.needsUpdate=!0,B.renderBufferDirect(Ct,pt,Rt,yt,Y,Yt),yt.side=Dc,yt.needsUpdate=!0,B.renderBufferDirect(Ct,pt,Rt,yt,Y,Yt),yt.side=Da):B.renderBufferDirect(Ct,pt,Rt,yt,Y,Yt),Y.onAfterRender(B,pt,Ct,Rt,yt,Yt)}function ti(Y,pt,Ct){pt.isScene!==!0&&(pt=Ye);const Rt=qt.get(Y),yt=S.state.lights,Yt=S.state.shadowsArray,se=yt.state.version,ae=ne.getParameters(Y,yt.state,Yt,pt,Ct),Ae=ne.getProgramCacheKey(ae);let Ge=Rt.programs;Rt.environment=Y.isMeshStandardMaterial?pt.environment:null,Rt.fog=pt.fog,Rt.envMap=(Y.isMeshStandardMaterial?vt:Q).get(Y.envMap||Rt.environment),Rt.envMapRotation=Rt.environment!==null&&Y.envMap===null?pt.environmentRotation:Y.envMapRotation,Ge===void 0&&(Y.addEventListener("dispose",qe),Ge=new Map,Rt.programs=Ge);let Oe=Ge.get(Ae);if(Oe!==void 0){if(Rt.currentProgram===Oe&&Rt.lightsStateVersion===se)return ho(Y,ae),Oe}else ae.uniforms=ne.getUniforms(Y),Y.onBeforeCompile(ae,B),Oe=ne.acquireProgram(ae,Ae),Ge.set(Ae,Oe),Rt.uniforms=ae.uniforms;const Ce=Rt.uniforms;return(!Y.isShaderMaterial&&!Y.isRawShaderMaterial||Y.clipping===!0)&&(Ce.clippingPlanes=Jt.uniform),ho(Y,ae),Rt.needsLights=Zi(Y),Rt.lightsStateVersion=se,Rt.needsLights&&(Ce.ambientLightColor.value=yt.state.ambient,Ce.lightProbe.value=yt.state.probe,Ce.directionalLights.value=yt.state.directional,Ce.directionalLightShadows.value=yt.state.directionalShadow,Ce.spotLights.value=yt.state.spot,Ce.spotLightShadows.value=yt.state.spotShadow,Ce.rectAreaLights.value=yt.state.rectArea,Ce.ltc_1.value=yt.state.rectAreaLTC1,Ce.ltc_2.value=yt.state.rectAreaLTC2,Ce.pointLights.value=yt.state.point,Ce.pointLightShadows.value=yt.state.pointShadow,Ce.hemisphereLights.value=yt.state.hemi,Ce.directionalShadowMap.value=yt.state.directionalShadowMap,Ce.directionalShadowMatrix.value=yt.state.directionalShadowMatrix,Ce.spotShadowMap.value=yt.state.spotShadowMap,Ce.spotLightMatrix.value=yt.state.spotLightMatrix,Ce.spotLightMap.value=yt.state.spotLightMap,Ce.pointShadowMap.value=yt.state.pointShadowMap,Ce.pointShadowMatrix.value=yt.state.pointShadowMatrix),Rt.currentProgram=Oe,Rt.uniformsList=null,Oe}function uo(Y){if(Y.uniformsList===null){const pt=Y.currentProgram.getUniforms();Y.uniformsList=O4.seqWithValue(pt.seq,Y.uniforms)}return Y.uniformsList}function ho(Y,pt){const Ct=qt.get(Y);Ct.outputColorSpace=pt.outputColorSpace,Ct.batching=pt.batching,Ct.batchingColor=pt.batchingColor,Ct.instancing=pt.instancing,Ct.instancingColor=pt.instancingColor,Ct.instancingMorph=pt.instancingMorph,Ct.skinning=pt.skinning,Ct.morphTargets=pt.morphTargets,Ct.morphNormals=pt.morphNormals,Ct.morphColors=pt.morphColors,Ct.morphTargetsCount=pt.morphTargetsCount,Ct.numClippingPlanes=pt.numClippingPlanes,Ct.numIntersection=pt.numClipIntersection,Ct.vertexAlphas=pt.vertexAlphas,Ct.vertexTangents=pt.vertexTangents,Ct.toneMapping=pt.toneMapping}function Nc(Y,pt,Ct,Rt,yt){pt.isScene!==!0&&(pt=Ye),$.resetTextureUnits();const Yt=pt.fog,se=Rt.isMeshStandardMaterial?pt.environment:null,ae=z===null?B.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:zu,Ae=(Rt.isMeshStandardMaterial?vt:Q).get(Rt.envMap||se),Ge=Rt.vertexColors===!0&&!!Ct.attributes.color&&Ct.attributes.color.itemSize===4,Oe=!!Ct.attributes.tangent&&(!!Rt.normalMap||Rt.anisotropy>0),Ce=!!Ct.morphAttributes.position,pn=!!Ct.morphAttributes.normal,In=!!Ct.morphAttributes.color;let Mi=Lc;Rt.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&(Mi=B.toneMapping);const yn=Ct.morphAttributes.position||Ct.morphAttributes.normal||Ct.morphAttributes.color,bn=yn!==void 0?yn.length:0,Ie=qt.get(Rt),Ri=S.state.lights;if(wt===!0&&(Bt===!0||Y!==P)){const ys=Y===P&&Rt.id===U;Jt.setState(Rt,Y,ys)}let Dn=!1;Rt.version===Ie.__version?(Ie.needsLights&&Ie.lightsStateVersion!==Ri.state.version||Ie.outputColorSpace!==ae||yt.isBatchedMesh&&Ie.batching===!1||!yt.isBatchedMesh&&Ie.batching===!0||yt.isBatchedMesh&&Ie.batchingColor===!0&&yt.colorTexture===null||yt.isBatchedMesh&&Ie.batchingColor===!1&&yt.colorTexture!==null||yt.isInstancedMesh&&Ie.instancing===!1||!yt.isInstancedMesh&&Ie.instancing===!0||yt.isSkinnedMesh&&Ie.skinning===!1||!yt.isSkinnedMesh&&Ie.skinning===!0||yt.isInstancedMesh&&Ie.instancingColor===!0&&yt.instanceColor===null||yt.isInstancedMesh&&Ie.instancingColor===!1&&yt.instanceColor!==null||yt.isInstancedMesh&&Ie.instancingMorph===!0&&yt.morphTexture===null||yt.isInstancedMesh&&Ie.instancingMorph===!1&&yt.morphTexture!==null||Ie.envMap!==Ae||Rt.fog===!0&&Ie.fog!==Yt||Ie.numClippingPlanes!==void 0&&(Ie.numClippingPlanes!==Jt.numPlanes||Ie.numIntersection!==Jt.numIntersection)||Ie.vertexAlphas!==Ge||Ie.vertexTangents!==Oe||Ie.morphTargets!==Ce||Ie.morphNormals!==pn||Ie.morphColors!==In||Ie.toneMapping!==Mi||Ie.morphTargetsCount!==bn)&&(Dn=!0):(Dn=!0,Ie.__version=Rt.version);let Bs=Ie.currentProgram;Dn===!0&&(Bs=ti(Rt,pt,yt));let Wo=!1,ri=!1,Ko=!1;const ei=Bs.getUniforms(),Os=Ie.uniforms;if(Gt.useProgram(Bs.program)&&(Wo=!0,ri=!0,Ko=!0),Rt.id!==U&&(U=Rt.id,ri=!0),Wo||P!==Y){Gt.buffers.depth.getReversed()?(Ut.copy(Y.projectionMatrix),Iz(Ut),Uz(Ut),ei.setValue(Z,"projectionMatrix",Ut)):ei.setValue(Z,"projectionMatrix",Y.projectionMatrix),ei.setValue(Z,"viewMatrix",Y.matrixWorldInverse);const _s=ei.map.cameraPosition;_s!==void 0&&_s.setValue(Z,ve.setFromMatrixPosition(Y.matrixWorld)),Vt.logarithmicDepthBuffer&&ei.setValue(Z,"logDepthBufFC",2/(Math.log(Y.far+1)/Math.LN2)),(Rt.isMeshPhongMaterial||Rt.isMeshToonMaterial||Rt.isMeshLambertMaterial||Rt.isMeshBasicMaterial||Rt.isMeshStandardMaterial||Rt.isShaderMaterial)&&ei.setValue(Z,"isOrthographic",Y.isOrthographicCamera===!0),P!==Y&&(P=Y,ri=!0,Ko=!0)}if(yt.isSkinnedMesh){ei.setOptional(Z,yt,"bindMatrix"),ei.setOptional(Z,yt,"bindMatrixInverse");const ys=yt.skeleton;ys&&(ys.boneTexture===null&&ys.computeBoneTexture(),ei.setValue(Z,"boneTexture",ys.boneTexture,$))}yt.isBatchedMesh&&(ei.setOptional(Z,yt,"batchingTexture"),ei.setValue(Z,"batchingTexture",yt._matricesTexture,$),ei.setOptional(Z,yt,"batchingIdTexture"),ei.setValue(Z,"batchingIdTexture",yt._indirectTexture,$),ei.setOptional(Z,yt,"batchingColorTexture"),yt._colorsTexture!==null&&ei.setValue(Z,"batchingColorTexture",yt._colorsTexture,$));const $i=Ct.morphAttributes;if(($i.position!==void 0||$i.normal!==void 0||$i.color!==void 0)&&Te.update(yt,Ct,Bs),(ri||Ie.receiveShadow!==yt.receiveShadow)&&(Ie.receiveShadow=yt.receiveShadow,ei.setValue(Z,"receiveShadow",yt.receiveShadow)),Rt.isMeshGouraudMaterial&&Rt.envMap!==null&&(Os.envMap.value=Ae,Os.flipEnvMap.value=Ae.isCubeTexture&&Ae.isRenderTargetTexture===!1?-1:1),Rt.isMeshStandardMaterial&&Rt.envMap===null&&pt.environment!==null&&(Os.envMapIntensity.value=pt.environmentIntensity),ri&&(ei.setValue(Z,"toneMappingExposure",B.toneMappingExposure),Ie.needsLights&&Nl(Os,Ko),Yt&&Rt.fog===!0&&te.refreshFogUniforms(Os,Yt),te.refreshMaterialUniforms(Os,Rt,nt,tt,S.state.transmissionRenderTarget[Y.id]),O4.upload(Z,uo(Ie),Os,$)),Rt.isShaderMaterial&&Rt.uniformsNeedUpdate===!0&&(O4.upload(Z,uo(Ie),Os,$),Rt.uniformsNeedUpdate=!1),Rt.isSpriteMaterial&&ei.setValue(Z,"center",yt.center),ei.setValue(Z,"modelViewMatrix",yt.modelViewMatrix),ei.setValue(Z,"normalMatrix",yt.normalMatrix),ei.setValue(Z,"modelMatrix",yt.matrixWorld),Rt.isShaderMaterial||Rt.isRawShaderMaterial){const ys=Rt.uniformsGroups;for(let _s=0,vr=ys.length;_s<vr;_s++){const Jo=ys[_s];mt.update(Jo,Bs),mt.bind(Jo,Bs)}}return Bs}function Nl(Y,pt){Y.ambientLightColor.needsUpdate=pt,Y.lightProbe.needsUpdate=pt,Y.directionalLights.needsUpdate=pt,Y.directionalLightShadows.needsUpdate=pt,Y.pointLights.needsUpdate=pt,Y.pointLightShadows.needsUpdate=pt,Y.spotLights.needsUpdate=pt,Y.spotLightShadows.needsUpdate=pt,Y.rectAreaLights.needsUpdate=pt,Y.hemisphereLights.needsUpdate=pt}function Zi(Y){return Y.isMeshLambertMaterial||Y.isMeshToonMaterial||Y.isMeshPhongMaterial||Y.isMeshStandardMaterial||Y.isShadowMaterial||Y.isShaderMaterial&&Y.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(Y,pt,Ct){const Rt=qt.get(Y);Rt.__autoAllocateDepthBuffer=Y.resolveDepthBuffer===!1,Rt.__autoAllocateDepthBuffer===!1&&(Rt.__useRenderToTexture=!1),qt.get(Y.texture).__webglTexture=pt,qt.get(Y.depthTexture).__webglTexture=Rt.__autoAllocateDepthBuffer?void 0:Ct,Rt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Y,pt){const Ct=qt.get(Y);Ct.__webglFramebuffer=pt,Ct.__useDefaultFramebuffer=pt===void 0};const uf=Z.createFramebuffer();this.setRenderTarget=function(Y,pt=0,Ct=0){z=Y,I=pt,F=Ct;let Rt=!0,yt=null,Yt=!1,se=!1;if(Y){const Ae=qt.get(Y);if(Ae.__useDefaultFramebuffer!==void 0)Gt.bindFramebuffer(Z.FRAMEBUFFER,null),Rt=!1;else if(Ae.__webglFramebuffer===void 0)$.setupRenderTarget(Y);else if(Ae.__hasExternalTextures)$.rebindTextures(Y,qt.get(Y.texture).__webglTexture,qt.get(Y.depthTexture).__webglTexture);else if(Y.depthBuffer){const Ce=Y.depthTexture;if(Ae.__boundDepthTexture!==Ce){if(Ce!==null&&qt.has(Ce)&&(Y.width!==Ce.image.width||Y.height!==Ce.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$.setupDepthRenderbuffer(Y)}}const Ge=Y.texture;(Ge.isData3DTexture||Ge.isDataArrayTexture||Ge.isCompressedArrayTexture)&&(se=!0);const Oe=qt.get(Y).__webglFramebuffer;Y.isWebGLCubeRenderTarget?(Array.isArray(Oe[pt])?yt=Oe[pt][Ct]:yt=Oe[pt],Yt=!0):Y.samples>0&&$.useMultisampledRTT(Y)===!1?yt=qt.get(Y).__webglMultisampledFramebuffer:Array.isArray(Oe)?yt=Oe[Ct]:yt=Oe,X.copy(Y.viewport),ot.copy(Y.scissor),it=Y.scissorTest}else X.copy(at).multiplyScalar(nt).floor(),ot.copy(xt).multiplyScalar(nt).floor(),it=Et;if(Ct!==0&&(yt=uf),Gt.bindFramebuffer(Z.FRAMEBUFFER,yt)&&Rt&&Gt.drawBuffers(Y,yt),Gt.viewport(X),Gt.scissor(ot),Gt.setScissorTest(it),Yt){const Ae=qt.get(Y.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Ae.__webglTexture,Ct)}else if(se){const Ae=qt.get(Y.texture),Ge=pt;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Ae.__webglTexture,Ct,Ge)}else if(Y!==null&&Ct!==0){const Ae=qt.get(Y.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,Ae.__webglTexture,Ct)}U=-1},this.readRenderTargetPixels=function(Y,pt,Ct,Rt,yt,Yt,se){if(!(Y&&Y.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ae=qt.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&se!==void 0&&(ae=ae[se]),ae){Gt.bindFramebuffer(Z.FRAMEBUFFER,ae);try{const Ae=Y.texture,Ge=Ae.format,Oe=Ae.type;if(!Vt.textureFormatReadable(Ge)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Vt.textureTypeReadable(Oe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pt>=0&&pt<=Y.width-Rt&&Ct>=0&&Ct<=Y.height-yt&&Z.readPixels(pt,Ct,Rt,yt,He.convert(Ge),He.convert(Oe),Yt)}finally{const Ae=z!==null?qt.get(z).__webglFramebuffer:null;Gt.bindFramebuffer(Z.FRAMEBUFFER,Ae)}}},this.readRenderTargetPixelsAsync=async function(Y,pt,Ct,Rt,yt,Yt,se){if(!(Y&&Y.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ae=qt.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&se!==void 0&&(ae=ae[se]),ae)if(pt>=0&&pt<=Y.width-Rt&&Ct>=0&&Ct<=Y.height-yt){Gt.bindFramebuffer(Z.FRAMEBUFFER,ae);const Ae=Y.texture,Ge=Ae.format,Oe=Ae.type;if(!Vt.textureFormatReadable(Ge))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Vt.textureTypeReadable(Oe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ce=Z.createBuffer();Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Ce),Z.bufferData(Z.PIXEL_PACK_BUFFER,Yt.byteLength,Z.STREAM_READ),Z.readPixels(pt,Ct,Rt,yt,He.convert(Ge),He.convert(Oe),0);const pn=z!==null?qt.get(z).__webglFramebuffer:null;Gt.bindFramebuffer(Z.FRAMEBUFFER,pn);const In=Z.fenceSync(Z.SYNC_GPU_COMMANDS_COMPLETE,0);return Z.flush(),await Nz(Z,In,4),Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Ce),Z.getBufferSubData(Z.PIXEL_PACK_BUFFER,0,Yt),Z.deleteBuffer(Ce),Z.deleteSync(In),Yt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Y,pt=null,Ct=0){const Rt=Math.pow(2,-Ct),yt=Math.floor(Y.image.width*Rt),Yt=Math.floor(Y.image.height*Rt),se=pt!==null?pt.x:0,ae=pt!==null?pt.y:0;$.setTexture2D(Y,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,Ct,0,0,se,ae,yt,Yt),Gt.unbindTexture()};const hf=Z.createFramebuffer(),fo=Z.createFramebuffer();this.copyTextureToTexture=function(Y,pt,Ct=null,Rt=null,yt=0,Yt=null){Yt===null&&(yt!==0?(D4("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Yt=yt,yt=0):Yt=0);let se,ae,Ae,Ge,Oe,Ce,pn,In,Mi;const yn=Y.isCompressedTexture?Y.mipmaps[Yt]:Y.image;if(Ct!==null)se=Ct.max.x-Ct.min.x,ae=Ct.max.y-Ct.min.y,Ae=Ct.isBox3?Ct.max.z-Ct.min.z:1,Ge=Ct.min.x,Oe=Ct.min.y,Ce=Ct.isBox3?Ct.min.z:0;else{const $i=Math.pow(2,-yt);se=Math.floor(yn.width*$i),ae=Math.floor(yn.height*$i),Y.isDataArrayTexture?Ae=yn.depth:Y.isData3DTexture?Ae=Math.floor(yn.depth*$i):Ae=1,Ge=0,Oe=0,Ce=0}Rt!==null?(pn=Rt.x,In=Rt.y,Mi=Rt.z):(pn=0,In=0,Mi=0);const bn=He.convert(pt.format),Ie=He.convert(pt.type);let Ri;pt.isData3DTexture?($.setTexture3D(pt,0),Ri=Z.TEXTURE_3D):pt.isDataArrayTexture||pt.isCompressedArrayTexture?($.setTexture2DArray(pt,0),Ri=Z.TEXTURE_2D_ARRAY):($.setTexture2D(pt,0),Ri=Z.TEXTURE_2D),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,pt.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pt.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,pt.unpackAlignment);const Dn=Z.getParameter(Z.UNPACK_ROW_LENGTH),Bs=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),Wo=Z.getParameter(Z.UNPACK_SKIP_PIXELS),ri=Z.getParameter(Z.UNPACK_SKIP_ROWS),Ko=Z.getParameter(Z.UNPACK_SKIP_IMAGES);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,yn.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,yn.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Ge),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Oe),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Ce);const ei=Y.isDataArrayTexture||Y.isData3DTexture,Os=pt.isDataArrayTexture||pt.isData3DTexture;if(Y.isDepthTexture){const $i=qt.get(Y),ys=qt.get(pt),_s=qt.get($i.__renderTarget),vr=qt.get(ys.__renderTarget);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,_s.__webglFramebuffer),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,vr.__webglFramebuffer);for(let Jo=0;Jo<Ae;Jo++)ei&&(Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,qt.get(Y).__webglTexture,yt,Ce+Jo),Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,qt.get(pt).__webglTexture,Yt,Mi+Jo)),Z.blitFramebuffer(Ge,Oe,se,ae,pn,In,se,ae,Z.DEPTH_BUFFER_BIT,Z.NEAREST);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,null),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else if(yt!==0||Y.isRenderTargetTexture||qt.has(Y)){const $i=qt.get(Y),ys=qt.get(pt);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,hf),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,fo);for(let _s=0;_s<Ae;_s++)ei?Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,$i.__webglTexture,yt,Ce+_s):Z.framebufferTexture2D(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,$i.__webglTexture,yt),Os?Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,ys.__webglTexture,Yt,Mi+_s):Z.framebufferTexture2D(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,ys.__webglTexture,Yt),yt!==0?Z.blitFramebuffer(Ge,Oe,se,ae,pn,In,se,ae,Z.COLOR_BUFFER_BIT,Z.NEAREST):Os?Z.copyTexSubImage3D(Ri,Yt,pn,In,Mi+_s,Ge,Oe,se,ae):Z.copyTexSubImage2D(Ri,Yt,pn,In,Ge,Oe,se,ae);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,null),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else Os?Y.isDataTexture||Y.isData3DTexture?Z.texSubImage3D(Ri,Yt,pn,In,Mi,se,ae,Ae,bn,Ie,yn.data):pt.isCompressedArrayTexture?Z.compressedTexSubImage3D(Ri,Yt,pn,In,Mi,se,ae,Ae,bn,yn.data):Z.texSubImage3D(Ri,Yt,pn,In,Mi,se,ae,Ae,bn,Ie,yn):Y.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,Yt,pn,In,se,ae,bn,Ie,yn.data):Y.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,Yt,pn,In,yn.width,yn.height,bn,yn.data):Z.texSubImage2D(Z.TEXTURE_2D,Yt,pn,In,se,ae,bn,Ie,yn);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,Dn),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,Bs),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Wo),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,ri),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Ko),Yt===0&&pt.generateMipmaps&&Z.generateMipmap(Ri),Gt.unbindTexture()},this.copyTextureToTexture3D=function(Y,pt,Ct=null,Rt=null,yt=0){return D4('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Y,pt,Ct,Rt,yt)},this.initRenderTarget=function(Y){qt.get(Y).__webglFramebuffer===void 0&&$.setupRenderTarget(Y)},this.initTexture=function(Y){Y.isCubeTexture?$.setTextureCube(Y,0):Y.isData3DTexture?$.setTexture3D(Y,0):Y.isDataArrayTexture||Y.isCompressedArrayTexture?$.setTexture2DArray(Y,0):$.setTexture2D(Y,0),Gt.unbindTexture()},this.resetState=function(){I=0,F=0,z=null,Gt.reset(),Gn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return wl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=Fn._getDrawingBufferColorSpace(t),e.unpackColorSpace=Fn._getUnpackColorSpace()}}const Xq=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:bw,AddEquation:gd,AddOperation:lB,AdditiveAnimationBlendMode:Lw,AdditiveBlending:y5,AgXToneMapping:dB,AlphaFormat:Tw,AlwaysCompare:wB,AlwaysDepth:A3,AlwaysStencilFunc:b5,AmbientLight:dO,AnimationAction:SO,AnimationClip:Xg,AnimationLoader:ck,AnimationMixer:l7,AnimationObjectGroup:Nk,AnimationUtils:rk,ArcCurve:VB,ArrayCamera:AO,ArrowHelper:iV,AttachedBindMode:x5,Audio:xO,AudioAnalyser:Ek,AudioContext:s7,AudioListener:xk,AudioLoader:yk,AxesHelper:sV,BackSide:qs,BasicDepthPacking:cp,BasicShadowMap:kD,BatchedMesh:zB,Bone:sM,BooleanKeyframeTrack:o0,Box2:Qk,Box3:Nr,Box3Helper:eV,BoxGeometry:a0,BoxHelper:tV,BufferAttribute:zn,BufferGeometry:$e,BufferGeometryLoader:yO,ByteType:Sw,Cache:Jh,Camera:Rx,CameraHelper:$k,CanvasTexture:CG,CapsuleGeometry:lM,CatmullRomCurve3:QB,CineonToneMapping:hB,CircleGeometry:cM,ClampToEdgeWrapping:zo,Clock:r7,Color:oe,ColorKeyframeTrack:Zw,ColorManagement:Fn,CompressedArrayTexture:MG,CompressedCubeTexture:TG,CompressedTexture:oM,CompressedTextureLoader:uk,ConeGeometry:Ix,ConstantAlphaFactor:rB,ConstantColorFactor:iB,Controls:aV,CubeCamera:IB,CubeReflectionMapping:rf,CubeRefractionMapping:$d,CubeTexture:Lx,CubeTextureLoader:hk,CubeUVReflectionMapping:Sy,CubicBezierCurve:kw,CubicBezierCurve3:jB,CubicInterpolant:lO,CullFaceBack:v5,CullFaceFront:GD,CullFaceFrontBack:PH,CullFaceNone:zD,Curve:Oc,CurvePath:qB,CustomBlending:VD,CustomToneMapping:fB,CylinderGeometry:Nx,Cylindrical:Vk,Data3DTexture:eM,DataArrayTexture:wx,DataTexture:Fu,DataTextureLoader:fk,DataUtils:Jz,DecrementStencilOp:YH,DecrementWrapStencilOp:KH,DefaultLoadingManager:W1,DepthArrayTexture:wG,DepthFormat:hy,DepthStencilFormat:kg,DepthTexture:Ox,DetachedBindMode:mB,DirectionalLight:i7,DirectionalLightHelper:Zk,DiscreteInterpolant:cO,DodecahedronGeometry:uM,DoubleSide:Da,DstAlphaFactor:ZD,DstColorFactor:tB,DynamicCopyUsage:hz,DynamicDrawUsage:rz,DynamicReadUsage:lz,EdgesGeometry:kB,EllipseCurve:hM,EqualCompare:EB,EqualDepth:b3,EqualStencilFunc:tz,EquirectangularReflectionMapping:Y_,EquirectangularRefractionMapping:W_,Euler:Qo,EventDispatcher:Yo,ExtrudeGeometry:fM,FileLoader:jo,Float16BufferAttribute:sG,Float32BufferAttribute:Me,FloatType:Na,Fog:iM,FogExp2:nM,FramebufferTexture:EG,FrontSide:Dc,Frustum:My,FrustumArray:rM,GLBufferAttribute:Gk,GLSL1:dz,GLSL3:S5,GreaterCompare:MB,GreaterDepth:E3,GreaterEqualCompare:CB,GreaterEqualDepth:S3,GreaterEqualStencilFunc:sz,GreaterStencilFunc:nz,GridHelper:Kk,Group:Kh,HalfFloatType:r0,HemisphereLight:fO,HemisphereLightHelper:Wk,IcosahedronGeometry:dM,ImageBitmapLoader:_O,ImageLoader:aA,ImageUtils:DB,IncrementStencilOp:qH,IncrementWrapStencilOp:WH,InstancedBufferAttribute:Vg,InstancedBufferGeometry:vO,InstancedInterleavedBuffer:zk,InstancedMesh:Fw,Int16BufferAttribute:nG,Int32BufferAttribute:iG,Int8BufferAttribute:$z,IntType:qE,InterleavedBuffer:Dx,InterleavedBufferAttribute:ep,Interpolant:Cy,InterpolateDiscrete:fy,InterpolateLinear:dy,InterpolateSmooth:L4,InterpolationSamplingMode:gz,InterpolationSamplingType:mz,InvertStencilOp:JH,KeepStencilOp:bm,KeyframeTrack:Ol,LOD:HB,LatheGeometry:pM,Layers:my,LessCompare:SB,LessDepth:x3,LessEqualCompare:Bw,LessEqualDepth:zg,LessEqualStencilFunc:ez,LessStencilFunc:$H,Light:fp,LightProbe:gO,Line:af,Line3:jk,LineBasicMaterial:oa,LineCurve:Vw,LineCurve3:XB,LineDashedMaterial:rO,LineLoop:Hw,LineSegments:Bc,LinearFilter:Ni,LinearInterpolant:Jw,LinearMipMapLinearFilter:GH,LinearMipMapNearestFilter:zH,LinearMipmapLinearFilter:Cl,LinearMipmapNearestFilter:Z1,LinearSRGBColorSpace:zu,LinearToneMapping:cB,LinearTransfer:J_,Loader:la,LoaderUtils:Wd,LoadingManager:$w,LoopOnce:gB,LoopPingPong:yB,LoopRepeat:vB,MOUSE:IH,Material:gs,MaterialLoader:xM,MathUtils:tA,Matrix2:c7,Matrix3:on,Matrix4:Ne,MaxEquation:qD,Mesh:as,MeshBasicMaterial:Go,MeshDepthMaterial:Yw,MeshDistanceMaterial:Ww,MeshLambertMaterial:iO,MeshMatcapMaterial:sO,MeshNormalMaterial:qw,MeshPhongMaterial:eO,MeshPhysicalMaterial:Bl,MeshStandardMaterial:Fx,MeshToonMaterial:nO,MinEquation:XD,MirroredRepeatWrapping:cy,MixOperation:oB,MultiplyBlending:A5,MultiplyOperation:Tx,NearestFilter:os,NearestMipMapLinearFilter:HH,NearestMipMapNearestFilter:FH,NearestMipmapLinearFilter:Om,NearestMipmapNearestFilter:XE,NeutralToneMapping:pB,NeverCompare:bB,NeverDepth:_3,NeverStencilFunc:ZH,NoBlending:aa,NoColorSpace:Mc,NoToneMapping:Lc,NormalAnimationBlendMode:$E,NormalBlending:Ug,NotEqualCompare:TB,NotEqualDepth:M3,NotEqualStencilFunc:iz,NumberKeyframeTrack:jg,Object3D:Ln,ObjectLoader:gk,ObjectSpaceNormalMap:xB,OctahedronGeometry:Ux,OneFactor:WD,OneMinusConstantAlphaFactor:aB,OneMinusConstantColorFactor:sB,OneMinusDstAlphaFactor:$D,OneMinusDstColorFactor:eB,OneMinusSrcAlphaFactor:y3,OneMinusSrcColorFactor:JD,OrthographicCamera:wy,PCFShadowMap:QE,PCFSoftShadowMap:B_,PMREMGenerator:L5,Path:nE,PerspectiveCamera:Rs,Plane:md,PlaneGeometry:Ty,PlaneHelper:nV,PointLight:n7,PointLightHelper:qk,Points:zw,PointsMaterial:aM,PolarGridHelper:Jk,PolyhedronGeometry:hp,PositionalAudio:Sk,PropertyBinding:Qn,PropertyMixer:bO,QuadraticBezierCurve:Qw,QuadraticBezierCurve3:jw,Quaternion:Or,QuaternionKeyframeTrack:np,QuaternionLinearInterpolant:uO,RED_GREEN_RGTC2_Format:K3,RED_RGTC1_Format:Rw,REVISION:s0,RGBADepthPacking:AB,RGBAFormat:ia,RGBAIntegerFormat:ZE,RGBA_ASTC_10x10_Format:Q3,RGBA_ASTC_10x5_Format:G3,RGBA_ASTC_10x6_Format:k3,RGBA_ASTC_10x8_Format:V3,RGBA_ASTC_12x10_Format:j3,RGBA_ASTC_12x12_Format:X3,RGBA_ASTC_4x4_Format:O3,RGBA_ASTC_5x4_Format:N3,RGBA_ASTC_5x5_Format:I3,RGBA_ASTC_6x5_Format:U3,RGBA_ASTC_6x6_Format:P3,RGBA_ASTC_8x5_Format:F3,RGBA_ASTC_8x6_Format:H3,RGBA_ASTC_8x8_Format:z3,RGBA_BPTC_Format:P_,RGBA_ETC2_EAC_Format:B3,RGBA_PVRTC_2BPPV1_Format:R3,RGBA_PVRTC_4BPPV1_Format:w3,RGBA_S3TC_DXT1_Format:N_,RGBA_S3TC_DXT3_Format:I_,RGBA_S3TC_DXT5_Format:U_,RGBDepthPacking:VH,RGBFormat:Cw,RGBIntegerFormat:kH,RGB_BPTC_SIGNED_Format:q3,RGB_BPTC_UNSIGNED_Format:Y3,RGB_ETC1_Format:L3,RGB_ETC2_Format:D3,RGB_PVRTC_2BPPV1_Format:C3,RGB_PVRTC_4BPPV1_Format:T3,RGB_S3TC_DXT1_Format:O_,RGDepthPacking:QH,RGFormat:ww,RGIntegerFormat:JE,RawShaderMaterial:tO,Ray:Ey,Raycaster:EO,RectAreaLight:pO,RedFormat:KE,RedIntegerFormat:Cx,ReinhardToneMapping:uB,RenderTarget:tM,RenderTarget3D:Uk,RenderTargetArray:Pk,RepeatWrapping:tp,ReplaceStencilOp:XH,ReverseSubtractEquation:jD,RingGeometry:mM,SIGNED_RED_GREEN_RGTC2_Format:J3,SIGNED_RED_RGTC1_Format:W3,SRGBColorSpace:Kn,SRGBTransfer:fi,Scene:nA,ShaderChunk:fn,ShaderLib:Ec,ShaderMaterial:Ks,ShadowMaterial:$B,Shape:Fg,ShapeGeometry:gM,ShapePath:rV,ShapeUtils:Cc,ShortType:Ew,Skeleton:Bx,SkeletonHelper:MO,SkinnedMesh:Pw,Source:Xd,Sphere:mr,SphereGeometry:Px,Spherical:kk,SphericalHarmonics3:mO,SplineCurve:Xw,SpotLight:e7,SpotLightHelper:Xk,Sprite:FB,SpriteMaterial:Uw,SrcAlphaFactor:v3,SrcAlphaSaturateFactor:nB,SrcColorFactor:KD,StaticCopyUsage:uz,StaticDrawUsage:Z_,StaticReadUsage:oz,StereoCamera:_k,StreamCopyUsage:fz,StreamDrawUsage:az,StreamReadUsage:cz,StringKeyframeTrack:l0,SubtractEquation:QD,SubtractiveBlending:_5,TOUCH:UH,TangentSpaceNormalMap:up,TetrahedronGeometry:vM,Texture:wi,TextureLoader:hO,TextureUtils:hV,TimestampQuery:pz,TorusGeometry:yM,TorusKnotGeometry:_M,Triangle:ro,TriangleFanDrawMode:Z3,TriangleStripDrawMode:Dw,TrianglesDrawMode:_B,TubeGeometry:AM,UVMapping:jE,Uint16BufferAttribute:Nw,Uint32BufferAttribute:Iw,Uint8BufferAttribute:tG,Uint8ClampedBufferAttribute:eG,Uniform:xn,UniformsGroup:Hk,UniformsLib:pe,UniformsUtils:NB,UnsignedByteType:Ws,UnsignedInt248Type:Gg,UnsignedInt5999Type:Mw,UnsignedIntType:Hu,UnsignedShort4444Type:YE,UnsignedShort5551Type:WE,UnsignedShortType:uy,VSMShadowMap:cc,Vector2:Pt,Vector3:et,Vector4:On,VectorKeyframeTrack:ip,VideoFrameTexture:SG,VideoTexture:GB,WebGL3DRenderTarget:Gz,WebGLArrayRenderTarget:zz,WebGLCoordinateSystem:wl,WebGLCubeRenderTarget:UB,WebGLRenderTarget:Ds,WebGLRenderer:OO,WebGLUtils:BO,WebGPUCoordinateSystem:$_,WebXRController:B4,WireframeGeometry:ZB,WrapAroundEnding:K_,ZeroCurvatureEnding:Nm,ZeroFactor:YD,ZeroSlopeEnding:Im,ZeroStencilOp:jH,createCanvasElement:LB},Symbol.toStringTag,{value:"Module"}));var w8={exports:{}},gh={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LL;function qq(){return LL||(LL=1,gh.ConcurrentRoot=1,gh.ContinuousEventPriority=8,gh.DefaultEventPriority=32,gh.DiscreteEventPriority=2,gh.IdleEventPriority=268435456,gh.LegacyRoot=0,gh.NoEventPriority=0),gh}var DL;function Yq(){return DL||(DL=1,w8.exports=qq()),w8.exports}var N4=Yq(),R8={exports:{}},L8={},D8={exports:{}},B8={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BL;function Wq(){if(BL)return B8;BL=1;var i=i0();function t(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var e=typeof Object.is=="function"?Object.is:t,n=i.useState,s=i.useEffect,r=i.useLayoutEffect,a=i.useDebugValue;function l(g,v){var _=v(),b=n({inst:{value:_,getSnapshot:v}}),C=b[0].inst,M=b[1];return r(function(){C.value=_,C.getSnapshot=v,u(C)&&M({inst:C})},[g,_,v]),s(function(){return u(C)&&M({inst:C}),g(function(){u(C)&&M({inst:C})})},[g]),a(_),_}function u(g){var v=g.getSnapshot;g=g.value;try{var _=v();return!e(g,_)}catch{return!0}}function f(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return B8.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:m,B8}var OL;function Kq(){return OL||(OL=1,D8.exports=Wq()),D8.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NL;function Jq(){if(NL)return L8;NL=1;var i=i0(),t=Kq();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var n=typeof Object.is=="function"?Object.is:e,s=t.useSyncExternalStore,r=i.useRef,a=i.useEffect,l=i.useMemo,u=i.useDebugValue;return L8.useSyncExternalStoreWithSelector=function(f,m,g,v,_){var b=r(null);if(b.current===null){var C={hasValue:!1,value:null};b.current=C}else C=b.current;b=l(function(){function S(I){if(!R){if(R=!0,D=I,I=v(I),_!==void 0&&C.hasValue){var F=C.value;if(_(F,I))return B=F}return B=I}if(F=B,n(D,I))return F;var z=v(I);return _!==void 0&&_(F,z)?(D=I,F):(D=I,B=z)}var R=!1,D,B,N=g===void 0?null:g;return[function(){return S(m())},N===null?void 0:function(){return S(N())}]},[m,g,v,_]);var M=s(f,b[0],b[1]);return a(function(){C.hasValue=!0,C.value=M},[M]),u(M),M},L8}var IL;function Zq(){return IL||(IL=1,R8.exports=Jq()),R8.exports}var $q=Zq();const tY=UE($q),UL=i=>{let t;const e=new Set,n=(f,m)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const v=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),e.forEach(_=>_(t,v))}},s=()=>t,l={setState:n,getState:s,getInitialState:()=>u,subscribe:f=>(e.add(f),()=>e.delete(f))},u=t=i(n,s,l);return l},NO=i=>i?UL(i):UL,{useSyncExternalStoreWithSelector:eY}=tY,nY=i=>i;function iY(i,t=nY,e){const n=eY(i.subscribe,i.getState,i.getInitialState,t,e);return Oa.useDebugValue(n),n}const PL=(i,t)=>{const e=NO(i),n=(s,r=t)=>iY(e,s,r);return Object.assign(n,e),n},sY=(i,t)=>i?PL(i,t):PL;var O8={exports:{}},N8={exports:{}},I8={exports:{}},U8={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FL;function rY(){return FL||(FL=1,function(i){function t(j,tt){var nt=j.length;j.push(tt);t:for(;0<nt;){var _t=nt-1>>>1,J=j[_t];if(0<s(J,tt))j[_t]=tt,j[nt]=J,nt=_t;else break t}}function e(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var tt=j[0],nt=j.pop();if(nt!==tt){j[0]=nt;t:for(var _t=0,J=j.length,at=J>>>1;_t<at;){var xt=2*(_t+1)-1,Et=j[xt],ct=xt+1,wt=j[ct];if(0>s(Et,nt))ct<J&&0>s(wt,Et)?(j[_t]=wt,j[ct]=nt,_t=ct):(j[_t]=Et,j[xt]=nt,_t=xt);else if(ct<J&&0>s(wt,nt))j[_t]=wt,j[ct]=nt,_t=ct;else break t}}return tt}function s(j,tt){var nt=j.sortIndex-tt.sortIndex;return nt!==0?nt:j.id-tt.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();i.unstable_now=function(){return a.now()-l}}var u=[],f=[],m=1,g=null,v=3,_=!1,b=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(j){for(var tt=e(f);tt!==null;){if(tt.callback===null)n(f);else if(tt.startTime<=j)n(f),tt.sortIndex=tt.expirationTime,t(u,tt);else break;tt=e(f)}}function B(j){if(C=!1,D(j),!b)if(e(u)!==null)b=!0,ut();else{var tt=e(f);tt!==null&&dt(B,tt.startTime-j)}}var N=!1,I=-1,F=5,z=-1;function U(){return!(i.unstable_now()-z<F)}function P(){if(N){var j=i.unstable_now();z=j;var tt=!0;try{t:{b=!1,C&&(C=!1,S(I),I=-1),_=!0;var nt=v;try{e:{for(D(j),g=e(u);g!==null&&!(g.expirationTime>j&&U());){var _t=g.callback;if(typeof _t=="function"){g.callback=null,v=g.priorityLevel;var J=_t(g.expirationTime<=j);if(j=i.unstable_now(),typeof J=="function"){g.callback=J,D(j),tt=!0;break e}g===e(u)&&n(u),D(j)}else n(u);g=e(u)}if(g!==null)tt=!0;else{var at=e(f);at!==null&&dt(B,at.startTime-j),tt=!1}}break t}finally{g=null,v=nt,_=!1}tt=void 0}}finally{tt?X():N=!1}}}var X;if(typeof R=="function")X=function(){R(P)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,it=ot.port2;ot.port1.onmessage=P,X=function(){it.postMessage(null)}}else X=function(){M(P,0)};function ut(){N||(N=!0,X())}function dt(j,tt){I=M(function(){j(i.unstable_now())},tt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_continueExecution=function(){b||_||(b=!0,ut())},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return e(u)},i.unstable_next=function(j){switch(v){case 1:case 2:case 3:var tt=3;break;default:tt=v}var nt=v;v=tt;try{return j()}finally{v=nt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(j,tt){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var nt=v;v=j;try{return tt()}finally{v=nt}},i.unstable_scheduleCallback=function(j,tt,nt){var _t=i.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?_t+nt:_t):nt=_t,j){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=nt+J,j={id:m++,callback:tt,priorityLevel:j,startTime:nt,expirationTime:J,sortIndex:-1},nt>_t?(j.sortIndex=nt,t(f,j),e(u)===null&&j===e(f)&&(C?(S(I),I=-1):C=!0,dt(B,nt-_t))):(j.sortIndex=J,t(u,j),b||_||(b=!0,ut())),j},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(j){var tt=v;return function(){var nt=v;v=tt;try{return j.apply(this,arguments)}finally{v=nt}}}}(U8)),U8}var HL;function IO(){return HL||(HL=1,I8.exports=rY()),I8.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zL;function aY(){return zL||(zL=1,function(i){i.exports=function(t){function e(h,d,A,T){return new r2(h,d,A,T)}function n(){}function s(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)d+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(h){return h===null||typeof h!="object"?null:(h=ql&&h[ql]||h["@@iterator"],typeof h=="function"?h:null)}function a(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===c2?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case Kc:return"Fragment";case Ga:return"Portal";case U0:return"Profiler";case Vp:return"StrictMode";case P0:return"Suspense";case Df:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case go:return(h.displayName||"Context")+".Provider";case o2:return(h._context.displayName||"Context")+".Consumer";case jp:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case F0:return d=h.displayName||null,d!==null?d:a(h.type)||"Memo";case ka:d=h._payload,h=h._init;try{return a(h(d))}catch{}}return null}function l(h){if(nl===void 0)try{throw Error()}catch(A){var d=A.stack.trim().match(/\n( *(at )?)/);nl=d&&d[1]||"",Yl=-1<A.stack.indexOf(`
    at`)?" (<anonymous>)":-1<A.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nl+h+Yl}function u(h,d){if(!h||ju)return"";ju=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var T={DetermineComponentFrameRoot:function(){try{if(d){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(Ke){var ye=Ke}Reflect.construct(h,[],de)}else{try{de.call()}catch(Ke){ye=Ke}h.call(de.prototype)}}else{try{throw Error()}catch(Ke){ye=Ke}(de=h())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(Ke){if(Ke&&ye&&typeof Ke.stack=="string")return[Ke.stack,ye.stack]}return[null,null]}};T.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(T.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(T.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=T.DetermineComponentFrameRoot(),K=O[0],rt=O[1];if(K&&rt){var At=K.split(`
`),Ht=rt.split(`
`);for(L=T=0;T<At.length&&!At[T].includes("DetermineComponentFrameRoot");)T++;for(;L<Ht.length&&!Ht[L].includes("DetermineComponentFrameRoot");)L++;if(T===At.length||L===Ht.length)for(T=At.length-1,L=Ht.length-1;1<=T&&0<=L&&At[T]!==Ht[L];)L--;for(;1<=T&&0<=L;T--,L--)if(At[T]!==Ht[L]){if(T!==1||L!==1)do if(T--,L--,0>L||At[T]!==Ht[L]){var $t=`
`+At[T].replace(" at new "," at ");return h.displayName&&$t.includes("<anonymous>")&&($t=$t.replace("<anonymous>",h.displayName)),$t}while(1<=T&&0<=L);break}}}finally{ju=!1,Error.prepareStackTrace=A}return(A=h?h.displayName||h.name:"")?l(A):""}function f(h){switch(h.tag){case 26:case 27:case 5:return l(h.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return h=u(h.type,!1),h;case 11:return h=u(h.type.render,!1),h;case 1:return h=u(h.type,!0),h;default:return""}}function m(h){try{var d="";do d+=f(h),h=h.return;while(h);return d}catch(A){return`
Error generating stack: `+A.message+`
`+A.stack}}function g(h){var d=h,A=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,(d.flags&4098)!==0&&(A=d.return),h=d.return;while(h)}return d.tag===3?A:null}function v(h){if(g(h)!==h)throw Error(s(188))}function _(h){var d=h.alternate;if(!d){if(d=g(h),d===null)throw Error(s(188));return d!==h?null:h}for(var A=h,T=d;;){var L=A.return;if(L===null)break;var O=L.alternate;if(O===null){if(T=L.return,T!==null){A=T;continue}break}if(L.child===O.child){for(O=L.child;O;){if(O===A)return v(L),h;if(O===T)return v(L),d;O=O.sibling}throw Error(s(188))}if(A.return!==T.return)A=L,T=O;else{for(var K=!1,rt=L.child;rt;){if(rt===A){K=!0,A=L,T=O;break}if(rt===T){K=!0,T=L,A=O;break}rt=rt.sibling}if(!K){for(rt=O.child;rt;){if(rt===A){K=!0,A=O,T=L;break}if(rt===T){K=!0,T=O,A=L;break}rt=rt.sibling}if(!K)throw Error(s(189))}}if(A.alternate!==T)throw Error(s(190))}if(A.tag!==3)throw Error(s(188));return A.stateNode.current===A?h:d}function b(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(d=b(h),d!==null)return d;h=h.sibling}return null}function C(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(d=C(h),d!==null))return d;h=h.sibling}return null}function M(h){return{current:h}}function S(h){0>Zl||(h.current=Vi[Zl],Vi[Zl]=null,Zl--)}function R(h,d){Zl++,Vi[Zl]=h.current,h.current=d}function D(h){return h>>>=0,h===0?32:31-(Kb(h)/Jb|0)|0}function B(h){var d=h&42;if(d!==0)return d;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function N(h,d){var A=h.pendingLanes;if(A===0)return 0;var T=0,L=h.suspendedLanes,O=h.pingedLanes,K=h.warmLanes;h=h.finishedLanes!==0;var rt=A&134217727;return rt!==0?(A=rt&~L,A!==0?T=B(A):(O&=rt,O!==0?T=B(O):h||(K=rt&~K,K!==0&&(T=B(K))))):(rt=A&~L,rt!==0?T=B(rt):O!==0?T=B(O):h||(K=A&~K,K!==0&&(T=B(K)))),T===0?0:d!==0&&d!==T&&(d&L)===0&&(L=T&-T,K=d&-d,L>=K||L===32&&(K&4194176)!==0)?d:T}function I(h,d){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&d)===0}function F(h,d){switch(h){case 1:case 2:case 4:case 8:return d+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z(){var h=sl;return sl<<=1,(sl&4194176)===0&&(sl=128),h}function U(){var h=Yu;return Yu<<=1,(Yu&62914560)===0&&(Yu=4194304),h}function P(h){for(var d=[],A=0;31>A;A++)d.push(h);return d}function X(h,d){h.pendingLanes|=d,d!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function ot(h,d,A,T,L,O){var K=h.pendingLanes;h.pendingLanes=A,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=A,h.entangledLanes&=A,h.errorRecoveryDisabledLanes&=A,h.shellSuspendCounter=0;var rt=h.entanglements,At=h.expirationTimes,Ht=h.hiddenUpdates;for(A=K&~A;0<A;){var $t=31-Sr(A),de=1<<$t;rt[$t]=0,At[$t]=-1;var ye=Ht[$t];if(ye!==null)for(Ht[$t]=null,$t=0;$t<ye.length;$t++){var Ke=ye[$t];Ke!==null&&(Ke.lane&=-536870913)}A&=~de}T!==0&&it(h,T,0),O!==0&&L===0&&h.tag!==0&&(h.suspendedLanes|=O&~(K&~d))}function it(h,d,A){h.pendingLanes|=d,h.suspendedLanes&=~d;var T=31-Sr(d);h.entangledLanes|=d,h.entanglements[T]=h.entanglements[T]|1073741824|A&4194218}function ut(h,d){var A=h.entangledLanes|=d;for(h=h.entanglements;A;){var T=31-Sr(A),L=1<<T;L&d|h[T]&d&&(h[T]|=d),A&=~L}}function dt(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function j(h){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(Qi,h,void 0,(h.current.flags&128)===128)}catch{}}function tt(h){if(typeof tS=="function"&&bs(h),Qr&&typeof Qr.setStrictMode=="function")try{Qr.setStrictMode(Qi,h)}catch{}}function nt(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}function _t(h,d){if(typeof h=="object"&&h!==null){var A=w2.get(h);return A!==void 0?A:(d={value:h,source:d,stack:m(d)},w2.set(h,d),d)}return{value:h,source:d,stack:m(d)}}function J(h,d){Wu[Ku++]=zf,Wu[Ku++]=Ju,Ju=h,zf=d}function at(h,d,A){da[pa++]=_o,da[pa++]=Ao,da[pa++]=iu,iu=h;var T=_o;h=Ao;var L=32-Sr(T)-1;T&=~(1<<L),A+=1;var O=32-Sr(d)+L;if(30<O){var K=L-L%5;O=(T&(1<<K)-1).toString(32),T>>=K,L-=K,_o=1<<32-Sr(d)+L|A<<L|T,Ao=O+h}else _o=1<<O|A<<L|T,Ao=h}function xt(h){h.return!==null&&(J(h,1),at(h,1,0))}function Et(h){for(;h===Ju;)Ju=Wu[--Ku],Wu[Ku]=null,zf=Wu[--Ku],Wu[Ku]=null;for(;h===iu;)iu=da[--pa],da[pa]=null,Ao=da[--pa],da[pa]=null,_o=da[--pa],da[pa]=null}function ct(h,d){R(rl,d),R(Gf,h),R(hs,null),h=mb(d),S(hs),R(hs,h)}function wt(){S(hs),S(Gf),S(rl)}function Bt(h){h.memoizedState!==null&&R(Zu,h);var d=hs.current,A=If(d,h.type);d!==A&&(R(Gf,h),R(hs,A))}function Ut(h){Gf.current===h&&(S(hs),S(Gf)),Zu.current===h&&(S(Zu),xr?vo._currentValue=Zc:vo._currentValue2=Zc)}function Wt(h){var d=Error(s(418,""));throw re(_t(d,h)),tm}function ve(h,d){if(!Hs)throw Error(s(175));zb(h.stateNode,h.type,h.memoizedProps,d,h)||Wt(h)}function ee(h){for(zs=h.return;zs;)switch(zs.tag){case 3:case 27:Ss=!0;return;case 5:case 13:Ss=!1;return;default:zs=zs.return}}function Ye(h){if(!Hs||h!==zs)return!1;if(!Bn)return ee(h),Bn=!0,!1;var d=!1;if(ai?h.tag!==3&&h.tag!==27&&(h.tag!==5||q0(h.type)&&!en(h.type,h.memoizedProps))&&(d=!0):h.tag!==3&&(h.tag!==5||q0(h.type)&&!en(h.type,h.memoizedProps))&&(d=!0),d&&Gs&&Wt(h),ee(h),h.tag===13){if(!Hs)throw Error(s(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));Gs=kb(h)}else Gs=zs?E2(h.stateNode):null;return!0}function we(){Hs&&(Gs=zs=null,Bn=!1)}function re(h){ja===null?ja=[h]:ja.push(h)}function Z(){for(var h=$u,d=xo=$u=0;d<h;){var A=Xa[d];Xa[d++]=null;var T=Xa[d];Xa[d++]=null;var L=Xa[d];Xa[d++]=null;var O=Xa[d];if(Xa[d++]=null,T!==null&&L!==null){var K=T.pending;K===null?L.next=L:(L.next=K.next,K.next=L),T.pending=L}O!==0&&Gt(A,L,O)}}function Kt(h,d,A,T){Xa[$u++]=h,Xa[$u++]=d,Xa[$u++]=A,Xa[$u++]=T,xo|=T,h.lanes|=T,h=h.alternate,h!==null&&(h.lanes|=T)}function Ft(h,d,A,T){return Kt(h,d,A,T),be(h)}function Vt(h,d){return Kt(h,null,null,d),be(h)}function Gt(h,d,A){h.lanes|=A;var T=h.alternate;T!==null&&(T.lanes|=A);for(var L=!1,O=h.return;O!==null;)O.childLanes|=A,T=O.alternate,T!==null&&(T.childLanes|=A),O.tag===22&&(h=O.stateNode,h===null||h._visibility&1||(L=!0)),h=O,O=O.return;L&&d!==null&&h.tag===3&&(O=h.stateNode,L=31-Sr(A),O=O.hiddenUpdates,h=O[L],h===null?O[L]=[d]:h.push(d),d.lane=A|536870912)}function be(h){if(50<Kf)throw Kf=0,l1=null,Error(s(185));for(var d=h.return;d!==null;)h=d,d=h.return;return h.tag===3?h.stateNode:null}function qt(h){h!==$l&&h.next===null&&($l===null?em=$l=h:$l=$l.next=h),pi=!0,th||(th=!0,Ot(Q))}function $(h,d){if(!R2&&pi){R2=!0;do for(var A=!1,T=em;T!==null;){if(h!==0){var L=T.pendingLanes;if(L===0)var O=0;else{var K=T.suspendedLanes,rt=T.pingedLanes;O=(1<<31-Sr(42|h)+1)-1,O&=L&~(K&~rt),O=O&201326677?O&201326677|1:O?O|2:0}O!==0&&(A=!0,jt(T,O))}else O=Sn,O=N(T,T===qn?O:0),(O&3)===0||I(T,O)||(A=!0,jt(T,O));T=T.next}while(A);R2=!1}}function Q(){pi=th=!1;var h=0;kf!==0&&(_b()&&(h=kf),kf=0);for(var d=Qa(),A=null,T=em;T!==null;){var L=T.next,O=vt(T,d);O===0?(T.next=null,A===null?em=L:A.next=L,L===null&&($l=A)):(A=T,(h!==0||(O&3)!==0)&&(pi=!0)),T=L}$(h)}function vt(h,d){for(var A=h.suspendedLanes,T=h.pingedLanes,L=h.expirationTimes,O=h.pendingLanes&-62914561;0<O;){var K=31-Sr(O),rt=1<<K,At=L[K];At===-1?((rt&A)===0||(rt&T)!==0)&&(L[K]=F(rt,d)):At<=d&&(h.expiredLanes|=rt),O&=~rt}if(d=qn,A=Sn,A=N(h,h===d?A:0),T=h.callbackNode,A===0||h===d&&ni===2||h.cancelPendingCommit!==null)return T!==null&&T!==null&&J0(T),h.callbackNode=null,h.callbackPriority=0;if((A&3)===0||I(h,A)){if(d=A&-A,d===h.callbackPriority)return d;switch(T!==null&&J0(T),dt(A)){case 2:case 8:A=$b;break;case 32:A=t1;break;case 268435456:A=nT;break;default:A=t1}return T=It.bind(null,h),A=$p(A,T),h.callbackPriority=d,h.callbackNode=A,d}return T!==null&&T!==null&&J0(T),h.callbackPriority=2,h.callbackNode=null,2}function It(h,d){var A=h.callbackNode;if(mo()&&h.callbackNode!==A)return null;var T=Sn;return T=N(h,h===qn?T:0),T===0?null:(jc(h,T,d),vt(h,Qa()),h.callbackNode!=null&&h.callbackNode===A?It.bind(null,h):null)}function jt(h,d){if(mo())return null;jc(h,d,!0)}function Ot(h){p2?Jl(function(){(Pn&6)!==0?$p($0,h):h()}):$p($0,h)}function ne(){return kf===0&&(kf=z()),kf}function te(h,d){if(Vf===null){var A=Vf=[];eh=0,ma=ne(),nh={status:"pending",value:void 0,then:function(T){A.push(T)}}}return eh++,d.then(ge,ge),d}function ge(){if(--eh===0&&Vf!==null){nh!==null&&(nh.status="fulfilled");var h=Vf;Vf=null,ma=0,nh=null;for(var d=0;d<h.length;d++)(0,h[d])()}}function De(h,d){var A=[],T={status:"pending",value:null,reason:null,then:function(L){A.push(L)}};return h.then(function(){T.status="fulfilled",T.value=d;for(var L=0;L<A.length;L++)(0,A[L])(d)},function(L){for(T.status="rejected",T.reason=L,L=0;L<A.length;L++)(0,A[L])(void 0)}),T}function Jt(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _e(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Se(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Te(h,d,A){var T=h.updateQueue;if(T===null)return null;if(T=T.shared,(Pn&2)!==0){var L=T.pending;return L===null?d.next=d:(d.next=L.next,L.next=d),T.pending=d,d=be(h),Gt(h,null,A),d}return Kt(h,T,d,A),be(h)}function ce(h,d,A){if(d=d.updateQueue,d!==null&&(d=d.shared,(A&4194176)!==0)){var T=d.lanes;T&=h.pendingLanes,A|=T,d.lanes=A,ut(h,A)}}function rn(h,d){var A=h.updateQueue,T=h.alternate;if(T!==null&&(T=T.updateQueue,A===T)){var L=null,O=null;if(A=A.firstBaseUpdate,A!==null){do{var K={lane:A.lane,tag:A.tag,payload:A.payload,callback:null,next:null};O===null?L=O=K:O=O.next=K,A=A.next}while(A!==null);O===null?L=O=d:O=O.next=d}else L=O=d;A={baseState:T.baseState,firstBaseUpdate:L,lastBaseUpdate:O,shared:T.shared,callbacks:T.callbacks},h.updateQueue=A;return}h=A.lastBaseUpdate,h===null?A.firstBaseUpdate=d:h.next=d,A.lastBaseUpdate=d}function He(){if(ih){var h=nh;if(h!==null)throw h}}function Gn(h,d,A,T){ih=!1;var L=h.updateQueue;tc=!1;var O=L.firstBaseUpdate,K=L.lastBaseUpdate,rt=L.shared.pending;if(rt!==null){L.shared.pending=null;var At=rt,Ht=At.next;At.next=null,K===null?O=Ht:K.next=Ht,K=At;var $t=h.alternate;$t!==null&&($t=$t.updateQueue,rt=$t.lastBaseUpdate,rt!==K&&(rt===null?$t.firstBaseUpdate=Ht:rt.next=Ht,$t.lastBaseUpdate=At))}if(O!==null){var de=L.baseState;K=0,$t=Ht=At=null,rt=O;do{var ye=rt.lane&-536870913,Ke=ye!==rt.lane;if(Ke?(Sn&ye)===ye:(T&ye)===ye){ye!==0&&ye===ma&&(ih=!0),$t!==null&&($t=$t.next={lane:0,tag:rt.tag,payload:rt.payload,callback:null,next:null});t:{var Sa=h,fu=rt;ye=d;var du=A;switch(fu.tag){case 1:if(Sa=fu.payload,typeof Sa=="function"){de=Sa.call(du,de,ye);break t}de=Sa;break t;case 3:Sa.flags=Sa.flags&-65537|128;case 0:if(Sa=fu.payload,ye=typeof Sa=="function"?Sa.call(du,de,ye):Sa,ye==null)break t;de=I0({},de,ye);break t;case 2:tc=!0}}ye=rt.callback,ye!==null&&(h.flags|=64,Ke&&(h.flags|=8192),Ke=L.callbacks,Ke===null?L.callbacks=[ye]:Ke.push(ye))}else Ke={lane:ye,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null},$t===null?(Ht=$t=Ke,At=de):$t=$t.next=Ke,K|=ye;if(rt=rt.next,rt===null){if(rt=L.shared.pending,rt===null)break;Ke=rt,rt=Ke.next,Ke.next=null,L.lastBaseUpdate=Ke,L.shared.pending=null}}while(!0);$t===null&&(At=de),L.baseState=At,L.firstBaseUpdate=Ht,L.lastBaseUpdate=$t,O===null&&(L.shared.lanes=0),xa|=K,h.lanes=K,h.memoizedState=de}}function mt(h,d){if(typeof h!="function")throw Error(s(191,h));h.call(d)}function ue(h,d){var A=h.callbacks;if(A!==null)for(h.callbacks=null,h=0;h<A.length;h++)mt(A[h],d)}function Nt(h,d){if(jr(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var A=Object.keys(h),T=Object.keys(d);if(A.length!==T.length)return!1;for(T=0;T<A.length;T++){var L=A[T];if(!al.call(d,L)||!jr(h[L],d[L]))return!1}return!0}function Qt(h){return h=h.status,h==="fulfilled"||h==="rejected"}function fe(){}function he(h,d,A){switch(A=h[A],A===void 0?h.push(d):A!==d&&(d.then(fe,fe),d=A),d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===Qf?Error(s(483)):h;default:if(typeof d.status=="string")d.then(fe,fe);else{if(h=qn,h!==null&&100<h.shellSuspendCounter)throw Error(s(482));h=d,h.status="pending",h.then(function(T){if(d.status==="pending"){var L=d;L.status="fulfilled",L.value=T}},function(T){if(d.status==="pending"){var L=d;L.status="rejected",L.reason=T}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===Qf?Error(s(483)):h}throw su=d,Qf}}function qe(){if(su===null)throw Error(s(459));var h=su;return su=null,h}function Jn(h){var d=au;return au+=1,ru===null&&(ru=[]),he(ru,h,d)}function Ei(h,d){d=d.props.ref,h.ref=d!==void 0?d:null}function Cn(h,d){throw d.$$typeof===WM?Error(s(525)):(h=Object.prototype.toString.call(d),Error(s(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h)))}function Ur(h){var d=h._init;return d(h._payload)}function ls(h){function d(Mt,ht){if(h){var Dt=Mt.deletions;Dt===null?(Mt.deletions=[ht],Mt.flags|=16):Dt.push(ht)}}function A(Mt,ht){if(!h)return null;for(;ht!==null;)d(Mt,ht),ht=ht.sibling;return null}function T(Mt){for(var ht=new Map;Mt!==null;)Mt.key!==null?ht.set(Mt.key,Mt):ht.set(Mt.index,Mt),Mt=Mt.sibling;return ht}function L(Mt,ht){return Mt=za(Mt,ht),Mt.index=0,Mt.sibling=null,Mt}function O(Mt,ht,Dt){return Mt.index=Dt,h?(Dt=Mt.alternate,Dt!==null?(Dt=Dt.index,Dt<ht?(Mt.flags|=33554434,ht):Dt):(Mt.flags|=33554434,ht)):(Mt.flags|=1048576,ht)}function K(Mt){return h&&Mt.alternate===null&&(Mt.flags|=33554434),Mt}function rt(Mt,ht,Dt,Zt){return ht===null||ht.tag!==6?(ht=O0(Dt,Mt.mode,Zt),ht.return=Mt,ht):(ht=L(ht,Dt),ht.return=Mt,ht)}function At(Mt,ht,Dt,Zt){var Re=Dt.type;return Re===Kc?$t(Mt,ht,Dt.props.children,Zt,Dt.key):ht!==null&&(ht.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===ka&&Ur(Re)===ht.type)?(ht=L(ht,Dt.props),Ei(ht,Dt),ht.return=Mt,ht):(ht=el(Dt.type,Dt.key,Dt.props,null,Mt.mode,Zt),Ei(ht,Dt),ht.return=Mt,ht)}function Ht(Mt,ht,Dt,Zt){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==Dt.containerInfo||ht.stateNode.implementation!==Dt.implementation?(ht=a2(Dt,Mt.mode,Zt),ht.return=Mt,ht):(ht=L(ht,Dt.children||[]),ht.return=Mt,ht)}function $t(Mt,ht,Dt,Zt,Re){return ht===null||ht.tag!==7?(ht=Ii(Dt,Mt.mode,Zt,Re),ht.return=Mt,ht):(ht=L(ht,Dt),ht.return=Mt,ht)}function de(Mt,ht,Dt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return ht=O0(""+ht,Mt.mode,Dt),ht.return=Mt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case kp:return Dt=el(ht.type,ht.key,ht.props,null,Mt.mode,Dt),Ei(Dt,ht),Dt.return=Mt,Dt;case Ga:return ht=a2(ht,Mt.mode,Dt),ht.return=Mt,ht;case ka:var Zt=ht._init;return ht=Zt(ht._payload),de(Mt,ht,Dt)}if(Bf(ht)||r(ht))return ht=Ii(ht,Mt.mode,Dt,null),ht.return=Mt,ht;if(typeof ht.then=="function")return de(Mt,Jn(ht),Dt);if(ht.$$typeof===go)return de(Mt,Cp(Mt,ht),Dt);Cn(Mt,ht)}return null}function ye(Mt,ht,Dt,Zt){var Re=ht!==null?ht.key:null;if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return Re!==null?null:rt(Mt,ht,""+Dt,Zt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case kp:return Dt.key===Re?At(Mt,ht,Dt,Zt):null;case Ga:return Dt.key===Re?Ht(Mt,ht,Dt,Zt):null;case ka:return Re=Dt._init,Dt=Re(Dt._payload),ye(Mt,ht,Dt,Zt)}if(Bf(Dt)||r(Dt))return Re!==null?null:$t(Mt,ht,Dt,Zt,null);if(typeof Dt.then=="function")return ye(Mt,ht,Jn(Dt),Zt);if(Dt.$$typeof===go)return ye(Mt,ht,Cp(Mt,Dt),Zt);Cn(Mt,Dt)}return null}function Ke(Mt,ht,Dt,Zt,Re){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint")return Mt=Mt.get(Dt)||null,rt(ht,Mt,""+Zt,Re);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case kp:return Mt=Mt.get(Zt.key===null?Dt:Zt.key)||null,At(ht,Mt,Zt,Re);case Ga:return Mt=Mt.get(Zt.key===null?Dt:Zt.key)||null,Ht(ht,Mt,Zt,Re);case ka:var bi=Zt._init;return Zt=bi(Zt._payload),Ke(Mt,ht,Dt,Zt,Re)}if(Bf(Zt)||r(Zt))return Mt=Mt.get(Dt)||null,$t(ht,Mt,Zt,Re,null);if(typeof Zt.then=="function")return Ke(Mt,ht,Dt,Jn(Zt),Re);if(Zt.$$typeof===go)return Ke(Mt,ht,Dt,Cp(ht,Zt),Re);Cn(ht,Zt)}return null}function Sa(Mt,ht,Dt,Zt){for(var Re=null,bi=null,je=ht,Vn=ht=0,ji=null;je!==null&&Vn<Dt.length;Vn++){je.index>Vn?(ji=je,je=null):ji=je.sibling;var _n=ye(Mt,je,Dt[Vn],Zt);if(_n===null){je===null&&(je=ji);break}h&&je&&_n.alternate===null&&d(Mt,je),ht=O(_n,ht,Vn),bi===null?Re=_n:bi.sibling=_n,bi=_n,je=ji}if(Vn===Dt.length)return A(Mt,je),Bn&&J(Mt,Vn),Re;if(je===null){for(;Vn<Dt.length;Vn++)je=de(Mt,Dt[Vn],Zt),je!==null&&(ht=O(je,ht,Vn),bi===null?Re=je:bi.sibling=je,bi=je);return Bn&&J(Mt,Vn),Re}for(je=T(je);Vn<Dt.length;Vn++)ji=Ke(je,Mt,Vn,Dt[Vn],Zt),ji!==null&&(h&&ji.alternate!==null&&je.delete(ji.key===null?Vn:ji.key),ht=O(ji,ht,Vn),bi===null?Re=ji:bi.sibling=ji,bi=ji);return h&&je.forEach(function(pl){return d(Mt,pl)}),Bn&&J(Mt,Vn),Re}function fu(Mt,ht,Dt,Zt){if(Dt==null)throw Error(s(151));for(var Re=null,bi=null,je=ht,Vn=ht=0,ji=null,_n=Dt.next();je!==null&&!_n.done;Vn++,_n=Dt.next()){je.index>Vn?(ji=je,je=null):ji=je.sibling;var pl=ye(Mt,je,_n.value,Zt);if(pl===null){je===null&&(je=ji);break}h&&je&&pl.alternate===null&&d(Mt,je),ht=O(pl,ht,Vn),bi===null?Re=pl:bi.sibling=pl,bi=pl,je=ji}if(_n.done)return A(Mt,je),Bn&&J(Mt,Vn),Re;if(je===null){for(;!_n.done;Vn++,_n=Dt.next())_n=de(Mt,_n.value,Zt),_n!==null&&(ht=O(_n,ht,Vn),bi===null?Re=_n:bi.sibling=_n,bi=_n);return Bn&&J(Mt,Vn),Re}for(je=T(je);!_n.done;Vn++,_n=Dt.next())_n=Ke(je,Mt,Vn,_n.value,Zt),_n!==null&&(h&&_n.alternate!==null&&je.delete(_n.key===null?Vn:_n.key),ht=O(_n,ht,Vn),bi===null?Re=_n:bi.sibling=_n,bi=_n);return h&&je.forEach(function(c1){return d(Mt,c1)}),Bn&&J(Mt,Vn),Re}function du(Mt,ht,Dt,Zt){if(typeof Dt=="object"&&Dt!==null&&Dt.type===Kc&&Dt.key===null&&(Dt=Dt.props.children),typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case kp:t:{for(var Re=Dt.key;ht!==null;){if(ht.key===Re){if(Re=Dt.type,Re===Kc){if(ht.tag===7){A(Mt,ht.sibling),Zt=L(ht,Dt.props.children),Zt.return=Mt,Mt=Zt;break t}}else if(ht.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===ka&&Ur(Re)===ht.type){A(Mt,ht.sibling),Zt=L(ht,Dt.props),Ei(Zt,Dt),Zt.return=Mt,Mt=Zt;break t}A(Mt,ht);break}else d(Mt,ht);ht=ht.sibling}Dt.type===Kc?(Zt=Ii(Dt.props.children,Mt.mode,Zt,Dt.key),Zt.return=Mt,Mt=Zt):(Zt=el(Dt.type,Dt.key,Dt.props,null,Mt.mode,Zt),Ei(Zt,Dt),Zt.return=Mt,Mt=Zt)}return K(Mt);case Ga:t:{for(Re=Dt.key;ht!==null;){if(ht.key===Re)if(ht.tag===4&&ht.stateNode.containerInfo===Dt.containerInfo&&ht.stateNode.implementation===Dt.implementation){A(Mt,ht.sibling),Zt=L(ht,Dt.children||[]),Zt.return=Mt,Mt=Zt;break t}else{A(Mt,ht);break}else d(Mt,ht);ht=ht.sibling}Zt=a2(Dt,Mt.mode,Zt),Zt.return=Mt,Mt=Zt}return K(Mt);case ka:return Re=Dt._init,Dt=Re(Dt._payload),du(Mt,ht,Dt,Zt)}if(Bf(Dt))return Sa(Mt,ht,Dt,Zt);if(r(Dt)){if(Re=r(Dt),typeof Re!="function")throw Error(s(150));return Dt=Re.call(Dt),fu(Mt,ht,Dt,Zt)}if(typeof Dt.then=="function")return du(Mt,ht,Jn(Dt),Zt);if(Dt.$$typeof===go)return du(Mt,ht,Cp(Mt,Dt),Zt);Cn(Mt,Dt)}return typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint"?(Dt=""+Dt,ht!==null&&ht.tag===6?(A(Mt,ht.sibling),Zt=L(ht,Dt),Zt.return=Mt,Mt=Zt):(A(Mt,ht),Zt=O0(Dt,Mt.mode,Zt),Zt.return=Mt,Mt=Zt),K(Mt)):A(Mt,ht)}return function(Mt,ht,Dt,Zt){try{au=0;var Re=du(Mt,ht,Dt,Zt);return ru=null,Re}catch(je){if(je===Qf)throw je;var bi=e(29,je,null,Mt.mode);return bi.lanes=Zt,bi.return=Mt,bi}finally{}}}function Ji(h,d){h=ir,R(jf,h),R(mi,d),ir=h|d.baseLanes}function cs(){R(jf,ir),R(mi,mi.current)}function $s(){ir=jf.current,S(mi),S(jf)}function Pr(h){var d=h.alternate;R(fs,fs.current&1),R(ga,h),oi===null&&(d===null||mi.current!==null||d.memoizedState!==null)&&(oi=h)}function mp(h){if(h.tag===22){if(R(fs,fs.current),R(ga,h),oi===null){var d=h.alternate;d!==null&&d.memoizedState!==null&&(oi=h)}}else lo()}function lo(){R(fs,fs.current),R(ga,ga.current)}function gr(h){S(ga),oi===h&&(oi=null),S(fs)}function co(h){for(var d=h;d!==null;){if(d.tag===13){var A=d.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||Q0(A)||j0(A)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function ti(){throw Error(s(321))}function uo(h,d){if(d===null)return!1;for(var A=0;A<d.length&&A<h.length;A++)if(!jr(h[A],d[A]))return!1;return!0}function ho(h,d,A,T,L,O){return ec=O,ln=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Qe.H=h===null||h.memoizedState===null?cu:Er,lu=!1,O=A(T,L),lu=!1,sh&&(O=Nl(d,A,T,L)),Nc(h),O}function Nc(h){Qe.H=Ui;var d=Fe!==null&&Fe.next!==null;if(ec=0,Un=Fe=ln=null,qa=!1,rh=0,Es=null,d)throw Error(s(300));h===null||li||(h=h.dependencies,h!==null&&Tp(h)&&(li=!0))}function Nl(h,d,A,T){ln=h;var L=0;do{if(sh&&(Es=null),rh=0,sh=!1,25<=L)throw Error(s(301));if(L+=1,Un=Fe=null,h.updateQueue!=null){var O=h.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Qe.H=va,O=d(A,T)}while(sh);return O}function Zi(){var h=Qe.H,d=h.useState()[0];return d=typeof d.then=="function"?Ct(d):d,h=h.useState()[0],(Fe!==null?Fe.memoizedState:null)!==h&&(ln.flags|=1024),d}function uf(){var h=e1!==0;return e1=0,h}function hf(h,d,A){d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~A}function fo(h){if(qa){for(h=h.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}qa=!1}ec=0,Un=Fe=ln=null,sh=!1,rh=e1=0,Es=null}function Y(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?ln.memoizedState=Un=h:Un=Un.next=h,Un}function pt(){if(Fe===null){var h=ln.alternate;h=h!==null?h.memoizedState:null}else h=Fe.next;var d=Un===null?ln.memoizedState:Un.next;if(d!==null)Un=d,Fe=h;else{if(h===null)throw ln.alternate===null?Error(s(467)):Error(s(310));Fe=h,h={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Un===null?ln.memoizedState=Un=h:Un=Un.next=h}return Un}function Ct(h){var d=rh;return rh+=1,Es===null&&(Es=[]),h=he(Es,h,d),d=ln,(Un===null?d.memoizedState:Un.next)===null&&(d=d.alternate,Qe.H=d===null||d.memoizedState===null?cu:Er),h}function Rt(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Ct(h);if(h.$$typeof===go)return Is(h)}throw Error(s(438,String(h)))}function yt(h){var d=null,A=ln.updateQueue;if(A!==null&&(d=A.memoCache),d==null){var T=ln.alternate;T!==null&&(T=T.updateQueue,T!==null&&(T=T.memoCache,T!=null&&(d={data:T.data.map(function(L){return L.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),A===null&&(A=n1(),ln.updateQueue=A),A.memoCache=d,A=d.data[d.index],A===void 0)for(A=d.data[d.index]=Array(h),T=0;T<h;T++)A[T]=pb;return d.index++,A}function Yt(h,d){return typeof d=="function"?d(h):d}function se(h){var d=pt();return ae(d,Fe,h)}function ae(h,d,A){var T=h.queue;if(T===null)throw Error(s(311));T.lastRenderedReducer=A;var L=h.baseQueue,O=T.pending;if(O!==null){if(L!==null){var K=L.next;L.next=O.next,O.next=K}d.baseQueue=L=O,T.pending=null}if(O=h.baseState,L===null)h.memoizedState=O;else{d=L.next;var rt=K=null,At=null,Ht=d,$t=!1;do{var de=Ht.lane&-536870913;if(de!==Ht.lane?(Sn&de)===de:(ec&de)===de){var ye=Ht.revertLane;if(ye===0)At!==null&&(At=At.next={lane:0,revertLane:0,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null}),de===ma&&($t=!0);else if((ec&ye)===ye){Ht=Ht.next,ye===ma&&($t=!0);continue}else de={lane:0,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},At===null?(rt=At=de,K=O):At=At.next=de,ln.lanes|=ye,xa|=ye;de=Ht.action,lu&&A(O,de),O=Ht.hasEagerState?Ht.eagerState:A(O,de)}else ye={lane:de,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},At===null?(rt=At=ye,K=O):At=At.next=ye,ln.lanes|=de,xa|=de;Ht=Ht.next}while(Ht!==null&&Ht!==d);if(At===null?K=O:At.next=rt,!jr(O,h.memoizedState)&&(li=!0,$t&&(A=nh,A!==null)))throw A;h.memoizedState=O,h.baseState=K,h.baseQueue=At,T.lastRenderedState=O}return L===null&&(T.lanes=0),[h.memoizedState,T.dispatch]}function Ae(h){var d=pt(),A=d.queue;if(A===null)throw Error(s(311));A.lastRenderedReducer=h;var T=A.dispatch,L=A.pending,O=d.memoizedState;if(L!==null){A.pending=null;var K=L=L.next;do O=h(O,K.action),K=K.next;while(K!==L);jr(O,d.memoizedState)||(li=!0),d.memoizedState=O,d.baseQueue===null&&(d.baseState=O),A.lastRenderedState=O}return[O,T]}function Ge(h,d,A){var T=ln,L=pt(),O=Bn;if(O){if(A===void 0)throw Error(s(407));A=A()}else A=d();var K=!jr((Fe||L).memoizedState,A);if(K&&(L.memoizedState=A,li=!0),L=L.queue,Dy(pn.bind(null,T,L,h),[h]),L.getSnapshot!==d||K||Un!==null&&Un.memoizedState.tag&1){if(T.flags|=2048,vr(9,Ce.bind(null,T,L,A,d),{destroy:void 0},null),qn===null)throw Error(s(349));O||(ec&60)!==0||Oe(T,d,A)}return A}function Oe(h,d,A){h.flags|=16384,h={getSnapshot:d,value:A},d=ln.updateQueue,d===null?(d=n1(),ln.updateQueue=d,d.stores=[h]):(A=d.stores,A===null?d.stores=[h]:A.push(h))}function Ce(h,d,A,T){d.value=A,d.getSnapshot=T,In(d)&&Mi(h)}function pn(h,d,A){return A(function(){In(d)&&Mi(h)})}function In(h){var d=h.getSnapshot;h=h.value;try{var A=d();return!jr(h,A)}catch{return!0}}function Mi(h){var d=Vt(h,2);d!==null&&xs(d,h,2)}function yn(h){var d=Y();if(typeof h=="function"){var A=h;if(h=A(),lu){tt(!0);try{A()}finally{tt(!1)}}}return d.memoizedState=d.baseState=h,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:h},d}function bn(h,d,A,T){return h.baseState=A,ae(h,Fe,typeof T=="function"?T:Yt)}function Ie(h,d,A,T,L){if(xp(h))throw Error(s(485));if(h=d.action,h!==null){var O={payload:L,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){O.listeners.push(K)}};Qe.T!==null?A(!0):O.isTransition=!1,T(O),A=d.pending,A===null?(O.next=d.pending=O,Ri(d,O)):(O.next=A.next,d.pending=A.next=O)}}function Ri(h,d){var A=d.action,T=d.payload,L=h.state;if(d.isTransition){var O=Qe.T,K={};Qe.T=K;try{var rt=A(L,T),At=Qe.S;At!==null&&At(K,rt),Dn(h,d,rt)}catch(Ht){Wo(h,d,Ht)}finally{Qe.T=O}}else try{O=A(L,T),Dn(h,d,O)}catch(Ht){Wo(h,d,Ht)}}function Dn(h,d,A){A!==null&&typeof A=="object"&&typeof A.then=="function"?A.then(function(T){Bs(h,d,T)},function(T){return Wo(h,d,T)}):Bs(h,d,A)}function Bs(h,d,A){d.status="fulfilled",d.value=A,ri(d),h.state=A,d=h.pending,d!==null&&(A=d.next,A===d?h.pending=null:(A=A.next,d.next=A,Ri(h,A)))}function Wo(h,d,A){var T=h.pending;if(h.pending=null,T!==null){T=T.next;do d.status="rejected",d.reason=A,ri(d),d=d.next;while(d!==T)}h.action=null}function ri(h){h=h.listeners;for(var d=0;d<h.length;d++)(0,h[d])()}function Ko(h,d){return d}function ei(h,d){if(Bn){var A=qn.formState;if(A!==null){t:{var T=ln;if(Bn){if(Gs){var L=S2(Gs,Ss);if(L){Gs=E2(L),T=Ub(L);break t}}Wt(T)}T=!1}T&&(d=A[0])}}A=Y(),A.memoizedState=A.baseState=d,T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:d},A.queue=T,A=Iy.bind(null,ln,T),T.dispatch=A,T=yn(!1);var O=pf.bind(null,ln,!1,T.queue);return T=Y(),L={state:d,dispatch:null,action:h,pending:null},T.queue=L,A=Ie.bind(null,ln,L,O,A),L.dispatch=A,T.memoizedState=h,[d,A,!1]}function Os(h){var d=pt();return $i(d,Fe,h)}function $i(h,d,A){d=ae(h,d,Ko)[0],h=se(Yt)[0],d=typeof d=="object"&&d!==null&&typeof d.then=="function"?Ct(d):d;var T=pt(),L=T.queue,O=L.dispatch;return A!==T.memoizedState&&(ln.flags|=2048,vr(9,ys.bind(null,L,A),{destroy:void 0},null)),[d,O,h]}function ys(h,d){h.action=d}function _s(h){var d=pt(),A=Fe;if(A!==null)return $i(d,A,h);pt(),d=d.memoizedState,A=pt();var T=A.queue.dispatch;return A.memoizedState=h,[d,T,!1]}function vr(h,d,A,T){return h={tag:h,create:d,inst:A,deps:T,next:null},d=ln.updateQueue,d===null&&(d=n1(),ln.updateQueue=d),A=d.lastEffect,A===null?d.lastEffect=h.next=h:(T=A.next,A.next=h,h.next=T,d.lastEffect=h),h}function Jo(){return pt().memoizedState}function gp(h,d,A,T){var L=Y();ln.flags|=h,L.memoizedState=vr(1|d,A,{destroy:void 0},T===void 0?null:T)}function vp(h,d,A,T){var L=pt();T=T===void 0?null:T;var O=L.memoizedState.inst;Fe!==null&&T!==null&&uo(T,Fe.memoizedState.deps)?L.memoizedState=vr(d,A,O,T):(ln.flags|=h,L.memoizedState=vr(1|d,A,O,T))}function d0(h,d){gp(8390656,8,h,d)}function Dy(h,d){vp(2048,8,h,d)}function Xx(h,d){return vp(4,2,h,d)}function yp(h,d){return vp(4,4,h,d)}function p0(h,d){if(typeof d=="function"){h=h();var A=d(h);return function(){typeof A=="function"?A():d(null)}}if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function m0(h,d,A){A=A!=null?A.concat([h]):null,vp(4,4,p0.bind(null,d,h),A)}function Ic(){}function Gu(h,d){var A=pt();d=d===void 0?null:d;var T=A.memoizedState;return d!==null&&uo(d,T[1])?T[0]:(A.memoizedState=[h,d],h)}function By(h,d){var A=pt();d=d===void 0?null:d;var T=A.memoizedState;if(d!==null&&uo(d,T[1]))return T[0];if(T=h(),lu){tt(!0);try{h()}finally{tt(!1)}}return A.memoizedState=[T,d],T}function _p(h,d,A){return A===void 0||(ec&1073741824)!==0?h.memoizedState=d:(h.memoizedState=A,h=t2(),ln.lanes|=h,xa|=h,A)}function Oy(h,d,A,T){return jr(A,d)?A:mi.current!==null?(h=_p(h,A,T),jr(h,d)||(li=!0),h):(ec&42)===0?(li=!0,h.memoizedState=A):(h=t2(),ln.lanes|=h,xa|=h,d)}function ff(h,d,A,T,L){var O=Kl();er(O!==0&&8>O?O:8);var K=Qe.T,rt={};Qe.T=rt,pf(h,!1,d,A);try{var At=L(),Ht=Qe.S;if(Ht!==null&&Ht(rt,At),At!==null&&typeof At=="object"&&typeof At.then=="function"){var $t=De(At,T);Uc(h,d,$t,Gi(h))}else Uc(h,d,T,Gi(h))}catch(de){Uc(h,d,{then:function(){},status:"rejected",reason:de},Gi())}finally{er(O),Qe.T=K}}function Zo(h){var d=h.memoizedState;if(d!==null)return d;d={memoizedState:Zc,baseState:Zc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:Zc},next:null};var A={};return d.next={memoizedState:A,baseState:A,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:A},next:null},h.memoizedState=d,h=h.alternate,h!==null&&(h.memoizedState=d),d}function Ap(){return Is(vo)}function df(){return pt().memoizedState}function Il(){return pt().memoizedState}function Ny(h){for(var d=h.return;d!==null;){switch(d.tag){case 24:case 3:var A=Gi();h=Se(A);var T=Te(d,h,A);T!==null&&(xs(T,d,A),ce(T,d,A)),d={cache:zc()},h.payload=d;return}d=d.return}}function g0(h,d,A){var T=Gi();A={lane:T,revertLane:0,action:A,hasEagerState:!1,eagerState:null,next:null},xp(h)?yr(d,A):(A=Ft(h,d,A,T),A!==null&&(xs(A,h,T),Pc(A,d,T)))}function Iy(h,d,A){var T=Gi();Uc(h,d,A,T)}function Uc(h,d,A,T){var L={lane:T,revertLane:0,action:A,hasEagerState:!1,eagerState:null,next:null};if(xp(h))yr(d,L);else{var O=h.alternate;if(h.lanes===0&&(O===null||O.lanes===0)&&(O=d.lastRenderedReducer,O!==null))try{var K=d.lastRenderedState,rt=O(K,A);if(L.hasEagerState=!0,L.eagerState=rt,jr(rt,K))return Kt(h,d,L,0),qn===null&&Z(),!1}catch{}finally{}if(A=Ft(h,d,L,T),A!==null)return xs(A,h,T),Pc(A,d,T),!0}return!1}function pf(h,d,A,T){if(T={lane:2,revertLane:ne(),action:T,hasEagerState:!1,eagerState:null,next:null},xp(h)){if(d)throw Error(s(479))}else d=Ft(h,A,T,2),d!==null&&xs(d,h,2)}function xp(h){var d=h.alternate;return h===ln||d!==null&&d===ln}function yr(h,d){sh=qa=!0;var A=h.pending;A===null?d.next=d:(d.next=A.next,A.next=d),h.pending=d}function Pc(h,d,A){if((A&4194176)!==0){var T=d.lanes;T&=h.pendingLanes,A|=T,d.lanes=A,ut(h,A)}}function mf(h,d,A,T){d=h.memoizedState,A=A(T,d),A=A==null?d:I0({},d,A),h.memoizedState=A,h.lanes===0&&(h.updateQueue.baseState=A)}function gf(h,d,A,T,L,O,K){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(T,O,K):d.prototype&&d.prototype.isPureReactComponent?!Nt(A,T)||!Nt(L,O):!0}function qx(h,d,A,T){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(A,T),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(A,T),d.state!==h&&ll.enqueueReplaceState(d,d.state,null)}function Ul(h,d){var A=d;if("ref"in d){A={};for(var T in d)T!=="ref"&&(A[T]=d[T])}if(h=h.defaultProps){A===d&&(A=I0({},A));for(var L in h)A[L]===void 0&&(A[L]=h[L])}return A}function vf(h,d){try{var A=h.onUncaughtError;A(d.value,{componentStack:d.stack})}catch(T){setTimeout(function(){throw T})}}function yf(h,d,A){try{var T=h.onCaughtError;T(A.value,{componentStack:A.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function _f(h,d,A){return A=Se(A),A.tag=3,A.payload={element:null},A.callback=function(){vf(h,d)},A}function Uy(h){return h=Se(h),h.tag=3,h}function Yx(h,d,A,T){var L=A.type.getDerivedStateFromError;if(typeof L=="function"){var O=T.value;h.payload=function(){return L(O)},h.callback=function(){yf(d,A,T)}}var K=A.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(h.callback=function(){yf(d,A,T),typeof L!="function"&&(uu===null?uu=new Set([this]):uu.add(this));var rt=T.stack;this.componentDidCatch(T.value,{componentStack:rt!==null?rt:""})})}function jM(h,d,A,T,L){if(A.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){if(d=A.alternate,d!==null&&Mp(d,A,L,!0),A=ga.current,A!==null){switch(A.tag){case 13:return oi===null?Ql():A.alternate===null&&ci===0&&(ci=3),A.flags&=-257,A.flags|=65536,A.lanes=L,T===im?A.flags|=16384:(d=A.updateQueue,d===null?A.updateQueue=new Set([T]):d.add(T),Qu(h,T,L)),!1;case 22:return A.flags|=65536,T===im?A.flags|=16384:(d=A.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([T])},A.updateQueue=d):(A=d.retryQueue,A===null?d.retryQueue=new Set([T]):A.add(T)),Qu(h,T,L)),!1}throw Error(s(435,A.tag))}return Qu(h,T,L),Ql(),!1}if(Bn)return d=ga.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=L,T!==tm&&(h=Error(s(422),{cause:T}),re(_t(h,A)))):(T!==tm&&(d=Error(s(423),{cause:T}),re(_t(d,A))),h=h.current.alternate,h.flags|=65536,L&=-L,h.lanes|=L,T=_t(T,A),L=_f(h.stateNode,T,L),rn(h,L),ci!==4&&(ci=2)),!1;var O=Error(s(520),{cause:T});if(O=_t(O,A),oh===null?oh=[O]:oh.push(O),ci!==4&&(ci=2),d===null)return!0;T=_t(T,A),A=d;do{switch(A.tag){case 3:return A.flags|=65536,h=L&-L,A.lanes|=h,h=_f(A.stateNode,T,h),rn(A,h),!1;case 1:if(d=A.type,O=A.stateNode,(A.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(uu===null||!uu.has(O))))return A.flags|=65536,L&=-L,A.lanes|=L,L=Uy(L),Yx(L,h,A,T),rn(A,L),!1}A=A.return}while(A!==null);return!1}function Ns(h,d,A,T){d.child=h===null?ol(d,null,A,T):ou(d,h.child,A,T)}function v0(h,d,A,T,L){A=A.render;var O=d.ref;if("ref"in T){var K={};for(var rt in T)rt!=="ref"&&(K[rt]=T[rt])}else K=T;return Hc(d),T=ho(h,d,A,K,O,L),rt=uf(),h!==null&&!li?(hf(h,d,L),Pl(h,d,L)):(Bn&&rt&&xt(d),d.flags|=1,Ns(h,d,T,L),d.child)}function Wx(h,d,A,T,L){if(h===null){var O=A.type;return typeof O=="function"&&!Fp(O)&&O.defaultProps===void 0&&A.compare===null?(d.tag=15,d.type=O,Kx(h,d,O,T,L)):(h=el(A.type,null,T,d,d.mode,L),h.ref=d.ref,h.return=d,d.child=h)}if(O=h.child,!Gy(h,L)){var K=O.memoizedProps;if(A=A.compare,A=A!==null?A:Nt,A(K,T)&&h.ref===d.ref)return Pl(h,d,L)}return d.flags|=1,h=za(O,T),h.ref=d.ref,h.return=d,d.child=h}function Kx(h,d,A,T,L){if(h!==null){var O=h.memoizedProps;if(Nt(O,T)&&h.ref===d.ref)if(li=!1,d.pendingProps=T=O,Gy(h,L))(h.flags&131072)!==0&&(li=!0);else return d.lanes=h.lanes,Pl(h,d,L)}return y0(h,d,A,T,L)}function Jx(h,d,A){var T=d.pendingProps,L=T.children,O=(d.stateNode._pendingVisibility&2)!==0,K=h!==null?h.memoizedState:null;if(bp(h,d),T.mode==="hidden"||O){if((d.flags&128)!==0){if(T=K!==null?K.baseLanes|A:A,h!==null){for(L=d.child=h.child,O=0;L!==null;)O=O|L.lanes|L.childLanes,L=L.sibling;d.childLanes=O&~T}else d.childLanes=0,d.child=null;return Zx(h,d,T,A)}if((A&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},h!==null&&A0(d,K!==null?K.cachePool:null),K!==null?Ji(d,K):cs(),mp(d);else return d.lanes=d.childLanes=536870912,Zx(h,d,K!==null?K.baseLanes|A:A,A)}else K!==null?(A0(d,K.cachePool),Ji(d,K),lo(),d.memoizedState=null):(h!==null&&A0(d,null),cs(),lo());return Ns(h,d,L,A),d.child}function Zx(h,d,A,T){var L=Vy();return L=L===null?null:{parent:xr?gi._currentValue:gi._currentValue2,pool:L},d.memoizedState={baseLanes:A,cachePool:L},h!==null&&A0(d,null),cs(),mp(d),h!==null&&Mp(h,d,T,!0),null}function bp(h,d){var A=d.ref;if(A===null)h!==null&&h.ref!==null&&(d.flags|=2097664);else{if(typeof A!="function"&&typeof A!="object")throw Error(s(284));(h===null||h.ref!==A)&&(d.flags|=2097664)}}function y0(h,d,A,T,L){return Hc(d),A=ho(h,d,A,T,void 0,L),T=uf(),h!==null&&!li?(hf(h,d,L),Pl(h,d,L)):(Bn&&T&&xt(d),d.flags|=1,Ns(h,d,A,L),d.child)}function $x(h,d,A,T,L,O){return Hc(d),d.updateQueue=null,A=Nl(d,T,A,L),Nc(h),T=uf(),h!==null&&!li?(hf(h,d,O),Pl(h,d,O)):(Bn&&T&&xt(d),d.flags|=1,Ns(h,d,A,O),d.child)}function tb(h,d,A,T,L){if(Hc(d),d.stateNode===null){var O=nu,K=A.contextType;typeof K=="object"&&K!==null&&(O=Is(K)),O=new A(T,O),d.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=ll,d.stateNode=O,O._reactInternals=d,O=d.stateNode,O.props=T,O.state=d.memoizedState,O.refs={},Jt(d),K=A.contextType,O.context=typeof K=="object"&&K!==null?Is(K):nu,O.state=d.memoizedState,K=A.getDerivedStateFromProps,typeof K=="function"&&(mf(d,A,K,T),O.state=d.memoizedState),typeof A.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(K=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),K!==O.state&&ll.enqueueReplaceState(O,O.state,null),Gn(d,T,O,L),He(),O.state=d.memoizedState),typeof O.componentDidMount=="function"&&(d.flags|=4194308),T=!0}else if(h===null){O=d.stateNode;var rt=d.memoizedProps,At=Ul(A,rt);O.props=At;var Ht=O.context,$t=A.contextType;K=nu,typeof $t=="object"&&$t!==null&&(K=Is($t));var de=A.getDerivedStateFromProps;$t=typeof de=="function"||typeof O.getSnapshotBeforeUpdate=="function",rt=d.pendingProps!==rt,$t||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(rt||Ht!==K)&&qx(d,O,T,K),tc=!1;var ye=d.memoizedState;O.state=ye,Gn(d,T,O,L),He(),Ht=d.memoizedState,rt||ye!==Ht||tc?(typeof de=="function"&&(mf(d,A,de,T),Ht=d.memoizedState),(At=tc||gf(d,A,At,T,ye,Ht,K))?($t||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(d.flags|=4194308)):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=T,d.memoizedState=Ht),O.props=T,O.state=Ht,O.context=K,T=At):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),T=!1)}else{O=d.stateNode,_e(h,d),K=d.memoizedProps,$t=Ul(A,K),O.props=$t,de=d.pendingProps,ye=O.context,Ht=A.contextType,At=nu,typeof Ht=="object"&&Ht!==null&&(At=Is(Ht)),rt=A.getDerivedStateFromProps,(Ht=typeof rt=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(K!==de||ye!==At)&&qx(d,O,T,At),tc=!1,ye=d.memoizedState,O.state=ye,Gn(d,T,O,L),He();var Ke=d.memoizedState;K!==de||ye!==Ke||tc||h!==null&&h.dependencies!==null&&Tp(h.dependencies)?(typeof rt=="function"&&(mf(d,A,rt,T),Ke=d.memoizedState),($t=tc||gf(d,A,$t,T,ye,Ke,At)||h!==null&&h.dependencies!==null&&Tp(h.dependencies))?(Ht||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(T,Ke,At),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(T,Ke,At)),typeof O.componentDidUpdate=="function"&&(d.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof O.componentDidUpdate!="function"||K===h.memoizedProps&&ye===h.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||K===h.memoizedProps&&ye===h.memoizedState||(d.flags|=1024),d.memoizedProps=T,d.memoizedState=Ke),O.props=T,O.state=Ke,O.context=At,T=$t):(typeof O.componentDidUpdate!="function"||K===h.memoizedProps&&ye===h.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||K===h.memoizedProps&&ye===h.memoizedState||(d.flags|=1024),T=!1)}return O=T,bp(h,d),T=(d.flags&128)!==0,O||T?(O=d.stateNode,A=T&&typeof A.getDerivedStateFromError!="function"?null:O.render(),d.flags|=1,h!==null&&T?(d.child=ou(d,h.child,null,L),d.child=ou(d,null,A,L)):Ns(h,d,A,L),d.memoizedState=O.state,h=d.child):h=Pl(h,d,L),h}function eb(h,d,A,T){return we(),d.flags|=256,Ns(h,d,A,T),d.child}function Py(h){return{baseLanes:h,cachePool:Qy()}}function Sp(h,d,A){return h=h!==null?h.childLanes&~A:0,d&&(h|=ba),h}function nb(h,d,A){var T=d.pendingProps,L=!1,O=(d.flags&128)!==0,K;if((K=O)||(K=h!==null&&h.memoizedState===null?!1:(fs.current&2)!==0),K&&(L=!0,d.flags&=-129),K=(d.flags&32)!==0,d.flags&=-33,h===null){if(Bn){if(L?Pr(d):lo(),Bn){var rt=Gs,At;(At=rt)&&(rt=Hb(rt,Ss),rt!==null?(d.memoizedState={dehydrated:rt,treeContext:iu!==null?{id:_o,overflow:Ao}:null,retryLane:536870912},At=e(18,null,null,0),At.stateNode=rt,At.return=d,d.child=At,zs=d,Gs=null,At=!0):At=!1),At||Wt(d)}if(rt=d.memoizedState,rt!==null&&(rt=rt.dehydrated,rt!==null))return j0(rt)?d.lanes=16:d.lanes=536870912,null;gr(d)}return rt=T.children,T=T.fallback,L?(lo(),L=d.mode,rt=Hy({mode:"hidden",children:rt},L),T=Ii(T,L,A,null),rt.return=d,T.return=d,rt.sibling=T,d.child=rt,L=d.child,L.memoizedState=Py(A),L.childLanes=Sp(h,K,A),d.memoizedState=r1,T):(Pr(d),Fy(d,rt))}if(At=h.memoizedState,At!==null&&(rt=At.dehydrated,rt!==null)){if(O)d.flags&256?(Pr(d),d.flags&=-257,d=_0(h,d,A)):d.memoizedState!==null?(lo(),d.child=h.child,d.flags|=128,d=null):(lo(),L=T.fallback,rt=d.mode,T=Hy({mode:"visible",children:T.children},rt),L=Ii(L,rt,A,null),L.flags|=2,T.return=d,L.return=d,T.sibling=L,d.child=T,ou(d,h.child,null,A),T=d.child,T.memoizedState=Py(A),T.childLanes=Sp(h,K,A),d.memoizedState=r1,d=L);else if(Pr(d),j0(rt))K=Nb(rt).digest,T=Error(s(419)),T.stack="",T.digest=K,re({value:T,source:null,stack:null}),d=_0(h,d,A);else if(li||Mp(h,d,A,!1),K=(A&h.childLanes)!==0,li||K){if(K=qn,K!==null){if(T=A&-A,(T&42)!==0)T=1;else switch(T){case 2:T=1;break;case 8:T=4;break;case 32:T=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:T=64;break;case 268435456:T=134217728;break;default:T=0}if(T=(T&(K.suspendedLanes|A))!==0?0:T,T!==0&&T!==At.retryLane)throw At.retryLane=T,Vt(h,T),xs(K,h,T),s1}Q0(rt)||Ql(),d=_0(h,d,A)}else Q0(rt)?(d.flags|=128,d.child=h.child,d=jl.bind(null,h),Ib(rt,d),d=null):(h=At.treeContext,Hs&&(Gs=Fb(rt),zs=d,Bn=!0,ja=null,Ss=!1,h!==null&&(da[pa++]=_o,da[pa++]=Ao,da[pa++]=iu,_o=h.id,Ao=h.overflow,iu=d)),d=Fy(d,T.children),d.flags|=4096);return d}return L?(lo(),L=T.fallback,rt=d.mode,At=h.child,O=At.sibling,T=za(At,{mode:"hidden",children:T.children}),T.subtreeFlags=At.subtreeFlags&31457280,O!==null?L=za(O,L):(L=Ii(L,rt,A,null),L.flags|=2),L.return=d,T.return=d,T.sibling=L,d.child=T,T=L,L=d.child,rt=h.child.memoizedState,rt===null?rt=Py(A):(At=rt.cachePool,At!==null?(O=xr?gi._currentValue:gi._currentValue2,At=At.parent!==O?{parent:O,pool:O}:At):At=Qy(),rt={baseLanes:rt.baseLanes|A,cachePool:At}),L.memoizedState=rt,L.childLanes=Sp(h,K,A),d.memoizedState=r1,T):(Pr(d),A=h.child,h=A.sibling,A=za(A,{mode:"visible",children:T.children}),A.return=d,A.sibling=null,h!==null&&(K=d.deletions,K===null?(d.deletions=[h],d.flags|=16):K.push(h)),d.child=A,d.memoizedState=null,A)}function Fy(h,d){return d=Hy({mode:"visible",children:d},h.mode),d.return=h,h.child=d}function Hy(h,d){return zp(h,d,0,null)}function _0(h,d,A){return ou(d,h.child,null,A),h=Fy(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function ib(h,d,A){h.lanes|=d;var T=h.alternate;T!==null&&(T.lanes|=d),Ep(h.return,d,A)}function zy(h,d,A,T,L){var O=h.memoizedState;O===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:T,tail:A,tailMode:L}:(O.isBackwards=d,O.rendering=null,O.renderingStartTime=0,O.last=T,O.tail=A,O.tailMode=L)}function sb(h,d,A){var T=d.pendingProps,L=T.revealOrder,O=T.tail;if(Ns(h,d,T.children,A),T=fs.current,(T&2)!==0)T=T&1|2,d.flags|=128;else{if(h!==null&&(h.flags&128)!==0)t:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&ib(h,A,d);else if(h.tag===19)ib(h,A,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break t;for(;h.sibling===null;){if(h.return===null||h.return===d)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}T&=1}switch(R(fs,T),L){case"forwards":for(A=d.child,L=null;A!==null;)h=A.alternate,h!==null&&co(h)===null&&(L=A),A=A.sibling;A=L,A===null?(L=d.child,d.child=null):(L=A.sibling,A.sibling=null),zy(d,!1,L,A,O);break;case"backwards":for(A=null,L=d.child,d.child=null;L!==null;){if(h=L.alternate,h!==null&&co(h)===null){d.child=L;break}h=L.sibling,L.sibling=A,A=L,L=h}zy(d,!0,A,null,O);break;case"together":zy(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Pl(h,d,A){if(h!==null&&(d.dependencies=h.dependencies),xa|=d.lanes,(A&d.childLanes)===0)if(h!==null){if(Mp(h,d,A,!1),(A&d.childLanes)===0)return null}else return null;if(h!==null&&d.child!==h.child)throw Error(s(153));if(d.child!==null){for(h=d.child,A=za(h,h.pendingProps),d.child=A,A.return=d;h.sibling!==null;)h=h.sibling,A=A.sibling=za(h,h.pendingProps),A.return=d;A.sibling=null}return d.child}function Gy(h,d){return(h.lanes&d)!==0?!0:(h=h.dependencies,!!(h!==null&&Tp(h)))}function XM(h,d,A){switch(d.tag){case 3:ct(d,d.stateNode.containerInfo),Fc(d,gi,h.memoizedState.cache),we();break;case 27:case 5:Bt(d);break;case 4:ct(d,d.stateNode.containerInfo);break;case 10:Fc(d,d.type,d.memoizedProps.value);break;case 13:var T=d.memoizedState;if(T!==null)return T.dehydrated!==null?(Pr(d),d.flags|=128,null):(A&d.child.childLanes)!==0?nb(h,d,A):(Pr(d),h=Pl(h,d,A),h!==null?h.sibling:null);Pr(d);break;case 19:var L=(h.flags&128)!==0;if(T=(A&d.childLanes)!==0,T||(Mp(h,d,A,!1),T=(A&d.childLanes)!==0),L){if(T)return sb(h,d,A);d.flags|=128}if(L=d.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),R(fs,fs.current),T)break;return null;case 22:case 23:return d.lanes=0,Jx(h,d,A);case 24:Fc(d,gi,h.memoizedState.cache)}return Pl(h,d,A)}function rb(h,d,A){if(h!==null)if(h.memoizedProps!==d.pendingProps)li=!0;else{if(!Gy(h,A)&&(d.flags&128)===0)return li=!1,XM(h,d,A);li=(h.flags&131072)!==0}else li=!1,Bn&&(d.flags&1048576)!==0&&at(d,zf,d.index);switch(d.lanes=0,d.tag){case 16:t:{h=d.pendingProps;var T=d.elementType,L=T._init;if(T=L(T._payload),d.type=T,typeof T=="function")Fp(T)?(h=Ul(T,h),d.tag=1,d=tb(null,d,T,h,A)):(d.tag=0,d=y0(null,d,T,h,A));else{if(T!=null){if(L=T.$$typeof,L===jp){d.tag=11,d=v0(null,d,T,h,A);break t}else if(L===F0){d.tag=14,d=Wx(null,d,T,h,A);break t}}throw d=a(T)||T,Error(s(306,d,""))}}return d;case 0:return y0(h,d,d.type,d.pendingProps,A);case 1:return T=d.type,L=Ul(T,d.pendingProps),tb(h,d,T,L,A);case 3:t:{if(ct(d,d.stateNode.containerInfo),h===null)throw Error(s(387));var O=d.pendingProps;L=d.memoizedState,T=L.element,_e(h,d),Gn(d,O,null,A);var K=d.memoizedState;if(O=K.cache,Fc(d,gi,O),O!==L.cache&&ku(d,[gi],A,!0),He(),O=K.element,Hs&&L.isDehydrated)if(L={element:O,isDehydrated:!1,cache:K.cache},d.updateQueue.baseState=L,d.memoizedState=L,d.flags&256){d=eb(h,d,O,A);break t}else if(O!==T){T=_t(Error(s(424)),d),re(T),d=eb(h,d,O,A);break t}else for(Hs&&(Gs=Pb(d.stateNode.containerInfo),zs=d,Bn=!0,ja=null,Ss=!0),A=ol(d,null,O,A),d.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(we(),O===T){d=Pl(h,d,A);break t}Ns(h,d,O,A)}d=d.child}return d;case 26:if(fa)return bp(h,d),h===null?(A=C2(d.type,null,d.pendingProps,null))?d.memoizedState=A:Bn||(d.stateNode=K0(d.type,d.pendingProps,rl.current,d)):d.memoizedState=C2(d.type,h.memoizedProps,d.pendingProps,h.memoizedState),null;case 27:if(ai)return Bt(d),h===null&&ai&&Bn&&(T=d.stateNode=yo(d.type,d.pendingProps,rl.current,hs.current,!1),zs=d,Ss=!0,Gs=X0(T)),T=d.pendingProps.children,h!==null||Bn?Ns(h,d,T,A):d.child=ou(d,null,T,A),bp(h,d),d.child;case 5:return h===null&&Bn&&(Y0(d.type,d.pendingProps,hs.current),(L=T=Gs)&&(T=$M(T,d.type,d.pendingProps,Ss),T!==null?(d.stateNode=T,zs=d,Gs=X0(T),Ss=!1,L=!0):L=!1),L||Wt(d)),Bt(d),L=d.type,O=d.pendingProps,K=h!==null?h.memoizedProps:null,T=O.children,en(L,O)?T=null:K!==null&&en(L,K)&&(d.flags|=32),d.memoizedState!==null&&(L=ho(h,d,Zi,null,null,A),xr?vo._currentValue=L:vo._currentValue2=L),bp(h,d),Ns(h,d,T,A),d.child;case 6:return h===null&&Bn&&(Qb(d.pendingProps,hs.current),(h=A=Gs)&&(A=M2(A,d.pendingProps,Ss),A!==null?(d.stateNode=A,zs=d,Gs=null,h=!0):h=!1),h||Wt(d)),null;case 13:return nb(h,d,A);case 4:return ct(d,d.stateNode.containerInfo),T=d.pendingProps,h===null?d.child=ou(d,null,T,A):Ns(h,d,T,A),d.child;case 11:return v0(h,d,d.type,d.pendingProps,A);case 7:return Ns(h,d,d.pendingProps,A),d.child;case 8:return Ns(h,d,d.pendingProps.children,A),d.child;case 12:return Ns(h,d,d.pendingProps.children,A),d.child;case 10:return T=d.pendingProps,Fc(d,d.type,T.value),Ns(h,d,T.children,A),d.child;case 9:return L=d.type._context,T=d.pendingProps.children,Hc(d),L=Is(L),T=T(L),d.flags|=1,Ns(h,d,T,A),d.child;case 14:return Wx(h,d,d.type,d.pendingProps,A);case 15:return Kx(h,d,d.type,d.pendingProps,A);case 19:return sb(h,d,A);case 22:return Jx(h,d,A);case 24:return Hc(d),T=Is(gi),h===null?(L=Vy(),L===null&&(L=qn,O=zc(),L.pooledCache=O,O.refCount++,O!==null&&(L.pooledCacheLanes|=A),L=O),d.memoizedState={parent:T,cache:L},Jt(d),Fc(d,gi,L)):((h.lanes&A)!==0&&(_e(h,d),Gn(d,null,null,A),He()),L=h.memoizedState,O=d.memoizedState,L.parent!==T?(L={parent:T,cache:T},d.memoizedState=L,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=L),Fc(d,gi,T)):(T=O.cache,Fc(d,gi,T),T!==L.cache&&ku(d,[gi],A,!0))),Ns(h,d,d.pendingProps.children,A),d.child;case 29:throw d.pendingProps}throw Error(s(156,d.tag))}function Fc(h,d,A){xr?(R(nc,d._currentValue),d._currentValue=A):(R(nc,d._currentValue2),d._currentValue2=A)}function Fl(h){var d=nc.current;xr?h._currentValue=d:h._currentValue2=d,S(nc)}function Ep(h,d,A){for(;h!==null;){var T=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,T!==null&&(T.childLanes|=d)):T!==null&&(T.childLanes&d)!==d&&(T.childLanes|=d),h===A)break;h=h.return}}function ku(h,d,A,T){var L=h.child;for(L!==null&&(L.return=h);L!==null;){var O=L.dependencies;if(O!==null){var K=L.child;O=O.firstContext;t:for(;O!==null;){var rt=O;O=L;for(var At=0;At<d.length;At++)if(rt.context===d[At]){O.lanes|=A,rt=O.alternate,rt!==null&&(rt.lanes|=A),Ep(O.return,A,h),T||(K=null);break t}O=rt.next}}else if(L.tag===18){if(K=L.return,K===null)throw Error(s(341));K.lanes|=A,O=K.alternate,O!==null&&(O.lanes|=A),Ep(K,A,h),K=null}else K=L.child;if(K!==null)K.return=L;else for(K=L;K!==null;){if(K===h){K=null;break}if(L=K.sibling,L!==null){L.return=K.return,K=L;break}K=K.return}L=K}}function Mp(h,d,A,T){h=null;for(var L=d,O=!1;L!==null;){if(!O){if((L.flags&524288)!==0)O=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var K=L.alternate;if(K===null)throw Error(s(387));if(K=K.memoizedProps,K!==null){var rt=L.type;jr(L.pendingProps.value,K.value)||(h!==null?h.push(rt):h=[rt])}}else if(L===Zu.current){if(K=L.alternate,K===null)throw Error(s(387));K.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(h!==null?h.push(vo):h=[vo])}L=L.return}h!==null&&ku(d,h,A,T),d.flags|=262144}function Tp(h){for(h=h.firstContext;h!==null;){var d=h.context;if(!jr(xr?d._currentValue:d._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function Hc(h){So=h,ya=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Is(h){return ky(So,h)}function Cp(h,d){return So===null&&Hc(h),ky(h,d)}function ky(h,d){var A=xr?d._currentValue:d._currentValue2;if(d={context:d,memoizedValue:A,next:null},ya===null){if(h===null)throw Error(s(308));ya=d,h.dependencies={lanes:0,firstContext:d},h.flags|=524288}else ya=ya.next=d;return A}function zc(){return{controller:new Xf,data:new Map,refCount:0}}function wp(h){h.refCount--,h.refCount===0&&eS(nS,function(){h.controller.abort()})}function Vy(){var h=cl.current;return h!==null?h:qn.pooledCache}function A0(h,d){d===null?R(cl,cl.current):R(cl,d.pool)}function Qy(){var h=Vy();return h===null?null:{parent:xr?gi._currentValue:gi._currentValue2,pool:h}}function Fr(h){h.flags|=4}function Af(h,d){if(h!==null&&h.child===d.child)return!1;if((d.flags&16)!==0)return!0;for(h=d.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function Vu(h,d,A,T){if(us)for(A=d.child;A!==null;){if(A.tag===5||A.tag===6)qp(h,A.stateNode);else if(!(A.tag===4||ai&&A.tag===27)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===d)break;for(;A.sibling===null;){if(A.return===null||A.return===d)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else if(Va)for(var L=d.child;L!==null;){if(L.tag===5){var O=L.stateNode;A&&T&&(O=x2(O,L.type,L.memoizedProps)),qp(h,O)}else if(L.tag===6)O=L.stateNode,A&&T&&(O=b2(O,L.memoizedProps)),qp(h,O);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)O=L.child,O!==null&&(O.return=L),Vu(h,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===d)break;for(;L.sibling===null;){if(L.return===null||L.return===d)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function ab(h,d,A,T){if(Va)for(var L=d.child;L!==null;){if(L.tag===5){var O=L.stateNode;A&&T&&(O=x2(O,L.type,L.memoizedProps)),A2(h,O)}else if(L.tag===6)O=L.stateNode,A&&T&&(O=b2(O,L.memoizedProps)),A2(h,O);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)O=L.child,O!==null&&(O.return=L),ab(h,L,!(L.memoizedProps!==null&&L.memoizedProps.mode==="manual"),!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===d)break;for(;L.sibling===null;){if(L.return===null||L.return===d)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function Rp(h,d){if(Va&&Af(h,d)){h=d.stateNode;var A=h.containerInfo,T=Yp();ab(T,d,!1,!1),h.pendingChildren=T,Fr(d),V0(A,T)}}function x0(h,d,A,T){if(us)h.memoizedProps!==T&&Fr(d);else if(Va){var L=h.stateNode,O=h.memoizedProps;if((h=Af(h,d))||O!==T){var K=hs.current;O=Pf(L,A,O,T,!h,null),O===L?d.stateNode=L:(Wl(O,A,T,K)&&Fr(d),d.stateNode=O,h?Vu(O,d,!1,!1):Fr(d))}else d.stateNode=L}}function b0(h,d,A){if(f2(d,A)){if(h.flags|=16777216,!G0(d,A))if(Xc())h.flags|=8192;else throw su=im,nm}else h.flags&=-16777217}function S0(h,d){if(qb(d)){if(h.flags|=16777216,!qu(d))if(Xc())h.flags|=8192;else throw su=im,nm}else h.flags&=-16777217}function xf(h,d){d!==null&&(h.flags|=4),h.flags&16384&&(d=h.tag!==22?U():536870912,h.lanes|=d,fl|=d)}function bf(h,d){if(!Bn)switch(h.tailMode){case"hidden":d=h.tail;for(var A=null;d!==null;)d.alternate!==null&&(A=d),d=d.sibling;A===null?h.tail=null:A.sibling=null;break;case"collapsed":A=h.tail;for(var T=null;A!==null;)A.alternate!==null&&(T=A),A=A.sibling;T===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:T.sibling=null}}function Ti(h){var d=h.alternate!==null&&h.alternate.child===h.child,A=0,T=0;if(d)for(var L=h.child;L!==null;)A|=L.lanes|L.childLanes,T|=L.subtreeFlags&31457280,T|=L.flags&31457280,L.return=h,L=L.sibling;else for(L=h.child;L!==null;)A|=L.lanes|L.childLanes,T|=L.subtreeFlags,T|=L.flags,L.return=h,L=L.sibling;return h.subtreeFlags|=T,h.childLanes=A,d}function ob(h,d,A){var T=d.pendingProps;switch(Et(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(d),null;case 1:return Ti(d),null;case 3:return A=d.stateNode,T=null,h!==null&&(T=h.memoizedState.cache),d.memoizedState.cache!==T&&(d.flags|=2048),Fl(gi),wt(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(h===null||h.child===null)&&(Ye(d)?Fr(d):h===null||h.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,ja!==null&&(Up(ja),ja=null))),Rp(h,d),Ti(d),null;case 26:if(fa){A=d.type;var L=d.memoizedState;return h===null?(Fr(d),L!==null?(Ti(d),S0(d,L)):(Ti(d),b0(d,A,T))):L?L!==h.memoizedState?(Fr(d),Ti(d),S0(d,L)):(Ti(d),d.flags&=-16777217):(us?h.memoizedProps!==T&&Fr(d):x0(h,d,A,T),Ti(d),b0(d,A,T)),null}case 27:if(ai){if(Ut(d),A=rl.current,L=d.type,h!==null&&d.stateNode!=null)us?h.memoizedProps!==T&&Fr(d):x0(h,d,L,T);else{if(!T){if(d.stateNode===null)throw Error(s(166));return Ti(d),null}h=hs.current,Ye(d)?ve(d,h):(h=yo(L,T,A,h,!0),d.stateNode=h,Fr(d))}return Ti(d),null}case 5:if(Ut(d),A=d.type,h!==null&&d.stateNode!=null)x0(h,d,A,T);else{if(!T){if(d.stateNode===null)throw Error(s(166));return Ti(d),null}h=hs.current,Ye(d)?ve(d,h):(L=h2(A,T,rl.current,h,d),Vu(L,d,!1,!1),d.stateNode=L,Wl(L,A,T,h)&&Fr(d))}return Ti(d),b0(d,d.type,d.pendingProps),null;case 6:if(h&&d.stateNode!=null)A=h.memoizedProps,us?A!==T&&Fr(d):Va&&(A!==T?(d.stateNode=Zn(T,rl.current,hs.current,d),Fr(d)):d.stateNode=h.stateNode);else{if(typeof T!="string"&&d.stateNode===null)throw Error(s(166));if(h=rl.current,A=hs.current,Ye(d)){if(!Hs)throw Error(s(176));if(h=d.stateNode,A=d.memoizedProps,T=null,L=zs,L!==null)switch(L.tag){case 27:case 5:T=L.memoizedProps}T2(h,A,d,T)||Wt(d)}else d.stateNode=Zn(T,h,A,d)}return Ti(d),null;case 13:if(T=d.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(L=Ye(d),T!==null&&T.dehydrated!==null){if(h===null){if(!L)throw Error(s(318));if(!Hs)throw Error(s(344));if(L=d.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(s(317));Gb(L,d)}else we(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ti(d),L=!1}else ja!==null&&(Up(ja),ja=null),L=!0;if(!L)return d.flags&256?(gr(d),d):(gr(d),null)}if(gr(d),(d.flags&128)!==0)return d.lanes=A,d;if(A=T!==null,h=h!==null&&h.memoizedState!==null,A){T=d.child,L=null,T.alternate!==null&&T.alternate.memoizedState!==null&&T.alternate.memoizedState.cachePool!==null&&(L=T.alternate.memoizedState.cachePool.pool);var O=null;T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(O=T.memoizedState.cachePool.pool),O!==L&&(T.flags|=2048)}return A!==h&&A&&(d.child.flags|=8192),xf(d,d.updateQueue),Ti(d),null;case 4:return wt(),Rp(h,d),h===null&&ki(d.stateNode.containerInfo),Ti(d),null;case 10:return Fl(d.type),Ti(d),null;case 19:if(S(fs),L=d.memoizedState,L===null)return Ti(d),null;if(T=(d.flags&128)!==0,O=L.rendering,O===null)if(T)bf(L,!1);else{if(ci!==0||h!==null&&(h.flags&128)!==0)for(h=d.child;h!==null;){if(O=co(h),O!==null){for(d.flags|=128,bf(L,!1),h=O.updateQueue,d.updateQueue=h,xf(d,h),d.subtreeFlags=0,h=A,A=d.child;A!==null;)Hp(A,h),A=A.sibling;return R(fs,fs.current&1|2),d.child}h=h.sibling}L.tail!==null&&Qa()>Wf&&(d.flags|=128,T=!0,bf(L,!1),d.lanes=4194304)}else{if(!T)if(h=co(O),h!==null){if(d.flags|=128,T=!0,h=h.updateQueue,d.updateQueue=h,xf(d,h),bf(L,!0),L.tail===null&&L.tailMode==="hidden"&&!O.alternate&&!Bn)return Ti(d),null}else 2*Qa()-L.renderingStartTime>Wf&&A!==536870912&&(d.flags|=128,T=!0,bf(L,!1),d.lanes=4194304);L.isBackwards?(O.sibling=d.child,d.child=O):(h=L.last,h!==null?h.sibling=O:d.child=O,L.last=O)}return L.tail!==null?(d=L.tail,L.rendering=d,L.tail=d.sibling,L.renderingStartTime=Qa(),d.sibling=null,h=fs.current,R(fs,T?h&1|2:h&1),d):(Ti(d),null);case 22:case 23:return gr(d),$s(),T=d.memoizedState!==null,h!==null?h.memoizedState!==null!==T&&(d.flags|=8192):T&&(d.flags|=8192),T?(A&536870912)!==0&&(d.flags&128)===0&&(Ti(d),d.subtreeFlags&6&&(d.flags|=8192)):Ti(d),A=d.updateQueue,A!==null&&xf(d,A.retryQueue),A=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(A=h.memoizedState.cachePool.pool),T=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),T!==A&&(d.flags|=2048),h!==null&&S(cl),null;case 24:return A=null,h!==null&&(A=h.memoizedState.cache),d.memoizedState.cache!==A&&(d.flags|=2048),Fl(gi),Ti(d),null;case 25:return null}throw Error(s(156,d.tag))}function qM(h,d){switch(Et(d),d.tag){case 1:return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return Fl(gi),wt(),h=d.flags,(h&65536)!==0&&(h&128)===0?(d.flags=h&-65537|128,d):null;case 26:case 27:case 5:return Ut(d),null;case 13:if(gr(d),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(s(340));we()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return S(fs),null;case 4:return wt(),null;case 10:return Fl(d.type),null;case 22:case 23:return gr(d),$s(),h!==null&&S(cl),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 24:return Fl(gi),null;case 25:return null;default:return null}}function lb(h,d){switch(Et(d),d.tag){case 3:Fl(gi),wt();break;case 26:case 27:case 5:Ut(d);break;case 4:wt();break;case 13:gr(d);break;case 19:S(fs);break;case 10:Fl(d.type);break;case 22:case 23:gr(d),$s(),h!==null&&S(cl);break;case 24:Fl(gi)}}function Lp(h,d){try{var A=d.updateQueue,T=A!==null?A.lastEffect:null;if(T!==null){var L=T.next;A=L;do{if((A.tag&h)===h){T=void 0;var O=A.create,K=A.inst;T=O(),K.destroy=T}A=A.next}while(A!==L)}}catch(rt){jn(d,d.return,rt)}}function Gc(h,d,A){try{var T=d.updateQueue,L=T!==null?T.lastEffect:null;if(L!==null){var O=L.next;T=O;do{if((T.tag&h)===h){var K=T.inst,rt=K.destroy;if(rt!==void 0){K.destroy=void 0,L=d;var At=A;try{rt()}catch(Ht){jn(L,At,Ht)}}}T=T.next}while(T!==O)}}catch(Ht){jn(d,d.return,Ht)}}function cb(h){var d=h.updateQueue;if(d!==null){var A=h.stateNode;try{ue(d,A)}catch(T){jn(h,h.return,T)}}}function Hr(h,d,A){A.props=Ul(h.type,h.memoizedProps),A.state=h.memoizedState;try{A.componentWillUnmount()}catch(T){jn(h,d,T)}}function po(h,d){try{var A=h.ref;if(A!==null){var T=h.stateNode;switch(h.tag){case 26:case 27:case 5:var L=Nf(T);break;default:L=T}typeof A=="function"?h.refCleanup=A(L):A.current=L}}catch(O){jn(h,d,O)}}function zr(h,d){var A=h.ref,T=h.refCleanup;if(A!==null)if(typeof T=="function")try{T()}catch(L){jn(h,d,L)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof A=="function")try{A(null)}catch(L){jn(h,d,L)}else A.current=null}function jy(h){var d=h.type,A=h.memoizedProps,T=h.stateNode;try{JM(T,d,A,h)}catch(L){jn(h,h.return,L)}}function Xy(h,d,A){try{Tb(h.stateNode,h.type,A,d,h)}catch(T){jn(h,h.return,T)}}function qy(h){return h.tag===5||h.tag===3||(fa?h.tag===26:!1)||(ai?h.tag===27:!1)||h.tag===4}function Dp(h){t:for(;;){for(;h.sibling===null;){if(h.return===null||qy(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&(!ai||h.tag!==27)&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue t;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Yy(h,d,A){var T=h.tag;if(T===5||T===6)h=h.stateNode,d?wb(A,h,d):v2(A,h);else if(!(T===4||ai&&T===27)&&(h=h.child,h!==null))for(Yy(h,d,A),h=h.sibling;h!==null;)Yy(h,d,A),h=h.sibling}function Hl(h,d,A){var T=h.tag;if(T===5||T===6)h=h.stateNode,d?Cb(A,h,d):Eb(A,h);else if(!(T===4||ai&&T===27)&&(h=h.child,h!==null))for(Hl(h,d,A),h=h.sibling;h!==null;)Hl(h,d,A),h=h.sibling}function E0(h,d,A){h=h.containerInfo;try{Ff(h,A)}catch(T){jn(d,d.return,T)}}function Bp(h,d){for(H0(h.containerInfo),We=d;We!==null;)if(h=We,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,We=d;else for(;We!==null;){h=We;var A=h.alternate;switch(d=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&A!==null){d=void 0;var T=h,L=A.memoizedProps;A=A.memoizedState;var O=T.stateNode;try{var K=Ul(T.type,L,T.elementType===T.type);d=O.getSnapshotBeforeUpdate(K,A),O.__reactInternalSnapshotBeforeUpdate=d}catch(rt){jn(T,T.return,rt)}}break;case 3:(d&1024)!==0&&us&&Ob(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(s(163))}if(d=h.sibling,d!==null){d.return=h.return,We=d;break}We=h.return}return K=mn,mn=!1,K}function M0(h,d,A){var T=A.flags;switch(A.tag){case 0:case 11:case 15:Gl(h,A),T&4&&Lp(5,A);break;case 1:if(Gl(h,A),T&4)if(h=A.stateNode,d===null)try{h.componentDidMount()}catch(rt){jn(A,A.return,rt)}else{var L=Ul(A.type,d.memoizedProps);d=d.memoizedState;try{h.componentDidUpdate(L,d,h.__reactInternalSnapshotBeforeUpdate)}catch(rt){jn(A,A.return,rt)}}T&64&&cb(A),T&512&&po(A,A.return);break;case 3:if(Gl(h,A),T&64&&(T=A.updateQueue,T!==null)){if(h=null,A.child!==null)switch(A.child.tag){case 27:case 5:h=Nf(A.child.stateNode);break;case 1:h=A.child.stateNode}try{ue(T,h)}catch(rt){jn(A,A.return,rt)}}break;case 26:if(fa){Gl(h,A),T&512&&po(A,A.return);break}case 27:case 5:Gl(h,A),d===null&&T&4&&jy(A),T&512&&po(A,A.return);break;case 12:Gl(h,A);break;case 13:Gl(h,A),T&4&&T0(h,A);break;case 22:if(L=A.memoizedState!==null||ul,!L){d=d!==null&&d.memoizedState!==null||Pi;var O=ul,K=Pi;ul=L,(Pi=d)&&!K?kl(h,A,(A.subtreeFlags&8772)!==0):Gl(h,A),ul=O,Pi=K}T&512&&(A.memoizedProps.mode==="manual"?po(A,A.return):zr(A,A.return));break;default:Gl(h,A)}}function Wy(h){var d=h.alternate;d!==null&&(h.alternate=null,Wy(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&KM(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Us(h,d,A){for(A=A.child;A!==null;)kc(h,d,A),A=A.sibling}function kc(h,d,A){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(Qi,A)}catch{}switch(A.tag){case 26:if(fa){Pi||zr(A,d),Us(h,d,A),A.memoizedState?Xu(A.memoizedState):A.stateNode&&Hf(A.stateNode);break}case 27:if(ai){Pi||zr(A,d);var T=Ue,L=an;Ue=A.stateNode,Us(h,d,A),eu(A.stateNode),Ue=T,an=L;break}case 5:Pi||zr(A,d);case 6:if(us){if(T=Ue,L=an,Ue=null,Us(h,d,A),Ue=T,an=L,Ue!==null)if(an)try{Rb(Ue,A.stateNode)}catch(O){jn(A,d,O)}else try{y2(Ue,A.stateNode)}catch(O){jn(A,d,O)}}else Us(h,d,A);break;case 18:us&&Ue!==null&&(an?Wp(Ue,A.stateNode):Vb(Ue,A.stateNode));break;case 4:us?(T=Ue,L=an,Ue=A.stateNode.containerInfo,an=!0,Us(h,d,A),Ue=T,an=L):(Va&&E0(A.stateNode,A,Yp()),Us(h,d,A));break;case 0:case 11:case 14:case 15:Pi||Gc(2,A,d),Pi||Gc(4,A,d),Us(h,d,A);break;case 1:Pi||(zr(A,d),T=A.stateNode,typeof T.componentWillUnmount=="function"&&Hr(A,d,T)),Us(h,d,A);break;case 21:Us(h,d,A);break;case 22:Pi||zr(A,d),Pi=(T=Pi)||A.memoizedState!==null,Us(h,d,A),Pi=T;break;default:Us(h,d,A)}}function T0(h,d){if(Hs&&d.memoizedState===null&&(h=d.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{eT(h)}catch(A){jn(d,d.return,A)}}function ub(h){switch(h.tag){case 13:case 19:var d=h.stateNode;return d===null&&(d=h.stateNode=new Xn),d;case 22:return h=h.stateNode,d=h._retryCache,d===null&&(d=h._retryCache=new Xn),d;default:throw Error(s(435,h.tag))}}function zl(h,d){var A=ub(h);d.forEach(function(T){var L=Wc.bind(null,h,T);A.has(T)||(A.add(T),T.then(L,L))})}function _r(h,d){var A=d.deletions;if(A!==null)for(var T=0;T<A.length;T++){var L=A[T],O=h,K=d;if(us){var rt=K;t:for(;rt!==null;){switch(rt.tag){case 27:case 5:Ue=rt.stateNode,an=!1;break t;case 3:Ue=rt.stateNode.containerInfo,an=!0;break t;case 4:Ue=rt.stateNode.containerInfo,an=!0;break t}rt=rt.return}if(Ue===null)throw Error(s(160));kc(O,K,L),Ue=null,an=!1}else kc(O,K,L);O=L.alternate,O!==null&&(O.return=null),L.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)Ky(d,h),d=d.sibling}function Ky(h,d){var A=h.alternate,T=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:_r(d,h),Gr(h),T&4&&(Gc(3,h,h.return),Lp(3,h),Gc(5,h,h.return));break;case 1:_r(d,h),Gr(h),T&512&&(Pi||A===null||zr(A,A.return)),T&64&&ul&&(h=h.updateQueue,h!==null&&(T=h.callbacks,T!==null&&(A=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=A===null?T:A.concat(T))));break;case 26:if(fa){var L=Di;_r(d,h),Gr(h),T&512&&(Pi||A===null||zr(A,A.return)),T&4&&(T=A!==null?A.memoizedState:null,d=h.memoizedState,A===null?d===null?h.stateNode===null?h.stateNode=Jp(L,h.type,h.memoizedProps,h):Zp(L,h.type,h.stateNode):h.stateNode=jb(L,d,h.memoizedProps):T!==d?(T===null?A.stateNode!==null&&Hf(A.stateNode):Xu(T),d===null?Zp(L,h.type,h.stateNode):jb(L,d,h.memoizedProps)):d===null&&h.stateNode!==null&&Xy(h,h.memoizedProps,A.memoizedProps));break}case 27:if(ai&&T&4&&h.alternate===null){L=h.stateNode;var O=h.memoizedProps;try{tu(L),Wb(h.type,O,L,h)}catch($t){jn(h,h.return,$t)}}case 5:if(_r(d,h),Gr(h),T&512&&(Pi||A===null||zr(A,A.return)),us){if(h.flags&32){d=h.stateNode;try{_2(d)}catch($t){jn(h,h.return,$t)}}T&4&&h.stateNode!=null&&(d=h.memoizedProps,Xy(h,d,A!==null?A.memoizedProps:d)),T&1024&&(D2=!0)}break;case 6:if(_r(d,h),Gr(h),T&4&&us){if(h.stateNode===null)throw Error(s(162));T=h.memoizedProps,A=A!==null?A.memoizedProps:T,d=h.stateNode;try{Mb(d,A,T)}catch($t){jn(h,h.return,$t)}}break;case 3:if(fa?(Xb(),L=Di,Di=W0(d.containerInfo),_r(d,h),Di=L):_r(d,h),Gr(h),T&4){if(us&&Hs&&A!==null&&A.memoizedState.isDehydrated)try{tT(d.containerInfo)}catch($t){jn(h,h.return,$t)}if(Va){T=d.containerInfo,A=d.pendingChildren;try{Ff(T,A)}catch($t){jn(h,h.return,$t)}}}D2&&(D2=!1,hb(h));break;case 4:fa?(A=Di,Di=W0(h.stateNode.containerInfo),_r(d,h),Gr(h),Di=A):(_r(d,h),Gr(h)),T&4&&Va&&E0(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:_r(d,h),Gr(h);break;case 13:_r(d,h),Gr(h),h.child.flags&8192&&h.memoizedState!==null!=(A!==null&&A.memoizedState!==null)&&(Mr=Qa()),T&4&&(T=h.updateQueue,T!==null&&(h.updateQueue=null,zl(h,T)));break;case 22:T&512&&(Pi||A===null||zr(A,A.return)),L=h.memoizedState!==null;var K=A!==null&&A.memoizedState!==null,rt=ul,At=Pi;if(ul=rt||L,Pi=At||K,_r(d,h),Pi=At,ul=rt,Gr(h),d=h.stateNode,d._current=h,d._visibility&=-3,d._visibility|=d._pendingVisibility&2,T&8192&&(d._visibility=L?d._visibility&-2:d._visibility|1,L&&(d=ul||Pi,A===null||K||d||Sf(h)),us&&(h.memoizedProps===null||h.memoizedProps.mode!=="manual"))){t:if(A=null,us)for(d=h;;){if(d.tag===5||fa&&d.tag===26||ai&&d.tag===27){if(A===null){K=A=d;try{O=K.stateNode,L?Lb(O):Bb(K.stateNode,K.memoizedProps)}catch($t){jn(K,K.return,$t)}}}else if(d.tag===6){if(A===null){K=d;try{var Ht=K.stateNode;L?Db(Ht):ZM(Ht,K.memoizedProps)}catch($t){jn(K,K.return,$t)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===h)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break t;for(;d.sibling===null;){if(d.return===null||d.return===h)break t;A===d&&(A=null),d=d.return}A===d&&(A=null),d.sibling.return=d.return,d=d.sibling}}T&4&&(T=h.updateQueue,T!==null&&(A=T.retryQueue,A!==null&&(T.retryQueue=null,zl(h,A))));break;case 19:_r(d,h),Gr(h),T&4&&(T=h.updateQueue,T!==null&&(h.updateQueue=null,zl(h,T)));break;case 21:break;default:_r(d,h),Gr(h)}}function Gr(h){var d=h.flags;if(d&2){try{if(us&&(!ai||h.tag!==27)){t:{for(var A=h.return;A!==null;){if(qy(A)){var T=A;break t}A=A.return}throw Error(s(160))}switch(T.tag){case 27:if(ai){var L=T.stateNode,O=Dp(h);Hl(h,O,L);break}case 5:var K=T.stateNode;T.flags&32&&(_2(K),T.flags&=-33);var rt=Dp(h);Hl(h,rt,K);break;case 3:case 4:var At=T.stateNode.containerInfo,Ht=Dp(h);Yy(h,Ht,At);break;default:throw Error(s(161))}}}catch($t){jn(h,h.return,$t)}h.flags&=-3}d&4096&&(h.flags&=-4097)}function hb(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var d=h;hb(d),d.tag===5&&d.flags&1024&&k0(d.stateNode),h=h.sibling}}function Gl(h,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)M0(h,d.alternate,d),d=d.sibling}function Sf(h){for(h=h.child;h!==null;){var d=h;switch(d.tag){case 0:case 11:case 14:case 15:Gc(4,d,d.return),Sf(d);break;case 1:zr(d,d.return);var A=d.stateNode;typeof A.componentWillUnmount=="function"&&Hr(d,d.return,A),Sf(d);break;case 26:case 27:case 5:zr(d,d.return),Sf(d);break;case 22:zr(d,d.return),d.memoizedState===null&&Sf(d);break;default:Sf(d)}h=h.sibling}}function kl(h,d,A){for(A=A&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var T=d.alternate,L=h,O=d,K=O.flags;switch(O.tag){case 0:case 11:case 15:kl(L,O,A),Lp(4,O);break;case 1:if(kl(L,O,A),T=O,L=T.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(Ht){jn(T,T.return,Ht)}if(T=O,L=T.updateQueue,L!==null){var rt=T.stateNode;try{var At=L.shared.hiddenCallbacks;if(At!==null)for(L.shared.hiddenCallbacks=null,L=0;L<At.length;L++)mt(At[L],rt)}catch(Ht){jn(T,T.return,Ht)}}A&&K&64&&cb(O),po(O,O.return);break;case 26:case 27:case 5:kl(L,O,A),A&&T===null&&K&4&&jy(O),po(O,O.return);break;case 12:kl(L,O,A);break;case 13:kl(L,O,A),A&&K&4&&T0(L,O);break;case 22:O.memoizedState===null&&kl(L,O,A),po(O,O.return);break;default:kl(L,O,A)}d=d.sibling}}function C0(h,d){var A=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(A=h.memoizedState.cachePool.pool),h=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(h=d.memoizedState.cachePool.pool),h!==A&&(h!=null&&h.refCount++,A!=null&&wp(A))}function Op(h,d){h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&wp(h))}function As(h,d,A,T){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Jy(h,d,A,T),d=d.sibling}function Jy(h,d,A,T){var L=d.flags;switch(d.tag){case 0:case 11:case 15:As(h,d,A,T),L&2048&&Lp(9,d);break;case 3:As(h,d,A,T),L&2048&&(h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&wp(h)));break;case 12:if(L&2048){As(h,d,A,T),h=d.stateNode;try{var O=d.memoizedProps,K=O.id,rt=O.onPostCommit;typeof rt=="function"&&rt(K,d.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(At){jn(d,d.return,At)}}else As(h,d,A,T);break;case 23:break;case 22:O=d.stateNode,d.memoizedState!==null?O._visibility&4?As(h,d,A,T):tr(h,d):O._visibility&4?As(h,d,A,T):(O._visibility|=4,Ps(h,d,A,T,(d.subtreeFlags&10256)!==0)),L&2048&&C0(d.alternate,d);break;case 24:As(h,d,A,T),L&2048&&Op(d.alternate,d);break;default:As(h,d,A,T)}}function Ps(h,d,A,T,L){for(L=L&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var O=h,K=d,rt=A,At=T,Ht=K.flags;switch(K.tag){case 0:case 11:case 15:Ps(O,K,rt,At,L),Lp(8,K);break;case 23:break;case 22:var $t=K.stateNode;K.memoizedState!==null?$t._visibility&4?Ps(O,K,rt,At,L):tr(O,K):($t._visibility|=4,Ps(O,K,rt,At,L)),L&&Ht&2048&&C0(K.alternate,K);break;case 24:Ps(O,K,rt,At,L),L&&Ht&2048&&Op(K.alternate,K);break;default:Ps(O,K,rt,At,L)}d=d.sibling}}function tr(h,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var A=h,T=d,L=T.flags;switch(T.tag){case 22:tr(A,T),L&2048&&C0(T.alternate,T);break;case 24:tr(A,T),L&2048&&Op(T.alternate,T);break;default:tr(A,T)}d=d.sibling}}function Fa(h){if(h.subtreeFlags&_a)for(h=h.child;h!==null;)w0(h),h=h.sibling}function w0(h){switch(h.tag){case 26:Fa(h),h.flags&_a&&(h.memoizedState!==null?Yb(Di,h.memoizedState,h.memoizedProps):br(h.type,h.memoizedProps));break;case 5:Fa(h),h.flags&_a&&br(h.type,h.memoizedProps);break;case 3:case 4:if(fa){var d=Di;Di=W0(h.stateNode.containerInfo),Fa(h),Di=d}else Fa(h);break;case 22:h.memoizedState===null&&(d=h.alternate,d!==null&&d.memoizedState!==null?(d=_a,_a=16777216,Fa(h),_a=d):Fa(h));break;default:Fa(h)}}function Np(h){var d=h.alternate;if(d!==null&&(h=d.child,h!==null)){d.child=null;do d=h.sibling,h.sibling=null,h=d;while(h!==null)}}function Vc(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var A=0;A<d.length;A++){var T=d[A];We=T,Zy(T,h)}Np(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)R0(h),h=h.sibling}function R0(h){switch(h.tag){case 0:case 11:case 15:Vc(h),h.flags&2048&&Gc(9,h,h.return);break;case 3:Vc(h);break;case 12:Vc(h);break;case 22:var d=h.stateNode;h.memoizedState!==null&&d._visibility&4&&(h.return===null||h.return.tag!==13)?(d._visibility&=-5,Vl(h)):Vc(h);break;default:Vc(h)}}function Vl(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var A=0;A<d.length;A++){var T=d[A];We=T,Zy(T,h)}Np(h)}for(h=h.child;h!==null;){switch(d=h,d.tag){case 0:case 11:case 15:Gc(8,d,d.return),Vl(d);break;case 22:A=d.stateNode,A._visibility&4&&(A._visibility&=-5,Vl(d));break;default:Vl(d)}h=h.sibling}}function Zy(h,d){for(;We!==null;){var A=We;switch(A.tag){case 0:case 11:case 15:Gc(8,A,d);break;case 23:case 22:if(A.memoizedState!==null&&A.memoizedState.cachePool!==null){var T=A.memoizedState.cachePool.pool;T!=null&&T.refCount++}break;case 24:wp(A.memoizedState.cache)}if(T=A.child,T!==null)T.return=A,We=T;else t:for(A=h;We!==null;){T=We;var L=T.sibling,O=T.return;if(Wy(T),T===A){We=null;break t}if(L!==null){L.return=O,We=L;break t}We=O}}}function Ef(h){var d=vb(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(s(364));return d}if(h=m2(h),h===null)throw Error(s(362));return h.stateNode.current}function Qc(h,d){var A=h.tag;switch(d.$$typeof){case Yf:if(h.type===d.value)return!0;break;case Ya:t:{for(d=d.value,h=[h,0],A=0;A<h.length;){var T=h[A++],L=T.tag,O=h[A++],K=d[O];if(L!==5&&L!==26&&L!==27||!Uf(T)){for(;K!=null&&Qc(T,K);)O++,K=d[O];if(O===d.length){d=!0;break t}else for(T=T.child;T!==null;)h.push(T,O),T=T.sibling}}d=!1}return d;case xi:if((A===5||A===26||A===27)&&xb(h.stateNode,d.value))return!0;break;case hl:if((A===5||A===6||A===26||A===27)&&(h=Ab(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case Eo:if((A===5||A===26||A===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function $y(h){switch(h.$$typeof){case Yf:return"<"+(a(h.value)||"Unknown")+">";case Ya:return":has("+($y(h)||"")+")";case xi:return'[role="'+h.value+'"]';case hl:return'"'+h.value+'"';case Eo:return'[data-testname="'+h.value+'"]';default:throw Error(s(365))}}function kr(h,d){var A=[];h=[h,0];for(var T=0;T<h.length;){var L=h[T++],O=L.tag,K=h[T++],rt=d[K];if(O!==5&&O!==26&&O!==27||!Uf(L)){for(;rt!=null&&Qc(L,rt);)K++,rt=d[K];if(K===d.length)A.push(L);else for(L=L.child;L!==null;)h.push(L,K),L=L.sibling}}return A}function Ip(h,d){if(!$c)throw Error(s(363));h=Ef(h),h=kr(h,d),d=[],h=Array.from(h);for(var A=0;A<h.length;){var T=h[A++],L=T.tag;if(L===5||L===26||L===27)Uf(T)||d.push(T.stateNode);else for(T=T.child;T!==null;)h.push(T),T=T.sibling}return d}function Gi(){if((Pn&2)!==0&&Sn!==0)return Sn&-Sn;if(Qe.T!==null){var h=ma;return h!==0?h:ne()}return yb()}function t2(){ba===0&&(ba=(Sn&536870912)===0||Bn?z():536870912);var h=ga.current;return h!==null&&(h.flags|=32),ba}function xs(h,d,A){(h===qn&&ni===2||h.cancelPendingCommit!==null)&&(Fs(h,0),Vr(h,Sn,ba,!1)),X(h,A),((Pn&2)===0||h!==qn)&&(h===qn&&((Pn&2)===0&&(ic|=A),ci===4&&Vr(h,Sn,ba,!1)),qt(h))}function jc(h,d,A){if((Pn&6)!==0)throw Error(s(327));var T=!A&&(d&60)===0&&(d&h.expiredLanes)===0||I(h,d),L=T?n2(h,d):D0(h,d,!0),O=T;do{if(L===0){Aa&&!T&&Vr(h,d,0,!1);break}else if(L===6)Vr(h,d,0,!Ka);else{if(A=h.current.alternate,O&&!Mf(A)){L=D0(h,d,!1),O=!1;continue}if(L===2){if(O=d,h.errorRecoveryDisabledLanes&O)var K=0;else K=h.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){d=K;t:{var rt=h;L=oh;var At=Hs&&rt.current.memoizedState.isDehydrated;if(At&&(Fs(rt,K).flags|=256),K=D0(rt,K,!1),K!==2){if(ds&&!At){rt.errorRecoveryDisabledLanes|=O,ic|=O,L=4;break t}O=Fi,Fi=L,O!==null&&Up(O)}L=K}if(O=!1,L!==2)continue}}if(L===1){Fs(h,0),Vr(h,d,0,!0);break}t:{switch(T=h,L){case 0:case 1:throw Error(s(345));case 4:if((d&4194176)===d){Vr(T,d,ba,!Ka);break t}break;case 2:Fi=null;break;case 3:case 5:break;default:throw Error(s(329))}if(T.finishedWork=A,T.finishedLanes=d,(d&62914560)===d&&(O=Mr+300-Qa(),10<O)){if(Vr(T,d,ba,!Ka),N(T,0)!==0)break t;T.timeoutHandle=es(L0.bind(null,T,A,Fi,rm,a1,d,ba,ic,fl,Ka,2,-0,0),O);break t}L0(T,A,Fi,rm,a1,d,ba,ic,fl,Ka,0,-0,0)}}break}while(!0);qt(h)}function Up(h){Fi===null?Fi=h:Fi.push.apply(Fi,h)}function L0(h,d,A,T,L,O,K,rt,At,Ht,$t,de,ye){var Ke=d.subtreeFlags;if((Ke&8192||(Ke&16785408)===16785408)&&(d2(),w0(d),d=ns(),d!==null)){h.cancelPendingCommit=d(qc.bind(null,h,A,T,L,K,rt,At,1,de,ye)),Vr(h,O,K,!Ht);return}qc(h,A,T,L,K,rt,At,$t,de,ye)}function Mf(h){for(var d=h;;){var A=d.tag;if((A===0||A===11||A===15)&&d.flags&16384&&(A=d.updateQueue,A!==null&&(A=A.stores,A!==null)))for(var T=0;T<A.length;T++){var L=A[T],O=L.getSnapshot;L=L.value;try{if(!jr(O(),L))return!1}catch{return!1}}if(A=d.child,d.subtreeFlags&16384&&A!==null)A.return=d,d=A;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Vr(h,d,A,T){d&=~sm,d&=~ic,h.suspendedLanes|=d,h.pingedLanes&=~d,T&&(h.warmLanes|=d),T=h.expirationTimes;for(var L=d;0<L;){var O=31-Sr(L),K=1<<O;T[O]=-1,L&=~K}A!==0&&it(h,A,d)}function Pp(){return(Pn&6)===0?($(0),!1):!0}function Tf(){if(ze!==null){if(ni===0)var h=ze.return;else h=ze,ya=So=null,fo(h),ru=null,au=0,h=ze;for(;h!==null;)lb(h.alternate,h),h=h.return;ze=null}}function Fs(h,d){h.finishedWork=null,h.finishedLanes=0;var A=h.timeoutHandle;A!==Jc&&(h.timeoutHandle=Jc,z0(A)),A=h.cancelPendingCommit,A!==null&&(h.cancelPendingCommit=null,A()),Tf(),qn=h,ze=A=za(h.current,null),Sn=d,ni=0,nr=null,Ka=!1,Aa=I(h,d),ds=!1,fl=ba=sm=ic=xa=ci=0,Fi=oh=null,a1=!1,(d&8)!==0&&(d|=d&32);var T=h.entangledLanes;if(T!==0)for(h=h.entanglements,T&=d;0<T;){var L=31-Sr(T),O=1<<L;d|=h[L],T&=~O}return ir=d,Z(),A}function ca(h,d){ln=null,Qe.H=Ui,d===Qf?(d=qe(),ni=3):d===nm?(d=qe(),ni=4):ni=d===s1?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,nr=d,ze===null&&(ci=1,vf(h,_t(d,h.current)))}function Xc(){var h=ga.current;return h===null?!0:(Sn&4194176)===Sn?oi===null:(Sn&62914560)===Sn||(Sn&536870912)!==0?h===oi:!1}function $o(){var h=Qe.H;return Qe.H=Ui,h===null?Ui:h}function tl(){var h=Qe.A;return Qe.A=qf,h}function Ql(){ci=4,Ka||(Sn&4194176)!==Sn&&ga.current!==null||(Aa=!0),(xa&134217727)===0&&(ic&134217727)===0||qn===null||Vr(qn,Sn,ba,!1)}function D0(h,d,A){var T=Pn;Pn|=2;var L=$o(),O=tl();(qn!==h||Sn!==d)&&(rm=null,Fs(h,d)),d=!1;var K=ci;t:do try{if(ni!==0&&ze!==null){var rt=ze,At=nr;switch(ni){case 8:Tf(),K=6;break t;case 3:case 2:case 6:ga.current===null&&(d=!0);var Ht=ni;if(ni=0,nr=null,Ha(h,rt,At,Ht),A&&Aa){K=0;break t}break;default:Ht=ni,ni=0,nr=null,Ha(h,rt,At,Ht)}}e2(),K=ci;break}catch($t){ca(h,$t)}while(!0);return d&&h.shellSuspendCounter++,ya=So=null,Pn=T,Qe.H=L,Qe.A=O,ze===null&&(qn=null,Sn=0,Z()),K}function e2(){for(;ze!==null;)Li(ze)}function n2(h,d){var A=Pn;Pn|=2;var T=$o(),L=tl();qn!==h||Sn!==d?(rm=null,Wf=Qa()+500,Fs(h,d)):Aa=I(h,d);t:do try{if(ni!==0&&ze!==null){d=ze;var O=nr;e:switch(ni){case 1:ni=0,nr=null,Ha(h,d,O,1);break;case 2:if(Qt(O)){ni=0,nr=null,kn(d);break}d=function(){ni===2&&qn===h&&(ni=7),qt(h)},O.then(d,d);break t;case 3:ni=7;break t;case 4:ni=5;break t;case 7:Qt(O)?(ni=0,nr=null,kn(d)):(ni=0,nr=null,Ha(h,d,O,7));break;case 5:var K=null;switch(ze.tag){case 26:K=ze.memoizedState;case 5:case 27:var rt=ze,At=rt.type,Ht=rt.pendingProps;if(K?qu(K):G0(At,Ht)){ni=0,nr=null;var $t=rt.sibling;if($t!==null)ze=$t;else{var de=rt.return;de!==null?(ze=de,ua(de)):ze=null}break e}}ni=0,nr=null,Ha(h,d,O,5);break;case 6:ni=0,nr=null,Ha(h,d,O,6);break;case 8:Tf(),ci=6;break t;default:throw Error(s(462))}}Ar();break}catch(ye){ca(h,ye)}while(!0);return ya=So=null,Qe.H=T,Qe.A=L,Pn=A,ze!==null?0:(qn=null,Sn=0,Z(),ci)}function Ar(){for(;ze!==null&&!Zb();)Li(ze)}function Li(h){var d=rb(h.alternate,h,ir);h.memoizedProps=h.pendingProps,d===null?ua(h):ze=d}function kn(h){var d=h,A=d.alternate;switch(d.tag){case 15:case 0:d=$x(A,d,d.pendingProps,d.type,void 0,Sn);break;case 11:d=$x(A,d,d.pendingProps,d.type.render,d.ref,Sn);break;case 5:fo(d);default:lb(A,d),d=ze=Hp(d,ir),d=rb(A,d,ir)}h.memoizedProps=h.pendingProps,d===null?ua(h):ze=d}function Ha(h,d,A,T){ya=So=null,fo(d),ru=null,au=0;var L=d.return;try{if(jM(h,L,d,A,Sn)){ci=1,vf(h,_t(A,h.current)),ze=null;return}}catch(O){if(L!==null)throw ze=L,O;ci=1,vf(h,_t(A,h.current)),ze=null;return}d.flags&32768?(Bn||T===1?h=!0:Aa||(Sn&536870912)!==0?h=!1:(Ka=h=!0,(T===2||T===3||T===6)&&(T=ga.current,T!==null&&T.tag===13&&(T.flags|=16384))),B0(d,h)):ua(d)}function ua(h){var d=h;do{if((d.flags&32768)!==0){B0(d,Ka);return}h=d.return;var A=ob(d.alternate,d,ir);if(A!==null){ze=A;return}if(d=d.sibling,d!==null){ze=d;return}ze=d=h}while(d!==null);ci===0&&(ci=5)}function B0(h,d){do{var A=qM(h.alternate,h);if(A!==null){A.flags&=32767,ze=A;return}if(A=h.return,A!==null&&(A.flags|=32768,A.subtreeFlags=0,A.deletions=null),!d&&(h=h.sibling,h!==null)){ze=h;return}ze=h=A}while(h!==null);ci=6,ze=null}function qc(h,d,A,T,L,O,K,rt,At,Ht){var $t=Qe.T,de=Kl();try{er(2),Qe.T=null,fb(h,d,A,T,de,L,O,K,rt,At,Ht)}finally{Qe.T=$t,er(de)}}function fb(h,d,A,T,L,O,K,rt){do mo();while(dl!==null);if((Pn&6)!==0)throw Error(s(327));var At=h.finishedWork;if(T=h.finishedLanes,At===null)return null;if(h.finishedWork=null,h.finishedLanes=0,At===h.current)throw Error(s(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var Ht=At.lanes|At.childLanes;if(Ht|=xo,ot(h,T,Ht,O,K,rt),h===qn&&(ze=qn=null,Sn=0),(At.subtreeFlags&10256)===0&&(At.flags&10256)===0||Mo||(Mo=!0,hu=Ht,o1=A,Xl(t1,function(){return mo(),null})),A=(At.flags&15990)!==0,(At.subtreeFlags&15990)!==0||A?(A=Qe.T,Qe.T=null,O=Kl(),er(2),K=Pn,Pn|=4,Bp(h,At),Ky(At,h),gb(h.containerInfo),h.current=At,M0(h,At.alternate,At),Z0(),Pn=K,er(O),Qe.T=A):h.current=At,Mo?(Mo=!1,dl=h,lh=T):i2(h,Ht),Ht=h.pendingLanes,Ht===0&&(uu=null),j(At.stateNode),qt(h),d!==null)for(L=h.onRecoverableError,At=0;At<d.length;At++)Ht=d[At],L(Ht.value,{componentStack:Ht.stack});return(lh&3)!==0&&mo(),Ht=h.pendingLanes,(T&4194218)!==0&&(Ht&42)!==0?h===l1?Kf++:(Kf=0,l1=h):Kf=0,$(0),null}function i2(h,d){(h.pooledCacheLanes&=d)===0&&(d=h.pooledCache,d!=null&&(h.pooledCache=null,wp(d)))}function mo(){if(dl!==null){var h=dl,d=hu;hu=0;var A=dt(lh),T=32>A?32:A;A=Qe.T;var L=Kl();try{if(er(T),Qe.T=null,dl===null)var O=!1;else{T=o1,o1=null;var K=dl,rt=lh;if(dl=null,lh=0,(Pn&6)!==0)throw Error(s(331));var At=Pn;if(Pn|=4,R0(K.current),Jy(K,K.current,rt,T),Pn=At,$(0,!1),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(Qi,K)}catch{}O=!0}return O}finally{er(L),Qe.T=A,i2(h,d)}}return!1}function Cf(h,d,A){d=_t(A,d),d=_f(h.stateNode,d,2),h=Te(h,d,2),h!==null&&(X(h,2),qt(h))}function jn(h,d,A){if(h.tag===3)Cf(h,h,A);else for(;d!==null;){if(d.tag===3){Cf(d,h,A);break}else if(d.tag===1){var T=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(uu===null||!uu.has(T))){h=_t(A,h),A=Uy(2),T=Te(d,A,2),T!==null&&(Yx(A,T,d,h),X(T,2),qt(T));break}}d=d.return}}function Qu(h,d,A){var T=h.pingCache;if(T===null){T=h.pingCache=new Wa;var L=new Set;T.set(d,L)}else L=T.get(d),L===void 0&&(L=new Set,T.set(d,L));L.has(A)||(ds=!0,L.add(A),h=s2.bind(null,h,d,A),d.then(h,h))}function s2(h,d,A){var T=h.pingCache;T!==null&&T.delete(d),h.pingedLanes|=h.suspendedLanes&A,h.warmLanes&=~A,qn===h&&(Sn&A)===A&&(ci===4||ci===3&&(Sn&62914560)===Sn&&300>Qa()-Mr?(Pn&2)===0&&Fs(h,0):sm|=A,fl===Sn&&(fl=0)),qt(h)}function Yc(h,d){d===0&&(d=U()),h=Vt(h,d),h!==null&&(X(h,d),qt(h))}function jl(h){var d=h.memoizedState,A=0;d!==null&&(A=d.retryLane),Yc(h,A)}function Wc(h,d){var A=0;switch(h.tag){case 13:var T=h.stateNode,L=h.memoizedState;L!==null&&(A=L.retryLane);break;case 19:T=h.stateNode;break;case 22:T=h.stateNode._retryCache;break;default:throw Error(s(314))}T!==null&&T.delete(d),Yc(h,A)}function Xl(h,d){return $p(h,d)}function r2(h,d,A,T){this.tag=h,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fp(h){return h=h.prototype,!(!h||!h.isReactComponent)}function za(h,d){var A=h.alternate;return A===null?(A=e(h.tag,d,h.key,h.mode),A.elementType=h.elementType,A.type=h.type,A.stateNode=h.stateNode,A.alternate=h,h.alternate=A):(A.pendingProps=d,A.type=h.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=h.flags&31457280,A.childLanes=h.childLanes,A.lanes=h.lanes,A.child=h.child,A.memoizedProps=h.memoizedProps,A.memoizedState=h.memoizedState,A.updateQueue=h.updateQueue,d=h.dependencies,A.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},A.sibling=h.sibling,A.index=h.index,A.ref=h.ref,A.refCleanup=h.refCleanup,A}function Hp(h,d){h.flags&=31457282;var A=h.alternate;return A===null?(h.childLanes=0,h.lanes=d,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=A.childLanes,h.lanes=A.lanes,h.child=A.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=A.memoizedProps,h.memoizedState=A.memoizedState,h.updateQueue=A.updateQueue,h.type=A.type,d=A.dependencies,h.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),h}function el(h,d,A,T,L,O){var K=0;if(T=h,typeof h=="function")Fp(h)&&(K=1);else if(typeof h=="string")K=fa&&ai?Kp(h,A,hs.current)?26:il(h)?27:5:fa?Kp(h,A,hs.current)?26:5:ai&&il(h)?27:5;else t:switch(h){case Kc:return Ii(A.children,L,O,d);case Vp:K=8,L|=24;break;case U0:return h=e(12,A,d,L|2),h.elementType=U0,h.lanes=O,h;case P0:return h=e(13,A,d,L),h.elementType=P0,h.lanes=O,h;case Df:return h=e(19,A,d,L),h.elementType=Df,h.lanes=O,h;case l2:return zp(A,L,O,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case Qp:case go:K=10;break t;case o2:K=9;break t;case jp:K=11;break t;case F0:K=14;break t;case ka:K=16,T=null;break t}K=29,A=Error(s(130,h===null?"null":typeof h,"")),T=null}return d=e(K,A,d,L),d.elementType=h,d.type=T,d.lanes=O,d}function Ii(h,d,A,T){return h=e(7,h,T,d),h.lanes=A,h}function zp(h,d,A,T){h=e(22,h,T,d),h.elementType=l2,h.lanes=A;var L={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var O=L._current;if(O===null)throw Error(s(456));if((L._pendingVisibility&2)===0){var K=Vt(O,2);K!==null&&(L._pendingVisibility|=2,xs(K,O,2))}},attach:function(){var O=L._current;if(O===null)throw Error(s(456));if((L._pendingVisibility&2)!==0){var K=Vt(O,2);K!==null&&(L._pendingVisibility&=-3,xs(K,O,2))}}};return h.stateNode=L,h}function O0(h,d,A){return h=e(6,h,null,d),h.lanes=A,h}function a2(h,d,A){return d=e(4,h.children!==null?h.children:[],h.key,d),d.lanes=A,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function YM(h,d,A,T,L,O,K,rt){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Jc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=P(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P(0),this.hiddenUpdates=P(null),this.identifierPrefix=T,this.onUncaughtError=L,this.onCaughtError=O,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=rt,this.incompleteTransitions=new Map}function db(h,d,A,T,L,O,K,rt,At,Ht,$t,de){return h=new YM(h,d,A,K,rt,At,Ht,de),d=1,O===!0&&(d|=24),O=e(3,null,null,d),h.current=O,O.stateNode=h,d=zc(),d.refCount++,h.pooledCache=d,d.refCount++,O.memoizedState={element:T,isDehydrated:A,cache:d},Jt(O),h}function ts(h){return h?(h=nu,h):nu}function N0(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(s(188)):(h=Object.keys(h).join(","),Error(s(268,h)));return h=_(d),h=h!==null?b(h):null,h===null?null:Nf(h.stateNode)}function wf(h,d,A,T,L,O){L=ts(L),T.context===null?T.context=L:T.pendingContext=L,T=Se(d),T.payload={element:A},O=O===void 0?null:O,O!==null&&(T.callback=O),A=Te(h,T,d),A!==null&&(xs(A,h,d),ce(A,h,d))}function Rf(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var A=h.retryLane;h.retryLane=A!==0&&A<d?A:d}}function Gp(h,d){Rf(h,d),(h=h.alternate)&&Rf(h,d)}var tn={},Lf=i0(),ha=IO(),I0=Object.assign,WM=Symbol.for("react.element"),kp=Symbol.for("react.transitional.element"),Ga=Symbol.for("react.portal"),Kc=Symbol.for("react.fragment"),Vp=Symbol.for("react.strict_mode"),U0=Symbol.for("react.profiler"),Qp=Symbol.for("react.provider"),o2=Symbol.for("react.consumer"),go=Symbol.for("react.context"),jp=Symbol.for("react.forward_ref"),P0=Symbol.for("react.suspense"),Df=Symbol.for("react.suspense_list"),F0=Symbol.for("react.memo"),ka=Symbol.for("react.lazy"),l2=Symbol.for("react.offscreen"),pb=Symbol.for("react.memo_cache_sentinel"),ql=Symbol.iterator,c2=Symbol.for("react.client.reference"),Qe=Lf.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nl,Yl,ju=!1,Bf=Array.isArray,u2=t.rendererVersion,Xp=t.rendererPackageName,Of=t.extraDevToolsConfig,Nf=t.getPublicInstance,mb=t.getRootHostContext,If=t.getChildHostContext,H0=t.prepareForCommit,gb=t.resetAfterCommit,h2=t.createInstance,qp=t.appendInitialChild,Wl=t.finalizeInitialChildren,en=t.shouldSetTextContent,Zn=t.createTextInstance,es=t.scheduleTimeout,z0=t.cancelTimeout,Jc=t.noTimeout,xr=t.isPrimaryRenderer;t.warnsIfNotActing;var us=t.supportsMutation,Va=t.supportsPersistence,Hs=t.supportsHydration,vb=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var ki=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var er=t.setCurrentUpdatePriority,Kl=t.getCurrentUpdatePriority,yb=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var _b=t.shouldAttemptEagerTransition,KM=t.detachDeletedInstance;t.requestPostPaintCallback;var f2=t.maySuspendCommit,G0=t.preloadInstance,d2=t.startSuspendingCommit,br=t.suspendInstance,ns=t.waitForCommitToBeReady,Zc=t.NotPendingTransition,vo=t.HostTransitionContext,k0=t.resetFormInstance;t.bindToConsole;var p2=t.supportsMicrotasks,Jl=t.scheduleMicrotask,$c=t.supportsTestSelectors,m2=t.findFiberRoot,g2=t.getBoundingRect,Ab=t.getTextContent,Uf=t.isHiddenSubtree,xb=t.matchAccessibilityRole,bb=t.setFocusIfFocusable,Sb=t.setupIntersectionObserver,Eb=t.appendChild,v2=t.appendChildToContainer,Mb=t.commitTextUpdate,JM=t.commitMount,Tb=t.commitUpdate,Cb=t.insertBefore,wb=t.insertInContainerBefore,y2=t.removeChild,Rb=t.removeChildFromContainer,_2=t.resetTextContent,Lb=t.hideInstance,Db=t.hideTextInstance,Bb=t.unhideInstance,ZM=t.unhideTextInstance,Ob=t.clearContainer,Pf=t.cloneInstance,Yp=t.createContainerChildSet,A2=t.appendChildToContainerChildSet,V0=t.finalizeContainerChildren,Ff=t.replaceContainerChildren,x2=t.cloneHiddenInstance,b2=t.cloneHiddenTextInstance,Q0=t.isSuspenseInstancePending,j0=t.isSuspenseInstanceFallback,Nb=t.getSuspenseInstanceFallbackErrorDetails,Ib=t.registerSuspenseInstanceRetry,S2=t.canHydrateFormStateMarker,Ub=t.isFormStateMarkerMatching,E2=t.getNextHydratableSibling,X0=t.getFirstHydratableChild,Pb=t.getFirstHydratableChildWithinContainer,Fb=t.getFirstHydratableChildWithinSuspenseInstance,$M=t.canHydrateInstance,M2=t.canHydrateTextInstance,Hb=t.canHydrateSuspenseInstance,zb=t.hydrateInstance,T2=t.hydrateTextInstance,Gb=t.hydrateSuspenseInstance,kb=t.getNextHydratableInstanceAfterSuspenseInstance,tT=t.commitHydratedContainer,eT=t.commitHydratedSuspenseInstance,Vb=t.clearSuspenseBoundary,Wp=t.clearSuspenseBoundaryFromContainer,q0=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var Y0=t.validateHydratableInstance,Qb=t.validateHydratableTextInstance,fa=t.supportsResources,Kp=t.isHostHoistableType,W0=t.getHoistableRoot,C2=t.getResource,jb=t.acquireResource,Xu=t.releaseResource,Jp=t.hydrateHoistable,Zp=t.mountHoistable,Hf=t.unmountHoistable,K0=t.createHoistableInstance,Xb=t.prepareToCommitHoistables,qb=t.mayResourceSuspendCommit,qu=t.preloadResource,Yb=t.suspendResource,ai=t.supportsSingletons,yo=t.resolveSingletonInstance,tu=t.clearSingleton,Wb=t.acquireSingletonInstance,eu=t.releaseSingletonInstance,il=t.isHostSingletonType,Vi=[],Zl=-1,nu={},Sr=Math.clz32?Math.clz32:D,Kb=Math.log,Jb=Math.LN2,sl=128,Yu=4194304,$p=ha.unstable_scheduleCallback,J0=ha.unstable_cancelCallback,Zb=ha.unstable_shouldYield,Z0=ha.unstable_requestPaint,Qa=ha.unstable_now,$0=ha.unstable_ImmediatePriority,$b=ha.unstable_UserBlockingPriority,t1=ha.unstable_NormalPriority,nT=ha.unstable_IdlePriority,tS=ha.log,bs=ha.unstable_setDisableYieldValue,Qi=null,Qr=null,jr=typeof Object.is=="function"?Object.is:nt,w2=new WeakMap,Wu=[],Ku=0,Ju=null,zf=0,da=[],pa=0,iu=null,_o=1,Ao="",hs=M(null),Gf=M(null),rl=M(null),Zu=M(null),zs=null,Gs=null,Bn=!1,ja=null,Ss=!1,tm=Error(s(519)),Xa=[],$u=0,xo=0,em=null,$l=null,th=!1,pi=!1,R2=!1,kf=0,Vf=null,eh=0,ma=0,nh=null,tc=!1,ih=!1,al=Object.prototype.hasOwnProperty,Qf=Error(s(460)),nm=Error(s(474)),im={then:function(){}},su=null,ru=null,au=0,ou=ls(!0),ol=ls(!1),mi=M(null),jf=M(0),ga=M(null),oi=null,fs=M(0),ec=0,ln=null,Fe=null,Un=null,qa=!1,sh=!1,lu=!1,e1=0,rh=0,Es=null,bo=0,n1=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Ui={readContext:Is,use:Rt,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useLayoutEffect:ti,useInsertionEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useSyncExternalStore:ti,useId:ti};Ui.useCacheRefresh=ti,Ui.useMemoCache=ti,Ui.useHostTransitionStatus=ti,Ui.useFormState=ti,Ui.useActionState=ti,Ui.useOptimistic=ti;var cu={readContext:Is,use:Rt,useCallback:function(h,d){return Y().memoizedState=[h,d===void 0?null:d],h},useContext:Is,useEffect:d0,useImperativeHandle:function(h,d,A){A=A!=null?A.concat([h]):null,gp(4194308,4,p0.bind(null,d,h),A)},useLayoutEffect:function(h,d){return gp(4194308,4,h,d)},useInsertionEffect:function(h,d){gp(4,2,h,d)},useMemo:function(h,d){var A=Y();d=d===void 0?null:d;var T=h();if(lu){tt(!0);try{h()}finally{tt(!1)}}return A.memoizedState=[T,d],T},useReducer:function(h,d,A){var T=Y();if(A!==void 0){var L=A(d);if(lu){tt(!0);try{A(d)}finally{tt(!1)}}}else L=d;return T.memoizedState=T.baseState=L,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:L},T.queue=h,h=h.dispatch=g0.bind(null,ln,h),[T.memoizedState,h]},useRef:function(h){var d=Y();return h={current:h},d.memoizedState=h},useState:function(h){h=yn(h);var d=h.queue,A=Iy.bind(null,ln,d);return d.dispatch=A,[h.memoizedState,A]},useDebugValue:Ic,useDeferredValue:function(h,d){var A=Y();return _p(A,h,d)},useTransition:function(){var h=yn(!1);return h=ff.bind(null,ln,h.queue,!0,!1),Y().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,d,A){var T=ln,L=Y();if(Bn){if(A===void 0)throw Error(s(407));A=A()}else{if(A=d(),qn===null)throw Error(s(349));(Sn&60)!==0||Oe(T,d,A)}L.memoizedState=A;var O={value:A,getSnapshot:d};return L.queue=O,d0(pn.bind(null,T,O,h),[h]),T.flags|=2048,vr(9,Ce.bind(null,T,O,A,d),{destroy:void 0},null),A},useId:function(){var h=Y(),d=qn.identifierPrefix;if(Bn){var A=Ao,T=_o;A=(T&~(1<<32-Sr(T)-1)).toString(32)+A,d=":"+d+"R"+A,A=e1++,0<A&&(d+="H"+A.toString(32)),d+=":"}else A=bo++,d=":"+d+"r"+A.toString(32)+":";return h.memoizedState=d},useCacheRefresh:function(){return Y().memoizedState=Ny.bind(null,ln)}};cu.useMemoCache=yt,cu.useHostTransitionStatus=Ap,cu.useFormState=ei,cu.useActionState=ei,cu.useOptimistic=function(h){var d=Y();d.memoizedState=d.baseState=h;var A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=A,d=pf.bind(null,ln,!0,A),A.dispatch=d,[h,d]};var Er={readContext:Is,use:Rt,useCallback:Gu,useContext:Is,useEffect:Dy,useImperativeHandle:m0,useInsertionEffect:Xx,useLayoutEffect:yp,useMemo:By,useReducer:se,useRef:Jo,useState:function(){return se(Yt)},useDebugValue:Ic,useDeferredValue:function(h,d){var A=pt();return Oy(A,Fe.memoizedState,h,d)},useTransition:function(){var h=se(Yt)[0],d=pt().memoizedState;return[typeof h=="boolean"?h:Ct(h),d]},useSyncExternalStore:Ge,useId:df};Er.useCacheRefresh=Il,Er.useMemoCache=yt,Er.useHostTransitionStatus=Ap,Er.useFormState=Os,Er.useActionState=Os,Er.useOptimistic=function(h,d){var A=pt();return bn(A,Fe,h,d)};var va={readContext:Is,use:Rt,useCallback:Gu,useContext:Is,useEffect:Dy,useImperativeHandle:m0,useInsertionEffect:Xx,useLayoutEffect:yp,useMemo:By,useReducer:Ae,useRef:Jo,useState:function(){return Ae(Yt)},useDebugValue:Ic,useDeferredValue:function(h,d){var A=pt();return Fe===null?_p(A,h,d):Oy(A,Fe.memoizedState,h,d)},useTransition:function(){var h=Ae(Yt)[0],d=pt().memoizedState;return[typeof h=="boolean"?h:Ct(h),d]},useSyncExternalStore:Ge,useId:df};va.useCacheRefresh=Il,va.useMemoCache=yt,va.useHostTransitionStatus=Ap,va.useFormState=_s,va.useActionState=_s,va.useOptimistic=function(h,d){var A=pt();return Fe!==null?bn(A,Fe,h,d):(A.baseState=h,[h,A.queue.dispatch])};var ll={isMounted:function(h){return(h=h._reactInternals)?g(h)===h:!1},enqueueSetState:function(h,d,A){h=h._reactInternals;var T=Gi(),L=Se(T);L.payload=d,A!=null&&(L.callback=A),d=Te(h,L,T),d!==null&&(xs(d,h,T),ce(d,h,T))},enqueueReplaceState:function(h,d,A){h=h._reactInternals;var T=Gi(),L=Se(T);L.tag=1,L.payload=d,A!=null&&(L.callback=A),d=Te(h,L,T),d!==null&&(xs(d,h,T),ce(d,h,T))},enqueueForceUpdate:function(h,d){h=h._reactInternals;var A=Gi(),T=Se(A);T.tag=2,d!=null&&(T.callback=d),d=Te(h,T,A),d!==null&&(xs(d,h,A),ce(d,h,A))}},i1=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},s1=Error(s(461)),li=!1,r1={dehydrated:null,treeContext:null,retryLane:0},nc=M(null),So=null,ya=null,Xf=typeof AbortController<"u"?AbortController:function(){var h=[],d=this.signal={aborted:!1,addEventListener:function(A,T){h.push(T)}};this.abort=function(){d.aborted=!0,h.forEach(function(A){return A()})}},eS=ha.unstable_scheduleCallback,nS=ha.unstable_NormalPriority,gi={$$typeof:go,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},L2=Qe.S;Qe.S=function(h,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&te(h,d),L2!==null&&L2(h,d)};var cl=M(null),ul=!1,Pi=!1,D2=!1,Xn=typeof WeakSet=="function"?WeakSet:Set,We=null,mn=!1,Ue=null,an=!1,Di=null,_a=8192,qf={getCacheForType:function(h){var d=Is(gi),A=d.data.get(h);return A===void 0&&(A=h(),d.data.set(h,A)),A}},Yf=0,Ya=1,xi=2,Eo=3,hl=4;if(typeof Symbol=="function"&&Symbol.for){var ah=Symbol.for;Yf=ah("selector.component"),Ya=ah("selector.has_pseudo_class"),xi=ah("selector.role"),Eo=ah("selector.test_id"),hl=ah("selector.text")}var Wa=typeof WeakMap=="function"?WeakMap:Map,Pn=0,qn=null,ze=null,Sn=0,ni=0,nr=null,Ka=!1,Aa=!1,ds=!1,ir=0,ci=0,xa=0,ic=0,sm=0,ba=0,fl=0,oh=null,Fi=null,a1=!1,Mr=0,Wf=1/0,rm=null,uu=null,Mo=!1,dl=null,lh=0,hu=0,o1=null,Kf=0,l1=null;return tn.attemptContinuousHydration=function(h){if(h.tag===13){var d=Vt(h,67108864);d!==null&&xs(d,h,67108864),Gp(h,67108864)}},tn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=Gi(),A=Vt(h,d);A!==null&&xs(A,h,d),Gp(h,d)}},tn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var d=B(h.pendingLanes);if(d!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;d;){var A=1<<31-Sr(d);h.entanglements[1]|=A,d&=~A}qt(h),(Pn&6)===0&&(Wf=Qa()+500,$(0))}}break;case 13:d=Vt(h,2),d!==null&&xs(d,h,2),Pp(),Gp(h,2)}},tn.batchedUpdates=function(h,d){return h(d)},tn.createComponentSelector=function(h){return{$$typeof:Yf,value:h}},tn.createContainer=function(h,d,A,T,L,O,K,rt,At,Ht){return db(h,d,!1,null,A,T,O,K,rt,At,Ht,null)},tn.createHasPseudoClassSelector=function(h){return{$$typeof:Ya,value:h}},tn.createHydrationContainer=function(h,d,A,T,L,O,K,rt,At,Ht,$t,de,ye){return h=db(A,T,!0,h,L,O,rt,At,Ht,$t,de,ye),h.context=ts(null),A=h.current,T=Gi(),L=Se(T),L.callback=d??null,Te(A,L,T),h.current.lanes=T,X(h,T),qt(h),h},tn.createPortal=function(h,d,A){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ga,key:T==null?null:""+T,children:h,containerInfo:d,implementation:A}},tn.createRoleSelector=function(h){return{$$typeof:xi,value:h}},tn.createTestNameSelector=function(h){return{$$typeof:Eo,value:h}},tn.createTextSelector=function(h){return{$$typeof:hl,value:h}},tn.defaultOnCaughtError=function(h){console.error(h)},tn.defaultOnRecoverableError=function(h){i1(h)},tn.defaultOnUncaughtError=function(h){i1(h)},tn.deferredUpdates=function(h){var d=Qe.T,A=Kl();try{return er(32),Qe.T=null,h()}finally{er(A),Qe.T=d}},tn.discreteUpdates=function(h,d,A,T,L){var O=Qe.T,K=Kl();try{return er(2),Qe.T=null,h(d,A,T,L)}finally{er(K),Qe.T=O,Pn===0&&(Wf=Qa()+500)}},tn.findAllNodes=Ip,tn.findBoundingRects=function(h,d){if(!$c)throw Error(s(363));d=Ip(h,d),h=[];for(var A=0;A<d.length;A++)h.push(g2(d[A]));for(d=h.length-1;0<d;d--){A=h[d];for(var T=A.x,L=T+A.width,O=A.y,K=O+A.height,rt=d-1;0<=rt;rt--)if(d!==rt){var At=h[rt],Ht=At.x,$t=Ht+At.width,de=At.y,ye=de+At.height;if(T>=Ht&&O>=de&&L<=$t&&K<=ye){h.splice(d,1);break}else if(T!==Ht||A.width!==At.width||ye<O||de>K){if(!(O!==de||A.height!==At.height||$t<T||Ht>L)){Ht>T&&(At.width+=Ht-T,At.x=T),$t<L&&(At.width=L-Ht),h.splice(d,1);break}}else{de>O&&(At.height+=de-O,At.y=O),ye<K&&(At.height=K-de),h.splice(d,1);break}}}return h},tn.findHostInstance=N0,tn.findHostInstanceWithNoPortals=function(h){return h=_(h),h=h!==null?C(h):null,h===null?null:Nf(h.stateNode)},tn.findHostInstanceWithWarning=function(h){return N0(h)},tn.flushPassiveEffects=mo,tn.flushSyncFromReconciler=function(h){var d=Pn;Pn|=1;var A=Qe.T,T=Kl();try{if(er(2),Qe.T=null,h)return h()}finally{er(T),Qe.T=A,Pn=d,(Pn&6)===0&&$(0)}},tn.flushSyncWork=Pp,tn.focusWithin=function(h,d){if(!$c)throw Error(s(363));for(h=Ef(h),d=kr(h,d),d=Array.from(d),h=0;h<d.length;){var A=d[h++],T=A.tag;if(!Uf(A)){if((T===5||T===26||T===27)&&bb(A.stateNode))return!0;for(A=A.child;A!==null;)d.push(A),A=A.sibling}}return!1},tn.getFindAllNodesFailureDescription=function(h,d){if(!$c)throw Error(s(363));var A=0,T=[];h=[Ef(h),0];for(var L=0;L<h.length;){var O=h[L++],K=O.tag,rt=h[L++],At=d[rt];if((K!==5&&K!==26&&K!==27||!Uf(O))&&(Qc(O,At)&&(T.push($y(At)),rt++,rt>A&&(A=rt)),rt<d.length))for(O=O.child;O!==null;)h.push(O,rt),O=O.sibling}if(A<d.length){for(h=[];A<d.length;A++)h.push($y(d[A]));return`findAllNodes was able to match part of the selector:
  `+(T.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},tn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return Nf(h.child.stateNode);default:return h.child.stateNode}},tn.injectIntoDevTools=function(){var h={bundleType:0,version:u2,rendererPackageName:Xp,currentDispatcherRef:Qe,findFiberByHostInstance:vb,reconcilerVersion:"19.0.0"};if(Of!==null&&(h.rendererConfig=Of),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{Qi=d.inject(h),Qr=d}catch{}h=!!d.checkDCE}}return h},tn.isAlreadyRendering=function(){return!1},tn.observeVisibleRects=function(h,d,A,T){if(!$c)throw Error(s(363));h=Ip(h,d);var L=Sb(h,A,T).disconnect;return{disconnect:function(){L()}}},tn.shouldError=function(){return null},tn.shouldSuspend=function(){return!1},tn.startHostTransition=function(h,d,A,T){if(h.tag!==5)throw Error(s(476));var L=Zo(h).queue;ff(h,L,d,Zc,A===null?n:function(){var O=Zo(h).next.queue;return Uc(h,O,{},Gi()),A(T)})},tn.updateContainer=function(h,d,A,T){var L=d.current,O=Gi();return wf(L,O,h,d,A,T),O},tn.updateContainerSync=function(h,d,A,T){return d.tag===0&&mo(),wf(d.current,2,h,d,A,T),2},tn},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(N8)),N8.exports}var GL;function oY(){return GL||(GL=1,O8.exports=aY()),O8.exports}var lY=oY();const cY=UE(lY);var kL=IO();const uY=i=>typeof i=="object"&&typeof i.then=="function",Pm=[];function UO(i,t,e=(n,s)=>n===s){if(i===t)return!0;if(!i||!t)return!1;const n=i.length;if(t.length!==n)return!1;for(let s=0;s<n;s++)if(!e(i[s],t[s]))return!1;return!0}function PO(i,t=null,e=!1,n={}){t===null&&(t=[i]);for(const r of Pm)if(UO(t,r.keys,r.equal)){if(e)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!e)throw r.promise}const s={keys:t,equal:n.equal,remove:()=>{const r=Pm.indexOf(s);r!==-1&&Pm.splice(r,1)},promise:(uY(i)?i:i(...t)).then(r=>{s.response=r,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(r=>s.error=r)};if(Pm.push(s),!e)throw s.promise}const hY=(i,t,e)=>PO(i,t,!1,e),fY=(i,t,e)=>void PO(i,t,!0,e),dY=i=>{if(i===void 0||i.length===0)Pm.splice(0,Pm.length);else{const t=Pm.find(e=>UO(i,e.keys,e.equal));t&&t.remove()}};function h7(i,t,e){if(!i)return;if(e(i)===!0)return i;let n=t?i.return:i.child;for(;n;){const s=h7(n,t,e);if(s)return s;n=t?null:n.sibling}}function FO(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const f7=FO(lt.createContext(null));class HO extends lt.Component{render(){return lt.createElement(f7.Provider,{value:this._reactInternals},this.props.children)}}function zO(){const i=lt.useContext(f7);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=lt.useId();return lt.useMemo(()=>{for(const e of[i,i==null?void 0:i.alternate]){if(!e)continue;const n=h7(e,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(n)return n}},[i,t])}const pY=Symbol.for("react.context"),mY=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===pY;function gY(){const i=zO(),[t]=lt.useState(()=>new Map);t.clear();let e=i;for(;e;){const n=e.type;mY(n)&&n!==f7&&!t.has(n)&&t.set(n,lt.use(FO(n))),e=e.return}return t}function vY(){const i=gY();return lt.useMemo(()=>Array.from(i.keys()).reduce((t,e)=>n=>lt.createElement(t,null,lt.createElement(e.Provider,{...n,value:i.get(e)})),t=>lt.createElement(HO,{...t})),[i])}function GO(i){let t=i.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const kO=i=>i&&i.isOrthographicCamera,yY=i=>i&&i.hasOwnProperty("current"),_Y=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),Hx=((i,t)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?lt.useLayoutEffect:lt.useEffect;function VO(i){const t=lt.useRef(i);return Hx(()=>void(t.current=i),[i]),t}function AY(){const i=zO(),t=vY();return lt.useMemo(()=>({children:e})=>{const s=!!h7(i,!0,r=>r.type===lt.StrictMode)?lt.StrictMode:lt.Fragment;return k.jsx(s,{children:k.jsx(t,{children:e})})},[i,t])}function xY({set:i}){return Hx(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const bY=(i=>(i=class extends lt.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function QO(i){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],e),i[1]):i}function O1(i){var t;return(t=i.__r3f)==null?void 0:t.root.getState()}const zi={obj:i=>i===Object(i)&&!zi.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,t,{arrays:e="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof t||!!i!=!!t)return!1;if(zi.str(i)||zi.num(i)||zi.boo(i))return i===t;const r=zi.obj(i);if(r&&n==="reference")return i===t;const a=zi.arr(i);if(a&&e==="reference")return i===t;if((a||r)&&i===t)return!0;let l;for(l in i)if(!(l in t))return!1;if(r&&e==="shallow"&&n==="shallow"){for(l in s?t:i)if(!zi.equ(i[l],t[l],{strict:s,objects:"reference"}))return!1}else for(l in s?t:i)if(i[l]!==t[l])return!1;if(zi.und(l)){if(a&&i.length===0&&t.length===0||r&&Object.keys(i).length===0&&Object.keys(t).length===0)return!0;if(i!==t)return!1}return!0}};function jO(i){const t={nodes:{},materials:{},meshes:{}};return i&&i.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}function SY(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const t in i){const e=i[t];(e==null?void 0:e.type)!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const XO=["children","key","ref"];function EY(i){const t={};for(const e in i)XO.includes(e)||(t[e]=i[e]);return t}function iE(i,t,e,n){const s=i;let r=s==null?void 0:s.__r3f;return r||(r={root:t,type:e,parent:null,children:[],props:EY(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function oA(i,t){let e=i[t];if(!t.includes("-"))return{root:i,key:t,target:e};e=i;for(const s of t.split("-")){var n;t=s,i=e,e=(n=e)==null?void 0:n[t]}return{root:i,key:t,target:e}}const VL=/-\d+$/;function sE(i,t){if(zi.str(t.props.attach)){if(VL.test(t.props.attach)){const s=t.props.attach.replace(VL,""),{root:r,key:a}=oA(i.object,s);Array.isArray(r[a])||(r[a]=[])}const{root:e,key:n}=oA(i.object,t.props.attach);t.previousAttach=e[n],e[n]=t.object}else zi.fun(t.props.attach)&&(t.previousAttach=t.props.attach(i.object,t.object))}function rE(i,t){if(zi.str(t.props.attach)){const{root:e,key:n}=oA(i.object,t.props.attach),s=t.previousAttach;s===void 0?delete e[n]:e[n]=s}else t.previousAttach==null||t.previousAttach(i.object,t.object);delete t.previousAttach}const B5=[...XO,"args","dispose","attach","object","onUpdate","dispose"],QL=new Map;function MY(i){let t=QL.get(i.constructor);try{t||(t=new i.constructor,QL.set(i.constructor,t))}catch{}return t}function TY(i,t){const e={};for(const n in t)if(!B5.includes(n)&&!zi.equ(t[n],i.props[n])){e[n]=t[n];for(const s in t)s.startsWith(`${n}-`)&&(e[s]=t[s])}for(const n in i.props){if(B5.includes(n)||t.hasOwnProperty(n))continue;const{root:s,key:r}=oA(i.object,n);if(s.constructor&&s.constructor.length===0){const a=MY(s);zi.und(a)||(e[r]=a[r])}else e[r]=0}return e}const CY=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],wY=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function vd(i,t){var e;const n=i.__r3f,s=n&&GO(n).getState(),r=n==null?void 0:n.eventCount;for(const l in t){let u=t[l];if(B5.includes(l))continue;if(n&&wY.test(l)){typeof u=="function"?n.handlers[l]=u:delete n.handlers[l],n.eventCount=Object.keys(n.handlers).length;continue}if(u===void 0)continue;let{root:f,key:m,target:g}=oA(i,l);if(g instanceof my&&u instanceof my)g.mask=u.mask;else if(g instanceof oe&&_Y(u))g.set(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&u!=null&&u.constructor&&g.constructor===u.constructor)g.copy(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(u))typeof g.fromArray=="function"?g.fromArray(u):g.set(...u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof u=="number")typeof g.setScalar=="function"?g.setScalar(u):g.set(u);else{var a;f[m]=u,s&&!s.linear&&CY.includes(m)&&(a=f[m])!=null&&a.isTexture&&f[m].format===ia&&f[m].type===Ws&&(f[m].colorSpace=Kn)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(e=n.object)!=null&&e.isObject3D&&r!==n.eventCount){const l=n.object,u=s.internal.interaction.indexOf(l);u>-1&&s.internal.interaction.splice(u,1),n.eventCount&&l.raycast!==null&&s.internal.interaction.push(l)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Ly(n),i}function Ly(i){var t;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const e=(t=i.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function RY(i,t){i.manual||(kO(i)?(i.left=t.width/-2,i.right=t.width/2,i.top=t.height/2,i.bottom=t.height/-2):i.aspect=t.width/t.height,i.updateProjectionMatrix())}const Ra=i=>i==null?void 0:i.isObject3D;function f4(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function qO(i,t,e,n){const s=e.get(t);s&&(e.delete(t),e.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function LY(i,t){const{internal:e}=i.getState();e.interaction=e.interaction.filter(n=>n!==t),e.initialHits=e.initialHits.filter(n=>n!==t),e.hovered.forEach((n,s)=>{(n.eventObject===t||n.object===t)&&e.hovered.delete(s)}),e.capturedMap.forEach((n,s)=>{qO(e.capturedMap,t,n,s)})}function DY(i){function t(u){const{internal:f}=i.getState(),m=u.offsetX-f.initialClick[0],g=u.offsetY-f.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function e(u){return u.filter(f=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=f.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function n(u,f){const m=i.getState(),g=new Set,v=[],_=f?f(m.internal.interaction):m.internal.interaction;for(let S=0;S<_.length;S++){const R=O1(_[S]);R&&(R.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(u,m);function b(S){const R=O1(S);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var D;R.events.compute==null||R.events.compute(u,R,(D=R.previousRoot)==null?void 0:D.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(S,!0):[]}let C=_.flatMap(b).sort((S,R)=>{const D=O1(S.object),B=O1(R.object);return!D||!B?S.distance-R.distance:B.events.priority-D.events.priority||S.distance-R.distance}).filter(S=>{const R=f4(S);return g.has(R)?!1:(g.add(R),!0)});m.events.filter&&(C=m.events.filter(C,m));for(const S of C){let R=S.object;for(;R;){var M;(M=R.__r3f)!=null&&M.eventCount&&v.push({...S,eventObject:R}),R=R.parent}}if("pointerId"in u&&m.internal.capturedMap.has(u.pointerId))for(let S of m.internal.capturedMap.get(u.pointerId).values())g.has(f4(S.intersection))||v.push(S.intersection);return v}function s(u,f,m,g){if(u.length){const v={stopped:!1};for(const _ of u){let b=O1(_.object);if(b||_.object.traverseAncestors(C=>{const M=O1(C);if(M)return b=M,!1}),b){const{raycaster:C,pointer:M,camera:S,internal:R}=b,D=new et(M.x,M.y,0).unproject(S),B=U=>{var P,X;return(P=(X=R.capturedMap.get(U))==null?void 0:X.has(_.eventObject))!=null?P:!1},N=U=>{const P={intersection:_,target:f.target};R.capturedMap.has(U)?R.capturedMap.get(U).set(_.eventObject,P):R.capturedMap.set(U,new Map([[_.eventObject,P]])),f.target.setPointerCapture(U)},I=U=>{const P=R.capturedMap.get(U);P&&qO(R.capturedMap,_.eventObject,P,U)};let F={};for(let U in f){let P=f[U];typeof P!="function"&&(F[U]=P)}let z={..._,...F,pointer:M,intersections:u,stopped:v.stopped,delta:m,unprojectedPoint:D,ray:C.ray,camera:S,stopPropagation(){const U="pointerId"in f&&R.capturedMap.get(f.pointerId);if((!U||U.has(_.eventObject))&&(z.stopped=v.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(P=>P.eventObject===_.eventObject))){const P=u.slice(0,u.indexOf(_));r([...P,_])}},target:{hasPointerCapture:B,setPointerCapture:N,releasePointerCapture:I},currentTarget:{hasPointerCapture:B,setPointerCapture:N,releasePointerCapture:I},nativeEvent:f};if(g(z),v.stopped===!0)break}}}return u}function r(u){const{internal:f}=i.getState();for(const m of f.hovered.values())if(!u.length||!u.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const v=m.eventObject.__r3f;if(f.hovered.delete(f4(m)),v!=null&&v.eventCount){const _=v.handlers,b={...m,intersections:u};_.onPointerOut==null||_.onPointerOut(b),_.onPointerLeave==null||_.onPointerLeave(b)}}}function a(u,f){for(let m=0;m<f.length;m++){const g=f[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return f=>{const{internal:m}=i.getState();"pointerId"in f&&m.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(f.pointerId)&&(m.capturedMap.delete(f.pointerId),r([]))})}}return function(m){const{onPointerMissed:g,internal:v}=i.getState();v.lastEvent.current=m;const _=u==="onPointerMove",b=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",M=n(m,_?e:void 0),S=b?t(m):0;u==="onPointerDown"&&(v.initialClick=[m.offsetX,m.offsetY],v.initialHits=M.map(D=>D.eventObject)),b&&!M.length&&S<=2&&(a(m,v.interaction),g&&g(m)),_&&r(M);function R(D){const B=D.eventObject,N=B.__r3f;if(!(N!=null&&N.eventCount))return;const I=N.handlers;if(_){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const F=f4(D),z=v.hovered.get(F);z?z.stopped&&D.stopPropagation():(v.hovered.set(F,D),I.onPointerOver==null||I.onPointerOver(D),I.onPointerEnter==null||I.onPointerEnter(D))}I.onPointerMove==null||I.onPointerMove(D)}else{const F=I[u];F?(!b||v.initialHits.includes(B))&&(a(m,v.interaction.filter(z=>!v.initialHits.includes(z))),F(D)):b&&v.initialHits.includes(B)&&a(m,v.interaction.filter(z=>!v.initialHits.includes(z)))}}s(M,m,S,R)}}return{handlePointer:l}}const jL=i=>!!(i!=null&&i.render),YO=lt.createContext(null),BY=(i,t)=>{const e=sY((l,u)=>{const f=new et,m=new et,g=new et;function v(S=u().camera,R=m,D=u().size){const{width:B,height:N,top:I,left:F}=D,z=B/N;R.isVector3?g.copy(R):g.set(...R);const U=S.getWorldPosition(f).distanceTo(g);if(kO(S))return{width:B/S.zoom,height:N/S.zoom,top:I,left:F,factor:1,distance:U,aspect:z};{const P=S.fov*Math.PI/180,X=2*Math.tan(P/2)*U,ot=X*(B/N);return{width:ot,height:X,top:I,left:F,factor:B/ot,distance:U,aspect:z}}}let _;const b=S=>l(R=>({performance:{...R.performance,current:S}})),C=new Pt;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(S=1)=>i(u(),S),advance:(S,R)=>t(S,R,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new r7,pointer:C,mouse:C,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=u();_&&clearTimeout(_),S.performance.current!==S.performance.min&&b(S.performance.min),_=setTimeout(()=>b(u().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:S=>l(R=>({...R,events:{...R.events,...S}})),setSize:(S,R,D=0,B=0)=>{const N=u().camera,I={width:S,height:R,top:D,left:B};l(F=>({size:I,viewport:{...F.viewport,...v(N,m,I)}}))},setDpr:S=>l(R=>{const D=QO(S);return{viewport:{...R.viewport,dpr:D,initialDpr:R.viewport.initialDpr||D}}}),setFrameloop:(S="always")=>{const R=u().clock;R.stop(),R.elapsedTime=0,S!=="never"&&(R.start(),R.elapsedTime=0),l(()=>({frameloop:S}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:lt.createRef(),active:!1,frames:0,priority:0,subscribe:(S,R,D)=>{const B=u().internal;return B.priority=B.priority+(R>0?1:0),B.subscribers.push({ref:S,priority:R,store:D}),B.subscribers=B.subscribers.sort((N,I)=>N.priority-I.priority),()=>{const N=u().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(R>0?1:0),N.subscribers=N.subscribers.filter(I=>I.ref!==S))}}}}}),n=e.getState();let s=n.size,r=n.viewport.dpr,a=n.camera;return e.subscribe(()=>{const{camera:l,size:u,viewport:f,gl:m,set:g}=e.getState();if(u.width!==s.width||u.height!==s.height||f.dpr!==r){s=u,r=f.dpr,RY(l,u),f.dpr>0&&m.setPixelRatio(f.dpr);const v=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(u.width,u.height,v)}l!==a&&(a=l,g(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),e.subscribe(l=>i(l)),e};function WO(){const i=lt.useContext(YO);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function SM(i=e=>e,t){return WO()(i,t)}function EM(i,t=0){const e=WO(),n=e.getState().internal.subscribe,s=VO(i);return Hx(()=>n(s,t,e),[t,n,e]),null}function OY(i){return lt.useMemo(()=>jO(i),[i])}const XL=new WeakMap,NY=i=>{var t;return typeof i=="function"&&(i==null||(t=i.prototype)==null?void 0:t.constructor)===i};function KO(i,t){return function(e,...n){let s;return NY(e)?(s=XL.get(e),s||(s=new e,XL.set(e,s))):s=e,i&&i(s),Promise.all(n.map(r=>new Promise((a,l)=>s.load(r,u=>{Ra(u==null?void 0:u.scene)&&Object.assign(u,jO(u.scene)),a(u)},t,u=>l(new Error(`Could not load ${r}: ${u==null?void 0:u.message}`))))))}}function zx(i,t,e,n){const s=Array.isArray(t)?t:[t],r=hY(KO(e,n),[i,...s],{equal:zi.equ});return Array.isArray(t)?r:r[0]}zx.preload=function(i,t,e){const n=Array.isArray(t)?t:[t];return fY(KO(e),[i,...n])};zx.clear=function(i,t){const e=Array.isArray(t)?t:[t];return dY([i,...e])};function IY(i){const t=cY(i);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:lt.version}),t}const JO=0,yy={},UY=/^three(?=[A-Z])/,MM=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let PY=0;const FY=i=>typeof i=="function";function ZO(i){if(FY(i)){const t=`${PY++}`;return yy[t]=i,t}else Object.assign(yy,i)}function $O(i,t){const e=MM(i),n=yy[e];if(i!=="primitive"&&!n)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function HY(i,t,e){var n;return i=MM(i)in yy?i:i.replace(UY,""),$O(i,t),i==="primitive"&&(n=t.object)!=null&&n.__r3f&&delete t.object.__r3f,iE(t.object,e,i,t)}function zY(i){if(!i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?rE(i.parent,i):Ra(i.object)&&(i.object.visible=!1),i.isHidden=!0,Ly(i)}}function tN(i){if(i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?sE(i.parent,i):Ra(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,Ly(i)}}function d7(i,t,e){const n=t.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!t.object){var s,r;const a=yy[MM(t.type)];t.object=(s=t.props.object)!=null?s:new a(...(r=t.props.args)!=null?r:[]),t.object.__r3f=t}if(vd(t.object,t.props),t.props.attach)sE(i,t);else if(Ra(t.object)&&Ra(i.object)){const a=i.object.children.indexOf(e==null?void 0:e.object);if(e&&a!==-1){const l=i.object.children.indexOf(t.object);if(l!==-1){i.object.children.splice(l,1);const u=l<a?a-1:a;i.object.children.splice(u,0,t.object)}else t.object.parent=i.object,i.object.children.splice(a,0,t.object),t.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:t.object})}else i.object.add(t.object)}for(const a of t.children)d7(t,a);Ly(t)}}function P8(i,t){t&&(t.parent=i,i.children.push(t),d7(i,t))}function qL(i,t,e){if(!t||!e)return;t.parent=i;const n=i.children.indexOf(e);n!==-1?i.children.splice(n,0,t):i.children.push(t),d7(i,t,e)}function eN(i){if(typeof i.dispose=="function"){const t=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():kL.unstable_scheduleCallback(kL.unstable_IdlePriority,t)}}function O5(i,t,e){if(!t)return;t.parent=null;const n=i.children.indexOf(t);n!==-1&&i.children.splice(n,1),t.props.attach?rE(i,t):Ra(t.object)&&Ra(i.object)&&(i.object.remove(t.object),LY(GO(t),t.object));const s=t.props.dispose!==null&&e!==!1;for(let r=t.children.length-1;r>=0;r--){const a=t.children[r];O5(t,a,s)}t.children.length=0,delete t.object.__r3f,s&&t.type!=="primitive"&&t.object.type!=="Scene"&&eN(t.object),e===void 0&&Ly(t)}function GY(i,t){for(const e of[i,i.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const n=e.ref(t);typeof n=="function"&&(e.refCleanup=n)}else e.ref&&(e.ref.current=t)}const I4=[];function kY(){for(const[e]of I4){const n=e.parent;if(n){e.props.attach?rE(n,e):Ra(e.object)&&Ra(n.object)&&n.object.remove(e.object);for(const s of e.children)s.props.attach?rE(e,s):Ra(s.object)&&Ra(e.object)&&e.object.remove(s.object)}e.isHidden&&tN(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&eN(e.object)}for(const[e,n,s]of I4){e.props=n;const r=e.parent;if(r){var i,t;const a=yy[MM(e.type)];e.object=(i=e.props.object)!=null?i:new a(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,GY(s,e.object),vd(e.object,e.props),e.props.attach?sE(r,e):Ra(e.object)&&Ra(r.object)&&r.object.add(e.object);for(const l of e.children)l.props.attach?sE(e,l):Ra(l.object)&&Ra(e.object)&&e.object.add(l.object);Ly(e)}}I4.length=0}const F8=()=>{},YL={};let d4=JO;const VY=0,QY=4,N5=IY({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:HY,removeChild:O5,appendChild:P8,appendInitialChild:P8,insertBefore:qL,appendChildToContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||P8(e,t)},removeChildFromContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||O5(e,t)},insertInContainerBefore(i,t,e){const n=i.getState().scene.__r3f;!t||!e||!n||qL(n,t,e)},getRootHostContext:()=>YL,getChildHostContext:()=>YL,commitUpdate(i,t,e,n,s){var r,a,l;$O(t,n);let u=!1;if((i.type==="primitive"&&e.object!==n.object||((r=n.args)==null?void 0:r.length)!==((a=e.args)==null?void 0:a.length)||(l=n.args)!=null&&l.some((m,g)=>{var v;return m!==((v=e.args)==null?void 0:v[g])}))&&(u=!0),u)I4.push([i,{...n},s]);else{const m=TY(i,n);Object.keys(m).length&&(Object.assign(i.props,m),vd(i.object,m))}(s.sibling===null||(s.flags&QY)===VY)&&kY()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>iE(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:zY,unhideInstance:tN,createTextInstance:F8,hideTextInstance:F8,unhideTextInstance:F8,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:lt.createContext(null),setCurrentUpdatePriority(i){d4=i},getCurrentUpdatePriority(){return d4},resolveUpdatePriority(){var i;if(d4!==JO)return d4;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return N4.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return N4.ContinuousEventPriority;default:return N4.DefaultEventPriority}},resetFormInstance(){}}),qg=new Map,N1={objects:"shallow",strict:!1};function jY(i,t){if(!t&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:e,height:n,top:s,left:r}=i.parentElement.getBoundingClientRect();return{width:e,height:n,top:s,left:r}}else if(!t&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function XY(i){const t=qg.get(i),e=t==null?void 0:t.fiber,n=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=n||BY(P5,KL),a=e||N5.createContainer(r,N4.ConcurrentRoot,null,!1,null,"",s,s,s,null);t||qg.set(i,{fiber:a,store:r});let l,u,f=!1,m=null;return{async configure(g={}){let v;m=new Promise(at=>v=at);let{gl:_,size:b,scene:C,events:M,onCreated:S,shadows:R=!1,linear:D=!1,flat:B=!1,legacy:N=!1,orthographic:I=!1,frameloop:F="always",dpr:z=[1,2],performance:U,raycaster:P,camera:X,onPointerMissed:ot}=g,it=r.getState(),ut=it.gl;if(!it.gl){const at={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},xt=typeof _=="function"?await _(at):_;jL(xt)?ut=xt:ut=new OO({...at,..._}),it.set({gl:ut})}let dt=it.raycaster;dt||it.set({raycaster:dt=new EO});const{params:j,...tt}=P||{};if(zi.equ(tt,dt,N1)||vd(dt,{...tt}),zi.equ(j,dt.params,N1)||vd(dt,{params:{...dt.params,...j}}),!it.camera||it.camera===u&&!zi.equ(u,X,N1)){u=X;const at=X==null?void 0:X.isCamera,xt=at?X:I?new wy(0,0,0,0,.1,1e3):new Rs(75,0,.1,1e3);at||(xt.position.z=5,X&&(vd(xt,X),xt.manual||("aspect"in X||"left"in X||"right"in X||"bottom"in X||"top"in X)&&(xt.manual=!0,xt.updateProjectionMatrix())),!it.camera&&!(X!=null&&X.rotation)&&xt.lookAt(0,0,0)),it.set({camera:xt}),dt.camera=xt}if(!it.scene){let at;C!=null&&C.isScene?(at=C,iE(at,r,"",{})):(at=new nA,iE(at,r,"",{}),C&&vd(at,C)),it.set({scene:at})}M&&!it.events.handlers&&it.set({events:M(r)});const nt=jY(i,b);if(zi.equ(nt,it.size,N1)||it.setSize(nt.width,nt.height,nt.top,nt.left),z&&it.viewport.dpr!==QO(z)&&it.setDpr(z),it.frameloop!==F&&it.setFrameloop(F),it.onPointerMissed||it.set({onPointerMissed:ot}),U&&!zi.equ(U,it.performance,N1)&&it.set(at=>({performance:{...at.performance,...U}})),!it.xr){var _t;const at=(ct,wt)=>{const Bt=r.getState();Bt.frameloop!=="never"&&KL(ct,!0,Bt,wt)},xt=()=>{const ct=r.getState();ct.gl.xr.enabled=ct.gl.xr.isPresenting,ct.gl.xr.setAnimationLoop(ct.gl.xr.isPresenting?at:null),ct.gl.xr.isPresenting||P5(ct)},Et={connect(){const ct=r.getState().gl;ct.xr.addEventListener("sessionstart",xt),ct.xr.addEventListener("sessionend",xt)},disconnect(){const ct=r.getState().gl;ct.xr.removeEventListener("sessionstart",xt),ct.xr.removeEventListener("sessionend",xt)}};typeof((_t=ut.xr)==null?void 0:_t.addEventListener)=="function"&&Et.connect(),it.set({xr:Et})}if(ut.shadowMap){const at=ut.shadowMap.enabled,xt=ut.shadowMap.type;if(ut.shadowMap.enabled=!!R,zi.boo(R))ut.shadowMap.type=B_;else if(zi.str(R)){var J;const Et={basic:kD,percentage:QE,soft:B_,variance:cc};ut.shadowMap.type=(J=Et[R])!=null?J:B_}else zi.obj(R)&&Object.assign(ut.shadowMap,R);(at!==ut.shadowMap.enabled||xt!==ut.shadowMap.type)&&(ut.shadowMap.needsUpdate=!0)}return Fn.enabled=!N,f||(ut.outputColorSpace=D?zu:Kn,ut.toneMapping=B?Lc:bw),it.legacy!==N&&it.set(()=>({legacy:N})),it.linear!==D&&it.set(()=>({linear:D})),it.flat!==B&&it.set(()=>({flat:B})),_&&!zi.fun(_)&&!jL(_)&&!zi.equ(_,ut,N1)&&vd(ut,_),l=S,f=!0,v(),this},render(g){return!f&&!m&&this.configure(),m.then(()=>{N5.updateContainer(k.jsx(qY,{store:r,children:g,onCreated:l,rootElement:i}),a,null,()=>{})}),r},unmount(){nN(i)}}}function qY({store:i,children:t,onCreated:e,rootElement:n}){return Hx(()=>{const s=i.getState();s.set(r=>({internal:{...r.internal,active:!0}})),e&&e(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),k.jsx(YO.Provider,{value:i,children:t})}function nN(i,t){const e=qg.get(i),n=e==null?void 0:e.fiber;if(n){const s=e==null?void 0:e.store.getState();s&&(s.internal.active=!1),N5.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var r,a,l,u;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(a=r.renderLists)==null||a.dispose==null||a.dispose(),(l=s.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=s.gl)!=null&&u.xr&&s.xr.disconnect(),SY(s.scene),qg.delete(i)}catch{}},500)})}}const YY=new Set,WY=new Set,KY=new Set;function H8(i,t){if(i.size)for(const{callback:e}of i.values())e(t)}function G_(i,t){switch(i){case"before":return H8(YY,t);case"after":return H8(WY,t);case"tail":return H8(KY,t)}}let z8,G8;function I5(i,t,e){let n=t.clock.getDelta();t.frameloop==="never"&&typeof i=="number"&&(n=i-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=i),z8=t.internal.subscribers;for(let s=0;s<z8.length;s++)G8=z8[s],G8.ref.current(G8.store.getState(),n,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let aE=!1,U5=!1,k8,WL,I1;function iN(i){WL=requestAnimationFrame(iN),aE=!0,k8=0,G_("before",i),U5=!0;for(const e of qg.values()){var t;I1=e.store.getState(),I1.internal.active&&(I1.frameloop==="always"||I1.internal.frames>0)&&!((t=I1.gl.xr)!=null&&t.isPresenting)&&(k8+=I5(i,I1))}if(U5=!1,G_("after",i),k8===0)return G_("tail",i),aE=!1,cancelAnimationFrame(WL)}function P5(i,t=1){var e;if(!i)return qg.forEach(n=>P5(n.store.getState(),t));(e=i.gl.xr)!=null&&e.isPresenting||!i.internal.active||i.frameloop==="never"||(t>1?i.internal.frames=Math.min(60,i.internal.frames+t):U5?i.internal.frames=2:i.internal.frames=1,aE||(aE=!0,requestAnimationFrame(iN)))}function KL(i,t=!0,e,n){if(t&&G_("before",i),e)I5(i,e,n);else for(const s of qg.values())I5(i,s.store.getState());t&&G_("after",i)}const V8={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function JY(i){const{handlePointer:t}=DY(i);return{priority:1,enabled:!0,compute(e,n,s){n.pointer.set(e.offsetX/n.size.width*2-1,-(e.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(V8).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var e;const{events:n,internal:s}=i.getState();(e=s.lastEvent)!=null&&e.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:e=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(r=>({events:{...r.events,connected:e}})),s.handlers)for(const r in s.handlers){const a=s.handlers[r],[l,u]=V8[r];e.addEventListener(l,a,{passive:u})}},disconnect:()=>{const{set:e,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const r=n.handlers[s],[a]=V8[s];n.connected.removeEventListener(a,r)}e(s=>({events:{...s.events,connected:void 0}}))}}}}function JL(i,t){let e;return(...n)=>{window.clearTimeout(e),e=window.setTimeout(()=>i(...n),t)}}function ZY({debounce:i,scroll:t,polyfill:e,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,a]=lt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=lt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),u=i?typeof i=="number"?i:i.scroll:null,f=i?typeof i=="number"?i:i.resize:null,m=lt.useRef(!1);lt.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,v,_]=lt.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:R,top:D,width:B,height:N,bottom:I,right:F,x:z,y:U}=l.current.element.getBoundingClientRect(),P={left:R,top:D,width:B,height:N,bottom:I,right:F,x:z,y:U};l.current.element instanceof HTMLElement&&n&&(P.height=l.current.element.offsetHeight,P.width=l.current.element.offsetWidth),Object.freeze(P),m.current&&!nW(l.current.lastBounds,P)&&a(l.current.lastBounds=P)};return[S,f?JL(S,f):S,u?JL(S,u):S]},[a,n,u,f]);function b(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",_,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function C(){l.current.element&&(l.current.resizeObserver=new s(_),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",_,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const M=S=>{!S||S===l.current.element||(b(),l.current.element=S,l.current.scrollContainers=sN(S),C())};return tW(_,!!t),$Y(v),lt.useEffect(()=>{b(),C()},[t,_,v]),lt.useEffect(()=>b,[]),[M,r,g]}function $Y(i){lt.useEffect(()=>{const t=i;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[i])}function tW(i,t){lt.useEffect(()=>{if(t){const e=i;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[i,t])}function sN(i){const t=[];if(!i||i===document.body)return t;const{overflow:e,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[e,n,s].some(r=>r==="auto"||r==="scroll")&&t.push(i),[...t,...sN(i.parentElement)]}const eW=["x","y","top","bottom","left","right","width","height"],nW=(i,t)=>eW.every(e=>i[e]===t[e]);function iW({ref:i,children:t,fallback:e,resize:n,style:s,gl:r,events:a=JY,eventSource:l,eventPrefix:u,shadows:f,linear:m,flat:g,legacy:v,orthographic:_,frameloop:b,dpr:C,performance:M,raycaster:S,camera:R,scene:D,onPointerMissed:B,onCreated:N,...I}){lt.useMemo(()=>ZO(Xq),[]);const F=AY(),[z,U]=ZY({scroll:!0,debounce:{scroll:50,resize:0},...n}),P=lt.useRef(null),X=lt.useRef(null);lt.useImperativeHandle(i,()=>P.current);const ot=VO(B),[it,ut]=lt.useState(!1),[dt,j]=lt.useState(!1);if(it)throw it;if(dt)throw dt;const tt=lt.useRef(null);Hx(()=>{const _t=P.current;if(U.width>0&&U.height>0&&_t){tt.current||(tt.current=XY(_t));async function J(){await tt.current.configure({gl:r,scene:D,events:a,shadows:f,linear:m,flat:g,legacy:v,orthographic:_,frameloop:b,dpr:C,performance:M,raycaster:S,camera:R,size:U,onPointerMissed:(...at)=>ot.current==null?void 0:ot.current(...at),onCreated:at=>{at.events.connect==null||at.events.connect(l?yY(l)?l.current:l:X.current),u&&at.setEvents({compute:(xt,Et)=>{const ct=xt[u+"X"],wt=xt[u+"Y"];Et.pointer.set(ct/Et.size.width*2-1,-(wt/Et.size.height)*2+1),Et.raycaster.setFromCamera(Et.pointer,Et.camera)}}),N==null||N(at)}}),tt.current.render(k.jsx(F,{children:k.jsx(bY,{set:j,children:k.jsx(lt.Suspense,{fallback:k.jsx(xY,{set:ut}),children:t??null})})}))}J()}}),lt.useEffect(()=>{const _t=P.current;if(_t)return()=>nN(_t)},[]);const nt=l?"none":"auto";return k.jsx("div",{ref:X,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:nt,...s},...I,children:k.jsx("div",{ref:z,style:{width:"100%",height:"100%"},children:k.jsx("canvas",{ref:P,style:{display:"block"},children:e})})})}function sW(i){return k.jsx(HO,{children:k.jsx(iW,{...i})})}const rW=i=>i;function aW(i,t=rW){const e=Oa.useSyncExternalStore(i.subscribe,()=>t(i.getState()),()=>t(i.getInitialState()));return Oa.useDebugValue(e),e}const ZL=i=>{const t=NO(i),e=n=>aW(t,n);return Object.assign(e,t),e},oW=i=>i?ZL(i):ZL;let s_=0;const lW=oW(i=>(W1.onStart=(t,e,n)=>{i({active:!0,item:t,loaded:e,total:n,progress:(e-s_)/(n-s_)*100})},W1.onLoad=()=>{i({active:!1})},W1.onError=t=>i(e=>({errors:[...e.errors,t]})),W1.onProgress=(t,e,n)=>{e===n&&(s_=n),i({active:!0,item:t,loaded:e,total:n,progress:(e-s_)/(n-s_)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),cW=parseInt(s0.replace(/\D+/g,""));function $L(i,t){if(t===_B)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===Z3||t===Dw){let e=i.getIndex();if(e===null){const a=[],l=i.getAttribute("position");if(l!==void 0){for(let u=0;u<l.count;u++)a.push(u);i.setIndex(a),e=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=e.count-2,s=[];if(e)if(t===Z3)for(let a=1;a<=n;a++)s.push(e.getX(0)),s.push(e.getX(a)),s.push(e.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(s.push(e.getX(a)),s.push(e.getX(a+1)),s.push(e.getX(a+2))):(s.push(e.getX(a+2)),s.push(e.getX(a+1)),s.push(e.getX(a)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=i.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}function rN(i,t,e={}){const n=new et,s=new Or,r=new et,a=new Ne,l=new Ne,u=new Ne;e.preserveMatrix=e.preserveMatrix!==void 0?e.preserveMatrix:!0,e.preservePosition=e.preservePosition!==void 0?e.preservePosition:!0,e.preserveHipPosition=e.preserveHipPosition!==void 0?e.preserveHipPosition:!1,e.useTargetMatrix=e.useTargetMatrix!==void 0?e.useTargetMatrix:!1,e.hip=e.hip!==void 0?e.hip:"hip",e.names=e.names||{};const f=t.isObject3D?t.skeleton.bones:oE(t),m=i.isObject3D?i.skeleton.bones:oE(i);let g,v,_,b,C;if(i.isObject3D?i.skeleton.pose():(e.useTargetMatrix=!0,e.preserveMatrix=!1),e.preservePosition){C=[];for(let M=0;M<m.length;M++)C.push(m[M].position.clone())}if(e.preserveMatrix){i.updateMatrixWorld(),i.matrixWorld.identity();for(let M=0;M<i.children.length;++M)i.children[M].updateMatrixWorld(!0)}if(e.offsets){g=[];for(let M=0;M<m.length;++M)v=m[M],_=e.names[v.name]||v.name,e.offsets[_]&&(v.matrix.multiply(e.offsets[_]),v.matrix.decompose(v.position,v.quaternion,v.scale),v.updateMatrixWorld()),g.push(v.matrixWorld.clone())}for(let M=0;M<m.length;++M){if(v=m[M],_=e.names[v.name]||v.name,b=aN(_,f),u.copy(v.matrixWorld),b){if(b.updateMatrixWorld(),e.useTargetMatrix?l.copy(b.matrixWorld):(l.copy(i.matrixWorld).invert(),l.multiply(b.matrixWorld)),r.setFromMatrixScale(l),l.scale(r.set(1/r.x,1/r.y,1/r.z)),u.makeRotationFromQuaternion(s.setFromRotationMatrix(l)),i.isObject3D){const S=m.indexOf(v),R=g?g[S]:a.copy(i.skeleton.boneInverses[S]).invert();u.multiply(R)}u.copyPosition(l)}v.parent&&v.parent.isBone?(v.matrix.copy(v.parent.matrixWorld).invert(),v.matrix.multiply(u)):v.matrix.copy(u),e.preserveHipPosition&&_===e.hip&&v.matrix.setPosition(n.set(0,v.position.y,0)),v.matrix.decompose(v.position,v.quaternion,v.scale),v.updateMatrixWorld()}if(e.preservePosition)for(let M=0;M<m.length;++M)v=m[M],_=e.names[v.name]||v.name,_!==e.hip&&v.position.copy(C[M]);e.preserveMatrix&&i.updateMatrixWorld(!0)}function uW(i,t,e,n={}){n.useFirstFramePosition=n.useFirstFramePosition!==void 0?n.useFirstFramePosition:!1,n.fps=n.fps!==void 0?n.fps:30,n.names=n.names||[],t.isObject3D||(t=fW(t));const s=Math.round(e.duration*(n.fps/1e3)*1e3),r=1/n.fps,a=[],l=new l7(t),u=oE(i.skeleton),f=[];let m,g,v,_,b;l.clipAction(e).play(),l.update(0),t.updateMatrixWorld();for(let C=0;C<s;++C){const M=C*r;rN(i,t,n);for(let S=0;S<u.length;++S)b=n.names[u[S].name]||u[S].name,v=aN(b,t.skeleton),v&&(g=u[S],_=f[S]=f[S]||{bone:g},n.hip===b&&(_.pos||(_.pos={times:new Float32Array(s),values:new Float32Array(s*3)}),n.useFirstFramePosition&&(C===0&&(m=g.position.clone()),g.position.sub(m)),_.pos.times[C]=M,g.position.toArray(_.pos.values,C*3)),_.quat||(_.quat={times:new Float32Array(s),values:new Float32Array(s*4)}),_.quat.times[C]=M,g.quaternion.toArray(_.quat.values,C*4));l.update(r),t.updateMatrixWorld()}for(let C=0;C<f.length;++C)_=f[C],_&&(_.pos&&a.push(new ip(".bones["+_.bone.name+"].position",_.pos.times,_.pos.values)),a.push(new np(".bones["+_.bone.name+"].quaternion",_.quat.times,_.quat.values)));return l.uncacheAction(e),new Xg(e.name,-1,a)}function hW(i){const t=new Map,e=new Map,n=i.clone();return oN(i,n,function(s,r){t.set(r,s),e.set(s,r)}),n.traverse(function(s){if(!s.isSkinnedMesh)return;const r=s,a=t.get(s),l=a.skeleton.bones;r.skeleton=a.skeleton.clone(),r.bindMatrix.copy(a.bindMatrix),r.skeleton.bones=l.map(function(u){return e.get(u)}),r.bind(r.skeleton,r.bindMatrix)}),n}function aN(i,t){for(let e=0,n=oE(t);e<n.length;e++)if(i===n[e].name)return n[e]}function oE(i){return Array.isArray(i)?i:i.bones}function fW(i){const t=new MO(i.bones[0]);return t.skeleton=i,t}function oN(i,t,e){e(i,t);for(let n=0;n<i.children.length;n++)oN(i.children[n],t.children[n],e)}const dW={retarget:rN,retargetClip:uW,clone:hW};function lE(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let t="";for(let e=0,n=i.length;e<n;e++)t+=String.fromCharCode(i[e]);try{return decodeURIComponent(escape(t))}catch{return t}}const Fm="srgb",$h="srgb-linear",t9=3001,pW=3e3;class p7 extends la{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new _W(e)}),this.register(function(e){return new AW(e)}),this.register(function(e){return new RW(e)}),this.register(function(e){return new LW(e)}),this.register(function(e){return new DW(e)}),this.register(function(e){return new bW(e)}),this.register(function(e){return new SW(e)}),this.register(function(e){return new EW(e)}),this.register(function(e){return new MW(e)}),this.register(function(e){return new yW(e)}),this.register(function(e){return new TW(e)}),this.register(function(e){return new xW(e)}),this.register(function(e){return new wW(e)}),this.register(function(e){return new CW(e)}),this.register(function(e){return new gW(e)}),this.register(function(e){return new BW(e)}),this.register(function(e){return new OW(e)})}load(t,e,n,s){const r=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const f=Wd.extractUrlBase(t);a=Wd.resolveURL(f,this.path)}else a=Wd.extractUrlBase(t);this.manager.itemStart(t);const l=function(f){s?s(f):console.error(f),r.manager.itemError(t),r.manager.itemEnd(t)},u=new jo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(f){try{r.parse(f,a,function(m){e(m),r.manager.itemEnd(t)},l)}catch(m){l(m)}},n,l)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,s){let r;const a={},l={};if(typeof t=="string")r=JSON.parse(t);else if(t instanceof ArrayBuffer)if(lE(new Uint8Array(t.slice(0,4)))===lN){try{a[Rn.KHR_BINARY_GLTF]=new NW(t)}catch(m){s&&s(m);return}r=JSON.parse(a[Rn.KHR_BINARY_GLTF].content)}else r=JSON.parse(lE(new Uint8Array(t)));else r=t;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new qW(r,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const m=this.pluginCallbacks[f](u);m.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[m.name]=m,a[m.name]=!0}if(r.extensionsUsed)for(let f=0;f<r.extensionsUsed.length;++f){const m=r.extensionsUsed[f],g=r.extensionsRequired||[];switch(m){case Rn.KHR_MATERIALS_UNLIT:a[m]=new vW;break;case Rn.KHR_DRACO_MESH_COMPRESSION:a[m]=new IW(r,this.dracoLoader);break;case Rn.KHR_TEXTURE_TRANSFORM:a[m]=new UW;break;case Rn.KHR_MESH_QUANTIZATION:a[m]=new PW;break;default:g.indexOf(m)>=0&&l[m]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+m+'".')}}u.setExtensions(a),u.setPlugins(l),u.parse(n,s)}parseAsync(t,e){const n=this;return new Promise(function(s,r){n.parse(t,e,s,r)})}}function mW(){let i={};return{get:function(t){return i[t]},add:function(t,e){i[t]=e},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const Rn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class gW{constructor(t){this.parser=t,this.name=Rn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,s=e.length;n<s;n++){const r=e[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let s=e.cache.get(n);if(s)return s;const r=e.json,u=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let f;const m=new oe(16777215);u.color!==void 0&&m.setRGB(u.color[0],u.color[1],u.color[2],$h);const g=u.range!==void 0?u.range:0;switch(u.type){case"directional":f=new i7(m),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new n7(m),f.distance=g;break;case"spot":f=new e7(m),f.distance=g,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,f.angle=u.spot.outerConeAngle,f.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return f.position.set(0,0,0),f.decay=2,xh(f,u),u.intensity!==void 0&&(f.intensity=u.intensity),f.name=e.createUniqueName(u.name||"light_"+t),s=Promise.resolve(f),e.cache.add(n,s),s}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,r=n.json.nodes[t],l=(r.extensions&&r.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return n._getNodeRef(e.cache,l,u)})}}class vW{constructor(){this.name=Rn.KHR_MATERIALS_UNLIT}getMaterialType(){return Go}extendParams(t,e,n){const s=[];t.color=new oe(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const a=r.baseColorFactor;t.color.setRGB(a[0],a[1],a[2],$h),t.opacity=a[3]}r.baseColorTexture!==void 0&&s.push(n.assignTexture(t,"map",r.baseColorTexture,Fm))}return Promise.all(s)}}class yW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(e.emissiveIntensity=r),Promise.resolve()}}class _W{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];if(a.clearcoatFactor!==void 0&&(e.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&r.push(n.assignTexture(e,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(e,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const l=a.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Pt(l,l)}return Promise.all(r)}}class AW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_DISPERSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return e.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class xW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.iridescenceFactor!==void 0&&(e.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&r.push(n.assignTexture(e,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(e.iridescenceIOR=a.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&r.push(n.assignTexture(e,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(r)}}class bW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new oe(0,0,0),e.sheenRoughness=0,e.sheen=1;const a=s.extensions[this.name];if(a.sheenColorFactor!==void 0){const l=a.sheenColorFactor;e.sheenColor.setRGB(l[0],l[1],l[2],$h)}return a.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&r.push(n.assignTexture(e,"sheenColorMap",a.sheenColorTexture,Fm)),a.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(e,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(r)}}class SW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.transmissionFactor!==void 0&&(e.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&r.push(n.assignTexture(e,"transmissionMap",a.transmissionTexture)),Promise.all(r)}}class EW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];e.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&r.push(n.assignTexture(e,"thicknessMap",a.thicknessTexture)),e.attenuationDistance=a.attenuationDistance||1/0;const l=a.attenuationColor||[1,1,1];return e.attenuationColor=new oe().setRGB(l[0],l[1],l[2],$h),Promise.all(r)}}class MW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return e.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class TW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];e.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&r.push(n.assignTexture(e,"specularIntensityMap",a.specularTexture));const l=a.specularColorFactor||[1,1,1];return e.specularColor=new oe().setRGB(l[0],l[1],l[2],$h),a.specularColorTexture!==void 0&&r.push(n.assignTexture(e,"specularColorMap",a.specularColorTexture,Fm)),Promise.all(r)}}class CW{constructor(t){this.parser=t,this.name=Rn.EXT_MATERIALS_BUMP}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return e.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&r.push(n.assignTexture(e,"bumpMap",a.bumpTexture)),Promise.all(r)}}class wW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.anisotropyStrength!==void 0&&(e.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(e.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&r.push(n.assignTexture(e,"anisotropyMap",a.anisotropyTexture)),Promise.all(r)}}class RW{constructor(t){this.parser=t,this.name=Rn.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,s=n.textures[t];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],a=e.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r.source,a)}}class LW{constructor(t){this.parser=t,this.name=Rn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,s=n.json,r=s.textures[t];if(!r.extensions||!r.extensions[e])return null;const a=r.extensions[e],l=s.images[a.source];let u=n.textureLoader;if(l.uri){const f=n.options.manager.getHandler(l.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(t,a.source,u);if(s.extensionsRequired&&s.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class DW{constructor(t){this.parser=t,this.name=Rn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,s=n.json,r=s.textures[t];if(!r.extensions||!r.extensions[e])return null;const a=r.extensions[e],l=s.images[a.source];let u=n.textureLoader;if(l.uri){const f=n.options.manager.getHandler(l.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(t,a.source,u);if(s.extensionsRequired&&s.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class BW{constructor(t){this.name=Rn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(l){const u=s.byteOffset||0,f=s.byteLength||0,m=s.count,g=s.byteStride,v=new Uint8Array(l,u,f);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(m,g,v,s.mode,s.filter).then(function(_){return _.buffer}):a.ready.then(function(){const _=new ArrayBuffer(m*g);return a.decodeGltfBuffer(new Uint8Array(_),m,g,v,s.mode,s.filter),_})})}else return null}}class OW{constructor(t){this.name=Rn.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const s=e.meshes[n.mesh];for(const f of s.primitives)if(f.mode!==_l.TRIANGLES&&f.mode!==_l.TRIANGLE_STRIP&&f.mode!==_l.TRIANGLE_FAN&&f.mode!==void 0)return null;const a=n.extensions[this.name].attributes,l=[],u={};for(const f in a)l.push(this.parser.getDependency("accessor",a[f]).then(m=>(u[f]=m,u[f])));return l.length<1?null:(l.push(this.parser.createNodeMesh(t)),Promise.all(l).then(f=>{const m=f.pop(),g=m.isGroup?m.children:[m],v=f[0].count,_=[];for(const b of g){const C=new Ne,M=new et,S=new Or,R=new et(1,1,1),D=new Fw(b.geometry,b.material,v);for(let B=0;B<v;B++)u.TRANSLATION&&M.fromBufferAttribute(u.TRANSLATION,B),u.ROTATION&&S.fromBufferAttribute(u.ROTATION,B),u.SCALE&&R.fromBufferAttribute(u.SCALE,B),D.setMatrixAt(B,C.compose(M,S,R));for(const B in u)if(B==="_COLOR_0"){const N=u[B];D.instanceColor=new Vg(N.array,N.itemSize,N.normalized)}else B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&b.geometry.setAttribute(B,u[B]);Ln.prototype.copy.call(D,b),this.parser.assignFinalMaterial(D),_.push(D)}return m.isGroup?(m.clear(),m.add(..._),m):_[0]}))}}const lN="glTF",r_=12,e9={JSON:1313821514,BIN:5130562};class NW{constructor(t){this.name=Rn.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,r_);if(this.header={magic:lE(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==lN)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-r_,s=new DataView(t,r_);let r=0;for(;r<n;){const a=s.getUint32(r,!0);r+=4;const l=s.getUint32(r,!0);if(r+=4,l===e9.JSON){const u=new Uint8Array(t,r_+r,a);this.content=lE(u)}else if(l===e9.BIN){const u=r_+r;this.body=t.slice(u,u+a)}r+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class IW{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Rn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,s=this.dracoLoader,r=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,l={},u={},f={};for(const m in a){const g=F5[m]||m.toLowerCase();l[g]=a[m]}for(const m in t.attributes){const g=F5[m]||m.toLowerCase();if(a[m]!==void 0){const v=n.accessors[t.attributes[m]],_=tv[v.componentType];f[g]=_.name,u[g]=v.normalized===!0}}return e.getDependency("bufferView",r).then(function(m){return new Promise(function(g,v){s.decodeDracoFile(m,function(_){for(const b in _.attributes){const C=_.attributes[b],M=u[b];M!==void 0&&(C.normalized=M)}g(_)},l,f,$h,v)})})}}class UW{constructor(){this.name=Rn.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class PW{constructor(){this.name=Rn.KHR_MESH_QUANTIZATION}}class cN extends Cy{constructor(t,e,n,s){super(t,e,n,s)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=t*s*3+s;for(let a=0;a!==s;a++)e[a]=n[r+a];return e}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=l*2,f=l*3,m=s-e,g=(n-e)/m,v=g*g,_=v*g,b=t*f,C=b-f,M=-2*_+3*v,S=_-v,R=1-M,D=S-v+g;for(let B=0;B!==l;B++){const N=a[C+B+l],I=a[C+B+u]*m,F=a[b+B+l],z=a[b+B]*m;r[B]=R*N+D*I+M*F+S*z}return r}}const FW=new Or;class HW extends cN{interpolate_(t,e,n,s){const r=super.interpolate_(t,e,n,s);return FW.fromArray(r).normalize().toArray(r),r}}const _l={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},tv={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},n9={9728:os,9729:Ni,9984:XE,9985:Z1,9986:Om,9987:Cl},i9={33071:zo,33648:cy,10497:tp},Q8={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},F5={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...cW>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ud={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},zW={CUBICSPLINE:void 0,LINEAR:dy,STEP:fy},j8={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function GW(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Fx({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Dc})),i.DefaultMaterial}function Am(i,t,e){for(const n in e.extensions)i[n]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function xh(i,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(i.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function kW(i,t,e){let n=!1,s=!1,r=!1;for(let f=0,m=t.length;f<m;f++){const g=t[f];if(g.POSITION!==void 0&&(n=!0),g.NORMAL!==void 0&&(s=!0),g.COLOR_0!==void 0&&(r=!0),n&&s&&r)break}if(!n&&!s&&!r)return Promise.resolve(i);const a=[],l=[],u=[];for(let f=0,m=t.length;f<m;f++){const g=t[f];if(n){const v=g.POSITION!==void 0?e.getDependency("accessor",g.POSITION):i.attributes.position;a.push(v)}if(s){const v=g.NORMAL!==void 0?e.getDependency("accessor",g.NORMAL):i.attributes.normal;l.push(v)}if(r){const v=g.COLOR_0!==void 0?e.getDependency("accessor",g.COLOR_0):i.attributes.color;u.push(v)}}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(f){const m=f[0],g=f[1],v=f[2];return n&&(i.morphAttributes.position=m),s&&(i.morphAttributes.normal=g),r&&(i.morphAttributes.color=v),i.morphTargetsRelative=!0,i})}function VW(i,t){if(i.updateMorphTargets(),t.weights!==void 0)for(let e=0,n=t.weights.length;e<n;e++)i.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(i.morphTargetInfluences.length===e.length){i.morphTargetDictionary={};for(let n=0,s=e.length;n<s;n++)i.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function QW(i){let t;const e=i.extensions&&i.extensions[Rn.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+X8(e.attributes):t=i.indices+":"+X8(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,s=i.targets.length;n<s;n++)t+=":"+X8(i.targets[n]);return t}function X8(i){let t="";const e=Object.keys(i).sort();for(let n=0,s=e.length;n<s;n++)t+=e[n]+":"+i[e[n]]+";";return t}function H5(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function jW(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const XW=new Ne;class qW{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new mW,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||s&&r<98?this.textureLoader=new hO(this.options.manager):this.textureLoader=new _O(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new jo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const l={scene:a[0][s.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:s.asset,parser:n,userData:{}};return Am(r,l,s),xh(l,s),Promise.all(n._invokeAll(function(u){return u.afterRoot&&u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();t(l)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let s=0,r=e.length;s<r;s++){const a=e[s].joints;for(let l=0,u=a.length;l<u;l++)t[a[l]].isBone=!0}for(let s=0,r=t.length;s<r;s++){const a=t[s];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const s=n.clone(),r=(a,l)=>{const u=this.associations.get(a);u!=null&&this.associations.set(l,u);for(const[f,m]of a.children.entries())r(m,l.children[f])};return r(n,s),s.name+="_instance_"+t.uses[e]++,s}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const s=t(e[n]);if(s)return s}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let s=0;s<e.length;s++){const r=t(e[s]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let s=this.cache.get(n);if(!s){switch(t){case"scene":s=this.loadScene(e);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(e)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(e)});break;case"accessor":s=this.loadAccessor(e);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(e)});break;case"buffer":s=this.loadBuffer(e);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(e)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(e)});break;case"skin":s=this.loadSkin(e);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(e)});break;case"camera":s=this.loadCamera(e);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(t,e)}),!s)throw new Error("Unknown type: "+t);break}this.cache.add(n,s)}return s}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,s=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(s.map(function(r,a){return n.getDependency(t,a)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[Rn.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,a){n.load(Wd.resolveURL(e.uri,s.path),r,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const s=e.byteLength||0,r=e.byteOffset||0;return n.slice(r,r+s)})}loadAccessor(t){const e=this,n=this.json,s=this.json.accessors[t];if(s.bufferView===void 0&&s.sparse===void 0){const a=Q8[s.type],l=tv[s.componentType],u=s.normalized===!0,f=new l(s.count*a);return Promise.resolve(new zn(f,a,u))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(a){const l=a[0],u=Q8[s.type],f=tv[s.componentType],m=f.BYTES_PER_ELEMENT,g=m*u,v=s.byteOffset||0,_=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,b=s.normalized===!0;let C,M;if(_&&_!==g){const S=Math.floor(v/_),R="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+S+":"+s.count;let D=e.cache.get(R);D||(C=new f(l,S*_,s.count*_/m),D=new Dx(C,_/m),e.cache.add(R,D)),M=new ep(D,u,v%_/m,b)}else l===null?C=new f(s.count*u):C=new f(l,v,s.count*u),M=new zn(C,u,b);if(s.sparse!==void 0){const S=Q8.SCALAR,R=tv[s.sparse.indices.componentType],D=s.sparse.indices.byteOffset||0,B=s.sparse.values.byteOffset||0,N=new R(a[1],D,s.sparse.count*S),I=new f(a[2],B,s.sparse.count*u);l!==null&&(M=new zn(M.array.slice(),M.itemSize,M.normalized));for(let F=0,z=N.length;F<z;F++){const U=N[F];if(M.setX(U,I[F*u]),u>=2&&M.setY(U,I[F*u+1]),u>=3&&M.setZ(U,I[F*u+2]),u>=4&&M.setW(U,I[F*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return M})}loadTexture(t){const e=this.json,n=this.options,r=e.textures[t].source,a=e.images[r];let l=this.textureLoader;if(a.uri){const u=n.manager.getHandler(a.uri);u!==null&&(l=u)}return this.loadTextureImage(t,r,l)}loadTextureImage(t,e,n){const s=this,r=this.json,a=r.textures[t],l=r.images[e],u=(l.uri||l.bufferView)+":"+a.sampler;if(this.textureCache[u])return this.textureCache[u];const f=this.loadImageSource(e,n).then(function(m){m.flipY=!1,m.name=a.name||l.name||"",m.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(m.name=l.uri);const v=(r.samplers||{})[a.sampler]||{};return m.magFilter=n9[v.magFilter]||Ni,m.minFilter=n9[v.minFilter]||Cl,m.wrapS=i9[v.wrapS]||tp,m.wrapT=i9[v.wrapT]||tp,s.associations.set(m,{textures:t}),m}).catch(function(){return null});return this.textureCache[u]=f,f}loadImageSource(t,e){const n=this,s=this.json,r=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(g=>g.clone());const a=s.images[t],l=self.URL||self.webkitURL;let u=a.uri||"",f=!1;if(a.bufferView!==void 0)u=n.getDependency("bufferView",a.bufferView).then(function(g){f=!0;const v=new Blob([g],{type:a.mimeType});return u=l.createObjectURL(v),u});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const m=Promise.resolve(u).then(function(g){return new Promise(function(v,_){let b=v;e.isImageBitmapLoader===!0&&(b=function(C){const M=new wi(C);M.needsUpdate=!0,v(M)}),e.load(Wd.resolveURL(g,r.path),b,void 0,_)})}).then(function(g){return f===!0&&l.revokeObjectURL(u),xh(g,a),g.userData.mimeType=a.mimeType||jW(a.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),g});return this.sourceCache[t]=m,m}assignTexture(t,e,n,s){const r=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),r.extensions[Rn.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[Rn.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=r.associations.get(a);a=r.extensions[Rn.KHR_TEXTURE_TRANSFORM].extendTexture(a,l),r.associations.set(a,u)}}return s!==void 0&&(typeof s=="number"&&(s=s===t9?Fm:$h),"colorSpace"in a?a.colorSpace=s:a.encoding=s===Fm?t9:pW),t[e]=a,a})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const s=e.attributes.tangent===void 0,r=e.attributes.color!==void 0,a=e.attributes.normal===void 0;if(t.isPoints){const l="PointsMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new aM,gs.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(l,u)),n=u}else if(t.isLine){const l="LineBasicMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new oa,gs.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,this.cache.add(l,u)),n=u}if(s||r||a){let l="ClonedMaterial:"+n.uuid+":";s&&(l+="derivative-tangents:"),r&&(l+="vertex-colors:"),a&&(l+="flat-shading:");let u=this.cache.get(l);u||(u=n.clone(),r&&(u.vertexColors=!0),a&&(u.flatShading=!0),s&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(n))),n=u}t.material=n}getMaterialType(){return Fx}loadMaterial(t){const e=this,n=this.json,s=this.extensions,r=n.materials[t];let a;const l={},u=r.extensions||{},f=[];if(u[Rn.KHR_MATERIALS_UNLIT]){const g=s[Rn.KHR_MATERIALS_UNLIT];a=g.getMaterialType(),f.push(g.extendParams(l,r,e))}else{const g=r.pbrMetallicRoughness||{};if(l.color=new oe(1,1,1),l.opacity=1,Array.isArray(g.baseColorFactor)){const v=g.baseColorFactor;l.color.setRGB(v[0],v[1],v[2],$h),l.opacity=v[3]}g.baseColorTexture!==void 0&&f.push(e.assignTexture(l,"map",g.baseColorTexture,Fm)),l.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,l.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(f.push(e.assignTexture(l,"metalnessMap",g.metallicRoughnessTexture)),f.push(e.assignTexture(l,"roughnessMap",g.metallicRoughnessTexture))),a=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(t)}),f.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(t,l)})))}r.doubleSided===!0&&(l.side=Da);const m=r.alphaMode||j8.OPAQUE;if(m===j8.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,m===j8.MASK&&(l.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&a!==Go&&(f.push(e.assignTexture(l,"normalMap",r.normalTexture)),l.normalScale=new Pt(1,1),r.normalTexture.scale!==void 0)){const g=r.normalTexture.scale;l.normalScale.set(g,g)}if(r.occlusionTexture!==void 0&&a!==Go&&(f.push(e.assignTexture(l,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&a!==Go){const g=r.emissiveFactor;l.emissive=new oe().setRGB(g[0],g[1],g[2],$h)}return r.emissiveTexture!==void 0&&a!==Go&&f.push(e.assignTexture(l,"emissiveMap",r.emissiveTexture,Fm)),Promise.all(f).then(function(){const g=new a(l);return r.name&&(g.name=r.name),xh(g,r),e.associations.set(g,{materials:t}),r.extensions&&Am(s,g,r),g})}createUniqueName(t){const e=Qn.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,n=this.extensions,s=this.primitiveCache;function r(l){return n[Rn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,e).then(function(u){return s9(u,l,e)})}const a=[];for(let l=0,u=t.length;l<u;l++){const f=t[l],m=QW(f),g=s[m];if(g)a.push(g.promise);else{let v;f.extensions&&f.extensions[Rn.KHR_DRACO_MESH_COMPRESSION]?v=r(f):v=s9(new $e,f,e),s[m]={primitive:f,promise:v},a.push(v)}}return Promise.all(a)}loadMesh(t){const e=this,n=this.json,s=this.extensions,r=n.meshes[t],a=r.primitives,l=[];for(let u=0,f=a.length;u<f;u++){const m=a[u].material===void 0?GW(this.cache):this.getDependency("material",a[u].material);l.push(m)}return l.push(e.loadGeometries(a)),Promise.all(l).then(function(u){const f=u.slice(0,u.length-1),m=u[u.length-1],g=[];for(let _=0,b=m.length;_<b;_++){const C=m[_],M=a[_];let S;const R=f[_];if(M.mode===_l.TRIANGLES||M.mode===_l.TRIANGLE_STRIP||M.mode===_l.TRIANGLE_FAN||M.mode===void 0)S=r.isSkinnedMesh===!0?new Pw(C,R):new as(C,R),S.isSkinnedMesh===!0&&S.normalizeSkinWeights(),M.mode===_l.TRIANGLE_STRIP?S.geometry=$L(S.geometry,Dw):M.mode===_l.TRIANGLE_FAN&&(S.geometry=$L(S.geometry,Z3));else if(M.mode===_l.LINES)S=new Bc(C,R);else if(M.mode===_l.LINE_STRIP)S=new af(C,R);else if(M.mode===_l.LINE_LOOP)S=new Hw(C,R);else if(M.mode===_l.POINTS)S=new zw(C,R);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);Object.keys(S.geometry.morphAttributes).length>0&&VW(S,r),S.name=e.createUniqueName(r.name||"mesh_"+t),xh(S,r),M.extensions&&Am(s,S,M),e.assignFinalMaterial(S),g.push(S)}for(let _=0,b=g.length;_<b;_++)e.associations.set(g[_],{meshes:t,primitives:_});if(g.length===1)return r.extensions&&Am(s,g[0],r),g[0];const v=new Kh;r.extensions&&Am(s,v,r),e.associations.set(v,{meshes:t});for(let _=0,b=g.length;_<b;_++)v.add(g[_]);return v})}loadCamera(t){let e;const n=this.json.cameras[t],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?e=new Rs(tA.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(e=new wy(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),xh(e,n),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],n=[];for(let s=0,r=e.joints.length;s<r;s++)n.push(this._loadNodeShallow(e.joints[s]));return e.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(s){const r=s.pop(),a=s,l=[],u=[];for(let f=0,m=a.length;f<m;f++){const g=a[f];if(g){l.push(g);const v=new Ne;r!==null&&v.fromArray(r.array,f*16),u.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[f])}return new Bx(l,u)})}loadAnimation(t){const e=this.json,n=this,s=e.animations[t],r=s.name?s.name:"animation_"+t,a=[],l=[],u=[],f=[],m=[];for(let g=0,v=s.channels.length;g<v;g++){const _=s.channels[g],b=s.samplers[_.sampler],C=_.target,M=C.node,S=s.parameters!==void 0?s.parameters[b.input]:b.input,R=s.parameters!==void 0?s.parameters[b.output]:b.output;C.node!==void 0&&(a.push(this.getDependency("node",M)),l.push(this.getDependency("accessor",S)),u.push(this.getDependency("accessor",R)),f.push(b),m.push(C))}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(f),Promise.all(m)]).then(function(g){const v=g[0],_=g[1],b=g[2],C=g[3],M=g[4],S=[];for(let R=0,D=v.length;R<D;R++){const B=v[R],N=_[R],I=b[R],F=C[R],z=M[R];if(B===void 0)continue;B.updateMatrix&&B.updateMatrix();const U=n._createAnimationTracks(B,N,I,F,z);if(U)for(let P=0;P<U.length;P++)S.push(U[P])}return new Xg(r,void 0,S)})}createNodeMesh(t){const e=this.json,n=this,s=e.nodes[t];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(r){const a=n._getNodeRef(n.meshCache,s.mesh,r);return s.weights!==void 0&&a.traverse(function(l){if(l.isMesh)for(let u=0,f=s.weights.length;u<f;u++)l.morphTargetInfluences[u]=s.weights[u]}),a})}loadNode(t){const e=this.json,n=this,s=e.nodes[t],r=n._loadNodeShallow(t),a=[],l=s.children||[];for(let f=0,m=l.length;f<m;f++)a.push(n.getDependency("node",l[f]));const u=s.skin===void 0?Promise.resolve(null):n.getDependency("skin",s.skin);return Promise.all([r,Promise.all(a),u]).then(function(f){const m=f[0],g=f[1],v=f[2];v!==null&&m.traverse(function(_){_.isSkinnedMesh&&_.bind(v,XW)});for(let _=0,b=g.length;_<b;_++)m.add(g[_]);return m})}_loadNodeShallow(t){const e=this.json,n=this.extensions,s=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const r=e.nodes[t],a=r.name?s.createUniqueName(r.name):"",l=[],u=s._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(t)});return u&&l.push(u),r.camera!==void 0&&l.push(s.getDependency("camera",r.camera).then(function(f){return s._getNodeRef(s.cameraCache,r.camera,f)})),s._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(t)}).forEach(function(f){l.push(f)}),this.nodeCache[t]=Promise.all(l).then(function(f){let m;if(r.isBone===!0?m=new sM:f.length>1?m=new Kh:f.length===1?m=f[0]:m=new Ln,m!==f[0])for(let g=0,v=f.length;g<v;g++)m.add(f[g]);if(r.name&&(m.userData.name=r.name,m.name=a),xh(m,r),r.extensions&&Am(n,m,r),r.matrix!==void 0){const g=new Ne;g.fromArray(r.matrix),m.applyMatrix4(g)}else r.translation!==void 0&&m.position.fromArray(r.translation),r.rotation!==void 0&&m.quaternion.fromArray(r.rotation),r.scale!==void 0&&m.scale.fromArray(r.scale);return s.associations.has(m)||s.associations.set(m,{}),s.associations.get(m).nodes=t,m}),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],s=this,r=new Kh;n.name&&(r.name=s.createUniqueName(n.name)),xh(r,n),n.extensions&&Am(e,r,n);const a=n.nodes||[],l=[];for(let u=0,f=a.length;u<f;u++)l.push(s.getDependency("node",a[u]));return Promise.all(l).then(function(u){for(let m=0,g=u.length;m<g;m++)r.add(u[m]);const f=m=>{const g=new Map;for(const[v,_]of s.associations)(v instanceof gs||v instanceof wi)&&g.set(v,_);return m.traverse(v=>{const _=s.associations.get(v);_!=null&&g.set(v,_)}),g};return s.associations=f(r),r})}_createAnimationTracks(t,e,n,s,r){const a=[],l=t.name?t.name:t.uuid,u=[];ud[r.path]===ud.weights?t.traverse(function(v){v.morphTargetInfluences&&u.push(v.name?v.name:v.uuid)}):u.push(l);let f;switch(ud[r.path]){case ud.weights:f=jg;break;case ud.rotation:f=np;break;case ud.position:case ud.scale:f=ip;break;default:switch(n.itemSize){case 1:f=jg;break;case 2:case 3:default:f=ip;break}break}const m=s.interpolation!==void 0?zW[s.interpolation]:dy,g=this._getArrayFromAccessor(n);for(let v=0,_=u.length;v<_;v++){const b=new f(u[v]+"."+ud[r.path],e.array,g,m);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(b),a.push(b)}return a}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const n=H5(e.constructor),s=new Float32Array(e.length);for(let r=0,a=e.length;r<a;r++)s[r]=e[r]*n;e=s}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(n){const s=this instanceof np?HW:cN;return new s(this.times,this.values,this.getValueSize()/3,n)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function YW(i,t,e){const n=t.attributes,s=new Nr;if(n.POSITION!==void 0){const l=e.json.accessors[n.POSITION],u=l.min,f=l.max;if(u!==void 0&&f!==void 0){if(s.set(new et(u[0],u[1],u[2]),new et(f[0],f[1],f[2])),l.normalized){const m=H5(tv[l.componentType]);s.min.multiplyScalar(m),s.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=t.targets;if(r!==void 0){const l=new et,u=new et;for(let f=0,m=r.length;f<m;f++){const g=r[f];if(g.POSITION!==void 0){const v=e.json.accessors[g.POSITION],_=v.min,b=v.max;if(_!==void 0&&b!==void 0){if(u.setX(Math.max(Math.abs(_[0]),Math.abs(b[0]))),u.setY(Math.max(Math.abs(_[1]),Math.abs(b[1]))),u.setZ(Math.max(Math.abs(_[2]),Math.abs(b[2]))),v.normalized){const C=H5(tv[v.componentType]);u.multiplyScalar(C)}l.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(l)}i.boundingBox=s;const a=new mr;s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=a}function s9(i,t,e){const n=t.attributes,s=[];function r(a,l){return e.getDependency("accessor",a).then(function(u){i.setAttribute(l,u)})}for(const a in n){const l=F5[a]||a.toLowerCase();l in i.attributes||s.push(r(n[a],l))}if(t.indices!==void 0&&!i.index){const a=e.getDependency("accessor",t.indices).then(function(l){i.setIndex(l)});s.push(a)}return xh(i,t),YW(i,t,e),Promise.all(s).then(function(){return t.targets!==void 0?kW(i,t.targets,e):i})}const q8=new WeakMap;class WW extends la{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,s){const r=new jo(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,a=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,l).then(e).catch(s)},n,s)}decodeDracoFile(t,e,n,s){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(t,r).then(e)}decodeGeometry(t,e){for(const u in e.attributeTypes){const f=e.attributeTypes[u];f.BYTES_PER_ELEMENT!==void 0&&(e.attributeTypes[u]=f.name)}const n=JSON.stringify(e);if(q8.has(t)){const u=q8.get(t);if(u.key===n)return u.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,a=t.byteLength,l=this._getWorker(r,a).then(u=>(s=u,new Promise((f,m)=>{s._callbacks[r]={resolve:f,reject:m},s.postMessage({type:"decode",id:r,taskConfig:e,buffer:t},[t])}))).then(u=>this._createGeometry(u.geometry));return l.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),q8.set(t,{key:n,promise:l}),l}_createGeometry(t){const e=new $e;t.index&&e.setIndex(new zn(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const s=t.attributes[n],r=s.name,a=s.array,l=s.itemSize;e.setAttribute(r,new zn(a,l))}return e}_loadLibrary(t,e){const n=new jo(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((s,r)=>{n.load(t,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(n=>{const s=n[0];t||(this.decoderConfig.wasmBinary=n[1]);const r=KW.toString(),a=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const a=r.data;switch(a.type){case"decode":s._callbacks[a.id].resolve(a);break;case"error":s._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function KW(){let i,t;onmessage=function(a){const l=a.data;switch(l.type){case"init":i=l.decoderConfig,t=new Promise(function(m){i.onModuleLoaded=function(g){m({draco:g})},DracoDecoderModule(i)});break;case"decode":const u=l.buffer,f=l.taskConfig;t.then(m=>{const g=m.draco,v=new g.Decoder,_=new g.DecoderBuffer;_.Init(new Int8Array(u),u.byteLength);try{const b=e(g,v,_,f),C=b.attributes.map(M=>M.array.buffer);b.index&&C.push(b.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:b},C)}catch(b){console.error(b),self.postMessage({type:"error",id:l.id,error:b.message})}finally{g.destroy(_),g.destroy(v)}});break}};function e(a,l,u,f){const m=f.attributeIDs,g=f.attributeTypes;let v,_;const b=l.GetEncodedGeometryType(u);if(b===a.TRIANGULAR_MESH)v=new a.Mesh,_=l.DecodeBufferToMesh(u,v);else if(b===a.POINT_CLOUD)v=new a.PointCloud,_=l.DecodeBufferToPointCloud(u,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!_.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+_.error_msg());const C={index:null,attributes:[]};for(const M in m){const S=self[g[M]];let R,D;if(f.useUniqueIDs)D=m[M],R=l.GetAttributeByUniqueId(v,D);else{if(D=l.GetAttributeId(v,a[m[M]]),D===-1)continue;R=l.GetAttribute(v,D)}C.attributes.push(s(a,l,v,M,S,R))}return b===a.TRIANGULAR_MESH&&(C.index=n(a,l,v)),a.destroy(v),C}function n(a,l,u){const m=u.num_faces()*3,g=m*4,v=a._malloc(g);l.GetTrianglesUInt32Array(u,g,v);const _=new Uint32Array(a.HEAPF32.buffer,v,m).slice();return a._free(v),{array:_,itemSize:1}}function s(a,l,u,f,m,g){const v=g.num_components(),b=u.num_points()*v,C=b*m.BYTES_PER_ELEMENT,M=r(a,m),S=a._malloc(C);l.GetAttributeDataArrayForAllPoints(u,g,M,C,S);const R=new m(a.HEAPF32.buffer,S,b).slice();return a._free(S),{name:f,array:R,itemSize:v}}function r(a,l){switch(l){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let p4;const Y8=()=>{if(p4)return p4;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=i;WebAssembly.validate(e)&&(s=t);let r;const a=WebAssembly.instantiate(l(s),{}).then(g=>{r=g.instance,r.exports.__wasm_call_ctors()});function l(g){const v=new Uint8Array(g.length);for(let b=0;b<g.length;++b){const C=g.charCodeAt(b);v[b]=C>96?C-71:C>64?C-65:C>47?C+4:C>46?63:62}let _=0;for(let b=0;b<g.length;++b)v[_++]=v[b]<60?n[v[b]]:(v[b]-60)*64+v[++b];return v.buffer.slice(0,_)}function u(g,v,_,b,C,M){const S=r.exports.sbrk,R=_+3&-4,D=S(R*b),B=S(C.length),N=new Uint8Array(r.exports.memory.buffer);N.set(C,B);const I=g(D,_,b,B,C.length);if(I===0&&M&&M(D,R,b),v.set(N.subarray(D,D+_*b)),S(D-S(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},m={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return p4={ready:a,supported:!0,decodeVertexBuffer(g,v,_,b,C){u(r.exports.meshopt_decodeVertexBuffer,g,v,_,b,r.exports[f[C]])},decodeIndexBuffer(g,v,_,b){u(r.exports.meshopt_decodeIndexBuffer,g,v,_,b)},decodeIndexSequence(g,v,_,b){u(r.exports.meshopt_decodeIndexSequence,g,v,_,b)},decodeGltfBuffer(g,v,_,b,C,M){u(r.exports[m[C]],g,v,_,b,r.exports[f[M]])}},p4};let m4=null,uN="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function hN(i=!0,t=!0,e){return n=>{e&&e(n),i&&(m4||(m4=new WW),m4.setDecoderPath(typeof i=="string"?i:uN),n.setDRACOLoader(m4)),t&&n.setMeshoptDecoder(typeof Y8=="function"?Y8():Y8)}}const c0=(i,t,e,n)=>zx(p7,i,hN(t,e,n));c0.preload=(i,t,e,n)=>zx.preload(p7,i,hN(t,e,n));c0.clear=i=>zx.clear(p7,i);c0.setDecoderPath=i=>{uN=i};const JW="modulepreload",ZW=function(i){return"/vibefolio/"+i},r9={},g4=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let a=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=a(e.map(f=>{if(f=ZW(f),f in r9)return;r9[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":JW,m||(v.as="script"),v.crossOrigin="",v.href=f,u&&v.setAttribute("nonce",u),document.head.appendChild(v),m)return new Promise((_,b)=>{v.addEventListener("load",_),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})};function $W(i,t){const e=lt.useRef(null),[n]=lt.useState(()=>t?t instanceof Ln?{current:t}:t:e),[s]=lt.useState(()=>new l7(void 0));lt.useLayoutEffect(()=>{t&&(n.current=t instanceof Ln?t:t.current),s._root=n.current});const r=lt.useRef({}),a=lt.useMemo(()=>{const l={};return i.forEach(u=>Object.defineProperty(l,u.name,{enumerable:!0,get(){if(n.current)return r.current[u.name]||(r.current[u.name]=s.clipAction(u,n.current))},configurable:!0})),{ref:n,clips:i,actions:l,names:i.map(u=>u.name),mixer:s}},[i]);return EM((l,u)=>s.update(u)),lt.useEffect(()=>{const l=n.current;return()=>{r.current={},s.stopAllAction(),Object.values(a.actions).forEach(u=>{l&&s.uncacheAction(u,l)})}},[i]),a}c0.preload("models/retro_computer.glb");function tK(i){const t=lt.useRef(null),{nodes:e,materials:n}=c0("models/retro_computer.glb");return k.jsx("group",{ref:t,children:k.jsxs("group",{...i,dispose:null,children:[k.jsx("mesh",{castShadow:!0,geometry:e.Object_5.geometry,material:n.material_0,position:[.063,0,.438]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_7.geometry,material:n.material_0,position:[.063,.375,.438]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_9.geometry,material:n.material_0,position:[.063,.5,.438]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_11.geometry,material:n.material_0,position:[.063,.563,.313]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_13.geometry,material:n.material_0,position:[.063,1.5,.313]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_15.geometry,material:n.material_0,position:[.063,1.313,.313]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_17.geometry,material:n.material_0,position:[-1.031,1.313,.313]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_19.geometry,material:n.material_0,position:[-.094,1.313,.313]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_21.geometry,material:n.material_0,position:[-.094,1.313,.5]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_23.geometry,material:n.material_0,position:[-.094,1.188,.5]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_25.geometry,material:n.material_0,position:[.188,0,-.75]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_27.geometry,material:n.material_0,position:[-.75,0,-.625]})]})})}function eK(i){lt.useEffect(()=>{const t=e=>{i({x:e.clientX,y:e.clientY})};return window.addEventListener("pointermove",t),()=>window.removeEventListener("pointermove",t)},[i])}function nK(i,t){const{size:e}=SM(),{enabled:n=!0,initialAngle:s=0}=t,r=4,a=Math.PI/24,l=lt.useRef(s),u=lt.useRef(-a);eK(f=>{const m=f.x/e.width*1-1;u.current=m-a}),EM((f,m)=>{if(!n)return;l.current=tA.damp(l.current,u.current,1,m);const g=r*Math.sin(l.current),v=r*Math.cos(l.current);i&&(i.position.set(g,2,v),i.lookAt(0,0,0))})}const fN=lt.createContext(null),dN=()=>{const i=lt.useContext(fN);if(!i)throw new Error("useCameraContext must be used within CameraProvider");return i};function iK({children:i}){const[t,e]=lt.useState(!1);return k.jsx(fN.Provider,{value:{started:t,start:()=>e(!0)},children:i})}function sK(){const{camera:i}=SM(),{started:t}=dN(),[e,n]=lt.useState(!1),s=lt.useRef(0),r=4,a=new et(-5,3,5),l=new et(r*Math.sin(-1),2,r*Math.cos(-1)),u=Math.atan2(l.x,l.z);return EM((f,m)=>{if(!t||e)return;s.current+=m*.5;const g=tA.clamp(s.current,0,1),v=tA.smoothstep(g,0,1),_=a.clone().lerp(l,v);i.position.copy(_),i.lookAt(0,0,0),g>=1&&n(!0)}),nK(i,{initialAngle:u,enabled:e}),null}/**
 * postprocessing v6.37.3 build Sun Apr 27 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rüschen
 * @license Zlib
 */var W8=1/1e3,rK=1e3,aK=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(i){typeof document<"u"&&document.hidden!==void 0&&(i?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=i)}get delta(){return this._delta*W8}get fixedDelta(){return this._fixedDelta*W8}set fixedDelta(i){this._fixedDelta=i*rK}get elapsed(){return this._elapsed*W8}update(i){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(i!==void 0?i:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(i){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},oK=(()=>{const i=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),e=new $e;return e.setAttribute("position",new zn(i,3)),e.setAttribute("uv",new zn(t,2)),e})(),oo=class z5{static get fullscreenGeometry(){return oK}constructor(t="Pass",e=new nA,n=new Rx){this.name=t,this.renderer=null,this.scene=e,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;e!==null?e.material=t:(e=new as(z5.fullscreenGeometry,t),e.frustumCulled=!1,this.scene===null&&(this.scene=new nA),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=cp){}render(t,e,n,s,r){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof Ds||e instanceof gs||e instanceof wi||e instanceof z5)&&this[t].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},lK=class extends oo{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(i,t,e,n,s){const r=i.state.buffers.stencil;r.setLocked(!1),r.setTest(!1)}},cK=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,pN="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",mN=class extends Ks{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new xn(null),opacity:new xn(1)},blending:aa,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:cK,vertexShader:pN})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}getOpacity(i){return this.uniforms.opacity.value}setOpacity(i){this.uniforms.opacity.value=i}},uK=class extends oo{constructor(i,t=!0){super("CopyPass"),this.fullscreenMaterial=new mN,this.needsSwap=!1,this.renderTarget=i,i===void 0&&(this.renderTarget=new Ds(1,1,{minFilter:Ni,magFilter:Ni,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(i){this.autoResize=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(i){this.autoResize=i}render(i,t,e,n,s){this.fullscreenMaterial.inputBuffer=t.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,t){this.autoResize&&this.renderTarget.setSize(i,t)}initialize(i,t,e){e!==void 0&&(this.renderTarget.texture.type=e,e!==Ws?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":i!==null&&i.outputColorSpace===Kn&&(this.renderTarget.texture.colorSpace=Kn))}},a9=new oe,gN=class extends oo{constructor(i=!0,t=!0,e=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=i,this.depth=t,this.stencil=e,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(i,t,e){this.color=i,this.depth=t,this.stencil=e}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(i){this.overrideClearColor=i}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(i){this.overrideClearAlpha=i}render(i,t,e,n,s){const r=this.overrideClearColor,a=this.overrideClearAlpha,l=i.getClearAlpha(),u=r!==null,f=a>=0;u?(i.getClearColor(a9),i.setClearColor(r,f?a:l)):f&&i.setClearAlpha(a),i.setRenderTarget(this.renderToScreen?null:t),i.clear(this.color,this.depth,this.stencil),u?i.setClearColor(a9,l):f&&i.setClearAlpha(l)}},hK=class extends oo{constructor(i,t){super("MaskPass",i,t),this.needsSwap=!1,this.clearPass=new gN(!1,!1,!0),this.inverse=!1}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get inverted(){return this.inverse}set inverted(i){this.inverse=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(i){this.inverted=i}render(i,t,e,n,s){const r=i.getContext(),a=i.state.buffers,l=this.scene,u=this.camera,f=this.clearPass,m=this.inverted?0:1,g=1-m;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),a.stencil.setFunc(r.ALWAYS,m,4294967295),a.stencil.setClear(g),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(i,null):(f.render(i,t),f.render(i,e))),this.renderToScreen?(i.setRenderTarget(null),i.render(l,u)):(i.setRenderTarget(t),i.render(l,u),i.setRenderTarget(e),i.render(l,u)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(r.EQUAL,1,4294967295),a.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),a.stencil.setLocked(!0)}},fK=class{constructor(i=null,{depthBuffer:t=!0,stencilBuffer:e=!1,multisampling:n=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,e,s,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new uK,this.depthTexture=null,this.passes=[],this.timer=new aK,this.autoRenderToScreen=!0,this.setRenderer(i)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(i){const t=this.inputBuffer,e=this.multisampling;e>0&&i>0?(this.inputBuffer.samples=i,this.outputBuffer.samples=i,this.inputBuffer.dispose(),this.outputBuffer.dispose()):e!==i&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,i),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(i){if(this.renderer=i,i!==null){const t=i.getSize(new Pt),e=i.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===Ws&&i.outputColorSpace===Kn&&(this.inputBuffer.texture.colorSpace=Kn,this.outputBuffer.texture.colorSpace=Kn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),i.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(i,e,n)}}replaceRenderer(i,t=!0){const e=this.renderer,n=e.domElement.parentNode;return this.setRenderer(i),t&&n!==null&&(n.removeChild(e.domElement),n.appendChild(i.domElement)),e}createDepthTexture(){const i=this.depthTexture=new Ox;return this.inputBuffer.depthTexture=i,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(i.format=kg,i.type=Gg):i.type=Hu,i}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const i of this.passes)i.setDepthTexture(null)}}createBuffer(i,t,e,n){const s=this.renderer,r=s===null?new Pt:s.getDrawingBufferSize(new Pt),a={minFilter:Ni,magFilter:Ni,stencilBuffer:t,depthBuffer:i,type:e},l=new Ds(r.width,r.height,a);return n>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=n),e===Ws&&s!==null&&s.outputColorSpace===Kn&&(l.texture.colorSpace=Kn),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(i){for(const t of this.passes)t.mainScene=i}setMainCamera(i){for(const t of this.passes)t.mainCamera=i}addPass(i,t){const e=this.passes,n=this.renderer,s=n.getDrawingBufferSize(new Pt),r=n.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(i.setRenderer(n),i.setSize(s.width,s.height),i.initialize(n,r,a),this.autoRenderToScreen&&(e.length>0&&(e[e.length-1].renderToScreen=!1),i.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?e.splice(t,0,i):e.push(i),this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!0),i.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(i of e)i.setDepthTexture(l)}else i.setDepthTexture(this.depthTexture)}removePass(i){const t=this.passes,e=t.indexOf(i);if(e!==-1&&t.splice(e,1).length>0){if(this.depthTexture!==null){const r=(l,u)=>l||u.needsDepthTexture;t.reduce(r,!1)||(i.getDepthTexture()===this.depthTexture&&i.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&e===t.length&&(i.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const i=this.passes;this.deleteDepthTexture(),i.length>0&&(this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!1),this.passes=[])}render(i){const t=this.renderer,e=this.copyPass;let n=this.inputBuffer,s=this.outputBuffer,r=!1,a,l,u;i===void 0&&(this.timer.update(),i=this.timer.getDelta());for(const f of this.passes)f.enabled&&(f.render(t,n,s,i,r),f.needsSwap&&(r&&(e.renderToScreen=f.renderToScreen,a=t.getContext(),l=t.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),e.render(t,n,s,i,r),l.setFunc(a.EQUAL,1,4294967295)),u=n,n=s,s=u),f instanceof hK?r=!0:f instanceof lK&&(r=!1))}setSize(i,t,e){const n=this.renderer,s=n.getSize(new Pt);(i===void 0||t===void 0)&&(i=s.width,t=s.height),(s.width!==i||s.height!==t)&&n.setSize(i,t,e);const r=n.getDrawingBufferSize(new Pt);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const a of this.passes)a.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const i of this.passes)i.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),oo.fullscreenGeometry.dispose()}},Kd={NONE:0,DEPTH:1,CONVOLUTION:2},Wn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},dK=class{constructor(){this.shaderParts=new Map([[Wn.FRAGMENT_HEAD,null],[Wn.FRAGMENT_MAIN_UV,null],[Wn.FRAGMENT_MAIN_IMAGE,null],[Wn.VERTEX_HEAD,null],[Wn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Kd.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=zu}},K8=!1,o9=class{constructor(i=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(i),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let e;if(t.material.flatShading)switch(t.material.side){case Da:e=this.materialsFlatShadedDoubleSide;break;case qs:e=this.materialsFlatShadedBackSide;break;default:e=this.materialsFlatShaded;break}else switch(t.material.side){case Da:e=this.materialsDoubleSide;break;case qs:e=this.materialsBackSide;break;default:e=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=e[2]:t.isInstancedMesh?t.material=e[1]:t.material=e[0],++this.meshCount}}}cloneMaterial(i){if(!(i instanceof Ks))return i.clone();const t=i.uniforms,e=new Map;for(const s in t){const r=t[s].value;r.isRenderTargetTexture&&(t[s].value=null,e.set(s,r))}const n=i.clone();for(const s of e)t[s[0]].value=s[1],n.uniforms[s[0]].value=s[1];return n}setMaterial(i){if(this.disposeMaterials(),this.material=i,i!==null){const t=this.materials=[this.cloneMaterial(i),this.cloneMaterial(i),this.cloneMaterial(i)];for(const e of t)e.uniforms=Object.assign({},i.uniforms),e.side=Dc;t[2].skinning=!0,this.materialsBackSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.side=qs,n}),this.materialsDoubleSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.side=Da,n}),this.materialsFlatShaded=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=qs,n}),this.materialsFlatShadedDoubleSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=Da,n})}}render(i,t,e){const n=i.shadowMap.enabled;if(i.shadowMap.enabled=!1,K8){const s=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),i.render(t,e);for(const r of s)r[0].material=r[1];this.meshCount!==s.size&&s.clear()}else{const s=t.overrideMaterial;t.overrideMaterial=this.material,i.render(t,e),t.overrideMaterial=s}i.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){const i=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of i)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return K8}static set workaroundEnabled(i){K8=i}},hd=-1,sa=class extends Yo{constructor(i,t=hd,e=hd,n=1){super(),this.resizable=i,this.baseSize=new Pt(1,1),this.preferredSize=new Pt(t,e),this.target=this.preferredSize,this.s=n,this.effectiveSize=new Pt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const i=this.baseSize,t=this.preferredSize,e=this.effectiveSize,n=this.scale;t.width!==hd?e.width=t.width:t.height!==hd?e.width=Math.round(t.height*(i.width/Math.max(i.height,1))):e.width=Math.round(i.width*n),t.height!==hd?e.height=t.height:t.width!==hd?e.height=Math.round(t.width/Math.max(i.width/Math.max(i.height,1),1)):e.height=Math.round(i.height*n)}get width(){return this.effectiveSize.width}set width(i){this.preferredWidth=i}get height(){return this.effectiveSize.height}set height(i){this.preferredHeight=i}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(i){this.s!==i&&(this.s=i,this.preferredSize.setScalar(hd),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(i){this.scale=i}get baseWidth(){return this.baseSize.width}set baseWidth(i){this.baseSize.width!==i&&(this.baseSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(i){this.baseWidth=i}get baseHeight(){return this.baseSize.height}set baseHeight(i){this.baseSize.height!==i&&(this.baseSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(i){this.baseHeight=i}setBaseSize(i,t){(this.baseSize.width!==i||this.baseSize.height!==t)&&(this.baseSize.set(i,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(i){this.preferredSize.width!==i&&(this.preferredSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(i){this.preferredWidth=i}get preferredHeight(){return this.preferredSize.height}set preferredHeight(i){this.preferredSize.height!==i&&(this.preferredSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(i){this.preferredHeight=i}setPreferredSize(i,t){(this.preferredSize.width!==i||this.preferredSize.height!==t)&&(this.preferredSize.set(i,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(i){this.s=i.scale,this.baseSize.set(i.baseWidth,i.baseHeight),this.preferredSize.set(i.preferredWidth,i.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return hd}},Tn={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},pK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",mK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",gK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",vK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",yK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",_K="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",AK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",xK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",bK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",SK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",EK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",MK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",TK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",CK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",wK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",RK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",LK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",DK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",BK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",OK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",NK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",IK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",UK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",PK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",FK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",HK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",zK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",GK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",kK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",VK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",QK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",jK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",XK=new Map([[Tn.ADD,pK],[Tn.ALPHA,mK],[Tn.AVERAGE,gK],[Tn.COLOR,vK],[Tn.COLOR_BURN,yK],[Tn.COLOR_DODGE,_K],[Tn.DARKEN,AK],[Tn.DIFFERENCE,xK],[Tn.DIVIDE,bK],[Tn.DST,null],[Tn.EXCLUSION,SK],[Tn.HARD_LIGHT,EK],[Tn.HARD_MIX,MK],[Tn.HUE,TK],[Tn.INVERT,CK],[Tn.INVERT_RGB,wK],[Tn.LIGHTEN,RK],[Tn.LINEAR_BURN,LK],[Tn.LINEAR_DODGE,DK],[Tn.LINEAR_LIGHT,BK],[Tn.LUMINOSITY,OK],[Tn.MULTIPLY,NK],[Tn.NEGATION,IK],[Tn.NORMAL,UK],[Tn.OVERLAY,PK],[Tn.PIN_LIGHT,FK],[Tn.REFLECT,HK],[Tn.SATURATION,zK],[Tn.SCREEN,GK],[Tn.SOFT_LIGHT,kK],[Tn.SRC,VK],[Tn.SUBTRACT,QK],[Tn.VIVID_LIGHT,jK]]),qK=class extends Yo{constructor(i,t=1){super(),this._blendFunction=i,this.opacity=new xn(t)}getOpacity(){return this.opacity.value}setOpacity(i){this.opacity.value=i}get blendFunction(){return this._blendFunction}set blendFunction(i){this._blendFunction=i,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(i){this.blendFunction=i}getShaderCode(){return XK.get(this.blendFunction)}},Yg=class extends Yo{constructor(i,t,{attributes:e=Kd.NONE,blendFunction:n=Tn.NORMAL,defines:s=new Map,uniforms:r=new Map,extensions:a=null,vertexShader:l=null}={}){super(),this.name=i,this.renderer=null,this.attributes=e,this.fragmentShader=t,this.vertexShader=l,this.defines=s,this.uniforms=r,this.extensions=a,this.blendMode=new qK(n),this.blendMode.addEventListener("change",u=>this.setChanged()),this._inputColorSpace=zu,this._outputColorSpace=Mc}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(i){this._inputColorSpace=i,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(i){this._outputColorSpace=i,this.setChanged()}set mainScene(i){}set mainCamera(i){}getName(){return this.name}setRenderer(i){this.renderer=i}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(i){this.attributes=i,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(i){this.fragmentShader=i,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(i){this.vertexShader=i,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(i,t=cp){}update(i,t,e){}setSize(i,t){}initialize(i,t,e){}dispose(){for(const i of Object.keys(this)){const t=this[i];(t instanceof Ds||t instanceof gs||t instanceof wi||t instanceof oo)&&this[i].dispose()}}},m7={MEDIUM:2,LARGE:3},YK=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,WK="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",KK=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],JK=class extends Ks{constructor(i=new On){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new xn(null),texelSize:new xn(new On),scale:new xn(1),kernel:new xn(0)},blending:aa,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:YK,vertexShader:WK}),this.setTexelSize(i.x,i.y),this.kernelSize=m7.MEDIUM}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.inputBuffer=i}get kernelSequence(){return KK[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(i){this.uniforms.scale.value=i}getScale(){return this.uniforms.scale.value}setScale(i){this.uniforms.scale.value=i}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(i){this.uniforms.kernel.value=i}setKernel(i){this.kernel=i}setTexelSize(i,t){this.uniforms.texelSize.value.set(i,t,i*.5,t*.5)}setSize(i,t){const e=1/i,n=1/t;this.uniforms.texelSize.value.set(e,n,e*.5,n*.5)}},ZK=class extends oo{constructor({kernelSize:i=m7.MEDIUM,resolutionScale:t=.5,width:e=sa.AUTO_SIZE,height:n=sa.AUTO_SIZE,resolutionX:s=e,resolutionY:r=n}={}){super("KawaseBlurPass"),this.renderTargetA=new Ds(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new sa(this,s,r,t);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new JK,this._blurMaterial.kernelSize=i,this.copyMaterial=new mN}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(i){this._blurMaterial=i}get dithering(){return this.copyMaterial.dithering}set dithering(i){this.copyMaterial.dithering=i}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(i){this.blurMaterial.kernelSize=i}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get scale(){return this.blurMaterial.scale}set scale(i){this.blurMaterial.scale=i}getScale(){return this.blurMaterial.scale}setScale(i){this.blurMaterial.scale=i}getKernelSize(){return this.kernelSize}setKernelSize(i){this.kernelSize=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,t,e,n,s){const r=this.scene,a=this.camera,l=this.renderTargetA,u=this.renderTargetB,f=this.blurMaterial,m=f.kernelSequence;let g=t;this.fullscreenMaterial=f;for(let v=0,_=m.length;v<_;++v){const b=(v&1)===0?l:u;f.kernel=m[v],f.inputBuffer=g.texture,i.setRenderTarget(b),i.render(r,a),g=b}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=g.texture,i.setRenderTarget(this.renderToScreen?null:e),i.render(r,a)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t);const n=e.width,s=e.height;this.renderTargetA.setSize(n,s),this.renderTargetB.setSize(n,s),this.blurMaterial.setSize(i,t)}initialize(i,t,e){e!==void 0&&(this.renderTargetA.texture.type=e,this.renderTargetB.texture.type=e,e!==Ws?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):i!==null&&i.outputColorSpace===Kn&&(this.renderTargetA.texture.colorSpace=Kn,this.renderTargetB.texture.colorSpace=Kn))}static get AUTO_SIZE(){return sa.AUTO_SIZE}},$K=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,tJ=class extends Ks{constructor(i=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:s0.replace(/\D+/g,"")},uniforms:{inputBuffer:new xn(null),threshold:new xn(0),smoothing:new xn(1),range:new xn(null)},blending:aa,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:$K,vertexShader:pN}),this.colorOutput=i,this.luminanceRange=t}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get threshold(){return this.uniforms.threshold.value}set threshold(i){this.smoothing>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=i}getThreshold(){return this.threshold}setThreshold(i){this.threshold=i}get smoothing(){return this.uniforms.smoothing.value}set smoothing(i){this.threshold>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=i}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(i){this.smoothing=i}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(i){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(i){i?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(i){return this.colorOutput}setColorOutputEnabled(i){this.colorOutput=i}get useRange(){return this.luminanceRange!==null}set useRange(i){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(i){i!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=i,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(i){this.luminanceRange=i}},eJ=class extends oo{constructor({renderTarget:i,luminanceRange:t,colorOutput:e,resolutionScale:n=1,width:s=sa.AUTO_SIZE,height:r=sa.AUTO_SIZE,resolutionX:a=s,resolutionY:l=r}={}){super("LuminancePass"),this.fullscreenMaterial=new tJ(e,t),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new Ds(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const u=this.resolution=new sa(this,a,l,n);u.addEventListener("change",f=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(i,t,e,n,s){const r=this.fullscreenMaterial;r.inputBuffer=t.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t),this.renderTarget.setSize(e.width,e.height)}initialize(i,t,e){e!==void 0&&e!==Ws&&(this.renderTarget.texture.type=e,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},nJ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,iJ="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",sJ=class extends Ks{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new xn(null),texelSize:new xn(new Pt)},blending:aa,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:nJ,vertexShader:iJ})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setSize(i,t){this.uniforms.texelSize.value.set(1/i,1/t)}},rJ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,aJ="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",oJ=class extends Ks{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new xn(null),supportBuffer:new xn(null),texelSize:new xn(new Pt),radius:new xn(.85)},blending:aa,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:rJ,vertexShader:aJ})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}set supportBuffer(i){this.uniforms.supportBuffer.value=i}get radius(){return this.uniforms.radius.value}set radius(i){this.uniforms.radius.value=i}setSize(i,t){this.uniforms.texelSize.value.set(1/i,1/t)}},lJ=class extends oo{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Ds(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new sJ,this.upsamplingMaterial=new oJ,this.resolution=new Pt}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(i){if(this.levels!==i){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let e=0;e<i;++e){const n=t.clone();n.texture.name="Downsampling.Mipmap"+e,this.downsamplingMipmaps.push(n)}this.upsamplingMipmaps.push(t);for(let e=1,n=i-1;e<n;++e){const s=t.clone();s.texture.name="Upsampling.Mipmap"+e,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(i){this.upsamplingMaterial.radius=i}render(i,t,e,n,s){const{scene:r,camera:a}=this,{downsamplingMaterial:l,upsamplingMaterial:u}=this,{downsamplingMipmaps:f,upsamplingMipmaps:m}=this;let g=t;this.fullscreenMaterial=l;for(let v=0,_=f.length;v<_;++v){const b=f[v];l.setSize(g.width,g.height),l.inputBuffer=g.texture,i.setRenderTarget(b),i.render(r,a),g=b}this.fullscreenMaterial=u;for(let v=m.length-1;v>=0;--v){const _=m[v];u.setSize(g.width,g.height),u.inputBuffer=g.texture,u.supportBuffer=f[v].texture,i.setRenderTarget(_),i.render(r,a),g=_}}setSize(i,t){const e=this.resolution;e.set(i,t);let n=e.width,s=e.height;for(let r=0,a=this.downsamplingMipmaps.length;r<a;++r)n=Math.round(n*.5),s=Math.round(s*.5),this.downsamplingMipmaps[r].setSize(n,s),r<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[r].setSize(n,s)}initialize(i,t,e){if(e!==void 0){const n=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of n)s.texture.type=e;if(e!==Ws)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(i!==null&&i.outputColorSpace===Kn)for(const s of n)s.texture.colorSpace=Kn}}dispose(){super.dispose();for(const i of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))i.dispose()}},cJ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,uJ=class extends Yg{constructor({blendFunction:i=Tn.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:e=.025,mipmapBlur:n=!1,intensity:s=1,radius:r=.85,levels:a=8,kernelSize:l=m7.LARGE,resolutionScale:u=.5,width:f=sa.AUTO_SIZE,height:m=sa.AUTO_SIZE,resolutionX:g=f,resolutionY:v=m}={}){super("BloomEffect",cJ,{blendFunction:i,uniforms:new Map([["map",new xn(null)],["intensity",new xn(s)]])}),this.renderTarget=new Ds(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new ZK({kernelSize:l}),this.luminancePass=new eJ({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=e,this.mipmapBlurPass=new lJ,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=r,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const _=this.resolution=new sa(this,g,v,u);_.addEventListener("change",b=>this.setSize(_.baseWidth,_.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get dithering(){return this.blurPass.dithering}set dithering(i){this.blurPass.dithering=i}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(i){this.blurPass.kernelSize=i}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(i){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(i){this.uniforms.get("intensity").value=i}getIntensity(){return this.intensity}setIntensity(i){this.intensity=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}update(i,t,e){const n=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(i,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,s.renderTarget):this.blurPass.render(i,s.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,t):this.blurPass.render(i,t,n)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t),this.renderTarget.setSize(e.width,e.height),this.blurPass.resolution.copy(e),this.luminancePass.setSize(i,t),this.mipmapBlurPass.setSize(i,t)}initialize(i,t,e){this.blurPass.initialize(i,t,e),this.luminancePass.initialize(i,t,e),this.mipmapBlurPass.initialize(i,t,e),e!==void 0&&(this.renderTarget.texture.type=e,i!==null&&i.outputColorSpace===Kn&&(this.renderTarget.texture.colorSpace=Kn))}},hJ=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,fJ="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",dJ=class extends Yg{constructor({offset:i=new Pt(.001,5e-4),radialModulation:t=!1,modulationOffset:e=.15}={}){super("ChromaticAberrationEffect",hJ,{vertexShader:fJ,attributes:Kd.CONVOLUTION,uniforms:new Map([["offset",new xn(i)],["modulationOffset",new xn(e)]])}),this.radialModulation=t}get offset(){return this.uniforms.get("offset").value}set offset(i){this.uniforms.get("offset").value=i}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(i){i?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(i){this.uniforms.get("modulationOffset").value=i}getOffset(){return this.offset}setOffset(i){this.offset=i}},vN=class extends oo{constructor(i,t,e=null){super("RenderPass",i,t),this.needsSwap=!1,this.clearPass=new gN,this.overrideMaterialManager=e===null?null:new o9(e),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get renderToScreen(){return super.renderToScreen}set renderToScreen(i){super.renderToScreen=i,this.clearPass.renderToScreen=i}get overrideMaterial(){const i=this.overrideMaterialManager;return i!==null?i.material:null}set overrideMaterial(i){const t=this.overrideMaterialManager;i!==null?t!==null?t.setMaterial(i):this.overrideMaterialManager=new o9(i):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(i){this.overrideMaterial=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getSelection(){return this.selection}setSelection(i){this.selection=i}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(i){this.ignoreBackground=i}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(i){this.skipShadowMapUpdate=i}getClearPass(){return this.clearPass}render(i,t,e,n,s){const r=this.scene,a=this.camera,l=this.selection,u=a.layers.mask,f=r.background,m=i.shadowMap.autoUpdate,g=this.renderToScreen?null:t;l!==null&&a.layers.set(l.getLayer()),this.skipShadowMapUpdate&&(i.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(r.background=null),this.clearPass.enabled&&this.clearPass.render(i,t),i.setRenderTarget(g),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(i,r,a):i.render(r,a),a.layers.mask=u,r.background=f,i.shadowMap.autoUpdate=m}},a_={DEFAULT:0,ESKIL:1},pJ=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,mJ=class extends Yg{constructor({blendFunction:i=Tn.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",pJ,{blendFunction:i}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(i){this.premultiply!==i&&(i?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(i){this.premultiply=i}},gJ="uniform bool active;uniform vec4 d;void mainUv(inout vec2 uv){if(active){uv=d.xy*(floor(uv*d.zw)+0.5);}}",vJ=class extends Yg{constructor(i=30){super("PixelationEffect",gJ,{uniforms:new Map([["active",new xn(!1)],["d",new xn(new On)]])}),this.resolution=new Pt,this._granularity=0,this.granularity=i}get granularity(){return this._granularity}set granularity(i){let t=Math.floor(i);t%2>0&&(t+=1),this._granularity=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(i){this.granularity=i}setSize(i,t){const e=this.resolution;e.set(i,t);const n=this.granularity,s=n/e.x,r=n/e.y;this.uniforms.get("d").value.set(s,r,1/s,1/r)}},yJ=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,_J="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",AJ=class extends Ks{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new xn(null),normalBuffer:new xn(null),texelSize:new xn(new Pt)},blending:aa,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:yJ,vertexShader:_J})}set depthBuffer(i){this.uniforms.depthBuffer.value=i}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,t=cp){this.depthBuffer=i,this.depthPacking=t}set normalBuffer(i){this.uniforms.normalBuffer.value=i,i!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(i){this.normalBuffer=i}setTexelSize(i,t){this.uniforms.texelSize.value.set(i,t)}setSize(i,t){this.uniforms.texelSize.value.set(1/i,1/t)}},xJ=class extends oo{constructor({normalBuffer:i=null,resolutionScale:t=.5,width:e=sa.AUTO_SIZE,height:n=sa.AUTO_SIZE,resolutionX:s=e,resolutionY:r=n}={}){super("DepthDownsamplingPass");const a=new AJ;a.normalBuffer=i,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ds(1,1,{minFilter:os,magFilter:os,depthBuffer:!1,type:Na}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const l=this.resolution=new sa(this,s,r,t);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(i,t=cp){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=t}render(i,t,e,n,s){i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t),this.renderTarget.setSize(e.width,e.height),this.fullscreenMaterial.setSize(i,t)}initialize(i,t,e){const n=i.getContext();if(!(n.getExtension("EXT_color_buffer_float")||n.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},bJ=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,SJ=class extends Yg{constructor({blendFunction:i,eskil:t=!1,technique:e=t?a_.ESKIL:a_.DEFAULT,offset:n=.5,darkness:s=.5}={}){super("VignetteEffect",bJ,{blendFunction:i,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new xn(n)],["darkness",new xn(s)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(i){this.technique!==i&&(this.defines.set("VIGNETTE_TECHNIQUE",i.toFixed(0)),this.setChanged())}get eskil(){return this.technique===a_.ESKIL}set eskil(i){this.technique=i?a_.ESKIL:a_.DEFAULT}getTechnique(){return this.technique}setTechnique(i){this.technique=i}get offset(){return this.uniforms.get("offset").value}set offset(i){this.uniforms.get("offset").value=i}getOffset(){return this.offset}setOffset(i){this.offset=i}get darkness(){return this.uniforms.get("darkness").value}set darkness(i){this.uniforms.get("darkness").value=i}getDarkness(){return this.darkness}setDarkness(i){this.darkness=i}},EJ=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,MJ="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",TJ=class extends Ks{constructor(i,t,e,n,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:s0.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new xn(null),depthBuffer:new xn(null),resolution:new xn(new Pt),texelSize:new xn(new Pt),cameraNear:new xn(.3),cameraFar:new xn(1e3),aspect:new xn(1),time:new xn(0)},blending:aa,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),i&&this.setShaderParts(i),t&&this.setDefines(t),e&&this.setUniforms(e),this.copyCameraSettings(n)}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(i){this.uniforms.depthBuffer.value=i}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,t=cp){this.depthBuffer=i,this.depthPacking=t}setShaderData(i){this.setShaderParts(i.shaderParts),this.setDefines(i.defines),this.setUniforms(i.uniforms),this.setExtensions(i.extensions)}setShaderParts(i){return this.fragmentShader=EJ.replace(Wn.FRAGMENT_HEAD,i.get(Wn.FRAGMENT_HEAD)||"").replace(Wn.FRAGMENT_MAIN_UV,i.get(Wn.FRAGMENT_MAIN_UV)||"").replace(Wn.FRAGMENT_MAIN_IMAGE,i.get(Wn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=MJ.replace(Wn.VERTEX_HEAD,i.get(Wn.VERTEX_HEAD)||"").replace(Wn.VERTEX_MAIN_SUPPORT,i.get(Wn.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(i){for(const t of i.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(i){for(const t of i.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(i){this.extensions={};for(const t of i)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(i){this.encodeOutput!==i&&(i?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(i){return this.encodeOutput}setOutputEncodingEnabled(i){this.encodeOutput=i}get time(){return this.uniforms.time.value}set time(i){this.uniforms.time.value=i}setDeltaTime(i){this.uniforms.time.value+=i}adoptCameraSettings(i){this.copyCameraSettings(i)}copyCameraSettings(i){i&&(this.uniforms.cameraNear.value=i.near,this.uniforms.cameraFar.value=i.far,i instanceof Rs?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(i,t){const e=this.uniforms;e.resolution.value.set(i,t),e.texelSize.value.set(1/i,1/t),e.aspect.value=i/t}static get Section(){return Wn}};function l9(i,t,e){for(const n of t){const s="$1"+i+n.charAt(0).toUpperCase()+n.slice(1),r=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const a of e.entries())a[1]!==null&&e.set(a[0],a[1].replace(r,s))}}function CJ(i,t,e){let n=t.getFragmentShader(),s=t.getVertexShader();const r=n!==void 0&&/mainImage/.test(n),a=n!==void 0&&/mainUv/.test(n);if(e.attributes|=t.getAttributes(),n===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(a&&(e.attributes&Kd.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!r&&!a)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const l=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,u=e.shaderParts;let f=u.get(Wn.FRAGMENT_HEAD)||"",m=u.get(Wn.FRAGMENT_MAIN_UV)||"",g=u.get(Wn.FRAGMENT_MAIN_IMAGE)||"",v=u.get(Wn.VERTEX_HEAD)||"",_=u.get(Wn.VERTEX_MAIN_SUPPORT)||"";const b=new Set,C=new Set;if(a&&(m+=`	${i}MainUv(UV);
`,e.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const R=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);_+=`	${i}MainSupport(`,_+=R?`vUv);
`:`);
`;for(const D of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const B of D[1].split(/\s*,\s*/))e.varyings.add(B),b.add(B),C.add(B);for(const D of s.matchAll(l))C.add(D[1])}for(const R of n.matchAll(l))C.add(R[1]);for(const R of t.defines.keys())C.add(R.replace(/\([\w\s,]*\)/g,""));for(const R of t.uniforms.keys())C.add(R);C.delete("while"),C.delete("for"),C.delete("if"),t.uniforms.forEach((R,D)=>e.uniforms.set(i+D.charAt(0).toUpperCase()+D.slice(1),R)),t.defines.forEach((R,D)=>e.defines.set(i+D.charAt(0).toUpperCase()+D.slice(1),R));const M=new Map([["fragment",n],["vertex",s]]);l9(i,C,e.defines),l9(i,C,M),n=M.get("fragment"),s=M.get("vertex");const S=t.blendMode;if(e.blendModes.set(S.blendFunction,S),r){t.inputColorSpace!==null&&t.inputColorSpace!==e.colorSpace&&(g+=t.inputColorSpace===Kn?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==Mc?e.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(e.colorSpace=t.inputColorSpace);const R=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;g+=`${i}MainImage(color0, UV, `,(e.attributes&Kd.DEPTH)!==0&&R.test(n)&&(g+="depth, ",e.readDepth=!0),g+=`color1);
	`;const D=i+"BlendOpacity";e.uniforms.set(D,S.opacity),g+=`color0 = blend${S.blendFunction}(color0, color1, ${D});

	`,f+=`uniform float ${D};

`}if(f+=n+`
`,s!==null&&(v+=s+`
`),u.set(Wn.FRAGMENT_HEAD,f),u.set(Wn.FRAGMENT_MAIN_UV,m),u.set(Wn.FRAGMENT_MAIN_IMAGE,g),u.set(Wn.VERTEX_HEAD,v),u.set(Wn.VERTEX_MAIN_SUPPORT,_),t.extensions!==null)for(const R of t.extensions)e.extensions.add(R)}}var wJ=class extends oo{constructor(i,...t){super("EffectPass"),this.fullscreenMaterial=new TJ(null,null,null,i),this.listener=e=>this.handleEvent(e),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(i){for(const t of this.effects)t.mainScene=i}set mainCamera(i){this.fullscreenMaterial.copyCameraSettings(i);for(const t of this.effects)t.mainCamera=i}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(i){this.fullscreenMaterial.encodeOutput=i}get dithering(){return this.fullscreenMaterial.dithering}set dithering(i){const t=this.fullscreenMaterial;t.dithering=i,t.needsUpdate=!0}setEffects(i){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=i.sort((t,e)=>e.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const i=new dK;let t=0;for(const a of this.effects)if(a.blendMode.blendFunction===Tn.DST)i.attributes|=a.getAttributes()&Kd.DEPTH;else{if((i.attributes&a.getAttributes()&Kd.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${a.name})`);CJ("e"+t++,a,i)}let e=i.shaderParts.get(Wn.FRAGMENT_HEAD),n=i.shaderParts.get(Wn.FRAGMENT_MAIN_IMAGE),s=i.shaderParts.get(Wn.FRAGMENT_MAIN_UV);const r=/\bblend\b/g;for(const a of i.blendModes.values())e+=a.getShaderCode().replace(r,`blend${a.blendFunction}`)+`
`;(i.attributes&Kd.DEPTH)!==0?(i.readDepth&&(n=`float depth = readDepth(UV);

	`+n),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,i.colorSpace===Kn&&(n+=`color0 = sRGBToLinear(color0);
	`),i.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,i.defines.set("UV","transformedUv")):i.defines.set("UV","vUv"),i.shaderParts.set(Wn.FRAGMENT_HEAD,e),i.shaderParts.set(Wn.FRAGMENT_MAIN_IMAGE,n),i.shaderParts.set(Wn.FRAGMENT_MAIN_UV,s);for(const[a,l]of i.shaderParts)l!==null&&i.shaderParts.set(a,l.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(i)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(i,t=cp){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=t;for(const e of this.effects)e.setDepthTexture(i,t)}render(i,t,e,n,s){for(const r of this.effects)r.update(i,t,n);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=t.texture,r.time+=n*this.timeScale,i.setRenderTarget(this.renderToScreen?null:e),i.render(this.scene,this.camera)}}setSize(i,t){this.fullscreenMaterial.setSize(i,t);for(const e of this.effects)e.setSize(i,t)}initialize(i,t,e){this.renderer=i;for(const n of this.effects)n.initialize(i,t,e);this.updateMaterial(),e!==void 0&&e!==Ws&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const i of this.effects)i.removeEventListener("change",this.listener),i.dispose()}handleEvent(i){switch(i.type){case"change":this.recompile();break}}},RJ=class extends oo{constructor(i,t,{renderTarget:e,resolutionScale:n=1,width:s=sa.AUTO_SIZE,height:r=sa.AUTO_SIZE,resolutionX:a=s,resolutionY:l=r}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new vN(i,t,new qw);const u=this.renderPass;u.ignoreBackground=!0,u.skipShadowMapUpdate=!0;const f=u.getClearPass();f.overrideClearColor=new oe(7829503),f.overrideClearAlpha=1,this.renderTarget=e,this.renderTarget===void 0&&(this.renderTarget=new Ds(1,1,{minFilter:os,magFilter:os}),this.renderTarget.texture.name="NormalPass.Target");const m=this.resolution=new sa(this,a,l,n);m.addEventListener("change",g=>this.setSize(m.baseWidth,m.baseHeight))}set mainScene(i){this.renderPass.mainScene=i}set mainCamera(i){this.renderPass.mainCamera=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,t,e,n,s){const r=this.renderToScreen?null:this.renderTarget;this.renderPass.render(i,r,r)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t),this.renderTarget.setSize(e.width,e.height)}};function k_(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}new Pt;new Pt;function yN(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var vl=function i(t,e,n){var s=this;yN(this,i),k_(this,"dot2",function(r,a){return s.x*r+s.y*a}),k_(this,"dot3",function(r,a,l){return s.x*r+s.y*a+s.z*l}),this.x=t,this.y=e,this.z=n},LJ=[new vl(1,1,0),new vl(-1,1,0),new vl(1,-1,0),new vl(-1,-1,0),new vl(1,0,1),new vl(-1,0,1),new vl(1,0,-1),new vl(-1,0,-1),new vl(0,1,1),new vl(0,-1,1),new vl(0,1,-1),new vl(0,-1,-1)],c9=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],u9=new Array(512),h9=new Array(512),DJ=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var e=0;e<256;e++){var n;e&1?n=c9[e]^t&255:n=c9[e]^t>>8&255,u9[e]=u9[e+256]=n,h9[e]=h9[e+256]=LJ[n%12]}};DJ(0);function BJ(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var t=i;i=0;for(var e=0;e<t.length;e++)i=(i+(e+1)*(t.charCodeAt(e)%96))%2147483647}return i===0&&(i=311),i}function f9(i){var t=BJ(i);return function(){var e=t*48271%2147483647;return t=e,e/2147483647}}var OJ=function i(t){var e=this;yN(this,i),k_(this,"seed",0),k_(this,"init",function(n){e.seed=n,e.value=f9(n)}),k_(this,"value",f9(this.seed)),this.init(t)};new OJ(Math.random());const NJ=lt.createContext(null),d9=i=>(i.getAttributes()&2)===2,IJ=lt.memo(lt.forwardRef(({children:i,camera:t,scene:e,resolutionScale:n,enabled:s=!0,renderPriority:r=1,autoClear:a=!0,depthBuffer:l,enableNormalPass:u,stencilBuffer:f,multisampling:m=8,frameBufferType:g=r0},v)=>{const{gl:_,scene:b,camera:C,size:M}=SM(),S=e||b,R=t||C,[D,B,N]=lt.useMemo(()=>{const z=new fK(_,{depthBuffer:l,stencilBuffer:f,multisampling:m,frameBufferType:g});z.addPass(new vN(S,R));let U=null,P=null;return u&&(P=new RJ(S,R),P.enabled=!1,z.addPass(P),n!==void 0&&(U=new xJ({normalBuffer:P.texture,resolutionScale:n}),U.enabled=!1,z.addPass(U))),[z,P,U]},[R,_,l,f,m,g,S,u,n]);lt.useEffect(()=>D==null?void 0:D.setSize(M.width,M.height),[D,M]),EM((z,U)=>{if(s){const P=_.autoClear;_.autoClear=a,f&&!a&&_.clearStencil(),D.render(U),_.autoClear=P}},s?r:0);const I=lt.useRef(null);lt.useLayoutEffect(()=>{var P;const z=[],U=I.current.__r3f;if(U&&D){const X=U.children;for(let ot=0;ot<X.length;ot++){const it=X[ot].object;if(it instanceof Yg){const ut=[it];if(!d9(it)){let j=null;for(;(j=(P=X[ot+1])==null?void 0:P.object)instanceof Yg&&!d9(j);)ut.push(j),ot++}const dt=new wJ(R,...ut);z.push(dt)}else it instanceof oo&&z.push(it)}for(const ot of z)D==null||D.addPass(ot);B&&(B.enabled=!0),N&&(N.enabled=!0)}return()=>{for(const X of z)D==null||D.removePass(X);B&&(B.enabled=!1),N&&(N.enabled=!1)}},[D,i,R,B,N]),lt.useEffect(()=>{const z=_.toneMapping;return _.toneMapping=Lc,()=>{_.toneMapping=z}},[_]);const F=lt.useMemo(()=>({composer:D,normalPass:B,downSamplingPass:N,resolutionScale:n,camera:R,scene:S}),[D,B,N,n,R,S]);return lt.useImperativeHandle(v,()=>D,[D]),k.jsx(NJ.Provider,{value:F,children:k.jsx("group",{ref:I,children:i})})}));let UJ=0;const p9=new WeakMap,TM=(i,t)=>function({blendFunction:e=t==null?void 0:t.blendFunction,opacity:n=t==null?void 0:t.opacity,...s}){let r=p9.get(i);if(!r){const u=`@react-three/postprocessing/${i.name}-${UJ++}`;ZO({[u]:i}),p9.set(i,r=u)}const a=SM(u=>u.camera),l=Oa.useMemo(()=>[...(t==null?void 0:t.args)??[],...s.args??[{...t,...s}]],[JSON.stringify(s)]);return k.jsx(r,{camera:a,"blendMode-blendFunction":e,"blendMode-opacity-value":n,...s,args:l})},PJ=TM(uJ,{blendFunction:0}),FJ=TM(dJ),HJ=TM(mJ,{blendFunction:5}),zJ=lt.forwardRef(function({granularity:i=5},t){const e=lt.useMemo(()=>new vJ(i),[i]);return k.jsx("primitive",{ref:t,object:e,dispose:null})}),GJ=TM(SJ);function kJ(i){const t=VE();return k.jsx("group",{children:k.jsx("directionalLight",{intensity:.5,color:t.pallet.secondColor,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10,...i})})}function VJ(){return k.jsxs(k.Fragment,{children:[k.jsx(HJ,{opacity:.03}),k.jsx(zJ,{granularity:2}),k.jsx(FJ,{offset:[.0015,.0012],blendFunction:Tn.ADD}),k.jsx(PJ,{intensity:.2,luminanceThreshold:.2,luminanceSmoothing:.9}),k.jsx(GJ,{eskil:!1,offset:.2,darkness:.5})]})}c0.preload("models/coffee.glb");function QJ(i){const t=lt.useRef(null),{scene:e,animations:n}=c0("models/coffee.glb"),s=lt.useMemo(()=>dW.clone(e),[e]),{nodes:r,materials:a}=OY(s),{actions:l}=$W(n,t);return lt.useEffect(()=>{var f;const u=Object.keys(l)[0];u&&((f=l[u])==null||f.reset().fadeIn(.5).play())},[l]),k.jsx("group",{ref:t,dispose:null,scale:.1,...i,children:k.jsx("group",{name:"Sketchfab_Scene",children:k.jsx("group",{name:"Sketchfab_model",rotation:[-Math.PI/2,0,0],children:k.jsx("group",{name:"c444e300743744b392e68be146aac0cdfbx",rotation:[Math.PI/2,0,0],scale:.01,children:k.jsx("group",{name:"Object_2",children:k.jsxs("group",{name:"RootNode",children:[k.jsx("group",{name:"Camera",position:[1474.095,1039.759,-1350.41],rotation:[-Math.PI,-.637,2.68],scale:100,children:k.jsx("group",{name:"Object_5"})}),k.jsx("group",{name:"Empty",position:[53.104,23.279,-274.162],scale:115.93}),k.jsxs("group",{name:"Cylinder",position:[-7.398,183.359,-318.123],rotation:[-Math.PI/2,0,0],scale:158.782,children:[k.jsx("mesh",{castShadow:!0,name:"Cylinder_Material006_0",geometry:r.Cylinder_Material006_0.geometry,material:a["Material.006"]}),k.jsx("mesh",{castShadow:!0,name:"Cylinder_Material006_0_1",geometry:r.Cylinder_Material006_0_1.geometry,material:a["Material.006"]})]}),k.jsx("group",{name:"Area",position:[1236.323,142.358,-110.352],rotation:[0,0,-1.395],scale:100,children:k.jsx("group",{name:"Object_11",rotation:[Math.PI/2,0,0],children:k.jsx("group",{name:"Object_12"})})}),k.jsx("group",{name:"Area001",position:[76.334,642.177,-275.205],rotation:[0,0,-.082],scale:100,children:k.jsx("group",{name:"Object_14",rotation:[Math.PI/2,0,0],children:k.jsx("group",{name:"Object_15"})})}),k.jsx("group",{name:"Area002",position:[-888.088,321.865,-341.96],rotation:[0,0,1.672],scale:100,children:k.jsx("group",{name:"Object_17",rotation:[Math.PI/2,0,0],children:k.jsx("group",{name:"Object_18"})})}),k.jsx("group",{name:"Light001",position:[-212.659,804.176,610.725],rotation:[1.89,.881,-2.045],scale:100,children:k.jsx("group",{name:"Object_20",rotation:[Math.PI/2,0,0],children:k.jsx("group",{name:"Object_21"})})}),k.jsx("group",{name:"Light002",position:[-212.659,1006.576,-775.857],rotation:[1.89,.881,-2.045],scale:100,children:k.jsx("group",{name:"Object_23",rotation:[Math.PI/2,0,0],children:k.jsx("group",{name:"Object_24"})})}),k.jsx("group",{name:"Circle",position:[-5.467,22.872,-275.205],rotation:[-Math.PI/2,0,0],scale:[142.07,144.705,118.36],children:k.jsx("mesh",{castShadow:!0,name:"Circle_Material005_0",geometry:r.Circle_Material005_0.geometry,material:a["Material.005"]})}),k.jsx("group",{name:"Cylinder001",position:[-8.338,504.339,-316.572],rotation:[-Math.PI/2,0,0],scale:150.49}),k.jsx("group",{name:"Armature",position:[-5.645,381.247,-326.131],rotation:[-Math.PI/2,0,0],scale:100,children:k.jsxs("group",{name:"Object_29",children:[k.jsx("primitive",{object:r._rootJoint}),k.jsx("group",{name:"Object_31",position:[-8.338,504.339,-316.572],rotation:[-Math.PI/2,0,0],scale:150.49}),k.jsx("skinnedMesh",{castShadow:!0,name:"Object_32",geometry:r.Object_32.geometry,material:Object.assign(a.material_0,{transparent:!0,opacity:.1}),skeleton:r.Object_32.skeleton})]})})]})})})})})})}function jJ(){return k.jsx(sW,{shadows:!0,children:k.jsxs(IJ,{enabled:!0,children:[k.jsx(VJ,{}),k.jsx(sK,{}),k.jsx(kJ,{position:[1,2,1]}),k.jsxs(lt.Suspense,{fallback:null,children:[k.jsx(QJ,{rotation:[0,-.8,0],position:[1,0,.8]}),k.jsx(tK,{rotation:[0,3,0],position:[0,0,1]})]}),k.jsxs("mesh",{receiveShadow:!0,rotation:[-Math.PI/2,0,0],children:[k.jsx("planeGeometry",{args:[100,100]}),k.jsx("shadowMaterial",{attach:"material",opacity:.3})]})]})})}const XJ=ie.header`
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 2rem;
  padding: 1rem;
  font-weight: 800;

  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  border-radius: 0.3rem;
  background-color: ${({theme:i})=>i.pallet.thirdColor};

  svg {
    fill: ${({theme:i})=>i.pallet.textColor};
  }
`,qJ=ie.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  font-feature-settings: "tnum";
  font-variant-numeric: tabular-nums;
`,YJ=ie.div`
  display: flex;
  align-items: center;
`,WJ=ie.div`
  display: flex;
  gap: 0.5rem;
  align-items: center;
`,KJ=ie.div`
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
  padding: 1rem 2rem 0.5rem;
`,JJ=ie.div`
  display: flex;
  justify-content: flex-end;
`,ZJ=ie.button`
  position: relative;
  width: 2rem;
  height: 2rem;
  z-index: ${({isOpen:i})=>i?100:1};
`,$J=ie.div`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.2rem;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  border-radius: 0.3rem;
  background-color: ${({theme:i})=>i.pallet.thirdColor};
  z-index: 2;
`,tZ=ie.button`
  position: absolute;
  inset: 0.3rem;
  transform: ${({visible:i,x:t,y:e})=>i?`translate(${t}rem, ${e}rem)`:"translate(0, 0)"};
  transition: transform 0.4s ease ${({index:i})=>i*.05}s;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.15rem;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  border-radius: 50%;
  background-color: ${({theme:i})=>i.pallet.thirdColor};
  z-index: 1;
`;function eZ(){const[i,t]=lt.useState(new Date),[e,n]=lt.useState(""),s=i.getHours().toString().padStart(2,"0"),r=i.getMinutes().toString().padStart(2,"0"),a=i.getSeconds().toString().padStart(2,"0"),l=(+s%12||12).toString().padStart(2,"0"),u=+s>=12?"PM":"AM";return lt.useEffect(()=>{const f=setInterval(()=>{t(new Date)},1e3);return()=>clearInterval(f)},[]),lt.useEffect(()=>{const f={weekday:"short",day:"numeric",month:"short"};n(i.toLocaleDateString("en-US",f))},[i]),k.jsxs(qJ,{children:[k.jsx("div",{children:e}),k.jsx("div",{children:`${l}:${r}:${a} ${u}`})]})}function Dr(i){return`Minified Redux error #${i}; visit https://redux.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}var nZ=typeof Symbol=="function"&&Symbol.observable||"@@observable",m9=nZ,J8=()=>Math.random().toString(36).substring(7).split("").join("."),iZ={INIT:`@@redux/INIT${J8()}`,REPLACE:`@@redux/REPLACE${J8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${J8()}`},cE=iZ;function g7(i){if(typeof i!="object"||i===null)return!1;let t=i;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(i)===t||Object.getPrototypeOf(i)===null}function _N(i,t,e){if(typeof i!="function")throw new Error(Dr(2));if(typeof t=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(Dr(0));if(typeof t=="function"&&typeof e>"u"&&(e=t,t=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(Dr(1));return e(_N)(i,t)}let n=i,s=t,r=new Map,a=r,l=0,u=!1;function f(){a===r&&(a=new Map,r.forEach((M,S)=>{a.set(S,M)}))}function m(){if(u)throw new Error(Dr(3));return s}function g(M){if(typeof M!="function")throw new Error(Dr(4));if(u)throw new Error(Dr(5));let S=!0;f();const R=l++;return a.set(R,M),function(){if(S){if(u)throw new Error(Dr(6));S=!1,f(),a.delete(R),r=null}}}function v(M){if(!g7(M))throw new Error(Dr(7));if(typeof M.type>"u")throw new Error(Dr(8));if(typeof M.type!="string")throw new Error(Dr(17));if(u)throw new Error(Dr(9));try{u=!0,s=n(s,M)}finally{u=!1}return(r=a).forEach(R=>{R()}),M}function _(M){if(typeof M!="function")throw new Error(Dr(10));n=M,v({type:cE.REPLACE})}function b(){const M=g;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Dr(11));function R(){const B=S;B.next&&B.next(m())}return R(),{unsubscribe:M(R)}},[m9](){return this}}}return v({type:cE.INIT}),{dispatch:v,subscribe:g,getState:m,replaceReducer:_,[m9]:b}}function sZ(i){Object.keys(i).forEach(t=>{const e=i[t];if(typeof e(void 0,{type:cE.INIT})>"u")throw new Error(Dr(12));if(typeof e(void 0,{type:cE.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Dr(13))})}function rZ(i){const t=Object.keys(i),e={};for(let r=0;r<t.length;r++){const a=t[r];typeof i[a]=="function"&&(e[a]=i[a])}const n=Object.keys(e);let s;try{sZ(e)}catch(r){s=r}return function(a={},l){if(s)throw s;let u=!1;const f={};for(let m=0;m<n.length;m++){const g=n[m],v=e[g],_=a[g],b=v(_,l);if(typeof b>"u")throw l&&l.type,new Error(Dr(14));f[g]=b,u=u||b!==_}return u=u||n.length!==Object.keys(a).length,u?f:a}}function uE(...i){return i.length===0?t=>t:i.length===1?i[0]:i.reduce((t,e)=>(...n)=>t(e(...n)))}function aZ(...i){return t=>(e,n)=>{const s=t(e,n);let r=()=>{throw new Error(Dr(15))};const a={getState:s.getState,dispatch:(u,...f)=>r(u,...f)},l=i.map(u=>u(a));return r=uE(...l)(s.dispatch),{...s,dispatch:r}}}function oZ(i){return g7(i)&&"type"in i&&typeof i.type=="string"}var AN=Symbol.for("immer-nothing"),g9=Symbol.for("immer-draftable"),Xo=Symbol.for("immer-state");function Tc(i,...t){throw new Error(`[Immer] minified error nr: ${i}. Full error at: https://bit.ly/3cXEKWf`)}var _y=Object.getPrototypeOf;function Wg(i){return!!i&&!!i[Xo]}function of(i){var t;return i?xN(i)||Array.isArray(i)||!!i[g9]||!!((t=i.constructor)!=null&&t[g9])||wM(i)||RM(i):!1}var lZ=Object.prototype.constructor.toString();function xN(i){if(!i||typeof i!="object")return!1;const t=_y(i);if(t===null)return!0;const e=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return e===Object?!0:typeof e=="function"&&Function.toString.call(e)===lZ}function hE(i,t){CM(i)===0?Reflect.ownKeys(i).forEach(e=>{t(e,i[e],i)}):i.forEach((e,n)=>t(n,e,i))}function CM(i){const t=i[Xo];return t?t.type_:Array.isArray(i)?1:wM(i)?2:RM(i)?3:0}function G5(i,t){return CM(i)===2?i.has(t):Object.prototype.hasOwnProperty.call(i,t)}function bN(i,t,e){const n=CM(i);n===2?i.set(t,e):n===3?i.add(e):i[t]=e}function cZ(i,t){return i===t?i!==0||1/i===1/t:i!==i&&t!==t}function wM(i){return i instanceof Map}function RM(i){return i instanceof Set}function Em(i){return i.copy_||i.base_}function k5(i,t){if(wM(i))return new Map(i);if(RM(i))return new Set(i);if(Array.isArray(i))return Array.prototype.slice.call(i);const e=xN(i);if(t===!0||t==="class_only"&&!e){const n=Object.getOwnPropertyDescriptors(i);delete n[Xo];let s=Reflect.ownKeys(n);for(let r=0;r<s.length;r++){const a=s[r],l=n[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:i[a]})}return Object.create(_y(i),n)}else{const n=_y(i);if(n!==null&&e)return{...i};const s=Object.create(n);return Object.assign(s,i)}}function v7(i,t=!1){return LM(i)||Wg(i)||!of(i)||(CM(i)>1&&(i.set=i.add=i.clear=i.delete=uZ),Object.freeze(i),t&&Object.entries(i).forEach(([e,n])=>v7(n,!0))),i}function uZ(){Tc(2)}function LM(i){return Object.isFrozen(i)}var hZ={};function Kg(i){const t=hZ[i];return t||Tc(0,i),t}var lA;function SN(){return lA}function fZ(i,t){return{drafts_:[],parent_:i,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function v9(i,t){t&&(Kg("Patches"),i.patches_=[],i.inversePatches_=[],i.patchListener_=t)}function V5(i){Q5(i),i.drafts_.forEach(dZ),i.drafts_=null}function Q5(i){i===lA&&(lA=i.parent_)}function y9(i){return lA=fZ(lA,i)}function dZ(i){const t=i[Xo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function _9(i,t){t.unfinalizedDrafts_=t.drafts_.length;const e=t.drafts_[0];return i!==void 0&&i!==e?(e[Xo].modified_&&(V5(t),Tc(4)),of(i)&&(i=fE(t,i),t.parent_||dE(t,i)),t.patches_&&Kg("Patches").generateReplacementPatches_(e[Xo].base_,i,t.patches_,t.inversePatches_)):i=fE(t,e,[]),V5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),i!==AN?i:void 0}function fE(i,t,e){if(LM(t))return t;const n=t[Xo];if(!n)return hE(t,(s,r)=>A9(i,n,t,s,r,e)),t;if(n.scope_!==i)return t;if(!n.modified_)return dE(i,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let r=s,a=!1;n.type_===3&&(r=new Set(s),s.clear(),a=!0),hE(r,(l,u)=>A9(i,n,s,l,u,e,a)),dE(i,s,!1),e&&i.patches_&&Kg("Patches").generatePatches_(n,e,i.patches_,i.inversePatches_)}return n.copy_}function A9(i,t,e,n,s,r,a){if(Wg(s)){const l=r&&t&&t.type_!==3&&!G5(t.assigned_,n)?r.concat(n):void 0,u=fE(i,s,l);if(bN(e,n,u),Wg(u))i.canAutoFreeze_=!1;else return}else a&&e.add(s);if(of(s)&&!LM(s)){if(!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1)return;fE(i,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(e,n)&&dE(i,s)}}function dE(i,t,e=!1){!i.parent_&&i.immer_.autoFreeze_&&i.canAutoFreeze_&&v7(t,e)}function pZ(i,t){const e=Array.isArray(i),n={type_:e?1:0,scope_:t?t.scope_:SN(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:i,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,r=y7;e&&(s=[n],r=cA);const{revoke:a,proxy:l}=Proxy.revocable(s,r);return n.draft_=l,n.revoke_=a,l}var y7={get(i,t){if(t===Xo)return i;const e=Em(i);if(!G5(e,t))return mZ(i,e,t);const n=e[t];return i.finalized_||!of(n)?n:n===Z8(i.base_,t)?($8(i),i.copy_[t]=X5(n,i)):n},has(i,t){return t in Em(i)},ownKeys(i){return Reflect.ownKeys(Em(i))},set(i,t,e){const n=EN(Em(i),t);if(n!=null&&n.set)return n.set.call(i.draft_,e),!0;if(!i.modified_){const s=Z8(Em(i),t),r=s==null?void 0:s[Xo];if(r&&r.base_===e)return i.copy_[t]=e,i.assigned_[t]=!1,!0;if(cZ(e,s)&&(e!==void 0||G5(i.base_,t)))return!0;$8(i),j5(i)}return i.copy_[t]===e&&(e!==void 0||t in i.copy_)||Number.isNaN(e)&&Number.isNaN(i.copy_[t])||(i.copy_[t]=e,i.assigned_[t]=!0),!0},deleteProperty(i,t){return Z8(i.base_,t)!==void 0||t in i.base_?(i.assigned_[t]=!1,$8(i),j5(i)):delete i.assigned_[t],i.copy_&&delete i.copy_[t],!0},getOwnPropertyDescriptor(i,t){const e=Em(i),n=Reflect.getOwnPropertyDescriptor(e,t);return n&&{writable:!0,configurable:i.type_!==1||t!=="length",enumerable:n.enumerable,value:e[t]}},defineProperty(){Tc(11)},getPrototypeOf(i){return _y(i.base_)},setPrototypeOf(){Tc(12)}},cA={};hE(y7,(i,t)=>{cA[i]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});cA.deleteProperty=function(i,t){return cA.set.call(this,i,t,void 0)};cA.set=function(i,t,e){return y7.set.call(this,i[0],t,e,i[0])};function Z8(i,t){const e=i[Xo];return(e?Em(e):i)[t]}function mZ(i,t,e){var s;const n=EN(t,e);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(i.draft_):void 0}function EN(i,t){if(!(t in i))return;let e=_y(i);for(;e;){const n=Object.getOwnPropertyDescriptor(e,t);if(n)return n;e=_y(e)}}function j5(i){i.modified_||(i.modified_=!0,i.parent_&&j5(i.parent_))}function $8(i){i.copy_||(i.copy_=k5(i.base_,i.scope_.immer_.useStrictShallowCopy_))}var gZ=class{constructor(i){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,n)=>{if(typeof t=="function"&&typeof e!="function"){const r=e;e=t;const a=this;return function(u=r,...f){return a.produce(u,m=>e.call(this,m,...f))}}typeof e!="function"&&Tc(6),n!==void 0&&typeof n!="function"&&Tc(7);let s;if(of(t)){const r=y9(this),a=X5(t,void 0);let l=!0;try{s=e(a),l=!1}finally{l?V5(r):Q5(r)}return v9(r,n),_9(s,r)}else if(!t||typeof t!="object"){if(s=e(t),s===void 0&&(s=t),s===AN&&(s=void 0),this.autoFreeze_&&v7(s,!0),n){const r=[],a=[];Kg("Patches").generateReplacementPatches_(t,s,r,a),n(r,a)}return s}else Tc(1,t)},this.produceWithPatches=(t,e)=>{if(typeof t=="function")return(a,...l)=>this.produceWithPatches(a,u=>t(u,...l));let n,s;return[this.produce(t,e,(a,l)=>{n=a,s=l}),n,s]},typeof(i==null?void 0:i.autoFreeze)=="boolean"&&this.setAutoFreeze(i.autoFreeze),typeof(i==null?void 0:i.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(i.useStrictShallowCopy)}createDraft(i){of(i)||Tc(8),Wg(i)&&(i=vZ(i));const t=y9(this),e=X5(i,void 0);return e[Xo].isManual_=!0,Q5(t),e}finishDraft(i,t){const e=i&&i[Xo];(!e||!e.isManual_)&&Tc(9);const{scope_:n}=e;return v9(n,t),_9(void 0,n)}setAutoFreeze(i){this.autoFreeze_=i}setUseStrictShallowCopy(i){this.useStrictShallowCopy_=i}applyPatches(i,t){let e;for(e=t.length-1;e>=0;e--){const s=t[e];if(s.path.length===0&&s.op==="replace"){i=s.value;break}}e>-1&&(t=t.slice(e+1));const n=Kg("Patches").applyPatches_;return Wg(i)?n(i,t):this.produce(i,s=>n(s,t))}};function X5(i,t){const e=wM(i)?Kg("MapSet").proxyMap_(i,t):RM(i)?Kg("MapSet").proxySet_(i,t):pZ(i,t);return(t?t.scope_:SN()).drafts_.push(e),e}function vZ(i){return Wg(i)||Tc(10,i),MN(i)}function MN(i){if(!of(i)||LM(i))return i;const t=i[Xo];let e;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,e=k5(i,t.scope_.immer_.useStrictShallowCopy_)}else e=k5(i,!0);return hE(e,(n,s)=>{bN(e,n,MN(s))}),t&&(t.finalized_=!1),e}var qo=new gZ,TN=qo.produce;qo.produceWithPatches.bind(qo);qo.setAutoFreeze.bind(qo);qo.setUseStrictShallowCopy.bind(qo);qo.applyPatches.bind(qo);qo.createDraft.bind(qo);qo.finishDraft.bind(qo);function CN(i){return({dispatch:e,getState:n})=>s=>r=>typeof r=="function"?r(e,n,i):s(r)}var yZ=CN(),_Z=CN,AZ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?uE:uE.apply(null,arguments)};function x9(i,t){function e(...n){if(t){let s=t(...n);if(!s)throw new Error(tf(0));return{type:i,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:i,payload:n[0]}}return e.toString=()=>`${i}`,e.type=i,e.match=n=>oZ(n)&&n.type===i,e}var wN=class p_ extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,p_.prototype)}static get[Symbol.species](){return p_}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new p_(...t[0].concat(this)):new p_(...t.concat(this))}};function b9(i){return of(i)?TN(i,()=>{}):i}function v4(i,t,e){return i.has(t)?i.get(t):i.set(t,e(t)).get(t)}function xZ(i){return typeof i=="boolean"}var bZ=()=>function(t){const{thunk:e=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:r=!0}=t??{};let a=new wN;return e&&(xZ(e)?a.push(yZ):a.push(_Z(e.extraArgument))),a},SZ="RTK_autoBatch",S9=i=>t=>{setTimeout(t,i)},EZ=(i={type:"raf"})=>t=>(...e)=>{const n=t(...e);let s=!0,r=!1,a=!1;const l=new Set,u=i.type==="tick"?queueMicrotask:i.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:S9(10):i.type==="callback"?i.queueNotification:S9(i.timeout),f=()=>{a=!1,r&&(r=!1,l.forEach(m=>m()))};return Object.assign({},n,{subscribe(m){const g=()=>s&&m(),v=n.subscribe(g);return l.add(m),()=>{v(),l.delete(m)}},dispatch(m){var g;try{return s=!((g=m==null?void 0:m.meta)!=null&&g[SZ]),r=!s,r&&(a||(a=!0,u(f))),n.dispatch(m)}finally{s=!0}}})},MZ=i=>function(e){const{autoBatch:n=!0}=e??{};let s=new wN(i);return n&&s.push(EZ(typeof n=="object"?n:void 0)),s};function TZ(i){const t=bZ(),{reducer:e=void 0,middleware:n,devTools:s=!0,preloadedState:r=void 0,enhancers:a=void 0}=i||{};let l;if(typeof e=="function")l=e;else if(g7(e))l=rZ(e);else throw new Error(tf(1));let u;typeof n=="function"?u=n(t):u=t();let f=uE;s&&(f=AZ({trace:!1,...typeof s=="object"&&s}));const m=aZ(...u),g=MZ(m);let v=typeof a=="function"?a(g):g();const _=f(...v);return _N(l,r,_)}function RN(i){const t={},e=[];let n;const s={addCase(r,a){const l=typeof r=="string"?r:r.type;if(!l)throw new Error(tf(28));if(l in t)throw new Error(tf(29));return t[l]=a,s},addMatcher(r,a){return e.push({matcher:r,reducer:a}),s},addDefaultCase(r){return n=r,s}};return i(s),[t,e,n]}function CZ(i){return typeof i=="function"}function wZ(i,t){let[e,n,s]=RN(t),r;if(CZ(i))r=()=>b9(i());else{const l=b9(i);r=()=>l}function a(l=r(),u){let f=[e[u.type],...n.filter(({matcher:m})=>m(u)).map(({reducer:m})=>m)];return f.filter(m=>!!m).length===0&&(f=[s]),f.reduce((m,g)=>{if(g)if(Wg(m)){const _=g(m,u);return _===void 0?m:_}else{if(of(m))return TN(m,v=>g(v,u));{const v=g(m,u);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return m},l)}return a.getInitialState=r,a}var RZ=Symbol.for("rtk-slice-createasyncthunk");function LZ(i,t){return`${i}/${t}`}function DZ({creators:i}={}){var e;const t=(e=i==null?void 0:i.asyncThunk)==null?void 0:e[RZ];return function(s){const{name:r,reducerPath:a=r}=s;if(!r)throw new Error(tf(11));const l=(typeof s.reducers=="function"?s.reducers(OZ()):s.reducers)||{},u=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(B,N){const I=typeof B=="string"?B:B.type;if(!I)throw new Error(tf(12));if(I in f.sliceCaseReducersByType)throw new Error(tf(13));return f.sliceCaseReducersByType[I]=N,m},addMatcher(B,N){return f.sliceMatchers.push({matcher:B,reducer:N}),m},exposeAction(B,N){return f.actionCreators[B]=N,m},exposeCaseReducer(B,N){return f.sliceCaseReducersByName[B]=N,m}};u.forEach(B=>{const N=l[B],I={reducerName:B,type:LZ(r,B),createNotation:typeof s.reducers=="function"};IZ(N)?PZ(I,N,m,t):NZ(I,N,m)});function g(){const[B={},N=[],I=void 0]=typeof s.extraReducers=="function"?RN(s.extraReducers):[s.extraReducers],F={...B,...f.sliceCaseReducersByType};return wZ(s.initialState,z=>{for(let U in F)z.addCase(U,F[U]);for(let U of f.sliceMatchers)z.addMatcher(U.matcher,U.reducer);for(let U of N)z.addMatcher(U.matcher,U.reducer);I&&z.addDefaultCase(I)})}const v=B=>B,_=new Map,b=new WeakMap;let C;function M(B,N){return C||(C=g()),C(B,N)}function S(){return C||(C=g()),C.getInitialState()}function R(B,N=!1){function I(z){let U=z[B];return typeof U>"u"&&N&&(U=v4(b,I,S)),U}function F(z=v){const U=v4(_,N,()=>new WeakMap);return v4(U,z,()=>{const P={};for(const[X,ot]of Object.entries(s.selectors??{}))P[X]=BZ(ot,z,()=>v4(b,z,S),N);return P})}return{reducerPath:B,getSelectors:F,get selectors(){return F(I)},selectSlice:I}}const D={name:r,reducer:M,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:S,...R(a),injectInto(B,{reducerPath:N,...I}={}){const F=N??a;return B.inject({reducerPath:F,reducer:M},I),{...D,...R(F,!0)}}};return D}}function BZ(i,t,e,n){function s(r,...a){let l=t(r);return typeof l>"u"&&n&&(l=e()),i(l,...a)}return s.unwrapped=i,s}var _7=DZ();function OZ(){function i(t,e){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...e}}return i.withTypes=()=>i,{reducer(t){return Object.assign({[t.name](...e){return t(...e)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,e){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:e}},asyncThunk:i}}function NZ({type:i,reducerName:t,createNotation:e},n,s){let r,a;if("reducer"in n){if(e&&!UZ(n))throw new Error(tf(17));r=n.reducer,a=n.prepare}else r=n;s.addCase(i,r).exposeCaseReducer(t,r).exposeAction(t,a?x9(i,a):x9(i))}function IZ(i){return i._reducerDefinitionType==="asyncThunk"}function UZ(i){return i._reducerDefinitionType==="reducerWithPrepare"}function PZ({type:i,reducerName:t},e,n,s){if(!s)throw new Error(tf(18));const{payloadCreator:r,fulfilled:a,pending:l,rejected:u,settled:f,options:m}=e,g=s(i,r,m);n.exposeAction(t,g),a&&n.addCase(g.fulfilled,a),l&&n.addCase(g.pending,l),u&&n.addCase(g.rejected,u),f&&n.addMatcher(g.settled,f),n.exposeCaseReducer(t,{fulfilled:a||y4,pending:l||y4,rejected:u||y4,settled:f||y4})}function y4(){}function tf(i){return`Minified Redux Toolkit error #${i}; visit https://redux-toolkit.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}let LN=0;const FZ={popups:[]},DN=_7({name:"popup",initialState:FZ,reducers:{openPopup:(i,t)=>{i.popups.push({id:++LN,result:"success",...t.payload})},openThunkPopup:(i,t)=>{i.popups.push({result:"success",...t.payload})},closePopup:(i,t)=>{i.popups=i.popups.filter(e=>e.id!==t.payload)},closeAllPopups:i=>{i.popups=[]}}}),{openPopup:_rt,closePopup:HZ,closeAllPopups:Art,openThunkPopup:zZ}=DN.actions,q5=(i,t="success")=>e=>{const n=++LN;e(zZ({type:"toast",text:i,id:n,result:t}))},GZ=DN.reducer;function kZ(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 256 0 Q 184.7741935483871 1.032258064516129 126.96774193548387 35.096774193548384 L 126.96774193548387 35.096774193548384 L 126.96774193548387 35.096774193548384 Q 69.16129032258064 69.16129032258064 35.096774193548384 126.96774193548387 L 35.096774193548384 126.96774193548387 L 35.096774193548384 126.96774193548387 Q 1.032258064516129 184.7741935483871 0 256 Q 1.032258064516129 327.2258064516129 35.096774193548384 385.03225806451616 Q 69.16129032258064 442.83870967741933 126.96774193548387 476.9032258064516 Q 184.7741935483871 510.96774193548384 256 512 Q 327.2258064516129 510.96774193548384 385.03225806451616 476.9032258064516 Q 442.83870967741933 442.83870967741933 476.9032258064516 385.03225806451616 Q 510.96774193548384 327.2258064516129 512 256 Q 510.96774193548384 184.7741935483871 476.9032258064516 126.96774193548387 Q 442.83870967741933 69.16129032258064 385.03225806451616 35.096774193548384 Q 327.2258064516129 1.032258064516129 256 0 L 256 0 Z M 374.7096774193548 174.4516129032258 Q 372.64516129032256 195.09677419354838 367.48387096774195 230.19354838709677 L 367.48387096774195 230.19354838709677 L 367.48387096774195 230.19354838709677 Q 362.3225806451613 264.258064516129 356.1290322580645 299.35483870967744 L 356.1290322580645 299.35483870967744 L 356.1290322580645 299.35483870967744 Q 349.93548387096774 334.4516129032258 345.80645161290323 358.19354838709677 Q 339.61290322580646 385.03225806451616 328.258064516129 384 Q 311.741935483871 384 296.258064516129 371.61290322580646 Q 292.1290322580645 368.51612903225805 288 365.4193548387097 Q 270.4516129032258 354.06451612903226 258.06451612903226 344.7741935483871 Q 245.67741935483872 336.51612903225805 230.19354838709677 327.2258064516129 Q 214.70967741935485 315.8709677419355 217.80645161290323 308.64516129032256 Q 219.8709677419355 300.38709677419354 230.19354838709677 292.1290322580645 Q 233.29032258064515 289.03225806451616 236.38709677419354 285.93548387096774 Q 237.41935483870967 283.8709677419355 247.74193548387098 275.61290322580646 Q 264.258064516129 260.1290322580645 283.8709677419355 240.51612903225808 Q 304.51612903225805 221.93548387096774 306.5806451612903 216.7741935483871 Q 307.61290322580646 215.74193548387098 305.5483870967742 212.6451612903226 Q 302.4516129032258 210.58064516129033 300.38709677419354 211.61290322580646 Q 296.258064516129 212.6451612903226 192 283.8709677419355 Q 176.51612903225808 294.19354838709677 164.1290322580645 293.16129032258067 Q 156.90322580645162 293.16129032258067 145.5483870967742 290.06451612903226 Q 134.19354838709677 288 124.90322580645162 283.8709677419355 Q 121.80645161290323 282.83870967741933 118.70967741935483 282.83870967741933 Q 97.03225806451613 277.6774193548387 97.03225806451613 267.35483870967744 Q 98.06451612903226 260.1290322580645 115.61290322580645 252.90322580645162 Q 228.1290322580645 204.38709677419354 265.2903225806452 188.90322580645162 Q 316.9032258064516 167.2258064516129 335.48387096774195 161.03225806451613 Q 355.0967741935484 153.80645161290323 360.258064516129 153.80645161290323 Q 365.4193548387097 153.80645161290323 370.5806451612903 156.90322580645162 Q 373.6774193548387 160 374.7096774193548 164.1290322580645 Q 374.7096774193548 169.29032258064515 374.7096774193548 174.4516129032258 L 374.7096774193548 174.4516129032258 Z"})})}function VZ(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 171.3548387096774 407.741935483871 Q 170.32258064516128 411.8709677419355 166.19354838709677 411.8709677419355 Q 160 411.8709677419355 160 407.741935483871 Q 161.03225806451613 404.64516129032256 165.16129032258064 404.64516129032256 Q 170.32258064516128 404.64516129032256 171.3548387096774 407.741935483871 L 171.3548387096774 407.741935483871 Z M 139.3548387096774 403.61290322580646 Q 138.32258064516128 406.7096774193548 143.48387096774192 408.7741935483871 Q 148.6451612903226 409.80645161290323 149.67741935483872 406.7096774193548 Q 150.70967741935485 402.5806451612903 145.5483870967742 401.5483870967742 Q 140.38709677419354 400.51612903225805 139.3548387096774 403.61290322580646 L 139.3548387096774 403.61290322580646 Z M 184.7741935483871 401.5483870967742 Q 179.61290322580646 402.5806451612903 179.61290322580646 406.7096774193548 Q 180.6451612903226 409.80645161290323 185.80645161290323 409.80645161290323 Q 190.96774193548387 407.741935483871 190.96774193548387 404.64516129032256 Q 189.93548387096774 401.5483870967742 184.7741935483871 401.5483870967742 L 184.7741935483871 401.5483870967742 Z M 252.90322580645162 6.193548387096774 Q 142.4516129032258 8.258064516129032 72.25806451612904 78.45161290322581 L 72.25806451612904 78.45161290322581 L 72.25806451612904 78.45161290322581 Q 2.064516129032258 148.6451612903226 0 258.06451612903226 Q 1.032258064516129 345.80645161290323 48.516129032258064 411.8709677419355 Q 96 477.93548387096774 175.48387096774192 504.7741935483871 Q 194.06451612903226 505.80645161290323 193.03225806451613 492.38709677419354 Q 193.03225806451613 488.258064516129 193.03225806451613 476.9032258064516 Q 193.03225806451613 453.16129032258067 193.03225806451613 429.4193548387097 Q 190.96774193548387 429.4193548387097 173.41935483870967 431.48387096774195 Q 154.83870967741936 432.51612903225805 134.19354838709677 427.35483870967744 Q 113.54838709677419 421.16129032258067 105.29032258064517 398.4516129032258 Q 105.29032258064517 396.38709677419354 97.03225806451613 381.93548387096774 Q 88.7741935483871 368.51612903225805 76.38709677419355 360.258064516129 Q 74.3225806451613 359.2258064516129 68.12903225806451 352 Q 60.903225806451616 345.80645161290323 78.45161290322581 344.7741935483871 Q 79.48387096774194 343.741935483871 92.90322580645162 348.9032258064516 Q 106.3225806451613 353.03225806451616 117.6774193548387 371.61290322580646 Q 136.25806451612902 399.48387096774195 157.93548387096774 399.48387096774195 Q 180.6451612903226 399.48387096774195 193.03225806451613 393.2903225806452 Q 197.16129032258064 368.51612903225805 209.5483870967742 358.19354838709677 Q 164.1290322580645 356.1290322580645 130.06451612903226 335.48387096774195 Q 96 315.8709677419355 93.93548387096774 243.61290322580646 Q 93.93548387096774 222.96774193548387 100.12903225806451 209.5483870967742 Q 105.29032258064517 196.1290322580645 117.6774193548387 183.74193548387098 Q 115.61290322580645 177.5483870967742 113.54838709677419 158.96774193548387 Q 111.48387096774194 140.38709677419354 120.7741935483871 113.54838709677419 Q 139.3548387096774 110.45161290322581 164.1290322580645 124.90322580645162 Q 189.93548387096774 138.32258064516128 192 141.41935483870967 Q 192 141.41935483870967 192 141.41935483870967 Q 222.96774193548387 132.1290322580645 257.03225806451616 132.1290322580645 Q 290.06451612903226 132.1290322580645 322.06451612903226 141.41935483870967 Q 322.06451612903226 140.38709677419354 335.48387096774195 132.1290322580645 Q 347.8709677419355 123.87096774193549 364.38709677419354 117.6774193548387 Q 380.9032258064516 110.45161290322581 393.2903225806452 113.54838709677419 Q 402.5806451612903 140.38709677419354 400.51612903225805 158.96774193548387 Q 398.4516129032258 177.5483870967742 395.35483870967744 183.74193548387098 Q 407.741935483871 196.1290322580645 414.96774193548384 209.5483870967742 Q 422.19354838709677 222.96774193548387 422.19354838709677 243.61290322580646 Q 421.16129032258067 293.16129032258067 404.64516129032256 316.9032258064516 Q 387.0967741935484 339.61290322580646 360.258064516129 347.8709677419355 Q 333.4193548387097 356.1290322580645 303.48387096774195 358.19354838709677 Q 320 369.5483870967742 321.03225806451616 405.6774193548387 Q 321.03225806451616 443.8709677419355 321.03225806451616 473.80645161290323 Q 321.03225806451616 487.2258064516129 321.03225806451616 492.38709677419354 Q 320 505.80645161290323 338.5806451612903 504.7741935483871 Q 417.03225806451616 477.93548387096774 464.51612903225805 411.8709677419355 Q 510.96774193548384 345.80645161290323 512 258.06451612903226 Q 510.96774193548384 185.80645161290323 476.9032258064516 129.03225806451613 Q 441.80645161290323 72.25806451612904 384 39.225806451612904 Q 325.16129032258067 7.225806451612903 252.90322580645162 6.193548387096774 L 252.90322580645162 6.193548387096774 Z M 100.12903225806451 362.3225806451613 Q 98.06451612903226 364.38709677419354 101.16129032258064 367.48387096774195 Q 104.25806451612904 370.5806451612903 106.3225806451613 368.51612903225805 Q 108.38709677419355 366.4516129032258 105.29032258064517 363.35483870967744 Q 103.2258064516129 360.258064516129 100.12903225806451 362.3225806451613 L 100.12903225806451 362.3225806451613 Z M 88.7741935483871 354.06451612903226 Q 88.7741935483871 356.1290322580645 91.87096774193549 358.19354838709677 Q 94.96774193548387 359.2258064516129 96 357.16129032258067 Q 97.03225806451613 355.0967741935484 93.93548387096774 353.03225806451616 Q 90.83870967741936 352 88.7741935483871 354.06451612903226 L 88.7741935483871 354.06451612903226 Z M 122.83870967741936 390.19354838709677 Q 120.7741935483871 393.2903225806452 123.87096774193549 397.4193548387097 Q 128 400.51612903225805 131.09677419354838 398.4516129032258 Q 132.1290322580645 395.35483870967744 129.03225806451613 391.2258064516129 Q 124.90322580645162 388.1290322580645 122.83870967741936 390.19354838709677 L 122.83870967741936 390.19354838709677 Z M 110.45161290322581 375.741935483871 Q 108.38709677419355 377.80645161290323 110.45161290322581 381.93548387096774 Q 113.54838709677419 385.03225806451616 116.64516129032258 384 Q 118.70967741935483 381.93548387096774 116.64516129032258 377.80645161290323 Q 113.54838709677419 373.6774193548387 110.45161290322581 375.741935483871 L 110.45161290322581 375.741935483871 Z"})})}function QZ(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 475.42857142857144 0 L 36.57142857142857 0 L 475.42857142857144 0 L 36.57142857142857 0 Q 20.571428571428573 0 10.285714285714286 10.285714285714286 Q 0 21.714285714285715 0 36.57142857142857 L 0 475.42857142857144 L 0 475.42857142857144 Q 0 490.2857142857143 10.285714285714286 501.7142857142857 Q 20.571428571428573 512 36.57142857142857 512 L 475.42857142857144 512 L 475.42857142857144 512 Q 491.42857142857144 512 501.7142857142857 501.7142857142857 Q 512 490.2857142857143 512 475.42857142857144 L 512 36.57142857142857 L 512 36.57142857142857 Q 512 21.714285714285715 501.7142857142857 10.285714285714286 Q 491.42857142857144 0 475.42857142857144 0 L 475.42857142857144 0 Z M 154.28571428571428 438.85714285714283 L 78.85714285714286 438.85714285714283 L 154.28571428571428 438.85714285714283 L 78.85714285714286 438.85714285714283 L 78.85714285714286 194.28571428571428 L 78.85714285714286 194.28571428571428 L 155.42857142857142 194.28571428571428 L 155.42857142857142 194.28571428571428 L 155.42857142857142 438.85714285714283 L 154.28571428571428 438.85714285714283 Z M 116.57142857142857 161.14285714285714 Q 98.28571428571429 161.14285714285714 85.71428571428571 148.57142857142858 L 85.71428571428571 148.57142857142858 L 85.71428571428571 148.57142857142858 Q 73.14285714285714 136 73.14285714285714 117.71428571428571 Q 73.14285714285714 98.28571428571429 85.71428571428571 85.71428571428571 Q 98.28571428571429 73.14285714285714 116.57142857142857 73.14285714285714 Q 136 73.14285714285714 147.42857142857142 85.71428571428571 Q 160 98.28571428571429 161.14285714285714 117.71428571428571 Q 160 136 147.42857142857142 148.57142857142858 Q 136 161.14285714285714 116.57142857142857 161.14285714285714 L 116.57142857142857 161.14285714285714 Z M 438.85714285714283 438.85714285714283 L 363.42857142857144 438.85714285714283 L 438.85714285714283 438.85714285714283 L 363.42857142857144 438.85714285714283 L 363.42857142857144 320 L 363.42857142857144 320 Q 364.57142857142856 297.14285714285717 357.7142857142857 276.57142857142856 Q 352 257.14285714285717 323.42857142857144 254.85714285714286 Q 294.85714285714283 256 285.7142857142857 274.2857142857143 Q 277.7142857142857 292.57142857142856 278.85714285714283 317.7142857142857 L 278.85714285714283 438.85714285714283 L 278.85714285714283 438.85714285714283 L 202.28571428571428 438.85714285714283 L 202.28571428571428 438.85714285714283 L 202.28571428571428 194.28571428571428 L 202.28571428571428 194.28571428571428 L 275.42857142857144 194.28571428571428 L 275.42857142857144 194.28571428571428 L 275.42857142857144 227.42857142857142 L 275.42857142857144 227.42857142857142 L 276.57142857142856 227.42857142857142 L 276.57142857142856 227.42857142857142 Q 283.42857142857144 212.57142857142858 301.7142857142857 201.14285714285714 Q 320 188.57142857142858 348.57142857142856 188.57142857142858 Q 404.57142857142856 189.71428571428572 422.85714285714283 221.71428571428572 Q 441.14285714285717 254.85714285714286 438.85714285714283 305.14285714285717 L 438.85714285714283 438.85714285714283 L 438.85714285714283 438.85714285714283 Z"})})}function jZ(){return k.jsxs(WJ,{children:[k.jsx("a",{href:"https://t.me/Nik0o_o",target:"_blank",children:k.jsx(kZ,{width:"1.5rem",height:"1.5rem",className:"cursor-pointer"})}),k.jsx("a",{href:"https://github.com/kanedaSh0tar0",target:"_blank",children:k.jsx(VZ,{width:"1.5rem",height:"1.5rem",className:"cursor-pointer"})}),k.jsx("a",{href:"https://www.linkedin.com/in/mykyta-antonov-246736354/",target:"_blank",children:k.jsx(QZ,{width:"1.5rem",height:"1.5rem",className:"cursor-pointer"})})]})}function XZ(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 283.29411764705884 48 Q 300.2352941176471 56.470588235294116 301.1764705882353 75.29411764705883 L 301.1764705882353 436.70588235294116 L 301.1764705882353 436.70588235294116 Q 300.2352941176471 455.52941176470586 283.29411764705884 464 Q 265.4117647058824 471.52941176470586 251.2941176470588 459.29411764705884 L 124.23529411764706 346.3529411764706 L 124.23529411764706 346.3529411764706 L 60.23529411764706 346.3529411764706 L 60.23529411764706 346.3529411764706 Q 34.8235294117647 345.4117647058824 17.88235294117647 328.47058823529414 Q 0.9411764705882353 311.52941176470586 0 286.11764705882354 L 0 225.88235294117646 L 0 225.88235294117646 Q 0.9411764705882353 200.47058823529412 17.88235294117647 183.52941176470588 Q 34.8235294117647 166.58823529411765 60.23529411764706 165.64705882352942 L 124.23529411764706 165.64705882352942 L 124.23529411764706 165.64705882352942 L 251.2941176470588 52.705882352941174 L 251.2941176470588 52.705882352941174 Q 265.4117647058824 40.470588235294116 283.29411764705884 48 L 283.29411764705884 48 Z M 445.1764705882353 115.76470588235294 Q 476.2352941176471 141.1764705882353 494.11764705882354 176.94117647058823 L 494.11764705882354 176.94117647058823 L 494.11764705882354 176.94117647058823 Q 512 213.64705882352942 512 256 Q 512 298.3529411764706 494.11764705882354 335.05882352941177 Q 476.2352941176471 370.8235294117647 445.1764705882353 396.2352941176471 Q 428.2352941176471 407.52941176470586 413.1764705882353 393.4117647058824 Q 401.88235294117646 375.52941176470586 416.94117647058823 361.4117647058824 Q 464.94117647058823 321.88235294117646 466.8235294117647 256 Q 464.94117647058823 190.11764705882354 416.94117647058823 150.58823529411765 Q 401.88235294117646 136.47058823529412 413.1764705882353 118.58823529411765 Q 428.2352941176471 104.47058823529412 445.1764705882353 115.76470588235294 L 445.1764705882353 115.76470588235294 Z M 388.70588235294116 186.35294117647058 Q 419.7647058823529 211.76470588235293 421.6470588235294 256 Q 419.7647058823529 300.2352941176471 388.70588235294116 326.5882352941176 Q 370.8235294117647 337.88235294117646 356.70588235294116 322.8235294117647 Q 345.4117647058824 305.88235294117646 359.52941176470586 290.8235294117647 Q 375.52941176470586 277.6470588235294 376.47058823529414 256 Q 375.52941176470586 234.35294117647058 359.52941176470586 221.1764705882353 Q 345.4117647058824 206.11764705882354 356.70588235294116 189.1764705882353 Q 370.8235294117647 174.11764705882354 388.70588235294116 185.41176470588235 L 388.70588235294116 186.35294117647058 Z"})})}function qZ(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 264.34305317324186 61.914236706689536 Q 280.1509433962264 69.81818181818181 281.02915951972557 87.38250428816467 L 281.02915951972557 424.6174957118353 L 281.02915951972557 424.6174957118353 Q 280.1509433962264 442.1818181818182 264.34305317324186 450.08576329331044 Q 247.65694682675814 457.1114922813036 234.483704974271 445.69468267581476 L 115.9245283018868 340.30874785591766 L 115.9245283018868 340.30874785591766 L 56.20583190394511 340.30874785591766 L 56.20583190394511 340.30874785591766 Q 32.493996569468266 339.4305317324185 16.686106346483704 323.62264150943395 Q 0.8782161234991424 307.8147512864494 0 284.10291595197253 L 0 227.89708404802744 L 0 227.89708404802744 Q 0.8782161234991424 204.1852487135506 16.686106346483704 188.37735849056602 Q 32.493996569468266 172.56946826758147 56.20583190394511 171.69125214408234 L 115.9245283018868 171.69125214408234 L 115.9245283018868 171.69125214408234 L 234.483704974271 66.30531732418525 L 234.483704974271 66.30531732418525 Q 247.65694682675814 54.888507718696395 264.34305317324186 61.914236706689536 L 264.34305317324186 61.914236706689536 Z M 373.24185248713553 177.83876500857633 L 421.54373927958835 226.14065180102915 L 373.24185248713553 177.83876500857633 L 421.54373927958835 226.14065180102915 L 469.84562607204117 177.83876500857633 L 469.84562607204117 177.83876500857633 Q 484.77530017152657 165.54373927958832 499.704974271012 177.83876500857633 Q 512 192.76843910806176 499.704974271012 207.69811320754718 L 451.4030874785592 256 L 451.4030874785592 256 L 499.704974271012 304.3018867924528 L 499.704974271012 304.3018867924528 Q 512 319.2315608919383 499.704974271012 334.16123499142367 Q 484.77530017152657 346.45626072041165 469.84562607204117 334.16123499142367 L 421.54373927958835 285.85934819897085 L 421.54373927958835 285.85934819897085 L 373.24185248713553 334.16123499142367 L 373.24185248713553 334.16123499142367 Q 358.3121783876501 346.45626072041165 343.3825042881647 334.16123499142367 Q 331.08747855917665 319.2315608919383 343.3825042881647 304.3018867924528 L 391.6843910806175 256 L 391.6843910806175 256 L 343.3825042881647 207.69811320754718 L 343.3825042881647 207.69811320754718 Q 331.08747855917665 192.76843910806176 343.3825042881647 177.83876500857633 Q 358.3121783876501 165.54373927958832 373.24185248713553 177.83876500857633 L 373.24185248713553 177.83876500857633 Z"})})}function YZ({isMuted:i,...t}){return k.jsx(k.Fragment,{children:i?k.jsx(qZ,{...t}):k.jsx(XZ,{...t})})}function WZ(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 496 167 Q 500 181 490 191 L 446 231 L 446 231 Q 448 243 448 256 Q 448 269 446 281 L 490 321 L 490 321 Q 500 331 496 345 Q 489 363 480 380 L 475 388 L 475 388 Q 465 404 453 419 Q 443 430 429 426 L 373 408 L 373 408 Q 353 424 329 433 L 317 491 L 317 491 Q 313 505 298 508 Q 278 512 256 512 Q 234 512 213 508 Q 199 505 195 491 L 183 433 L 183 433 Q 159 424 139 408 L 83 426 L 83 426 Q 69 430 59 419 Q 46 404 37 388 L 32 380 L 32 380 Q 23 363 16 346 Q 12 331 22 321 L 66 282 L 66 282 Q 64 269 64 256 Q 64 243 66 231 L 22 191 L 22 191 Q 12 181 16 167 Q 23 149 32 132 L 37 124 L 37 124 Q 46 108 59 93 Q 69 82 83 86 L 139 104 L 139 104 Q 159 88 183 78 L 195 21 L 195 21 Q 199 7 214 4 Q 234 0 256 0 Q 278 0 299 4 Q 313 7 317 21 L 329 78 L 329 78 Q 353 88 373 104 L 429 86 L 429 86 Q 443 82 453 93 Q 466 108 476 124 L 480 132 L 480 132 Q 489 149 496 167 L 496 167 Z M 256 336 Q 301 335 325 296 Q 347 256 325 216 Q 301 177 256 176 Q 211 177 187 216 Q 165 256 187 296 Q 211 335 256 336 L 256 336 Z"})})}function KZ(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 448 480 L 64 480 L 448 480 L 64 480 Q 37 479 19 461 Q 1 443 0 416 L 0 96 L 0 96 Q 1 69 19 51 Q 37 33 64 32 L 192 32 L 192 32 Q 224 33 243 58 L 262 83 L 262 83 Q 272 96 288 96 L 448 96 L 448 96 Q 475 97 493 115 Q 511 133 512 160 L 512 416 L 512 416 Q 511 443 493 461 Q 475 479 448 480 L 448 480 Z M 175 207 Q 161 224 175 241 L 222 288 L 222 288 L 175 335 L 175 335 Q 161 352 175 369 Q 192 383 209 369 L 256 322 L 256 322 L 303 369 L 303 369 Q 320 383 337 369 Q 351 352 337 335 L 290 288 L 290 288 L 337 241 L 337 241 Q 351 224 337 207 Q 320 193 303 207 L 256 254 L 256 254 L 209 207 L 209 207 Q 192 193 175 207 L 175 207 Z"})})}function JZ(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 226 6 Q 224 0 218 0 L 199 0 L 199 0 Q 192 0 190 6 L 169 58 L 169 58 Q 166 64 160 64 Q 154 64 151 58 L 130 6 L 130 6 Q 128 0 122 0 L 112 0 L 112 0 Q 92 1 78 14 Q 65 28 64 48 L 64 224 L 64 224 L 64 246 L 64 246 L 64 256 L 64 256 L 74 256 L 448 256 L 448 246 L 448 246 L 448 224 L 448 224 L 448 48 L 448 48 Q 447 28 434 14 Q 420 1 400 0 L 295 0 L 295 0 Q 288 0 286 6 L 265 58 L 265 58 Q 262 64 256 64 Q 250 64 247 58 L 226 6 L 226 6 Z M 64 288 L 64 320 L 64 288 L 64 320 Q 65 347 83 365 Q 101 383 128 384 L 192 384 L 192 384 L 192 448 L 192 448 Q 193 475 211 493 Q 229 511 256 512 Q 283 511 301 493 Q 319 475 320 448 L 320 384 L 320 384 L 384 384 L 384 384 Q 411 383 429 365 Q 447 347 448 320 L 448 288 L 448 288 L 64 288 L 64 288 Z M 256 432 Q 271 433 272 448 Q 271 463 256 464 Q 241 463 240 448 Q 241 433 256 432 L 256 432 Z"})})}const ZZ={clickDown:"sounds/click-down.mp3",clickUp:"sounds/click-up.mp3",intro:"sounds/intro-sound.mp3",notification:"sounds/pop.wav"},BN=lt.createContext(null),DM=()=>{const i=lt.useContext(BN);if(!i)throw new Error("useSounds must be used within SoundProvider");return i};function $Z({children:i}){const[t,e]=lt.useState(!1),[n,s]=lt.useState(!1),[r,a]=lt.useState(0),l=lt.useRef(null),u=lt.useRef(new Map),f=lt.useRef(null);lt.useEffect(()=>{l.current=new AudioContext,f.current=l.current.createGain(),f.current.connect(l.current.destination),f.current.gain.value=1;const S=async(D,B)=>{const I=await(await fetch(B)).arrayBuffer(),F=await l.current.decodeAudioData(I);u.current.set(D,F),a(z=>z+1)};(async()=>{const D=Object.entries(ZZ);await Promise.all(D.map(([B,N])=>S(B,N))),s(!0)})()},[]);const m=lt.useCallback(S=>{if(!n)return;const R=l.current,D=u.current.get(S),B=f.current;if(!R||!D||!B)return;R.state==="suspended"&&R.resume();const N=R.createBufferSource();N.buffer=D,N.connect(B),N.start(0)},[n]),g=lt.useCallback(()=>m("clickDown"),[m]),v=lt.useCallback(()=>m("clickUp"),[m]),_=lt.useCallback(()=>m("intro"),[m]),b=lt.useCallback(()=>m("notification"),[m]),C=S=>{const R=l.current,D=f.current;if(!R||!D)return;const B=R.currentTime;D.gain.cancelScheduledValues(B),D.gain.setValueAtTime(D.gain.value,B),D.gain.linearRampToValueAtTime(S,B+.1),e(S===0)},M=lt.useMemo(()=>({playClickDown:g,playClickUp:v,playIntro:_,playNotification:b,mute:()=>C(0),unmute:()=>C(1),isLoaded:n,loadProgress:r,isMuted:t}),[g,v,_,b,n,r,t]);return k.jsx(BN.Provider,{value:M,children:i})}const A7=document.documentElement.clientHeight,x7=document.documentElement.clientWidth,Pu=8,t$=12,e$=6,or=Math.min(x7/t$,A7/e$)-Pu/2,b7=or+2*Pu,S7=or,n$={modals:[{type:"photo",title:"My_photo.jpg",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:2*or,height:2*or},isClosing:!1},{type:"about_me",title:"About_me.txt",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:5*or,height:2.5*or},isClosing:!1},{type:"skills",title:"Skills.exe",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:2.5*or,height:4*or},isClosing:!1},{type:"experience",title:"Work_experience.exe",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:3.5*or,height:4.5*or},isClosing:!1},{type:"pdf",title:"Resume.pdf",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:6.5*or,height:5*or},isClosing:!1},{type:"contact_me",title:"Email",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:6*or,height:5*or},isClosing:!1},{type:"folder",title:"New Folder",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:6*or,height:4*or},isClosing:!1},{type:"settings",title:"Settings",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:3*or,height:2*or},isClosing:!1}],topIndex:0,lastX:b7,lastY:S7},i$={info:["photo","about_me","skills","experience"]},s$=i=>(t,e)=>{const n=e(),s=i$[i],r=n.modals.modals;[...s].map(l=>r.find(u=>u.type===l)).filter(Boolean).sort((l,u)=>{const f=l.dimensions.width*l.dimensions.height;return u.dimensions.width*u.dimensions.height-f}).map(l=>l.type).forEach((l,u)=>{setTimeout(()=>t(BM(l)),200*u)})};function r$(i,t){return i.position.x<t.position.x+t.dimensions.width+Pu&&i.position.x+i.dimensions.width+Pu>t.position.x&&i.position.y<t.position.y+t.dimensions.height+Pu&&i.position.y+i.dimensions.height+Pu>t.position.y}function a$(i,t){for(let e=S7;e<=A7-t.dimensions.height;e+=Pu)for(let n=b7;n<=x7-t.dimensions.width;n+=Pu){const s={...t,position:{x:n,y:e}};if(!i.some(a=>r$(a,s)))return{x:n,y:e}}return null}function o$(i,t){const e=i.modals.filter(s=>s.isOpen),n=a$(e,t);n?t.position=n:(i.lastX+=Pu,i.lastY+=Pu,(i.lastX+t.dimensions.width>x7||i.lastY+t.dimensions.height>A7)&&(i.lastX=b7,i.lastY=S7),t.position={x:i.lastX,y:i.lastY}),t.isOpen=!0}const l$=(i,t)=>{const e=i.modals.findIndex(s=>s.type===t);if(e===-1)return;const n=i.modals[e];if(!n.isOpen){n.isClosing=!1,o$(i,n);const s=i.modals.filter(l=>l.isOpen),a=Math.max(...s.map(l=>l.index??0),0)+1;i.topIndex=a,n.index=i.topIndex}},ON=_7({name:"modals",initialState:n$,reducers:{openModal:(i,t)=>l$(i,t.payload),closeModal:(i,t)=>{const e=i.modals.findIndex(s=>s.type===t.payload.type);if(e===-1)return;const n=i.modals[e];n.isOpen=!1,n.isClosing=!1,n.index=0,t.payload.position&&(n.position=t.payload.position)},closeAllModals:i=>{for(const t of i.modals)t.isClosing=!0;i.topIndex=0},bringToFront:(i,t)=>{const e=i.modals.findIndex(u=>u.type===t.payload);if(e===-1)return;const s=i.modals[e].index??0,r=i.modals.filter(u=>u.isOpen),a=Math.max(...r.map(u=>u.index??0),0),l=a+1;i.modals=i.modals.map(u=>u.isOpen&&(u.index??0)>s?{...u,index:(u.index??0)-1}:u),i.modals[e].index=a,i.topIndex=l}}}),{openModal:BM,closeModal:c$,closeAllModals:u$,bringToFront:h$}=ON.actions,f$=ON.reducer;function d$(){const[i,t]=lt.useState(!1),e=lp(),{isMuted:n,mute:s,unmute:r}=DM(),a=2,l=()=>{n?r():s()},u=()=>{e(u$()),t(!1)},f=()=>{e(BM("settings")),t(!1)},m=[{icon:k.jsx(KZ,{}),angle:-180,label:"Mute",onClick:u},{icon:k.jsx(YZ,{isMuted:n}),angle:-225,label:"Close All",onClick:l},{icon:k.jsx(JZ,{}),angle:-270,label:"Wallpaper",onClick:f}];return k.jsxs(ZJ,{isOpen:i,children:[k.jsx($J,{className:"cursor-pointer",onClick:()=>t(g=>!g),children:k.jsx(WZ,{})}),m.map(({icon:g,angle:v,label:_,onClick:b},C)=>{const M=v*Math.PI/180,S=Math.cos(M)*a,R=Math.sin(M)*a;return k.jsx(tZ,{className:"cursor-pointer",x:S,y:R,visible:i,index:C,onClick:b,children:g},_)})]})}function p$(){const i=lp(),t=()=>{i(q5("Hello there 😊"))};return k.jsxs(KJ,{children:[k.jsxs(XJ,{children:[k.jsx(YJ,{children:k.jsx("span",{className:"cursor-pointer",onClick:t,children:"Antonov Mykyta"})}),k.jsx(jZ,{}),k.jsx(eZ,{})]}),k.jsx(JJ,{children:k.jsx(d$,{})})]})}const m$=ie.div`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.5rem;
  position: relative;
  box-sizing: border-box;

  svg {
    flex-shrink: 0;
    width: 3rem;
    height: 3rem;
    object-fit: contain;
  }

  &::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 0.2rem;
    backdrop-filter: ${({chosen:i})=>i?"blur(6px)":"none"};
    background-color: ${({chosen:i})=>i?"var(--white-color)":"transparent"};
    opacity: 0.25;
    transition: all 0.2s ease;
    z-index: 0;
  }

  &::after {
    content: "";
    position: absolute;
    inset: -2px;
    border: ${({chosen:i,highlightColor:t})=>i?`0.15rem dashed ${t||"var(--white-color)"}`:"none"};
    outline-offset: -4px;
    border-radius: 0.2rem;
    pointer-events: none;
    z-index: 1;
  }

  > * {
    position: relative;
    z-index: 2;
  }
`,g$=ie.span`
  position: relative;
  font-family: "Segoe UI", sans-serif;
  font-size: 0.6rem;
  color: ${({color:i})=>i||"var(--white-color)"};
  text-align: center;
  padding: 0.2rem 0.4rem;
  border-radius: 0.2rem;
  user-select: none;
  margin: auto 0;
  display: inline-block;
  width: 100%;
  word-wrap: break-word;
  overflow-wrap: break-word;

  &::after {
    content: "";
    position: absolute;
    inset: 0;
    background-color: ${({highlightColor:i})=>i||"black"};
    opacity: 0.4;
    pointer-events: none;
    z-index: -1;
    border-radius: 0.2rem;
  }
`;function qd({SvgIcon:i,text:t,onClick:e,textColor:n,highlightColor:s}){const[r,a]=lt.useState(!1),l=lt.useRef(null);return lt.useEffect(()=>{const u=f=>{l.current&&!l.current.contains(f.target)&&a(!1)};return window.addEventListener("click",u),()=>{window.removeEventListener("click",u)}},[]),k.jsxs(m$,{ref:l,className:"cursor-pointer",chosen:r,highlightColor:s,onClick:()=>{r?(e(),a(!1)):a(!0)},children:[k.jsx(i,{width:"100%",height:"100%"}),k.jsx(g$,{color:n,children:t})]})}const v$=ie.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`,NN=ie.div`
  display: grid;
  gap: 0.5rem;
  padding: 0.5rem;
  height: 100%;
  width: 100%;

  grid-auto-flow: ${({flow:i})=>i||"column"};
  justify-content: start;

  grid-template-columns: repeat(auto-fill, minmax(6rem, 1fr));
  grid-template-rows: repeat(auto-fill, minmax(6rem, 1fr));
  align-items: start;
`;function y$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 128 0 Q 101 1 83 19 L 83 19 L 83 19 Q 65 37 64 64 L 64 448 L 64 448 Q 65 475 83 493 Q 101 511 128 512 L 384 512 L 384 512 Q 411 511 429 493 Q 447 475 448 448 L 448 160 L 448 160 L 320 160 L 320 160 Q 306 160 297 151 Q 288 142 288 128 L 288 0 L 288 0 L 128 0 L 128 0 Z M 320 0 L 320 128 L 320 0 L 320 128 L 448 128 L 448 128 L 320 0 L 320 0 Z M 192 256 Q 193 220 224 201 Q 256 183 288 201 Q 319 220 320 256 Q 319 292 288 311 Q 256 329 224 311 Q 193 292 192 256 L 192 256 Z M 144 432 Q 145 398 167 375 L 167 375 L 167 375 Q 190 353 224 352 L 288 352 L 288 352 Q 322 353 345 375 Q 367 398 368 432 Q 367 447 352 448 L 160 448 L 160 448 Q 145 447 144 432 L 144 432 Z"})})}function _$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 81.53424657534246 227.94520547945206 L 3.506849315068493 361.2054794520548 L 81.53424657534246 227.94520547945206 L 3.506849315068493 361.2054794520548 L 3.506849315068493 115.72602739726027 L 3.506849315068493 115.72602739726027 Q 4.383561643835616 92.05479452054794 20.164383561643834 76.27397260273973 Q 35.945205479452056 60.49315068493151 59.61643835616438 59.61643835616438 L 163.06849315068493 59.61643835616438 L 163.06849315068493 59.61643835616438 Q 185.86301369863014 59.61643835616438 202.5205479452055 76.27397260273973 L 225.31506849315068 99.06849315068493 L 225.31506849315068 99.06849315068493 Q 241.97260273972603 115.72602739726027 265.64383561643837 115.72602739726027 L 368.2191780821918 115.72602739726027 L 368.2191780821918 115.72602739726027 Q 391.8904109589041 116.6027397260274 407.67123287671234 132.3835616438356 Q 423.45205479452056 148.16438356164383 424.32876712328766 171.83561643835617 L 424.32876712328766 199.8904109589041 L 424.32876712328766 199.8904109589041 L 129.75342465753425 199.8904109589041 L 129.75342465753425 199.8904109589041 Q 98.1917808219178 200.76712328767124 81.53424657534246 227.94520547945206 L 81.53424657534246 227.94520547945206 Z M 105.20547945205479 241.97260273972603 Q 113.97260273972603 228.82191780821918 129.75342465753425 227.94520547945206 L 480.43835616438355 227.94520547945206 L 480.43835616438355 227.94520547945206 Q 496.2191780821918 228.82191780821918 504.986301369863 241.97260273972603 Q 512 256 504.986301369863 270.027397260274 L 406.7945205479452 438.35616438356163 L 406.7945205479452 438.35616438356163 Q 398.027397260274 451.5068493150685 382.24657534246575 452.3835616438356 L 31.561643835616437 452.3835616438356 L 31.561643835616437 452.3835616438356 Q 15.780821917808218 451.5068493150685 7.013698630136986 438.35616438356163 Q 0 424.32876712328766 7.013698630136986 410.3013698630137 L 105.20547945205479 241.97260273972603 L 105.20547945205479 241.97260273972603 Z"})})}function A$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 48 64 Q 28 65 14 78 L 14 78 L 14 78 Q 1 92 0 112 Q 1 136 19 150 L 237 314 L 237 314 Q 256 326 275 314 L 493 150 L 493 150 Q 511 136 512 112 Q 511 92 498 78 Q 484 65 464 64 L 48 64 L 48 64 Z M 0 176 L 0 384 L 0 176 L 0 384 Q 1 411 19 429 Q 37 447 64 448 L 448 448 L 448 448 Q 475 447 493 429 Q 511 411 512 384 L 512 176 L 512 176 L 294 339 L 294 339 Q 277 352 256 352 Q 235 352 218 339 L 0 176 L 0 176 Z"})})}function x$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 8 64 Q 9 37 27 19 L 27 19 L 27 19 Q 45 1 72 0 L 232 0 L 232 0 L 232 128 L 232 128 Q 232 142 241 151 Q 250 160 264 160 L 392 160 L 392 160 L 392 304 L 392 304 L 184 304 L 184 304 Q 157 305 139 323 Q 121 341 120 368 L 120 512 L 120 512 L 72 512 L 72 512 Q 45 511 27 493 Q 9 475 8 448 L 8 64 L 8 64 Z M 392 128 L 264 128 L 392 128 L 264 128 L 264 0 L 264 0 L 392 128 L 392 128 Z M 184 352 L 216 352 L 184 352 L 216 352 Q 240 353 256 368 Q 271 384 272 408 Q 271 432 256 448 Q 240 463 216 464 L 200 464 L 200 464 L 200 496 L 200 496 Q 199 511 184 512 Q 169 511 168 496 L 168 448 L 168 448 L 168 368 L 168 368 Q 169 353 184 352 L 184 352 Z M 216 432 Q 238 430 240 408 Q 238 386 216 384 L 200 384 L 200 384 L 200 432 L 200 432 L 216 432 L 216 432 Z M 312 352 L 344 352 L 312 352 L 344 352 Q 364 353 378 366 Q 391 380 392 400 L 392 464 L 392 464 Q 391 484 378 498 Q 364 511 344 512 L 312 512 L 312 512 Q 297 511 296 496 L 296 368 L 296 368 Q 297 353 312 352 L 312 352 Z M 344 480 Q 359 479 360 464 L 360 400 L 360 400 Q 359 385 344 384 L 328 384 L 328 384 L 328 480 L 328 480 L 344 480 L 344 480 Z M 424 368 Q 425 353 440 352 L 488 352 L 488 352 Q 503 353 504 368 Q 503 383 488 384 L 456 384 L 456 384 L 456 416 L 456 416 L 488 416 L 488 416 Q 503 417 504 432 Q 503 447 488 448 L 456 448 L 456 448 L 456 496 L 456 496 Q 455 511 440 512 Q 425 511 424 496 L 424 432 L 424 432 L 424 368 L 424 368 Z"})})}function b$(){const i=lp(),t=n=>{i(BM(n))},e=n=>{i(s$(n))};return k.jsxs(v$,{children:[k.jsx(p$,{}),k.jsxs(NN,{children:[k.jsx(qd,{onClick:()=>e("info"),SvgIcon:y$,text:"My CV"}),k.jsx(qd,{onClick:()=>t("pdf"),SvgIcon:x$,text:"Resume.pdf"}),k.jsx(qd,{onClick:()=>t("folder"),SvgIcon:_$,text:"New Folder"}),k.jsx(qd,{onClick:()=>t("contact_me"),SvgIcon:A$,text:"Email"})]})]})}var IN=hD();function S$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 497.6 88 Q 512 72 512 51.2 L 512 51.2 L 512 51.2 Q 512 30.4 497.6 14.4 Q 481.6 0 460.8 0 Q 440 0 424 14.4 L 256 184 L 256 184 L 88 14.4 L 88 14.4 Q 72 0 51.2 0 Q 30.4 0 14.4 14.4 Q 0 30.4 0 51.2 Q 0 72 14.4 88 L 184 256 L 184 256 L 14.4 424 L 14.4 424 Q 0 440 0 460.8 Q 0 481.6 14.4 497.6 Q 30.4 512 51.2 512 Q 72 512 88 497.6 L 256 328 L 256 328 L 424 497.6 L 424 497.6 Q 440 512 460.8 512 Q 481.6 512 497.6 497.6 Q 512 481.6 512 460.8 Q 512 440 497.6 424 L 328 256 L 328 256 L 497.6 88 L 497.6 88 Z"})})}const E$=ie.button`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 1rem;
  height: 1rem;
  border-radius: 50%;
  border: 0.1rem solid ${({theme:i})=>i.pallet.textColor};
  background-color: ${({theme:i})=>i.pallet.secondColor};
  padding: 0.2rem;

  svg {
    transform: ${({clicked:i})=>i?"scale(0.9)":"scale(1)"};
    color: ${({theme:i})=>i.pallet.textColor};
  }
`,M$=ie.div`
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 0.2rem 0.5rem;
  border-radius: 0.3rem 0.3rem 0 0;
`,T$=ie.div`
  display: flex;
  align-center: center;
  gap: 0.25rem;
`,C$=ie.span`
  font-family: "Segoe UI", sans-serif;
  font-size: 0.8rem;
  font-weight: 600;
  color: ${({theme:i})=>i.pallet.textColor};
  text-align: center;
  user-select: none;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
`,w$=by`
  to {
    opacity: 1;
    transform: scale(1);
  }
`,R$=by`
  to {
    opacity: 0;
    transform: scale(0);
  }
`,L$=ie.div`
  position: absolute;
  display: flex;
  flex-direction: column;
  background-color: ${({theme:i})=>i.pallet.thirdColor};

  width: ${({dimensions:i})=>`${i.width}px`};
  height: ${({dimensions:i})=>`${i.height}px`};
  left: ${({position:i})=>i?i.x:0}px;
  top: ${({position:i})=>i?i.y:0}px;

  z-index: ${({index:i})=>10*(i+1)};

  opacity: ${({isClosing:i})=>i?"1":"0"};
  transform: ${({isClosing:i})=>i?"scale(1)":"scale(0)"};
  animation: ${({isClosing:i})=>i?R$:w$} 0.25s
    cubic-bezier(0.39, 0.575, 0.565, 1) both;

  border-radius: 0.3rem;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  box-shadow: 2.5px 2.5px 0px 2px rgba(0, 0, 0, 0.75);
`,D$=ie.div`
  background-color: ${({theme:i})=>i.pallet.thirdColor};
  flex: 1;
  display: flex;
  overflow: hidden;
  padding: 0.2rem;
  border-radius: 0 0 0.3rem 0.3rem;
`,B$=ie.div`
  position: relative;
  width: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  background-color: var(--white-color);
  border-radius: 0.2rem;
`,O$=ie.div`
  display: flex;
  justify-content: flex-start;
  align-items: center;
  width: 100%;
  height: 2rem;
  padding: 0 0.5rem;
  gap: 0.5rem;
`,N$=ie.button`
  box-shadow: ${({clicked:i})=>i?"inset 2px 2px 4px rgba(0, 0, 0, 0.6), inset -2px -2px 4px rgba(255, 255, 255, 0.2)":"2px 2px 0px 1px rgba(0, 0, 0, 0.75)"};
  padding: 0.2rem;
  width: 1.5rem;
  height: 1.5rem;
  border-radius: 0.3rem;
  display: grid;
  place-items: center;

  svg {
    transform: ${({clicked:i})=>i?"scale(0.9)":"scale(1)"};
    color: ${({theme:i})=>i.pallet.textColor};
  }
`;function I$({Icon:i,onClick:t}){const[e,n]=lt.useState(!1);return k.jsx(E$,{clicked:e,onMouseDown:s=>s.stopPropagation(),onPointerDown:()=>n(!0),onPointerUp:()=>n(!1),onPointerOut:()=>n(!1),className:"cursor-pointer",onClick:t,children:k.jsx(i,{})})}function U$({handleClose:i,handleDrag:t,title:e}){return k.jsxs(M$,{className:"cursor-move",onMouseDown:t,children:[k.jsx(C$,{children:e}),k.jsx(T$,{children:k.jsx(I$,{Icon:S$,onClick:i})})]})}function P$({Icon:i,onClick:t}){const[e,n]=lt.useState(!1);return k.jsx(N$,{className:"cursor-pointer",clicked:e,onMouseDown:s=>s.stopPropagation(),onPointerDown:()=>n(!0),onPointerUp:()=>n(!1),onPointerOut:()=>n(!1),onClick:t,children:i})}function dp({children:i,modal:t,buttons:e}){const[n,s]=lt.useState(!1),[r,a]=lt.useState(t.position),l=lt.useRef(!1),u=lt.useRef({x:0,y:0}),f=lp(),m=lt.useCallback(()=>{s(!0),setTimeout(()=>{f(c$({type:t.type,position:r}))},250)},[r,f,t.type]),g=b=>{l.current&&a({x:b.clientX-u.current.x,y:b.clientY-u.current.y})},v=()=>{l.current=!1,window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v)},_=b=>{l.current=!0,u.current={x:b.clientX-r.x,y:b.clientY-r.y},window.addEventListener("mousemove",g),window.addEventListener("mouseup",v)};return lt.useEffect(()=>{t.isClosing&&m()},[m,t.isClosing]),lt.useEffect(()=>()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v)},[]),k.jsxs(L$,{index:t.index||1,isClosing:n,dimensions:{width:t.dimensions.width,height:t.dimensions.height},position:r,className:"cursor",onMouseDown:()=>f(h$(t.type)),children:[k.jsx(U$,{title:t.title,handleClose:m,handleDrag:_}),e&&k.jsx(O$,{children:e.map(({Icon:b,onClick:C,key:M})=>k.jsx(P$,{Icon:b,onClick:C},M))}),k.jsx(D$,{title:t.title,children:k.jsx(B$,{children:i})})]})}const F$=ie.div`
  position: relative;
  overflow: hidden;
  width: 100%;
  height: 100%;
  max-width: ${i=>`${i.width}px`};
  max-height: ${i=>`${i.height}px`};
  display: flex;
  align-items: center;
  justify-content: center;
`,H$=ie.img`
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  max-width: 100%;
  display: block;
  transition: opacity 1s;
  position: relative;
  z-index: 100;
`;function z$({src:i,thumb:t,width:e,height:n}){const[s,r]=lt.useState(t),[a,l]=lt.useState(!1);return lt.useEffect(()=>{const u=new Image;u.src=i,u.onload=()=>{r(i),l(!0)}},[i]),k.jsx(H$,{width:e,height:n,src:s,alt:"My photo",loading:"lazy",style:{transition:"filter 0.3s ease",filter:a?"none":"blur(5px)"}})}const G$="/vibefolio/pics/My_photo.webp",k$={MyPhoto:"data:image/webp;base64,UklGRjoEAABXRUJQVlA4IC4EAACQHgCdASpgAGAAPikShkKhoQp10swMAUJZQMkB+AH6gIupgF2U3y23H+53ZbZHv6J+HXfx/R/xA/FzuSPAPq1+KW8q9rl5d+V/85/Y/3T/mX2Z/sB4uP4t5Gf5N+TP5gfmZ4z3PG/0/qvsA9HtLYnZfLw5P3OlUkxc9vc8hiPQOIOL1efvZmcVsx77MlTXzTN8cDW00TQe9/X+a2A+a74Yyn+3wQ39dpOGjIytLgKUE4LowlyHP3ConOwaMa2EVKkYeN8Ovu9q3xQcQyiBoawv+rrmxYzeqt2C/X6gMNe9CTO0E8OdXZqRM1n8cbmBWoDDtp2+xxDeGPAROiUgANiXA4CzCEAaY1oJK8ib5hAAUlPX/MxbJjvf+XTnpshi5ksD9LBieqqficuiJ7ttyF7n8/PDnmgB7P6OdDu65Bet4hw3KOp839rrGMZXNvGOOvQkUKP5m7tvBROccbqSYwHtQwZvpegFd4GXH09heE407//hoMxsTwgP/DZ5D7Un5giR0SZpxdV7fk9+frzsIx3WbExiVsGFyozkIUCT+revLnki/r4FvmPcD0gk+XD6GN4LDde1OKGJcV3JEWvrkST3dJsUeDJacjQ3axC91fF5kcY/OzNf4AxLCDdzKMFJ+bg2iIh3+Pjoka1Zd0PJ0VYlfzAtQvdkJbeIHJRt0q0yd+iG0sYw/U7/HyVe8dzJVFKSLzMJ/+qf4KL3S///07VJBJOngOS4MsFxM8+yOPeFx0wR8XKb+Q+kHTww0PfMKh2Ds+aF9Ca8AhLrLZ9wQRMOTMZDpb+3j/l/JB+j+cU7xL6rutSJZ2MQsK4PM5cgHS6vuV09o3gIs1YvsnDrYwEHCX68IEfeuWMJr5j3Ou1D9b1Mc41BLV31s9WJB+MdpcFeVPkEOfFSeCu7Yw+2egm2xiV5GkkOvgevtSLsfXrecXem4gzm2Sf//hhapqEZVYSthZ3WhQsCi5woln1yHcRhvL5v9ir6FvFRazwpVvk0Ng8U9HKbUZIrBTEHGbH0W+lI8nEaeQUXHl8yhveu1noUrVi5SJaKf5DCPk6Sa9JyT37ofwT3Tk6wOO28PfIkbsUKqPmDYOb5X2dH//6jm0z2TC+rlomV9/lbGQw1TrFp6/O4tzHcXuNkXi7KPJfpmCvAhtHA0nfJGEFuW65swyXU/bsjf7WaEUHE5nDpr0JGus8rfsGHCZfsI/4H/+3mf/7tssgusAbZAFnYHhho22dj1oyvov3YzUnhIbLsf+Pt8UTAe1jAaqoH7hJIKJEPzLZrZaQw6zZgxNKR0yr4Z2LYrXDNIvr3w9euYoflPc3IJbL87zsUo1qlGb7fUSTq76nECJ3O60QyEMNqZJ4mCUJKgPoLtYEf8m2FoT8f8q98NWEoOYpDBsmC4rpUyEZueSBiNEzmCs0Aiu5safKAAA=="};function V$({modal:i}){const{width:t=200,height:e=200}=(i==null?void 0:i.dimensions)||{};return k.jsx(dp,{modal:i,children:k.jsx(F$,{width:t,height:e,children:k.jsx(z$,{width:t,height:e,src:G$,thumb:k$.MyPhoto})})})}const Q$=ie.div`
  padding: 0.5rem;
`;function j$({modal:i}){return k.jsx(dp,{modal:i,children:k.jsxs(Q$,{children:[k.jsx("h2",{children:"Hey there! I’m Mykyta."}),k.jsx("p",{children:"Front-end developer with two years of experience in a dynamic environment as a shadow coder. Throughout my career, I have often taken on new projects received tasks outside of my area of expertise, and quickly learned new technologies and frameworks. It will not be a problem for me to switch to working with other technologies."}),k.jsx("p",{children:"I have a great desire to develop in different directions besides the front-end and React environment."})]})})}const X$=ie.div`
  position: relative;
  width: clamp(2.5rem, 5vw, 5rem);
  height: clamp(2.5rem, 5vw, 5rem);
`,q$=ie.svg`
  width: 100%;
  height: 100%;
`,Y$=ie.div`
  position: absolute;
  top: ${({strokeWidth:i})=>i}px;
  left: ${({strokeWidth:i})=>i}px;
  right: ${({strokeWidth:i})=>i}px;
  bottom: ${({strokeWidth:i})=>i}px;

  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  overflow: hidden;

  svg {
    width: clamp(1rem, 2.5vw, 2rem);
    height: clamp(1rem, 2.5vw, 2rem);
  }
`,U1=({progress:i,Icon:t})=>{const[e,n]=lt.useState(0),s=VE();lt.useEffect(()=>{let m=null;const g=1500,v=_=>{m===null&&(m=_);const b=_-m,C=Math.min(i,b/g*i);n(C),b<g?requestAnimationFrame(v):n(i)};requestAnimationFrame(v)},[i]);const r=100,a=r*.06,l=(r-a)/2,u=2*Math.PI*l,f=u*(1-e/100);return k.jsxs(X$,{children:[k.jsxs(q$,{viewBox:`0 0 ${r} ${r}`,children:[k.jsx("circle",{stroke:"#e6e6e6",fill:"transparent",strokeWidth:a,r:l,cx:r/2,cy:r/2}),k.jsx("circle",{stroke:s.pallet.secondColor,fill:"transparent",strokeWidth:a,strokeLinecap:"round",r:l,cx:r/2,cy:r/2,strokeDasharray:u,strokeDashoffset:-f,transform:`rotate(-90 ${r/2} ${r/2})`,style:{transition:"stroke-dashoffset 0.3s linear"}})]}),k.jsx(Y$,{strokeWidth:a,children:t})]})};function W$(i){return k.jsx("svg",{fill:"#3077C5",viewBox:"0 0 24 24",role:"img",xmlns:"http://www.w3.org/2000/svg",...i,children:k.jsx("path",{d:"M0 12v12h24V0H0zm19.341-.956c.61.152 1.074.423 1.501.865.221.236.549.666.575.77.008.03-1.036.73-1.668 1.123-.023.015-.115-.084-.217-.236-.31-.45-.633-.644-1.128-.678-.728-.05-1.196.331-1.192.967a.88.88 0 0 0 .102.45c.16.331.458.53 1.39.933 1.719.74 2.454 1.227 2.911 1.92.51.773.625 2.008.278 2.926-.38.998-1.325 1.676-2.655 1.9-.411.073-1.386.062-1.828-.018-.964-.172-1.878-.648-2.442-1.273-.221-.243-.652-.88-.625-.925.011-.016.11-.077.22-.141.108-.061.511-.294.892-.515l.69-.4.145.214c.202.308.643.731.91.872.766.404 1.817.347 2.335-.118a.883.883 0 0 0 .313-.72c0-.278-.035-.4-.18-.61-.186-.266-.567-.49-1.649-.96-1.238-.533-1.771-.864-2.259-1.39a3.165 3.165 0 0 1-.659-1.2c-.091-.339-.114-1.189-.042-1.531.255-1.197 1.158-2.03 2.461-2.278.423-.08 1.406-.05 1.821.053zm-5.634 1.002l.008.983H10.59v8.876H8.38v-8.876H5.258v-.964c0-.534.011-.98.026-.99.012-.016 1.913-.024 4.217-.02l4.195.012z"})})}function K$(i){return k.jsx("svg",{fill:"#FBDF02",xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 0 0 L 0 512 L 0 0 L 0 512 L 512 512 L 512 512 L 512 0 L 512 0 L 0 0 L 0 0 Z M 278.85714285714283 398.85714285714283 Q 277.7142857142857 436.57142857142856 258.2857142857143 454.85714285714283 L 258.2857142857143 454.85714285714283 L 258.2857142857143 454.85714285714283 Q 238.85714285714286 472 206.85714285714286 472 Q 178.28571428571428 470.85714285714283 160 459.42857142857144 Q 142.85714285714286 446.85714285714283 134.85714285714286 427.42857142857144 L 173.71428571428572 404.57142857142856 L 173.71428571428572 404.57142857142856 Q 182.85714285714286 426.2857142857143 204.57142857142858 428.57142857142856 Q 229.71428571428572 432 230.85714285714286 398.85714285714283 L 230.85714285714286 235.42857142857142 L 230.85714285714286 235.42857142857142 L 278.85714285714283 235.42857142857142 L 278.85714285714283 235.42857142857142 L 278.85714285714283 398.85714285714283 L 278.85714285714283 398.85714285714283 Z M 392 472 Q 325.7142857142857 468.57142857142856 305.14285714285717 422.85714285714283 L 344 400 L 344 400 Q 357.7142857142857 427.42857142857144 392 429.7142857142857 Q 422.85714285714283 427.42857142857144 424 405.7142857142857 Q 424 393.14285714285717 414.85714285714283 387.42857142857144 Q 405.7142857142857 380.57142857142856 388.57142857142856 373.7142857142857 L 377.14285714285717 368 L 377.14285714285717 368 Q 350.85714285714283 357.7142857142857 334.85714285714283 341.7142857142857 Q 320 324.57142857142856 318.85714285714283 296 Q 320 268.57142857142856 338.2857142857143 250.28571428571428 Q 357.7142857142857 233.14285714285714 389.7142857142857 232 Q 435.42857142857144 230.85714285714286 458.2857142857143 270.85714285714283 L 420.57142857142856 294.85714285714283 L 420.57142857142856 294.85714285714283 Q 409.14285714285717 273.14285714285717 389.7142857142857 274.2857142857143 Q 368 275.42857142857144 366.85714285714283 294.85714285714283 Q 365.7142857142857 313.14285714285717 396.57142857142856 324.57142857142856 L 408 329.14285714285717 L 408 329.14285714285717 Q 438.85714285714283 341.7142857142857 456 358.85714285714283 Q 472 374.85714285714283 472 404.57142857142856 Q 470.85714285714283 437.7142857142857 449.14285714285717 454.85714285714283 Q 427.42857142857144 472 392 472 L 392 472 Z"})})}function E9(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"#00D8FF",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 418 177 Q 410 175 402 172 Q 403 167 404 161 Q 404 161 405 161 Q 414 116 408 83 Q 402 50 381 38 Q 361 27 332 37 Q 302 47 269 76 Q 262 82 256 88 Q 252 84 248 80 Q 213 49 182 38 Q 151 27 130 38 Q 110 50 104 81 Q 98 112 107 155 Q 108 163 110 172 Q 101 175 92 178 Q 51 192 26 212 Q 1 233 0 256 Q 1 279 27 301 Q 54 322 96 337 Q 103 339 110 341 Q 108 350 106 359 Q 98 402 104 432 Q 110 462 130 474 Q 151 485 182 475 Q 213 464 246 435 Q 249 433 252 430 Q 254 428 257 425 Q 264 432 271 438 Q 303 465 332 475 Q 362 485 382 474 Q 402 462 408 430 Q 415 398 406 354 Q 405 347 403 340 Q 408 339 413 337 Q 457 323 484 301 Q 511 280 512 256 Q 511 233 486 212 Q 460 192 418 177 L 418 177 Z M 283 92 Q 311 68 335 59 L 335 59 L 335 59 Q 358 50 371 56 Q 383 64 387 91 Q 391 118 383 157 Q 382 162 381 167 Q 348 159 314 156 Q 294 128 271 103 Q 277 98 283 92 L 283 92 Z M 167 308 Q 175 321 183 333 Q 160 331 137 326 Q 143 304 153 281 Q 160 295 167 308 L 167 308 Z M 137 187 Q 159 182 183 179 Q 175 192 167 205 Q 160 218 153 231 Q 143 208 137 187 L 137 187 Z M 164 256 Q 174 235 186 216 Q 197 196 210 177 Q 233 175 256 175 Q 279 175 302 177 Q 315 196 326 215 Q 338 235 348 256 Q 338 276 326 297 Q 315 316 302 336 Q 280 337 256 337 Q 232 337 210 336 Q 197 317 186 297 Q 174 277 164 256 L 164 256 Z M 345 307 Q 352 294 360 281 Q 369 302 376 325 Q 353 330 329 333 Q 337 320 345 307 L 345 307 Z M 359 231 Q 352 218 345 205 Q 337 192 330 179 Q 354 182 375 187 Q 368 210 359 231 L 359 231 Z M 256 118 Q 272 135 286 154 Q 256 153 226 154 Q 241 135 256 118 L 256 118 Z M 140 57 Q 153 50 178 60 L 178 60 L 178 60 Q 204 70 234 96 Q 236 98 239 101 Q 240 102 241 103 Q 218 128 198 156 Q 164 159 131 167 Q 129 159 128 151 Q 121 114 124 89 Q 128 64 140 57 L 140 57 Z M 116 321 Q 109 319 103 317 Q 69 306 40 286 Q 25 274 21 256 Q 22 241 43 226 Q 64 210 99 198 Q 107 195 116 193 Q 126 225 141 256 Q 126 288 116 321 L 116 321 Z M 232 419 Q 207 441 176 454 Q 158 462 141 455 Q 128 448 125 424 Q 121 399 127 363 Q 129 355 131 346 Q 164 354 199 356 Q 219 384 242 410 Q 237 414 232 419 L 232 419 Z M 257 394 Q 241 378 226 358 Q 241 359 256 359 Q 271 359 286 358 Q 273 377 257 394 L 257 394 Z M 388 424 Q 386 443 371 456 Q 359 462 336 454 Q 313 445 285 421 Q 278 416 272 410 Q 295 385 314 356 Q 349 353 382 346 Q 384 352 385 358 Q 392 391 388 424 L 388 424 Z M 406 317 Q 402 318 397 319 Q 387 287 372 256 Q 386 225 396 193 Q 404 195 411 197 Q 447 210 468 226 Q 490 241 491 255 Q 490 271 467 287 Q 444 304 406 317 L 406 317 Z M 256 302 Q 275 301 288 288 L 288 288 L 288 288 Q 301 275 302 256 Q 301 237 288 224 Q 275 211 256 210 Q 237 211 224 224 Q 211 237 210 256 Q 211 275 224 288 Q 237 301 256 302 L 256 302 Z"})})}function J$(i){return k.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 512 512",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:10},...i,children:k.jsxs("g",{transform:"matrix(2.25096,0,0,2.25096,256.253,256.48)",children:[k.jsx("g",{id:"Three.js_Icon.svg",transform:"matrix(1,0,0,1,-113.385,-113.385)",children:k.jsxs("g",{transform:"matrix(1,0,0,1,8.964,4.2527)",children:[k.jsx("path",{d:"M63.02,200.61L19.807,25.67L193.037,75.544L63.02,200.61Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),k.jsx("path",{d:"M106.39,50.612L127.981,138.108L41.414,113.163L106.39,50.612Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),k.jsx("path",{d:"M84.91,125.03L74.186,81.565L117.194,93.911L84.91,125.03Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),k.jsx("path",{d:"M63.458,38.153L74.182,81.618L31.174,69.272L63.458,38.153Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),k.jsx("path",{d:"M149.47,62.93L160.194,106.395L117.186,94.049L149.47,62.93Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),k.jsx("path",{d:"M84.915,125.06L95.639,168.525L52.631,156.179L84.915,125.06Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}})]})}),k.jsx("g",{id:"Three.js_Icon.svg1"})]})})}function Z$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",fill:"#82BF05",...i,children:k.jsx("path",{d:"M 255.49705304518665 512 Q 245.43811394891944 512 236.385068762279 506.9705304518664 L 174.0196463654224 469.7524557956778 L 174.0196463654224 469.7524557956778 Q 166.97838899803537 465.7288801571709 167.98428290766208 464.7229862475442 Q 168.9901768172888 462.71119842829074 172.00785854616896 461.70530451866404 Q 181.06090373280944 458.6876227897839 186.09037328094303 456.67583497053045 Q 191.11984282907662 454.66404715127703 200.1728880157171 449.63457760314344 Q 202.18467583497053 448.6286836935167 205.20235756385068 449.63457760314344 L 252.47937131630647 477.7996070726916 L 252.47937131630647 477.7996070726916 Q 255.49705304518665 479.811394891945 258.5147347740668 477.7996070726916 L 444.60510805500985 370.16895874263264 L 444.60510805500985 370.16895874263264 Q 446.61689587426326 369.1630648330059 446.61689587426326 365.139489194499 L 446.61689587426326 150.88408644400786 L 446.61689587426326 150.88408644400786 Q 446.61689587426326 147.86640471512771 443.5992141453831 145.85461689587427 L 258.5147347740668 39.22986247544204 L 258.5147347740668 39.22986247544204 Q 255.49705304518665 37.218074656188605 252.47937131630647 39.22986247544204 L 67.39489194499018 145.85461689587427 L 67.39489194499018 145.85461689587427 Q 64.37721021611002 147.86640471512771 64.37721021611002 150.88408644400786 L 64.37721021611002 366.14538310412576 L 64.37721021611002 366.14538310412576 Q 64.37721021611002 369.1630648330059 67.39489194499018 370.16895874263264 L 117.68958742632613 400.3457760314342 L 117.68958742632613 400.3457760314342 Q 138.81335952848724 409.39882121807466 150.88408644400786 402.3575638506876 Q 161.94891944990178 394.3104125736739 162.9548133595285 381.2337917485265 L 162.9548133595285 169.99607072691552 L 162.9548133595285 169.99607072691552 Q 162.9548133595285 164.96660117878193 167.98428290766208 163.9607072691552 L 191.11984282907662 163.9607072691552 L 191.11984282907662 163.9607072691552 Q 196.1493123772102 164.96660117878193 197.15520628683694 169.99607072691552 L 197.15520628683694 381.2337917485265 L 197.15520628683694 381.2337917485265 Q 195.1434184675835 437.5638506876228 141.8310412573674 439.5756385068762 Q 134.78978388998036 439.5756385068762 125.73673870333988 437.5638506876228 Q 116.6836935166994 435.5520628683694 98.57760314341847 427.5049115913556 L 50.29469548133595 399.3398821218075 L 50.29469548133595 399.3398821218075 Q 31.18271119842829 388.27504911591353 31.18271119842829 365.139489194499 L 31.18271119842829 150.88408644400786 L 31.18271119842829 150.88408644400786 Q 31.18271119842829 128.75442043222003 50.29469548133595 117.68958742632613 L 236.385068762279 10.05893909626719 L 236.385068762279 10.05893909626719 Q 255.49705304518665 0 274.6090373280943 10.05893909626719 L 460.69941060903733 117.68958742632613 L 460.69941060903733 117.68958742632613 Q 479.811394891945 128.75442043222003 480.8172888015717 150.88408644400786 L 480.8172888015717 366.14538310412576 L 480.8172888015717 366.14538310412576 Q 479.811394891945 387.2691552062868 460.69941060903733 399.3398821218075 L 274.6090373280943 506.9705304518664 L 274.6090373280943 506.9705304518664 Q 265.5559921414538 512 255.49705304518665 512 L 255.49705304518665 512 Z M 405.3752455795678 300.762278978389 Q 405.3752455795678 271.5913555992141 385.2573673870334 259.52062868369353 L 385.2573673870334 259.52062868369353 L 385.2573673870334 259.52062868369353 Q 364.1335952848723 247.44990176817288 320.8801571709234 242.4204322200393 Q 279.6385068762279 237.3909626719057 267.56777996070724 232.3614931237721 Q 256.50294695481335 227.33202357563852 257.50884086444006 217.2730844793713 Q 256.50294695481335 208.22003929273083 265.5559921414538 200.1728880157171 Q 274.6090373280943 192.12573673870335 305.7917485265226 191.11984282907662 Q 333.95677799607074 191.11984282907662 346.02750491159134 198.16110019646365 Q 359.1041257367387 206.20825147347742 363.1277013752456 225.32023575638507 Q 364.1335952848723 229.34381139489196 369.1630648330059 229.34381139489196 L 393.3045186640471 229.34381139489196 L 393.3045186640471 229.34381139489196 Q 395.3163064833006 229.34381139489196 396.3222003929273 227.33202357563852 Q 398.33398821218077 226.32612966601178 398.33398821218077 223.30844793713163 Q 393.3045186640471 157.9253438113949 305.7917485265226 158.9312377210216 Q 223.30844793713163 159.93713163064834 221.2966601178782 218.27897838899804 Q 221.2966601178782 248.4557956777996 242.4204322200393 260.52652259332024 Q 264.5500982318271 272.5972495088409 302.77406679764243 275.614931237721 Q 347.0333988212181 279.6385068762279 359.1041257367387 286.67976424361495 Q 370.16895874263264 293.72102161100196 369.1630648330059 302.77406679764243 Q 370.16895874263264 332.95088408644403 312.8330058939096 331.94499017681727 Q 276.6208251473477 331.94499017681727 263.5442043222004 322.8919449901768 Q 251.47347740667976 313.8388998035363 249.46168958742632 294.72691552062867 Q 248.4557956777996 290.7033398821218 244.43222003929273 290.7033398821218 L 220.29076620825148 290.7033398821218 L 220.29076620825148 290.7033398821218 Q 215.26129666011786 290.7033398821218 214.25540275049116 295.73280943025543 Q 213.24950884086445 320.8801571709234 233.3673870333988 342.00392927308445 Q 253.4852652259332 363.1277013752456 312.8330058939096 364.1335952848723 Q 403.36345776031436 363.1277013752456 405.3752455795678 300.762278978389 L 405.3752455795678 300.762278978389 Z"})})}const $$=ie.div`
  padding: 0.5rem 1rem;
  display: grid;
  gap: 0.5rem;
  grid-template-columns: 1fr 1fr;
`,P1=ie.div`
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  align-items: center;
`,F1=ie.span`
  font-family: "Segoe UI", sans-serif;
  font-size: 0.8rem;
  color: ${({theme:i})=>i.pallet.textColor};
  text-align: center;
  user-select: none;
`;function ttt({modal:i}){return k.jsx(dp,{modal:i,children:k.jsxs($$,{children:[k.jsxs(P1,{children:[k.jsx(U1,{progress:80,Icon:k.jsx(K$,{})}),k.jsx(F1,{children:"Javascript"})]}),k.jsxs(P1,{children:[k.jsx(U1,{progress:60,Icon:k.jsx(W$,{})}),k.jsx(F1,{children:"Typescript"})]}),k.jsxs(P1,{children:[k.jsx(U1,{progress:70,Icon:k.jsx(E9,{})}),k.jsx(F1,{children:"React"})]}),k.jsxs(P1,{children:[k.jsx(U1,{progress:50,Icon:k.jsx("div",{style:{backgroundColor:"#00D8FF",padding:1},children:k.jsx(E9,{fill:"white"})})}),k.jsx(F1,{children:"React Native"})]}),k.jsxs(P1,{children:[k.jsx(U1,{progress:25,Icon:k.jsx(J$,{})}),k.jsx(F1,{children:"Three js"})]}),k.jsxs(P1,{children:[k.jsx(U1,{progress:25,Icon:k.jsx(Z$,{})}),k.jsx(F1,{children:"Node js"})]})]})})}const ett=[{company:"Incora",lengthOfService:"2023 – 2025",position:"Front-end Developer (Shadow Coder)",projects:[{name:"Hotel Management Platform",technologies:"React, React Native, Firebase",features:["Developed both web and mobile applications simultaneously, ensuring a shared codebase for both platforms.","Built internal utilities to streamline Firebase interactions.","General mobile application performance optimization and implemented offline features"]},{name:"Food Delivery Platform",technologies:"Angular, React",features:["Maintained multiple applications, including a web versions built with Angular (for common users) and React (for staff).","Refactored legacy codebase, migrating to a newer libraries and implementing best practices.","Enhanced test coverage with new unit and end-to-end tests."]},{name:"Sports Betting Platform",technologies:"React",features:["Focused on responsive UI and interactive components for both mobile and desktop.","Collaborated closely with backend developers to facilitate rapid feature implementation.","Contributed to creating reusable component libraries."]}]}];function M9(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 385.7219730941704 236.48430493273543 Q 401.7937219730942 256 385.7219730941704 275.5156950672646 L 165.30941704035874 495.92825112107624 L 165.30941704035874 495.92825112107624 Q 145.79372197309416 512 126.27802690582959 495.92825112107624 Q 110.20627802690584 476.41255605381167 126.27802690582959 456.8968609865471 L 327.17488789237666 256 L 327.17488789237666 256 L 126.27802690582959 55.10313901345292 L 126.27802690582959 55.10313901345292 Q 110.20627802690584 35.587443946188344 126.27802690582959 16.071748878923767 Q 145.79372197309416 0 165.30941704035874 16.071748878923767 L 385.7219730941704 236.48430493273543 L 385.7219730941704 236.48430493273543 Z"})})}const ntt=ie.div`
  display: flex;
  flex-direction: column;
  gap: 0.25rem 0;
  margin-bottom: 0.5rem;
`,itt=ie.a`
  color: blue;
  text-decoration: underline;

  &:link {
    color: blue;
    text-decoration: underline;
  }

  &:visited {
    color: purple;
    text-decoration: underline;
  }

  &:hover {
    color: darkblue;
    text-decoration: underline;
  }

  &:active {
    color: red;
    text-decoration: underline;
  }
`,stt=ie.span`
  font-size: 0.8rem;
  font-weight: 600;
`,rtt=ie.span`
  font-size: 0.8rem;
`,T9=ie.button`
  position: relative;
  height: 100%;
  width: auto;
  z-index: 2;

  svg {
    height: 100%;
    width: auto;
  }

  &:hover:not([disabled]) {
    svg {
      fill: ${({theme:i})=>i.pallet.secondColor};
    }
  }
`,att=ie.div`
  width: 100%;
  height: 100%;
`,ott=ie.div`
  display: flex;
  justify-content: space-between;
  align-items; center;
  height: 5rem;
`,ltt=ie.div`
  display: flex;
  align-items: center;
  position: relative;
  overflow: hidden;
`,ctt=ie.div`
  position: relative;
  display: flex;
  align-items: center;
  transition: linear 0.3s;
  width: 100%;
`,utt=ie.div`
  display: flex;
  flex-direction: column;
  padding: 0.25rem;
  min-width: 100%;
`,htt=ie.div`
  display: flex;
  flex-direction: column;
`,ftt=ie.span`
  font-weight: 600;
  font-size: 0.8rem;
`,dtt=ie.span`
  font-style: italic;
  font-size: 0.7rem;
`,ptt=ie.div`
  position: relative;
  font-size: 0.8rem;
`,mtt=ie.ul`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  margin: 0;
  padding-top: 0.8rem;

  opacity: ${({isVisible:i})=>i?1:0};
  visibility: ${({isVisible:i})=>i?"visible":"hidden"};
  transition: opacity 0.4s ease-in-out, visibility 0.3s ease-in-out;
  pointer-events: ${({isVisible:i})=>i?"auto":"none"};
`,gtt=ie.li`
  margin-bottom: 0.2rem;

  &:last-child {
    margin: 0;
  }

  &::marker {
    color: ${({theme:i})=>i.pallet.secondColor};
  }
`;function vtt({company:i}){const{company:t,lengthOfService:e,position:n,projects:s}=i,[r,a]=lt.useState(0),l=lt.useRef(null),u=lt.useRef(null),[f,m]=lt.useState(0),g=r===0,v=r===s.length-1;lt.useEffect(()=>{const b=l.current;if(b){const C=b.children[0];b.style.left=`-${C.clientWidth*r}px`}u.current&&m(u.current.scrollHeight)},[r]);const _=b=>{b==="next"&&a(C=>s.length-1===C?C:C+1),b==="prev"&&a(C=>C===0?C:C-1)};return k.jsxs(k.Fragment,{children:[k.jsxs(ntt,{children:[k.jsxs("span",{children:[k.jsx(itt,{className:"cursor-pointer",target:"_blank",href:"https://incora.software/",children:t})," ","· ",k.jsx(stt,{children:e})]}),k.jsx(rtt,{children:n})]}),k.jsx(att,{children:k.jsxs(htt,{children:[k.jsxs(ott,{children:[k.jsx(T9,{onClick:()=>_("prev"),disabled:g,className:g?"not-allowed":"cursor-pointer",children:k.jsx(M9,{style:{transform:"rotate(180deg)"}})}),k.jsx(ltt,{children:k.jsx(ctt,{ref:l,children:s.map(b=>k.jsxs(utt,{children:[k.jsx(ftt,{children:b.name}),k.jsx(dtt,{children:b.technologies})]},b.name))})}),k.jsx(T9,{onClick:()=>_("next"),disabled:v,className:v?"not-allowed":"cursor-pointer",children:k.jsx(M9,{})})]}),k.jsx(ptt,{style:{height:f},children:s.map((b,C)=>k.jsx(mtt,{isVisible:C===r,ref:C===r?u:null,children:b.features.map(M=>k.jsx(gtt,{children:M},M))},b.name))})]})})]})}const ytt=ie.div`
  padding: 0.5rem;
`;function _tt({modal:i}){return k.jsx(dp,{modal:i,children:k.jsx(ytt,{children:ett.map(t=>k.jsx(vtt,{company:t}))})})}function Att(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 0 64 Q 1 37 19 19 L 19 19 L 19 19 Q 37 1 64 0 L 224 0 L 224 0 L 224 128 L 224 128 Q 224 142 233 151 Q 242 160 256 160 L 384 160 L 384 160 L 384 304 L 384 304 L 176 304 L 176 304 Q 149 305 131 323 Q 113 341 112 368 L 112 512 L 112 512 L 64 512 L 64 512 Q 37 511 19 493 Q 1 475 0 448 L 0 64 L 0 64 Z M 384 128 L 256 128 L 384 128 L 256 128 L 256 0 L 256 0 L 384 128 L 384 128 Z M 208 512 Q 188 511 174 498 L 174 498 L 174 498 Q 161 484 160 464 L 160 448 L 160 448 Q 161 433 176 432 Q 191 433 192 448 L 192 464 L 192 464 Q 193 479 208 480 Q 223 479 224 464 L 224 368 L 224 368 Q 225 353 240 352 Q 255 353 256 368 L 256 464 L 256 464 Q 255 484 242 498 Q 228 511 208 512 L 208 512 Z M 304 352 L 336 352 L 304 352 L 336 352 Q 360 353 376 368 Q 391 384 392 408 Q 391 432 376 448 Q 360 463 336 464 L 320 464 L 320 464 L 320 496 L 320 496 Q 319 511 304 512 Q 289 511 288 496 L 288 448 L 288 448 L 288 368 L 288 368 Q 289 353 304 352 L 304 352 Z M 336 432 Q 358 430 360 408 Q 358 386 336 384 L 320 384 L 320 384 L 320 432 L 320 432 L 336 432 L 336 432 Z M 416 392 Q 416 375 428 364 L 428 364 L 428 364 Q 439 352 456 352 L 472 352 L 472 352 Q 489 352 500 364 Q 512 375 512 392 L 512 400 L 512 400 Q 511 415 496 416 Q 481 415 480 400 L 480 392 L 480 392 Q 479 385 472 384 L 456 384 L 456 384 Q 449 385 448 392 L 448 472 L 448 472 Q 449 479 456 480 L 472 480 L 472 480 Q 479 479 480 472 L 480 464 L 480 464 Q 465 463 464 448 Q 465 433 480 432 L 496 432 L 496 432 Q 511 433 512 448 L 512 472 L 512 472 Q 512 489 500 500 Q 489 512 472 512 L 456 512 L 456 512 Q 439 512 428 500 Q 416 489 416 472 L 416 392 L 416 392 Z"})})}function xtt(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 32 96 Q 33 55 60 28 L 60 28 L 60 28 Q 87 1 128 0 L 224 0 L 224 0 L 224 191 L 224 191 Q 225 201 233 205 Q 241 209 250 203 L 304 160 L 304 160 L 358 203 L 358 203 Q 367 209 375 205 Q 383 201 384 191 L 384 0 L 384 0 L 416 0 L 448 0 Q 462 0 471 9 Q 480 18 480 32 L 480 352 L 480 352 Q 480 366 471 375 Q 462 384 448 384 L 448 448 L 448 448 Q 462 448 471 457 Q 480 466 480 480 Q 480 494 471 503 Q 462 512 448 512 L 416 512 L 128 512 Q 87 511 60 484 Q 33 457 32 416 L 32 96 L 32 96 Z M 96 416 Q 96 430 105 439 L 105 439 L 105 439 Q 114 448 128 448 L 384 448 L 384 448 L 384 384 L 384 384 L 128 384 L 128 384 Q 114 384 105 393 Q 96 402 96 416 L 96 416 Z"})})}function btt(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 235.55271565495207 46.61980830670927 L 130.8626198083067 46.61980830670927 L 235.55271565495207 46.61980830670927 L 104.69009584664536 46.61980830670927 Q 93.23961661341853 46.61980830670927 85.87859424920129 53.980830670926515 Q 78.51757188498402 61.34185303514377 78.51757188498402 72.7923322683706 Q 78.51757188498402 84.24281150159744 85.87859424920129 91.60383386581469 Q 93.23961661341853 98.96485623003196 104.69009584664536 98.96485623003196 L 104.69009584664536 207.7444089456869 L 104.69009584664536 207.7444089456869 Q 104.69009584664536 222.4664536741214 97.32907348242811 234.73482428115017 L 8.178913738019169 378.68370607028754 L 8.178913738019169 378.68370607028754 Q 0 392.5878594249201 0 408.9456869009585 Q 0.8178913738019169 432.6645367412141 16.357827476038338 449.0223642172524 Q 32.715654952076676 464.5623003194888 56.43450479233227 465.3801916932907 L 309.98083067092654 465.3801916932907 L 309.98083067092654 465.3801916932907 Q 323.0670926517572 465.3801916932907 333.6996805111821 459.6549520766773 Q 330.4281150159744 452.29392971246006 330.4281150159744 444.1150159744409 L 330.4281150159744 443.297124600639 L 330.4281150159744 443.297124600639 Q 318.9776357827476 449.0223642172524 306.7092651757188 447.38658146964855 Q 293.62300319488816 446.56869009584665 283.8083067092652 435.93610223642173 Q 272.3578274760383 423.66773162939296 264.17891373801916 408.9456869009585 Q 255.18210862619807 394.22364217252397 250.2747603833866 377.86581469648564 Q 246.18530351437698 364.779552715655 251.0926517571885 353.3290734824281 Q 256 341.0607028753994 266.6325878594249 334.517571884984 L 266.6325878594249 334.517571884984 L 266.6325878594249 334.517571884984 L 97.32907348242811 334.517571884984 L 97.32907348242811 334.517571884984 L 141.49520766773162 262.54313099041536 L 141.49520766773162 262.54313099041536 Q 157.03514376996804 237.18849840255592 157.03514376996804 207.7444089456869 L 157.03514376996804 98.96485623003196 L 157.03514376996804 98.96485623003196 L 209.38019169329073 98.96485623003196 L 209.38019169329073 98.96485623003196 L 209.38019169329073 207.7444089456869 L 209.38019169329073 207.7444089456869 Q 209.38019169329073 237.18849840255592 224.92012779552715 262.54313099041536 L 248.63897763578274 300.9840255591054 L 248.63897763578274 300.9840255591054 Q 248.63897763578274 296.0766773162939 250.2747603833866 291.1693290734824 Q 255.18210862619807 274.8115015974441 263.36102236421726 260.0894568690096 Q 269.08626198083067 251.91054313099042 274.8115015974441 243.73162939297126 L 269.90415335463257 234.73482428115017 L 269.90415335463257 234.73482428115017 Q 261.7252396166134 222.4664536741214 261.7252396166134 207.7444089456869 L 261.7252396166134 98.96485623003196 L 261.7252396166134 98.96485623003196 Q 273.1757188498403 98.96485623003196 280.5367412140575 91.60383386581469 Q 287.89776357827475 84.24281150159744 287.89776357827475 72.7923322683706 Q 287.89776357827475 61.34185303514377 280.5367412140575 53.980830670926515 Q 273.1757188498403 46.61980830670927 261.7252396166134 46.61980830670927 L 235.55271565495207 46.61980830670927 L 235.55271565495207 46.61980830670927 Z M 356.6006389776358 224.92012779552715 L 356.6006389776358 239.64217252396165 L 356.6006389776358 224.92012779552715 L 356.6006389776358 239.64217252396165 Q 355.78274760383385 249.45686900958466 346.7859424920128 254.36421725239617 Q 337.7891373801917 260.0894568690096 328.7923322683706 255.18210862619807 L 318.1597444089457 248.63897763578274 L 318.1597444089457 248.63897763578274 Q 309.1629392971246 244.54952076677316 302.6198083067093 251.0926517571885 Q 293.62300319488816 260.9073482428115 286.26198083067095 273.1757188498403 Q 278.9009584664537 285.444089456869 275.62939297124603 298.53035143769966 Q 273.1757188498403 307.5271565495208 281.35463258785944 312.4345047923323 L 292.80511182108626 318.9776357827476 L 292.80511182108626 318.9776357827476 Q 300.9840255591054 324.702875399361 300.9840255591054 334.517571884984 Q 300.9840255591054 344.33226837060704 292.80511182108626 349.23961661341855 L 281.35463258785944 356.6006389776358 L 281.35463258785944 356.6006389776358 Q 273.1757188498403 361.50798722044726 275.62939297124603 370.5047923322684 Q 279.7188498402556 383.59105431309905 286.26198083067095 395.8594249201278 Q 293.62300319488816 408.12779552715654 302.6198083067093 417.94249201277955 Q 309.98083067092654 424.48562300319486 318.1597444089457 419.5782747603834 L 328.7923322683706 413.85303514376994 L 328.7923322683706 413.85303514376994 Q 337.7891373801917 408.9456869009585 346.7859424920128 413.85303514376994 Q 355.78274760383385 419.5782747603834 356.6006389776358 429.39297124600637 L 356.6006389776358 443.297124600639 L 356.6006389776358 443.297124600639 Q 356.6006389776358 453.11182108626195 365.59744408945687 455.5654952076677 Q 378.68370607028754 458.8370607028754 392.5878594249201 458.8370607028754 Q 406.49201277955274 458.8370607028754 419.5782747603834 455.5654952076677 Q 427.75718849840257 453.11182108626195 428.57507987220447 443.297124600639 L 428.57507987220447 429.39297124600637 L 428.57507987220447 429.39297124600637 Q 429.39297124600637 418.76038338658145 437.5718849840256 413.85303514376994 Q 446.56869009584665 408.9456869009585 455.5654952076677 413.03514376996804 L 467.0159744408946 419.5782747603834 L 467.0159744408946 419.5782747603834 Q 475.19488817891374 423.66773162939296 482.555910543131 417.94249201277955 Q 491.55271565495207 408.12779552715654 498.91373801916933 395.04153354632587 Q 505.45686900958464 382.77316293929715 509.54632587859425 369.6869009584665 Q 512 361.50798722044726 503.82108626198084 355.78274760383385 L 492.37060702875397 349.23961661341855 L 492.37060702875397 349.23961661341855 Q 484.1916932907348 344.33226837060704 484.1916932907348 334.517571884984 Q 484.1916932907348 324.702875399361 492.37060702875397 318.9776357827476 L 503.82108626198084 312.4345047923323 L 503.82108626198084 312.4345047923323 Q 512 307.5271565495208 509.54632587859425 298.53035143769966 Q 505.45686900958464 285.444089456869 498.91373801916933 273.1757188498403 Q 491.55271565495207 260.9073482428115 482.555910543131 250.2747603833866 Q 475.19488817891374 244.54952076677316 467.0159744408946 248.63897763578274 L 455.5654952076677 255.18210862619807 L 455.5654952076677 255.18210862619807 Q 446.56869009584665 260.0894568690096 437.5718849840256 254.36421725239617 Q 429.39297124600637 249.45686900958466 428.57507987220447 239.64217252396165 L 428.57507987220447 224.92012779552715 L 428.57507987220447 224.92012779552715 Q 427.75718849840257 215.92332268370606 419.5782747603834 212.6517571884984 Q 406.49201277955274 210.19808306709265 392.5878594249201 210.19808306709265 Q 378.68370607028754 210.19808306709265 365.59744408945687 212.6517571884984 Q 356.6006389776358 215.92332268370606 356.6006389776358 224.92012779552715 L 356.6006389776358 224.92012779552715 Z M 353.3290734824281 334.517571884984 Q 353.3290734824281 311.61661341853033 372.1405750798722 298.53035143769966 Q 392.5878594249201 287.89776357827475 413.03514376996804 298.53035143769966 Q 431.8466453674121 311.61661341853033 431.8466453674121 334.517571884984 Q 431.8466453674121 357.4185303514377 413.03514376996804 369.6869009584665 Q 392.5878594249201 381.1373801916933 372.1405750798722 369.6869009584665 Q 353.3290734824281 357.4185303514377 353.3290734824281 334.517571884984 L 353.3290734824281 334.517571884984 Z"})})}function Stt(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 56.888888888888886 56.888888888888886 Q 32.888888888888886 57.77777777777778 16.88888888888889 73.77777777777777 L 16.88888888888889 73.77777777777777 L 16.88888888888889 73.77777777777777 Q 0.8888888888888888 89.77777777777777 0 113.77777777777777 L 0 398.22222222222223 L 0 398.22222222222223 Q 0.8888888888888888 422.22222222222223 16.88888888888889 438.22222222222223 Q 32.888888888888886 454.22222222222223 56.888888888888886 455.1111111111111 L 455.1111111111111 455.1111111111111 L 455.1111111111111 455.1111111111111 Q 479.1111111111111 454.22222222222223 495.1111111111111 438.22222222222223 Q 511.1111111111111 422.22222222222223 512 398.22222222222223 L 512 113.77777777777777 L 512 113.77777777777777 Q 511.1111111111111 89.77777777777777 495.1111111111111 73.77777777777777 Q 479.1111111111111 57.77777777777778 455.1111111111111 56.888888888888886 L 56.888888888888886 56.888888888888886 L 56.888888888888886 56.888888888888886 Z M 128 284.44444444444446 L 184.88888888888889 284.44444444444446 L 128 284.44444444444446 L 184.88888888888889 284.44444444444446 Q 215.11111111111111 285.3333333333333 235.55555555555554 304.8888888888889 Q 255.11111111111111 325.3333333333333 256 355.55555555555554 Q 255.11111111111111 368.8888888888889 241.77777777777777 369.77777777777777 L 71.11111111111111 369.77777777777777 L 71.11111111111111 369.77777777777777 Q 57.77777777777778 368.8888888888889 56.888888888888886 355.55555555555554 Q 57.77777777777778 325.3333333333333 77.33333333333333 304.8888888888889 Q 97.77777777777777 285.3333333333333 128 284.44444444444446 L 128 284.44444444444446 Z M 99.55555555555556 199.11111111111111 Q 100.44444444444444 167.11111111111111 128 150.22222222222223 Q 156.44444444444446 134.22222222222223 184.88888888888889 150.22222222222223 Q 212.44444444444446 167.11111111111111 213.33333333333334 199.11111111111111 Q 212.44444444444446 231.11111111111111 184.88888888888889 248 Q 156.44444444444446 264 128 248 Q 100.44444444444444 231.11111111111111 99.55555555555556 199.11111111111111 L 99.55555555555556 199.11111111111111 Z M 327.1111111111111 170.66666666666666 L 440.8888888888889 170.66666666666666 L 327.1111111111111 170.66666666666666 L 440.8888888888889 170.66666666666666 Q 454.22222222222223 171.55555555555554 455.1111111111111 184.88888888888889 Q 454.22222222222223 198.22222222222223 440.8888888888889 199.11111111111111 L 327.1111111111111 199.11111111111111 L 327.1111111111111 199.11111111111111 Q 313.77777777777777 198.22222222222223 312.8888888888889 184.88888888888889 Q 313.77777777777777 171.55555555555554 327.1111111111111 170.66666666666666 L 327.1111111111111 170.66666666666666 Z M 327.1111111111111 227.55555555555554 L 440.8888888888889 227.55555555555554 L 327.1111111111111 227.55555555555554 L 440.8888888888889 227.55555555555554 Q 454.22222222222223 228.44444444444446 455.1111111111111 241.77777777777777 Q 454.22222222222223 255.11111111111111 440.8888888888889 256 L 327.1111111111111 256 L 327.1111111111111 256 Q 313.77777777777777 255.11111111111111 312.8888888888889 241.77777777777777 Q 313.77777777777777 228.44444444444446 327.1111111111111 227.55555555555554 L 327.1111111111111 227.55555555555554 Z M 327.1111111111111 284.44444444444446 L 440.8888888888889 284.44444444444446 L 327.1111111111111 284.44444444444446 L 440.8888888888889 284.44444444444446 Q 454.22222222222223 285.3333333333333 455.1111111111111 298.6666666666667 Q 454.22222222222223 312 440.8888888888889 312.8888888888889 L 327.1111111111111 312.8888888888889 L 327.1111111111111 312.8888888888889 Q 313.77777777777777 312 312.8888888888889 298.6666666666667 Q 313.77777777777777 285.3333333333333 327.1111111111111 284.44444444444446 L 327.1111111111111 284.44444444444446 Z"})})}function Ett({modal:i}){const t=lp(),e=VE(),n=s=>{t(BM(s))};return k.jsx(dp,{modal:i,children:k.jsxs(NN,{flow:"row",children:[k.jsx(qd,{onClick:()=>n("photo"),SvgIcon:Att,text:"My_photo",highlightColor:e.pallet.textColor}),k.jsx(qd,{onClick:()=>n("experience"),SvgIcon:btt,text:"Experience",highlightColor:e.pallet.textColor}),k.jsx(qd,{onClick:()=>n("about_me"),SvgIcon:Stt,text:"About_me",highlightColor:e.pallet.textColor}),k.jsx(qd,{onClick:()=>n("skills"),SvgIcon:xtt,text:"Skills",highlightColor:e.pallet.textColor})]})})}var V_={};V_.d=(i,t)=>{for(var e in t)V_.o(t,e)&&!V_.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})};V_.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var sn=globalThis.pdfjsLib={};V_.d(sn,{AbortException:()=>h0,AnnotationEditorLayer:()=>rw,AnnotationEditorParamsType:()=>Ze,AnnotationEditorType:()=>dn,AnnotationEditorUIManager:()=>Zg,AnnotationLayer:()=>Ent,AnnotationMode:()=>yd,ColorPicker:()=>vE,DOMSVGFactory:()=>I7,DrawLayer:()=>cw,FeatureTest:()=>Ia,GlobalWorkerOptions:()=>Wh,ImageKind:()=>U4,InvalidPDFException:()=>PN,MissingPDFException:()=>u0,OPS:()=>uc,OutputScale:()=>Z5,PDFDataRangeTransport:()=>OI,PDFDateString:()=>w7,PDFWorker:()=>nv,PasswordResponses:()=>wtt,PermissionFlag:()=>Ctt,PixelsPerInch:()=>sp,RenderingCancelledException:()=>T7,TextLayer:()=>TC,UnexpectedResponseException:()=>UM,Util:()=>Le,VerbosityLevel:()=>OM,XfaLayer:()=>II,build:()=>snt,createValidAbsoluteUrl:()=>Btt,fetchData:()=>FM,getDocument:()=>Wet,getFilenameFromUrl:()=>Gtt,getPdfFilenameFromUrl:()=>ktt,getXfaPageViewport:()=>Vtt,isDataScheme:()=>HM,isPdfFile:()=>C7,noContextMenu:()=>Dl,normalizeUnicode:()=>Ftt,setLayerDimensions:()=>Jg,shadow:()=>Hn,version:()=>int});const ra=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),UN=[1,0,0,1,0,0],Y5=[.001,0,0,.001,0,0],Mtt=1e7,t5=1.35,Fo={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},yd={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ttt="pdfjs_internal_editor_",dn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ze={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Ctt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Kr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},U4={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ks={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},o_={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},OM={ERRORS:0,WARNINGS:1,INFOS:5},uc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},wtt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let NM=OM.WARNINGS;function Rtt(i){Number.isInteger(i)&&(NM=i)}function Ltt(){return NM}function IM(i){NM>=OM.INFOS&&console.log(`Info: ${i}`)}function An(i){NM>=OM.WARNINGS&&console.log(`Warning: ${i}`)}function Oi(i){throw new Error(i)}function Xs(i,t){i||Oi(t)}function Dtt(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Btt(i,t=null,e=null){if(!i)return null;try{if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=Ptt(i)}catch{}}const n=t?new URL(i,t):new URL(i);if(Dtt(n))return n}catch{}return null}function Hn(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const pp=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class W5 extends pp{constructor(t,e){super(t,"PasswordException"),this.code=e}}class K5 extends pp{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class PN extends pp{constructor(t){super(t,"InvalidPDFException")}}class u0 extends pp{constructor(t){super(t,"MissingPDFException")}}class UM extends pp{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class Ott extends pp{constructor(t){super(t,"FormatError")}}class h0 extends pp{constructor(t){super(t,"AbortException")}}function FN(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Oi("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),a=i.subarray(s,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function PM(i){typeof i!="string"&&Oi("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function Ntt(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function E7(i){const t=Object.create(null);for(const[e,n]of i)t[e]=n;return t}function Itt(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function Utt(){try{return new Function(""),!0}catch{return!1}}class Ia{static get isLittleEndian(){return Hn(this,"isLittleEndian",Itt())}static get isEvalSupported(){return Hn(this,"isEvalSupported",Utt())}static get isOffscreenCanvasSupported(){return Hn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Hn(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Hn(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Hn(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const e5=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var nf,P4,J5;class Le{static makeHexColor(t,e,n){return`#${e5[t]}${e5[e]}${e5[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[n,s]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[s,r]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),a=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],s[0],r[0],a[0]),Math.min(n[1],s[1],r[1],a[1]),Math.max(n[0],s[0],r[0],a[0]),Math.max(n[1],s[1],r[1],a[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],l=(n+a)/2,u=Math.sqrt((n+a)**2-4*(n*a-r*s))/2,f=l+u||1,m=l-u||1;return[Math.sqrt(f),Math.sqrt(m)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[n,r,s,a]}static bezierBoundingBox(t,e,n,s,r,a,l,u,f){return f?(f[0]=Math.min(f[0],t,l),f[1]=Math.min(f[1],e,u),f[2]=Math.max(f[2],t,l),f[3]=Math.max(f[3],e,u)):f=[Math.min(t,l),Math.min(e,u),Math.max(t,l),Math.max(e,u)],V(this,nf,J5).call(this,t,n,r,l,e,s,a,u,3*(-t+3*(n-r)+l),6*(t-2*n+r),3*(n-t),f),V(this,nf,J5).call(this,t,n,r,l,e,s,a,u,3*(-e+3*(s-a)+u),6*(e-2*s+a),3*(s-e),f),f}}nf=new WeakSet,P4=function(t,e,n,s,r,a,l,u,f,m){if(f<=0||f>=1)return;const g=1-f,v=f*f,_=v*f,b=g*(g*(g*t+3*f*e)+3*v*n)+_*s,C=g*(g*(g*r+3*f*a)+3*v*l)+_*u;m[0]=Math.min(m[0],b),m[1]=Math.min(m[1],C),m[2]=Math.max(m[2],b),m[3]=Math.max(m[3],C)},J5=function(t,e,n,s,r,a,l,u,f,m,g,v){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&V(this,nf,P4).call(this,t,e,n,s,r,a,l,u,-g/m,v);return}const _=m**2-4*g*f;if(_<0)return;const b=Math.sqrt(_),C=2*f;V(this,nf,P4).call(this,t,e,n,s,r,a,l,u,(-m+b)/C,v),V(this,nf,P4).call(this,t,e,n,s,r,a,l,u,(-m-b)/C,v)},W(Le,nf);function Ptt(i){return decodeURIComponent(escape(i))}let n5=null,C9=null;function Ftt(i){return n5||(n5=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,C9=new Map([["ﬅ","ſt"]])),i.replaceAll(n5,(t,e,n)=>e?e.normalize("NFKC"):C9.get(n))}function Htt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let t=0;t<32;t++)i[t]=Math.floor(Math.random()*255);return FN(i)}const M7="pdfjs_internal_id_",vh={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function ztt(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(FN(i))}const _h="http://www.w3.org/2000/svg",Lm=class Lm{};Je(Lm,"CSS",96),Je(Lm,"PDF",72),Je(Lm,"PDF_TO_CSS_UNITS",Lm.CSS/Lm.PDF);let sp=Lm;async function FM(i,t="text"){if(m_(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class Gx{constructor({viewBox:t,scale:e,rotation:n,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=s,this.offsetY=r;const l=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let f,m,g,v;switch(n%=360,n<0&&(n+=360),n){case 180:f=-1,m=0,g=0,v=1;break;case 90:f=0,m=1,g=1,v=0;break;case 270:f=0,m=-1,g=-1,v=0;break;case 0:f=1,m=0,g=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(g=-g,v=-v);let _,b,C,M;f===0?(_=Math.abs(u-t[1])*e+s,b=Math.abs(l-t[0])*e+r,C=(t[3]-t[1])*e,M=(t[2]-t[0])*e):(_=Math.abs(l-t[0])*e+s,b=Math.abs(u-t[1])*e+r,C=(t[2]-t[0])*e,M=(t[3]-t[1])*e),this.transform=[f*e,m*e,g*e,v*e,_-f*e*l-g*e*u,b-m*e*l-v*e*u],this.width=C,this.height=M}get rawDims(){const{viewBox:t}=this;return Hn(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new Gx({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){return Le.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Le.applyTransform([t[0],t[1]],this.transform),n=Le.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return Le.applyInverseTransform([t,e],this.transform)}}class T7 extends pp{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function HM(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function C7(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function Gtt(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function ktt(i,t="document.pdf"){if(typeof i!="string")return t;if(HM(i))return An('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(i);let r=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class w9{constructor(){Je(this,"started",Object.create(null));Je(this,"times",[])}time(t){t in this.started&&An(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||An(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-s}ms
`);return t.join("")}}function m_(i,t){try{const{protocol:e}=t?new URL(i,t):new URL(i);return e==="http:"||e==="https:"}catch{return!1}}function Dl(i){i.preventDefault()}function R9(i){console.log("Deprecated API usage: "+i)}var hA;class w7{static toDateObject(t){if(!t||typeof t!="string")return null;x(this,hA)||G(this,hA,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=x(this,hA).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let u=parseInt(e[6],10);u=u>=0&&u<=59?u:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(a+=m,l+=g):f==="+"&&(a-=m,l-=g),new Date(Date.UTC(n,s,r,a,l,u))}}hA=new WeakMap,W(w7,hA);function Vtt(i,{scale:t=1,rotation:e=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new Gx({viewBox:r,scale:t,rotation:e})}function R7(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(An(`Not a valid color format: "${i}"`),[0,0,0])}function Qtt(i){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,R7(n))}t.remove()}function Wi(i){const{a:t,b:e,c:n,d:s,e:r,f:a}=i.getTransform();return[t,e,n,s,r,a]}function yh(i){const{a:t,b:e,c:n,d:s,e:r,f:a}=i.getTransform().invertSelf();return[t,e,n,s,r,a]}function Jg(i,t,e=!1,n=!0){if(t instanceof Gx){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:a}=i,l=Ia.isCSSRoundSupported,u=`var(--scale-factor) * ${s}px`,f=`var(--scale-factor) * ${r}px`,m=l?`round(down, ${u}, var(--scale-round-x, 1px))`:`calc(${u})`,g=l?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!e||t.rotation%180===0?(a.width=m,a.height=g):(a.width=g,a.height=m)}n&&i.setAttribute("data-main-rotation",t.rotation)}class Z5{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var _d,Hm,hc,zm,fA,dA,_E,HN,Ua,zN,GN,F4,kN,tC;const bh=class bh{constructor(t){W(this,Ua);W(this,_d,null);W(this,Hm,null);W(this,hc);W(this,zm,null);W(this,fA,null);G(this,hc,t),x(bh,dA)||G(bh,dA,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=G(this,_d,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=x(this,hc)._uiManager._signal;t.addEventListener("contextmenu",Dl,{signal:e}),t.addEventListener("pointerdown",V(bh,_E,HN),{signal:e});const n=G(this,zm,document.createElement("div"));n.className="buttons",t.append(n);const s=x(this,hc).toolbarPosition;if(s){const{style:r}=t,a=x(this,hc)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return V(this,Ua,kN).call(this),t}get div(){return x(this,_d)}hide(){var t;x(this,_d).classList.add("hidden"),(t=x(this,Hm))==null||t.hideDropdown()}show(){var t;x(this,_d).classList.remove("hidden"),(t=x(this,fA))==null||t.shown()}async addAltText(t){const e=await t.render();V(this,Ua,F4).call(this,e),x(this,zm).prepend(e,x(this,Ua,tC)),G(this,fA,t)}addColorPicker(t){G(this,Hm,t);const e=t.renderButton();V(this,Ua,F4).call(this,e),x(this,zm).prepend(e,x(this,Ua,tC))}remove(){var t;x(this,_d).remove(),(t=x(this,Hm))==null||t.destroy(),G(this,Hm,null)}};_d=new WeakMap,Hm=new WeakMap,hc=new WeakMap,zm=new WeakMap,fA=new WeakMap,dA=new WeakMap,_E=new WeakSet,HN=function(t){t.stopPropagation()},Ua=new WeakSet,zN=function(t){x(this,hc)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},GN=function(t){x(this,hc)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},F4=function(t){const e=x(this,hc)._uiManager._signal;t.addEventListener("focusin",V(this,Ua,zN).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",V(this,Ua,GN).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Dl,{signal:e})},kN=function(){const{editorType:t,_uiManager:e}=x(this,hc),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",x(bh,dA)[t]),V(this,Ua,F4).call(this,n),n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),x(this,zm).append(n)},tC=function(){const t=document.createElement("div");return t.className="divider",t},W(bh,_E),W(bh,dA,null);let $5=bh;var pA,Gm,km,ap,VN,QN,jN;class jtt{constructor(t){W(this,ap);W(this,pA,null);W(this,Gm,null);W(this,km);G(this,km,t)}show(t,e,n){const[s,r]=V(this,ap,QN).call(this,e,n),{style:a}=x(this,Gm)||G(this,Gm,V(this,ap,VN).call(this));t.append(x(this,Gm)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){x(this,Gm).remove()}}pA=new WeakMap,Gm=new WeakMap,km=new WeakMap,ap=new WeakSet,VN=function(){const t=G(this,Gm,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Dl,{signal:x(this,km)._signal});const e=G(this,pA,document.createElement("div"));return e.className="buttons",t.append(e),V(this,ap,jN).call(this),t},QN=function(t,e){let n=0,s=0;for(const r of t){const a=r.y+r.height;if(a<n)continue;const l=r.x+(e?r.width:0);if(a>n){s=l,n=a;continue}e?l>s&&(s=l):l<s&&(s=l)}return[e?1-s:s,n]},jN=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=x(this,km)._signal;t.addEventListener("contextmenu",Dl,{signal:n}),t.addEventListener("click",()=>{x(this,km).highlightSelection("floating_button")},{signal:n}),x(this,pA).append(t)};function pE(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}function Xtt(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var AE;class qtt{constructor(){W(this,AE,0)}get id(){return`${Ttt}${Ea(this,AE)._++}`}}AE=new WeakMap;var rv,mA,Zr,av,H4;const H7=class H7{constructor(){W(this,av);W(this,rv,Htt());W(this,mA,0);W(this,Zr,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Hn(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:r}=t;return V(this,av,H4).call(this,`${e}_${n}_${s}_${r}`,t)}async getFromUrl(t){return V(this,av,H4).call(this,t,t)}async getFromBlob(t,e){const n=await e;return V(this,av,H4).call(this,t,n)}async getFromId(t){x(this,Zr)||G(this,Zr,new Map);const e=x(this,Zr).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){x(this,Zr)||G(this,Zr,new Map);let n=x(this,Zr).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${x(this,rv)}_${Ea(this,mA)._++}`,refCounter:1,isSvg:!1},x(this,Zr).set(t,n),x(this,Zr).set(n.id,n),n}getSvgUrl(t){const e=x(this,Zr).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;x(this,Zr)||G(this,Zr,new Map);const e=x(this,Zr).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(s=n.close)==null||s.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${x(this,rv)}_`)}};rv=new WeakMap,mA=new WeakMap,Zr=new WeakMap,av=new WeakSet,H4=async function(t,e){x(this,Zr)||G(this,Zr,new Map);let n=x(this,Zr).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${x(this,rv)}_${Ea(this,mA)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(n.url=e,s=await FM(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=H7._isSVGFittingCanvas,a=new FileReader,l=new Image,u=new Promise((f,m)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,f()},a.onload=async()=>{const g=n.svgUrl=a.result;l.src=await r?`${g}#svgView(preserveAspectRatio(none))`:g},l.onerror=a.onerror=m});a.readAsDataURL(s),await u}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){console.error(s),n=null}return x(this,Zr).set(t,n),n&&x(this,Zr).set(n.id,n),n};let eC=H7;var lr,Ad,gA,cr;class Ytt{constructor(t=128){W(this,lr,[]);W(this,Ad,!1);W(this,gA);W(this,cr,-1);G(this,gA,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(s&&t(),x(this,Ad))return;const u={cmd:t,undo:e,post:n,type:r};if(x(this,cr)===-1){x(this,lr).length>0&&(x(this,lr).length=0),G(this,cr,0),x(this,lr).push(u);return}if(a&&x(this,lr)[x(this,cr)].type===r){l&&(u.undo=x(this,lr)[x(this,cr)].undo),x(this,lr)[x(this,cr)]=u;return}const f=x(this,cr)+1;f===x(this,gA)?x(this,lr).splice(0,1):(G(this,cr,f),f<x(this,lr).length&&x(this,lr).splice(f)),x(this,lr).push(u)}undo(){if(x(this,cr)===-1)return;G(this,Ad,!0);const{undo:t,post:e}=x(this,lr)[x(this,cr)];t(),e==null||e(),G(this,Ad,!1),G(this,cr,x(this,cr)-1)}redo(){if(x(this,cr)<x(this,lr).length-1){G(this,cr,x(this,cr)+1),G(this,Ad,!0);const{cmd:t,post:e}=x(this,lr)[x(this,cr)];t(),e==null||e(),G(this,Ad,!1)}}hasSomethingToUndo(){return x(this,cr)!==-1}hasSomethingToRedo(){return x(this,cr)<x(this,lr).length-1}destroy(){G(this,lr,null)}}lr=new WeakMap,Ad=new WeakMap,gA=new WeakMap,cr=new WeakMap;var xE,XN;class kx{constructor(t){W(this,xE);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ia.platform;for(const[n,s,r={}]of t)for(const a of n){const l=a.startsWith("mac+");e&&l?(this.callbacks.set(a.slice(4),{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1))):!e&&!l&&(this.callbacks.set(a,{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(V(this,xE,XN).call(this,e));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:a=[],checker:l=null}}=n;l&&!l(t,e)||(s.bind(t,...a,e)(),r||(e.stopPropagation(),e.preventDefault()))}}xE=new WeakSet,XN=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const bE=class bE{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Qtt(t),Hn(this,"_colors",t)}convert(t){const e=R7(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((r,a)=>r===e[a]))return bE._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Le.makeHexColor(...e):t}};Je(bE,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let nC=bE;var ov,Lo,Vs,wr,lv,Eh,cv,fc,xd,uv,Vm,yu,dc,Qm,vA,yA,hv,_A,_u,bd,fv,Sd,Au,SE,Ed,AA,Md,jm,xA,bA,ur,ui,Mh,Xm,SA,EA,Td,xu,Th,MA,Al,me,z4,iC,qN,YN,G4,WN,KN,JN,sC,ZN,rC,aC,$N,Ta,dd,tI,eI,oC,nI,g_,lC;const J1=class J1{constructor(t,e,n,s,r,a,l,u,f,m,g){W(this,me);W(this,ov,new AbortController);W(this,Lo,null);W(this,Vs,new Map);W(this,wr,new Map);W(this,lv,null);W(this,Eh,null);W(this,cv,null);W(this,fc,new Ytt);W(this,xd,null);W(this,uv,0);W(this,Vm,new Set);W(this,yu,null);W(this,dc,null);W(this,Qm,new Set);W(this,vA,!1);W(this,yA,!1);W(this,hv,!1);W(this,_A,null);W(this,_u,null);W(this,bd,null);W(this,fv,null);W(this,Sd,!1);W(this,Au,null);W(this,SE,new qtt);W(this,Ed,!1);W(this,AA,!1);W(this,Md,null);W(this,jm,null);W(this,xA,null);W(this,bA,null);W(this,ur,dn.NONE);W(this,ui,new Set);W(this,Mh,null);W(this,Xm,null);W(this,SA,null);W(this,EA,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});W(this,Td,[0,0]);W(this,xu,null);W(this,Th,null);W(this,MA,null);W(this,Al,null);const v=this._signal=x(this,ov).signal;G(this,Th,t),G(this,MA,e),G(this,lv,n),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:v}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),s._on("setpreference",this.onSetPreference.bind(this),{signal:v}),s._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:v}),V(this,me,WN).call(this),V(this,me,$N).call(this),V(this,me,sC).call(this),G(this,Eh,r.annotationStorage),G(this,_A,r.filterFactory),G(this,Xm,a),G(this,fv,l||null),G(this,vA,u),G(this,yA,f),G(this,hv,m),G(this,bA,g||null),this.viewParameters={realScale:sp.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=J1.prototype,e=a=>x(a,Th).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:u}=l;return u!=="text"&&u!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Hn(this,"_keyboardManager",new kx([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&x(a,Th).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&x(a,Th).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,s;(t=x(this,Al))==null||t.resolve(),G(this,Al,null),(e=x(this,ov))==null||e.abort(),G(this,ov,null),this._signal=null;for(const r of x(this,wr).values())r.destroy();x(this,wr).clear(),x(this,Vs).clear(),x(this,Qm).clear(),G(this,Lo,null),x(this,ui).clear(),x(this,fc).destroy(),(n=x(this,lv))==null||n.destroy(),(s=x(this,Au))==null||s.hide(),G(this,Au,null),x(this,_u)&&(clearTimeout(x(this,_u)),G(this,_u,null)),x(this,xu)&&(clearTimeout(x(this,xu)),G(this,xu,null))}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return x(this,bA)}get useNewAltTextFlow(){return x(this,yA)}get useNewAltTextWhenAddingImage(){return x(this,hv)}get hcmFilter(){return Hn(this,"hcmFilter",x(this,Xm)?x(this,_A).addHCMFilter(x(this,Xm).foreground,x(this,Xm).background):"none")}get direction(){return Hn(this,"direction",getComputedStyle(x(this,Th)).direction)}get highlightColors(){return Hn(this,"highlightColors",x(this,fv)?new Map(x(this,fv).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Hn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){G(this,xA,t)}editAltText(t,e=!1){var n;(n=x(this,lv))==null||n.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":G(this,hv,e);break}}onPageChanging({pageNumber:t}){G(this,uv,t-1)}focusMainContainer(){x(this,Th).focus()}findParent(t,e){for(const n of x(this,wr).values()){const{x:s,y:r,width:a,height:l}=n.div.getBoundingClientRect();if(t>=s&&t<=s+a&&e>=r&&e<=r+l)return n}return null}disableUserSelect(t=!1){x(this,MA).classList.toggle("noUserSelect",t)}addShouldRescale(t){x(this,Qm).add(t)}removeShouldRescale(t){x(this,Qm).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*sp.PDF_TO_CSS_UNITS;for(const e of x(this,Qm))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a}=e,l=e.toString(),f=V(this,me,z4).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(f);if(!m)return;e.empty();const g=V(this,me,iC).call(this,f),v=x(this,ur)===dn.NONE,_=()=>{g==null||g.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a,text:l}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(dn.HIGHLIGHT,_);return}_()}addToAnnotationStorage(t){!t.isEmpty()&&x(this,Eh)&&!x(this,Eh).has(t.id)&&x(this,Eh).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,x(this,Sd)&&(G(this,Sd,!1),V(this,me,G4).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of x(this,ui))if(e.div.contains(t)){G(this,jm,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!x(this,jm))return;const[t,e]=x(this,jm);G(this,jm,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){V(this,me,sC).call(this),V(this,me,rC).call(this)}removeEditListeners(){V(this,me,ZN).call(this),V(this,me,aC).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of x(this,dc))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of x(this,dc))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=x(this,Lo))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of x(this,ui)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const a of x(this,dc))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){An(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const u of n){const f=await s.deserialize(u);if(!f)return;r.push(f)}const a=()=>{for(const u of r)V(this,me,oC).call(this,u);V(this,me,lC).call(this,r)},l=()=>{for(const u of r)u.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(r){An(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),x(this,ur)!==dn.NONE&&!this.isEditorHandlingKeyboard&&J1._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,x(this,Sd)&&(G(this,Sd,!1),V(this,me,G4).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(V(this,me,KN).call(this),V(this,me,rC).call(this),V(this,me,Ta).call(this,{isEditing:x(this,ur)!==dn.NONE,isEmpty:V(this,me,g_).call(this),hasSomethingToUndo:x(this,fc).hasSomethingToUndo(),hasSomethingToRedo:x(this,fc).hasSomethingToRedo(),hasSelectedEditor:!1})):(V(this,me,JN).call(this),V(this,me,aC).call(this),V(this,me,Ta).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!x(this,dc)){G(this,dc,t);for(const e of x(this,dc))V(this,me,dd).call(this,e.defaultPropertiesToUpdate)}}getId(){return x(this,SE).id}get currentLayer(){return x(this,wr).get(x(this,uv))}getLayer(t){return x(this,wr).get(t)}get currentPageIndex(){return x(this,uv)}addLayer(t){x(this,wr).set(t.pageIndex,t),x(this,Ed)?t.enable():t.disable()}removeLayer(t){x(this,wr).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){if(x(this,ur)!==t&&!(x(this,Al)&&(await x(this,Al).promise,!x(this,Al)))){if(G(this,Al,Promise.withResolvers()),G(this,ur,t),t===dn.NONE){this.setEditingState(!1),V(this,me,eI).call(this),x(this,Al).resolve();return}this.setEditingState(!0),await V(this,me,tI).call(this),this.unselectAll();for(const s of x(this,wr).values())s.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),x(this,Al).resolve();return}for(const s of x(this,Vs).values())s.annotationElementId===e?(this.setSelected(s),s.enterInEditMode()):s.unselect();x(this,Al).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==x(this,ur)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(x(this,dc)){switch(t){case Ze.CREATE:this.currentLayer.addNewEditor();return;case Ze.HIGHLIGHT_DEFAULT_COLOR:(n=x(this,xA))==null||n.updateColor(e);break;case Ze.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(x(this,SA)||G(this,SA,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of x(this,ui))s.updateParams(t,e);for(const s of x(this,dc))s.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const a of x(this,Vs).values())a.editorType===t&&a.show(e);(((r=x(this,SA))==null?void 0:r.get(Ze.HIGHLIGHT_SHOW_ALL))??!0)!==e&&V(this,me,dd).call(this,[[Ze.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(x(this,AA)!==t){G(this,AA,t);for(const e of x(this,wr).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of x(this,Vs).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return x(this,Vs).get(t)}addEditor(t){x(this,Vs).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(x(this,_u)&&clearTimeout(x(this,_u)),G(this,_u,setTimeout(()=>{this.focusMainContainer(),G(this,_u,null)},0))),x(this,Vs).delete(t.id),this.unselect(t),(!t.annotationElementId||!x(this,Vm).has(t.annotationElementId))&&((e=x(this,Eh))==null||e.remove(t.id))}addDeletedAnnotationElement(t){x(this,Vm).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return x(this,Vm).has(t)}removeDeletedAnnotationElement(t){x(this,Vm).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){x(this,Lo)!==t&&(G(this,Lo,t),t&&V(this,me,dd).call(this,t.propertiesToUpdate))}updateUI(t){x(this,me,nI)===t&&V(this,me,dd).call(this,t.propertiesToUpdate)}toggleSelected(t){if(x(this,ui).has(t)){x(this,ui).delete(t),t.unselect(),V(this,me,Ta).call(this,{hasSelectedEditor:this.hasSelection});return}x(this,ui).add(t),t.select(),V(this,me,dd).call(this,t.propertiesToUpdate),V(this,me,Ta).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of x(this,ui))e!==t&&e.unselect();x(this,ui).clear(),x(this,ui).add(t),t.select(),V(this,me,dd).call(this,t.propertiesToUpdate),V(this,me,Ta).call(this,{hasSelectedEditor:!0})}isSelected(t){return x(this,ui).has(t)}get firstSelectedEditor(){return x(this,ui).values().next().value}unselect(t){t.unselect(),x(this,ui).delete(t),V(this,me,Ta).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return x(this,ui).size!==0}get isEnterHandled(){return x(this,ui).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){x(this,fc).undo(),V(this,me,Ta).call(this,{hasSomethingToUndo:x(this,fc).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:V(this,me,g_).call(this)})}redo(){x(this,fc).redo(),V(this,me,Ta).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:x(this,fc).hasSomethingToRedo(),isEmpty:V(this,me,g_).call(this)})}addCommands(t){x(this,fc).add(t),V(this,me,Ta).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:V(this,me,g_).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...x(this,ui)],e=()=>{for(const s of t)s.remove()},n=()=>{for(const s of t)V(this,me,oC).call(this,s)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=x(this,Lo))==null||t.commitOrRemove()}hasSomethingToControl(){return x(this,Lo)||this.hasSelection}selectAll(){for(const t of x(this,ui))t.commit();V(this,me,lC).call(this,x(this,Vs).values())}unselectAll(){if(!(x(this,Lo)&&(x(this,Lo).commitOrRemove(),x(this,ur)!==dn.NONE))&&this.hasSelection){for(const t of x(this,ui))t.unselect();x(this,ui).clear(),V(this,me,Ta).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;x(this,Td)[0]+=t,x(this,Td)[1]+=e;const[s,r]=x(this,Td),a=[...x(this,ui)],l=1e3;x(this,xu)&&clearTimeout(x(this,xu)),G(this,xu,setTimeout(()=>{G(this,xu,null),x(this,Td)[0]=x(this,Td)[1]=0,this.addCommands({cmd:()=>{for(const u of a)x(this,Vs).has(u.id)&&u.translateInPage(s,r)},undo:()=>{for(const u of a)x(this,Vs).has(u.id)&&u.translateInPage(-s,-r)},mustExec:!1})},l));for(const u of a)u.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),G(this,yu,new Map);for(const t of x(this,ui))x(this,yu).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!x(this,yu))return!1;this.disableUserSelect(!1);const t=x(this,yu);G(this,yu,null);let e=!1;for(const[{x:s,y:r,pageIndex:a},l]of t)l.newX=s,l.newY=r,l.newPageIndex=a,e||(e=s!==l.savedX||r!==l.savedY||a!==l.savedPageIndex);if(!e)return!1;const n=(s,r,a,l)=>{if(x(this,Vs).has(s.id)){const u=x(this,wr).get(l);u?s._setParentAndPosition(u,r,a):(s.pageIndex=l,s.x=r,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:a,newPageIndex:l}]of t)n(s,r,a,l)},undo:()=>{for(const[s,{savedX:r,savedY:a,savedPageIndex:l}]of t)n(s,r,a,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(x(this,yu))for(const n of x(this,yu).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||x(this,ui).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return x(this,Lo)===t}getActive(){return x(this,Lo)}getMode(){return x(this,ur)}get imageManager(){return Hn(this,"imageManager",new eC)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:a}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(f,m,g,v)=>({x:(m-s)/a,y:1-(f+g-n)/r,width:v/a,height:g/r});break;case"180":l=(f,m,g,v)=>({x:1-(f+g-n)/r,y:1-(m+v-s)/a,width:g/r,height:v/a});break;case"270":l=(f,m,g,v)=>({x:1-(m+v-s)/a,y:(f-n)/r,width:v/a,height:g/r});break;default:l=(f,m,g,v)=>({x:(f-n)/r,y:(m-s)/a,width:g/r,height:v/a});break}const u=[];for(let f=0,m=e.rangeCount;f<m;f++){const g=e.getRangeAt(f);if(!g.collapsed)for(const{x:v,y:_,width:b,height:C}of g.getClientRects())b===0||C===0||u.push(l(v,_,b,C))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:t,id:e}){(x(this,cv)||G(this,cv,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=x(this,cv))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=x(this,cv))==null?void 0:s.get(t.data.id);if(!e)return;const n=x(this,Eh).getRawValue(e);n&&(x(this,ur)===dn.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};ov=new WeakMap,Lo=new WeakMap,Vs=new WeakMap,wr=new WeakMap,lv=new WeakMap,Eh=new WeakMap,cv=new WeakMap,fc=new WeakMap,xd=new WeakMap,uv=new WeakMap,Vm=new WeakMap,yu=new WeakMap,dc=new WeakMap,Qm=new WeakMap,vA=new WeakMap,yA=new WeakMap,hv=new WeakMap,_A=new WeakMap,_u=new WeakMap,bd=new WeakMap,fv=new WeakMap,Sd=new WeakMap,Au=new WeakMap,SE=new WeakMap,Ed=new WeakMap,AA=new WeakMap,Md=new WeakMap,jm=new WeakMap,xA=new WeakMap,bA=new WeakMap,ur=new WeakMap,ui=new WeakMap,Mh=new WeakMap,Xm=new WeakMap,SA=new WeakMap,EA=new WeakMap,Td=new WeakMap,xu=new WeakMap,Th=new WeakMap,MA=new WeakMap,Al=new WeakMap,me=new WeakSet,z4=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},iC=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of x(this,wr).values())if(n.hasTextLayer(t))return n;return null},qN=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=V(this,me,z4).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(x(this,Au)||G(this,Au,new jtt(this)),x(this,Au).show(n,s,this.direction==="ltr"))},YN=function(){var r,a,l;const t=document.getSelection();if(!t||t.isCollapsed){x(this,Mh)&&((r=x(this,Au))==null||r.hide(),G(this,Mh,null),V(this,me,Ta).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===x(this,Mh))return;const s=V(this,me,z4).call(this,t).closest(".textLayer");if(!s){x(this,Mh)&&((a=x(this,Au))==null||a.hide(),G(this,Mh,null),V(this,me,Ta).call(this,{hasSelectedText:!1}));return}if((l=x(this,Au))==null||l.hide(),G(this,Mh,e),V(this,me,Ta).call(this,{hasSelectedText:!0}),!(x(this,ur)!==dn.HIGHLIGHT&&x(this,ur)!==dn.NONE)&&(x(this,ur)===dn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),G(this,Sd,this.isShiftKeyDown),!this.isShiftKeyDown)){const u=x(this,ur)===dn.HIGHLIGHT?V(this,me,iC).call(this,s):null;u==null||u.toggleDrawing();const f=new AbortController,m=this.combinedSignal(f),g=v=>{v.type==="pointerup"&&v.button!==0||(f.abort(),u==null||u.toggleDrawing(!0),v.type==="pointerup"&&V(this,me,G4).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("blur",g,{signal:m})}},G4=function(t=""){x(this,ur)===dn.HIGHLIGHT?this.highlightSelection(t):x(this,vA)&&V(this,me,qN).call(this)},WN=function(){document.addEventListener("selectionchange",V(this,me,YN).bind(this),{signal:this._signal})},KN=function(){if(x(this,bd))return;G(this,bd,new AbortController);const t=this.combinedSignal(x(this,bd));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},JN=function(){var t;(t=x(this,bd))==null||t.abort(),G(this,bd,null)},sC=function(){if(x(this,Md))return;G(this,Md,new AbortController);const t=this.combinedSignal(x(this,Md));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},ZN=function(){var t;(t=x(this,Md))==null||t.abort(),G(this,Md,null)},rC=function(){if(x(this,xd))return;G(this,xd,new AbortController);const t=this.combinedSignal(x(this,xd));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},aC=function(){var t;(t=x(this,xd))==null||t.abort(),G(this,xd,null)},$N=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Ta=function(t){Object.entries(t).some(([n,s])=>x(this,EA)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(x(this,EA),t)}),x(this,ur)===dn.HIGHLIGHT&&t.hasSelectedEditor===!1&&V(this,me,dd).call(this,[[Ze.HIGHLIGHT_FREE,!0]]))},dd=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},tI=async function(){if(!x(this,Ed)){G(this,Ed,!0);const t=[];for(const e of x(this,wr).values())t.push(e.enable());await Promise.all(t);for(const e of x(this,Vs).values())e.enable()}},eI=function(){if(this.unselectAll(),x(this,Ed)){G(this,Ed,!1);for(const t of x(this,wr).values())t.disable();for(const t of x(this,Vs).values())t.disable()}},oC=function(t){const e=x(this,wr).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},nI=function(){let t=null;for(t of x(this,ui));return t},g_=function(){if(x(this,Vs).size===0)return!0;if(x(this,Vs).size===1)for(const t of x(this,Vs).values())return t.isEmpty();return!1},lC=function(t){for(const e of x(this,ui))e.unselect();x(this,ui).clear();for(const e of t)e.isEmpty()||(x(this,ui).add(e),e.select());V(this,me,Ta).call(this,{hasSelectedEditor:this.hasSelection})},Je(J1,"TRANSLATE_SMALL",1),Je(J1,"TRANSLATE_BIG",10);let Zg=J1;var hr,bu,pc,dv,Su,Do,pv,Eu,eo,Ch,qm,Mu,Cd,wc,v_,k4;const wa=class wa{constructor(t){W(this,wc);W(this,hr,null);W(this,bu,!1);W(this,pc,null);W(this,dv,null);W(this,Su,null);W(this,Do,null);W(this,pv,!1);W(this,Eu,null);W(this,eo,null);W(this,Ch,null);W(this,qm,null);W(this,Mu,!1);G(this,eo,t),G(this,Mu,t._uiManager.useNewAltTextFlow),x(wa,Cd)||G(wa,Cd,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){wa._l10n??(wa._l10n=t)}async render(){const t=G(this,pc,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=G(this,dv,document.createElement("span"));t.append(e),x(this,Mu)?(t.classList.add("new"),t.setAttribute("data-l10n-id",x(wa,Cd).missing),e.setAttribute("data-l10n-id",x(wa,Cd)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=x(this,eo)._uiManager._signal;t.addEventListener("contextmenu",Dl,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),x(this,eo)._uiManager.editAltText(x(this,eo)),x(this,Mu)&&x(this,eo)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:x(this,wc,v_)}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(G(this,pv,!0),s(r))},{signal:n}),await V(this,wc,k4).call(this),t}finish(){x(this,pc)&&(x(this,pc).focus({focusVisible:x(this,pv)}),G(this,pv,!1))}isEmpty(){return x(this,Mu)?x(this,hr)===null:!x(this,hr)&&!x(this,bu)}hasData(){return x(this,Mu)?x(this,hr)!==null||!!x(this,Ch):this.isEmpty()}get guessedText(){return x(this,Ch)}async setGuessedText(t){x(this,hr)===null&&(G(this,Ch,t),G(this,qm,await wa._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),V(this,wc,k4).call(this))}toggleAltTextBadge(t=!1){var e;if(!x(this,Mu)||x(this,hr)){(e=x(this,Eu))==null||e.remove(),G(this,Eu,null);return}if(!x(this,Eu)){const n=G(this,Eu,document.createElement("div"));n.className="noAltTextBadge",x(this,eo).div.append(n)}x(this,Eu).classList.toggle("hidden",!t)}serialize(t){let e=x(this,hr);return!t&&x(this,Ch)===e&&(e=x(this,qm)),{altText:e,decorative:x(this,bu),guessedText:x(this,Ch),textWithDisclaimer:x(this,qm)}}get data(){return{altText:x(this,hr),decorative:x(this,bu)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:r=!1}){n&&(G(this,Ch,n),G(this,qm,s)),!(x(this,hr)===t&&x(this,bu)===e)&&(r||(G(this,hr,t),G(this,bu,e)),V(this,wc,k4).call(this))}toggle(t=!1){x(this,pc)&&(!t&&x(this,Do)&&(clearTimeout(x(this,Do)),G(this,Do,null)),x(this,pc).disabled=!t)}shown(){x(this,eo)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:x(this,wc,v_)}})}destroy(){var t,e;(t=x(this,pc))==null||t.remove(),G(this,pc,null),G(this,dv,null),G(this,Su,null),(e=x(this,Eu))==null||e.remove(),G(this,Eu,null)}};hr=new WeakMap,bu=new WeakMap,pc=new WeakMap,dv=new WeakMap,Su=new WeakMap,Do=new WeakMap,pv=new WeakMap,Eu=new WeakMap,eo=new WeakMap,Ch=new WeakMap,qm=new WeakMap,Mu=new WeakMap,Cd=new WeakMap,wc=new WeakSet,v_=function(){return x(this,hr)&&"added"||x(this,hr)===null&&this.guessedText&&"review"||"missing"},k4=async function(){var s,r,a;const t=x(this,pc);if(!t)return;if(x(this,Mu)){if(t.classList.toggle("done",!!x(this,hr)),t.setAttribute("data-l10n-id",x(wa,Cd)[x(this,wc,v_)]),(s=x(this,dv))==null||s.setAttribute("data-l10n-id",x(wa,Cd)[`${x(this,wc,v_)}-label`]),!x(this,hr)){(r=x(this,Su))==null||r.remove();return}}else{if(!x(this,hr)&&!x(this,bu)){t.classList.remove("done"),(a=x(this,Su))==null||a.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=x(this,Su);if(!e){G(this,Su,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${x(this,eo).id}`;const l=100,u=x(this,eo)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(x(this,Do)),G(this,Do,null)},{once:!0}),t.addEventListener("mouseenter",()=>{G(this,Do,setTimeout(()=>{G(this,Do,null),x(this,Su).classList.add("show"),x(this,eo)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:u}),t.addEventListener("mouseleave",()=>{var f;x(this,Do)&&(clearTimeout(x(this,Do)),G(this,Do,null)),(f=x(this,Su))==null||f.classList.remove("show")},{signal:u})}x(this,bu)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=x(this,hr)),e.parentNode||t.append(e);const n=x(this,eo).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},W(wa,Cd,null),Je(wa,"_l10n",null);let mE=wa;var Ym,mc,qi,mv,Wm,Rr,Km,wd,TA,Jm,Rd,CA,Zm,wh,Tu,gv,vv,xl,wA,EE,vn,cC,RA,uC,hC,iI,sI,fC,dC,pC,rI,mC,aI,oI,lI,gC,y_;const si=class si{constructor(t){W(this,vn);W(this,Ym,null);W(this,mc,null);W(this,qi,null);W(this,mv,!1);W(this,Wm,!1);W(this,Rr,null);W(this,Km,null);W(this,wd,null);W(this,TA,"");W(this,Jm,!1);W(this,Rd,null);W(this,CA,!1);W(this,Zm,!1);W(this,wh,!1);W(this,Tu,null);W(this,gv,0);W(this,vv,0);W(this,xl,null);Je(this,"_editToolbar",null);Je(this,"_initialOptions",Object.create(null));Je(this,"_initialData",null);Je(this,"_isVisible",!0);Je(this,"_uiManager",null);Je(this,"_focusEventsAllowed",!0);W(this,wA,!1);W(this,EE,si._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,a];const[l,u]=this.parentDimensions;this.x=t.x/l,this.y=t.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=si.prototype._resizeWithKeyboard,e=Zg.TRANSLATE_SMALL,n=Zg.TRANSLATE_BIG;return Hn(this,"_resizerKeyboardManager",new kx([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],si.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Hn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Wtt({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(si._l10n??(si._l10n=t),si._l10nResizer||(si._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),si._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);si._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Oi("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return x(this,wA)}set _isDraggable(t){var e;G(this,wA,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=x(this,EE)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):V(this,vn,y_).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(x(this,Jm)?G(this,Jm,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[r,a]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/r,this.y=(e+s)/a,this.fixAndSetPosition()}translate(t,e){V(this,vn,cC).call(this,this.parentDimensions,t,e)}translateInPage(t,e){x(this,Rd)||G(this,Rd,[this.x,this.y]),V(this,vn,cC).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){x(this,Rd)||G(this,Rd,[this.x,this.y]);const[n,s]=this.parentDimensions;if(this.x+=t/n,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[l,u]=this.getBaseTranslation();r+=l,a+=u,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!x(this,Rd)&&(x(this,Rd)[0]!==this.x||x(this,Rd)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=si,s=n/t,r=n/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:s,y:r,width:a,height:l}=this;if(a*=e,l*=n,s*=e,r*=n,this._mustFixPosition)switch(t){case 0:s=Math.max(0,Math.min(e-a,s)),r=Math.max(0,Math.min(n-l,r));break;case 90:s=Math.max(0,Math.min(e-l,s)),r=Math.min(n,Math.max(a,r));break;case 180:s=Math.min(e,Math.max(a,s)),r=Math.min(n,Math.max(l,r));break;case 270:s=Math.min(e,Math.max(l,s)),r=Math.max(0,Math.min(n-a,r));break}this.x=s/=e,this.y=r/=n;const[u,f]=this.getBaseTranslation();s+=u,r+=f;const{style:m}=this.div;m.left=`${(100*s).toFixed(2)}%`,m.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return V(n=si,RA,uC).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return V(n=si,RA,uC).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,s]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,x(this,Wm)||(this.div.style.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,s=n.endsWith("%"),r=!x(this,Wm)&&e.endsWith("%");if(s&&r)return;const[a,l]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!x(this,Wm)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=x(this,qi))==null||t.finish()}async addEditToolbar(){return this._editToolbar||x(this,Zm)?this._editToolbar:(this._editToolbar=new $5(this),this.div.append(this._editToolbar.render()),x(this,qi)&&await this._editToolbar.addAltText(x(this,qi)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=x(this,qi))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){x(this,qi)||(mE.initialize(si._l10n),G(this,qi,new mE(this)),x(this,Ym)&&(x(this,qi).data=x(this,Ym),G(this,Ym,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=x(this,qi))==null?void 0:t.data}set altTextData(t){x(this,qi)&&(x(this,qi).data=t)}get guessedAltText(){var t;return(t=x(this,qi))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=x(this,qi))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=x(this,qi))==null?void 0:e.serialize(t)}hasAltText(){return!!x(this,qi)&&!x(this,qi).isEmpty()}hasAltTextData(){var t;return((t=x(this,qi))==null?void 0:t.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=x(this,mv)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),V(this,vn,mC).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),pE(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Ia.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(G(this,Jm,!0),this._isDraggable){V(this,vn,rI).call(this,t);return}V(this,vn,pC).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){x(this,Tu)&&clearTimeout(x(this,Tu)),G(this,Tu,setTimeout(()=>{var t;G(this,Tu,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const s=this.parentScale,[r,a]=this.pageDimensions,[l,u]=this.pageTranslation,f=t/s,m=e/s,g=this.x*r,v=this.y*a,_=this.width*r,b=this.height*a;switch(n){case 0:return[g+f+l,a-v-m-b+u,g+f+_+l,a-v-m+u];case 90:return[g+m+l,a-v+f+u,g+m+b+l,a-v+f+_+u];case 180:return[g-f-_+l,a-v+m+u,g-f+l,a-v+m+b+u];case 270:return[g-m-b+l,a-v-f-_+u,g-m+l,a-v-f+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,r,a]=t,l=r-n,u=a-s;switch(this.rotation){case 0:return[n,e-a,l,u];case 90:return[n,e-s,u,l];case 180:return[r,e-s,l,u];case 270:return[r,e-a,u,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){G(this,Zm,!0)}disableEditMode(){G(this,Zm,!1)}isInEditMode(){return x(this,Zm)}shouldGetKeyboardEvents(){return x(this,wh)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){V(this,vn,mC).call(this)}rotate(t){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Oi("An editor must be serializable")}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});s.rotation=t.rotation,G(s,Ym,t.accessibilityData);const[r,a]=s.pageDimensions,[l,u,f,m]=s.getRectInCurrentCoords(t.rect,a);return s.x=l/r,s.y=u/a,s.width=f/r,s.height=m/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t;if((t=x(this,wd))==null||t.abort(),G(this,wd,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),x(this,Tu)&&(clearTimeout(x(this,Tu)),G(this,Tu,null)),V(this,vn,y_).call(this),this.removeEditToolbar(),x(this,xl)){for(const e of x(this,xl).values())clearTimeout(e);G(this,xl,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(V(this,vn,iI).call(this),x(this,Rr).classList.remove("hidden"),pE(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),G(this,Km,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=x(this,Rr).children;if(!x(this,mc)){G(this,mc,Array.from(e));const a=V(this,vn,aI).bind(this),l=V(this,vn,oI).bind(this),u=this._uiManager._signal;for(const f of x(this,mc)){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",a,{signal:u}),f.addEventListener("blur",l,{signal:u}),f.addEventListener("focus",V(this,vn,lI).bind(this,m),{signal:u}),f.setAttribute("data-l10n-id",si._l10nResizer[m])}}const n=x(this,mc)[0];let s=0;for(const a of e){if(a===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(x(this,mc).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)x(this,Rr).append(x(this,Rr).firstChild);else if(r>s)for(let l=0;l<r-s;l++)x(this,Rr).firstChild.before(x(this,Rr).lastChild);let a=0;for(const l of e){const f=x(this,mc)[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",si._l10nResizer[f])}}V(this,vn,gC).call(this,0),G(this,wh,!0),x(this,Rr).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){x(this,wh)&&V(this,vn,dC).call(this,x(this,TA),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){V(this,vn,y_).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=x(this,qi))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,s,r;(t=x(this,Rr))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=x(this,qi))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return x(this,CA)}set isEditing(t){G(this,CA,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){G(this,Wm,!0);const n=t/e,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){x(this,xl)||G(this,xl,new Map);const{action:n}=t;let s=x(this,xl).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),x(this,xl).delete(n),x(this,xl).size===0&&G(this,xl,null)},si._telemetryTimeout),x(this,xl).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),G(this,mv,!1)}disable(){this.div&&(this.div.tabIndex=-1),G(this,mv,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Ym=new WeakMap,mc=new WeakMap,qi=new WeakMap,mv=new WeakMap,Wm=new WeakMap,Rr=new WeakMap,Km=new WeakMap,wd=new WeakMap,TA=new WeakMap,Jm=new WeakMap,Rd=new WeakMap,CA=new WeakMap,Zm=new WeakMap,wh=new WeakMap,Tu=new WeakMap,gv=new WeakMap,vv=new WeakMap,xl=new WeakMap,wA=new WeakMap,EE=new WeakMap,vn=new WeakSet,cC=function([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this.fixAndSetPosition()},RA=new WeakSet,uC=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},hC=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},iI=function(){if(x(this,Rr))return;G(this,Rr,document.createElement("div")),x(this,Rr).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");x(this,Rr).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",V(this,vn,sI).bind(this,n),{signal:e}),s.addEventListener("contextmenu",Dl,{signal:e}),s.tabIndex=-1}this.div.prepend(x(this,Rr))},sI=function(t,e){var b;e.preventDefault();const{isMac:n}=Ia.platform;if(e.button!==0||e.ctrlKey&&n)return;(b=x(this,qi))==null||b.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",V(this,vn,dC).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",Dl,{signal:a});const l=this.x,u=this.y,f=this.width,m=this.height,g=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const _=()=>{var C;r.abort(),this.parent.togglePointerEvents(!0),(C=x(this,qi))==null||C.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=g,this.div.style.cursor=v,V(this,vn,fC).call(this,l,u,f,m)};window.addEventListener("pointerup",_,{signal:a}),window.addEventListener("blur",_,{signal:a})},fC=function(t,e,n,s){const r=this.x,a=this.y,l=this.width,u=this.height;r===t&&a===e&&l===n&&u===s||this.addCommands({cmd:()=>{this.width=l,this.height=u,this.x=r,this.y=a;const[f,m]=this.parentDimensions;this.setDims(f*l,m*u),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=s,this.x=t,this.y=e;const[f,m]=this.parentDimensions;this.setDims(f*n,m*s),this.fixAndSetPosition()},mustExec:!0})},dC=function(t,e){const[n,s]=this.parentDimensions,r=this.x,a=this.y,l=this.width,u=this.height,f=si.MIN_SIZE/n,m=si.MIN_SIZE/s,g=tt=>Math.round(tt*1e4)/1e4,v=V(this,vn,hC).call(this,this.rotation),_=(tt,nt)=>[v[0]*tt+v[2]*nt,v[1]*tt+v[3]*nt],b=V(this,vn,hC).call(this,360-this.rotation),C=(tt,nt)=>[b[0]*tt+b[2]*nt,b[1]*tt+b[3]*nt];let M,S,R=!1,D=!1;switch(t){case"topLeft":R=!0,M=(tt,nt)=>[0,0],S=(tt,nt)=>[tt,nt];break;case"topMiddle":M=(tt,nt)=>[tt/2,0],S=(tt,nt)=>[tt/2,nt];break;case"topRight":R=!0,M=(tt,nt)=>[tt,0],S=(tt,nt)=>[0,nt];break;case"middleRight":D=!0,M=(tt,nt)=>[tt,nt/2],S=(tt,nt)=>[0,nt/2];break;case"bottomRight":R=!0,M=(tt,nt)=>[tt,nt],S=(tt,nt)=>[0,0];break;case"bottomMiddle":M=(tt,nt)=>[tt/2,nt],S=(tt,nt)=>[tt/2,0];break;case"bottomLeft":R=!0,M=(tt,nt)=>[0,nt],S=(tt,nt)=>[tt,0];break;case"middleLeft":D=!0,M=(tt,nt)=>[0,nt/2],S=(tt,nt)=>[tt,nt/2];break}const B=M(l,u),N=S(l,u);let I=_(...N);const F=g(r+I[0]),z=g(a+I[1]);let U=1,P=1,[X,ot]=this.screenToPageTranslation(e.movementX,e.movementY);if([X,ot]=C(X/n,ot/s),R){const tt=Math.hypot(l,u);U=P=Math.max(Math.min(Math.hypot(N[0]-B[0]-X,N[1]-B[1]-ot)/tt,1/l,1/u),f/l,m/u)}else D?U=Math.max(f,Math.min(1,Math.abs(N[0]-B[0]-X)))/l:P=Math.max(m,Math.min(1,Math.abs(N[1]-B[1]-ot)))/u;const it=g(l*U),ut=g(u*P);I=_(...S(it,ut));const dt=F-I[0],j=z-I[1];this.width=it,this.height=ut,this.x=dt,this.y=j,this.setDims(n*it,s*ut),this.fixAndSetPosition()},pC=function(t){const{isMac:e}=Ia.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},rI=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();const n=new AbortController,s=this._uiManager.combinedSignal(n);if(e){this.div.classList.add("moving"),G(this,gv,t.clientX),G(this,vv,t.clientY);const a=l=>{const{clientX:u,clientY:f}=l,[m,g]=this.screenToPageTranslation(u-x(this,gv),f-x(this,vv));G(this,gv,u),G(this,vv,f),this._uiManager.dragSelectedEditors(m,g)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:s})}const r=()=>{n.abort(),e&&this.div.classList.remove("moving"),G(this,Jm,!1),this._uiManager.endDragSession()||V(this,vn,pC).call(this,t)};window.addEventListener("pointerup",r,{signal:s}),window.addEventListener("blur",r,{signal:s})},mC=function(){if(x(this,wd)||!this.div)return;G(this,wd,new AbortController);const t=this._uiManager.combinedSignal(x(this,wd));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},aI=function(t){si._resizerKeyboardManager.exec(this,t)},oI=function(t){var e;x(this,wh)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==x(this,Rr)&&V(this,vn,y_).call(this)},lI=function(t){G(this,TA,x(this,wh)?t:"")},gC=function(t){if(x(this,mc))for(const e of x(this,mc))e.tabIndex=t},y_=function(){if(G(this,wh,!1),V(this,vn,gC).call(this,-1),x(this,Km)){const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=x(this,Km);V(this,vn,fC).call(this,t,e,n,s),G(this,Km,null)}},W(si,RA),Je(si,"_l10n",null),Je(si,"_l10nResizer",null),Je(si,"_borderLineWidth",-1),Je(si,"_colorManager",new nC),Je(si,"_zIndex",1),Je(si,"_telemetryTimeout",1e3);let di=si;class Wtt extends di{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const L9=3285377520,yl=4294901760,vu=65535;class cI{constructor(t){this.h1=t?t&4294967295:L9,this.h2=t?t&4294967295:L9}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let C=0,M=t.length;C<M;C++){const S=t.charCodeAt(C);S<=255?e[n++]=S:(e[n++]=S>>>8,e[n++]=S&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,a=new Uint32Array(e.buffer,0,s);let l=0,u=0,f=this.h1,m=this.h2;const g=3432918353,v=461845907,_=g&vu,b=v&vu;for(let C=0;C<s;C++)C&1?(l=a[C],l=l*g&yl|l*_&vu,l=l<<15|l>>>17,l=l*v&yl|l*b&vu,f^=l,f=f<<13|f>>>19,f=f*5+3864292196):(u=a[C],u=u*g&yl|u*_&vu,u=u<<15|u>>>17,u=u*v&yl|u*b&vu,m^=u,m=m<<13|m>>>19,m=m*5+3864292196);switch(l=0,r){case 3:l^=e[s*4+2]<<16;case 2:l^=e[s*4+1]<<8;case 1:l^=e[s*4],l=l*g&yl|l*_&vu,l=l<<15|l>>>17,l=l*v&yl|l*b&vu,s&1?f^=l:m^=l}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&yl|t*36045&vu,e=e*4283543511&yl|((e<<16|t>>>16)*2950163797&yl)>>>16,t^=e>>>1,t=t*444984403&yl|t*60499&vu,e=e*3301882366&yl|((e<<16|t>>>16)*3120437893&yl)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const vC=Object.freeze({map:null,hash:"",transfer:void 0});var $m,tg,fr,ME,uI;class L7{constructor(){W(this,ME);W(this,$m,!1);W(this,tg,null);W(this,fr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=x(this,fr).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return x(this,fr).get(t)}remove(t){if(x(this,fr).delete(t),x(this,fr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of x(this,fr).values())if(e instanceof di)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=x(this,fr).get(t);let s=!1;if(n!==void 0)for(const[r,a]of Object.entries(e))n[r]!==a&&(s=!0,n[r]=a);else s=!0,x(this,fr).set(t,e);s&&V(this,ME,uI).call(this),e instanceof di&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return x(this,fr).has(t)}getAll(){return x(this,fr).size>0?E7(x(this,fr)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return x(this,fr).size}resetModified(){x(this,$m)&&(G(this,$m,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new hI(this)}get serializable(){if(x(this,fr).size===0)return vC;const t=new Map,e=new cI,n=[],s=Object.create(null);let r=!1;for(const[a,l]of x(this,fr)){const u=l instanceof di?l.serialize(!1,s):l;u&&(t.set(a,u),e.update(`${a}:${JSON.stringify(u)}`),r||(r=!!u.bitmap))}if(r)for(const a of t.values())a.bitmap&&n.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:vC}get editorStats(){let t=null;const e=new Map;for(const n of x(this,fr).values()){if(!(n instanceof di))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:r}=s;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const a=t[r]||(t[r]=new Map);for(const[l,u]of Object.entries(s)){if(l==="type")continue;let f=a.get(l);f||(f=new Map,a.set(l,f));const m=f.get(u)??0;f.set(u,m+1)}}for(const[n,s]of e)t[n]=s.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){G(this,tg,null)}get modifiedIds(){if(x(this,tg))return x(this,tg);const t=[];for(const e of x(this,fr).values())!(e instanceof di)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return G(this,tg,{ids:new Set(t),hash:t.join(",")})}}$m=new WeakMap,tg=new WeakMap,fr=new WeakMap,ME=new WeakSet,uI=function(){x(this,$m)||(G(this,$m,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var LA;class hI extends L7{constructor(e){super();W(this,LA);const{map:n,hash:s,transfer:r}=e.serializable,a=structuredClone(n,r?{transfer:r}:null);G(this,LA,{map:a,hash:s,transfer:r})}get print(){Oi("Should not call PrintAnnotationStorage.print")}get serializable(){return x(this,LA)}get modifiedIds(){return Hn(this,"modifiedIds",{ids:new Set,hash:""})}}LA=new WeakMap;var yv;class Ktt{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){W(this,yv,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),x(this,yv).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||x(this,yv).has(t.loadedName))){if(Xs(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:r}=t,a=new FontFace(n,s,r);this.addNativeFontFace(a);try{await a.load(),x(this,yv).add(n),e==null||e(t)}catch{An(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Oi("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw An(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Hn(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(ra||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Hn(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Xs(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Hn(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(B,N){return B.charCodeAt(N)<<24|B.charCodeAt(N+1)<<16|B.charCodeAt(N+2)<<8|B.charCodeAt(N+3)&255}function s(B,N,I,F){const z=B.substring(0,N),U=B.substring(N+I);return z+F+U}let r,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const u=l.getContext("2d");let f=0;function m(B,N){if(++f>30){An("Load test font never loaded."),N();return}if(u.font="30px "+B,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(m.bind(null,B,N))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,g.length,g);const b=16,C=1482184792;let M=n(v,b);for(r=0,a=g.length-3;r<a;r+=4)M=M-C+n(g,r)|0;r<g.length&&(M=M-C+n(g+"XXX",r)|0),v=s(v,b,4,Ntt(M));const S=`url(data:font/opentype;base64,${btoa(v)});`,R=`@font-face {font-family:"${g}";src:${S}}`;this.insertRule(R);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const B of[t.loadedName,g]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=B,D.append(N)}this._document.body.append(D),m(g,()=>{D.remove(),e.complete()})}}yv=new WeakMap;class Jtt{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${ztt(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(r){An(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(r,a){};const s=[];for(let r=0,a=n.length;r<a;)switch(n[r++]){case vh.BEZIER_CURVE_TO:{const[l,u,f,m,g,v]=n.slice(r,r+6);s.push(_=>_.bezierCurveTo(l,u,f,m,g,v)),r+=6}break;case vh.MOVE_TO:{const[l,u]=n.slice(r,r+2);s.push(f=>f.moveTo(l,u)),r+=2}break;case vh.LINE_TO:{const[l,u]=n.slice(r,r+2);s.push(f=>f.lineTo(l,u)),r+=2}break;case vh.QUADRATIC_CURVE_TO:{const[l,u,f,m]=n.slice(r,r+4);s.push(g=>g.quadraticCurveTo(l,u,f,m)),r+=4}break;case vh.RESTORE:s.push(l=>l.restore());break;case vh.SAVE:s.push(l=>l.save());break;case vh.SCALE:Xs(s.length===2,"Scale command is only valid at the third position.");break;case vh.TRANSFORM:{const[l,u,f,m,g,v]=n.slice(r,r+6);s.push(_=>_.transform(l,u,f,m,g,v)),r+=6}break;case vh.TRANSLATE:{const[l,u]=n.slice(r,r+2);s.push(f=>f.translate(l,u)),r+=2}break}return this.compiledGlyphs[e]=function(a,l){s[0](a),s[1](a),a.scale(l,-l);for(let u=2,f=s.length;u<f;u++)s[u](a)}}}var DA;class fI{constructor({enableHWA:t=!1}){W(this,DA,!1);G(this,DA,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!x(this,DA)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Oi("Abstract method `_createCanvas` called.")}}DA=new WeakMap;class Ztt extends fI{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class dI{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Oi("Abstract method `_fetch` called.")}}class pI extends dI{async _fetch(t){const e=await FM(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):PM(e)}}class mI{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,r){return"none"}destroy(t=!1){}}var eg,ng,Cu,Rh,$r,TE,ig,xe,Jr,H1,z1,V4,G1,gI,yC,k1,__,A_,_C,x_;class $tt extends mI{constructor({docId:e,ownerDocument:n=globalThis.document}){super();W(this,xe);W(this,eg);W(this,ng);W(this,Cu);W(this,Rh);W(this,$r);W(this,TE);W(this,ig,0);G(this,Rh,e),G(this,$r,n)}addFilter(e){if(!e)return"none";let n=x(this,xe,Jr).get(e);if(n)return n;const[s,r,a]=V(this,xe,V4).call(this,e),l=e.length===1?s:`${s}${r}${a}`;if(n=x(this,xe,Jr).get(l),n)return x(this,xe,Jr).set(e,n),n;const u=`g_${x(this,Rh)}_transfer_map_${Ea(this,ig)._++}`,f=V(this,xe,G1).call(this,u);x(this,xe,Jr).set(e,f),x(this,xe,Jr).set(l,f);const m=V(this,xe,k1).call(this,u);return V(this,xe,A_).call(this,s,r,a,m),f}addHCMFilter(e,n){var b;const s=`${e}-${n}`,r="base";let a=x(this,xe,H1).get(r);if((a==null?void 0:a.key)===s||(a?((b=a.filter)==null||b.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},x(this,xe,H1).set(r,a)),!e||!n))return a.url;const l=V(this,xe,x_).call(this,e);e=Le.makeHexColor(...l);const u=V(this,xe,x_).call(this,n);if(n=Le.makeHexColor(...u),x(this,xe,z1).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return a.url;const f=new Array(256);for(let C=0;C<=255;C++){const M=C/255;f[C]=M<=.03928?M/12.92:((M+.055)/1.055)**2.4}const m=f.join(","),g=`g_${x(this,Rh)}_hcm_filter`,v=a.filter=V(this,xe,k1).call(this,g);V(this,xe,A_).call(this,m,m,m,v),V(this,xe,yC).call(this,v);const _=(C,M)=>{const S=l[C]/255,R=u[C]/255,D=new Array(M+1);for(let B=0;B<=M;B++)D[B]=S+B/M*(R-S);return D.join(",")};return V(this,xe,A_).call(this,_(0,5),_(1,5),_(2,5),v),a.url=V(this,xe,G1).call(this,g),a.url}addAlphaFilter(e){let n=x(this,xe,Jr).get(e);if(n)return n;const[s]=V(this,xe,V4).call(this,[e]),r=`alpha_${s}`;if(n=x(this,xe,Jr).get(r),n)return x(this,xe,Jr).set(e,n),n;const a=`g_${x(this,Rh)}_alpha_map_${Ea(this,ig)._++}`,l=V(this,xe,G1).call(this,a);x(this,xe,Jr).set(e,l),x(this,xe,Jr).set(r,l);const u=V(this,xe,k1).call(this,a);return V(this,xe,_C).call(this,s,u),l}addLuminosityFilter(e){let n=x(this,xe,Jr).get(e||"luminosity");if(n)return n;let s,r;if(e?([s]=V(this,xe,V4).call(this,[e]),r=`luminosity_${s}`):r="luminosity",n=x(this,xe,Jr).get(r),n)return x(this,xe,Jr).set(e,n),n;const a=`g_${x(this,Rh)}_luminosity_map_${Ea(this,ig)._++}`,l=V(this,xe,G1).call(this,a);x(this,xe,Jr).set(e,l),x(this,xe,Jr).set(r,l);const u=V(this,xe,k1).call(this,a);return V(this,xe,gI).call(this,u),e&&V(this,xe,_C).call(this,s,u),l}addHighlightHCMFilter(e,n,s,r,a){var R;const l=`${n}-${s}-${r}-${a}`;let u=x(this,xe,H1).get(e);if((u==null?void 0:u.key)===l||(u?((R=u.filter)==null||R.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},x(this,xe,H1).set(e,u)),!n||!s))return u.url;const[f,m]=[n,s].map(V(this,xe,x_).bind(this));let g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[_,b]=[r,a].map(V(this,xe,x_).bind(this));v<g&&([g,v,_,b]=[v,g,b,_]),x(this,xe,z1).style.color="";const C=(D,B,N)=>{const I=new Array(256),F=(v-g)/N,z=D/255,U=(B-D)/(255*N);let P=0;for(let X=0;X<=N;X++){const ot=Math.round(g+X*F),it=z+X*U;for(let ut=P;ut<=ot;ut++)I[ut]=it;P=ot+1}for(let X=P;X<256;X++)I[X]=I[P-1];return I.join(",")},M=`g_${x(this,Rh)}_hcm_${e}_filter`,S=u.filter=V(this,xe,k1).call(this,M);return V(this,xe,yC).call(this,S),V(this,xe,A_).call(this,C(_[0],b[0],5),C(_[1],b[1],5),C(_[2],b[2],5),S),u.url=V(this,xe,G1).call(this,M),u.url}destroy(e=!1){e&&x(this,xe,H1).size!==0||(x(this,Cu)&&(x(this,Cu).parentNode.parentNode.remove(),G(this,Cu,null)),x(this,ng)&&(x(this,ng).clear(),G(this,ng,null)),G(this,ig,0))}}eg=new WeakMap,ng=new WeakMap,Cu=new WeakMap,Rh=new WeakMap,$r=new WeakMap,TE=new WeakMap,ig=new WeakMap,xe=new WeakSet,Jr=function(){return x(this,ng)||G(this,ng,new Map)},H1=function(){return x(this,TE)||G(this,TE,new Map)},z1=function(){if(!x(this,Cu)){const e=x(this,$r).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=x(this,$r).createElementNS(_h,"svg");s.setAttribute("width",0),s.setAttribute("height",0),G(this,Cu,x(this,$r).createElementNS(_h,"defs")),e.append(s),s.append(x(this,Cu)),x(this,$r).body.append(e)}return x(this,Cu)},V4=function(e){if(e.length===1){const f=e[0],m=new Array(256);for(let v=0;v<256;v++)m[v]=f[v]/255;const g=m.join(",");return[g,g,g]}const[n,s,r]=e,a=new Array(256),l=new Array(256),u=new Array(256);for(let f=0;f<256;f++)a[f]=n[f]/255,l[f]=s[f]/255,u[f]=r[f]/255;return[a.join(","),l.join(","),u.join(",")]},G1=function(e){if(x(this,eg)===void 0){G(this,eg,"");const n=x(this,$r).URL;n!==x(this,$r).baseURI&&(HM(n)?An('#createUrl: ignore "data:"-URL for performance reasons.'):G(this,eg,n.split("#",1)[0]))}return`url(${x(this,eg)}#${e})`},gI=function(e){const n=x(this,$r).createElementNS(_h,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},yC=function(e){const n=x(this,$r).createElementNS(_h,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},k1=function(e){const n=x(this,$r).createElementNS(_h,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),x(this,xe,z1).append(n),n},__=function(e,n,s){const r=x(this,$r).createElementNS(_h,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},A_=function(e,n,s,r){const a=x(this,$r).createElementNS(_h,"feComponentTransfer");r.append(a),V(this,xe,__).call(this,a,"feFuncR",e),V(this,xe,__).call(this,a,"feFuncG",n),V(this,xe,__).call(this,a,"feFuncB",s)},_C=function(e,n){const s=x(this,$r).createElementNS(_h,"feComponentTransfer");n.append(s),V(this,xe,__).call(this,s,"feFuncA",e)},x_=function(e){return x(this,xe,z1).style.color=e,R7(getComputedStyle(x(this,xe,z1)).getPropertyValue("color"))};class vI{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Oi("Abstract method `_fetch` called.")}}class yI extends vI{async _fetch(t){const e=await FM(t,"arraybuffer");return new Uint8Array(e)}}if(ra){var AC=Promise.withResolvers(),Q_=null;(async()=>{const t=await g4(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await g4(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await g4(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await g4(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,a;return new Map(Object.entries({fs:t,http:e,https:n,url:s,canvas:r,path2d:a}))})().then(t=>{Q_=t,AC.resolve()},t=>{An(`loadPackages: ${t}`),Q_=new Map,AC.resolve()})}class rp{static get promise(){return AC.promise}static get(t){return Q_==null?void 0:Q_.get(t)}}async function _I(i){const e=await rp.get("fs").promises.readFile(i);return new Uint8Array(e)}class tet extends mI{}class eet extends fI{_createCanvas(t,e){return rp.get("canvas").createCanvas(t,e)}}class net extends dI{async _fetch(t){return _I(t)}}class iet extends vI{async _fetch(t){return _I(t)}}const La={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function xC(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),i.clip(s)}class D7{getPattern(){Oi("Abstract method `getPattern` called.")}}class set extends D7{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let r;if(s===La.STROKE||s===La.FILL){const a=e.current.getClippedPathBoundingBox(s,Wi(t))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,u=Math.ceil(a[3]-a[1])||1,f=e.cachedCanvases.getCanvas("pattern",l,u),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-a[0],-a[1]),n=Le.transform(n,[1,0,0,1,a[0],a[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),xC(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),r=t.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(n);r.setTransform(g)}else xC(t,this._bbox),r=this._createGradient(t);return r}}function i5(i,t,e,n,s,r,a,l){const u=t.coords,f=t.colors,m=i.data,g=i.width*4;let v;u[e+1]>u[n+1]&&(v=e,e=n,n=v,v=r,r=a,a=v),u[n+1]>u[s+1]&&(v=n,n=s,s=v,v=a,a=l,l=v),u[e+1]>u[n+1]&&(v=e,e=n,n=v,v=r,r=a,a=v);const _=(u[e]+t.offsetX)*t.scaleX,b=(u[e+1]+t.offsetY)*t.scaleY,C=(u[n]+t.offsetX)*t.scaleX,M=(u[n+1]+t.offsetY)*t.scaleY,S=(u[s]+t.offsetX)*t.scaleX,R=(u[s+1]+t.offsetY)*t.scaleY;if(b>=R)return;const D=f[r],B=f[r+1],N=f[r+2],I=f[a],F=f[a+1],z=f[a+2],U=f[l],P=f[l+1],X=f[l+2],ot=Math.round(b),it=Math.round(R);let ut,dt,j,tt,nt,_t,J,at;for(let xt=ot;xt<=it;xt++){if(xt<M){const Ut=xt<b?0:(b-xt)/(b-M);ut=_-(_-C)*Ut,dt=D-(D-I)*Ut,j=B-(B-F)*Ut,tt=N-(N-z)*Ut}else{let Ut;xt>R?Ut=1:M===R?Ut=0:Ut=(M-xt)/(M-R),ut=C-(C-S)*Ut,dt=I-(I-U)*Ut,j=F-(F-P)*Ut,tt=z-(z-X)*Ut}let Et;xt<b?Et=0:xt>R?Et=1:Et=(b-xt)/(b-R),nt=_-(_-S)*Et,_t=D-(D-U)*Et,J=B-(B-P)*Et,at=N-(N-X)*Et;const ct=Math.round(Math.min(ut,nt)),wt=Math.round(Math.max(ut,nt));let Bt=g*xt+ct*4;for(let Ut=ct;Ut<=wt;Ut++)Et=(ut-Ut)/(ut-nt),Et<0?Et=0:Et>1&&(Et=1),m[Bt++]=dt-(dt-_t)*Et|0,m[Bt++]=j-(j-J)*Et|0,m[Bt++]=tt-(tt-at)*Et|0,m[Bt++]=255}}function ret(i,t,e){const n=t.coords,s=t.colors;let r,a;switch(t.type){case"lattice":const l=t.verticesPerRow,u=Math.floor(n.length/l)-1,f=l-1;for(r=0;r<u;r++){let m=r*l;for(let g=0;g<f;g++,m++)i5(i,e,n[m],n[m+1],n[m+l],s[m],s[m+1],s[m+l]),i5(i,e,n[m+l+1],n[m+1],n[m+l],s[m+l+1],s[m+1],s[m+l])}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)i5(i,e,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class aet extends D7{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const l=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-l,m=Math.ceil(this._bounds[3])-u,g=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),_=f/g,b=m/v,C={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-u,scaleX:1/_,scaleY:1/b},M=g+2*2,S=v+2*2,R=n.getCanvas("mesh",M,S),D=R.context,B=D.createImageData(g,v);if(e){const I=B.data;for(let F=0,z=I.length;F<z;F+=4)I[F]=e[0],I[F+1]=e[1],I[F+2]=e[2],I[F+3]=255}for(const I of this._figures)ret(B,I,C);return D.putImageData(B,2,2),{canvas:R.canvas,offsetX:l-2*_,offsetY:u-2*b,scaleX:_,scaleY:b}}getPattern(t,e,n,s){xC(t,this._bbox);let r;if(s===La.SHADING)r=Le.singularValueDecompose2dScale(Wi(t));else if(r=Le.singularValueDecompose2dScale(e.baseTransform),this.matrix){const l=Le.singularValueDecompose2dScale(this.matrix);r=[r[0]*l[0],r[1]*l[1]]}const a=this._createMeshCanvas(r,s===La.SHADING?null:this._background,e.cachedCanvases);return s!==La.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class oet extends D7{getPattern(){return"hotpink"}}function cet(i){switch(i[0]){case"RadialAxial":return new set(i);case"Mesh":return new aet(i);case"Dummy":return new oet}throw new Error(`Unknown IR type: ${i[0]}`)}const D9={COLORED:1,UNCOLORED:2},CE=class CE{constructor(t,e,n,s,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:s,tilingType:r,color:a,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:f}=this;u=Math.abs(u),f=Math.abs(f),IM("TilingType: "+r);const m=e[0],g=e[1],v=e[2],_=e[3],b=v-m,C=_-g,M=Le.singularValueDecompose2dScale(this.matrix),S=Le.singularValueDecompose2dScale(this.baseTransform),R=M[0]*S[0],D=M[1]*S[1];let B=b,N=C,I=!1,F=!1;const z=Math.ceil(u*R),U=Math.ceil(f*D),P=Math.ceil(b*R),X=Math.ceil(C*D);z>=P?B=u:I=!0,U>=X?N=f:F=!0;const ot=this.getSizeAndScale(B,this.ctx.canvas.width,R),it=this.getSizeAndScale(N,this.ctx.canvas.height,D),ut=t.cachedCanvases.getCanvas("pattern",ot.size,it.size),dt=ut.context,j=l.createCanvasGraphics(dt);if(j.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(j,s,a),dt.translate(-ot.scale*m,-it.scale*g),j.transform(ot.scale,0,0,it.scale,0,0),dt.save(),this.clipBbox(j,m,g,v,_),j.baseTransform=Wi(j.ctx),j.executeOperatorList(n),j.endDrawing(),dt.restore(),I||F){const tt=ut.canvas;I&&(B=u),F&&(N=f);const nt=this.getSizeAndScale(B,this.ctx.canvas.width,R),_t=this.getSizeAndScale(N,this.ctx.canvas.height,D),J=nt.size,at=_t.size,xt=t.cachedCanvases.getCanvas("pattern-workaround",J,at),Et=xt.context,ct=I?Math.floor(b/u):0,wt=F?Math.floor(C/f):0;for(let Bt=0;Bt<=ct;Bt++)for(let Ut=0;Ut<=wt;Ut++)Et.drawImage(tt,J*Bt,at*Ut,J,at,0,0,J,at);return{canvas:xt.canvas,scaleX:nt.scale,scaleY:_t.scale,offsetX:m,offsetY:g}}return{canvas:ut.canvas,scaleX:ot.scale,scaleY:it.scale,offsetX:m,offsetY:g}}getSizeAndScale(t,e,n){const s=Math.max(CE.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=s?r=s:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,s,r){const a=s-e,l=r-n;t.ctx.rect(e,n,a,l),t.current.updateRectMinMax(Wi(t.ctx),[e,n,s,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,r=t.current;switch(e){case D9.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case D9.UNCOLORED:const l=Le.makeHexColor(n[0],n[1],n[2]);s.fillStyle=l,s.strokeStyle=l,r.fillColor=l,r.strokeColor=l;break;default:throw new Ott(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,s){let r=n;s!==La.SHADING&&(r=Le.transform(r,e.baseTransform),this.matrix&&(r=Le.transform(r,this.matrix)));const a=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const u=t.createPattern(a.canvas,"repeat");return u.setTransform(l),u}};Je(CE,"MAX_PATTERN_SIZE",3e3);let bC=CE;function uet({src:i,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const l=Ia.isLittleEndian?4278190080:255,[u,f]=a?[r,l]:[l,r],m=n>>3,g=n&7,v=i.length;e=new Uint32Array(e.buffer);let _=0;for(let b=0;b<s;b++){for(const M=t+m;t<M;t++){const S=t<v?i[t]:255;e[_++]=S&128?f:u,e[_++]=S&64?f:u,e[_++]=S&32?f:u,e[_++]=S&16?f:u,e[_++]=S&8?f:u,e[_++]=S&4?f:u,e[_++]=S&2?f:u,e[_++]=S&1?f:u}if(g===0)continue;const C=t<v?i[t++]:255;for(let M=0;M<g;M++)e[_++]=C&1<<7-M?f:u}return{srcPos:t,destPos:_}}const B9=16,O9=100,het=15,N9=10,I9=1e3,so=16;function fet(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},i.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},i.transform=function(n,s,r,a,l,u){t.transform(n,s,r,a,l,u),this.__originalTransform(n,s,r,a,l,u)},i.setTransform=function(n,s,r,a,l,u){t.setTransform(n,s,r,a,l,u),this.__originalSetTransform(n,s,r,a,l,u)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){t.rotate(n),this.__originalRotate(n)},i.clip=function(n){t.clip(n),this.__originalClip(n)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,s,r,a,l){t.bezierCurveTo(e,n,s,r,a,l),this.__originalBezierCurveTo(e,n,s,r,a,l)},i.rect=function(e,n,s,r){t.rect(e,n,s,r),this.__originalRect(e,n,s,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class det{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function _4(i,t,e,n,s,r,a,l,u,f){const[m,g,v,_,b,C]=Wi(i);if(g===0&&v===0){const R=a*m+b,D=Math.round(R),B=l*_+C,N=Math.round(B),I=(a+u)*m+b,F=Math.abs(Math.round(I)-D)||1,z=(l+f)*_+C,U=Math.abs(Math.round(z)-N)||1;return i.setTransform(Math.sign(m),0,0,Math.sign(_),D,N),i.drawImage(t,e,n,s,r,0,0,F,U),i.setTransform(m,g,v,_,b,C),[F,U]}if(m===0&&_===0){const R=l*v+b,D=Math.round(R),B=a*g+C,N=Math.round(B),I=(l+f)*v+b,F=Math.abs(Math.round(I)-D)||1,z=(a+u)*g+C,U=Math.abs(Math.round(z)-N)||1;return i.setTransform(0,Math.sign(g),Math.sign(v),0,D,N),i.drawImage(t,e,n,s,r,0,0,U,F),i.setTransform(m,g,v,_,b,C),[U,F]}i.drawImage(t,e,n,s,r,a,l,u,f);const M=Math.hypot(m,g),S=Math.hypot(v,_);return[M*u,S*f]}function pet(i){const{width:t,height:e}=i;if(t>I9||e>I9)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let a=new Uint8Array(r*(e+1)),l,u,f;const m=t+7&-8;let g=new Uint8Array(m*e),v=0;for(const S of i.data){let R=128;for(;R>0;)g[v++]=S&R?0:255,R>>=1}let _=0;for(v=0,g[v]!==0&&(a[0]=1,++_),u=1;u<t;u++)g[v]!==g[v+1]&&(a[u]=g[v]?2:1,++_),v++;for(g[v]!==0&&(a[u]=2,++_),l=1;l<e;l++){v=l*m,f=l*r,g[v-m]!==g[v]&&(a[f]=g[v]?1:8,++_);let S=(g[v]?4:0)+(g[v-m]?8:0);for(u=1;u<t;u++)S=(S>>2)+(g[v+1]?4:0)+(g[v-m+1]?8:0),s[S]&&(a[f+u]=s[S],++_),v++;if(g[v-m]!==g[v]&&(a[f+u]=g[v]?2:4,++_),_>n)return null}for(v=m*(e-1),f=l*r,g[v]!==0&&(a[f]=8,++_),u=1;u<t;u++)g[v]!==g[v+1]&&(a[f+u]=g[v]?4:8,++_),v++;if(g[v]!==0&&(a[f+u]=4,++_),_>n)return null;const b=new Int32Array([0,r,-1,0,-r,0,0,0,1]),C=new Path2D;for(l=0;_&&l<=e;l++){let S=l*r;const R=S+t;for(;S<R&&!a[S];)S++;if(S===R)continue;C.moveTo(S%r,l);const D=S;let B=a[S];do{const N=b[B];do S+=N;while(!a[S]);const I=a[S];I!==5&&I!==10?(B=I,a[S]=0):(B=I&51*B>>4,a[S]&=B>>2|B<<2),C.lineTo(S%r,S/r|0),a[S]||--_}while(D!==S);--l}return g=null,a=null,function(S){S.save(),S.scale(1/t,-1/e),S.translate(0,-e),S.fill(C),S.beginPath(),S.restore()}}class U9{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=UN,this.textMatrixScale=1,this.fontMatrix=Y5,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Kr.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=Le.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=Le.applyTransform(e,t),s=Le.applyTransform(e.slice(2),t),r=Le.applyTransform([e[0],e[3]],t),a=Le.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],s[0],r[0],a[0]),this.minY=Math.min(this.minY,n[1],s[1],r[1],a[1]),this.maxX=Math.max(this.maxX,n[0],s[0],r[0],a[0]),this.maxY=Math.max(this.maxY,n[1],s[1],r[1],a[1])}updateScalingPathMinMax(t,e){Le.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,s,r,a,l,u,f,m){const g=Le.bezierBoundingBox(e,n,s,r,a,l,u,f,m);m||this.updateRectMinMax(t,g)}getPathBoundingBox(t=La.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===La.STROKE){e||Oi("Stroke bounding box must include transform.");const s=Le.singularValueDecompose2dScale(e),r=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;n[0]-=r,n[1]-=a,n[2]+=r,n[3]+=a}return n}updateClipFromPath(){const t=Le.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=La.FILL,e=null){return Le.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function P9(i,t){if(typeof ImageData<"u"&&t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%so,r=(e-s)/so,a=s===0?r:r+1,l=i.createImageData(n,so);let u=0,f;const m=t.data,g=l.data;let v,_,b,C;if(t.kind===U4.GRAYSCALE_1BPP){const M=m.byteLength,S=new Uint32Array(g.buffer,0,g.byteLength>>2),R=S.length,D=n+7>>3,B=4294967295,N=Ia.isLittleEndian?4278190080:255;for(v=0;v<a;v++){for(b=v<r?so:s,f=0,_=0;_<b;_++){const I=M-u;let F=0;const z=I>D?n:I*8-7,U=z&-8;let P=0,X=0;for(;F<U;F+=8)X=m[u++],S[f++]=X&128?B:N,S[f++]=X&64?B:N,S[f++]=X&32?B:N,S[f++]=X&16?B:N,S[f++]=X&8?B:N,S[f++]=X&4?B:N,S[f++]=X&2?B:N,S[f++]=X&1?B:N;for(;F<z;F++)P===0&&(X=m[u++],P=128),S[f++]=X&P?B:N,P>>=1}for(;f<R;)S[f++]=0;i.putImageData(l,0,v*so)}}else if(t.kind===U4.RGBA_32BPP){for(_=0,C=n*so*4,v=0;v<r;v++)g.set(m.subarray(u,u+C)),u+=C,i.putImageData(l,0,_),_+=so;v<a&&(C=n*s*4,g.set(m.subarray(u,u+C)),i.putImageData(l,0,_))}else if(t.kind===U4.RGB_24BPP)for(b=so,C=n*b,v=0;v<a;v++){for(v>=r&&(b=s,C=n*b),f=0,_=C;_--;)g[f++]=m[u++],g[f++]=m[u++],g[f++]=m[u++],g[f++]=255;i.putImageData(l,0,v*so)}else throw new Error(`bad image kind: ${t.kind}`)}function F9(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%so,r=(e-s)/so,a=s===0?r:r+1,l=i.createImageData(n,so);let u=0;const f=t.data,m=l.data;for(let g=0;g<a;g++){const v=g<r?so:s;({srcPos:u}=uet({src:f,srcPos:u,dest:m,width:n,height:v,nonBlackColor:0})),i.putImageData(l,0,g*so)}}function l_(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function A4(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!ra){const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}}function H9(i,t){if(t)return!0;const e=Le.singularValueDecompose2dScale(i);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*sp.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const met=["butt","round","square"],get=["miter","round","bevel"],vet={},z9={};var op,SC,EC;const z7=class z7{constructor(t,e,n,s,r,{optionalContentConfig:a,markedContentStack:l=null},u,f){W(this,op);this.ctx=t,this.current=new U9(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new det(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=l,n){const u=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...Wi(this.compositeCtx))}this.ctx.save(),A4(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Wi(this.ctx)}executeOperatorList(t,e,n,s){const r=t.argsArray,a=t.fnArray;let l=e||0;const u=r.length;if(u===l)return l;const f=u-l>N9&&typeof n=="function",m=f?Date.now()+het:0;let g=0;const v=this.commonObjs,_=this.objs;let b;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,n),l;if(b=a[l],b!==uc.dependency)this[b].apply(this,r[l]);else for(const C of r[l]){const M=C.startsWith("g_")?v:_;if(!M.has(C))return M.get(C,n),l}if(l++,l===u)return l;if(f&&++g>N9){if(Date.now()>m)return n(),l;g=0}}}endDrawing(){V(this,op,SC).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),V(this,op,EC).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),l=n,u=s,f="prescale1",m,g;for(;r>2&&l>1||a>2&&u>1;){let v=l,_=u;r>2&&l>1&&(v=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/v),a>2&&u>1&&(_=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,a/=u/_),m=this.cachedCanvases.getCanvas(f,v,_),g=m.context,g.clearRect(0,0,v,_),g.drawImage(t,0,0,l,u,0,0,v,_),t=m.canvas,l=v,u=_,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:u}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:s}=t,r=this.current.fillColor,a=this.current.patternFill,l=Wi(e);let u,f,m,g;if((t.bitmap||t.data)&&t.count>1){const z=t.bitmap||t.data.buffer;f=JSON.stringify(a?l:[l.slice(0,4),r]),u=this._cachedBitmapsMap.get(z),u||(u=new Map,this._cachedBitmapsMap.set(z,u));const U=u.get(f);if(U&&!a){const P=Math.round(Math.min(l[0],l[2])+l[4]),X=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:U,offsetX:P,offsetY:X}}m=U}m||(g=this.cachedCanvases.getCanvas("maskCanvas",n,s),F9(g.context,t));let v=Le.transform(l,[1/n,0,0,-1/s,0,0]);v=Le.transform(v,[1,0,0,1,0,-s]);const[_,b,C,M]=Le.getAxialAlignedBoundingBox([0,0,n,s],v),S=Math.round(C-_)||1,R=Math.round(M-b)||1,D=this.cachedCanvases.getCanvas("fillCanvas",S,R),B=D.context,N=_,I=b;B.translate(-N,-I),B.transform(...v),m||(m=this._scaleImage(g.canvas,yh(B)),m=m.img,u&&a&&u.set(f,m)),B.imageSmoothingEnabled=H9(Wi(B),t.interpolate),_4(B,m,0,0,m.width,m.height,0,0,n,s),B.globalCompositeOperation="source-in";const F=Le.transform(yh(B),[1,0,0,1,-N,-I]);return B.fillStyle=a?r.getPattern(e,this,F,La.FILL):r,B.fillRect(0,0,n,s),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(f,D.canvas)),{canvas:D.canvas,offsetX:Math.round(N),offsetY:Math.round(I)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=met[t]}setLineJoin(t){this.ctx.lineJoin=get[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...Wi(this.suspendedCtx)),l_(this.suspendedCtx,r),fet(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),l_(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const r=s[0],a=s[1],l=s[2]-r,u=s[3]-a;l===0||u===0||(this.genericComposeSMask(e.context,n,l,u,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,r,a,l,u,f,m,g){let v=t.canvas,_=u-m,b=f-g;if(a){const M=Le.makeHexColor(...a);if(_<0||b<0||_+n>v.width||b+s>v.height){const S=this.cachedCanvases.getCanvas("maskExtension",n,s),R=S.context;R.drawImage(v,-_,-b),R.globalCompositeOperation="destination-atop",R.fillStyle=M,R.fillRect(0,0,n,s),R.globalCompositeOperation="source-over",v=S.canvas,_=b=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(_,b,n,s),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=M,t.fillRect(_,b,n,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const C=new Path2D;C.rect(u,f,n,s),e.clip(C),e.globalCompositeOperation="destination-in",e.drawImage(v,_,b,n,s,u,f,n,s),e.restore()}save(){this.inSMaskMode?(l_(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),l_(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,s,r,a){this.ctx.transform(t,e,n,s,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const s=this.ctx,r=this.current;let a=r.x,l=r.y,u,f;const m=Wi(s),g=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,v=g?n.slice(0):null;for(let _=0,b=0,C=t.length;_<C;_++)switch(t[_]|0){case uc.rectangle:a=e[b++],l=e[b++];const M=e[b++],S=e[b++],R=a+M,D=l+S;s.moveTo(a,l),M===0||S===0?s.lineTo(R,D):(s.lineTo(R,l),s.lineTo(R,D),s.lineTo(a,D)),g||r.updateRectMinMax(m,[a,l,R,D]),s.closePath();break;case uc.moveTo:a=e[b++],l=e[b++],s.moveTo(a,l),g||r.updatePathMinMax(m,a,l);break;case uc.lineTo:a=e[b++],l=e[b++],s.lineTo(a,l),g||r.updatePathMinMax(m,a,l);break;case uc.curveTo:u=a,f=l,a=e[b+4],l=e[b+5],s.bezierCurveTo(e[b],e[b+1],e[b+2],e[b+3],a,l),r.updateCurvePathMinMax(m,u,f,e[b],e[b+1],e[b+2],e[b+3],a,l,v),b+=6;break;case uc.curveTo2:u=a,f=l,s.bezierCurveTo(a,l,e[b],e[b+1],e[b+2],e[b+3]),r.updateCurvePathMinMax(m,u,f,a,l,e[b],e[b+1],e[b+2],e[b+3],v),a=e[b+2],l=e[b+3],b+=4;break;case uc.curveTo3:u=a,f=l,a=e[b+2],l=e[b+3],s.bezierCurveTo(e[b],e[b+1],a,l,a,l),r.updateCurvePathMinMax(m,u,f,e[b],e[b+1],a,l,a,l,v),b+=4;break;case uc.closePath:s.closePath();break}g&&r.updateScalingPathMinMax(m,v),r.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,yh(e),La.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(e.save(),e.fillStyle=n.getPattern(e,this,yh(e),La.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=vet}eoClip(){this.pendingClip=z9}beginText(){this.current.textMatrix=UN,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const n=this.commonObjs.get(t),s=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=n.fontMatrix||Y5,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&An("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const r=n.loadedName||"sans-serif",a=((m=n.systemFontInfo)==null?void 0:m.css)||`"${r}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const u=n.italic?"italic":"normal";let f=e;e<B9?f=B9:e>O9&&(f=O9),this.current.fontSizeScale=e/f,this.ctx.font=`${u} ${l} ${f}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,s,r,a){this.current.textMatrix=[t,e,n,s,r,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,s){const r=this.ctx,a=this.current,l=a.font,u=a.textRenderingMode,f=a.fontSize/a.fontSizeScale,m=u&Kr.FILL_STROKE_MASK,g=!!(u&Kr.ADD_TO_PATH_FLAG),v=a.patternFill&&!l.missingFile;let _;(l.disableFontFace||g||v)&&(_=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||v?(r.save(),r.translate(e,n),r.beginPath(),_(r,f),s&&r.setTransform(...s),(m===Kr.FILL||m===Kr.FILL_STROKE)&&r.fill(),(m===Kr.STROKE||m===Kr.FILL_STROKE)&&r.stroke(),r.restore()):((m===Kr.FILL||m===Kr.FILL_STROKE)&&r.fillText(t,e,n),(m===Kr.STROKE||m===Kr.FILL_STROKE)&&r.strokeText(t,e,n)),g&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Wi(r),x:e,y:n,fontSize:f,addToPath:_})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return Hn(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const r=this.ctx,a=e.fontSizeScale,l=e.charSpacing,u=e.wordSpacing,f=e.fontDirection,m=e.textHScale*f,g=t.length,v=n.vertical,_=v?1:-1,b=n.defaultVMetrics,C=s*e.fontMatrix[0],M=e.textRenderingMode===Kr.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),f>0?r.scale(m,-1):r.scale(m,1);let S;if(e.patternFill){r.save();const I=e.fillColor.getPattern(r,this,yh(r),La.FILL);S=Wi(r),r.restore(),r.fillStyle=I}let R=e.lineWidth;const D=e.textMatrixScale;if(D===0||R===0){const I=e.textRenderingMode&Kr.FILL_STROKE_MASK;(I===Kr.STROKE||I===Kr.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=D;if(a!==1&&(r.scale(a,a),R/=a),r.lineWidth=R,n.isInvalidPDFjsFont){const I=[];let F=0;for(const z of t)I.push(z.unicode),F+=z.width;r.fillText(I.join(""),0,0),e.x+=F*C*m,r.restore(),this.compose();return}let B=0,N;for(N=0;N<g;++N){const I=t[N];if(typeof I=="number"){B+=_*I*s/1e3;continue}let F=!1;const z=(I.isSpace?u:0)+l,U=I.fontChar,P=I.accent;let X,ot,it=I.width;if(v){const dt=I.vmetric||b,j=-(I.vmetric?dt[1]:it*.5)*C,tt=dt[2]*C;it=dt?-dt[0]:it,X=j/a,ot=(B+tt)/a}else X=B/a,ot=0;if(n.remeasure&&it>0){const dt=r.measureText(U).width*1e3/s*a;if(it<dt&&this.isFontSubpixelAAEnabled){const j=it/dt;F=!0,r.save(),r.scale(j,1),X/=j}else it!==dt&&(X+=(it-dt)/2e3*s/a)}if(this.contentVisible&&(I.isInFont||n.missingFile)){if(M&&!P)r.fillText(U,X,ot);else if(this.paintChar(U,X,ot,S),P){const dt=X+s*P.offset.x/a,j=ot-s*P.offset.y/a;this.paintChar(P.fontChar,dt,j,S)}}const ut=v?it*C-z*f:it*C+z*f;B+=ut,F&&r.restore()}v?e.y-=B:e.x+=B*m,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,s=n.font,r=n.fontSize,a=n.fontDirection,l=s.vertical?1:-1,u=n.charSpacing,f=n.wordSpacing,m=n.textHScale*a,g=n.fontMatrix||Y5,v=t.length,_=n.textRenderingMode===Kr.INVISIBLE;let b,C,M,S;if(!(_||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(m,a),b=0;b<v;++b){if(C=t[b],typeof C=="number"){S=l*C*r/1e3,this.ctx.translate(S,0),n.x+=S*m;continue}const R=(C.isSpace?f:0)+u,D=s.charProcOperatorList[C.operatorListId];if(!D){An(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),e.scale(r,r),e.transform(...g),this.executeOperatorList(D),this.restore()),M=Le.applyTransform([C.width,0],g)[0]*r+R,e.translate(M,0),n.x+=M*m}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,s,r,a){this.ctx.rect(n,s,r-n,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],s=this.baseTransform||Wi(this.ctx),r={createCanvasGraphics:a=>new z7(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new bC(t,n,this.ctx,r,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=Le.makeHexColor(t,e,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=Le.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=cet(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,yh(e),La.SHADING);const s=yh(e);if(s){const{width:r,height:a}=e.canvas,[l,u,f,m]=Le.getAxialAlignedBoundingBox([0,0,r,a],s);this.ctx.fillRect(l,u,f-l,m-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Oi("Should not call beginInlineImage")}beginImageData(){Oi("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Wi(this.ctx),e)){const n=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],n,s),this.current.updateRectMinMax(Wi(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||IM("TODO: Support non-isolated groups."),t.knockout&&An("Knockout groups not supported.");const n=Wi(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=Le.getAxialAlignedBoundingBox(t.bbox,Wi(e));const r=[0,0,e.canvas.width,e.canvas.height];s=Le.intersect(s,r)||[0,0,0,0];const a=Math.floor(s[0]),l=Math.floor(s[1]),u=Math.max(Math.ceil(s[2])-a,1),f=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,f]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,u,f),v=g.context;v.translate(-a,-l),v.transform(...n),t.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,l),e.save()),l_(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Wi(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=Le.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,s,r){if(V(this,op,SC).call(this),A4(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=l;const[u,f]=Le.singularValueDecompose2dScale(Wi(this.ctx)),{viewportScale:m}=this,g=Math.ceil(a*this.outputScaleX*m),v=Math.ceil(l*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(g,v);const{canvas:_,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(u,0,0,-f,0,l*f),A4(this.ctx)}else A4(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],a,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new U9(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),V(this,op,EC).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=pet(t)),s.compiled)){s.compiled(n);return}const r=this._createMaskCanvas(t),a=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,s=0,r,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const u=Wi(l);l.transform(e,n,s,r,0,0);const f=this._createMaskCanvas(t);l.setTransform(1,0,0,1,f.offsetX-u[4],f.offsetY-u[5]);for(let m=0,g=a.length;m<g;m+=2){const v=Le.transform(u,[e,n,s,r,a[m],a[m+1]]),[_,b]=Le.applyTransform([0,0],v);l.drawImage(f.canvas,_,b)}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const r of t){const{data:a,width:l,height:u,transform:f}=r,m=this.cachedCanvases.getCanvas("maskCanvas",l,u),g=m.context;g.save();const v=this.getObject(a,r);F9(g,v),g.globalCompositeOperation="source-in",g.fillStyle=s?n.getPattern(g,this,yh(e),La.FILL):n,g.fillRect(0,0,l,u),g.restore(),e.save(),e.transform(...f),e.scale(1,-1),_4(e,m.canvas,0,0,l,u,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){An("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,s){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){An("Dependent image isn't ready yet");return}const a=r.width,l=r.height,u=[];for(let f=0,m=s.length;f<m;f+=2)u.push({transform:[e,0,0,n,s[f],s[f+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(r,u)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,s),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,s=this.ctx;if(this.save(),!ra){const{filter:l}=s;l!=="none"&&l!==""&&(s.filter="none")}s.scale(1/e,-1/n);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const u=this.cachedCanvases.getCanvas("inlineImage",e,n).context;P9(u,t),r=this.applyTransferMapsToCanvas(u)}const a=this._scaleImage(r,yh(s));s.imageSmoothingEnabled=H9(Wi(s),t.interpolate),_4(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const r=t.width,a=t.height,u=this.cachedCanvases.getCanvas("inlineImage",r,a).context;P9(u,t),s=this.applyTransferMapsToCanvas(u)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),_4(n,s,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===z9?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Wi(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:r}=this.ctx.getTransform();let a,l;if(n===0&&s===0){const u=Math.abs(e),f=Math.abs(r);if(u===f)if(t===0)a=l=1/u;else{const m=u*t;a=l=m<1?1/m:1}else if(t===0)a=1/u,l=1/f;else{const m=u*t,g=f*t;a=m<1?1/m:1,l=g<1?1/g:1}}else{const u=Math.abs(e*r-n*s),f=Math.hypot(e,n),m=Math.hypot(s,r);if(t===0)a=m/u,l=f/u;else{const g=t*u;a=m>g?m/g:1,l=f>g?f/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[s,r]=this.getScaleForStroking();if(e.lineWidth=n||1,s===1&&r===1){e.stroke();return}const a=e.getLineDash();if(t&&e.save(),e.scale(s,r),a.length>0){const l=Math.max(s,r);e.setLineDash(a.map(u=>u/l)),e.lineDashOffset/=l}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};op=new WeakSet,SC=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},EC=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let ev=z7;for(const i in uc)ev.prototype[i]!==void 0&&(ev.prototype[uc[i]]=ev.prototype[i]);var BA,OA;class Wh{static get workerPort(){return x(this,BA)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");G(this,BA,t)}static get workerSrc(){return x(this,OA)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");G(this,OA,t)}}BA=new WeakMap,OA=new WeakMap,W(Wh,BA,null),W(Wh,OA,"");const x4={DATA:1,ERROR:2},Ts={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wo(i){switch(i instanceof Error||typeof i=="object"&&i!==null||Oi('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new h0(i.message);case"MissingPDFException":return new u0(i.message);case"PasswordException":return new W5(i.message,i.code);case"UnexpectedResponseException":return new UM(i.message,i.status);case"UnknownErrorException":return new K5(i.message,i.details);default:return new K5(i.message,i.toString())}}var _v,Rl,AI,xI,bI,Q4;class b_{constructor(t,e,n){W(this,Rl);W(this,_v,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",V(this,Rl,AI).bind(this),{signal:x(this,_v).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(a){r.reject(a)}return r.promise}sendWithStream(t,e,n,s){const r=this.streamId++,a=this.sourceName,l=this.targetName,u=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[r]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:a,targetName:l,action:t,streamId:r,data:e,desiredSize:f.desiredSize},s),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[r].pullCall=m,u.postMessage({sourceName:a,targetName:l,stream:Ts.PULL,streamId:r,desiredSize:f.desiredSize}),m.promise},cancel:f=>{Xs(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[r].cancelCall=m,this.streamControllers[r].isClosed=!0,u.postMessage({sourceName:a,targetName:l,stream:Ts.CANCEL,streamId:r,reason:wo(f)}),m.promise}},n)}destroy(){var t;(t=x(this,_v))==null||t.abort(),G(this,_v,null)}}_v=new WeakMap,Rl=new WeakSet,AI=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){V(this,Rl,bI).call(this,t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===x4.DATA)s.resolve(t.data);else if(t.callback===x4.ERROR)s.reject(wo(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,r=this.comObj;new Promise(function(a){a(e(t.data))}).then(function(a){r.postMessage({sourceName:n,targetName:s,callback:x4.DATA,callbackId:t.callbackId,data:a})},function(a){r.postMessage({sourceName:n,targetName:s,callback:x4.ERROR,callbackId:t.callbackId,reason:wo(a)})});return}if(t.streamId){V(this,Rl,xI).call(this,t);return}e(t.data)},xI=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,a=this,l=this.actionHandler[t.action],u={enqueue(f,m=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:Ts.ENQUEUE,streamId:e,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Ts.CLOSE,streamId:e}),delete a.streamSinks[e])},error(f){Xs(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Ts.ERROR,streamId:e,reason:wo(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,new Promise(function(f){f(l(t.data,u))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Ts.START_COMPLETE,streamId:e,success:!0})},function(f){r.postMessage({sourceName:n,targetName:s,stream:Ts.START_COMPLETE,streamId:e,reason:wo(f)})})},bI=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,a=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case Ts.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(wo(t.reason));break;case Ts.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(wo(t.reason));break;case Ts.PULL:if(!l){r.postMessage({sourceName:n,targetName:s,stream:Ts.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,new Promise(function(u){var f;u((f=l.onPull)==null?void 0:f.call(l))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Ts.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:s,stream:Ts.PULL_COMPLETE,streamId:e,reason:wo(u)})});break;case Ts.ENQUEUE:if(Xs(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case Ts.CLOSE:if(Xs(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),V(this,Rl,Q4).call(this,a,e);break;case Ts.ERROR:Xs(a,"error should have stream controller"),a.controller.error(wo(t.reason)),V(this,Rl,Q4).call(this,a,e);break;case Ts.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(wo(t.reason)),V(this,Rl,Q4).call(this,a,e);break;case Ts.CANCEL:if(!l)break;new Promise(function(u){var f;u((f=l.onCancel)==null?void 0:f.call(l,wo(t.reason)))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Ts.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:s,stream:Ts.CANCEL_COMPLETE,streamId:e,reason:wo(u)})}),l.sinkCapability.reject(wo(t.reason)),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Q4=async function(t,e){var n,s,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var sg,NA;class yet{constructor({parsedData:t,rawData:e}){W(this,sg);W(this,NA);G(this,sg,t),G(this,NA,e)}getRaw(){return x(this,NA)}get(t){return x(this,sg).get(t)??null}getAll(){return E7(x(this,sg))}has(t){return x(this,sg).has(t)}}sg=new WeakMap,NA=new WeakMap;const V1=Symbol("INTERNAL");var IA,UA,PA,Av;class _et{constructor(t,{name:e,intent:n,usage:s,rbGroups:r}){W(this,IA,!1);W(this,UA,!1);W(this,PA,!1);W(this,Av,!0);G(this,IA,!!(t&Fo.DISPLAY)),G(this,UA,!!(t&Fo.PRINT)),this.name=e,this.intent=n,this.usage=s,this.rbGroups=r}get visible(){if(x(this,PA))return x(this,Av);if(!x(this,Av))return!1;const{print:t,view:e}=this.usage;return x(this,IA)?(e==null?void 0:e.viewState)!=="OFF":x(this,UA)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==V1&&Oi("Internal method `_setVisible` called."),G(this,PA,n),G(this,Av,e)}}IA=new WeakMap,UA=new WeakMap,PA=new WeakMap,Av=new WeakMap;var Ld,hi,xv,bv,FA,MC;class Aet{constructor(t,e=Fo.DISPLAY){W(this,FA);W(this,Ld,null);W(this,hi,new Map);W(this,xv,null);W(this,bv,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,G(this,bv,t.order);for(const n of t.groups)x(this,hi).set(n.id,new _et(e,n));if(t.baseState==="OFF")for(const n of x(this,hi).values())n._setVisible(V1,!1);for(const n of t.on)x(this,hi).get(n)._setVisible(V1,!0);for(const n of t.off)x(this,hi).get(n)._setVisible(V1,!1);G(this,xv,this.getHash())}}isVisible(t){if(x(this,hi).size===0)return!0;if(!t)return IM("Optional content group not defined."),!0;if(t.type==="OCG")return x(this,hi).has(t.id)?x(this,hi).get(t.id).visible:(An(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return V(this,FA,MC).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(x(this,hi).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(!x(this,hi).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(!x(this,hi).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(x(this,hi).get(e).visible)return!1}return!0}return An(`Unknown optional content policy ${t.policy}.`),!0}return An(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const s=x(this,hi).get(t);if(!s){An(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const a of s.rbGroups)for(const l of a)l!==t&&((r=x(this,hi).get(l))==null||r._setVisible(V1,!1,!0));s._setVisible(V1,!!e,!0),G(this,Ld,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=x(this,hi).get(s);if(r)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}G(this,Ld,null)}get hasInitialVisibility(){return x(this,xv)===null||this.getHash()===x(this,xv)}getOrder(){return x(this,hi).size?x(this,bv)?x(this,bv).slice():[...x(this,hi).keys()]:null}getGroups(){return x(this,hi).size>0?E7(x(this,hi)):null}getGroup(t){return x(this,hi).get(t)||null}getHash(){if(x(this,Ld)!==null)return x(this,Ld);const t=new cI;for(const[e,n]of x(this,hi))t.update(`${e}:${n.visible}`);return G(this,Ld,t.hexdigest())}}Ld=new WeakMap,hi=new WeakMap,xv=new WeakMap,bv=new WeakMap,FA=new WeakSet,MC=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const r=t[s];let a;if(Array.isArray(r))a=V(this,FA,MC).call(this,r);else if(x(this,hi).has(r))a=x(this,hi).get(r).visible;else return An(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class xet{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Xs(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const u=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((u,f)=>{this._onReceiveData({begin:u,chunk:f})}),t.addProgressListener((u,f)=>{this._onProgress({loaded:u,total:f})}),t.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});Xs(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,s,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Xs(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new bet(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Eet(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class bet{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=C7(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Eet{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Met(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let m=l(e);return m=unescape(m),m=u(m),m=f(m),r(m)}if(e=a(i),e){const m=f(e);return r(m)}if(e=n("filename","i").exec(i),e){e=e[1];let m=l(e);return m=f(m),r(m)}function n(m,g){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function s(m,g){if(m){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(m,{fatal:!0}),_=PM(g);g=v.decode(_),t=!1}catch{}}return g}function r(m){return t&&/[\x80-\xff]/.test(m)&&(m=s("utf-8",m),t&&(m=s("iso-8859-1",m))),m}function a(m){const g=[];let v;const _=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=_.exec(m))!==null;){let[,C,M,S]=v;if(C=parseInt(C,10),C in g){if(C===0)break;continue}g[C]=[M,S]}const b=[];for(let C=0;C<g.length&&C in g;++C){let[M,S]=g[C];S=l(S),M&&(S=unescape(S),C===0&&(S=u(S))),b.push(S)}return b.join("")}function l(m){if(m.startsWith('"')){const g=m.slice(1).split('\\"');for(let v=0;v<g.length;++v){const _=g[v].indexOf('"');_!==-1&&(g[v]=g[v].slice(0,_),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}m=g.join('"')}return m}function u(m){const g=m.indexOf("'");if(g===-1)return m;const v=m.slice(0,g),b=m.slice(g+1).replace(/^[^']*'/,"");return s(v,b)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,_,b){if(_==="q"||_==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,M){return String.fromCharCode(parseInt(M,16))}),s(v,b);try{b=atob(b)}catch{}return s(v,b)})}return""}function B7(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function O7({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function N7(i){const t=i.get("Content-Disposition");if(t){let e=Met(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(C7(e))return e}return null}function zM(i,t){return i===404||i===0&&t.startsWith("file:")?new u0('Missing PDF "'+t+'".'):new UM(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i)}function SI(i){return i===200||i===206}function EI(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function MI(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(An(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class G9{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=B7(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Xs(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Tet(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Cet(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Tet{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),s=e.url;fetch(s,EI(n,this._withCredentials,this._abortController)).then(r=>{if(!SI(r.status))throw zM(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:l,suggestedLength:u}=O7({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=u||this._contentLength,this._filename=N7(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new h0("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:MI(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Cet{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const a=s.url;fetch(a,EI(r,this._withCredentials,this._abortController)).then(l=>{if(!SI(l.status))throw zM(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:MI(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const s5=200,r5=206;function wet(i){const t=i.response;return typeof t!="string"?t:PM(t).buffer}class Ret{constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=B7(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const s={begin:t,end:e};for(const r in n)s[r]=n[r];return this.request(s)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,a]of this.headers)e.setRequestHeader(r,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=r5):s.expectedStatus=s5,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var s;const n=this.pendingRequests[t];n&&((s=n.onProgress)==null||s.call(n,e))}onStateChange(t,e){var u,f,m;const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){(u=n.onError)==null||u.call(n,s.status);return}const r=s.status||s5;if(!(r===s5&&n.expectedStatus===r5)&&r!==n.expectedStatus){(f=n.onError)==null||f.call(n,s.status);return}const l=wet(s);if(r===r5){const g=s.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);n.onDone({begin:parseInt(v[1],10),chunk:l})}else l?n.onDone({begin:0,chunk:l}):(m=n.onError)==null||m.call(n,s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Let{constructor(t){this._source=t,this._manager=new Ret(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Xs(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Det(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new Bet(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Det{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=new Headers(e.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[l,...u]=a.split(": ");return[l,u.join(": ")]})),{allowRangeRequests:s,suggestedLength:r}=O7({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=N7(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=zM(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Bet{constructor(t,e,n){this._manager=t;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=zM(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Oet=/^[a-z][a-z0-9\-+.]+:/i;function Net(i){if(Oet.test(i))return new URL(i);const t=rp.get("url");return new URL(t.pathToFileURL(i))}function TI(i,t,e){return i.protocol==="http:"?rp.get("http").request(i,{headers:t},e):rp.get("https").request(i,{headers:t},e)}class Iet{constructor(t){this.source=t,this.url=Net(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=B7(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Xs(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Fet(this):new Uet(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new Het(this,t,e):new Pet(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class CI{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new h0("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class wI{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class Uet extends CI{constructor(t){super(t);const e=Object.fromEntries(t.headers),n=s=>{if(s.statusCode===404){const u=new u0(`Missing PDF "${this._url}".`);this._storedError=u,this._headersCapability.reject(u);return}this._headersCapability.resolve(),this._setReadableStream(s);const r=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:l}=O7({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=N7(r)};this._request=TI(this._url,e,n),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class Pet extends wI{constructor(t,e,n){super(t);const s=Object.fromEntries(t.headers);s.Range=`bytes=${e}-${n-1}`;const r=a=>{if(a.statusCode===404){const l=new u0(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(a)};this._request=TI(this._url,s,r),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class Fet extends CI{constructor(t){super(t);const e=rp.get("fs");e.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new u0(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class Het extends wI{constructor(t,e,n){super(t);const s=rp.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:n-1}))}}const zet=1e5,Za=30,Get=.8;var cD,Dd,no,HA,zA,rg,Lh,GA,kA,ag,Sv,Ev,Bd,Mv,VA,Tv,og,QA,jA,rs,lg,cg,XA,Od,Cv,lf,RI,LI,CC,Vo,j4,wC,DI,BI;let TC=(rs=class{constructor({textContentSource:t,container:e,viewport:n}){W(this,lf);W(this,Dd,Promise.withResolvers());W(this,no,null);W(this,HA,!1);W(this,zA,!!((cD=globalThis.FontInspector)!=null&&cD.enabled));W(this,rg,null);W(this,Lh,null);W(this,GA,0);W(this,kA,0);W(this,ag,null);W(this,Sv,null);W(this,Ev,0);W(this,Bd,0);W(this,Mv,Object.create(null));W(this,VA,[]);W(this,Tv,null);W(this,og,[]);W(this,QA,new WeakMap);W(this,jA,null);var u;if(t instanceof ReadableStream)G(this,Tv,t);else if(typeof t=="object")G(this,Tv,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');G(this,no,G(this,Sv,e)),G(this,Bd,n.scale*(globalThis.devicePixelRatio||1)),G(this,Ev,n.rotation),G(this,Lh,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:a,pageY:l}=n.rawDims;G(this,jA,[1,0,0,-1,-a,l+r]),G(this,kA,s),G(this,GA,r),V(u=rs,Vo,DI).call(u),Jg(e,n),x(this,Dd).promise.finally(()=>{x(rs,Cv).delete(this),G(this,Lh,null),G(this,Mv,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ia.platform;return Hn(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{x(this,ag).read().then(({value:e,done:n})=>{if(n){x(this,Dd).resolve();return}x(this,rg)??G(this,rg,e.lang),Object.assign(x(this,Mv),e.styles),V(this,lf,RI).call(this,e.items),t()},x(this,Dd).reject)};return G(this,ag,x(this,Tv).getReader()),x(rs,Cv).add(this),t(),x(this,Dd).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==x(this,Ev)&&(e==null||e(),G(this,Ev,s),Jg(x(this,Sv),{rotation:s})),n!==x(this,Bd)){e==null||e(),G(this,Bd,n);const a={div:null,properties:null,ctx:V(r=rs,Vo,j4).call(r,x(this,rg))};for(const l of x(this,og))a.properties=x(this,QA).get(l),a.div=l,V(this,lf,CC).call(this,a)}}cancel(){var e;const t=new h0("TextLayer task cancelled.");(e=x(this,ag))==null||e.cancel(t).catch(()=>{}),G(this,ag,null),x(this,Dd).reject(t)}get textDivs(){return x(this,og)}get textContentItemsStr(){return x(this,VA)}static cleanup(){if(!(x(this,Cv).size>0)){x(this,lg).clear();for(const{canvas:t}of x(this,cg).values())t.remove();x(this,cg).clear()}}},Dd=new WeakMap,no=new WeakMap,HA=new WeakMap,zA=new WeakMap,rg=new WeakMap,Lh=new WeakMap,GA=new WeakMap,kA=new WeakMap,ag=new WeakMap,Sv=new WeakMap,Ev=new WeakMap,Bd=new WeakMap,Mv=new WeakMap,VA=new WeakMap,Tv=new WeakMap,og=new WeakMap,QA=new WeakMap,jA=new WeakMap,lg=new WeakMap,cg=new WeakMap,XA=new WeakMap,Od=new WeakMap,Cv=new WeakMap,lf=new WeakSet,RI=function(t){var s,r;if(x(this,HA))return;(r=x(this,Lh)).ctx??(r.ctx=V(s=rs,Vo,j4).call(s,x(this,rg)));const e=x(this,og),n=x(this,VA);for(const a of t){if(e.length>zet){An("Ignoring additional textDivs for performance reasons."),G(this,HA,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=x(this,no);G(this,no,document.createElement("span")),x(this,no).classList.add("markedContent"),a.id!==null&&x(this,no).setAttribute("id",`${a.id}`),l.append(x(this,no))}else a.type==="endMarkedContent"&&G(this,no,x(this,no).parentNode);continue}n.push(a.str),V(this,lf,LI).call(this,a)}},LI=function(t){var C;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};x(this,og).push(e);const s=Le.transform(x(this,jA),t.transform);let r=Math.atan2(s[1],s[0]);const a=x(this,Mv)[t.fontName];a.vertical&&(r+=Math.PI/2);let l=x(this,zA)&&a.fontSubstitution||a.fontFamily;l=rs.fontFamilyMap.get(l)||l;const u=Math.hypot(s[2],s[3]),f=u*V(C=rs,Vo,BI).call(C,l,x(this,rg));let m,g;r===0?(m=s[4],g=s[5]-f):(m=s[4]+f*Math.sin(r),g=s[5]-f*Math.cos(r));const v="calc(var(--scale-factor)*",_=e.style;x(this,no)===x(this,Sv)?(_.left=`${(100*m/x(this,kA)).toFixed(2)}%`,_.top=`${(100*g/x(this,GA)).toFixed(2)}%`):(_.left=`${v}${m.toFixed(2)}px)`,_.top=`${v}${g.toFixed(2)}px)`),_.fontSize=`${v}${(x(rs,Od)*u).toFixed(2)}px)`,_.fontFamily=l,n.fontSize=u,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,x(this,zA)&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const M=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);M!==S&&Math.max(M,S)/Math.min(M,S)>1.5&&(b=!0)}if(b&&(n.canvasWidth=a.vertical?t.height:t.width),x(this,QA).set(e,n),x(this,Lh).div=e,x(this,Lh).properties=n,V(this,lf,CC).call(this,x(this,Lh)),n.hasText&&x(this,no).append(e),n.hasEOL){const M=document.createElement("br");M.setAttribute("role","presentation"),x(this,no).append(M)}},CC=function(t){var l;const{div:e,properties:n,ctx:s}=t,{style:r}=e;let a="";if(x(rs,Od)>1&&(a=`scale(${1/x(rs,Od)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=r,{canvasWidth:f,fontSize:m}=n;V(l=rs,Vo,wC).call(l,s,m*x(this,Bd),u);const{width:g}=s.measureText(e.textContent);g>0&&(a=`scaleX(${f*x(this,Bd)/g}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(r.transform=a)},Vo=new WeakSet,j4=function(t=null){let e=x(this,cg).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),x(this,cg).set(t,e),x(this,XA).set(e,{size:0,family:""})}return e},wC=function(t,e,n){const s=x(this,XA).get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)},DI=function(){if(x(this,Od)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),G(this,Od,t.getBoundingClientRect().height),t.remove()},BI=function(t,e){const n=x(this,lg).get(t);if(n)return n;const s=V(this,Vo,j4).call(this,e);s.canvas.width=s.canvas.height=Za,V(this,Vo,wC).call(this,s,Za,t);const r=s.measureText("");let a=r.fontBoundingBoxAscent,l=Math.abs(r.fontBoundingBoxDescent);if(a){const m=a/(a+l);return x(this,lg).set(t,m),s.canvas.width=s.canvas.height=0,m}s.strokeStyle="red",s.clearRect(0,0,Za,Za),s.strokeText("g",0,0);let u=s.getImageData(0,0,Za,Za).data;l=0;for(let m=u.length-1-3;m>=0;m-=4)if(u[m]>0){l=Math.ceil(m/4/Za);break}s.clearRect(0,0,Za,Za),s.strokeText("A",0,Za),u=s.getImageData(0,0,Za,Za).data,a=0;for(let m=0,g=u.length;m<g;m+=4)if(u[m]>0){a=Za-Math.floor(m/4/Za);break}s.canvas.width=s.canvas.height=0;const f=a?a/(a+l):Get;return x(this,lg).set(t,f),f},W(rs,Vo),W(rs,lg,new Map),W(rs,cg,new Map),W(rs,XA,new WeakMap),W(rs,Od,null),W(rs,Cv,new Set),rs);class uA{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(r){var u;if(!r)return;let a=null;const l=r.name;if(l==="#text")a=r.value;else if(uA.shouldBuildText(l))(u=r==null?void 0:r.attributes)!=null&&u.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&e.push({str:a}),!!r.children)for(const f of r.children)s(f)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const ket=65536,Vet=100,Qet=5e3,jet=ra?eet:Ztt,Xet=ra?net:pI,qet=ra?tet:$tt,Yet=ra?iet:yI;function Wet(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new RC,{docId:e}=t,n=i.url?Ket(i.url):null,s=i.data?Jet(i.data):null,r=i.httpHeaders||null,a=i.withCredentials===!0,l=i.password??null,u=i.range instanceof OI?i.range:null,f=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:ket;let m=i.worker instanceof nv?i.worker:null;const g=i.verbosity,v=typeof i.docBaseUrl=="string"&&!HM(i.docBaseUrl)?i.docBaseUrl:null,_=typeof i.cMapUrl=="string"?i.cMapUrl:null,b=i.cMapPacked!==!1,C=i.CMapReaderFactory||Xet,M=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,S=i.StandardFontDataFactory||Yet,R=i.stopAtErrors!==!0,D=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,B=i.isEvalSupported!==!1,N=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!ra,I=typeof i.isChrome=="boolean"?i.isChrome:!Ia.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),F=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,z=typeof i.disableFontFace=="boolean"?i.disableFontFace:ra,U=i.fontExtraProperties===!0,P=i.enableXfa===!0,X=i.ownerDocument||globalThis.document,ot=i.disableRange===!0,it=i.disableStream===!0,ut=i.disableAutoFetch===!0,dt=i.pdfBug===!0,j=i.CanvasFactory||jet,tt=i.FilterFactory||qet,nt=i.enableHWA===!0,_t=u?u.length:i.length??NaN,J=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!ra&&!z,at=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:C===pI&&S===yI&&_&&M&&m_(_,document.baseURI)&&m_(M,document.baseURI);i.canvasFactory&&R9("`canvasFactory`-instance option, please use `CanvasFactory` instead."),i.filterFactory&&R9("`filterFactory`-instance option, please use `FilterFactory` instead.");const xt=null;Rtt(g);const Et={canvasFactory:new j({ownerDocument:X,enableHWA:nt}),filterFactory:new tt({docId:e,ownerDocument:X}),cMapReaderFactory:at?null:new C({baseUrl:_,isCompressed:b}),standardFontDataFactory:at?null:new S({baseUrl:M})};if(!m){const Bt={verbosity:g,port:Wh.workerPort};m=Bt.port?nv.fromPort(Bt):new nv(Bt),t._worker=m}const ct={docId:e,apiVersion:"4.8.69",data:s,password:l,disableAutoFetch:ut,rangeChunkSize:f,length:_t,docBaseUrl:v,enableXfa:P,evaluatorOptions:{maxImageSize:D,disableFontFace:z,ignoreErrors:R,isEvalSupported:B,isOffscreenCanvasSupported:N,isChrome:I,canvasMaxAreaInBytes:F,fontExtraProperties:U,useSystemFonts:J,cMapUrl:at?_:null,standardFontDataUrl:at?M:null}},wt={disableFontFace:z,fontExtraProperties:U,ownerDocument:X,pdfBug:dt,styleElement:xt,loadingParams:{disableAutoFetch:ut,enableXfa:P}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Bt=m.messageHandler.sendWithPromise("GetDocRequest",ct,s?[s.buffer]:null);let Ut;if(u)Ut=new xet(u,{disableRange:ot,disableStream:it});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Wt;ra?Wt=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&m_(n)?G9:Iet:Wt=m_(n)?G9:Let,Ut=new Wt({url:n,length:_t,httpHeaders:r,withCredentials:a,rangeChunkSize:f,disableRange:ot,disableStream:it})}return Bt.then(Wt=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ve=new b_(e,Wt,m.port),ee=new ent(ve,t,Ut,wt,Et);t._transport=ee,ve.send("Ready",null)})}).catch(t._capability.reject),t}function Ket(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(ra&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Jet(i){if(ra&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return PM(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function k9(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var wE;const RE=class RE{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Ea(RE,wE)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};wE=new WeakMap,W(RE,wE,0);let RC=RE,OI=class{constructor(t,e,n=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Oi("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class Zet{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Hn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Nd,Dh,Ml,Q1,X4;class $et{constructor(t,e,n,s=!1){W(this,Ml);W(this,Nd,null);W(this,Dh,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new w9:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new NI,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new Gx({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Hn(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:s=yd.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:f=null,printAnnotationStorage:m=null,isEditing:g=!1}){var B,N;(B=this._stats)==null||B.time("Overall");const v=this._transport.getRenderingIntent(n,s,m,g),{renderingIntent:_,cacheKey:b}=v;G(this,Dh,!1),V(this,Ml,X4).call(this),l||(l=this._transport.getOptionalContentConfig(_));let C=this._intentStates.get(b);C||(C=Object.create(null),this._intentStates.set(b,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const M=!!(_&Fo.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(N=this._stats)==null||N.time("Page Request"),this._pumpOperatorList(v));const S=I=>{var F;C.renderTasks.delete(R),(this._maybeCleanupAfterRender||M)&&G(this,Dh,!0),V(this,Ml,Q1).call(this,!M),I?(R.capability.reject(I),this._abortOperatorList({intentState:C,reason:I instanceof Error?I:new Error(I)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new DC({callback:S,params:{canvasContext:t,viewport:e,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:f});(C.renderTasks||(C.renderTasks=new Set)).add(R);const D=R.task;return Promise.all([C.displayReadyCapability.promise,l]).then(([I,F])=>{var z;if(this.destroyed){S();return}if((z=this._stats)==null||z.time("Rendering"),!(F.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:I,optionalContentConfig:F}),R.operatorListChanged()}).catch(S),D}getOperatorList({intent:t="display",annotationMode:e=yd.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var f;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(u))}const a=this._transport.getRenderingIntent(t,e,n,s,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let u;return l.opListReadCapability||(u=Object.create(null),u.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(u),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>uA.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function r(){a.read().then(function({value:u,done:f}){if(f){n(l);return}l.lang??(l.lang=u.lang),Object.assign(l.styles,u.styles),l.items.push(...u.items),r()},s)}const a=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),G(this,Dh,!1),V(this,Ml,X4).call(this),Promise.all(t)}cleanup(t=!1){G(this,Dh,!0);const e=V(this,Ml,Q1).call(this,!1);return t&&e&&this._stats&&(this._stats=new w9),e}_startRenderPage(t,e){var s,r;const n=this._intentStates.get(e);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&V(this,Ml,Q1).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:r,transfer:a}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},a).getReader(),f=this._intentStates.get(e);f.streamReader=u;const m=()=>{u.read().then(({value:g,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),m())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();V(this,Ml,Q1).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof T7){let s=Vet;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new h0(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Nd=new WeakMap,Dh=new WeakMap,Ml=new WeakSet,Q1=function(t=!1){if(V(this,Ml,X4).call(this),!x(this,Dh)||this.destroyed)return!1;if(t)return G(this,Nd,setTimeout(()=>{G(this,Nd,null),V(this,Ml,Q1).call(this,!1)},Qet)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),G(this,Dh,!1),!0},X4=function(){x(this,Nd)&&(clearTimeout(x(this,Nd)),G(this,Nd,null))};var Bh,LE;class tnt{constructor(){W(this,Bh,new Map);W(this,LE,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};x(this,LE).then(()=>{for(const[s]of x(this,Bh))s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){An("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}x(this,Bh).set(e,s)}removeEventListener(t,e){const n=x(this,Bh).get(e);n==null||n(),x(this,Bh).delete(e)}terminate(){for(const[,t]of x(this,Bh))t==null||t();x(this,Bh).clear()}}Bh=new WeakMap,LE=new WeakMap;var DE,ug,hg,wv,q4,Rv,Y4;const Hi=class Hi{constructor({name:t=null,port:e=null,verbosity:n=Ltt()}={}){W(this,wv);var s;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((s=x(Hi,hg))!=null&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(x(Hi,hg)||G(Hi,hg,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return ra?Promise.all([rp.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new b_("main","worker",t),this._messageHandler.on("ready",function(){}),V(this,wv,q4).call(this)}_initialize(){if(x(Hi,ug)||x(Hi,Rv,Y4)){this._setupFakeWorker();return}let{workerSrc:t}=Hi;try{Hi._isSameOrigin(window.location.href,t)||(t=Hi._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new b_("main","worker",e),s=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),n.on("test",l=>{if(r.abort(),this.destroyed||!l){s();return}this._messageHandler=n,this._port=e,this._webWorker=e,V(this,wv,q4).call(this)}),n.on("ready",l=>{if(r.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{IM("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){x(Hi,ug)||(An("Setting up fake worker."),G(Hi,ug,!0)),Hi._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new tnt;this._port=e;const n=`fake${Ea(Hi,DE)._++}`,s=new b_(n+"_worker",n,e);t.setup(s,e),this._messageHandler=new b_(n,n+"_worker",e),V(this,wv,q4).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=x(Hi,hg))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=x(this,hg))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Hi(t)}static get workerSrc(){if(Wh.workerSrc)return Wh.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Hn(this,"_setupFakeWorkerGlobal",(async()=>x(this,Rv,Y4)?x(this,Rv,Y4):(await import(this.workerSrc)).WorkerMessageHandler)())}};DE=new WeakMap,ug=new WeakMap,hg=new WeakMap,wv=new WeakSet,q4=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Rv=new WeakSet,Y4=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},W(Hi,Rv),W(Hi,DE,0),W(Hi,ug,!1),W(Hi,hg),ra&&(G(Hi,ug,!0),Wh.workerSrc||(Wh.workerSrc="./pdf.worker.mjs")),Hi._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const s=new URL(e,n);return n.origin===s.origin},Hi._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let nv=Hi;var Oh,wu,Lv,Dv,Ru,fg,S_;class ent{constructor(t,e,n,s,r){W(this,fg);W(this,Oh,new Map);W(this,wu,new Map);W(this,Lv,new Map);W(this,Dv,new Map);W(this,Ru,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new NI,this.fontLoader=new Ktt({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Hn(this,"annotationStorage",new L7)}getRenderingIntent(t,e=yd.ENABLE,n=null,s=!1,r=!1){let a=Fo.DISPLAY,l=vC;switch(t){case"any":a=Fo.ANY;break;case"display":break;case"print":a=Fo.PRINT;break;default:An(`getRenderingIntent - invalid intent: ${t}`)}const u=a&Fo.PRINT&&n instanceof hI?n:this.annotationStorage;switch(e){case yd.DISABLE:a+=Fo.ANNOTATIONS_DISABLE;break;case yd.ENABLE:break;case yd.ENABLE_FORMS:a+=Fo.ANNOTATIONS_FORMS;break;case yd.ENABLE_STORAGE:a+=Fo.ANNOTATIONS_STORAGE,l=u.serializable;break;default:An(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(a+=Fo.IS_EDITING),r&&(a+=Fo.OPLIST);const{ids:f,hash:m}=u.modifiedIds,g=[a,l.hash,m];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:l,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=x(this,Ru))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of x(this,wu).values())t.push(s._destroy());x(this,wu).clear(),x(this,Lv).clear(),x(this,Dv).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),x(this,Oh).clear(),this.filterFactory.destroy(),TC.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new h0("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{Xs(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){s.close();return}Xs(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:a}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=u=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:u.loaded,total:u.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:a}}),t.on("GetRangeReader",(n,s)=>{Xs(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:a,done:l}){if(l){s.close();return}Xs(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{r.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new Zet(n,this))}),t.on("DocException",function(n){let s;switch(n.name){case"PasswordException":s=new W5(n.message,n.code);break;case"InvalidPDFException":s=new PN(n.message);break;case"MissingPDFException":s=new u0(n.message);break;case"UnexpectedResponseException":s=new UM(n.message,n.status);break;case"UnknownErrorException":s=new K5(n.message,n.details);break;default:Oi("DocException - expected a valid Error.")}e._capability.reject(s)}),t.on("PasswordRequest",n=>{if(G(this,Ru,Promise.withResolvers()),e.onPassword){const s=r=>{r instanceof Error?x(this,Ru).reject(r):x(this,Ru).resolve({password:r})};try{e.onPassword(s,n.code)}catch(r){x(this,Ru).reject(r)}}else x(this,Ru).reject(new W5(n.message,n.code));return x(this,Ru).promise}),t.on("DataLoaded",n=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;x(this,wu).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,r])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:l,fontExtraProperties:u,pdfBug:f}=this._params;if("error"in r){const _=r.error;An(`Error during font loading: ${_}`),this.commonObjs.resolve(n,_);break}const m=f&&((a=globalThis.FontInspector)!=null&&a.enabled)?(_,b)=>globalThis.FontInspector.fontAdded(_,b):null,g=new Jtt(r,{disableFontFace:l,inspectFont:m});this.fontLoader.bind(g).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u&&g.data&&(g.data=null),this.commonObjs.resolve(n,g)});break;case"CopyLocalImage":const{imageRef:v}=r;Xs(v,"The imageRef must be defined.");for(const _ of x(this,wu).values())for(const[,b]of _.objs)if((b==null?void 0:b.ref)===v)return b.dataLen?(this.commonObjs.resolve(n,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,r,a])=>{var u;if(this.destroyed)return;const l=x(this,wu).get(s);if(!l.objs.has(n)){if(l._intentStates.size===0){(u=a==null?void 0:a.bitmap)==null||u.close();return}switch(r){case"Image":l.objs.resolve(n,a),(a==null?void 0:a.dataLen)>Mtt&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&An("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=x(this,Lv).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&x(this,Dv).set(r.refStr,t);const a=new $et(e,r,this,this._params.pdfBug);return x(this,wu).set(e,a),a});return x(this,Lv).set(e,s),s}getPageIndex(t){return k9(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return V(this,fg,S_).call(this,"GetFieldObjects")}hasJSActions(){return V(this,fg,S_).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return V(this,fg,S_).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return V(this,fg,S_).call(this,"GetOptionalContentConfig").then(e=>new Aet(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=x(this,Oh).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,a;return{info:s[0],metadata:s[1]?new yet(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return x(this,Oh).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of x(this,wu).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),x(this,Oh).clear(),this.filterFactory.destroy(!0),TC.cleanup()}}cachedPageNumber(t){if(!k9(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return x(this,Dv).get(e)??null}}Oh=new WeakMap,wu=new WeakMap,Lv=new WeakMap,Dv=new WeakMap,Ru=new WeakMap,fg=new WeakSet,S_=function(t,e=null){const n=x(this,Oh).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return x(this,Oh).set(t,s),s};const b4=Symbol("INITIAL_DATA");var gc,qA,LC;class NI{constructor(){W(this,qA);W(this,gc,Object.create(null))}get(t,e=null){if(e){const s=V(this,qA,LC).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=x(this,gc)[t];if(!n||n.data===b4)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=x(this,gc)[t];return!!e&&e.data!==b4}resolve(t,e=null){const n=V(this,qA,LC).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in x(this,gc)){const{data:n}=x(this,gc)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}G(this,gc,Object.create(null))}*[Symbol.iterator](){for(const t in x(this,gc)){const{data:e}=x(this,gc)[t];e!==b4&&(yield[t,e])}}}gc=new WeakMap,qA=new WeakSet,LC=function(t){var e;return(e=x(this,gc))[t]||(e[t]={...Promise.withResolvers(),data:b4})};var Id;class nnt{constructor(t){W(this,Id,null);G(this,Id,t),this.onContinue=null}get promise(){return x(this,Id).capability.promise}cancel(t=0){x(this,Id).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=x(this,Id).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=x(this,Id);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Id=new WeakMap;var Ud,dg;const Dm=class Dm{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:l,canvasFactory:u,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:g=!1,pageColors:v=null}){W(this,Ud,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=u,this.filterFactory=f,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new nnt(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,u;if(this.cancelled)return;if(this._canvas){if(x(Dm,dg).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");x(Dm,dg).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:r,background:a}=this.params;this.gfx=new ev(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),x(this,Ud)&&(window.cancelAnimationFrame(x(this,Ud)),G(this,Ud,null)),x(Dm,dg).delete(this._canvas),this.callback(t||new T7(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?G(this,Ud,window.requestAnimationFrame(()=>{G(this,Ud,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),x(Dm,dg).delete(this._canvas),this.callback())))}};Ud=new WeakMap,dg=new WeakMap,W(Dm,dg,new WeakSet);let DC=Dm;const int="4.8.69",snt="3634dab10";function V9(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function c_(i){return Math.max(0,Math.min(255,255*i))}class Q9{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=c_(t),[t,t,t]}static G_HTML([t]){const e=V9(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(c_)}static RGB_HTML(t){return`#${t.map(V9).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[c_(1-Math.min(1,t+s)),c_(1-Math.min(1,n+s)),c_(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,r=1-e,a=1-n,l=Math.min(s,r,a);return["CMYK",s,r,a,l]}}class rnt{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Oi("Abstract method `_createSVG` called.")}}class I7 extends rnt{_createSVG(t){return document.createElementNS(_h,t)}}class II{static setupStorage(t,e,n,s,r){const a=s.getValue(e,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?t.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{s.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const l of n.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const u=l.target.options,f=u.selectedIndex===-1?"":u[u.selectedIndex].value;s.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:r}){const{attributes:a}=e,l=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[u,f]of Object.entries(a))if(f!=null)switch(u){case"class":f.length&&t.setAttribute(u,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!l||u!=="href"&&u!=="newWindow")&&t.setAttribute(u,f)}l&&r.addLinkAttributes(t,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(t,a.dataId,e,n)}static render(t){var g,v;const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,r=t.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:r,linkService:n});const l=r!=="richText",u=t.div;if(u.append(a),t.viewport){const _=`matrix(${t.viewport.transform.join(",")})`;u.style.transform=_}l&&u.setAttribute("class","xfaLayer xfaFont");const f=[];if(s.children.length===0){if(s.value){const _=document.createTextNode(s.value);a.append(_),l&&uA.shouldBuildText(s.name)&&f.push(_)}return{textDivs:f}}const m=[[s,-1,a]];for(;m.length>0;){const[_,b,C]=m.at(-1);if(b+1===_.children.length){m.pop();continue}const M=_.children[++m.at(-1)[1]];if(M===null)continue;const{name:S}=M;if(S==="#text"){const D=document.createTextNode(M.value);f.push(D),C.append(D);continue}const R=(g=M==null?void 0:M.attributes)!=null&&g.xmlns?document.createElementNS(M.attributes.xmlns,S):document.createElement(S);if(C.append(R),M.attributes&&this.setAttributes({html:R,element:M,storage:e,intent:r,linkService:n}),((v=M.children)==null?void 0:v.length)>0)m.push([M,-1,R]);else if(M.value){const D=document.createTextNode(M.value);l&&uA.shouldBuildText(S)&&f.push(D),R.append(D)}}for(const _ of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Vx=1e3,ant=9,$g=new WeakSet;function ef(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class ont{static create(t){switch(t.data.annotationType){case ks.LINK:return new UI(t);case ks.TEXT:return new lnt(t);case ks.WIDGET:switch(t.data.fieldType){case"Tx":return new cnt(t);case"Btn":return t.data.radioButton?new HI(t):t.data.checkBox?new hnt(t):new fnt(t);case"Ch":return new dnt(t);case"Sig":return new unt(t)}return new f0(t);case ks.POPUP:return new OC(t);case ks.FREETEXT:return new QI(t);case ks.LINE:return new mnt(t);case ks.SQUARE:return new gnt(t);case ks.CIRCLE:return new vnt(t);case ks.POLYLINE:return new jI(t);case ks.CARET:return new _nt(t);case ks.INK:return new U7(t);case ks.POLYGON:return new ynt(t);case ks.HIGHLIGHT:return new XI(t);case ks.UNDERLINE:return new Ant(t);case ks.SQUIGGLY:return new xnt(t);case ks.STRIKEOUT:return new bnt(t);case ks.STAMP:return new qI(t);case ks.FILEATTACHMENT:return new Snt(t);default:return new vs(t)}}}var pg,Bv,Ov,YA,BC;const G7=class G7{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){W(this,YA);W(this,pg,null);W(this,Bv,!1);W(this,Ov,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return G7._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;x(this,pg)||G(this,pg,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&V(this,YA,BC).call(this,e),(n=x(this,Ov))==null||n.popup.updateEdited(t)}resetEdited(){var t;x(this,pg)&&(V(this,YA,BC).call(this,x(this,pg).rect),(t=x(this,Ov))==null||t.popup.resetEdited(),G(this,pg,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof f0||(r.tabIndex=Vx);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof OC){const{rotation:C}=e;return!e.hasOwnCanvas&&C!==0&&this.setRotation(C,r),r}const{width:l,height:u}=ef(e.rect);if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const C=e.borderStyle.horizontalCornerRadius,M=e.borderStyle.verticalCornerRadius;if(C>0||M>0){const R=`calc(${C}px * var(--scale-factor)) / calc(${M}px * var(--scale-factor))`;a.borderRadius=R}else if(this instanceof HI){const R=`calc(${l}px * var(--scale-factor)) / calc(${u}px * var(--scale-factor))`;a.borderRadius=R}switch(e.borderStyle.style){case o_.SOLID:a.borderStyle="solid";break;case o_.DASHED:a.borderStyle="dashed";break;case o_.BEVELED:An("Unimplemented border style: beveled");break;case o_.INSET:An("Unimplemented border style: inset");break;case o_.UNDERLINE:a.borderBottomStyle="solid";break}const S=e.borderColor||null;S?(G(this,Bv,!0),a.borderColor=Le.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):a.borderWidth=0}const f=Le.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:g,pageX:v,pageY:_}=s.rawDims;a.left=`${100*(f[0]-v)/m}%`,a.top=`${100*(f[1]-_)/g}%`;const{rotation:b}=e;return e.hasOwnCanvas||b===0?(a.width=`${100*l/m}%`,a.height=`${100*u/g}%`):this.setRotation(b,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:a}=ef(this.data.rect);let l,u;t%180===0?(l=100*r/n,u=100*a/s):(l=100*a/n,u=100*r/s),e.style.width=`${l}%`,e.style.height=`${u}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const r=s.detail[e],a=r[0],l=r.slice(1);s.target.style[n]=Q9[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:Q9[`${a}_rgb`](l)})};return Hn(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||n[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,r]of Object.entries(e)){const a=n[s];if(a){const l={detail:{[s]:r},target:t};a(l),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,r]=this.data.rect.map(C=>Math.fround(C));if(t.length===8){const[C,M,S,R]=t.subarray(2,6);if(s===C&&r===M&&e===S&&n===R)return}const{style:a}=this.container;let l;if(x(this,Bv)){const{borderColor:C,borderWidth:M}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${M}">`],this.container.classList.add("hasBorder")}const u=s-e,f=r-n,{svgFactory:m}=this,g=m.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0);const v=m.createElement("defs");g.append(v);const _=m.createElement("clipPath"),b=`clippath_${this.data.id}`;_.setAttribute("id",b),_.setAttribute("clipPathUnits","objectBoundingBox"),v.append(_);for(let C=2,M=t.length;C<M;C+=8){const S=t[C],R=t[C+1],D=t[C+2],B=t[C+3],N=m.createElement("rect"),I=(D-e)/u,F=(r-R)/f,z=(S-D)/u,U=(R-B)/f;N.setAttribute("x",I),N.setAttribute("y",F),N.setAttribute("width",z),N.setAttribute("height",U),_.append(N),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${F}" width="${z}" height="${U}"/>`)}x(this,Bv)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(g),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{data:t}=this,e=G(this,Ov,new OC({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Oi("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:a,exportValues:l}of s){if(r===-1||a===e)continue;const u=typeof l=="string"?l:null,f=document.querySelector(`[data-element-id="${a}"]`);if(f&&!$g.has(f)){An(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:u,domElement:f})}return n}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,a=s.getAttribute("data-element-id");a!==e&&$g.has(s)&&n.push({id:a,exportValue:r,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};pg=new WeakMap,Bv=new WeakMap,Ov=new WeakMap,YA=new WeakSet,BC=function(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:l,pageY:u}}}}=this;n==null||n.splice(0,4,...t);const{width:f,height:m}=ef(t);e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(a-t[3]+u)/a}%`,s===0?(e.width=`${100*f/r}%`,e.height=`${100*m/a}%`):this.setRotation(s)};let vs=G7;var Ho,Mm,PI,FI;class UI extends vs{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});W(this,Ho);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action),r=!0):e.attachment?(V(this,Ho,PI).call(this,s,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(V(this,Ho,FI).call(this,s,e.setOCGState),r=!0):e.dest?(this._bindLink(s,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&V(this,Ho,Mm).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),V(this,Ho,Mm).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const a=s.get(r);a&&(e[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),V(this,Ho,Mm).call(this)}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),V(this,Ho,Mm).call(this),!this._fieldObjects){An('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var g;s==null||s();const{fields:r,refs:a,include:l}=n,u=[];if(r.length!==0||a.length!==0){const v=new Set(a);for(const _ of r){const b=this._fieldObjects[_]||[];for(const{id:C}of b)v.add(C)}for(const _ of Object.values(this._fieldObjects))for(const b of _)v.has(b.id)===l&&u.push(b)}else for(const v of Object.values(this._fieldObjects))u.push(...v);const f=this.annotationStorage,m=[];for(const v of u){const{id:_}=v;switch(m.push(_),v.type){case"text":{const C=v.defaultValue||"";f.setValue(_,{value:C});break}case"checkbox":case"radiobutton":{const C=v.defaultValue===v.exportValues;f.setValue(_,{value:C});break}case"combobox":case"listbox":{const C=v.defaultValue||"";f.setValue(_,{value:C});break}default:continue}const b=document.querySelector(`[data-element-id="${_}"]`);if(b){if(!$g.has(b)){An(`_bindResetFormAction - element not allowed: ${_}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Ho=new WeakSet,Mm=function(){this.container.setAttribute("data-internal-link","")},PI=function(e,n,s=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,s),!1},V(this,Ho,Mm).call(this)},FI=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),V(this,Ho,Mm).call(this)};class lnt extends vs{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class f0 extends vs{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ia.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,r){n.includes("mouse")?t.addEventListener(n,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(n,a=>{var l;if(n==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a)}}))})}_setEventListeners(t,e,n,s){var r,a,l;for(const[u,f]of n)(f==="Action"||(r=this.data.actions)!=null&&r[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,u,f,s),f==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Le.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||ant,r=t.style;let a;const l=2,u=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-l),m=Math.round(f/(t5*s))||1,g=f/m;a=Math.min(s,u(g/t5))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(s,u(f/t5))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=Le.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class cnt extends f0{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=n),r.setValue(a.id,{[s]:n})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let l=a.value||"";const u=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;u&&l.length>u&&(l=l.slice(0,u));let f=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const m={userValue:l,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",f??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),$g.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Vx,this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",v=>{t.setValue(e,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",v=>{const _=this.data.defaultFieldValue??"";n.value=m.userValue=_,m.formattedValue=null});let g=v=>{const{formattedValue:_}=m;_!=null&&(v.target.value=_),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",_=>{var C;if(m.focused)return;const{target:b}=_;m.userValue&&(b.value=m.userValue),m.lastCommittedValue=b.value,m.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const b={value(C){m.userValue=C.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),C.target.value=m.userValue},formattedValue(C){const{formattedValue:M}=C.detail;m.formattedValue=M,M!=null&&C.target!==document.activeElement&&(C.target.value=M),t.setValue(e,{formattedValue:M})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var D;const{charLimit:M}=C.detail,{target:S}=C;if(M===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",M);let R=m.userValue;!R||R.length<=M||(R=R.slice(0,M),S.value=m.userValue=R,t.setValue(e,{value:R}),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(b,_)}),n.addEventListener("keydown",_=>{var M;m.commitKey=1;let b=-1;if(_.key==="Escape"?b=0:_.key==="Enter"&&!this.data.multiLine?b=2:_.key==="Tab"&&(m.commitKey=3),b===-1)return;const{value:C}=_.target;m.lastCommittedValue!==C&&(m.lastCommittedValue=C,m.userValue=C,(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:b,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const v=g;g=null,n.addEventListener("blur",_=>{var C,M;if(!m.focused||!_.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(m.focused=!1);const{value:b}=_.target;m.userValue=b,m.lastCommittedValue!==b&&((M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:m.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}})),v(_)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",_=>{var N;m.lastCommittedValue=null;const{data:b,target:C}=_,{value:M,selectionStart:S,selectionEnd:R}=C;let D=S,B=R;switch(_.inputType){case"deleteWordBackward":{const I=M.substring(0,S).match(/\w*[^\w]*$/);I&&(D-=I[0].length);break}case"deleteWordForward":{const I=M.substring(S).match(/^[^\w]*\w*/);I&&(B+=I[0].length);break}case"deleteContentBackward":S===R&&(D-=1);break;case"deleteContentForward":S===R&&(B+=1);break}_.preventDefault(),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,change:b||"",willCommit:!1,selStart:D,selEnd:B}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing=`calc(${_}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class unt extends f0{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class hnt extends f0{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return $g.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Vx,r.addEventListener("change",a=>{const{name:l,checked:u}=a.target;for(const f of this._getElementsByName(l,n)){const m=u&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(n,{value:u})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue||"Off";a.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const l={value(u){u.target.checked=u.detail.value!=="Off",t.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class HI extends f0{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const a of this._getElementsByName(e.fieldName,n))t.setValue(a.id,{value:!1});const r=document.createElement("input");if($g.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=Vx,r.addEventListener("change",a=>{const{name:l,checked:u}=a.target;for(const f of this._getElementsByName(l,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:u})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue;a.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const u={value:f=>{const m=a===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const v=m&&g.id===n;g.domElement&&(g.domElement.checked=v),t.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class fnt extends UI{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class dnt extends f0{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");$g.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Vx;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",m=>{const g=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===g});for(const m of this.data.options){const g=document.createElement("option");g.textContent=m.displayValue,g.value=m.exportValue,n.value.includes(m.exportValue)&&(g.setAttribute("selected",!0),r=!1),s.append(g)}let a=null;if(r){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),s.prepend(m),a=()=>{m.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const l=m=>{const g=m?"value":"textContent",{options:v,multiple:_}=s;return _?Array.prototype.filter.call(v,b=>b.selected).map(b=>b[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let u=l(!1);const f=m=>{const g=m.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",m=>{const g={value(v){a==null||a();const _=v.detail.value,b=new Set(Array.isArray(_)?_:[_]);for(const C of s.options)C.selected=b.has(C.value);t.setValue(e,{value:l(!0)}),u=l(!1)},multipleSelection(v){s.multiple=!0},remove(v){const _=s.options,b=v.detail.remove;_[b].selected=!1,s.remove(b),_.length>0&&Array.prototype.findIndex.call(_,M=>M.selected)===-1&&(_[0].selected=!0),t.setValue(e,{value:l(!0),items:f(v)}),u=l(!1)},clear(v){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),u=l(!1)},insert(v){const{index:_,displayValue:b,exportValue:C}=v.detail.insert,M=s.children[_],S=document.createElement("option");S.textContent=b,S.value=C,M?M.before(S):s.append(S),t.setValue(e,{value:l(!0),items:f(v)}),u=l(!1)},items(v){const{items:_}=v.detail;for(;s.length!==0;)s.remove(0);for(const b of _){const{displayValue:C,exportValue:M}=b,S=document.createElement("option");S.textContent=C,S.value=M,s.append(S)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:l(!0),items:f(v)}),u=l(!1)},indices(v){const _=new Set(v.detail.indices);for(const b of v.target.options)b.selected=_.has(b.index);t.setValue(e,{value:l(!0)}),u=l(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,m)}),s.addEventListener("input",m=>{var _;const g=l(!0),v=l(!1);t.setValue(e,{value:g}),m.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:u,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):s.addEventListener("input",function(m){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class OC extends vs{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:vs._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new pnt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${M7}${n}`).join(",")),this.container}}var Nv,BE,OE,Iv,mg,ss,Nh,Uv,WA,KA,Pv,Ih,vc,Uh,JA,Ph,ZA,gg,vg,Ai,W4,NC,zI,GI,kI,VI,K4,J4,IC;class pnt{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:r,contentsObj:a,richText:l,parent:u,rect:f,parentRect:m,open:g}){W(this,Ai);W(this,Nv,V(this,Ai,kI).bind(this));W(this,BE,V(this,Ai,IC).bind(this));W(this,OE,V(this,Ai,J4).bind(this));W(this,Iv,V(this,Ai,K4).bind(this));W(this,mg,null);W(this,ss,null);W(this,Nh,null);W(this,Uv,null);W(this,WA,null);W(this,KA,null);W(this,Pv,null);W(this,Ih,!1);W(this,vc,null);W(this,Uh,null);W(this,JA,null);W(this,Ph,null);W(this,ZA,null);W(this,gg,null);W(this,vg,!1);var v;G(this,ss,t),G(this,ZA,s),G(this,Nh,a),G(this,Ph,l),G(this,KA,u),G(this,mg,e),G(this,JA,f),G(this,Pv,m),G(this,WA,n),G(this,Uv,w7.toDateObject(r)),this.trigger=n.flatMap(_=>_.getElementsToTriggerPopup());for(const _ of this.trigger)_.addEventListener("click",x(this,Iv)),_.addEventListener("mouseenter",x(this,OE)),_.addEventListener("mouseleave",x(this,BE)),_.classList.add("popupTriggerArea");for(const _ of n)(v=_.container)==null||v.addEventListener("keydown",x(this,Nv));x(this,ss).hidden=!0,g&&V(this,Ai,K4).call(this)}render(){if(x(this,vc))return;const t=G(this,vc,document.createElement("div"));if(t.className="popup",x(this,mg)){const r=t.style.outlineColor=Le.makeHexColor(...x(this,mg));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=Le.makeHexColor(...x(this,mg).map(l=>Math.floor(.7*(255-l)+l)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=x(this,ZA),t.append(e),x(this,Uv)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:x(this,Uv).valueOf()})),e.append(r)}const s=x(this,Ai,W4);if(s)II.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(x(this,Nh));t.append(r)}x(this,ss).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const l=s[r];n.append(document.createTextNode(l)),r<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;x(this,gg)||G(this,gg,{contentsObj:x(this,Nh),richText:x(this,Ph)}),t&&G(this,Uh,null),e&&(G(this,Ph,V(this,Ai,GI).call(this,e)),G(this,Nh,null)),(n=x(this,vc))==null||n.remove(),G(this,vc,null)}resetEdited(){var t;x(this,gg)&&({contentsObj:Ea(this,Nh)._,richText:Ea(this,Ph)._}=x(this,gg),G(this,gg,null),(t=x(this,vc))==null||t.remove(),G(this,vc,null),G(this,Uh,null))}forceHide(){G(this,vg,this.isVisible),x(this,vg)&&(x(this,ss).hidden=!0)}maybeShow(){x(this,vg)&&(x(this,vc)||V(this,Ai,J4).call(this),G(this,vg,!1),x(this,ss).hidden=!1)}get isVisible(){return x(this,ss).hidden===!1}}Nv=new WeakMap,BE=new WeakMap,OE=new WeakMap,Iv=new WeakMap,mg=new WeakMap,ss=new WeakMap,Nh=new WeakMap,Uv=new WeakMap,WA=new WeakMap,KA=new WeakMap,Pv=new WeakMap,Ih=new WeakMap,vc=new WeakMap,Uh=new WeakMap,JA=new WeakMap,Ph=new WeakMap,ZA=new WeakMap,gg=new WeakMap,vg=new WeakMap,Ai=new WeakSet,W4=function(){const t=x(this,Ph),e=x(this,Nh);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&x(this,Ph).html||null},NC=function(){var t,e,n;return((n=(e=(t=x(this,Ai,W4))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},zI=function(){var t,e,n;return((n=(e=(t=x(this,Ai,W4))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},GI=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:x(this,Ai,zI),fontSize:x(this,Ai,NC)?`calc(${x(this,Ai,NC)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return n},kI=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&x(this,Ih))&&V(this,Ai,K4).call(this)},VI=function(){if(x(this,Uh)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:r}}}=x(this,KA);let a=!!x(this,Pv),l=a?x(this,Pv):x(this,JA);for(const b of x(this,WA))if(!l||Le.intersect(b.data.rect,l)!==null){l=b.data.rect,a=!0;break}const u=Le.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),m=a?l[2]-l[0]+5:0,g=u[0]+m,v=u[1];G(this,Uh,[100*(g-s)/e,100*(v-r)/n]);const{style:_}=x(this,ss);_.left=`${x(this,Uh)[0]}%`,_.top=`${x(this,Uh)[1]}%`},K4=function(){G(this,Ih,!x(this,Ih)),x(this,Ih)?(V(this,Ai,J4).call(this),x(this,ss).addEventListener("click",x(this,Iv)),x(this,ss).addEventListener("keydown",x(this,Nv))):(V(this,Ai,IC).call(this),x(this,ss).removeEventListener("click",x(this,Iv)),x(this,ss).removeEventListener("keydown",x(this,Nv)))},J4=function(){x(this,vc)||this.render(),this.isVisible?x(this,Ih)&&x(this,ss).classList.add("focused"):(V(this,Ai,VI).call(this),x(this,ss).hidden=!1,x(this,ss).style.zIndex=parseInt(x(this,ss).style.zIndex)+1e3)},IC=function(){x(this,ss).classList.remove("focused"),!(x(this,Ih)||!this.isVisible)&&(x(this,ss).hidden=!0,x(this,ss).style.zIndex=parseInt(x(this,ss).style.zIndex)-1e3)};class QI extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=dn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var $A;class mnt extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,$A,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:s}=ef(e.rect),r=this.svgFactory.create(n,s,!0),a=G(this,$A,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,$A)}addHighlightArea(){this.container.classList.add("highlightArea")}}$A=new WeakMap;var tx;class gnt extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,tx,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:s}=ef(e.rect),r=this.svgFactory.create(n,s,!0),a=e.borderStyle.width,l=G(this,tx,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",n-a),l.setAttribute("height",s-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,tx)}addHighlightArea(){this.container.classList.add("highlightArea")}}tx=new WeakMap;var ex;class vnt extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,ex,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:s}=ef(e.rect),r=this.svgFactory.create(n,s,!0),a=e.borderStyle.width,l=G(this,ex,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",s/2),l.setAttribute("rx",n/2-a/2),l.setAttribute("ry",s/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,ex)}addHighlightArea(){this.container.classList.add("highlightArea")}}ex=new WeakMap;var nx;class jI extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,nx,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:r}}=this;if(!n)return this.container;const{width:a,height:l}=ef(e),u=this.svgFactory.create(a,l,!0);let f=[];for(let g=0,v=n.length;g<v;g+=2){const _=n[g]-e[0],b=e[3]-n[g+1];f.push(`${_},${b}`)}f=f.join(" ");const m=G(this,nx,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",f),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),u.append(m),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,nx)}addHighlightArea(){this.container.classList.add("highlightArea")}}nx=new WeakMap;class ynt extends jI{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class _nt extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var ix;class U7 extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,ix,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?dn.HIGHLIGHT:dn.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:n,borderStyle:s,popupRef:r}}=this,{width:a,height:l}=ef(e),u=this.svgFactory.create(a,l,!0);for(const f of n){let m=[];for(let v=0,_=f.length;v<_;v+=2){const b=f[v]-e[0],C=e[3]-f[v+1];m.push(`${b},${C}`)}m=m.join(" ");const g=this.svgFactory.createElement(this.svgElementName);x(this,ix).push(g),g.setAttribute("points",m),g.setAttribute("stroke-width",s.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),u.append(g)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return x(this,ix)}addHighlightArea(){this.container.classList.add("highlightArea")}}ix=new WeakMap;class XI extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=dn.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Ant extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class xnt extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class bnt extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class qI extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=dn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var sx,rx,UC;class Snt extends vs{constructor(e){var s;super(e,{isRenderable:!0});W(this,rx);W(this,sx,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",V(this,rx,UC).bind(this)),G(this,sx,s);const{isMac:r}=Ia.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&V(this,rx,UC).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return x(this,sx)}addHighlightArea(){this.container.classList.add("highlightArea")}}sx=new WeakMap,rx=new WeakSet,UC=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var ax,yg,_g,ox,e0,YI,PC,uD;let Ent=(uD=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:a,structTreeLayer:l}){W(this,e0);W(this,ax,null);W(this,yg,null);W(this,_g,new Map);W(this,ox,null);this.div=t,G(this,ax,e),G(this,yg,n),G(this,ox,l||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return x(this,_g).size>0}async render(t){var a;const{annotations:e}=t,n=this.div;Jg(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new I7,annotationStorage:t.annotationStorage||new L7,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const u=l.annotationType===ks.POPUP;if(u){const g=s.get(l.id);if(!g)continue;r.elements=g}else{const{width:g,height:v}=ef(l.rect);if(g<=0||v<=0)continue}r.data=l;const f=ont.create(r);if(!f.isRenderable)continue;if(!u&&l.popupRef){const g=s.get(l.popupRef);g?g.push(f):s.set(l.popupRef,[f])}const m=f.render();l.hidden&&(m.style.visibility="hidden"),await V(this,e0,YI).call(this,m,l.id),f._isEditable&&(x(this,_g).set(f.data.id,f),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(f))}V(this,e0,PC).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Jg(e,{rotation:t.rotation}),V(this,e0,PC).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(x(this,_g).values())}getEditableAnnotation(t){return x(this,_g).get(t)}},ax=new WeakMap,yg=new WeakMap,_g=new WeakMap,ox=new WeakMap,e0=new WeakSet,YI=async function(t,e){var a,l;const n=t.firstChild||t,s=n.id=`${M7}${e}`,r=await((a=x(this,ox))==null?void 0:a.getAriaAttributes(s));if(r)for(const[u,f]of r)n.setAttribute(u,f);this.div.append(t),(l=x(this,ax))==null||l.moveElementInDOM(this.div,t,n,!1)},PC=function(){if(!x(this,yg))return;const t=this.div;for(const[e,n]of x(this,yg)){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):s.append(n)}x(this,yg).clear()},uD);const S4=/\r\n?|\n/g;var yc,Bo,lx,Ag,Oo,Ls,WI,KI,JI,Z4,sf,$4,t3,ZI,HC,$I;const Ci=class Ci extends di{constructor(e){super({...e,name:"freeTextEditor"});W(this,Ls);W(this,yc);W(this,Bo,"");W(this,lx,`${this.id}-editor`);W(this,Ag,null);W(this,Oo);G(this,yc,e.color||Ci._defaultColor||di._defaultLineColor),G(this,Oo,e.fontSize||Ci._defaultFontSize)}static get _keyboardManager(){const e=Ci.prototype,n=a=>a.isEmpty(),s=Zg.TRANSLATE_SMALL,r=Zg.TRANSLATE_BIG;return Hn(this,"_keyboardManager",new kx([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){di.initialize(e,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Ze.FREETEXT_SIZE:Ci._defaultFontSize=n;break;case Ze.FREETEXT_COLOR:Ci._defaultColor=n;break}}updateParams(e,n){switch(e){case Ze.FREETEXT_SIZE:V(this,Ls,WI).call(this,n);break;case Ze.FREETEXT_COLOR:V(this,Ls,KI).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ze.FREETEXT_SIZE,Ci._defaultFontSize],[Ze.FREETEXT_COLOR,Ci._defaultColor||di._defaultLineColor]]}get propertiesToUpdate(){return[[Ze.FREETEXT_SIZE,x(this,Oo)],[Ze.FREETEXT_COLOR,x(this,yc)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ci._internalPadding*e,-(Ci._internalPadding+x(this,Oo))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(dn.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),G(this,Ag,new AbortController);const e=this._uiManager.combinedSignal(x(this,Ag));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",x(this,lx)),this._isDraggable=!0,(e=x(this,Ag))==null||e.abort(),G(this,Ag,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=x(this,Bo),n=G(this,Bo,V(this,Ls,JI).call(this).trimEnd());if(e===n)return;const s=r=>{if(G(this,Bo,r),!r){this.remove();return}V(this,Ls,t3).call(this),this._uiManager.rebuild(this),V(this,Ls,Z4).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),V(this,Ls,Z4).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ci._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",x(this,lx)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${x(this,Oo)}px * var(--scale-factor))`,s.color=x(this,yc),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),pE(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,f]=this.getInitialTranslation();[u,f]=this.pageTranslationToScreen(u,f);const[m,g]=this.pageDimensions,[v,_]=this.pageTranslation;let b,C;switch(this.rotation){case 0:b=e+(l[0]-v)/m,C=n+this.height-(l[1]-_)/g;break;case 90:b=e+(l[0]-v)/m,C=n-(l[1]-_)/g,[u,f]=[f,-u];break;case 180:b=e-this.width+(l[0]-v)/m,C=n-(l[1]-_)/g,[u,f]=[-u,-f];break;case 270:b=e+(l[0]-v-this.height*g)/m,C=n+(l[1]-_-this.width*m)/g,[u,f]=[-f,u];break}this.setAt(b*r,C*a,u,f)}else this.setAt(e*r,n*a,this.width*r,this.height*a);V(this,Ls,t3).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var b,C,M;const n=e.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=V(b=Ci,sf,HC).call(b,n.getData("text")||"").replaceAll(S4,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:u,startOffset:f}=l,m=[],g=[];if(u.nodeType===Node.TEXT_NODE){const S=u.parentElement;if(g.push(u.nodeValue.slice(f).replaceAll(S4,"")),S!==this.editorDiv){let R=m;for(const D of this.editorDiv.childNodes){if(D===S){R=g;continue}R.push(V(C=Ci,sf,$4).call(C,D))}}m.push(u.nodeValue.slice(0,f).replaceAll(S4,""))}else if(u===this.editorDiv){let S=m,R=0;for(const D of this.editorDiv.childNodes)R++===f&&(S=g),S.push(V(M=Ci,sf,$4).call(M,D))}G(this,Bo,`${m.join(`
`)}${r}${g.join(`
`)}`),V(this,Ls,t3).call(this);const v=new Range;let _=m.reduce((S,R)=>S+R.length,0);for(const{firstChild:S}of this.editorDiv.childNodes)if(S.nodeType===Node.TEXT_NODE){const R=S.nodeValue.length;if(_<=R){v.setStart(S,_),v.setEnd(S,_);break}_-=R}a.removeAllRanges(),a.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,s){var l;let r=null;if(e instanceof QI){const{data:{defaultAppearanceData:{fontSize:u,fontColor:f},rect:m,rotation:g,id:v,popupRef:_},textContent:b,textPosition:C,parent:{page:{pageNumber:M}}}=e;if(!b||b.length===0)return null;r=e={annotationType:dn.FREETEXT,color:Array.from(f),fontSize:u,value:b.join(`
`),position:C,pageIndex:M-1,rect:m.slice(0),rotation:g,id:v,deleted:!1,popupRef:_}}const a=await super.deserialize(e,n,s);return G(a,Oo,e.fontSize),G(a,yc,Le.makeHexColor(...e.color)),G(a,Bo,V(l=Ci,sf,HC).call(l,e.value)),a.annotationElementId=e.id||null,a._initialData=r,a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ci._internalPadding*this.parentScale,s=this.getRect(n,n),r=di._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:x(this,yc)),a={annotationType:dn.FREETEXT,color:r,fontSize:x(this,Oo),value:V(this,Ls,ZI).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?a:this.annotationElementId&&!V(this,Ls,$I).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${x(this,Oo)}px * var(--scale-factor))`,s.color=x(this,yc),n.replaceChildren();for(const a of x(this,Bo).split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),n.append(l)}const r=Ci._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:x(this,Bo)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};yc=new WeakMap,Bo=new WeakMap,lx=new WeakMap,Ag=new WeakMap,Oo=new WeakMap,Ls=new WeakSet,WI=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-x(this,Oo))*this.parentScale),G(this,Oo,r),V(this,Ls,Z4).call(this)},s=x(this,Oo);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},KI=function(e){const n=r=>{G(this,yc,this.editorDiv.style.color=r)},s=x(this,yc);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},JI=function(){var s;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(V(s=Ci,sf,$4).call(s,r)),n=r);return e.join(`
`)},Z4=function(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,l=a.style.display,u=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()},sf=new WeakSet,$4=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(S4,"")},t3=function(){if(this.editorDiv.replaceChildren(),!!x(this,Bo))for(const e of x(this,Bo).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},ZI=function(){return x(this,Bo).replaceAll(" "," ")},HC=function(e){return e.replaceAll(" "," ")},$I=function(e){const{value:n,fontSize:s,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((l,u)=>l!==r[u])||e.pageIndex!==a},W(Ci,sf),Je(Ci,"_freeTextDefaultContent",""),Je(Ci,"_internalPadding",0),Je(Ci,"_defaultColor",null),Je(Ci,"_defaultFontSize",10),Je(Ci,"_type","freetext"),Je(Ci,"_editorType",dn.FREETEXT);let FC=Ci;class tU{toSVGPath(){Oi("Abstract method `toSVGPath` must be implemented.")}get box(){Oi("Abstract getter `box` must be implemented.")}serialize(t,e){Oi("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Oi("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Oi("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var No,_c,Fv,Hv,Lu,Mn,xg,bg,cx,ux,zv,Gv,Pd,hx,NE,IE,Ys,E_,eU,nU,iU,sU,rU,aU;const Sh=class Sh{constructor({x:t,y:e},n,s,r,a,l=0){W(this,Ys);W(this,No);W(this,_c,[]);W(this,Fv);W(this,Hv);W(this,Lu,[]);W(this,Mn,new Float64Array(18));W(this,xg);W(this,bg);W(this,cx);W(this,ux);W(this,zv);W(this,Gv);W(this,Pd,[]);G(this,No,n),G(this,Gv,r*s),G(this,Hv,a),x(this,Mn).set([NaN,NaN,NaN,NaN,t,e],6),G(this,Fv,l),G(this,ux,x(Sh,hx)*s),G(this,cx,x(Sh,IE)*s),G(this,zv,s),x(this,Pd).push(t,e)}isEmpty(){return isNaN(x(this,Mn)[8])}add({x:t,y:e}){var U;G(this,xg,t),G(this,bg,e);const[n,s,r,a]=x(this,No);let[l,u,f,m]=x(this,Mn).subarray(8,12);const g=t-f,v=e-m,_=Math.hypot(g,v);if(_<x(this,cx))return!1;const b=_-x(this,ux),C=b/_,M=C*g,S=C*v;let R=l,D=u;l=f,u=m,f+=M,m+=S,(U=x(this,Pd))==null||U.push(t,e);const B=-S/b,N=M/b,I=B*x(this,Gv),F=N*x(this,Gv);return x(this,Mn).set(x(this,Mn).subarray(2,8),0),x(this,Mn).set([f+I,m+F],4),x(this,Mn).set(x(this,Mn).subarray(14,18),12),x(this,Mn).set([f-I,m-F],16),isNaN(x(this,Mn)[6])?(x(this,Lu).length===0&&(x(this,Mn).set([l+I,u+F],2),x(this,Lu).push(NaN,NaN,NaN,NaN,(l+I-n)/r,(u+F-s)/a),x(this,Mn).set([l-I,u-F],14),x(this,_c).push(NaN,NaN,NaN,NaN,(l-I-n)/r,(u-F-s)/a)),x(this,Mn).set([R,D,l,u,f,m],6),!this.isEmpty()):(x(this,Mn).set([R,D,l,u,f,m],6),Math.abs(Math.atan2(D-u,R-l)-Math.atan2(S,M))<Math.PI/2?([l,u,f,m]=x(this,Mn).subarray(2,6),x(this,Lu).push(NaN,NaN,NaN,NaN,((l+f)/2-n)/r,((u+m)/2-s)/a),[l,u,R,D]=x(this,Mn).subarray(14,18),x(this,_c).push(NaN,NaN,NaN,NaN,((R+l)/2-n)/r,((D+u)/2-s)/a),!0):([R,D,l,u,f,m]=x(this,Mn).subarray(0,6),x(this,Lu).push(((R+5*l)/6-n)/r,((D+5*u)/6-s)/a,((5*l+f)/6-n)/r,((5*u+m)/6-s)/a,((l+f)/2-n)/r,((u+m)/2-s)/a),[f,m,l,u,R,D]=x(this,Mn).subarray(12,18),x(this,_c).push(((R+5*l)/6-n)/r,((D+5*u)/6-s)/a,((5*l+f)/6-n)/r,((5*u+m)/6-s)/a,((l+f)/2-n)/r,((u+m)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=x(this,Lu),e=x(this,_c);if(isNaN(x(this,Mn)[6])&&!this.isEmpty())return V(this,Ys,eU).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);V(this,Ys,iU).call(this,n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return V(this,Ys,nU).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,s,r,a){return new oU(t,e,n,s,r,a)}getOutlines(){var g;const t=x(this,Lu),e=x(this,_c),n=x(this,Mn),[s,r,a,l]=x(this,No),u=new Float64Array((((g=x(this,Pd))==null?void 0:g.length)??0)+2);for(let v=0,_=u.length-2;v<_;v+=2)u[v]=(x(this,Pd)[v]-s)/a,u[v+1]=(x(this,Pd)[v+1]-r)/l;if(u[u.length-2]=(x(this,xg)-s)/a,u[u.length-1]=(x(this,bg)-r)/l,isNaN(n[6])&&!this.isEmpty())return V(this,Ys,sU).call(this,u);const f=new Float64Array(x(this,Lu).length+24+x(this,_c).length);let m=t.length;for(let v=0;v<m;v+=2){if(isNaN(t[v])){f[v]=f[v+1]=NaN;continue}f[v]=t[v],f[v+1]=t[v+1]}m=V(this,Ys,aU).call(this,f,m);for(let v=e.length-6;v>=6;v-=6)for(let _=0;_<6;_+=2){if(isNaN(e[v+_])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[v+_],f[m+1]=e[v+_+1],m+=2}return V(this,Ys,rU).call(this,f,m),this.newFreeDrawOutline(f,u,x(this,No),x(this,zv),x(this,Fv),x(this,Hv))}};No=new WeakMap,_c=new WeakMap,Fv=new WeakMap,Hv=new WeakMap,Lu=new WeakMap,Mn=new WeakMap,xg=new WeakMap,bg=new WeakMap,cx=new WeakMap,ux=new WeakMap,zv=new WeakMap,Gv=new WeakMap,Pd=new WeakMap,hx=new WeakMap,NE=new WeakMap,IE=new WeakMap,Ys=new WeakSet,E_=function(){const t=x(this,Mn).subarray(4,6),e=x(this,Mn).subarray(16,18),[n,s,r,a]=x(this,No);return[(x(this,xg)+(t[0]-e[0])/2-n)/r,(x(this,bg)+(t[1]-e[1])/2-s)/a,(x(this,xg)+(e[0]-t[0])/2-n)/r,(x(this,bg)+(e[1]-t[1])/2-s)/a]},eU=function(){const[t,e,n,s]=x(this,No),[r,a,l,u]=V(this,Ys,E_).call(this);return`M${(x(this,Mn)[2]-t)/n} ${(x(this,Mn)[3]-e)/s} L${(x(this,Mn)[4]-t)/n} ${(x(this,Mn)[5]-e)/s} L${r} ${a} L${l} ${u} L${(x(this,Mn)[16]-t)/n} ${(x(this,Mn)[17]-e)/s} L${(x(this,Mn)[14]-t)/n} ${(x(this,Mn)[15]-e)/s} Z`},nU=function(t){const e=x(this,_c);t.push(`L${e[4]} ${e[5]} Z`)},iU=function(t){const[e,n,s,r]=x(this,No),a=x(this,Mn).subarray(4,6),l=x(this,Mn).subarray(16,18),[u,f,m,g]=V(this,Ys,E_).call(this);t.push(`L${(a[0]-e)/s} ${(a[1]-n)/r} L${u} ${f} L${m} ${g} L${(l[0]-e)/s} ${(l[1]-n)/r}`)},sU=function(t){const e=x(this,Mn),[n,s,r,a]=x(this,No),[l,u,f,m]=V(this,Ys,E_).call(this),g=new Float64Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-s)/a,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-s)/a,NaN,NaN,NaN,NaN,l,u,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-s)/a,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-s)/a],0),this.newFreeDrawOutline(g,t,x(this,No),x(this,zv),x(this,Fv),x(this,Hv))},rU=function(t,e){const n=x(this,_c);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},aU=function(t,e){const n=x(this,Mn).subarray(4,6),s=x(this,Mn).subarray(16,18),[r,a,l,u]=x(this,No),[f,m,g,v]=V(this,Ys,E_).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/l,(n[1]-a)/u,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-a)/u],e),e+=24},W(Sh,hx,8),W(Sh,NE,2),W(Sh,IE,x(Sh,hx)+x(Sh,NE));let gE=Sh;var kv,Sg,Fh,fx,Io,dx,ms,ao,M_,T_,lU;class oU extends tU{constructor(e,n,s,r,a,l){super();W(this,ao);W(this,kv);W(this,Sg,null);W(this,Fh);W(this,fx);W(this,Io);W(this,dx);W(this,ms);G(this,ms,e),G(this,Io,n),G(this,kv,s),G(this,dx,r),G(this,Fh,a),G(this,fx,l),V(this,ao,lU).call(this,l);const{x:u,y:f,width:m,height:g}=x(this,Sg);for(let v=0,_=e.length;v<_;v+=2)e[v]=(e[v]-u)/m,e[v+1]=(e[v+1]-f)/g;for(let v=0,_=n.length;v<_;v+=2)n[v]=(n[v]-u)/m,n[v+1]=(n[v+1]-f)/g}toSVGPath(){const e=[`M${x(this,ms)[4]} ${x(this,ms)[5]}`];for(let n=6,s=x(this,ms).length;n<s;n+=6){if(isNaN(x(this,ms)[n])){e.push(`L${x(this,ms)[n+4]} ${x(this,ms)[n+5]}`);continue}e.push(`C${x(this,ms)[n]} ${x(this,ms)[n+1]} ${x(this,ms)[n+2]} ${x(this,ms)[n+3]} ${x(this,ms)[n+4]} ${x(this,ms)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,s,r],a){const l=s-e,u=r-n;let f,m;switch(a){case 0:f=V(this,ao,M_).call(this,x(this,ms),e,r,l,-u),m=V(this,ao,M_).call(this,x(this,Io),e,r,l,-u);break;case 90:f=V(this,ao,T_).call(this,x(this,ms),e,n,l,u),m=V(this,ao,T_).call(this,x(this,Io),e,n,l,u);break;case 180:f=V(this,ao,M_).call(this,x(this,ms),s,n,-l,u),m=V(this,ao,M_).call(this,x(this,Io),s,n,-l,u);break;case 270:f=V(this,ao,T_).call(this,x(this,ms),s,r,-l,-u),m=V(this,ao,T_).call(this,x(this,Io),s,r,-l,-u);break}return{outline:Array.from(f),points:[Array.from(m)]}}get box(){return x(this,Sg)}newOutliner(e,n,s,r,a,l=0){return new gE(e,n,s,r,a,l)}getNewOutline(e,n){const{x:s,y:r,width:a,height:l}=x(this,Sg),[u,f,m,g]=x(this,kv),v=a*m,_=l*g,b=s*m+u,C=r*g+f,M=this.newOutliner({x:x(this,Io)[0]*v+b,y:x(this,Io)[1]*_+C},x(this,kv),x(this,dx),e,x(this,fx),n??x(this,Fh));for(let S=2;S<x(this,Io).length;S+=2)M.add({x:x(this,Io)[S]*v+b,y:x(this,Io)[S+1]*_+C});return M.getOutlines()}get mustRemoveSelfIntersections(){return!0}}kv=new WeakMap,Sg=new WeakMap,Fh=new WeakMap,fx=new WeakMap,Io=new WeakMap,dx=new WeakMap,ms=new WeakMap,ao=new WeakSet,M_=function(e,n,s,r,a){const l=new Float64Array(e.length);for(let u=0,f=e.length;u<f;u+=2)l[u]=n+e[u]*r,l[u+1]=s+e[u+1]*a;return l},T_=function(e,n,s,r,a){const l=new Float64Array(e.length);for(let u=0,f=e.length;u<f;u+=2)l[u]=n+e[u+1]*r,l[u+1]=s+e[u]*a;return l},lU=function(e){const n=x(this,ms);let s=n[4],r=n[5],a=s,l=r,u=s,f=r,m=s,g=r;const v=e?Math.max:Math.min;for(let S=6,R=n.length;S<R;S+=6){if(isNaN(n[S]))a=Math.min(a,n[S+4]),l=Math.min(l,n[S+5]),u=Math.max(u,n[S+4]),f=Math.max(f,n[S+5]),g<n[S+5]?(m=n[S+4],g=n[S+5]):g===n[S+5]&&(m=v(m,n[S+4]));else{const D=Le.bezierBoundingBox(s,r,...n.slice(S,S+6));a=Math.min(a,D[0]),l=Math.min(l,D[1]),u=Math.max(u,D[2]),f=Math.max(f,D[3]),g<D[3]?(m=D[2],g=D[3]):g===D[3]&&(m=v(m,D[2]))}s=n[S+4],r=n[S+5]}const _=a-x(this,Fh),b=l-x(this,Fh),C=u-a+2*x(this,Fh),M=f-l+2*x(this,Fh);G(this,Sg,{x:_,y:b,width:C,height:M,lastPoint:[m,g]})};var px,Fd,Ac,Pa,cU,e3,uU,hU,zC;class j9{constructor(t,e=0,n=0,s=!0){W(this,Pa);W(this,px);W(this,Fd,[]);W(this,Ac,[]);let r=1/0,a=-1/0,l=1/0,u=-1/0;const f=10**-4;for(const{x:M,y:S,width:R,height:D}of t){const B=Math.floor((M-e)/f)*f,N=Math.ceil((M+R+e)/f)*f,I=Math.floor((S-e)/f)*f,F=Math.ceil((S+D+e)/f)*f,z=[B,I,F,!0],U=[N,I,F,!1];x(this,Fd).push(z,U),r=Math.min(r,B),a=Math.max(a,N),l=Math.min(l,I),u=Math.max(u,F)}const m=a-r+2*n,g=u-l+2*n,v=r-n,_=l-n,b=x(this,Fd).at(s?-1:-2),C=[b[0],b[2]];for(const M of x(this,Fd)){const[S,R,D]=M;M[0]=(S-v)/m,M[1]=(R-_)/g,M[2]=(D-_)/g}G(this,px,{x:v,y:_,width:m,height:g,lastPoint:C})}getOutlines(){x(this,Fd).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of x(this,Fd))e[3]?(t.push(...V(this,Pa,zC).call(this,e)),V(this,Pa,uU).call(this,e)):(V(this,Pa,hU).call(this,e),t.push(...V(this,Pa,zC).call(this,e)));return V(this,Pa,cU).call(this,t)}}px=new WeakMap,Fd=new WeakMap,Ac=new WeakMap,Pa=new WeakSet,cU=function(t){const e=[],n=new Set;for(const a of t){const[l,u,f]=a;e.push([l,u,a],[l,f,a])}e.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=e.length;a<l;a+=2){const u=e[a][2],f=e[a+1][2];u.push(f),f.push(u),n.add(u),n.add(f)}const s=[];let r;for(;n.size>0;){const a=n.values().next().value;let[l,u,f,m,g]=a;n.delete(a);let v=l,_=u;for(r=[l,f],s.push(r);;){let b;if(n.has(m))b=m;else if(n.has(g))b=g;else break;n.delete(b),[l,u,f,m,g]=b,v!==l&&(r.push(v,_,l,_===u?u:f),v=l),_=_===u?f:u}r.push(v,_)}return new Mnt(s,x(this,px))},e3=function(t){const e=x(this,Ac);let n=0,s=e.length-1;for(;n<=s;){const r=n+s>>1,a=e[r][0];if(a===t)return r;a<t?n=r+1:s=r-1}return s+1},uU=function([,t,e]){const n=V(this,Pa,e3).call(this,t);x(this,Ac).splice(n,0,[t,e])},hU=function([,t,e]){const n=V(this,Pa,e3).call(this,t);for(let s=n;s<x(this,Ac).length;s++){const[r,a]=x(this,Ac)[s];if(r!==t)break;if(r===t&&a===e){x(this,Ac).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[r,a]=x(this,Ac)[s];if(r!==t)break;if(r===t&&a===e){x(this,Ac).splice(s,1);return}}},zC=function(t){const[e,n,s]=t,r=[[e,n,s]],a=V(this,Pa,e3).call(this,s);for(let l=0;l<a;l++){const[u,f]=x(this,Ac)[l];for(let m=0,g=r.length;m<g;m++){const[,v,_]=r[m];if(!(f<=v||_<=u)){if(v>=u){if(_>f)r[m][1]=f;else{if(g===1)return[];r.splice(m,1),m--,g--}continue}r[m][2]=u,_>f&&r.push([e,f,_])}}}return r};var mx,Vv;class Mnt extends tU{constructor(e,n){super();W(this,mx);W(this,Vv);G(this,Vv,e),G(this,mx,n)}toSVGPath(){const e=[];for(const n of x(this,Vv)){let[s,r]=n;e.push(`M${s} ${r}`);for(let a=2;a<n.length;a+=2){const l=n[a],u=n[a+1];l===s?(e.push(`V${u}`),r=u):u===r&&(e.push(`H${l}`),s=l)}e.push("Z")}return e.join(" ")}serialize([e,n,s,r],a){const l=[],u=s-e,f=r-n;for(const m of x(this,Vv)){const g=new Array(m.length);for(let v=0;v<m.length;v+=2)g[v]=e+m[v]*u,g[v+1]=r-m[v+1]*f;l.push(g)}return l}get box(){return x(this,mx)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}mx=new WeakMap,Vv=new WeakMap;class GC extends gE{newFreeDrawOutline(t,e,n,s,r,a){return new Tnt(t,e,n,s,r,a)}get classNamesForDrawing(){return["highlight","free"]}}class Tnt extends oU{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,e,n,s,r,a=0){return new GC(t,e,n,s,r,a)}}var xc,Eg,Qv,Qs,gx,jv,vx,yx,Hd,bc,Xv,_x,_i,kC,VC,QC,Tm,fU,pd;const to=class to{constructor({editor:t=null,uiManager:e=null}){W(this,_i);W(this,xc,null);W(this,Eg,null);W(this,Qv);W(this,Qs,null);W(this,gx,!1);W(this,jv,!1);W(this,vx,null);W(this,yx);W(this,Hd,null);W(this,bc,null);W(this,Xv);var n;t?(G(this,jv,!1),G(this,Xv,Ze.HIGHLIGHT_COLOR),G(this,vx,t)):(G(this,jv,!0),G(this,Xv,Ze.HIGHLIGHT_DEFAULT_COLOR)),G(this,bc,(t==null?void 0:t._uiManager)||e),G(this,yx,x(this,bc)._eventBus),G(this,Qv,(t==null?void 0:t.color)||((n=x(this,bc))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),x(to,_x)||G(to,_x,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Hn(this,"_keyboardManager",new kx([[["Escape","mac+Escape"],to.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],to.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],to.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],to.prototype._moveToPrevious],[["Home","mac+Home"],to.prototype._moveToBeginning],[["End","mac+End"],to.prototype._moveToEnd]]))}renderButton(){const t=G(this,xc,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=x(this,bc)._signal;t.addEventListener("click",V(this,_i,Tm).bind(this),{signal:e}),t.addEventListener("keydown",V(this,_i,QC).bind(this),{signal:e});const n=G(this,Eg,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=x(this,Qv),t.append(n),t}renderMainDropdown(){const t=G(this,Qs,V(this,_i,kC).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===x(this,xc)){V(this,_i,Tm).call(this,t);return}const e=t.target.getAttribute("data-color");e&&V(this,_i,VC).call(this,e,t)}_moveToNext(t){var e,n;if(!x(this,_i,pd)){V(this,_i,Tm).call(this,t);return}if(t.target===x(this,xc)){(e=x(this,Qs).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=x(this,Qs))==null?void 0:e.firstChild)||t.target===x(this,xc)){x(this,_i,pd)&&this._hideDropdownFromKeyboard();return}x(this,_i,pd)||V(this,_i,Tm).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!x(this,_i,pd)){V(this,_i,Tm).call(this,t);return}(e=x(this,Qs).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!x(this,_i,pd)){V(this,_i,Tm).call(this,t);return}(e=x(this,Qs).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=x(this,Qs))==null||t.classList.add("hidden"),(e=x(this,Hd))==null||e.abort(),G(this,Hd,null)}_hideDropdownFromKeyboard(){var t;if(!x(this,jv)){if(!x(this,_i,pd)){(t=x(this,vx))==null||t.unselect();return}this.hideDropdown(),x(this,xc).focus({preventScroll:!0,focusVisible:x(this,gx)})}}updateColor(t){if(x(this,Eg)&&(x(this,Eg).style.backgroundColor=t),!x(this,Qs))return;const e=x(this,bc).highlightColors.values();for(const n of x(this,Qs).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=x(this,xc))==null||t.remove(),G(this,xc,null),G(this,Eg,null),(e=x(this,Qs))==null||e.remove(),G(this,Qs,null)}};xc=new WeakMap,Eg=new WeakMap,Qv=new WeakMap,Qs=new WeakMap,gx=new WeakMap,jv=new WeakMap,vx=new WeakMap,yx=new WeakMap,Hd=new WeakMap,bc=new WeakMap,Xv=new WeakMap,_x=new WeakMap,_i=new WeakSet,kC=function(){const t=document.createElement("div"),e=x(this,bc)._signal;t.addEventListener("contextmenu",Dl,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of x(this,bc).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",x(to,_x)[n]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=s,r.setAttribute("aria-selected",s===x(this,Qv)),r.addEventListener("click",V(this,_i,VC).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",V(this,_i,QC).bind(this),{signal:e}),t},VC=function(t,e){e.stopPropagation(),x(this,yx).dispatch("switchannotationeditorparams",{source:this,type:x(this,Xv),value:t})},QC=function(t){to._keyboardManager.exec(this,t)},Tm=function(t){if(x(this,_i,pd)){this.hideDropdown();return}if(G(this,gx,t.detail===0),x(this,Hd)||(G(this,Hd,new AbortController),window.addEventListener("pointerdown",V(this,_i,fU).bind(this),{signal:x(this,bc).combinedSignal(x(this,Hd))})),x(this,Qs)){x(this,Qs).classList.remove("hidden");return}const e=G(this,Qs,V(this,_i,kC).call(this));x(this,xc).append(e)},fU=function(t){var e;(e=x(this,Qs))!=null&&e.contains(t.target)||this.hideDropdown()},pd=function(){return x(this,Qs)&&!x(this,Qs).classList.contains("hidden")},W(to,_x,null);let vE=to;var qv,Ax,Hh,Mg,Yv,bl,xx,bx,Tg,Sc,ta,io,Wv,zh,js,Kv,Sl,Sx,un,jC,n3,dU,pU,mU,XC,Cm,Tl,j1,gU,i3,C_,vU,yU,_U,AU,xU;const $n=class $n extends di{constructor(e){super({...e,name:"highlightEditor"});W(this,un);W(this,qv,null);W(this,Ax,0);W(this,Hh);W(this,Mg,null);W(this,Yv,null);W(this,bl,null);W(this,xx,null);W(this,bx,0);W(this,Tg,null);W(this,Sc,null);W(this,ta,null);W(this,io,!1);W(this,Wv,null);W(this,zh);W(this,js,null);W(this,Kv,"");W(this,Sl);W(this,Sx,"");this.color=e.color||$n._defaultColor,G(this,Sl,e.thickness||$n._defaultThickness),G(this,zh,e.opacity||$n._defaultOpacity),G(this,Hh,e.boxes||null),G(this,Sx,e.methodOfCreation||""),G(this,Kv,e.text||""),this._isDraggable=!1,e.highlightId>-1?(G(this,io,!0),V(this,un,n3).call(this,e),V(this,un,Cm).call(this)):x(this,Hh)&&(G(this,qv,e.anchorNode),G(this,Ax,e.anchorOffset),G(this,xx,e.focusNode),G(this,bx,e.focusOffset),V(this,un,jC).call(this),V(this,un,Cm).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=$n.prototype;return Hn(this,"_keyboardManager",new kx([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:x(this,io)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:x(this,Sl),methodOfCreation:x(this,Sx)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var s;di.initialize(e,n),$n._defaultColor||($n._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Ze.HIGHLIGHT_DEFAULT_COLOR:$n._defaultColor=n;break;case Ze.HIGHLIGHT_THICKNESS:$n._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return x(this,Wv)}updateParams(e,n){switch(e){case Ze.HIGHLIGHT_COLOR:V(this,un,dU).call(this,n);break;case Ze.HIGHLIGHT_THICKNESS:V(this,un,pU).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ze.HIGHLIGHT_DEFAULT_COLOR,$n._defaultColor],[Ze.HIGHLIGHT_THICKNESS,$n._defaultThickness]]}get propertiesToUpdate(){return[[Ze.HIGHLIGHT_COLOR,this.color||$n._defaultColor],[Ze.HIGHLIGHT_THICKNESS,x(this,Sl)||$n._defaultThickness],[Ze.HIGHLIGHT_FREE,x(this,io)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(G(this,Yv,new vE({editor:this})),e.addColorPicker(x(this,Yv))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(V(this,un,C_).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,V(this,un,C_).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){V(this,un,XC).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(V(this,un,Cm).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?V(this,un,XC).call(this):e&&(V(this,un,Cm).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,a,l;const{drawLayer:n}=this.parent;let s;x(this,io)?(e=(e-this.rotation+360)%360,s=V(r=$n,Tl,j1).call(r,x(this,Sc).box,e)):s=V(a=$n,Tl,j1).call(a,this,e),n.rotate(x(this,ta),e),n.rotate(x(this,js),e),n.updateBox(x(this,ta),s),n.updateBox(x(this,js),V(l=$n,Tl,j1).call(l,x(this,bl).box,e))}render(){if(this.div)return this.div;const e=super.render();x(this,Kv)&&(e.setAttribute("aria-label",x(this,Kv)),e.setAttribute("role","mark")),x(this,io)?e.classList.add("free"):this.div.addEventListener("keydown",V(this,un,gU).bind(this),{signal:this._uiManager._signal});const n=G(this,Tg,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=x(this,Mg);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),pE(this,x(this,Tg),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(x(this,js),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(x(this,js),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:V(this,un,i3).call(this,!0);break;case 1:case 3:V(this,un,i3).call(this,!1);break}}select(){var e,n;super.select(),x(this,js)&&((e=this.parent)==null||e.drawLayer.removeClass(x(this,js),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(x(this,js),"selected"))}unselect(){var e;super.unselect(),x(this,js)&&((e=this.parent)==null||e.drawLayer.removeClass(x(this,js),"selected"),x(this,io)||V(this,un,i3).call(this,!1))}get _mustFixPosition(){return!x(this,io)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(x(this,ta),e),this.parent.drawLayer.show(x(this,js),e))}static startHighlighting(e,n,{target:s,x:r,y:a}){const{x:l,y:u,width:f,height:m}=s.getBoundingClientRect(),g=new AbortController,v=e.combinedSignal(g),_=C=>{C.preventDefault(),C.stopPropagation()},b=C=>{g.abort(),V(this,Tl,AU).call(this,e,C)};window.addEventListener("blur",b,{signal:v}),window.addEventListener("pointerup",b,{signal:v}),window.addEventListener("pointerdown",_,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Dl,{signal:v}),s.addEventListener("pointermove",V(this,Tl,_U).bind(this,e),{signal:v}),this._freeHighlight=new GC({x:r,y:a},[l,u,f,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(e,n,s){var C,M,S,R;let r=null;if(e instanceof XI){const{data:{quadPoints:D,rect:B,rotation:N,id:I,color:F,opacity:z,popupRef:U},parent:{page:{pageNumber:P}}}=e;r=e={annotationType:dn.HIGHLIGHT,color:Array.from(F),opacity:z,quadPoints:D,boxes:null,pageIndex:P-1,rect:B.slice(0),rotation:N,id:I,deleted:!1,popupRef:U}}else if(e instanceof U7){const{data:{inkLists:D,rect:B,rotation:N,id:I,color:F,borderStyle:{rawWidth:z},popupRef:U},parent:{page:{pageNumber:P}}}=e;r=e={annotationType:dn.HIGHLIGHT,color:Array.from(F),thickness:z,inkLists:D,boxes:null,pageIndex:P-1,rect:B.slice(0),rotation:N,id:I,deleted:!1,popupRef:U}}const{color:a,quadPoints:l,inkLists:u,opacity:f}=e,m=await super.deserialize(e,n,s);m.color=Le.makeHexColor(...a),G(m,zh,f||1),u&&G(m,Sl,e.thickness),m.annotationElementId=e.id||null,m._initialData=r;const[g,v]=m.pageDimensions,[_,b]=m.pageTranslation;if(l){const D=G(m,Hh,[]);for(let B=0;B<l.length;B+=8)D.push({x:(l[B]-_)/g,y:1-(l[B+1]-b)/v,width:(l[B+2]-l[B])/g,height:(l[B+1]-l[B+5])/v});V(C=m,un,jC).call(C),V(M=m,un,Cm).call(M),m.rotate(m.rotation)}else if(u){G(m,io,!0);const D=u[0],B={x:D[0]-_,y:v-(D[1]-b)},N=new GC(B,[0,0,g,v],1,x(m,Sl)/2,!0,.001);for(let z=0,U=D.length;z<U;z+=2)B.x=D[z]-_,B.y=v-(D[z+1]-b),N.add(B);const{id:I,clipPathId:F}=n.drawLayer.draw(N,m.color,m._defaultOpacity,!0);V(S=m,un,n3).call(S,{highlightOutlines:N.getOutlines(),highlightId:I,clipPathId:F}),V(R=m,un,Cm).call(R)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=di._colorManager.convert(this.color),r={annotationType:dn.HIGHLIGHT,color:s,opacity:x(this,zh),thickness:x(this,Sl),quadPoints:V(this,un,vU).call(this),outlines:V(this,un,yU).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:V(this,un,C_).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!V(this,un,xU).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};qv=new WeakMap,Ax=new WeakMap,Hh=new WeakMap,Mg=new WeakMap,Yv=new WeakMap,bl=new WeakMap,xx=new WeakMap,bx=new WeakMap,Tg=new WeakMap,Sc=new WeakMap,ta=new WeakMap,io=new WeakMap,Wv=new WeakMap,zh=new WeakMap,js=new WeakMap,Kv=new WeakMap,Sl=new WeakMap,Sx=new WeakMap,un=new WeakSet,jC=function(){const e=new j9(x(this,Hh),.001);G(this,Sc,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=x(this,Sc).box;const n=new j9(x(this,Hh),.0025,.001,this._uiManager.direction==="ltr");G(this,bl,n.getOutlines());const{lastPoint:s}=x(this,bl).box;G(this,Wv,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},n3=function({highlightOutlines:e,highlightId:n,clipPathId:s}){var g,v;if(G(this,Sc,e),G(this,bl,e.getNewOutline(x(this,Sl)/2+1.5,.0025)),n>=0)G(this,ta,n),G(this,Mg,s),this.parent.drawLayer.finalizeLine(n,e),G(this,js,this.parent.drawLayer.drawOutline(x(this,bl)));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(x(this,ta),e),this.parent.drawLayer.updateBox(x(this,ta),V(g=$n,Tl,j1).call(g,x(this,Sc).box,(_-this.rotation+360)%360)),this.parent.drawLayer.updateLine(x(this,js),x(this,bl)),this.parent.drawLayer.updateBox(x(this,js),V(v=$n,Tl,j1).call(v,x(this,bl).box,_))}const{x:a,y:l,width:u,height:f}=e.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=u,this.height=f;break;case 90:{const[_,b]=this.parentDimensions;this.x=l,this.y=1-a,this.width=u*b/_,this.height=f*_/b;break}case 180:this.x=1-a,this.y=1-l,this.width=u,this.height=f;break;case 270:{const[_,b]=this.parentDimensions;this.x=1-l,this.y=a,this.width=u*b/_,this.height=f*_/b;break}}const{lastPoint:m}=x(this,bl).box;G(this,Wv,[(m[0]-a)/u,(m[1]-l)/f])},dU=function(e){const n=(a,l)=>{var u,f,m;this.color=a,(u=this.parent)==null||u.drawLayer.changeColor(x(this,ta),a),(f=x(this,Yv))==null||f.updateColor(a),G(this,zh,l),(m=this.parent)==null||m.drawLayer.changeOpacity(x(this,ta),l)},s=this.color,r=x(this,zh);this.addCommands({cmd:n.bind(this,e,$n._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},pU=function(e){const n=x(this,Sl),s=r=>{G(this,Sl,r),V(this,un,mU).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},mU=function(e){if(!x(this,io))return;V(this,un,n3).call(this,{highlightOutlines:x(this,Sc).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},XC=function(){x(this,ta)===null||!this.parent||(this.parent.drawLayer.remove(x(this,ta)),G(this,ta,null),this.parent.drawLayer.remove(x(this,js)),G(this,js,null))},Cm=function(e=this.parent){x(this,ta)===null&&({id:Ea(this,ta)._,clipPathId:Ea(this,Mg)._}=e.drawLayer.draw(x(this,Sc),this.color,x(this,zh)),G(this,js,e.drawLayer.drawOutline(x(this,bl))),x(this,Tg)&&(x(this,Tg).style.clipPath=x(this,Mg)))},Tl=new WeakSet,j1=function({x:e,y:n,width:s,height:r},a){switch(a){case 90:return{x:1-n-r,y:e,width:r,height:s};case 180:return{x:1-e-s,y:1-n-r,width:s,height:r};case 270:return{x:n,y:1-e-s,width:r,height:s}}return{x:e,y:n,width:s,height:r}},gU=function(e){$n._keyboardManager.exec(this,e)},i3=function(e){if(!x(this,qv))return;const n=window.getSelection();e?n.setPosition(x(this,qv),x(this,Ax)):n.setPosition(x(this,xx),x(this,bx))},C_=function(){return x(this,io)?this.rotation:0},vU=function(){if(x(this,io))return null;const[e,n]=this.pageDimensions,[s,r]=this.pageTranslation,a=x(this,Hh),l=new Float32Array(a.length*8);let u=0;for(const{x:f,y:m,width:g,height:v}of a){const _=f*e+s,b=(1-m-v)*n+r;l[u]=l[u+4]=_,l[u+1]=l[u+3]=b,l[u+2]=l[u+6]=_+g*e,l[u+5]=l[u+7]=b+v*n,u+=8}return l},yU=function(e){return x(this,Sc).serialize(e,V(this,un,C_).call(this))},_U=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},AU=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},xU=function(e){const{color:n}=this._initialData;return e.color.some((s,r)=>s!==n[r])},W($n,Tl),Je($n,"_defaultColor",null),Je($n,"_defaultOpacity",1),Je($n,"_defaultThickness",12),Je($n,"_type","highlight"),Je($n,"_editorType",dn.HIGHLIGHT),Je($n,"_freeHighlightId",-1),Je($n,"_freeHighlight",null),Je($n,"_freeHighlightClipId","");let yE=$n;var Cg,wg,Du,Gh,El,Rg,Lg,Dg,kh,Jv,Bg,Og,zd,le,bU,SU,EU,MU,YC,TU,WC,CU,wU,RU,LU,DU,wm,KC,JC,ZC,s3,r3,X1,$C,a3,cf,BU,tw,OU,NU,ew,o3,w_;const Xi=class Xi extends di{constructor(e){super({...e,name:"inkEditor"});W(this,le);W(this,Cg,0);W(this,wg,0);W(this,Du,null);W(this,Gh,new Path2D);W(this,El,!1);W(this,Rg,null);W(this,Lg,!1);W(this,Dg,!1);W(this,kh,null);W(this,Jv,null);W(this,Bg,0);W(this,Og,0);W(this,zd,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,n){di.initialize(e,n)}static updateDefaultParams(e,n){switch(e){case Ze.INK_THICKNESS:Xi._defaultThickness=n;break;case Ze.INK_COLOR:Xi._defaultColor=n;break;case Ze.INK_OPACITY:Xi._defaultOpacity=n/100;break}}updateParams(e,n){switch(e){case Ze.INK_THICKNESS:V(this,le,bU).call(this,n);break;case Ze.INK_COLOR:V(this,le,SU).call(this,n);break;case Ze.INK_OPACITY:V(this,le,EU).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ze.INK_THICKNESS,Xi._defaultThickness],[Ze.INK_COLOR,Xi._defaultColor||di._defaultLineColor],[Ze.INK_OPACITY,Math.round(Xi._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Ze.INK_THICKNESS,this.thickness||Xi._defaultThickness],[Ze.INK_COLOR,this.color||Xi._defaultColor||di._defaultLineColor],[Ze.INK_OPACITY,Math.round(100*(this.opacity??Xi._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(V(this,le,s3).call(this),V(this,le,r3).call(this)),this.isAttachedToDOM||(this.parent.add(this),V(this,le,X1).call(this)),V(this,le,w_).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,x(this,Du)&&(clearTimeout(x(this,Du)),G(this,Du,null)),(e=x(this,kh))==null||e.disconnect(),G(this,kh,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,n]=this.parentDimensions,s=this.width*e,r=this.height*n;this.setDimensions(s,r)}enableEditMode(){x(this,El)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,V(this,le,KC).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),V(this,le,JC).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){x(this,El)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),G(this,El,!0),this.div.classList.add("disabled"),V(this,le,w_).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||x(this,El)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),V(this,le,TU).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),V(this,le,WC).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),V(this,le,ZC).call(this,e)}canvasPointerleave(e){V(this,le,ZC).call(this,e)}get isResizable(){return!this.isEmpty()&&x(this,El)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,a,l]=V(this,le,MU).call(this);if(this.setAt(s,r,0,0),this.setDims(a,l),V(this,le,s3).call(this),this.width){const[u,f]=this.parentDimensions;this.setAspectRatio(this.width*u,this.height*f),this.setAt(e*u,n*f,this.width*u,this.height*f),G(this,Dg,!0),V(this,le,X1).call(this),this.setDims(this.width*u,this.height*f),V(this,le,wm).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return V(this,le,r3).call(this),this.div}setDimensions(e,n){const s=Math.round(e),r=Math.round(n);if(x(this,Bg)===s&&x(this,Og)===r)return;G(this,Bg,s),G(this,Og,r),this.canvas.style.visibility="hidden";const[a,l]=this.parentDimensions;this.width=e/a,this.height=n/l,this.fixAndSetPosition(),x(this,El)&&V(this,le,$C).call(this,e,n),V(this,le,X1).call(this),V(this,le,wm).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(e,n,s){var M,S,R;if(e instanceof U7)return null;const r=await super.deserialize(e,n,s);r.thickness=e.thickness,r.color=Le.makeHexColor(...e.color),r.opacity=e.opacity;const[a,l]=r.pageDimensions,u=r.width*a,f=r.height*l,m=r.parentScale,g=e.thickness/2;G(r,El,!0),G(r,Bg,Math.round(u)),G(r,Og,Math.round(f));const{paths:v,rect:_,rotation:b}=e;for(let{bezier:D}of v){D=V(M=Xi,cf,OU).call(M,D,_,b);const B=[];r.paths.push(B);let N=m*(D[0]-g),I=m*(D[1]-g);for(let z=2,U=D.length;z<U;z+=6){const P=m*(D[z]-g),X=m*(D[z+1]-g),ot=m*(D[z+2]-g),it=m*(D[z+3]-g),ut=m*(D[z+4]-g),dt=m*(D[z+5]-g);B.push([[N,I],[P,X],[ot,it],[ut,dt]]),N=ut,I=dt}const F=V(this,cf,BU).call(this,B);r.bezierPath2D.push(F)}const C=V(S=r,le,ew).call(S);return G(r,wg,Math.max(di.MIN_SIZE,C[2]-C[0])),G(r,Cg,Math.max(di.MIN_SIZE,C[3]-C[1])),V(R=r,le,$C).call(R,u,f),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),n=di._colorManager.convert(this.ctx.strokeStyle);return{annotationType:dn.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:V(this,le,NU).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Cg=new WeakMap,wg=new WeakMap,Du=new WeakMap,Gh=new WeakMap,El=new WeakMap,Rg=new WeakMap,Lg=new WeakMap,Dg=new WeakMap,kh=new WeakMap,Jv=new WeakMap,Bg=new WeakMap,Og=new WeakMap,zd=new WeakMap,le=new WeakSet,bU=function(e){const n=r=>{this.thickness=r,V(this,le,w_).call(this)},s=this.thickness;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},SU=function(e){const n=r=>{this.color=r,V(this,le,wm).call(this)},s=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},EU=function(e){const n=r=>{this.opacity=r,V(this,le,wm).call(this)};e/=100;const s=this.opacity;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},MU=function(){const{parentRotation:e,parentDimensions:[n,s]}=this;switch(e){case 90:return[0,s,s,n];case 180:return[n,s,n,s];case 270:return[n,0,s,n];default:return[0,0,n,s]}},YC=function(){const{ctx:e,color:n,opacity:s,thickness:r,parentScale:a,scaleFactor:l}=this;e.lineWidth=r*a/l,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${n}${Xtt(s)}`},TU=function(e,n){this.canvas.addEventListener("contextmenu",Dl,{signal:this._uiManager._signal}),V(this,le,JC).call(this),G(this,Rg,new AbortController);const s=this._uiManager.combinedSignal(x(this,Rg));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,x(this,Dg)||(G(this,Dg,!0),V(this,le,X1).call(this),this.thickness||(this.thickness=Xi._defaultThickness),this.color||(this.color=Xi._defaultColor||di._defaultLineColor),this.opacity??(this.opacity=Xi._defaultOpacity)),this.currentPath.push([e,n]),G(this,Lg,!1),V(this,le,YC).call(this),G(this,zd,()=>{V(this,le,RU).call(this),x(this,zd)&&window.requestAnimationFrame(x(this,zd))}),window.requestAnimationFrame(x(this,zd))},WC=function(e,n){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===s&&n===r)return;const a=this.currentPath;let l=x(this,Gh);if(a.push([e,n]),G(this,Lg,!0),a.length<=2){l.moveTo(...a[0]),l.lineTo(e,n);return}a.length===3&&(G(this,Gh,l=new Path2D),l.moveTo(...a[0])),V(this,le,LU).call(this,l,...a.at(-3),...a.at(-2),e,n)},CU=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);x(this,Gh).lineTo(...e)},wU=function(e,n){G(this,zd,null),e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),V(this,le,WC).call(this,e,n),V(this,le,CU).call(this);let s;if(this.currentPath.length!==1)s=V(this,le,DU).call(this);else{const f=[e,n];s=[[f,f.slice(),f.slice(),f]]}const r=x(this,Gh),a=this.currentPath;this.currentPath=[],G(this,Gh,new Path2D);const l=()=>{this.allRawPaths.push(a),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},u=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(V(this,le,s3).call(this),V(this,le,r3).call(this)),V(this,le,w_).call(this))};this.addCommands({cmd:l,undo:u,mustExec:!0})},RU=function(){if(!x(this,Lg))return;G(this,Lg,!1);const e=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),s=n.map(l=>l[0]),r=n.map(l=>l[1]);Math.min(...s)-e,Math.max(...s)+e,Math.min(...r)-e,Math.max(...r)+e;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const l of this.bezierPath2D)a.stroke(l);a.stroke(x(this,Gh)),a.restore()},LU=function(e,n,s,r,a,l,u){const f=(n+r)/2,m=(s+a)/2,g=(r+l)/2,v=(a+u)/2;e.bezierCurveTo(f+2*(r-f)/3,m+2*(a-m)/3,g+2*(r-g)/3,v+2*(a-v)/3,g,v)},DU=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const n=[];let s,[r,a]=e[0];for(s=1;s<e.length-2;s++){const[_,b]=e[s],[C,M]=e[s+1],S=(_+C)/2,R=(b+M)/2,D=[r+2*(_-r)/3,a+2*(b-a)/3],B=[S+2*(_-S)/3,R+2*(b-R)/3];n.push([[r,a],D,B,[S,R]]),[r,a]=[S,R]}const[l,u]=e[s],[f,m]=e[s+1],g=[r+2*(l-r)/3,a+2*(u-a)/3],v=[f+2*(l-f)/3,m+2*(u-m)/3];return n.push([[r,a],g,v,[f,m]]),n},wm=function(){if(this.isEmpty()){V(this,le,a3).call(this);return}V(this,le,YC).call(this);const{canvas:e,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),V(this,le,a3).call(this);for(const s of this.bezierPath2D)n.stroke(s)},KC=function(){if(x(this,Jv))return;G(this,Jv,new AbortController);const e=this._uiManager.combinedSignal(x(this,Jv));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})},JC=function(){var e;(e=this.pointerdownAC)==null||e.abort(),this.pointerdownAC=null},ZC=function(e){var n;(n=x(this,Rg))==null||n.abort(),G(this,Rg,null),V(this,le,KC).call(this),x(this,Du)&&clearTimeout(x(this,Du)),G(this,Du,setTimeout(()=>{G(this,Du,null),this.canvas.removeEventListener("contextmenu",Dl)},10)),V(this,le,wU).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},s3=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},r3=function(){G(this,kh,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),x(this,kh).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=x(this,kh))==null||e.disconnect(),G(this,kh,null)},{once:!0})},X1=function(){if(!x(this,Dg))return;const[e,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),V(this,le,a3).call(this)},$C=function(e,n){const s=V(this,le,o3).call(this),r=(e-s)/x(this,wg),a=(n-s)/x(this,Cg);this.scaleFactor=Math.min(r,a)},a3=function(){const e=V(this,le,o3).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},cf=new WeakSet,BU=function(e){const n=new Path2D;for(let s=0,r=e.length;s<r;s++){const[a,l,u,f]=e[s];s===0&&n.moveTo(...a),n.bezierCurveTo(l[0],l[1],u[0],u[1],f[0],f[1])}return n},tw=function(e,n,s){const[r,a,l,u]=n;switch(s){case 0:for(let f=0,m=e.length;f<m;f+=2)e[f]+=r,e[f+1]=u-e[f+1];break;case 90:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=e[f+1]+r,e[f+1]=g+a}break;case 180:for(let f=0,m=e.length;f<m;f+=2)e[f]=l-e[f],e[f+1]+=a;break;case 270:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=l-e[f+1],e[f+1]=u-g}break;default:throw new Error("Invalid rotation")}return e},OU=function(e,n,s){const[r,a,l,u]=n;switch(s){case 0:for(let f=0,m=e.length;f<m;f+=2)e[f]-=r,e[f+1]=u-e[f+1];break;case 90:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=e[f+1]-a,e[f+1]=g-r}break;case 180:for(let f=0,m=e.length;f<m;f+=2)e[f]=l-e[f],e[f+1]-=a;break;case 270:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=u-e[f+1],e[f+1]=l-g}break;default:throw new Error("Invalid rotation")}return e},NU=function(e,n,s,r){var m,g;const a=[],l=this.thickness/2,u=e*n+l,f=e*s+l;for(const v of this.paths){const _=[],b=[];for(let C=0,M=v.length;C<M;C++){const[S,R,D,B]=v[C];if(S[0]===B[0]&&S[1]===B[1]&&M===1){const it=e*S[0]+u,ut=e*S[1]+f;_.push(it,ut),b.push(it,ut);break}const N=e*S[0]+u,I=e*S[1]+f,F=e*R[0]+u,z=e*R[1]+f,U=e*D[0]+u,P=e*D[1]+f,X=e*B[0]+u,ot=e*B[1]+f;C===0&&(_.push(N,I),b.push(N,I)),_.push(F,z,U,P,X,ot),b.push(F,z),C===M-1&&b.push(X,ot)}a.push({bezier:V(m=Xi,cf,tw).call(m,_,r,this.rotation),points:V(g=Xi,cf,tw).call(g,b,r,this.rotation)})}return a},ew=function(){let e=1/0,n=-1/0,s=1/0,r=-1/0;for(const a of this.paths)for(const[l,u,f,m]of a){const g=Le.bezierBoundingBox(...l,...u,...f,...m);e=Math.min(e,g[0]),s=Math.min(s,g[1]),n=Math.max(n,g[2]),r=Math.max(r,g[3])}return[e,s,n,r]},o3=function(){return x(this,El)?Math.ceil(this.thickness*this.parentScale):0},w_=function(e=!1){if(this.isEmpty())return;if(!x(this,El)){V(this,le,wm).call(this);return}const n=V(this,le,ew).call(this),s=V(this,le,o3).call(this);G(this,wg,Math.max(di.MIN_SIZE,n[2]-n[0])),G(this,Cg,Math.max(di.MIN_SIZE,n[3]-n[1]));const r=Math.ceil(s+x(this,wg)*this.scaleFactor),a=Math.ceil(s+x(this,Cg)*this.scaleFactor),[l,u]=this.parentDimensions;this.width=r/l,this.height=a/u,this.setAspectRatio(r,a);const f=this.translationX,m=this.translationY;this.translationX=-n[0],this.translationY=-n[1],V(this,le,X1).call(this),V(this,le,wm).call(this),G(this,Bg,r),G(this,Og,a),this.setDims(r,a);const g=e?s/this.scaleFactor/2:0;this.translate(f-this.translationX-g,m-this.translationY-g)},W(Xi,cf),Je(Xi,"_defaultColor",null),Je(Xi,"_defaultOpacity",1),Je(Xi,"_defaultThickness",1),Je(Xi,"_type","ink"),Je(Xi,"_editorType",dn.INK);let qC=Xi;var Yi,Lr,Gd,Vh,kd,Zv,Bu,Qh,Ou,Uo,$v,Nn,R_,L_,l3,iw,IU,c3,sw,u3,UU,PU;const j_=class j_ extends di{constructor(e){super({...e,name:"stampEditor"});W(this,Nn);W(this,Yi,null);W(this,Lr,null);W(this,Gd,null);W(this,Vh,null);W(this,kd,null);W(this,Zv,"");W(this,Bu,null);W(this,Qh,null);W(this,Ou,null);W(this,Uo,!1);W(this,$v,!1);G(this,Vh,e.bitmapUrl),G(this,kd,e.bitmapFile)}static initialize(e,n){di.initialize(e,n)}static get supportedTypes(){return Hn(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Hn(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(dn.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:l}=e||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:a,height:l,channels:r.length/(a*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const f=u.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e,n;x(this,Lr)&&(G(this,Yi,null),this._uiManager.imageManager.deleteId(x(this,Lr)),(e=x(this,Bu))==null||e.remove(),G(this,Bu,null),(n=x(this,Qh))==null||n.disconnect(),G(this,Qh,null),x(this,Ou)&&(clearTimeout(x(this,Ou)),G(this,Ou,null))),super.remove()}rebuild(){if(!this.parent){x(this,Lr)&&V(this,Nn,l3).call(this);return}super.rebuild(),this.div!==null&&(x(this,Lr)&&x(this,Bu)===null&&V(this,Nn,l3).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(x(this,Gd)||x(this,Yi)||x(this,Vh)||x(this,kd)||x(this,Lr))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),x(this,Yi)?V(this,Nn,iw).call(this):V(this,Nn,l3).call(this),this.width&&!this.annotationElementId){const[s,r]=this.parentDimensions;this.setAt(e*s,n*r,this.width*s,this.height*r)}return this.div}copyCanvas(e,n,s=!1){var _;e||(e=224);const{width:r,height:a}=x(this,Yi),l=new Z5;let u=x(this,Yi),f=r,m=a,g=null;if(n){if(r>n||a>n){const z=Math.min(n/r,n/a);f=Math.floor(r*z),m=Math.floor(a*z)}g=document.createElement("canvas");const b=g.width=Math.ceil(f*l.sx),C=g.height=Math.ceil(m*l.sy);x(this,Uo)||(u=V(this,Nn,c3).call(this,b,C));const M=g.getContext("2d");M.filter=this._uiManager.hcmFilter;let S="white",R="#cfcfd8";this._uiManager.hcmFilter!=="none"?R="black":(_=window.matchMedia)!=null&&_.call(window,"(prefers-color-scheme: dark)").matches&&(S="#8f8f9d",R="#42414d");const D=15,B=D*l.sx,N=D*l.sy,I=new OffscreenCanvas(B*2,N*2),F=I.getContext("2d");F.fillStyle=S,F.fillRect(0,0,B*2,N*2),F.fillStyle=R,F.fillRect(0,0,B,N),F.fillRect(B,N,B,N),M.fillStyle=M.createPattern(I,"repeat"),M.fillRect(0,0,b,C),M.drawImage(u,0,0,u.width,u.height,0,0,b,C)}let v=null;if(s){let b,C;if(l.symmetric&&u.width<e&&u.height<e)b=u.width,C=u.height;else if(u=x(this,Yi),r>e||a>e){const R=Math.min(e/r,e/a);b=Math.floor(r*R),C=Math.floor(a*R),x(this,Uo)||(u=V(this,Nn,c3).call(this,b,C))}const S=new OffscreenCanvas(b,C).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,C),v={width:b,height:C,data:S.getImageData(0,0,b,C).data}}return{canvas:g,width:f,height:m,imageData:v}}getImageForAltText(){return x(this,Bu)}static async deserialize(e,n,s){var C;let r=null;if(e instanceof qI){const{data:{rect:M,rotation:S,id:R,structParent:D,popupRef:B},container:N,parent:{page:{pageNumber:I}}}=e,F=N.querySelector("canvas"),z=s.imageManager.getFromCanvas(N.id,F);F.remove();const U=((C=await n._structTree.getAriaAttributes(`${M7}${R}`))==null?void 0:C.get("aria-label"))||"";r=e={annotationType:dn.STAMP,bitmapId:z.id,bitmap:z.bitmap,pageIndex:I-1,rect:M.slice(0),rotation:S,id:R,deleted:!1,accessibilityData:{decorative:!1,altText:U},isSvg:!1,structParent:D,popupRef:B}}const a=await super.deserialize(e,n,s),{rect:l,bitmap:u,bitmapUrl:f,bitmapId:m,isSvg:g,accessibilityData:v}=e;m&&s.imageManager.isValidId(m)?(G(a,Lr,m),u&&G(a,Yi,u)):G(a,Vh,f),G(a,Uo,g);const[_,b]=a.pageDimensions;return a.width=(l[2]-l[0])/_,a.height=(l[3]-l[1])/b,a.annotationElementId=e.id||null,v&&(a.altTextData=v),a._initialData=r,G(a,$v,!!r),a}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:dn.STAMP,bitmapId:x(this,Lr),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:x(this,Uo),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=V(this,Nn,u3).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const u=V(this,Nn,PU).call(this,s);if(u.isSame)return null;u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||(n.stamps=new Map);const l=x(this,Uo)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(x(this,Lr)))n.stamps.set(x(this,Lr),{area:l,serialized:s}),s.bitmap=V(this,Nn,u3).call(this,!1);else if(x(this,Uo)){const u=n.stamps.get(x(this,Lr));l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=V(this,Nn,u3).call(this,!1))}return s}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};Yi=new WeakMap,Lr=new WeakMap,Gd=new WeakMap,Vh=new WeakMap,kd=new WeakMap,Zv=new WeakMap,Bu=new WeakMap,Qh=new WeakMap,Ou=new WeakMap,Uo=new WeakMap,$v=new WeakMap,Nn=new WeakSet,R_=function(e,n=!1){if(!e){this.remove();return}G(this,Yi,e.bitmap),n||(G(this,Lr,e.id),G(this,Uo,e.isSvg)),e.file&&G(this,Zv,e.file.name),V(this,Nn,iw).call(this)},L_=function(){if(G(this,Gd,null),this._uiManager.enableWaiting(!1),!!x(this,Bu)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&x(this,Yi)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&x(this,Yi)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},l3=function(){if(x(this,Lr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(x(this,Lr)).then(s=>V(this,Nn,R_).call(this,s,!0)).finally(()=>V(this,Nn,L_).call(this));return}if(x(this,Vh)){const s=x(this,Vh);G(this,Vh,null),this._uiManager.enableWaiting(!0),G(this,Gd,this._uiManager.imageManager.getFromUrl(s).then(r=>V(this,Nn,R_).call(this,r)).finally(()=>V(this,Nn,L_).call(this)));return}if(x(this,kd)){const s=x(this,kd);G(this,kd,null),this._uiManager.enableWaiting(!0),G(this,Gd,this._uiManager.imageManager.getFromFile(s).then(r=>V(this,Nn,R_).call(this,r)).finally(()=>V(this,Nn,L_).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=j_.supportedTypesStr;const n=this._uiManager._signal;G(this,Gd,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),V(this,Nn,R_).call(this,r)}s()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>V(this,Nn,L_).call(this))),e.click()},iw=function(){const{div:e}=this;let{width:n,height:s}=x(this,Yi);const[r,a]=this.pageDimensions,l=.75;if(this.width)n=this.width*r,s=this.height*a;else if(n>l*r||s>l*a){const g=Math.min(l*r/n,l*a/s);n*=g,s*=g}const[u,f]=this.parentDimensions;this.setDims(n*u/r,s*f/a),this._uiManager.enableWaiting(!1);const m=G(this,Bu,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),V(this,Nn,sw).call(this,n,s),V(this,Nn,UU).call(this),x(this,$v)||(this.parent.addUndoableEditor(this),G(this,$v,!0)),this._reportTelemetry({action:"inserted_image"}),x(this,Zv)&&m.setAttribute("aria-label",x(this,Zv))},IU=function(e,n){var l;const[s,r]=this.parentDimensions;this.width=e/s,this.height=n/r,(l=this._initialOptions)!=null&&l.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,x(this,Ou)!==null&&clearTimeout(x(this,Ou)),G(this,Ou,setTimeout(()=>{G(this,Ou,null),V(this,Nn,sw).call(this,e,n)},200))},c3=function(e,n){const{width:s,height:r}=x(this,Yi);let a=s,l=r,u=x(this,Yi);for(;a>2*e||l>2*n;){const f=a,m=l;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(a,l);g.getContext("2d").drawImage(u,0,0,f,m,0,0,a,l),u=g.transferToImageBitmap()}return u},sw=function(e,n){const s=new Z5,r=Math.ceil(e*s.sx),a=Math.ceil(n*s.sy),l=x(this,Bu);if(!l||l.width===r&&l.height===a)return;l.width=r,l.height=a;const u=x(this,Uo)?x(this,Yi):V(this,Nn,c3).call(this,r,a),f=l.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(u,0,0,u.width,u.height,0,0,r,a)},u3=function(e){if(e){if(x(this,Uo)){const r=this._uiManager.imageManager.getSvgUrl(x(this,Lr));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=x(this,Yi),n.getContext("2d").drawImage(x(this,Yi),0,0),n.toDataURL()}if(x(this,Uo)){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*sp.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*sp.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,a);return l.getContext("2d").drawImage(x(this,Yi),0,0,x(this,Yi).width,x(this,Yi).height,0,0,r,a),l.transferToImageBitmap()}return structuredClone(x(this,Yi))},UU=function(){this._uiManager._signal&&(G(this,Qh,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&V(this,Nn,IU).call(this,n.width,n.height)})),x(this,Qh).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=x(this,Qh))==null||e.disconnect(),G(this,Qh,null)},{once:!0}))},PU=function(e){var f;const{rect:n,pageIndex:s,accessibilityData:{altText:r}}=this._initialData,a=e.rect.every((m,g)=>Math.abs(m-n[g])<1),l=e.pageIndex===s,u=(((f=e.accessibilityData)==null?void 0:f.alt)||"")===r;return{isSame:a&&l&&u,isSameAltText:u}},Je(j_,"_type","stamp"),Je(j_,"_editorType",dn.STAMP);let nw=j_;var Ng,ty,Nu,Vd,jh,Po,Qd,ey,ny,ea,Xh,Pe,jd,Ir,FU,aw,ow,lw,h3;const lc=class lc{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:r,annotationLayer:a,drawLayer:l,textLayer:u,viewport:f,l10n:m}){W(this,Ir);W(this,Ng);W(this,ty,!1);W(this,Nu,null);W(this,Vd,null);W(this,jh,null);W(this,Po,new Map);W(this,Qd,!1);W(this,ey,!1);W(this,ny,!1);W(this,ea,null);W(this,Xh,null);W(this,Pe);const g=[...x(lc,jd).values()];if(!lc._initialized){lc._initialized=!0;for(const v of g)v.initialize(m,t)}t.registerEditorTypes(g),G(this,Pe,t),this.pageIndex=e,this.div=n,G(this,Ng,r),G(this,Nu,a),this.viewport=f,G(this,ea,u),this.drawLayer=l,this._structTree=s,x(this,Pe).addLayer(this)}get isEmpty(){return x(this,Po).size===0}get isInvisible(){return this.isEmpty&&x(this,Pe).getMode()===dn.NONE}updateToolbar(t){x(this,Pe).updateToolbar(t)}updateMode(t=x(this,Pe).getMode()){switch(V(this,Ir,h3).call(this),t){case dn.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case dn.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case dn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of x(lc,jd).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=x(this,ea))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(x(this,Pe).getMode()!==dn.INK)return;if(!t){for(const n of x(this,Po).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){x(this,Pe).setEditingState(t)}addCommands(t){x(this,Pe).addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=x(this,Nu))==null||e.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of x(this,Po).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(x(this,Pe).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!x(this,Nu))return;const e=x(this,Nu).getEditableAnnotations();for(const n of e){if(n.hide(),x(this,Pe).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;G(this,ny,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of x(this,Po).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(x(this,Nu)){const r=x(this,Nu).getEditableAnnotations();for(const a of r){const{id:l}=a.data;if(x(this,Pe).isDeletedAnnotationElement(l))continue;let u=e.get(l);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=t.get(l),u&&(x(this,Pe).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}V(this,Ir,h3).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of x(lc,jd).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),G(this,ny,!1)}getEditableAnnotation(t){var e;return((e=x(this,Nu))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){x(this,Pe).getActive()!==t&&x(this,Pe).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=x(this,ea))!=null&&t.div&&!x(this,Xh)){G(this,Xh,new AbortController);const e=x(this,Pe).combinedSignal(x(this,Xh));x(this,ea).div.addEventListener("pointerdown",V(this,Ir,FU).bind(this),{signal:e}),x(this,ea).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=x(this,ea))!=null&&t.div&&x(this,Xh)&&(x(this,Xh).abort(),G(this,Xh,null),x(this,ea).div.classList.remove("highlighting"))}enableClick(){if(x(this,Vd))return;G(this,Vd,new AbortController);const t=x(this,Pe).combinedSignal(x(this,Vd));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){var t;(t=x(this,Vd))==null||t.abort(),G(this,Vd,null)}attach(t){x(this,Po).set(t.id,t);const{annotationElementId:e}=t;e&&x(this,Pe).isDeletedAnnotationElement(e)&&x(this,Pe).removeDeletedAnnotationElement(t)}detach(t){var e;x(this,Po).delete(t.id),(e=x(this,Ng))==null||e.removePointerInTextLayer(t.contentDiv),!x(this,ny)&&t.annotationElementId&&x(this,Pe).addDeletedAnnotationElement(t)}remove(t){this.detach(t),x(this,Pe).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,x(this,ey)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(x(this,Pe).addDeletedAnnotationElement(t.annotationElementId),di.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),x(this,Pe).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),x(this,Pe).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!x(this,jh)&&(t._focusEventsAllowed=!1,G(this,jh,setTimeout(()=>{G(this,jh,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:x(this,Pe)._signal}),e.focus())},0))),t._structTreeParentId=(n=x(this,Ng))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return x(this,Pe).getId()}combinedSignal(t){return x(this,Pe).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=x(this,Ir,aw))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){x(this,Pe).updateToolbar(t),x(this,Pe).updateMode(t);const{offsetX:n,offsetY:s}=V(this,Ir,lw).call(this),r=this.getNextId(),a=V(this,Ir,ow).call(this,{parent:this,id:r,x:n,y:s,uiManager:x(this,Pe),isCentered:!0,...e});a&&this.add(a)}async deserialize(t){var e;return await((e=x(lc,jd).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,x(this,Pe)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),r=V(this,Ir,ow).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:x(this,Pe),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(V(this,Ir,lw).call(this),!0)}setSelected(t){x(this,Pe).setSelected(t)}toggleSelected(t){x(this,Pe).toggleSelected(t)}unselect(t){x(this,Pe).unselect(t)}pointerup(t){const{isMac:e}=Ia.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&x(this,Qd)){if(G(this,Qd,!1),!x(this,ty)){G(this,ty,!0);return}if(x(this,Pe).getMode()===dn.STAMP){x(this,Pe).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(x(this,Pe).getMode()===dn.HIGHLIGHT&&this.enableTextSelection(),x(this,Qd)){G(this,Qd,!1);return}const{isMac:e}=Ia.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;G(this,Qd,!0);const n=x(this,Pe).getActive();G(this,ty,!n||n.isEmpty())}findNewParent(t,e,n){const s=x(this,Pe).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}destroy(){var t,e;((t=x(this,Pe).getActive())==null?void 0:t.parent)===this&&(x(this,Pe).commitOrRemove(),x(this,Pe).setActiveEditor(null)),x(this,jh)&&(clearTimeout(x(this,jh)),G(this,jh,null));for(const n of x(this,Po).values())(e=x(this,Ng))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,x(this,Po).clear(),x(this,Pe).removeLayer(this)}render({viewport:t}){this.viewport=t,Jg(this.div,t);for(const e of x(this,Pe).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){x(this,Pe).commitOrRemove(),V(this,Ir,h3).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Jg(this.div,{rotation:n}),e!==n)for(const s of x(this,Po).values())s.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return x(this,Pe).viewParameters.realScale}};Ng=new WeakMap,ty=new WeakMap,Nu=new WeakMap,Vd=new WeakMap,jh=new WeakMap,Po=new WeakMap,Qd=new WeakMap,ey=new WeakMap,ny=new WeakMap,ea=new WeakMap,Xh=new WeakMap,Pe=new WeakMap,jd=new WeakMap,Ir=new WeakSet,FU=function(t){x(this,Pe).unselectAll();const{target:e}=t;if(e===x(this,ea).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&x(this,ea).div.contains(e)){const{isMac:n}=Ia.platform;if(t.button!==0||t.ctrlKey&&n)return;x(this,Pe).showAllEditors("highlight",!0,!0),x(this,ea).div.classList.add("free"),this.toggleDrawing(),yE.startHighlighting(this,x(this,Pe).direction==="ltr",{target:x(this,ea).div,x:t.x,y:t.y}),x(this,ea).div.addEventListener("pointerup",()=>{x(this,ea).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:x(this,Pe)._signal}),t.preventDefault()}},aw=function(){return x(lc,jd).get(x(this,Pe).getMode())},ow=function(t){const e=x(this,Ir,aw);return e?new e.prototype.constructor(t):null},lw=function(){const{x:t,y:e,width:n,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,t),a=Math.max(0,e),l=Math.min(window.innerWidth,t+n),u=Math.min(window.innerHeight,e+s),f=(r+l)/2-t,m=(a+u)/2-e,[g,v]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:g,offsetY:v}},h3=function(){G(this,ey,!0);for(const t of x(this,Po).values())t.isEmpty()&&t.remove();G(this,ey,!1)},Je(lc,"_initialized",!1),W(lc,jd,new Map([FC,qC,nw,yE].map(t=>[t._editorType,t])));let rw=lc;var Iu,Ex,Cs,qh,Mx,uw,n0,hw,HU;const Cr=class Cr{constructor({pageIndex:t}){W(this,n0);W(this,Iu,null);W(this,Ex,0);W(this,Cs,new Map);W(this,qh,new Map);this.pageIndex=t}setParent(t){if(!x(this,Iu)){G(this,Iu,t);return}if(x(this,Iu)!==t){if(x(this,Cs).size>0)for(const e of x(this,Cs).values())e.remove(),t.append(e);G(this,Iu,t)}}static get _svgFactory(){return Hn(this,"_svgFactory",new I7)}draw(t,e,n,s=!1){const r=Ea(this,Ex)._++,a=V(this,n0,hw).call(this,t.box);a.classList.add(...t.classNamesForDrawing);const l=Cr._svgFactory.createElement("defs");a.append(l);const u=Cr._svgFactory.createElement("path");l.append(u);const f=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",f),u.setAttribute("d",t.toSVGPath()),s&&x(this,qh).set(r,u);const m=V(this,n0,HU).call(this,l,f),g=Cr._svgFactory.createElement("use");return a.append(g),a.setAttribute("fill",e),a.setAttribute("fill-opacity",n),g.setAttribute("href",`#${f}`),x(this,Cs).set(r,a),{id:r,clipPathId:`url(#${m})`}}drawOutline(t){const e=Ea(this,Ex)._++,n=V(this,n0,hw).call(this,t.box);n.classList.add(...t.classNamesForOutlining);const s=Cr._svgFactory.createElement("defs");n.append(s);const r=Cr._svgFactory.createElement("path");s.append(r);const a=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",a),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let l;if(t.mustRemoveSelfIntersections){const m=Cr._svgFactory.createElement("mask");s.append(m),l=`mask_p${this.pageIndex}_${e}`,m.setAttribute("id",l),m.setAttribute("maskUnits","objectBoundingBox");const g=Cr._svgFactory.createElement("rect");m.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const v=Cr._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${a}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const u=Cr._svgFactory.createElement("use");n.append(u),u.setAttribute("href",`#${a}`),l&&u.setAttribute("mask",`url(#${l})`);const f=u.cloneNode();return n.append(f),u.classList.add("mainOutline"),f.classList.add("secondaryOutline"),x(this,Cs).set(e,n),e}finalizeLine(t,e){const n=x(this,qh).get(t);x(this,qh).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){x(this,Cs).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}updatePath(t,e){x(this,qh).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var n;V(n=Cr,Mx,uw).call(n,x(this,Cs).get(t),e)}show(t,e){x(this,Cs).get(t).classList.toggle("hidden",!e)}rotate(t,e){x(this,Cs).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){x(this,Cs).get(t).setAttribute("fill",e)}changeOpacity(t,e){x(this,Cs).get(t).setAttribute("fill-opacity",e)}addClass(t,e){x(this,Cs).get(t).classList.add(e)}removeClass(t,e){x(this,Cs).get(t).classList.remove(e)}getSVGRoot(t){return x(this,Cs).get(t)}remove(t){x(this,qh).delete(t),x(this,Iu)!==null&&(x(this,Cs).get(t).remove(),x(this,Cs).delete(t))}destroy(){G(this,Iu,null);for(const t of x(this,Cs).values())t.remove();x(this,Cs).clear(),x(this,qh).clear()}};Iu=new WeakMap,Ex=new WeakMap,Cs=new WeakMap,qh=new WeakMap,Mx=new WeakSet,uw=function(t,{x:e=0,y:n=0,width:s=1,height:r=1}={}){const{style:a}=t;a.top=`${100*n}%`,a.left=`${100*e}%`,a.width=`${100*s}%`,a.height=`${100*r}%`},n0=new WeakSet,hw=function(t){var n;const e=Cr._svgFactory.create(1,1,!0);return x(this,Iu).append(e),e.setAttribute("aria-hidden",!0),V(n=Cr,Mx,uw).call(n,e,t),e},HU=function(t,e){const n=Cr._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Cr._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},W(Cr,Mx);let cw=Cr;var Cnt=sn.AbortException,wnt=sn.AnnotationEditorLayer,Rnt=sn.AnnotationEditorParamsType,Lnt=sn.AnnotationEditorType,Dnt=sn.AnnotationEditorUIManager,zU=sn.AnnotationLayer,GU=sn.AnnotationMode,Bnt=sn.ColorPicker,Ont=sn.DOMSVGFactory,Nnt=sn.DrawLayer,Int=sn.FeatureTest,P7=sn.GlobalWorkerOptions,Unt=sn.ImageKind,Pnt=sn.InvalidPDFException,Fnt=sn.MissingPDFException,Hnt=sn.OPS,znt=sn.OutputScale,Gnt=sn.PDFDataRangeTransport,knt=sn.PDFDateString,Vnt=sn.PDFWorker,Qnt=sn.PasswordResponses,jnt=sn.PermissionFlag,Xnt=sn.PixelsPerInch,qnt=sn.RenderingCancelledException,kU=sn.TextLayer,Ynt=sn.UnexpectedResponseException,Wnt=sn.Util,Knt=sn.VerbosityLevel,Jnt=sn.XfaLayer,Znt=sn.build,$nt=sn.createValidAbsoluteUrl,tit=sn.fetchData,VU=sn.getDocument,eit=sn.getFilenameFromUrl,nit=sn.getPdfFilenameFromUrl,iit=sn.getXfaPageViewport,sit=sn.isDataScheme,rit=sn.isPdfFile,ait=sn.noContextMenu,oit=sn.normalizeUnicode,lit=sn.setLayerDimensions,cit=sn.shadow,uit=sn.version;const hit=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Cnt,AnnotationEditorLayer:wnt,AnnotationEditorParamsType:Rnt,AnnotationEditorType:Lnt,AnnotationEditorUIManager:Dnt,AnnotationLayer:zU,AnnotationMode:GU,ColorPicker:Bnt,DOMSVGFactory:Ont,DrawLayer:Nnt,FeatureTest:Int,GlobalWorkerOptions:P7,ImageKind:Unt,InvalidPDFException:Pnt,MissingPDFException:Fnt,OPS:Hnt,OutputScale:znt,PDFDataRangeTransport:Gnt,PDFDateString:knt,PDFWorker:Vnt,PasswordResponses:Qnt,PermissionFlag:jnt,PixelsPerInch:Xnt,RenderingCancelledException:qnt,TextLayer:kU,UnexpectedResponseException:Ynt,Util:Wnt,VerbosityLevel:Knt,XfaLayer:Jnt,build:Znt,createValidAbsoluteUrl:$nt,fetchData:tit,getDocument:VU,getFilenameFromUrl:eit,getPdfFilenameFromUrl:nit,getXfaPageViewport:iit,isDataScheme:sit,isPdfFile:rit,noContextMenu:ait,normalizeUnicode:oit,setLayerDimensions:lit,shadow:cit,version:uit},Symbol.toStringTag,{value:"Module"}));var ar=function(i,t,e){if(e||arguments.length===2)for(var n=0,s=t.length,r;n<s;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return i.concat(r||Array.prototype.slice.call(t))},fit=["onCopy","onCut","onPaste"],dit=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],pit=["onFocus","onBlur"],mit=["onInput","onInvalid","onReset","onSubmit"],git=["onLoad","onError"],vit=["onKeyDown","onKeyPress","onKeyUp"],yit=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],_it=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Ait=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],xit=["onSelect"],bit=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Sit=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Eit=["onScroll"],Mit=["onWheel"],Tit=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Cit=["onTransitionEnd"],wit=["onToggle"],Rit=["onChange"],Lit=ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar([],fit,!0),dit,!0),pit,!0),mit,!0),git,!0),vit,!0),yit,!0),_it,!0),Ait,!0),xit,!0),bit,!0),Sit,!0),Eit,!0),Mit,!0),Tit,!0),Cit,!0),Rit,!0),wit,!0);function QU(i,t){var e={};return Lit.forEach(function(n){var s=i[n];s&&(t?e[n]=function(r){return s(r,t(n))}:e[n]=s)}),e}function Qx(i){var t=!1,e=new Promise(function(n,s){i.then(function(r){return!t&&n(r)}).catch(function(r){return!t&&s(r)})});return{promise:e,cancel:function(){t=!0}}}function jU(i){var t,e,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(t=0;t<s;t++)i[t]&&(e=jU(i[t]))&&(n&&(n+=" "),n+=e)}else for(e in i)i[e]&&(n&&(n+=" "),n+=e);return n}function GM(){for(var i,t,e=0,n="",s=arguments.length;e<s;e++)(i=arguments[e])&&(t=jU(i))&&(n&&(n+=" "),n+=t);return n}var Dit="Invariant failed";function Si(i,t){if(!i)throw new Error(Dit)}var a5,X9;function Bit(){if(X9)return a5;X9=1;var i=function(){};return a5=i,a5}var Oit=Bit();const na=UE(Oit);var q9=Object.prototype.hasOwnProperty;function Y9(i,t,e){for(e of i.keys())if(iv(e,t))return e}function iv(i,t){var e,n,s;if(i===t)return!0;if(i&&t&&(e=i.constructor)===t.constructor){if(e===Date)return i.getTime()===t.getTime();if(e===RegExp)return i.toString()===t.toString();if(e===Array){if((n=i.length)===t.length)for(;n--&&iv(i[n],t[n]););return n===-1}if(e===Set){if(i.size!==t.size)return!1;for(n of i)if(s=n,s&&typeof s=="object"&&(s=Y9(t,s),!s)||!t.has(s))return!1;return!0}if(e===Map){if(i.size!==t.size)return!1;for(n of i)if(s=n[0],s&&typeof s=="object"&&(s=Y9(t,s),!s)||!iv(n[1],t.get(s)))return!1;return!0}if(e===ArrayBuffer)i=new Uint8Array(i),t=new Uint8Array(t);else if(e===DataView){if((n=i.byteLength)===t.byteLength)for(;n--&&i.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===t.byteLength)for(;n--&&i[n]===t[n];);return n===-1}if(!e||typeof i=="object"){n=0;for(e in i)if(q9.call(i,e)&&++n&&!q9.call(t,e)||!(e in t)||!iv(i[e],t[e]))return!1;return Object.keys(t).length===n}}return i!==i&&t!==t}const XU=lt.createContext(null);function sv({children:i,type:t}){return k.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:i})}const Nit="noopener noreferrer nofollow";class Iit{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Si(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Si(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{Si(this.pdfDocument),Si(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Si(Array.isArray(e));const n=e[0];new Promise(s=>{Si(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{s(r)}).catch(()=>{Si(!1)}):typeof n=="number"?s(n):Si(!1)}).then(s=>{const r=s+1;Si(this.pdfViewer),Si(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:s,pageNumber:r})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;Si(this.pdfViewer),Si(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||Nit,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const W9={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},kM=typeof window<"u",qU=kM&&window.location.protocol==="file:";function Uit(i){return typeof i<"u"}function xm(i){return Uit(i)&&i!==null}function Pit(i){return typeof i=="string"}function Fit(i){return i instanceof ArrayBuffer}function Hit(i){return Si(kM),i instanceof Blob}function fw(i){return Pit(i)&&/^data:/.test(i)}function K9(i){Si(fw(i));const[t="",e=""]=i.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function zit(){return kM&&window.devicePixelRatio||1}const YU="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function J9(){na(!qU,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${YU}`)}function Git(){na(!qU,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${YU}`)}function t0(i){i!=null&&i.cancel&&i.cancel()}function dw(i,t){return Object.defineProperty(i,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function kit(i){return i.name==="RenderingCancelledException"}function Vit(i){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=s=>{if(!s.target)return e(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}function Qit(i,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function Ay(){return lt.useReducer(Qit,{value:void 0,error:void 0})}var jit=function(i,t,e,n){function s(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function l(m){try{f(n.next(m))}catch(g){a(g)}}function u(m){try{f(n.throw(m))}catch(g){a(g)}}function f(m){m.done?r(m.value):s(m.value).then(l,u)}f((n=n.apply(i,t||[])).next())})},Z9=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e};const{PDFDataRangeTransport:Xit}=hit,qit=(i,t)=>{switch(t){case W9.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");i(e);break}case W9.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");i(e);break}}};function $9(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const Yit=lt.forwardRef(function(t,e){var{children:n,className:s,error:r="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:l,file:u,inputRef:f,imageResourcesPath:m,loading:g="Loading PDF…",noData:v="No PDF file specified.",onItemClick:_,onLoadError:b,onLoadProgress:C,onLoadSuccess:M,onPassword:S=qit,onSourceError:R,onSourceSuccess:D,options:B,renderMode:N,rotate:I}=t,F=Z9(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[z,U]=Ay(),{value:P,error:X}=z,[ot,it]=Ay(),{value:ut,error:dt}=ot,j=lt.useRef(new Iit),tt=lt.useRef([]),nt=lt.useRef(void 0),_t=lt.useRef(void 0);u&&u!==nt.current&&$9(u)&&(na(!iv(u,nt.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),nt.current=u),B&&B!==_t.current&&(na(!iv(B,_t.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),_t.current=B);const J=lt.useRef({scrollPageIntoView:re=>{const{dest:Z,pageNumber:Kt,pageIndex:Ft=Kt-1}=re;if(_){_({dest:Z,pageIndex:Ft,pageNumber:Kt});return}const Vt=tt.current[Ft];if(Vt){Vt.scrollIntoView();return}na(!1,`An internal link leading to page ${Kt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});lt.useImperativeHandle(e,()=>({linkService:j,pages:tt,viewer:J}),[]);function at(){D&&D()}function xt(){X&&(na(!1,X.toString()),R&&R(X))}function Et(){U({type:"RESET"})}lt.useEffect(Et,[u,U]);const ct=lt.useCallback(()=>jit(this,void 0,void 0,function*(){if(!u)return null;if(typeof u=="string")return fw(u)?{data:K9(u)}:(J9(),{url:u});if(u instanceof Xit)return{range:u};if(Fit(u))return{data:u};if(kM&&Hit(u))return{data:yield Vit(u)};if(Si(typeof u=="object"),Si($9(u)),"url"in u&&typeof u.url=="string"){if(fw(u.url)){const{url:re}=u,Z=Z9(u,["url"]),Kt=K9(re);return Object.assign({data:Kt},Z)}J9()}return u}),[u]);lt.useEffect(()=>{const re=Qx(ct());return re.promise.then(Z=>{U({type:"RESOLVE",value:Z})}).catch(Z=>{U({type:"REJECT",error:Z})}),()=>{t0(re)}},[ct,U]),lt.useEffect(()=>{if(!(typeof P>"u")){if(P===!1){xt();return}at()}},[P]);function wt(){ut&&(M&&M(ut),tt.current=new Array(ut.numPages),j.current.setDocument(ut))}function Bt(){dt&&(na(!1,dt.toString()),b&&b(dt))}lt.useEffect(function(){it({type:"RESET"})},[it,P]),lt.useEffect(function(){if(!P)return;const Z=B?Object.assign(Object.assign({},P),B):P,Kt=VU(Z);C&&(Kt.onProgress=C),S&&(Kt.onPassword=S);const Ft=Kt,Vt=Ft.promise.then(Gt=>{it({type:"RESOLVE",value:Gt})}).catch(Gt=>{Ft.destroyed||it({type:"REJECT",error:Gt})});return()=>{Vt.finally(()=>Ft.destroy())}},[B,it,P]),lt.useEffect(()=>{if(!(typeof ut>"u")){if(ut===!1){Bt();return}wt()}},[ut]),lt.useEffect(function(){j.current.setViewer(J.current),j.current.setExternalLinkRel(a),j.current.setExternalLinkTarget(l)},[a,l]);const Ut=lt.useCallback((re,Z)=>{tt.current[re]=Z},[]),Wt=lt.useCallback(re=>{delete tt.current[re]},[]),ve=lt.useMemo(()=>({imageResourcesPath:m,linkService:j.current,onItemClick:_,pdf:ut,registerPage:Ut,renderMode:N,rotate:I,unregisterPage:Wt}),[m,_,ut,Ut,N,I,Wt]),ee=lt.useMemo(()=>QU(F,()=>ut),[F,ut]);function Ye(){return k.jsx(XU.Provider,{value:ve,children:n})}function we(){return u?ut==null?k.jsx(sv,{type:"loading",children:typeof g=="function"?g():g}):ut===!1?k.jsx(sv,{type:"error",children:typeof r=="function"?r():r}):Ye():k.jsx(sv,{type:"no-data",children:typeof v=="function"?v():v})}return k.jsx("div",Object.assign({className:GM("react-pdf__Document",s),ref:f,style:{"--scale-factor":"1"}},ee,{children:we()}))});function WU(){return lt.useContext(XU)}function KU(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=i.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(r){e.forEach(function(a){typeof a=="function"?a(r):a&&(a.current=r)})}}const JU=lt.createContext(null),ZU={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Wit=/^H(\d+)$/;function Kit(i){return i in ZU}function VM(i){return"children"in i}function $U(i){return VM(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function Jit(i){const t={};if(VM(i)){const{role:e}=i,n=e.match(Wit);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(Kit(e)){const s=ZU[e];s&&(t.role=s)}}return t}function tP(i){const t={};if(VM(i)){if(i.alt!==void 0&&(t["aria-label"]=i.alt),i.lang!==void 0&&(t.lang=i.lang),$U(i)){const[e]=i.children;if(e){const n=tP(e);return Object.assign(Object.assign({},t),n)}}}else"id"in i&&(t["aria-owns"]=i.id);return t}function Zit(i){return i?Object.assign(Object.assign({},Jit(i)),tP(i)):null}function eP({className:i,node:t}){const e=lt.useMemo(()=>Zit(t),[t]),n=lt.useMemo(()=>!VM(t)||$U(t)?null:t.children.map((s,r)=>k.jsx(eP,{node:s},r)),[t]);return k.jsx("span",Object.assign({className:i},e,{children:n}))}function QM(){return lt.useContext(JU)}function $it(){const i=QM();Si(i);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=i,[n,s]=Ay(),{value:r,error:a}=n,{customTextRenderer:l,page:u}=i;function f(){r&&e&&e(r)}function m(){a&&(na(!1,a.toString()),t&&t(a))}return lt.useEffect(function(){s({type:"RESET"})},[s,u]),lt.useEffect(function(){if(l||!u)return;const v=Qx(u.getStructTree()),_=v;return v.promise.then(b=>{s({type:"RESOLVE",value:b})}).catch(b=>{s({type:"REJECT",error:b})}),()=>t0(_)},[l,u,s]),lt.useEffect(()=>{if(r!==void 0){if(r===!1){m();return}f()}},[r]),r?k.jsx(eP,{className:"react-pdf__Page__structTree structTree",node:r}):null}const tD=GU;function tst(i){const t=QM();Si(t);const e=Object.assign(Object.assign({},t),i),{_className:n,canvasBackground:s,devicePixelRatio:r=zit(),onRenderError:a,onRenderSuccess:l,page:u,renderForms:f,renderTextLayer:m,rotate:g,scale:v}=e,{canvasRef:_}=i;Si(u);const b=lt.useRef(null);function C(){u&&l&&l(dw(u,v))}function M(B){kit(B)||(na(!1,B.toString()),a&&a(B))}const S=lt.useMemo(()=>u.getViewport({scale:v*r,rotation:g}),[r,u,g,v]),R=lt.useMemo(()=>u.getViewport({scale:v,rotation:g}),[u,g,v]);lt.useEffect(function(){if(!u)return;u.cleanup();const{current:N}=b;if(!N)return;N.width=S.width,N.height=S.height,N.style.width=`${Math.floor(R.width)}px`,N.style.height=`${Math.floor(R.height)}px`,N.style.visibility="hidden";const I={annotationMode:f?tD.ENABLE_FORMS:tD.ENABLE,canvasContext:N.getContext("2d",{alpha:!1}),viewport:S};s&&(I.background=s);const F=u.render(I),z=F;return F.promise.then(()=>{N.style.visibility="",C()}).catch(M),()=>t0(z)},[s,u,f,S,R]);const D=lt.useCallback(()=>{const{current:B}=b;B&&(B.width=0,B.height=0)},[]);return lt.useEffect(()=>D,[D]),k.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:KU(_,b),style:{display:"block",userSelect:"none"},children:m?k.jsx($it,{}):null})}function est(i){return"str"in i}function nst(){const i=QM();Si(i);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:a,pageIndex:l,pageNumber:u,rotate:f,scale:m}=i;Si(a);const[g,v]=Ay(),{value:_,error:b}=g,C=lt.useRef(null);na(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function M(){_&&n&&n(_)}function S(){b&&(na(!1,b.toString()),e&&e(b))}lt.useEffect(function(){v({type:"RESET"})},[a,v]),lt.useEffect(function(){if(!a)return;const z=Qx(a.getTextContent()),U=z;return z.promise.then(P=>{v({type:"RESOLVE",value:P})}).catch(P=>{v({type:"REJECT",error:P})}),()=>t0(U)},[a,v]),lt.useEffect(()=>{if(_!==void 0){if(_===!1){S();return}M()}},[_]);const R=lt.useCallback(()=>{r&&r()},[r]),D=lt.useCallback(F=>{na(!1,F.toString()),s&&s(F)},[s]);function B(){const F=C.current;F&&F.classList.add("selecting")}function N(){const F=C.current;F&&F.classList.remove("selecting")}const I=lt.useMemo(()=>a.getViewport({scale:m,rotation:f}),[a,f,m]);return lt.useLayoutEffect(function(){if(!a||!_)return;const{current:z}=C;if(!z)return;z.innerHTML="";const U=a.streamTextContent({includeMarkedContent:!0}),P={container:z,textContentSource:U,viewport:I},X=new kU(P),ot=X;return X.render().then(()=>{const it=document.createElement("div");it.className="endOfContent",z.append(it);const ut=z.querySelectorAll('[role="presentation"]');if(t){let dt=0;_.items.forEach((j,tt)=>{if(!est(j))return;const nt=ut[dt];if(!nt)return;const _t=t(Object.assign({pageIndex:l,pageNumber:u,itemIndex:tt},j));nt.innerHTML=_t,dt+=j.str&&j.hasEOL?2:1})}R()}).catch(D),()=>t0(ot)},[t,D,R,a,l,u,_,I]),k.jsx("div",{className:GM("react-pdf__Page__textContent","textLayer"),onMouseUp:N,onMouseDown:B,ref:C})}function ist(){const i=WU(),t=QM();Si(t);const e=Object.assign(Object.assign({},i),t),{imageResourcesPath:n,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:u,page:f,pdf:m,renderForms:g,rotate:v,scale:_=1}=e;Si(m),Si(f),Si(s);const[b,C]=Ay(),{value:M,error:S}=b,R=lt.useRef(null);na(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function D(){M&&a&&a(M)}function B(){S&&(na(!1,S.toString()),r&&r(S))}lt.useEffect(function(){C({type:"RESET"})},[C,f]),lt.useEffect(function(){if(!f)return;const U=Qx(f.getAnnotations()),P=U;return U.promise.then(X=>{C({type:"RESOLVE",value:X})}).catch(X=>{C({type:"REJECT",error:X})}),()=>{t0(P)}},[C,f]),lt.useEffect(()=>{if(M!==void 0){if(M===!1){B();return}D()}},[M]);function N(){u&&u()}function I(z){na(!1,`${z}`),l&&l(z)}const F=lt.useMemo(()=>f.getViewport({scale:_,rotation:v}),[f,v,_]);return lt.useEffect(function(){if(!m||!f||!s||!M)return;const{current:U}=R;if(!U)return;const P=F.clone({dontFlip:!0}),X={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:U,l10n:null,page:f,structTreeLayer:null,viewport:P},ot={annotations:M,annotationStorage:m.annotationStorage,div:U,imageResourcesPath:n,linkService:s,page:f,renderForms:g,viewport:P};U.innerHTML="";try{new zU(X).render(ot),N()}catch(it){I(it)}return()=>{}},[M,n,s,f,m,g,F]),k.jsx("div",{className:GM("react-pdf__Page__annotations","annotationLayer"),ref:R})}var sst=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e};const eD=1;function rst(i){const t=WU(),e=Object.assign(Object.assign({},t),i),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:a,children:l,className:u,customRenderer:f,customTextRenderer:m,devicePixelRatio:g,error:v="Failed to load the page.",height:_,inputRef:b,loading:C="Loading page…",noData:M="No page specified.",onGetAnnotationsError:S,onGetAnnotationsSuccess:R,onGetStructTreeError:D,onGetStructTreeSuccess:B,onGetTextError:N,onGetTextSuccess:I,onLoadError:F,onLoadSuccess:z,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:P,onRenderError:X,onRenderSuccess:ot,onRenderTextLayerError:it,onRenderTextLayerSuccess:ut,pageIndex:dt,pageNumber:j,pdf:tt,registerPage:nt,renderAnnotationLayer:_t=!0,renderForms:J=!1,renderMode:at="canvas",renderTextLayer:xt=!0,rotate:Et,scale:ct=eD,unregisterPage:wt,width:Bt}=e,Ut=sst(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Wt,ve]=Ay(),{value:ee,error:Ye}=Wt,we=lt.useRef(null);Si(tt);const re=xm(j)?j-1:dt??null,Z=j??(xm(dt)?dt+1:null),Kt=Et??(ee?ee.rotate:null),Ft=lt.useMemo(()=>{if(!ee)return null;let ne=1;const te=ct??eD;if(Bt||_){const ge=ee.getViewport({scale:1,rotation:Kt});Bt?ne=Bt/ge.width:_&&(ne=_/ge.height)}return te*ne},[_,ee,Kt,ct,Bt]);lt.useEffect(function(){return()=>{xm(re)&&s&&wt&&wt(re)}},[s,tt,re,wt]);function Vt(){if(z){if(!ee||!Ft)return;z(dw(ee,Ft))}if(s&&nt){if(!xm(re)||!we.current)return;nt(re,we.current)}}function Gt(){Ye&&(na(!1,Ye.toString()),F&&F(Ye))}lt.useEffect(function(){ve({type:"RESET"})},[ve,tt,re]),lt.useEffect(function(){if(!tt||!Z)return;const te=Qx(tt.getPage(Z)),ge=te;return te.promise.then(De=>{ve({type:"RESOLVE",value:De})}).catch(De=>{ve({type:"REJECT",error:De})}),()=>t0(ge)},[ve,tt,Z]),lt.useEffect(()=>{if(ee!==void 0){if(ee===!1){Gt();return}Vt()}},[ee,Ft]);const be=lt.useMemo(()=>ee&&xm(re)&&Z&&xm(Kt)&&xm(Ft)?{_className:n,canvasBackground:r,customTextRenderer:m,devicePixelRatio:g,onGetAnnotationsError:S,onGetAnnotationsSuccess:R,onGetStructTreeError:D,onGetStructTreeSuccess:B,onGetTextError:N,onGetTextSuccess:I,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:P,onRenderError:X,onRenderSuccess:ot,onRenderTextLayerError:it,onRenderTextLayerSuccess:ut,page:ee,pageIndex:re,pageNumber:Z,renderForms:J,renderTextLayer:xt,rotate:Kt,scale:Ft}:null,[n,r,m,g,S,R,D,B,N,I,U,P,X,ot,it,ut,ee,re,Z,J,xt,Kt,Ft]),qt=lt.useMemo(()=>QU(Ut,()=>ee&&(Ft?dw(ee,Ft):void 0)),[Ut,ee,Ft]),$=`${re}@${Ft}/${Kt}`;function Q(){switch(at){case"custom":return Si(f),k.jsx(f,{},`${$}_custom`);case"none":return null;case"canvas":default:return k.jsx(tst,{canvasRef:a},`${$}_canvas`)}}function vt(){return xt?k.jsx(nst,{},`${$}_text`):null}function It(){return _t?k.jsx(ist,{},`${$}_annotations`):null}function jt(){return k.jsxs(JU.Provider,{value:be,children:[Q(),vt(),It(),l]})}function Ot(){return Z?tt===null||ee===void 0||ee===null?k.jsx(sv,{type:"loading",children:typeof C=="function"?C():C}):tt===!1||ee===!1?k.jsx(sv,{type:"error",children:typeof v=="function"?v():v}):jt():k.jsx(sv,{type:"no-data",children:typeof M=="function"?M():M})}return k.jsx("div",Object.assign({className:GM(n,u),"data-page-number":Z,ref:KU(b,we),style:{"--scale-factor":`${Ft}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},qt,{children:Ot()}))}Git();P7.workerSrc="pdf.worker.mjs";function ast(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 36.57142857142857 0 Q 20.571428571428573 0 10.285714285714286 10.285714285714286 L 10.285714285714286 10.285714285714286 L 10.285714285714286 10.285714285714286 Q 0 20.571428571428573 0 36.57142857142857 L 0 146.28571428571428 L 0 146.28571428571428 Q 0 162.28571428571428 10.285714285714286 172.57142857142858 Q 20.571428571428573 182.85714285714286 36.57142857142857 182.85714285714286 Q 52.57142857142857 182.85714285714286 62.857142857142854 172.57142857142858 Q 73.14285714285714 162.28571428571428 73.14285714285714 146.28571428571428 L 73.14285714285714 73.14285714285714 L 73.14285714285714 73.14285714285714 L 146.28571428571428 73.14285714285714 L 146.28571428571428 73.14285714285714 Q 162.28571428571428 73.14285714285714 172.57142857142858 62.857142857142854 Q 182.85714285714286 52.57142857142857 182.85714285714286 36.57142857142857 Q 182.85714285714286 20.571428571428573 172.57142857142858 10.285714285714286 Q 162.28571428571428 0 146.28571428571428 0 L 36.57142857142857 0 L 36.57142857142857 0 Z M 73.14285714285714 365.7142857142857 Q 73.14285714285714 349.7142857142857 62.857142857142854 339.42857142857144 L 62.857142857142854 339.42857142857144 L 62.857142857142854 339.42857142857144 Q 52.57142857142857 329.14285714285717 36.57142857142857 329.14285714285717 Q 20.571428571428573 329.14285714285717 10.285714285714286 339.42857142857144 Q 0 349.7142857142857 0 365.7142857142857 L 0 475.42857142857144 L 0 475.42857142857144 Q 0 491.42857142857144 10.285714285714286 501.7142857142857 Q 20.571428571428573 512 36.57142857142857 512 L 146.28571428571428 512 L 146.28571428571428 512 Q 162.28571428571428 512 172.57142857142858 501.7142857142857 Q 182.85714285714286 491.42857142857144 182.85714285714286 475.42857142857144 Q 182.85714285714286 459.42857142857144 172.57142857142858 449.14285714285717 Q 162.28571428571428 438.85714285714283 146.28571428571428 438.85714285714283 L 73.14285714285714 438.85714285714283 L 73.14285714285714 438.85714285714283 L 73.14285714285714 365.7142857142857 L 73.14285714285714 365.7142857142857 Z M 365.7142857142857 0 Q 349.7142857142857 0 339.42857142857144 10.285714285714286 L 339.42857142857144 10.285714285714286 L 339.42857142857144 10.285714285714286 Q 329.14285714285717 20.571428571428573 329.14285714285717 36.57142857142857 Q 329.14285714285717 52.57142857142857 339.42857142857144 62.857142857142854 Q 349.7142857142857 73.14285714285714 365.7142857142857 73.14285714285714 L 438.85714285714283 73.14285714285714 L 438.85714285714283 73.14285714285714 L 438.85714285714283 146.28571428571428 L 438.85714285714283 146.28571428571428 Q 438.85714285714283 162.28571428571428 449.14285714285717 172.57142857142858 Q 459.42857142857144 182.85714285714286 475.42857142857144 182.85714285714286 Q 491.42857142857144 182.85714285714286 501.7142857142857 172.57142857142858 Q 512 162.28571428571428 512 146.28571428571428 L 512 36.57142857142857 L 512 36.57142857142857 Q 512 20.571428571428573 501.7142857142857 10.285714285714286 Q 491.42857142857144 0 475.42857142857144 0 L 365.7142857142857 0 L 365.7142857142857 0 Z M 512 365.7142857142857 Q 512 349.7142857142857 501.7142857142857 339.42857142857144 L 501.7142857142857 339.42857142857144 L 501.7142857142857 339.42857142857144 Q 491.42857142857144 329.14285714285717 475.42857142857144 329.14285714285717 Q 459.42857142857144 329.14285714285717 449.14285714285717 339.42857142857144 Q 438.85714285714283 349.7142857142857 438.85714285714283 365.7142857142857 L 438.85714285714283 438.85714285714283 L 438.85714285714283 438.85714285714283 L 365.7142857142857 438.85714285714283 L 365.7142857142857 438.85714285714283 Q 349.7142857142857 438.85714285714283 339.42857142857144 449.14285714285717 Q 329.14285714285717 459.42857142857144 329.14285714285717 475.42857142857144 Q 329.14285714285717 491.42857142857144 339.42857142857144 501.7142857142857 Q 349.7142857142857 512 365.7142857142857 512 L 475.42857142857144 512 L 475.42857142857144 512 Q 491.42857142857144 512 501.7142857142857 501.7142857142857 Q 512 491.42857142857144 512 475.42857142857144 L 512 365.7142857142857 L 512 365.7142857142857 Z"})})}function ost(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 128 0 Q 101 1 83 19 L 83 19 L 83 19 Q 65 37 64 64 L 64 448 L 64 448 Q 65 475 83 493 Q 101 511 128 512 L 384 512 L 384 512 Q 411 511 429 493 Q 447 475 448 448 L 448 160 L 448 160 L 320 160 L 320 160 Q 306 160 297 151 Q 288 142 288 128 L 288 0 L 288 0 L 128 0 L 128 0 Z M 320 0 L 320 128 L 320 0 L 320 128 L 448 128 L 448 128 L 320 0 L 320 0 Z M 280 232 L 280 334 L 280 232 L 280 334 L 311 303 L 311 303 Q 328 289 345 303 Q 359 320 345 337 L 273 409 L 273 409 Q 256 423 239 409 L 167 337 L 167 337 Q 153 320 167 303 Q 184 289 201 303 L 232 334 L 232 334 L 232 232 L 232 232 Q 234 210 256 208 Q 278 210 280 232 L 280 232 Z"})})}const lst=ie.div`
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  width: 100%;
  z-index: 100;
  background-color: rgba(255, 255, 255, 0.5);
`,cst=ie.img`
  width: 8rem;
`,nD=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAGCAYAAABuFqY0AAAAAXNSR0IArs4c6QAAAFRJREFUOI1jrKys/M+ABbS3tzPC2NnZ2VjVTJ06Fa7Gzc0Nq5pdu3bB1RgbG2NVc/bsWbgacXFxrGpevnwJV8PHx4dVDRM2waEKRj0zWMGoZwYrAAArJhU1ws9KfwAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAGCAYAAABuFqY0AAAAAXNSR0IArs4c6QAAAFRJREFUOI1j5OPj+8+ABXz69IkRxq6srMSqpr29Ha4mOzsbq5qpU6fC1bi5uWFVs2vXLrgaY2NjrGrOnj0LVyMuLo5VDRM2waEKRj0zWMGoZwYrAACXJhVQyOEnmQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAGCAYAAABuFqY0AAAAAXNSR0IArs4c6QAAAFRJREFUOI1jFBcX/8+ABbx8+ZIRxubj48Oq5tOnT3A1lZWVWNW0t7fD1WRnZ2NVM3XqVLgaNzc3rGp27doFV2NsbIxVDRM2waEKRj0zWMGoZwYrAADnNRWkJS54aAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAGCAYAAABuFqY0AAAAAXNSR0IArs4c6QAAAFRJREFUOI1jNDY2/s+ABZw9e5YRxhYXF8eq5uXLl3A1fHx8WNV8+vQJrqayshKrmvb2dria7OxsrGqmTp0KV+Pm5oZVDRM2waEKRj0zWMGoZwYrAADLRBXdUVYF0QAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAGCAYAAABuFqY0AAAAAXNSR0IArs4c6QAAAFRJREFUOI1jdHNz+8+ABezatYsRxjY2Nsaq5uzZs3A14uLiWNW8fPkSroaPjw+rmk+fPsHVVFZWYlXT3t4OV5OdnY1VDRM2waEKRj0zWMGoZwYrAACHYhZMkLP7WAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAGCAYAAABuFqY0AAAAAXNSR0IArs4c6QAAAFRJREFUOI1jzM7O/s+ABUydOpURxnZzc8OqZteuXXA1xsbGWNWcPXsWrkZcXByrmpcvX8LV8PHxYVXz6dMnuJrKykqsapiwCQ5VMOqZwQpGPTNYAQAvcRZ2QUm+2gAAAABJRU5ErkJggg=="],iD=["cursor-loading-start","cursor-loading-mid","cursor-loading-end"],sD=300;function nP(){const[i,t]=lt.useState(0),[e,n]=lt.useState(0),s=lt.useRef(performance.now()),r=lt.useRef(performance.now()),a=lt.useRef(0);return lt.useEffect(()=>{const l=u=>{const f=u-s.current,m=u-r.current;f>=sD&&(t(g=>(g+1)%nD.length),s.current=u),m>=sD*2&&(n(g=>(g+1)%iD.length),r.current=u),a.current=requestAnimationFrame(l)};return a.current=requestAnimationFrame(l),()=>{a.current&&cancelAnimationFrame(a.current)}},[]),k.jsx(lst,{className:iD[e],children:k.jsx(cst,{src:nD[i],alt:"Loading frame"})})}P7.workerSrc="pdfjs/pdf.worker.min.mjs";const o5="pdf/cv_antonov_mykyta.pdf";function ust({modal:i}){const[t,e]=lt.useState(!0),n=()=>{window.open(o5,"_blank","noopener noreferrer")},s=async()=>{fetch(o5).then(r=>{r.blob().then(a=>{const l=window.URL.createObjectURL(a),u=document.createElement("a");u.href=l,u.download="cv_antonov_mykyta.pdf",u.click()})})};return k.jsxs(dp,{modal:i,buttons:[{Icon:k.jsx(ast,{}),onClick:n,key:"expand"},{Icon:k.jsx(ost,{}),onClick:()=>setTimeout(s,0),key:"download"}],children:[t&&k.jsx(nP,{}),k.jsx(Yit,{onLoadSuccess:()=>e(!1),onLoadError:()=>e(!1),file:o5,children:k.jsx(rst,{width:i.dimensions.width,renderTextLayer:!1,renderAnnotationLayer:!1,pageNumber:1})})]})}const hst=ie.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  padding: 0.5rem;
`;ie.div`
  display: flex;
  width: 100%;
  // padding-left: 50px;
  // padding-top: 10px;
  // height: 50px;
`;ie.button`
  position: relative;
  // width: 120px;
  height: 100%;
  background-color: ${({backgroundColor:i})=>i};

  border: 2px solid ${({theme:i})=>i.pallet.textColor};
  border-bottom: ${({backgroundColor:i})=>`0.15rem solid ${i}`};
  border-top-left-radius: 4px;
  border-top-right-radius: 50%;
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;

  // margin-right: -32px;
  // transform: translateY(2px);

  z-index: ${({zIndex:i,isActive:t})=>t?10:i};

  color: ${({isActive:i})=>i?"var(--white-color)":"inherit"};

  &:hover {
    color: var(--white-color);
  }
`;const fst=ie.div`
  display: flex;
  width: 100%;
  height: 100%;
  background-color: ${({backgroundColor:i})=>i||"var(--white-color)"};
  z-index: 100;
  border: 2px solid ${({theme:i})=>i.pallet.textColor};
  // border-top-left-radius: 10px;
  // border-top-right-radius: 10px;
  // border-bottom-left-radius: 0;
  // border-bottom-right-radius: 0;
  border-radius: 0.3rem;
  padding: 0.5rem;
`,dst=ie.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  gap: 1rem;
`,E4=ie.input`
  width: 100%;
  height: 1.5rem;
  background-color: var(--white-color);
  border-radius: 0.2rem;
  font-weight: 600;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  outline: none;
  padding: 1rem 0.5rem;

  &:disabled {
    color: gray;
    cursor: url("/vibefolio/cursor/Win95Stop.cur"), not-allowed;
  }
`,l5=ie.label`
  display: flex;
  align-items: center;
  color: var(--white-color);

  span {
    display: inline-block;
    width: 5rem;
  }
`,rD=ie.div`
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  width: 100%;
  height: fit-content;
`,pst=ie.textarea`
  width: 100%;
  height: 100%;
  border-radius: 0.2rem;
  resize: none;
  outline: none;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
`,mst=ie.div`
  display: flex;
  justify-content: flex-end;
  align-items: center;
`,gst=ie.button`
  width: fit-content;
  padding: 0.25rem;
  font-weight: 600;
  border-radius: 0.2rem;
  color: var(--white-color);
  box-shadow: 2px 2px 0px 1px rgba(0, 0, 0, 0.75);
`;ie.div`
  display: grid;
  // grid-template-columns: 150px 1fr;
  width: 100%;
  background-color: ${({theme:i})=>i.pallet.thirdColor};
  border-radius: 0.2rem;
`;ie.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  border-right: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
`;ie.button`
  display: flex;
  flex-direction: column;
  align-items: self-start;
  width: 100%;
  height: min-content;
  line-height: 1.2;
  // padding: 4px 2px;
`;ie.span`
  display: inline-block;
  font-weight: 900;

  max-width: 98%;
  white-space: nowrap;
  overflow: hidden !important;
  text-overflow: ellipsis;
`;ie.span`
  display: inline-block;
  font-weight: 600;
  font-family: "monospace";

  max-width: 98%;
  white-space: nowrap;
  overflow: hidden !important;
  text-overflow: ellipsis;
`;ie.span`
  display: inline-block;
  opacity: 0.7;

  max-width: 98%;
  white-space: nowrap;
  overflow: hidden !important;
  text-overflow: ellipsis;
`;ie.div`
  display: flex;
  flex-direction: column;
  width: 100%;
`;class jx{constructor(t=0,e="Network Error"){this.status=t,this.text=e}}const vst=()=>{if(!(typeof localStorage>"u"))return{get:i=>Promise.resolve(localStorage.getItem(i)),set:(i,t)=>Promise.resolve(localStorage.setItem(i,t)),remove:i=>Promise.resolve(localStorage.removeItem(i))}},Br={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:vst()},F7=i=>i?typeof i=="string"?{publicKey:i}:i.toString()==="[object Object]"?i:{}:{},yst=(i,t="https://api.emailjs.com")=>{if(!i)return;const e=F7(i);Br.publicKey=e.publicKey,Br.blockHeadless=e.blockHeadless,Br.storageProvider=e.storageProvider,Br.blockList=e.blockList,Br.limitRate=e.limitRate,Br.origin=e.origin||t},iP=async(i,t,e={})=>{const n=await fetch(Br.origin+i,{method:"POST",headers:e,body:t}),s=await n.text(),r=new jx(n.status,s);if(n.ok)return r;throw r},sP=(i,t,e)=>{if(!i||typeof i!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e||typeof e!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},_st=i=>{if(i&&i.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},rP=i=>i.webdriver||!i.languages||i.languages.length===0,aP=()=>new jx(451,"Unavailable For Headless Browser"),Ast=(i,t)=>{if(!Array.isArray(i))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},xst=i=>{var t;return!((t=i.list)!=null&&t.length)||!i.watchVariable},bst=(i,t)=>i instanceof FormData?i.get(t):i[t],oP=(i,t)=>{if(xst(i))return!1;Ast(i.list,i.watchVariable);const e=bst(t,i.watchVariable);return typeof e!="string"?!1:i.list.includes(e)},lP=()=>new jx(403,"Forbidden"),Sst=(i,t)=>{if(typeof i!="number"||i<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},Est=async(i,t,e)=>{const n=Number(await e.get(i)||0);return t-Date.now()+n},cP=async(i,t,e)=>{if(!t.throttle||!e)return!1;Sst(t.throttle,t.id);const n=t.id||i;return await Est(n,t.throttle,e)>0?!0:(await e.set(n,Date.now().toString()),!1)},uP=()=>new jx(429,"Too Many Requests"),Mst=async(i,t,e,n)=>{const s=F7(n),r=s.publicKey||Br.publicKey,a=s.blockHeadless||Br.blockHeadless,l=s.storageProvider||Br.storageProvider,u={...Br.blockList,...s.blockList},f={...Br.limitRate,...s.limitRate};return a&&rP(navigator)?Promise.reject(aP()):(sP(r,i,t),_st(e),e&&oP(u,e)?Promise.reject(lP()):await cP(location.pathname,f,l)?Promise.reject(uP()):iP("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:r,service_id:i,template_id:t,template_params:e}),{"Content-type":"application/json"}))},Tst=i=>{if(!i||i.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Cst=i=>typeof i=="string"?document.querySelector(i):i,wst=async(i,t,e,n)=>{const s=F7(n),r=s.publicKey||Br.publicKey,a=s.blockHeadless||Br.blockHeadless,l=Br.storageProvider||s.storageProvider,u={...Br.blockList,...s.blockList},f={...Br.limitRate,...s.limitRate};if(a&&rP(navigator))return Promise.reject(aP());const m=Cst(e);sP(r,i,t),Tst(m);const g=new FormData(m);return oP(u,g)?Promise.reject(lP()):await cP(location.pathname,f,l)?Promise.reject(uP()):(g.append("lib_version","4.4.1"),g.append("service_id",i),g.append("template_id",t),g.append("user_id",r),iP("/api/v1.0/email/send-form",g))},Rst={init:yst,send:Mst,sendForm:wst,EmailJSResponseStatus:jx};function Lst(){const[i,t]=lt.useState(!1),e=lt.useRef(null),n=lp(),s=async r=>{if(r.preventDefault(),!!e.current){t(!0);try{await Rst.sendForm("service_lm3u50h","template_7vobhdn",e.current,{publicKey:"omhAz0lvyswze0XoT"}),n(q5(`The letter has been sent. 
I will contact you soon 😊`))}catch(a){console.error(a),n(q5("I apologize, something went wrong 😣","fail"))}finally{t(!1)}}};return k.jsxs(dst,{ref:e,onSubmit:s,children:[i&&k.jsx(nP,{}),k.jsxs(rD,{children:[k.jsxs(l5,{children:[k.jsx("span",{children:"From:"}),k.jsx(E4,{type:"email",name:"email",required:!0})]}),k.jsxs(l5,{children:[k.jsx("span",{children:"To:"}),k.jsx(E4,{disabled:!0,type:"email",name:"fake_to",value:"Me"})]}),k.jsxs(l5,{children:[k.jsx("span",{children:"Name:"}),k.jsx(E4,{type:"text",name:"name",required:!0})]})]}),k.jsxs(rD,{style:{flexGrow:1},children:[k.jsx(E4,{placeholder:"Title",type:"text",name:"title",required:!0}),k.jsx(pst,{placeholder:"Message",name:"message",required:!0})]}),k.jsx(mst,{children:k.jsx(gst,{className:"cursor-pointer",type:"submit",children:"Send"})})]})}function Dst({modal:i}){return k.jsx(dp,{modal:i,children:k.jsx(hst,{children:k.jsx(fst,{backgroundColor:"#345995",children:k.jsx(Lst,{})})})})}const Bst=ie.div`
  display: grid;
  gap: 0.5rem;
  width: 100%;
  height: 100%;
  padding: 0.5rem;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(2, 1fr);
`,Ost=ie.div`
  width: 1fr;
  height: 1fr;
  border-radius: 0.3rem;
  background-color: ${({tileColor:i})=>i};
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
`,hP=["#BFECFF","#0B7189","#E55934","#C33C54","#50514F","#17301C"],fP={mainColor:"#BFECFF",secondColor:"#FFCCEA",thirdColor:"#FFF6E3",textColor:"#1D1C1A "},Nst={mainColor:"#000000",secondColor:"#CD1715",thirdColor:"#19260A",textColor:"#7DBB02"},Ist={name:"pastel",fontFamily:"'Manrope', sans-serif",pallet:fP,backgroundColors:hP},dP=_7({name:"themes",initialState:Ist,reducers:{changeTheme:(i,t)=>{switch(t.payload){case"pastel":return{name:"pastel",fontFamily:"'Manrope', sans-serif",pallet:fP,backgroundColors:hP};case"code":return{name:"code",fontFamily:"'VT323', monospace;",pallet:Nst,backgroundColors:[]}}},changeBackground:(i,t)=>{i.pallet.mainColor=t.payload}}}),{changeTheme:Srt,changeBackground:Ust}=dP.actions,Pst=dP.reducer;function Fst({modal:i}){const{backgroundColors:t}=VE(),e=lp(),n=s=>{e(Ust(s))};return k.jsx(dp,{modal:i,children:k.jsx(Bst,{children:t.map(s=>k.jsx(Ost,{tileColor:s,className:"cursor-pointer",onClick:()=>n(s)},s))})})}const aD=document.getElementById("modal-root");function Hst(){const i=xw(t=>t.modals);return!aD||i.modals.length===0?null:IN.createPortal(k.jsx(k.Fragment,{children:i.modals.filter(({isOpen:t})=>t).map(t=>{switch(t.type){case"photo":return k.jsx(V$,{modal:t},t.type);case"about_me":return k.jsx(j$,{modal:t},t.type);case"skills":return k.jsx(ttt,{modal:t},t.type);case"experience":return k.jsx(_tt,{modal:t},t.type);case"folder":return k.jsx(Ett,{modal:t},t.type);case"pdf":return k.jsx(ust,{modal:t},t.type);case"contact_me":return k.jsx(Dst,{modal:t},t.type);case"settings":return k.jsx(Fst,{modal:t},t.type);default:return null}})}),aD)}const zst=by`
  0%{
    animation-timing-function:$ease-in-quint;
    transform:scale(0.000,0.0001) translate3d(0,0,0);
    -webkit-filter:brightness(50);
    filter:brightness(50);
  }

  60%{
    transform:scale(1.3,0.001) translate3d(0,0,0);
    -webkit-filter:brightness(10);
    filter:brightness(10);
  }

  100%{
    transform:scale(1,1.3) translate3d(0,0,0);
    -webkit-filter:brightness(1);
    filter:brightness(1);
    opacity:1;
  }
`,Gst=ie.div`
  position: absolute;
  inset: 0;
  z-index: 9999;
  background-color: black;
`,kst=ie.div`
  width: 100%;
  height: 100%;
  animation: ${zst} 1s linear forwards;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: black;
`,Vst=ie.pre`
  font-family: monospace;
  color: #00ffcc;
`,Qst=ie.span`
  color: #ff6347;
`,oD=ie.span`
  color: #ffa500;
`,jst={arrow:"/vibefolio/cursor/Arrow1.cur",pointer:"/vibefolio/cursor/Hand2.cur",notAllowed:"/vibefolio/cursor/Win95Stop.cur",move:"/vibefolio/cursor/Win95Move.cur",loadingStart:"/vibefolio/cursor/Hourglass_Start.cur",loadingMid:"/vibefolio/cursor/Hourglass_Mid.cur",loadingEnd:"/vibefolio/cursor/Hourglass_End.cur"};function Xst({onFinish:i}){const{progress:t}=lW(),{start:e}=dN(),[n,s]=lt.useState(!1),[r,a]=lt.useState(!1),{playIntro:l,isLoaded:u,loadProgress:f}=DM(),m=t===100&&n&&u&&r,[g,v]=lt.useState(""),_=M=>new Promise((S,R)=>{const D=new Image;D.src=M,D.onload=()=>S(),D.onerror=()=>R()}),b=lt.useCallback(()=>{i(),l(),e()},[i,l,e]),C=lt.useCallback(M=>{M.key==="Enter"&&m&&b()},[m,b]);return lt.useEffect(()=>{const M=setInterval(()=>{v(S=>S==="..."?"":S+".")},300);return()=>clearInterval(M)},[]),lt.useEffect(()=>{const M=async()=>{const S=Object.entries(jst);await Promise.all(S.map(([,R])=>_(R))),a(!0)};document.fonts.ready.then(()=>s(!0)),M()},[]),lt.useEffect(()=>(window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)),[C]),k.jsx(Gst,{children:k.jsx(kst,{children:k.jsxs(Vst,{children:[["> Booting PortfolioOS v1.0",`> Loading 3D assets.... ${Math.round(t).toString().padEnd(3," ")}%`,`> Fonts system......... ${n?"OK":"LOADING"}`,`> Audio system......... ${u?"OK":`${Math.round(f)}%`}`,"> CRT Display.......... ONLINE"].join(`
`),k.jsxs(k.Fragment,{children:[`
> Employment status.... `,k.jsx(Qst,{children:"UNEMPLOYED"})]}),k.jsxs(k.Fragment,{children:[`
> Job seek subsystem... `,k.jsxs(oD,{children:["SCANNING NETWORK",g]})]}),k.jsxs(k.Fragment,{children:[`
> Floppy drive......... `,k.jsx(oD,{children:"NOT FOUND — SKIPPING"})]}),m&&k.jsxs(k.Fragment,{children:[`
> Boot sequence complete. Press `,k.jsx("span",{onClick:b,className:"cursor-pointer",style:{textDecoration:"underline"},children:"ENTER"})," to continue..."]})]})})})}const qst=by`
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
`,Yst=by`
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(100%);
  }
`,Wst=ie.div`
  position: fixed;
  bottom: 0;
  right: 0;
  padding: 0 0.5rem 0.5rem 0;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  align-items: flex-end;
  z-index: 1000;
  pointer-events: none;
`,Kst=ie.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  background-color: ${({theme:i})=>i.pallet.thirdColor};
  border-radius: 0.3rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  min-width: 12rem;
  min-height: 4rem;
  pointer-events: auto;
  transition: transform 0.3s ease;

  animation: ${({isVisible:i})=>i?q_`
          ${qst} 0.4s ease-out forwards
        `:q_`
          ${Yst} 0.4s ease-in forwards
        `};
`,Jst=ie.div`
  min-width: 2rem;
  min-height: 2rem;
  max-width: 2rem;
  max-height: 2rem;
`,Zst=ie.div`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
`,$st=ie.span`
  font-weight: 900;
`,trt=ie.span`
  font-size: 0.8rem;
  white-space: pre-line;
`;function ert(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 256 512 Q 326 511 384 478 L 384 478 L 384 478 Q 442 444 478 384 Q 512 323 512 256 Q 512 189 478 128 Q 442 68 384 34 Q 326 1 256 0 Q 186 1 128 34 Q 70 68 34 128 Q 0 189 0 256 Q 0 323 34 384 Q 70 444 128 478 Q 186 511 256 512 L 256 512 Z M 369 209 L 241 337 L 369 209 L 241 337 Q 224 351 207 337 L 143 273 L 143 273 Q 129 256 143 239 Q 160 225 177 239 L 224 286 L 224 286 L 335 175 L 335 175 Q 352 161 369 175 Q 383 192 369 209 L 369 209 Z"})})}function nrt(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 256 512 Q 326 511 384 478 L 384 478 L 384 478 Q 442 444 478 384 Q 512 323 512 256 Q 512 189 478 128 Q 442 68 384 34 Q 326 1 256 0 Q 186 1 128 34 Q 70 68 34 128 Q 0 189 0 256 Q 0 323 34 384 Q 70 444 128 478 Q 186 511 256 512 L 256 512 Z M 175 175 Q 192 161 209 175 L 256 222 L 256 222 L 303 175 L 303 175 Q 320 161 337 175 Q 351 192 337 209 L 290 256 L 290 256 L 337 303 L 337 303 Q 351 320 337 337 Q 320 351 303 337 L 256 290 L 256 290 L 209 337 L 209 337 Q 192 351 175 337 Q 161 320 175 303 L 222 256 L 222 256 L 175 209 L 175 209 Q 161 192 175 175 L 175 175 Z"})})}const irt={success:ert,fail:nrt};function srt({text:i,id:t,result:e="success",sound:n}){const s=lp(),[r,a]=lt.useState(!0);lt.useEffect(()=>{n&&n()},[]);const l=lt.useCallback(()=>{a(!1),setTimeout(()=>s(HZ(t)),400)},[s,t]);lt.useEffect(()=>{const f=setTimeout(l,5e3);return()=>clearTimeout(f)},[s,l,t]);const u=irt[e];return k.jsxs(Kst,{className:"cursor-pointer",onClick:l,isVisible:r,children:[k.jsx(Jst,{children:k.jsx(u,{fill:e==="success"?"green":"red"})}),k.jsxs(Zst,{children:[k.jsx($st,{children:e.charAt(0).toUpperCase()+e.slice(1)}),k.jsx(trt,{children:i})]})]})}const lD=document.getElementById("popup-root"),rrt={confirm:()=>k.jsx("div",{}),toast:srt};function art(){const{playNotification:i}=DM(),t=xw(e=>e.popups.popups.filter(n=>n.type==="toast"));return!lD||t.length===0?null:IN.createPortal(k.jsx(Wst,{children:t.map(e=>{const{type:n,id:s,text:r,result:a}=e,l=rrt[n];return l?k.jsx(l,{sound:i,result:a,text:r,id:s},s):null})}),lD)}const ort=1024,lrt=600;function crt(){const[i,t]=lt.useState(!0),[e,n]=lt.useState(!1),s=xw(l=>l.themes),{playClickDown:r,playClickUp:a}=DM();return lt.useEffect(()=>{if(e)return window.addEventListener("mousedown",r),window.addEventListener("mouseup",a),()=>{window.removeEventListener("mousedown",r),window.removeEventListener("mouseup",a)}},[e]),lt.useEffect(()=>{const l=()=>{const{innerWidth:u,innerHeight:f}=window;t(u>=ort&&f>=lrt)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),i?k.jsxs(oH,{theme:s,children:[k.jsx(dH,{}),k.jsx(fH,{}),!e&&k.jsx(Xst,{onFinish:()=>n(!0)}),k.jsxs(pH,{bootDone:e,children:[k.jsx(jJ,{}),k.jsx(b$,{}),k.jsx(Hst,{}),k.jsx(art,{})]})]}):k.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[k.jsx("h1",{children:"The screen is too small"}),k.jsx("span",{children:"Desktop only"}),k.jsx("br",{}),k.jsx("a",{href:"pdf/cv_antonov_mykyta.pdf",children:"PDF"})]})}const urt=TZ({reducer:{modals:f$,themes:Pst,popups:GZ}});cF.createRoot(document.getElementById("root")).render(k.jsx(lt.StrictMode,{children:k.jsx(RH,{store:urt,children:k.jsx($Z,{children:k.jsx(iK,{children:k.jsx(crt,{})})})})}));
