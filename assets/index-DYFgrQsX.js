var rF=Object.defineProperty;var MR=i=>{throw TypeError(i)};var aF=(i,t,e)=>t in i?rF(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Je=(i,t,e)=>aF(i,typeof t!="symbol"?t+"":t,e),wT=(i,t,e)=>t.has(i)||MR("Cannot "+e);var x=(i,t,e)=>(wT(i,t,"read from private field"),e?e.call(i):t.get(i)),W=(i,t,e)=>t.has(i)?MR("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),G=(i,t,e,n)=>(wT(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),V=(i,t,e)=>(wT(i,t,"access private method"),e);var Sa=(i,t,e,n)=>({set _(s){G(i,t,s,e)},get _(){return x(i,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function IE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var RT={exports:{}},k2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TR;function oF(){if(TR)return k2;TR=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,r){var a=null;if(r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),"key"in s){r={};for(var l in s)l!=="key"&&(r[l]=s[l])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:a,ref:s!==void 0?s:null,props:r}}return k2.Fragment=t,k2.jsx=e,k2.jsxs=e,k2}var CR;function lF(){return CR||(CR=1,RT.exports=oF()),RT.exports}var k=lF(),LT={exports:{}},hn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wR;function cF(){if(wR)return hn;wR=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(J){return J===null||typeof J!="object"?null:(J=g&&J[g]||J["@@iterator"],typeof J=="function"?J:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,T={};function E(J,ot,xt){this.props=J,this.context=ot,this.refs=T,this.updater=xt||_}E.prototype.isReactComponent={},E.prototype.setState=function(J,ot){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,ot,"setState")},E.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function S(){}S.prototype=E.prototype;function w(J,ot,xt){this.props=J,this.context=ot,this.refs=T,this.updater=xt||_}var D=w.prototype=new S;D.constructor=w,b(D,E.prototype),D.isPureReactComponent=!0;var B=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function F(J,ot,xt,Et,ct,wt){return xt=wt.ref,{$$typeof:i,type:J,key:ot,ref:xt!==void 0?xt:null,props:wt}}function z(J,ot){return F(J.type,ot,void 0,void 0,void 0,J.props)}function U(J){return typeof J=="object"&&J!==null&&J.$$typeof===i}function P(J){var ot={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(xt){return ot[xt]})}var X=/\/+/g;function lt(J,ot){return typeof J=="object"&&J!==null&&J.key!=null?P(""+J.key):ot.toString(36)}function it(){}function ut(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(it,it):(J.status="pending",J.then(function(ot){J.status==="pending"&&(J.status="fulfilled",J.value=ot)},function(ot){J.status==="pending"&&(J.status="rejected",J.reason=ot)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function dt(J,ot,xt,Et,ct){var wt=typeof J;(wt==="undefined"||wt==="boolean")&&(J=null);var Bt=!1;if(J===null)Bt=!0;else switch(wt){case"bigint":case"string":case"number":Bt=!0;break;case"object":switch(J.$$typeof){case i:case t:Bt=!0;break;case m:return Bt=J._init,dt(Bt(J._payload),ot,xt,Et,ct)}}if(Bt)return ct=ct(J),Bt=Et===""?"."+lt(J,0):Et,B(ct)?(xt="",Bt!=null&&(xt=Bt.replace(X,"$&/")+"/"),dt(ct,ot,xt,"",function(ve){return ve})):ct!=null&&(U(ct)&&(ct=z(ct,xt+(ct.key==null||J&&J.key===ct.key?"":(""+ct.key).replace(X,"$&/")+"/")+Bt)),ot.push(ct)),1;Bt=0;var Ut=Et===""?".":Et+":";if(B(J))for(var Wt=0;Wt<J.length;Wt++)Et=J[Wt],wt=Ut+lt(Et,Wt),Bt+=dt(Et,ot,xt,wt,ct);else if(Wt=v(J),typeof Wt=="function")for(J=Wt.call(J),Wt=0;!(Et=J.next()).done;)Et=Et.value,wt=Ut+lt(Et,Wt++),Bt+=dt(Et,ot,xt,wt,ct);else if(wt==="object"){if(typeof J.then=="function")return dt(ut(J),ot,xt,Et,ct);throw ot=String(J),Error("Objects are not valid as a React child (found: "+(ot==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":ot)+"). If you meant to render a collection of children, use an array instead.")}return Bt}function j(J,ot,xt){if(J==null)return J;var Et=[],ct=0;return dt(J,Et,"","",function(wt){return ot.call(xt,wt,ct++)}),Et}function tt(J){if(J._status===-1){var ot=J._result;ot=ot(),ot.then(function(xt){(J._status===0||J._status===-1)&&(J._status=1,J._result=xt)},function(xt){(J._status===0||J._status===-1)&&(J._status=2,J._result=xt)}),J._status===-1&&(J._status=0,J._result=ot)}if(J._status===1)return J._result.default;throw J._result}var nt=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ot=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(ot))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)};function _t(){}return hn.Children={map:j,forEach:function(J,ot,xt){j(J,function(){ot.apply(this,arguments)},xt)},count:function(J){var ot=0;return j(J,function(){ot++}),ot},toArray:function(J){return j(J,function(ot){return ot})||[]},only:function(J){if(!U(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},hn.Component=E,hn.Fragment=e,hn.Profiler=s,hn.PureComponent=w,hn.StrictMode=n,hn.Suspense=u,hn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,hn.__COMPILER_RUNTIME={__proto__:null,c:function(J){return N.H.useMemoCache(J)}},hn.cache=function(J){return function(){return J.apply(null,arguments)}},hn.cloneElement=function(J,ot,xt){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var Et=b({},J.props),ct=J.key,wt=void 0;if(ot!=null)for(Bt in ot.ref!==void 0&&(wt=void 0),ot.key!==void 0&&(ct=""+ot.key),ot)!I.call(ot,Bt)||Bt==="key"||Bt==="__self"||Bt==="__source"||Bt==="ref"&&ot.ref===void 0||(Et[Bt]=ot[Bt]);var Bt=arguments.length-2;if(Bt===1)Et.children=xt;else if(1<Bt){for(var Ut=Array(Bt),Wt=0;Wt<Bt;Wt++)Ut[Wt]=arguments[Wt+2];Et.children=Ut}return F(J.type,ct,void 0,void 0,wt,Et)},hn.createContext=function(J){return J={$$typeof:a,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:r,_context:J},J},hn.createElement=function(J,ot,xt){var Et,ct={},wt=null;if(ot!=null)for(Et in ot.key!==void 0&&(wt=""+ot.key),ot)I.call(ot,Et)&&Et!=="key"&&Et!=="__self"&&Et!=="__source"&&(ct[Et]=ot[Et]);var Bt=arguments.length-2;if(Bt===1)ct.children=xt;else if(1<Bt){for(var Ut=Array(Bt),Wt=0;Wt<Bt;Wt++)Ut[Wt]=arguments[Wt+2];ct.children=Ut}if(J&&J.defaultProps)for(Et in Bt=J.defaultProps,Bt)ct[Et]===void 0&&(ct[Et]=Bt[Et]);return F(J,wt,void 0,void 0,null,ct)},hn.createRef=function(){return{current:null}},hn.forwardRef=function(J){return{$$typeof:l,render:J}},hn.isValidElement=U,hn.lazy=function(J){return{$$typeof:m,_payload:{_status:-1,_result:J},_init:tt}},hn.memo=function(J,ot){return{$$typeof:f,type:J,compare:ot===void 0?null:ot}},hn.startTransition=function(J){var ot=N.T,xt={};N.T=xt;try{var Et=J(),ct=N.S;ct!==null&&ct(xt,Et),typeof Et=="object"&&Et!==null&&typeof Et.then=="function"&&Et.then(_t,nt)}catch(wt){nt(wt)}finally{N.T=ot}},hn.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},hn.use=function(J){return N.H.use(J)},hn.useActionState=function(J,ot,xt){return N.H.useActionState(J,ot,xt)},hn.useCallback=function(J,ot){return N.H.useCallback(J,ot)},hn.useContext=function(J){return N.H.useContext(J)},hn.useDebugValue=function(){},hn.useDeferredValue=function(J,ot){return N.H.useDeferredValue(J,ot)},hn.useEffect=function(J,ot,xt){var Et=N.H;if(typeof xt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Et.useEffect(J,ot)},hn.useId=function(){return N.H.useId()},hn.useImperativeHandle=function(J,ot,xt){return N.H.useImperativeHandle(J,ot,xt)},hn.useInsertionEffect=function(J,ot){return N.H.useInsertionEffect(J,ot)},hn.useLayoutEffect=function(J,ot){return N.H.useLayoutEffect(J,ot)},hn.useMemo=function(J,ot){return N.H.useMemo(J,ot)},hn.useOptimistic=function(J,ot){return N.H.useOptimistic(J,ot)},hn.useReducer=function(J,ot,xt){return N.H.useReducer(J,ot,xt)},hn.useRef=function(J){return N.H.useRef(J)},hn.useState=function(J){return N.H.useState(J)},hn.useSyncExternalStore=function(J,ot,xt){return N.H.useSyncExternalStore(J,ot,xt)},hn.useTransition=function(){return N.H.useTransition()},hn.version="19.1.0",hn}var RR;function e0(){return RR||(RR=1,LT.exports=cF()),LT.exports}var rt=e0();const Ba=IE(rt);var DT={exports:{}},V2={},BT={exports:{}},OT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LR;function uF(){return LR||(LR=1,function(i){function t(j,tt){var nt=j.length;j.push(tt);t:for(;0<nt;){var _t=nt-1>>>1,J=j[_t];if(0<s(J,tt))j[_t]=tt,j[nt]=J,nt=_t;else break t}}function e(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var tt=j[0],nt=j.pop();if(nt!==tt){j[0]=nt;t:for(var _t=0,J=j.length,ot=J>>>1;_t<ot;){var xt=2*(_t+1)-1,Et=j[xt],ct=xt+1,wt=j[ct];if(0>s(Et,nt))ct<J&&0>s(wt,Et)?(j[_t]=wt,j[ct]=nt,_t=ct):(j[_t]=Et,j[xt]=nt,_t=xt);else if(ct<J&&0>s(wt,nt))j[_t]=wt,j[ct]=nt,_t=ct;else break t}}return tt}function s(j,tt){var nt=j.sortIndex-tt.sortIndex;return nt!==0?nt:j.id-tt.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();i.unstable_now=function(){return a.now()-l}}var u=[],f=[],m=1,g=null,v=3,_=!1,b=!1,T=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function B(j){for(var tt=e(f);tt!==null;){if(tt.callback===null)n(f);else if(tt.startTime<=j)n(f),tt.sortIndex=tt.expirationTime,t(u,tt);else break;tt=e(f)}}function N(j){if(T=!1,B(j),!b)if(e(u)!==null)b=!0,I||(I=!0,lt());else{var tt=e(f);tt!==null&&dt(N,tt.startTime-j)}}var I=!1,F=-1,z=5,U=-1;function P(){return E?!0:!(i.unstable_now()-U<z)}function X(){if(E=!1,I){var j=i.unstable_now();U=j;var tt=!0;try{t:{b=!1,T&&(T=!1,w(F),F=-1),_=!0;var nt=v;try{e:{for(B(j),g=e(u);g!==null&&!(g.expirationTime>j&&P());){var _t=g.callback;if(typeof _t=="function"){g.callback=null,v=g.priorityLevel;var J=_t(g.expirationTime<=j);if(j=i.unstable_now(),typeof J=="function"){g.callback=J,B(j),tt=!0;break e}g===e(u)&&n(u),B(j)}else n(u);g=e(u)}if(g!==null)tt=!0;else{var ot=e(f);ot!==null&&dt(N,ot.startTime-j),tt=!1}}break t}finally{g=null,v=nt,_=!1}tt=void 0}}finally{tt?lt():I=!1}}}var lt;if(typeof D=="function")lt=function(){D(X)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,ut=it.port2;it.port1.onmessage=X,lt=function(){ut.postMessage(null)}}else lt=function(){S(X,0)};function dt(j,tt){F=S(function(){j(i.unstable_now())},tt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(j){switch(v){case 1:case 2:case 3:var tt=3;break;default:tt=v}var nt=v;v=tt;try{return j()}finally{v=nt}},i.unstable_requestPaint=function(){E=!0},i.unstable_runWithPriority=function(j,tt){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var nt=v;v=j;try{return tt()}finally{v=nt}},i.unstable_scheduleCallback=function(j,tt,nt){var _t=i.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?_t+nt:_t):nt=_t,j){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=nt+J,j={id:m++,callback:tt,priorityLevel:j,startTime:nt,expirationTime:J,sortIndex:-1},nt>_t?(j.sortIndex=nt,t(f,j),e(u)===null&&j===e(f)&&(T?(w(F),F=-1):T=!0,dt(N,nt-_t))):(j.sortIndex=J,t(u,j),b||_||(b=!0,I||(I=!0,lt()))),j},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(j){var tt=v;return function(){var nt=v;v=tt;try{return j.apply(this,arguments)}finally{v=nt}}}}(OT)),OT}var DR;function hF(){return DR||(DR=1,BT.exports=uF()),BT.exports}var NT={exports:{}},jr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BR;function fF(){if(BR)return jr;BR=1;var i=e0();function t(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(u,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:u,containerInfo:f,implementation:m}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return jr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,jr.createPortal=function(u,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return r(u,f,null,m)},jr.flushSync=function(u){var f=a.T,m=n.p;try{if(a.T=null,n.p=2,u)return u()}finally{a.T=f,n.p=m,n.d.f()}},jr.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(u,f))},jr.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},jr.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var m=f.as,g=l(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:_}):m==="script"&&n.d.X(u,{crossOrigin:g,integrity:v,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},jr.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=l(f.as,f.crossOrigin);n.d.M(u,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(u)},jr.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=l(m,f.crossOrigin);n.d.L(u,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},jr.preloadModule=function(u,f){if(typeof u=="string")if(f){var m=l(f.as,f.crossOrigin);n.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(u)},jr.requestFormReset=function(u){n.d.r(u)},jr.unstable_batchedUpdates=function(u,f){return u(f)},jr.useFormState=function(u,f,m){return a.H.useFormState(u,f,m)},jr.useFormStatus=function(){return a.H.useHostTransitionStatus()},jr.version="19.1.0",jr}var OR;function pD(){if(OR)return NT.exports;OR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),NT.exports=fF(),NT.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NR;function dF(){if(NR)return V2;NR=1;var i=hF(),t=e0(),e=pD();function n(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function r(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function a(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(r(o)!==o)throw Error(n(188))}function u(o){var c=o.alternate;if(!c){if(c=r(o),c===null)throw Error(n(188));return c!==o?null:o}for(var p=o,y=c;;){var M=p.return;if(M===null)break;var R=M.alternate;if(R===null){if(y=M.return,y!==null){p=y;continue}break}if(M.child===R.child){for(R=M.child;R;){if(R===p)return l(M),o;if(R===y)return l(M),c;R=R.sibling}throw Error(n(188))}if(p.return!==y.return)p=M,y=R;else{for(var H=!1,q=M.child;q;){if(q===p){H=!0,p=M,y=R;break}if(q===y){H=!0,y=M,p=R;break}q=q.sibling}if(!H){for(q=R.child;q;){if(q===p){H=!0,p=R,y=M;break}if(q===y){H=!0,y=R,p=M;break}q=q.sibling}if(!H)throw Error(n(189))}}if(p.alternate!==y)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?o:c}function f(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=f(o),c!==null)return c;o=o.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),D=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function lt(o){return o===null||typeof o!="object"?null:(o=X&&o[X]||o["@@iterator"],typeof o=="function"?o:null)}var it=Symbol.for("react.client.reference");function ut(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===it?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case E:return"Profiler";case T:return"StrictMode";case N:return"Suspense";case I:return"SuspenseList";case U:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case _:return"Portal";case D:return(o.displayName||"Context")+".Provider";case w:return(o._context.displayName||"Context")+".Consumer";case B:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case F:return c=o.displayName||null,c!==null?c:ut(o.type)||"Memo";case z:c=o._payload,o=o._init;try{return ut(o(c))}catch{}}return null}var dt=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt={pending:!1,data:null,method:null,action:null},_t=[],J=-1;function ot(o){return{current:o}}function xt(o){0>J||(o.current=_t[J],_t[J]=null,J--)}function Et(o,c){J++,_t[J]=o.current,o.current=c}var ct=ot(null),wt=ot(null),Bt=ot(null),Ut=ot(null);function Wt(o,c){switch(Et(Bt,c),Et(wt,o),Et(ct,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?$7(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=$7(c),o=tR(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}xt(ct),Et(ct,o)}function ve(){xt(ct),xt(wt),xt(Bt)}function ee(o){o.memoizedState!==null&&Et(Ut,o);var c=ct.current,p=tR(c,o.type);c!==p&&(Et(wt,o),Et(ct,p))}function Ye(o){wt.current===o&&(xt(ct),xt(wt)),Ut.current===o&&(xt(Ut),P2._currentValue=nt)}var we=Object.prototype.hasOwnProperty,re=i.unstable_scheduleCallback,Z=i.unstable_cancelCallback,Kt=i.unstable_shouldYield,Ft=i.unstable_requestPaint,Vt=i.unstable_now,Gt=i.unstable_getCurrentPriorityLevel,be=i.unstable_ImmediatePriority,qt=i.unstable_UserBlockingPriority,$=i.unstable_NormalPriority,Q=i.unstable_LowPriority,vt=i.unstable_IdlePriority,It=i.log,jt=i.unstable_setDisableYieldValue,Ot=null,ne=null;function te(o){if(typeof It=="function"&&jt(o),ne&&typeof ne.setStrictMode=="function")try{ne.setStrictMode(Ot,o)}catch{}}var ge=Math.clz32?Math.clz32:_e,De=Math.log,Jt=Math.LN2;function _e(o){return o>>>=0,o===0?32:31-(De(o)/Jt|0)|0}var Se=256,Te=4194304;function ce(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function rn(o,c,p){var y=o.pendingLanes;if(y===0)return 0;var M=0,R=o.suspendedLanes,H=o.pingedLanes;o=o.warmLanes;var q=y&134217727;return q!==0?(y=q&~R,y!==0?M=ce(y):(H&=q,H!==0?M=ce(H):p||(p=q&~o,p!==0&&(M=ce(p))))):(q=y&~R,q!==0?M=ce(q):H!==0?M=ce(H):p||(p=y&~o,p!==0&&(M=ce(p)))),M===0?0:c!==0&&c!==M&&(c&R)===0&&(R=M&-M,p=c&-c,R>=p||R===32&&(p&4194048)!==0)?c:M}function He(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Gn(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var o=Se;return Se<<=1,(Se&4194048)===0&&(Se=256),o}function ue(){var o=Te;return Te<<=1,(Te&62914560)===0&&(Te=4194304),o}function Nt(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function Qt(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function fe(o,c,p,y,M,R){var H=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var q=o.entanglements,st=o.expirationTimes,St=o.hiddenUpdates;for(p=H&~p;0<p;){var zt=31-ge(p),Xt=1<<zt;q[zt]=0,st[zt]=-1;var Tt=St[zt];if(Tt!==null)for(St[zt]=null,zt=0;zt<Tt.length;zt++){var Lt=Tt[zt];Lt!==null&&(Lt.lane&=-536870913)}p&=~Xt}y!==0&&he(o,y,0),R!==0&&M===0&&o.tag!==0&&(o.suspendedLanes|=R&~(H&~c))}function he(o,c,p){o.pendingLanes|=c,o.suspendedLanes&=~c;var y=31-ge(c);o.entangledLanes|=c,o.entanglements[y]=o.entanglements[y]|1073741824|p&4194090}function qe(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var y=31-ge(p),M=1<<y;M&c|o[y]&c&&(o[y]|=c),p&=~M}}function Jn(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ei(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Cn(){var o=tt.p;return o!==0?o:(o=window.event,o===void 0?32:_R(o.type))}function Ir(o,c){var p=tt.p;try{return tt.p=o,c()}finally{tt.p=p}}var ls=Math.random().toString(36).slice(2),Ji="__reactFiber$"+ls,cs="__reactProps$"+ls,$s="__reactContainer$"+ls,Ur="__reactEvents$"+ls,dp="__reactListeners$"+ls,oo="__reactHandles$"+ls,mr="__reactResources$"+ls,lo="__reactMarker$"+ls;function ti(o){delete o[Ji],delete o[cs],delete o[Ur],delete o[dp],delete o[oo]}function co(o){var c=o[Ji];if(c)return c;for(var p=o.parentNode;p;){if(c=p[$s]||p[Ji]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=sR(o);o!==null;){if(p=o[Ji])return p;o=sR(o)}return c}o=p,p=o.parentNode}return null}function uo(o){if(o=o[Ji]||o[$s]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Oc(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(n(33))}function Ol(o){var c=o[mr];return c||(c=o[mr]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Zi(o){o[lo]=!0}var cf=new Set,uf={};function ho(o,c){Y(o,c),Y(o+"Capture",c)}function Y(o,c){for(uf[o]=c,o=0;o<c.length;o++)cf.add(c[o])}var pt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ct={},Rt={};function yt(o){return we.call(Rt,o)?!0:we.call(Ct,o)?!1:pt.test(o)?Rt[o]=!0:(Ct[o]=!0,!1)}function Yt(o,c,p){if(yt(c))if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+p)}}function se(o,c,p){if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+p)}}function ae(o,c,p,y){if(y===null)o.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(p);return}o.setAttributeNS(c,p,""+y)}}var Ae,Ge;function Oe(o){if(Ae===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);Ae=c&&c[1]||"",Ge=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ae+o+Ge}var Ce=!1;function pn(o,c){if(!o||Ce)return"";Ce=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var Xt=function(){throw Error()};if(Object.defineProperty(Xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xt,[])}catch(Lt){var Tt=Lt}Reflect.construct(o,[],Xt)}else{try{Xt.call()}catch(Lt){Tt=Lt}o.call(Xt.prototype)}}else{try{throw Error()}catch(Lt){Tt=Lt}(Xt=o())&&typeof Xt.catch=="function"&&Xt.catch(function(){})}}catch(Lt){if(Lt&&Tt&&typeof Lt.stack=="string")return[Lt.stack,Tt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=y.DetermineComponentFrameRoot(),H=R[0],q=R[1];if(H&&q){var st=H.split(`
`),St=q.split(`
`);for(M=y=0;y<st.length&&!st[y].includes("DetermineComponentFrameRoot");)y++;for(;M<St.length&&!St[M].includes("DetermineComponentFrameRoot");)M++;if(y===st.length||M===St.length)for(y=st.length-1,M=St.length-1;1<=y&&0<=M&&st[y]!==St[M];)M--;for(;1<=y&&0<=M;y--,M--)if(st[y]!==St[M]){if(y!==1||M!==1)do if(y--,M--,0>M||st[y]!==St[M]){var zt=`
`+st[y].replace(" at new "," at ");return o.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",o.displayName)),zt}while(1<=y&&0<=M);break}}}finally{Ce=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?Oe(p):""}function In(o){switch(o.tag){case 26:case 27:case 5:return Oe(o.type);case 16:return Oe("Lazy");case 13:return Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return pn(o.type,!1);case 11:return pn(o.type.render,!1);case 1:return pn(o.type,!0);case 31:return Oe("Activity");default:return""}}function Mi(o){try{var c="";do c+=In(o),o=o.return;while(o);return c}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function yn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function bn(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ie(o){var c=bn(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),y=""+o[c];if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var M=p.get,R=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return M.call(this)},set:function(H){y=""+H,R.call(this,H)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(H){y=""+H},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Ri(o){o._valueTracker||(o._valueTracker=Ie(o))}function Dn(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return o&&(y=bn(o)?o.checked?"true":"false":o.value),o=y,o!==p?(c.setValue(o),!0):!1}function Bs(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Yo=/[\n"\\]/g;function ri(o){return o.replace(Yo,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Wo(o,c,p,y,M,R,H,q){o.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.type=H:o.removeAttribute("type"),c!=null?H==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+yn(c)):o.value!==""+yn(c)&&(o.value=""+yn(c)):H!=="submit"&&H!=="reset"||o.removeAttribute("value"),c!=null?Os(o,H,yn(c)):p!=null?Os(o,H,yn(p)):y!=null&&o.removeAttribute("value"),M==null&&R!=null&&(o.defaultChecked=!!R),M!=null&&(o.checked=M&&typeof M!="function"&&typeof M!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?o.name=""+yn(q):o.removeAttribute("name")}function ei(o,c,p,y,M,R,H,q){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(o.type=R),c!=null||p!=null){if(!(R!=="submit"&&R!=="reset"||c!=null))return;p=p!=null?""+yn(p):"",c=c!=null?""+yn(c):p,q||c===o.value||(o.value=c),o.defaultValue=c}y=y??M,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=q?o.checked:!!y,o.defaultChecked=!!y,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(o.name=H)}function Os(o,c,p){c==="number"&&Bs(o.ownerDocument)===o||o.defaultValue===""+p||(o.defaultValue=""+p)}function $i(o,c,p,y){if(o=o.options,c){c={};for(var M=0;M<p.length;M++)c["$"+p[M]]=!0;for(p=0;p<o.length;p++)M=c.hasOwnProperty("$"+o[p].value),o[p].selected!==M&&(o[p].selected=M),M&&y&&(o[p].defaultSelected=!0)}else{for(p=""+yn(p),c=null,M=0;M<o.length;M++){if(o[M].value===p){o[M].selected=!0,y&&(o[M].defaultSelected=!0);return}c!==null||o[M].disabled||(c=o[M])}c!==null&&(c.selected=!0)}}function ys(o,c,p){if(c!=null&&(c=""+yn(c),c!==o.value&&(o.value=c),p==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=p!=null?""+yn(p):""}function _s(o,c,p,y){if(c==null){if(y!=null){if(p!=null)throw Error(n(92));if(dt(y)){if(1<y.length)throw Error(n(93));y=y[0]}p=y}p==null&&(p=""),c=p}p=yn(c),o.defaultValue=p,y=o.textContent,y===p&&y!==""&&y!==null&&(o.value=y)}function gr(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var Ko=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pp(o,c,p){var y=c.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":y?o.setProperty(c,p):typeof p!="number"||p===0||Ko.has(c)?c==="float"?o.cssFloat=p:o[c]=(""+p).trim():o[c]=p+"px"}function mp(o,c,p){if(c!=null&&typeof c!="object")throw Error(n(62));if(o=o.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var M in c)y=c[M],c.hasOwnProperty(M)&&p[M]!==y&&pp(o,M,y)}else for(var R in c)c.hasOwnProperty(R)&&pp(o,R,c[R])}function h0(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ry=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gp(o){return Qx.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var f0=null;function d0(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Nc=null,zu=null;function Ly(o){var c=uo(o);if(c&&(o=c.stateNode)){var p=o[cs]||null;t:switch(o=c.stateNode,c.type){case"input":if(Wo(o,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+ri(""+c)+'"][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==o&&y.form===o.form){var M=y[cs]||null;if(!M)throw Error(n(90));Wo(y,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(c=0;c<p.length;c++)y=p[c],y.form===o.form&&Dn(y)}break t;case"textarea":ys(o,p.value,p.defaultValue);break t;case"select":c=p.value,c!=null&&$i(o,!!p.multiple,c,!1)}}}var vp=!1;function Dy(o,c,p){if(vp)return o(c,p);vp=!0;try{var y=o(c);return y}finally{if(vp=!1,(Nc!==null||zu!==null)&&(fl(),Nc&&(c=Nc,o=zu,zu=Nc=null,Ly(c),o)))for(c=0;c<o.length;c++)Ly(o[c])}}function hf(o,c){var p=o.stateNode;if(p===null)return null;var y=p[cs]||null;if(y===null)return null;p=y[c];t:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break t;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(n(231,c,typeof p));return p}var Jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yp=!1;if(Jo)try{var ff={};Object.defineProperty(ff,"passive",{get:function(){yp=!0}}),window.addEventListener("test",ff,ff),window.removeEventListener("test",ff,ff)}catch{yp=!1}var Nl=null,By=null,p0=null;function Oy(){if(p0)return p0;var o,c=By,p=c.length,y,M="value"in Nl?Nl.value:Nl.textContent,R=M.length;for(o=0;o<p&&c[o]===M[o];o++);var H=p-o;for(y=1;y<=H&&c[p-y]===M[R-y];y++);return p0=M.slice(o,1<y?1-y:void 0)}function Ic(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function df(){return!0}function _p(){return!1}function vr(o){function c(p,y,M,R,H){this._reactName=p,this._targetInst=M,this.type=y,this.nativeEvent=R,this.target=H,this.currentTarget=null;for(var q in o)o.hasOwnProperty(q)&&(p=o[q],this[q]=p?p(R):R[q]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?df:_p,this.isPropagationStopped=_p,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=df)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=df)},persist:function(){},isPersistent:df}),c}var Uc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pf=vr(Uc),mf=m({},Uc,{view:0,detail:0}),jx=vr(mf),Il,gf,vf,yf=m({},mf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==vf&&(vf&&o.type==="mousemove"?(Il=o.screenX-vf.screenX,gf=o.screenY-vf.screenY):gf=Il=0,vf=o),Il)},movementY:function(o){return"movementY"in o?o.movementY:gf}}),Ny=vr(yf),Xx=m({},yf,{dataTransfer:0}),XM=vr(Xx),Ns=m({},mf,{relatedTarget:0}),m0=vr(Ns),qx=m({},Uc,{animationName:0,elapsedTime:0,pseudoElement:0}),Yx=vr(qx),Wx=m({},Uc,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Kx=vr(Wx),Ap=m({},Uc,{data:0}),g0=vr(Ap),Jx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$x={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iy(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=$x[o])?!!c[o]:!1}function xp(){return Iy}var tb=m({},mf,{key:function(o){if(o.key){var c=Jx[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Ic(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Zx[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xp,charCode:function(o){return o.type==="keypress"?Ic(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ic(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Uy=vr(tb),Py=m({},yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v0=vr(Py),eb=m({},mf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xp}),Fy=vr(eb),nb=m({},Uc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ul=vr(nb),Hy=m({},yf,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),qM=vr(Hy),ib=m({},Uc,{newState:0,oldState:0}),Pc=vr(ib),Pl=[9,13,27,32],bp=Jo&&"CompositionEvent"in window,Gu=null;Jo&&"documentMode"in document&&(Gu=document.documentMode);var Sp=Jo&&"TextEvent"in window&&!Gu,Ep=Jo&&(!bp||Gu&&8<Gu&&11>=Gu),Fc=" ",Is=!1;function Mp(o,c){switch(o){case"keyup":return Pl.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zy(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Hc=!1;function Tp(o,c){switch(o){case"compositionend":return zy(c);case"keypress":return c.which!==32?null:(Is=!0,Fc);case"textInput":return o=c.data,o===Fc&&Is?null:o;default:return null}}function Gy(o,c){if(Hc)return o==="compositionend"||!bp&&Mp(o,c)?(o=Oy(),p0=By=Nl=null,Hc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Ep&&c.locale!=="ko"?null:c.data;default:return null}}var y0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ky(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!y0[o.type]:c==="textarea"}function Pr(o,c,p,y){Nc?zu?zu.push(y):zu=[y]:Nc=y,c=nS(c,"onChange"),0<c.length&&(p=new pf("onChange","change",null,p,y),o.push({event:p,listeners:c}))}var _f=null,ku=null;function sb(o){Y7(o,0)}function Cp(o){var c=Oc(o);if(Dn(c))return o}function _0(o,c){if(o==="change")return c}var A0=!1;if(Jo){var x0;if(Jo){var Af="oninput"in document;if(!Af){var xf=document.createElement("div");xf.setAttribute("oninput","return;"),Af=typeof xf.oninput=="function"}x0=Af}else x0=!1;A0=x0&&(!document.documentMode||9<document.documentMode)}function Ti(){_f&&(_f.detachEvent("onpropertychange",rb),ku=_f=null)}function rb(o){if(o.propertyName==="value"&&Cp(ku)){var c=[];Pr(c,ku,o,d0(o)),Dy(sb,c)}}function YM(o,c,p){o==="focusin"?(Ti(),_f=c,ku=p,_f.attachEvent("onpropertychange",rb)):o==="focusout"&&Ti()}function ab(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Cp(ku)}function wp(o,c){if(o==="click")return Cp(c)}function zc(o,c){if(o==="input"||o==="change")return Cp(c)}function ob(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Fr=typeof Object.is=="function"?Object.is:ob;function fo(o,c){if(Fr(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var M=p[y];if(!we.call(c,M)||!Fr(o[M],c[M]))return!1}return!0}function Hr(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Vy(o,c){var p=Hr(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=c&&y>=c)return{node:p,offset:c-o};o=y}t:{for(;p;){if(p.nextSibling){p=p.nextSibling;break t}p=p.parentNode}p=void 0}p=Hr(p)}}function Qy(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Qy(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function jy(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Bs(o.document);c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)o=c.contentWindow;else break;c=Bs(o.document)}return c}function Rp(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var Xy=Jo&&"documentMode"in document&&11>=document.documentMode,Fl=null,b0=null,Lp=null,S0=!1;function qy(o,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;S0||Fl==null||Fl!==Bs(y)||(y=Fl,"selectionStart"in y&&Rp(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Lp&&fo(Lp,y)||(Lp=y,y=nS(b0,"onSelect"),0<y.length&&(c=new pf("onSelect","select",null,c,p),o.push({event:c,listeners:y}),c.target=Fl)))}function Us(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var Gc={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},E0={},lb={};Jo&&(lb=document.createElement("div").style,"AnimationEvent"in window||(delete Gc.animationend.animation,delete Gc.animationiteration.animation,delete Gc.animationstart.animation),"TransitionEvent"in window||delete Gc.transitionend.transition);function Hl(o){if(E0[o])return E0[o];if(!Gc[o])return o;var c=Gc[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in lb)return E0[o]=c[p];return o}var yr=Hl("animationend"),Yy=Hl("animationiteration"),zr=Hl("animationstart"),cb=Hl("transitionrun"),zl=Hl("transitionstart"),bf=Hl("transitioncancel"),Gl=Hl("transitionend"),M0=new Map,Dp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dp.push("scrollEnd");function As(o,c){M0.set(o,c),ho(c,[o])}var Wy=new WeakMap;function Ps(o,c){if(typeof o=="object"&&o!==null){var p=Wy.get(o);return p!==void 0?p:(c={value:o,source:c,stack:Mi(c)},Wy.set(o,c),c)}return{value:o,source:c,stack:Mi(c)}}var tr=[],Pa=0,T0=0;function Bp(){for(var o=Pa,c=T0=Pa=0;c<o;){var p=tr[c];tr[c++]=null;var y=tr[c];tr[c++]=null;var M=tr[c];tr[c++]=null;var R=tr[c];if(tr[c++]=null,y!==null&&M!==null){var H=y.pending;H===null?M.next=M:(M.next=H.next,H.next=M),y.pending=M}R!==0&&Ky(p,M,R)}}function kc(o,c,p,y){tr[Pa++]=o,tr[Pa++]=c,tr[Pa++]=p,tr[Pa++]=y,T0|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function C0(o,c,p,y){return kc(o,c,p,y),Sf(o)}function kl(o,c){return kc(o,null,null,c),Sf(o)}function Ky(o,c,p){o.lanes|=p;var y=o.alternate;y!==null&&(y.lanes|=p);for(var M=!1,R=o.return;R!==null;)R.childLanes|=p,y=R.alternate,y!==null&&(y.childLanes|=p),R.tag===22&&(o=R.stateNode,o===null||o._visibility&1||(M=!0)),o=R,R=R.return;return o.tag===3?(R=o.stateNode,M&&c!==null&&(M=31-ge(p),o=R.hiddenUpdates,y=o[M],y===null?o[M]=[c]:y.push(c),c.lane=p|536870912),R):null}function Sf(o){if(50<hl)throw hl=0,ah=null,Error(n(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Vc={};function Jy(o,c,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(o,c,p,y){return new Jy(o,c,p,y)}function Op(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Gi(o,c){var p=o.alternate;return p===null?(p=Gr(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function Zy(o,c){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,c=p.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function xs(o,c,p,y,M,R){var H=0;if(y=o,typeof o=="function")Op(o)&&(H=1);else if(typeof o=="string")H=XP(o,p,ct.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case U:return o=Gr(31,p,c,M),o.elementType=U,o.lanes=R,o;case b:return Qc(p.children,M,R,c);case T:H=8,M|=24;break;case E:return o=Gr(12,p,c,M|2),o.elementType=E,o.lanes=R,o;case N:return o=Gr(13,p,c,M),o.elementType=N,o.lanes=R,o;case I:return o=Gr(19,p,c,M),o.elementType=I,o.lanes=R,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case S:case D:H=10;break t;case w:H=9;break t;case B:H=11;break t;case F:H=14;break t;case z:H=16,y=null;break t}H=29,p=Error(n(130,o===null?"null":typeof o,"")),y=null}return c=Gr(H,p,c,M),c.elementType=o,c.type=y,c.lanes=R,c}function Qc(o,c,p,y){return o=Gr(7,o,y,c),o.lanes=p,o}function Np(o,c,p){return o=Gr(6,o,null,c),o.lanes=p,o}function w0(o,c,p){return c=Gr(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var Ef=[],kr=0,Ip=null,Mf=0,Fs=[],la=0,jc=null,Zo=1,$o="";function Vl(o,c){Ef[kr++]=Mf,Ef[kr++]=Ip,Ip=o,Mf=c}function R0(o,c,p){Fs[la++]=Zo,Fs[la++]=$o,Fs[la++]=jc,jc=o;var y=Zo;o=$o;var M=32-ge(y)-1;y&=~(1<<M),p+=1;var R=32-ge(c)+M;if(30<R){var H=M-M%5;R=(y&(1<<H)-1).toString(32),y>>=H,M-=H,Zo=1<<32-ge(c)+M|p<<M|y,$o=R+o}else Zo=1<<R|p<<M|y,$o=o}function $y(o){o.return!==null&&(Vl(o,1),R0(o,1,0))}function t2(o){for(;o===Ip;)Ip=Ef[--kr],Ef[kr]=null,Mf=Ef[--kr],Ef[kr]=null;for(;o===jc;)jc=Fs[--la],Fs[la]=null,$o=Fs[--la],Fs[la]=null,Zo=Fs[--la],Fs[la]=null}var _r=null,Li=null,kn=!1,Fa=null,ca=!1,L0=Error(n(519));function Xc(o){var c=Error(n(418,""));throw Vu(Ps(c,o)),L0}function ub(o){var c=o.stateNode,p=o.type,y=o.memoizedProps;switch(c[Ji]=o,c[cs]=y,p){case"dialog":wn("cancel",c),wn("close",c);break;case"iframe":case"object":case"embed":wn("load",c);break;case"video":case"audio":for(p=0;p<D2.length;p++)wn(D2[p],c);break;case"source":wn("error",c);break;case"img":case"image":case"link":wn("error",c),wn("load",c);break;case"details":wn("toggle",c);break;case"input":wn("invalid",c),ei(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Ri(c);break;case"select":wn("invalid",c);break;case"textarea":wn("invalid",c),_s(c,y.value,y.defaultValue,y.children),Ri(c)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||c.textContent===""+p||y.suppressHydrationWarning===!0||Z7(c.textContent,p)?(y.popover!=null&&(wn("beforetoggle",c),wn("toggle",c)),y.onScroll!=null&&wn("scroll",c),y.onScrollEnd!=null&&wn("scrollend",c),y.onClick!=null&&(c.onclick=iS),c=!0):c=!1,c||Xc(o)}function e2(o){for(_r=o.return;_r;)switch(_r.tag){case 5:case 13:ca=!1;return;case 27:case 3:ca=!0;return;default:_r=_r.return}}function po(o){if(o!==_r)return!1;if(!kn)return e2(o),kn=!0,!1;var c=o.tag,p;if((p=c!==3&&c!==27)&&((p=c===5)&&(p=o.type,p=!(p!=="form"&&p!=="button")||pT(o.type,o.memoizedProps)),p=!p),p&&Li&&Xc(o),e2(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));t:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(p=o.data,p==="/$"){if(c===0){Li=ic(o.nextSibling);break t}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++;o=o.nextSibling}Li=null}}else c===27?(c=Li,Kf(o.type)?(o=yT,yT=null,Li=o):Li=c):Li=_r?ic(o.stateNode.nextSibling):null;return!0}function Tf(){Li=_r=null,kn=!1}function jn(){var o=Fa;return o!==null&&(ze===null?ze=o:ze.push.apply(ze,o),Fa=null),o}function Vu(o){Fa===null?Fa=[o]:Fa.push(o)}var n2=ot(null),qc=null,Ql=null;function Yc(o,c,p){Et(n2,c._currentValue),c._currentValue=p}function jl(o){o._currentValue=n2.current,xt(n2)}function i2(o,c,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===p)break;o=o.return}}function Up(o,c,p,y){var M=o.child;for(M!==null&&(M.return=o);M!==null;){var R=M.dependencies;if(R!==null){var H=M.child;R=R.firstContext;t:for(;R!==null;){var q=R;R=M;for(var st=0;st<c.length;st++)if(q.context===c[st]){R.lanes|=p,q=R.alternate,q!==null&&(q.lanes|=p),i2(R.return,p,o),y||(H=null);break t}R=q.next}}else if(M.tag===18){if(H=M.return,H===null)throw Error(n(341));H.lanes|=p,R=H.alternate,R!==null&&(R.lanes|=p),i2(H,p,o),H=null}else H=M.child;if(H!==null)H.return=M;else for(H=M;H!==null;){if(H===o){H=null;break}if(M=H.sibling,M!==null){M.return=H.return,H=M;break}H=H.return}M=H}}function Ha(o,c,p,y){o=null;for(var M=c,R=!1;M!==null;){if(!R){if((M.flags&524288)!==0)R=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var H=M.alternate;if(H===null)throw Error(n(387));if(H=H.memoizedProps,H!==null){var q=M.type;Fr(M.pendingProps.value,H.value)||(o!==null?o.push(q):o=[q])}}else if(M===Ut.current){if(H=M.alternate,H===null)throw Error(n(387));H.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(o!==null?o.push(P2):o=[P2])}M=M.return}o!==null&&Up(c,o,p,y),c.flags|=262144}function Pp(o){for(o=o.firstContext;o!==null;){if(!Fr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function tl(o){qc=o,Ql=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ii(o){return D0(qc,o)}function Fp(o,c){return qc===null&&tl(o),D0(o,c)}function D0(o,c){var p=c._currentValue;if(c={context:c,memoizedValue:p,next:null},Ql===null){if(o===null)throw Error(n(308));Ql=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Ql=Ql.next=c;return p}var s2=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(p,y){o.push(y)}};this.abort=function(){c.aborted=!0,o.forEach(function(p){return p()})}},WM=i.unstable_scheduleCallback,hb=i.unstable_NormalPriority,ts={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function B0(){return{controller:new s2,data:new Map,refCount:0}}function Cf(o){o.refCount--,o.refCount===0&&WM(hb,function(){o.controller.abort()})}var wf=null,Hp=0,tn=0,Rf=null;function ua(o,c){if(wf===null){var p=wf=[];Hp=0,tn=rT(),Rf={status:"pending",value:void 0,then:function(y){p.push(y)}}}return Hp++,c.then(O0,O0),c}function O0(){if(--Hp===0&&wf!==null){Rf!==null&&(Rf.status="fulfilled");var o=wf;wf=null,tn=0,Rf=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function KM(o,c){var p=[],y={status:"pending",value:null,reason:null,then:function(M){p.push(M)}};return o.then(function(){y.status="fulfilled",y.value=c;for(var M=0;M<p.length;M++)(0,p[M])(c)},function(M){for(y.status="rejected",y.reason=M,M=0;M<p.length;M++)(0,p[M])(void 0)}),y}var zp=j.S;j.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&ua(o,c),zp!==null&&zp(o,c)};var za=ot(null);function Wc(){var o=za.current;return o!==null?o:We.pooledCache}function Gp(o,c){c===null?Et(za,za.current):Et(za,c.pool)}function N0(){var o=Wc();return o===null?null:{parent:ts._currentValue,pool:o}}var kp=Error(n(460)),r2=Error(n(474)),mo=Error(n(542)),Vp={then:function(){}};function I0(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Lf(){}function U0(o,c,p){switch(p=o[p],p===void 0?o.push(c):p!==c&&(c.then(Lf,Lf),c=p),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,fb(o),o;default:if(typeof c.status=="string")c.then(Lf,Lf);else{if(o=We,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=c,o.status="pending",o.then(function(y){if(c.status==="pending"){var M=c;M.status="fulfilled",M.value=y}},function(y){if(c.status==="pending"){var M=c;M.status="rejected",M.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,fb(o),o}throw Ga=c,kp}}var Ga=null;function a2(){if(Ga===null)throw Error(n(459));var o=Ga;return Ga=null,o}function fb(o){if(o===kp||o===mo)throw Error(n(483))}var Xl=!1;function o2(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qe(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function el(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ql(o,c,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(Xn&2)!==0){var M=y.pending;return M===null?c.next=c:(c.next=M.next,M.next=c),y.pending=c,c=Sf(o),Ky(o,null,p),c}return kc(o,y,c,p),Sf(o)}function Qu(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194048)!==0)){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,qe(o,p)}}function Df(o,c){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var M=null,R=null;if(p=p.firstBaseUpdate,p!==null){do{var H={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};R===null?M=R=H:R=R.next=H,p=p.next}while(p!==null);R===null?M=R=c:R=R.next=c}else M=R=c;p={baseState:y.baseState,firstBaseUpdate:M,lastBaseUpdate:R,shared:y.shared,callbacks:y.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}var l2=!1;function Qp(){if(l2){var o=Rf;if(o!==null)throw o}}function Bf(o,c,p,y){l2=!1;var M=o.updateQueue;Xl=!1;var R=M.firstBaseUpdate,H=M.lastBaseUpdate,q=M.shared.pending;if(q!==null){M.shared.pending=null;var st=q,St=st.next;st.next=null,H===null?R=St:H.next=St,H=st;var zt=o.alternate;zt!==null&&(zt=zt.updateQueue,q=zt.lastBaseUpdate,q!==H&&(q===null?zt.firstBaseUpdate=St:q.next=St,zt.lastBaseUpdate=st))}if(R!==null){var Xt=M.baseState;H=0,zt=St=st=null,q=R;do{var Tt=q.lane&-536870913,Lt=Tt!==q.lane;if(Lt?(Ue&Tt)===Tt:(y&Tt)===Tt){Tt!==0&&Tt===tn&&(l2=!0),zt!==null&&(zt=zt.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});t:{var Xe=o,ke=q;Tt=c;var yi=p;switch(ke.tag){case 1:if(Xe=ke.payload,typeof Xe=="function"){Xt=Xe.call(yi,Xt,Tt);break t}Xt=Xe;break t;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=ke.payload,Tt=typeof Xe=="function"?Xe.call(yi,Xt,Tt):Xe,Tt==null)break t;Xt=m({},Xt,Tt);break t;case 2:Xl=!0}}Tt=q.callback,Tt!==null&&(o.flags|=64,Lt&&(o.flags|=8192),Lt=M.callbacks,Lt===null?M.callbacks=[Tt]:Lt.push(Tt))}else Lt={lane:Tt,tag:q.tag,payload:q.payload,callback:q.callback,next:null},zt===null?(St=zt=Lt,st=Xt):zt=zt.next=Lt,H|=Tt;if(q=q.next,q===null){if(q=M.shared.pending,q===null)break;Lt=q,q=Lt.next,Lt.next=null,M.lastBaseUpdate=Lt,M.shared.pending=null}}while(!0);zt===null&&(st=Xt),M.baseState=st,M.firstBaseUpdate=St,M.lastBaseUpdate=zt,R===null&&(M.shared.lanes=0),So|=H,o.lanes=H,o.memoizedState=Xt}}function Of(o,c){if(typeof o!="function")throw Error(n(191,o));o.call(c)}function db(o,c){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)Of(p[o],c)}var Nf=ot(null),P0=ot(0);function pb(o,c){o=qa,Et(P0,o),Et(Nf,c),qa=o|c.baseLanes}function c2(){Et(P0,qa),Et(Nf,Nf.current)}function jp(){qa=P0.current,xt(Nf),xt(P0)}var Yl=0,en=null,Zn=null,es=null,F0=!1,Kc=!1,Ar=!1,us=0,ka=0,Hs=null,mb=0;function ki(){throw Error(n(321))}function er(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!Fr(o[p],c[p]))return!1;return!0}function Wl(o,c,p,y,M,R){return Yl=R,en=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,j.H=o===null||o.memoizedState===null?q0:M2,Ar=!1,R=p(y,M),Ar=!1,Kc&&(R=vb(c,p,y,M)),gb(o),R}function gb(o){j.H=Yp;var c=Zn!==null&&Zn.next!==null;if(Yl=0,es=Zn=en=null,F0=!1,ka=0,Hs=null,c)throw Error(n(300));o===null||bs||(o=o.dependencies,o!==null&&Pp(o)&&(bs=!0))}function vb(o,c,p,y){en=o;var M=0;do{if(Kc&&(Hs=null),ka=0,Kc=!1,25<=M)throw Error(n(301));if(M+=1,es=Zn=null,o.updateQueue!=null){var R=o.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}j.H=Vb,R=c(p,y)}while(Kc);return R}function JM(){var o=j.H,c=o.useState()[0];return c=typeof c.then=="function"?go(c):c,o=o.useState()[0],(Zn!==null?Zn.memoizedState:null)!==o&&(en.flags|=1024),c}function u2(){var o=us!==0;return us=0,o}function H0(o,c,p){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~p}function h2(o){if(F0){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}F0=!1}Yl=0,es=Zn=en=null,Kc=!1,ka=us=0,Hs=null}function xr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return es===null?en.memoizedState=es=o:es=es.next=o,es}function ns(){if(Zn===null){var o=en.alternate;o=o!==null?o.memoizedState:null}else o=Zn.next;var c=es===null?en.memoizedState:es.next;if(c!==null)es=c,Zn=o;else{if(o===null)throw en.alternate===null?Error(n(467)):Error(n(310));Zn=o,o={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},es===null?en.memoizedState=es=o:es=es.next=o}return es}function Jc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function go(o){var c=ka;return ka+=1,Hs===null&&(Hs=[]),o=U0(Hs,o,c),c=en,(es===null?c.memoizedState:es.next)===null&&(c=c.alternate,j.H=c===null||c.memoizedState===null?q0:M2),o}function z0(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return go(o);if(o.$$typeof===D)return Ii(o)}throw Error(n(438,String(o)))}function f2(o){var c=null,p=en.updateQueue;if(p!==null&&(c=p.memoCache),c==null){var y=en.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(M){return M.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),p===null&&(p=Jc(),en.updateQueue=p),p.memoCache=c,p=c.data[c.index],p===void 0)for(p=c.data[c.index]=Array(o),y=0;y<o;y++)p[y]=P;return c.index++,p}function Kl(o,c){return typeof c=="function"?c(o):c}function Zc(o){var c=ns();return d2(c,Zn,o)}function d2(o,c,p){var y=o.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=p;var M=o.baseQueue,R=y.pending;if(R!==null){if(M!==null){var H=M.next;M.next=R.next,R.next=H}c.baseQueue=M=R,y.pending=null}if(R=o.baseState,M===null)o.memoizedState=R;else{c=M.next;var q=H=null,st=null,St=c,zt=!1;do{var Xt=St.lane&-536870913;if(Xt!==St.lane?(Ue&Xt)===Xt:(Yl&Xt)===Xt){var Tt=St.revertLane;if(Tt===0)st!==null&&(st=st.next={lane:0,revertLane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),Xt===tn&&(zt=!0);else if((Yl&Tt)===Tt){St=St.next,Tt===tn&&(zt=!0);continue}else Xt={lane:0,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},st===null?(q=st=Xt,H=R):st=st.next=Xt,en.lanes|=Tt,So|=Tt;Xt=St.action,Ar&&p(R,Xt),R=St.hasEagerState?St.eagerState:p(R,Xt)}else Tt={lane:Xt,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},st===null?(q=st=Tt,H=R):st=st.next=Tt,en.lanes|=Xt,So|=Xt;St=St.next}while(St!==null&&St!==c);if(st===null?H=R:st.next=q,!Fr(R,o.memoizedState)&&(bs=!0,zt&&(p=Rf,p!==null)))throw p;o.memoizedState=R,o.baseState=H,o.baseQueue=st,y.lastRenderedState=R}return M===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function p2(o){var c=ns(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=o;var y=p.dispatch,M=p.pending,R=c.memoizedState;if(M!==null){p.pending=null;var H=M=M.next;do R=o(R,H.action),H=H.next;while(H!==M);Fr(R,c.memoizedState)||(bs=!0),c.memoizedState=R,c.baseQueue===null&&(c.baseState=R),p.lastRenderedState=R}return[R,y]}function yb(o,c,p){var y=en,M=ns(),R=kn;if(R){if(p===void 0)throw Error(n(407));p=p()}else p=c();var H=!Fr((Zn||M).memoizedState,p);H&&(M.memoizedState=p,bs=!0),M=M.queue;var q=Ab.bind(null,y,M,o);if(Pf(2048,8,q,[o]),M.getSnapshot!==c||H||es!==null&&es.memoizedState.tag&1){if(y.flags|=2048,Uf(9,Xp(),_b.bind(null,y,M,p,c),null),We===null)throw Error(n(349));R||(Yl&124)!==0||If(y,c,p)}return p}function If(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=en.updateQueue,c===null?(c=Jc(),en.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function _b(o,c,p,y){c.value=p,c.getSnapshot=y,xb(c)&&bb(o)}function Ab(o,c,p){return p(function(){xb(c)&&bb(o)})}function xb(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!Fr(o,p)}catch{return!0}}function bb(o){var c=kl(o,2);c!==null&&Er(c,o,2)}function m2(o){var c=xr();if(typeof o=="function"){var p=o;if(o=p(),Ar){te(!0);try{p()}finally{te(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:o},c}function Sb(o,c,p,y){return o.baseState=p,d2(o,Zn,typeof y=="function"?y:Kl)}function ZM(o,c,p,y,M){if(X0(o))throw Error(n(485));if(o=c.action,o!==null){var R={payload:M,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){R.listeners.push(H)}};j.T!==null?p(!0):R.isTransition=!1,y(R),p=c.pending,p===null?(R.next=c.pending=R,Eb(c,R)):(R.next=p.next,c.pending=p.next=R)}}function Eb(o,c){var p=c.action,y=c.payload,M=o.state;if(c.isTransition){var R=j.T,H={};j.T=H;try{var q=p(M,y),st=j.S;st!==null&&st(H,q),Mb(o,c,q)}catch(St){g2(o,c,St)}finally{j.T=R}}else try{R=p(M,y),Mb(o,c,R)}catch(St){g2(o,c,St)}}function Mb(o,c,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Tb(o,c,y)},function(y){return g2(o,c,y)}):Tb(o,c,p)}function Tb(o,c,p){c.status="fulfilled",c.value=p,Cb(c),o.state=p,c=o.pending,c!==null&&(p=c.next,p===c?o.pending=null:(p=p.next,c.next=p,Eb(o,p)))}function g2(o,c,p){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=p,Cb(c),c=c.next;while(c!==y)}o.action=null}function Cb(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function v2(o,c){return c}function wb(o,c){if(kn){var p=We.formState;if(p!==null){t:{var y=en;if(kn){if(Li){e:{for(var M=Li,R=ca;M.nodeType!==8;){if(!R){M=null;break e}if(M=ic(M.nextSibling),M===null){M=null;break e}}R=M.data,M=R==="F!"||R==="F"?M:null}if(M){Li=ic(M.nextSibling),y=M.data==="F!";break t}}Xc(y)}y=!1}y&&(c=p[0])}}return p=xr(),p.memoizedState=p.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:v2,lastRenderedState:c},p.queue=y,p=Gb.bind(null,en,y),y.dispatch=p,y=m2(!1),R=j0.bind(null,en,!1,y.queue),y=xr(),M={state:c,dispatch:null,action:o,pending:null},y.queue=M,p=ZM.bind(null,en,M,R,p),M.dispatch=p,y.memoizedState=o,[c,p,!1]}function Rb(o){var c=ns();return Lb(c,Zn,o)}function Lb(o,c,p){if(c=d2(o,c,v2)[0],o=Zc(Kl)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=go(c)}catch(H){throw H===kp?mo:H}else y=c;c=ns();var M=c.queue,R=M.dispatch;return p!==c.memoizedState&&(en.flags|=2048,Uf(9,Xp(),$M.bind(null,M,p),null)),[y,R,o]}function $M(o,c){o.action=c}function Db(o){var c=ns(),p=Zn;if(p!==null)return Lb(c,p,o);ns(),c=c.memoizedState,p=ns();var y=p.queue.dispatch;return p.memoizedState=o,[c,y,!1]}function Uf(o,c,p,y){return o={tag:o,create:p,deps:y,inst:c,next:null},c=en.updateQueue,c===null&&(c=Jc(),en.updateQueue=c),p=c.lastEffect,p===null?c.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,c.lastEffect=o),o}function Xp(){return{destroy:void 0,resource:void 0}}function y2(){return ns().memoizedState}function G0(o,c,p,y){var M=xr();y=y===void 0?null:y,en.flags|=o,M.memoizedState=Uf(1|c,Xp(),p,y)}function Pf(o,c,p,y){var M=ns();y=y===void 0?null:y;var R=M.memoizedState.inst;Zn!==null&&y!==null&&er(y,Zn.memoizedState.deps)?M.memoizedState=Uf(c,R,p,y):(en.flags|=o,M.memoizedState=Uf(1|c,R,p,y))}function _2(o,c){G0(8390656,8,o,c)}function A2(o,c){Pf(2048,8,o,c)}function k0(o,c){return Pf(4,2,o,c)}function V0(o,c){return Pf(4,4,o,c)}function Bb(o,c){if(typeof c=="function"){o=o();var p=c(o);return function(){typeof p=="function"?p():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Ob(o,c,p){p=p!=null?p.concat([o]):null,Pf(4,4,Bb.bind(null,c,o),p)}function x2(){}function Nb(o,c){var p=ns();c=c===void 0?null:c;var y=p.memoizedState;return c!==null&&er(c,y[1])?y[0]:(p.memoizedState=[o,c],o)}function b2(o,c){var p=ns();c=c===void 0?null:c;var y=p.memoizedState;if(c!==null&&er(c,y[1]))return y[0];if(y=o(),Ar){te(!0);try{o()}finally{te(!1)}}return p.memoizedState=[y,c],y}function Q0(o,c,p){return p===void 0||(Yl&1073741824)!==0?o.memoizedState=c:(o.memoizedState=p,o=s1(),en.lanes|=o,So|=o,p)}function Ib(o,c,p,y){return Fr(p,c)?p:Nf.current!==null?(o=Q0(o,p,y),Fr(o,c)||(bs=!0),o):(Yl&42)===0?(bs=!0,o.memoizedState=p):(o=s1(),en.lanes|=o,So|=o,c)}function Ub(o,c,p,y,M){var R=tt.p;tt.p=R!==0&&8>R?R:8;var H=j.T,q={};j.T=q,j0(o,!1,c,p);try{var st=M(),St=j.S;if(St!==null&&St(q,st),st!==null&&typeof st=="object"&&typeof st.then=="function"){var zt=KM(st,y);qp(o,c,zt,Fi(o))}else qp(o,c,y,Fi(o))}catch(Xt){qp(o,c,{then:function(){},status:"rejected",reason:Xt},Fi())}finally{tt.p=R,j.T=H}}function tT(){}function S2(o,c,p,y){if(o.tag!==5)throw Error(n(476));var M=Pb(o).queue;Ub(o,M,c,nt,p===null?tT:function(){return Fb(o),p(y)})}function Pb(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:nt,baseState:nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:nt},next:null};var p={};return c.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:p},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function Fb(o){var c=Pb(o).next.queue;qp(o,c,{},Fi())}function E2(){return Ii(P2)}function Hb(){return ns().memoizedState}function zb(){return ns().memoizedState}function eT(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var p=Fi();o=el(p);var y=ql(c,o,p);y!==null&&(Er(y,c,p),Qu(y,c,p)),c={cache:B0()},o.payload=c;return}c=c.return}}function nT(o,c,p){var y=Fi();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},X0(o)?kb(c,p):(p=C0(o,c,p,y),p!==null&&(Er(p,o,y),ha(p,c,y)))}function Gb(o,c,p){var y=Fi();qp(o,c,p,y)}function qp(o,c,p,y){var M={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(X0(o))kb(c,M);else{var R=o.alternate;if(o.lanes===0&&(R===null||R.lanes===0)&&(R=c.lastRenderedReducer,R!==null))try{var H=c.lastRenderedState,q=R(H,p);if(M.hasEagerState=!0,M.eagerState=q,Fr(q,H))return kc(o,c,M,0),We===null&&Bp(),!1}catch{}finally{}if(p=C0(o,c,M,y),p!==null)return Er(p,o,y),ha(p,c,y),!0}return!1}function j0(o,c,p,y){if(y={lane:2,revertLane:rT(),action:y,hasEagerState:!1,eagerState:null,next:null},X0(o)){if(c)throw Error(n(479))}else c=C0(o,p,y,2),c!==null&&Er(c,o,2)}function X0(o){var c=o.alternate;return o===en||c!==null&&c===en}function kb(o,c){Kc=F0=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function ha(o,c,p){if((p&4194048)!==0){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,qe(o,p)}}var Yp={readContext:Ii,use:z0,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useLayoutEffect:ki,useInsertionEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useSyncExternalStore:ki,useId:ki,useHostTransitionStatus:ki,useFormState:ki,useActionState:ki,useOptimistic:ki,useMemoCache:ki,useCacheRefresh:ki},q0={readContext:Ii,use:z0,useCallback:function(o,c){return xr().memoizedState=[o,c===void 0?null:c],o},useContext:Ii,useEffect:_2,useImperativeHandle:function(o,c,p){p=p!=null?p.concat([o]):null,G0(4194308,4,Bb.bind(null,c,o),p)},useLayoutEffect:function(o,c){return G0(4194308,4,o,c)},useInsertionEffect:function(o,c){G0(4,2,o,c)},useMemo:function(o,c){var p=xr();c=c===void 0?null:c;var y=o();if(Ar){te(!0);try{o()}finally{te(!1)}}return p.memoizedState=[y,c],y},useReducer:function(o,c,p){var y=xr();if(p!==void 0){var M=p(c);if(Ar){te(!0);try{p(c)}finally{te(!1)}}}else M=c;return y.memoizedState=y.baseState=M,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:M},y.queue=o,o=o.dispatch=nT.bind(null,en,o),[y.memoizedState,o]},useRef:function(o){var c=xr();return o={current:o},c.memoizedState=o},useState:function(o){o=m2(o);var c=o.queue,p=Gb.bind(null,en,c);return c.dispatch=p,[o.memoizedState,p]},useDebugValue:x2,useDeferredValue:function(o,c){var p=xr();return Q0(p,o,c)},useTransition:function(){var o=m2(!1);return o=Ub.bind(null,en,o.queue,!0,!1),xr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,p){var y=en,M=xr();if(kn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=c(),We===null)throw Error(n(349));(Ue&124)!==0||If(y,c,p)}M.memoizedState=p;var R={value:p,getSnapshot:c};return M.queue=R,_2(Ab.bind(null,y,R,o),[o]),y.flags|=2048,Uf(9,Xp(),_b.bind(null,y,R,p,c),null),p},useId:function(){var o=xr(),c=We.identifierPrefix;if(kn){var p=$o,y=Zo;p=(y&~(1<<32-ge(y)-1)).toString(32)+p,c=""+c+"R"+p,p=us++,0<p&&(c+="H"+p.toString(32)),c+=""}else p=mb++,c=""+c+"r"+p.toString(32)+"";return o.memoizedState=c},useHostTransitionStatus:E2,useFormState:wb,useActionState:wb,useOptimistic:function(o){var c=xr();c.memoizedState=c.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=p,c=j0.bind(null,en,!0,p),p.dispatch=c,[o,c]},useMemoCache:f2,useCacheRefresh:function(){return xr().memoizedState=eT.bind(null,en)}},M2={readContext:Ii,use:z0,useCallback:Nb,useContext:Ii,useEffect:A2,useImperativeHandle:Ob,useInsertionEffect:k0,useLayoutEffect:V0,useMemo:b2,useReducer:Zc,useRef:y2,useState:function(){return Zc(Kl)},useDebugValue:x2,useDeferredValue:function(o,c){var p=ns();return Ib(p,Zn.memoizedState,o,c)},useTransition:function(){var o=Zc(Kl)[0],c=ns().memoizedState;return[typeof o=="boolean"?o:go(o),c]},useSyncExternalStore:yb,useId:Hb,useHostTransitionStatus:E2,useFormState:Rb,useActionState:Rb,useOptimistic:function(o,c){var p=ns();return Sb(p,Zn,o,c)},useMemoCache:f2,useCacheRefresh:zb},Vb={readContext:Ii,use:z0,useCallback:Nb,useContext:Ii,useEffect:A2,useImperativeHandle:Ob,useInsertionEffect:k0,useLayoutEffect:V0,useMemo:b2,useReducer:p2,useRef:y2,useState:function(){return p2(Kl)},useDebugValue:x2,useDeferredValue:function(o,c){var p=ns();return Zn===null?Q0(p,o,c):Ib(p,Zn.memoizedState,o,c)},useTransition:function(){var o=p2(Kl)[0],c=ns().memoizedState;return[typeof o=="boolean"?o:go(o),c]},useSyncExternalStore:yb,useId:Hb,useHostTransitionStatus:E2,useFormState:Db,useActionState:Db,useOptimistic:function(o,c){var p=ns();return Zn!==null?Sb(p,Zn,o,c):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:f2,useCacheRefresh:zb},ju=null,Wp=0;function Kp(o){var c=Wp;return Wp+=1,ju===null&&(ju=[]),U0(ju,o,c)}function Ff(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Y0(o,c){throw c.$$typeof===g?Error(n(525)):(o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function Qb(o){var c=o._init;return c(o._payload)}function jb(o){function c(gt,ft){if(o){var bt=gt.deletions;bt===null?(gt.deletions=[ft],gt.flags|=16):bt.push(ft)}}function p(gt,ft){if(!o)return null;for(;ft!==null;)c(gt,ft),ft=ft.sibling;return null}function y(gt){for(var ft=new Map;gt!==null;)gt.key!==null?ft.set(gt.key,gt):ft.set(gt.index,gt),gt=gt.sibling;return ft}function M(gt,ft){return gt=Gi(gt,ft),gt.index=0,gt.sibling=null,gt}function R(gt,ft,bt){return gt.index=bt,o?(bt=gt.alternate,bt!==null?(bt=bt.index,bt<ft?(gt.flags|=67108866,ft):bt):(gt.flags|=67108866,ft)):(gt.flags|=1048576,ft)}function H(gt){return o&&gt.alternate===null&&(gt.flags|=67108866),gt}function q(gt,ft,bt,kt){return ft===null||ft.tag!==6?(ft=Np(bt,gt.mode,kt),ft.return=gt,ft):(ft=M(ft,bt),ft.return=gt,ft)}function st(gt,ft,bt,kt){var Ee=bt.type;return Ee===b?zt(gt,ft,bt.props.children,kt,bt.key):ft!==null&&(ft.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===z&&Qb(Ee)===ft.type)?(ft=M(ft,bt.props),Ff(ft,bt),ft.return=gt,ft):(ft=xs(bt.type,bt.key,bt.props,null,gt.mode,kt),Ff(ft,bt),ft.return=gt,ft)}function St(gt,ft,bt,kt){return ft===null||ft.tag!==4||ft.stateNode.containerInfo!==bt.containerInfo||ft.stateNode.implementation!==bt.implementation?(ft=w0(bt,gt.mode,kt),ft.return=gt,ft):(ft=M(ft,bt.children||[]),ft.return=gt,ft)}function zt(gt,ft,bt,kt,Ee){return ft===null||ft.tag!==7?(ft=Qc(bt,gt.mode,kt,Ee),ft.return=gt,ft):(ft=M(ft,bt),ft.return=gt,ft)}function Xt(gt,ft,bt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return ft=Np(""+ft,gt.mode,bt),ft.return=gt,ft;if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case v:return bt=xs(ft.type,ft.key,ft.props,null,gt.mode,bt),Ff(bt,ft),bt.return=gt,bt;case _:return ft=w0(ft,gt.mode,bt),ft.return=gt,ft;case z:var kt=ft._init;return ft=kt(ft._payload),Xt(gt,ft,bt)}if(dt(ft)||lt(ft))return ft=Qc(ft,gt.mode,bt,null),ft.return=gt,ft;if(typeof ft.then=="function")return Xt(gt,Kp(ft),bt);if(ft.$$typeof===D)return Xt(gt,Fp(gt,ft),bt);Y0(gt,ft)}return null}function Tt(gt,ft,bt,kt){var Ee=ft!==null?ft.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return Ee!==null?null:q(gt,ft,""+bt,kt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case v:return bt.key===Ee?st(gt,ft,bt,kt):null;case _:return bt.key===Ee?St(gt,ft,bt,kt):null;case z:return Ee=bt._init,bt=Ee(bt._payload),Tt(gt,ft,bt,kt)}if(dt(bt)||lt(bt))return Ee!==null?null:zt(gt,ft,bt,kt,null);if(typeof bt.then=="function")return Tt(gt,ft,Kp(bt),kt);if(bt.$$typeof===D)return Tt(gt,ft,Fp(gt,bt),kt);Y0(gt,bt)}return null}function Lt(gt,ft,bt,kt,Ee){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return gt=gt.get(bt)||null,q(ft,gt,""+kt,Ee);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case v:return gt=gt.get(kt.key===null?bt:kt.key)||null,st(ft,gt,kt,Ee);case _:return gt=gt.get(kt.key===null?bt:kt.key)||null,St(ft,gt,kt,Ee);case z:var En=kt._init;return kt=En(kt._payload),Lt(gt,ft,bt,kt,Ee)}if(dt(kt)||lt(kt))return gt=gt.get(bt)||null,zt(ft,gt,kt,Ee,null);if(typeof kt.then=="function")return Lt(gt,ft,bt,Kp(kt),Ee);if(kt.$$typeof===D)return Lt(gt,ft,bt,Fp(ft,kt),Ee);Y0(ft,kt)}return null}function Xe(gt,ft,bt,kt){for(var Ee=null,En=null,Be=ft,Ve=ft=0,sr=null;Be!==null&&Ve<bt.length;Ve++){Be.index>Ve?(sr=Be,Be=null):sr=Be.sibling;var Yn=Tt(gt,Be,bt[Ve],kt);if(Yn===null){Be===null&&(Be=sr);break}o&&Be&&Yn.alternate===null&&c(gt,Be),ft=R(Yn,ft,Ve),En===null?Ee=Yn:En.sibling=Yn,En=Yn,Be=sr}if(Ve===bt.length)return p(gt,Be),kn&&Vl(gt,Ve),Ee;if(Be===null){for(;Ve<bt.length;Ve++)Be=Xt(gt,bt[Ve],kt),Be!==null&&(ft=R(Be,ft,Ve),En===null?Ee=Be:En.sibling=Be,En=Be);return kn&&Vl(gt,Ve),Ee}for(Be=y(Be);Ve<bt.length;Ve++)sr=Lt(Be,gt,Ve,bt[Ve],kt),sr!==null&&(o&&sr.alternate!==null&&Be.delete(sr.key===null?Ve:sr.key),ft=R(sr,ft,Ve),En===null?Ee=sr:En.sibling=sr,En=sr);return o&&Be.forEach(function(ed){return c(gt,ed)}),kn&&Vl(gt,Ve),Ee}function ke(gt,ft,bt,kt){if(bt==null)throw Error(n(151));for(var Ee=null,En=null,Be=ft,Ve=ft=0,sr=null,Yn=bt.next();Be!==null&&!Yn.done;Ve++,Yn=bt.next()){Be.index>Ve?(sr=Be,Be=null):sr=Be.sibling;var ed=Tt(gt,Be,Yn.value,kt);if(ed===null){Be===null&&(Be=sr);break}o&&Be&&ed.alternate===null&&c(gt,Be),ft=R(ed,ft,Ve),En===null?Ee=ed:En.sibling=ed,En=ed,Be=sr}if(Yn.done)return p(gt,Be),kn&&Vl(gt,Ve),Ee;if(Be===null){for(;!Yn.done;Ve++,Yn=bt.next())Yn=Xt(gt,Yn.value,kt),Yn!==null&&(ft=R(Yn,ft,Ve),En===null?Ee=Yn:En.sibling=Yn,En=Yn);return kn&&Vl(gt,Ve),Ee}for(Be=y(Be);!Yn.done;Ve++,Yn=bt.next())Yn=Lt(Be,gt,Ve,Yn.value,kt),Yn!==null&&(o&&Yn.alternate!==null&&Be.delete(Yn.key===null?Ve:Yn.key),ft=R(Yn,ft,Ve),En===null?Ee=Yn:En.sibling=Yn,En=Yn);return o&&Be.forEach(function(sF){return c(gt,sF)}),kn&&Vl(gt,Ve),Ee}function yi(gt,ft,bt,kt){if(typeof bt=="object"&&bt!==null&&bt.type===b&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case v:t:{for(var Ee=bt.key;ft!==null;){if(ft.key===Ee){if(Ee=bt.type,Ee===b){if(ft.tag===7){p(gt,ft.sibling),kt=M(ft,bt.props.children),kt.return=gt,gt=kt;break t}}else if(ft.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===z&&Qb(Ee)===ft.type){p(gt,ft.sibling),kt=M(ft,bt.props),Ff(kt,bt),kt.return=gt,gt=kt;break t}p(gt,ft);break}else c(gt,ft);ft=ft.sibling}bt.type===b?(kt=Qc(bt.props.children,gt.mode,kt,bt.key),kt.return=gt,gt=kt):(kt=xs(bt.type,bt.key,bt.props,null,gt.mode,kt),Ff(kt,bt),kt.return=gt,gt=kt)}return H(gt);case _:t:{for(Ee=bt.key;ft!==null;){if(ft.key===Ee)if(ft.tag===4&&ft.stateNode.containerInfo===bt.containerInfo&&ft.stateNode.implementation===bt.implementation){p(gt,ft.sibling),kt=M(ft,bt.children||[]),kt.return=gt,gt=kt;break t}else{p(gt,ft);break}else c(gt,ft);ft=ft.sibling}kt=w0(bt,gt.mode,kt),kt.return=gt,gt=kt}return H(gt);case z:return Ee=bt._init,bt=Ee(bt._payload),yi(gt,ft,bt,kt)}if(dt(bt))return Xe(gt,ft,bt,kt);if(lt(bt)){if(Ee=lt(bt),typeof Ee!="function")throw Error(n(150));return bt=Ee.call(bt),ke(gt,ft,bt,kt)}if(typeof bt.then=="function")return yi(gt,ft,Kp(bt),kt);if(bt.$$typeof===D)return yi(gt,ft,Fp(gt,bt),kt);Y0(gt,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint"?(bt=""+bt,ft!==null&&ft.tag===6?(p(gt,ft.sibling),kt=M(ft,bt),kt.return=gt,gt=kt):(p(gt,ft),kt=Np(bt,gt.mode,kt),kt.return=gt,gt=kt),H(gt)):p(gt,ft)}return function(gt,ft,bt,kt){try{Wp=0;var Ee=yi(gt,ft,bt,kt);return ju=null,Ee}catch(Be){if(Be===kp||Be===mo)throw Be;var En=Gr(29,Be,null,gt.mode);return En.lanes=kt,En.return=gt,En}finally{}}}var Xu=jb(!0),Xb=jb(!1),ai=ot(null),vo=null;function $c(o){var c=o.alternate;Et(Vi,Vi.current&1),Et(ai,o),vo===null&&(c===null||Nf.current!==null||c.memoizedState!==null)&&(vo=o)}function qb(o){if(o.tag===22){if(Et(Vi,Vi.current),Et(ai,o),vo===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(vo=o)}}else tu()}function tu(){Et(Vi,Vi.current),Et(ai,ai.current)}function nl(o){xt(ai),vo===o&&(vo=null),xt(Vi)}var Vi=ot(0);function Jl(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||vT(p)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function eu(o,c,p,y){c=o.memoizedState,p=p(y,c),p=p==null?c:m({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var br={enqueueSetState:function(o,c,p){o=o._reactInternals;var y=Fi(),M=el(y);M.payload=c,p!=null&&(M.callback=p),c=ql(o,M,y),c!==null&&(Er(c,o,y),Qu(c,o,y))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var y=Fi(),M=el(y);M.tag=1,M.payload=c,p!=null&&(M.callback=p),c=ql(o,M,y),c!==null&&(Er(c,o,y),Qu(c,o,y))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=Fi(),y=el(p);y.tag=2,c!=null&&(y.callback=c),c=ql(o,y,p),c!==null&&(Er(c,o,p),Qu(c,o,p))}};function Yb(o,c,p,y,M,R,H){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,R,H):c.prototype&&c.prototype.isPureReactComponent?!fo(p,y)||!fo(M,R):!0}function Wb(o,c,p,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==o&&br.enqueueReplaceState(c,c.state,null)}function il(o,c){var p=c;if("ref"in c){p={};for(var y in c)y!=="ref"&&(p[y]=c[y])}if(o=o.defaultProps){p===c&&(p=m({},p));for(var M in o)p[M]===void 0&&(p[M]=o[M])}return p}var qu=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Jp(o){qu(o)}function W0(o){console.error(o)}function Kb(o){qu(o)}function K0(o,c){try{var p=o.onUncaughtError;p(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function Va(o,c,p){try{var y=o.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function J0(o,c,p){return p=el(p),p.tag=3,p.payload={element:null},p.callback=function(){K0(o,c)},p}function Jb(o){return o=el(o),o.tag=3,o}function Z0(o,c,p,y){var M=p.type.getDerivedStateFromError;if(typeof M=="function"){var R=y.value;o.payload=function(){return M(R)},o.callback=function(){Va(c,p,y)}}var H=p.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(o.callback=function(){Va(c,p,y),typeof M!="function"&&(_a===null?_a=new Set([this]):_a.add(this));var q=y.stack;this.componentDidCatch(y.value,{componentStack:q!==null?q:""})})}function iT(o,c,p,y,M){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=p.alternate,c!==null&&Ha(c,p,M,!0),p=ai.current,p!==null){switch(p.tag){case 13:return vo===null?h():p.alternate===null&&xi===0&&(xi=3),p.flags&=-257,p.flags|=65536,p.lanes=M,y===Vp?p.flags|=16384:(c=p.updateQueue,c===null?p.updateQueue=new Set([y]):c.add(y),Dt(o,y,M)),!1;case 22:return p.flags|=65536,y===Vp?p.flags|=16384:(c=p.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=c):(p=c.retryQueue,p===null?c.retryQueue=new Set([y]):p.add(y)),Dt(o,y,M)),!1}throw Error(n(435,p.tag))}return Dt(o,y,M),h(),!1}if(kn)return c=ai.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=M,y!==L0&&(o=Error(n(422),{cause:y}),Vu(Ps(o,p)))):(y!==L0&&(c=Error(n(423),{cause:y}),Vu(Ps(c,p))),o=o.current.alternate,o.flags|=65536,M&=-M,o.lanes|=M,y=Ps(y,p),M=J0(o.stateNode,y,M),Df(o,M),xi!==4&&(xi=2)),!1;var R=Error(n(520),{cause:y});if(R=Ps(R,p),qn===null?qn=[R]:qn.push(R),xi!==4&&(xi=2),c===null)return!0;y=Ps(y,p),p=c;do{switch(p.tag){case 3:return p.flags|=65536,o=M&-M,p.lanes|=o,o=J0(p.stateNode,y,o),Df(p,o),!1;case 1:if(c=p.type,R=p.stateNode,(p.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(_a===null||!_a.has(R))))return p.flags|=65536,M&=-M,p.lanes|=M,M=Jb(M),Z0(M,o,p,y),Df(p,M),!1}p=p.return}while(p!==null);return!1}var Zb=Error(n(461)),bs=!1;function Qi(o,c,p,y){c.child=o===null?Xb(c,null,p,y):Xu(c,o.child,p,y)}function Vr(o,c,p,y,M){p=p.render;var R=c.ref;if("ref"in y){var H={};for(var q in y)q!=="ref"&&(H[q]=y[q])}else H=y;return tl(c),y=Wl(o,c,p,H,R,M),q=u2(),o!==null&&!bs?(H0(o,c,M),Ss(o,c,M)):(kn&&q&&$y(c),c.flags|=1,Qi(o,c,y,M),c.child)}function Qr(o,c,p,y,M){if(o===null){var R=p.type;return typeof R=="function"&&!Op(R)&&R.defaultProps===void 0&&p.compare===null?(c.tag=15,c.type=R,T2(o,c,R,y,M)):(o=xs(p.type,null,y,c,c.mode,M),o.ref=c.ref,o.return=c,c.child=o)}if(R=o.child,!Zp(o,M)){var H=R.memoizedProps;if(p=p.compare,p=p!==null?p:fo,p(H,y)&&o.ref===c.ref)return Ss(o,c,M)}return c.flags|=1,o=Gi(R,y),o.ref=c.ref,o.return=c,c.child=o}function T2(o,c,p,y,M){if(o!==null){var R=o.memoizedProps;if(fo(R,y)&&o.ref===c.ref)if(bs=!1,c.pendingProps=y=R,Zp(o,M))(o.flags&131072)!==0&&(bs=!0);else return c.lanes=o.lanes,Ss(o,c,M)}return Hf(o,c,p,y,M)}function Yu(o,c,p){var y=c.pendingProps,M=y.children,R=o!==null?o.memoizedState:null;if(y.mode==="hidden"){if((c.flags&128)!==0){if(y=R!==null?R.baseLanes|p:p,o!==null){for(M=c.child=o.child,R=0;M!==null;)R=R|M.lanes|M.childLanes,M=M.sibling;c.childLanes=R&~y}else c.childLanes=0,c.child=null;return Wu(o,c,y,p)}if((p&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Gp(c,R!==null?R.cachePool:null),R!==null?pb(c,R):c2(),qb(c);else return c.lanes=c.childLanes=536870912,Wu(o,c,R!==null?R.baseLanes|p:p,p)}else R!==null?(Gp(c,R.cachePool),pb(c,R),tu(),c.memoizedState=null):(o!==null&&Gp(c,null),c2(),tu());return Qi(o,c,M,p),c.child}function Wu(o,c,p,y){var M=Wc();return M=M===null?null:{parent:ts._currentValue,pool:M},c.memoizedState={baseLanes:p,cachePool:M},o!==null&&Gp(c,null),c2(),qb(c),o!==null&&Ha(o,c,y,!0),null}function Ku(o,c){var p=c.ref;if(p===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(o===null||o.ref!==p)&&(c.flags|=4194816)}}function Hf(o,c,p,y,M){return tl(c),p=Wl(o,c,p,y,void 0,M),y=u2(),o!==null&&!bs?(H0(o,c,M),Ss(o,c,M)):(kn&&y&&$y(c),c.flags|=1,Qi(o,c,p,M),c.child)}function fa(o,c,p,y,M,R){return tl(c),c.updateQueue=null,p=vb(c,y,p,M),gb(o),y=u2(),o!==null&&!bs?(H0(o,c,R),Ss(o,c,R)):(kn&&y&&$y(c),c.flags|=1,Qi(o,c,p,R),c.child)}function da(o,c,p,y,M){if(tl(c),c.stateNode===null){var R=Vc,H=p.contextType;typeof H=="object"&&H!==null&&(R=Ii(H)),R=new p(y,R),c.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=br,c.stateNode=R,R._reactInternals=c,R=c.stateNode,R.props=y,R.state=c.memoizedState,R.refs={},o2(c),H=p.contextType,R.context=typeof H=="object"&&H!==null?Ii(H):Vc,R.state=c.memoizedState,H=p.getDerivedStateFromProps,typeof H=="function"&&(eu(c,p,H,y),R.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(H=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),H!==R.state&&br.enqueueReplaceState(R,R.state,null),Bf(c,y,R,M),Qp(),R.state=c.memoizedState),typeof R.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(o===null){R=c.stateNode;var q=c.memoizedProps,st=il(p,q);R.props=st;var St=R.context,zt=p.contextType;H=Vc,typeof zt=="object"&&zt!==null&&(H=Ii(zt));var Xt=p.getDerivedStateFromProps;zt=typeof Xt=="function"||typeof R.getSnapshotBeforeUpdate=="function",q=c.pendingProps!==q,zt||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(q||St!==H)&&Wb(c,R,y,H),Xl=!1;var Tt=c.memoizedState;R.state=Tt,Bf(c,y,R,M),Qp(),St=c.memoizedState,q||Tt!==St||Xl?(typeof Xt=="function"&&(eu(c,p,Xt,y),St=c.memoizedState),(st=Xl||Yb(c,p,st,y,Tt,St,H))?(zt||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(c.flags|=4194308)):(typeof R.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=St),R.props=y,R.state=St,R.context=H,y=st):(typeof R.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{R=c.stateNode,Qe(o,c),H=c.memoizedProps,zt=il(p,H),R.props=zt,Xt=c.pendingProps,Tt=R.context,St=p.contextType,st=Vc,typeof St=="object"&&St!==null&&(st=Ii(St)),q=p.getDerivedStateFromProps,(St=typeof q=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(H!==Xt||Tt!==st)&&Wb(c,R,y,st),Xl=!1,Tt=c.memoizedState,R.state=Tt,Bf(c,y,R,M),Qp();var Lt=c.memoizedState;H!==Xt||Tt!==Lt||Xl||o!==null&&o.dependencies!==null&&Pp(o.dependencies)?(typeof q=="function"&&(eu(c,p,q,y),Lt=c.memoizedState),(zt=Xl||Yb(c,p,zt,y,Tt,Lt,st)||o!==null&&o.dependencies!==null&&Pp(o.dependencies))?(St||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(y,Lt,st),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(y,Lt,st)),typeof R.componentDidUpdate=="function"&&(c.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof R.componentDidUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Lt),R.props=y,R.state=Lt,R.context=st,y=zt):(typeof R.componentDidUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=1024),y=!1)}return R=y,Ku(o,c),y=(c.flags&128)!==0,R||y?(R=c.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:R.render(),c.flags|=1,o!==null&&y?(c.child=Xu(c,o.child,null,M),c.child=Xu(c,null,p,M)):Qi(o,c,p,M),c.memoizedState=R.state,o=c.child):o=Ss(o,c,M),o}function nu(o,c,p,y){return Tf(),c.flags|=256,Qi(o,c,p,y),c.child}var yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _o(o){return{baseLanes:o,cachePool:N0()}}function hs(o,c,p){return o=o!==null?o.childLanes&~p:0,c&&(o|=Ya),o}function zf(o,c,p){var y=c.pendingProps,M=!1,R=(c.flags&128)!==0,H;if((H=R)||(H=o!==null&&o.memoizedState===null?!1:(Vi.current&2)!==0),H&&(M=!0,c.flags&=-129),H=(c.flags&32)!==0,c.flags&=-33,o===null){if(kn){if(M?$c(c):tu(),kn){var q=Li,st;if(st=q){t:{for(st=q,q=ca;st.nodeType!==8;){if(!q){q=null;break t}if(st=ic(st.nextSibling),st===null){q=null;break t}}q=st}q!==null?(c.memoizedState={dehydrated:q,treeContext:jc!==null?{id:Zo,overflow:$o}:null,retryLane:536870912,hydrationErrors:null},st=Gr(18,null,null,0),st.stateNode=q,st.return=c,c.child=st,_r=c,Li=null,st=!0):st=!1}st||Xc(c)}if(q=c.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return vT(q)?c.lanes=32:c.lanes=536870912,null;nl(c)}return q=y.children,y=y.fallback,M?(tu(),M=c.mode,q=Ju({mode:"hidden",children:q},M),y=Qc(y,M,p,null),q.return=c,y.return=c,q.sibling=y,c.child=q,M=c.child,M.memoizedState=_o(p),M.childLanes=hs(o,H,p),c.memoizedState=yo,y):($c(c),sl(c,q))}if(st=o.memoizedState,st!==null&&(q=st.dehydrated,q!==null)){if(R)c.flags&256?($c(c),c.flags&=-257,c=zs(o,c,p)):c.memoizedState!==null?(tu(),c.child=o.child,c.flags|=128,c=null):(tu(),M=y.fallback,q=c.mode,y=Ju({mode:"visible",children:y.children},q),M=Qc(M,q,p,null),M.flags|=2,y.return=c,M.return=c,y.sibling=M,c.child=y,Xu(c,o.child,null,p),y=c.child,y.memoizedState=_o(p),y.childLanes=hs(o,H,p),c.memoizedState=yo,c=M);else if($c(c),vT(q)){if(H=q.nextSibling&&q.nextSibling.dataset,H)var St=H.dgst;H=St,y=Error(n(419)),y.stack="",y.digest=H,Vu({value:y,source:null,stack:null}),c=zs(o,c,p)}else if(bs||Ha(o,c,p,!1),H=(p&o.childLanes)!==0,bs||H){if(H=We,H!==null&&(y=p&-p,y=(y&42)!==0?1:Jn(y),y=(y&(H.suspendedLanes|p))!==0?0:y,y!==0&&y!==st.retryLane))throw st.retryLane=y,kl(o,y),Er(H,o,y),Zb;q.data==="$?"||h(),c=zs(o,c,p)}else q.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=st.treeContext,Li=ic(q.nextSibling),_r=c,kn=!0,Fa=null,ca=!1,o!==null&&(Fs[la++]=Zo,Fs[la++]=$o,Fs[la++]=jc,Zo=o.id,$o=o.overflow,jc=c),c=sl(c,y.children),c.flags|=4096);return c}return M?(tu(),M=y.fallback,q=c.mode,st=o.child,St=st.sibling,y=Gi(st,{mode:"hidden",children:y.children}),y.subtreeFlags=st.subtreeFlags&65011712,St!==null?M=Gi(St,M):(M=Qc(M,q,p,null),M.flags|=2),M.return=c,y.return=c,y.sibling=M,c.child=y,y=M,M=c.child,q=o.child.memoizedState,q===null?q=_o(p):(st=q.cachePool,st!==null?(St=ts._currentValue,st=st.parent!==St?{parent:St,pool:St}:st):st=N0(),q={baseLanes:q.baseLanes|p,cachePool:st}),M.memoizedState=q,M.childLanes=hs(o,H,p),c.memoizedState=yo,y):($c(c),p=o.child,o=p.sibling,p=Gi(p,{mode:"visible",children:y.children}),p.return=c,p.sibling=null,o!==null&&(H=c.deletions,H===null?(c.deletions=[o],c.flags|=16):H.push(o)),c.child=p,c.memoizedState=null,p)}function sl(o,c){return c=Ju({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Ju(o,c){return o=Gr(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function zs(o,c,p){return Xu(c,o.child,null,p),o=sl(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function Gs(o,c,p){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),i2(o.return,c,p)}function Bn(o,c,p,y,M){var R=o.memoizedState;R===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:M}:(R.isBackwards=c,R.rendering=null,R.renderingStartTime=0,R.last=y,R.tail=p,R.tailMode=M)}function Qa(o,c,p){var y=c.pendingProps,M=y.revealOrder,R=y.tail;if(Qi(o,c,y.children,p),y=Vi.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Gs(o,p,c);else if(o.tag===19)Gs(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break t;for(;o.sibling===null;){if(o.return===null||o.return===c)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}switch(Et(Vi,y),M){case"forwards":for(p=c.child,M=null;p!==null;)o=p.alternate,o!==null&&Jl(o)===null&&(M=p),p=p.sibling;p=M,p===null?(M=c.child,c.child=null):(M=p.sibling,p.sibling=null),Bn(c,!1,M,p,R);break;case"backwards":for(p=null,M=c.child,c.child=null;M!==null;){if(o=M.alternate,o!==null&&Jl(o)===null){c.child=M;break}o=M.sibling,M.sibling=p,p=M,M=o}Bn(c,!0,p,null,R);break;case"together":Bn(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ss(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),So|=c.lanes,(p&c.childLanes)===0)if(o!==null){if(Ha(o,c,p,!1),(p&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,p=Gi(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=Gi(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function Zp(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Pp(o)))}function ja(o,c,p){switch(c.tag){case 3:Wt(c,c.stateNode.containerInfo),Yc(c,ts,o.memoizedState.cache),Tf();break;case 27:case 5:ee(c);break;case 4:Wt(c,c.stateNode.containerInfo);break;case 10:Yc(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?($c(c),c.flags|=128,null):(p&c.child.childLanes)!==0?zf(o,c,p):($c(c),o=Ss(o,c,p),o!==null?o.sibling:null);$c(c);break;case 19:var M=(o.flags&128)!==0;if(y=(p&c.childLanes)!==0,y||(Ha(o,c,p,!1),y=(p&c.childLanes)!==0),M){if(y)return Qa(o,c,p);c.flags|=128}if(M=c.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Et(Vi,Vi.current),y)break;return null;case 22:case 23:return c.lanes=0,Yu(o,c,p);case 24:Yc(c,ts,o.memoizedState.cache)}return Ss(o,c,p)}function Zu(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps)bs=!0;else{if(!Zp(o,p)&&(c.flags&128)===0)return bs=!1,ja(o,c,p);bs=(o.flags&131072)!==0}else bs=!1,kn&&(c.flags&1048576)!==0&&R0(c,Mf,c.index);switch(c.lanes=0,c.tag){case 16:t:{o=c.pendingProps;var y=c.elementType,M=y._init;if(y=M(y._payload),c.type=y,typeof y=="function")Op(y)?(o=il(y,o),c.tag=1,c=da(null,c,y,o,p)):(c.tag=0,c=Hf(null,c,y,o,p));else{if(y!=null){if(M=y.$$typeof,M===B){c.tag=11,c=Vr(null,c,y,o,p);break t}else if(M===F){c.tag=14,c=Qr(null,c,y,o,p);break t}}throw c=ut(y)||y,Error(n(306,c,""))}}return c;case 0:return Hf(o,c,c.type,c.pendingProps,p);case 1:return y=c.type,M=il(y,c.pendingProps),da(o,c,y,M,p);case 3:t:{if(Wt(c,c.stateNode.containerInfo),o===null)throw Error(n(387));y=c.pendingProps;var R=c.memoizedState;M=R.element,Qe(o,c),Bf(c,y,null,p);var H=c.memoizedState;if(y=H.cache,Yc(c,ts,y),y!==R.cache&&Up(c,[ts],p,!0),Qp(),y=H.element,R.isDehydrated)if(R={element:y,isDehydrated:!1,cache:H.cache},c.updateQueue.baseState=R,c.memoizedState=R,c.flags&256){c=nu(o,c,y,p);break t}else if(y!==M){M=Ps(Error(n(424)),c),Vu(M),c=nu(o,c,y,p);break t}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Li=ic(o.firstChild),_r=c,kn=!0,Fa=null,ca=!0,p=Xb(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Tf(),y===M){c=Ss(o,c,p);break t}Qi(o,c,y,p)}c=c.child}return c;case 26:return Ku(o,c),o===null?(p=lR(c.type,null,c.pendingProps,null))?c.memoizedState=p:kn||(p=c.type,o=c.pendingProps,y=sS(Bt.current).createElement(p),y[Ji]=c,y[cs]=o,Mr(y,p,o),Zi(y),c.stateNode=y):c.memoizedState=lR(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return ee(c),o===null&&kn&&(y=c.stateNode=rR(c.type,c.pendingProps,Bt.current),_r=c,ca=!0,M=Li,Kf(c.type)?(yT=M,Li=ic(y.firstChild)):Li=M),Qi(o,c,c.pendingProps.children,p),Ku(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&kn&&((M=y=Li)&&(y=OP(y,c.type,c.pendingProps,ca),y!==null?(c.stateNode=y,_r=c,Li=ic(y.firstChild),ca=!1,M=!0):M=!1),M||Xc(c)),ee(c),M=c.type,R=c.pendingProps,H=o!==null?o.memoizedProps:null,y=R.children,pT(M,R)?y=null:H!==null&&pT(M,H)&&(c.flags|=32),c.memoizedState!==null&&(M=Wl(o,c,JM,null,null,p),P2._currentValue=M),Ku(o,c),Qi(o,c,y,p),c.child;case 6:return o===null&&kn&&((o=p=Li)&&(p=NP(p,c.pendingProps,ca),p!==null?(c.stateNode=p,_r=c,Li=null,o=!0):o=!1),o||Xc(c)),null;case 13:return zf(o,c,p);case 4:return Wt(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=Xu(c,null,y,p):Qi(o,c,y,p),c.child;case 11:return Vr(o,c,c.type,c.pendingProps,p);case 7:return Qi(o,c,c.pendingProps,p),c.child;case 8:return Qi(o,c,c.pendingProps.children,p),c.child;case 12:return Qi(o,c,c.pendingProps.children,p),c.child;case 10:return y=c.pendingProps,Yc(c,c.type,y.value),Qi(o,c,y.children,p),c.child;case 9:return M=c.type._context,y=c.pendingProps.children,tl(c),M=Ii(M),y=y(M),c.flags|=1,Qi(o,c,y,p),c.child;case 14:return Qr(o,c,c.type,c.pendingProps,p);case 15:return T2(o,c,c.type,c.pendingProps,p);case 19:return Qa(o,c,p);case 31:return y=c.pendingProps,p=c.mode,y={mode:y.mode,children:y.children},o===null?(p=Ju(y,p),p.ref=c.ref,c.child=p,p.return=c,c=p):(p=Gi(o.child,y),p.ref=c.ref,c.child=p,p.return=c,c=p),c;case 22:return Yu(o,c,p);case 24:return tl(c),y=Ii(ts),o===null?(M=Wc(),M===null&&(M=We,R=B0(),M.pooledCache=R,R.refCount++,R!==null&&(M.pooledCacheLanes|=p),M=R),c.memoizedState={parent:y,cache:M},o2(c),Yc(c,ts,M)):((o.lanes&p)!==0&&(Qe(o,c),Bf(c,null,null,p),Qp()),M=o.memoizedState,R=c.memoizedState,M.parent!==y?(M={parent:y,cache:y},c.memoizedState=M,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=M),Yc(c,ts,y)):(y=R.cache,Yc(c,ts,y),y!==M.cache&&Up(c,[ts],p,!0))),Qi(o,c,c.pendingProps.children,p),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function Ao(o){o.flags|=4}function $p(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!dR(c)){if(c=ai.current,c!==null&&((Ue&4194048)===Ue?vo!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||c!==vo))throw Ga=Vp,r2;o.flags|=8192}}function Zl(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?ue():536870912,o.lanes|=c,Pn|=c)}function $u(o,c){if(!kn)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function pi(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(c)for(var M=o.child;M!==null;)p|=M.lanes|M.childLanes,y|=M.subtreeFlags&65011712,y|=M.flags&65011712,M.return=o,M=M.sibling;else for(M=o.child;M!==null;)p|=M.lanes|M.childLanes,y|=M.subtreeFlags,y|=M.flags,M.return=o,M=M.sibling;return o.subtreeFlags|=y,o.childLanes=p,c}function C2(o,c,p){var y=c.pendingProps;switch(t2(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(c),null;case 1:return pi(c),null;case 3:return p=c.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),jl(ts),ve(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(po(c)?Ao(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,jn())),pi(c),null;case 26:return p=c.memoizedState,o===null?(Ao(c),p!==null?(pi(c),$p(c,p)):(pi(c),c.flags&=-16777217)):p?p!==o.memoizedState?(Ao(c),pi(c),$p(c,p)):(pi(c),c.flags&=-16777217):(o.memoizedProps!==y&&Ao(c),pi(c),c.flags&=-16777217),null;case 27:Ye(c),p=Bt.current;var M=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==y&&Ao(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return pi(c),null}o=ct.current,po(c)?ub(c):(o=rR(M,y,p),c.stateNode=o,Ao(c))}return pi(c),null;case 5:if(Ye(c),p=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==y&&Ao(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return pi(c),null}if(o=ct.current,po(c))ub(c);else{switch(M=sS(Bt.current),o){case 1:o=M.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:o=M.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":o=M.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":o=M.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":o=M.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof y.is=="string"?M.createElement("select",{is:y.is}):M.createElement("select"),y.multiple?o.multiple=!0:y.size&&(o.size=y.size);break;default:o=typeof y.is=="string"?M.createElement(p,{is:y.is}):M.createElement(p)}}o[Ji]=c,o[cs]=y;t:for(M=c.child;M!==null;){if(M.tag===5||M.tag===6)o.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===c)break t;for(;M.sibling===null;){if(M.return===null||M.return===c)break t;M=M.return}M.sibling.return=M.return,M=M.sibling}c.stateNode=o;t:switch(Mr(o,p,y),p){case"button":case"input":case"select":case"textarea":o=!!y.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&Ao(c)}}return pi(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==y&&Ao(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(n(166));if(o=Bt.current,po(c)){if(o=c.stateNode,p=c.memoizedProps,y=null,M=_r,M!==null)switch(M.tag){case 27:case 5:y=M.memoizedProps}o[Ji]=c,o=!!(o.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||Z7(o.nodeValue,p)),o||Xc(c)}else o=sS(o).createTextNode(y),o[Ji]=c,c.stateNode=o}return pi(c),null;case 13:if(y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(M=po(c),y!==null&&y.dehydrated!==null){if(o===null){if(!M)throw Error(n(318));if(M=c.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[Ji]=c}else Tf(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;pi(c),M=!1}else M=jn(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=M),M=!0;if(!M)return c.flags&256?(nl(c),c):(nl(c),null)}if(nl(c),(c.flags&128)!==0)return c.lanes=p,c;if(p=y!==null,o=o!==null&&o.memoizedState!==null,p){y=c.child,M=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(M=y.alternate.memoizedState.cachePool.pool);var R=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(R=y.memoizedState.cachePool.pool),R!==M&&(y.flags|=2048)}return p!==o&&p&&(c.child.flags|=8192),Zl(c,c.updateQueue),pi(c),null;case 4:return ve(),o===null&&cT(c.stateNode.containerInfo),pi(c),null;case 10:return jl(c.type),pi(c),null;case 19:if(xt(Vi),M=c.memoizedState,M===null)return pi(c),null;if(y=(c.flags&128)!==0,R=M.rendering,R===null)if(y)$u(M,!1);else{if(xi!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(R=Jl(o),R!==null){for(c.flags|=128,$u(M,!1),o=R.updateQueue,c.updateQueue=o,Zl(c,o),c.subtreeFlags=0,o=p,p=c.child;p!==null;)Zy(p,o),p=p.sibling;return Et(Vi,Vi.current&1|2),c.child}o=o.sibling}M.tail!==null&&Vt()>nr&&(c.flags|=128,y=!0,$u(M,!1),c.lanes=4194304)}else{if(!y)if(o=Jl(R),o!==null){if(c.flags|=128,y=!0,o=o.updateQueue,c.updateQueue=o,Zl(c,o),$u(M,!0),M.tail===null&&M.tailMode==="hidden"&&!R.alternate&&!kn)return pi(c),null}else 2*Vt()-M.renderingStartTime>nr&&p!==536870912&&(c.flags|=128,y=!0,$u(M,!1),c.lanes=4194304);M.isBackwards?(R.sibling=c.child,c.child=R):(o=M.last,o!==null?o.sibling=R:c.child=R,M.last=R)}return M.tail!==null?(c=M.tail,M.rendering=c,M.tail=c.sibling,M.renderingStartTime=Vt(),c.sibling=null,o=Vi.current,Et(Vi,y?o&1|2:o&1),c):(pi(c),null);case 22:case 23:return nl(c),jp(),y=c.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(p&536870912)!==0&&(c.flags&128)===0&&(pi(c),c.subtreeFlags&6&&(c.flags|=8192)):pi(c),p=c.updateQueue,p!==null&&Zl(c,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048),o!==null&&xt(za),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),jl(ts),pi(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function Gf(o,c){switch(t2(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return jl(ts),ve(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Ye(c),null;case 13:if(nl(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Tf()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return xt(Vi),null;case 4:return ve(),null;case 10:return jl(c.type),null;case 22:case 23:return nl(c),jp(),o!==null&&xt(za),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return jl(ts),null;case 25:return null;default:return null}}function kf(o,c){switch(t2(c),c.tag){case 3:jl(ts),ve();break;case 26:case 27:case 5:Ye(c);break;case 4:ve();break;case 13:nl(c);break;case 19:xt(Vi);break;case 10:jl(c.type);break;case 22:case 23:nl(c),jp(),o!==null&&xt(za);break;case 24:jl(ts)}}function th(o,c){try{var p=c.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var M=y.next;p=M;do{if((p.tag&o)===o){y=void 0;var R=p.create,H=p.inst;y=R(),H.destroy=y}p=p.next}while(p!==M)}}catch(q){ht(c,c.return,q)}}function pa(o,c,p){try{var y=c.updateQueue,M=y!==null?y.lastEffect:null;if(M!==null){var R=M.next;y=R;do{if((y.tag&o)===o){var H=y.inst,q=H.destroy;if(q!==void 0){H.destroy=void 0,M=c;var st=p,St=q;try{St()}catch(zt){ht(M,st,zt)}}}y=y.next}while(y!==R)}}catch(zt){ht(c,c.return,zt)}}function eh(o){var c=o.updateQueue;if(c!==null){var p=o.stateNode;try{db(c,p)}catch(y){ht(o,o.return,y)}}}function $l(o,c,p){p.props=il(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(y){ht(o,c,y)}}function nh(o,c){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof p=="function"?o.refCleanup=p(y):p.current=y}}catch(M){ht(o,c,M)}}function rl(o,c){var p=o.ref,y=o.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(M){ht(o,c,M)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(M){ht(o,c,M)}else p.current=null}function Vf(o){var c=o.type,p=o.memoizedProps,y=o.stateNode;try{t:switch(c){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break t;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(M){ht(o,o.return,M)}}function tm(o,c,p){try{var y=o.stateNode;wP(y,o.type,p,c),y[cs]=c}catch(M){ht(o,o.return,M)}}function em(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Kf(o.type)||o.tag===4}function iu(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||em(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Kf(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function su(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(o,c):(c=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,c.appendChild(o),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=iS));else if(y!==4&&(y===27&&Kf(o.type)&&(p=o.stateNode,c=null),o=o.child,o!==null))for(su(o,c,p),o=o.sibling;o!==null;)su(o,c,p),o=o.sibling}function ru(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(y!==4&&(y===27&&Kf(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(ru(o,c,p),o=o.sibling;o!==null;)ru(o,c,p),o=o.sibling}function au(o){var c=o.stateNode,p=o.memoizedProps;try{for(var y=o.type,M=c.attributes;M.length;)c.removeAttributeNode(M[0]);Mr(c,y,p),c[Ji]=o,c[cs]=p}catch(R){ht(o,o.return,R)}}var al=!1,mi=!1,Qf=!1,ma=typeof WeakSet=="function"?WeakSet:Set,oi=null;function fs(o,c){if(o=o.containerInfo,fT=uS,o=jy(o),Rp(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else t:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var M=y.anchorOffset,R=y.focusNode;y=y.focusOffset;try{p.nodeType,R.nodeType}catch{p=null;break t}var H=0,q=-1,st=-1,St=0,zt=0,Xt=o,Tt=null;e:for(;;){for(var Lt;Xt!==p||M!==0&&Xt.nodeType!==3||(q=H+M),Xt!==R||y!==0&&Xt.nodeType!==3||(st=H+y),Xt.nodeType===3&&(H+=Xt.nodeValue.length),(Lt=Xt.firstChild)!==null;)Tt=Xt,Xt=Lt;for(;;){if(Xt===o)break e;if(Tt===p&&++St===M&&(q=H),Tt===R&&++zt===y&&(st=H),(Lt=Xt.nextSibling)!==null)break;Xt=Tt,Tt=Xt.parentNode}Xt=Lt}p=q===-1||st===-1?null:{start:q,end:st}}else p=null}p=p||{start:0,end:0}}else p=null;for(dT={focusedElem:o,selectionRange:p},uS=!1,oi=c;oi!==null;)if(c=oi,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,oi=o;else for(;oi!==null;){switch(c=oi,R=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&R!==null){o=void 0,p=c,M=R.memoizedProps,R=R.memoizedState,y=p.stateNode;try{var Xe=il(p.type,M,p.elementType===p.type);o=y.getSnapshotBeforeUpdate(Xe,R),y.__reactInternalSnapshotBeforeUpdate=o}catch(ke){ht(p,p.return,ke)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,p=o.nodeType,p===9)gT(o);else if(p===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":gT(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=c.sibling,o!==null){o.return=c.return,oi=o;break}oi=c.return}}function tc(o,c,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Sr(o,p),y&4&&th(5,p);break;case 1:if(Sr(o,p),y&4)if(o=p.stateNode,c===null)try{o.componentDidMount()}catch(H){ht(p,p.return,H)}else{var M=il(p.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(M,c,o.__reactInternalSnapshotBeforeUpdate)}catch(H){ht(p,p.return,H)}}y&64&&eh(p),y&512&&nh(p,p.return);break;case 3:if(Sr(o,p),y&64&&(o=p.updateQueue,o!==null)){if(c=null,p.child!==null)switch(p.child.tag){case 27:case 5:c=p.child.stateNode;break;case 1:c=p.child.stateNode}try{db(o,c)}catch(H){ht(p,p.return,H)}}break;case 27:c===null&&y&4&&au(p);case 26:case 5:Sr(o,p),c===null&&y&4&&Vf(p),y&512&&nh(p,p.return);break;case 12:Sr(o,p);break;case 13:Sr(o,p),y&4&&ou(o,p),y&64&&(o=p.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(p=bi.bind(null,p),IP(o,p))));break;case 22:if(y=p.memoizedState!==null||al,!y){c=c!==null&&c.memoizedState!==null||mi,M=al;var R=mi;al=y,(mi=c)&&!R?ol(o,p,(p.subtreeFlags&8772)!==0):Sr(o,p),al=M,mi=R}break;case 30:break;default:Sr(o,p)}}function ln(o){var c=o.alternate;c!==null&&(o.alternate=null,ln(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&ti(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Fe=null,Un=!1;function Xa(o,c,p){for(p=p.child;p!==null;)ih(o,c,p),p=p.sibling}function ih(o,c,p){if(ne&&typeof ne.onCommitFiberUnmount=="function")try{ne.onCommitFiberUnmount(Ot,p)}catch{}switch(p.tag){case 26:mi||rl(p,c),Xa(o,c,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:mi||rl(p,c);var y=Fe,M=Un;Kf(p.type)&&(Fe=p.stateNode,Un=!1),Xa(o,c,p),O2(p.stateNode),Fe=y,Un=M;break;case 5:mi||rl(p,c);case 6:if(y=Fe,M=Un,Fe=null,Xa(o,c,p),Fe=y,Un=M,Fe!==null)if(Un)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(p.stateNode)}catch(R){ht(p,c,R)}else try{Fe.removeChild(p.stateNode)}catch(R){ht(p,c,R)}break;case 18:Fe!==null&&(Un?(o=Fe,iR(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,p.stateNode),G2(o)):iR(Fe,p.stateNode));break;case 4:y=Fe,M=Un,Fe=p.stateNode.containerInfo,Un=!0,Xa(o,c,p),Fe=y,Un=M;break;case 0:case 11:case 14:case 15:mi||pa(2,p,c),mi||pa(4,p,c),Xa(o,c,p);break;case 1:mi||(rl(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"&&$l(p,c,y)),Xa(o,c,p);break;case 21:Xa(o,c,p);break;case 22:mi=(y=mi)||p.memoizedState!==null,Xa(o,c,p),mi=y;break;default:Xa(o,c,p)}}function ou(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{G2(o)}catch(p){ht(c,c.return,p)}}function $0(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new ma),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new ma),c;default:throw Error(n(435,o.tag))}}function sh(o,c){var p=$0(o);c.forEach(function(y){var M=je.bind(null,o,y);p.has(y)||(p.add(y),y.then(M,M))})}function Es(o,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var M=p[y],R=o,H=c,q=H;t:for(;q!==null;){switch(q.tag){case 27:if(Kf(q.type)){Fe=q.stateNode,Un=!1;break t}break;case 5:Fe=q.stateNode,Un=!1;break t;case 3:case 4:Fe=q.stateNode.containerInfo,Un=!0;break t}q=q.return}if(Fe===null)throw Error(n(160));ih(R,H,M),Fe=null,Un=!1,R=M.alternate,R!==null&&(R.return=null),M.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)t1(c,o),c=c.sibling}var xo=null;function t1(o,c){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Es(c,o),Ui(o),y&4&&(pa(3,o,o.return),th(3,o),pa(5,o,o.return));break;case 1:Es(c,o),Ui(o),y&512&&(mi||p===null||rl(p,p.return)),y&64&&al&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var M=xo;if(Es(c,o),Ui(o),y&512&&(mi||p===null||rl(p,p.return)),y&4){var R=p!==null?p.memoizedState:null;if(y=o.memoizedState,p===null)if(y===null)if(o.stateNode===null){t:{y=o.type,p=o.memoizedProps,M=M.ownerDocument||M;e:switch(y){case"title":R=M.getElementsByTagName("title")[0],(!R||R[lo]||R[Ji]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=M.createElement(y),M.head.insertBefore(R,M.querySelector("head > title"))),Mr(R,y,p),R[Ji]=o,Zi(R),y=R;break t;case"link":var H=hR("link","href",M).get(y+(p.href||""));if(H){for(var q=0;q<H.length;q++)if(R=H[q],R.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&R.getAttribute("rel")===(p.rel==null?null:p.rel)&&R.getAttribute("title")===(p.title==null?null:p.title)&&R.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){H.splice(q,1);break e}}R=M.createElement(y),Mr(R,y,p),M.head.appendChild(R);break;case"meta":if(H=hR("meta","content",M).get(y+(p.content||""))){for(q=0;q<H.length;q++)if(R=H[q],R.getAttribute("content")===(p.content==null?null:""+p.content)&&R.getAttribute("name")===(p.name==null?null:p.name)&&R.getAttribute("property")===(p.property==null?null:p.property)&&R.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&R.getAttribute("charset")===(p.charSet==null?null:p.charSet)){H.splice(q,1);break e}}R=M.createElement(y),Mr(R,y,p),M.head.appendChild(R);break;default:throw Error(n(468,y))}R[Ji]=o,Zi(R),y=R}o.stateNode=y}else fR(M,o.type,o.stateNode);else o.stateNode=uR(M,y,o.memoizedProps);else R!==y?(R===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):R.count--,y===null?fR(M,o.type,o.stateNode):uR(M,y,o.memoizedProps)):y===null&&o.stateNode!==null&&tm(o,o.memoizedProps,p.memoizedProps)}break;case 27:Es(c,o),Ui(o),y&512&&(mi||p===null||rl(p,p.return)),p!==null&&y&4&&tm(o,o.memoizedProps,p.memoizedProps);break;case 5:if(Es(c,o),Ui(o),y&512&&(mi||p===null||rl(p,p.return)),o.flags&32){M=o.stateNode;try{gr(M,"")}catch(Lt){ht(o,o.return,Lt)}}y&4&&o.stateNode!=null&&(M=o.memoizedProps,tm(o,M,p!==null?p.memoizedProps:M)),y&1024&&(Qf=!0);break;case 6:if(Es(c,o),Ui(o),y&4){if(o.stateNode===null)throw Error(n(162));y=o.memoizedProps,p=o.stateNode;try{p.nodeValue=y}catch(Lt){ht(o,o.return,Lt)}}break;case 3:if(oS=null,M=xo,xo=rS(c.containerInfo),Es(c,o),xo=M,Ui(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{G2(c.containerInfo)}catch(Lt){ht(o,o.return,Lt)}Qf&&(Qf=!1,lu(o));break;case 4:y=xo,xo=rS(o.stateNode.containerInfo),Es(c,o),Ui(o),xo=y;break;case 12:Es(c,o),Ui(o);break;case 13:Es(c,o),Ui(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(ni=Vt()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,sh(o,y)));break;case 22:M=o.memoizedState!==null;var st=p!==null&&p.memoizedState!==null,St=al,zt=mi;if(al=St||M,mi=zt||st,Es(c,o),mi=zt,al=St,Ui(o),y&8192)t:for(c=o.stateNode,c._visibility=M?c._visibility&-2:c._visibility|1,M&&(p===null||st||al||mi||ga(o)),p=null,c=o;;){if(c.tag===5||c.tag===26){if(p===null){st=p=c;try{if(R=st.stateNode,M)H=R.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{q=st.stateNode;var Xt=st.memoizedProps.style,Tt=Xt!=null&&Xt.hasOwnProperty("display")?Xt.display:null;q.style.display=Tt==null||typeof Tt=="boolean"?"":(""+Tt).trim()}}catch(Lt){ht(st,st.return,Lt)}}}else if(c.tag===6){if(p===null){st=c;try{st.stateNode.nodeValue=M?"":st.memoizedProps}catch(Lt){ht(st,st.return,Lt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break t;for(;c.sibling===null;){if(c.return===null||c.return===o)break t;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=o.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,sh(o,p))));break;case 19:Es(c,o),Ui(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,sh(o,y)));break;case 30:break;case 21:break;default:Es(c,o),Ui(o)}}function Ui(o){var c=o.flags;if(c&2){try{for(var p,y=o.return;y!==null;){if(em(y)){p=y;break}y=y.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var M=p.stateNode,R=iu(o);ru(o,R,M);break;case 5:var H=p.stateNode;p.flags&32&&(gr(H,""),p.flags&=-33);var q=iu(o);ru(o,q,H);break;case 3:case 4:var st=p.stateNode.containerInfo,St=iu(o);su(o,St,st);break;default:throw Error(n(161))}}catch(zt){ht(o,o.return,zt)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function lu(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;lu(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function Sr(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)tc(o,c.alternate,c),c=c.sibling}function ga(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:pa(4,c,c.return),ga(c);break;case 1:rl(c,c.return);var p=c.stateNode;typeof p.componentWillUnmount=="function"&&$l(c,c.return,p),ga(c);break;case 27:O2(c.stateNode);case 26:case 5:rl(c,c.return),ga(c);break;case 22:c.memoizedState===null&&ga(c);break;case 30:ga(c);break;default:ga(c)}o=o.sibling}}function ol(o,c,p){for(p=p&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,M=o,R=c,H=R.flags;switch(R.tag){case 0:case 11:case 15:ol(M,R,p),th(4,R);break;case 1:if(ol(M,R,p),y=R,M=y.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(St){ht(y,y.return,St)}if(y=R,M=y.updateQueue,M!==null){var q=y.stateNode;try{var st=M.shared.hiddenCallbacks;if(st!==null)for(M.shared.hiddenCallbacks=null,M=0;M<st.length;M++)Of(st[M],q)}catch(St){ht(y,y.return,St)}}p&&H&64&&eh(R),nh(R,R.return);break;case 27:au(R);case 26:case 5:ol(M,R,p),p&&y===null&&H&4&&Vf(R),nh(R,R.return);break;case 12:ol(M,R,p);break;case 13:ol(M,R,p),p&&H&4&&ou(M,R);break;case 22:R.memoizedState===null&&ol(M,R,p),nh(R,R.return);break;case 30:break;default:ol(M,R,p)}c=c.sibling}}function e1(o,c){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&Cf(p))}function n1(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Cf(o))}function li(o,c,p,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)i1(o,c,p,y),c=c.sibling}function i1(o,c,p,y){var M=c.flags;switch(c.tag){case 0:case 11:case 15:li(o,c,p,y),M&2048&&th(9,c);break;case 1:li(o,c,p,y);break;case 3:li(o,c,p,y),M&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Cf(o)));break;case 12:if(M&2048){li(o,c,p,y),o=c.stateNode;try{var R=c.memoizedProps,H=R.id,q=R.onPostCommit;typeof q=="function"&&q(H,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(st){ht(c,c.return,st)}}else li(o,c,p,y);break;case 13:li(o,c,p,y);break;case 23:break;case 22:R=c.stateNode,H=c.alternate,c.memoizedState!==null?R._visibility&2?li(o,c,p,y):bo(o,c):R._visibility&2?li(o,c,p,y):(R._visibility|=2,ec(o,c,p,y,(c.subtreeFlags&10256)!==0)),M&2048&&e1(H,c);break;case 24:li(o,c,p,y),M&2048&&n1(c.alternate,c);break;default:li(o,c,p,y)}}function ec(o,c,p,y,M){for(M=M&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var R=o,H=c,q=p,st=y,St=H.flags;switch(H.tag){case 0:case 11:case 15:ec(R,H,q,st,M),th(8,H);break;case 23:break;case 22:var zt=H.stateNode;H.memoizedState!==null?zt._visibility&2?ec(R,H,q,st,M):bo(R,H):(zt._visibility|=2,ec(R,H,q,st,M)),M&&St&2048&&e1(H.alternate,H);break;case 24:ec(R,H,q,st,M),M&&St&2048&&n1(H.alternate,H);break;default:ec(R,H,q,st,M)}c=c.sibling}}function bo(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var p=o,y=c,M=y.flags;switch(y.tag){case 22:bo(p,y),M&2048&&e1(y.alternate,y);break;case 24:bo(p,y),M&2048&&n1(y.alternate,y);break;default:bo(p,y)}c=c.sibling}}var va=8192;function jf(o){if(o.subtreeFlags&va)for(o=o.child;o!==null;)$b(o),o=o.sibling}function $b(o){switch(o.tag){case 26:jf(o),o.flags&va&&o.memoizedState!==null&&YP(xo,o.memoizedState,o.memoizedProps);break;case 5:jf(o);break;case 3:case 4:var c=xo;xo=rS(o.stateNode.containerInfo),jf(o),xo=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=va,va=16777216,jf(o),va=c):jf(o));break;default:jf(o)}}function tS(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function gi(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];oi=y,cl(y,o)}tS(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)w2(o),o=o.sibling}function w2(o){switch(o.tag){case 0:case 11:case 15:gi(o),o.flags&2048&&pa(9,o,o.return);break;case 3:gi(o);break;case 12:gi(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,ll(o)):gi(o);break;default:gi(o)}}function ll(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];oi=y,cl(y,o)}tS(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:pa(8,c,c.return),ll(c);break;case 22:p=c.stateNode,p._visibility&2&&(p._visibility&=-3,ll(c));break;default:ll(c)}o=o.sibling}}function cl(o,c){for(;oi!==null;){var p=oi;switch(p.tag){case 0:case 11:case 15:pa(8,p,c);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Cf(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,oi=y;else t:for(p=o;oi!==null;){y=oi;var M=y.sibling,R=y.return;if(ln(y),y===p){oi=null;break t}if(M!==null){M.return=R,oi=M;break t}oi=R}}}var Pi={getCacheForType:function(o){var c=Ii(ts),p=c.data.get(o);return p===void 0&&(p=o(),c.data.set(o,p)),p}},R2=typeof WeakMap=="function"?WeakMap:Map,Xn=0,We=null,mn=null,Ue=0,an=0,Di=null,ya=!1,Xf=!1,qf=!1,qa=0,xi=0,So=0,ul=0,rh=0,Ya=0,Pn=0,qn=null,ze=null,Sn=!1,ni=0,nr=1/0,Wa=null,_a=null,ds=0,ir=null,ci=null,Aa=0,nc=0,nm=null,xa=null,hl=0,ah=null;function Fi(){if((Xn&2)!==0&&Ue!==0)return Ue&-Ue;if(j.T!==null){var o=tn;return o!==0?o:rT()}return Cn()}function s1(){Ya===0&&(Ya=(Ue&536870912)===0||kn?mt():536870912);var o=ai.current;return o!==null&&(o.flags|=32),Ya}function Er(o,c,p){(o===We&&(an===2||an===9)||o.cancelPendingCommit!==null)&&(uu(o,0),Eo(o,Ue,Ya,!1)),Qt(o,p),((Xn&2)===0||o!==We)&&(o===We&&((Xn&2)===0&&(ul|=p),xi===4&&Eo(o,Ue,Ya,!1)),du(o))}function Yf(o,c,p){if((Xn&6)!==0)throw Error(n(327));var y=!p&&(c&124)===0&&(c&o.expiredLanes)===0||He(o,c),M=y?C(o,c):d(o,c,!0),R=y;do{if(M===0){Xf&&!y&&Eo(o,c,0,!1);break}else{if(p=o.current.alternate,R&&!cu(p)){M=d(o,c,!1),R=!1;continue}if(M===2){if(R=c,o.errorRecoveryDisabledLanes&R)var H=0;else H=o.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){c=H;t:{var q=o;M=qn;var st=q.current.memoizedState.isDehydrated;if(st&&(uu(q,H).flags|=256),H=d(q,H,!1),H!==2){if(qf&&!st){q.errorRecoveryDisabledLanes|=R,ul|=R,M=4;break t}R=ze,ze=M,R!==null&&(ze===null?ze=R:ze.push.apply(ze,R))}M=H}if(R=!1,M!==2)continue}}if(M===1){uu(o,0),Eo(o,c,0,!0);break}t:{switch(y=o,R=M,R){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:Eo(y,c,Ya,!ya);break t;case 2:ze=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(M=ni+300-Vt(),10<M)){if(Eo(y,c,Ya,!ya),rn(y,0,!0)!==0)break t;y.timeoutHandle=eR(im.bind(null,y,p,ze,Wa,Sn,c,Ya,ul,Pn,ya,R,2,-0,0),M);break t}im(y,p,ze,Wa,Sn,c,Ya,ul,Pn,ya,R,0,-0,0)}}break}while(!0);du(o)}function im(o,c,p,y,M,R,H,q,st,St,zt,Xt,Tt,Lt){if(o.timeoutHandle=-1,Xt=c.subtreeFlags,(Xt&8192||(Xt&16785408)===16785408)&&(U2={stylesheets:null,count:0,unsuspend:qP},$b(c),Xt=WP(),Xt!==null)){o.cancelPendingCommit=Xt($t.bind(null,o,c,R,p,y,M,H,q,st,zt,1,Tt,Lt)),Eo(o,R,H,!St);return}$t(o,c,R,p,y,M,H,q,st)}function cu(o){for(var c=o;;){var p=c.tag;if((p===0||p===11||p===15)&&c.flags&16384&&(p=c.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var M=p[y],R=M.getSnapshot;M=M.value;try{if(!Fr(R(),M))return!1}catch{return!1}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Eo(o,c,p,y){c&=~rh,c&=~ul,o.suspendedLanes|=c,o.pingedLanes&=~c,y&&(o.warmLanes|=c),y=o.expirationTimes;for(var M=c;0<M;){var R=31-ge(M),H=1<<R;y[R]=-1,M&=~H}p!==0&&he(o,p,c)}function fl(){return(Xn&6)===0?(L2(0),!1):!0}function oh(){if(mn!==null){if(an===0)var o=mn.return;else o=mn,Ql=qc=null,h2(o),ju=null,Wp=0,o=mn;for(;o!==null;)kf(o.alternate,o),o=o.return;mn=null}}function uu(o,c){var p=o.timeoutHandle;p!==-1&&(o.timeoutHandle=-1,LP(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),oh(),We=o,mn=p=Gi(o.current,null),Ue=c,an=0,Di=null,ya=!1,Xf=He(o,c),qf=!1,Pn=Ya=rh=ul=So=xi=0,ze=qn=null,Sn=!1,(c&8)!==0&&(c|=c&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=c;0<y;){var M=31-ge(y),R=1<<M;c|=o[M],y&=~R}return qa=c,Bp(),p}function r1(o,c){en=null,j.H=Yp,c===kp||c===mo?(c=a2(),an=3):c===r2?(c=a2(),an=4):an=c===Zb?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Di=c,mn===null&&(xi=1,K0(o,Ps(c,o.current)))}function Wf(){var o=j.H;return j.H=Yp,o===null?Yp:o}function a1(){var o=j.A;return j.A=Pi,o}function h(){xi=4,ya||(Ue&4194048)!==Ue&&ai.current!==null||(Xf=!0),(So&134217727)===0&&(ul&134217727)===0||We===null||Eo(We,Ue,Ya,!1)}function d(o,c,p){var y=Xn;Xn|=2;var M=Wf(),R=a1();(We!==o||Ue!==c)&&(Wa=null,uu(o,c)),c=!1;var H=xi;t:do try{if(an!==0&&mn!==null){var q=mn,st=Di;switch(an){case 8:oh(),H=6;break t;case 3:case 2:case 9:case 6:ai.current===null&&(c=!0);var St=an;if(an=0,Di=null,at(o,q,st,St),p&&Xf){H=0;break t}break;default:St=an,an=0,Di=null,at(o,q,st,St)}}A(),H=xi;break}catch(zt){r1(o,zt)}while(!0);return c&&o.shellSuspendCounter++,Ql=qc=null,Xn=y,j.H=M,j.A=R,mn===null&&(We=null,Ue=0,Bp()),H}function A(){for(;mn!==null;)O(mn)}function C(o,c){var p=Xn;Xn|=2;var y=Wf(),M=a1();We!==o||Ue!==c?(Wa=null,nr=Vt()+500,uu(o,c)):Xf=He(o,c);t:do try{if(an!==0&&mn!==null){c=mn;var R=Di;e:switch(an){case 1:an=0,Di=null,at(o,c,R,1);break;case 2:case 9:if(I0(R)){an=0,Di=null,K(c);break}c=function(){an!==2&&an!==9||We!==o||(an=7),du(o)},R.then(c,c);break t;case 3:an=7;break t;case 4:an=5;break t;case 7:I0(R)?(an=0,Di=null,K(c)):(an=0,Di=null,at(o,c,R,7));break;case 5:var H=null;switch(mn.tag){case 26:H=mn.memoizedState;case 5:case 27:var q=mn;if(!H||dR(H)){an=0,Di=null;var st=q.sibling;if(st!==null)mn=st;else{var St=q.return;St!==null?(mn=St,At(St)):mn=null}break e}}an=0,Di=null,at(o,c,R,5);break;case 6:an=0,Di=null,at(o,c,R,6);break;case 8:oh(),xi=6;break t;default:throw Error(n(462))}}L();break}catch(zt){r1(o,zt)}while(!0);return Ql=qc=null,j.H=y,j.A=M,Xn=p,mn!==null?0:(We=null,Ue=0,Bp(),xi)}function L(){for(;mn!==null&&!Kt();)O(mn)}function O(o){var c=Zu(o.alternate,o,qa);o.memoizedProps=o.pendingProps,c===null?At(o):mn=c}function K(o){var c=o,p=c.alternate;switch(c.tag){case 15:case 0:c=fa(p,c,c.pendingProps,c.type,void 0,Ue);break;case 11:c=fa(p,c,c.pendingProps,c.type.render,c.ref,Ue);break;case 5:h2(c);default:kf(p,c),c=mn=Zy(c,qa),c=Zu(p,c,qa)}o.memoizedProps=o.pendingProps,c===null?At(o):mn=c}function at(o,c,p,y){Ql=qc=null,h2(c),ju=null,Wp=0;var M=c.return;try{if(iT(o,M,c,p,Ue)){xi=1,K0(o,Ps(p,o.current)),mn=null;return}}catch(R){if(M!==null)throw mn=M,R;xi=1,K0(o,Ps(p,o.current)),mn=null;return}c.flags&32768?(kn||y===1?o=!0:Xf||(Ue&536870912)!==0?o=!1:(ya=o=!0,(y===2||y===9||y===3||y===6)&&(y=ai.current,y!==null&&y.tag===13&&(y.flags|=16384))),Ht(c,o)):At(c)}function At(o){var c=o;do{if((c.flags&32768)!==0){Ht(c,ya);return}o=c.return;var p=C2(c.alternate,c,qa);if(p!==null){mn=p;return}if(c=c.sibling,c!==null){mn=c;return}mn=c=o}while(c!==null);xi===0&&(xi=5)}function Ht(o,c){do{var p=Gf(o.alternate,o);if(p!==null){p.flags&=32767,mn=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!c&&(o=o.sibling,o!==null)){mn=o;return}mn=o=p}while(o!==null);xi=6,mn=null}function $t(o,c,p,y,M,R,H,q,st){o.cancelPendingCommit=null;do hu();while(ds!==0);if((Xn&6)!==0)throw Error(n(327));if(c!==null){if(c===o.current)throw Error(n(177));if(R=c.lanes|c.childLanes,R|=T0,fe(o,p,R,H,q,st),o===We&&(mn=We=null,Ue=0),ci=c,ir=o,Aa=p,nc=R,nm=M,xa=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Vn($,function(){return fu(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=j.T,j.T=null,M=tt.p,tt.p=2,H=Xn,Xn|=4;try{fs(o,c,p)}finally{Xn=H,tt.p=M,j.T=y}}ds=1,de(),ye(),Ke()}}function de(){if(ds===1){ds=0;var o=ir,c=ci,p=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||p){p=j.T,j.T=null;var y=tt.p;tt.p=2;var M=Xn;Xn|=4;try{t1(c,o);var R=dT,H=jy(o.containerInfo),q=R.focusedElem,st=R.selectionRange;if(H!==q&&q&&q.ownerDocument&&Qy(q.ownerDocument.documentElement,q)){if(st!==null&&Rp(q)){var St=st.start,zt=st.end;if(zt===void 0&&(zt=St),"selectionStart"in q)q.selectionStart=St,q.selectionEnd=Math.min(zt,q.value.length);else{var Xt=q.ownerDocument||document,Tt=Xt&&Xt.defaultView||window;if(Tt.getSelection){var Lt=Tt.getSelection(),Xe=q.textContent.length,ke=Math.min(st.start,Xe),yi=st.end===void 0?ke:Math.min(st.end,Xe);!Lt.extend&&ke>yi&&(H=yi,yi=ke,ke=H);var gt=Vy(q,ke),ft=Vy(q,yi);if(gt&&ft&&(Lt.rangeCount!==1||Lt.anchorNode!==gt.node||Lt.anchorOffset!==gt.offset||Lt.focusNode!==ft.node||Lt.focusOffset!==ft.offset)){var bt=Xt.createRange();bt.setStart(gt.node,gt.offset),Lt.removeAllRanges(),ke>yi?(Lt.addRange(bt),Lt.extend(ft.node,ft.offset)):(bt.setEnd(ft.node,ft.offset),Lt.addRange(bt))}}}}for(Xt=[],Lt=q;Lt=Lt.parentNode;)Lt.nodeType===1&&Xt.push({element:Lt,left:Lt.scrollLeft,top:Lt.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Xt.length;q++){var kt=Xt[q];kt.element.scrollLeft=kt.left,kt.element.scrollTop=kt.top}}uS=!!fT,dT=fT=null}finally{Xn=M,tt.p=y,j.T=p}}o.current=c,ds=2}}function ye(){if(ds===2){ds=0;var o=ir,c=ci,p=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||p){p=j.T,j.T=null;var y=tt.p;tt.p=2;var M=Xn;Xn|=4;try{tc(o,c.alternate,c)}finally{Xn=M,tt.p=y,j.T=p}}ds=3}}function Ke(){if(ds===4||ds===3){ds=0,Ft();var o=ir,c=ci,p=Aa,y=xa;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ds=5:(ds=0,ci=ir=null,ba(o,o.pendingLanes));var M=o.pendingLanes;if(M===0&&(_a=null),Ei(p),c=c.stateNode,ne&&typeof ne.onCommitFiberRoot=="function")try{ne.onCommitFiberRoot(Ot,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=j.T,M=tt.p,tt.p=2,j.T=null;try{for(var R=o.onRecoverableError,H=0;H<y.length;H++){var q=y[H];R(q.value,{componentStack:q.stack})}}finally{j.T=c,tt.p=M}}(Aa&3)!==0&&hu(),du(o),M=o.pendingLanes,(p&4194090)!==0&&(M&42)!==0?o===ah?hl++:(hl=0,ah=o):hl=0,L2(0)}}function ba(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Cf(c)))}function hu(o){return de(),ye(),Ke(),fu()}function fu(){if(ds!==5)return!1;var o=ir,c=nc;nc=0;var p=Ei(Aa),y=j.T,M=tt.p;try{tt.p=32>p?32:p,j.T=null,p=nm,nm=null;var R=ir,H=Aa;if(ds=0,ci=ir=null,Aa=0,(Xn&6)!==0)throw Error(n(331));var q=Xn;if(Xn|=4,w2(R.current),i1(R,R.current,H,p),Xn=q,L2(0,!1),ne&&typeof ne.onPostCommitFiberRoot=="function")try{ne.onPostCommitFiberRoot(Ot,R)}catch{}return!0}finally{tt.p=M,j.T=y,ba(o,c)}}function Mt(o,c,p){c=Ps(p,c),c=J0(o.stateNode,c,2),o=ql(o,c,2),o!==null&&(Qt(o,2),du(o))}function ht(o,c,p){if(o.tag===3)Mt(o,o,p);else for(;c!==null;){if(c.tag===3){Mt(c,o,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(_a===null||!_a.has(y))){o=Ps(p,o),p=Jb(2),y=ql(c,p,2),y!==null&&(Z0(p,y,c,o),Qt(y,2),du(y));break}}c=c.return}}function Dt(o,c,p){var y=o.pingCache;if(y===null){y=o.pingCache=new R2;var M=new Set;y.set(c,M)}else M=y.get(c),M===void 0&&(M=new Set,y.set(c,M));M.has(p)||(qf=!0,M.add(p),o=Zt.bind(null,o,c,p),c.then(o,o))}function Zt(o,c,p){var y=o.pingCache;y!==null&&y.delete(c),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,We===o&&(Ue&p)===p&&(xi===4||xi===3&&(Ue&62914560)===Ue&&300>Vt()-ni?(Xn&2)===0&&uu(o,0):rh|=p,Pn===Ue&&(Pn=0)),du(o)}function Re(o,c){c===0&&(c=ue()),o=kl(o,c),o!==null&&(Qt(o,c),du(o))}function bi(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),Re(o,p)}function je(o,c){var p=0;switch(o.tag){case 13:var y=o.stateNode,M=o.memoizedState;M!==null&&(p=M.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(n(314))}y!==null&&y.delete(c),Re(o,p)}function Vn(o,c){return re(o,c)}var ji=null,_n=null,dl=!1,o1=!1,sT=!1,sm=0;function du(o){o!==_n&&o.next===null&&(_n===null?ji=_n=o:_n=_n.next=o),o1=!0,dl||(dl=!0,xP())}function L2(o,c){if(!sT&&o1){sT=!0;do for(var p=!1,y=ji;y!==null;){if(o!==0){var M=y.pendingLanes;if(M===0)var R=0;else{var H=y.suspendedLanes,q=y.pingedLanes;R=(1<<31-ge(42|o)+1)-1,R&=M&~(H&~q),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(p=!0,j7(y,R))}else R=Ue,R=rn(y,y===We?R:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(R&3)===0||He(y,R)||(p=!0,j7(y,R));y=y.next}while(p);sT=!1}}function AP(){k7()}function k7(){o1=dl=!1;var o=0;sm!==0&&(RP()&&(o=sm),sm=0);for(var c=Vt(),p=null,y=ji;y!==null;){var M=y.next,R=V7(y,c);R===0?(y.next=null,p===null?ji=M:p.next=M,M===null&&(_n=p)):(p=y,(o!==0||(R&3)!==0)&&(o1=!0)),y=M}L2(o)}function V7(o,c){for(var p=o.suspendedLanes,y=o.pingedLanes,M=o.expirationTimes,R=o.pendingLanes&-62914561;0<R;){var H=31-ge(R),q=1<<H,st=M[H];st===-1?((q&p)===0||(q&y)!==0)&&(M[H]=Gn(q,c)):st<=c&&(o.expiredLanes|=q),R&=~q}if(c=We,p=Ue,p=rn(o,o===c?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,p===0||o===c&&(an===2||an===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&Z(y),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||He(o,p)){if(c=p&-p,c===o.callbackPriority)return c;switch(y!==null&&Z(y),Ei(p)){case 2:case 8:p=qt;break;case 32:p=$;break;case 268435456:p=vt;break;default:p=$}return y=Q7.bind(null,o),p=re(p,y),o.callbackPriority=c,o.callbackNode=p,c}return y!==null&&y!==null&&Z(y),o.callbackPriority=2,o.callbackNode=null,2}function Q7(o,c){if(ds!==0&&ds!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if(hu()&&o.callbackNode!==p)return null;var y=Ue;return y=rn(o,o===We?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(Yf(o,y,c),V7(o,Vt()),o.callbackNode!=null&&o.callbackNode===p?Q7.bind(null,o):null)}function j7(o,c){if(hu())return null;Yf(o,c,!0)}function xP(){DP(function(){(Xn&6)!==0?re(be,AP):k7()})}function rT(){return sm===0&&(sm=mt()),sm}function X7(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:gp(""+o)}function q7(o,c){var p=c.ownerDocument.createElement("input");return p.name=c.name,p.value=c.value,o.id&&p.setAttribute("form",o.id),c.parentNode.insertBefore(p,c),o=new FormData(o),p.parentNode.removeChild(p),o}function bP(o,c,p,y,M){if(c==="submit"&&p&&p.stateNode===M){var R=X7((M[cs]||null).action),H=y.submitter;H&&(c=(c=H[cs]||null)?X7(c.formAction):H.getAttribute("formAction"),c!==null&&(R=c,H=null));var q=new pf("action","action",null,y,M);o.push({event:q,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(sm!==0){var st=H?q7(M,H):new FormData(M);S2(p,{pending:!0,data:st,method:M.method,action:R},null,st)}}else typeof R=="function"&&(q.preventDefault(),st=H?q7(M,H):new FormData(M),S2(p,{pending:!0,data:st,method:M.method,action:R},R,st))},currentTarget:M}]})}}for(var aT=0;aT<Dp.length;aT++){var oT=Dp[aT],SP=oT.toLowerCase(),EP=oT[0].toUpperCase()+oT.slice(1);As(SP,"on"+EP)}As(yr,"onAnimationEnd"),As(Yy,"onAnimationIteration"),As(zr,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(cb,"onTransitionRun"),As(zl,"onTransitionStart"),As(bf,"onTransitionCancel"),As(Gl,"onTransitionEnd"),Y("onMouseEnter",["mouseout","mouseover"]),Y("onMouseLeave",["mouseout","mouseover"]),Y("onPointerEnter",["pointerout","pointerover"]),Y("onPointerLeave",["pointerout","pointerover"]),ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ho("onBeforeInput",["compositionend","keypress","textInput","paste"]),ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var D2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(D2));function Y7(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],M=y.event;y=y.listeners;t:{var R=void 0;if(c)for(var H=y.length-1;0<=H;H--){var q=y[H],st=q.instance,St=q.currentTarget;if(q=q.listener,st!==R&&M.isPropagationStopped())break t;R=q,M.currentTarget=St;try{R(M)}catch(zt){qu(zt)}M.currentTarget=null,R=st}else for(H=0;H<y.length;H++){if(q=y[H],st=q.instance,St=q.currentTarget,q=q.listener,st!==R&&M.isPropagationStopped())break t;R=q,M.currentTarget=St;try{R(M)}catch(zt){qu(zt)}M.currentTarget=null,R=st}}}}function wn(o,c){var p=c[Ur];p===void 0&&(p=c[Ur]=new Set);var y=o+"__bubble";p.has(y)||(W7(c,o,2,!1),p.add(y))}function lT(o,c,p){var y=0;c&&(y|=4),W7(p,o,y,c)}var eS="_reactListening"+Math.random().toString(36).slice(2);function cT(o){if(!o[eS]){o[eS]=!0,cf.forEach(function(p){p!=="selectionchange"&&(MP.has(p)||lT(p,!1,o),lT(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[eS]||(c[eS]=!0,lT("selectionchange",!1,c))}}function W7(o,c,p,y){switch(_R(c)){case 2:var M=ZP;break;case 8:M=$P;break;default:M=ST}p=M.bind(null,c,p,o),M=void 0,!yp||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(M=!0),y?M!==void 0?o.addEventListener(c,p,{capture:!0,passive:M}):o.addEventListener(c,p,!0):M!==void 0?o.addEventListener(c,p,{passive:M}):o.addEventListener(c,p,!1)}function uT(o,c,p,y,M){var R=y;if((c&1)===0&&(c&2)===0&&y!==null)t:for(;;){if(y===null)return;var H=y.tag;if(H===3||H===4){var q=y.stateNode.containerInfo;if(q===M)break;if(H===4)for(H=y.return;H!==null;){var st=H.tag;if((st===3||st===4)&&H.stateNode.containerInfo===M)return;H=H.return}for(;q!==null;){if(H=co(q),H===null)return;if(st=H.tag,st===5||st===6||st===26||st===27){y=R=H;continue t}q=q.parentNode}}y=y.return}Dy(function(){var St=R,zt=d0(p),Xt=[];t:{var Tt=M0.get(o);if(Tt!==void 0){var Lt=pf,Xe=o;switch(o){case"keypress":if(Ic(p)===0)break t;case"keydown":case"keyup":Lt=Uy;break;case"focusin":Xe="focus",Lt=m0;break;case"focusout":Xe="blur",Lt=m0;break;case"beforeblur":case"afterblur":Lt=m0;break;case"click":if(p.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Lt=Ny;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Lt=XM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Lt=Fy;break;case yr:case Yy:case zr:Lt=Yx;break;case Gl:Lt=Ul;break;case"scroll":case"scrollend":Lt=jx;break;case"wheel":Lt=qM;break;case"copy":case"cut":case"paste":Lt=Kx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Lt=v0;break;case"toggle":case"beforetoggle":Lt=Pc}var ke=(c&4)!==0,yi=!ke&&(o==="scroll"||o==="scrollend"),gt=ke?Tt!==null?Tt+"Capture":null:Tt;ke=[];for(var ft=St,bt;ft!==null;){var kt=ft;if(bt=kt.stateNode,kt=kt.tag,kt!==5&&kt!==26&&kt!==27||bt===null||gt===null||(kt=hf(ft,gt),kt!=null&&ke.push(B2(ft,kt,bt))),yi)break;ft=ft.return}0<ke.length&&(Tt=new Lt(Tt,Xe,null,p,zt),Xt.push({event:Tt,listeners:ke}))}}if((c&7)===0){t:{if(Tt=o==="mouseover"||o==="pointerover",Lt=o==="mouseout"||o==="pointerout",Tt&&p!==f0&&(Xe=p.relatedTarget||p.fromElement)&&(co(Xe)||Xe[$s]))break t;if((Lt||Tt)&&(Tt=zt.window===zt?zt:(Tt=zt.ownerDocument)?Tt.defaultView||Tt.parentWindow:window,Lt?(Xe=p.relatedTarget||p.toElement,Lt=St,Xe=Xe?co(Xe):null,Xe!==null&&(yi=r(Xe),ke=Xe.tag,Xe!==yi||ke!==5&&ke!==27&&ke!==6)&&(Xe=null)):(Lt=null,Xe=St),Lt!==Xe)){if(ke=Ny,kt="onMouseLeave",gt="onMouseEnter",ft="mouse",(o==="pointerout"||o==="pointerover")&&(ke=v0,kt="onPointerLeave",gt="onPointerEnter",ft="pointer"),yi=Lt==null?Tt:Oc(Lt),bt=Xe==null?Tt:Oc(Xe),Tt=new ke(kt,ft+"leave",Lt,p,zt),Tt.target=yi,Tt.relatedTarget=bt,kt=null,co(zt)===St&&(ke=new ke(gt,ft+"enter",Xe,p,zt),ke.target=bt,ke.relatedTarget=yi,kt=ke),yi=kt,Lt&&Xe)e:{for(ke=Lt,gt=Xe,ft=0,bt=ke;bt;bt=l1(bt))ft++;for(bt=0,kt=gt;kt;kt=l1(kt))bt++;for(;0<ft-bt;)ke=l1(ke),ft--;for(;0<bt-ft;)gt=l1(gt),bt--;for(;ft--;){if(ke===gt||gt!==null&&ke===gt.alternate)break e;ke=l1(ke),gt=l1(gt)}ke=null}else ke=null;Lt!==null&&K7(Xt,Tt,Lt,ke,!1),Xe!==null&&yi!==null&&K7(Xt,yi,Xe,ke,!0)}}t:{if(Tt=St?Oc(St):window,Lt=Tt.nodeName&&Tt.nodeName.toLowerCase(),Lt==="select"||Lt==="input"&&Tt.type==="file")var Ee=_0;else if(ky(Tt))if(A0)Ee=zc;else{Ee=ab;var En=YM}else Lt=Tt.nodeName,!Lt||Lt.toLowerCase()!=="input"||Tt.type!=="checkbox"&&Tt.type!=="radio"?St&&h0(St.elementType)&&(Ee=_0):Ee=wp;if(Ee&&(Ee=Ee(o,St))){Pr(Xt,Ee,p,zt);break t}En&&En(o,Tt,St),o==="focusout"&&St&&Tt.type==="number"&&St.memoizedProps.value!=null&&Os(Tt,"number",Tt.value)}switch(En=St?Oc(St):window,o){case"focusin":(ky(En)||En.contentEditable==="true")&&(Fl=En,b0=St,Lp=null);break;case"focusout":Lp=b0=Fl=null;break;case"mousedown":S0=!0;break;case"contextmenu":case"mouseup":case"dragend":S0=!1,qy(Xt,p,zt);break;case"selectionchange":if(Xy)break;case"keydown":case"keyup":qy(Xt,p,zt)}var Be;if(bp)t:{switch(o){case"compositionstart":var Ve="onCompositionStart";break t;case"compositionend":Ve="onCompositionEnd";break t;case"compositionupdate":Ve="onCompositionUpdate";break t}Ve=void 0}else Hc?Mp(o,p)&&(Ve="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Ve="onCompositionStart");Ve&&(Ep&&p.locale!=="ko"&&(Hc||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Hc&&(Be=Oy()):(Nl=zt,By="value"in Nl?Nl.value:Nl.textContent,Hc=!0)),En=nS(St,Ve),0<En.length&&(Ve=new g0(Ve,o,null,p,zt),Xt.push({event:Ve,listeners:En}),Be?Ve.data=Be:(Be=zy(p),Be!==null&&(Ve.data=Be)))),(Be=Sp?Tp(o,p):Gy(o,p))&&(Ve=nS(St,"onBeforeInput"),0<Ve.length&&(En=new g0("onBeforeInput","beforeinput",null,p,zt),Xt.push({event:En,listeners:Ve}),En.data=Be)),bP(Xt,o,St,p,zt)}Y7(Xt,c)})}function B2(o,c,p){return{instance:o,listener:c,currentTarget:p}}function nS(o,c){for(var p=c+"Capture",y=[];o!==null;){var M=o,R=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||R===null||(M=hf(o,p),M!=null&&y.unshift(B2(o,M,R)),M=hf(o,c),M!=null&&y.push(B2(o,M,R))),o.tag===3)return y;o=o.return}return[]}function l1(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function K7(o,c,p,y,M){for(var R=c._reactName,H=[];p!==null&&p!==y;){var q=p,st=q.alternate,St=q.stateNode;if(q=q.tag,st!==null&&st===y)break;q!==5&&q!==26&&q!==27||St===null||(st=St,M?(St=hf(p,R),St!=null&&H.unshift(B2(p,St,st))):M||(St=hf(p,R),St!=null&&H.push(B2(p,St,st)))),p=p.return}H.length!==0&&o.push({event:c,listeners:H})}var TP=/\r\n?/g,CP=/\u0000|\uFFFD/g;function J7(o){return(typeof o=="string"?o:""+o).replace(TP,`
`).replace(CP,"")}function Z7(o,c){return c=J7(c),J7(o)===c}function iS(){}function vi(o,c,p,y,M,R){switch(p){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||gr(o,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&gr(o,""+y);break;case"className":se(o,"class",y);break;case"tabIndex":se(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":se(o,p,y);break;case"style":mp(o,y,R);break;case"data":if(c!=="object"){se(o,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||p!=="href")){o.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=gp(""+y),o.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(p==="formAction"?(c!=="input"&&vi(o,c,"name",M.name,M,null),vi(o,c,"formEncType",M.formEncType,M,null),vi(o,c,"formMethod",M.formMethod,M,null),vi(o,c,"formTarget",M.formTarget,M,null)):(vi(o,c,"encType",M.encType,M,null),vi(o,c,"method",M.method,M,null),vi(o,c,"target",M.target,M,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=gp(""+y),o.setAttribute(p,y);break;case"onClick":y!=null&&(o.onclick=iS);break;case"onScroll":y!=null&&wn("scroll",o);break;case"onScrollEnd":y!=null&&wn("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(M.children!=null)throw Error(n(60));o.innerHTML=p}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}p=gp(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""+y):o.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""):o.removeAttribute(p);break;case"capture":case"download":y===!0?o.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,y):o.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(p,y):o.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(p):o.setAttribute(p,y);break;case"popover":wn("beforetoggle",o),wn("toggle",o),Yt(o,"popover",y);break;case"xlinkActuate":ae(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ae(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ae(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ae(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ae(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ae(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ae(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ae(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ae(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Yt(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Ry.get(p)||p,Yt(o,p,y))}}function hT(o,c,p,y,M,R){switch(p){case"style":mp(o,y,R);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(M.children!=null)throw Error(n(60));o.innerHTML=p}}break;case"children":typeof y=="string"?gr(o,y):(typeof y=="number"||typeof y=="bigint")&&gr(o,""+y);break;case"onScroll":y!=null&&wn("scroll",o);break;case"onScrollEnd":y!=null&&wn("scrollend",o);break;case"onClick":y!=null&&(o.onclick=iS);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uf.hasOwnProperty(p))t:{if(p[0]==="o"&&p[1]==="n"&&(M=p.endsWith("Capture"),c=p.slice(2,M?p.length-7:void 0),R=o[cs]||null,R=R!=null?R[p]:null,typeof R=="function"&&o.removeEventListener(c,R,M),typeof y=="function")){typeof R!="function"&&R!==null&&(p in o?o[p]=null:o.hasAttribute(p)&&o.removeAttribute(p)),o.addEventListener(c,y,M);break t}p in o?o[p]=y:y===!0?o.setAttribute(p,""):Yt(o,p,y)}}}function Mr(o,c,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wn("error",o),wn("load",o);var y=!1,M=!1,R;for(R in p)if(p.hasOwnProperty(R)){var H=p[R];if(H!=null)switch(R){case"src":y=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:vi(o,c,R,H,p,null)}}M&&vi(o,c,"srcSet",p.srcSet,p,null),y&&vi(o,c,"src",p.src,p,null);return;case"input":wn("invalid",o);var q=R=H=M=null,st=null,St=null;for(y in p)if(p.hasOwnProperty(y)){var zt=p[y];if(zt!=null)switch(y){case"name":M=zt;break;case"type":H=zt;break;case"checked":st=zt;break;case"defaultChecked":St=zt;break;case"value":R=zt;break;case"defaultValue":q=zt;break;case"children":case"dangerouslySetInnerHTML":if(zt!=null)throw Error(n(137,c));break;default:vi(o,c,y,zt,p,null)}}ei(o,R,q,st,St,H,M,!1),Ri(o);return;case"select":wn("invalid",o),y=H=R=null;for(M in p)if(p.hasOwnProperty(M)&&(q=p[M],q!=null))switch(M){case"value":R=q;break;case"defaultValue":H=q;break;case"multiple":y=q;default:vi(o,c,M,q,p,null)}c=R,p=H,o.multiple=!!y,c!=null?$i(o,!!y,c,!1):p!=null&&$i(o,!!y,p,!0);return;case"textarea":wn("invalid",o),R=M=y=null;for(H in p)if(p.hasOwnProperty(H)&&(q=p[H],q!=null))switch(H){case"value":y=q;break;case"defaultValue":M=q;break;case"children":R=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(91));break;default:vi(o,c,H,q,p,null)}_s(o,y,M,R),Ri(o);return;case"option":for(st in p)if(p.hasOwnProperty(st)&&(y=p[st],y!=null))switch(st){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:vi(o,c,st,y,p,null)}return;case"dialog":wn("beforetoggle",o),wn("toggle",o),wn("cancel",o),wn("close",o);break;case"iframe":case"object":wn("load",o);break;case"video":case"audio":for(y=0;y<D2.length;y++)wn(D2[y],o);break;case"image":wn("error",o),wn("load",o);break;case"details":wn("toggle",o);break;case"embed":case"source":case"link":wn("error",o),wn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(St in p)if(p.hasOwnProperty(St)&&(y=p[St],y!=null))switch(St){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:vi(o,c,St,y,p,null)}return;default:if(h0(c)){for(zt in p)p.hasOwnProperty(zt)&&(y=p[zt],y!==void 0&&hT(o,c,zt,y,p,void 0));return}}for(q in p)p.hasOwnProperty(q)&&(y=p[q],y!=null&&vi(o,c,q,y,p,null))}function wP(o,c,p,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,R=null,H=null,q=null,st=null,St=null,zt=null;for(Lt in p){var Xt=p[Lt];if(p.hasOwnProperty(Lt)&&Xt!=null)switch(Lt){case"checked":break;case"value":break;case"defaultValue":st=Xt;default:y.hasOwnProperty(Lt)||vi(o,c,Lt,null,y,Xt)}}for(var Tt in y){var Lt=y[Tt];if(Xt=p[Tt],y.hasOwnProperty(Tt)&&(Lt!=null||Xt!=null))switch(Tt){case"type":R=Lt;break;case"name":M=Lt;break;case"checked":St=Lt;break;case"defaultChecked":zt=Lt;break;case"value":H=Lt;break;case"defaultValue":q=Lt;break;case"children":case"dangerouslySetInnerHTML":if(Lt!=null)throw Error(n(137,c));break;default:Lt!==Xt&&vi(o,c,Tt,Lt,y,Xt)}}Wo(o,H,q,st,St,zt,R,M);return;case"select":Lt=H=q=Tt=null;for(R in p)if(st=p[R],p.hasOwnProperty(R)&&st!=null)switch(R){case"value":break;case"multiple":Lt=st;default:y.hasOwnProperty(R)||vi(o,c,R,null,y,st)}for(M in y)if(R=y[M],st=p[M],y.hasOwnProperty(M)&&(R!=null||st!=null))switch(M){case"value":Tt=R;break;case"defaultValue":q=R;break;case"multiple":H=R;default:R!==st&&vi(o,c,M,R,y,st)}c=q,p=H,y=Lt,Tt!=null?$i(o,!!p,Tt,!1):!!y!=!!p&&(c!=null?$i(o,!!p,c,!0):$i(o,!!p,p?[]:"",!1));return;case"textarea":Lt=Tt=null;for(q in p)if(M=p[q],p.hasOwnProperty(q)&&M!=null&&!y.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:vi(o,c,q,null,y,M)}for(H in y)if(M=y[H],R=p[H],y.hasOwnProperty(H)&&(M!=null||R!=null))switch(H){case"value":Tt=M;break;case"defaultValue":Lt=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:M!==R&&vi(o,c,H,M,y,R)}ys(o,Tt,Lt);return;case"option":for(var Xe in p)if(Tt=p[Xe],p.hasOwnProperty(Xe)&&Tt!=null&&!y.hasOwnProperty(Xe))switch(Xe){case"selected":o.selected=!1;break;default:vi(o,c,Xe,null,y,Tt)}for(st in y)if(Tt=y[st],Lt=p[st],y.hasOwnProperty(st)&&Tt!==Lt&&(Tt!=null||Lt!=null))switch(st){case"selected":o.selected=Tt&&typeof Tt!="function"&&typeof Tt!="symbol";break;default:vi(o,c,st,Tt,y,Lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in p)Tt=p[ke],p.hasOwnProperty(ke)&&Tt!=null&&!y.hasOwnProperty(ke)&&vi(o,c,ke,null,y,Tt);for(St in y)if(Tt=y[St],Lt=p[St],y.hasOwnProperty(St)&&Tt!==Lt&&(Tt!=null||Lt!=null))switch(St){case"children":case"dangerouslySetInnerHTML":if(Tt!=null)throw Error(n(137,c));break;default:vi(o,c,St,Tt,y,Lt)}return;default:if(h0(c)){for(var yi in p)Tt=p[yi],p.hasOwnProperty(yi)&&Tt!==void 0&&!y.hasOwnProperty(yi)&&hT(o,c,yi,void 0,y,Tt);for(zt in y)Tt=y[zt],Lt=p[zt],!y.hasOwnProperty(zt)||Tt===Lt||Tt===void 0&&Lt===void 0||hT(o,c,zt,Tt,y,Lt);return}}for(var gt in p)Tt=p[gt],p.hasOwnProperty(gt)&&Tt!=null&&!y.hasOwnProperty(gt)&&vi(o,c,gt,null,y,Tt);for(Xt in y)Tt=y[Xt],Lt=p[Xt],!y.hasOwnProperty(Xt)||Tt===Lt||Tt==null&&Lt==null||vi(o,c,Xt,Tt,y,Lt)}var fT=null,dT=null;function sS(o){return o.nodeType===9?o:o.ownerDocument}function $7(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tR(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function pT(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var mT=null;function RP(){var o=window.event;return o&&o.type==="popstate"?o===mT?!1:(mT=o,!0):(mT=null,!1)}var eR=typeof setTimeout=="function"?setTimeout:void 0,LP=typeof clearTimeout=="function"?clearTimeout:void 0,nR=typeof Promise=="function"?Promise:void 0,DP=typeof queueMicrotask=="function"?queueMicrotask:typeof nR<"u"?function(o){return nR.resolve(null).then(o).catch(BP)}:eR;function BP(o){setTimeout(function(){throw o})}function Kf(o){return o==="head"}function iR(o,c){var p=c,y=0,M=0;do{var R=p.nextSibling;if(o.removeChild(p),R&&R.nodeType===8)if(p=R.data,p==="/$"){if(0<y&&8>y){p=y;var H=o.ownerDocument;if(p&1&&O2(H.documentElement),p&2&&O2(H.body),p&4)for(p=H.head,O2(p),H=p.firstChild;H;){var q=H.nextSibling,st=H.nodeName;H[lo]||st==="SCRIPT"||st==="STYLE"||st==="LINK"&&H.rel.toLowerCase()==="stylesheet"||p.removeChild(H),H=q}}if(M===0){o.removeChild(R),G2(c);return}M--}else p==="$"||p==="$?"||p==="$!"?M++:y=p.charCodeAt(0)-48;else y=0;p=R}while(p);G2(c)}function gT(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var p=c;switch(c=c.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":gT(p),ti(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}o.removeChild(p)}}function OP(o,c,p,y){for(;o.nodeType===1;){var M=p;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[lo])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(R=o.getAttribute("rel"),R==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(R!==M.rel||o.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||o.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||o.getAttribute("title")!==(M.title==null?null:M.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(R=o.getAttribute("src"),(R!==(M.src==null?null:M.src)||o.getAttribute("type")!==(M.type==null?null:M.type)||o.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&R&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var R=M.name==null?null:""+M.name;if(M.type==="hidden"&&o.getAttribute("name")===R)return o}else return o;if(o=ic(o.nextSibling),o===null)break}return null}function NP(o,c,p){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!p||(o=ic(o.nextSibling),o===null))return null;return o}function vT(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function IP(o,c){var p=o.ownerDocument;if(o.data!=="$?"||p.readyState==="complete")c();else{var y=function(){c(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function ic(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var yT=null;function sR(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}function rR(o,c,p){switch(c=sS(p),o){case"html":if(o=c.documentElement,!o)throw Error(n(452));return o;case"head":if(o=c.head,!o)throw Error(n(453));return o;case"body":if(o=c.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function O2(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);ti(o)}var pl=new Map,aR=new Set;function rS(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var lh=tt.d;tt.d={f:UP,r:PP,D:FP,C:HP,L:zP,m:GP,X:VP,S:kP,M:QP};function UP(){var o=lh.f(),c=fl();return o||c}function PP(o){var c=uo(o);c!==null&&c.tag===5&&c.type==="form"?Fb(c):lh.r(o)}var c1=typeof document>"u"?null:document;function oR(o,c,p){var y=c1;if(y&&typeof c=="string"&&c){var M=ri(c);M='link[rel="'+o+'"][href="'+M+'"]',typeof p=="string"&&(M+='[crossorigin="'+p+'"]'),aR.has(M)||(aR.add(M),o={rel:o,crossOrigin:p,href:c},y.querySelector(M)===null&&(c=y.createElement("link"),Mr(c,"link",o),Zi(c),y.head.appendChild(c)))}}function FP(o){lh.D(o),oR("dns-prefetch",o,null)}function HP(o,c){lh.C(o,c),oR("preconnect",o,c)}function zP(o,c,p){lh.L(o,c,p);var y=c1;if(y&&o&&c){var M='link[rel="preload"][as="'+ri(c)+'"]';c==="image"&&p&&p.imageSrcSet?(M+='[imagesrcset="'+ri(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(M+='[imagesizes="'+ri(p.imageSizes)+'"]')):M+='[href="'+ri(o)+'"]';var R=M;switch(c){case"style":R=u1(o);break;case"script":R=h1(o)}pl.has(R)||(o=m({rel:"preload",href:c==="image"&&p&&p.imageSrcSet?void 0:o,as:c},p),pl.set(R,o),y.querySelector(M)!==null||c==="style"&&y.querySelector(N2(R))||c==="script"&&y.querySelector(I2(R))||(c=y.createElement("link"),Mr(c,"link",o),Zi(c),y.head.appendChild(c)))}}function GP(o,c){lh.m(o,c);var p=c1;if(p&&o){var y=c&&typeof c.as=="string"?c.as:"script",M='link[rel="modulepreload"][as="'+ri(y)+'"][href="'+ri(o)+'"]',R=M;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=h1(o)}if(!pl.has(R)&&(o=m({rel:"modulepreload",href:o},c),pl.set(R,o),p.querySelector(M)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(I2(R)))return}y=p.createElement("link"),Mr(y,"link",o),Zi(y),p.head.appendChild(y)}}}function kP(o,c,p){lh.S(o,c,p);var y=c1;if(y&&o){var M=Ol(y).hoistableStyles,R=u1(o);c=c||"default";var H=M.get(R);if(!H){var q={loading:0,preload:null};if(H=y.querySelector(N2(R)))q.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":c},p),(p=pl.get(R))&&_T(o,p);var st=H=y.createElement("link");Zi(st),Mr(st,"link",o),st._p=new Promise(function(St,zt){st.onload=St,st.onerror=zt}),st.addEventListener("load",function(){q.loading|=1}),st.addEventListener("error",function(){q.loading|=2}),q.loading|=4,aS(H,c,y)}H={type:"stylesheet",instance:H,count:1,state:q},M.set(R,H)}}}function VP(o,c){lh.X(o,c);var p=c1;if(p&&o){var y=Ol(p).hoistableScripts,M=h1(o),R=y.get(M);R||(R=p.querySelector(I2(M)),R||(o=m({src:o,async:!0},c),(c=pl.get(M))&&AT(o,c),R=p.createElement("script"),Zi(R),Mr(R,"link",o),p.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},y.set(M,R))}}function QP(o,c){lh.M(o,c);var p=c1;if(p&&o){var y=Ol(p).hoistableScripts,M=h1(o),R=y.get(M);R||(R=p.querySelector(I2(M)),R||(o=m({src:o,async:!0,type:"module"},c),(c=pl.get(M))&&AT(o,c),R=p.createElement("script"),Zi(R),Mr(R,"link",o),p.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},y.set(M,R))}}function lR(o,c,p,y){var M=(M=Bt.current)?rS(M):null;if(!M)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(c=u1(p.href),p=Ol(M).hoistableStyles,y=p.get(c),y||(y={type:"style",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){o=u1(p.href);var R=Ol(M).hoistableStyles,H=R.get(o);if(H||(M=M.ownerDocument||M,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(o,H),(R=M.querySelector(N2(o)))&&!R._p&&(H.instance=R,H.state.loading=5),pl.has(o)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},pl.set(o,p),R||jP(M,o,p,H.state))),c&&y===null)throw Error(n(528,""));return H}if(c&&y!==null)throw Error(n(529,""));return null;case"script":return c=p.async,p=p.src,typeof p=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=h1(p),p=Ol(M).hoistableScripts,y=p.get(c),y||(y={type:"script",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function u1(o){return'href="'+ri(o)+'"'}function N2(o){return'link[rel="stylesheet"]['+o+"]"}function cR(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function jP(o,c,p,y){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=o.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),Mr(c,"link",p),Zi(c),o.head.appendChild(c))}function h1(o){return'[src="'+ri(o)+'"]'}function I2(o){return"script[async]"+o}function uR(o,c,p){if(c.count++,c.instance===null)switch(c.type){case"style":var y=o.querySelector('style[data-href~="'+ri(p.href)+'"]');if(y)return c.instance=y,Zi(y),y;var M=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),Zi(y),Mr(y,"style",M),aS(y,p.precedence,o),c.instance=y;case"stylesheet":M=u1(p.href);var R=o.querySelector(N2(M));if(R)return c.state.loading|=4,c.instance=R,Zi(R),R;y=cR(p),(M=pl.get(M))&&_T(y,M),R=(o.ownerDocument||o).createElement("link"),Zi(R);var H=R;return H._p=new Promise(function(q,st){H.onload=q,H.onerror=st}),Mr(R,"link",y),c.state.loading|=4,aS(R,p.precedence,o),c.instance=R;case"script":return R=h1(p.src),(M=o.querySelector(I2(R)))?(c.instance=M,Zi(M),M):(y=p,(M=pl.get(R))&&(y=m({},p),AT(y,M)),o=o.ownerDocument||o,M=o.createElement("script"),Zi(M),Mr(M,"link",y),o.head.appendChild(M),c.instance=M);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,aS(y,p.precedence,o));return c.instance}function aS(o,c,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=y.length?y[y.length-1]:null,R=M,H=0;H<y.length;H++){var q=y[H];if(q.dataset.precedence===c)R=q;else if(R!==M)break}R?R.parentNode.insertBefore(o,R.nextSibling):(c=p.nodeType===9?p.head:p,c.insertBefore(o,c.firstChild))}function _T(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function AT(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var oS=null;function hR(o,c,p){if(oS===null){var y=new Map,M=oS=new Map;M.set(p,y)}else M=oS,y=M.get(p),y||(y=new Map,M.set(p,y));if(y.has(o))return y;for(y.set(o,null),p=p.getElementsByTagName(o),M=0;M<p.length;M++){var R=p[M];if(!(R[lo]||R[Ji]||o==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var H=R.getAttribute(c)||"";H=o+H;var q=y.get(H);q?q.push(R):y.set(H,[R])}}return y}function fR(o,c,p){o=o.ownerDocument||o,o.head.insertBefore(p,c==="title"?o.querySelector("head > title"):null)}function XP(o,c,p){if(p===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function dR(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var U2=null;function qP(){}function YP(o,c,p){if(U2===null)throw Error(n(475));var y=U2;if(c.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var M=u1(p.href),R=o.querySelector(N2(M));if(R){o=R._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(y.count++,y=lS.bind(y),o.then(y,y)),c.state.loading|=4,c.instance=R,Zi(R);return}R=o.ownerDocument||o,p=cR(p),(M=pl.get(M))&&_T(p,M),R=R.createElement("link"),Zi(R);var H=R;H._p=new Promise(function(q,st){H.onload=q,H.onerror=st}),Mr(R,"link",p),c.instance=R}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(y.count++,c=lS.bind(y),o.addEventListener("load",c),o.addEventListener("error",c))}}function WP(){if(U2===null)throw Error(n(475));var o=U2;return o.stylesheets&&o.count===0&&xT(o,o.stylesheets),0<o.count?function(c){var p=setTimeout(function(){if(o.stylesheets&&xT(o,o.stylesheets),o.unsuspend){var y=o.unsuspend;o.unsuspend=null,y()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(p)}}:null}function lS(){if(this.count--,this.count===0){if(this.stylesheets)xT(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var cS=null;function xT(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,cS=new Map,c.forEach(KP,o),cS=null,lS.call(o))}function KP(o,c){if(!(c.state.loading&4)){var p=cS.get(o);if(p)var y=p.get(null);else{p=new Map,cS.set(o,p);for(var M=o.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<M.length;R++){var H=M[R];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(p.set(H.dataset.precedence,H),y=H)}y&&p.set(null,y)}M=c.instance,H=M.getAttribute("data-precedence"),R=p.get(H)||y,R===y&&p.set(null,M),p.set(H,M),this.count++,y=lS.bind(this),M.addEventListener("load",y),M.addEventListener("error",y),R?R.parentNode.insertBefore(M,R.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(M,o.firstChild)),c.state.loading|=4}}var P2={$$typeof:D,Provider:null,Consumer:null,_currentValue:nt,_currentValue2:nt,_threadCount:0};function JP(o,c,p,y,M,R,H,q){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=y,this.onUncaughtError=M,this.onCaughtError=R,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function pR(o,c,p,y,M,R,H,q,st,St,zt,Xt){return o=new JP(o,c,p,H,q,st,St,Xt),c=1,R===!0&&(c|=24),R=Gr(3,null,null,c),o.current=R,R.stateNode=o,c=B0(),c.refCount++,o.pooledCache=c,c.refCount++,R.memoizedState={element:y,isDehydrated:p,cache:c},o2(R),o}function mR(o){return o?(o=Vc,o):Vc}function gR(o,c,p,y,M,R){M=mR(M),y.context===null?y.context=M:y.pendingContext=M,y=el(c),y.payload={element:p},R=R===void 0?null:R,R!==null&&(y.callback=R),p=ql(o,y,c),p!==null&&(Er(p,o,c),Qu(p,o,c))}function vR(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function bT(o,c){vR(o,c),(o=o.alternate)&&vR(o,c)}function yR(o){if(o.tag===13){var c=kl(o,67108864);c!==null&&Er(c,o,67108864),bT(o,67108864)}}var uS=!0;function ZP(o,c,p,y){var M=j.T;j.T=null;var R=tt.p;try{tt.p=2,ST(o,c,p,y)}finally{tt.p=R,j.T=M}}function $P(o,c,p,y){var M=j.T;j.T=null;var R=tt.p;try{tt.p=8,ST(o,c,p,y)}finally{tt.p=R,j.T=M}}function ST(o,c,p,y){if(uS){var M=ET(y);if(M===null)uT(o,c,y,hS,p),AR(o,y);else if(eF(M,o,c,p,y))y.stopPropagation();else if(AR(o,y),c&4&&-1<tF.indexOf(o)){for(;M!==null;){var R=uo(M);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var H=ce(R.pendingLanes);if(H!==0){var q=R;for(q.pendingLanes|=2,q.entangledLanes|=2;H;){var st=1<<31-ge(H);q.entanglements[1]|=st,H&=~st}du(R),(Xn&6)===0&&(nr=Vt()+500,L2(0))}}break;case 13:q=kl(R,2),q!==null&&Er(q,R,2),fl(),bT(R,2)}if(R=ET(y),R===null&&uT(o,c,y,hS,p),R===M)break;M=R}M!==null&&y.stopPropagation()}else uT(o,c,y,null,p)}}function ET(o){return o=d0(o),MT(o)}var hS=null;function MT(o){if(hS=null,o=co(o),o!==null){var c=r(o);if(c===null)o=null;else{var p=c.tag;if(p===13){if(o=a(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return hS=o,null}function _R(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gt()){case be:return 2;case qt:return 8;case $:case Q:return 32;case vt:return 268435456;default:return 32}default:return 32}}var TT=!1,Jf=null,Zf=null,$f=null,F2=new Map,H2=new Map,td=[],tF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AR(o,c){switch(o){case"focusin":case"focusout":Jf=null;break;case"dragenter":case"dragleave":Zf=null;break;case"mouseover":case"mouseout":$f=null;break;case"pointerover":case"pointerout":F2.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":H2.delete(c.pointerId)}}function z2(o,c,p,y,M,R){return o===null||o.nativeEvent!==R?(o={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:R,targetContainers:[M]},c!==null&&(c=uo(c),c!==null&&yR(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,M!==null&&c.indexOf(M)===-1&&c.push(M),o)}function eF(o,c,p,y,M){switch(c){case"focusin":return Jf=z2(Jf,o,c,p,y,M),!0;case"dragenter":return Zf=z2(Zf,o,c,p,y,M),!0;case"mouseover":return $f=z2($f,o,c,p,y,M),!0;case"pointerover":var R=M.pointerId;return F2.set(R,z2(F2.get(R)||null,o,c,p,y,M)),!0;case"gotpointercapture":return R=M.pointerId,H2.set(R,z2(H2.get(R)||null,o,c,p,y,M)),!0}return!1}function xR(o){var c=co(o.target);if(c!==null){var p=r(c);if(p!==null){if(c=p.tag,c===13){if(c=a(p),c!==null){o.blockedOn=c,Ir(o.priority,function(){if(p.tag===13){var y=Fi();y=Jn(y);var M=kl(p,y);M!==null&&Er(M,p,y),bT(p,y)}});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function fS(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=ET(o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);f0=y,p.target.dispatchEvent(y),f0=null}else return c=uo(p),c!==null&&yR(c),o.blockedOn=p,!1;c.shift()}return!0}function bR(o,c,p){fS(o)&&p.delete(c)}function nF(){TT=!1,Jf!==null&&fS(Jf)&&(Jf=null),Zf!==null&&fS(Zf)&&(Zf=null),$f!==null&&fS($f)&&($f=null),F2.forEach(bR),H2.forEach(bR)}function dS(o,c){o.blockedOn===c&&(o.blockedOn=null,TT||(TT=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,nF)))}var pS=null;function SR(o){pS!==o&&(pS=o,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){pS===o&&(pS=null);for(var c=0;c<o.length;c+=3){var p=o[c],y=o[c+1],M=o[c+2];if(typeof y!="function"){if(MT(y||p)===null)continue;break}var R=uo(p);R!==null&&(o.splice(c,3),c-=3,S2(R,{pending:!0,data:M,method:p.method,action:y},y,M))}}))}function G2(o){function c(st){return dS(st,o)}Jf!==null&&dS(Jf,o),Zf!==null&&dS(Zf,o),$f!==null&&dS($f,o),F2.forEach(c),H2.forEach(c);for(var p=0;p<td.length;p++){var y=td[p];y.blockedOn===o&&(y.blockedOn=null)}for(;0<td.length&&(p=td[0],p.blockedOn===null);)xR(p),p.blockedOn===null&&td.shift();if(p=(o.ownerDocument||o).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var M=p[y],R=p[y+1],H=M[cs]||null;if(typeof R=="function")H||SR(p);else if(H){var q=null;if(R&&R.hasAttribute("formAction")){if(M=R,H=R[cs]||null)q=H.formAction;else if(MT(M)!==null)continue}else q=H.action;typeof q=="function"?p[y+1]=q:(p.splice(y,3),y-=3),SR(p)}}}function CT(o){this._internalRoot=o}mS.prototype.render=CT.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));var p=c.current,y=Fi();gR(p,y,o,c,null,null)},mS.prototype.unmount=CT.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;gR(o.current,2,null,o,null,null),fl(),c[$s]=null}};function mS(o){this._internalRoot=o}mS.prototype.unstable_scheduleHydration=function(o){if(o){var c=Cn();o={blockedOn:null,target:o,priority:c};for(var p=0;p<td.length&&c!==0&&c<td[p].priority;p++);td.splice(p,0,o),p===0&&xR(o)}};var ER=t.version;if(ER!=="19.1.0")throw Error(n(527,ER,"19.1.0"));tt.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=u(c),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var iF={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gS.isDisabled&&gS.supportsFiber)try{Ot=gS.inject(iF),ne=gS}catch{}}return V2.createRoot=function(o,c){if(!s(o))throw Error(n(299));var p=!1,y="",M=Jp,R=W0,H=Kb,q=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(M=c.onUncaughtError),c.onCaughtError!==void 0&&(R=c.onCaughtError),c.onRecoverableError!==void 0&&(H=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(q=c.unstable_transitionCallbacks)),c=pR(o,1,!1,null,null,p,y,M,R,H,q,null),o[$s]=c.current,cT(o),new CT(c)},V2.hydrateRoot=function(o,c,p){if(!s(o))throw Error(n(299));var y=!1,M="",R=Jp,H=W0,q=Kb,st=null,St=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(M=p.identifierPrefix),p.onUncaughtError!==void 0&&(R=p.onUncaughtError),p.onCaughtError!==void 0&&(H=p.onCaughtError),p.onRecoverableError!==void 0&&(q=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(st=p.unstable_transitionCallbacks),p.formState!==void 0&&(St=p.formState)),c=pR(o,1,!0,c,p??null,y,M,R,H,q,st,St),c.context=mR(null),p=c.current,y=Fi(),y=Jn(y),M=el(y),M.callback=null,ql(p,M,y),p=y,c.current.lanes=p,Qt(c,p),du(c),o[$s]=c.current,cT(o),new mS(c)},V2.version="19.1.0",V2}var IR;function pF(){if(IR)return DT.exports;IR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),DT.exports=dF(),DT.exports}var mF=pF(),dr=function(){return dr=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},dr.apply(this,arguments)};function ey(i,t,e){if(e||arguments.length===2)for(var n=0,s=t.length,r;n<s;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return i.concat(r||Array.prototype.slice.call(t))}var Bi="-ms-",R_="-moz-",ii="-webkit-",mD="comm",UE="rule",_w="decl",gF="@import",gD="@keyframes",vF="@layer",vD=Math.abs,Aw=String.fromCharCode,d5=Object.assign;function yF(i,t){return fr(i,0)^45?(((t<<2^fr(i,0))<<2^fr(i,1))<<2^fr(i,2))<<2^fr(i,3):0}function yD(i){return i.trim()}function _h(i,t){return(i=t.exec(i))?i[0]:i}function gn(i,t,e){return i.replace(t,e)}function E4(i,t,e){return i.indexOf(t,e)}function fr(i,t){return i.charCodeAt(t)|0}function ny(i,t,e){return i.slice(t,e)}function Iu(i){return i.length}function _D(i){return i.length}function l_(i,t){return t.push(i),i}function _F(i,t){return i.map(t).join("")}function UR(i,t){return i.filter(function(e){return!_h(e,t)})}var PE=1,iy=1,AD=0,Rl=0,ws=0,_y="";function FE(i,t,e,n,s,r,a,l){return{value:i,root:t,parent:e,type:n,props:s,children:r,line:PE,column:iy,length:a,return:"",siblings:l}}function hd(i,t){return d5(FE("",null,null,"",null,null,0,i.siblings),i,{length:-i.length},t)}function f1(i){for(;i.root;)i=hd(i.root,{children:[i]});l_(i,i.siblings)}function AF(){return ws}function xF(){return ws=Rl>0?fr(_y,--Rl):0,iy--,ws===10&&(iy=1,PE--),ws}function wc(){return ws=Rl<AD?fr(_y,Rl++):0,iy++,ws===10&&(iy=1,PE++),ws}function Og(){return fr(_y,Rl)}function M4(){return Rl}function HE(i,t){return ny(_y,i,t)}function p5(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function bF(i){return PE=iy=1,AD=Iu(_y=i),Rl=0,[]}function SF(i){return _y="",i}function IT(i){return yD(HE(Rl-1,m5(i===91?i+2:i===40?i+1:i)))}function EF(i){for(;(ws=Og())&&ws<33;)wc();return p5(i)>2||p5(ws)>3?"":" "}function MF(i,t){for(;--t&&wc()&&!(ws<48||ws>102||ws>57&&ws<65||ws>70&&ws<97););return HE(i,M4()+(t<6&&Og()==32&&wc()==32))}function m5(i){for(;wc();)switch(ws){case i:return Rl;case 34:case 39:i!==34&&i!==39&&m5(ws);break;case 40:i===41&&m5(i);break;case 92:wc();break}return Rl}function TF(i,t){for(;wc()&&i+ws!==57;)if(i+ws===84&&Og()===47)break;return"/*"+HE(t,Rl-1)+"*"+Aw(i===47?i:wc())}function CF(i){for(;!p5(Og());)wc();return HE(i,Rl)}function wF(i){return SF(T4("",null,null,null,[""],i=bF(i),0,[0],i))}function T4(i,t,e,n,s,r,a,l,u){for(var f=0,m=0,g=a,v=0,_=0,b=0,T=1,E=1,S=1,w=0,D="",B=s,N=r,I=n,F=D;E;)switch(b=w,w=wc()){case 40:if(b!=108&&fr(F,g-1)==58){E4(F+=gn(IT(w),"&","&\f"),"&\f",vD(f?l[f-1]:0))!=-1&&(S=-1);break}case 34:case 39:case 91:F+=IT(w);break;case 9:case 10:case 13:case 32:F+=EF(b);break;case 92:F+=MF(M4()-1,7);continue;case 47:switch(Og()){case 42:case 47:l_(RF(TF(wc(),M4()),t,e,u),u);break;default:F+="/"}break;case 123*T:l[f++]=Iu(F)*S;case 125*T:case 59:case 0:switch(w){case 0:case 125:E=0;case 59+m:S==-1&&(F=gn(F,/\f/g,"")),_>0&&Iu(F)-g&&l_(_>32?FR(F+";",n,e,g-1,u):FR(gn(F," ","")+";",n,e,g-2,u),u);break;case 59:F+=";";default:if(l_(I=PR(F,t,e,f,m,s,l,D,B=[],N=[],g,r),r),w===123)if(m===0)T4(F,t,I,I,B,r,g,l,N);else switch(v===99&&fr(F,3)===110?100:v){case 100:case 108:case 109:case 115:T4(i,I,I,n&&l_(PR(i,I,I,0,0,s,l,D,s,B=[],g,N),N),s,N,g,l,n?B:N);break;default:T4(F,I,I,I,[""],N,0,l,N)}}f=m=_=0,T=S=1,D=F="",g=a;break;case 58:g=1+Iu(F),_=b;default:if(T<1){if(w==123)--T;else if(w==125&&T++==0&&xF()==125)continue}switch(F+=Aw(w),w*T){case 38:S=m>0?1:(F+="\f",-1);break;case 44:l[f++]=(Iu(F)-1)*S,S=1;break;case 64:Og()===45&&(F+=IT(wc())),v=Og(),m=g=Iu(D=F+=CF(M4())),w++;break;case 45:b===45&&Iu(F)==2&&(T=0)}}return r}function PR(i,t,e,n,s,r,a,l,u,f,m,g){for(var v=s-1,_=s===0?r:[""],b=_D(_),T=0,E=0,S=0;T<n;++T)for(var w=0,D=ny(i,v+1,v=vD(E=a[T])),B=i;w<b;++w)(B=yD(E>0?_[w]+" "+D:gn(D,/&\f/g,_[w])))&&(u[S++]=B);return FE(i,t,e,s===0?UE:l,u,f,m,g)}function RF(i,t,e,n){return FE(i,t,e,mD,Aw(AF()),ny(i,2,-2),0,n)}function FR(i,t,e,n,s){return FE(i,t,e,_w,ny(i,0,n),ny(i,n+1,-1),n,s)}function xD(i,t,e){switch(yF(i,t)){case 5103:return ii+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ii+i+i;case 4789:return R_+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return ii+i+R_+i+Bi+i+i;case 5936:switch(fr(i,t+11)){case 114:return ii+i+Bi+gn(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return ii+i+Bi+gn(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return ii+i+Bi+gn(i,/[svh]\w+-[tblr]{2}/,"lr")+i}case 6828:case 4268:case 2903:return ii+i+Bi+i+i;case 6165:return ii+i+Bi+"flex-"+i+i;case 5187:return ii+i+gn(i,/(\w+).+(:[^]+)/,ii+"box-$1$2"+Bi+"flex-$1$2")+i;case 5443:return ii+i+Bi+"flex-item-"+gn(i,/flex-|-self/g,"")+(_h(i,/flex-|baseline/)?"":Bi+"grid-row-"+gn(i,/flex-|-self/g,""))+i;case 4675:return ii+i+Bi+"flex-line-pack"+gn(i,/align-content|flex-|-self/g,"")+i;case 5548:return ii+i+Bi+gn(i,"shrink","negative")+i;case 5292:return ii+i+Bi+gn(i,"basis","preferred-size")+i;case 6060:return ii+"box-"+gn(i,"-grow","")+ii+i+Bi+gn(i,"grow","positive")+i;case 4554:return ii+gn(i,/([^-])(transform)/g,"$1"+ii+"$2")+i;case 6187:return gn(gn(gn(i,/(zoom-|grab)/,ii+"$1"),/(image-set)/,ii+"$1"),i,"")+i;case 5495:case 3959:return gn(i,/(image-set\([^]*)/,ii+"$1$`$1");case 4968:return gn(gn(i,/(.+:)(flex-)?(.*)/,ii+"box-pack:$3"+Bi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ii+i+i;case 4200:if(!_h(i,/flex-|baseline/))return Bi+"grid-column-align"+ny(i,t)+i;break;case 2592:case 3360:return Bi+gn(i,"template-","")+i;case 4384:case 3616:return e&&e.some(function(n,s){return t=s,_h(n.props,/grid-\w+-end/)})?~E4(i+(e=e[t].value),"span",0)?i:Bi+gn(i,"-start","")+i+Bi+"grid-row-span:"+(~E4(e,"span",0)?_h(e,/\d+/):+_h(e,/\d+/)-+_h(i,/\d+/))+";":Bi+gn(i,"-start","")+i;case 4896:case 4128:return e&&e.some(function(n){return _h(n.props,/grid-\w+-start/)})?i:Bi+gn(gn(i,"-end","-span"),"span ","")+i;case 4095:case 3583:case 4068:case 2532:return gn(i,/(.+)-inline(.+)/,ii+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Iu(i)-1-t>6)switch(fr(i,t+1)){case 109:if(fr(i,t+4)!==45)break;case 102:return gn(i,/(.+:)(.+)-([^]+)/,"$1"+ii+"$2-$3$1"+R_+(fr(i,t+3)==108?"$3":"$2-$3"))+i;case 115:return~E4(i,"stretch",0)?xD(gn(i,"stretch","fill-available"),t,e)+i:i}break;case 5152:case 5920:return gn(i,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,s,r,a,l,u,f){return Bi+s+":"+r+f+(a?Bi+s+"-span:"+(l?u:+u-+r)+f:"")+i});case 4949:if(fr(i,t+6)===121)return gn(i,":",":"+ii)+i;break;case 6444:switch(fr(i,fr(i,14)===45?18:11)){case 120:return gn(i,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ii+(fr(i,14)===45?"inline-":"")+"box$3$1"+ii+"$2$3$1"+Bi+"$2box$3")+i;case 100:return gn(i,":",":"+Bi)+i}break;case 5719:case 2647:case 2135:case 3927:case 2391:return gn(i,"scroll-","scroll-snap-")+i}return i}function h3(i,t){for(var e="",n=0;n<i.length;n++)e+=t(i[n],n,i,t)||"";return e}function LF(i,t,e,n){switch(i.type){case vF:if(i.children.length)break;case gF:case _w:return i.return=i.return||i.value;case mD:return"";case gD:return i.return=i.value+"{"+h3(i.children,n)+"}";case UE:if(!Iu(i.value=i.props.join(",")))return""}return Iu(e=h3(i.children,n))?i.return=i.value+"{"+e+"}":""}function DF(i){var t=_D(i);return function(e,n,s,r){for(var a="",l=0;l<t;l++)a+=i[l](e,n,s,r)||"";return a}}function BF(i){return function(t){t.root||(t=t.return)&&i(t)}}function OF(i,t,e,n){if(i.length>-1&&!i.return)switch(i.type){case _w:i.return=xD(i.value,i.length,e);return;case gD:return h3([hd(i,{value:gn(i.value,"@","@"+ii)})],n);case UE:if(i.length)return _F(e=i.props,function(s){switch(_h(s,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":f1(hd(i,{props:[gn(s,/:(read-\w+)/,":"+R_+"$1")]})),f1(hd(i,{props:[s]})),d5(i,{props:UR(e,n)});break;case"::placeholder":f1(hd(i,{props:[gn(s,/:(plac\w+)/,":"+ii+"input-$1")]})),f1(hd(i,{props:[gn(s,/:(plac\w+)/,":"+R_+"$1")]})),f1(hd(i,{props:[gn(s,/:(plac\w+)/,Bi+"input-$1")]})),f1(hd(i,{props:[s]})),d5(i,{props:UR(e,n)});break}return""})}}var NF={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},wo={},sy=typeof process<"u"&&wo!==void 0&&(wo.REACT_APP_SC_ATTR||wo.SC_ATTR)||"data-styled",bD="active",SD="data-styled-version",zE="6.1.17",xw=`/*!sc*/
`,f3=typeof window<"u"&&"HTMLElement"in window,IF=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&wo!==void 0&&wo.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&wo.REACT_APP_SC_DISABLE_SPEEDY!==""?wo.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&wo.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&wo!==void 0&&wo.SC_DISABLE_SPEEDY!==void 0&&wo.SC_DISABLE_SPEEDY!==""&&wo.SC_DISABLE_SPEEDY!=="false"&&wo.SC_DISABLE_SPEEDY),UF={},GE=Object.freeze([]),ry=Object.freeze({});function ED(i,t,e){return e===void 0&&(e=ry),i.theme!==e.theme&&i.theme||t||e.theme}var MD=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),PF=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,FF=/(^-|-$)/g;function HR(i){return i.replace(PF,"-").replace(FF,"")}var HF=/(a)(d)/gi,vS=52,zR=function(i){return String.fromCharCode(i+(i>25?39:97))};function g5(i){var t,e="";for(t=Math.abs(i);t>vS;t=t/vS|0)e=zR(t%vS)+e;return(zR(t%vS)+e).replace(HF,"$1-$2")}var UT,TD=5381,j1=function(i,t){for(var e=t.length;e;)i=33*i^t.charCodeAt(--e);return i},CD=function(i){return j1(TD,i)};function bw(i){return g5(CD(i)>>>0)}function zF(i){return i.displayName||i.name||"Component"}function PT(i){return typeof i=="string"&&!0}var wD=typeof Symbol=="function"&&Symbol.for,RD=wD?Symbol.for("react.memo"):60115,GF=wD?Symbol.for("react.forward_ref"):60112,kF={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},VF={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},LD={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},QF=((UT={})[GF]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},UT[RD]=LD,UT);function GR(i){return("type"in(t=i)&&t.type.$$typeof)===RD?LD:"$$typeof"in i?QF[i.$$typeof]:kF;var t}var jF=Object.defineProperty,XF=Object.getOwnPropertyNames,kR=Object.getOwnPropertySymbols,qF=Object.getOwnPropertyDescriptor,YF=Object.getPrototypeOf,VR=Object.prototype;function DD(i,t,e){if(typeof t!="string"){if(VR){var n=YF(t);n&&n!==VR&&DD(i,n,e)}var s=XF(t);kR&&(s=s.concat(kR(t)));for(var r=GR(i),a=GR(t),l=0;l<s.length;++l){var u=s[l];if(!(u in VF||e&&e[u]||a&&u in a||r&&u in r)){var f=qF(t,u);try{jF(i,u,f)}catch{}}}}return i}function Pg(i){return typeof i=="function"}function Sw(i){return typeof i=="object"&&"styledComponentId"in i}function Lm(i,t){return i&&t?"".concat(i," ").concat(t):i||t||""}function d3(i,t){if(i.length===0)return"";for(var e=i[0],n=1;n<i.length;n++)e+=i[n];return e}function Q_(i){return i!==null&&typeof i=="object"&&i.constructor.name===Object.name&&!("props"in i&&i.$$typeof)}function v5(i,t,e){if(e===void 0&&(e=!1),!e&&!Q_(i)&&!Array.isArray(i))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)i[n]=v5(i[n],t[n]);else if(Q_(t))for(var n in t)i[n]=v5(i[n],t[n]);return i}function Ew(i,t){Object.defineProperty(i,"toString",{value:t})}function Kd(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(i," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var WF=function(){function i(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return i.prototype.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},i.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,s=n.length,r=s;t>=r;)if((r<<=1)<0)throw Kd(16,"".concat(t));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var a=s;a<r;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(t+1),u=(a=0,e.length);a<u;a++)this.tag.insertRule(l,e[a])&&(this.groupSizes[t]++,l++)},i.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),s=n+e;this.groupSizes[t]=0;for(var r=n;r<s;r++)this.tag.deleteRule(n)}},i.prototype.getGroup=function(t){var e="";if(t>=this.length||this.groupSizes[t]===0)return e;for(var n=this.groupSizes[t],s=this.indexOfGroup(t),r=s+n,a=s;a<r;a++)e+="".concat(this.tag.getRule(a)).concat(xw);return e},i}(),C4=new Map,p3=new Map,w4=1,yS=function(i){if(C4.has(i))return C4.get(i);for(;p3.has(w4);)w4++;var t=w4++;return C4.set(i,t),p3.set(t,i),t},KF=function(i,t){w4=t+1,C4.set(i,t),p3.set(t,i)},JF="style[".concat(sy,"][").concat(SD,'="').concat(zE,'"]'),ZF=new RegExp("^".concat(sy,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),$F=function(i,t,e){for(var n,s=e.split(","),r=0,a=s.length;r<a;r++)(n=s[r])&&i.registerName(t,n)},tH=function(i,t){for(var e,n=((e=t.textContent)!==null&&e!==void 0?e:"").split(xw),s=[],r=0,a=n.length;r<a;r++){var l=n[r].trim();if(l){var u=l.match(ZF);if(u){var f=0|parseInt(u[1],10),m=u[2];f!==0&&(KF(m,f),$F(i,m,u[3]),i.getTag().insertRules(f,s)),s.length=0}else s.push(l)}}},QR=function(i){for(var t=document.querySelectorAll(JF),e=0,n=t.length;e<n;e++){var s=t[e];s&&s.getAttribute(sy)!==bD&&(tH(i,s),s.parentNode&&s.parentNode.removeChild(s))}};function eH(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var BD=function(i){var t=document.head,e=i||t,n=document.createElement("style"),s=function(l){var u=Array.from(l.querySelectorAll("style[".concat(sy,"]")));return u[u.length-1]}(e),r=s!==void 0?s.nextSibling:null;n.setAttribute(sy,bD),n.setAttribute(SD,zE);var a=eH();return a&&n.setAttribute("nonce",a),e.insertBefore(n,r),n},nH=function(){function i(t){this.element=BD(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,s=0,r=n.length;s<r;s++){var a=n[s];if(a.ownerNode===e)return a}throw Kd(17)}(this.element),this.length=0}return i.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch{return!1}},i.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},i.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},i}(),iH=function(){function i(t){this.element=BD(t),this.nodes=this.element.childNodes,this.length=0}return i.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},i.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},i.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},i}(),sH=function(){function i(t){this.rules=[],this.length=0}return i.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},i.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},i.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},i}(),jR=f3,rH={isServer:!f3,useCSSOMInjection:!IF},m3=function(){function i(t,e,n){t===void 0&&(t=ry),e===void 0&&(e={});var s=this;this.options=dr(dr({},rH),t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&f3&&jR&&(jR=!1,QR(this)),Ew(this,function(){return function(r){for(var a=r.getTag(),l=a.length,u="",f=function(g){var v=function(S){return p3.get(S)}(g);if(v===void 0)return"continue";var _=r.names.get(v),b=a.getGroup(g);if(_===void 0||!_.size||b.length===0)return"continue";var T="".concat(sy,".g").concat(g,'[id="').concat(v,'"]'),E="";_!==void 0&&_.forEach(function(S){S.length>0&&(E+="".concat(S,","))}),u+="".concat(b).concat(T,'{content:"').concat(E,'"}').concat(xw)},m=0;m<l;m++)f(m);return u}(s)})}return i.registerId=function(t){return yS(t)},i.prototype.rehydrate=function(){!this.server&&f3&&QR(this)},i.prototype.reconstructWithOptions=function(t,e){return e===void 0&&(e=!0),new i(dr(dr({},this.options),t),this.gs,e&&this.names||void 0)},i.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},i.prototype.getTag=function(){return this.tag||(this.tag=(t=function(e){var n=e.useCSSOMInjection,s=e.target;return e.isServer?new sH(s):n?new nH(s):new iH(s)}(this.options),new WF(t)));var t},i.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},i.prototype.registerName=function(t,e){if(yS(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},i.prototype.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(yS(t),n)},i.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},i.prototype.clearRules=function(t){this.getTag().clearGroup(yS(t)),this.clearNames(t)},i.prototype.clearTag=function(){this.tag=void 0},i}(),aH=/&/g,oH=/^\s*\/\/.*$/gm;function OD(i,t){return i.map(function(e){return e.type==="rule"&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(e.children)&&e.type!=="@keyframes"&&(e.children=OD(e.children,t)),e})}function lH(i){var t,e,n,s=ry,r=s.options,a=r===void 0?ry:r,l=s.plugins,u=l===void 0?GE:l,f=function(v,_,b){return b.startsWith(e)&&b.endsWith(e)&&b.replaceAll(e,"").length>0?".".concat(t):v},m=u.slice();m.push(function(v){v.type===UE&&v.value.includes("&")&&(v.props[0]=v.props[0].replace(aH,e).replace(n,f))}),a.prefix&&m.push(OF),m.push(LF);var g=function(v,_,b,T){_===void 0&&(_=""),b===void 0&&(b=""),T===void 0&&(T="&"),t=T,e=_,n=new RegExp("\\".concat(e,"\\b"),"g");var E=v.replace(oH,""),S=wF(b||_?"".concat(b," ").concat(_," { ").concat(E," }"):E);a.namespace&&(S=OD(S,a.namespace));var w=[];return h3(S,DF(m.concat(BF(function(D){return w.push(D)})))),w};return g.hash=u.length?u.reduce(function(v,_){return _.name||Kd(15),j1(v,_.name)},TD).toString():"",g}var cH=new m3,y5=lH(),ND=Ba.createContext({shouldForwardProp:void 0,styleSheet:cH,stylis:y5});ND.Consumer;Ba.createContext(void 0);function _5(){return rt.useContext(ND)}var ID=function(){function i(t,e){var n=this;this.inject=function(s,r){r===void 0&&(r=y5);var a=n.name+r.hash;s.hasNameForId(n.id,a)||s.insertRules(n.id,a,r(n.rules,a,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,Ew(this,function(){throw Kd(12,String(n.name))})}return i.prototype.getName=function(t){return t===void 0&&(t=y5),this.name+t.hash},i}(),uH=function(i){return i>="A"&&i<="Z"};function XR(i){for(var t="",e=0;e<i.length;e++){var n=i[e];if(e===1&&n==="-"&&i[0]==="-")return i;uH(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var UD=function(i){return i==null||i===!1||i===""},PD=function(i){var t,e,n=[];for(var s in i){var r=i[s];i.hasOwnProperty(s)&&!UD(r)&&(Array.isArray(r)&&r.isCss||Pg(r)?n.push("".concat(XR(s),":"),r,";"):Q_(r)?n.push.apply(n,ey(ey(["".concat(s," {")],PD(r),!1),["}"],!1)):n.push("".concat(XR(s),": ").concat((t=s,(e=r)==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||t in NF||t.startsWith("--")?String(e).trim():"".concat(e,"px")),";")))}return n};function qd(i,t,e,n){if(UD(i))return[];if(Sw(i))return[".".concat(i.styledComponentId)];if(Pg(i)){if(!Pg(r=i)||r.prototype&&r.prototype.isReactComponent||!t)return[i];var s=i(t);return qd(s,t,e,n)}var r;return i instanceof ID?e?(i.inject(e,n),[i.getName(n)]):[i]:Q_(i)?PD(i):Array.isArray(i)?Array.prototype.concat.apply(GE,i.map(function(a){return qd(a,t,e,n)})):[i.toString()]}function FD(i){for(var t=0;t<i.length;t+=1){var e=i[t];if(Pg(e)&&!Sw(e))return!1}return!0}var hH=CD(zE),fH=function(){function i(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&FD(t),this.componentId=e,this.baseHash=j1(hH,e),this.baseStyle=n,m3.registerId(e)}return i.prototype.generateAndInjectStyles=function(t,e,n){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))s=Lm(s,this.staticRulesId);else{var r=d3(qd(this.rules,t,e,n)),a=g5(j1(this.baseHash,r)>>>0);if(!e.hasNameForId(this.componentId,a)){var l=n(r,".".concat(a),void 0,this.componentId);e.insertRules(this.componentId,a,l)}s=Lm(s,a),this.staticRulesId=a}else{for(var u=j1(this.baseHash,n.hash),f="",m=0;m<this.rules.length;m++){var g=this.rules[m];if(typeof g=="string")f+=g;else if(g){var v=d3(qd(g,t,e,n));u=j1(u,v+m),f+=v}}if(f){var _=g5(u>>>0);e.hasNameForId(this.componentId,_)||e.insertRules(this.componentId,_,n(f,".".concat(_),void 0,this.componentId)),s=Lm(s,_)}}return s},i}(),ay=Ba.createContext(void 0);ay.Consumer;function kE(){var i=rt.useContext(ay);if(!i)throw Kd(18);return i}function dH(i){var t=Ba.useContext(ay),e=rt.useMemo(function(){return function(n,s){if(!n)throw Kd(14);if(Pg(n)){var r=n(s);return r}if(Array.isArray(n)||typeof n!="object")throw Kd(8);return s?dr(dr({},s),n):n}(i.theme,t)},[i.theme,t]);return i.children?Ba.createElement(ay.Provider,{value:e},i.children):null}var FT={};function pH(i,t,e){var n=Sw(i),s=i,r=!PT(i),a=t.attrs,l=a===void 0?GE:a,u=t.componentId,f=u===void 0?function(B,N){var I=typeof B!="string"?"sc":HR(B);FT[I]=(FT[I]||0)+1;var F="".concat(I,"-").concat(bw(zE+I+FT[I]));return N?"".concat(N,"-").concat(F):F}(t.displayName,t.parentComponentId):u,m=t.displayName,g=m===void 0?function(B){return PT(B)?"styled.".concat(B):"Styled(".concat(zF(B),")")}(i):m,v=t.displayName&&t.componentId?"".concat(HR(t.displayName),"-").concat(t.componentId):t.componentId||f,_=n&&s.attrs?s.attrs.concat(l).filter(Boolean):l,b=t.shouldForwardProp;if(n&&s.shouldForwardProp){var T=s.shouldForwardProp;if(t.shouldForwardProp){var E=t.shouldForwardProp;b=function(B,N){return T(B,N)&&E(B,N)}}else b=T}var S=new fH(e,v,n?s.componentStyle:void 0);function w(B,N){return function(I,F,z){var U=I.attrs,P=I.componentStyle,X=I.defaultProps,lt=I.foldedComponentIds,it=I.styledComponentId,ut=I.target,dt=Ba.useContext(ay),j=_5(),tt=I.shouldForwardProp||j.shouldForwardProp,nt=ED(F,dt,X)||ry,_t=function(wt,Bt,Ut){for(var Wt,ve=dr(dr({},Bt),{className:void 0,theme:Ut}),ee=0;ee<wt.length;ee+=1){var Ye=Pg(Wt=wt[ee])?Wt(ve):Wt;for(var we in Ye)ve[we]=we==="className"?Lm(ve[we],Ye[we]):we==="style"?dr(dr({},ve[we]),Ye[we]):Ye[we]}return Bt.className&&(ve.className=Lm(ve.className,Bt.className)),ve}(U,F,nt),J=_t.as||ut,ot={};for(var xt in _t)_t[xt]===void 0||xt[0]==="$"||xt==="as"||xt==="theme"&&_t.theme===nt||(xt==="forwardedAs"?ot.as=_t.forwardedAs:tt&&!tt(xt,J)||(ot[xt]=_t[xt]));var Et=function(wt,Bt){var Ut=_5(),Wt=wt.generateAndInjectStyles(Bt,Ut.styleSheet,Ut.stylis);return Wt}(P,_t),ct=Lm(lt,it);return Et&&(ct+=" "+Et),_t.className&&(ct+=" "+_t.className),ot[PT(J)&&!MD.has(J)?"class":"className"]=ct,z&&(ot.ref=z),rt.createElement(J,ot)}(D,B,N)}w.displayName=g;var D=Ba.forwardRef(w);return D.attrs=_,D.componentStyle=S,D.displayName=g,D.shouldForwardProp=b,D.foldedComponentIds=n?Lm(s.foldedComponentIds,s.styledComponentId):"",D.styledComponentId=v,D.target=n?s.target:i,Object.defineProperty(D,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(B){this._foldedDefaultProps=n?function(N){for(var I=[],F=1;F<arguments.length;F++)I[F-1]=arguments[F];for(var z=0,U=I;z<U.length;z++)v5(N,U[z],!0);return N}({},s.defaultProps,B):B}}),Ew(D,function(){return".".concat(D.styledComponentId)}),r&&DD(D,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),D}function qR(i,t){for(var e=[i[0]],n=0,s=t.length;n<s;n+=1)e.push(t[n],i[n+1]);return e}var YR=function(i){return Object.assign(i,{isCss:!0})};function j_(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Pg(i)||Q_(i))return YR(qd(qR(GE,ey([i],t,!0))));var n=i;return t.length===0&&n.length===1&&typeof n[0]=="string"?qd(n):YR(qd(qR(n,t)))}function A5(i,t,e){if(e===void 0&&(e=ry),!t)throw Kd(1,t);var n=function(s){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return i(t,e,j_.apply(void 0,ey([s],r,!1)))};return n.attrs=function(s){return A5(i,t,dr(dr({},e),{attrs:Array.prototype.concat(e.attrs,s).filter(Boolean)}))},n.withConfig=function(s){return A5(i,t,dr(dr({},e),s))},n}var HD=function(i){return A5(pH,i)},ie=HD;MD.forEach(function(i){ie[i]=HD(i)});var mH=function(){function i(t,e){this.rules=t,this.componentId=e,this.isStatic=FD(t),m3.registerId(this.componentId+1)}return i.prototype.createStyles=function(t,e,n,s){var r=s(d3(qd(this.rules,e,n,s)),""),a=this.componentId+t;n.insertRules(a,a,r)},i.prototype.removeStyles=function(t,e){e.clearRules(this.componentId+t)},i.prototype.renderStyles=function(t,e,n,s){t>2&&m3.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,s)},i}();function gH(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=j_.apply(void 0,ey([i],t,!1)),s="sc-global-".concat(bw(JSON.stringify(n))),r=new mH(n,s),a=function(u){var f=_5(),m=Ba.useContext(ay),g=Ba.useRef(f.styleSheet.allocateGSInstance(s)).current;return f.styleSheet.server&&l(g,u,f.styleSheet,m,f.stylis),Ba.useLayoutEffect(function(){if(!f.styleSheet.server)return l(g,u,f.styleSheet,m,f.stylis),function(){return r.removeStyles(g,f.styleSheet)}},[g,u,f.styleSheet,m,f.stylis]),null};function l(u,f,m,g,v){if(r.isStatic)r.renderStyles(u,UF,m,v);else{var _=dr(dr({},f),{theme:ED(f,g,a.defaultProps)});r.renderStyles(u,_,m,v)}}return Ba.memo(a)}function Ay(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=d3(j_.apply(void 0,ey([i],t,!1))),s=bw(n);return new ID(s,n)}const vH=Ay`
    from {
      text-shadow: 0.5px 0 0 #ea36af, -1px 0 0 #75fa69;
    }
    to {
      text-shadow: 1px 0.5px 1px #ea36af, -0.5px -0.5px 1px #75fa69;
    }
`,yH=gH`
  :root {
    --white-color: #F8F8FF;
  }

  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    animation-duration: 0.01s;
    animation-name: ${vH};
    animation-iteration-count: infinite;
    animation-direction: alternate;
  }

  html {
    font-size: clamp(12px, 0.75vw + 0.5rem, 26px);
    cursor: url("cursor/Arrow1.cur"), auto;
  }

  html, body {
    user-select: none; 
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: ${({theme:i})=>i.fontFamily};
    letter-spacing: 0.1em;
    line-height: 1.5;
    color: ${({theme:i})=>i.pallet.textColor};
    background-color: ${({theme:i})=>i.pallet.mainColor};
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    letter-spacing: -0.5px;
  }

  img, picture, video, svg {
    display: block;
    max-width: 100%;
  }

  canvas {4
    min-width: 100vw;
    min-height: 100vh;
  }

  input, button, textarea, select {
    font: inherit;
  }

  input:hover, textarea:hover {
    caret-color: ${({theme:i})=>i.pallet.textColor};
    cursor: url("cursor/Win95ZBlinkCur.cur"), auto;
  }

  button {
    background: none;
    border: none;
  }

  a {
    text-decoration: none;
    color: inherit;
  }
`,_H=ie.div`
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;

  &::before {
    content: "";
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.1),
      rgba(0, 0, 0, 0.1) 1px,
      transparent 2px,
      transparent 4px
    );
    pointer-events: none;
    mix-blend-mode: overlay;
  }

  &::after {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
      ellipse at center,
      rgba(0, 0, 0, 0) 60%,
      rgba(0, 0, 0, 0.4) 100%
    );
    pointer-events: none;
    mix-blend-mode: multiply;
  }
`,AH=ie.div`
  opacity: ${({$bootDone:i})=>i?1:0};
  transition: opacity 2s ease-in-out;
  pointerevents: ${({$bootDone:i})=>i?"auto":"none"};
`;var HT={exports:{}},zT={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WR;function xH(){if(WR)return zT;WR=1;var i=e0();function t(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var e=typeof Object.is=="function"?Object.is:t,n=i.useSyncExternalStore,s=i.useRef,r=i.useEffect,a=i.useMemo,l=i.useDebugValue;return zT.useSyncExternalStoreWithSelector=function(u,f,m,g,v){var _=s(null);if(_.current===null){var b={hasValue:!1,value:null};_.current=b}else b=_.current;_=a(function(){function E(N){if(!S){if(S=!0,w=N,N=g(N),v!==void 0&&b.hasValue){var I=b.value;if(v(I,N))return D=I}return D=N}if(I=D,e(w,N))return I;var F=g(N);return v!==void 0&&v(I,F)?(w=N,I):(w=N,D=F)}var S=!1,w,D,B=m===void 0?null:m;return[function(){return E(f())},B===null?void 0:function(){return E(B())}]},[f,m,g,v]);var T=n(u,_[0],_[1]);return r(function(){b.hasValue=!0,b.value=T},[T]),l(T),T},zT}var KR;function bH(){return KR||(KR=1,HT.exports=xH()),HT.exports}var SH=bH();function EH(i){i()}function MH(){let i=null,t=null;return{clear(){i=null,t=null},notify(){EH(()=>{let e=i;for(;e;)e.callback(),e=e.next})},get(){const e=[];let n=i;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let n=!0;const s=t={callback:e,next:null,prev:t};return s.prev?s.prev.next=s:i=s,function(){!n||i===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:i=s.next)}}}}var JR={notify(){},get:()=>[]};function TH(i,t){let e,n=JR,s=0,r=!1;function a(T){m();const E=n.subscribe(T);let S=!1;return()=>{S||(S=!0,E(),g())}}function l(){n.notify()}function u(){b.onStateChange&&b.onStateChange()}function f(){return r}function m(){s++,e||(e=i.subscribe(u),n=MH())}function g(){s--,e&&s===0&&(e(),e=void 0,n.clear(),n=JR)}function v(){r||(r=!0,m())}function _(){r&&(r=!1,g())}const b={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:f,trySubscribe:v,tryUnsubscribe:_,getListeners:()=>n};return b}var CH=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wH=CH(),RH=()=>typeof navigator<"u"&&navigator.product==="ReactNative",LH=RH(),DH=()=>wH||LH?rt.useLayoutEffect:rt.useEffect,BH=DH(),GT=Symbol.for("react-redux-context"),kT=typeof globalThis<"u"?globalThis:{};function OH(){if(!rt.createContext)return{};const i=kT[GT]??(kT[GT]=new Map);let t=i.get(rt.createContext);return t||(t=rt.createContext(null),i.set(rt.createContext,t)),t}var Jd=OH();function NH(i){const{children:t,context:e,serverState:n,store:s}=i,r=rt.useMemo(()=>{const u=TH(s);return{store:s,subscription:u,getServerState:n?()=>n:void 0}},[s,n]),a=rt.useMemo(()=>s.getState(),[s]);BH(()=>{const{subscription:u}=r;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==s.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[r,a]);const l=e||Jd;return rt.createElement(l.Provider,{value:r},t)}var IH=NH;function Mw(i=Jd){return function(){return rt.useContext(i)}}var zD=Mw();function GD(i=Jd){const t=i===Jd?zD:Mw(i),e=()=>{const{store:n}=t();return n};return Object.assign(e,{withTypes:()=>e}),e}var kD=GD();function UH(i=Jd){const t=i===Jd?kD:GD(i),e=()=>t().dispatch;return Object.assign(e,{withTypes:()=>e}),e}var PH=UH(),FH=(i,t)=>i===t;function HH(i=Jd){const t=i===Jd?zD:Mw(i),e=(n,s={})=>{const{equalityFn:r=FH}=typeof s=="function"?{equalityFn:s}:s,a=t(),{store:l,subscription:u,getServerState:f}=a;rt.useRef(!0);const m=rt.useCallback({[n.name](v){return n(v)}}[n.name],[n]),g=SH.useSyncExternalStoreWithSelector(u.addNestedSub,l.getState,f||l.getState,m,r);return rt.useDebugValue(g),g};return Object.assign(e,{withTypes:()=>e}),e}var zH=HH();const Hu=PH.withTypes(),VE=zH.withTypes();kD.withTypes();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const n0="176",GH={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},kH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},VD=0,x5=1,QD=2,VH=3,jD=0,QE=1,L_=2,lc=3,Lc=0,qs=1,La=2,ra=0,Ng=1,b5=2,S5=3,E5=4,XD=5,md=100,qD=101,YD=102,WD=103,KD=104,JD=200,ZD=201,$D=202,tB=203,g3=204,v3=205,eB=206,nB=207,iB=208,sB=209,rB=210,aB=211,oB=212,lB=213,cB=214,y3=0,_3=1,A3=2,Fg=3,x3=4,b3=5,S3=6,E3=7,Ex=0,uB=1,hB=2,Rc=0,fB=1,dB=2,pB=3,Tw=4,mB=5,gB=6,vB=7,M5="attached",yB="detached",jE=300,sf=301,Zd=302,X_=303,q_=304,xy=306,$d=1e3,Ho=1001,oy=1002,os=1003,XE=1004,QH=1004,Dm=1005,jH=1005,Ni=1006,K1=1007,XH=1007,Tl=1008,qH=1008,Ws=1009,Cw=1010,ww=1011,ly=1012,qE=1013,Pu=1014,Oa=1015,i0=1016,YE=1017,WE=1018,Hg=1020,Rw=35902,Lw=1021,Dw=1022,na=1023,cy=1026,zg=1027,KE=1028,Mx=1029,Bw=1030,JE=1031,YH=1032,ZE=1033,D_=33776,B_=33777,O_=33778,N_=33779,M3=35840,T3=35841,C3=35842,w3=35843,R3=36196,L3=37492,D3=37496,B3=37808,O3=37809,N3=37810,I3=37811,U3=37812,P3=37813,F3=37814,H3=37815,z3=37816,G3=37817,k3=37818,V3=37819,Q3=37820,j3=37821,I_=36492,X3=36494,q3=36495,Ow=36283,Y3=36284,W3=36285,K3=36286,_B=2200,AB=2201,xB=2202,uy=2300,hy=2301,R4=2302,Bm=2400,Om=2401,Y_=2402,$E=2500,Nw=2501,bB=0,Iw=1,J3=2,op=3200,SB=3201,WH=3202,KH=3203,lp=0,EB=1,Ec="",Kn="srgb",Fu="srgb-linear",W_="linear",fi="srgb",JH=0,Am=7680,ZH=7681,$H=7682,tz=7683,ez=34055,nz=34056,iz=5386,sz=512,rz=513,az=514,oz=515,lz=516,cz=517,uz=518,T5=519,MB=512,TB=513,CB=514,Uw=515,wB=516,RB=517,LB=518,DB=519,K_=35044,hz=35048,fz=35040,dz=35045,pz=35049,mz=35041,gz=35046,vz=35050,yz=35042,_z="100",C5="300 es",Cl=2e3,J_=2001,Az={COMPUTE:"compute",RENDER:"render"},xz={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},bz={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};class qo{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){const n=this._listeners;if(n===void 0)return;const s=n[t];if(s!==void 0){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const n=e[t.type];if(n!==void 0){t.target=this;const s=n.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,t);t.target=null}}}const Xr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ZR=1234567;const Ig=Math.PI/180,fy=180/Math.PI;function Go(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Xr[i&255]+Xr[i>>8&255]+Xr[i>>16&255]+Xr[i>>24&255]+"-"+Xr[t&255]+Xr[t>>8&255]+"-"+Xr[t>>16&15|64]+Xr[t>>24&255]+"-"+Xr[e&63|128]+Xr[e>>8&255]+"-"+Xr[e>>16&255]+Xr[e>>24&255]+Xr[n&255]+Xr[n>>8&255]+Xr[n>>16&255]+Xr[n>>24&255]).toLowerCase()}function nn(i,t,e){return Math.max(t,Math.min(e,i))}function Pw(i,t){return(i%t+t)%t}function Sz(i,t,e,n,s){return n+(i-t)*(s-n)/(e-t)}function Ez(i,t,e){return i!==t?(e-i)/(t-i):0}function U_(i,t,e){return(1-e)*i+e*t}function Mz(i,t,e,n){return U_(i,t,1-Math.exp(-e*n))}function Tz(i,t=1){return t-Math.abs(Pw(i,t*2)-t)}function Cz(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*(3-2*i))}function wz(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*i*(i*(i*6-15)+10))}function Rz(i,t){return i+Math.floor(Math.random()*(t-i+1))}function Lz(i,t){return i+Math.random()*(t-i)}function Dz(i){return i*(.5-Math.random())}function Bz(i){i!==void 0&&(ZR=i);let t=ZR+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Oz(i){return i*Ig}function Nz(i){return i*fy}function Iz(i){return(i&i-1)===0&&i!==0}function Uz(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Pz(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Fz(i,t,e,n,s){const r=Math.cos,a=Math.sin,l=r(e/2),u=a(e/2),f=r((t+n)/2),m=a((t+n)/2),g=r((t-n)/2),v=a((t-n)/2),_=r((n-t)/2),b=a((n-t)/2);switch(s){case"XYX":i.set(l*m,u*g,u*v,l*f);break;case"YZY":i.set(u*v,l*m,u*g,l*f);break;case"ZXZ":i.set(u*g,u*v,l*m,l*f);break;case"XZX":i.set(l*m,u*b,u*_,l*f);break;case"YXY":i.set(u*_,l*m,u*b,l*f);break;case"ZYZ":i.set(u*b,u*_,l*m,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Da(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function cn(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const Z_={DEG2RAD:Ig,RAD2DEG:fy,generateUUID:Go,clamp:nn,euclideanModulo:Pw,mapLinear:Sz,inverseLerp:Ez,lerp:U_,damp:Mz,pingpong:Tz,smoothstep:Cz,smootherstep:wz,randInt:Rz,randFloat:Lz,randFloatSpread:Dz,seededRandom:Bz,degToRad:Oz,radToDeg:Nz,isPowerOfTwo:Iz,ceilPowerOfTwo:Uz,floorPowerOfTwo:Pz,setQuaternionFromProperEuler:Fz,normalize:cn,denormalize:Da};class Pt{constructor(t=0,e=0){Pt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6],this.y=s[1]*e+s[4]*n+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=nn(this.x,t.x,e.x),this.y=nn(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=nn(this.x,t,e),this.y=nn(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(nn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),s=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*s+t.x,this.y=r*s+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class on{constructor(t,e,n,s,r,a,l,u,f){on.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,s,r,a,l,u,f)}set(t,e,n,s,r,a,l,u,f){const m=this.elements;return m[0]=t,m[1]=s,m[2]=l,m[3]=e,m[4]=r,m[5]=u,m[6]=n,m[7]=a,m[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,r=this.elements,a=n[0],l=n[3],u=n[6],f=n[1],m=n[4],g=n[7],v=n[2],_=n[5],b=n[8],T=s[0],E=s[3],S=s[6],w=s[1],D=s[4],B=s[7],N=s[2],I=s[5],F=s[8];return r[0]=a*T+l*w+u*N,r[3]=a*E+l*D+u*I,r[6]=a*S+l*B+u*F,r[1]=f*T+m*w+g*N,r[4]=f*E+m*D+g*I,r[7]=f*S+m*B+g*F,r[2]=v*T+_*w+b*N,r[5]=v*E+_*D+b*I,r[8]=v*S+_*B+b*F,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],l=t[5],u=t[6],f=t[7],m=t[8];return e*a*m-e*l*f-n*r*m+n*l*u+s*r*f-s*a*u}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],l=t[5],u=t[6],f=t[7],m=t[8],g=m*a-l*f,v=l*u-m*r,_=f*r-a*u,b=e*g+n*v+s*_;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/b;return t[0]=g*T,t[1]=(s*f-m*n)*T,t[2]=(l*n-s*a)*T,t[3]=v*T,t[4]=(m*e-s*u)*T,t[5]=(s*r-l*e)*T,t[6]=_*T,t[7]=(n*u-f*e)*T,t[8]=(a*e-n*r)*T,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,s,r,a,l){const u=Math.cos(r),f=Math.sin(r);return this.set(n*u,n*f,-n*(u*a+f*l)+a+t,-s*f,s*u,-s*(-f*a+u*l)+l+e,0,0,1),this}scale(t,e){return this.premultiply(VT.makeScale(t,e)),this}rotate(t){return this.premultiply(VT.makeRotation(-t)),this}translate(t,e){return this.premultiply(VT.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<9;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const VT=new on;function BB(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}const Hz={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function X1(i,t){return new Hz[i](t)}function $_(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function OB(){const i=$_("canvas");return i.style.display="block",i}const $R={};function L4(i){i in $R||($R[i]=!0,console.warn(i))}function zz(i,t,e){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,e);break;default:n()}}setTimeout(r,e)})}function Gz(i){const t=i.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function kz(i){const t=i.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const t6=new on().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),e6=new on().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Vz(){const i={enabled:!0,workingColorSpace:Fu,spaces:{},convert:function(s,r,a){return this.enabled===!1||r===a||!r||!a||(this.spaces[r].transfer===fi&&(s.r=Jh(s.r),s.g=Jh(s.g),s.b=Jh(s.b)),this.spaces[r].primaries!==this.spaces[a].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===fi&&(s.r=J1(s.r),s.g=J1(s.g),s.b=J1(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Ec?W_:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,a){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Fu]:{primaries:t,whitePoint:n,transfer:W_,toXYZ:t6,fromXYZ:e6,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Kn},outputColorSpaceConfig:{drawingBufferColorSpace:Kn}},[Kn]:{primaries:t,whitePoint:n,transfer:fi,toXYZ:t6,fromXYZ:e6,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Kn}}}),i}const Fn=Vz();function Jh(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function J1(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let d1;class NB{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{d1===void 0&&(d1=$_("canvas")),d1.width=t.width,d1.height=t.height;const s=d1.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),n=d1}return n.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=$_("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const s=n.getImageData(0,0,t.width,t.height),r=s.data;for(let a=0;a<r.length;a++)r[a]=Jh(r[a]/255)*255;return n.putImageData(s,0,0),e}else if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(Jh(e[n]/255)*255):e[n]=Jh(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Qz=0;class jd{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Qz++}),this.uuid=Go(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let a=0,l=s.length;a<l;a++)s[a].isDataTexture?r.push(QT(s[a].image)):r.push(QT(s[a]))}else r=QT(s);n.url=r}return e||(t.images[this.uuid]=n),n}}function QT(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?NB.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let jz=0;class wi extends qo{constructor(t=wi.DEFAULT_IMAGE,e=wi.DEFAULT_MAPPING,n=Ho,s=Ho,r=Ni,a=Tl,l=na,u=Ws,f=wi.DEFAULT_ANISOTROPY,m=Ec){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:jz++}),this.uuid=Go(),this.name="",this.source=new jd(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Pt(0,0),this.repeat=new Pt(1,1),this.center=new Pt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new on,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isTextureArray=t.isTextureArray,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==jE)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case $d:t.x=t.x-Math.floor(t.x);break;case Ho:t.x=t.x<0?0:1;break;case oy:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case $d:t.y=t.y-Math.floor(t.y);break;case Ho:t.y=t.y<0?0:1;break;case oy:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}wi.DEFAULT_IMAGE=null;wi.DEFAULT_MAPPING=jE;wi.DEFAULT_ANISOTROPY=1;class On{constructor(t=0,e=0,n=0,s=1){On.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,s){return this.x=t,this.y=e,this.z=n,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,s=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*s+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*s+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*s+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*s+a[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,s,r;const u=t.elements,f=u[0],m=u[4],g=u[8],v=u[1],_=u[5],b=u[9],T=u[2],E=u[6],S=u[10];if(Math.abs(m-v)<.01&&Math.abs(g-T)<.01&&Math.abs(b-E)<.01){if(Math.abs(m+v)<.1&&Math.abs(g+T)<.1&&Math.abs(b+E)<.1&&Math.abs(f+_+S-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const D=(f+1)/2,B=(_+1)/2,N=(S+1)/2,I=(m+v)/4,F=(g+T)/4,z=(b+E)/4;return D>B&&D>N?D<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(D),s=I/n,r=F/n):B>N?B<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(B),n=I/s,r=z/s):N<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(N),n=F/r,s=z/r),this.set(n,s,r,e),this}let w=Math.sqrt((E-b)*(E-b)+(g-T)*(g-T)+(v-m)*(v-m));return Math.abs(w)<.001&&(w=1),this.x=(E-b)/w,this.y=(g-T)/w,this.z=(v-m)/w,this.w=Math.acos((f+_+S-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=nn(this.x,t.x,e.x),this.y=nn(this.y,t.y,e.y),this.z=nn(this.z,t.z,e.z),this.w=nn(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=nn(this.x,t,e),this.y=nn(this.y,t,e),this.z=nn(this.z,t,e),this.w=nn(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class tM extends qo{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=n.depth?n.depth:1,this.scissor=new On(0,0,t,e),this.scissorTest=!1,this.viewport=new On(0,0,t,e);const s={width:t,height:e,depth:this.depth};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ni,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},n);const r=new wi(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let l=0;l<a;l++)this.textures[l]=r.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=t,this.textures[s].image.height=e,this.textures[s].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const s=Object.assign({},t.textures[e].image);this.textures[e].source=new jd(s)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ds extends tM{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class Tx extends wi{constructor(t=null,e=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:s},this.magFilter=os,this.minFilter=os,this.wrapR=Ho,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Xz extends Ds{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Tx(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class eM extends wi{constructor(t=null,e=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:s},this.magFilter=os,this.minFilter=os,this.wrapR=Ho,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class qz extends Ds{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new eM(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class Br{constructor(t=0,e=0,n=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=s}static slerpFlat(t,e,n,s,r,a,l){let u=n[s+0],f=n[s+1],m=n[s+2],g=n[s+3];const v=r[a+0],_=r[a+1],b=r[a+2],T=r[a+3];if(l===0){t[e+0]=u,t[e+1]=f,t[e+2]=m,t[e+3]=g;return}if(l===1){t[e+0]=v,t[e+1]=_,t[e+2]=b,t[e+3]=T;return}if(g!==T||u!==v||f!==_||m!==b){let E=1-l;const S=u*v+f*_+m*b+g*T,w=S>=0?1:-1,D=1-S*S;if(D>Number.EPSILON){const N=Math.sqrt(D),I=Math.atan2(N,S*w);E=Math.sin(E*I)/N,l=Math.sin(l*I)/N}const B=l*w;if(u=u*E+v*B,f=f*E+_*B,m=m*E+b*B,g=g*E+T*B,E===1-l){const N=1/Math.sqrt(u*u+f*f+m*m+g*g);u*=N,f*=N,m*=N,g*=N}}t[e]=u,t[e+1]=f,t[e+2]=m,t[e+3]=g}static multiplyQuaternionsFlat(t,e,n,s,r,a){const l=n[s],u=n[s+1],f=n[s+2],m=n[s+3],g=r[a],v=r[a+1],_=r[a+2],b=r[a+3];return t[e]=l*b+m*g+u*_-f*v,t[e+1]=u*b+m*v+f*g-l*_,t[e+2]=f*b+m*_+l*v-u*g,t[e+3]=m*b-l*g-u*v-f*_,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,s){return this._x=t,this._y=e,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,s=t._y,r=t._z,a=t._order,l=Math.cos,u=Math.sin,f=l(n/2),m=l(s/2),g=l(r/2),v=u(n/2),_=u(s/2),b=u(r/2);switch(a){case"XYZ":this._x=v*m*g+f*_*b,this._y=f*_*g-v*m*b,this._z=f*m*b+v*_*g,this._w=f*m*g-v*_*b;break;case"YXZ":this._x=v*m*g+f*_*b,this._y=f*_*g-v*m*b,this._z=f*m*b-v*_*g,this._w=f*m*g+v*_*b;break;case"ZXY":this._x=v*m*g-f*_*b,this._y=f*_*g+v*m*b,this._z=f*m*b+v*_*g,this._w=f*m*g-v*_*b;break;case"ZYX":this._x=v*m*g-f*_*b,this._y=f*_*g+v*m*b,this._z=f*m*b-v*_*g,this._w=f*m*g+v*_*b;break;case"YZX":this._x=v*m*g+f*_*b,this._y=f*_*g+v*m*b,this._z=f*m*b-v*_*g,this._w=f*m*g-v*_*b;break;case"XZY":this._x=v*m*g-f*_*b,this._y=f*_*g-v*m*b,this._z=f*m*b+v*_*g,this._w=f*m*g+v*_*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,s=Math.sin(n);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],s=e[4],r=e[8],a=e[1],l=e[5],u=e[9],f=e[2],m=e[6],g=e[10],v=n+l+g;if(v>0){const _=.5/Math.sqrt(v+1);this._w=.25/_,this._x=(m-u)*_,this._y=(r-f)*_,this._z=(a-s)*_}else if(n>l&&n>g){const _=2*Math.sqrt(1+n-l-g);this._w=(m-u)/_,this._x=.25*_,this._y=(s+a)/_,this._z=(r+f)/_}else if(l>g){const _=2*Math.sqrt(1+l-n-g);this._w=(r-f)/_,this._x=(s+a)/_,this._y=.25*_,this._z=(u+m)/_}else{const _=2*Math.sqrt(1+g-n-l);this._w=(a-s)/_,this._x=(r+f)/_,this._y=(u+m)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(nn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const s=Math.min(1,e/n);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,s=t._y,r=t._z,a=t._w,l=e._x,u=e._y,f=e._z,m=e._w;return this._x=n*m+a*l+s*f-r*u,this._y=s*m+a*u+r*l-n*f,this._z=r*m+a*f+n*u-s*l,this._w=a*m-n*l-s*u-r*f,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,s=this._y,r=this._z,a=this._w;let l=a*t._w+n*t._x+s*t._y+r*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=a,this._x=n,this._y=s,this._z=r,this;const u=1-l*l;if(u<=Number.EPSILON){const _=1-e;return this._w=_*a+e*this._w,this._x=_*n+e*this._x,this._y=_*s+e*this._y,this._z=_*r+e*this._z,this.normalize(),this}const f=Math.sqrt(u),m=Math.atan2(f,l),g=Math.sin((1-e)*m)/f,v=Math.sin(e*m)/f;return this._w=a*g+this._w*v,this._x=n*g+this._x*v,this._y=s*g+this._y*v,this._z=r*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(t),s*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class et{constructor(t=0,e=0,n=0){et.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(n6.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(n6.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*s,this.y=r[1]*e+r[4]*n+r[7]*s,this.z=r[2]*e+r[5]*n+r[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,s=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*s+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*s+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*s+r[14])*a,this}applyQuaternion(t){const e=this.x,n=this.y,s=this.z,r=t.x,a=t.y,l=t.z,u=t.w,f=2*(a*s-l*n),m=2*(l*e-r*s),g=2*(r*n-a*e);return this.x=e+u*f+a*g-l*m,this.y=n+u*m+l*f-r*g,this.z=s+u*g+r*m-a*f,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*s,this.y=r[1]*e+r[5]*n+r[9]*s,this.z=r[2]*e+r[6]*n+r[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=nn(this.x,t.x,e.x),this.y=nn(this.y,t.y,e.y),this.z=nn(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=nn(this.x,t,e),this.y=nn(this.y,t,e),this.z=nn(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,s=t.y,r=t.z,a=e.x,l=e.y,u=e.z;return this.x=s*u-r*l,this.y=r*a-n*u,this.z=n*l-s*a,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return jT.copy(this).projectOnVector(t),this.sub(jT)}reflect(t){return this.sub(jT.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(nn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,s=this.z-t.z;return e*e+n*n+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const s=Math.sin(e)*t;return this.x=s*Math.sin(n),this.y=Math.cos(e)*t,this.z=s*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const jT=new et,n6=new Br;class Or{constructor(t=new et(1/0,1/0,1/0),e=new et(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(sc.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(sc.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=sc.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const r=n.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let a=0,l=r.count;a<l;a++)t.isMesh===!0?t.getVertexPosition(a,sc):sc.fromBufferAttribute(r,a),sc.applyMatrix4(t.matrixWorld),this.expandByPoint(sc);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),_S.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),_S.copy(n.boundingBox)),_S.applyMatrix4(t.matrixWorld),this.union(_S)}const s=t.children;for(let r=0,a=s.length;r<a;r++)this.expandByObject(s[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,sc),sc.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Q2),AS.subVectors(this.max,Q2),p1.subVectors(t.a,Q2),m1.subVectors(t.b,Q2),g1.subVectors(t.c,Q2),nd.subVectors(m1,p1),id.subVectors(g1,m1),rm.subVectors(p1,g1);let e=[0,-nd.z,nd.y,0,-id.z,id.y,0,-rm.z,rm.y,nd.z,0,-nd.x,id.z,0,-id.x,rm.z,0,-rm.x,-nd.y,nd.x,0,-id.y,id.x,0,-rm.y,rm.x,0];return!XT(e,p1,m1,g1,AS)||(e=[1,0,0,0,1,0,0,0,1],!XT(e,p1,m1,g1,AS))?!1:(xS.crossVectors(nd,id),e=[xS.x,xS.y,xS.z],XT(e,p1,m1,g1,AS))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,sc).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(sc).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(ch[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ch[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ch[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ch[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ch[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ch[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ch[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ch[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ch),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const ch=[new et,new et,new et,new et,new et,new et,new et,new et],sc=new et,_S=new Or,p1=new et,m1=new et,g1=new et,nd=new et,id=new et,rm=new et,Q2=new et,AS=new et,xS=new et,am=new et;function XT(i,t,e,n,s){for(let r=0,a=i.length-3;r<=a;r+=3){am.fromArray(i,r);const l=s.x*Math.abs(am.x)+s.y*Math.abs(am.y)+s.z*Math.abs(am.z),u=t.dot(am),f=e.dot(am),m=n.dot(am);if(Math.max(-Math.max(u,f,m),Math.min(u,f,m))>l)return!1}return!0}const Yz=new Or,j2=new et,qT=new et;class pr{constructor(t=new et,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):Yz.setFromPoints(t).getCenter(n);let s=0;for(let r=0,a=t.length;r<a;r++)s=Math.max(s,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;j2.subVectors(t,this.center);const e=j2.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),s=(n-this.radius)*.5;this.center.addScaledVector(j2,s/n),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(qT.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(j2.copy(t.center).add(qT)),this.expandByPoint(j2.copy(t.center).sub(qT))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const uh=new et,YT=new et,bS=new et,sd=new et,WT=new et,SS=new et,KT=new et;class by{constructor(t=new et,e=new et(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,uh)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=uh.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(uh.copy(this.origin).addScaledVector(this.direction,e),uh.distanceToSquared(t))}distanceSqToSegment(t,e,n,s){YT.copy(t).add(e).multiplyScalar(.5),bS.copy(e).sub(t).normalize(),sd.copy(this.origin).sub(YT);const r=t.distanceTo(e)*.5,a=-this.direction.dot(bS),l=sd.dot(this.direction),u=-sd.dot(bS),f=sd.lengthSq(),m=Math.abs(1-a*a);let g,v,_,b;if(m>0)if(g=a*u-l,v=a*l-u,b=r*m,g>=0)if(v>=-b)if(v<=b){const T=1/m;g*=T,v*=T,_=g*(g+a*v+2*l)+v*(a*g+v+2*u)+f}else v=r,g=Math.max(0,-(a*v+l)),_=-g*g+v*(v+2*u)+f;else v=-r,g=Math.max(0,-(a*v+l)),_=-g*g+v*(v+2*u)+f;else v<=-b?(g=Math.max(0,-(-a*r+l)),v=g>0?-r:Math.min(Math.max(-r,-u),r),_=-g*g+v*(v+2*u)+f):v<=b?(g=0,v=Math.min(Math.max(-r,-u),r),_=v*(v+2*u)+f):(g=Math.max(0,-(a*r+l)),v=g>0?r:Math.min(Math.max(-r,-u),r),_=-g*g+v*(v+2*u)+f);else v=a>0?-r:r,g=Math.max(0,-(a*v+l)),_=-g*g+v*(v+2*u)+f;return n&&n.copy(this.origin).addScaledVector(this.direction,g),s&&s.copy(YT).addScaledVector(bS,v),_}intersectSphere(t,e){uh.subVectors(t.center,this.origin);const n=uh.dot(this.direction),s=uh.dot(uh)-n*n,r=t.radius*t.radius;if(s>r)return null;const a=Math.sqrt(r-s),l=n-a,u=n+a;return u<0?null:l<0?this.at(u,e):this.at(l,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,s,r,a,l,u;const f=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,v=this.origin;return f>=0?(n=(t.min.x-v.x)*f,s=(t.max.x-v.x)*f):(n=(t.max.x-v.x)*f,s=(t.min.x-v.x)*f),m>=0?(r=(t.min.y-v.y)*m,a=(t.max.y-v.y)*m):(r=(t.max.y-v.y)*m,a=(t.min.y-v.y)*m),n>a||r>s||((r>n||isNaN(n))&&(n=r),(a<s||isNaN(s))&&(s=a),g>=0?(l=(t.min.z-v.z)*g,u=(t.max.z-v.z)*g):(l=(t.max.z-v.z)*g,u=(t.min.z-v.z)*g),n>u||l>s)||((l>n||n!==n)&&(n=l),(u<s||s!==s)&&(s=u),s<0)?null:this.at(n>=0?n:s,e)}intersectsBox(t){return this.intersectBox(t,uh)!==null}intersectTriangle(t,e,n,s,r){WT.subVectors(e,t),SS.subVectors(n,t),KT.crossVectors(WT,SS);let a=this.direction.dot(KT),l;if(a>0){if(s)return null;l=1}else if(a<0)l=-1,a=-a;else return null;sd.subVectors(this.origin,t);const u=l*this.direction.dot(SS.crossVectors(sd,SS));if(u<0)return null;const f=l*this.direction.dot(WT.cross(sd));if(f<0||u+f>a)return null;const m=-l*sd.dot(KT);return m<0?null:this.at(m/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ne{constructor(t,e,n,s,r,a,l,u,f,m,g,v,_,b,T,E){Ne.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,s,r,a,l,u,f,m,g,v,_,b,T,E)}set(t,e,n,s,r,a,l,u,f,m,g,v,_,b,T,E){const S=this.elements;return S[0]=t,S[4]=e,S[8]=n,S[12]=s,S[1]=r,S[5]=a,S[9]=l,S[13]=u,S[2]=f,S[6]=m,S[10]=g,S[14]=v,S[3]=_,S[7]=b,S[11]=T,S[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ne().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,s=1/v1.setFromMatrixColumn(t,0).length(),r=1/v1.setFromMatrixColumn(t,1).length(),a=1/v1.setFromMatrixColumn(t,2).length();return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,s=t.y,r=t.z,a=Math.cos(n),l=Math.sin(n),u=Math.cos(s),f=Math.sin(s),m=Math.cos(r),g=Math.sin(r);if(t.order==="XYZ"){const v=a*m,_=a*g,b=l*m,T=l*g;e[0]=u*m,e[4]=-u*g,e[8]=f,e[1]=_+b*f,e[5]=v-T*f,e[9]=-l*u,e[2]=T-v*f,e[6]=b+_*f,e[10]=a*u}else if(t.order==="YXZ"){const v=u*m,_=u*g,b=f*m,T=f*g;e[0]=v+T*l,e[4]=b*l-_,e[8]=a*f,e[1]=a*g,e[5]=a*m,e[9]=-l,e[2]=_*l-b,e[6]=T+v*l,e[10]=a*u}else if(t.order==="ZXY"){const v=u*m,_=u*g,b=f*m,T=f*g;e[0]=v-T*l,e[4]=-a*g,e[8]=b+_*l,e[1]=_+b*l,e[5]=a*m,e[9]=T-v*l,e[2]=-a*f,e[6]=l,e[10]=a*u}else if(t.order==="ZYX"){const v=a*m,_=a*g,b=l*m,T=l*g;e[0]=u*m,e[4]=b*f-_,e[8]=v*f+T,e[1]=u*g,e[5]=T*f+v,e[9]=_*f-b,e[2]=-f,e[6]=l*u,e[10]=a*u}else if(t.order==="YZX"){const v=a*u,_=a*f,b=l*u,T=l*f;e[0]=u*m,e[4]=T-v*g,e[8]=b*g+_,e[1]=g,e[5]=a*m,e[9]=-l*m,e[2]=-f*m,e[6]=_*g+b,e[10]=v-T*g}else if(t.order==="XZY"){const v=a*u,_=a*f,b=l*u,T=l*f;e[0]=u*m,e[4]=-g,e[8]=f*m,e[1]=v*g+T,e[5]=a*m,e[9]=_*g-b,e[2]=b*g-_,e[6]=l*m,e[10]=T*g+v}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Wz,t,Kz)}lookAt(t,e,n){const s=this.elements;return Mo.subVectors(t,e),Mo.lengthSq()===0&&(Mo.z=1),Mo.normalize(),rd.crossVectors(n,Mo),rd.lengthSq()===0&&(Math.abs(n.z)===1?Mo.x+=1e-4:Mo.z+=1e-4,Mo.normalize(),rd.crossVectors(n,Mo)),rd.normalize(),ES.crossVectors(Mo,rd),s[0]=rd.x,s[4]=ES.x,s[8]=Mo.x,s[1]=rd.y,s[5]=ES.y,s[9]=Mo.y,s[2]=rd.z,s[6]=ES.z,s[10]=Mo.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,r=this.elements,a=n[0],l=n[4],u=n[8],f=n[12],m=n[1],g=n[5],v=n[9],_=n[13],b=n[2],T=n[6],E=n[10],S=n[14],w=n[3],D=n[7],B=n[11],N=n[15],I=s[0],F=s[4],z=s[8],U=s[12],P=s[1],X=s[5],lt=s[9],it=s[13],ut=s[2],dt=s[6],j=s[10],tt=s[14],nt=s[3],_t=s[7],J=s[11],ot=s[15];return r[0]=a*I+l*P+u*ut+f*nt,r[4]=a*F+l*X+u*dt+f*_t,r[8]=a*z+l*lt+u*j+f*J,r[12]=a*U+l*it+u*tt+f*ot,r[1]=m*I+g*P+v*ut+_*nt,r[5]=m*F+g*X+v*dt+_*_t,r[9]=m*z+g*lt+v*j+_*J,r[13]=m*U+g*it+v*tt+_*ot,r[2]=b*I+T*P+E*ut+S*nt,r[6]=b*F+T*X+E*dt+S*_t,r[10]=b*z+T*lt+E*j+S*J,r[14]=b*U+T*it+E*tt+S*ot,r[3]=w*I+D*P+B*ut+N*nt,r[7]=w*F+D*X+B*dt+N*_t,r[11]=w*z+D*lt+B*j+N*J,r[15]=w*U+D*it+B*tt+N*ot,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],s=t[8],r=t[12],a=t[1],l=t[5],u=t[9],f=t[13],m=t[2],g=t[6],v=t[10],_=t[14],b=t[3],T=t[7],E=t[11],S=t[15];return b*(+r*u*g-s*f*g-r*l*v+n*f*v+s*l*_-n*u*_)+T*(+e*u*_-e*f*v+r*a*v-s*a*_+s*f*m-r*u*m)+E*(+e*f*g-e*l*_-r*a*g+n*a*_+r*l*m-n*f*m)+S*(-s*l*m-e*u*g+e*l*v+s*a*g-n*a*v+n*u*m)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],l=t[5],u=t[6],f=t[7],m=t[8],g=t[9],v=t[10],_=t[11],b=t[12],T=t[13],E=t[14],S=t[15],w=g*E*f-T*v*f+T*u*_-l*E*_-g*u*S+l*v*S,D=b*v*f-m*E*f-b*u*_+a*E*_+m*u*S-a*v*S,B=m*T*f-b*g*f+b*l*_-a*T*_-m*l*S+a*g*S,N=b*g*u-m*T*u-b*l*v+a*T*v+m*l*E-a*g*E,I=e*w+n*D+s*B+r*N;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/I;return t[0]=w*F,t[1]=(T*v*r-g*E*r-T*s*_+n*E*_+g*s*S-n*v*S)*F,t[2]=(l*E*r-T*u*r+T*s*f-n*E*f-l*s*S+n*u*S)*F,t[3]=(g*u*r-l*v*r-g*s*f+n*v*f+l*s*_-n*u*_)*F,t[4]=D*F,t[5]=(m*E*r-b*v*r+b*s*_-e*E*_-m*s*S+e*v*S)*F,t[6]=(b*u*r-a*E*r-b*s*f+e*E*f+a*s*S-e*u*S)*F,t[7]=(a*v*r-m*u*r+m*s*f-e*v*f-a*s*_+e*u*_)*F,t[8]=B*F,t[9]=(b*g*r-m*T*r-b*n*_+e*T*_+m*n*S-e*g*S)*F,t[10]=(a*T*r-b*l*r+b*n*f-e*T*f-a*n*S+e*l*S)*F,t[11]=(m*l*r-a*g*r-m*n*f+e*g*f+a*n*_-e*l*_)*F,t[12]=N*F,t[13]=(m*T*s-b*g*s+b*n*v-e*T*v-m*n*E+e*g*E)*F,t[14]=(b*l*s-a*T*s-b*n*u+e*T*u+a*n*E-e*l*E)*F,t[15]=(a*g*s-m*l*s+m*n*u-e*g*u-a*n*v+e*l*v)*F,this}scale(t){const e=this.elements,n=t.x,s=t.y,r=t.z;return e[0]*=n,e[4]*=s,e[8]*=r,e[1]*=n,e[5]*=s,e[9]*=r,e[2]*=n,e[6]*=s,e[10]*=r,e[3]*=n,e[7]*=s,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,s))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),s=Math.sin(e),r=1-n,a=t.x,l=t.y,u=t.z,f=r*a,m=r*l;return this.set(f*a+n,f*l-s*u,f*u+s*l,0,f*l+s*u,m*l+n,m*u-s*a,0,f*u-s*l,m*u+s*a,r*u*u+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,s,r,a){return this.set(1,n,r,0,t,1,a,0,e,s,1,0,0,0,0,1),this}compose(t,e,n){const s=this.elements,r=e._x,a=e._y,l=e._z,u=e._w,f=r+r,m=a+a,g=l+l,v=r*f,_=r*m,b=r*g,T=a*m,E=a*g,S=l*g,w=u*f,D=u*m,B=u*g,N=n.x,I=n.y,F=n.z;return s[0]=(1-(T+S))*N,s[1]=(_+B)*N,s[2]=(b-D)*N,s[3]=0,s[4]=(_-B)*I,s[5]=(1-(v+S))*I,s[6]=(E+w)*I,s[7]=0,s[8]=(b+D)*F,s[9]=(E-w)*F,s[10]=(1-(v+T))*F,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,n){const s=this.elements;let r=v1.set(s[0],s[1],s[2]).length();const a=v1.set(s[4],s[5],s[6]).length(),l=v1.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),t.x=s[12],t.y=s[13],t.z=s[14],rc.copy(this);const f=1/r,m=1/a,g=1/l;return rc.elements[0]*=f,rc.elements[1]*=f,rc.elements[2]*=f,rc.elements[4]*=m,rc.elements[5]*=m,rc.elements[6]*=m,rc.elements[8]*=g,rc.elements[9]*=g,rc.elements[10]*=g,e.setFromRotationMatrix(rc),n.x=r,n.y=a,n.z=l,this}makePerspective(t,e,n,s,r,a,l=Cl){const u=this.elements,f=2*r/(e-t),m=2*r/(n-s),g=(e+t)/(e-t),v=(n+s)/(n-s);let _,b;if(l===Cl)_=-(a+r)/(a-r),b=-2*a*r/(a-r);else if(l===J_)_=-a/(a-r),b=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=f,u[4]=0,u[8]=g,u[12]=0,u[1]=0,u[5]=m,u[9]=v,u[13]=0,u[2]=0,u[6]=0,u[10]=_,u[14]=b,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(t,e,n,s,r,a,l=Cl){const u=this.elements,f=1/(e-t),m=1/(n-s),g=1/(a-r),v=(e+t)*f,_=(n+s)*m;let b,T;if(l===Cl)b=(a+r)*g,T=-2*g;else if(l===J_)b=r*g,T=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*f,u[4]=0,u[8]=0,u[12]=-v,u[1]=0,u[5]=2*m,u[9]=0,u[13]=-_,u[2]=0,u[6]=0,u[10]=T,u[14]=-b,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<16;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const v1=new et,rc=new Ne,Wz=new et(0,0,0),Kz=new et(1,1,1),rd=new et,ES=new et,Mo=new et,i6=new Ne,s6=new Br;class Vo{constructor(t=0,e=0,n=0,s=Vo.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,s=this._order){return this._x=t,this._y=e,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const s=t.elements,r=s[0],a=s[4],l=s[8],u=s[1],f=s[5],m=s[9],g=s[2],v=s[6],_=s[10];switch(e){case"XYZ":this._y=Math.asin(nn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-m,_),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-nn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-g,r),this._z=0);break;case"ZXY":this._x=Math.asin(nn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(u,r));break;case"ZYX":this._y=Math.asin(-nn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,_),this._z=Math.atan2(u,r)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(nn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,f),this._y=Math.atan2(-g,r)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-nn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(l,r)):(this._x=Math.atan2(-m,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return i6.makeRotationFromQuaternion(t),this.setFromRotationMatrix(i6,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return s6.setFromEuler(this),this.setFromQuaternion(s6,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Vo.DEFAULT_ORDER="XYZ";class dy{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Jz=0;const r6=new et,y1=new Br,hh=new Ne,MS=new et,X2=new et,Zz=new et,$z=new Br,a6=new et(1,0,0),o6=new et(0,1,0),l6=new et(0,0,1),c6={type:"added"},tG={type:"removed"},_1={type:"childadded",child:null},JT={type:"childremoved",child:null};class Ln extends qo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Jz++}),this.uuid=Go(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ln.DEFAULT_UP.clone();const t=new et,e=new Vo,n=new Br,s=new et(1,1,1);function r(){n.setFromEuler(e,!1)}function a(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ne},normalMatrix:{value:new on}}),this.matrix=new Ne,this.matrixWorld=new Ne,this.matrixAutoUpdate=Ln.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new dy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return y1.setFromAxisAngle(t,e),this.quaternion.multiply(y1),this}rotateOnWorldAxis(t,e){return y1.setFromAxisAngle(t,e),this.quaternion.premultiply(y1),this}rotateX(t){return this.rotateOnAxis(a6,t)}rotateY(t){return this.rotateOnAxis(o6,t)}rotateZ(t){return this.rotateOnAxis(l6,t)}translateOnAxis(t,e){return r6.copy(t).applyQuaternion(this.quaternion),this.position.add(r6.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(a6,t)}translateY(t){return this.translateOnAxis(o6,t)}translateZ(t){return this.translateOnAxis(l6,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(hh.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?MS.copy(t):MS.set(t,e,n);const s=this.parent;this.updateWorldMatrix(!0,!1),X2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?hh.lookAt(X2,MS,this.up):hh.lookAt(MS,X2,this.up),this.quaternion.setFromRotationMatrix(hh),s&&(hh.extractRotation(s.matrixWorld),y1.setFromRotationMatrix(hh),this.quaternion.premultiply(y1.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(c6),_1.child=t,this.dispatchEvent(_1),_1.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(tG),JT.child=t,this.dispatchEvent(JT),JT.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),hh.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),hh.multiply(t.parent.matrixWorld)),t.applyMatrix4(hh),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(c6),_1.child=t,this.dispatchEvent(_1),_1.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,s=this.children.length;n<s;n++){const a=this.children[n].getObjectByProperty(t,e);if(a!==void 0)return a}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(X2,t,Zz),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(X2,$z,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),s.instanceInfo=this._instanceInfo.map(l=>({...l})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(t),s.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function r(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(t)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(t.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let f=0,m=u.length;f<m;f++){const g=u[f];r(t.shapes,g)}else r(t.shapes,u)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(r(t.materials,this.material[u]));s.material=l}else s.material=r(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];s.animations.push(r(t.animations,u))}}if(e){const l=a(t.geometries),u=a(t.materials),f=a(t.textures),m=a(t.images),g=a(t.shapes),v=a(t.skeletons),_=a(t.animations),b=a(t.nodes);l.length>0&&(n.geometries=l),u.length>0&&(n.materials=u),f.length>0&&(n.textures=f),m.length>0&&(n.images=m),g.length>0&&(n.shapes=g),v.length>0&&(n.skeletons=v),_.length>0&&(n.animations=_),b.length>0&&(n.nodes=b)}return n.object=s,n;function a(l){const u=[];for(const f in l){const m=l[f];delete m.metadata,u.push(m)}return u}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const s=t.children[n];this.add(s.clone())}return this}}Ln.DEFAULT_UP=new et(0,1,0);Ln.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ac=new et,fh=new et,ZT=new et,dh=new et,A1=new et,x1=new et,u6=new et,$T=new et,t8=new et,e8=new et,n8=new On,i8=new On,s8=new On;class so{constructor(t=new et,e=new et,n=new et){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,s){s.subVectors(n,e),ac.subVectors(t,e),s.cross(ac);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(t,e,n,s,r){ac.subVectors(s,e),fh.subVectors(n,e),ZT.subVectors(t,e);const a=ac.dot(ac),l=ac.dot(fh),u=ac.dot(ZT),f=fh.dot(fh),m=fh.dot(ZT),g=a*f-l*l;if(g===0)return r.set(0,0,0),null;const v=1/g,_=(f*u-l*m)*v,b=(a*m-l*u)*v;return r.set(1-_-b,b,_)}static containsPoint(t,e,n,s){return this.getBarycoord(t,e,n,s,dh)===null?!1:dh.x>=0&&dh.y>=0&&dh.x+dh.y<=1}static getInterpolation(t,e,n,s,r,a,l,u){return this.getBarycoord(t,e,n,s,dh)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(r,dh.x),u.addScaledVector(a,dh.y),u.addScaledVector(l,dh.z),u)}static getInterpolatedAttribute(t,e,n,s,r,a){return n8.setScalar(0),i8.setScalar(0),s8.setScalar(0),n8.fromBufferAttribute(t,e),i8.fromBufferAttribute(t,n),s8.fromBufferAttribute(t,s),a.setScalar(0),a.addScaledVector(n8,r.x),a.addScaledVector(i8,r.y),a.addScaledVector(s8,r.z),a}static isFrontFacing(t,e,n,s){return ac.subVectors(n,e),fh.subVectors(t,e),ac.cross(fh).dot(s)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,s){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,e,n,s){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ac.subVectors(this.c,this.b),fh.subVectors(this.a,this.b),ac.cross(fh).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return so.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return so.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,s,r){return so.getInterpolation(t,this.a,this.b,this.c,e,n,s,r)}containsPoint(t){return so.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return so.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,s=this.b,r=this.c;let a,l;A1.subVectors(s,n),x1.subVectors(r,n),$T.subVectors(t,n);const u=A1.dot($T),f=x1.dot($T);if(u<=0&&f<=0)return e.copy(n);t8.subVectors(t,s);const m=A1.dot(t8),g=x1.dot(t8);if(m>=0&&g<=m)return e.copy(s);const v=u*g-m*f;if(v<=0&&u>=0&&m<=0)return a=u/(u-m),e.copy(n).addScaledVector(A1,a);e8.subVectors(t,r);const _=A1.dot(e8),b=x1.dot(e8);if(b>=0&&_<=b)return e.copy(r);const T=_*f-u*b;if(T<=0&&f>=0&&b<=0)return l=f/(f-b),e.copy(n).addScaledVector(x1,l);const E=m*b-_*g;if(E<=0&&g-m>=0&&_-b>=0)return u6.subVectors(r,s),l=(g-m)/(g-m+(_-b)),e.copy(s).addScaledVector(u6,l);const S=1/(E+T+v);return a=T*S,l=v*S,e.copy(n).addScaledVector(A1,a).addScaledVector(x1,l)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const IB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ad={h:0,s:0,l:0},TS={h:0,s:0,l:0};function r8(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*6*(2/3-e):i}class oe{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){const s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Kn){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Fn.toWorkingColorSpace(this,e),this}setRGB(t,e,n,s=Fn.workingColorSpace){return this.r=t,this.g=e,this.b=n,Fn.toWorkingColorSpace(this,s),this}setHSL(t,e,n,s=Fn.workingColorSpace){if(t=Pw(t,1),e=nn(e,0,1),n=nn(n,0,1),e===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,a=2*n-r;this.r=r8(a,r,t+1/3),this.g=r8(a,r,t),this.b=r8(a,r,t-1/3)}return Fn.toWorkingColorSpace(this,s),this}setStyle(t,e=Kn){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const a=s[1],l=s[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=s[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(a===6)return this.setHex(parseInt(r,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Kn){const n=IB[t.toLowerCase()];return n!==void 0?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Jh(t.r),this.g=Jh(t.g),this.b=Jh(t.b),this}copyLinearToSRGB(t){return this.r=J1(t.r),this.g=J1(t.g),this.b=J1(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Kn){return Fn.fromWorkingColorSpace(qr.copy(this),t),Math.round(nn(qr.r*255,0,255))*65536+Math.round(nn(qr.g*255,0,255))*256+Math.round(nn(qr.b*255,0,255))}getHexString(t=Kn){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Fn.workingColorSpace){Fn.fromWorkingColorSpace(qr.copy(this),e);const n=qr.r,s=qr.g,r=qr.b,a=Math.max(n,s,r),l=Math.min(n,s,r);let u,f;const m=(l+a)/2;if(l===a)u=0,f=0;else{const g=a-l;switch(f=m<=.5?g/(a+l):g/(2-a-l),a){case n:u=(s-r)/g+(s<r?6:0);break;case s:u=(r-n)/g+2;break;case r:u=(n-s)/g+4;break}u/=6}return t.h=u,t.s=f,t.l=m,t}getRGB(t,e=Fn.workingColorSpace){return Fn.fromWorkingColorSpace(qr.copy(this),e),t.r=qr.r,t.g=qr.g,t.b=qr.b,t}getStyle(t=Kn){Fn.fromWorkingColorSpace(qr.copy(this),t);const e=qr.r,n=qr.g,s=qr.b;return t!==Kn?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(t,e,n){return this.getHSL(ad),this.setHSL(ad.h+t,ad.s+e,ad.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(ad),t.getHSL(TS);const n=U_(ad.h,TS.h,e),s=U_(ad.s,TS.s,e),r=U_(ad.l,TS.l,e);return this.setHSL(n,s,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,s=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*s,this.g=r[1]*e+r[4]*n+r[7]*s,this.b=r[2]*e+r[5]*n+r[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const qr=new oe;oe.NAMES=IB;let eG=0;class gs extends qo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:eG++}),this.uuid=Go(),this.name="",this.type="Material",this.blending=Ng,this.side=Lc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=g3,this.blendDst=v3,this.blendEquation=md,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new oe(0,0,0),this.blendAlpha=0,this.depthFunc=Fg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=T5,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Am,this.stencilZFail=Am,this.stencilZPass=Am,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const s=this[e];if(s===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Ng&&(n.blending=this.blending),this.side!==Lc&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==g3&&(n.blendSrc=this.blendSrc),this.blendDst!==v3&&(n.blendDst=this.blendDst),this.blendEquation!==md&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Fg&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==T5&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Am&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Am&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Am&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const a=[];for(const l in r){const u=r[l];delete u.metadata,a.push(u)}return a}if(e){const r=s(t.textures),a=s(t.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const s=e.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class zo extends gs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=Ex,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const qh=nG();function nG(){const i=new ArrayBuffer(4),t=new Float32Array(i),e=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let u=0;u<256;++u){const f=u-127;f<-27?(n[u]=0,n[u|256]=32768,s[u]=24,s[u|256]=24):f<-14?(n[u]=1024>>-f-14,n[u|256]=1024>>-f-14|32768,s[u]=-f-1,s[u|256]=-f-1):f<=15?(n[u]=f+15<<10,n[u|256]=f+15<<10|32768,s[u]=13,s[u|256]=13):f<128?(n[u]=31744,n[u|256]=64512,s[u]=24,s[u|256]=24):(n[u]=31744,n[u|256]=64512,s[u]=13,s[u|256]=13)}const r=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let f=u<<13,m=0;for(;(f&8388608)===0;)f<<=1,m-=8388608;f&=-8388609,m+=947912704,r[u]=f|m}for(let u=1024;u<2048;++u)r[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)a[u]=u<<23;a[31]=1199570944,a[32]=2147483648;for(let u=33;u<63;++u)a[u]=2147483648+(u-32<<23);a[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:t,uint32View:e,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:a,offsetTable:l}}function Za(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=nn(i,-65504,65504),qh.floatView[0]=i;const t=qh.uint32View[0],e=t>>23&511;return qh.baseTable[e]+((t&8388607)>>qh.shiftTable[e])}function c_(i){const t=i>>10;return qh.uint32View[0]=qh.mantissaTable[qh.offsetTable[t]+(i&1023)]+qh.exponentTable[t],qh.floatView[0]}class iG{static toHalfFloat(t){return Za(t)}static fromHalfFloat(t){return c_(t)}}const Ms=new et,CS=new Pt;let sG=0;class zn{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:sG++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=K_,this.updateRanges=[],this.gpuType=Oa,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[t+s]=e.array[n+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)CS.fromBufferAttribute(this,e),CS.applyMatrix3(t),this.setXY(e,CS.x,CS.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.applyMatrix3(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.applyMatrix4(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.applyNormalMatrix(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.transformDirection(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=Da(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=cn(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Da(e,this.array)),e}setX(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Da(e,this.array)),e}setY(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Da(e,this.array)),e}setZ(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Da(e,this.array)),e}setW(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,s){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=s,this}setXYZW(t,e,n,s,r){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array),r=cn(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=s,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==K_&&(t.usage=this.usage),t}}class rG extends zn{constructor(t,e,n){super(new Int8Array(t),e,n)}}class aG extends zn{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class oG extends zn{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class lG extends zn{constructor(t,e,n){super(new Int16Array(t),e,n)}}class Fw extends zn{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class cG extends zn{constructor(t,e,n){super(new Int32Array(t),e,n)}}class Hw extends zn{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class uG extends zn{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=c_(this.array[t*this.itemSize]);return this.normalized&&(e=Da(e,this.array)),e}setX(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize]=Za(e),this}getY(t){let e=c_(this.array[t*this.itemSize+1]);return this.normalized&&(e=Da(e,this.array)),e}setY(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+1]=Za(e),this}getZ(t){let e=c_(this.array[t*this.itemSize+2]);return this.normalized&&(e=Da(e,this.array)),e}setZ(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+2]=Za(e),this}getW(t){let e=c_(this.array[t*this.itemSize+3]);return this.normalized&&(e=Da(e,this.array)),e}setW(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+3]=Za(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array)),this.array[t+0]=Za(e),this.array[t+1]=Za(n),this}setXYZ(t,e,n,s){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array)),this.array[t+0]=Za(e),this.array[t+1]=Za(n),this.array[t+2]=Za(s),this}setXYZW(t,e,n,s,r){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array),r=cn(r,this.array)),this.array[t+0]=Za(e),this.array[t+1]=Za(n),this.array[t+2]=Za(s),this.array[t+3]=Za(r),this}}class Me extends zn{constructor(t,e,n){super(new Float32Array(t),e,n)}}let hG=0;const ml=new Ne,a8=new Ln,b1=new et,To=new Or,q2=new Or,rr=new et;class $e extends qo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:hG++}),this.uuid=Go(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(BB(t)?Hw:Fw)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new on().getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return ml.makeRotationFromQuaternion(t),this.applyMatrix4(ml),this}rotateX(t){return ml.makeRotationX(t),this.applyMatrix4(ml),this}rotateY(t){return ml.makeRotationY(t),this.applyMatrix4(ml),this}rotateZ(t){return ml.makeRotationZ(t),this.applyMatrix4(ml),this}translate(t,e,n){return ml.makeTranslation(t,e,n),this.applyMatrix4(ml),this}scale(t,e,n){return ml.makeScale(t,e,n),this.applyMatrix4(ml),this}lookAt(t){return a8.lookAt(t),a8.updateMatrix(),this.applyMatrix4(a8.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(b1).negate(),this.translate(b1.x,b1.y,b1.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Me(n,3))}else{const n=Math.min(t.length,e.count);for(let s=0;s<n;s++){const r=t[s];e.setXYZ(s,r.x,r.y,r.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Or);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new et(-1/0,-1/0,-1/0),new et(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,s=e.length;n<s;n++){const r=e[n];To.setFromBufferAttribute(r),this.morphTargetsRelative?(rr.addVectors(this.boundingBox.min,To.min),this.boundingBox.expandByPoint(rr),rr.addVectors(this.boundingBox.max,To.max),this.boundingBox.expandByPoint(rr)):(this.boundingBox.expandByPoint(To.min),this.boundingBox.expandByPoint(To.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new pr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new et,1/0);return}if(t){const n=this.boundingSphere.center;if(To.setFromBufferAttribute(t),e)for(let r=0,a=e.length;r<a;r++){const l=e[r];q2.setFromBufferAttribute(l),this.morphTargetsRelative?(rr.addVectors(To.min,q2.min),To.expandByPoint(rr),rr.addVectors(To.max,q2.max),To.expandByPoint(rr)):(To.expandByPoint(q2.min),To.expandByPoint(q2.max))}To.getCenter(n);let s=0;for(let r=0,a=t.count;r<a;r++)rr.fromBufferAttribute(t,r),s=Math.max(s,n.distanceToSquared(rr));if(e)for(let r=0,a=e.length;r<a;r++){const l=e[r],u=this.morphTargetsRelative;for(let f=0,m=l.count;f<m;f++)rr.fromBufferAttribute(l,f),u&&(b1.fromBufferAttribute(t,f),rr.add(b1)),s=Math.max(s,n.distanceToSquared(rr))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.position,s=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zn(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),l=[],u=[];for(let z=0;z<n.count;z++)l[z]=new et,u[z]=new et;const f=new et,m=new et,g=new et,v=new Pt,_=new Pt,b=new Pt,T=new et,E=new et;function S(z,U,P){f.fromBufferAttribute(n,z),m.fromBufferAttribute(n,U),g.fromBufferAttribute(n,P),v.fromBufferAttribute(r,z),_.fromBufferAttribute(r,U),b.fromBufferAttribute(r,P),m.sub(f),g.sub(f),_.sub(v),b.sub(v);const X=1/(_.x*b.y-b.x*_.y);isFinite(X)&&(T.copy(m).multiplyScalar(b.y).addScaledVector(g,-_.y).multiplyScalar(X),E.copy(g).multiplyScalar(_.x).addScaledVector(m,-b.x).multiplyScalar(X),l[z].add(T),l[U].add(T),l[P].add(T),u[z].add(E),u[U].add(E),u[P].add(E))}let w=this.groups;w.length===0&&(w=[{start:0,count:t.count}]);for(let z=0,U=w.length;z<U;++z){const P=w[z],X=P.start,lt=P.count;for(let it=X,ut=X+lt;it<ut;it+=3)S(t.getX(it+0),t.getX(it+1),t.getX(it+2))}const D=new et,B=new et,N=new et,I=new et;function F(z){N.fromBufferAttribute(s,z),I.copy(N);const U=l[z];D.copy(U),D.sub(N.multiplyScalar(N.dot(U))).normalize(),B.crossVectors(I,U);const X=B.dot(u[z])<0?-1:1;a.setXYZW(z,D.x,D.y,D.z,X)}for(let z=0,U=w.length;z<U;++z){const P=w[z],X=P.start,lt=P.count;for(let it=X,ut=X+lt;it<ut;it+=3)F(t.getX(it+0)),F(t.getX(it+1)),F(t.getX(it+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new zn(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let v=0,_=n.count;v<_;v++)n.setXYZ(v,0,0,0);const s=new et,r=new et,a=new et,l=new et,u=new et,f=new et,m=new et,g=new et;if(t)for(let v=0,_=t.count;v<_;v+=3){const b=t.getX(v+0),T=t.getX(v+1),E=t.getX(v+2);s.fromBufferAttribute(e,b),r.fromBufferAttribute(e,T),a.fromBufferAttribute(e,E),m.subVectors(a,r),g.subVectors(s,r),m.cross(g),l.fromBufferAttribute(n,b),u.fromBufferAttribute(n,T),f.fromBufferAttribute(n,E),l.add(m),u.add(m),f.add(m),n.setXYZ(b,l.x,l.y,l.z),n.setXYZ(T,u.x,u.y,u.z),n.setXYZ(E,f.x,f.y,f.z)}else for(let v=0,_=e.count;v<_;v+=3)s.fromBufferAttribute(e,v+0),r.fromBufferAttribute(e,v+1),a.fromBufferAttribute(e,v+2),m.subVectors(a,r),g.subVectors(s,r),m.cross(g),n.setXYZ(v+0,m.x,m.y,m.z),n.setXYZ(v+1,m.x,m.y,m.z),n.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)rr.fromBufferAttribute(t,e),rr.normalize(),t.setXYZ(e,rr.x,rr.y,rr.z)}toNonIndexed(){function t(l,u){const f=l.array,m=l.itemSize,g=l.normalized,v=new f.constructor(u.length*m);let _=0,b=0;for(let T=0,E=u.length;T<E;T++){l.isInterleavedBufferAttribute?_=u[T]*l.data.stride+l.offset:_=u[T]*m;for(let S=0;S<m;S++)v[b++]=f[_++]}return new zn(v,m,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new $e,n=this.index.array,s=this.attributes;for(const l in s){const u=s[l],f=t(u,n);e.setAttribute(l,f)}const r=this.morphAttributes;for(const l in r){const u=[],f=r[l];for(let m=0,g=f.length;m<g;m++){const v=f[m],_=t(v,n);u.push(_)}e.morphAttributes[l]=u}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,u=a.length;l<u;l++){const f=a[l];e.addGroup(f.start,f.count,f.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(t[f]=u[f]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const u in n){const f=n[u];t.data.attributes[u]=f.toJSON(t.data)}const s={};let r=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],m=[];for(let g=0,v=f.length;g<v;g++){const _=f[g];m.push(_.toJSON(t.data))}m.length>0&&(s[u]=m,r=!0)}r&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone());const s=t.attributes;for(const f in s){const m=s[f];this.setAttribute(f,m.clone(e))}const r=t.morphAttributes;for(const f in r){const m=[],g=r[f];for(let v=0,_=g.length;v<_;v++)m.push(g[v].clone(e));this.morphAttributes[f]=m}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let f=0,m=a.length;f<m;f++){const g=a[f];this.addGroup(g.start,g.count,g.materialIndex)}const l=t.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=t.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const h6=new Ne,om=new by,wS=new pr,f6=new et,RS=new et,LS=new et,DS=new et,o8=new et,BS=new et,d6=new et,OS=new et;class as extends Ln{constructor(t=new $e,e=new zo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}getVertexPosition(t,e){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;e.fromBufferAttribute(s,t);const l=this.morphTargetInfluences;if(r&&l){BS.set(0,0,0);for(let u=0,f=r.length;u<f;u++){const m=l[u],g=r[u];m!==0&&(o8.fromBufferAttribute(g,t),a?BS.addScaledVector(o8,m):BS.addScaledVector(o8.sub(e),m))}e.add(BS)}return e}raycast(t,e){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),wS.copy(n.boundingSphere),wS.applyMatrix4(r),om.copy(t.ray).recast(t.near),!(wS.containsPoint(om.origin)===!1&&(om.intersectSphere(wS,f6)===null||om.origin.distanceToSquared(f6)>(t.far-t.near)**2))&&(h6.copy(r).invert(),om.copy(t.ray).applyMatrix4(h6),!(n.boundingBox!==null&&om.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,om)))}_computeIntersections(t,e,n){let s;const r=this.geometry,a=this.material,l=r.index,u=r.attributes.position,f=r.attributes.uv,m=r.attributes.uv1,g=r.attributes.normal,v=r.groups,_=r.drawRange;if(l!==null)if(Array.isArray(a))for(let b=0,T=v.length;b<T;b++){const E=v[b],S=a[E.materialIndex],w=Math.max(E.start,_.start),D=Math.min(l.count,Math.min(E.start+E.count,_.start+_.count));for(let B=w,N=D;B<N;B+=3){const I=l.getX(B),F=l.getX(B+1),z=l.getX(B+2);s=NS(this,S,t,n,f,m,g,I,F,z),s&&(s.faceIndex=Math.floor(B/3),s.face.materialIndex=E.materialIndex,e.push(s))}}else{const b=Math.max(0,_.start),T=Math.min(l.count,_.start+_.count);for(let E=b,S=T;E<S;E+=3){const w=l.getX(E),D=l.getX(E+1),B=l.getX(E+2);s=NS(this,a,t,n,f,m,g,w,D,B),s&&(s.faceIndex=Math.floor(E/3),e.push(s))}}else if(u!==void 0)if(Array.isArray(a))for(let b=0,T=v.length;b<T;b++){const E=v[b],S=a[E.materialIndex],w=Math.max(E.start,_.start),D=Math.min(u.count,Math.min(E.start+E.count,_.start+_.count));for(let B=w,N=D;B<N;B+=3){const I=B,F=B+1,z=B+2;s=NS(this,S,t,n,f,m,g,I,F,z),s&&(s.faceIndex=Math.floor(B/3),s.face.materialIndex=E.materialIndex,e.push(s))}}else{const b=Math.max(0,_.start),T=Math.min(u.count,_.start+_.count);for(let E=b,S=T;E<S;E+=3){const w=E,D=E+1,B=E+2;s=NS(this,a,t,n,f,m,g,w,D,B),s&&(s.faceIndex=Math.floor(E/3),e.push(s))}}}}function fG(i,t,e,n,s,r,a,l){let u;if(t.side===qs?u=n.intersectTriangle(a,r,s,!0,l):u=n.intersectTriangle(s,r,a,t.side===Lc,l),u===null)return null;OS.copy(l),OS.applyMatrix4(i.matrixWorld);const f=e.ray.origin.distanceTo(OS);return f<e.near||f>e.far?null:{distance:f,point:OS.clone(),object:i}}function NS(i,t,e,n,s,r,a,l,u,f){i.getVertexPosition(l,RS),i.getVertexPosition(u,LS),i.getVertexPosition(f,DS);const m=fG(i,t,e,n,RS,LS,DS,d6);if(m){const g=new et;so.getBarycoord(d6,RS,LS,DS,g),s&&(m.uv=so.getInterpolatedAttribute(s,l,u,f,g,new Pt)),r&&(m.uv1=so.getInterpolatedAttribute(r,l,u,f,g,new Pt)),a&&(m.normal=so.getInterpolatedAttribute(a,l,u,f,g,new et),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const v={a:l,b:u,c:f,normal:new et,materialIndex:0};so.getNormal(RS,LS,DS,v.normal),m.face=v,m.barycoord=g}return m}class s0 extends $e{constructor(t=1,e=1,n=1,s=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:s,heightSegments:r,depthSegments:a};const l=this;s=Math.floor(s),r=Math.floor(r),a=Math.floor(a);const u=[],f=[],m=[],g=[];let v=0,_=0;b("z","y","x",-1,-1,n,e,t,a,r,0),b("z","y","x",1,-1,n,e,-t,a,r,1),b("x","z","y",1,1,t,n,e,s,a,2),b("x","z","y",1,-1,t,n,-e,s,a,3),b("x","y","z",1,-1,t,e,n,s,r,4),b("x","y","z",-1,-1,t,e,-n,s,r,5),this.setIndex(u),this.setAttribute("position",new Me(f,3)),this.setAttribute("normal",new Me(m,3)),this.setAttribute("uv",new Me(g,2));function b(T,E,S,w,D,B,N,I,F,z,U){const P=B/F,X=N/z,lt=B/2,it=N/2,ut=I/2,dt=F+1,j=z+1;let tt=0,nt=0;const _t=new et;for(let J=0;J<j;J++){const ot=J*X-it;for(let xt=0;xt<dt;xt++){const Et=xt*P-lt;_t[T]=Et*w,_t[E]=ot*D,_t[S]=ut,f.push(_t.x,_t.y,_t.z),_t[T]=0,_t[E]=0,_t[S]=I>0?1:-1,m.push(_t.x,_t.y,_t.z),g.push(xt/F),g.push(1-J/z),tt+=1}}for(let J=0;J<z;J++)for(let ot=0;ot<F;ot++){const xt=v+ot+dt*J,Et=v+ot+dt*(J+1),ct=v+(ot+1)+dt*(J+1),wt=v+(ot+1)+dt*J;u.push(xt,Et,wt),u.push(Et,ct,wt),nt+=6}l.addGroup(_,nt,U),_+=nt,v+=tt}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new s0(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function py(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const s=i[e][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=s.clone():Array.isArray(s)?t[e][n]=s.slice():t[e][n]=s}}return t}function Ta(i){const t={};for(let e=0;e<i.length;e++){const n=py(i[e]);for(const s in n)t[s]=n[s]}return t}function dG(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}function UB(i){const t=i.getRenderTarget();return t===null?i.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Fn.workingColorSpace}const PB={clone:py,merge:Ta};var pG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,mG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ks extends gs{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=pG,this.fragmentShader=mG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=py(t.uniforms),this.uniformsGroups=dG(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?e.uniforms[s]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?e.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?e.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?e.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?e.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?e.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?e.uniforms[s]={type:"m4",value:a.toArray()}:e.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}let Cx=class extends Ln{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ne,this.projectionMatrix=new Ne,this.projectionMatrixInverse=new Ne,this.coordinateSystem=Cl}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const od=new et,p6=new Pt,m6=new Pt;class Rs extends Cx{constructor(t=50,e=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=fy*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Ig*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return fy*2*Math.atan(Math.tan(Ig*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){od.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(od.x,od.y).multiplyScalar(-t/od.z),od.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(od.x,od.y).multiplyScalar(-t/od.z)}getViewSize(t,e){return this.getViewBounds(t,p6,m6),e.subVectors(m6,p6)}setViewOffset(t,e,n,s,r,a){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(Ig*.5*this.fov)/this.zoom,n=2*e,s=this.aspect*n,r=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const u=a.fullWidth,f=a.fullHeight;r+=a.offsetX*s/u,e-=a.offsetY*n/f,s*=a.width/u,n*=a.height/f}const l=this.filmOffset;l!==0&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const S1=-90,E1=1;class FB extends Ln{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Rs(S1,E1,t,e);s.layers=this.layers,this.add(s);const r=new Rs(S1,E1,t,e);r.layers=this.layers,this.add(r);const a=new Rs(S1,E1,t,e);a.layers=this.layers,this.add(a);const l=new Rs(S1,E1,t,e);l.layers=this.layers,this.add(l);const u=new Rs(S1,E1,t,e);u.layers=this.layers,this.add(u);const f=new Rs(S1,E1,t,e);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,s,r,a,l,u]=e;for(const f of e)this.remove(f);if(t===Cl)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(t===J_)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const f of e)this.add(f),f.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,a,l,u,f,m]=this.children,g=t.getRenderTarget(),v=t.getActiveCubeFace(),_=t.getActiveMipmapLevel(),b=t.xr.enabled;t.xr.enabled=!1;const T=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,s),t.render(e,r),t.setRenderTarget(n,1,s),t.render(e,a),t.setRenderTarget(n,2,s),t.render(e,l),t.setRenderTarget(n,3,s),t.render(e,u),t.setRenderTarget(n,4,s),t.render(e,f),n.texture.generateMipmaps=T,t.setRenderTarget(n,5,s),t.render(e,m),t.setRenderTarget(g,v,_),t.xr.enabled=b,n.texture.needsPMREMUpdate=!0}}class wx extends wi{constructor(t=[],e=sf,n,s,r,a,l,u,f,m){super(t,e,n,s,r,a,l,u,f,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class HB extends Ds{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},s=[n,n,n,n,n,n];this.texture=new wx(s,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Ni}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new s0(5,5,5),r=new Ks({name:"CubemapFromEquirect",uniforms:py(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:qs,blending:ra});r.uniforms.tEquirect.value=e;const a=new as(s,r),l=e.minFilter;return e.minFilter===Tl&&(e.minFilter=Ni),new FB(1,10,this).update(t,a),e.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(t,e=!0,n=!0,s=!0){const r=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,n,s);t.setRenderTarget(r)}}class Wh extends Ln{constructor(){super(),this.isGroup=!0,this.type="Group"}}const gG={type:"move"};class D4{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Wh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Wh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new et,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new et),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Wh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new et,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new et),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let s=null,r=null,a=null;const l=this._targetRay,u=this._grip,f=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(f&&t.hand){a=!0;for(const T of t.hand.values()){const E=e.getJointPose(T,n),S=this._getHandJoint(f,T);E!==null&&(S.matrix.fromArray(E.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=E.radius),S.visible=E!==null}const m=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],v=m.position.distanceTo(g.position),_=.02,b=.005;f.inputState.pinching&&v>_+b?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!f.inputState.pinching&&v<=_-b&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else u!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),r!==null&&(u.matrix.fromArray(r.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,r.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(r.linearVelocity)):u.hasLinearVelocity=!1,r.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(r.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(s=e.getPose(t.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(gG)))}return l!==null&&(l.visible=s!==null),u!==null&&(u.visible=r!==null),f!==null&&(f.visible=a!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const n=new Wh;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class nM{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new oe(t),this.density=e}clone(){return new nM(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class iM{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new oe(t),this.near=e,this.far=n}clone(){return new iM(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let tA=class extends Ln{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Vo,this.environmentIntensity=1,this.environmentRotation=new Vo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}};class Rx{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=K_,this.updateRanges=[],this.version=0,this.uuid=Go()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let s=0,r=this.stride;s<r;s++)this.array[t+s]=e.array[n+s];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Go()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Go()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ea=new et;class tp{constructor(t,e,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Ea.fromBufferAttribute(this,e),Ea.applyMatrix4(t),this.setXYZ(e,Ea.x,Ea.y,Ea.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ea.fromBufferAttribute(this,e),Ea.applyNormalMatrix(t),this.setXYZ(e,Ea.x,Ea.y,Ea.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ea.fromBufferAttribute(this,e),Ea.transformDirection(t),this.setXYZ(e,Ea.x,Ea.y,Ea.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=Da(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Da(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Da(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Da(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Da(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=s,this}setXYZW(t,e,n,s,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array),r=cn(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=s,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return new zn(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new tp(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class zw extends gs{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new oe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let M1;const Y2=new et,T1=new et,C1=new et,w1=new Pt,W2=new Pt,zB=new Ne,IS=new et,K2=new et,US=new et,g6=new Pt,l8=new Pt,v6=new Pt;class GB extends Ln{constructor(t=new zw){if(super(),this.isSprite=!0,this.type="Sprite",M1===void 0){M1=new $e;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Rx(e,5);M1.setIndex([0,1,2,0,2,3]),M1.setAttribute("position",new tp(n,3,0,!1)),M1.setAttribute("uv",new tp(n,2,3,!1))}this.geometry=M1,this.material=t,this.center=new Pt(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),T1.setFromMatrixScale(this.matrixWorld),zB.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),C1.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&T1.multiplyScalar(-C1.z);const n=this.material.rotation;let s,r;n!==0&&(r=Math.cos(n),s=Math.sin(n));const a=this.center;PS(IS.set(-.5,-.5,0),C1,a,T1,s,r),PS(K2.set(.5,-.5,0),C1,a,T1,s,r),PS(US.set(.5,.5,0),C1,a,T1,s,r),g6.set(0,0),l8.set(1,0),v6.set(1,1);let l=t.ray.intersectTriangle(IS,K2,US,!1,Y2);if(l===null&&(PS(K2.set(-.5,.5,0),C1,a,T1,s,r),l8.set(0,1),l=t.ray.intersectTriangle(IS,US,K2,!1,Y2),l===null))return;const u=t.ray.origin.distanceTo(Y2);u<t.near||u>t.far||e.push({distance:u,point:Y2.clone(),uv:so.getInterpolation(Y2,IS,K2,US,g6,l8,v6,new Pt),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function PS(i,t,e,n,s,r){w1.subVectors(i,e).addScalar(.5).multiply(n),s!==void 0?(W2.x=r*w1.x-s*w1.y,W2.y=s*w1.x+r*w1.y):W2.copy(w1),i.copy(t),i.x+=W2.x,i.y+=W2.y,i.applyMatrix4(zB)}const FS=new et,y6=new et;class kB extends Ln{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,s=e.length;n<s;n++){const r=e[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const s=this.levels;let r;for(r=0;r<s.length&&!(e<s[r].distance);r++);return s.splice(r,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let n=0;n<e.length;n++)if(e[n].distance===t){const s=e.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,s;for(n=1,s=e.length;n<s;n++){let r=e[n].distance;if(e[n].object.visible&&(r-=r*e[n].hysteresis),t<r)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){FS.setFromMatrixPosition(this.matrixWorld);const s=t.ray.origin.distanceTo(FS);this.getObjectForDistance(s).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){FS.setFromMatrixPosition(t.matrixWorld),y6.setFromMatrixPosition(this.matrixWorld);const n=FS.distanceTo(y6)/t.zoom;e[0].object.visible=!0;let s,r;for(s=1,r=e.length;s<r;s++){let a=e[s].distance;if(e[s].object.visible&&(a-=a*e[s].hysteresis),n>=a)e[s-1].object.visible=!1,e[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)e[s].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let s=0,r=n.length;s<r;s++){const a=n[s];e.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return e}}const _6=new et,A6=new On,x6=new On,vG=new et,b6=new Ne,HS=new et,c8=new pr,S6=new Ne,u8=new by;class Gw extends as{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=M5,this.bindMatrix=new Ne,this.bindMatrixInverse=new Ne,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Or),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,HS),this.boundingBox.expandByPoint(HS)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new pr),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,HS),this.boundingSphere.expandByPoint(HS)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),c8.copy(this.boundingSphere),c8.applyMatrix4(s),t.ray.intersectsSphere(c8)!==!1&&(S6.copy(s).invert(),u8.copy(t.ray).applyMatrix4(S6),!(this.boundingBox!==null&&u8.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,u8)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new On,e=this.geometry.attributes.skinWeight;for(let n=0,s=e.count;n<s;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===M5?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===yB?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,s=this.geometry;A6.fromBufferAttribute(s.attributes.skinIndex,t),x6.fromBufferAttribute(s.attributes.skinWeight,t),_6.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const a=x6.getComponent(r);if(a!==0){const l=A6.getComponent(r);b6.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),e.addScaledVector(vG.copy(_6).applyMatrix4(b6),a)}}return e.applyMatrix4(this.bindMatrixInverse)}}class sM extends Ln{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Uu extends wi{constructor(t=null,e=1,n=1,s,r,a,l,u,f=os,m=os,g,v){super(null,a,l,u,f,m,s,r,g,v),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const E6=new Ne,yG=new Ne;class Lx{constructor(t=[],e=[]){this.uuid=Go(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new Ne)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new Ne;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let r=0,a=t.length;r<a;r++){const l=t[r]?t[r].matrixWorld:yG;E6.multiplyMatrices(l,e[r]),E6.toArray(n,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Lx(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Uu(e,t,t,na,Oa);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const s=this.bones[e];if(s.name===t)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,s=t.bones.length;n<s;n++){const r=t.bones[n];let a=e[r];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new sM),this.bones.push(a),this.boneInverses.push(new Ne().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let s=0,r=e.length;s<r;s++){const a=e[s];t.bones.push(a.uuid);const l=n[s];t.boneInverses.push(l.toArray())}return t}}class Gg extends zn{constructor(t,e,n,s=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const R1=new Ne,M6=new Ne,zS=[],T6=new Or,_G=new Ne,J2=new as,Z2=new pr;class kw extends as{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Gg(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,_G)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Or),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,R1),T6.copy(t.boundingBox).applyMatrix4(R1),this.boundingBox.union(T6)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new pr),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,R1),Z2.copy(t.boundingSphere).applyMatrix4(R1),this.boundingSphere.union(Z2)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const n=e.morphTargetInfluences,s=this.morphTexture.source.data.data,r=n.length+1,a=t*r+1;for(let l=0;l<n.length;l++)n[l]=s[a+l]}raycast(t,e){const n=this.matrixWorld,s=this.count;if(J2.geometry=this.geometry,J2.material=this.material,J2.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Z2.copy(this.boundingSphere),Z2.applyMatrix4(n),t.ray.intersectsSphere(Z2)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,R1),M6.multiplyMatrices(n,R1),J2.matrixWorld=M6,J2.raycast(t,zS);for(let a=0,l=zS.length;a<l;a++){const u=zS[a];u.instanceId=r,u.object=this,e.push(u)}zS.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Gg(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const n=e.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new Uu(new Float32Array(s*this.count),s,this.count,KE,Oa));const r=this.morphTexture.source.data.data;let a=0;for(let f=0;f<n.length;f++)a+=n[f];const l=this.geometry.morphTargetsRelative?1:1-a,u=s*t;r[u]=l,r.set(n,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const h8=new et,AG=new et,xG=new on;class pd{constructor(t=new et(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,s){return this.normal.set(t,e,n),this.constant=s,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const s=h8.subVectors(n,e).cross(AG.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(h8),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||xG.getNormalMatrix(t),s=this.coplanarPoint(h8).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const lm=new pr,GS=new et;class Sy{constructor(t=new pd,e=new pd,n=new pd,s=new pd,r=new pd,a=new pd){this.planes=[t,e,n,s,r,a]}set(t,e,n,s,r,a){const l=this.planes;return l[0].copy(t),l[1].copy(e),l[2].copy(n),l[3].copy(s),l[4].copy(r),l[5].copy(a),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=Cl){const n=this.planes,s=t.elements,r=s[0],a=s[1],l=s[2],u=s[3],f=s[4],m=s[5],g=s[6],v=s[7],_=s[8],b=s[9],T=s[10],E=s[11],S=s[12],w=s[13],D=s[14],B=s[15];if(n[0].setComponents(u-r,v-f,E-_,B-S).normalize(),n[1].setComponents(u+r,v+f,E+_,B+S).normalize(),n[2].setComponents(u+a,v+m,E+b,B+w).normalize(),n[3].setComponents(u-a,v-m,E-b,B-w).normalize(),n[4].setComponents(u-l,v-g,E-T,B-D).normalize(),e===Cl)n[5].setComponents(u+l,v+g,E+T,B+D).normalize();else if(e===J_)n[5].setComponents(l,g,T,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),lm.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),lm.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(lm)}intersectsSprite(t){return lm.center.set(0,0,0),lm.radius=.7071067811865476,lm.applyMatrix4(t.matrixWorld),this.intersectsSphere(lm)}intersectsSphere(t){const e=this.planes,n=t.center,s=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const s=e[n];if(GS.x=s.normal.x>0?t.max.x:t.min.x,GS.y=s.normal.y>0?t.max.y:t.min.y,GS.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(GS)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const pu=new Ne,mu=new Sy;class rM{constructor(){this.coordinateSystem=Cl}intersectsObject(t,e){if(!e.isArrayCamera||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(pu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),mu.setFromProjectionMatrix(pu,this.coordinateSystem),mu.intersectsObject(t))return!0}return!1}intersectsSprite(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(pu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),mu.setFromProjectionMatrix(pu,this.coordinateSystem),mu.intersectsSprite(t))return!0}return!1}intersectsSphere(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(pu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),mu.setFromProjectionMatrix(pu,this.coordinateSystem),mu.intersectsSphere(t))return!0}return!1}intersectsBox(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(pu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),mu.setFromProjectionMatrix(pu,this.coordinateSystem),mu.intersectsBox(t))return!0}return!1}containsPoint(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(pu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),mu.setFromProjectionMatrix(pu,this.coordinateSystem),mu.containsPoint(t))return!0}return!1}clone(){return new rM}}function f8(i,t){return i-t}function bG(i,t){return i.z-t.z}function SG(i,t){return t.z-i.z}class EG{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,n,s){const r=this.pool,a=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const l=r[this.index];a.push(l),this.index++,l.start=t,l.count=e,l.z=n,l.index=s}reset(){this.list.length=0,this.index=0}}const Ka=new Ne,MG=new oe(1,1,1),C6=new Sy,TG=new rM,kS=new Or,cm=new pr,$2=new et,w6=new et,CG=new et,d8=new EG,Yr=new as,VS=[];function wG(i,t,e=0){const n=t.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==t.array.constructor){const s=i.count;for(let r=0;r<s;r++)for(let a=0;a<n;a++)t.setComponent(r+e,a,i.getComponent(r,a))}else t.array.set(i.array,e*n);t.needsUpdate=!0}function um(i,t){if(i.constructor!==t.constructor){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++)t[n]=i[n]}else{const e=Math.min(i.length,t.length);t.set(new i.constructor(i.buffer,0,e))}}class VB extends as{constructor(t,e,n=e*2,s){super(new $e,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new Uu(e,t,t,na,Oa);this._matricesTexture=n}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),n=new Uu(e,t,t,Mx,Pu);this._indirectTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new Uu(e,t,t,na,Oa);n.colorSpace=Fn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in t.attributes){const a=t.getAttribute(r),{array:l,itemSize:u,normalized:f}=a,m=new l.constructor(n*u),g=new zn(m,u,f);e.setAttribute(r,g)}if(t.getIndex()!==null){const r=n>65535?new Uint32Array(s):new Uint16Array(s);e.setIndex(new zn(r,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(!t.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=t.getAttribute(n),r=e.getAttribute(n);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Or);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let n=0,s=e.length;n<s;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,Ka),this.getBoundingBoxAt(r,kS).applyMatrix4(Ka),t.union(kS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new pr);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let n=0,s=e.length;n<s;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,Ka),this.getBoundingSphereAt(r,cm).applyMatrix4(Ka),t.union(cm)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:t};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(f8),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;Ka.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const a=this._colorsTexture;return a&&(MG.toArray(a.image.data,s*4),a.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(t,e=-1,n=-1){this._initializeGeometry(t),this._validateGeometry(t);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const a=t.getIndex();if(a!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?a.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(f8),u=this._availableGeometryIds.shift(),r[u]=s):(u=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(u,t),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,u}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,s=n.getIndex()!==null,r=n.getIndex(),a=e.getIndex(),l=this._geometryInfo[t];if(s&&a.count>l.reservedIndexCount||e.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=e.getAttribute("position").count;for(const m in n.attributes){const g=e.getAttribute(m),v=n.getAttribute(m);wG(g,v,u);const _=g.itemSize;for(let b=g.count,T=f;b<T;b++){const E=u+b;for(let S=0;S<_;S++)v.setComponent(E,S,0)}v.needsUpdate=!0,v.addUpdateRange(u*_,f*_)}if(s){const m=l.indexStart,g=l.reservedIndexCount;l.indexCount=e.getIndex().count;for(let v=0;v<a.count;v++)r.setX(m+v,u+a.getX(v));for(let v=a.count,_=g;v<_;v++)r.setX(m+v,u);r.needsUpdate=!0,r.addUpdateRange(m,l.reservedIndexCount)}return l.start=s?l.indexStart:l.vertexStart,l.count=s?l.indexCount:l.vertexCount,l.boundingBox=null,e.boundingBox!==null&&(l.boundingBox=e.boundingBox.clone()),l.boundingSphere=null,e.boundingSphere!==null&&(l.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const n=this._instanceInfo;for(let s=0,r=n.length;s<r;s++)n[s].active&&n[s].geometryIndex===t&&this.deleteInstance(s);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const n=this._geometryInfo,s=n.map((a,l)=>l).sort((a,l)=>n[a].vertexStart-n[l].vertexStart),r=this.geometry;for(let a=0,l=n.length;a<l;a++){const u=s[a],f=n[u];if(f.active!==!1){if(r.index!==null){if(f.indexStart!==e){const{indexStart:m,vertexStart:g,reservedIndexCount:v}=f,_=r.index,b=_.array,T=t-g;for(let E=m;E<m+v;E++)b[E]=b[E]+T;_.array.copyWithin(e,m,m+v),_.addUpdateRange(e,v),f.indexStart=e}e+=f.reservedIndexCount}if(f.vertexStart!==t){const{vertexStart:m,reservedVertexCount:g}=f,v=r.attributes;for(const _ in v){const b=v[_],{array:T,itemSize:E}=b;T.copyWithin(t*E,m*E,(m+g)*E),b.addUpdateRange(t*E,g*E)}f.vertexStart=t}t+=f.reservedVertexCount,f.start=r.index?f.indexStart:f.vertexStart,this._nextIndexStart=r.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[t];if(s.boundingBox===null){const r=new Or,a=n.index,l=n.attributes.position;for(let u=s.start,f=s.start+s.count;u<f;u++){let m=u;a&&(m=a.getX(m)),r.expandByPoint($2.fromBufferAttribute(l,m))}s.boundingBox=r}return e.copy(s.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[t];if(s.boundingSphere===null){const r=new pr;this.getBoundingBoxAt(t,kS),kS.getCenter(r.center);const a=n.index,l=n.attributes.position;let u=0;for(let f=s.start,m=s.start+s.count;f<m;f++){let g=f;a&&(g=a.getX(g)),$2.fromBufferAttribute(l,g),u=Math.max(u,r.center.distanceToSquared($2))}r.radius=Math.sqrt(u),s.boundingSphere=r}return e.copy(s.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const n=this._matricesTexture,s=this._matricesTexture.image.data;return e.toArray(s,t*16),n.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}setInstanceCount(t){const e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(f8);e[e.length-1]===n.length;)n.pop(),e.pop();if(t<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const s=new Int32Array(t),r=new Int32Array(t);um(this._multiDrawCounts,s),um(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=t;const a=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;a.dispose(),this._initIndirectTexture(),um(a.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),um(l.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),um(u.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const n=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...n.map(l=>l.vertexStart+l.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(u=>u.indexStart+u.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new $e,this._initializeGeometry(r));const a=this.geometry;r.index&&um(r.index.array,a.index.array);for(const l in r.attributes)um(r.attributes[l].array,a.attributes[l].array)}raycast(t,e){const n=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,a=this.geometry;Yr.material=this.material,Yr.geometry.index=a.index,Yr.geometry.attributes=a.attributes,Yr.geometry.boundingBox===null&&(Yr.geometry.boundingBox=new Or),Yr.geometry.boundingSphere===null&&(Yr.geometry.boundingSphere=new pr);for(let l=0,u=n.length;l<u;l++){if(!n[l].visible||!n[l].active)continue;const f=n[l].geometryIndex,m=s[f];Yr.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(l,Yr.matrixWorld).premultiply(r),this.getBoundingBoxAt(f,Yr.geometry.boundingBox),this.getBoundingSphereAt(f,Yr.geometry.boundingSphere),Yr.raycast(t,VS);for(let g=0,v=VS.length;g<v;g++){const _=VS[g];_.object=this,_.batchId=l,e.push(_)}VS.length=0}Yr.material=null,Yr.geometry.index=null,Yr.geometry.attributes={},Yr.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._availableInstanceIds=t._availableInstanceIds.slice(),this._availableGeometryIds=t._availableGeometryIds.slice(),this._nextIndexStart=t._nextIndexStart,this._nextVertexStart=t._nextVertexStart,this._geometryCount=t._geometryCount,this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._indirectTexture=t._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,n,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=s.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,u=this._instanceInfo,f=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,_=this._indirectTexture,b=_.image.data,T=n.isArrayCamera?TG:C6;v&&!n.isArrayCamera&&(Ka.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),C6.setFromProjectionMatrix(Ka,t.coordinateSystem));let E=0;if(this.sortObjects){Ka.copy(this.matrixWorld).invert(),$2.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Ka),w6.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Ka);for(let D=0,B=u.length;D<B;D++)if(u[D].visible&&u[D].active){const N=u[D].geometryIndex;this.getMatrixAt(D,Ka),this.getBoundingSphereAt(N,cm).applyMatrix4(Ka);let I=!1;if(v&&(I=!T.intersectsSphere(cm,n)),!I){const F=g[N],z=CG.subVectors(cm.center,$2).dot(w6);d8.push(F.start,F.count,z,D)}}const S=d8.list,w=this.customSort;w===null?S.sort(r.transparent?SG:bG):w.call(this,S,n);for(let D=0,B=S.length;D<B;D++){const N=S[D];f[E]=N.start*l,m[E]=N.count,b[E]=N.index,E++}d8.reset()}else for(let S=0,w=u.length;S<w;S++)if(u[S].visible&&u[S].active){const D=u[S].geometryIndex;let B=!1;if(v&&(this.getMatrixAt(S,Ka),this.getBoundingSphereAt(D,cm).applyMatrix4(Ka),B=!T.intersectsSphere(cm,n)),!B){const N=g[D];f[E]=N.start*l,m[E]=N.count,b[E]=S,E++}}_.needsUpdate=!0,this._multiDrawCount=E,this._visibilityChanged=!1}onBeforeShadow(t,e,n,s,r,a){this.onBeforeRender(t,null,s,r,a)}}class aa extends gs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new oe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Z3=new et,$3=new et,R6=new Ne,t_=new by,QS=new pr,p8=new et,L6=new et;class rf extends Ln{constructor(t=new $e,e=new aa){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[0];for(let s=1,r=e.count;s<r;s++)Z3.fromBufferAttribute(e,s-1),$3.fromBufferAttribute(e,s),n[s]=n[s-1],n[s]+=Z3.distanceTo($3);t.setAttribute("lineDistance",new Me(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,s=this.matrixWorld,r=t.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),QS.copy(n.boundingSphere),QS.applyMatrix4(s),QS.radius+=r,t.ray.intersectsSphere(QS)===!1)return;R6.copy(s).invert(),t_.copy(t.ray).applyMatrix4(R6);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=this.isLineSegments?2:1,m=n.index,v=n.attributes.position;if(m!==null){const _=Math.max(0,a.start),b=Math.min(m.count,a.start+a.count);for(let T=_,E=b-1;T<E;T+=f){const S=m.getX(T),w=m.getX(T+1),D=jS(this,t,t_,u,S,w,T);D&&e.push(D)}if(this.isLineLoop){const T=m.getX(b-1),E=m.getX(_),S=jS(this,t,t_,u,T,E,b-1);S&&e.push(S)}}else{const _=Math.max(0,a.start),b=Math.min(v.count,a.start+a.count);for(let T=_,E=b-1;T<E;T+=f){const S=jS(this,t,t_,u,T,T+1,T);S&&e.push(S)}if(this.isLineLoop){const T=jS(this,t,t_,u,b-1,_,b-1);T&&e.push(T)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function jS(i,t,e,n,s,r,a){const l=i.geometry.attributes.position;if(Z3.fromBufferAttribute(l,s),$3.fromBufferAttribute(l,r),e.distanceSqToSegment(Z3,$3,p8,L6)>n)return;p8.applyMatrix4(i.matrixWorld);const f=t.ray.origin.distanceTo(p8);if(!(f<t.near||f>t.far))return{distance:f,point:L6.clone().applyMatrix4(i.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:i}}const D6=new et,B6=new et;class Dc extends rf{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[];for(let s=0,r=e.count;s<r;s+=2)D6.fromBufferAttribute(e,s),B6.fromBufferAttribute(e,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+D6.distanceTo(B6);t.setAttribute("lineDistance",new Me(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Vw extends rf{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class aM extends gs{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new oe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const O6=new Ne,w5=new by,XS=new pr,qS=new et;class Qw extends Ln{constructor(t=new $e,e=new aM){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,s=this.matrixWorld,r=t.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),XS.copy(n.boundingSphere),XS.applyMatrix4(s),XS.radius+=r,t.ray.intersectsSphere(XS)===!1)return;O6.copy(s).invert(),w5.copy(t.ray).applyMatrix4(O6);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=n.index,g=n.attributes.position;if(f!==null){const v=Math.max(0,a.start),_=Math.min(f.count,a.start+a.count);for(let b=v,T=_;b<T;b++){const E=f.getX(b);qS.fromBufferAttribute(g,E),N6(qS,E,u,s,t,e,this)}}else{const v=Math.max(0,a.start),_=Math.min(g.count,a.start+a.count);for(let b=v,T=_;b<T;b++)qS.fromBufferAttribute(g,b),N6(qS,b,u,s,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function N6(i,t,e,n,s,r,a){const l=w5.distanceSqToPoint(i);if(l<e){const u=new et;w5.closestPointToPoint(i,u),u.applyMatrix4(n);const f=s.ray.origin.distanceTo(u);if(f<s.near||f>s.far)return;r.push({distance:f,distanceToRay:Math.sqrt(l),point:u,index:t,face:null,faceIndex:null,barycoord:null,object:a})}}class QB extends wi{constructor(t,e,n,s,r=Ni,a=Ni,l,u,f){super(t,e,n,s,r,a,l,u,f),this.isVideoTexture=!0,this.generateMipmaps=!1;const m=this;function g(){m.needsUpdate=!0,t.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class RG extends QB{constructor(t,e,n,s,r,a,l,u){super({},t,e,n,s,r,a,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class LG extends wi{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=os,this.minFilter=os,this.generateMipmaps=!1,this.needsUpdate=!0}}class oM extends wi{constructor(t,e,n,s,r,a,l,u,f,m,g,v){super(null,a,l,u,f,m,s,r,g,v),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class DG extends oM{constructor(t,e,n,s,r,a){super(t,e,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Ho,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class BG extends oM{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,sf),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class OG extends wi{constructor(t,e,n,s,r,a,l,u,f){super(t,e,n,s,r,a,l,u,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Dx extends wi{constructor(t,e,n=Pu,s,r,a,l=os,u=os,f,m=cy){if(m!==cy&&m!==zg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,s,r,a,l,u,m,n,f),this.isDepthTexture=!0,this.image={width:t,height:e},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new jd(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class NG extends Dx{constructor(t=1,e=1,n=1){super(t,e),this.isDepthArrayTexture=!0,this.image={width:t,height:e,depth:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class lM extends $e{constructor(t=1,e=1,n=4,s=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:s,heightSegments:r},e=Math.max(0,e),n=Math.max(1,Math.floor(n)),s=Math.max(3,Math.floor(s)),r=Math.max(1,Math.floor(r));const a=[],l=[],u=[],f=[],m=e/2,g=Math.PI/2*t,v=e,_=2*g+v,b=n*2+r,T=s+1,E=new et,S=new et;for(let w=0;w<=b;w++){let D=0,B=0,N=0,I=0;if(w<=n){const U=w/n,P=U*Math.PI/2;B=-m-t*Math.cos(P),N=t*Math.sin(P),I=-t*Math.cos(P),D=U*g}else if(w<=n+r){const U=(w-n)/r;B=-m+U*e,N=t,I=0,D=g+U*v}else{const U=(w-n-r)/n,P=U*Math.PI/2;B=m+t*Math.sin(P),N=t*Math.cos(P),I=t*Math.sin(P),D=g+v+U*g}const F=Math.max(0,Math.min(1,D/_));let z=0;w===0?z=.5/s:w===b&&(z=-.5/s);for(let U=0;U<=s;U++){const P=U/s,X=P*Math.PI*2,lt=Math.sin(X),it=Math.cos(X);S.x=-N*it,S.y=B,S.z=N*lt,l.push(S.x,S.y,S.z),E.set(-N*it,I,N*lt),E.normalize(),u.push(E.x,E.y,E.z),f.push(P+z,F)}if(w>0){const U=(w-1)*T;for(let P=0;P<s;P++){const X=U+P,lt=U+P+1,it=w*T+P,ut=w*T+P+1;a.push(X,lt,it),a.push(lt,ut,it)}}}this.setIndex(a),this.setAttribute("position",new Me(l,3)),this.setAttribute("normal",new Me(u,3)),this.setAttribute("uv",new Me(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new lM(t.radius,t.height,t.capSegments,t.radialSegments,t.heightSegments)}}class cM extends $e{constructor(t=1,e=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:s},e=Math.max(3,e);const r=[],a=[],l=[],u=[],f=new et,m=new Pt;a.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let g=0,v=3;g<=e;g++,v+=3){const _=n+g/e*s;f.x=t*Math.cos(_),f.y=t*Math.sin(_),a.push(f.x,f.y,f.z),l.push(0,0,1),m.x=(a[v]/t+1)/2,m.y=(a[v+1]/t+1)/2,u.push(m.x,m.y)}for(let g=1;g<=e;g++)r.push(g,g+1,0);this.setIndex(r),this.setAttribute("position",new Me(a,3)),this.setAttribute("normal",new Me(l,3)),this.setAttribute("uv",new Me(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new cM(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Bx extends $e{constructor(t=1,e=1,n=1,s=32,r=1,a=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:s,heightSegments:r,openEnded:a,thetaStart:l,thetaLength:u};const f=this;s=Math.floor(s),r=Math.floor(r);const m=[],g=[],v=[],_=[];let b=0;const T=[],E=n/2;let S=0;w(),a===!1&&(t>0&&D(!0),e>0&&D(!1)),this.setIndex(m),this.setAttribute("position",new Me(g,3)),this.setAttribute("normal",new Me(v,3)),this.setAttribute("uv",new Me(_,2));function w(){const B=new et,N=new et;let I=0;const F=(e-t)/n;for(let z=0;z<=r;z++){const U=[],P=z/r,X=P*(e-t)+t;for(let lt=0;lt<=s;lt++){const it=lt/s,ut=it*u+l,dt=Math.sin(ut),j=Math.cos(ut);N.x=X*dt,N.y=-P*n+E,N.z=X*j,g.push(N.x,N.y,N.z),B.set(dt,F,j).normalize(),v.push(B.x,B.y,B.z),_.push(it,1-P),U.push(b++)}T.push(U)}for(let z=0;z<s;z++)for(let U=0;U<r;U++){const P=T[U][z],X=T[U+1][z],lt=T[U+1][z+1],it=T[U][z+1];(t>0||U!==0)&&(m.push(P,X,it),I+=3),(e>0||U!==r-1)&&(m.push(X,lt,it),I+=3)}f.addGroup(S,I,0),S+=I}function D(B){const N=b,I=new Pt,F=new et;let z=0;const U=B===!0?t:e,P=B===!0?1:-1;for(let lt=1;lt<=s;lt++)g.push(0,E*P,0),v.push(0,P,0),_.push(.5,.5),b++;const X=b;for(let lt=0;lt<=s;lt++){const ut=lt/s*u+l,dt=Math.cos(ut),j=Math.sin(ut);F.x=U*j,F.y=E*P,F.z=U*dt,g.push(F.x,F.y,F.z),v.push(0,P,0),I.x=dt*.5+.5,I.y=j*.5*P+.5,_.push(I.x,I.y),b++}for(let lt=0;lt<s;lt++){const it=N+lt,ut=X+lt;B===!0?m.push(ut,ut+1,it):m.push(ut+1,ut,it),z+=3}f.addGroup(S,z,B===!0?1:2),S+=z}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Bx(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Ox extends Bx{constructor(t=1,e=1,n=32,s=1,r=!1,a=0,l=Math.PI*2){super(0,t,e,n,s,r,a,l),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:a,thetaLength:l}}static fromJSON(t){return new Ox(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class cp extends $e{constructor(t=[],e=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:s};const r=[],a=[];l(s),f(n),m(),this.setAttribute("position",new Me(r,3)),this.setAttribute("normal",new Me(r.slice(),3)),this.setAttribute("uv",new Me(a,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function l(w){const D=new et,B=new et,N=new et;for(let I=0;I<e.length;I+=3)_(e[I+0],D),_(e[I+1],B),_(e[I+2],N),u(D,B,N,w)}function u(w,D,B,N){const I=N+1,F=[];for(let z=0;z<=I;z++){F[z]=[];const U=w.clone().lerp(B,z/I),P=D.clone().lerp(B,z/I),X=I-z;for(let lt=0;lt<=X;lt++)lt===0&&z===I?F[z][lt]=U:F[z][lt]=U.clone().lerp(P,lt/X)}for(let z=0;z<I;z++)for(let U=0;U<2*(I-z)-1;U++){const P=Math.floor(U/2);U%2===0?(v(F[z][P+1]),v(F[z+1][P]),v(F[z][P])):(v(F[z][P+1]),v(F[z+1][P+1]),v(F[z+1][P]))}}function f(w){const D=new et;for(let B=0;B<r.length;B+=3)D.x=r[B+0],D.y=r[B+1],D.z=r[B+2],D.normalize().multiplyScalar(w),r[B+0]=D.x,r[B+1]=D.y,r[B+2]=D.z}function m(){const w=new et;for(let D=0;D<r.length;D+=3){w.x=r[D+0],w.y=r[D+1],w.z=r[D+2];const B=E(w)/2/Math.PI+.5,N=S(w)/Math.PI+.5;a.push(B,1-N)}b(),g()}function g(){for(let w=0;w<a.length;w+=6){const D=a[w+0],B=a[w+2],N=a[w+4],I=Math.max(D,B,N),F=Math.min(D,B,N);I>.9&&F<.1&&(D<.2&&(a[w+0]+=1),B<.2&&(a[w+2]+=1),N<.2&&(a[w+4]+=1))}}function v(w){r.push(w.x,w.y,w.z)}function _(w,D){const B=w*3;D.x=t[B+0],D.y=t[B+1],D.z=t[B+2]}function b(){const w=new et,D=new et,B=new et,N=new et,I=new Pt,F=new Pt,z=new Pt;for(let U=0,P=0;U<r.length;U+=9,P+=6){w.set(r[U+0],r[U+1],r[U+2]),D.set(r[U+3],r[U+4],r[U+5]),B.set(r[U+6],r[U+7],r[U+8]),I.set(a[P+0],a[P+1]),F.set(a[P+2],a[P+3]),z.set(a[P+4],a[P+5]),N.copy(w).add(D).add(B).divideScalar(3);const X=E(N);T(I,P+0,w,X),T(F,P+2,D,X),T(z,P+4,B,X)}}function T(w,D,B,N){N<0&&w.x===1&&(a[D]=w.x-1),B.x===0&&B.z===0&&(a[D]=N/2/Math.PI+.5)}function E(w){return Math.atan2(w.z,-w.x)}function S(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new cp(t.vertices,t.indices,t.radius,t.details)}}class uM extends cp{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,s=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,a,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new uM(t.radius,t.detail)}}const YS=new et,WS=new et,m8=new et,KS=new so;class jB extends $e{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const s=Math.pow(10,4),r=Math.cos(Ig*e),a=t.getIndex(),l=t.getAttribute("position"),u=a?a.count:l.count,f=[0,0,0],m=["a","b","c"],g=new Array(3),v={},_=[];for(let b=0;b<u;b+=3){a?(f[0]=a.getX(b),f[1]=a.getX(b+1),f[2]=a.getX(b+2)):(f[0]=b,f[1]=b+1,f[2]=b+2);const{a:T,b:E,c:S}=KS;if(T.fromBufferAttribute(l,f[0]),E.fromBufferAttribute(l,f[1]),S.fromBufferAttribute(l,f[2]),KS.getNormal(m8),g[0]=`${Math.round(T.x*s)},${Math.round(T.y*s)},${Math.round(T.z*s)}`,g[1]=`${Math.round(E.x*s)},${Math.round(E.y*s)},${Math.round(E.z*s)}`,g[2]=`${Math.round(S.x*s)},${Math.round(S.y*s)},${Math.round(S.z*s)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let w=0;w<3;w++){const D=(w+1)%3,B=g[w],N=g[D],I=KS[m[w]],F=KS[m[D]],z=`${B}_${N}`,U=`${N}_${B}`;U in v&&v[U]?(m8.dot(v[U].normal)<=r&&(_.push(I.x,I.y,I.z),_.push(F.x,F.y,F.z)),v[U]=null):z in v||(v[z]={index0:f[w],index1:f[D],normal:m8.clone()})}}for(const b in v)if(v[b]){const{index0:T,index1:E}=v[b];YS.fromBufferAttribute(l,T),WS.fromBufferAttribute(l,E),_.push(YS.x,YS.y,YS.z),_.push(WS.x,WS.y,WS.z)}this.setAttribute("position",new Me(_,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Bc{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,s=this.getPoint(0),r=0;e.push(0);for(let a=1;a<=t;a++)n=this.getPoint(a/t),r+=n.distanceTo(s),e.push(r),s=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const n=this.getLengths();let s=0;const r=n.length;let a;e?a=e:a=t*n[r-1];let l=0,u=r-1,f;for(;l<=u;)if(s=Math.floor(l+(u-l)/2),f=n[s]-a,f<0)l=s+1;else if(f>0)u=s-1;else{u=s;break}if(s=u,n[s]===a)return s/(r-1);const m=n[s],v=n[s+1]-m,_=(a-m)/v;return(s+_)/(r-1)}getTangent(t,e){let s=t-1e-4,r=t+1e-4;s<0&&(s=0),r>1&&(r=1);const a=this.getPoint(s),l=this.getPoint(r),u=e||(a.isVector2?new Pt:new et);return u.copy(l).sub(a).normalize(),u}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e=!1){const n=new et,s=[],r=[],a=[],l=new et,u=new Ne;for(let _=0;_<=t;_++){const b=_/t;s[_]=this.getTangentAt(b,new et)}r[0]=new et,a[0]=new et;let f=Number.MAX_VALUE;const m=Math.abs(s[0].x),g=Math.abs(s[0].y),v=Math.abs(s[0].z);m<=f&&(f=m,n.set(1,0,0)),g<=f&&(f=g,n.set(0,1,0)),v<=f&&n.set(0,0,1),l.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],l),a[0].crossVectors(s[0],r[0]);for(let _=1;_<=t;_++){if(r[_]=r[_-1].clone(),a[_]=a[_-1].clone(),l.crossVectors(s[_-1],s[_]),l.length()>Number.EPSILON){l.normalize();const b=Math.acos(nn(s[_-1].dot(s[_]),-1,1));r[_].applyMatrix4(u.makeRotationAxis(l,b))}a[_].crossVectors(s[_],r[_])}if(e===!0){let _=Math.acos(nn(r[0].dot(r[t]),-1,1));_/=t,s[0].dot(l.crossVectors(r[0],r[t]))>0&&(_=-_);for(let b=1;b<=t;b++)r[b].applyMatrix4(u.makeRotationAxis(s[b],_*b)),a[b].crossVectors(s[b],r[b])}return{tangents:s,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class hM extends Bc{constructor(t=0,e=0,n=1,s=1,r=0,a=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=l,this.aRotation=u}getPoint(t,e=new Pt){const n=e,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(a?r=0:r=s),this.aClockwise===!0&&!a&&(r===s?r=-s:r=r-s);const l=this.aStartAngle+t*r;let u=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=u-this.aX,_=f-this.aY;u=v*m-_*g+this.aX,f=v*g+_*m+this.aY}return n.set(u,f)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class XB extends hM{constructor(t,e,n,s,r,a){super(t,e,n,n,s,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function jw(){let i=0,t=0,e=0,n=0;function s(r,a,l,u){i=r,t=l,e=-3*r+3*a-2*l-u,n=2*r-2*a+l+u}return{initCatmullRom:function(r,a,l,u,f){s(a,l,f*(l-r),f*(u-a))},initNonuniformCatmullRom:function(r,a,l,u,f,m,g){let v=(a-r)/f-(l-r)/(f+m)+(l-a)/m,_=(l-a)/m-(u-a)/(m+g)+(u-l)/g;v*=m,_*=m,s(a,l,v,_)},calc:function(r){const a=r*r,l=a*r;return i+t*r+e*a+n*l}}}const JS=new et,g8=new jw,v8=new jw,y8=new jw;class qB extends Bc{constructor(t=[],e=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=s}getPoint(t,e=new et){const n=e,s=this.points,r=s.length,a=(r-(this.closed?0:1))*t;let l=Math.floor(a),u=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:u===0&&l===r-1&&(l=r-2,u=1);let f,m;this.closed||l>0?f=s[(l-1)%r]:(JS.subVectors(s[0],s[1]).add(s[0]),f=JS);const g=s[l%r],v=s[(l+1)%r];if(this.closed||l+2<r?m=s[(l+2)%r]:(JS.subVectors(s[r-1],s[r-2]).add(s[r-1]),m=JS),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let b=Math.pow(f.distanceToSquared(g),_),T=Math.pow(g.distanceToSquared(v),_),E=Math.pow(v.distanceToSquared(m),_);T<1e-4&&(T=1),b<1e-4&&(b=T),E<1e-4&&(E=T),g8.initNonuniformCatmullRom(f.x,g.x,v.x,m.x,b,T,E),v8.initNonuniformCatmullRom(f.y,g.y,v.y,m.y,b,T,E),y8.initNonuniformCatmullRom(f.z,g.z,v.z,m.z,b,T,E)}else this.curveType==="catmullrom"&&(g8.initCatmullRom(f.x,g.x,v.x,m.x,this.tension),v8.initCatmullRom(f.y,g.y,v.y,m.y,this.tension),y8.initCatmullRom(f.z,g.z,v.z,m.z,this.tension));return n.set(g8.calc(u),v8.calc(u),y8.calc(u)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(s.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const s=this.points[e];t.points.push(s.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(new et().fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function I6(i,t,e,n,s){const r=(n-t)*.5,a=(s-e)*.5,l=i*i,u=i*l;return(2*e-2*n+r+a)*u+(-3*e+3*n-2*r-a)*l+r*i+e}function IG(i,t){const e=1-i;return e*e*t}function UG(i,t){return 2*(1-i)*i*t}function PG(i,t){return i*i*t}function P_(i,t,e,n){return IG(i,t)+UG(i,e)+PG(i,n)}function FG(i,t){const e=1-i;return e*e*e*t}function HG(i,t){const e=1-i;return 3*e*e*i*t}function zG(i,t){return 3*(1-i)*i*i*t}function GG(i,t){return i*i*i*t}function F_(i,t,e,n,s){return FG(i,t)+HG(i,e)+zG(i,n)+GG(i,s)}class Xw extends Bc{constructor(t=new Pt,e=new Pt,n=new Pt,s=new Pt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=s}getPoint(t,e=new Pt){const n=e,s=this.v0,r=this.v1,a=this.v2,l=this.v3;return n.set(F_(t,s.x,r.x,a.x,l.x),F_(t,s.y,r.y,a.y,l.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class YB extends Bc{constructor(t=new et,e=new et,n=new et,s=new et){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=s}getPoint(t,e=new et){const n=e,s=this.v0,r=this.v1,a=this.v2,l=this.v3;return n.set(F_(t,s.x,r.x,a.x,l.x),F_(t,s.y,r.y,a.y,l.y),F_(t,s.z,r.z,a.z,l.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class qw extends Bc{constructor(t=new Pt,e=new Pt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Pt){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Pt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class WB extends Bc{constructor(t=new et,e=new et){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new et){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new et){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Yw extends Bc{constructor(t=new Pt,e=new Pt,n=new Pt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Pt){const n=e,s=this.v0,r=this.v1,a=this.v2;return n.set(P_(t,s.x,r.x,a.x),P_(t,s.y,r.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ww extends Bc{constructor(t=new et,e=new et,n=new et){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new et){const n=e,s=this.v0,r=this.v1,a=this.v2;return n.set(P_(t,s.x,r.x,a.x),P_(t,s.y,r.y,a.y),P_(t,s.z,r.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Kw extends Bc{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Pt){const n=e,s=this.points,r=(s.length-1)*t,a=Math.floor(r),l=r-a,u=s[a===0?a:a-1],f=s[a],m=s[a>s.length-2?s.length-1:a+1],g=s[a>s.length-3?s.length-1:a+2];return n.set(I6(l,u.x,f.x,m.x,g.x),I6(l,u.y,f.y,m.y,g.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const s=this.points[e];t.points.push(s.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(new Pt().fromArray(s))}return this}}var tE=Object.freeze({__proto__:null,ArcCurve:XB,CatmullRomCurve3:qB,CubicBezierCurve:Xw,CubicBezierCurve3:YB,EllipseCurve:hM,LineCurve:qw,LineCurve3:WB,QuadraticBezierCurve:Yw,QuadraticBezierCurve3:Ww,SplineCurve:Kw});class KB extends Bc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new tE[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=n){const a=s[r]-n,l=this.curves[r],u=l.getLength(),f=u===0?0:1-a/u;return l.getPointAt(f,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,s=this.curves.length;n<s;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let s=0,r=this.curves;s<r.length;s++){const a=r[s],l=a.isEllipseCurve?t*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,u=a.getPoints(l);for(let f=0;f<u.length;f++){const m=u[f];n&&n.equals(m)||(e.push(m),n=m)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const s=t.curves[e];this.curves.push(s.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const s=this.curves[e];t.curves.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const s=t.curves[e];this.curves.push(new tE[s.type]().fromJSON(s))}return this}}class eE extends KB{constructor(t){super(),this.type="Path",this.currentPoint=new Pt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new qw(this.currentPoint.clone(),new Pt(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,s){const r=new Yw(this.currentPoint.clone(),new Pt(t,e),new Pt(n,s));return this.curves.push(r),this.currentPoint.set(n,s),this}bezierCurveTo(t,e,n,s,r,a){const l=new Xw(this.currentPoint.clone(),new Pt(t,e),new Pt(n,s),new Pt(r,a));return this.curves.push(l),this.currentPoint.set(r,a),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Kw(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,s,r,a){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(t+l,e+u,n,s,r,a),this}absarc(t,e,n,s,r,a){return this.absellipse(t,e,n,n,s,r,a),this}ellipse(t,e,n,s,r,a,l,u){const f=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(t+f,e+m,n,s,r,a,l,u),this}absellipse(t,e,n,s,r,a,l,u){const f=new hM(t,e,n,s,r,a,l,u);if(this.curves.length>0){const g=f.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(f);const m=f.getPoint(1);return this.currentPoint.copy(m),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Ug extends eE{constructor(t){super(t),this.uuid=Go(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,s=this.holes.length;n<s;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const s=t.holes[e];this.holes.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const s=this.holes[e];t.holes.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const s=t.holes[e];this.holes.push(new eE().fromJSON(s))}return this}}function kG(i,t,e=2){const n=t&&t.length,s=n?t[0]*e:i.length;let r=JB(i,0,s,e,!0);const a=[];if(!r||r.next===r.prev)return a;let l,u,f;if(n&&(r=qG(i,t,r,e)),i.length>80*e){l=1/0,u=1/0;let m=-1/0,g=-1/0;for(let v=e;v<s;v+=e){const _=i[v],b=i[v+1];_<l&&(l=_),b<u&&(u=b),_>m&&(m=_),b>g&&(g=b)}f=Math.max(m-l,g-u),f=f!==0?32767/f:0}return eA(r,a,e,l,u,f,0),a}function JB(i,t,e,n,s){let r;if(s===sk(i,t,e,n)>0)for(let a=t;a<e;a+=n)r=U6(a/n|0,i[a],i[a+1],r);else for(let a=e-n;a>=t;a-=n)r=U6(a/n|0,i[a],i[a+1],r);return r&&my(r,r.next)&&(iA(r),r=r.next),r}function kg(i,t){if(!i)return i;t||(t=i);let e=i,n;do if(n=!1,!e.steiner&&(my(e,e.next)||Ki(e.prev,e,e.next)===0)){if(iA(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function eA(i,t,e,n,s,r,a){if(!i)return;!a&&r&&ZG(i,n,s,r);let l=i;for(;i.prev!==i.next;){const u=i.prev,f=i.next;if(r?QG(i,n,s,r):VG(i)){t.push(u.i,i.i,f.i),iA(i),i=f.next,l=f.next;continue}if(i=f,i===l){a?a===1?(i=jG(kg(i),t),eA(i,t,e,n,s,r,2)):a===2&&XG(i,t,e,n,s,r):eA(kg(i),t,e,n,s,r,1);break}}}function VG(i){const t=i.prev,e=i,n=i.next;if(Ki(t,e,n)>=0)return!1;const s=t.x,r=e.x,a=n.x,l=t.y,u=e.y,f=n.y,m=Math.min(s,r,a),g=Math.min(l,u,f),v=Math.max(s,r,a),_=Math.max(l,u,f);let b=n.next;for(;b!==t;){if(b.x>=m&&b.x<=v&&b.y>=g&&b.y<=_&&u_(s,l,r,u,a,f,b.x,b.y)&&Ki(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function QG(i,t,e,n){const s=i.prev,r=i,a=i.next;if(Ki(s,r,a)>=0)return!1;const l=s.x,u=r.x,f=a.x,m=s.y,g=r.y,v=a.y,_=Math.min(l,u,f),b=Math.min(m,g,v),T=Math.max(l,u,f),E=Math.max(m,g,v),S=R5(_,b,t,e,n),w=R5(T,E,t,e,n);let D=i.prevZ,B=i.nextZ;for(;D&&D.z>=S&&B&&B.z<=w;){if(D.x>=_&&D.x<=T&&D.y>=b&&D.y<=E&&D!==s&&D!==a&&u_(l,m,u,g,f,v,D.x,D.y)&&Ki(D.prev,D,D.next)>=0||(D=D.prevZ,B.x>=_&&B.x<=T&&B.y>=b&&B.y<=E&&B!==s&&B!==a&&u_(l,m,u,g,f,v,B.x,B.y)&&Ki(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;D&&D.z>=S;){if(D.x>=_&&D.x<=T&&D.y>=b&&D.y<=E&&D!==s&&D!==a&&u_(l,m,u,g,f,v,D.x,D.y)&&Ki(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;B&&B.z<=w;){if(B.x>=_&&B.x<=T&&B.y>=b&&B.y<=E&&B!==s&&B!==a&&u_(l,m,u,g,f,v,B.x,B.y)&&Ki(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function jG(i,t){let e=i;do{const n=e.prev,s=e.next.next;!my(n,s)&&$B(n,e,e.next,s)&&nA(n,s)&&nA(s,n)&&(t.push(n.i,e.i,s.i),iA(e),iA(e.next),e=i=s),e=e.next}while(e!==i);return kg(e)}function XG(i,t,e,n,s,r){let a=i;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&ek(a,l)){let u=tO(a,l);a=kg(a,a.next),u=kg(u,u.next),eA(a,t,e,n,s,r,0),eA(u,t,e,n,s,r,0);return}l=l.next}a=a.next}while(a!==i)}function qG(i,t,e,n){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r]*n,u=r<a-1?t[r+1]*n:i.length,f=JB(i,l,u,n,!1);f===f.next&&(f.steiner=!0),s.push(tk(f))}s.sort(YG);for(let r=0;r<s.length;r++)e=WG(s[r],e);return e}function YG(i,t){let e=i.x-t.x;if(e===0&&(e=i.y-t.y,e===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(t.next.y-t.y)/(t.next.x-t.x);e=n-s}return e}function WG(i,t){const e=KG(i,t);if(!e)return t;const n=tO(e,i);return kg(n,n.next),kg(e,e.next)}function KG(i,t){let e=t;const n=i.x,s=i.y;let r=-1/0,a;if(my(i,e))return e;do{if(my(i,e.next))return e.next;if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){const g=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(g<=n&&g>r&&(r=g,a=e.x<e.next.x?e:e.next,g===n))return a}e=e.next}while(e!==t);if(!a)return null;const l=a,u=a.x,f=a.y;let m=1/0;e=a;do{if(n>=e.x&&e.x>=u&&n!==e.x&&ZB(s<f?n:r,s,u,f,s<f?r:n,s,e.x,e.y)){const g=Math.abs(s-e.y)/(n-e.x);nA(e,i)&&(g<m||g===m&&(e.x>a.x||e.x===a.x&&JG(a,e)))&&(a=e,m=g)}e=e.next}while(e!==l);return a}function JG(i,t){return Ki(i.prev,i,t.prev)<0&&Ki(t.next,i,i.next)<0}function ZG(i,t,e,n){let s=i;do s.z===0&&(s.z=R5(s.x,s.y,t,e,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,$G(s)}function $G(i){let t,e=1;do{let n=i,s;i=null;let r=null;for(t=0;n;){t++;let a=n,l=0;for(let f=0;f<e&&(l++,a=a.nextZ,!!a);f++);let u=e;for(;l>0||u>0&&a;)l!==0&&(u===0||!a||n.z<=a.z)?(s=n,n=n.nextZ,l--):(s=a,a=a.nextZ,u--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;n=a}r.nextZ=null,e*=2}while(t>1);return i}function R5(i,t,e,n,s){return i=(i-e)*s|0,t=(t-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function tk(i){let t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function ZB(i,t,e,n,s,r,a,l){return(s-a)*(t-l)>=(i-a)*(r-l)&&(i-a)*(n-l)>=(e-a)*(t-l)&&(e-a)*(r-l)>=(s-a)*(n-l)}function u_(i,t,e,n,s,r,a,l){return!(i===a&&t===l)&&ZB(i,t,e,n,s,r,a,l)}function ek(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!nk(i,t)&&(nA(i,t)&&nA(t,i)&&ik(i,t)&&(Ki(i.prev,i,t.prev)||Ki(i,t.prev,t))||my(i,t)&&Ki(i.prev,i,i.next)>0&&Ki(t.prev,t,t.next)>0)}function Ki(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function my(i,t){return i.x===t.x&&i.y===t.y}function $B(i,t,e,n){const s=$S(Ki(i,t,e)),r=$S(Ki(i,t,n)),a=$S(Ki(e,n,i)),l=$S(Ki(e,n,t));return!!(s!==r&&a!==l||s===0&&ZS(i,e,t)||r===0&&ZS(i,n,t)||a===0&&ZS(e,i,n)||l===0&&ZS(e,t,n))}function ZS(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function $S(i){return i>0?1:i<0?-1:0}function nk(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&$B(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function nA(i,t){return Ki(i.prev,i,i.next)<0?Ki(i,t,i.next)>=0&&Ki(i,i.prev,t)>=0:Ki(i,t,i.prev)<0||Ki(i,i.next,t)<0}function ik(i,t){let e=i,n=!1;const s=(i.x+t.x)/2,r=(i.y+t.y)/2;do e.y>r!=e.next.y>r&&e.next.y!==e.y&&s<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==i);return n}function tO(i,t){const e=L5(i.i,i.x,i.y),n=L5(t.i,t.x,t.y),s=i.next,r=t.prev;return i.next=t,t.prev=i,e.next=s,s.prev=e,n.next=e,e.prev=n,r.next=n,n.prev=r,n}function U6(i,t,e,n){const s=L5(i,t,e);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function iA(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function L5(i,t,e){return{i,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function sk(i,t,e,n){let s=0;for(let r=t,a=e-n;r<e;r+=n)s+=(i[a]-i[r])*(i[r+1]+i[a+1]),a=r;return s}class rk{static triangulate(t,e,n=2){return kG(t,e,n)}}class Tc{static area(t){const e=t.length;let n=0;for(let s=e-1,r=0;r<e;s=r++)n+=t[s].x*t[r].y-t[r].x*t[s].y;return n*.5}static isClockWise(t){return Tc.area(t)<0}static triangulateShape(t,e){const n=[],s=[],r=[];P6(t),F6(n,t);let a=t.length;e.forEach(P6);for(let u=0;u<e.length;u++)s.push(a),a+=e[u].length,F6(n,e[u]);const l=rk.triangulate(n,s);for(let u=0;u<l.length;u+=3)r.push(l.slice(u,u+3));return r}}function P6(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function F6(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class fM extends $e{constructor(t=new Ug([new Pt(.5,.5),new Pt(-.5,.5),new Pt(-.5,-.5),new Pt(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,s=[],r=[];for(let l=0,u=t.length;l<u;l++){const f=t[l];a(f)}this.setAttribute("position",new Me(s,3)),this.setAttribute("uv",new Me(r,2)),this.computeVertexNormals();function a(l){const u=[],f=e.curveSegments!==void 0?e.curveSegments:12,m=e.steps!==void 0?e.steps:1,g=e.depth!==void 0?e.depth:1;let v=e.bevelEnabled!==void 0?e.bevelEnabled:!0,_=e.bevelThickness!==void 0?e.bevelThickness:.2,b=e.bevelSize!==void 0?e.bevelSize:_-.1,T=e.bevelOffset!==void 0?e.bevelOffset:0,E=e.bevelSegments!==void 0?e.bevelSegments:3;const S=e.extrudePath,w=e.UVGenerator!==void 0?e.UVGenerator:ak;let D,B=!1,N,I,F,z;S&&(D=S.getSpacedPoints(m),B=!0,v=!1,N=S.computeFrenetFrames(m,!1),I=new et,F=new et,z=new et),v||(E=0,_=0,b=0,T=0);const U=l.extractPoints(f);let P=U.shape;const X=U.holes;if(!Tc.isClockWise(P)){P=P.reverse();for(let Z=0,Kt=X.length;Z<Kt;Z++){const Ft=X[Z];Tc.isClockWise(Ft)&&(X[Z]=Ft.reverse())}}function it(Z){const Ft=10000000000000001e-36;let Vt=Z[0];for(let Gt=1;Gt<=Z.length;Gt++){const be=Gt%Z.length,qt=Z[be],$=qt.x-Vt.x,Q=qt.y-Vt.y,vt=$*$+Q*Q,It=Math.max(Math.abs(qt.x),Math.abs(qt.y),Math.abs(Vt.x),Math.abs(Vt.y)),jt=Ft*It*It;if(vt<=jt){Z.splice(be,1),Gt--;continue}Vt=qt}}it(P),X.forEach(it);const ut=X.length,dt=P;for(let Z=0;Z<ut;Z++){const Kt=X[Z];P=P.concat(Kt)}function j(Z,Kt,Ft){return Kt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(Kt,Ft)}const tt=P.length;function nt(Z,Kt,Ft){let Vt,Gt,be;const qt=Z.x-Kt.x,$=Z.y-Kt.y,Q=Ft.x-Z.x,vt=Ft.y-Z.y,It=qt*qt+$*$,jt=qt*vt-$*Q;if(Math.abs(jt)>Number.EPSILON){const Ot=Math.sqrt(It),ne=Math.sqrt(Q*Q+vt*vt),te=Kt.x-$/Ot,ge=Kt.y+qt/Ot,De=Ft.x-vt/ne,Jt=Ft.y+Q/ne,_e=((De-te)*vt-(Jt-ge)*Q)/(qt*vt-$*Q);Vt=te+qt*_e-Z.x,Gt=ge+$*_e-Z.y;const Se=Vt*Vt+Gt*Gt;if(Se<=2)return new Pt(Vt,Gt);be=Math.sqrt(Se/2)}else{let Ot=!1;qt>Number.EPSILON?Q>Number.EPSILON&&(Ot=!0):qt<-Number.EPSILON?Q<-Number.EPSILON&&(Ot=!0):Math.sign($)===Math.sign(vt)&&(Ot=!0),Ot?(Vt=-$,Gt=qt,be=Math.sqrt(It)):(Vt=qt,Gt=$,be=Math.sqrt(It/2))}return new Pt(Vt/be,Gt/be)}const _t=[];for(let Z=0,Kt=dt.length,Ft=Kt-1,Vt=Z+1;Z<Kt;Z++,Ft++,Vt++)Ft===Kt&&(Ft=0),Vt===Kt&&(Vt=0),_t[Z]=nt(dt[Z],dt[Ft],dt[Vt]);const J=[];let ot,xt=_t.concat();for(let Z=0,Kt=ut;Z<Kt;Z++){const Ft=X[Z];ot=[];for(let Vt=0,Gt=Ft.length,be=Gt-1,qt=Vt+1;Vt<Gt;Vt++,be++,qt++)be===Gt&&(be=0),qt===Gt&&(qt=0),ot[Vt]=nt(Ft[Vt],Ft[be],Ft[qt]);J.push(ot),xt=xt.concat(ot)}let Et;if(E===0)Et=Tc.triangulateShape(dt,X);else{const Z=[],Kt=[];for(let Ft=0;Ft<E;Ft++){const Vt=Ft/E,Gt=_*Math.cos(Vt*Math.PI/2),be=b*Math.sin(Vt*Math.PI/2)+T;for(let qt=0,$=dt.length;qt<$;qt++){const Q=j(dt[qt],_t[qt],be);ve(Q.x,Q.y,-Gt),Vt===0&&Z.push(Q)}for(let qt=0,$=ut;qt<$;qt++){const Q=X[qt];ot=J[qt];const vt=[];for(let It=0,jt=Q.length;It<jt;It++){const Ot=j(Q[It],ot[It],be);ve(Ot.x,Ot.y,-Gt),Vt===0&&vt.push(Ot)}Vt===0&&Kt.push(vt)}}Et=Tc.triangulateShape(Z,Kt)}const ct=Et.length,wt=b+T;for(let Z=0;Z<tt;Z++){const Kt=v?j(P[Z],xt[Z],wt):P[Z];B?(F.copy(N.normals[0]).multiplyScalar(Kt.x),I.copy(N.binormals[0]).multiplyScalar(Kt.y),z.copy(D[0]).add(F).add(I),ve(z.x,z.y,z.z)):ve(Kt.x,Kt.y,0)}for(let Z=1;Z<=m;Z++)for(let Kt=0;Kt<tt;Kt++){const Ft=v?j(P[Kt],xt[Kt],wt):P[Kt];B?(F.copy(N.normals[Z]).multiplyScalar(Ft.x),I.copy(N.binormals[Z]).multiplyScalar(Ft.y),z.copy(D[Z]).add(F).add(I),ve(z.x,z.y,z.z)):ve(Ft.x,Ft.y,g/m*Z)}for(let Z=E-1;Z>=0;Z--){const Kt=Z/E,Ft=_*Math.cos(Kt*Math.PI/2),Vt=b*Math.sin(Kt*Math.PI/2)+T;for(let Gt=0,be=dt.length;Gt<be;Gt++){const qt=j(dt[Gt],_t[Gt],Vt);ve(qt.x,qt.y,g+Ft)}for(let Gt=0,be=X.length;Gt<be;Gt++){const qt=X[Gt];ot=J[Gt];for(let $=0,Q=qt.length;$<Q;$++){const vt=j(qt[$],ot[$],Vt);B?ve(vt.x,vt.y+D[m-1].y,D[m-1].x+Ft):ve(vt.x,vt.y,g+Ft)}}}Bt(),Ut();function Bt(){const Z=s.length/3;if(v){let Kt=0,Ft=tt*Kt;for(let Vt=0;Vt<ct;Vt++){const Gt=Et[Vt];ee(Gt[2]+Ft,Gt[1]+Ft,Gt[0]+Ft)}Kt=m+E*2,Ft=tt*Kt;for(let Vt=0;Vt<ct;Vt++){const Gt=Et[Vt];ee(Gt[0]+Ft,Gt[1]+Ft,Gt[2]+Ft)}}else{for(let Kt=0;Kt<ct;Kt++){const Ft=Et[Kt];ee(Ft[2],Ft[1],Ft[0])}for(let Kt=0;Kt<ct;Kt++){const Ft=Et[Kt];ee(Ft[0]+tt*m,Ft[1]+tt*m,Ft[2]+tt*m)}}n.addGroup(Z,s.length/3-Z,0)}function Ut(){const Z=s.length/3;let Kt=0;Wt(dt,Kt),Kt+=dt.length;for(let Ft=0,Vt=X.length;Ft<Vt;Ft++){const Gt=X[Ft];Wt(Gt,Kt),Kt+=Gt.length}n.addGroup(Z,s.length/3-Z,1)}function Wt(Z,Kt){let Ft=Z.length;for(;--Ft>=0;){const Vt=Ft;let Gt=Ft-1;Gt<0&&(Gt=Z.length-1);for(let be=0,qt=m+E*2;be<qt;be++){const $=tt*be,Q=tt*(be+1),vt=Kt+Vt+$,It=Kt+Gt+$,jt=Kt+Gt+Q,Ot=Kt+Vt+Q;Ye(vt,It,jt,Ot)}}}function ve(Z,Kt,Ft){u.push(Z),u.push(Kt),u.push(Ft)}function ee(Z,Kt,Ft){we(Z),we(Kt),we(Ft);const Vt=s.length/3,Gt=w.generateTopUV(n,s,Vt-3,Vt-2,Vt-1);re(Gt[0]),re(Gt[1]),re(Gt[2])}function Ye(Z,Kt,Ft,Vt){we(Z),we(Kt),we(Vt),we(Kt),we(Ft),we(Vt);const Gt=s.length/3,be=w.generateSideWallUV(n,s,Gt-6,Gt-3,Gt-2,Gt-1);re(be[0]),re(be[1]),re(be[3]),re(be[1]),re(be[2]),re(be[3])}function we(Z){s.push(u[Z*3+0]),s.push(u[Z*3+1]),s.push(u[Z*3+2])}function re(Z){r.push(Z.x),r.push(Z.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return ok(e,n,t)}static fromJSON(t,e){const n=[];for(let r=0,a=t.shapes.length;r<a;r++){const l=e[t.shapes[r]];n.push(l)}const s=t.options.extrudePath;return s!==void 0&&(t.options.extrudePath=new tE[s.type]().fromJSON(s)),new fM(n,t.options)}}const ak={generateTopUV:function(i,t,e,n,s){const r=t[e*3],a=t[e*3+1],l=t[n*3],u=t[n*3+1],f=t[s*3],m=t[s*3+1];return[new Pt(r,a),new Pt(l,u),new Pt(f,m)]},generateSideWallUV:function(i,t,e,n,s,r){const a=t[e*3],l=t[e*3+1],u=t[e*3+2],f=t[n*3],m=t[n*3+1],g=t[n*3+2],v=t[s*3],_=t[s*3+1],b=t[s*3+2],T=t[r*3],E=t[r*3+1],S=t[r*3+2];return Math.abs(l-m)<Math.abs(a-f)?[new Pt(a,1-u),new Pt(f,1-g),new Pt(v,1-b),new Pt(T,1-S)]:[new Pt(l,1-u),new Pt(m,1-g),new Pt(_,1-b),new Pt(E,1-S)]}};function ok(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class dM extends cp{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new dM(t.radius,t.detail)}}class pM extends $e{constructor(t=[new Pt(0,-.5),new Pt(.5,0),new Pt(0,.5)],e=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:s},e=Math.floor(e),s=nn(s,0,Math.PI*2);const r=[],a=[],l=[],u=[],f=[],m=1/e,g=new et,v=new Pt,_=new et,b=new et,T=new et;let E=0,S=0;for(let w=0;w<=t.length-1;w++)switch(w){case 0:E=t[w+1].x-t[w].x,S=t[w+1].y-t[w].y,_.x=S*1,_.y=-E,_.z=S*0,T.copy(_),_.normalize(),u.push(_.x,_.y,_.z);break;case t.length-1:u.push(T.x,T.y,T.z);break;default:E=t[w+1].x-t[w].x,S=t[w+1].y-t[w].y,_.x=S*1,_.y=-E,_.z=S*0,b.copy(_),_.x+=T.x,_.y+=T.y,_.z+=T.z,_.normalize(),u.push(_.x,_.y,_.z),T.copy(b)}for(let w=0;w<=e;w++){const D=n+w*m*s,B=Math.sin(D),N=Math.cos(D);for(let I=0;I<=t.length-1;I++){g.x=t[I].x*B,g.y=t[I].y,g.z=t[I].x*N,a.push(g.x,g.y,g.z),v.x=w/e,v.y=I/(t.length-1),l.push(v.x,v.y);const F=u[3*I+0]*B,z=u[3*I+1],U=u[3*I+0]*N;f.push(F,z,U)}}for(let w=0;w<e;w++)for(let D=0;D<t.length-1;D++){const B=D+w*t.length,N=B,I=B+t.length,F=B+t.length+1,z=B+1;r.push(N,I,z),r.push(F,z,I)}this.setIndex(r),this.setAttribute("position",new Me(a,3)),this.setAttribute("uv",new Me(l,2)),this.setAttribute("normal",new Me(f,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new pM(t.points,t.segments,t.phiStart,t.phiLength)}}class Nx extends cp{constructor(t=1,e=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Nx(t.radius,t.detail)}}class Ey extends $e{constructor(t=1,e=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:s};const r=t/2,a=e/2,l=Math.floor(n),u=Math.floor(s),f=l+1,m=u+1,g=t/l,v=e/u,_=[],b=[],T=[],E=[];for(let S=0;S<m;S++){const w=S*v-a;for(let D=0;D<f;D++){const B=D*g-r;b.push(B,-w,0),T.push(0,0,1),E.push(D/l),E.push(1-S/u)}}for(let S=0;S<u;S++)for(let w=0;w<l;w++){const D=w+f*S,B=w+f*(S+1),N=w+1+f*(S+1),I=w+1+f*S;_.push(D,B,I),_.push(B,N,I)}this.setIndex(_),this.setAttribute("position",new Me(b,3)),this.setAttribute("normal",new Me(T,3)),this.setAttribute("uv",new Me(E,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ey(t.width,t.height,t.widthSegments,t.heightSegments)}}class mM extends $e{constructor(t=.5,e=1,n=32,s=1,r=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:s,thetaStart:r,thetaLength:a},n=Math.max(3,n),s=Math.max(1,s);const l=[],u=[],f=[],m=[];let g=t;const v=(e-t)/s,_=new et,b=new Pt;for(let T=0;T<=s;T++){for(let E=0;E<=n;E++){const S=r+E/n*a;_.x=g*Math.cos(S),_.y=g*Math.sin(S),u.push(_.x,_.y,_.z),f.push(0,0,1),b.x=(_.x/e+1)/2,b.y=(_.y/e+1)/2,m.push(b.x,b.y)}g+=v}for(let T=0;T<s;T++){const E=T*(n+1);for(let S=0;S<n;S++){const w=S+E,D=w,B=w+n+1,N=w+n+2,I=w+1;l.push(D,B,I),l.push(B,N,I)}}this.setIndex(l),this.setAttribute("position",new Me(u,3)),this.setAttribute("normal",new Me(f,3)),this.setAttribute("uv",new Me(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new mM(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class gM extends $e{constructor(t=new Ug([new Pt(0,.5),new Pt(-.5,-.5),new Pt(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],s=[],r=[],a=[];let l=0,u=0;if(Array.isArray(t)===!1)f(t);else for(let m=0;m<t.length;m++)f(t[m]),this.addGroup(l,u,m),l+=u,u=0;this.setIndex(n),this.setAttribute("position",new Me(s,3)),this.setAttribute("normal",new Me(r,3)),this.setAttribute("uv",new Me(a,2));function f(m){const g=s.length/3,v=m.extractPoints(e);let _=v.shape;const b=v.holes;Tc.isClockWise(_)===!1&&(_=_.reverse());for(let E=0,S=b.length;E<S;E++){const w=b[E];Tc.isClockWise(w)===!0&&(b[E]=w.reverse())}const T=Tc.triangulateShape(_,b);for(let E=0,S=b.length;E<S;E++){const w=b[E];_=_.concat(w)}for(let E=0,S=_.length;E<S;E++){const w=_[E];s.push(w.x,w.y,0),r.push(0,0,1),a.push(w.x,w.y)}for(let E=0,S=T.length;E<S;E++){const w=T[E],D=w[0]+g,B=w[1]+g,N=w[2]+g;n.push(D,B,N),u+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return lk(e,t)}static fromJSON(t,e){const n=[];for(let s=0,r=t.shapes.length;s<r;s++){const a=e[t.shapes[s]];n.push(a)}return new gM(n,t.curveSegments)}}function lk(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const s=i[e];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t}class Ix extends $e{constructor(t=1,e=32,n=16,s=0,r=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:s,phiLength:r,thetaStart:a,thetaLength:l},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const u=Math.min(a+l,Math.PI);let f=0;const m=[],g=new et,v=new et,_=[],b=[],T=[],E=[];for(let S=0;S<=n;S++){const w=[],D=S/n;let B=0;S===0&&a===0?B=.5/e:S===n&&u===Math.PI&&(B=-.5/e);for(let N=0;N<=e;N++){const I=N/e;g.x=-t*Math.cos(s+I*r)*Math.sin(a+D*l),g.y=t*Math.cos(a+D*l),g.z=t*Math.sin(s+I*r)*Math.sin(a+D*l),b.push(g.x,g.y,g.z),v.copy(g).normalize(),T.push(v.x,v.y,v.z),E.push(I+B,1-D),w.push(f++)}m.push(w)}for(let S=0;S<n;S++)for(let w=0;w<e;w++){const D=m[S][w+1],B=m[S][w],N=m[S+1][w],I=m[S+1][w+1];(S!==0||a>0)&&_.push(D,B,I),(S!==n-1||u<Math.PI)&&_.push(B,N,I)}this.setIndex(_),this.setAttribute("position",new Me(b,3)),this.setAttribute("normal",new Me(T,3)),this.setAttribute("uv",new Me(E,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ix(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class vM extends cp{constructor(t=1,e=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new vM(t.radius,t.detail)}}class yM extends $e{constructor(t=1,e=.4,n=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:s,arc:r},n=Math.floor(n),s=Math.floor(s);const a=[],l=[],u=[],f=[],m=new et,g=new et,v=new et;for(let _=0;_<=n;_++)for(let b=0;b<=s;b++){const T=b/s*r,E=_/n*Math.PI*2;g.x=(t+e*Math.cos(E))*Math.cos(T),g.y=(t+e*Math.cos(E))*Math.sin(T),g.z=e*Math.sin(E),l.push(g.x,g.y,g.z),m.x=t*Math.cos(T),m.y=t*Math.sin(T),v.subVectors(g,m).normalize(),u.push(v.x,v.y,v.z),f.push(b/s),f.push(_/n)}for(let _=1;_<=n;_++)for(let b=1;b<=s;b++){const T=(s+1)*_+b-1,E=(s+1)*(_-1)+b-1,S=(s+1)*(_-1)+b,w=(s+1)*_+b;a.push(T,E,w),a.push(E,S,w)}this.setIndex(a),this.setAttribute("position",new Me(l,3)),this.setAttribute("normal",new Me(u,3)),this.setAttribute("uv",new Me(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new yM(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class _M extends $e{constructor(t=1,e=.4,n=64,s=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:s,p:r,q:a},n=Math.floor(n),s=Math.floor(s);const l=[],u=[],f=[],m=[],g=new et,v=new et,_=new et,b=new et,T=new et,E=new et,S=new et;for(let D=0;D<=n;++D){const B=D/n*r*Math.PI*2;w(B,r,a,t,_),w(B+.01,r,a,t,b),E.subVectors(b,_),S.addVectors(b,_),T.crossVectors(E,S),S.crossVectors(T,E),T.normalize(),S.normalize();for(let N=0;N<=s;++N){const I=N/s*Math.PI*2,F=-e*Math.cos(I),z=e*Math.sin(I);g.x=_.x+(F*S.x+z*T.x),g.y=_.y+(F*S.y+z*T.y),g.z=_.z+(F*S.z+z*T.z),u.push(g.x,g.y,g.z),v.subVectors(g,_).normalize(),f.push(v.x,v.y,v.z),m.push(D/n),m.push(N/s)}}for(let D=1;D<=n;D++)for(let B=1;B<=s;B++){const N=(s+1)*(D-1)+(B-1),I=(s+1)*D+(B-1),F=(s+1)*D+B,z=(s+1)*(D-1)+B;l.push(N,I,z),l.push(I,F,z)}this.setIndex(l),this.setAttribute("position",new Me(u,3)),this.setAttribute("normal",new Me(f,3)),this.setAttribute("uv",new Me(m,2));function w(D,B,N,I,F){const z=Math.cos(D),U=Math.sin(D),P=N/B*D,X=Math.cos(P);F.x=I*(2+X)*.5*z,F.y=I*(2+X)*U*.5,F.z=I*Math.sin(P)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new _M(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class AM extends $e{constructor(t=new Ww(new et(-1,-1,0),new et(-1,1,0),new et(1,1,0)),e=64,n=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:s,closed:r};const a=t.computeFrenetFrames(e,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new et,u=new et,f=new Pt;let m=new et;const g=[],v=[],_=[],b=[];T(),this.setIndex(b),this.setAttribute("position",new Me(g,3)),this.setAttribute("normal",new Me(v,3)),this.setAttribute("uv",new Me(_,2));function T(){for(let D=0;D<e;D++)E(D);E(r===!1?e:0),w(),S()}function E(D){m=t.getPointAt(D/e,m);const B=a.normals[D],N=a.binormals[D];for(let I=0;I<=s;I++){const F=I/s*Math.PI*2,z=Math.sin(F),U=-Math.cos(F);u.x=U*B.x+z*N.x,u.y=U*B.y+z*N.y,u.z=U*B.z+z*N.z,u.normalize(),v.push(u.x,u.y,u.z),l.x=m.x+n*u.x,l.y=m.y+n*u.y,l.z=m.z+n*u.z,g.push(l.x,l.y,l.z)}}function S(){for(let D=1;D<=e;D++)for(let B=1;B<=s;B++){const N=(s+1)*(D-1)+(B-1),I=(s+1)*D+(B-1),F=(s+1)*D+B,z=(s+1)*(D-1)+B;b.push(N,I,z),b.push(I,F,z)}}function w(){for(let D=0;D<=e;D++)for(let B=0;B<=s;B++)f.x=D/e,f.y=B/s,_.push(f.x,f.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new AM(new tE[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class eO extends $e{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],n=new Set,s=new et,r=new et;if(t.index!==null){const a=t.attributes.position,l=t.index;let u=t.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,m=u.length;f<m;++f){const g=u[f],v=g.start,_=g.count;for(let b=v,T=v+_;b<T;b+=3)for(let E=0;E<3;E++){const S=l.getX(b+E),w=l.getX(b+(E+1)%3);s.fromBufferAttribute(a,S),r.fromBufferAttribute(a,w),H6(s,r,n)===!0&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}}else{const a=t.attributes.position;for(let l=0,u=a.count/3;l<u;l++)for(let f=0;f<3;f++){const m=3*l+f,g=3*l+(f+1)%3;s.fromBufferAttribute(a,m),r.fromBufferAttribute(a,g),H6(s,r,n)===!0&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new Me(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function H6(i,t,e){const n=`${i.x},${i.y},${i.z}-${t.x},${t.y},${t.z}`,s=`${t.x},${t.y},${t.z}-${i.x},${i.y},${i.z}`;return e.has(n)===!0||e.has(s)===!0?!1:(e.add(n),e.add(s),!0)}var z6=Object.freeze({__proto__:null,BoxGeometry:s0,CapsuleGeometry:lM,CircleGeometry:cM,ConeGeometry:Ox,CylinderGeometry:Bx,DodecahedronGeometry:uM,EdgesGeometry:jB,ExtrudeGeometry:fM,IcosahedronGeometry:dM,LatheGeometry:pM,OctahedronGeometry:Nx,PlaneGeometry:Ey,PolyhedronGeometry:cp,RingGeometry:mM,ShapeGeometry:gM,SphereGeometry:Ix,TetrahedronGeometry:vM,TorusGeometry:yM,TorusKnotGeometry:_M,TubeGeometry:AM,WireframeGeometry:eO});class nO extends gs{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new oe(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class iO extends Ks{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ux extends gs{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new oe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lp,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Dl extends Ux{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Pt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return nn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new oe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new oe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new oe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class sO extends gs{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new oe(16777215),this.specular=new oe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lp,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=Ex,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class rO extends gs{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new oe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lp,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class Jw extends gs{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lp,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class aO extends gs{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lp,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=Ex,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Zw extends gs{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=op,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class $w extends gs{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class oO extends gs{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new oe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lp,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class lO extends aa{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Nm(i,t){return!i||i.constructor===t?i:typeof t.BYTES_PER_ELEMENT=="number"?new t(i):Array.prototype.slice.call(i)}function cO(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function uO(i){function t(s,r){return i[s]-i[r]}const e=i.length,n=new Array(e);for(let s=0;s!==e;++s)n[s]=s;return n.sort(t),n}function D5(i,t,e){const n=i.length,s=new i.constructor(n);for(let r=0,a=0;a!==n;++r){const l=e[r]*t;for(let u=0;u!==t;++u)s[a++]=i[l+u]}return s}function t7(i,t,e,n){let s=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[s++];if(r===void 0)return;let a=r[n];if(a!==void 0)if(Array.isArray(a))do a=r[n],a!==void 0&&(t.push(r.time),e.push(...a)),r=i[s++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[n],a!==void 0&&(t.push(r.time),a.toArray(e,e.length)),r=i[s++];while(r!==void 0);else do a=r[n],a!==void 0&&(t.push(r.time),e.push(a)),r=i[s++];while(r!==void 0)}function ck(i,t,e,n,s=30){const r=i.clone();r.name=t;const a=[];for(let u=0;u<r.tracks.length;++u){const f=r.tracks[u],m=f.getValueSize(),g=[],v=[];for(let _=0;_<f.times.length;++_){const b=f.times[_]*s;if(!(b<e||b>=n)){g.push(f.times[_]);for(let T=0;T<m;++T)v.push(f.values[_*m+T])}}g.length!==0&&(f.times=Nm(g,f.times.constructor),f.values=Nm(v,f.values.constructor),a.push(f))}r.tracks=a;let l=1/0;for(let u=0;u<r.tracks.length;++u)l>r.tracks[u].times[0]&&(l=r.tracks[u].times[0]);for(let u=0;u<r.tracks.length;++u)r.tracks[u].shift(-1*l);return r.resetDuration(),r}function uk(i,t=0,e=i,n=30){n<=0&&(n=30);const s=e.tracks.length,r=t/n;for(let a=0;a<s;++a){const l=e.tracks[a],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const f=i.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===u});if(f===void 0)continue;let m=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let v=0;const _=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=_/3);const b=l.times.length-1;let T;if(r<=l.times[0]){const S=m,w=g-m;T=l.values.slice(S,w)}else if(r>=l.times[b]){const S=b*g+m,w=S+g-m;T=l.values.slice(S,w)}else{const S=l.createInterpolant(),w=m,D=g-m;S.evaluate(r),T=S.resultBuffer.slice(w,D)}u==="quaternion"&&new Br().fromArray(T).normalize().conjugate().toArray(T);const E=f.times.length;for(let S=0;S<E;++S){const w=S*_+v;if(u==="quaternion")Br.multiplyQuaternionsFlat(f.values,w,T,0,f.values,w);else{const D=_-v*2;for(let B=0;B<D;++B)f.values[w+B]-=T[B]}}}return i.blendMode=Nw,i}class hk{static convertArray(t,e){return Nm(t,e)}static isTypedArray(t){return cO(t)}static getKeyframeOrder(t){return uO(t)}static sortedArray(t,e,n){return D5(t,e,n)}static flattenJSON(t,e,n,s){t7(t,e,n,s)}static subclip(t,e,n,s,r=30){return ck(t,e,n,s,r)}static makeClipAdditive(t,e=0,n=t,s=30){return uk(t,e,n,s)}}class My{constructor(t,e,n,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,s=e[n],r=e[n-1];t:{e:{let a;n:{i:if(!(t<s)){for(let l=n+2;;){if(s===void 0){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(r=s,s=e[++n],t<s)break e}a=e.length;break n}if(!(t>=r)){const l=e[1];t<l&&(n=2,r=l);for(let u=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(s=r,r=e[--n-1],t>=r)break e}a=n,n=0;break n}break t}for(;n<a;){const l=n+a>>>1;t<e[l]?a=l:n=l+1}if(s=e[n],r=e[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,s)}return this.interpolate_(n,r,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=t*s;for(let a=0;a!==s;++a)e[a]=n[r+a];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class hO extends My{constructor(t,e,n,s){super(t,e,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Bm,endingEnd:Bm}}intervalChanged_(t,e,n){const s=this.parameterPositions;let r=t-2,a=t+1,l=s[r],u=s[a];if(l===void 0)switch(this.getSettings_().endingStart){case Om:r=t,l=2*e-n;break;case Y_:r=s.length-2,l=e+s[r]-s[r+1];break;default:r=t,l=n}if(u===void 0)switch(this.getSettings_().endingEnd){case Om:a=t,u=2*n-e;break;case Y_:a=1,u=n+s[1]-s[0];break;default:a=t-1,u=e}const f=(n-e)*.5,m=this.valueSize;this._weightPrev=f/(e-l),this._weightNext=f/(u-n),this._offsetPrev=r*m,this._offsetNext=a*m}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=t*l,f=u-l,m=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,_=this._weightNext,b=(n-e)/(s-e),T=b*b,E=T*b,S=-v*E+2*v*T-v*b,w=(1+v)*E+(-1.5-2*v)*T+(-.5+v)*b+1,D=(-1-_)*E+(1.5+_)*T+.5*b,B=_*E-_*T;for(let N=0;N!==l;++N)r[N]=S*a[m+N]+w*a[f+N]+D*a[u+N]+B*a[g+N];return r}}class e7 extends My{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=t*l,f=u-l,m=(n-e)/(s-e),g=1-m;for(let v=0;v!==l;++v)r[v]=a[f+v]*g+a[u+v]*m;return r}}class fO extends My{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t){return this.copySampleValue_(t-1)}}class Bl{constructor(t,e,n,s){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Nm(e,this.TimeBufferType),this.values=Nm(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Nm(t.times,Array),values:Nm(t.values,Array)};const s=t.getInterpolation();s!==t.DefaultInterpolation&&(n.interpolation=s)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new fO(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new e7(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new hO(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case uy:e=this.InterpolantFactoryMethodDiscrete;break;case hy:e=this.InterpolantFactoryMethodLinear;break;case R4:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return uy;case this.InterpolantFactoryMethodLinear:return hy;case this.InterpolantFactoryMethodSmooth:return R4}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,s=e.length;n!==s;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,s=e.length;n!==s;++n)e[n]*=t}return this}trim(t,e){const n=this.times,s=n.length;let r=0,a=s-1;for(;r!==s&&n[r]<t;)++r;for(;a!==-1&&n[a]>e;)--a;if(++a,r!==0||a!==s){r>=a&&(a=Math.max(a,1),r=a-1);const l=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*l,a*l)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,s=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let l=0;l!==r;l++){const u=n[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),t=!1;break}if(a!==null&&a>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,a),t=!1;break}a=u}if(s!==void 0&&cO(s))for(let l=0,u=s.length;l!==u;++l){const f=s[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===R4,r=t.length-1;let a=1;for(let l=1;l<r;++l){let u=!1;const f=t[l],m=t[l+1];if(f!==m&&(l!==1||f!==t[0]))if(s)u=!0;else{const g=l*n,v=g-n,_=g+n;for(let b=0;b!==n;++b){const T=e[g+b];if(T!==e[v+b]||T!==e[_+b]){u=!0;break}}}if(u){if(l!==a){t[a]=t[l];const g=l*n,v=a*n;for(let _=0;_!==n;++_)e[v+_]=e[g+_]}++a}}if(r>0){t[a]=t[r];for(let l=r*n,u=a*n,f=0;f!==n;++f)e[u+f]=e[l+f];++a}return a!==t.length?(this.times=t.slice(0,a),this.values=e.slice(0,a*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=this.constructor,s=new n(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}}Bl.prototype.ValueTypeName="";Bl.prototype.TimeBufferType=Float32Array;Bl.prototype.ValueBufferType=Float32Array;Bl.prototype.DefaultInterpolation=hy;class r0 extends Bl{constructor(t,e,n){super(t,e,n)}}r0.prototype.ValueTypeName="bool";r0.prototype.ValueBufferType=Array;r0.prototype.DefaultInterpolation=uy;r0.prototype.InterpolantFactoryMethodLinear=void 0;r0.prototype.InterpolantFactoryMethodSmooth=void 0;class n7 extends Bl{constructor(t,e,n,s){super(t,e,n,s)}}n7.prototype.ValueTypeName="color";class Vg extends Bl{constructor(t,e,n,s){super(t,e,n,s)}}Vg.prototype.ValueTypeName="number";class dO extends My{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=(n-e)/(s-e);let f=t*l;for(let m=f+l;f!==m;f+=4)Br.slerpFlat(r,0,a,f-l,a,f,u);return r}}class ep extends Bl{constructor(t,e,n,s){super(t,e,n,s)}InterpolantFactoryMethodLinear(t){return new dO(this.times,this.values,this.getValueSize(),t)}}ep.prototype.ValueTypeName="quaternion";ep.prototype.InterpolantFactoryMethodSmooth=void 0;class a0 extends Bl{constructor(t,e,n){super(t,e,n)}}a0.prototype.ValueTypeName="string";a0.prototype.ValueBufferType=Array;a0.prototype.DefaultInterpolation=uy;a0.prototype.InterpolantFactoryMethodLinear=void 0;a0.prototype.InterpolantFactoryMethodSmooth=void 0;class np extends Bl{constructor(t,e,n,s){super(t,e,n,s)}}np.prototype.ValueTypeName="vector";class Qg{constructor(t="",e=-1,n=[],s=$E){this.name=t,this.tracks=n,this.duration=e,this.blendMode=s,this.uuid=Go(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,s=1/(t.fps||1);for(let a=0,l=n.length;a!==l;++a)e.push(dk(n[a]).scale(s));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,s={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,a=n.length;r!==a;++r)e.push(Bl.toJSON(n[r]));return s}static CreateFromMorphTargetSequence(t,e,n,s){const r=e.length,a=[];for(let l=0;l<r;l++){let u=[],f=[];u.push((l+r-1)%r,l,(l+1)%r),f.push(0,1,0);const m=uO(u);u=D5(u,1,m),f=D5(f,1,m),!s&&u[0]===0&&(u.push(r),f.push(f[0])),a.push(new Vg(".morphTargetInfluences["+e[l].name+"]",u,f).scale(1/n))}return new this(t,-1,a)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const s=t;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===e)return n[s];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const s={},r=/^([\w-]*?)([\d]+)$/;for(let l=0,u=t.length;l<u;l++){const f=t[l],m=f.name.match(r);if(m&&m.length>1){const g=m[1];let v=s[g];v||(s[g]=v=[]),v.push(f)}}const a=[];for(const l in s)a.push(this.CreateFromMorphTargetSequence(l,s[l],e,n));return a}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(g,v,_,b,T){if(_.length!==0){const E=[],S=[];t7(_,E,S,b),E.length!==0&&T.push(new g(v,E,S))}},s=[],r=t.name||"default",a=t.fps||30,l=t.blendMode;let u=t.length||-1;const f=t.hierarchy||[];for(let g=0;g<f.length;g++){const v=f[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const _={};let b;for(b=0;b<v.length;b++)if(v[b].morphTargets)for(let T=0;T<v[b].morphTargets.length;T++)_[v[b].morphTargets[T]]=-1;for(const T in _){const E=[],S=[];for(let w=0;w!==v[b].morphTargets.length;++w){const D=v[b];E.push(D.time),S.push(D.morphTarget===T?1:0)}s.push(new Vg(".morphTargetInfluence["+T+"]",E,S))}u=_.length*a}else{const _=".bones["+e[g].name+"]";n(np,_+".position",v,"pos",s),n(ep,_+".quaternion",v,"rot",s),n(np,_+".scale",v,"scl",s)}}return s.length===0?null:new this(r,u,s,l)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,s=t.length;n!==s;++n){const r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function fk(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Vg;case"vector":case"vector2":case"vector3":case"vector4":return np;case"color":return n7;case"quaternion":return ep;case"bool":case"boolean":return r0;case"string":return a0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function dk(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=fk(i.type);if(i.times===void 0){const e=[],n=[];t7(i.keys,e,n,"value"),i.times=e,i.values=n}return t.parse!==void 0?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const Kh={enabled:!1,files:{},add:function(i,t){this.enabled!==!1&&(this.files[i]=t)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class i7{constructor(t,e,n){const s=this;let r=!1,a=0,l=0,u;const f=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(m){l++,r===!1&&s.onStart!==void 0&&s.onStart(m,a,l),r=!0},this.itemEnd=function(m){a++,s.onProgress!==void 0&&s.onProgress(m,a,l),a===l&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(m){s.onError!==void 0&&s.onError(m)},this.resolveURL=function(m){return u?u(m):m},this.setURLModifier=function(m){return u=m,this},this.addHandler=function(m,g){return f.push(m,g),this},this.removeHandler=function(m){const g=f.indexOf(m);return g!==-1&&f.splice(g,2),this},this.getHandler=function(m){for(let g=0,v=f.length;g<v;g+=2){const _=f[g],b=f[g+1];if(_.global&&(_.lastIndex=0),_.test(m))return b}return null}}}const q1=new i7;let oa=class{constructor(t){this.manager=t!==void 0?t:q1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(s,r){n.load(t,s,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}};oa.DEFAULT_MATERIAL_NAME="__DEFAULT";const ph={};class pk extends Error{constructor(t,e){super(t),this.response=e}}class Qo extends oa{constructor(t){super(t),this.mimeType="",this.responseType=""}load(t,e,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Kh.get(t);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(ph[t]!==void 0){ph[t].push({onLoad:e,onProgress:n,onError:s});return}ph[t]=[],ph[t].push({onLoad:e,onProgress:n,onError:s});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(a).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const m=ph[t],g=f.body.getReader(),v=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),_=v?parseInt(v):0,b=_!==0;let T=0;const E=new ReadableStream({start(S){w();function w(){g.read().then(({done:D,value:B})=>{if(D)S.close();else{T+=B.byteLength;const N=new ProgressEvent("progress",{lengthComputable:b,loaded:T,total:_});for(let I=0,F=m.length;I<F;I++){const z=m[I];z.onProgress&&z.onProgress(N)}S.enqueue(B),w()}},D=>{S.error(D)})}}});return new Response(E)}else throw new pk(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(m=>new DOMParser().parseFromString(m,l));case"json":return f.json();default:if(l==="")return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,_=new TextDecoder(v);return f.arrayBuffer().then(b=>_.decode(b))}}}).then(f=>{Kh.add(t,f);const m=ph[t];delete ph[t];for(let g=0,v=m.length;g<v;g++){const _=m[g];_.onLoad&&_.onLoad(f)}}).catch(f=>{const m=ph[t];if(m===void 0)throw this.manager.itemError(t),f;delete ph[t];for(let g=0,v=m.length;g<v;g++){const _=m[g];_.onError&&_.onError(f)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class mk extends oa{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new Qo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(u){s?s(u):console.error(u),r.manager.itemError(t)}},n,s)}parse(t){const e=[];for(let n=0;n<t.length;n++){const s=Qg.parse(t[n]);e.push(s)}return e}}class gk extends oa{constructor(t){super(t)}load(t,e,n,s){const r=this,a=[],l=new oM,u=new Qo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(r.withCredentials);let f=0;function m(g){u.load(t[g],function(v){const _=r.parse(v,!0);a[g]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},f+=1,f===6&&(_.mipmapCount===1&&(l.minFilter=Ni),l.image=a,l.format=_.format,l.needsUpdate=!0,e&&e(l))},n,s)}if(Array.isArray(t))for(let g=0,v=t.length;g<v;++g)m(g);else u.load(t,function(g){const v=r.parse(g,!0);if(v.isCubemap){const _=v.mipmaps.length/v.mipmapCount;for(let b=0;b<_;b++){a[b]={mipmaps:[]};for(let T=0;T<v.mipmapCount;T++)a[b].mipmaps.push(v.mipmaps[b*v.mipmapCount+T]),a[b].format=v.format,a[b].width=v.width,a[b].height=v.height}l.image=a}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=Ni),l.format=v.format,l.needsUpdate=!0,e&&e(l)},n,s);return l}}class sA extends oa{constructor(t){super(t)}load(t,e,n,s){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=Kh.get(t);if(a!==void 0)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;const l=$_("img");function u(){m(),Kh.add(t,this),e&&e(this),r.manager.itemEnd(t)}function f(g){m(),s&&s(g),r.manager.itemError(t),r.manager.itemEnd(t)}function m(){l.removeEventListener("load",u,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",f,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),r.manager.itemStart(t),l.src=t,l}}class vk extends oa{constructor(t){super(t)}load(t,e,n,s){const r=new wx;r.colorSpace=Kn;const a=new sA(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function u(f){a.load(t[f],function(m){r.images[f]=m,l++,l===6&&(r.needsUpdate=!0,e&&e(r))},void 0,s)}for(let f=0;f<t.length;++f)u(f);return r}}class yk extends oa{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new Uu,l=new Qo(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(r.withCredentials),l.load(t,function(u){let f;try{f=r.parse(u)}catch(m){if(s!==void 0)s(m);else{console.error(m);return}}f.image!==void 0?a.image=f.image:f.data!==void 0&&(a.image.width=f.width,a.image.height=f.height,a.image.data=f.data),a.wrapS=f.wrapS!==void 0?f.wrapS:Ho,a.wrapT=f.wrapT!==void 0?f.wrapT:Ho,a.magFilter=f.magFilter!==void 0?f.magFilter:Ni,a.minFilter=f.minFilter!==void 0?f.minFilter:Ni,a.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(a.colorSpace=f.colorSpace),f.flipY!==void 0&&(a.flipY=f.flipY),f.format!==void 0&&(a.format=f.format),f.type!==void 0&&(a.type=f.type),f.mipmaps!==void 0&&(a.mipmaps=f.mipmaps,a.minFilter=Tl),f.mipmapCount===1&&(a.minFilter=Ni),f.generateMipmaps!==void 0&&(a.generateMipmaps=f.generateMipmaps),a.needsUpdate=!0,e&&e(a,f)},n,s),a}}class pO extends oa{constructor(t){super(t)}load(t,e,n,s){const r=new wi,a=new sA(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(l){r.image=l,r.needsUpdate=!0,e!==void 0&&e(r)},n,s),r}}let up=class extends Ln{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new oe(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}};class mO extends up{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ln.DEFAULT_UP),this.updateMatrix(),this.groundColor=new oe(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const _8=new Ne,G6=new et,k6=new et;class s7{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Pt(512,512),this.mapType=Ws,this.map=null,this.mapPass=null,this.matrix=new Ne,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Sy,this._frameExtents=new Pt(1,1),this._viewportCount=1,this._viewports=[new On(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;G6.setFromMatrixPosition(t.matrixWorld),e.position.copy(G6),k6.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(k6),e.updateMatrixWorld(),_8.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_8),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(_8)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class _k extends s7{constructor(){super(new Rs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=fy*2*t.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;(n!==e.fov||s!==e.aspect||r!==e.far)&&(e.fov=n,e.aspect=s,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class r7 extends up{constructor(t,e,n=0,s=Math.PI/3,r=0,a=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ln.DEFAULT_UP),this.updateMatrix(),this.target=new Ln,this.distance=n,this.angle=s,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new _k}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const V6=new Ne,e_=new et,A8=new et;class Ak extends s7{constructor(){super(new Rs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Pt(4,2),this._viewportCount=6,this._viewports=[new On(2,1,1,1),new On(0,1,1,1),new On(3,1,1,1),new On(1,1,1,1),new On(3,0,1,1),new On(1,0,1,1)],this._cubeDirections=[new et(1,0,0),new et(-1,0,0),new et(0,0,1),new et(0,0,-1),new et(0,1,0),new et(0,-1,0)],this._cubeUps=[new et(0,1,0),new et(0,1,0),new et(0,1,0),new et(0,1,0),new et(0,0,1),new et(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,s=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),e_.setFromMatrixPosition(t.matrixWorld),n.position.copy(e_),A8.copy(n.position),A8.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(A8),n.updateMatrixWorld(),s.makeTranslation(-e_.x,-e_.y,-e_.z),V6.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(V6)}}class a7 extends up{constructor(t,e,n=0,s=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new Ak}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Ty extends Cx{constructor(t=-1,e=1,n=1,s=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=s,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,s,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-t,a=n+t,l=s+e,u=s-e;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=f*this.view.offsetX,a=r+f*this.view.width,l-=m*this.view.offsetY,u=l-m*this.view.height}this.projectionMatrix.makeOrthographic(r,a,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class xk extends s7{constructor(){super(new Ty(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class o7 extends up{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ln.DEFAULT_UP),this.updateMatrix(),this.target=new Ln,this.shadow=new xk}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class gO extends up{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class vO extends up{constructor(t,e,n=10,s=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class yO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new et)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,s=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*s),e.addScaledVector(a[2],.488603*r),e.addScaledVector(a[3],.488603*n),e.addScaledVector(a[4],1.092548*(n*s)),e.addScaledVector(a[5],1.092548*(s*r)),e.addScaledVector(a[6],.315392*(3*r*r-1)),e.addScaledVector(a[7],1.092548*(n*r)),e.addScaledVector(a[8],.546274*(n*n-s*s)),e}getIrradianceAt(t,e){const n=t.x,s=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],2*.511664*s),e.addScaledVector(a[2],2*.511664*r),e.addScaledVector(a[3],2*.511664*n),e.addScaledVector(a[4],2*.429043*n*s),e.addScaledVector(a[5],2*.429043*s*r),e.addScaledVector(a[6],.743125*r*r-.247708),e.addScaledVector(a[7],2*.429043*n*r),e.addScaledVector(a[8],.429043*(n*n-s*s)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(t,e+s*3);return this}toArray(t=[],e=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(t,e+s*3);return t}static getBasisAt(t,e){const n=t.x,s=t.y,r=t.z;e[0]=.282095,e[1]=.488603*s,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*s,e[5]=1.092548*s*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-s*s)}}class _O extends up{constructor(t=new yO,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class xM extends oa{constructor(t){super(t),this.textures={}}load(t,e,n,s){const r=this,a=new Qo(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(u){s?s(u):console.error(u),r.manager.itemError(t)}},n,s)}parse(t){const e=this.textures;function n(r){return e[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),e[r]}const s=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(s.uuid=t.uuid),t.name!==void 0&&(s.name=t.name),t.color!==void 0&&s.color!==void 0&&s.color.setHex(t.color),t.roughness!==void 0&&(s.roughness=t.roughness),t.metalness!==void 0&&(s.metalness=t.metalness),t.sheen!==void 0&&(s.sheen=t.sheen),t.sheenColor!==void 0&&(s.sheenColor=new oe().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(s.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(t.emissive),t.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(t.specular),t.specularIntensity!==void 0&&(s.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(s.shininess=t.shininess),t.clearcoat!==void 0&&(s.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(s.dispersion=t.dispersion),t.iridescence!==void 0&&(s.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(s.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(s.transmission=t.transmission),t.thickness!==void 0&&(s.thickness=t.thickness),t.attenuationDistance!==void 0&&(s.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(s.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(s.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(s.fog=t.fog),t.flatShading!==void 0&&(s.flatShading=t.flatShading),t.blending!==void 0&&(s.blending=t.blending),t.combine!==void 0&&(s.combine=t.combine),t.side!==void 0&&(s.side=t.side),t.shadowSide!==void 0&&(s.shadowSide=t.shadowSide),t.opacity!==void 0&&(s.opacity=t.opacity),t.transparent!==void 0&&(s.transparent=t.transparent),t.alphaTest!==void 0&&(s.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(s.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(s.depthFunc=t.depthFunc),t.depthTest!==void 0&&(s.depthTest=t.depthTest),t.depthWrite!==void 0&&(s.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(s.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(s.blendSrc=t.blendSrc),t.blendDst!==void 0&&(s.blendDst=t.blendDst),t.blendEquation!==void 0&&(s.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(s.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(s.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(s.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(s.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(s.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(s.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(s.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(s.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(s.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(s.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(s.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(s.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(s.rotation=t.rotation),t.linewidth!==void 0&&(s.linewidth=t.linewidth),t.dashSize!==void 0&&(s.dashSize=t.dashSize),t.gapSize!==void 0&&(s.gapSize=t.gapSize),t.scale!==void 0&&(s.scale=t.scale),t.polygonOffset!==void 0&&(s.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(s.dithering=t.dithering),t.alphaToCoverage!==void 0&&(s.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(s.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(s.visible=t.visible),t.toneMapped!==void 0&&(s.toneMapped=t.toneMapped),t.userData!==void 0&&(s.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?s.vertexColors=t.vertexColors>0:s.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const r in t.uniforms){const a=t.uniforms[r];switch(s.uniforms[r]={},a.type){case"t":s.uniforms[r].value=n(a.value);break;case"c":s.uniforms[r].value=new oe().setHex(a.value);break;case"v2":s.uniforms[r].value=new Pt().fromArray(a.value);break;case"v3":s.uniforms[r].value=new et().fromArray(a.value);break;case"v4":s.uniforms[r].value=new On().fromArray(a.value);break;case"m3":s.uniforms[r].value=new on().fromArray(a.value);break;case"m4":s.uniforms[r].value=new Ne().fromArray(a.value);break;default:s.uniforms[r].value=a.value}}if(t.defines!==void 0&&(s.defines=t.defines),t.vertexShader!==void 0&&(s.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(s.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(s.glslVersion=t.glslVersion),t.extensions!==void 0)for(const r in t.extensions)s.extensions[r]=t.extensions[r];if(t.lights!==void 0&&(s.lights=t.lights),t.clipping!==void 0&&(s.clipping=t.clipping),t.size!==void 0&&(s.size=t.size),t.sizeAttenuation!==void 0&&(s.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(s.map=n(t.map)),t.matcap!==void 0&&(s.matcap=n(t.matcap)),t.alphaMap!==void 0&&(s.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(s.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(s.bumpScale=t.bumpScale),t.normalMap!==void 0&&(s.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(s.normalMapType=t.normalMapType),t.normalScale!==void 0){let r=t.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new Pt().fromArray(r)}return t.displacementMap!==void 0&&(s.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(s.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(s.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(s.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(s.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(s.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(s.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(s.specularMap=n(t.specularMap)),t.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(t.specularIntensityMap)),t.specularColorMap!==void 0&&(s.specularColorMap=n(t.specularColorMap)),t.envMap!==void 0&&(s.envMap=n(t.envMap)),t.envMapRotation!==void 0&&s.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(s.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(s.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(s.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(s.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(s.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(s.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(s.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(s.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(s.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Pt().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(s.iridescenceMap=n(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(s.transmissionMap=n(t.transmissionMap)),t.thicknessMap!==void 0&&(s.thicknessMap=n(t.thicknessMap)),t.anisotropyMap!==void 0&&(s.anisotropyMap=n(t.anisotropyMap)),t.sheenColorMap!==void 0&&(s.sheenColorMap=n(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(t.sheenRoughnessMap)),s}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return xM.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:nO,SpriteMaterial:zw,RawShaderMaterial:iO,ShaderMaterial:Ks,PointsMaterial:aM,MeshPhysicalMaterial:Dl,MeshStandardMaterial:Ux,MeshPhongMaterial:sO,MeshToonMaterial:rO,MeshNormalMaterial:Jw,MeshLambertMaterial:aO,MeshDepthMaterial:Zw,MeshDistanceMaterial:$w,MeshBasicMaterial:zo,MeshMatcapMaterial:oO,LineDashedMaterial:lO,LineBasicMaterial:aa,Material:gs};return new e[t]}}class Yd{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class AO extends $e{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class xO extends oa{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new Qo(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(u){s?s(u):console.error(u),r.manager.itemError(t)}},n,s)}parse(t){const e={},n={};function s(_,b){if(e[b]!==void 0)return e[b];const E=_.interleavedBuffers[b],S=r(_,E.buffer),w=X1(E.type,S),D=new Rx(w,E.stride);return D.uuid=E.uuid,e[b]=D,D}function r(_,b){if(n[b]!==void 0)return n[b];const E=_.arrayBuffers[b],S=new Uint32Array(E).buffer;return n[b]=S,S}const a=t.isInstancedBufferGeometry?new AO:new $e,l=t.data.index;if(l!==void 0){const _=X1(l.type,l.array);a.setIndex(new zn(_,1))}const u=t.data.attributes;for(const _ in u){const b=u[_];let T;if(b.isInterleavedBufferAttribute){const E=s(t.data,b.data);T=new tp(E,b.itemSize,b.offset,b.normalized)}else{const E=X1(b.type,b.array),S=b.isInstancedBufferAttribute?Gg:zn;T=new S(E,b.itemSize,b.normalized)}b.name!==void 0&&(T.name=b.name),b.usage!==void 0&&T.setUsage(b.usage),a.setAttribute(_,T)}const f=t.data.morphAttributes;if(f)for(const _ in f){const b=f[_],T=[];for(let E=0,S=b.length;E<S;E++){const w=b[E];let D;if(w.isInterleavedBufferAttribute){const B=s(t.data,w.data);D=new tp(B,w.itemSize,w.offset,w.normalized)}else{const B=X1(w.type,w.array);D=new zn(B,w.itemSize,w.normalized)}w.name!==void 0&&(D.name=w.name),T.push(D)}a.morphAttributes[_]=T}t.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=t.data.groups||t.data.drawcalls||t.data.offsets;if(g!==void 0)for(let _=0,b=g.length;_!==b;++_){const T=g[_];a.addGroup(T.start,T.count,T.materialIndex)}const v=t.data.boundingSphere;if(v!==void 0){const _=new et;v.center!==void 0&&_.fromArray(v.center),a.boundingSphere=new pr(_,v.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}}class bk extends oa{constructor(t){super(t)}load(t,e,n,s){const r=this,a=this.path===""?Yd.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const l=new Qo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(u){let f=null;try{f=JSON.parse(u)}catch(g){s!==void 0&&s(g),console.error("THREE:ObjectLoader: Can't parse "+t+".",g.message);return}const m=f.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}r.parse(f,e)},n,s)}async loadAsync(t,e){const n=this,s=this.path===""?Yd.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const r=new Qo(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const a=await r.loadAsync(t,e),l=JSON.parse(a),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await n.parseAsync(l)}parse(t,e){const n=this.parseAnimations(t.animations),s=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,s),a=this.parseImages(t.images,function(){e!==void 0&&e(f)}),l=this.parseTextures(t.textures,a),u=this.parseMaterials(t.materials,l),f=this.parseObject(t.object,r,u,l,n),m=this.parseSkeletons(t.skeletons,f);if(this.bindSkeletons(f,m),this.bindLightTargets(f),e!==void 0){let g=!1;for(const v in a)if(a[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&e(f)}return f}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),a=this.parseTextures(t.textures,r),l=this.parseMaterials(t.materials,a),u=this.parseObject(t.object,s,l,a,e),f=this.parseSkeletons(t.skeletons,u);return this.bindSkeletons(u,f),this.bindLightTargets(u),u}parseShapes(t){const e={};if(t!==void 0)for(let n=0,s=t.length;n<s;n++){const r=new Ug().fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},s={};if(e.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),t!==void 0)for(let r=0,a=t.length;r<a;r++){const l=new Lx().fromJSON(t[r],s);n[l.uuid]=l}return n}parseGeometries(t,e){const n={};if(t!==void 0){const s=new xO;for(let r=0,a=t.length;r<a;r++){let l;const u=t[r];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=s.parse(u);break;default:u.type in z6?l=z6[u.type].fromJSON(u,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),n[u.uuid]=l}}return n}parseMaterials(t,e){const n={},s={};if(t!==void 0){const r=new xM;r.setTextures(e);for(let a=0,l=t.length;a<l;a++){const u=t[a];n[u.uuid]===void 0&&(n[u.uuid]=r.parse(u)),s[u.uuid]=n[u.uuid]}}return s}parseAnimations(t){const e={};if(t!==void 0)for(let n=0;n<t.length;n++){const s=t[n],r=Qg.parse(s);e[r.uuid]=r}return e}parseImages(t,e){const n=this,s={};let r;function a(u){return n.manager.itemStart(u),r.load(u,function(){n.manager.itemEnd(u)},void 0,function(){n.manager.itemError(u),n.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const f=u,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;return a(m)}else return u.data?{data:X1(u.type,u.data),width:u.width,height:u.height}:null}if(t!==void 0&&t.length>0){const u=new i7(e);r=new sA(u),r.setCrossOrigin(this.crossOrigin);for(let f=0,m=t.length;f<m;f++){const g=t[f],v=g.url;if(Array.isArray(v)){const _=[];for(let b=0,T=v.length;b<T;b++){const E=v[b],S=l(E);S!==null&&(S instanceof HTMLImageElement?_.push(S):_.push(new Uu(S.data,S.width,S.height)))}s[g.uuid]=new jd(_)}else{const _=l(g.url);s[g.uuid]=new jd(_)}}}return s}async parseImagesAsync(t){const e=this,n={};let s;async function r(a){if(typeof a=="string"){const l=a,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:e.resourcePath+l;return await s.loadAsync(u)}else return a.data?{data:X1(a.type,a.data),width:a.width,height:a.height}:null}if(t!==void 0&&t.length>0){s=new sA(this.manager),s.setCrossOrigin(this.crossOrigin);for(let a=0,l=t.length;a<l;a++){const u=t[a],f=u.url;if(Array.isArray(f)){const m=[];for(let g=0,v=f.length;g<v;g++){const _=f[g],b=await r(_);b!==null&&(b instanceof HTMLImageElement?m.push(b):m.push(new Uu(b.data,b.width,b.height)))}n[u.uuid]=new jd(m)}else{const m=await r(u.url);n[u.uuid]=new jd(m)}}}return n}parseTextures(t,e){function n(r,a){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),a[r])}const s={};if(t!==void 0)for(let r=0,a=t.length;r<a;r++){const l=t[r];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),e[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=e[l.image],f=u.data;let m;Array.isArray(f)?(m=new wx,f.length===6&&(m.needsUpdate=!0)):(f&&f.data?m=new Uu:m=new wi,f&&(m.needsUpdate=!0)),m.source=u,m.uuid=l.uuid,l.name!==void 0&&(m.name=l.name),l.mapping!==void 0&&(m.mapping=n(l.mapping,Sk)),l.channel!==void 0&&(m.channel=l.channel),l.offset!==void 0&&m.offset.fromArray(l.offset),l.repeat!==void 0&&m.repeat.fromArray(l.repeat),l.center!==void 0&&m.center.fromArray(l.center),l.rotation!==void 0&&(m.rotation=l.rotation),l.wrap!==void 0&&(m.wrapS=n(l.wrap[0],Q6),m.wrapT=n(l.wrap[1],Q6)),l.format!==void 0&&(m.format=l.format),l.internalFormat!==void 0&&(m.internalFormat=l.internalFormat),l.type!==void 0&&(m.type=l.type),l.colorSpace!==void 0&&(m.colorSpace=l.colorSpace),l.minFilter!==void 0&&(m.minFilter=n(l.minFilter,j6)),l.magFilter!==void 0&&(m.magFilter=n(l.magFilter,j6)),l.anisotropy!==void 0&&(m.anisotropy=l.anisotropy),l.flipY!==void 0&&(m.flipY=l.flipY),l.generateMipmaps!==void 0&&(m.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(m.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(m.compareFunction=l.compareFunction),l.userData!==void 0&&(m.userData=l.userData),s[l.uuid]=m}return s}parseObject(t,e,n,s,r){let a;function l(v){return e[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),e[v]}function u(v){if(v!==void 0){if(Array.isArray(v)){const _=[];for(let b=0,T=v.length;b<T;b++){const E=v[b];n[E]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",E),_.push(n[E])}return _}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function f(v){return s[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),s[v]}let m,g;switch(t.type){case"Scene":a=new tA,t.background!==void 0&&(Number.isInteger(t.background)?a.background=new oe(t.background):a.background=f(t.background)),t.environment!==void 0&&(a.environment=f(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?a.fog=new iM(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(a.fog=new nM(t.fog.color,t.fog.density)),t.fog.name!==""&&(a.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(a.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(a.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&a.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":a=new Rs(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(a.focus=t.focus),t.zoom!==void 0&&(a.zoom=t.zoom),t.filmGauge!==void 0&&(a.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(a.filmOffset=t.filmOffset),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new Ty(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(a.zoom=t.zoom),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new gO(t.color,t.intensity);break;case"DirectionalLight":a=new o7(t.color,t.intensity),a.target=t.target||"";break;case"PointLight":a=new a7(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new vO(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new r7(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),a.target=t.target||"";break;case"HemisphereLight":a=new mO(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=new _O().fromJSON(t);break;case"SkinnedMesh":m=l(t.geometry),g=u(t.material),a=new Gw(m,g),t.bindMode!==void 0&&(a.bindMode=t.bindMode),t.bindMatrix!==void 0&&a.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(a.skeleton=t.skeleton);break;case"Mesh":m=l(t.geometry),g=u(t.material),a=new as(m,g);break;case"InstancedMesh":m=l(t.geometry),g=u(t.material);const v=t.count,_=t.instanceMatrix,b=t.instanceColor;a=new kw(m,g,v),a.instanceMatrix=new Gg(new Float32Array(_.array),16),b!==void 0&&(a.instanceColor=new Gg(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":m=l(t.geometry),g=u(t.material),a=new VB(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,g),a.geometry=m,a.perObjectFrustumCulled=t.perObjectFrustumCulled,a.sortObjects=t.sortObjects,a._drawRanges=t.drawRanges,a._reservedRanges=t.reservedRanges,a._geometryInfo=t.geometryInfo.map(T=>{let E=null,S=null;return T.boundingBox!==void 0&&(E=new Or,E.min.fromArray(T.boundingBox.min),E.max.fromArray(T.boundingBox.max)),T.boundingSphere!==void 0&&(S=new pr,S.radius=T.boundingSphere.radius,S.center.fromArray(T.boundingSphere.center)),{...T,boundingBox:E,boundingSphere:S}}),a._instanceInfo=t.instanceInfo,a._availableInstanceIds=t._availableInstanceIds,a._availableGeometryIds=t._availableGeometryIds,a._nextIndexStart=t.nextIndexStart,a._nextVertexStart=t.nextVertexStart,a._geometryCount=t.geometryCount,a._maxInstanceCount=t.maxInstanceCount,a._maxVertexCount=t.maxVertexCount,a._maxIndexCount=t.maxIndexCount,a._geometryInitialized=t.geometryInitialized,a._matricesTexture=f(t.matricesTexture.uuid),a._indirectTexture=f(t.indirectTexture.uuid),t.colorsTexture!==void 0&&(a._colorsTexture=f(t.colorsTexture.uuid)),t.boundingSphere!==void 0&&(a.boundingSphere=new pr,a.boundingSphere.center.fromArray(t.boundingSphere.center),a.boundingSphere.radius=t.boundingSphere.radius),t.boundingBox!==void 0&&(a.boundingBox=new Or,a.boundingBox.min.fromArray(t.boundingBox.min),a.boundingBox.max.fromArray(t.boundingBox.max));break;case"LOD":a=new kB;break;case"Line":a=new rf(l(t.geometry),u(t.material));break;case"LineLoop":a=new Vw(l(t.geometry),u(t.material));break;case"LineSegments":a=new Dc(l(t.geometry),u(t.material));break;case"PointCloud":case"Points":a=new Qw(l(t.geometry),u(t.material));break;case"Sprite":a=new GB(u(t.material));break;case"Group":a=new Wh;break;case"Bone":a=new sM;break;default:a=new Ln}if(a.uuid=t.uuid,t.name!==void 0&&(a.name=t.name),t.matrix!==void 0?(a.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(t.position!==void 0&&a.position.fromArray(t.position),t.rotation!==void 0&&a.rotation.fromArray(t.rotation),t.quaternion!==void 0&&a.quaternion.fromArray(t.quaternion),t.scale!==void 0&&a.scale.fromArray(t.scale)),t.up!==void 0&&a.up.fromArray(t.up),t.castShadow!==void 0&&(a.castShadow=t.castShadow),t.receiveShadow!==void 0&&(a.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(a.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(a.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(a.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(a.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(a.visible=t.visible),t.frustumCulled!==void 0&&(a.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(a.renderOrder=t.renderOrder),t.userData!==void 0&&(a.userData=t.userData),t.layers!==void 0&&(a.layers.mask=t.layers),t.children!==void 0){const v=t.children;for(let _=0;_<v.length;_++)a.add(this.parseObject(v[_],e,n,s,r))}if(t.animations!==void 0){const v=t.animations;for(let _=0;_<v.length;_++){const b=v[_];a.animations.push(r[b])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(a.autoUpdate=t.autoUpdate);const v=t.levels;for(let _=0;_<v.length;_++){const b=v[_],T=a.getObjectByProperty("uuid",b.object);T!==void 0&&a.addLevel(T,b.distance,b.hysteresis)}}return a}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=e[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const n=e.target,s=t.getObjectByProperty("uuid",n);s!==void 0?e.target=s:e.target=new Ln}})}}const Sk={UVMapping:jE,CubeReflectionMapping:sf,CubeRefractionMapping:Zd,EquirectangularReflectionMapping:X_,EquirectangularRefractionMapping:q_,CubeUVReflectionMapping:xy},Q6={RepeatWrapping:$d,ClampToEdgeWrapping:Ho,MirroredRepeatWrapping:oy},j6={NearestFilter:os,NearestMipmapNearestFilter:XE,NearestMipmapLinearFilter:Dm,LinearFilter:Ni,LinearMipmapNearestFilter:K1,LinearMipmapLinearFilter:Tl};class bO extends oa{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=Kh.get(t);if(a!==void 0){if(r.manager.itemStart(t),a.then){a.then(f=>{e&&e(f),r.manager.itemEnd(t)}).catch(f=>{s&&s(f)});return}return setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const u=fetch(t,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(f){return Kh.add(t,f),e&&e(f),r.manager.itemEnd(t),f}).catch(function(f){s&&s(f),Kh.remove(t),r.manager.itemError(t),r.manager.itemEnd(t)});Kh.add(t,u),r.manager.itemStart(t)}}let t4,l7=class{static getContext(){return t4===void 0&&(t4=new(window.AudioContext||window.webkitAudioContext)),t4}static setContext(t){t4=t}};class Ek extends oa{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new Qo(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(u){try{const f=u.slice(0);l7.getContext().decodeAudioData(f,function(g){e(g)}).catch(l)}catch(f){l(f)}},n,s);function l(u){s?s(u):console.error(u),r.manager.itemError(t)}}}const X6=new Ne,q6=new Ne,hm=new Ne;class Mk{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Rs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Rs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,hm.copy(t.projectionMatrix);const s=e.eyeSep/2,r=s*e.near/e.focus,a=e.near*Math.tan(Ig*e.fov*.5)/e.zoom;let l,u;q6.elements[12]=-s,X6.elements[12]=s,l=-a*e.aspect+r,u=a*e.aspect+r,hm.elements[0]=2*e.near/(u-l),hm.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(hm),l=-a*e.aspect-r,u=a*e.aspect-r,hm.elements[0]=2*e.near/(u-l),hm.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(hm)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(q6),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(X6)}}class SO extends Rs{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}let c7=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Y6(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Y6();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};function Y6(){return performance.now()}const fm=new et,W6=new Br,Tk=new et,dm=new et;class Ck extends Ln{constructor(){super(),this.type="AudioListener",this.context=l7.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new c7}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(fm,W6,Tk),dm.set(0,0,-1).applyQuaternion(W6),e.positionX){const s=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(fm.x,s),e.positionY.linearRampToValueAtTime(fm.y,s),e.positionZ.linearRampToValueAtTime(fm.z,s),e.forwardX.linearRampToValueAtTime(dm.x,s),e.forwardY.linearRampToValueAtTime(dm.y,s),e.forwardZ.linearRampToValueAtTime(dm.z,s),e.upX.linearRampToValueAtTime(n.x,s),e.upY.linearRampToValueAtTime(n.y,s),e.upZ.linearRampToValueAtTime(n.z,s)}else e.setPosition(fm.x,fm.y,fm.z),e.setOrientation(dm.x,dm.y,dm.z,n.x,n.y,n.z)}}class EO extends Ln{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const pm=new et,K6=new Br,wk=new et,mm=new et;class Rk extends EO{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(pm,K6,wk),mm.set(0,0,1).applyQuaternion(K6);const e=this.panner;if(e.positionX){const n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(pm.x,n),e.positionY.linearRampToValueAtTime(pm.y,n),e.positionZ.linearRampToValueAtTime(pm.z,n),e.orientationX.linearRampToValueAtTime(mm.x,n),e.orientationY.linearRampToValueAtTime(mm.y,n),e.orientationZ.linearRampToValueAtTime(mm.z,n)}else e.setPosition(pm.x,pm.y,pm.z),e.setOrientation(mm.x,mm.y,mm.z)}}class Lk{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class MO{constructor(t,e,n){this.binding=t,this.valueSize=n;let s,r,a;switch(e){case"quaternion":s=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,s=this.valueSize,r=t*s+s;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==s;++l)n[r+l]=n[l];a=e}else{a+=e;const l=e/a;this._mixBufferRegion(n,r,0,l,s)}this.cumulativeWeight=a}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,s,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,s=t*e+e,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const u=e*this._origIndex;this._mixBufferRegion(n,s,u,1-r,e)}a>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*e,1,e);for(let u=e,f=e+e;u!==f;++u)if(n[u]!==n[u+e]){l.setValue(n,s);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,s=n*this._origIndex;t.getValue(e,s);for(let r=n,a=s;r!==a;++r)e[r]=e[s+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,s,r){if(s>=.5)for(let a=0;a!==r;++a)t[e+a]=t[n+a]}_slerp(t,e,n,s){Br.slerpFlat(t,e,t,e,t,n,s)}_slerpAdditive(t,e,n,s,r){const a=this._workIndex*r;Br.multiplyQuaternionsFlat(t,a,t,e,t,n),Br.slerpFlat(t,e,t,e,t,a,s)}_lerp(t,e,n,s,r){const a=1-s;for(let l=0;l!==r;++l){const u=e+l;t[u]=t[u]*a+t[n+l]*s}}_lerpAdditive(t,e,n,s,r){for(let a=0;a!==r;++a){const l=e+a;t[l]=t[l]+t[n+a]*s}}}const u7="\\[\\]\\.:\\/",Dk=new RegExp("["+u7+"]","g"),h7="[^"+u7+"]",Bk="[^"+u7.replace("\\.","")+"]",Ok=/((?:WC+[\/:])*)/.source.replace("WC",h7),Nk=/(WCOD+)?/.source.replace("WCOD",Bk),Ik=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",h7),Uk=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",h7),Pk=new RegExp("^"+Ok+Nk+Ik+Uk+"$"),Fk=["material","materials","bones","map"];class Hk{constructor(t,e,n){const s=n||Qn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,s)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=n.length;s!==r;++s)n[s].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class Qn{constructor(t,e,n){this.path=e,this.parsedPath=n||Qn.parseTrackName(e),this.node=Qn.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Qn.Composite(t,e,n):new Qn(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Dk,"")}static parseTrackName(t){const e=Pk.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=n.nodeName.substring(s+1);Fk.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(r){for(let a=0;a<r.length;a++){const l=r[a];if(l.name===e||l.uuid===e)return l;const u=n(l.children);if(u)return u}return null},s=n(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)t[e++]=n[s]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,s=e.propertyName;let r=e.propertyIndex;if(t||(t=Qn.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let f=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let m=0;m<t.length;m++)if(t[m].name===f){f=m;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(f!==void 0){if(t[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[f]}}const a=t[s];if(a===void 0){const f=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+s+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?l=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[r]!==void 0&&(r=t.morphTargetDictionary[r])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Qn.Composite=Hk;Qn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Qn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Qn.prototype.GetterByBindingType=[Qn.prototype._getValue_direct,Qn.prototype._getValue_array,Qn.prototype._getValue_arrayElement,Qn.prototype._getValue_toArray];Qn.prototype.SetterByBindingTypeAndVersioning=[[Qn.prototype._setValue_direct,Qn.prototype._setValue_direct_setNeedsUpdate,Qn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_array,Qn.prototype._setValue_array_setNeedsUpdate,Qn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_arrayElement,Qn.prototype._setValue_arrayElement_setNeedsUpdate,Qn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_fromArray,Qn.prototype._setValue_fromArray_setNeedsUpdate,Qn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class zk{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Go(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,s=arguments.length;n!==s;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,s=this._parsedPaths,r=this._bindings,a=r.length;let l,u=t.length,f=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const v=arguments[m],_=v.uuid;let b=e[_];if(b===void 0){b=u++,e[_]=b,t.push(v);for(let T=0,E=a;T!==E;++T)r[T].push(new Qn(v,n[T],s[T]))}else if(b<f){l=t[b];const T=--f,E=t[T];e[E.uuid]=b,t[b]=E,e[_]=T,t[T]=v;for(let S=0,w=a;S!==w;++S){const D=r[S],B=D[T];let N=D[b];D[b]=B,N===void 0&&(N=new Qn(v,n[S],s[S])),D[T]=N}}else t[b]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],f=u.uuid,m=e[f];if(m!==void 0&&m>=r){const g=r++,v=t[g];e[v.uuid]=m,t[m]=v,e[f]=g,t[g]=u;for(let _=0,b=s;_!==b;++_){const T=n[_],E=T[g],S=T[m];T[m]=E,T[g]=S}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_,a=t.length;for(let l=0,u=arguments.length;l!==u;++l){const f=arguments[l],m=f.uuid,g=e[m];if(g!==void 0)if(delete e[m],g<r){const v=--r,_=t[v],b=--a,T=t[b];e[_.uuid]=g,t[g]=_,e[T.uuid]=v,t[v]=T,t.pop();for(let E=0,S=s;E!==S;++E){const w=n[E],D=w[v],B=w[b];w[g]=D,w[v]=B,w.pop()}}else{const v=--a,_=t[v];v>0&&(e[_.uuid]=g),t[g]=_,t.pop();for(let b=0,T=s;b!==T;++b){const E=n[b];E[g]=E[v],E.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let s=n[t];const r=this._bindings;if(s!==void 0)return r[s];const a=this._paths,l=this._parsedPaths,u=this._objects,f=u.length,m=this.nCachedObjects_,g=new Array(f);s=r.length,n[t]=s,a.push(t),l.push(e),r.push(g);for(let v=m,_=u.length;v!==_;++v){const b=u[v];g[v]=new Qn(b,t,e)}return g}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const s=this._paths,r=this._parsedPaths,a=this._bindings,l=a.length-1,u=a[l],f=t[l];e[f]=n,a[n]=u,a.pop(),r[n]=r[l],r.pop(),s[n]=s[l],s.pop()}}}class TO{constructor(t,e,n=null,s=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=s;const r=e.tracks,a=r.length,l=new Array(a),u={endingStart:Bm,endingEnd:Bm};for(let f=0;f!==a;++f){const m=r[f].createInterpolant(null);l[f]=m,m.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=AB,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n=!1){if(t.fadeOut(e),this.fadeIn(e),n===!0){const s=this._clip.duration,r=t._clip.duration,a=r/s,l=s/r;t.warp(1,a,e),this.warp(l,1,e)}return this}crossFadeTo(t,e,n=!1){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const s=this._mixer,r=s.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=s._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,f=l.sampleValues;return u[0]=r,u[1]=r+n,f[0]=t/a,f[1]=e/a,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,s){if(!this.enabled){this._updateWeight(t);return}const r=this._startTime;if(r!==null){const u=(t-r)*n;u<0||n===0?e=0:(this._startTime=null,e=n*u)}e*=this._updateTimeScale(t);const a=this._updateTime(e),l=this._updateWeight(t);if(l>0){const u=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case Nw:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(a),f[m].accumulateAdditive(l);break;case $E:default:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(a),f[m].accumulate(s,l)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(t)[0];e*=s,t>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(t)[0];e*=s,t>n.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let s=this.time+t,r=this._loopCount;const a=n===xB;if(t===0)return r===-1?s:a&&(r&1)===1?e-s:s;if(n===_B){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(s>=e)s=e;else if(s<0)s=0;else{this.time=s;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(r===-1&&(t>=0?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),s>=e||s<0){const l=Math.floor(s/e);s-=e*l,r+=Math.abs(l);const u=this.repetitions-r;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=t>0?e:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(u===1){const f=t<0;this._setEndings(f,!f,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=s;if(a&&(r&1)===1)return e-s}return s}_setEndings(t,e,n){const s=this._interpolantSettings;n?(s.endingStart=Om,s.endingEnd=Om):(t?s.endingStart=this.zeroSlopeAtStart?Om:Bm:s.endingStart=Y_,e?s.endingEnd=this.zeroSlopeAtEnd?Om:Bm:s.endingEnd=Y_)}_scheduleFading(t,e,n){const s=this._mixer,r=s.time;let a=this._weightInterpolant;a===null&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=r,u[0]=e,l[1]=r+t,u[1]=n,this}}const Gk=new Float32Array(1);class f7 extends qo{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,s=t._clip.tracks,r=s.length,a=t._propertyBindings,l=t._interpolants,u=n.uuid,f=this._bindingsByRootAndName;let m=f[u];m===void 0&&(m={},f[u]=m);for(let g=0;g!==r;++g){const v=s[g],_=v.name;let b=m[_];if(b!==void 0)++b.referenceCount,a[g]=b;else{if(b=a[g],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,u,_));continue}const T=e&&e._propertyBindings[g].binding.parsedPath;b=new MO(Qn.create(n,_,T),v.ValueTypeName,v.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,u,_),a[g]=b}l[g].resultBuffer=b.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,s=t._clip.uuid,r=this._actionsByClip[s];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,s,n)}const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,n){const s=this._actions,r=this._actionsByClip;let a=r[e];if(a===void 0)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{const l=a.knownActions;t._byClipCacheIndex=l.length,l.push(t)}t._cacheIndex=s.length,s.push(t),a.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],s=t._cacheIndex;n._cacheIndex=s,e[s]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,a=this._actionsByClip,l=a[r],u=l.knownActions,f=u[u.length-1],m=t._byClipCacheIndex;f._byClipCacheIndex=m,u[m]=f,u.pop(),t._byClipCacheIndex=null;const g=l.actionByRoot,v=(t._localRoot||this._root).uuid;delete g[v],u.length===0&&delete a[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,s=this._nActiveActions++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,s=--this._nActiveActions,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const s=this._bindingsByRootAndName,r=this._bindings;let a=s[e];a===void 0&&(a={},s[e]=a),a[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,s=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,l=a[s],u=e[e.length-1],f=t._cacheIndex;u._cacheIndex=f,e[f]=u,e.pop(),delete l[r],Object.keys(l).length===0&&delete a[s]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,s=this._nActiveBindings++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,s=--this._nActiveBindings,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new e7(new Float32Array(2),new Float32Array(2),1,Gk),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,s=--this._nActiveControlInterpolants,r=e[s];t.__cacheIndex=s,e[s]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const s=e||this._root,r=s.uuid;let a=typeof t=="string"?Qg.findByName(s,t):t;const l=a!==null?a.uuid:t,u=this._actionsByClip[l];let f=null;if(n===void 0&&(a!==null?n=a.blendMode:n=$E),u!==void 0){const g=u.actionByRoot[r];if(g!==void 0&&g.blendMode===n)return g;f=u.knownActions[0],a===null&&(a=f._clip)}if(a===null)return null;const m=new TO(this,a,e,n);return this._bindAction(m,f),this._addInactiveAction(m,l,r),m}existingAction(t,e){const n=e||this._root,s=n.uuid,r=typeof t=="string"?Qg.findByName(n,t):t,a=r?r.uuid:t,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[s]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,s=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1;for(let f=0;f!==n;++f)e[f]._update(s,t,r,a);const l=this._bindings,u=this._nActiveBindings;for(let f=0;f!==u;++f)l[f].apply(a);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,s=this._actionsByClip,r=s[n];if(r!==void 0){const a=r.knownActions;for(let l=0,u=a.length;l!==u;++l){const f=a[l];this._deactivateAction(f);const m=f._cacheIndex,g=e[e.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,g._cacheIndex=m,e[m]=g,e.pop(),this._removeInactiveBindingsForAction(f)}delete s[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const a in n){const l=n[a].actionByRoot,u=l[e];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const s=this._bindingsByRootAndName,r=s[e];if(r!==void 0)for(const a in r){const l=r[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class kk extends tM{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new eM(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class Vk extends tM{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isRenderTargetArray=!0,this.depth=n,this.texture=new Tx(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class xn{constructor(t){this.value=t}clone(){return new xn(this.value.clone===void 0?this.value:this.value.clone())}}let Qk=0;class jk extends qo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Qk++}),this.name="",this.usage=K_,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,s=e.length;n<s;n++){const r=Array.isArray(e[n])?e[n]:[e[n]];for(let a=0;a<r.length;a++)this.uniforms.push(r[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class Xk extends Rx{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class qk{constructor(t,e,n,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const J6=new Ne;class CO{constructor(t,e,n=0,s=1/0){this.ray=new by(t,e),this.near=n,this.far=s,this.camera=null,this.layers=new dy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return J6.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(J6),this}intersectObject(t,e=!0,n=[]){return B5(t,this,n,e),n.sort(Z6),n}intersectObjects(t,e=!0,n=[]){for(let s=0,r=t.length;s<r;s++)B5(t[s],this,n,e);return n.sort(Z6),n}}function Z6(i,t){return i.distance-t.distance}function B5(i,t,e,n){let s=!0;if(i.layers.test(t.layers)&&i.raycast(t,e)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let a=0,l=r.length;a<l;a++)B5(r[a],t,e,!0)}}class Yk{constructor(t=1,e=0,n=0){this.radius=t,this.phi=e,this.theta=n}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=nn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(nn(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Wk{constructor(t=1,e=0,n=0){this.radius=t,this.theta=e,this.y=n}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return new this.constructor().copy(this)}}class d7{constructor(t,e,n,s){d7.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let n=0;n<4;n++)this.elements[n]=t[n+e];return this}set(t,e,n,s){const r=this.elements;return r[0]=t,r[2]=e,r[1]=n,r[3]=s,this}}const $6=new Pt;class Kk{constructor(t=new Pt(1/0,1/0),e=new Pt(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=$6.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,$6).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const tL=new et,e4=new et;class Jk{constructor(t=new et,e=new et){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){tL.subVectors(t,this.start),e4.subVectors(this.end,this.start);const n=e4.dot(e4);let r=e4.dot(tL)/n;return e&&(r=nn(r,0,1)),r}closestPointToPoint(t,e,n){const s=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(s).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const eL=new et;class Zk extends Ln{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new $e,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,u=32;a<u;a++,l++){const f=a/u*Math.PI*2,m=l/u*Math.PI*2;s.push(Math.cos(f),Math.sin(f),1,Math.cos(m),Math.sin(m),1)}n.setAttribute("position",new Me(s,3));const r=new aa({fog:!1,toneMapped:!1});this.cone=new Dc(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),eL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(eL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ld=new et,n4=new Ne,x8=new Ne;class wO extends Dc{constructor(t){const e=RO(t),n=new $e,s=[],r=[],a=new oe(0,0,1),l=new oe(0,1,0);for(let f=0;f<e.length;f++){const m=e[f];m.parent&&m.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(a.r,a.g,a.b),r.push(l.r,l.g,l.b))}n.setAttribute("position",new Me(s,3)),n.setAttribute("color",new Me(r,3));const u=new aa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,s=n.getAttribute("position");x8.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<e.length;r++){const l=e[r];l.parent&&l.parent.isBone&&(n4.multiplyMatrices(x8,l.matrixWorld),ld.setFromMatrixPosition(n4),s.setXYZ(a,ld.x,ld.y,ld.z),n4.multiplyMatrices(x8,l.parent.matrixWorld),ld.setFromMatrixPosition(n4),s.setXYZ(a+1,ld.x,ld.y,ld.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function RO(i){const t=[];i.isBone===!0&&t.push(i);for(let e=0;e<i.children.length;e++)t.push(...RO(i.children[e]));return t}class $k extends as{constructor(t,e,n){const s=new Ix(e,4,2),r=new zo({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const tV=new et,nL=new oe,iL=new oe;class eV extends Ln{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new Nx(e);s.rotateY(Math.PI*.5),this.material=new zo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),a=new Float32Array(r.count*3);s.setAttribute("color",new zn(a,3)),this.add(new as(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");nL.copy(this.light.color),iL.copy(this.light.groundColor);for(let n=0,s=e.count;n<s;n++){const r=n<s/2?nL:iL;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(tV.setFromMatrixPosition(this.light.matrixWorld).negate())}}class nV extends Dc{constructor(t=10,e=10,n=4473924,s=8947848){n=new oe(n),s=new oe(s);const r=e/2,a=t/e,l=t/2,u=[],f=[];for(let v=0,_=0,b=-l;v<=e;v++,b+=a){u.push(-l,0,b,l,0,b),u.push(b,0,-l,b,0,l);const T=v===r?n:s;T.toArray(f,_),_+=3,T.toArray(f,_),_+=3,T.toArray(f,_),_+=3,T.toArray(f,_),_+=3}const m=new $e;m.setAttribute("position",new Me(u,3)),m.setAttribute("color",new Me(f,3));const g=new aa({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class iV extends Dc{constructor(t=10,e=16,n=8,s=64,r=4473924,a=8947848){r=new oe(r),a=new oe(a);const l=[],u=[];if(e>1)for(let g=0;g<e;g++){const v=g/e*(Math.PI*2),_=Math.sin(v)*t,b=Math.cos(v)*t;l.push(0,0,0),l.push(_,0,b);const T=g&1?r:a;u.push(T.r,T.g,T.b),u.push(T.r,T.g,T.b)}for(let g=0;g<n;g++){const v=g&1?r:a,_=t-t/n*g;for(let b=0;b<s;b++){let T=b/s*(Math.PI*2),E=Math.sin(T)*_,S=Math.cos(T)*_;l.push(E,0,S),u.push(v.r,v.g,v.b),T=(b+1)/s*(Math.PI*2),E=Math.sin(T)*_,S=Math.cos(T)*_,l.push(E,0,S),u.push(v.r,v.g,v.b)}}const f=new $e;f.setAttribute("position",new Me(l,3)),f.setAttribute("color",new Me(u,3));const m=new aa({vertexColors:!0,toneMapped:!1});super(f,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const sL=new et,i4=new et,rL=new et;class sV extends Ln{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let s=new $e;s.setAttribute("position",new Me([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new aa({fog:!1,toneMapped:!1});this.lightPlane=new rf(s,r),this.add(this.lightPlane),s=new $e,s.setAttribute("position",new Me([0,0,0,0,0,1],3)),this.targetLine=new rf(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),sL.setFromMatrixPosition(this.light.matrixWorld),i4.setFromMatrixPosition(this.light.target.matrixWorld),rL.subVectors(i4,sL),this.lightPlane.lookAt(i4),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(i4),this.targetLine.scale.z=rL.length()}}const s4=new et,is=new Cx;class rV extends Dc{constructor(t){const e=new $e,n=new aa({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(b,T){u(b),u(T)}function u(b){s.push(0,0,0),r.push(0,0,0),a[b]===void 0&&(a[b]=[]),a[b].push(s.length/3-1)}e.setAttribute("position",new Me(s,3)),e.setAttribute("color",new Me(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const f=new oe(16755200),m=new oe(16711680),g=new oe(43775),v=new oe(16777215),_=new oe(3355443);this.setColors(f,m,g,v,_)}setColors(t,e,n,s,r){const l=this.geometry.getAttribute("color");l.setXYZ(0,t.r,t.g,t.b),l.setXYZ(1,t.r,t.g,t.b),l.setXYZ(2,t.r,t.g,t.b),l.setXYZ(3,t.r,t.g,t.b),l.setXYZ(4,t.r,t.g,t.b),l.setXYZ(5,t.r,t.g,t.b),l.setXYZ(6,t.r,t.g,t.b),l.setXYZ(7,t.r,t.g,t.b),l.setXYZ(8,t.r,t.g,t.b),l.setXYZ(9,t.r,t.g,t.b),l.setXYZ(10,t.r,t.g,t.b),l.setXYZ(11,t.r,t.g,t.b),l.setXYZ(12,t.r,t.g,t.b),l.setXYZ(13,t.r,t.g,t.b),l.setXYZ(14,t.r,t.g,t.b),l.setXYZ(15,t.r,t.g,t.b),l.setXYZ(16,t.r,t.g,t.b),l.setXYZ(17,t.r,t.g,t.b),l.setXYZ(18,t.r,t.g,t.b),l.setXYZ(19,t.r,t.g,t.b),l.setXYZ(20,t.r,t.g,t.b),l.setXYZ(21,t.r,t.g,t.b),l.setXYZ(22,t.r,t.g,t.b),l.setXYZ(23,t.r,t.g,t.b),l.setXYZ(24,e.r,e.g,e.b),l.setXYZ(25,e.r,e.g,e.b),l.setXYZ(26,e.r,e.g,e.b),l.setXYZ(27,e.r,e.g,e.b),l.setXYZ(28,e.r,e.g,e.b),l.setXYZ(29,e.r,e.g,e.b),l.setXYZ(30,e.r,e.g,e.b),l.setXYZ(31,e.r,e.g,e.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,r.r,r.g,r.b),l.setXYZ(41,r.r,r.g,r.b),l.setXYZ(42,r.r,r.g,r.b),l.setXYZ(43,r.r,r.g,r.b),l.setXYZ(44,r.r,r.g,r.b),l.setXYZ(45,r.r,r.g,r.b),l.setXYZ(46,r.r,r.g,r.b),l.setXYZ(47,r.r,r.g,r.b),l.setXYZ(48,r.r,r.g,r.b),l.setXYZ(49,r.r,r.g,r.b),l.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap,n=1,s=1;is.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===Cl?-1:0;ps("c",e,t,is,0,0,r),ps("t",e,t,is,0,0,1),ps("n1",e,t,is,-1,-1,r),ps("n2",e,t,is,n,-1,r),ps("n3",e,t,is,-1,s,r),ps("n4",e,t,is,n,s,r),ps("f1",e,t,is,-1,-1,1),ps("f2",e,t,is,n,-1,1),ps("f3",e,t,is,-1,s,1),ps("f4",e,t,is,n,s,1),ps("u1",e,t,is,n*.7,s*1.1,r),ps("u2",e,t,is,-1*.7,s*1.1,r),ps("u3",e,t,is,0,s*2,r),ps("cf1",e,t,is,-1,0,1),ps("cf2",e,t,is,n,0,1),ps("cf3",e,t,is,0,-1,1),ps("cf4",e,t,is,0,s,1),ps("cn1",e,t,is,-1,0,r),ps("cn2",e,t,is,n,0,r),ps("cn3",e,t,is,0,-1,r),ps("cn4",e,t,is,0,s,r),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ps(i,t,e,n,s,r,a){s4.set(s,r,a).unproject(n);const l=t[i];if(l!==void 0){const u=e.getAttribute("position");for(let f=0,m=l.length;f<m;f++)u.setXYZ(l[f],s4.x,s4.y,s4.z)}}const r4=new Or;class aV extends Dc{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),r=new $e;r.setIndex(new zn(n,1)),r.setAttribute("position",new zn(s,3)),super(r,new aa({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&r4.setFromObject(this.object),r4.isEmpty())return;const t=r4.min,e=r4.max,n=this.geometry.attributes.position,s=n.array;s[0]=e.x,s[1]=e.y,s[2]=e.z,s[3]=t.x,s[4]=e.y,s[5]=e.z,s[6]=t.x,s[7]=t.y,s[8]=e.z,s[9]=e.x,s[10]=t.y,s[11]=e.z,s[12]=e.x,s[13]=e.y,s[14]=t.z,s[15]=t.x,s[16]=e.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=e.x,s[22]=t.y,s[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class oV extends Dc{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new $e;r.setIndex(new zn(n,1)),r.setAttribute("position",new Me(s,3)),super(r,new aa({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class lV extends rf{constructor(t,e=1,n=16776960){const s=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new $e;a.setAttribute("position",new Me(r,3)),a.computeBoundingSphere(),super(a,new aa({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new $e;u.setAttribute("position",new Me(l,3)),u.computeBoundingSphere(),this.add(new as(u,new zo({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const aL=new et;let a4,b8;class cV extends Ln{constructor(t=new et(0,0,1),e=new et(0,0,0),n=1,s=16776960,r=n*.2,a=r*.2){super(),this.type="ArrowHelper",a4===void 0&&(a4=new $e,a4.setAttribute("position",new Me([0,0,0,0,1,0],3)),b8=new Ox(.5,1,5,1),b8.translate(0,-.5,0)),this.position.copy(e),this.line=new rf(a4,new aa({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new as(b8,new zo({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{aL.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(aL,e)}}setLength(t,e=t*.2,n=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class uV extends Dc{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new $e;s.setAttribute("position",new Me(e,3)),s.setAttribute("color",new Me(n,3));const r=new aa({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(t,e,n){const s=new oe,r=this.geometry.attributes.color.array;return s.set(t),s.toArray(r,0),s.toArray(r,3),s.set(e),s.toArray(r,6),s.toArray(r,9),s.set(n),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class hV{constructor(){this.type="ShapePath",this.color=new oe,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new eE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,s){return this.currentPath.quadraticCurveTo(t,e,n,s),this}bezierCurveTo(t,e,n,s,r,a){return this.currentPath.bezierCurveTo(t,e,n,s,r,a),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(S){const w=[];for(let D=0,B=S.length;D<B;D++){const N=S[D],I=new Ug;I.curves=N.curves,w.push(I)}return w}function n(S,w){const D=w.length;let B=!1;for(let N=D-1,I=0;I<D;N=I++){let F=w[N],z=w[I],U=z.x-F.x,P=z.y-F.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(F=w[I],U=-U,z=w[N],P=-P),S.y<F.y||S.y>z.y)continue;if(S.y===F.y){if(S.x===F.x)return!0}else{const X=P*(S.x-F.x)-U*(S.y-F.y);if(X===0)return!0;if(X<0)continue;B=!B}}else{if(S.y!==F.y)continue;if(z.x<=S.x&&S.x<=F.x||F.x<=S.x&&S.x<=z.x)return!0}}return B}const s=Tc.isClockWise,r=this.subPaths;if(r.length===0)return[];let a,l,u;const f=[];if(r.length===1)return l=r[0],u=new Ug,u.curves=l.curves,f.push(u),f;let m=!s(r[0].getPoints());m=t?!m:m;const g=[],v=[];let _=[],b=0,T;v[b]=void 0,_[b]=[];for(let S=0,w=r.length;S<w;S++)l=r[S],T=l.getPoints(),a=s(T),a=t?!a:a,a?(!m&&v[b]&&b++,v[b]={s:new Ug,p:T},v[b].s.curves=l.curves,m&&b++,_[b]=[]):_[b].push({h:l,p:T[0]});if(!v[0])return e(r);if(v.length>1){let S=!1,w=0;for(let D=0,B=v.length;D<B;D++)g[D]=[];for(let D=0,B=v.length;D<B;D++){const N=_[D];for(let I=0;I<N.length;I++){const F=N[I];let z=!0;for(let U=0;U<v.length;U++)n(F.p,v[U].p)&&(D!==U&&w++,z?(z=!1,g[U].push(F)):S=!0);z&&g[D].push(F)}}w>0&&S===!1&&(_=g)}let E;for(let S=0,w=v.length;S<w;S++){u=v[S].s,f.push(u),E=_[S];for(let D=0,B=E.length;D<B;D++)u.holes.push(E[D].h)}return f}}class fV extends qo{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function dV(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function pV(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function mV(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function O5(i,t,e,n){const s=gV(n);switch(e){case Lw:return i*t;case KE:return i*t/s.components*s.byteLength;case Mx:return i*t/s.components*s.byteLength;case Bw:return i*t*2/s.components*s.byteLength;case JE:return i*t*2/s.components*s.byteLength;case Dw:return i*t*3/s.components*s.byteLength;case na:return i*t*4/s.components*s.byteLength;case ZE:return i*t*4/s.components*s.byteLength;case D_:case B_:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case O_:case N_:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case T3:case w3:return Math.max(i,16)*Math.max(t,8)/4;case M3:case C3:return Math.max(i,8)*Math.max(t,8)/2;case R3:case L3:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case D3:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case B3:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case O3:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case N3:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case I3:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case U3:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case P3:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case F3:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case H3:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case z3:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case G3:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case k3:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case V3:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case Q3:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case j3:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case I_:case X3:case q3:return Math.ceil(i/4)*Math.ceil(t/4)*16;case Ow:case Y3:return Math.ceil(i/4)*Math.ceil(t/4)*8;case W3:case K3:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function gV(i){switch(i){case Ws:case Cw:return{byteLength:1,components:1};case ly:case ww:case i0:return{byteLength:2,components:1};case YE:case WE:return{byteLength:2,components:4};case Pu:case qE:case Oa:return{byteLength:4,components:1};case Rw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class vV{static contain(t,e){return dV(t,e)}static cover(t,e){return pV(t,e)}static fill(t){return mV(t)}static getByteLength(t,e,n,s){return O5(t,e,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:n0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=n0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function LO(){let i=null,t=!1,e=null,n=null;function s(r,a){e(r,a),n=i.requestAnimationFrame(s)}return{start:function(){t!==!0&&e!==null&&(n=i.requestAnimationFrame(s),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(r){e=r},setContext:function(r){i=r}}}function yV(i){const t=new WeakMap;function e(l,u){const f=l.array,m=l.usage,g=f.byteLength,v=i.createBuffer();i.bindBuffer(u,v),i.bufferData(u,f,m),l.onUploadCallback();let _;if(f instanceof Float32Array)_=i.FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?_=i.HALF_FLOAT:_=i.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=i.SHORT;else if(f instanceof Uint32Array)_=i.UNSIGNED_INT;else if(f instanceof Int32Array)_=i.INT;else if(f instanceof Int8Array)_=i.BYTE;else if(f instanceof Uint8Array)_=i.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:g}}function n(l,u,f){const m=u.array,g=u.updateRanges;if(i.bindBuffer(f,l),g.length===0)i.bufferSubData(f,0,m);else{g.sort((_,b)=>_.start-b.start);let v=0;for(let _=1;_<g.length;_++){const b=g[v],T=g[_];T.start<=b.start+b.count+1?b.count=Math.max(b.count,T.start+T.count-b.start):(++v,g[v]=T)}g.length=v+1;for(let _=0,b=g.length;_<b;_++){const T=g[_];i.bufferSubData(f,T.start*m.BYTES_PER_ELEMENT,m,T.start,T.count)}u.clearUpdateRanges()}u.onUploadCallback()}function s(l){return l.isInterleavedBufferAttribute&&(l=l.data),t.get(l)}function r(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=t.get(l);u&&(i.deleteBuffer(u.buffer),t.delete(l))}function a(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const m=t.get(l);(!m||m.version<l.version)&&t.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=t.get(l);if(f===void 0)t.set(l,e(l,u));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(f.buffer,l,u),f.version=l.version}}return{get:s,remove:r,update:a}}var _V=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,AV=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,xV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,bV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,SV=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,EV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,MV=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,TV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,CV=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,wV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,RV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,LV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,DV=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,BV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,OV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,NV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,IV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,UV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,PV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,FV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,HV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,zV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,GV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,kV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,VV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,QV=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,jV=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,XV=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,qV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,YV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,WV="gl_FragColor = linearToOutputTexel( gl_FragColor );",KV=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,JV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ZV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,$V=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,tQ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,eQ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,nQ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,iQ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,sQ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,rQ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,aQ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,oQ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lQ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,cQ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,uQ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,hQ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,fQ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,dQ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,pQ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,mQ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,gQ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,vQ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,yQ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,_Q=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,AQ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,xQ=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bQ=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,SQ=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,EQ=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,MQ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,TQ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,CQ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,wQ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,RQ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,LQ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,DQ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,BQ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,OQ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,NQ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,IQ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,UQ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,PQ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,FQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,HQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zQ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,GQ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,kQ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,VQ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,QQ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,jQ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,XQ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,qQ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,YQ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,WQ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,KQ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,JQ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ZQ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,$Q=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,tj=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,ej=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,nj=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,ij=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,sj=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,rj=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,aj=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,oj=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,lj=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,cj=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,uj=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,hj=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,fj=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,dj=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,pj=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,mj=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,gj=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,vj=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const yj=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,_j=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Aj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,xj=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Sj=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ej=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Mj=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Tj=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Cj=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,wj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Rj=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Lj=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Dj=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Bj=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Oj=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nj=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ij=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Uj=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Pj=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fj=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Hj=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,zj=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gj=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kj=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Vj=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qj=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jj=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xj=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,qj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Yj=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Wj=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Kj=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Jj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fn={alphahash_fragment:_V,alphahash_pars_fragment:AV,alphamap_fragment:xV,alphamap_pars_fragment:bV,alphatest_fragment:SV,alphatest_pars_fragment:EV,aomap_fragment:MV,aomap_pars_fragment:TV,batching_pars_vertex:CV,batching_vertex:wV,begin_vertex:RV,beginnormal_vertex:LV,bsdfs:DV,iridescence_fragment:BV,bumpmap_pars_fragment:OV,clipping_planes_fragment:NV,clipping_planes_pars_fragment:IV,clipping_planes_pars_vertex:UV,clipping_planes_vertex:PV,color_fragment:FV,color_pars_fragment:HV,color_pars_vertex:zV,color_vertex:GV,common:kV,cube_uv_reflection_fragment:VV,defaultnormal_vertex:QV,displacementmap_pars_vertex:jV,displacementmap_vertex:XV,emissivemap_fragment:qV,emissivemap_pars_fragment:YV,colorspace_fragment:WV,colorspace_pars_fragment:KV,envmap_fragment:JV,envmap_common_pars_fragment:ZV,envmap_pars_fragment:$V,envmap_pars_vertex:tQ,envmap_physical_pars_fragment:hQ,envmap_vertex:eQ,fog_vertex:nQ,fog_pars_vertex:iQ,fog_fragment:sQ,fog_pars_fragment:rQ,gradientmap_pars_fragment:aQ,lightmap_pars_fragment:oQ,lights_lambert_fragment:lQ,lights_lambert_pars_fragment:cQ,lights_pars_begin:uQ,lights_toon_fragment:fQ,lights_toon_pars_fragment:dQ,lights_phong_fragment:pQ,lights_phong_pars_fragment:mQ,lights_physical_fragment:gQ,lights_physical_pars_fragment:vQ,lights_fragment_begin:yQ,lights_fragment_maps:_Q,lights_fragment_end:AQ,logdepthbuf_fragment:xQ,logdepthbuf_pars_fragment:bQ,logdepthbuf_pars_vertex:SQ,logdepthbuf_vertex:EQ,map_fragment:MQ,map_pars_fragment:TQ,map_particle_fragment:CQ,map_particle_pars_fragment:wQ,metalnessmap_fragment:RQ,metalnessmap_pars_fragment:LQ,morphinstance_vertex:DQ,morphcolor_vertex:BQ,morphnormal_vertex:OQ,morphtarget_pars_vertex:NQ,morphtarget_vertex:IQ,normal_fragment_begin:UQ,normal_fragment_maps:PQ,normal_pars_fragment:FQ,normal_pars_vertex:HQ,normal_vertex:zQ,normalmap_pars_fragment:GQ,clearcoat_normal_fragment_begin:kQ,clearcoat_normal_fragment_maps:VQ,clearcoat_pars_fragment:QQ,iridescence_pars_fragment:jQ,opaque_fragment:XQ,packing:qQ,premultiplied_alpha_fragment:YQ,project_vertex:WQ,dithering_fragment:KQ,dithering_pars_fragment:JQ,roughnessmap_fragment:ZQ,roughnessmap_pars_fragment:$Q,shadowmap_pars_fragment:tj,shadowmap_pars_vertex:ej,shadowmap_vertex:nj,shadowmask_pars_fragment:ij,skinbase_vertex:sj,skinning_pars_vertex:rj,skinning_vertex:aj,skinnormal_vertex:oj,specularmap_fragment:lj,specularmap_pars_fragment:cj,tonemapping_fragment:uj,tonemapping_pars_fragment:hj,transmission_fragment:fj,transmission_pars_fragment:dj,uv_pars_fragment:pj,uv_pars_vertex:mj,uv_vertex:gj,worldpos_vertex:vj,background_vert:yj,background_frag:_j,backgroundCube_vert:Aj,backgroundCube_frag:xj,cube_vert:bj,cube_frag:Sj,depth_vert:Ej,depth_frag:Mj,distanceRGBA_vert:Tj,distanceRGBA_frag:Cj,equirect_vert:wj,equirect_frag:Rj,linedashed_vert:Lj,linedashed_frag:Dj,meshbasic_vert:Bj,meshbasic_frag:Oj,meshlambert_vert:Nj,meshlambert_frag:Ij,meshmatcap_vert:Uj,meshmatcap_frag:Pj,meshnormal_vert:Fj,meshnormal_frag:Hj,meshphong_vert:zj,meshphong_frag:Gj,meshphysical_vert:kj,meshphysical_frag:Vj,meshtoon_vert:Qj,meshtoon_frag:jj,points_vert:Xj,points_frag:qj,shadow_vert:Yj,shadow_frag:Wj,sprite_vert:Kj,sprite_frag:Jj},pe={common:{diffuse:{value:new oe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new on}},envmap:{envMap:{value:null},envMapRotation:{value:new on},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new on}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new on}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new on},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new on},normalScale:{value:new Pt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new on},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new on}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new on}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new on}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new oe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new oe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0},uvTransform:{value:new on}},sprite:{diffuse:{value:new oe(16777215)},opacity:{value:1},center:{value:new Pt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}}},Sc={basic:{uniforms:Ta([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:Ta([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,pe.lights,{emissive:{value:new oe(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:Ta([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,pe.lights,{emissive:{value:new oe(0)},specular:{value:new oe(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:Ta([pe.common,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.roughnessmap,pe.metalnessmap,pe.fog,pe.lights,{emissive:{value:new oe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},toon:{uniforms:Ta([pe.common,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.gradientmap,pe.fog,pe.lights,{emissive:{value:new oe(0)}}]),vertexShader:fn.meshtoon_vert,fragmentShader:fn.meshtoon_frag},matcap:{uniforms:Ta([pe.common,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,{matcap:{value:null}}]),vertexShader:fn.meshmatcap_vert,fragmentShader:fn.meshmatcap_frag},points:{uniforms:Ta([pe.points,pe.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:Ta([pe.common,pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:Ta([pe.common,pe.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:Ta([pe.common,pe.bumpmap,pe.normalmap,pe.displacementmap,{opacity:{value:1}}]),vertexShader:fn.meshnormal_vert,fragmentShader:fn.meshnormal_frag},sprite:{uniforms:Ta([pe.sprite,pe.fog]),vertexShader:fn.sprite_vert,fragmentShader:fn.sprite_frag},background:{uniforms:{uvTransform:{value:new on},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fn.background_vert,fragmentShader:fn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new on}},vertexShader:fn.backgroundCube_vert,fragmentShader:fn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:Ta([pe.common,pe.displacementmap,{referencePosition:{value:new et},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:Ta([pe.lights,pe.fog,{color:{value:new oe(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};Sc.physical={uniforms:Ta([Sc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new on},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new on},clearcoatNormalScale:{value:new Pt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new on},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new on},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new on},sheen:{value:0},sheenColor:{value:new oe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new on},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new on},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new on},transmissionSamplerSize:{value:new Pt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new on},attenuationDistance:{value:0},attenuationColor:{value:new oe(0)},specularColor:{value:new oe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new on},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new on},anisotropyVector:{value:new Pt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new on}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag};const o4={r:0,b:0,g:0},gm=new Vo,Zj=new Ne;function $j(i,t,e,n,s,r,a){const l=new oe(0);let u=r===!0?0:1,f,m,g=null,v=0,_=null;function b(D){let B=D.isScene===!0?D.background:null;return B&&B.isTexture&&(B=(D.backgroundBlurriness>0?e:t).get(B)),B}function T(D){let B=!1;const N=b(D);N===null?S(l,u):N&&N.isColor&&(S(N,1),B=!0);const I=i.xr.getEnvironmentBlendMode();I==="additive"?n.buffers.color.setClear(0,0,0,1,a):I==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(i.autoClear||B)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function E(D,B){const N=b(B);N&&(N.isCubeTexture||N.mapping===xy)?(m===void 0&&(m=new as(new s0(1,1,1),new Ks({name:"BackgroundCubeMaterial",uniforms:py(Sc.backgroundCube.uniforms),vertexShader:Sc.backgroundCube.vertexShader,fragmentShader:Sc.backgroundCube.fragmentShader,side:qs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(I,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(m)),gm.copy(B.backgroundRotation),gm.x*=-1,gm.y*=-1,gm.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(gm.y*=-1,gm.z*=-1),m.material.uniforms.envMap.value=N,m.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=B.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(Zj.makeRotationFromEuler(gm)),m.material.toneMapped=Fn.getTransfer(N.colorSpace)!==fi,(g!==N||v!==N.version||_!==i.toneMapping)&&(m.material.needsUpdate=!0,g=N,v=N.version,_=i.toneMapping),m.layers.enableAll(),D.unshift(m,m.geometry,m.material,0,0,null)):N&&N.isTexture&&(f===void 0&&(f=new as(new Ey(2,2),new Ks({name:"BackgroundMaterial",uniforms:py(Sc.background.uniforms),vertexShader:Sc.background.vertexShader,fragmentShader:Sc.background.fragmentShader,side:Lc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(f)),f.material.uniforms.t2D.value=N,f.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,f.material.toneMapped=Fn.getTransfer(N.colorSpace)!==fi,N.matrixAutoUpdate===!0&&N.updateMatrix(),f.material.uniforms.uvTransform.value.copy(N.matrix),(g!==N||v!==N.version||_!==i.toneMapping)&&(f.material.needsUpdate=!0,g=N,v=N.version,_=i.toneMapping),f.layers.enableAll(),D.unshift(f,f.geometry,f.material,0,0,null))}function S(D,B){D.getRGB(o4,UB(i)),n.buffers.color.setClear(o4.r,o4.g,o4.b,B,a)}function w(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(D,B=1){l.set(D),u=B,S(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(D){u=D,S(l,u)},render:T,addToRenderList:E,dispose:w}}function tX(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=v(null);let r=s,a=!1;function l(P,X,lt,it,ut){let dt=!1;const j=g(it,lt,X);r!==j&&(r=j,f(r.object)),dt=_(P,it,lt,ut),dt&&b(P,it,lt,ut),ut!==null&&t.update(ut,i.ELEMENT_ARRAY_BUFFER),(dt||a)&&(a=!1,B(P,X,lt,it),ut!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(ut).buffer))}function u(){return i.createVertexArray()}function f(P){return i.bindVertexArray(P)}function m(P){return i.deleteVertexArray(P)}function g(P,X,lt){const it=lt.wireframe===!0;let ut=n[P.id];ut===void 0&&(ut={},n[P.id]=ut);let dt=ut[X.id];dt===void 0&&(dt={},ut[X.id]=dt);let j=dt[it];return j===void 0&&(j=v(u()),dt[it]=j),j}function v(P){const X=[],lt=[],it=[];for(let ut=0;ut<e;ut++)X[ut]=0,lt[ut]=0,it[ut]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:lt,attributeDivisors:it,object:P,attributes:{},index:null}}function _(P,X,lt,it){const ut=r.attributes,dt=X.attributes;let j=0;const tt=lt.getAttributes();for(const nt in tt)if(tt[nt].location>=0){const J=ut[nt];let ot=dt[nt];if(ot===void 0&&(nt==="instanceMatrix"&&P.instanceMatrix&&(ot=P.instanceMatrix),nt==="instanceColor"&&P.instanceColor&&(ot=P.instanceColor)),J===void 0||J.attribute!==ot||ot&&J.data!==ot.data)return!0;j++}return r.attributesNum!==j||r.index!==it}function b(P,X,lt,it){const ut={},dt=X.attributes;let j=0;const tt=lt.getAttributes();for(const nt in tt)if(tt[nt].location>=0){let J=dt[nt];J===void 0&&(nt==="instanceMatrix"&&P.instanceMatrix&&(J=P.instanceMatrix),nt==="instanceColor"&&P.instanceColor&&(J=P.instanceColor));const ot={};ot.attribute=J,J&&J.data&&(ot.data=J.data),ut[nt]=ot,j++}r.attributes=ut,r.attributesNum=j,r.index=it}function T(){const P=r.newAttributes;for(let X=0,lt=P.length;X<lt;X++)P[X]=0}function E(P){S(P,0)}function S(P,X){const lt=r.newAttributes,it=r.enabledAttributes,ut=r.attributeDivisors;lt[P]=1,it[P]===0&&(i.enableVertexAttribArray(P),it[P]=1),ut[P]!==X&&(i.vertexAttribDivisor(P,X),ut[P]=X)}function w(){const P=r.newAttributes,X=r.enabledAttributes;for(let lt=0,it=X.length;lt<it;lt++)X[lt]!==P[lt]&&(i.disableVertexAttribArray(lt),X[lt]=0)}function D(P,X,lt,it,ut,dt,j){j===!0?i.vertexAttribIPointer(P,X,lt,ut,dt):i.vertexAttribPointer(P,X,lt,it,ut,dt)}function B(P,X,lt,it){T();const ut=it.attributes,dt=lt.getAttributes(),j=X.defaultAttributeValues;for(const tt in dt){const nt=dt[tt];if(nt.location>=0){let _t=ut[tt];if(_t===void 0&&(tt==="instanceMatrix"&&P.instanceMatrix&&(_t=P.instanceMatrix),tt==="instanceColor"&&P.instanceColor&&(_t=P.instanceColor)),_t!==void 0){const J=_t.normalized,ot=_t.itemSize,xt=t.get(_t);if(xt===void 0)continue;const Et=xt.buffer,ct=xt.type,wt=xt.bytesPerElement,Bt=ct===i.INT||ct===i.UNSIGNED_INT||_t.gpuType===qE;if(_t.isInterleavedBufferAttribute){const Ut=_t.data,Wt=Ut.stride,ve=_t.offset;if(Ut.isInstancedInterleavedBuffer){for(let ee=0;ee<nt.locationSize;ee++)S(nt.location+ee,Ut.meshPerAttribute);P.isInstancedMesh!==!0&&it._maxInstanceCount===void 0&&(it._maxInstanceCount=Ut.meshPerAttribute*Ut.count)}else for(let ee=0;ee<nt.locationSize;ee++)E(nt.location+ee);i.bindBuffer(i.ARRAY_BUFFER,Et);for(let ee=0;ee<nt.locationSize;ee++)D(nt.location+ee,ot/nt.locationSize,ct,J,Wt*wt,(ve+ot/nt.locationSize*ee)*wt,Bt)}else{if(_t.isInstancedBufferAttribute){for(let Ut=0;Ut<nt.locationSize;Ut++)S(nt.location+Ut,_t.meshPerAttribute);P.isInstancedMesh!==!0&&it._maxInstanceCount===void 0&&(it._maxInstanceCount=_t.meshPerAttribute*_t.count)}else for(let Ut=0;Ut<nt.locationSize;Ut++)E(nt.location+Ut);i.bindBuffer(i.ARRAY_BUFFER,Et);for(let Ut=0;Ut<nt.locationSize;Ut++)D(nt.location+Ut,ot/nt.locationSize,ct,J,ot*wt,ot/nt.locationSize*Ut*wt,Bt)}}else if(j!==void 0){const J=j[tt];if(J!==void 0)switch(J.length){case 2:i.vertexAttrib2fv(nt.location,J);break;case 3:i.vertexAttrib3fv(nt.location,J);break;case 4:i.vertexAttrib4fv(nt.location,J);break;default:i.vertexAttrib1fv(nt.location,J)}}}}w()}function N(){z();for(const P in n){const X=n[P];for(const lt in X){const it=X[lt];for(const ut in it)m(it[ut].object),delete it[ut];delete X[lt]}delete n[P]}}function I(P){if(n[P.id]===void 0)return;const X=n[P.id];for(const lt in X){const it=X[lt];for(const ut in it)m(it[ut].object),delete it[ut];delete X[lt]}delete n[P.id]}function F(P){for(const X in n){const lt=n[X];if(lt[P.id]===void 0)continue;const it=lt[P.id];for(const ut in it)m(it[ut].object),delete it[ut];delete lt[P.id]}}function z(){U(),a=!0,r!==s&&(r=s,f(r.object))}function U(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:l,reset:z,resetDefaultState:U,dispose:N,releaseStatesOfGeometry:I,releaseStatesOfProgram:F,initAttributes:T,enableAttribute:E,disableUnusedAttributes:w}}function eX(i,t,e){let n;function s(f){n=f}function r(f,m){i.drawArrays(n,f,m),e.update(m,n,1)}function a(f,m,g){g!==0&&(i.drawArraysInstanced(n,f,m,g),e.update(m,n,g))}function l(f,m,g){if(g===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,f,0,m,0,g);let _=0;for(let b=0;b<g;b++)_+=m[b];e.update(_,n,1)}function u(f,m,g,v){if(g===0)return;const _=t.get("WEBGL_multi_draw");if(_===null)for(let b=0;b<f.length;b++)a(f[b],m[b],v[b]);else{_.multiDrawArraysInstancedWEBGL(n,f,0,m,0,v,0,g);let b=0;for(let T=0;T<g;T++)b+=m[T]*v[T];e.update(b,n,1)}}this.setMode=s,this.render=r,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function nX(i,t,e,n){let s;function r(){if(s!==void 0)return s;if(t.has("EXT_texture_filter_anisotropic")===!0){const F=t.get("EXT_texture_filter_anisotropic");s=i.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(F){return!(F!==na&&n.convert(F)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(F){const z=F===i0&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(F!==Ws&&n.convert(F)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==Oa&&!z)}function u(F){if(F==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=e.precision!==void 0?e.precision:"highp";const m=u(f);m!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",m,"instead."),f=m);const g=e.logarithmicDepthBuffer===!0,v=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),_=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),b=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T=i.getParameter(i.MAX_TEXTURE_SIZE),E=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),S=i.getParameter(i.MAX_VERTEX_ATTRIBS),w=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),D=i.getParameter(i.MAX_VARYING_VECTORS),B=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),N=b>0,I=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:u,textureFormatReadable:a,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:g,reverseDepthBuffer:v,maxTextures:_,maxVertexTextures:b,maxTextureSize:T,maxCubemapSize:E,maxAttributes:S,maxVertexUniforms:w,maxVaryings:D,maxFragmentUniforms:B,vertexTextures:N,maxSamples:I}}function iX(i){const t=this;let e=null,n=0,s=!1,r=!1;const a=new pd,l=new on,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const _=g.length!==0||v||n!==0||s;return s=v,n=g.length,_},this.beginShadows=function(){r=!0,m(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(g,v){e=m(g,v,0)},this.setState=function(g,v,_){const b=g.clippingPlanes,T=g.clipIntersection,E=g.clipShadows,S=i.get(g);if(!s||b===null||b.length===0||r&&!E)r?m(null):f();else{const w=r?0:n,D=w*4;let B=S.clippingState||null;u.value=B,B=m(b,v,D,_);for(let N=0;N!==D;++N)B[N]=e[N];S.clippingState=B,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=w}};function f(){u.value!==e&&(u.value=e,u.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function m(g,v,_,b){const T=g!==null?g.length:0;let E=null;if(T!==0){if(E=u.value,b!==!0||E===null){const S=_+T*4,w=v.matrixWorldInverse;l.getNormalMatrix(w),(E===null||E.length<S)&&(E=new Float32Array(S));for(let D=0,B=_;D!==T;++D,B+=4)a.copy(g[D]).applyMatrix4(w,l),a.normal.toArray(E,B),E[B+3]=a.constant}u.value=E,u.needsUpdate=!0}return t.numPlanes=T,t.numIntersection=0,E}}function sX(i){let t=new WeakMap;function e(a,l){return l===X_?a.mapping=sf:l===q_&&(a.mapping=Zd),a}function n(a){if(a&&a.isTexture){const l=a.mapping;if(l===X_||l===q_)if(t.has(a)){const u=t.get(a).texture;return e(u,a.mapping)}else{const u=a.image;if(u&&u.height>0){const f=new HB(u.height);return f.fromEquirectangularTexture(i,a),t.set(a,f),a.addEventListener("dispose",s),e(f.texture,a.mapping)}else return null}}return a}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function r(){t=new WeakMap}return{get:n,dispose:r}}const Y1=4,oL=[.125,.215,.35,.446,.526,.582],Cm=20,S8=new Ty,lL=new oe;let E8=null,M8=0,T8=0,C8=!1;const xm=(1+Math.sqrt(5))/2,L1=1/xm,cL=[new et(-xm,L1,0),new et(xm,L1,0),new et(-L1,0,xm),new et(L1,0,xm),new et(0,xm,-L1),new et(0,xm,L1),new et(-1,1,-1),new et(1,1,-1),new et(-1,1,1),new et(1,1,1)],rX=new et;class N5{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,s=100,r={}){const{size:a=256,position:l=rX}=r;E8=this._renderer.getRenderTarget(),M8=this._renderer.getActiveCubeFace(),T8=this._renderer.getActiveMipmapLevel(),C8=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(t,n,s,u,l),e>0&&this._blur(u,0,0,e),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=fL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=hL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(E8,M8,T8),this._renderer.xr.enabled=C8,t.scissorTest=!1,l4(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===sf||t.mapping===Zd?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),E8=this._renderer.getRenderTarget(),M8=this._renderer.getActiveCubeFace(),T8=this._renderer.getActiveMipmapLevel(),C8=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Ni,minFilter:Ni,generateMipmaps:!1,type:i0,format:na,colorSpace:Fu,depthBuffer:!1},s=uL(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=uL(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=aX(r)),this._blurMaterial=oX(r,t,e)}return s}_compileMaterial(t){const e=new as(this._lodPlanes[0],t);this._renderer.compile(e,S8)}_sceneToCubeUV(t,e,n,s,r){const u=new Rs(90,1,e,n),f=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],g=this._renderer,v=g.autoClear,_=g.toneMapping;g.getClearColor(lL),g.toneMapping=Rc,g.autoClear=!1;const b=new zo({name:"PMREM.Background",side:qs,depthWrite:!1,depthTest:!1}),T=new as(new s0,b);let E=!1;const S=t.background;S?S.isColor&&(b.color.copy(S),t.background=null,E=!0):(b.color.copy(lL),E=!0);for(let w=0;w<6;w++){const D=w%3;D===0?(u.up.set(0,f[w],0),u.position.set(r.x,r.y,r.z),u.lookAt(r.x+m[w],r.y,r.z)):D===1?(u.up.set(0,0,f[w]),u.position.set(r.x,r.y,r.z),u.lookAt(r.x,r.y+m[w],r.z)):(u.up.set(0,f[w],0),u.position.set(r.x,r.y,r.z),u.lookAt(r.x,r.y,r.z+m[w]));const B=this._cubeSize;l4(s,D*B,w>2?B:0,B,B),g.setRenderTarget(s),E&&g.render(T,u),g.render(t,u)}T.geometry.dispose(),T.material.dispose(),g.toneMapping=_,g.autoClear=v,t.background=S}_textureToCubeUV(t,e){const n=this._renderer,s=t.mapping===sf||t.mapping===Zd;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=fL()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=hL());const r=s?this._cubemapMaterial:this._equirectMaterial,a=new as(this._lodPlanes[0],r),l=r.uniforms;l.envMap.value=t;const u=this._cubeSize;l4(e,0,0,3*u,2*u),n.setRenderTarget(e),n.render(a,S8)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),l=cL[(s-r-1)%cL.length];this._blur(t,r-1,r,a,l)}e.autoClear=n}_blur(t,e,n,s,r){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,s,"latitudinal",r),this._halfBlur(a,t,n,n,s,"longitudinal",r)}_halfBlur(t,e,n,s,r,a,l){const u=this._renderer,f=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,g=new as(this._lodPlanes[s],f),v=f.uniforms,_=this._sizeLods[n]-1,b=isFinite(r)?Math.PI/(2*_):2*Math.PI/(2*Cm-1),T=r/b,E=isFinite(r)?1+Math.floor(m*T):Cm;E>Cm&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${Cm}`);const S=[];let w=0;for(let F=0;F<Cm;++F){const z=F/T,U=Math.exp(-z*z/2);S.push(U),F===0?w+=U:F<E&&(w+=2*U)}for(let F=0;F<S.length;F++)S[F]=S[F]/w;v.envMap.value=t.texture,v.samples.value=E,v.weights.value=S,v.latitudinal.value=a==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:D}=this;v.dTheta.value=b,v.mipInt.value=D-n;const B=this._sizeLods[s],N=3*B*(s>D-Y1?s-D+Y1:0),I=4*(this._cubeSize-B);l4(e,N,I,3*B,2*B),u.setRenderTarget(e),u.render(g,S8)}}function aX(i){const t=[],e=[],n=[];let s=i;const r=i-Y1+1+oL.length;for(let a=0;a<r;a++){const l=Math.pow(2,s);e.push(l);let u=1/l;a>i-Y1?u=oL[a-i+Y1-1]:a===0&&(u=0),n.push(u);const f=1/(l-2),m=-f,g=1+f,v=[m,m,g,m,g,g,m,m,g,g,m,g],_=6,b=6,T=3,E=2,S=1,w=new Float32Array(T*b*_),D=new Float32Array(E*b*_),B=new Float32Array(S*b*_);for(let I=0;I<_;I++){const F=I%3*2/3-1,z=I>2?0:-1,U=[F,z,0,F+2/3,z,0,F+2/3,z+1,0,F,z,0,F+2/3,z+1,0,F,z+1,0];w.set(U,T*b*I),D.set(v,E*b*I);const P=[I,I,I,I,I,I];B.set(P,S*b*I)}const N=new $e;N.setAttribute("position",new zn(w,T)),N.setAttribute("uv",new zn(D,E)),N.setAttribute("faceIndex",new zn(B,S)),t.push(N),s>Y1&&s--}return{lodPlanes:t,sizeLods:e,sigmas:n}}function uL(i,t,e){const n=new Ds(i,t,e);return n.texture.mapping=xy,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function l4(i,t,e,n,s){i.viewport.set(t,e,n,s),i.scissor.set(t,e,n,s)}function oX(i,t,e){const n=new Float32Array(Cm),s=new et(0,1,0);return new Ks({name:"SphericalGaussianBlur",defines:{n:Cm,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:p7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ra,depthTest:!1,depthWrite:!1})}function hL(){return new Ks({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:p7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ra,depthTest:!1,depthWrite:!1})}function fL(){return new Ks({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:p7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ra,depthTest:!1,depthWrite:!1})}function p7(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function lX(i){let t=new WeakMap,e=null;function n(l){if(l&&l.isTexture){const u=l.mapping,f=u===X_||u===q_,m=u===sf||u===Zd;if(f||m){let g=t.get(l);const v=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return e===null&&(e=new N5(i)),g=f?e.fromEquirectangular(l,g):e.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,t.set(l,g),g.texture;if(g!==void 0)return g.texture;{const _=l.image;return f&&_&&_.height>0||m&&_&&s(_)?(e===null&&(e=new N5(i)),g=f?e.fromEquirectangular(l):e.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,t.set(l,g),l.addEventListener("dispose",r),g.texture):null}}}return l}function s(l){let u=0;const f=6;for(let m=0;m<f;m++)l[m]!==void 0&&u++;return u===f}function r(l){const u=l.target;u.removeEventListener("dispose",r);const f=t.get(u);f!==void 0&&(t.delete(u),f.dispose())}function a(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:a}}function cX(i){const t={};function e(n){if(t[n]!==void 0)return t[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return t[n]=s,s}return{has:function(n){return e(n)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const s=e(n);return s===null&&L4("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function uX(i,t,e,n){const s={},r=new WeakMap;function a(g){const v=g.target;v.index!==null&&t.remove(v.index);for(const b in v.attributes)t.remove(v.attributes[b]);v.removeEventListener("dispose",a),delete s[v.id];const _=r.get(v);_&&(t.remove(_),r.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,e.memory.geometries--}function l(g,v){return s[v.id]===!0||(v.addEventListener("dispose",a),s[v.id]=!0,e.memory.geometries++),v}function u(g){const v=g.attributes;for(const _ in v)t.update(v[_],i.ARRAY_BUFFER)}function f(g){const v=[],_=g.index,b=g.attributes.position;let T=0;if(_!==null){const w=_.array;T=_.version;for(let D=0,B=w.length;D<B;D+=3){const N=w[D+0],I=w[D+1],F=w[D+2];v.push(N,I,I,F,F,N)}}else if(b!==void 0){const w=b.array;T=b.version;for(let D=0,B=w.length/3-1;D<B;D+=3){const N=D+0,I=D+1,F=D+2;v.push(N,I,I,F,F,N)}}else return;const E=new(BB(v)?Hw:Fw)(v,1);E.version=T;const S=r.get(g);S&&t.remove(S),r.set(g,E)}function m(g){const v=r.get(g);if(v){const _=g.index;_!==null&&v.version<_.version&&f(g)}else f(g);return r.get(g)}return{get:l,update:u,getWireframeAttribute:m}}function hX(i,t,e){let n;function s(v){n=v}let r,a;function l(v){r=v.type,a=v.bytesPerElement}function u(v,_){i.drawElements(n,_,r,v*a),e.update(_,n,1)}function f(v,_,b){b!==0&&(i.drawElementsInstanced(n,_,r,v*a,b),e.update(_,n,b))}function m(v,_,b){if(b===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,_,0,r,v,0,b);let E=0;for(let S=0;S<b;S++)E+=_[S];e.update(E,n,1)}function g(v,_,b,T){if(b===0)return;const E=t.get("WEBGL_multi_draw");if(E===null)for(let S=0;S<v.length;S++)f(v[S]/a,_[S],T[S]);else{E.multiDrawElementsInstancedWEBGL(n,_,0,r,v,0,T,0,b);let S=0;for(let w=0;w<b;w++)S+=_[w]*T[w];e.update(S,n,1)}}this.setMode=s,this.setIndex=l,this.render=u,this.renderInstances=f,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function fX(i){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,a,l){switch(e.calls++,a){case i.TRIANGLES:e.triangles+=l*(r/3);break;case i.LINES:e.lines+=l*(r/2);break;case i.LINE_STRIP:e.lines+=l*(r-1);break;case i.LINE_LOOP:e.lines+=l*r;break;case i.POINTS:e.points+=l*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:s,update:n}}function dX(i,t,e){const n=new WeakMap,s=new On;function r(a,l,u){const f=a.morphTargetInfluences,m=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=m!==void 0?m.length:0;let v=n.get(l);if(v===void 0||v.count!==g){let P=function(){z.dispose(),n.delete(l),l.removeEventListener("dispose",P)};var _=P;v!==void 0&&v.texture.dispose();const b=l.morphAttributes.position!==void 0,T=l.morphAttributes.normal!==void 0,E=l.morphAttributes.color!==void 0,S=l.morphAttributes.position||[],w=l.morphAttributes.normal||[],D=l.morphAttributes.color||[];let B=0;b===!0&&(B=1),T===!0&&(B=2),E===!0&&(B=3);let N=l.attributes.position.count*B,I=1;N>t.maxTextureSize&&(I=Math.ceil(N/t.maxTextureSize),N=t.maxTextureSize);const F=new Float32Array(N*I*4*g),z=new Tx(F,N,I,g);z.type=Oa,z.needsUpdate=!0;const U=B*4;for(let X=0;X<g;X++){const lt=S[X],it=w[X],ut=D[X],dt=N*I*4*X;for(let j=0;j<lt.count;j++){const tt=j*U;b===!0&&(s.fromBufferAttribute(lt,j),F[dt+tt+0]=s.x,F[dt+tt+1]=s.y,F[dt+tt+2]=s.z,F[dt+tt+3]=0),T===!0&&(s.fromBufferAttribute(it,j),F[dt+tt+4]=s.x,F[dt+tt+5]=s.y,F[dt+tt+6]=s.z,F[dt+tt+7]=0),E===!0&&(s.fromBufferAttribute(ut,j),F[dt+tt+8]=s.x,F[dt+tt+9]=s.y,F[dt+tt+10]=s.z,F[dt+tt+11]=ut.itemSize===4?s.w:1)}}v={count:g,texture:z,size:new Pt(N,I)},n.set(l,v),l.addEventListener("dispose",P)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)u.getUniforms().setValue(i,"morphTexture",a.morphTexture,e);else{let b=0;for(let E=0;E<f.length;E++)b+=f[E];const T=l.morphTargetsRelative?1:1-b;u.getUniforms().setValue(i,"morphTargetBaseInfluence",T),u.getUniforms().setValue(i,"morphTargetInfluences",f)}u.getUniforms().setValue(i,"morphTargetsTexture",v.texture,e),u.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}return{update:r}}function pX(i,t,e,n){let s=new WeakMap;function r(u){const f=n.render.frame,m=u.geometry,g=t.get(u,m);if(s.get(g)!==f&&(t.update(g),s.set(g,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),s.get(u)!==f&&(e.update(u.instanceMatrix,i.ARRAY_BUFFER),u.instanceColor!==null&&e.update(u.instanceColor,i.ARRAY_BUFFER),s.set(u,f))),u.isSkinnedMesh){const v=u.skeleton;s.get(v)!==f&&(v.update(),s.set(v,f))}return g}function a(){s=new WeakMap}function l(u){const f=u.target;f.removeEventListener("dispose",l),e.remove(f.instanceMatrix),f.instanceColor!==null&&e.remove(f.instanceColor)}return{update:r,dispose:a}}const DO=new wi,dL=new Dx(1,1),BO=new Tx,OO=new eM,NO=new wx,pL=[],mL=[],gL=new Float32Array(16),vL=new Float32Array(9),yL=new Float32Array(4);function Cy(i,t,e){const n=i[0];if(n<=0||n>0)return i;const s=t*e;let r=pL[s];if(r===void 0&&(r=new Float32Array(s),pL[s]=r),t!==0){n.toArray(r,0);for(let a=1,l=0;a!==t;++a)l+=e,i[a].toArray(r,l)}return r}function Js(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function Zs(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function bM(i,t){let e=mL[t];e===void 0&&(e=new Int32Array(t),mL[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function mX(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function gX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Js(e,t))return;i.uniform2fv(this.addr,t),Zs(e,t)}}function vX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Js(e,t))return;i.uniform3fv(this.addr,t),Zs(e,t)}}function yX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Js(e,t))return;i.uniform4fv(this.addr,t),Zs(e,t)}}function _X(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Js(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),Zs(e,t)}else{if(Js(e,n))return;yL.set(n),i.uniformMatrix2fv(this.addr,!1,yL),Zs(e,n)}}function AX(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Js(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),Zs(e,t)}else{if(Js(e,n))return;vL.set(n),i.uniformMatrix3fv(this.addr,!1,vL),Zs(e,n)}}function xX(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Js(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),Zs(e,t)}else{if(Js(e,n))return;gL.set(n),i.uniformMatrix4fv(this.addr,!1,gL),Zs(e,n)}}function bX(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function SX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Js(e,t))return;i.uniform2iv(this.addr,t),Zs(e,t)}}function EX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Js(e,t))return;i.uniform3iv(this.addr,t),Zs(e,t)}}function MX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Js(e,t))return;i.uniform4iv(this.addr,t),Zs(e,t)}}function TX(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function CX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Js(e,t))return;i.uniform2uiv(this.addr,t),Zs(e,t)}}function wX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Js(e,t))return;i.uniform3uiv(this.addr,t),Zs(e,t)}}function RX(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Js(e,t))return;i.uniform4uiv(this.addr,t),Zs(e,t)}}function LX(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(dL.compareFunction=Uw,r=dL):r=DO,e.setTexture2D(t||r,s)}function DX(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTexture3D(t||OO,s)}function BX(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTextureCube(t||NO,s)}function OX(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTexture2DArray(t||BO,s)}function NX(i){switch(i){case 5126:return mX;case 35664:return gX;case 35665:return vX;case 35666:return yX;case 35674:return _X;case 35675:return AX;case 35676:return xX;case 5124:case 35670:return bX;case 35667:case 35671:return SX;case 35668:case 35672:return EX;case 35669:case 35673:return MX;case 5125:return TX;case 36294:return CX;case 36295:return wX;case 36296:return RX;case 35678:case 36198:case 36298:case 36306:case 35682:return LX;case 35679:case 36299:case 36307:return DX;case 35680:case 36300:case 36308:case 36293:return BX;case 36289:case 36303:case 36311:case 36292:return OX}}function IX(i,t){i.uniform1fv(this.addr,t)}function UX(i,t){const e=Cy(t,this.size,2);i.uniform2fv(this.addr,e)}function PX(i,t){const e=Cy(t,this.size,3);i.uniform3fv(this.addr,e)}function FX(i,t){const e=Cy(t,this.size,4);i.uniform4fv(this.addr,e)}function HX(i,t){const e=Cy(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function zX(i,t){const e=Cy(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function GX(i,t){const e=Cy(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function kX(i,t){i.uniform1iv(this.addr,t)}function VX(i,t){i.uniform2iv(this.addr,t)}function QX(i,t){i.uniform3iv(this.addr,t)}function jX(i,t){i.uniform4iv(this.addr,t)}function XX(i,t){i.uniform1uiv(this.addr,t)}function qX(i,t){i.uniform2uiv(this.addr,t)}function YX(i,t){i.uniform3uiv(this.addr,t)}function WX(i,t){i.uniform4uiv(this.addr,t)}function KX(i,t,e){const n=this.cache,s=t.length,r=bM(e,s);Js(n,r)||(i.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==s;++a)e.setTexture2D(t[a]||DO,r[a])}function JX(i,t,e){const n=this.cache,s=t.length,r=bM(e,s);Js(n,r)||(i.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==s;++a)e.setTexture3D(t[a]||OO,r[a])}function ZX(i,t,e){const n=this.cache,s=t.length,r=bM(e,s);Js(n,r)||(i.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==s;++a)e.setTextureCube(t[a]||NO,r[a])}function $X(i,t,e){const n=this.cache,s=t.length,r=bM(e,s);Js(n,r)||(i.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==s;++a)e.setTexture2DArray(t[a]||BO,r[a])}function tq(i){switch(i){case 5126:return IX;case 35664:return UX;case 35665:return PX;case 35666:return FX;case 35674:return HX;case 35675:return zX;case 35676:return GX;case 5124:case 35670:return kX;case 35667:case 35671:return VX;case 35668:case 35672:return QX;case 35669:case 35673:return jX;case 5125:return XX;case 36294:return qX;case 36295:return YX;case 36296:return WX;case 35678:case 36198:case 36298:case 36306:case 35682:return KX;case 35679:case 36299:case 36307:return JX;case 35680:case 36300:case 36308:case 36293:return ZX;case 36289:case 36303:case 36311:case 36292:return $X}}class eq{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=NX(e.type)}}class nq{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=tq(e.type)}}class iq{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const s=this.seq;for(let r=0,a=s.length;r!==a;++r){const l=s[r];l.setValue(t,e[l.id],n)}}}const w8=/(\w+)(\])?(\[|\.)?/g;function _L(i,t){i.seq.push(t),i.map[t.id]=t}function sq(i,t,e){const n=i.name,s=n.length;for(w8.lastIndex=0;;){const r=w8.exec(n),a=w8.lastIndex;let l=r[1];const u=r[2]==="]",f=r[3];if(u&&(l=l|0),f===void 0||f==="["&&a+2===s){_L(e,f===void 0?new eq(l,i,t):new nq(l,i,t));break}else{let g=e.map[l];g===void 0&&(g=new iq(l),_L(e,g)),e=g}}}class B4{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=t.getActiveUniform(e,s),a=t.getUniformLocation(e,r.name);sq(r,a,this)}}setValue(t,e,n,s){const r=this.map[e];r!==void 0&&r.setValue(t,n,s)}setOptional(t,e,n){const s=e[n];s!==void 0&&this.setValue(t,n,s)}static upload(t,e,n,s){for(let r=0,a=e.length;r!==a;++r){const l=e[r],u=n[l.id];u.needsUpdate!==!1&&l.setValue(t,u.value,s)}}static seqWithValue(t,e){const n=[];for(let s=0,r=t.length;s!==r;++s){const a=t[s];a.id in e&&n.push(a)}return n}}function AL(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const rq=37297;let aq=0;function oq(i,t){const e=i.split(`
`),n=[],s=Math.max(t-6,0),r=Math.min(t+6,e.length);for(let a=s;a<r;a++){const l=a+1;n.push(`${l===t?">":" "} ${l}: ${e[a]}`)}return n.join(`
`)}const xL=new on;function lq(i){Fn._getMatrix(xL,Fn.workingColorSpace,i);const t=`mat3( ${xL.elements.map(e=>e.toFixed(4))} )`;switch(Fn.getTransfer(i)){case W_:return[t,"LinearTransferOETF"];case fi:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[t,"LinearTransferOETF"]}}function bL(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),s=i.getShaderInfoLog(t).trim();if(n&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const a=parseInt(r[1]);return e.toUpperCase()+`

`+s+`

`+oq(i.getShaderSource(t),a)}else return s}function cq(i,t){const e=lq(t);return[`vec4 ${i}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function uq(i,t){let e;switch(t){case fB:e="Linear";break;case dB:e="Reinhard";break;case pB:e="Cineon";break;case Tw:e="ACESFilmic";break;case gB:e="AgX";break;case vB:e="Neutral";break;case mB:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const c4=new et;function hq(){Fn.getLuminanceCoefficients(c4);const i=c4.x.toFixed(4),t=c4.y.toFixed(4),e=c4.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function fq(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(h_).join(`
`)}function dq(i){const t=[];for(const e in i){const n=i[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function pq(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(t,s),a=r.name;let l=1;r.type===i.FLOAT_MAT2&&(l=2),r.type===i.FLOAT_MAT3&&(l=3),r.type===i.FLOAT_MAT4&&(l=4),e[a]={type:r.type,location:i.getAttribLocation(t,a),locationSize:l}}return e}function h_(i){return i!==""}function SL(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function EL(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const mq=/^[ \t]*#include +<([\w\d./]+)>/gm;function I5(i){return i.replace(mq,vq)}const gq=new Map;function vq(i,t){let e=fn[t];if(e===void 0){const n=gq.get(t);if(n!==void 0)e=fn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return I5(e)}const yq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ML(i){return i.replace(yq,_q)}function _q(i,t,e,n){let s="";for(let r=parseInt(t);r<parseInt(e);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function TL(i){let t=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?t+=`
#define HIGH_PRECISION`:i.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function Aq(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===QE?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===L_?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===lc&&(t="SHADOWMAP_TYPE_VSM"),t}function xq(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case sf:case Zd:t="ENVMAP_TYPE_CUBE";break;case xy:t="ENVMAP_TYPE_CUBE_UV";break}return t}function bq(i){let t="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Zd:t="ENVMAP_MODE_REFRACTION";break}return t}function Sq(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Ex:t="ENVMAP_BLENDING_MULTIPLY";break;case uB:t="ENVMAP_BLENDING_MIX";break;case hB:t="ENVMAP_BLENDING_ADD";break}return t}function Eq(i){const t=i.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:n,maxMip:e}}function Mq(i,t,e,n){const s=i.getContext(),r=e.defines;let a=e.vertexShader,l=e.fragmentShader;const u=Aq(e),f=xq(e),m=bq(e),g=Sq(e),v=Eq(e),_=fq(e),b=dq(r),T=s.createProgram();let E,S,w=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(E=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(h_).join(`
`),E.length>0&&(E+=`
`),S=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(h_).join(`
`),S.length>0&&(S+=`
`)):(E=[TL(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+m:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(h_).join(`
`),S=[TL(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.envMap?"#define "+m:"",e.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Rc?"#define TONE_MAPPING":"",e.toneMapping!==Rc?fn.tonemapping_pars_fragment:"",e.toneMapping!==Rc?uq("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",fn.colorspace_pars_fragment,cq("linearToOutputTexel",e.outputColorSpace),hq(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(h_).join(`
`)),a=I5(a),a=SL(a,e),a=EL(a,e),l=I5(l),l=SL(l,e),l=EL(l,e),a=ML(a),l=ML(l),e.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,E=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,S=["#define varying in",e.glslVersion===C5?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===C5?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const D=w+E+a,B=w+S+l,N=AL(s,s.VERTEX_SHADER,D),I=AL(s,s.FRAGMENT_SHADER,B);s.attachShader(T,N),s.attachShader(T,I),e.index0AttributeName!==void 0?s.bindAttribLocation(T,0,e.index0AttributeName):e.morphTargets===!0&&s.bindAttribLocation(T,0,"position"),s.linkProgram(T);function F(X){if(i.debug.checkShaderErrors){const lt=s.getProgramInfoLog(T).trim(),it=s.getShaderInfoLog(N).trim(),ut=s.getShaderInfoLog(I).trim();let dt=!0,j=!0;if(s.getProgramParameter(T,s.LINK_STATUS)===!1)if(dt=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,T,N,I);else{const tt=bL(s,N,"vertex"),nt=bL(s,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(T,s.VALIDATE_STATUS)+`

Material Name: `+X.name+`
Material Type: `+X.type+`

Program Info Log: `+lt+`
`+tt+`
`+nt)}else lt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",lt):(it===""||ut==="")&&(j=!1);j&&(X.diagnostics={runnable:dt,programLog:lt,vertexShader:{log:it,prefix:E},fragmentShader:{log:ut,prefix:S}})}s.deleteShader(N),s.deleteShader(I),z=new B4(s,T),U=pq(s,T)}let z;this.getUniforms=function(){return z===void 0&&F(this),z};let U;this.getAttributes=function(){return U===void 0&&F(this),U};let P=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=s.getProgramParameter(T,rq)),P},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(T),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=aq++,this.cacheKey=t,this.usedTimes=1,this.program=T,this.vertexShader=N,this.fragmentShader=I,this}let Tq=0;class Cq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,s=this._getShaderStage(e),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return n===void 0&&(n=new wq(t),e.set(t,n)),n}}class wq{constructor(t){this.id=Tq++,this.code=t,this.usedTimes=0}}function Rq(i,t,e,n,s,r,a){const l=new dy,u=new Cq,f=new Set,m=[],g=s.logarithmicDepthBuffer,v=s.vertexTextures;let _=s.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(U){return f.add(U),U===0?"uv":`uv${U}`}function E(U,P,X,lt,it){const ut=lt.fog,dt=it.geometry,j=U.isMeshStandardMaterial?lt.environment:null,tt=(U.isMeshStandardMaterial?e:t).get(U.envMap||j),nt=tt&&tt.mapping===xy?tt.image.height:null,_t=b[U.type];U.precision!==null&&(_=s.getMaxPrecision(U.precision),_!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",_,"instead."));const J=dt.morphAttributes.position||dt.morphAttributes.normal||dt.morphAttributes.color,ot=J!==void 0?J.length:0;let xt=0;dt.morphAttributes.position!==void 0&&(xt=1),dt.morphAttributes.normal!==void 0&&(xt=2),dt.morphAttributes.color!==void 0&&(xt=3);let Et,ct,wt,Bt;if(_t){const Cn=Sc[_t];Et=Cn.vertexShader,ct=Cn.fragmentShader}else Et=U.vertexShader,ct=U.fragmentShader,u.update(U),wt=u.getVertexShaderID(U),Bt=u.getFragmentShaderID(U);const Ut=i.getRenderTarget(),Wt=i.state.buffers.depth.getReversed(),ve=it.isInstancedMesh===!0,ee=it.isBatchedMesh===!0,Ye=!!U.map,we=!!U.matcap,re=!!tt,Z=!!U.aoMap,Kt=!!U.lightMap,Ft=!!U.bumpMap,Vt=!!U.normalMap,Gt=!!U.displacementMap,be=!!U.emissiveMap,qt=!!U.metalnessMap,$=!!U.roughnessMap,Q=U.anisotropy>0,vt=U.clearcoat>0,It=U.dispersion>0,jt=U.iridescence>0,Ot=U.sheen>0,ne=U.transmission>0,te=Q&&!!U.anisotropyMap,ge=vt&&!!U.clearcoatMap,De=vt&&!!U.clearcoatNormalMap,Jt=vt&&!!U.clearcoatRoughnessMap,_e=jt&&!!U.iridescenceMap,Se=jt&&!!U.iridescenceThicknessMap,Te=Ot&&!!U.sheenColorMap,ce=Ot&&!!U.sheenRoughnessMap,rn=!!U.specularMap,He=!!U.specularColorMap,Gn=!!U.specularIntensityMap,mt=ne&&!!U.transmissionMap,ue=ne&&!!U.thicknessMap,Nt=!!U.gradientMap,Qt=!!U.alphaMap,fe=U.alphaTest>0,he=!!U.alphaHash,qe=!!U.extensions;let Jn=Rc;U.toneMapped&&(Ut===null||Ut.isXRRenderTarget===!0)&&(Jn=i.toneMapping);const Ei={shaderID:_t,shaderType:U.type,shaderName:U.name,vertexShader:Et,fragmentShader:ct,defines:U.defines,customVertexShaderID:wt,customFragmentShaderID:Bt,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:_,batching:ee,batchingColor:ee&&it._colorsTexture!==null,instancing:ve,instancingColor:ve&&it.instanceColor!==null,instancingMorph:ve&&it.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:Ut===null?i.outputColorSpace:Ut.isXRRenderTarget===!0?Ut.texture.colorSpace:Fu,alphaToCoverage:!!U.alphaToCoverage,map:Ye,matcap:we,envMap:re,envMapMode:re&&tt.mapping,envMapCubeUVHeight:nt,aoMap:Z,lightMap:Kt,bumpMap:Ft,normalMap:Vt,displacementMap:v&&Gt,emissiveMap:be,normalMapObjectSpace:Vt&&U.normalMapType===EB,normalMapTangentSpace:Vt&&U.normalMapType===lp,metalnessMap:qt,roughnessMap:$,anisotropy:Q,anisotropyMap:te,clearcoat:vt,clearcoatMap:ge,clearcoatNormalMap:De,clearcoatRoughnessMap:Jt,dispersion:It,iridescence:jt,iridescenceMap:_e,iridescenceThicknessMap:Se,sheen:Ot,sheenColorMap:Te,sheenRoughnessMap:ce,specularMap:rn,specularColorMap:He,specularIntensityMap:Gn,transmission:ne,transmissionMap:mt,thicknessMap:ue,gradientMap:Nt,opaque:U.transparent===!1&&U.blending===Ng&&U.alphaToCoverage===!1,alphaMap:Qt,alphaTest:fe,alphaHash:he,combine:U.combine,mapUv:Ye&&T(U.map.channel),aoMapUv:Z&&T(U.aoMap.channel),lightMapUv:Kt&&T(U.lightMap.channel),bumpMapUv:Ft&&T(U.bumpMap.channel),normalMapUv:Vt&&T(U.normalMap.channel),displacementMapUv:Gt&&T(U.displacementMap.channel),emissiveMapUv:be&&T(U.emissiveMap.channel),metalnessMapUv:qt&&T(U.metalnessMap.channel),roughnessMapUv:$&&T(U.roughnessMap.channel),anisotropyMapUv:te&&T(U.anisotropyMap.channel),clearcoatMapUv:ge&&T(U.clearcoatMap.channel),clearcoatNormalMapUv:De&&T(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Jt&&T(U.clearcoatRoughnessMap.channel),iridescenceMapUv:_e&&T(U.iridescenceMap.channel),iridescenceThicknessMapUv:Se&&T(U.iridescenceThicknessMap.channel),sheenColorMapUv:Te&&T(U.sheenColorMap.channel),sheenRoughnessMapUv:ce&&T(U.sheenRoughnessMap.channel),specularMapUv:rn&&T(U.specularMap.channel),specularColorMapUv:He&&T(U.specularColorMap.channel),specularIntensityMapUv:Gn&&T(U.specularIntensityMap.channel),transmissionMapUv:mt&&T(U.transmissionMap.channel),thicknessMapUv:ue&&T(U.thicknessMap.channel),alphaMapUv:Qt&&T(U.alphaMap.channel),vertexTangents:!!dt.attributes.tangent&&(Vt||Q),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!dt.attributes.color&&dt.attributes.color.itemSize===4,pointsUvs:it.isPoints===!0&&!!dt.attributes.uv&&(Ye||Qt),fog:!!ut,useFog:U.fog===!0,fogExp2:!!ut&&ut.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:Wt,skinning:it.isSkinnedMesh===!0,morphTargets:dt.morphAttributes.position!==void 0,morphNormals:dt.morphAttributes.normal!==void 0,morphColors:dt.morphAttributes.color!==void 0,morphTargetsCount:ot,morphTextureStride:xt,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:U.dithering,shadowMapEnabled:i.shadowMap.enabled&&X.length>0,shadowMapType:i.shadowMap.type,toneMapping:Jn,decodeVideoTexture:Ye&&U.map.isVideoTexture===!0&&Fn.getTransfer(U.map.colorSpace)===fi,decodeVideoTextureEmissive:be&&U.emissiveMap.isVideoTexture===!0&&Fn.getTransfer(U.emissiveMap.colorSpace)===fi,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===La,flipSided:U.side===qs,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:qe&&U.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(qe&&U.extensions.multiDraw===!0||ee)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return Ei.vertexUv1s=f.has(1),Ei.vertexUv2s=f.has(2),Ei.vertexUv3s=f.has(3),f.clear(),Ei}function S(U){const P=[];if(U.shaderID?P.push(U.shaderID):(P.push(U.customVertexShaderID),P.push(U.customFragmentShaderID)),U.defines!==void 0)for(const X in U.defines)P.push(X),P.push(U.defines[X]);return U.isRawShaderMaterial===!1&&(w(P,U),D(P,U),P.push(i.outputColorSpace)),P.push(U.customProgramCacheKey),P.join()}function w(U,P){U.push(P.precision),U.push(P.outputColorSpace),U.push(P.envMapMode),U.push(P.envMapCubeUVHeight),U.push(P.mapUv),U.push(P.alphaMapUv),U.push(P.lightMapUv),U.push(P.aoMapUv),U.push(P.bumpMapUv),U.push(P.normalMapUv),U.push(P.displacementMapUv),U.push(P.emissiveMapUv),U.push(P.metalnessMapUv),U.push(P.roughnessMapUv),U.push(P.anisotropyMapUv),U.push(P.clearcoatMapUv),U.push(P.clearcoatNormalMapUv),U.push(P.clearcoatRoughnessMapUv),U.push(P.iridescenceMapUv),U.push(P.iridescenceThicknessMapUv),U.push(P.sheenColorMapUv),U.push(P.sheenRoughnessMapUv),U.push(P.specularMapUv),U.push(P.specularColorMapUv),U.push(P.specularIntensityMapUv),U.push(P.transmissionMapUv),U.push(P.thicknessMapUv),U.push(P.combine),U.push(P.fogExp2),U.push(P.sizeAttenuation),U.push(P.morphTargetsCount),U.push(P.morphAttributeCount),U.push(P.numDirLights),U.push(P.numPointLights),U.push(P.numSpotLights),U.push(P.numSpotLightMaps),U.push(P.numHemiLights),U.push(P.numRectAreaLights),U.push(P.numDirLightShadows),U.push(P.numPointLightShadows),U.push(P.numSpotLightShadows),U.push(P.numSpotLightShadowsWithMaps),U.push(P.numLightProbes),U.push(P.shadowMapType),U.push(P.toneMapping),U.push(P.numClippingPlanes),U.push(P.numClipIntersection),U.push(P.depthPacking)}function D(U,P){l.disableAll(),P.supportsVertexTextures&&l.enable(0),P.instancing&&l.enable(1),P.instancingColor&&l.enable(2),P.instancingMorph&&l.enable(3),P.matcap&&l.enable(4),P.envMap&&l.enable(5),P.normalMapObjectSpace&&l.enable(6),P.normalMapTangentSpace&&l.enable(7),P.clearcoat&&l.enable(8),P.iridescence&&l.enable(9),P.alphaTest&&l.enable(10),P.vertexColors&&l.enable(11),P.vertexAlphas&&l.enable(12),P.vertexUv1s&&l.enable(13),P.vertexUv2s&&l.enable(14),P.vertexUv3s&&l.enable(15),P.vertexTangents&&l.enable(16),P.anisotropy&&l.enable(17),P.alphaHash&&l.enable(18),P.batching&&l.enable(19),P.dispersion&&l.enable(20),P.batchingColor&&l.enable(21),U.push(l.mask),l.disableAll(),P.fog&&l.enable(0),P.useFog&&l.enable(1),P.flatShading&&l.enable(2),P.logarithmicDepthBuffer&&l.enable(3),P.reverseDepthBuffer&&l.enable(4),P.skinning&&l.enable(5),P.morphTargets&&l.enable(6),P.morphNormals&&l.enable(7),P.morphColors&&l.enable(8),P.premultipliedAlpha&&l.enable(9),P.shadowMapEnabled&&l.enable(10),P.doubleSided&&l.enable(11),P.flipSided&&l.enable(12),P.useDepthPacking&&l.enable(13),P.dithering&&l.enable(14),P.transmission&&l.enable(15),P.sheen&&l.enable(16),P.opaque&&l.enable(17),P.pointsUvs&&l.enable(18),P.decodeVideoTexture&&l.enable(19),P.decodeVideoTextureEmissive&&l.enable(20),P.alphaToCoverage&&l.enable(21),U.push(l.mask)}function B(U){const P=b[U.type];let X;if(P){const lt=Sc[P];X=PB.clone(lt.uniforms)}else X=U.uniforms;return X}function N(U,P){let X;for(let lt=0,it=m.length;lt<it;lt++){const ut=m[lt];if(ut.cacheKey===P){X=ut,++X.usedTimes;break}}return X===void 0&&(X=new Mq(i,P,U,r),m.push(X)),X}function I(U){if(--U.usedTimes===0){const P=m.indexOf(U);m[P]=m[m.length-1],m.pop(),U.destroy()}}function F(U){u.remove(U)}function z(){u.dispose()}return{getParameters:E,getProgramCacheKey:S,getUniforms:B,acquireProgram:N,releaseProgram:I,releaseShaderCache:F,programs:m,dispose:z}}function Lq(){let i=new WeakMap;function t(a){return i.has(a)}function e(a){let l=i.get(a);return l===void 0&&(l={},i.set(a,l)),l}function n(a){i.delete(a)}function s(a,l,u){i.get(a)[l]=u}function r(){i=new WeakMap}return{has:t,get:e,remove:n,update:s,dispose:r}}function Dq(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function CL(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function wL(){const i=[];let t=0;const e=[],n=[],s=[];function r(){t=0,e.length=0,n.length=0,s.length=0}function a(g,v,_,b,T,E){let S=i[t];return S===void 0?(S={id:g.id,object:g,geometry:v,material:_,groupOrder:b,renderOrder:g.renderOrder,z:T,group:E},i[t]=S):(S.id=g.id,S.object=g,S.geometry=v,S.material=_,S.groupOrder=b,S.renderOrder=g.renderOrder,S.z=T,S.group=E),t++,S}function l(g,v,_,b,T,E){const S=a(g,v,_,b,T,E);_.transmission>0?n.push(S):_.transparent===!0?s.push(S):e.push(S)}function u(g,v,_,b,T,E){const S=a(g,v,_,b,T,E);_.transmission>0?n.unshift(S):_.transparent===!0?s.unshift(S):e.unshift(S)}function f(g,v){e.length>1&&e.sort(g||Dq),n.length>1&&n.sort(v||CL),s.length>1&&s.sort(v||CL)}function m(){for(let g=t,v=i.length;g<v;g++){const _=i[g];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:e,transmissive:n,transparent:s,init:r,push:l,unshift:u,finish:m,sort:f}}function Bq(){let i=new WeakMap;function t(n,s){const r=i.get(n);let a;return r===void 0?(a=new wL,i.set(n,[a])):s>=r.length?(a=new wL,r.push(a)):a=r[s],a}function e(){i=new WeakMap}return{get:t,dispose:e}}function Oq(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new et,color:new oe};break;case"SpotLight":e={position:new et,direction:new et,color:new oe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new et,color:new oe,distance:0,decay:0};break;case"HemisphereLight":e={direction:new et,skyColor:new oe,groundColor:new oe};break;case"RectAreaLight":e={color:new oe,position:new et,halfWidth:new et,halfHeight:new et};break}return i[t.id]=e,e}}}function Nq(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[t.id]=e,e}}}let Iq=0;function Uq(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function Pq(i){const t=new Oq,e=Nq(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)n.probe.push(new et);const s=new et,r=new Ne,a=new Ne;function l(f){let m=0,g=0,v=0;for(let U=0;U<9;U++)n.probe[U].set(0,0,0);let _=0,b=0,T=0,E=0,S=0,w=0,D=0,B=0,N=0,I=0,F=0;f.sort(Uq);for(let U=0,P=f.length;U<P;U++){const X=f[U],lt=X.color,it=X.intensity,ut=X.distance,dt=X.shadow&&X.shadow.map?X.shadow.map.texture:null;if(X.isAmbientLight)m+=lt.r*it,g+=lt.g*it,v+=lt.b*it;else if(X.isLightProbe){for(let j=0;j<9;j++)n.probe[j].addScaledVector(X.sh.coefficients[j],it);F++}else if(X.isDirectionalLight){const j=t.get(X);if(j.color.copy(X.color).multiplyScalar(X.intensity),X.castShadow){const tt=X.shadow,nt=e.get(X);nt.shadowIntensity=tt.intensity,nt.shadowBias=tt.bias,nt.shadowNormalBias=tt.normalBias,nt.shadowRadius=tt.radius,nt.shadowMapSize=tt.mapSize,n.directionalShadow[_]=nt,n.directionalShadowMap[_]=dt,n.directionalShadowMatrix[_]=X.shadow.matrix,w++}n.directional[_]=j,_++}else if(X.isSpotLight){const j=t.get(X);j.position.setFromMatrixPosition(X.matrixWorld),j.color.copy(lt).multiplyScalar(it),j.distance=ut,j.coneCos=Math.cos(X.angle),j.penumbraCos=Math.cos(X.angle*(1-X.penumbra)),j.decay=X.decay,n.spot[T]=j;const tt=X.shadow;if(X.map&&(n.spotLightMap[N]=X.map,N++,tt.updateMatrices(X),X.castShadow&&I++),n.spotLightMatrix[T]=tt.matrix,X.castShadow){const nt=e.get(X);nt.shadowIntensity=tt.intensity,nt.shadowBias=tt.bias,nt.shadowNormalBias=tt.normalBias,nt.shadowRadius=tt.radius,nt.shadowMapSize=tt.mapSize,n.spotShadow[T]=nt,n.spotShadowMap[T]=dt,B++}T++}else if(X.isRectAreaLight){const j=t.get(X);j.color.copy(lt).multiplyScalar(it),j.halfWidth.set(X.width*.5,0,0),j.halfHeight.set(0,X.height*.5,0),n.rectArea[E]=j,E++}else if(X.isPointLight){const j=t.get(X);if(j.color.copy(X.color).multiplyScalar(X.intensity),j.distance=X.distance,j.decay=X.decay,X.castShadow){const tt=X.shadow,nt=e.get(X);nt.shadowIntensity=tt.intensity,nt.shadowBias=tt.bias,nt.shadowNormalBias=tt.normalBias,nt.shadowRadius=tt.radius,nt.shadowMapSize=tt.mapSize,nt.shadowCameraNear=tt.camera.near,nt.shadowCameraFar=tt.camera.far,n.pointShadow[b]=nt,n.pointShadowMap[b]=dt,n.pointShadowMatrix[b]=X.shadow.matrix,D++}n.point[b]=j,b++}else if(X.isHemisphereLight){const j=t.get(X);j.skyColor.copy(X.color).multiplyScalar(it),j.groundColor.copy(X.groundColor).multiplyScalar(it),n.hemi[S]=j,S++}}E>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=pe.LTC_FLOAT_1,n.rectAreaLTC2=pe.LTC_FLOAT_2):(n.rectAreaLTC1=pe.LTC_HALF_1,n.rectAreaLTC2=pe.LTC_HALF_2)),n.ambient[0]=m,n.ambient[1]=g,n.ambient[2]=v;const z=n.hash;(z.directionalLength!==_||z.pointLength!==b||z.spotLength!==T||z.rectAreaLength!==E||z.hemiLength!==S||z.numDirectionalShadows!==w||z.numPointShadows!==D||z.numSpotShadows!==B||z.numSpotMaps!==N||z.numLightProbes!==F)&&(n.directional.length=_,n.spot.length=T,n.rectArea.length=E,n.point.length=b,n.hemi.length=S,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=D,n.pointShadowMap.length=D,n.spotShadow.length=B,n.spotShadowMap.length=B,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=D,n.spotLightMatrix.length=B+N-I,n.spotLightMap.length=N,n.numSpotLightShadowsWithMaps=I,n.numLightProbes=F,z.directionalLength=_,z.pointLength=b,z.spotLength=T,z.rectAreaLength=E,z.hemiLength=S,z.numDirectionalShadows=w,z.numPointShadows=D,z.numSpotShadows=B,z.numSpotMaps=N,z.numLightProbes=F,n.version=Iq++)}function u(f,m){let g=0,v=0,_=0,b=0,T=0;const E=m.matrixWorldInverse;for(let S=0,w=f.length;S<w;S++){const D=f[S];if(D.isDirectionalLight){const B=n.directional[g];B.direction.setFromMatrixPosition(D.matrixWorld),s.setFromMatrixPosition(D.target.matrixWorld),B.direction.sub(s),B.direction.transformDirection(E),g++}else if(D.isSpotLight){const B=n.spot[_];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(E),B.direction.setFromMatrixPosition(D.matrixWorld),s.setFromMatrixPosition(D.target.matrixWorld),B.direction.sub(s),B.direction.transformDirection(E),_++}else if(D.isRectAreaLight){const B=n.rectArea[b];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(E),a.identity(),r.copy(D.matrixWorld),r.premultiply(E),a.extractRotation(r),B.halfWidth.set(D.width*.5,0,0),B.halfHeight.set(0,D.height*.5,0),B.halfWidth.applyMatrix4(a),B.halfHeight.applyMatrix4(a),b++}else if(D.isPointLight){const B=n.point[v];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(E),v++}else if(D.isHemisphereLight){const B=n.hemi[T];B.direction.setFromMatrixPosition(D.matrixWorld),B.direction.transformDirection(E),T++}}}return{setup:l,setupView:u,state:n}}function RL(i){const t=new Pq(i),e=[],n=[];function s(m){f.camera=m,e.length=0,n.length=0}function r(m){e.push(m)}function a(m){n.push(m)}function l(){t.setup(e)}function u(m){t.setupView(e,m)}const f={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:s,state:f,setupLights:l,setupLightsView:u,pushLight:r,pushShadow:a}}function Fq(i){let t=new WeakMap;function e(s,r=0){const a=t.get(s);let l;return a===void 0?(l=new RL(i),t.set(s,[l])):r>=a.length?(l=new RL(i),a.push(l)):l=a[r],l}function n(){t=new WeakMap}return{get:e,dispose:n}}const Hq=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,zq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Gq(i,t,e){let n=new Sy;const s=new Pt,r=new Pt,a=new On,l=new Zw({depthPacking:SB}),u=new $w,f={},m=e.maxTextureSize,g={[Lc]:qs,[qs]:Lc,[La]:La},v=new Ks({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Pt},radius:{value:4}},vertexShader:Hq,fragmentShader:zq}),_=v.clone();_.defines.HORIZONTAL_PASS=1;const b=new $e;b.setAttribute("position",new zn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new as(b,v),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=QE;let S=this.type;this.render=function(I,F,z){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||I.length===0)return;const U=i.getRenderTarget(),P=i.getActiveCubeFace(),X=i.getActiveMipmapLevel(),lt=i.state;lt.setBlending(ra),lt.buffers.color.setClear(1,1,1,1),lt.buffers.depth.setTest(!0),lt.setScissorTest(!1);const it=S!==lc&&this.type===lc,ut=S===lc&&this.type!==lc;for(let dt=0,j=I.length;dt<j;dt++){const tt=I[dt],nt=tt.shadow;if(nt===void 0){console.warn("THREE.WebGLShadowMap:",tt,"has no shadow.");continue}if(nt.autoUpdate===!1&&nt.needsUpdate===!1)continue;s.copy(nt.mapSize);const _t=nt.getFrameExtents();if(s.multiply(_t),r.copy(nt.mapSize),(s.x>m||s.y>m)&&(s.x>m&&(r.x=Math.floor(m/_t.x),s.x=r.x*_t.x,nt.mapSize.x=r.x),s.y>m&&(r.y=Math.floor(m/_t.y),s.y=r.y*_t.y,nt.mapSize.y=r.y)),nt.map===null||it===!0||ut===!0){const ot=this.type!==lc?{minFilter:os,magFilter:os}:{};nt.map!==null&&nt.map.dispose(),nt.map=new Ds(s.x,s.y,ot),nt.map.texture.name=tt.name+".shadowMap",nt.camera.updateProjectionMatrix()}i.setRenderTarget(nt.map),i.clear();const J=nt.getViewportCount();for(let ot=0;ot<J;ot++){const xt=nt.getViewport(ot);a.set(r.x*xt.x,r.y*xt.y,r.x*xt.z,r.y*xt.w),lt.viewport(a),nt.updateMatrices(tt,ot),n=nt.getFrustum(),B(F,z,nt.camera,tt,this.type)}nt.isPointLightShadow!==!0&&this.type===lc&&w(nt,z),nt.needsUpdate=!1}S=this.type,E.needsUpdate=!1,i.setRenderTarget(U,P,X)};function w(I,F){const z=t.update(T);v.defines.VSM_SAMPLES!==I.blurSamples&&(v.defines.VSM_SAMPLES=I.blurSamples,_.defines.VSM_SAMPLES=I.blurSamples,v.needsUpdate=!0,_.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Ds(s.x,s.y)),v.uniforms.shadow_pass.value=I.map.texture,v.uniforms.resolution.value=I.mapSize,v.uniforms.radius.value=I.radius,i.setRenderTarget(I.mapPass),i.clear(),i.renderBufferDirect(F,null,z,v,T,null),_.uniforms.shadow_pass.value=I.mapPass.texture,_.uniforms.resolution.value=I.mapSize,_.uniforms.radius.value=I.radius,i.setRenderTarget(I.map),i.clear(),i.renderBufferDirect(F,null,z,_,T,null)}function D(I,F,z,U){let P=null;const X=z.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(X!==void 0)P=X;else if(P=z.isPointLight===!0?u:l,i.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0||F.alphaToCoverage===!0){const lt=P.uuid,it=F.uuid;let ut=f[lt];ut===void 0&&(ut={},f[lt]=ut);let dt=ut[it];dt===void 0&&(dt=P.clone(),ut[it]=dt,F.addEventListener("dispose",N)),P=dt}if(P.visible=F.visible,P.wireframe=F.wireframe,U===lc?P.side=F.shadowSide!==null?F.shadowSide:F.side:P.side=F.shadowSide!==null?F.shadowSide:g[F.side],P.alphaMap=F.alphaMap,P.alphaTest=F.alphaToCoverage===!0?.5:F.alphaTest,P.map=F.map,P.clipShadows=F.clipShadows,P.clippingPlanes=F.clippingPlanes,P.clipIntersection=F.clipIntersection,P.displacementMap=F.displacementMap,P.displacementScale=F.displacementScale,P.displacementBias=F.displacementBias,P.wireframeLinewidth=F.wireframeLinewidth,P.linewidth=F.linewidth,z.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const lt=i.properties.get(P);lt.light=z}return P}function B(I,F,z,U,P){if(I.visible===!1)return;if(I.layers.test(F.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&P===lc)&&(!I.frustumCulled||n.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,I.matrixWorld);const it=t.update(I),ut=I.material;if(Array.isArray(ut)){const dt=it.groups;for(let j=0,tt=dt.length;j<tt;j++){const nt=dt[j],_t=ut[nt.materialIndex];if(_t&&_t.visible){const J=D(I,_t,U,P);I.onBeforeShadow(i,I,F,z,it,J,nt),i.renderBufferDirect(z,null,it,J,I,nt),I.onAfterShadow(i,I,F,z,it,J,nt)}}}else if(ut.visible){const dt=D(I,ut,U,P);I.onBeforeShadow(i,I,F,z,it,dt,null),i.renderBufferDirect(z,null,it,dt,I,null),I.onAfterShadow(i,I,F,z,it,dt,null)}}const lt=I.children;for(let it=0,ut=lt.length;it<ut;it++)B(lt[it],F,z,U,P)}function N(I){I.target.removeEventListener("dispose",N);for(const z in f){const U=f[z],P=I.target.uuid;P in U&&(U[P].dispose(),delete U[P])}}}const kq={[y3]:_3,[A3]:S3,[x3]:E3,[Fg]:b3,[_3]:y3,[S3]:A3,[E3]:x3,[b3]:Fg};function Vq(i,t){function e(){let mt=!1;const ue=new On;let Nt=null;const Qt=new On(0,0,0,0);return{setMask:function(fe){Nt!==fe&&!mt&&(i.colorMask(fe,fe,fe,fe),Nt=fe)},setLocked:function(fe){mt=fe},setClear:function(fe,he,qe,Jn,Ei){Ei===!0&&(fe*=Jn,he*=Jn,qe*=Jn),ue.set(fe,he,qe,Jn),Qt.equals(ue)===!1&&(i.clearColor(fe,he,qe,Jn),Qt.copy(ue))},reset:function(){mt=!1,Nt=null,Qt.set(-1,0,0,0)}}}function n(){let mt=!1,ue=!1,Nt=null,Qt=null,fe=null;return{setReversed:function(he){if(ue!==he){const qe=t.get("EXT_clip_control");he?qe.clipControlEXT(qe.LOWER_LEFT_EXT,qe.ZERO_TO_ONE_EXT):qe.clipControlEXT(qe.LOWER_LEFT_EXT,qe.NEGATIVE_ONE_TO_ONE_EXT),ue=he;const Jn=fe;fe=null,this.setClear(Jn)}},getReversed:function(){return ue},setTest:function(he){he?Ut(i.DEPTH_TEST):Wt(i.DEPTH_TEST)},setMask:function(he){Nt!==he&&!mt&&(i.depthMask(he),Nt=he)},setFunc:function(he){if(ue&&(he=kq[he]),Qt!==he){switch(he){case y3:i.depthFunc(i.NEVER);break;case _3:i.depthFunc(i.ALWAYS);break;case A3:i.depthFunc(i.LESS);break;case Fg:i.depthFunc(i.LEQUAL);break;case x3:i.depthFunc(i.EQUAL);break;case b3:i.depthFunc(i.GEQUAL);break;case S3:i.depthFunc(i.GREATER);break;case E3:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Qt=he}},setLocked:function(he){mt=he},setClear:function(he){fe!==he&&(ue&&(he=1-he),i.clearDepth(he),fe=he)},reset:function(){mt=!1,Nt=null,Qt=null,fe=null,ue=!1}}}function s(){let mt=!1,ue=null,Nt=null,Qt=null,fe=null,he=null,qe=null,Jn=null,Ei=null;return{setTest:function(Cn){mt||(Cn?Ut(i.STENCIL_TEST):Wt(i.STENCIL_TEST))},setMask:function(Cn){ue!==Cn&&!mt&&(i.stencilMask(Cn),ue=Cn)},setFunc:function(Cn,Ir,ls){(Nt!==Cn||Qt!==Ir||fe!==ls)&&(i.stencilFunc(Cn,Ir,ls),Nt=Cn,Qt=Ir,fe=ls)},setOp:function(Cn,Ir,ls){(he!==Cn||qe!==Ir||Jn!==ls)&&(i.stencilOp(Cn,Ir,ls),he=Cn,qe=Ir,Jn=ls)},setLocked:function(Cn){mt=Cn},setClear:function(Cn){Ei!==Cn&&(i.clearStencil(Cn),Ei=Cn)},reset:function(){mt=!1,ue=null,Nt=null,Qt=null,fe=null,he=null,qe=null,Jn=null,Ei=null}}}const r=new e,a=new n,l=new s,u=new WeakMap,f=new WeakMap;let m={},g={},v=new WeakMap,_=[],b=null,T=!1,E=null,S=null,w=null,D=null,B=null,N=null,I=null,F=new oe(0,0,0),z=0,U=!1,P=null,X=null,lt=null,it=null,ut=null;const dt=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let j=!1,tt=0;const nt=i.getParameter(i.VERSION);nt.indexOf("WebGL")!==-1?(tt=parseFloat(/^WebGL (\d)/.exec(nt)[1]),j=tt>=1):nt.indexOf("OpenGL ES")!==-1&&(tt=parseFloat(/^OpenGL ES (\d)/.exec(nt)[1]),j=tt>=2);let _t=null,J={};const ot=i.getParameter(i.SCISSOR_BOX),xt=i.getParameter(i.VIEWPORT),Et=new On().fromArray(ot),ct=new On().fromArray(xt);function wt(mt,ue,Nt,Qt){const fe=new Uint8Array(4),he=i.createTexture();i.bindTexture(mt,he),i.texParameteri(mt,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(mt,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let qe=0;qe<Nt;qe++)mt===i.TEXTURE_3D||mt===i.TEXTURE_2D_ARRAY?i.texImage3D(ue,0,i.RGBA,1,1,Qt,0,i.RGBA,i.UNSIGNED_BYTE,fe):i.texImage2D(ue+qe,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,fe);return he}const Bt={};Bt[i.TEXTURE_2D]=wt(i.TEXTURE_2D,i.TEXTURE_2D,1),Bt[i.TEXTURE_CUBE_MAP]=wt(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Bt[i.TEXTURE_2D_ARRAY]=wt(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Bt[i.TEXTURE_3D]=wt(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),a.setClear(1),l.setClear(0),Ut(i.DEPTH_TEST),a.setFunc(Fg),Ft(!1),Vt(x5),Ut(i.CULL_FACE),Z(ra);function Ut(mt){m[mt]!==!0&&(i.enable(mt),m[mt]=!0)}function Wt(mt){m[mt]!==!1&&(i.disable(mt),m[mt]=!1)}function ve(mt,ue){return g[mt]!==ue?(i.bindFramebuffer(mt,ue),g[mt]=ue,mt===i.DRAW_FRAMEBUFFER&&(g[i.FRAMEBUFFER]=ue),mt===i.FRAMEBUFFER&&(g[i.DRAW_FRAMEBUFFER]=ue),!0):!1}function ee(mt,ue){let Nt=_,Qt=!1;if(mt){Nt=v.get(ue),Nt===void 0&&(Nt=[],v.set(ue,Nt));const fe=mt.textures;if(Nt.length!==fe.length||Nt[0]!==i.COLOR_ATTACHMENT0){for(let he=0,qe=fe.length;he<qe;he++)Nt[he]=i.COLOR_ATTACHMENT0+he;Nt.length=fe.length,Qt=!0}}else Nt[0]!==i.BACK&&(Nt[0]=i.BACK,Qt=!0);Qt&&i.drawBuffers(Nt)}function Ye(mt){return b!==mt?(i.useProgram(mt),b=mt,!0):!1}const we={[md]:i.FUNC_ADD,[qD]:i.FUNC_SUBTRACT,[YD]:i.FUNC_REVERSE_SUBTRACT};we[WD]=i.MIN,we[KD]=i.MAX;const re={[JD]:i.ZERO,[ZD]:i.ONE,[$D]:i.SRC_COLOR,[g3]:i.SRC_ALPHA,[rB]:i.SRC_ALPHA_SATURATE,[iB]:i.DST_COLOR,[eB]:i.DST_ALPHA,[tB]:i.ONE_MINUS_SRC_COLOR,[v3]:i.ONE_MINUS_SRC_ALPHA,[sB]:i.ONE_MINUS_DST_COLOR,[nB]:i.ONE_MINUS_DST_ALPHA,[aB]:i.CONSTANT_COLOR,[oB]:i.ONE_MINUS_CONSTANT_COLOR,[lB]:i.CONSTANT_ALPHA,[cB]:i.ONE_MINUS_CONSTANT_ALPHA};function Z(mt,ue,Nt,Qt,fe,he,qe,Jn,Ei,Cn){if(mt===ra){T===!0&&(Wt(i.BLEND),T=!1);return}if(T===!1&&(Ut(i.BLEND),T=!0),mt!==XD){if(mt!==E||Cn!==U){if((S!==md||B!==md)&&(i.blendEquation(i.FUNC_ADD),S=md,B=md),Cn)switch(mt){case Ng:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case b5:i.blendFunc(i.ONE,i.ONE);break;case S5:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case E5:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",mt);break}else switch(mt){case Ng:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case b5:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case S5:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case E5:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",mt);break}w=null,D=null,N=null,I=null,F.set(0,0,0),z=0,E=mt,U=Cn}return}fe=fe||ue,he=he||Nt,qe=qe||Qt,(ue!==S||fe!==B)&&(i.blendEquationSeparate(we[ue],we[fe]),S=ue,B=fe),(Nt!==w||Qt!==D||he!==N||qe!==I)&&(i.blendFuncSeparate(re[Nt],re[Qt],re[he],re[qe]),w=Nt,D=Qt,N=he,I=qe),(Jn.equals(F)===!1||Ei!==z)&&(i.blendColor(Jn.r,Jn.g,Jn.b,Ei),F.copy(Jn),z=Ei),E=mt,U=!1}function Kt(mt,ue){mt.side===La?Wt(i.CULL_FACE):Ut(i.CULL_FACE);let Nt=mt.side===qs;ue&&(Nt=!Nt),Ft(Nt),mt.blending===Ng&&mt.transparent===!1?Z(ra):Z(mt.blending,mt.blendEquation,mt.blendSrc,mt.blendDst,mt.blendEquationAlpha,mt.blendSrcAlpha,mt.blendDstAlpha,mt.blendColor,mt.blendAlpha,mt.premultipliedAlpha),a.setFunc(mt.depthFunc),a.setTest(mt.depthTest),a.setMask(mt.depthWrite),r.setMask(mt.colorWrite);const Qt=mt.stencilWrite;l.setTest(Qt),Qt&&(l.setMask(mt.stencilWriteMask),l.setFunc(mt.stencilFunc,mt.stencilRef,mt.stencilFuncMask),l.setOp(mt.stencilFail,mt.stencilZFail,mt.stencilZPass)),be(mt.polygonOffset,mt.polygonOffsetFactor,mt.polygonOffsetUnits),mt.alphaToCoverage===!0?Ut(i.SAMPLE_ALPHA_TO_COVERAGE):Wt(i.SAMPLE_ALPHA_TO_COVERAGE)}function Ft(mt){P!==mt&&(mt?i.frontFace(i.CW):i.frontFace(i.CCW),P=mt)}function Vt(mt){mt!==VD?(Ut(i.CULL_FACE),mt!==X&&(mt===x5?i.cullFace(i.BACK):mt===QD?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Wt(i.CULL_FACE),X=mt}function Gt(mt){mt!==lt&&(j&&i.lineWidth(mt),lt=mt)}function be(mt,ue,Nt){mt?(Ut(i.POLYGON_OFFSET_FILL),(it!==ue||ut!==Nt)&&(i.polygonOffset(ue,Nt),it=ue,ut=Nt)):Wt(i.POLYGON_OFFSET_FILL)}function qt(mt){mt?Ut(i.SCISSOR_TEST):Wt(i.SCISSOR_TEST)}function $(mt){mt===void 0&&(mt=i.TEXTURE0+dt-1),_t!==mt&&(i.activeTexture(mt),_t=mt)}function Q(mt,ue,Nt){Nt===void 0&&(_t===null?Nt=i.TEXTURE0+dt-1:Nt=_t);let Qt=J[Nt];Qt===void 0&&(Qt={type:void 0,texture:void 0},J[Nt]=Qt),(Qt.type!==mt||Qt.texture!==ue)&&(_t!==Nt&&(i.activeTexture(Nt),_t=Nt),i.bindTexture(mt,ue||Bt[mt]),Qt.type=mt,Qt.texture=ue)}function vt(){const mt=J[_t];mt!==void 0&&mt.type!==void 0&&(i.bindTexture(mt.type,null),mt.type=void 0,mt.texture=void 0)}function It(){try{i.compressedTexImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function jt(){try{i.compressedTexImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Ot(){try{i.texSubImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function ne(){try{i.texSubImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function te(){try{i.compressedTexSubImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function ge(){try{i.compressedTexSubImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function De(){try{i.texStorage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Jt(){try{i.texStorage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function _e(){try{i.texImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Se(){try{i.texImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Te(mt){Et.equals(mt)===!1&&(i.scissor(mt.x,mt.y,mt.z,mt.w),Et.copy(mt))}function ce(mt){ct.equals(mt)===!1&&(i.viewport(mt.x,mt.y,mt.z,mt.w),ct.copy(mt))}function rn(mt,ue){let Nt=f.get(ue);Nt===void 0&&(Nt=new WeakMap,f.set(ue,Nt));let Qt=Nt.get(mt);Qt===void 0&&(Qt=i.getUniformBlockIndex(ue,mt.name),Nt.set(mt,Qt))}function He(mt,ue){const Qt=f.get(ue).get(mt);u.get(ue)!==Qt&&(i.uniformBlockBinding(ue,Qt,mt.__bindingPointIndex),u.set(ue,Qt))}function Gn(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),a.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),m={},_t=null,J={},g={},v=new WeakMap,_=[],b=null,T=!1,E=null,S=null,w=null,D=null,B=null,N=null,I=null,F=new oe(0,0,0),z=0,U=!1,P=null,X=null,lt=null,it=null,ut=null,Et.set(0,0,i.canvas.width,i.canvas.height),ct.set(0,0,i.canvas.width,i.canvas.height),r.reset(),a.reset(),l.reset()}return{buffers:{color:r,depth:a,stencil:l},enable:Ut,disable:Wt,bindFramebuffer:ve,drawBuffers:ee,useProgram:Ye,setBlending:Z,setMaterial:Kt,setFlipSided:Ft,setCullFace:Vt,setLineWidth:Gt,setPolygonOffset:be,setScissorTest:qt,activeTexture:$,bindTexture:Q,unbindTexture:vt,compressedTexImage2D:It,compressedTexImage3D:jt,texImage2D:_e,texImage3D:Se,updateUBOMapping:rn,uniformBlockBinding:He,texStorage2D:De,texStorage3D:Jt,texSubImage2D:Ot,texSubImage3D:ne,compressedTexSubImage2D:te,compressedTexSubImage3D:ge,scissor:Te,viewport:ce,reset:Gn}}function Qq(i,t,e,n,s,r,a){const l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new Pt,m=new WeakMap;let g;const v=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b($,Q){return _?new OffscreenCanvas($,Q):$_("canvas")}function T($,Q,vt){let It=1;const jt=qt($);if((jt.width>vt||jt.height>vt)&&(It=vt/Math.max(jt.width,jt.height)),It<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const Ot=Math.floor(It*jt.width),ne=Math.floor(It*jt.height);g===void 0&&(g=b(Ot,ne));const te=Q?b(Ot,ne):g;return te.width=Ot,te.height=ne,te.getContext("2d").drawImage($,0,0,Ot,ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+jt.width+"x"+jt.height+") to ("+Ot+"x"+ne+")."),te}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+jt.width+"x"+jt.height+")."),$;return $}function E($){return $.generateMipmaps}function S($){i.generateMipmap($)}function w($){return $.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?i.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function D($,Q,vt,It,jt=!1){if($!==null){if(i[$]!==void 0)return i[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Ot=Q;if(Q===i.RED&&(vt===i.FLOAT&&(Ot=i.R32F),vt===i.HALF_FLOAT&&(Ot=i.R16F),vt===i.UNSIGNED_BYTE&&(Ot=i.R8)),Q===i.RED_INTEGER&&(vt===i.UNSIGNED_BYTE&&(Ot=i.R8UI),vt===i.UNSIGNED_SHORT&&(Ot=i.R16UI),vt===i.UNSIGNED_INT&&(Ot=i.R32UI),vt===i.BYTE&&(Ot=i.R8I),vt===i.SHORT&&(Ot=i.R16I),vt===i.INT&&(Ot=i.R32I)),Q===i.RG&&(vt===i.FLOAT&&(Ot=i.RG32F),vt===i.HALF_FLOAT&&(Ot=i.RG16F),vt===i.UNSIGNED_BYTE&&(Ot=i.RG8)),Q===i.RG_INTEGER&&(vt===i.UNSIGNED_BYTE&&(Ot=i.RG8UI),vt===i.UNSIGNED_SHORT&&(Ot=i.RG16UI),vt===i.UNSIGNED_INT&&(Ot=i.RG32UI),vt===i.BYTE&&(Ot=i.RG8I),vt===i.SHORT&&(Ot=i.RG16I),vt===i.INT&&(Ot=i.RG32I)),Q===i.RGB_INTEGER&&(vt===i.UNSIGNED_BYTE&&(Ot=i.RGB8UI),vt===i.UNSIGNED_SHORT&&(Ot=i.RGB16UI),vt===i.UNSIGNED_INT&&(Ot=i.RGB32UI),vt===i.BYTE&&(Ot=i.RGB8I),vt===i.SHORT&&(Ot=i.RGB16I),vt===i.INT&&(Ot=i.RGB32I)),Q===i.RGBA_INTEGER&&(vt===i.UNSIGNED_BYTE&&(Ot=i.RGBA8UI),vt===i.UNSIGNED_SHORT&&(Ot=i.RGBA16UI),vt===i.UNSIGNED_INT&&(Ot=i.RGBA32UI),vt===i.BYTE&&(Ot=i.RGBA8I),vt===i.SHORT&&(Ot=i.RGBA16I),vt===i.INT&&(Ot=i.RGBA32I)),Q===i.RGB&&vt===i.UNSIGNED_INT_5_9_9_9_REV&&(Ot=i.RGB9_E5),Q===i.RGBA){const ne=jt?W_:Fn.getTransfer(It);vt===i.FLOAT&&(Ot=i.RGBA32F),vt===i.HALF_FLOAT&&(Ot=i.RGBA16F),vt===i.UNSIGNED_BYTE&&(Ot=ne===fi?i.SRGB8_ALPHA8:i.RGBA8),vt===i.UNSIGNED_SHORT_4_4_4_4&&(Ot=i.RGBA4),vt===i.UNSIGNED_SHORT_5_5_5_1&&(Ot=i.RGB5_A1)}return(Ot===i.R16F||Ot===i.R32F||Ot===i.RG16F||Ot===i.RG32F||Ot===i.RGBA16F||Ot===i.RGBA32F)&&t.get("EXT_color_buffer_float"),Ot}function B($,Q){let vt;return $?Q===null||Q===Pu||Q===Hg?vt=i.DEPTH24_STENCIL8:Q===Oa?vt=i.DEPTH32F_STENCIL8:Q===ly&&(vt=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Q===null||Q===Pu||Q===Hg?vt=i.DEPTH_COMPONENT24:Q===Oa?vt=i.DEPTH_COMPONENT32F:Q===ly&&(vt=i.DEPTH_COMPONENT16),vt}function N($,Q){return E($)===!0||$.isFramebufferTexture&&$.minFilter!==os&&$.minFilter!==Ni?Math.log2(Math.max(Q.width,Q.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?Q.mipmaps.length:1}function I($){const Q=$.target;Q.removeEventListener("dispose",I),z(Q),Q.isVideoTexture&&m.delete(Q)}function F($){const Q=$.target;Q.removeEventListener("dispose",F),P(Q)}function z($){const Q=n.get($);if(Q.__webglInit===void 0)return;const vt=$.source,It=v.get(vt);if(It){const jt=It[Q.__cacheKey];jt.usedTimes--,jt.usedTimes===0&&U($),Object.keys(It).length===0&&v.delete(vt)}n.remove($)}function U($){const Q=n.get($);i.deleteTexture(Q.__webglTexture);const vt=$.source,It=v.get(vt);delete It[Q.__cacheKey],a.memory.textures--}function P($){const Q=n.get($);if($.depthTexture&&($.depthTexture.dispose(),n.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let It=0;It<6;It++){if(Array.isArray(Q.__webglFramebuffer[It]))for(let jt=0;jt<Q.__webglFramebuffer[It].length;jt++)i.deleteFramebuffer(Q.__webglFramebuffer[It][jt]);else i.deleteFramebuffer(Q.__webglFramebuffer[It]);Q.__webglDepthbuffer&&i.deleteRenderbuffer(Q.__webglDepthbuffer[It])}else{if(Array.isArray(Q.__webglFramebuffer))for(let It=0;It<Q.__webglFramebuffer.length;It++)i.deleteFramebuffer(Q.__webglFramebuffer[It]);else i.deleteFramebuffer(Q.__webglFramebuffer);if(Q.__webglDepthbuffer&&i.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer)for(let It=0;It<Q.__webglColorRenderbuffer.length;It++)Q.__webglColorRenderbuffer[It]&&i.deleteRenderbuffer(Q.__webglColorRenderbuffer[It]);Q.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Q.__webglDepthRenderbuffer)}const vt=$.textures;for(let It=0,jt=vt.length;It<jt;It++){const Ot=n.get(vt[It]);Ot.__webglTexture&&(i.deleteTexture(Ot.__webglTexture),a.memory.textures--),n.remove(vt[It])}n.remove($)}let X=0;function lt(){X=0}function it(){const $=X;return $>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+s.maxTextures),X+=1,$}function ut($){const Q=[];return Q.push($.wrapS),Q.push($.wrapT),Q.push($.wrapR||0),Q.push($.magFilter),Q.push($.minFilter),Q.push($.anisotropy),Q.push($.internalFormat),Q.push($.format),Q.push($.type),Q.push($.generateMipmaps),Q.push($.premultiplyAlpha),Q.push($.flipY),Q.push($.unpackAlignment),Q.push($.colorSpace),Q.join()}function dt($,Q){const vt=n.get($);if($.isVideoTexture&&Gt($),$.isRenderTargetTexture===!1&&$.version>0&&vt.__version!==$.version){const It=$.image;if(It===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(It.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ct(vt,$,Q);return}}e.bindTexture(i.TEXTURE_2D,vt.__webglTexture,i.TEXTURE0+Q)}function j($,Q){const vt=n.get($);if($.version>0&&vt.__version!==$.version){ct(vt,$,Q);return}e.bindTexture(i.TEXTURE_2D_ARRAY,vt.__webglTexture,i.TEXTURE0+Q)}function tt($,Q){const vt=n.get($);if($.version>0&&vt.__version!==$.version){ct(vt,$,Q);return}e.bindTexture(i.TEXTURE_3D,vt.__webglTexture,i.TEXTURE0+Q)}function nt($,Q){const vt=n.get($);if($.version>0&&vt.__version!==$.version){wt(vt,$,Q);return}e.bindTexture(i.TEXTURE_CUBE_MAP,vt.__webglTexture,i.TEXTURE0+Q)}const _t={[$d]:i.REPEAT,[Ho]:i.CLAMP_TO_EDGE,[oy]:i.MIRRORED_REPEAT},J={[os]:i.NEAREST,[XE]:i.NEAREST_MIPMAP_NEAREST,[Dm]:i.NEAREST_MIPMAP_LINEAR,[Ni]:i.LINEAR,[K1]:i.LINEAR_MIPMAP_NEAREST,[Tl]:i.LINEAR_MIPMAP_LINEAR},ot={[MB]:i.NEVER,[DB]:i.ALWAYS,[TB]:i.LESS,[Uw]:i.LEQUAL,[CB]:i.EQUAL,[LB]:i.GEQUAL,[wB]:i.GREATER,[RB]:i.NOTEQUAL};function xt($,Q){if(Q.type===Oa&&t.has("OES_texture_float_linear")===!1&&(Q.magFilter===Ni||Q.magFilter===K1||Q.magFilter===Dm||Q.magFilter===Tl||Q.minFilter===Ni||Q.minFilter===K1||Q.minFilter===Dm||Q.minFilter===Tl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri($,i.TEXTURE_WRAP_S,_t[Q.wrapS]),i.texParameteri($,i.TEXTURE_WRAP_T,_t[Q.wrapT]),($===i.TEXTURE_3D||$===i.TEXTURE_2D_ARRAY)&&i.texParameteri($,i.TEXTURE_WRAP_R,_t[Q.wrapR]),i.texParameteri($,i.TEXTURE_MAG_FILTER,J[Q.magFilter]),i.texParameteri($,i.TEXTURE_MIN_FILTER,J[Q.minFilter]),Q.compareFunction&&(i.texParameteri($,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri($,i.TEXTURE_COMPARE_FUNC,ot[Q.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(Q.magFilter===os||Q.minFilter!==Dm&&Q.minFilter!==Tl||Q.type===Oa&&t.has("OES_texture_float_linear")===!1)return;if(Q.anisotropy>1||n.get(Q).__currentAnisotropy){const vt=t.get("EXT_texture_filter_anisotropic");i.texParameterf($,vt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Q.anisotropy,s.getMaxAnisotropy())),n.get(Q).__currentAnisotropy=Q.anisotropy}}}function Et($,Q){let vt=!1;$.__webglInit===void 0&&($.__webglInit=!0,Q.addEventListener("dispose",I));const It=Q.source;let jt=v.get(It);jt===void 0&&(jt={},v.set(It,jt));const Ot=ut(Q);if(Ot!==$.__cacheKey){jt[Ot]===void 0&&(jt[Ot]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,vt=!0),jt[Ot].usedTimes++;const ne=jt[$.__cacheKey];ne!==void 0&&(jt[$.__cacheKey].usedTimes--,ne.usedTimes===0&&U(Q)),$.__cacheKey=Ot,$.__webglTexture=jt[Ot].texture}return vt}function ct($,Q,vt){let It=i.TEXTURE_2D;(Q.isDataArrayTexture||Q.isCompressedArrayTexture)&&(It=i.TEXTURE_2D_ARRAY),Q.isData3DTexture&&(It=i.TEXTURE_3D);const jt=Et($,Q),Ot=Q.source;e.bindTexture(It,$.__webglTexture,i.TEXTURE0+vt);const ne=n.get(Ot);if(Ot.version!==ne.__version||jt===!0){e.activeTexture(i.TEXTURE0+vt);const te=Fn.getPrimaries(Fn.workingColorSpace),ge=Q.colorSpace===Ec?null:Fn.getPrimaries(Q.colorSpace),De=Q.colorSpace===Ec||te===ge?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Q.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Q.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,De);let Jt=T(Q.image,!1,s.maxTextureSize);Jt=be(Q,Jt);const _e=r.convert(Q.format,Q.colorSpace),Se=r.convert(Q.type);let Te=D(Q.internalFormat,_e,Se,Q.colorSpace,Q.isVideoTexture);xt(It,Q);let ce;const rn=Q.mipmaps,He=Q.isVideoTexture!==!0,Gn=ne.__version===void 0||jt===!0,mt=Ot.dataReady,ue=N(Q,Jt);if(Q.isDepthTexture)Te=B(Q.format===zg,Q.type),Gn&&(He?e.texStorage2D(i.TEXTURE_2D,1,Te,Jt.width,Jt.height):e.texImage2D(i.TEXTURE_2D,0,Te,Jt.width,Jt.height,0,_e,Se,null));else if(Q.isDataTexture)if(rn.length>0){He&&Gn&&e.texStorage2D(i.TEXTURE_2D,ue,Te,rn[0].width,rn[0].height);for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)ce=rn[Nt],He?mt&&e.texSubImage2D(i.TEXTURE_2D,Nt,0,0,ce.width,ce.height,_e,Se,ce.data):e.texImage2D(i.TEXTURE_2D,Nt,Te,ce.width,ce.height,0,_e,Se,ce.data);Q.generateMipmaps=!1}else He?(Gn&&e.texStorage2D(i.TEXTURE_2D,ue,Te,Jt.width,Jt.height),mt&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,Jt.width,Jt.height,_e,Se,Jt.data)):e.texImage2D(i.TEXTURE_2D,0,Te,Jt.width,Jt.height,0,_e,Se,Jt.data);else if(Q.isCompressedTexture)if(Q.isCompressedArrayTexture){He&&Gn&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ue,Te,rn[0].width,rn[0].height,Jt.depth);for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)if(ce=rn[Nt],Q.format!==na)if(_e!==null)if(He){if(mt)if(Q.layerUpdates.size>0){const fe=O5(ce.width,ce.height,Q.format,Q.type);for(const he of Q.layerUpdates){const qe=ce.data.subarray(he*fe/ce.data.BYTES_PER_ELEMENT,(he+1)*fe/ce.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Nt,0,0,he,ce.width,ce.height,1,_e,qe)}Q.clearLayerUpdates()}else e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Nt,0,0,0,ce.width,ce.height,Jt.depth,_e,ce.data)}else e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Nt,Te,ce.width,ce.height,Jt.depth,0,ce.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else He?mt&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,Nt,0,0,0,ce.width,ce.height,Jt.depth,_e,Se,ce.data):e.texImage3D(i.TEXTURE_2D_ARRAY,Nt,Te,ce.width,ce.height,Jt.depth,0,_e,Se,ce.data)}else{He&&Gn&&e.texStorage2D(i.TEXTURE_2D,ue,Te,rn[0].width,rn[0].height);for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)ce=rn[Nt],Q.format!==na?_e!==null?He?mt&&e.compressedTexSubImage2D(i.TEXTURE_2D,Nt,0,0,ce.width,ce.height,_e,ce.data):e.compressedTexImage2D(i.TEXTURE_2D,Nt,Te,ce.width,ce.height,0,ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?mt&&e.texSubImage2D(i.TEXTURE_2D,Nt,0,0,ce.width,ce.height,_e,Se,ce.data):e.texImage2D(i.TEXTURE_2D,Nt,Te,ce.width,ce.height,0,_e,Se,ce.data)}else if(Q.isDataArrayTexture)if(He){if(Gn&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ue,Te,Jt.width,Jt.height,Jt.depth),mt)if(Q.layerUpdates.size>0){const Nt=O5(Jt.width,Jt.height,Q.format,Q.type);for(const Qt of Q.layerUpdates){const fe=Jt.data.subarray(Qt*Nt/Jt.data.BYTES_PER_ELEMENT,(Qt+1)*Nt/Jt.data.BYTES_PER_ELEMENT);e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Qt,Jt.width,Jt.height,1,_e,Se,fe)}Q.clearLayerUpdates()}else e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Jt.width,Jt.height,Jt.depth,_e,Se,Jt.data)}else e.texImage3D(i.TEXTURE_2D_ARRAY,0,Te,Jt.width,Jt.height,Jt.depth,0,_e,Se,Jt.data);else if(Q.isData3DTexture)He?(Gn&&e.texStorage3D(i.TEXTURE_3D,ue,Te,Jt.width,Jt.height,Jt.depth),mt&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Jt.width,Jt.height,Jt.depth,_e,Se,Jt.data)):e.texImage3D(i.TEXTURE_3D,0,Te,Jt.width,Jt.height,Jt.depth,0,_e,Se,Jt.data);else if(Q.isFramebufferTexture){if(Gn)if(He)e.texStorage2D(i.TEXTURE_2D,ue,Te,Jt.width,Jt.height);else{let Nt=Jt.width,Qt=Jt.height;for(let fe=0;fe<ue;fe++)e.texImage2D(i.TEXTURE_2D,fe,Te,Nt,Qt,0,_e,Se,null),Nt>>=1,Qt>>=1}}else if(rn.length>0){if(He&&Gn){const Nt=qt(rn[0]);e.texStorage2D(i.TEXTURE_2D,ue,Te,Nt.width,Nt.height)}for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)ce=rn[Nt],He?mt&&e.texSubImage2D(i.TEXTURE_2D,Nt,0,0,_e,Se,ce):e.texImage2D(i.TEXTURE_2D,Nt,Te,_e,Se,ce);Q.generateMipmaps=!1}else if(He){if(Gn){const Nt=qt(Jt);e.texStorage2D(i.TEXTURE_2D,ue,Te,Nt.width,Nt.height)}mt&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,_e,Se,Jt)}else e.texImage2D(i.TEXTURE_2D,0,Te,_e,Se,Jt);E(Q)&&S(It),ne.__version=Ot.version,Q.onUpdate&&Q.onUpdate(Q)}$.__version=Q.version}function wt($,Q,vt){if(Q.image.length!==6)return;const It=Et($,Q),jt=Q.source;e.bindTexture(i.TEXTURE_CUBE_MAP,$.__webglTexture,i.TEXTURE0+vt);const Ot=n.get(jt);if(jt.version!==Ot.__version||It===!0){e.activeTexture(i.TEXTURE0+vt);const ne=Fn.getPrimaries(Fn.workingColorSpace),te=Q.colorSpace===Ec?null:Fn.getPrimaries(Q.colorSpace),ge=Q.colorSpace===Ec||ne===te?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Q.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Q.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ge);const De=Q.isCompressedTexture||Q.image[0].isCompressedTexture,Jt=Q.image[0]&&Q.image[0].isDataTexture,_e=[];for(let Qt=0;Qt<6;Qt++)!De&&!Jt?_e[Qt]=T(Q.image[Qt],!0,s.maxCubemapSize):_e[Qt]=Jt?Q.image[Qt].image:Q.image[Qt],_e[Qt]=be(Q,_e[Qt]);const Se=_e[0],Te=r.convert(Q.format,Q.colorSpace),ce=r.convert(Q.type),rn=D(Q.internalFormat,Te,ce,Q.colorSpace),He=Q.isVideoTexture!==!0,Gn=Ot.__version===void 0||It===!0,mt=jt.dataReady;let ue=N(Q,Se);xt(i.TEXTURE_CUBE_MAP,Q);let Nt;if(De){He&&Gn&&e.texStorage2D(i.TEXTURE_CUBE_MAP,ue,rn,Se.width,Se.height);for(let Qt=0;Qt<6;Qt++){Nt=_e[Qt].mipmaps;for(let fe=0;fe<Nt.length;fe++){const he=Nt[fe];Q.format!==na?Te!==null?He?mt&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe,0,0,he.width,he.height,Te,he.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe,rn,he.width,he.height,0,he.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe,0,0,he.width,he.height,Te,ce,he.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe,rn,he.width,he.height,0,Te,ce,he.data)}}}else{if(Nt=Q.mipmaps,He&&Gn){Nt.length>0&&ue++;const Qt=qt(_e[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,ue,rn,Qt.width,Qt.height)}for(let Qt=0;Qt<6;Qt++)if(Jt){He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,0,0,_e[Qt].width,_e[Qt].height,Te,ce,_e[Qt].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,rn,_e[Qt].width,_e[Qt].height,0,Te,ce,_e[Qt].data);for(let fe=0;fe<Nt.length;fe++){const qe=Nt[fe].image[Qt].image;He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe+1,0,0,qe.width,qe.height,Te,ce,qe.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe+1,rn,qe.width,qe.height,0,Te,ce,qe.data)}}else{He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,0,0,Te,ce,_e[Qt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,rn,Te,ce,_e[Qt]);for(let fe=0;fe<Nt.length;fe++){const he=Nt[fe];He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe+1,0,0,Te,ce,he.image[Qt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe+1,rn,Te,ce,he.image[Qt])}}}E(Q)&&S(i.TEXTURE_CUBE_MAP),Ot.__version=jt.version,Q.onUpdate&&Q.onUpdate(Q)}$.__version=Q.version}function Bt($,Q,vt,It,jt,Ot){const ne=r.convert(vt.format,vt.colorSpace),te=r.convert(vt.type),ge=D(vt.internalFormat,ne,te,vt.colorSpace),De=n.get(Q),Jt=n.get(vt);if(Jt.__renderTarget=Q,!De.__hasExternalTextures){const _e=Math.max(1,Q.width>>Ot),Se=Math.max(1,Q.height>>Ot);jt===i.TEXTURE_3D||jt===i.TEXTURE_2D_ARRAY?e.texImage3D(jt,Ot,ge,_e,Se,Q.depth,0,ne,te,null):e.texImage2D(jt,Ot,ge,_e,Se,0,ne,te,null)}e.bindFramebuffer(i.FRAMEBUFFER,$),Vt(Q)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,It,jt,Jt.__webglTexture,0,Ft(Q)):(jt===i.TEXTURE_2D||jt>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&jt<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,It,jt,Jt.__webglTexture,Ot),e.bindFramebuffer(i.FRAMEBUFFER,null)}function Ut($,Q,vt){if(i.bindRenderbuffer(i.RENDERBUFFER,$),Q.depthBuffer){const It=Q.depthTexture,jt=It&&It.isDepthTexture?It.type:null,Ot=B(Q.stencilBuffer,jt),ne=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,te=Ft(Q);Vt(Q)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,te,Ot,Q.width,Q.height):vt?i.renderbufferStorageMultisample(i.RENDERBUFFER,te,Ot,Q.width,Q.height):i.renderbufferStorage(i.RENDERBUFFER,Ot,Q.width,Q.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,ne,i.RENDERBUFFER,$)}else{const It=Q.textures;for(let jt=0;jt<It.length;jt++){const Ot=It[jt],ne=r.convert(Ot.format,Ot.colorSpace),te=r.convert(Ot.type),ge=D(Ot.internalFormat,ne,te,Ot.colorSpace),De=Ft(Q);vt&&Vt(Q)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,De,ge,Q.width,Q.height):Vt(Q)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,De,ge,Q.width,Q.height):i.renderbufferStorage(i.RENDERBUFFER,ge,Q.width,Q.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Wt($,Q){if(Q&&Q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(i.FRAMEBUFFER,$),!(Q.depthTexture&&Q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const It=n.get(Q.depthTexture);It.__renderTarget=Q,(!It.__webglTexture||Q.depthTexture.image.width!==Q.width||Q.depthTexture.image.height!==Q.height)&&(Q.depthTexture.image.width=Q.width,Q.depthTexture.image.height=Q.height,Q.depthTexture.needsUpdate=!0),dt(Q.depthTexture,0);const jt=It.__webglTexture,Ot=Ft(Q);if(Q.depthTexture.format===cy)Vt(Q)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,jt,0,Ot):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,jt,0);else if(Q.depthTexture.format===zg)Vt(Q)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,jt,0,Ot):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,jt,0);else throw new Error("Unknown depthTexture format")}function ve($){const Q=n.get($),vt=$.isWebGLCubeRenderTarget===!0;if(Q.__boundDepthTexture!==$.depthTexture){const It=$.depthTexture;if(Q.__depthDisposeCallback&&Q.__depthDisposeCallback(),It){const jt=()=>{delete Q.__boundDepthTexture,delete Q.__depthDisposeCallback,It.removeEventListener("dispose",jt)};It.addEventListener("dispose",jt),Q.__depthDisposeCallback=jt}Q.__boundDepthTexture=It}if($.depthTexture&&!Q.__autoAllocateDepthBuffer){if(vt)throw new Error("target.depthTexture not supported in Cube render targets");const It=$.texture.mipmaps;It&&It.length>0?Wt(Q.__webglFramebuffer[0],$):Wt(Q.__webglFramebuffer,$)}else if(vt){Q.__webglDepthbuffer=[];for(let It=0;It<6;It++)if(e.bindFramebuffer(i.FRAMEBUFFER,Q.__webglFramebuffer[It]),Q.__webglDepthbuffer[It]===void 0)Q.__webglDepthbuffer[It]=i.createRenderbuffer(),Ut(Q.__webglDepthbuffer[It],$,!1);else{const jt=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ot=Q.__webglDepthbuffer[It];i.bindRenderbuffer(i.RENDERBUFFER,Ot),i.framebufferRenderbuffer(i.FRAMEBUFFER,jt,i.RENDERBUFFER,Ot)}}else{const It=$.texture.mipmaps;if(It&&It.length>0?e.bindFramebuffer(i.FRAMEBUFFER,Q.__webglFramebuffer[0]):e.bindFramebuffer(i.FRAMEBUFFER,Q.__webglFramebuffer),Q.__webglDepthbuffer===void 0)Q.__webglDepthbuffer=i.createRenderbuffer(),Ut(Q.__webglDepthbuffer,$,!1);else{const jt=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ot=Q.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Ot),i.framebufferRenderbuffer(i.FRAMEBUFFER,jt,i.RENDERBUFFER,Ot)}}e.bindFramebuffer(i.FRAMEBUFFER,null)}function ee($,Q,vt){const It=n.get($);Q!==void 0&&Bt(It.__webglFramebuffer,$,$.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),vt!==void 0&&ve($)}function Ye($){const Q=$.texture,vt=n.get($),It=n.get(Q);$.addEventListener("dispose",F);const jt=$.textures,Ot=$.isWebGLCubeRenderTarget===!0,ne=jt.length>1;if(ne||(It.__webglTexture===void 0&&(It.__webglTexture=i.createTexture()),It.__version=Q.version,a.memory.textures++),Ot){vt.__webglFramebuffer=[];for(let te=0;te<6;te++)if(Q.mipmaps&&Q.mipmaps.length>0){vt.__webglFramebuffer[te]=[];for(let ge=0;ge<Q.mipmaps.length;ge++)vt.__webglFramebuffer[te][ge]=i.createFramebuffer()}else vt.__webglFramebuffer[te]=i.createFramebuffer()}else{if(Q.mipmaps&&Q.mipmaps.length>0){vt.__webglFramebuffer=[];for(let te=0;te<Q.mipmaps.length;te++)vt.__webglFramebuffer[te]=i.createFramebuffer()}else vt.__webglFramebuffer=i.createFramebuffer();if(ne)for(let te=0,ge=jt.length;te<ge;te++){const De=n.get(jt[te]);De.__webglTexture===void 0&&(De.__webglTexture=i.createTexture(),a.memory.textures++)}if($.samples>0&&Vt($)===!1){vt.__webglMultisampledFramebuffer=i.createFramebuffer(),vt.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,vt.__webglMultisampledFramebuffer);for(let te=0;te<jt.length;te++){const ge=jt[te];vt.__webglColorRenderbuffer[te]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,vt.__webglColorRenderbuffer[te]);const De=r.convert(ge.format,ge.colorSpace),Jt=r.convert(ge.type),_e=D(ge.internalFormat,De,Jt,ge.colorSpace,$.isXRRenderTarget===!0),Se=Ft($);i.renderbufferStorageMultisample(i.RENDERBUFFER,Se,_e,$.width,$.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+te,i.RENDERBUFFER,vt.__webglColorRenderbuffer[te])}i.bindRenderbuffer(i.RENDERBUFFER,null),$.depthBuffer&&(vt.__webglDepthRenderbuffer=i.createRenderbuffer(),Ut(vt.__webglDepthRenderbuffer,$,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Ot){e.bindTexture(i.TEXTURE_CUBE_MAP,It.__webglTexture),xt(i.TEXTURE_CUBE_MAP,Q);for(let te=0;te<6;te++)if(Q.mipmaps&&Q.mipmaps.length>0)for(let ge=0;ge<Q.mipmaps.length;ge++)Bt(vt.__webglFramebuffer[te][ge],$,Q,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+te,ge);else Bt(vt.__webglFramebuffer[te],$,Q,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+te,0);E(Q)&&S(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(ne){for(let te=0,ge=jt.length;te<ge;te++){const De=jt[te],Jt=n.get(De);e.bindTexture(i.TEXTURE_2D,Jt.__webglTexture),xt(i.TEXTURE_2D,De),Bt(vt.__webglFramebuffer,$,De,i.COLOR_ATTACHMENT0+te,i.TEXTURE_2D,0),E(De)&&S(i.TEXTURE_2D)}e.unbindTexture()}else{let te=i.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(te=$.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(te,It.__webglTexture),xt(te,Q),Q.mipmaps&&Q.mipmaps.length>0)for(let ge=0;ge<Q.mipmaps.length;ge++)Bt(vt.__webglFramebuffer[ge],$,Q,i.COLOR_ATTACHMENT0,te,ge);else Bt(vt.__webglFramebuffer,$,Q,i.COLOR_ATTACHMENT0,te,0);E(Q)&&S(te),e.unbindTexture()}$.depthBuffer&&ve($)}function we($){const Q=$.textures;for(let vt=0,It=Q.length;vt<It;vt++){const jt=Q[vt];if(E(jt)){const Ot=w($),ne=n.get(jt).__webglTexture;e.bindTexture(Ot,ne),S(Ot),e.unbindTexture()}}}const re=[],Z=[];function Kt($){if($.samples>0){if(Vt($)===!1){const Q=$.textures,vt=$.width,It=$.height;let jt=i.COLOR_BUFFER_BIT;const Ot=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ne=n.get($),te=Q.length>1;if(te)for(let De=0;De<Q.length;De++)e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,ne.__webglMultisampledFramebuffer);const ge=$.texture.mipmaps;ge&&ge.length>0?e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ne.__webglFramebuffer[0]):e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ne.__webglFramebuffer);for(let De=0;De<Q.length;De++){if($.resolveDepthBuffer&&($.depthBuffer&&(jt|=i.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(jt|=i.STENCIL_BUFFER_BIT)),te){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,ne.__webglColorRenderbuffer[De]);const Jt=n.get(Q[De]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Jt,0)}i.blitFramebuffer(0,0,vt,It,0,0,vt,It,jt,i.NEAREST),u===!0&&(re.length=0,Z.length=0,re.push(i.COLOR_ATTACHMENT0+De),$.depthBuffer&&$.resolveDepthBuffer===!1&&(re.push(Ot),Z.push(Ot),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Z)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,re))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),te)for(let De=0;De<Q.length;De++){e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.RENDERBUFFER,ne.__webglColorRenderbuffer[De]);const Jt=n.get(Q[De]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.TEXTURE_2D,Jt,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ne.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&u){const Q=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Q])}}}function Ft($){return Math.min(s.maxSamples,$.samples)}function Vt($){const Q=n.get($);return $.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&Q.__useRenderToTexture!==!1}function Gt($){const Q=a.render.frame;m.get($)!==Q&&(m.set($,Q),$.update())}function be($,Q){const vt=$.colorSpace,It=$.format,jt=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||vt!==Fu&&vt!==Ec&&(Fn.getTransfer(vt)===fi?(It!==na||jt!==Ws)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",vt)),Q}function qt($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(f.width=$.naturalWidth||$.width,f.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(f.width=$.displayWidth,f.height=$.displayHeight):(f.width=$.width,f.height=$.height),f}this.allocateTextureUnit=it,this.resetTextureUnits=lt,this.setTexture2D=dt,this.setTexture2DArray=j,this.setTexture3D=tt,this.setTextureCube=nt,this.rebindTextures=ee,this.setupRenderTarget=Ye,this.updateRenderTargetMipmap=we,this.updateMultisampleRenderTarget=Kt,this.setupDepthRenderbuffer=ve,this.setupFrameBufferTexture=Bt,this.useMultisampledRTT=Vt}function IO(i,t){function e(n,s=Ec){let r;const a=Fn.getTransfer(s);if(n===Ws)return i.UNSIGNED_BYTE;if(n===YE)return i.UNSIGNED_SHORT_4_4_4_4;if(n===WE)return i.UNSIGNED_SHORT_5_5_5_1;if(n===Rw)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===Cw)return i.BYTE;if(n===ww)return i.SHORT;if(n===ly)return i.UNSIGNED_SHORT;if(n===qE)return i.INT;if(n===Pu)return i.UNSIGNED_INT;if(n===Oa)return i.FLOAT;if(n===i0)return i.HALF_FLOAT;if(n===Lw)return i.ALPHA;if(n===Dw)return i.RGB;if(n===na)return i.RGBA;if(n===cy)return i.DEPTH_COMPONENT;if(n===zg)return i.DEPTH_STENCIL;if(n===KE)return i.RED;if(n===Mx)return i.RED_INTEGER;if(n===Bw)return i.RG;if(n===JE)return i.RG_INTEGER;if(n===ZE)return i.RGBA_INTEGER;if(n===D_||n===B_||n===O_||n===N_)if(a===fi)if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===D_)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===B_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===O_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===N_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=t.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===D_)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===B_)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===O_)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===N_)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===M3||n===T3||n===C3||n===w3)if(r=t.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===M3)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===T3)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===C3)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===w3)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===R3||n===L3||n===D3)if(r=t.get("WEBGL_compressed_texture_etc"),r!==null){if(n===R3||n===L3)return a===fi?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===D3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===B3||n===O3||n===N3||n===I3||n===U3||n===P3||n===F3||n===H3||n===z3||n===G3||n===k3||n===V3||n===Q3||n===j3)if(r=t.get("WEBGL_compressed_texture_astc"),r!==null){if(n===B3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===O3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===N3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===I3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===U3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===P3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===F3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===H3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===z3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===G3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===k3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===V3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Q3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===j3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===I_||n===X3||n===q3)if(r=t.get("EXT_texture_compression_bptc"),r!==null){if(n===I_)return a===fi?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===X3)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===q3)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Ow||n===Y3||n===W3||n===K3)if(r=t.get("EXT_texture_compression_rgtc"),r!==null){if(n===I_)return r.COMPRESSED_RED_RGTC1_EXT;if(n===Y3)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===W3)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===K3)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Hg?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:e}}const jq=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Xq=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class qq{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(this.texture===null){const s=new wi,r=t.properties.get(s);r.__webglTexture=e.texture,(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=s}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,n=new Ks({vertexShader:jq,fragmentShader:Xq,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new as(new Ey(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Yq extends qo{constructor(t,e){super();const n=this;let s=null,r=1,a=null,l="local-floor",u=1,f=null,m=null,g=null,v=null,_=null,b=null;const T=new qq,E=e.getContextAttributes();let S=null,w=null;const D=[],B=[],N=new Pt;let I=null;const F=new Rs;F.viewport=new On;const z=new Rs;z.viewport=new On;const U=[F,z],P=new SO;let X=null,lt=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ct){let wt=D[ct];return wt===void 0&&(wt=new D4,D[ct]=wt),wt.getTargetRaySpace()},this.getControllerGrip=function(ct){let wt=D[ct];return wt===void 0&&(wt=new D4,D[ct]=wt),wt.getGripSpace()},this.getHand=function(ct){let wt=D[ct];return wt===void 0&&(wt=new D4,D[ct]=wt),wt.getHandSpace()};function it(ct){const wt=B.indexOf(ct.inputSource);if(wt===-1)return;const Bt=D[wt];Bt!==void 0&&(Bt.update(ct.inputSource,ct.frame,f||a),Bt.dispatchEvent({type:ct.type,data:ct.inputSource}))}function ut(){s.removeEventListener("select",it),s.removeEventListener("selectstart",it),s.removeEventListener("selectend",it),s.removeEventListener("squeeze",it),s.removeEventListener("squeezestart",it),s.removeEventListener("squeezeend",it),s.removeEventListener("end",ut),s.removeEventListener("inputsourceschange",dt);for(let ct=0;ct<D.length;ct++){const wt=B[ct];wt!==null&&(B[ct]=null,D[ct].disconnect(wt))}X=null,lt=null,T.reset(),t.setRenderTarget(S),_=null,v=null,g=null,s=null,w=null,Et.stop(),n.isPresenting=!1,t.setPixelRatio(I),t.setSize(N.width,N.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ct){r=ct,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ct){l=ct,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||a},this.setReferenceSpace=function(ct){f=ct},this.getBaseLayer=function(){return v!==null?v:_},this.getBinding=function(){return g},this.getFrame=function(){return b},this.getSession=function(){return s},this.setSession=async function(ct){if(s=ct,s!==null){if(S=t.getRenderTarget(),s.addEventListener("select",it),s.addEventListener("selectstart",it),s.addEventListener("selectend",it),s.addEventListener("squeeze",it),s.addEventListener("squeezestart",it),s.addEventListener("squeezeend",it),s.addEventListener("end",ut),s.addEventListener("inputsourceschange",dt),E.xrCompatible!==!0&&await e.makeXRCompatible(),I=t.getPixelRatio(),t.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Bt=null,Ut=null,Wt=null;E.depth&&(Wt=E.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Bt=E.stencil?zg:cy,Ut=E.stencil?Hg:Pu);const ve={colorFormat:e.RGBA8,depthFormat:Wt,scaleFactor:r};g=new XRWebGLBinding(s,e),v=g.createProjectionLayer(ve),s.updateRenderState({layers:[v]}),t.setPixelRatio(1),t.setSize(v.textureWidth,v.textureHeight,!1),w=new Ds(v.textureWidth,v.textureHeight,{format:na,type:Ws,depthTexture:new Dx(v.textureWidth,v.textureHeight,Ut,void 0,void 0,void 0,void 0,void 0,void 0,Bt),stencilBuffer:E.stencil,colorSpace:t.outputColorSpace,samples:E.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const Bt={antialias:E.antialias,alpha:!0,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:r};_=new XRWebGLLayer(s,e,Bt),s.updateRenderState({baseLayer:_}),t.setPixelRatio(1),t.setSize(_.framebufferWidth,_.framebufferHeight,!1),w=new Ds(_.framebufferWidth,_.framebufferHeight,{format:na,type:Ws,colorSpace:t.outputColorSpace,stencilBuffer:E.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(u),f=null,a=await s.requestReferenceSpace(l),Et.setContext(s),Et.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return T.getDepthTexture()};function dt(ct){for(let wt=0;wt<ct.removed.length;wt++){const Bt=ct.removed[wt],Ut=B.indexOf(Bt);Ut>=0&&(B[Ut]=null,D[Ut].disconnect(Bt))}for(let wt=0;wt<ct.added.length;wt++){const Bt=ct.added[wt];let Ut=B.indexOf(Bt);if(Ut===-1){for(let ve=0;ve<D.length;ve++)if(ve>=B.length){B.push(Bt),Ut=ve;break}else if(B[ve]===null){B[ve]=Bt,Ut=ve;break}if(Ut===-1)break}const Wt=D[Ut];Wt&&Wt.connect(Bt)}}const j=new et,tt=new et;function nt(ct,wt,Bt){j.setFromMatrixPosition(wt.matrixWorld),tt.setFromMatrixPosition(Bt.matrixWorld);const Ut=j.distanceTo(tt),Wt=wt.projectionMatrix.elements,ve=Bt.projectionMatrix.elements,ee=Wt[14]/(Wt[10]-1),Ye=Wt[14]/(Wt[10]+1),we=(Wt[9]+1)/Wt[5],re=(Wt[9]-1)/Wt[5],Z=(Wt[8]-1)/Wt[0],Kt=(ve[8]+1)/ve[0],Ft=ee*Z,Vt=ee*Kt,Gt=Ut/(-Z+Kt),be=Gt*-Z;if(wt.matrixWorld.decompose(ct.position,ct.quaternion,ct.scale),ct.translateX(be),ct.translateZ(Gt),ct.matrixWorld.compose(ct.position,ct.quaternion,ct.scale),ct.matrixWorldInverse.copy(ct.matrixWorld).invert(),Wt[10]===-1)ct.projectionMatrix.copy(wt.projectionMatrix),ct.projectionMatrixInverse.copy(wt.projectionMatrixInverse);else{const qt=ee+Gt,$=Ye+Gt,Q=Ft-be,vt=Vt+(Ut-be),It=we*Ye/$*qt,jt=re*Ye/$*qt;ct.projectionMatrix.makePerspective(Q,vt,It,jt,qt,$),ct.projectionMatrixInverse.copy(ct.projectionMatrix).invert()}}function _t(ct,wt){wt===null?ct.matrixWorld.copy(ct.matrix):ct.matrixWorld.multiplyMatrices(wt.matrixWorld,ct.matrix),ct.matrixWorldInverse.copy(ct.matrixWorld).invert()}this.updateCamera=function(ct){if(s===null)return;let wt=ct.near,Bt=ct.far;T.texture!==null&&(T.depthNear>0&&(wt=T.depthNear),T.depthFar>0&&(Bt=T.depthFar)),P.near=z.near=F.near=wt,P.far=z.far=F.far=Bt,(X!==P.near||lt!==P.far)&&(s.updateRenderState({depthNear:P.near,depthFar:P.far}),X=P.near,lt=P.far),F.layers.mask=ct.layers.mask|2,z.layers.mask=ct.layers.mask|4,P.layers.mask=F.layers.mask|z.layers.mask;const Ut=ct.parent,Wt=P.cameras;_t(P,Ut);for(let ve=0;ve<Wt.length;ve++)_t(Wt[ve],Ut);Wt.length===2?nt(P,F,z):P.projectionMatrix.copy(F.projectionMatrix),J(ct,P,Ut)};function J(ct,wt,Bt){Bt===null?ct.matrix.copy(wt.matrixWorld):(ct.matrix.copy(Bt.matrixWorld),ct.matrix.invert(),ct.matrix.multiply(wt.matrixWorld)),ct.matrix.decompose(ct.position,ct.quaternion,ct.scale),ct.updateMatrixWorld(!0),ct.projectionMatrix.copy(wt.projectionMatrix),ct.projectionMatrixInverse.copy(wt.projectionMatrixInverse),ct.isPerspectiveCamera&&(ct.fov=fy*2*Math.atan(1/ct.projectionMatrix.elements[5]),ct.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(v===null&&_===null))return u},this.setFoveation=function(ct){u=ct,v!==null&&(v.fixedFoveation=ct),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=ct)},this.hasDepthSensing=function(){return T.texture!==null},this.getDepthSensingMesh=function(){return T.getMesh(P)};let ot=null;function xt(ct,wt){if(m=wt.getViewerPose(f||a),b=wt,m!==null){const Bt=m.views;_!==null&&(t.setRenderTargetFramebuffer(w,_.framebuffer),t.setRenderTarget(w));let Ut=!1;Bt.length!==P.cameras.length&&(P.cameras.length=0,Ut=!0);for(let ee=0;ee<Bt.length;ee++){const Ye=Bt[ee];let we=null;if(_!==null)we=_.getViewport(Ye);else{const Z=g.getViewSubImage(v,Ye);we=Z.viewport,ee===0&&(t.setRenderTargetTextures(w,Z.colorTexture,Z.depthStencilTexture),t.setRenderTarget(w))}let re=U[ee];re===void 0&&(re=new Rs,re.layers.enable(ee),re.viewport=new On,U[ee]=re),re.matrix.fromArray(Ye.transform.matrix),re.matrix.decompose(re.position,re.quaternion,re.scale),re.projectionMatrix.fromArray(Ye.projectionMatrix),re.projectionMatrixInverse.copy(re.projectionMatrix).invert(),re.viewport.set(we.x,we.y,we.width,we.height),ee===0&&(P.matrix.copy(re.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),Ut===!0&&P.cameras.push(re)}const Wt=s.enabledFeatures;if(Wt&&Wt.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&g){const ee=g.getDepthInformation(Bt[0]);ee&&ee.isValid&&ee.texture&&T.init(t,ee,s.renderState)}}for(let Bt=0;Bt<D.length;Bt++){const Ut=B[Bt],Wt=D[Bt];Ut!==null&&Wt!==void 0&&Wt.update(Ut,wt,f||a)}ot&&ot(ct,wt),wt.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:wt}),b=null}const Et=new LO;Et.setAnimationLoop(xt),this.setAnimationLoop=function(ct){ot=ct},this.dispose=function(){}}}const vm=new Vo,Wq=new Ne;function Kq(i,t){function e(E,S){E.matrixAutoUpdate===!0&&E.updateMatrix(),S.value.copy(E.matrix)}function n(E,S){S.color.getRGB(E.fogColor.value,UB(i)),S.isFog?(E.fogNear.value=S.near,E.fogFar.value=S.far):S.isFogExp2&&(E.fogDensity.value=S.density)}function s(E,S,w,D,B){S.isMeshBasicMaterial||S.isMeshLambertMaterial?r(E,S):S.isMeshToonMaterial?(r(E,S),g(E,S)):S.isMeshPhongMaterial?(r(E,S),m(E,S)):S.isMeshStandardMaterial?(r(E,S),v(E,S),S.isMeshPhysicalMaterial&&_(E,S,B)):S.isMeshMatcapMaterial?(r(E,S),b(E,S)):S.isMeshDepthMaterial?r(E,S):S.isMeshDistanceMaterial?(r(E,S),T(E,S)):S.isMeshNormalMaterial?r(E,S):S.isLineBasicMaterial?(a(E,S),S.isLineDashedMaterial&&l(E,S)):S.isPointsMaterial?u(E,S,w,D):S.isSpriteMaterial?f(E,S):S.isShadowMaterial?(E.color.value.copy(S.color),E.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function r(E,S){E.opacity.value=S.opacity,S.color&&E.diffuse.value.copy(S.color),S.emissive&&E.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(E.map.value=S.map,e(S.map,E.mapTransform)),S.alphaMap&&(E.alphaMap.value=S.alphaMap,e(S.alphaMap,E.alphaMapTransform)),S.bumpMap&&(E.bumpMap.value=S.bumpMap,e(S.bumpMap,E.bumpMapTransform),E.bumpScale.value=S.bumpScale,S.side===qs&&(E.bumpScale.value*=-1)),S.normalMap&&(E.normalMap.value=S.normalMap,e(S.normalMap,E.normalMapTransform),E.normalScale.value.copy(S.normalScale),S.side===qs&&E.normalScale.value.negate()),S.displacementMap&&(E.displacementMap.value=S.displacementMap,e(S.displacementMap,E.displacementMapTransform),E.displacementScale.value=S.displacementScale,E.displacementBias.value=S.displacementBias),S.emissiveMap&&(E.emissiveMap.value=S.emissiveMap,e(S.emissiveMap,E.emissiveMapTransform)),S.specularMap&&(E.specularMap.value=S.specularMap,e(S.specularMap,E.specularMapTransform)),S.alphaTest>0&&(E.alphaTest.value=S.alphaTest);const w=t.get(S),D=w.envMap,B=w.envMapRotation;D&&(E.envMap.value=D,vm.copy(B),vm.x*=-1,vm.y*=-1,vm.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(vm.y*=-1,vm.z*=-1),E.envMapRotation.value.setFromMatrix4(Wq.makeRotationFromEuler(vm)),E.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=S.reflectivity,E.ior.value=S.ior,E.refractionRatio.value=S.refractionRatio),S.lightMap&&(E.lightMap.value=S.lightMap,E.lightMapIntensity.value=S.lightMapIntensity,e(S.lightMap,E.lightMapTransform)),S.aoMap&&(E.aoMap.value=S.aoMap,E.aoMapIntensity.value=S.aoMapIntensity,e(S.aoMap,E.aoMapTransform))}function a(E,S){E.diffuse.value.copy(S.color),E.opacity.value=S.opacity,S.map&&(E.map.value=S.map,e(S.map,E.mapTransform))}function l(E,S){E.dashSize.value=S.dashSize,E.totalSize.value=S.dashSize+S.gapSize,E.scale.value=S.scale}function u(E,S,w,D){E.diffuse.value.copy(S.color),E.opacity.value=S.opacity,E.size.value=S.size*w,E.scale.value=D*.5,S.map&&(E.map.value=S.map,e(S.map,E.uvTransform)),S.alphaMap&&(E.alphaMap.value=S.alphaMap,e(S.alphaMap,E.alphaMapTransform)),S.alphaTest>0&&(E.alphaTest.value=S.alphaTest)}function f(E,S){E.diffuse.value.copy(S.color),E.opacity.value=S.opacity,E.rotation.value=S.rotation,S.map&&(E.map.value=S.map,e(S.map,E.mapTransform)),S.alphaMap&&(E.alphaMap.value=S.alphaMap,e(S.alphaMap,E.alphaMapTransform)),S.alphaTest>0&&(E.alphaTest.value=S.alphaTest)}function m(E,S){E.specular.value.copy(S.specular),E.shininess.value=Math.max(S.shininess,1e-4)}function g(E,S){S.gradientMap&&(E.gradientMap.value=S.gradientMap)}function v(E,S){E.metalness.value=S.metalness,S.metalnessMap&&(E.metalnessMap.value=S.metalnessMap,e(S.metalnessMap,E.metalnessMapTransform)),E.roughness.value=S.roughness,S.roughnessMap&&(E.roughnessMap.value=S.roughnessMap,e(S.roughnessMap,E.roughnessMapTransform)),S.envMap&&(E.envMapIntensity.value=S.envMapIntensity)}function _(E,S,w){E.ior.value=S.ior,S.sheen>0&&(E.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),E.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(E.sheenColorMap.value=S.sheenColorMap,e(S.sheenColorMap,E.sheenColorMapTransform)),S.sheenRoughnessMap&&(E.sheenRoughnessMap.value=S.sheenRoughnessMap,e(S.sheenRoughnessMap,E.sheenRoughnessMapTransform))),S.clearcoat>0&&(E.clearcoat.value=S.clearcoat,E.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(E.clearcoatMap.value=S.clearcoatMap,e(S.clearcoatMap,E.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,e(S.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(E.clearcoatNormalMap.value=S.clearcoatNormalMap,e(S.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===qs&&E.clearcoatNormalScale.value.negate())),S.dispersion>0&&(E.dispersion.value=S.dispersion),S.iridescence>0&&(E.iridescence.value=S.iridescence,E.iridescenceIOR.value=S.iridescenceIOR,E.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(E.iridescenceMap.value=S.iridescenceMap,e(S.iridescenceMap,E.iridescenceMapTransform)),S.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=S.iridescenceThicknessMap,e(S.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),S.transmission>0&&(E.transmission.value=S.transmission,E.transmissionSamplerMap.value=w.texture,E.transmissionSamplerSize.value.set(w.width,w.height),S.transmissionMap&&(E.transmissionMap.value=S.transmissionMap,e(S.transmissionMap,E.transmissionMapTransform)),E.thickness.value=S.thickness,S.thicknessMap&&(E.thicknessMap.value=S.thicknessMap,e(S.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=S.attenuationDistance,E.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(E.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(E.anisotropyMap.value=S.anisotropyMap,e(S.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=S.specularIntensity,E.specularColor.value.copy(S.specularColor),S.specularColorMap&&(E.specularColorMap.value=S.specularColorMap,e(S.specularColorMap,E.specularColorMapTransform)),S.specularIntensityMap&&(E.specularIntensityMap.value=S.specularIntensityMap,e(S.specularIntensityMap,E.specularIntensityMapTransform))}function b(E,S){S.matcap&&(E.matcap.value=S.matcap)}function T(E,S){const w=t.get(S).light;E.referencePosition.value.setFromMatrixPosition(w.matrixWorld),E.nearDistance.value=w.shadow.camera.near,E.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function Jq(i,t,e,n){let s={},r={},a=[];const l=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function u(w,D){const B=D.program;n.uniformBlockBinding(w,B)}function f(w,D){let B=s[w.id];B===void 0&&(b(w),B=m(w),s[w.id]=B,w.addEventListener("dispose",E));const N=D.program;n.updateUBOMapping(w,N);const I=t.render.frame;r[w.id]!==I&&(v(w),r[w.id]=I)}function m(w){const D=g();w.__bindingPointIndex=D;const B=i.createBuffer(),N=w.__size,I=w.usage;return i.bindBuffer(i.UNIFORM_BUFFER,B),i.bufferData(i.UNIFORM_BUFFER,N,I),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,D,B),B}function g(){for(let w=0;w<l;w++)if(a.indexOf(w)===-1)return a.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(w){const D=s[w.id],B=w.uniforms,N=w.__cache;i.bindBuffer(i.UNIFORM_BUFFER,D);for(let I=0,F=B.length;I<F;I++){const z=Array.isArray(B[I])?B[I]:[B[I]];for(let U=0,P=z.length;U<P;U++){const X=z[U];if(_(X,I,U,N)===!0){const lt=X.__offset,it=Array.isArray(X.value)?X.value:[X.value];let ut=0;for(let dt=0;dt<it.length;dt++){const j=it[dt],tt=T(j);typeof j=="number"||typeof j=="boolean"?(X.__data[0]=j,i.bufferSubData(i.UNIFORM_BUFFER,lt+ut,X.__data)):j.isMatrix3?(X.__data[0]=j.elements[0],X.__data[1]=j.elements[1],X.__data[2]=j.elements[2],X.__data[3]=0,X.__data[4]=j.elements[3],X.__data[5]=j.elements[4],X.__data[6]=j.elements[5],X.__data[7]=0,X.__data[8]=j.elements[6],X.__data[9]=j.elements[7],X.__data[10]=j.elements[8],X.__data[11]=0):(j.toArray(X.__data,ut),ut+=tt.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,lt,X.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function _(w,D,B,N){const I=w.value,F=D+"_"+B;if(N[F]===void 0)return typeof I=="number"||typeof I=="boolean"?N[F]=I:N[F]=I.clone(),!0;{const z=N[F];if(typeof I=="number"||typeof I=="boolean"){if(z!==I)return N[F]=I,!0}else if(z.equals(I)===!1)return z.copy(I),!0}return!1}function b(w){const D=w.uniforms;let B=0;const N=16;for(let F=0,z=D.length;F<z;F++){const U=Array.isArray(D[F])?D[F]:[D[F]];for(let P=0,X=U.length;P<X;P++){const lt=U[P],it=Array.isArray(lt.value)?lt.value:[lt.value];for(let ut=0,dt=it.length;ut<dt;ut++){const j=it[ut],tt=T(j),nt=B%N,_t=nt%tt.boundary,J=nt+_t;B+=_t,J!==0&&N-J<tt.storage&&(B+=N-J),lt.__data=new Float32Array(tt.storage/Float32Array.BYTES_PER_ELEMENT),lt.__offset=B,B+=tt.storage}}}const I=B%N;return I>0&&(B+=N-I),w.__size=B,w.__cache={},this}function T(w){const D={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(D.boundary=4,D.storage=4):w.isVector2?(D.boundary=8,D.storage=8):w.isVector3||w.isColor?(D.boundary=16,D.storage=12):w.isVector4?(D.boundary=16,D.storage=16):w.isMatrix3?(D.boundary=48,D.storage=48):w.isMatrix4?(D.boundary=64,D.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),D}function E(w){const D=w.target;D.removeEventListener("dispose",E);const B=a.indexOf(D.__bindingPointIndex);a.splice(B,1),i.deleteBuffer(s[D.id]),delete s[D.id],delete r[D.id]}function S(){for(const w in s)i.deleteBuffer(s[w]);a=[],s={},r={}}return{bind:u,update:f,dispose:S}}class UO{constructor(t={}){const{canvas:e=OB(),context:n=null,depth:s=!0,stencil:r=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:f=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:v=!1}=t;this.isWebGLRenderer=!0;let _;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=a;const b=new Uint32Array(4),T=new Int32Array(4);let E=null,S=null;const w=[],D=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Rc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const B=this;let N=!1;this._outputColorSpace=Kn;let I=0,F=0,z=null,U=-1,P=null;const X=new On,lt=new On;let it=null;const ut=new oe(0);let dt=0,j=e.width,tt=e.height,nt=1,_t=null,J=null;const ot=new On(0,0,j,tt),xt=new On(0,0,j,tt);let Et=!1;const ct=new Sy;let wt=!1,Bt=!1;const Ut=new Ne,Wt=new Ne,ve=new et,ee=new On,Ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let we=!1;function re(){return z===null?nt:1}let Z=n;function Kt(Y,pt){return e.getContext(Y,pt)}try{const Y={alpha:!0,depth:s,stencil:r,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:f,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${n0}`),e.addEventListener("webglcontextlost",Qt,!1),e.addEventListener("webglcontextrestored",fe,!1),e.addEventListener("webglcontextcreationerror",he,!1),Z===null){const pt="webgl2";if(Z=Kt(pt,Y),Z===null)throw Kt(pt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Y){throw console.error("THREE.WebGLRenderer: "+Y.message),Y}let Ft,Vt,Gt,be,qt,$,Q,vt,It,jt,Ot,ne,te,ge,De,Jt,_e,Se,Te,ce,rn,He,Gn,mt;function ue(){Ft=new cX(Z),Ft.init(),He=new IO(Z,Ft),Vt=new nX(Z,Ft,t,He),Gt=new Vq(Z,Ft),Vt.reverseDepthBuffer&&v&&Gt.buffers.depth.setReversed(!0),be=new fX(Z),qt=new Lq,$=new Qq(Z,Ft,Gt,qt,Vt,He,be),Q=new sX(B),vt=new lX(B),It=new yV(Z),Gn=new tX(Z,It),jt=new uX(Z,It,be,Gn),Ot=new pX(Z,jt,It,be),Te=new dX(Z,Vt,$),Jt=new iX(qt),ne=new Rq(B,Q,vt,Ft,Vt,Gn,Jt),te=new Kq(B,qt),ge=new Bq,De=new Fq(Ft),Se=new $j(B,Q,vt,Gt,Ot,_,u),_e=new Gq(B,Ot,Vt),mt=new Jq(Z,be,Vt,Gt),ce=new eX(Z,Ft,be),rn=new hX(Z,Ft,be),be.programs=ne.programs,B.capabilities=Vt,B.extensions=Ft,B.properties=qt,B.renderLists=ge,B.shadowMap=_e,B.state=Gt,B.info=be}ue();const Nt=new Yq(B,Z);this.xr=Nt,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const Y=Ft.get("WEBGL_lose_context");Y&&Y.loseContext()},this.forceContextRestore=function(){const Y=Ft.get("WEBGL_lose_context");Y&&Y.restoreContext()},this.getPixelRatio=function(){return nt},this.setPixelRatio=function(Y){Y!==void 0&&(nt=Y,this.setSize(j,tt,!1))},this.getSize=function(Y){return Y.set(j,tt)},this.setSize=function(Y,pt,Ct=!0){if(Nt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=Y,tt=pt,e.width=Math.floor(Y*nt),e.height=Math.floor(pt*nt),Ct===!0&&(e.style.width=Y+"px",e.style.height=pt+"px"),this.setViewport(0,0,Y,pt)},this.getDrawingBufferSize=function(Y){return Y.set(j*nt,tt*nt).floor()},this.setDrawingBufferSize=function(Y,pt,Ct){j=Y,tt=pt,nt=Ct,e.width=Math.floor(Y*Ct),e.height=Math.floor(pt*Ct),this.setViewport(0,0,Y,pt)},this.getCurrentViewport=function(Y){return Y.copy(X)},this.getViewport=function(Y){return Y.copy(ot)},this.setViewport=function(Y,pt,Ct,Rt){Y.isVector4?ot.set(Y.x,Y.y,Y.z,Y.w):ot.set(Y,pt,Ct,Rt),Gt.viewport(X.copy(ot).multiplyScalar(nt).round())},this.getScissor=function(Y){return Y.copy(xt)},this.setScissor=function(Y,pt,Ct,Rt){Y.isVector4?xt.set(Y.x,Y.y,Y.z,Y.w):xt.set(Y,pt,Ct,Rt),Gt.scissor(lt.copy(xt).multiplyScalar(nt).round())},this.getScissorTest=function(){return Et},this.setScissorTest=function(Y){Gt.setScissorTest(Et=Y)},this.setOpaqueSort=function(Y){_t=Y},this.setTransparentSort=function(Y){J=Y},this.getClearColor=function(Y){return Y.copy(Se.getClearColor())},this.setClearColor=function(){Se.setClearColor(...arguments)},this.getClearAlpha=function(){return Se.getClearAlpha()},this.setClearAlpha=function(){Se.setClearAlpha(...arguments)},this.clear=function(Y=!0,pt=!0,Ct=!0){let Rt=0;if(Y){let yt=!1;if(z!==null){const Yt=z.texture.format;yt=Yt===ZE||Yt===JE||Yt===Mx}if(yt){const Yt=z.texture.type,se=Yt===Ws||Yt===Pu||Yt===ly||Yt===Hg||Yt===YE||Yt===WE,ae=Se.getClearColor(),Ae=Se.getClearAlpha(),Ge=ae.r,Oe=ae.g,Ce=ae.b;se?(b[0]=Ge,b[1]=Oe,b[2]=Ce,b[3]=Ae,Z.clearBufferuiv(Z.COLOR,0,b)):(T[0]=Ge,T[1]=Oe,T[2]=Ce,T[3]=Ae,Z.clearBufferiv(Z.COLOR,0,T))}else Rt|=Z.COLOR_BUFFER_BIT}pt&&(Rt|=Z.DEPTH_BUFFER_BIT),Ct&&(Rt|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear(Rt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Qt,!1),e.removeEventListener("webglcontextrestored",fe,!1),e.removeEventListener("webglcontextcreationerror",he,!1),Se.dispose(),ge.dispose(),De.dispose(),qt.dispose(),Q.dispose(),vt.dispose(),Ot.dispose(),Gn.dispose(),mt.dispose(),ne.dispose(),Nt.dispose(),Nt.removeEventListener("sessionstart",Ji),Nt.removeEventListener("sessionend",cs),$s.stop()};function Qt(Y){Y.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function fe(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const Y=be.autoReset,pt=_e.enabled,Ct=_e.autoUpdate,Rt=_e.needsUpdate,yt=_e.type;ue(),be.autoReset=Y,_e.enabled=pt,_e.autoUpdate=Ct,_e.needsUpdate=Rt,_e.type=yt}function he(Y){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Y.statusMessage)}function qe(Y){const pt=Y.target;pt.removeEventListener("dispose",qe),Jn(pt)}function Jn(Y){Ei(Y),qt.remove(Y)}function Ei(Y){const pt=qt.get(Y).programs;pt!==void 0&&(pt.forEach(function(Ct){ne.releaseProgram(Ct)}),Y.isShaderMaterial&&ne.releaseShaderCache(Y))}this.renderBufferDirect=function(Y,pt,Ct,Rt,yt,Yt){pt===null&&(pt=Ye);const se=yt.isMesh&&yt.matrixWorld.determinant()<0,ae=Oc(Y,pt,Ct,Rt,yt);Gt.setMaterial(Rt,se);let Ae=Ct.index,Ge=1;if(Rt.wireframe===!0){if(Ae=jt.getWireframeAttribute(Ct),Ae===void 0)return;Ge=2}const Oe=Ct.drawRange,Ce=Ct.attributes.position;let pn=Oe.start*Ge,In=(Oe.start+Oe.count)*Ge;Yt!==null&&(pn=Math.max(pn,Yt.start*Ge),In=Math.min(In,(Yt.start+Yt.count)*Ge)),Ae!==null?(pn=Math.max(pn,0),In=Math.min(In,Ae.count)):Ce!=null&&(pn=Math.max(pn,0),In=Math.min(In,Ce.count));const Mi=In-pn;if(Mi<0||Mi===1/0)return;Gn.setup(yt,Rt,ae,Ct,Ae);let yn,bn=ce;if(Ae!==null&&(yn=It.get(Ae),bn=rn,bn.setIndex(yn)),yt.isMesh)Rt.wireframe===!0?(Gt.setLineWidth(Rt.wireframeLinewidth*re()),bn.setMode(Z.LINES)):bn.setMode(Z.TRIANGLES);else if(yt.isLine){let Ie=Rt.linewidth;Ie===void 0&&(Ie=1),Gt.setLineWidth(Ie*re()),yt.isLineSegments?bn.setMode(Z.LINES):yt.isLineLoop?bn.setMode(Z.LINE_LOOP):bn.setMode(Z.LINE_STRIP)}else yt.isPoints?bn.setMode(Z.POINTS):yt.isSprite&&bn.setMode(Z.TRIANGLES);if(yt.isBatchedMesh)if(yt._multiDrawInstances!==null)L4("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),bn.renderMultiDrawInstances(yt._multiDrawStarts,yt._multiDrawCounts,yt._multiDrawCount,yt._multiDrawInstances);else if(Ft.get("WEBGL_multi_draw"))bn.renderMultiDraw(yt._multiDrawStarts,yt._multiDrawCounts,yt._multiDrawCount);else{const Ie=yt._multiDrawStarts,Ri=yt._multiDrawCounts,Dn=yt._multiDrawCount,Bs=Ae?It.get(Ae).bytesPerElement:1,Yo=qt.get(Rt).currentProgram.getUniforms();for(let ri=0;ri<Dn;ri++)Yo.setValue(Z,"_gl_DrawID",ri),bn.render(Ie[ri]/Bs,Ri[ri])}else if(yt.isInstancedMesh)bn.renderInstances(pn,Mi,yt.count);else if(Ct.isInstancedBufferGeometry){const Ie=Ct._maxInstanceCount!==void 0?Ct._maxInstanceCount:1/0,Ri=Math.min(Ct.instanceCount,Ie);bn.renderInstances(pn,Mi,Ri)}else bn.render(pn,Mi)};function Cn(Y,pt,Ct){Y.transparent===!0&&Y.side===La&&Y.forceSinglePass===!1?(Y.side=qs,Y.needsUpdate=!0,ti(Y,pt,Ct),Y.side=Lc,Y.needsUpdate=!0,ti(Y,pt,Ct),Y.side=La):ti(Y,pt,Ct)}this.compile=function(Y,pt,Ct=null){Ct===null&&(Ct=Y),S=De.get(Ct),S.init(pt),D.push(S),Ct.traverseVisible(function(yt){yt.isLight&&yt.layers.test(pt.layers)&&(S.pushLight(yt),yt.castShadow&&S.pushShadow(yt))}),Y!==Ct&&Y.traverseVisible(function(yt){yt.isLight&&yt.layers.test(pt.layers)&&(S.pushLight(yt),yt.castShadow&&S.pushShadow(yt))}),S.setupLights();const Rt=new Set;return Y.traverse(function(yt){if(!(yt.isMesh||yt.isPoints||yt.isLine||yt.isSprite))return;const Yt=yt.material;if(Yt)if(Array.isArray(Yt))for(let se=0;se<Yt.length;se++){const ae=Yt[se];Cn(ae,Ct,yt),Rt.add(ae)}else Cn(Yt,Ct,yt),Rt.add(Yt)}),S=D.pop(),Rt},this.compileAsync=function(Y,pt,Ct=null){const Rt=this.compile(Y,pt,Ct);return new Promise(yt=>{function Yt(){if(Rt.forEach(function(se){qt.get(se).currentProgram.isReady()&&Rt.delete(se)}),Rt.size===0){yt(Y);return}setTimeout(Yt,10)}Ft.get("KHR_parallel_shader_compile")!==null?Yt():setTimeout(Yt,10)})};let Ir=null;function ls(Y){Ir&&Ir(Y)}function Ji(){$s.stop()}function cs(){$s.start()}const $s=new LO;$s.setAnimationLoop(ls),typeof self<"u"&&$s.setContext(self),this.setAnimationLoop=function(Y){Ir=Y,Nt.setAnimationLoop(Y),Y===null?$s.stop():$s.start()},Nt.addEventListener("sessionstart",Ji),Nt.addEventListener("sessionend",cs),this.render=function(Y,pt){if(pt!==void 0&&pt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(Y.matrixWorldAutoUpdate===!0&&Y.updateMatrixWorld(),pt.parent===null&&pt.matrixWorldAutoUpdate===!0&&pt.updateMatrixWorld(),Nt.enabled===!0&&Nt.isPresenting===!0&&(Nt.cameraAutoUpdate===!0&&Nt.updateCamera(pt),pt=Nt.getCamera()),Y.isScene===!0&&Y.onBeforeRender(B,Y,pt,z),S=De.get(Y,D.length),S.init(pt),D.push(S),Wt.multiplyMatrices(pt.projectionMatrix,pt.matrixWorldInverse),ct.setFromProjectionMatrix(Wt),Bt=this.localClippingEnabled,wt=Jt.init(this.clippingPlanes,Bt),E=ge.get(Y,w.length),E.init(),w.push(E),Nt.enabled===!0&&Nt.isPresenting===!0){const Yt=B.xr.getDepthSensingMesh();Yt!==null&&Ur(Yt,pt,-1/0,B.sortObjects)}Ur(Y,pt,0,B.sortObjects),E.finish(),B.sortObjects===!0&&E.sort(_t,J),we=Nt.enabled===!1||Nt.isPresenting===!1||Nt.hasDepthSensing()===!1,we&&Se.addToRenderList(E,Y),this.info.render.frame++,wt===!0&&Jt.beginShadows();const Ct=S.state.shadowsArray;_e.render(Ct,Y,pt),wt===!0&&Jt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Rt=E.opaque,yt=E.transmissive;if(S.setupLights(),pt.isArrayCamera){const Yt=pt.cameras;if(yt.length>0)for(let se=0,ae=Yt.length;se<ae;se++){const Ae=Yt[se];oo(Rt,yt,Y,Ae)}we&&Se.render(Y);for(let se=0,ae=Yt.length;se<ae;se++){const Ae=Yt[se];dp(E,Y,Ae,Ae.viewport)}}else yt.length>0&&oo(Rt,yt,Y,pt),we&&Se.render(Y),dp(E,Y,pt);z!==null&&F===0&&($.updateMultisampleRenderTarget(z),$.updateRenderTargetMipmap(z)),Y.isScene===!0&&Y.onAfterRender(B,Y,pt),Gn.resetDefaultState(),U=-1,P=null,D.pop(),D.length>0?(S=D[D.length-1],wt===!0&&Jt.setGlobalState(B.clippingPlanes,S.state.camera)):S=null,w.pop(),w.length>0?E=w[w.length-1]:E=null};function Ur(Y,pt,Ct,Rt){if(Y.visible===!1)return;if(Y.layers.test(pt.layers)){if(Y.isGroup)Ct=Y.renderOrder;else if(Y.isLOD)Y.autoUpdate===!0&&Y.update(pt);else if(Y.isLight)S.pushLight(Y),Y.castShadow&&S.pushShadow(Y);else if(Y.isSprite){if(!Y.frustumCulled||ct.intersectsSprite(Y)){Rt&&ee.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(Wt);const se=Ot.update(Y),ae=Y.material;ae.visible&&E.push(Y,se,ae,Ct,ee.z,null)}}else if((Y.isMesh||Y.isLine||Y.isPoints)&&(!Y.frustumCulled||ct.intersectsObject(Y))){const se=Ot.update(Y),ae=Y.material;if(Rt&&(Y.boundingSphere!==void 0?(Y.boundingSphere===null&&Y.computeBoundingSphere(),ee.copy(Y.boundingSphere.center)):(se.boundingSphere===null&&se.computeBoundingSphere(),ee.copy(se.boundingSphere.center)),ee.applyMatrix4(Y.matrixWorld).applyMatrix4(Wt)),Array.isArray(ae)){const Ae=se.groups;for(let Ge=0,Oe=Ae.length;Ge<Oe;Ge++){const Ce=Ae[Ge],pn=ae[Ce.materialIndex];pn&&pn.visible&&E.push(Y,se,pn,Ct,ee.z,Ce)}}else ae.visible&&E.push(Y,se,ae,Ct,ee.z,null)}}const Yt=Y.children;for(let se=0,ae=Yt.length;se<ae;se++)Ur(Yt[se],pt,Ct,Rt)}function dp(Y,pt,Ct,Rt){const yt=Y.opaque,Yt=Y.transmissive,se=Y.transparent;S.setupLightsView(Ct),wt===!0&&Jt.setGlobalState(B.clippingPlanes,Ct),Rt&&Gt.viewport(X.copy(Rt)),yt.length>0&&mr(yt,pt,Ct),Yt.length>0&&mr(Yt,pt,Ct),se.length>0&&mr(se,pt,Ct),Gt.buffers.depth.setTest(!0),Gt.buffers.depth.setMask(!0),Gt.buffers.color.setMask(!0),Gt.setPolygonOffset(!1)}function oo(Y,pt,Ct,Rt){if((Ct.isScene===!0?Ct.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[Rt.id]===void 0&&(S.state.transmissionRenderTarget[Rt.id]=new Ds(1,1,{generateMipmaps:!0,type:Ft.has("EXT_color_buffer_half_float")||Ft.has("EXT_color_buffer_float")?i0:Ws,minFilter:Tl,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Fn.workingColorSpace}));const Yt=S.state.transmissionRenderTarget[Rt.id],se=Rt.viewport||X;Yt.setSize(se.z*B.transmissionResolutionScale,se.w*B.transmissionResolutionScale);const ae=B.getRenderTarget();B.setRenderTarget(Yt),B.getClearColor(ut),dt=B.getClearAlpha(),dt<1&&B.setClearColor(16777215,.5),B.clear(),we&&Se.render(Ct);const Ae=B.toneMapping;B.toneMapping=Rc;const Ge=Rt.viewport;if(Rt.viewport!==void 0&&(Rt.viewport=void 0),S.setupLightsView(Rt),wt===!0&&Jt.setGlobalState(B.clippingPlanes,Rt),mr(Y,Ct,Rt),$.updateMultisampleRenderTarget(Yt),$.updateRenderTargetMipmap(Yt),Ft.has("WEBGL_multisampled_render_to_texture")===!1){let Oe=!1;for(let Ce=0,pn=pt.length;Ce<pn;Ce++){const In=pt[Ce],Mi=In.object,yn=In.geometry,bn=In.material,Ie=In.group;if(bn.side===La&&Mi.layers.test(Rt.layers)){const Ri=bn.side;bn.side=qs,bn.needsUpdate=!0,lo(Mi,Ct,Rt,yn,bn,Ie),bn.side=Ri,bn.needsUpdate=!0,Oe=!0}}Oe===!0&&($.updateMultisampleRenderTarget(Yt),$.updateRenderTargetMipmap(Yt))}B.setRenderTarget(ae),B.setClearColor(ut,dt),Ge!==void 0&&(Rt.viewport=Ge),B.toneMapping=Ae}function mr(Y,pt,Ct){const Rt=pt.isScene===!0?pt.overrideMaterial:null;for(let yt=0,Yt=Y.length;yt<Yt;yt++){const se=Y[yt],ae=se.object,Ae=se.geometry,Ge=se.group;let Oe=se.material;Oe.allowOverride===!0&&Rt!==null&&(Oe=Rt),ae.layers.test(Ct.layers)&&lo(ae,pt,Ct,Ae,Oe,Ge)}}function lo(Y,pt,Ct,Rt,yt,Yt){Y.onBeforeRender(B,pt,Ct,Rt,yt,Yt),Y.modelViewMatrix.multiplyMatrices(Ct.matrixWorldInverse,Y.matrixWorld),Y.normalMatrix.getNormalMatrix(Y.modelViewMatrix),yt.onBeforeRender(B,pt,Ct,Rt,Y,Yt),yt.transparent===!0&&yt.side===La&&yt.forceSinglePass===!1?(yt.side=qs,yt.needsUpdate=!0,B.renderBufferDirect(Ct,pt,Rt,yt,Y,Yt),yt.side=Lc,yt.needsUpdate=!0,B.renderBufferDirect(Ct,pt,Rt,yt,Y,Yt),yt.side=La):B.renderBufferDirect(Ct,pt,Rt,yt,Y,Yt),Y.onAfterRender(B,pt,Ct,Rt,yt,Yt)}function ti(Y,pt,Ct){pt.isScene!==!0&&(pt=Ye);const Rt=qt.get(Y),yt=S.state.lights,Yt=S.state.shadowsArray,se=yt.state.version,ae=ne.getParameters(Y,yt.state,Yt,pt,Ct),Ae=ne.getProgramCacheKey(ae);let Ge=Rt.programs;Rt.environment=Y.isMeshStandardMaterial?pt.environment:null,Rt.fog=pt.fog,Rt.envMap=(Y.isMeshStandardMaterial?vt:Q).get(Y.envMap||Rt.environment),Rt.envMapRotation=Rt.environment!==null&&Y.envMap===null?pt.environmentRotation:Y.envMapRotation,Ge===void 0&&(Y.addEventListener("dispose",qe),Ge=new Map,Rt.programs=Ge);let Oe=Ge.get(Ae);if(Oe!==void 0){if(Rt.currentProgram===Oe&&Rt.lightsStateVersion===se)return uo(Y,ae),Oe}else ae.uniforms=ne.getUniforms(Y),Y.onBeforeCompile(ae,B),Oe=ne.acquireProgram(ae,Ae),Ge.set(Ae,Oe),Rt.uniforms=ae.uniforms;const Ce=Rt.uniforms;return(!Y.isShaderMaterial&&!Y.isRawShaderMaterial||Y.clipping===!0)&&(Ce.clippingPlanes=Jt.uniform),uo(Y,ae),Rt.needsLights=Zi(Y),Rt.lightsStateVersion=se,Rt.needsLights&&(Ce.ambientLightColor.value=yt.state.ambient,Ce.lightProbe.value=yt.state.probe,Ce.directionalLights.value=yt.state.directional,Ce.directionalLightShadows.value=yt.state.directionalShadow,Ce.spotLights.value=yt.state.spot,Ce.spotLightShadows.value=yt.state.spotShadow,Ce.rectAreaLights.value=yt.state.rectArea,Ce.ltc_1.value=yt.state.rectAreaLTC1,Ce.ltc_2.value=yt.state.rectAreaLTC2,Ce.pointLights.value=yt.state.point,Ce.pointLightShadows.value=yt.state.pointShadow,Ce.hemisphereLights.value=yt.state.hemi,Ce.directionalShadowMap.value=yt.state.directionalShadowMap,Ce.directionalShadowMatrix.value=yt.state.directionalShadowMatrix,Ce.spotShadowMap.value=yt.state.spotShadowMap,Ce.spotLightMatrix.value=yt.state.spotLightMatrix,Ce.spotLightMap.value=yt.state.spotLightMap,Ce.pointShadowMap.value=yt.state.pointShadowMap,Ce.pointShadowMatrix.value=yt.state.pointShadowMatrix),Rt.currentProgram=Oe,Rt.uniformsList=null,Oe}function co(Y){if(Y.uniformsList===null){const pt=Y.currentProgram.getUniforms();Y.uniformsList=B4.seqWithValue(pt.seq,Y.uniforms)}return Y.uniformsList}function uo(Y,pt){const Ct=qt.get(Y);Ct.outputColorSpace=pt.outputColorSpace,Ct.batching=pt.batching,Ct.batchingColor=pt.batchingColor,Ct.instancing=pt.instancing,Ct.instancingColor=pt.instancingColor,Ct.instancingMorph=pt.instancingMorph,Ct.skinning=pt.skinning,Ct.morphTargets=pt.morphTargets,Ct.morphNormals=pt.morphNormals,Ct.morphColors=pt.morphColors,Ct.morphTargetsCount=pt.morphTargetsCount,Ct.numClippingPlanes=pt.numClippingPlanes,Ct.numIntersection=pt.numClipIntersection,Ct.vertexAlphas=pt.vertexAlphas,Ct.vertexTangents=pt.vertexTangents,Ct.toneMapping=pt.toneMapping}function Oc(Y,pt,Ct,Rt,yt){pt.isScene!==!0&&(pt=Ye),$.resetTextureUnits();const Yt=pt.fog,se=Rt.isMeshStandardMaterial?pt.environment:null,ae=z===null?B.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:Fu,Ae=(Rt.isMeshStandardMaterial?vt:Q).get(Rt.envMap||se),Ge=Rt.vertexColors===!0&&!!Ct.attributes.color&&Ct.attributes.color.itemSize===4,Oe=!!Ct.attributes.tangent&&(!!Rt.normalMap||Rt.anisotropy>0),Ce=!!Ct.morphAttributes.position,pn=!!Ct.morphAttributes.normal,In=!!Ct.morphAttributes.color;let Mi=Rc;Rt.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&(Mi=B.toneMapping);const yn=Ct.morphAttributes.position||Ct.morphAttributes.normal||Ct.morphAttributes.color,bn=yn!==void 0?yn.length:0,Ie=qt.get(Rt),Ri=S.state.lights;if(wt===!0&&(Bt===!0||Y!==P)){const ys=Y===P&&Rt.id===U;Jt.setState(Rt,Y,ys)}let Dn=!1;Rt.version===Ie.__version?(Ie.needsLights&&Ie.lightsStateVersion!==Ri.state.version||Ie.outputColorSpace!==ae||yt.isBatchedMesh&&Ie.batching===!1||!yt.isBatchedMesh&&Ie.batching===!0||yt.isBatchedMesh&&Ie.batchingColor===!0&&yt.colorTexture===null||yt.isBatchedMesh&&Ie.batchingColor===!1&&yt.colorTexture!==null||yt.isInstancedMesh&&Ie.instancing===!1||!yt.isInstancedMesh&&Ie.instancing===!0||yt.isSkinnedMesh&&Ie.skinning===!1||!yt.isSkinnedMesh&&Ie.skinning===!0||yt.isInstancedMesh&&Ie.instancingColor===!0&&yt.instanceColor===null||yt.isInstancedMesh&&Ie.instancingColor===!1&&yt.instanceColor!==null||yt.isInstancedMesh&&Ie.instancingMorph===!0&&yt.morphTexture===null||yt.isInstancedMesh&&Ie.instancingMorph===!1&&yt.morphTexture!==null||Ie.envMap!==Ae||Rt.fog===!0&&Ie.fog!==Yt||Ie.numClippingPlanes!==void 0&&(Ie.numClippingPlanes!==Jt.numPlanes||Ie.numIntersection!==Jt.numIntersection)||Ie.vertexAlphas!==Ge||Ie.vertexTangents!==Oe||Ie.morphTargets!==Ce||Ie.morphNormals!==pn||Ie.morphColors!==In||Ie.toneMapping!==Mi||Ie.morphTargetsCount!==bn)&&(Dn=!0):(Dn=!0,Ie.__version=Rt.version);let Bs=Ie.currentProgram;Dn===!0&&(Bs=ti(Rt,pt,yt));let Yo=!1,ri=!1,Wo=!1;const ei=Bs.getUniforms(),Os=Ie.uniforms;if(Gt.useProgram(Bs.program)&&(Yo=!0,ri=!0,Wo=!0),Rt.id!==U&&(U=Rt.id,ri=!0),Yo||P!==Y){Gt.buffers.depth.getReversed()?(Ut.copy(Y.projectionMatrix),Gz(Ut),kz(Ut),ei.setValue(Z,"projectionMatrix",Ut)):ei.setValue(Z,"projectionMatrix",Y.projectionMatrix),ei.setValue(Z,"viewMatrix",Y.matrixWorldInverse);const _s=ei.map.cameraPosition;_s!==void 0&&_s.setValue(Z,ve.setFromMatrixPosition(Y.matrixWorld)),Vt.logarithmicDepthBuffer&&ei.setValue(Z,"logDepthBufFC",2/(Math.log(Y.far+1)/Math.LN2)),(Rt.isMeshPhongMaterial||Rt.isMeshToonMaterial||Rt.isMeshLambertMaterial||Rt.isMeshBasicMaterial||Rt.isMeshStandardMaterial||Rt.isShaderMaterial)&&ei.setValue(Z,"isOrthographic",Y.isOrthographicCamera===!0),P!==Y&&(P=Y,ri=!0,Wo=!0)}if(yt.isSkinnedMesh){ei.setOptional(Z,yt,"bindMatrix"),ei.setOptional(Z,yt,"bindMatrixInverse");const ys=yt.skeleton;ys&&(ys.boneTexture===null&&ys.computeBoneTexture(),ei.setValue(Z,"boneTexture",ys.boneTexture,$))}yt.isBatchedMesh&&(ei.setOptional(Z,yt,"batchingTexture"),ei.setValue(Z,"batchingTexture",yt._matricesTexture,$),ei.setOptional(Z,yt,"batchingIdTexture"),ei.setValue(Z,"batchingIdTexture",yt._indirectTexture,$),ei.setOptional(Z,yt,"batchingColorTexture"),yt._colorsTexture!==null&&ei.setValue(Z,"batchingColorTexture",yt._colorsTexture,$));const $i=Ct.morphAttributes;if(($i.position!==void 0||$i.normal!==void 0||$i.color!==void 0)&&Te.update(yt,Ct,Bs),(ri||Ie.receiveShadow!==yt.receiveShadow)&&(Ie.receiveShadow=yt.receiveShadow,ei.setValue(Z,"receiveShadow",yt.receiveShadow)),Rt.isMeshGouraudMaterial&&Rt.envMap!==null&&(Os.envMap.value=Ae,Os.flipEnvMap.value=Ae.isCubeTexture&&Ae.isRenderTargetTexture===!1?-1:1),Rt.isMeshStandardMaterial&&Rt.envMap===null&&pt.environment!==null&&(Os.envMapIntensity.value=pt.environmentIntensity),ri&&(ei.setValue(Z,"toneMappingExposure",B.toneMappingExposure),Ie.needsLights&&Ol(Os,Wo),Yt&&Rt.fog===!0&&te.refreshFogUniforms(Os,Yt),te.refreshMaterialUniforms(Os,Rt,nt,tt,S.state.transmissionRenderTarget[Y.id]),B4.upload(Z,co(Ie),Os,$)),Rt.isShaderMaterial&&Rt.uniformsNeedUpdate===!0&&(B4.upload(Z,co(Ie),Os,$),Rt.uniformsNeedUpdate=!1),Rt.isSpriteMaterial&&ei.setValue(Z,"center",yt.center),ei.setValue(Z,"modelViewMatrix",yt.modelViewMatrix),ei.setValue(Z,"normalMatrix",yt.normalMatrix),ei.setValue(Z,"modelMatrix",yt.matrixWorld),Rt.isShaderMaterial||Rt.isRawShaderMaterial){const ys=Rt.uniformsGroups;for(let _s=0,gr=ys.length;_s<gr;_s++){const Ko=ys[_s];mt.update(Ko,Bs),mt.bind(Ko,Bs)}}return Bs}function Ol(Y,pt){Y.ambientLightColor.needsUpdate=pt,Y.lightProbe.needsUpdate=pt,Y.directionalLights.needsUpdate=pt,Y.directionalLightShadows.needsUpdate=pt,Y.pointLights.needsUpdate=pt,Y.pointLightShadows.needsUpdate=pt,Y.spotLights.needsUpdate=pt,Y.spotLightShadows.needsUpdate=pt,Y.rectAreaLights.needsUpdate=pt,Y.hemisphereLights.needsUpdate=pt}function Zi(Y){return Y.isMeshLambertMaterial||Y.isMeshToonMaterial||Y.isMeshPhongMaterial||Y.isMeshStandardMaterial||Y.isShadowMaterial||Y.isShaderMaterial&&Y.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(Y,pt,Ct){const Rt=qt.get(Y);Rt.__autoAllocateDepthBuffer=Y.resolveDepthBuffer===!1,Rt.__autoAllocateDepthBuffer===!1&&(Rt.__useRenderToTexture=!1),qt.get(Y.texture).__webglTexture=pt,qt.get(Y.depthTexture).__webglTexture=Rt.__autoAllocateDepthBuffer?void 0:Ct,Rt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Y,pt){const Ct=qt.get(Y);Ct.__webglFramebuffer=pt,Ct.__useDefaultFramebuffer=pt===void 0};const cf=Z.createFramebuffer();this.setRenderTarget=function(Y,pt=0,Ct=0){z=Y,I=pt,F=Ct;let Rt=!0,yt=null,Yt=!1,se=!1;if(Y){const Ae=qt.get(Y);if(Ae.__useDefaultFramebuffer!==void 0)Gt.bindFramebuffer(Z.FRAMEBUFFER,null),Rt=!1;else if(Ae.__webglFramebuffer===void 0)$.setupRenderTarget(Y);else if(Ae.__hasExternalTextures)$.rebindTextures(Y,qt.get(Y.texture).__webglTexture,qt.get(Y.depthTexture).__webglTexture);else if(Y.depthBuffer){const Ce=Y.depthTexture;if(Ae.__boundDepthTexture!==Ce){if(Ce!==null&&qt.has(Ce)&&(Y.width!==Ce.image.width||Y.height!==Ce.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$.setupDepthRenderbuffer(Y)}}const Ge=Y.texture;(Ge.isData3DTexture||Ge.isDataArrayTexture||Ge.isCompressedArrayTexture)&&(se=!0);const Oe=qt.get(Y).__webglFramebuffer;Y.isWebGLCubeRenderTarget?(Array.isArray(Oe[pt])?yt=Oe[pt][Ct]:yt=Oe[pt],Yt=!0):Y.samples>0&&$.useMultisampledRTT(Y)===!1?yt=qt.get(Y).__webglMultisampledFramebuffer:Array.isArray(Oe)?yt=Oe[Ct]:yt=Oe,X.copy(Y.viewport),lt.copy(Y.scissor),it=Y.scissorTest}else X.copy(ot).multiplyScalar(nt).floor(),lt.copy(xt).multiplyScalar(nt).floor(),it=Et;if(Ct!==0&&(yt=cf),Gt.bindFramebuffer(Z.FRAMEBUFFER,yt)&&Rt&&Gt.drawBuffers(Y,yt),Gt.viewport(X),Gt.scissor(lt),Gt.setScissorTest(it),Yt){const Ae=qt.get(Y.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Ae.__webglTexture,Ct)}else if(se){const Ae=qt.get(Y.texture),Ge=pt;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Ae.__webglTexture,Ct,Ge)}else if(Y!==null&&Ct!==0){const Ae=qt.get(Y.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,Ae.__webglTexture,Ct)}U=-1},this.readRenderTargetPixels=function(Y,pt,Ct,Rt,yt,Yt,se){if(!(Y&&Y.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ae=qt.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&se!==void 0&&(ae=ae[se]),ae){Gt.bindFramebuffer(Z.FRAMEBUFFER,ae);try{const Ae=Y.texture,Ge=Ae.format,Oe=Ae.type;if(!Vt.textureFormatReadable(Ge)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Vt.textureTypeReadable(Oe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pt>=0&&pt<=Y.width-Rt&&Ct>=0&&Ct<=Y.height-yt&&Z.readPixels(pt,Ct,Rt,yt,He.convert(Ge),He.convert(Oe),Yt)}finally{const Ae=z!==null?qt.get(z).__webglFramebuffer:null;Gt.bindFramebuffer(Z.FRAMEBUFFER,Ae)}}},this.readRenderTargetPixelsAsync=async function(Y,pt,Ct,Rt,yt,Yt,se){if(!(Y&&Y.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ae=qt.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&se!==void 0&&(ae=ae[se]),ae)if(pt>=0&&pt<=Y.width-Rt&&Ct>=0&&Ct<=Y.height-yt){Gt.bindFramebuffer(Z.FRAMEBUFFER,ae);const Ae=Y.texture,Ge=Ae.format,Oe=Ae.type;if(!Vt.textureFormatReadable(Ge))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Vt.textureTypeReadable(Oe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ce=Z.createBuffer();Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Ce),Z.bufferData(Z.PIXEL_PACK_BUFFER,Yt.byteLength,Z.STREAM_READ),Z.readPixels(pt,Ct,Rt,yt,He.convert(Ge),He.convert(Oe),0);const pn=z!==null?qt.get(z).__webglFramebuffer:null;Gt.bindFramebuffer(Z.FRAMEBUFFER,pn);const In=Z.fenceSync(Z.SYNC_GPU_COMMANDS_COMPLETE,0);return Z.flush(),await zz(Z,In,4),Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Ce),Z.getBufferSubData(Z.PIXEL_PACK_BUFFER,0,Yt),Z.deleteBuffer(Ce),Z.deleteSync(In),Yt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Y,pt=null,Ct=0){const Rt=Math.pow(2,-Ct),yt=Math.floor(Y.image.width*Rt),Yt=Math.floor(Y.image.height*Rt),se=pt!==null?pt.x:0,ae=pt!==null?pt.y:0;$.setTexture2D(Y,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,Ct,0,0,se,ae,yt,Yt),Gt.unbindTexture()};const uf=Z.createFramebuffer(),ho=Z.createFramebuffer();this.copyTextureToTexture=function(Y,pt,Ct=null,Rt=null,yt=0,Yt=null){Yt===null&&(yt!==0?(L4("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Yt=yt,yt=0):Yt=0);let se,ae,Ae,Ge,Oe,Ce,pn,In,Mi;const yn=Y.isCompressedTexture?Y.mipmaps[Yt]:Y.image;if(Ct!==null)se=Ct.max.x-Ct.min.x,ae=Ct.max.y-Ct.min.y,Ae=Ct.isBox3?Ct.max.z-Ct.min.z:1,Ge=Ct.min.x,Oe=Ct.min.y,Ce=Ct.isBox3?Ct.min.z:0;else{const $i=Math.pow(2,-yt);se=Math.floor(yn.width*$i),ae=Math.floor(yn.height*$i),Y.isDataArrayTexture?Ae=yn.depth:Y.isData3DTexture?Ae=Math.floor(yn.depth*$i):Ae=1,Ge=0,Oe=0,Ce=0}Rt!==null?(pn=Rt.x,In=Rt.y,Mi=Rt.z):(pn=0,In=0,Mi=0);const bn=He.convert(pt.format),Ie=He.convert(pt.type);let Ri;pt.isData3DTexture?($.setTexture3D(pt,0),Ri=Z.TEXTURE_3D):pt.isDataArrayTexture||pt.isCompressedArrayTexture?($.setTexture2DArray(pt,0),Ri=Z.TEXTURE_2D_ARRAY):($.setTexture2D(pt,0),Ri=Z.TEXTURE_2D),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,pt.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pt.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,pt.unpackAlignment);const Dn=Z.getParameter(Z.UNPACK_ROW_LENGTH),Bs=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),Yo=Z.getParameter(Z.UNPACK_SKIP_PIXELS),ri=Z.getParameter(Z.UNPACK_SKIP_ROWS),Wo=Z.getParameter(Z.UNPACK_SKIP_IMAGES);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,yn.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,yn.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Ge),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Oe),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Ce);const ei=Y.isDataArrayTexture||Y.isData3DTexture,Os=pt.isDataArrayTexture||pt.isData3DTexture;if(Y.isDepthTexture){const $i=qt.get(Y),ys=qt.get(pt),_s=qt.get($i.__renderTarget),gr=qt.get(ys.__renderTarget);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,_s.__webglFramebuffer),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,gr.__webglFramebuffer);for(let Ko=0;Ko<Ae;Ko++)ei&&(Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,qt.get(Y).__webglTexture,yt,Ce+Ko),Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,qt.get(pt).__webglTexture,Yt,Mi+Ko)),Z.blitFramebuffer(Ge,Oe,se,ae,pn,In,se,ae,Z.DEPTH_BUFFER_BIT,Z.NEAREST);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,null),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else if(yt!==0||Y.isRenderTargetTexture||qt.has(Y)){const $i=qt.get(Y),ys=qt.get(pt);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,uf),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,ho);for(let _s=0;_s<Ae;_s++)ei?Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,$i.__webglTexture,yt,Ce+_s):Z.framebufferTexture2D(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,$i.__webglTexture,yt),Os?Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,ys.__webglTexture,Yt,Mi+_s):Z.framebufferTexture2D(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,ys.__webglTexture,Yt),yt!==0?Z.blitFramebuffer(Ge,Oe,se,ae,pn,In,se,ae,Z.COLOR_BUFFER_BIT,Z.NEAREST):Os?Z.copyTexSubImage3D(Ri,Yt,pn,In,Mi+_s,Ge,Oe,se,ae):Z.copyTexSubImage2D(Ri,Yt,pn,In,Ge,Oe,se,ae);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,null),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else Os?Y.isDataTexture||Y.isData3DTexture?Z.texSubImage3D(Ri,Yt,pn,In,Mi,se,ae,Ae,bn,Ie,yn.data):pt.isCompressedArrayTexture?Z.compressedTexSubImage3D(Ri,Yt,pn,In,Mi,se,ae,Ae,bn,yn.data):Z.texSubImage3D(Ri,Yt,pn,In,Mi,se,ae,Ae,bn,Ie,yn):Y.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,Yt,pn,In,se,ae,bn,Ie,yn.data):Y.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,Yt,pn,In,yn.width,yn.height,bn,yn.data):Z.texSubImage2D(Z.TEXTURE_2D,Yt,pn,In,se,ae,bn,Ie,yn);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,Dn),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,Bs),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Yo),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,ri),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Wo),Yt===0&&pt.generateMipmaps&&Z.generateMipmap(Ri),Gt.unbindTexture()},this.copyTextureToTexture3D=function(Y,pt,Ct=null,Rt=null,yt=0){return L4('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Y,pt,Ct,Rt,yt)},this.initRenderTarget=function(Y){qt.get(Y).__webglFramebuffer===void 0&&$.setupRenderTarget(Y)},this.initTexture=function(Y){Y.isCubeTexture?$.setTextureCube(Y,0):Y.isData3DTexture?$.setTexture3D(Y,0):Y.isDataArrayTexture||Y.isCompressedArrayTexture?$.setTexture2DArray(Y,0):$.setTexture2D(Y,0),Gt.unbindTexture()},this.resetState=function(){I=0,F=0,z=null,Gt.reset(),Gn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Cl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=Fn._getDrawingBufferColorSpace(t),e.unpackColorSpace=Fn._getUnpackColorSpace()}}const Zq=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Tw,AddEquation:md,AddOperation:hB,AdditiveAnimationBlendMode:Nw,AdditiveBlending:b5,AgXToneMapping:gB,AlphaFormat:Lw,AlwaysCompare:DB,AlwaysDepth:_3,AlwaysStencilFunc:T5,AmbientLight:gO,AnimationAction:TO,AnimationClip:Qg,AnimationLoader:mk,AnimationMixer:f7,AnimationObjectGroup:zk,AnimationUtils:hk,ArcCurve:XB,ArrayCamera:SO,ArrowHelper:cV,AttachedBindMode:M5,Audio:EO,AudioAnalyser:Lk,AudioContext:l7,AudioListener:Ck,AudioLoader:Ek,AxesHelper:uV,BackSide:qs,BasicDepthPacking:op,BasicShadowMap:jD,BatchedMesh:VB,Bone:sM,BooleanKeyframeTrack:r0,Box2:Kk,Box3:Or,Box3Helper:oV,BoxGeometry:s0,BoxHelper:aV,BufferAttribute:zn,BufferGeometry:$e,BufferGeometryLoader:xO,ByteType:Cw,Cache:Kh,Camera:Cx,CameraHelper:rV,CanvasTexture:OG,CapsuleGeometry:lM,CatmullRomCurve3:qB,CineonToneMapping:pB,CircleGeometry:cM,ClampToEdgeWrapping:Ho,Clock:c7,Color:oe,ColorKeyframeTrack:n7,ColorManagement:Fn,CompressedArrayTexture:DG,CompressedCubeTexture:BG,CompressedTexture:oM,CompressedTextureLoader:gk,ConeGeometry:Ox,ConstantAlphaFactor:lB,ConstantColorFactor:aB,Controls:fV,CubeCamera:FB,CubeReflectionMapping:sf,CubeRefractionMapping:Zd,CubeTexture:wx,CubeTextureLoader:vk,CubeUVReflectionMapping:xy,CubicBezierCurve:Xw,CubicBezierCurve3:YB,CubicInterpolant:hO,CullFaceBack:x5,CullFaceFront:QD,CullFaceFrontBack:VH,CullFaceNone:VD,Curve:Bc,CurvePath:KB,CustomBlending:XD,CustomToneMapping:mB,CylinderGeometry:Bx,Cylindrical:Wk,Data3DTexture:eM,DataArrayTexture:Tx,DataTexture:Uu,DataTextureLoader:yk,DataUtils:iG,DecrementStencilOp:tz,DecrementWrapStencilOp:nz,DefaultLoadingManager:q1,DepthArrayTexture:NG,DepthFormat:cy,DepthStencilFormat:zg,DepthTexture:Dx,DetachedBindMode:yB,DirectionalLight:o7,DirectionalLightHelper:sV,DiscreteInterpolant:fO,DodecahedronGeometry:uM,DoubleSide:La,DstAlphaFactor:eB,DstColorFactor:iB,DynamicCopyUsage:vz,DynamicDrawUsage:hz,DynamicReadUsage:pz,EdgesGeometry:jB,EllipseCurve:hM,EqualCompare:CB,EqualDepth:x3,EqualStencilFunc:az,EquirectangularReflectionMapping:X_,EquirectangularRefractionMapping:q_,Euler:Vo,EventDispatcher:qo,ExtrudeGeometry:fM,FileLoader:Qo,Float16BufferAttribute:uG,Float32BufferAttribute:Me,FloatType:Oa,Fog:iM,FogExp2:nM,FramebufferTexture:LG,FrontSide:Lc,Frustum:Sy,FrustumArray:rM,GLBufferAttribute:qk,GLSL1:_z,GLSL3:C5,GreaterCompare:wB,GreaterDepth:S3,GreaterEqualCompare:LB,GreaterEqualDepth:b3,GreaterEqualStencilFunc:uz,GreaterStencilFunc:lz,GridHelper:nV,Group:Wh,HalfFloatType:i0,HemisphereLight:mO,HemisphereLightHelper:eV,IcosahedronGeometry:dM,ImageBitmapLoader:bO,ImageLoader:sA,ImageUtils:NB,IncrementStencilOp:$H,IncrementWrapStencilOp:ez,InstancedBufferAttribute:Gg,InstancedBufferGeometry:AO,InstancedInterleavedBuffer:Xk,InstancedMesh:kw,Int16BufferAttribute:lG,Int32BufferAttribute:cG,Int8BufferAttribute:rG,IntType:qE,InterleavedBuffer:Rx,InterleavedBufferAttribute:tp,Interpolant:My,InterpolateDiscrete:uy,InterpolateLinear:hy,InterpolateSmooth:R4,InterpolationSamplingMode:bz,InterpolationSamplingType:xz,InvertStencilOp:iz,KeepStencilOp:Am,KeyframeTrack:Bl,LOD:kB,LatheGeometry:pM,Layers:dy,LessCompare:TB,LessDepth:A3,LessEqualCompare:Uw,LessEqualDepth:Fg,LessEqualStencilFunc:oz,LessStencilFunc:rz,Light:up,LightProbe:_O,Line:rf,Line3:Jk,LineBasicMaterial:aa,LineCurve:qw,LineCurve3:WB,LineDashedMaterial:lO,LineLoop:Vw,LineSegments:Dc,LinearFilter:Ni,LinearInterpolant:e7,LinearMipMapLinearFilter:qH,LinearMipMapNearestFilter:XH,LinearMipmapLinearFilter:Tl,LinearMipmapNearestFilter:K1,LinearSRGBColorSpace:Fu,LinearToneMapping:fB,LinearTransfer:W_,Loader:oa,LoaderUtils:Yd,LoadingManager:i7,LoopOnce:_B,LoopPingPong:xB,LoopRepeat:AB,MOUSE:GH,Material:gs,MaterialLoader:xM,MathUtils:Z_,Matrix2:d7,Matrix3:on,Matrix4:Ne,MaxEquation:KD,Mesh:as,MeshBasicMaterial:zo,MeshDepthMaterial:Zw,MeshDistanceMaterial:$w,MeshLambertMaterial:aO,MeshMatcapMaterial:oO,MeshNormalMaterial:Jw,MeshPhongMaterial:sO,MeshPhysicalMaterial:Dl,MeshStandardMaterial:Ux,MeshToonMaterial:rO,MinEquation:WD,MirroredRepeatWrapping:oy,MixOperation:uB,MultiplyBlending:E5,MultiplyOperation:Ex,NearestFilter:os,NearestMipMapLinearFilter:jH,NearestMipMapNearestFilter:QH,NearestMipmapLinearFilter:Dm,NearestMipmapNearestFilter:XE,NeutralToneMapping:vB,NeverCompare:MB,NeverDepth:y3,NeverStencilFunc:sz,NoBlending:ra,NoColorSpace:Ec,NoToneMapping:Rc,NormalAnimationBlendMode:$E,NormalBlending:Ng,NotEqualCompare:RB,NotEqualDepth:E3,NotEqualStencilFunc:cz,NumberKeyframeTrack:Vg,Object3D:Ln,ObjectLoader:bk,ObjectSpaceNormalMap:EB,OctahedronGeometry:Nx,OneFactor:ZD,OneMinusConstantAlphaFactor:cB,OneMinusConstantColorFactor:oB,OneMinusDstAlphaFactor:nB,OneMinusDstColorFactor:sB,OneMinusSrcAlphaFactor:v3,OneMinusSrcColorFactor:tB,OrthographicCamera:Ty,PCFShadowMap:QE,PCFSoftShadowMap:L_,PMREMGenerator:N5,Path:eE,PerspectiveCamera:Rs,Plane:pd,PlaneGeometry:Ey,PlaneHelper:lV,PointLight:a7,PointLightHelper:$k,Points:Qw,PointsMaterial:aM,PolarGridHelper:iV,PolyhedronGeometry:cp,PositionalAudio:Rk,PropertyBinding:Qn,PropertyMixer:MO,QuadraticBezierCurve:Yw,QuadraticBezierCurve3:Ww,Quaternion:Br,QuaternionKeyframeTrack:ep,QuaternionLinearInterpolant:dO,RED_GREEN_RGTC2_Format:W3,RED_RGTC1_Format:Ow,REVISION:n0,RGBADepthPacking:SB,RGBAFormat:na,RGBAIntegerFormat:ZE,RGBA_ASTC_10x10_Format:V3,RGBA_ASTC_10x5_Format:z3,RGBA_ASTC_10x6_Format:G3,RGBA_ASTC_10x8_Format:k3,RGBA_ASTC_12x10_Format:Q3,RGBA_ASTC_12x12_Format:j3,RGBA_ASTC_4x4_Format:B3,RGBA_ASTC_5x4_Format:O3,RGBA_ASTC_5x5_Format:N3,RGBA_ASTC_6x5_Format:I3,RGBA_ASTC_6x6_Format:U3,RGBA_ASTC_8x5_Format:P3,RGBA_ASTC_8x6_Format:F3,RGBA_ASTC_8x8_Format:H3,RGBA_BPTC_Format:I_,RGBA_ETC2_EAC_Format:D3,RGBA_PVRTC_2BPPV1_Format:w3,RGBA_PVRTC_4BPPV1_Format:C3,RGBA_S3TC_DXT1_Format:B_,RGBA_S3TC_DXT3_Format:O_,RGBA_S3TC_DXT5_Format:N_,RGBDepthPacking:WH,RGBFormat:Dw,RGBIntegerFormat:YH,RGB_BPTC_SIGNED_Format:X3,RGB_BPTC_UNSIGNED_Format:q3,RGB_ETC1_Format:R3,RGB_ETC2_Format:L3,RGB_PVRTC_2BPPV1_Format:T3,RGB_PVRTC_4BPPV1_Format:M3,RGB_S3TC_DXT1_Format:D_,RGDepthPacking:KH,RGFormat:Bw,RGIntegerFormat:JE,RawShaderMaterial:iO,Ray:by,Raycaster:CO,RectAreaLight:vO,RedFormat:KE,RedIntegerFormat:Mx,ReinhardToneMapping:dB,RenderTarget:tM,RenderTarget3D:kk,RenderTargetArray:Vk,RepeatWrapping:$d,ReplaceStencilOp:ZH,ReverseSubtractEquation:YD,RingGeometry:mM,SIGNED_RED_GREEN_RGTC2_Format:K3,SIGNED_RED_RGTC1_Format:Y3,SRGBColorSpace:Kn,SRGBTransfer:fi,Scene:tA,ShaderChunk:fn,ShaderLib:Sc,ShaderMaterial:Ks,ShadowMaterial:nO,Shape:Ug,ShapeGeometry:gM,ShapePath:hV,ShapeUtils:Tc,ShortType:ww,Skeleton:Lx,SkeletonHelper:wO,SkinnedMesh:Gw,Source:jd,Sphere:pr,SphereGeometry:Ix,Spherical:Yk,SphericalHarmonics3:yO,SplineCurve:Kw,SpotLight:r7,SpotLightHelper:Zk,Sprite:GB,SpriteMaterial:zw,SrcAlphaFactor:g3,SrcAlphaSaturateFactor:rB,SrcColorFactor:$D,StaticCopyUsage:gz,StaticDrawUsage:K_,StaticReadUsage:dz,StereoCamera:Mk,StreamCopyUsage:yz,StreamDrawUsage:fz,StreamReadUsage:mz,StringKeyframeTrack:a0,SubtractEquation:qD,SubtractiveBlending:S5,TOUCH:kH,TangentSpaceNormalMap:lp,TetrahedronGeometry:vM,Texture:wi,TextureLoader:pO,TextureUtils:vV,TimestampQuery:Az,TorusGeometry:yM,TorusKnotGeometry:_M,Triangle:so,TriangleFanDrawMode:J3,TriangleStripDrawMode:Iw,TrianglesDrawMode:bB,TubeGeometry:AM,UVMapping:jE,Uint16BufferAttribute:Fw,Uint32BufferAttribute:Hw,Uint8BufferAttribute:aG,Uint8ClampedBufferAttribute:oG,Uniform:xn,UniformsGroup:jk,UniformsLib:pe,UniformsUtils:PB,UnsignedByteType:Ws,UnsignedInt248Type:Hg,UnsignedInt5999Type:Rw,UnsignedIntType:Pu,UnsignedShort4444Type:YE,UnsignedShort5551Type:WE,UnsignedShortType:ly,VSMShadowMap:lc,Vector2:Pt,Vector3:et,Vector4:On,VectorKeyframeTrack:np,VideoFrameTexture:RG,VideoTexture:QB,WebGL3DRenderTarget:qz,WebGLArrayRenderTarget:Xz,WebGLCoordinateSystem:Cl,WebGLCubeRenderTarget:HB,WebGLRenderTarget:Ds,WebGLRenderer:UO,WebGLUtils:IO,WebGPUCoordinateSystem:J_,WebXRController:D4,WireframeGeometry:eO,WrapAroundEnding:Y_,ZeroCurvatureEnding:Bm,ZeroFactor:JD,ZeroSlopeEnding:Om,ZeroStencilOp:JH,createCanvasElement:OB},Symbol.toStringTag,{value:"Module"}));var R8={exports:{}},mh={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LL;function $q(){return LL||(LL=1,mh.ConcurrentRoot=1,mh.ContinuousEventPriority=8,mh.DefaultEventPriority=32,mh.DiscreteEventPriority=2,mh.IdleEventPriority=268435456,mh.LegacyRoot=0,mh.NoEventPriority=0),mh}var DL;function tY(){return DL||(DL=1,R8.exports=$q()),R8.exports}var O4=tY(),L8={exports:{}},D8={},B8={exports:{}},O8={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BL;function eY(){if(BL)return O8;BL=1;var i=e0();function t(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var e=typeof Object.is=="function"?Object.is:t,n=i.useState,s=i.useEffect,r=i.useLayoutEffect,a=i.useDebugValue;function l(g,v){var _=v(),b=n({inst:{value:_,getSnapshot:v}}),T=b[0].inst,E=b[1];return r(function(){T.value=_,T.getSnapshot=v,u(T)&&E({inst:T})},[g,_,v]),s(function(){return u(T)&&E({inst:T}),g(function(){u(T)&&E({inst:T})})},[g]),a(_),_}function u(g){var v=g.getSnapshot;g=g.value;try{var _=v();return!e(g,_)}catch{return!0}}function f(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return O8.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:m,O8}var OL;function nY(){return OL||(OL=1,B8.exports=eY()),B8.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NL;function iY(){if(NL)return D8;NL=1;var i=e0(),t=nY();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var n=typeof Object.is=="function"?Object.is:e,s=t.useSyncExternalStore,r=i.useRef,a=i.useEffect,l=i.useMemo,u=i.useDebugValue;return D8.useSyncExternalStoreWithSelector=function(f,m,g,v,_){var b=r(null);if(b.current===null){var T={hasValue:!1,value:null};b.current=T}else T=b.current;b=l(function(){function S(I){if(!w){if(w=!0,D=I,I=v(I),_!==void 0&&T.hasValue){var F=T.value;if(_(F,I))return B=F}return B=I}if(F=B,n(D,I))return F;var z=v(I);return _!==void 0&&_(F,z)?(D=I,F):(D=I,B=z)}var w=!1,D,B,N=g===void 0?null:g;return[function(){return S(m())},N===null?void 0:function(){return S(N())}]},[m,g,v,_]);var E=s(f,b[0],b[1]);return a(function(){T.hasValue=!0,T.value=E},[E]),u(E),E},D8}var IL;function sY(){return IL||(IL=1,L8.exports=iY()),L8.exports}var rY=sY();const aY=IE(rY),UL=i=>{let t;const e=new Set,n=(f,m)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const v=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),e.forEach(_=>_(t,v))}},s=()=>t,l={setState:n,getState:s,getInitialState:()=>u,subscribe:f=>(e.add(f),()=>e.delete(f))},u=t=i(n,s,l);return l},PO=i=>i?UL(i):UL,{useSyncExternalStoreWithSelector:oY}=aY,lY=i=>i;function cY(i,t=lY,e){const n=oY(i.subscribe,i.getState,i.getInitialState,t,e);return Ba.useDebugValue(n),n}const PL=(i,t)=>{const e=PO(i),n=(s,r=t)=>cY(e,s,r);return Object.assign(n,e),n},uY=(i,t)=>i?PL(i,t):PL;var N8={exports:{}},I8={exports:{}},U8={exports:{}},P8={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FL;function hY(){return FL||(FL=1,function(i){function t(j,tt){var nt=j.length;j.push(tt);t:for(;0<nt;){var _t=nt-1>>>1,J=j[_t];if(0<s(J,tt))j[_t]=tt,j[nt]=J,nt=_t;else break t}}function e(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var tt=j[0],nt=j.pop();if(nt!==tt){j[0]=nt;t:for(var _t=0,J=j.length,ot=J>>>1;_t<ot;){var xt=2*(_t+1)-1,Et=j[xt],ct=xt+1,wt=j[ct];if(0>s(Et,nt))ct<J&&0>s(wt,Et)?(j[_t]=wt,j[ct]=nt,_t=ct):(j[_t]=Et,j[xt]=nt,_t=xt);else if(ct<J&&0>s(wt,nt))j[_t]=wt,j[ct]=nt,_t=ct;else break t}}return tt}function s(j,tt){var nt=j.sortIndex-tt.sortIndex;return nt!==0?nt:j.id-tt.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();i.unstable_now=function(){return a.now()-l}}var u=[],f=[],m=1,g=null,v=3,_=!1,b=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function D(j){for(var tt=e(f);tt!==null;){if(tt.callback===null)n(f);else if(tt.startTime<=j)n(f),tt.sortIndex=tt.expirationTime,t(u,tt);else break;tt=e(f)}}function B(j){if(T=!1,D(j),!b)if(e(u)!==null)b=!0,ut();else{var tt=e(f);tt!==null&&dt(B,tt.startTime-j)}}var N=!1,I=-1,F=5,z=-1;function U(){return!(i.unstable_now()-z<F)}function P(){if(N){var j=i.unstable_now();z=j;var tt=!0;try{t:{b=!1,T&&(T=!1,S(I),I=-1),_=!0;var nt=v;try{e:{for(D(j),g=e(u);g!==null&&!(g.expirationTime>j&&U());){var _t=g.callback;if(typeof _t=="function"){g.callback=null,v=g.priorityLevel;var J=_t(g.expirationTime<=j);if(j=i.unstable_now(),typeof J=="function"){g.callback=J,D(j),tt=!0;break e}g===e(u)&&n(u),D(j)}else n(u);g=e(u)}if(g!==null)tt=!0;else{var ot=e(f);ot!==null&&dt(B,ot.startTime-j),tt=!1}}break t}finally{g=null,v=nt,_=!1}tt=void 0}}finally{tt?X():N=!1}}}var X;if(typeof w=="function")X=function(){w(P)};else if(typeof MessageChannel<"u"){var lt=new MessageChannel,it=lt.port2;lt.port1.onmessage=P,X=function(){it.postMessage(null)}}else X=function(){E(P,0)};function ut(){N||(N=!0,X())}function dt(j,tt){I=E(function(){j(i.unstable_now())},tt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_continueExecution=function(){b||_||(b=!0,ut())},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return e(u)},i.unstable_next=function(j){switch(v){case 1:case 2:case 3:var tt=3;break;default:tt=v}var nt=v;v=tt;try{return j()}finally{v=nt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(j,tt){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var nt=v;v=j;try{return tt()}finally{v=nt}},i.unstable_scheduleCallback=function(j,tt,nt){var _t=i.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?_t+nt:_t):nt=_t,j){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=nt+J,j={id:m++,callback:tt,priorityLevel:j,startTime:nt,expirationTime:J,sortIndex:-1},nt>_t?(j.sortIndex=nt,t(f,j),e(u)===null&&j===e(f)&&(T?(S(I),I=-1):T=!0,dt(B,nt-_t))):(j.sortIndex=J,t(u,j),b||_||(b=!0,ut())),j},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(j){var tt=v;return function(){var nt=v;v=tt;try{return j.apply(this,arguments)}finally{v=nt}}}}(P8)),P8}var HL;function FO(){return HL||(HL=1,U8.exports=hY()),U8.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zL;function fY(){return zL||(zL=1,function(i){i.exports=function(t){function e(h,d,A,C){return new i2(h,d,A,C)}function n(){}function s(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)d+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(h){return h===null||typeof h!="object"?null:(h=Xl&&h[Xl]||h["@@iterator"],typeof h=="function"?h:null)}function a(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===o2?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case Wc:return"Fragment";case za:return"Portal";case N0:return"Profiler";case Gp:return"StrictMode";case I0:return"Suspense";case Lf:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case mo:return(h.displayName||"Context")+".Provider";case r2:return(h._context.displayName||"Context")+".Consumer";case Vp:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case U0:return d=h.displayName||null,d!==null?d:a(h.type)||"Memo";case Ga:d=h._payload,h=h._init;try{return a(h(d))}catch{}}return null}function l(h){if(el===void 0)try{throw Error()}catch(A){var d=A.stack.trim().match(/\n( *(at )?)/);el=d&&d[1]||"",ql=-1<A.stack.indexOf(`
    at`)?" (<anonymous>)":-1<A.stack.indexOf("@")?"@unknown:0:0":""}return`
`+el+h+ql}function u(h,d){if(!h||Qu)return"";Qu=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(d){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(Ke){var ye=Ke}Reflect.construct(h,[],de)}else{try{de.call()}catch(Ke){ye=Ke}h.call(de.prototype)}}else{try{throw Error()}catch(Ke){ye=Ke}(de=h())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(Ke){if(Ke&&ye&&typeof Ke.stack=="string")return[Ke.stack,ye.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=C.DetermineComponentFrameRoot(),K=O[0],at=O[1];if(K&&at){var At=K.split(`
`),Ht=at.split(`
`);for(L=C=0;C<At.length&&!At[C].includes("DetermineComponentFrameRoot");)C++;for(;L<Ht.length&&!Ht[L].includes("DetermineComponentFrameRoot");)L++;if(C===At.length||L===Ht.length)for(C=At.length-1,L=Ht.length-1;1<=C&&0<=L&&At[C]!==Ht[L];)L--;for(;1<=C&&0<=L;C--,L--)if(At[C]!==Ht[L]){if(C!==1||L!==1)do if(C--,L--,0>L||At[C]!==Ht[L]){var $t=`
`+At[C].replace(" at new "," at ");return h.displayName&&$t.includes("<anonymous>")&&($t=$t.replace("<anonymous>",h.displayName)),$t}while(1<=C&&0<=L);break}}}finally{Qu=!1,Error.prepareStackTrace=A}return(A=h?h.displayName||h.name:"")?l(A):""}function f(h){switch(h.tag){case 26:case 27:case 5:return l(h.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return h=u(h.type,!1),h;case 11:return h=u(h.type.render,!1),h;case 1:return h=u(h.type,!0),h;default:return""}}function m(h){try{var d="";do d+=f(h),h=h.return;while(h);return d}catch(A){return`
Error generating stack: `+A.message+`
`+A.stack}}function g(h){var d=h,A=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,(d.flags&4098)!==0&&(A=d.return),h=d.return;while(h)}return d.tag===3?A:null}function v(h){if(g(h)!==h)throw Error(s(188))}function _(h){var d=h.alternate;if(!d){if(d=g(h),d===null)throw Error(s(188));return d!==h?null:h}for(var A=h,C=d;;){var L=A.return;if(L===null)break;var O=L.alternate;if(O===null){if(C=L.return,C!==null){A=C;continue}break}if(L.child===O.child){for(O=L.child;O;){if(O===A)return v(L),h;if(O===C)return v(L),d;O=O.sibling}throw Error(s(188))}if(A.return!==C.return)A=L,C=O;else{for(var K=!1,at=L.child;at;){if(at===A){K=!0,A=L,C=O;break}if(at===C){K=!0,C=L,A=O;break}at=at.sibling}if(!K){for(at=O.child;at;){if(at===A){K=!0,A=O,C=L;break}if(at===C){K=!0,C=O,A=L;break}at=at.sibling}if(!K)throw Error(s(189))}}if(A.alternate!==C)throw Error(s(190))}if(A.tag!==3)throw Error(s(188));return A.stateNode.current===A?h:d}function b(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(d=b(h),d!==null)return d;h=h.sibling}return null}function T(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(d=T(h),d!==null))return d;h=h.sibling}return null}function E(h){return{current:h}}function S(h){0>Jl||(h.current=Vi[Jl],Vi[Jl]=null,Jl--)}function w(h,d){Jl++,Vi[Jl]=h.current,h.current=d}function D(h){return h>>>=0,h===0?32:31-(Yb(h)/Wb|0)|0}function B(h){var d=h&42;if(d!==0)return d;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function N(h,d){var A=h.pendingLanes;if(A===0)return 0;var C=0,L=h.suspendedLanes,O=h.pingedLanes,K=h.warmLanes;h=h.finishedLanes!==0;var at=A&134217727;return at!==0?(A=at&~L,A!==0?C=B(A):(O&=at,O!==0?C=B(O):h||(K=at&~K,K!==0&&(C=B(K))))):(at=A&~L,at!==0?C=B(at):O!==0?C=B(O):h||(K=A&~K,K!==0&&(C=B(K)))),C===0?0:d!==0&&d!==C&&(d&L)===0&&(L=C&-C,K=d&-d,L>=K||L===32&&(K&4194176)!==0)?d:C}function I(h,d){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&d)===0}function F(h,d){switch(h){case 1:case 2:case 4:case 8:return d+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z(){var h=il;return il<<=1,(il&4194176)===0&&(il=128),h}function U(){var h=qu;return qu<<=1,(qu&62914560)===0&&(qu=4194304),h}function P(h){for(var d=[],A=0;31>A;A++)d.push(h);return d}function X(h,d){h.pendingLanes|=d,d!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function lt(h,d,A,C,L,O){var K=h.pendingLanes;h.pendingLanes=A,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=A,h.entangledLanes&=A,h.errorRecoveryDisabledLanes&=A,h.shellSuspendCounter=0;var at=h.entanglements,At=h.expirationTimes,Ht=h.hiddenUpdates;for(A=K&~A;0<A;){var $t=31-br(A),de=1<<$t;at[$t]=0,At[$t]=-1;var ye=Ht[$t];if(ye!==null)for(Ht[$t]=null,$t=0;$t<ye.length;$t++){var Ke=ye[$t];Ke!==null&&(Ke.lane&=-536870913)}A&=~de}C!==0&&it(h,C,0),O!==0&&L===0&&h.tag!==0&&(h.suspendedLanes|=O&~(K&~d))}function it(h,d,A){h.pendingLanes|=d,h.suspendedLanes&=~d;var C=31-br(d);h.entangledLanes|=d,h.entanglements[C]=h.entanglements[C]|1073741824|A&4194218}function ut(h,d){var A=h.entangledLanes|=d;for(h=h.entanglements;A;){var C=31-br(A),L=1<<C;L&d|h[C]&d&&(h[C]|=d),A&=~L}}function dt(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function j(h){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Qi,h,void 0,(h.current.flags&128)===128)}catch{}}function tt(h){if(typeof Zb=="function"&&bs(h),Vr&&typeof Vr.setStrictMode=="function")try{Vr.setStrictMode(Qi,h)}catch{}}function nt(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}function _t(h,d){if(typeof h=="object"&&h!==null){var A=T2.get(h);return A!==void 0?A:(d={value:h,source:d,stack:m(d)},T2.set(h,d),d)}return{value:h,source:d,stack:m(d)}}function J(h,d){Yu[Wu++]=Hf,Yu[Wu++]=Ku,Ku=h,Hf=d}function ot(h,d,A){fa[da++]=yo,fa[da++]=_o,fa[da++]=nu,nu=h;var C=yo;h=_o;var L=32-br(C)-1;C&=~(1<<L),A+=1;var O=32-br(d)+L;if(30<O){var K=L-L%5;O=(C&(1<<K)-1).toString(32),C>>=K,L-=K,yo=1<<32-br(d)+L|A<<L|C,_o=O+h}else yo=1<<O|A<<L|C,_o=h}function xt(h){h.return!==null&&(J(h,1),ot(h,1,0))}function Et(h){for(;h===Ku;)Ku=Yu[--Wu],Yu[Wu]=null,Hf=Yu[--Wu],Yu[Wu]=null;for(;h===nu;)nu=fa[--da],fa[da]=null,_o=fa[--da],fa[da]=null,yo=fa[--da],fa[da]=null}function ct(h,d){w(sl,d),w(zf,h),w(hs,null),h=db(d),S(hs),w(hs,h)}function wt(){S(hs),S(zf),S(sl)}function Bt(h){h.memoizedState!==null&&w(Ju,h);var d=hs.current,A=Nf(d,h.type);d!==A&&(w(zf,h),w(hs,A))}function Ut(h){zf.current===h&&(S(hs),S(zf)),Ju.current===h&&(S(Ju),Ar?go._currentValue=Jc:go._currentValue2=Jc)}function Wt(h){var d=Error(s(418,""));throw re(_t(d,h)),Zp}function ve(h,d){if(!Hs)throw Error(s(175));Fb(h.stateNode,h.type,h.memoizedProps,d,h)||Wt(h)}function ee(h){for(zs=h.return;zs;)switch(zs.tag){case 3:case 27:Ss=!0;return;case 5:case 13:Ss=!1;return;default:zs=zs.return}}function Ye(h){if(!Hs||h!==zs)return!1;if(!Bn)return ee(h),Bn=!0,!1;var d=!1;if(ai?h.tag!==3&&h.tag!==27&&(h.tag!==5||j0(h.type)&&!en(h.type,h.memoizedProps))&&(d=!0):h.tag!==3&&(h.tag!==5||j0(h.type)&&!en(h.type,h.memoizedProps))&&(d=!0),d&&Gs&&Wt(h),ee(h),h.tag===13){if(!Hs)throw Error(s(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));Gs=zb(h)}else Gs=zs?b2(h.stateNode):null;return!0}function we(){Hs&&(Gs=zs=null,Bn=!1)}function re(h){Qa===null?Qa=[h]:Qa.push(h)}function Z(){for(var h=Zu,d=Ao=Zu=0;d<h;){var A=ja[d];ja[d++]=null;var C=ja[d];ja[d++]=null;var L=ja[d];ja[d++]=null;var O=ja[d];if(ja[d++]=null,C!==null&&L!==null){var K=C.pending;K===null?L.next=L:(L.next=K.next,K.next=L),C.pending=L}O!==0&&Gt(A,L,O)}}function Kt(h,d,A,C){ja[Zu++]=h,ja[Zu++]=d,ja[Zu++]=A,ja[Zu++]=C,Ao|=C,h.lanes|=C,h=h.alternate,h!==null&&(h.lanes|=C)}function Ft(h,d,A,C){return Kt(h,d,A,C),be(h)}function Vt(h,d){return Kt(h,null,null,d),be(h)}function Gt(h,d,A){h.lanes|=A;var C=h.alternate;C!==null&&(C.lanes|=A);for(var L=!1,O=h.return;O!==null;)O.childLanes|=A,C=O.alternate,C!==null&&(C.childLanes|=A),O.tag===22&&(h=O.stateNode,h===null||h._visibility&1||(L=!0)),h=O,O=O.return;L&&d!==null&&h.tag===3&&(O=h.stateNode,L=31-br(A),O=O.hiddenUpdates,h=O[L],h===null?O[L]=[d]:h.push(d),d.lane=A|536870912)}function be(h){if(50<Wf)throw Wf=0,a1=null,Error(s(185));for(var d=h.return;d!==null;)h=d,d=h.return;return h.tag===3?h.stateNode:null}function qt(h){h!==Zl&&h.next===null&&(Zl===null?$p=Zl=h:Zl=Zl.next=h),pi=!0,$u||($u=!0,Ot(Q))}function $(h,d){if(!C2&&pi){C2=!0;do for(var A=!1,C=$p;C!==null;){if(h!==0){var L=C.pendingLanes;if(L===0)var O=0;else{var K=C.suspendedLanes,at=C.pingedLanes;O=(1<<31-br(42|h)+1)-1,O&=L&~(K&~at),O=O&201326677?O&201326677|1:O?O|2:0}O!==0&&(A=!0,jt(C,O))}else O=Sn,O=N(C,C===qn?O:0),(O&3)===0||I(C,O)||(A=!0,jt(C,O));C=C.next}while(A);C2=!1}}function Q(){pi=$u=!1;var h=0;Gf!==0&&(vb()&&(h=Gf),Gf=0);for(var d=Va(),A=null,C=$p;C!==null;){var L=C.next,O=vt(C,d);O===0?(C.next=null,A===null?$p=L:A.next=L,L===null&&(Zl=A)):(A=C,(h!==0||(O&3)!==0)&&(pi=!0)),C=L}$(h)}function vt(h,d){for(var A=h.suspendedLanes,C=h.pingedLanes,L=h.expirationTimes,O=h.pendingLanes&-62914561;0<O;){var K=31-br(O),at=1<<K,At=L[K];At===-1?((at&A)===0||(at&C)!==0)&&(L[K]=F(at,d)):At<=d&&(h.expiredLanes|=at),O&=~at}if(d=qn,A=Sn,A=N(h,h===d?A:0),C=h.callbackNode,A===0||h===d&&ni===2||h.cancelPendingCommit!==null)return C!==null&&C!==null&&W0(C),h.callbackNode=null,h.callbackPriority=0;if((A&3)===0||I(h,A)){if(d=A&-A,d===h.callbackPriority)return d;switch(C!==null&&W0(C),dt(A)){case 2:case 8:A=Jb;break;case 32:A=Z0;break;case 268435456:A=iT;break;default:A=Z0}return C=It.bind(null,h),A=Jp(A,C),h.callbackPriority=d,h.callbackNode=A,d}return C!==null&&C!==null&&W0(C),h.callbackPriority=2,h.callbackNode=null,2}function It(h,d){var A=h.callbackNode;if(po()&&h.callbackNode!==A)return null;var C=Sn;return C=N(h,h===qn?C:0),C===0?null:(Qc(h,C,d),vt(h,Va()),h.callbackNode!=null&&h.callbackNode===A?It.bind(null,h):null)}function jt(h,d){if(po())return null;Qc(h,d,!0)}function Ot(h){f2?Kl(function(){(Pn&6)!==0?Jp(J0,h):h()}):Jp(J0,h)}function ne(){return Gf===0&&(Gf=z()),Gf}function te(h,d){if(kf===null){var A=kf=[];th=0,pa=ne(),eh={status:"pending",value:void 0,then:function(C){A.push(C)}}}return th++,d.then(ge,ge),d}function ge(){if(--th===0&&kf!==null){eh!==null&&(eh.status="fulfilled");var h=kf;kf=null,pa=0,eh=null;for(var d=0;d<h.length;d++)(0,h[d])()}}function De(h,d){var A=[],C={status:"pending",value:null,reason:null,then:function(L){A.push(L)}};return h.then(function(){C.status="fulfilled",C.value=d;for(var L=0;L<A.length;L++)(0,A[L])(d)},function(L){for(C.status="rejected",C.reason=L,L=0;L<A.length;L++)(0,A[L])(void 0)}),C}function Jt(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _e(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Se(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Te(h,d,A){var C=h.updateQueue;if(C===null)return null;if(C=C.shared,(Pn&2)!==0){var L=C.pending;return L===null?d.next=d:(d.next=L.next,L.next=d),C.pending=d,d=be(h),Gt(h,null,A),d}return Kt(h,C,d,A),be(h)}function ce(h,d,A){if(d=d.updateQueue,d!==null&&(d=d.shared,(A&4194176)!==0)){var C=d.lanes;C&=h.pendingLanes,A|=C,d.lanes=A,ut(h,A)}}function rn(h,d){var A=h.updateQueue,C=h.alternate;if(C!==null&&(C=C.updateQueue,A===C)){var L=null,O=null;if(A=A.firstBaseUpdate,A!==null){do{var K={lane:A.lane,tag:A.tag,payload:A.payload,callback:null,next:null};O===null?L=O=K:O=O.next=K,A=A.next}while(A!==null);O===null?L=O=d:O=O.next=d}else L=O=d;A={baseState:C.baseState,firstBaseUpdate:L,lastBaseUpdate:O,shared:C.shared,callbacks:C.callbacks},h.updateQueue=A;return}h=A.lastBaseUpdate,h===null?A.firstBaseUpdate=d:h.next=d,A.lastBaseUpdate=d}function He(){if(nh){var h=eh;if(h!==null)throw h}}function Gn(h,d,A,C){nh=!1;var L=h.updateQueue;$l=!1;var O=L.firstBaseUpdate,K=L.lastBaseUpdate,at=L.shared.pending;if(at!==null){L.shared.pending=null;var At=at,Ht=At.next;At.next=null,K===null?O=Ht:K.next=Ht,K=At;var $t=h.alternate;$t!==null&&($t=$t.updateQueue,at=$t.lastBaseUpdate,at!==K&&(at===null?$t.firstBaseUpdate=Ht:at.next=Ht,$t.lastBaseUpdate=At))}if(O!==null){var de=L.baseState;K=0,$t=Ht=At=null,at=O;do{var ye=at.lane&-536870913,Ke=ye!==at.lane;if(Ke?(Sn&ye)===ye:(C&ye)===ye){ye!==0&&ye===pa&&(nh=!0),$t!==null&&($t=$t.next={lane:0,tag:at.tag,payload:at.payload,callback:null,next:null});t:{var ba=h,hu=at;ye=d;var fu=A;switch(hu.tag){case 1:if(ba=hu.payload,typeof ba=="function"){de=ba.call(fu,de,ye);break t}de=ba;break t;case 3:ba.flags=ba.flags&-65537|128;case 0:if(ba=hu.payload,ye=typeof ba=="function"?ba.call(fu,de,ye):ba,ye==null)break t;de=O0({},de,ye);break t;case 2:$l=!0}}ye=at.callback,ye!==null&&(h.flags|=64,Ke&&(h.flags|=8192),Ke=L.callbacks,Ke===null?L.callbacks=[ye]:Ke.push(ye))}else Ke={lane:ye,tag:at.tag,payload:at.payload,callback:at.callback,next:null},$t===null?(Ht=$t=Ke,At=de):$t=$t.next=Ke,K|=ye;if(at=at.next,at===null){if(at=L.shared.pending,at===null)break;Ke=at,at=Ke.next,Ke.next=null,L.lastBaseUpdate=Ke,L.shared.pending=null}}while(!0);$t===null&&(At=de),L.baseState=At,L.firstBaseUpdate=Ht,L.lastBaseUpdate=$t,O===null&&(L.shared.lanes=0),Aa|=K,h.lanes=K,h.memoizedState=de}}function mt(h,d){if(typeof h!="function")throw Error(s(191,h));h.call(d)}function ue(h,d){var A=h.callbacks;if(A!==null)for(h.callbacks=null,h=0;h<A.length;h++)mt(A[h],d)}function Nt(h,d){if(Qr(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var A=Object.keys(h),C=Object.keys(d);if(A.length!==C.length)return!1;for(C=0;C<A.length;C++){var L=A[C];if(!rl.call(d,L)||!Qr(h[L],d[L]))return!1}return!0}function Qt(h){return h=h.status,h==="fulfilled"||h==="rejected"}function fe(){}function he(h,d,A){switch(A=h[A],A===void 0?h.push(d):A!==d&&(d.then(fe,fe),d=A),d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===Vf?Error(s(483)):h;default:if(typeof d.status=="string")d.then(fe,fe);else{if(h=qn,h!==null&&100<h.shellSuspendCounter)throw Error(s(482));h=d,h.status="pending",h.then(function(C){if(d.status==="pending"){var L=d;L.status="fulfilled",L.value=C}},function(C){if(d.status==="pending"){var L=d;L.status="rejected",L.reason=C}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===Vf?Error(s(483)):h}throw iu=d,Vf}}function qe(){if(iu===null)throw Error(s(459));var h=iu;return iu=null,h}function Jn(h){var d=ru;return ru+=1,su===null&&(su=[]),he(su,h,d)}function Ei(h,d){d=d.props.ref,h.ref=d!==void 0?d:null}function Cn(h,d){throw d.$$typeof===KM?Error(s(525)):(h=Object.prototype.toString.call(d),Error(s(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h)))}function Ir(h){var d=h._init;return d(h._payload)}function ls(h){function d(Mt,ht){if(h){var Dt=Mt.deletions;Dt===null?(Mt.deletions=[ht],Mt.flags|=16):Dt.push(ht)}}function A(Mt,ht){if(!h)return null;for(;ht!==null;)d(Mt,ht),ht=ht.sibling;return null}function C(Mt){for(var ht=new Map;Mt!==null;)Mt.key!==null?ht.set(Mt.key,Mt):ht.set(Mt.index,Mt),Mt=Mt.sibling;return ht}function L(Mt,ht){return Mt=Ha(Mt,ht),Mt.index=0,Mt.sibling=null,Mt}function O(Mt,ht,Dt){return Mt.index=Dt,h?(Dt=Mt.alternate,Dt!==null?(Dt=Dt.index,Dt<ht?(Mt.flags|=33554434,ht):Dt):(Mt.flags|=33554434,ht)):(Mt.flags|=1048576,ht)}function K(Mt){return h&&Mt.alternate===null&&(Mt.flags|=33554434),Mt}function at(Mt,ht,Dt,Zt){return ht===null||ht.tag!==6?(ht=D0(Dt,Mt.mode,Zt),ht.return=Mt,ht):(ht=L(ht,Dt),ht.return=Mt,ht)}function At(Mt,ht,Dt,Zt){var Re=Dt.type;return Re===Wc?$t(Mt,ht,Dt.props.children,Zt,Dt.key):ht!==null&&(ht.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ga&&Ir(Re)===ht.type)?(ht=L(ht,Dt.props),Ei(ht,Dt),ht.return=Mt,ht):(ht=tl(Dt.type,Dt.key,Dt.props,null,Mt.mode,Zt),Ei(ht,Dt),ht.return=Mt,ht)}function Ht(Mt,ht,Dt,Zt){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==Dt.containerInfo||ht.stateNode.implementation!==Dt.implementation?(ht=s2(Dt,Mt.mode,Zt),ht.return=Mt,ht):(ht=L(ht,Dt.children||[]),ht.return=Mt,ht)}function $t(Mt,ht,Dt,Zt,Re){return ht===null||ht.tag!==7?(ht=Ii(Dt,Mt.mode,Zt,Re),ht.return=Mt,ht):(ht=L(ht,Dt),ht.return=Mt,ht)}function de(Mt,ht,Dt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return ht=D0(""+ht,Mt.mode,Dt),ht.return=Mt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case zp:return Dt=tl(ht.type,ht.key,ht.props,null,Mt.mode,Dt),Ei(Dt,ht),Dt.return=Mt,Dt;case za:return ht=s2(ht,Mt.mode,Dt),ht.return=Mt,ht;case Ga:var Zt=ht._init;return ht=Zt(ht._payload),de(Mt,ht,Dt)}if(Df(ht)||r(ht))return ht=Ii(ht,Mt.mode,Dt,null),ht.return=Mt,ht;if(typeof ht.then=="function")return de(Mt,Jn(ht),Dt);if(ht.$$typeof===mo)return de(Mt,Mp(Mt,ht),Dt);Cn(Mt,ht)}return null}function ye(Mt,ht,Dt,Zt){var Re=ht!==null?ht.key:null;if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return Re!==null?null:at(Mt,ht,""+Dt,Zt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case zp:return Dt.key===Re?At(Mt,ht,Dt,Zt):null;case za:return Dt.key===Re?Ht(Mt,ht,Dt,Zt):null;case Ga:return Re=Dt._init,Dt=Re(Dt._payload),ye(Mt,ht,Dt,Zt)}if(Df(Dt)||r(Dt))return Re!==null?null:$t(Mt,ht,Dt,Zt,null);if(typeof Dt.then=="function")return ye(Mt,ht,Jn(Dt),Zt);if(Dt.$$typeof===mo)return ye(Mt,ht,Mp(Mt,Dt),Zt);Cn(Mt,Dt)}return null}function Ke(Mt,ht,Dt,Zt,Re){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint")return Mt=Mt.get(Dt)||null,at(ht,Mt,""+Zt,Re);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case zp:return Mt=Mt.get(Zt.key===null?Dt:Zt.key)||null,At(ht,Mt,Zt,Re);case za:return Mt=Mt.get(Zt.key===null?Dt:Zt.key)||null,Ht(ht,Mt,Zt,Re);case Ga:var bi=Zt._init;return Zt=bi(Zt._payload),Ke(Mt,ht,Dt,Zt,Re)}if(Df(Zt)||r(Zt))return Mt=Mt.get(Dt)||null,$t(ht,Mt,Zt,Re,null);if(typeof Zt.then=="function")return Ke(Mt,ht,Dt,Jn(Zt),Re);if(Zt.$$typeof===mo)return Ke(Mt,ht,Dt,Mp(ht,Zt),Re);Cn(ht,Zt)}return null}function ba(Mt,ht,Dt,Zt){for(var Re=null,bi=null,je=ht,Vn=ht=0,ji=null;je!==null&&Vn<Dt.length;Vn++){je.index>Vn?(ji=je,je=null):ji=je.sibling;var _n=ye(Mt,je,Dt[Vn],Zt);if(_n===null){je===null&&(je=ji);break}h&&je&&_n.alternate===null&&d(Mt,je),ht=O(_n,ht,Vn),bi===null?Re=_n:bi.sibling=_n,bi=_n,je=ji}if(Vn===Dt.length)return A(Mt,je),Bn&&J(Mt,Vn),Re;if(je===null){for(;Vn<Dt.length;Vn++)je=de(Mt,Dt[Vn],Zt),je!==null&&(ht=O(je,ht,Vn),bi===null?Re=je:bi.sibling=je,bi=je);return Bn&&J(Mt,Vn),Re}for(je=C(je);Vn<Dt.length;Vn++)ji=Ke(je,Mt,Vn,Dt[Vn],Zt),ji!==null&&(h&&ji.alternate!==null&&je.delete(ji.key===null?Vn:ji.key),ht=O(ji,ht,Vn),bi===null?Re=ji:bi.sibling=ji,bi=ji);return h&&je.forEach(function(dl){return d(Mt,dl)}),Bn&&J(Mt,Vn),Re}function hu(Mt,ht,Dt,Zt){if(Dt==null)throw Error(s(151));for(var Re=null,bi=null,je=ht,Vn=ht=0,ji=null,_n=Dt.next();je!==null&&!_n.done;Vn++,_n=Dt.next()){je.index>Vn?(ji=je,je=null):ji=je.sibling;var dl=ye(Mt,je,_n.value,Zt);if(dl===null){je===null&&(je=ji);break}h&&je&&dl.alternate===null&&d(Mt,je),ht=O(dl,ht,Vn),bi===null?Re=dl:bi.sibling=dl,bi=dl,je=ji}if(_n.done)return A(Mt,je),Bn&&J(Mt,Vn),Re;if(je===null){for(;!_n.done;Vn++,_n=Dt.next())_n=de(Mt,_n.value,Zt),_n!==null&&(ht=O(_n,ht,Vn),bi===null?Re=_n:bi.sibling=_n,bi=_n);return Bn&&J(Mt,Vn),Re}for(je=C(je);!_n.done;Vn++,_n=Dt.next())_n=Ke(je,Mt,Vn,_n.value,Zt),_n!==null&&(h&&_n.alternate!==null&&je.delete(_n.key===null?Vn:_n.key),ht=O(_n,ht,Vn),bi===null?Re=_n:bi.sibling=_n,bi=_n);return h&&je.forEach(function(o1){return d(Mt,o1)}),Bn&&J(Mt,Vn),Re}function fu(Mt,ht,Dt,Zt){if(typeof Dt=="object"&&Dt!==null&&Dt.type===Wc&&Dt.key===null&&(Dt=Dt.props.children),typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case zp:t:{for(var Re=Dt.key;ht!==null;){if(ht.key===Re){if(Re=Dt.type,Re===Wc){if(ht.tag===7){A(Mt,ht.sibling),Zt=L(ht,Dt.props.children),Zt.return=Mt,Mt=Zt;break t}}else if(ht.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ga&&Ir(Re)===ht.type){A(Mt,ht.sibling),Zt=L(ht,Dt.props),Ei(Zt,Dt),Zt.return=Mt,Mt=Zt;break t}A(Mt,ht);break}else d(Mt,ht);ht=ht.sibling}Dt.type===Wc?(Zt=Ii(Dt.props.children,Mt.mode,Zt,Dt.key),Zt.return=Mt,Mt=Zt):(Zt=tl(Dt.type,Dt.key,Dt.props,null,Mt.mode,Zt),Ei(Zt,Dt),Zt.return=Mt,Mt=Zt)}return K(Mt);case za:t:{for(Re=Dt.key;ht!==null;){if(ht.key===Re)if(ht.tag===4&&ht.stateNode.containerInfo===Dt.containerInfo&&ht.stateNode.implementation===Dt.implementation){A(Mt,ht.sibling),Zt=L(ht,Dt.children||[]),Zt.return=Mt,Mt=Zt;break t}else{A(Mt,ht);break}else d(Mt,ht);ht=ht.sibling}Zt=s2(Dt,Mt.mode,Zt),Zt.return=Mt,Mt=Zt}return K(Mt);case Ga:return Re=Dt._init,Dt=Re(Dt._payload),fu(Mt,ht,Dt,Zt)}if(Df(Dt))return ba(Mt,ht,Dt,Zt);if(r(Dt)){if(Re=r(Dt),typeof Re!="function")throw Error(s(150));return Dt=Re.call(Dt),hu(Mt,ht,Dt,Zt)}if(typeof Dt.then=="function")return fu(Mt,ht,Jn(Dt),Zt);if(Dt.$$typeof===mo)return fu(Mt,ht,Mp(Mt,Dt),Zt);Cn(Mt,Dt)}return typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint"?(Dt=""+Dt,ht!==null&&ht.tag===6?(A(Mt,ht.sibling),Zt=L(ht,Dt),Zt.return=Mt,Mt=Zt):(A(Mt,ht),Zt=D0(Dt,Mt.mode,Zt),Zt.return=Mt,Mt=Zt),K(Mt)):A(Mt,ht)}return function(Mt,ht,Dt,Zt){try{ru=0;var Re=fu(Mt,ht,Dt,Zt);return su=null,Re}catch(je){if(je===Vf)throw je;var bi=e(29,je,null,Mt.mode);return bi.lanes=Zt,bi.return=Mt,bi}finally{}}}function Ji(h,d){h=ir,w(Qf,h),w(mi,d),ir=h|d.baseLanes}function cs(){w(Qf,ir),w(mi,mi.current)}function $s(){ir=Qf.current,S(mi),S(Qf)}function Ur(h){var d=h.alternate;w(fs,fs.current&1),w(ma,h),oi===null&&(d===null||mi.current!==null||d.memoizedState!==null)&&(oi=h)}function dp(h){if(h.tag===22){if(w(fs,fs.current),w(ma,h),oi===null){var d=h.alternate;d!==null&&d.memoizedState!==null&&(oi=h)}}else oo()}function oo(){w(fs,fs.current),w(ma,ma.current)}function mr(h){S(ma),oi===h&&(oi=null),S(fs)}function lo(h){for(var d=h;d!==null;){if(d.tag===13){var A=d.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||k0(A)||V0(A)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function ti(){throw Error(s(321))}function co(h,d){if(d===null)return!1;for(var A=0;A<d.length&&A<h.length;A++)if(!Qr(h[A],d[A]))return!1;return!0}function uo(h,d,A,C,L,O){return tc=O,ln=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Qe.H=h===null||h.memoizedState===null?lu:Sr,ou=!1,O=A(C,L),ou=!1,ih&&(O=Ol(d,A,C,L)),Oc(h),O}function Oc(h){Qe.H=Ui;var d=Fe!==null&&Fe.next!==null;if(tc=0,Un=Fe=ln=null,Xa=!1,sh=0,Es=null,d)throw Error(s(300));h===null||li||(h=h.dependencies,h!==null&&Ep(h)&&(li=!0))}function Ol(h,d,A,C){ln=h;var L=0;do{if(ih&&(Es=null),sh=0,ih=!1,25<=L)throw Error(s(301));if(L+=1,Un=Fe=null,h.updateQueue!=null){var O=h.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Qe.H=ga,O=d(A,C)}while(ih);return O}function Zi(){var h=Qe.H,d=h.useState()[0];return d=typeof d.then=="function"?Ct(d):d,h=h.useState()[0],(Fe!==null?Fe.memoizedState:null)!==h&&(ln.flags|=1024),d}function cf(){var h=$0!==0;return $0=0,h}function uf(h,d,A){d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~A}function ho(h){if(Xa){for(h=h.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}Xa=!1}tc=0,Un=Fe=ln=null,ih=!1,sh=$0=0,Es=null}function Y(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?ln.memoizedState=Un=h:Un=Un.next=h,Un}function pt(){if(Fe===null){var h=ln.alternate;h=h!==null?h.memoizedState:null}else h=Fe.next;var d=Un===null?ln.memoizedState:Un.next;if(d!==null)Un=d,Fe=h;else{if(h===null)throw ln.alternate===null?Error(s(467)):Error(s(310));Fe=h,h={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Un===null?ln.memoizedState=Un=h:Un=Un.next=h}return Un}function Ct(h){var d=sh;return sh+=1,Es===null&&(Es=[]),h=he(Es,h,d),d=ln,(Un===null?d.memoizedState:Un.next)===null&&(d=d.alternate,Qe.H=d===null||d.memoizedState===null?lu:Sr),h}function Rt(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Ct(h);if(h.$$typeof===mo)return Is(h)}throw Error(s(438,String(h)))}function yt(h){var d=null,A=ln.updateQueue;if(A!==null&&(d=A.memoCache),d==null){var C=ln.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(d={data:C.data.map(function(L){return L.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),A===null&&(A=t1(),ln.updateQueue=A),A.memoCache=d,A=d.data[d.index],A===void 0)for(A=d.data[d.index]=Array(h),C=0;C<h;C++)A[C]=fb;return d.index++,A}function Yt(h,d){return typeof d=="function"?d(h):d}function se(h){var d=pt();return ae(d,Fe,h)}function ae(h,d,A){var C=h.queue;if(C===null)throw Error(s(311));C.lastRenderedReducer=A;var L=h.baseQueue,O=C.pending;if(O!==null){if(L!==null){var K=L.next;L.next=O.next,O.next=K}d.baseQueue=L=O,C.pending=null}if(O=h.baseState,L===null)h.memoizedState=O;else{d=L.next;var at=K=null,At=null,Ht=d,$t=!1;do{var de=Ht.lane&-536870913;if(de!==Ht.lane?(Sn&de)===de:(tc&de)===de){var ye=Ht.revertLane;if(ye===0)At!==null&&(At=At.next={lane:0,revertLane:0,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null}),de===pa&&($t=!0);else if((tc&ye)===ye){Ht=Ht.next,ye===pa&&($t=!0);continue}else de={lane:0,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},At===null?(at=At=de,K=O):At=At.next=de,ln.lanes|=ye,Aa|=ye;de=Ht.action,ou&&A(O,de),O=Ht.hasEagerState?Ht.eagerState:A(O,de)}else ye={lane:de,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},At===null?(at=At=ye,K=O):At=At.next=ye,ln.lanes|=de,Aa|=de;Ht=Ht.next}while(Ht!==null&&Ht!==d);if(At===null?K=O:At.next=at,!Qr(O,h.memoizedState)&&(li=!0,$t&&(A=eh,A!==null)))throw A;h.memoizedState=O,h.baseState=K,h.baseQueue=At,C.lastRenderedState=O}return L===null&&(C.lanes=0),[h.memoizedState,C.dispatch]}function Ae(h){var d=pt(),A=d.queue;if(A===null)throw Error(s(311));A.lastRenderedReducer=h;var C=A.dispatch,L=A.pending,O=d.memoizedState;if(L!==null){A.pending=null;var K=L=L.next;do O=h(O,K.action),K=K.next;while(K!==L);Qr(O,d.memoizedState)||(li=!0),d.memoizedState=O,d.baseQueue===null&&(d.baseState=O),A.lastRenderedState=O}return[O,C]}function Ge(h,d,A){var C=ln,L=pt(),O=Bn;if(O){if(A===void 0)throw Error(s(407));A=A()}else A=d();var K=!Qr((Fe||L).memoizedState,A);if(K&&(L.memoizedState=A,li=!0),L=L.queue,Ry(pn.bind(null,C,L,h),[h]),L.getSnapshot!==d||K||Un!==null&&Un.memoizedState.tag&1){if(C.flags|=2048,gr(9,Ce.bind(null,C,L,A,d),{destroy:void 0},null),qn===null)throw Error(s(349));O||(tc&60)!==0||Oe(C,d,A)}return A}function Oe(h,d,A){h.flags|=16384,h={getSnapshot:d,value:A},d=ln.updateQueue,d===null?(d=t1(),ln.updateQueue=d,d.stores=[h]):(A=d.stores,A===null?d.stores=[h]:A.push(h))}function Ce(h,d,A,C){d.value=A,d.getSnapshot=C,In(d)&&Mi(h)}function pn(h,d,A){return A(function(){In(d)&&Mi(h)})}function In(h){var d=h.getSnapshot;h=h.value;try{var A=d();return!Qr(h,A)}catch{return!0}}function Mi(h){var d=Vt(h,2);d!==null&&xs(d,h,2)}function yn(h){var d=Y();if(typeof h=="function"){var A=h;if(h=A(),ou){tt(!0);try{A()}finally{tt(!1)}}}return d.memoizedState=d.baseState=h,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:h},d}function bn(h,d,A,C){return h.baseState=A,ae(h,Fe,typeof C=="function"?C:Yt)}function Ie(h,d,A,C,L){if(_p(h))throw Error(s(485));if(h=d.action,h!==null){var O={payload:L,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){O.listeners.push(K)}};Qe.T!==null?A(!0):O.isTransition=!1,C(O),A=d.pending,A===null?(O.next=d.pending=O,Ri(d,O)):(O.next=A.next,d.pending=A.next=O)}}function Ri(h,d){var A=d.action,C=d.payload,L=h.state;if(d.isTransition){var O=Qe.T,K={};Qe.T=K;try{var at=A(L,C),At=Qe.S;At!==null&&At(K,at),Dn(h,d,at)}catch(Ht){Yo(h,d,Ht)}finally{Qe.T=O}}else try{O=A(L,C),Dn(h,d,O)}catch(Ht){Yo(h,d,Ht)}}function Dn(h,d,A){A!==null&&typeof A=="object"&&typeof A.then=="function"?A.then(function(C){Bs(h,d,C)},function(C){return Yo(h,d,C)}):Bs(h,d,A)}function Bs(h,d,A){d.status="fulfilled",d.value=A,ri(d),h.state=A,d=h.pending,d!==null&&(A=d.next,A===d?h.pending=null:(A=A.next,d.next=A,Ri(h,A)))}function Yo(h,d,A){var C=h.pending;if(h.pending=null,C!==null){C=C.next;do d.status="rejected",d.reason=A,ri(d),d=d.next;while(d!==C)}h.action=null}function ri(h){h=h.listeners;for(var d=0;d<h.length;d++)(0,h[d])()}function Wo(h,d){return d}function ei(h,d){if(Bn){var A=qn.formState;if(A!==null){t:{var C=ln;if(Bn){if(Gs){var L=x2(Gs,Ss);if(L){Gs=b2(L),C=Nb(L);break t}}Wt(C)}C=!1}C&&(d=A[0])}}A=Y(),A.memoizedState=A.baseState=d,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:d},A.queue=C,A=Oy.bind(null,ln,C),C.dispatch=A,C=yn(!1);var O=df.bind(null,ln,!1,C.queue);return C=Y(),L={state:d,dispatch:null,action:h,pending:null},C.queue=L,A=Ie.bind(null,ln,L,O,A),L.dispatch=A,C.memoizedState=h,[d,A,!1]}function Os(h){var d=pt();return $i(d,Fe,h)}function $i(h,d,A){d=ae(h,d,Wo)[0],h=se(Yt)[0],d=typeof d=="object"&&d!==null&&typeof d.then=="function"?Ct(d):d;var C=pt(),L=C.queue,O=L.dispatch;return A!==C.memoizedState&&(ln.flags|=2048,gr(9,ys.bind(null,L,A),{destroy:void 0},null)),[d,O,h]}function ys(h,d){h.action=d}function _s(h){var d=pt(),A=Fe;if(A!==null)return $i(d,A,h);pt(),d=d.memoizedState,A=pt();var C=A.queue.dispatch;return A.memoizedState=h,[d,C,!1]}function gr(h,d,A,C){return h={tag:h,create:d,inst:A,deps:C,next:null},d=ln.updateQueue,d===null&&(d=t1(),ln.updateQueue=d),A=d.lastEffect,A===null?d.lastEffect=h.next=h:(C=A.next,A.next=h,h.next=C,d.lastEffect=h),h}function Ko(){return pt().memoizedState}function pp(h,d,A,C){var L=Y();ln.flags|=h,L.memoizedState=gr(1|d,A,{destroy:void 0},C===void 0?null:C)}function mp(h,d,A,C){var L=pt();C=C===void 0?null:C;var O=L.memoizedState.inst;Fe!==null&&C!==null&&co(C,Fe.memoizedState.deps)?L.memoizedState=gr(d,A,O,C):(ln.flags|=h,L.memoizedState=gr(1|d,A,O,C))}function h0(h,d){pp(8390656,8,h,d)}function Ry(h,d){mp(2048,8,h,d)}function Qx(h,d){return mp(4,2,h,d)}function gp(h,d){return mp(4,4,h,d)}function f0(h,d){if(typeof d=="function"){h=h();var A=d(h);return function(){typeof A=="function"?A():d(null)}}if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function d0(h,d,A){A=A!=null?A.concat([h]):null,mp(4,4,f0.bind(null,d,h),A)}function Nc(){}function zu(h,d){var A=pt();d=d===void 0?null:d;var C=A.memoizedState;return d!==null&&co(d,C[1])?C[0]:(A.memoizedState=[h,d],h)}function Ly(h,d){var A=pt();d=d===void 0?null:d;var C=A.memoizedState;if(d!==null&&co(d,C[1]))return C[0];if(C=h(),ou){tt(!0);try{h()}finally{tt(!1)}}return A.memoizedState=[C,d],C}function vp(h,d,A){return A===void 0||(tc&1073741824)!==0?h.memoizedState=d:(h.memoizedState=A,h=Zy(),ln.lanes|=h,Aa|=h,A)}function Dy(h,d,A,C){return Qr(A,d)?A:mi.current!==null?(h=vp(h,A,C),Qr(h,d)||(li=!0),h):(tc&42)===0?(li=!0,h.memoizedState=A):(h=Zy(),ln.lanes|=h,Aa|=h,d)}function hf(h,d,A,C,L){var O=Wl();er(O!==0&&8>O?O:8);var K=Qe.T,at={};Qe.T=at,df(h,!1,d,A);try{var At=L(),Ht=Qe.S;if(Ht!==null&&Ht(at,At),At!==null&&typeof At=="object"&&typeof At.then=="function"){var $t=De(At,C);Ic(h,d,$t,Gi(h))}else Ic(h,d,C,Gi(h))}catch(de){Ic(h,d,{then:function(){},status:"rejected",reason:de},Gi())}finally{er(O),Qe.T=K}}function Jo(h){var d=h.memoizedState;if(d!==null)return d;d={memoizedState:Jc,baseState:Jc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:Jc},next:null};var A={};return d.next={memoizedState:A,baseState:A,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:A},next:null},h.memoizedState=d,h=h.alternate,h!==null&&(h.memoizedState=d),d}function yp(){return Is(go)}function ff(){return pt().memoizedState}function Nl(){return pt().memoizedState}function By(h){for(var d=h.return;d!==null;){switch(d.tag){case 24:case 3:var A=Gi();h=Se(A);var C=Te(d,h,A);C!==null&&(xs(C,d,A),ce(C,d,A)),d={cache:Hc()},h.payload=d;return}d=d.return}}function p0(h,d,A){var C=Gi();A={lane:C,revertLane:0,action:A,hasEagerState:!1,eagerState:null,next:null},_p(h)?vr(d,A):(A=Ft(h,d,A,C),A!==null&&(xs(A,h,C),Uc(A,d,C)))}function Oy(h,d,A){var C=Gi();Ic(h,d,A,C)}function Ic(h,d,A,C){var L={lane:C,revertLane:0,action:A,hasEagerState:!1,eagerState:null,next:null};if(_p(h))vr(d,L);else{var O=h.alternate;if(h.lanes===0&&(O===null||O.lanes===0)&&(O=d.lastRenderedReducer,O!==null))try{var K=d.lastRenderedState,at=O(K,A);if(L.hasEagerState=!0,L.eagerState=at,Qr(at,K))return Kt(h,d,L,0),qn===null&&Z(),!1}catch{}finally{}if(A=Ft(h,d,L,C),A!==null)return xs(A,h,C),Uc(A,d,C),!0}return!1}function df(h,d,A,C){if(C={lane:2,revertLane:ne(),action:C,hasEagerState:!1,eagerState:null,next:null},_p(h)){if(d)throw Error(s(479))}else d=Ft(h,A,C,2),d!==null&&xs(d,h,2)}function _p(h){var d=h.alternate;return h===ln||d!==null&&d===ln}function vr(h,d){ih=Xa=!0;var A=h.pending;A===null?d.next=d:(d.next=A.next,A.next=d),h.pending=d}function Uc(h,d,A){if((A&4194176)!==0){var C=d.lanes;C&=h.pendingLanes,A|=C,d.lanes=A,ut(h,A)}}function pf(h,d,A,C){d=h.memoizedState,A=A(C,d),A=A==null?d:O0({},d,A),h.memoizedState=A,h.lanes===0&&(h.updateQueue.baseState=A)}function mf(h,d,A,C,L,O,K){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(C,O,K):d.prototype&&d.prototype.isPureReactComponent?!Nt(A,C)||!Nt(L,O):!0}function jx(h,d,A,C){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(A,C),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(A,C),d.state!==h&&ol.enqueueReplaceState(d,d.state,null)}function Il(h,d){var A=d;if("ref"in d){A={};for(var C in d)C!=="ref"&&(A[C]=d[C])}if(h=h.defaultProps){A===d&&(A=O0({},A));for(var L in h)A[L]===void 0&&(A[L]=h[L])}return A}function gf(h,d){try{var A=h.onUncaughtError;A(d.value,{componentStack:d.stack})}catch(C){setTimeout(function(){throw C})}}function vf(h,d,A){try{var C=h.onCaughtError;C(A.value,{componentStack:A.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function yf(h,d,A){return A=Se(A),A.tag=3,A.payload={element:null},A.callback=function(){gf(h,d)},A}function Ny(h){return h=Se(h),h.tag=3,h}function Xx(h,d,A,C){var L=A.type.getDerivedStateFromError;if(typeof L=="function"){var O=C.value;h.payload=function(){return L(O)},h.callback=function(){vf(d,A,C)}}var K=A.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(h.callback=function(){vf(d,A,C),typeof L!="function"&&(cu===null?cu=new Set([this]):cu.add(this));var at=C.stack;this.componentDidCatch(C.value,{componentStack:at!==null?at:""})})}function XM(h,d,A,C,L){if(A.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(d=A.alternate,d!==null&&Sp(d,A,L,!0),A=ma.current,A!==null){switch(A.tag){case 13:return oi===null?Vl():A.alternate===null&&ci===0&&(ci=3),A.flags&=-257,A.flags|=65536,A.lanes=L,C===em?A.flags|=16384:(d=A.updateQueue,d===null?A.updateQueue=new Set([C]):d.add(C),Vu(h,C,L)),!1;case 22:return A.flags|=65536,C===em?A.flags|=16384:(d=A.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([C])},A.updateQueue=d):(A=d.retryQueue,A===null?d.retryQueue=new Set([C]):A.add(C)),Vu(h,C,L)),!1}throw Error(s(435,A.tag))}return Vu(h,C,L),Vl(),!1}if(Bn)return d=ma.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=L,C!==Zp&&(h=Error(s(422),{cause:C}),re(_t(h,A)))):(C!==Zp&&(d=Error(s(423),{cause:C}),re(_t(d,A))),h=h.current.alternate,h.flags|=65536,L&=-L,h.lanes|=L,C=_t(C,A),L=yf(h.stateNode,C,L),rn(h,L),ci!==4&&(ci=2)),!1;var O=Error(s(520),{cause:C});if(O=_t(O,A),ah===null?ah=[O]:ah.push(O),ci!==4&&(ci=2),d===null)return!0;C=_t(C,A),A=d;do{switch(A.tag){case 3:return A.flags|=65536,h=L&-L,A.lanes|=h,h=yf(A.stateNode,C,h),rn(A,h),!1;case 1:if(d=A.type,O=A.stateNode,(A.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(cu===null||!cu.has(O))))return A.flags|=65536,L&=-L,A.lanes|=L,L=Ny(L),Xx(L,h,A,C),rn(A,L),!1}A=A.return}while(A!==null);return!1}function Ns(h,d,A,C){d.child=h===null?al(d,null,A,C):au(d,h.child,A,C)}function m0(h,d,A,C,L){A=A.render;var O=d.ref;if("ref"in C){var K={};for(var at in C)at!=="ref"&&(K[at]=C[at])}else K=C;return Fc(d),C=uo(h,d,A,K,O,L),at=cf(),h!==null&&!li?(uf(h,d,L),Ul(h,d,L)):(Bn&&at&&xt(d),d.flags|=1,Ns(h,d,C,L),d.child)}function qx(h,d,A,C,L){if(h===null){var O=A.type;return typeof O=="function"&&!Up(O)&&O.defaultProps===void 0&&A.compare===null?(d.tag=15,d.type=O,Yx(h,d,O,C,L)):(h=tl(A.type,null,C,d,d.mode,L),h.ref=d.ref,h.return=d,d.child=h)}if(O=h.child,!Hy(h,L)){var K=O.memoizedProps;if(A=A.compare,A=A!==null?A:Nt,A(K,C)&&h.ref===d.ref)return Ul(h,d,L)}return d.flags|=1,h=Ha(O,C),h.ref=d.ref,h.return=d,d.child=h}function Yx(h,d,A,C,L){if(h!==null){var O=h.memoizedProps;if(Nt(O,C)&&h.ref===d.ref)if(li=!1,d.pendingProps=C=O,Hy(h,L))(h.flags&131072)!==0&&(li=!0);else return d.lanes=h.lanes,Ul(h,d,L)}return g0(h,d,A,C,L)}function Wx(h,d,A){var C=d.pendingProps,L=C.children,O=(d.stateNode._pendingVisibility&2)!==0,K=h!==null?h.memoizedState:null;if(Ap(h,d),C.mode==="hidden"||O){if((d.flags&128)!==0){if(C=K!==null?K.baseLanes|A:A,h!==null){for(L=d.child=h.child,O=0;L!==null;)O=O|L.lanes|L.childLanes,L=L.sibling;d.childLanes=O&~C}else d.childLanes=0,d.child=null;return Kx(h,d,C,A)}if((A&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},h!==null&&y0(d,K!==null?K.cachePool:null),K!==null?Ji(d,K):cs(),dp(d);else return d.lanes=d.childLanes=536870912,Kx(h,d,K!==null?K.baseLanes|A:A,A)}else K!==null?(y0(d,K.cachePool),Ji(d,K),oo(),d.memoizedState=null):(h!==null&&y0(d,null),cs(),oo());return Ns(h,d,L,A),d.child}function Kx(h,d,A,C){var L=Gy();return L=L===null?null:{parent:Ar?gi._currentValue:gi._currentValue2,pool:L},d.memoizedState={baseLanes:A,cachePool:L},h!==null&&y0(d,null),cs(),dp(d),h!==null&&Sp(h,d,C,!0),null}function Ap(h,d){var A=d.ref;if(A===null)h!==null&&h.ref!==null&&(d.flags|=2097664);else{if(typeof A!="function"&&typeof A!="object")throw Error(s(284));(h===null||h.ref!==A)&&(d.flags|=2097664)}}function g0(h,d,A,C,L){return Fc(d),A=uo(h,d,A,C,void 0,L),C=cf(),h!==null&&!li?(uf(h,d,L),Ul(h,d,L)):(Bn&&C&&xt(d),d.flags|=1,Ns(h,d,A,L),d.child)}function Jx(h,d,A,C,L,O){return Fc(d),d.updateQueue=null,A=Ol(d,C,A,L),Oc(h),C=cf(),h!==null&&!li?(uf(h,d,O),Ul(h,d,O)):(Bn&&C&&xt(d),d.flags|=1,Ns(h,d,A,O),d.child)}function Zx(h,d,A,C,L){if(Fc(d),d.stateNode===null){var O=eu,K=A.contextType;typeof K=="object"&&K!==null&&(O=Is(K)),O=new A(C,O),d.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=ol,d.stateNode=O,O._reactInternals=d,O=d.stateNode,O.props=C,O.state=d.memoizedState,O.refs={},Jt(d),K=A.contextType,O.context=typeof K=="object"&&K!==null?Is(K):eu,O.state=d.memoizedState,K=A.getDerivedStateFromProps,typeof K=="function"&&(pf(d,A,K,C),O.state=d.memoizedState),typeof A.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(K=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),K!==O.state&&ol.enqueueReplaceState(O,O.state,null),Gn(d,C,O,L),He(),O.state=d.memoizedState),typeof O.componentDidMount=="function"&&(d.flags|=4194308),C=!0}else if(h===null){O=d.stateNode;var at=d.memoizedProps,At=Il(A,at);O.props=At;var Ht=O.context,$t=A.contextType;K=eu,typeof $t=="object"&&$t!==null&&(K=Is($t));var de=A.getDerivedStateFromProps;$t=typeof de=="function"||typeof O.getSnapshotBeforeUpdate=="function",at=d.pendingProps!==at,$t||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(at||Ht!==K)&&jx(d,O,C,K),$l=!1;var ye=d.memoizedState;O.state=ye,Gn(d,C,O,L),He(),Ht=d.memoizedState,at||ye!==Ht||$l?(typeof de=="function"&&(pf(d,A,de,C),Ht=d.memoizedState),(At=$l||mf(d,A,At,C,ye,Ht,K))?($t||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(d.flags|=4194308)):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=C,d.memoizedState=Ht),O.props=C,O.state=Ht,O.context=K,C=At):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),C=!1)}else{O=d.stateNode,_e(h,d),K=d.memoizedProps,$t=Il(A,K),O.props=$t,de=d.pendingProps,ye=O.context,Ht=A.contextType,At=eu,typeof Ht=="object"&&Ht!==null&&(At=Is(Ht)),at=A.getDerivedStateFromProps,(Ht=typeof at=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(K!==de||ye!==At)&&jx(d,O,C,At),$l=!1,ye=d.memoizedState,O.state=ye,Gn(d,C,O,L),He();var Ke=d.memoizedState;K!==de||ye!==Ke||$l||h!==null&&h.dependencies!==null&&Ep(h.dependencies)?(typeof at=="function"&&(pf(d,A,at,C),Ke=d.memoizedState),($t=$l||mf(d,A,$t,C,ye,Ke,At)||h!==null&&h.dependencies!==null&&Ep(h.dependencies))?(Ht||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(C,Ke,At),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(C,Ke,At)),typeof O.componentDidUpdate=="function"&&(d.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof O.componentDidUpdate!="function"||K===h.memoizedProps&&ye===h.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||K===h.memoizedProps&&ye===h.memoizedState||(d.flags|=1024),d.memoizedProps=C,d.memoizedState=Ke),O.props=C,O.state=Ke,O.context=At,C=$t):(typeof O.componentDidUpdate!="function"||K===h.memoizedProps&&ye===h.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||K===h.memoizedProps&&ye===h.memoizedState||(d.flags|=1024),C=!1)}return O=C,Ap(h,d),C=(d.flags&128)!==0,O||C?(O=d.stateNode,A=C&&typeof A.getDerivedStateFromError!="function"?null:O.render(),d.flags|=1,h!==null&&C?(d.child=au(d,h.child,null,L),d.child=au(d,null,A,L)):Ns(h,d,A,L),d.memoizedState=O.state,h=d.child):h=Ul(h,d,L),h}function $x(h,d,A,C){return we(),d.flags|=256,Ns(h,d,A,C),d.child}function Iy(h){return{baseLanes:h,cachePool:ky()}}function xp(h,d,A){return h=h!==null?h.childLanes&~A:0,d&&(h|=xa),h}function tb(h,d,A){var C=d.pendingProps,L=!1,O=(d.flags&128)!==0,K;if((K=O)||(K=h!==null&&h.memoizedState===null?!1:(fs.current&2)!==0),K&&(L=!0,d.flags&=-129),K=(d.flags&32)!==0,d.flags&=-33,h===null){if(Bn){if(L?Ur(d):oo(),Bn){var at=Gs,At;(At=at)&&(at=Pb(at,Ss),at!==null?(d.memoizedState={dehydrated:at,treeContext:nu!==null?{id:yo,overflow:_o}:null,retryLane:536870912},At=e(18,null,null,0),At.stateNode=at,At.return=d,d.child=At,zs=d,Gs=null,At=!0):At=!1),At||Wt(d)}if(at=d.memoizedState,at!==null&&(at=at.dehydrated,at!==null))return V0(at)?d.lanes=16:d.lanes=536870912,null;mr(d)}return at=C.children,C=C.fallback,L?(oo(),L=d.mode,at=Py({mode:"hidden",children:at},L),C=Ii(C,L,A,null),at.return=d,C.return=d,at.sibling=C,d.child=at,L=d.child,L.memoizedState=Iy(A),L.childLanes=xp(h,K,A),d.memoizedState=i1,C):(Ur(d),Uy(d,at))}if(At=h.memoizedState,At!==null&&(at=At.dehydrated,at!==null)){if(O)d.flags&256?(Ur(d),d.flags&=-257,d=v0(h,d,A)):d.memoizedState!==null?(oo(),d.child=h.child,d.flags|=128,d=null):(oo(),L=C.fallback,at=d.mode,C=Py({mode:"visible",children:C.children},at),L=Ii(L,at,A,null),L.flags|=2,C.return=d,L.return=d,C.sibling=L,d.child=C,au(d,h.child,null,A),C=d.child,C.memoizedState=Iy(A),C.childLanes=xp(h,K,A),d.memoizedState=i1,d=L);else if(Ur(d),V0(at))K=Bb(at).digest,C=Error(s(419)),C.stack="",C.digest=K,re({value:C,source:null,stack:null}),d=v0(h,d,A);else if(li||Sp(h,d,A,!1),K=(A&h.childLanes)!==0,li||K){if(K=qn,K!==null){if(C=A&-A,(C&42)!==0)C=1;else switch(C){case 2:C=1;break;case 8:C=4;break;case 32:C=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:C=64;break;case 268435456:C=134217728;break;default:C=0}if(C=(C&(K.suspendedLanes|A))!==0?0:C,C!==0&&C!==At.retryLane)throw At.retryLane=C,Vt(h,C),xs(K,h,C),n1}k0(at)||Vl(),d=v0(h,d,A)}else k0(at)?(d.flags|=128,d.child=h.child,d=Ql.bind(null,h),Ob(at,d),d=null):(h=At.treeContext,Hs&&(Gs=Ub(at),zs=d,Bn=!0,Qa=null,Ss=!1,h!==null&&(fa[da++]=yo,fa[da++]=_o,fa[da++]=nu,yo=h.id,_o=h.overflow,nu=d)),d=Uy(d,C.children),d.flags|=4096);return d}return L?(oo(),L=C.fallback,at=d.mode,At=h.child,O=At.sibling,C=Ha(At,{mode:"hidden",children:C.children}),C.subtreeFlags=At.subtreeFlags&31457280,O!==null?L=Ha(O,L):(L=Ii(L,at,A,null),L.flags|=2),L.return=d,C.return=d,C.sibling=L,d.child=C,C=L,L=d.child,at=h.child.memoizedState,at===null?at=Iy(A):(At=at.cachePool,At!==null?(O=Ar?gi._currentValue:gi._currentValue2,At=At.parent!==O?{parent:O,pool:O}:At):At=ky(),at={baseLanes:at.baseLanes|A,cachePool:At}),L.memoizedState=at,L.childLanes=xp(h,K,A),d.memoizedState=i1,C):(Ur(d),A=h.child,h=A.sibling,A=Ha(A,{mode:"visible",children:C.children}),A.return=d,A.sibling=null,h!==null&&(K=d.deletions,K===null?(d.deletions=[h],d.flags|=16):K.push(h)),d.child=A,d.memoizedState=null,A)}function Uy(h,d){return d=Py({mode:"visible",children:d},h.mode),d.return=h,h.child=d}function Py(h,d){return Fp(h,d,0,null)}function v0(h,d,A){return au(d,h.child,null,A),h=Uy(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function eb(h,d,A){h.lanes|=d;var C=h.alternate;C!==null&&(C.lanes|=d),bp(h.return,d,A)}function Fy(h,d,A,C,L){var O=h.memoizedState;O===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:C,tail:A,tailMode:L}:(O.isBackwards=d,O.rendering=null,O.renderingStartTime=0,O.last=C,O.tail=A,O.tailMode=L)}function nb(h,d,A){var C=d.pendingProps,L=C.revealOrder,O=C.tail;if(Ns(h,d,C.children,A),C=fs.current,(C&2)!==0)C=C&1|2,d.flags|=128;else{if(h!==null&&(h.flags&128)!==0)t:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&eb(h,A,d);else if(h.tag===19)eb(h,A,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break t;for(;h.sibling===null;){if(h.return===null||h.return===d)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}C&=1}switch(w(fs,C),L){case"forwards":for(A=d.child,L=null;A!==null;)h=A.alternate,h!==null&&lo(h)===null&&(L=A),A=A.sibling;A=L,A===null?(L=d.child,d.child=null):(L=A.sibling,A.sibling=null),Fy(d,!1,L,A,O);break;case"backwards":for(A=null,L=d.child,d.child=null;L!==null;){if(h=L.alternate,h!==null&&lo(h)===null){d.child=L;break}h=L.sibling,L.sibling=A,A=L,L=h}Fy(d,!0,A,null,O);break;case"together":Fy(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Ul(h,d,A){if(h!==null&&(d.dependencies=h.dependencies),Aa|=d.lanes,(A&d.childLanes)===0)if(h!==null){if(Sp(h,d,A,!1),(A&d.childLanes)===0)return null}else return null;if(h!==null&&d.child!==h.child)throw Error(s(153));if(d.child!==null){for(h=d.child,A=Ha(h,h.pendingProps),d.child=A,A.return=d;h.sibling!==null;)h=h.sibling,A=A.sibling=Ha(h,h.pendingProps),A.return=d;A.sibling=null}return d.child}function Hy(h,d){return(h.lanes&d)!==0?!0:(h=h.dependencies,!!(h!==null&&Ep(h)))}function qM(h,d,A){switch(d.tag){case 3:ct(d,d.stateNode.containerInfo),Pc(d,gi,h.memoizedState.cache),we();break;case 27:case 5:Bt(d);break;case 4:ct(d,d.stateNode.containerInfo);break;case 10:Pc(d,d.type,d.memoizedProps.value);break;case 13:var C=d.memoizedState;if(C!==null)return C.dehydrated!==null?(Ur(d),d.flags|=128,null):(A&d.child.childLanes)!==0?tb(h,d,A):(Ur(d),h=Ul(h,d,A),h!==null?h.sibling:null);Ur(d);break;case 19:var L=(h.flags&128)!==0;if(C=(A&d.childLanes)!==0,C||(Sp(h,d,A,!1),C=(A&d.childLanes)!==0),L){if(C)return nb(h,d,A);d.flags|=128}if(L=d.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),w(fs,fs.current),C)break;return null;case 22:case 23:return d.lanes=0,Wx(h,d,A);case 24:Pc(d,gi,h.memoizedState.cache)}return Ul(h,d,A)}function ib(h,d,A){if(h!==null)if(h.memoizedProps!==d.pendingProps)li=!0;else{if(!Hy(h,A)&&(d.flags&128)===0)return li=!1,qM(h,d,A);li=(h.flags&131072)!==0}else li=!1,Bn&&(d.flags&1048576)!==0&&ot(d,Hf,d.index);switch(d.lanes=0,d.tag){case 16:t:{h=d.pendingProps;var C=d.elementType,L=C._init;if(C=L(C._payload),d.type=C,typeof C=="function")Up(C)?(h=Il(C,h),d.tag=1,d=Zx(null,d,C,h,A)):(d.tag=0,d=g0(null,d,C,h,A));else{if(C!=null){if(L=C.$$typeof,L===Vp){d.tag=11,d=m0(null,d,C,h,A);break t}else if(L===U0){d.tag=14,d=qx(null,d,C,h,A);break t}}throw d=a(C)||C,Error(s(306,d,""))}}return d;case 0:return g0(h,d,d.type,d.pendingProps,A);case 1:return C=d.type,L=Il(C,d.pendingProps),Zx(h,d,C,L,A);case 3:t:{if(ct(d,d.stateNode.containerInfo),h===null)throw Error(s(387));var O=d.pendingProps;L=d.memoizedState,C=L.element,_e(h,d),Gn(d,O,null,A);var K=d.memoizedState;if(O=K.cache,Pc(d,gi,O),O!==L.cache&&Gu(d,[gi],A,!0),He(),O=K.element,Hs&&L.isDehydrated)if(L={element:O,isDehydrated:!1,cache:K.cache},d.updateQueue.baseState=L,d.memoizedState=L,d.flags&256){d=$x(h,d,O,A);break t}else if(O!==C){C=_t(Error(s(424)),d),re(C),d=$x(h,d,O,A);break t}else for(Hs&&(Gs=Ib(d.stateNode.containerInfo),zs=d,Bn=!0,Qa=null,Ss=!0),A=al(d,null,O,A),d.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(we(),O===C){d=Ul(h,d,A);break t}Ns(h,d,O,A)}d=d.child}return d;case 26:if(ha)return Ap(h,d),h===null?(A=M2(d.type,null,d.pendingProps,null))?d.memoizedState=A:Bn||(d.stateNode=Y0(d.type,d.pendingProps,sl.current,d)):d.memoizedState=M2(d.type,h.memoizedProps,d.pendingProps,h.memoizedState),null;case 27:if(ai)return Bt(d),h===null&&ai&&Bn&&(C=d.stateNode=vo(d.type,d.pendingProps,sl.current,hs.current,!1),zs=d,Ss=!0,Gs=Q0(C)),C=d.pendingProps.children,h!==null||Bn?Ns(h,d,C,A):d.child=au(d,null,C,A),Ap(h,d),d.child;case 5:return h===null&&Bn&&(X0(d.type,d.pendingProps,hs.current),(L=C=Gs)&&(C=tT(C,d.type,d.pendingProps,Ss),C!==null?(d.stateNode=C,zs=d,Gs=Q0(C),Ss=!1,L=!0):L=!1),L||Wt(d)),Bt(d),L=d.type,O=d.pendingProps,K=h!==null?h.memoizedProps:null,C=O.children,en(L,O)?C=null:K!==null&&en(L,K)&&(d.flags|=32),d.memoizedState!==null&&(L=uo(h,d,Zi,null,null,A),Ar?go._currentValue=L:go._currentValue2=L),Ap(h,d),Ns(h,d,C,A),d.child;case 6:return h===null&&Bn&&(kb(d.pendingProps,hs.current),(h=A=Gs)&&(A=S2(A,d.pendingProps,Ss),A!==null?(d.stateNode=A,zs=d,Gs=null,h=!0):h=!1),h||Wt(d)),null;case 13:return tb(h,d,A);case 4:return ct(d,d.stateNode.containerInfo),C=d.pendingProps,h===null?d.child=au(d,null,C,A):Ns(h,d,C,A),d.child;case 11:return m0(h,d,d.type,d.pendingProps,A);case 7:return Ns(h,d,d.pendingProps,A),d.child;case 8:return Ns(h,d,d.pendingProps.children,A),d.child;case 12:return Ns(h,d,d.pendingProps.children,A),d.child;case 10:return C=d.pendingProps,Pc(d,d.type,C.value),Ns(h,d,C.children,A),d.child;case 9:return L=d.type._context,C=d.pendingProps.children,Fc(d),L=Is(L),C=C(L),d.flags|=1,Ns(h,d,C,A),d.child;case 14:return qx(h,d,d.type,d.pendingProps,A);case 15:return Yx(h,d,d.type,d.pendingProps,A);case 19:return nb(h,d,A);case 22:return Wx(h,d,A);case 24:return Fc(d),C=Is(gi),h===null?(L=Gy(),L===null&&(L=qn,O=Hc(),L.pooledCache=O,O.refCount++,O!==null&&(L.pooledCacheLanes|=A),L=O),d.memoizedState={parent:C,cache:L},Jt(d),Pc(d,gi,L)):((h.lanes&A)!==0&&(_e(h,d),Gn(d,null,null,A),He()),L=h.memoizedState,O=d.memoizedState,L.parent!==C?(L={parent:C,cache:C},d.memoizedState=L,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=L),Pc(d,gi,C)):(C=O.cache,Pc(d,gi,C),C!==L.cache&&Gu(d,[gi],A,!0))),Ns(h,d,d.pendingProps.children,A),d.child;case 29:throw d.pendingProps}throw Error(s(156,d.tag))}function Pc(h,d,A){Ar?(w(ec,d._currentValue),d._currentValue=A):(w(ec,d._currentValue2),d._currentValue2=A)}function Pl(h){var d=ec.current;Ar?h._currentValue=d:h._currentValue2=d,S(ec)}function bp(h,d,A){for(;h!==null;){var C=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,C!==null&&(C.childLanes|=d)):C!==null&&(C.childLanes&d)!==d&&(C.childLanes|=d),h===A)break;h=h.return}}function Gu(h,d,A,C){var L=h.child;for(L!==null&&(L.return=h);L!==null;){var O=L.dependencies;if(O!==null){var K=L.child;O=O.firstContext;t:for(;O!==null;){var at=O;O=L;for(var At=0;At<d.length;At++)if(at.context===d[At]){O.lanes|=A,at=O.alternate,at!==null&&(at.lanes|=A),bp(O.return,A,h),C||(K=null);break t}O=at.next}}else if(L.tag===18){if(K=L.return,K===null)throw Error(s(341));K.lanes|=A,O=K.alternate,O!==null&&(O.lanes|=A),bp(K,A,h),K=null}else K=L.child;if(K!==null)K.return=L;else for(K=L;K!==null;){if(K===h){K=null;break}if(L=K.sibling,L!==null){L.return=K.return,K=L;break}K=K.return}L=K}}function Sp(h,d,A,C){h=null;for(var L=d,O=!1;L!==null;){if(!O){if((L.flags&524288)!==0)O=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var K=L.alternate;if(K===null)throw Error(s(387));if(K=K.memoizedProps,K!==null){var at=L.type;Qr(L.pendingProps.value,K.value)||(h!==null?h.push(at):h=[at])}}else if(L===Ju.current){if(K=L.alternate,K===null)throw Error(s(387));K.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(h!==null?h.push(go):h=[go])}L=L.return}h!==null&&Gu(d,h,A,C),d.flags|=262144}function Ep(h){for(h=h.firstContext;h!==null;){var d=h.context;if(!Qr(Ar?d._currentValue:d._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function Fc(h){bo=h,va=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Is(h){return zy(bo,h)}function Mp(h,d){return bo===null&&Fc(h),zy(h,d)}function zy(h,d){var A=Ar?d._currentValue:d._currentValue2;if(d={context:d,memoizedValue:A,next:null},va===null){if(h===null)throw Error(s(308));va=d,h.dependencies={lanes:0,firstContext:d},h.flags|=524288}else va=va.next=d;return A}function Hc(){return{controller:new jf,data:new Map,refCount:0}}function Tp(h){h.refCount--,h.refCount===0&&$b(tS,function(){h.controller.abort()})}function Gy(){var h=ll.current;return h!==null?h:qn.pooledCache}function y0(h,d){d===null?w(ll,ll.current):w(ll,d.pool)}function ky(){var h=Gy();return h===null?null:{parent:Ar?gi._currentValue:gi._currentValue2,pool:h}}function Pr(h){h.flags|=4}function _f(h,d){if(h!==null&&h.child===d.child)return!1;if((d.flags&16)!==0)return!0;for(h=d.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function ku(h,d,A,C){if(us)for(A=d.child;A!==null;){if(A.tag===5||A.tag===6)jp(h,A.stateNode);else if(!(A.tag===4||ai&&A.tag===27)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===d)break;for(;A.sibling===null;){if(A.return===null||A.return===d)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else if(ka)for(var L=d.child;L!==null;){if(L.tag===5){var O=L.stateNode;A&&C&&(O=_2(O,L.type,L.memoizedProps)),jp(h,O)}else if(L.tag===6)O=L.stateNode,A&&C&&(O=A2(O,L.memoizedProps)),jp(h,O);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)O=L.child,O!==null&&(O.return=L),ku(h,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===d)break;for(;L.sibling===null;){if(L.return===null||L.return===d)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function sb(h,d,A,C){if(ka)for(var L=d.child;L!==null;){if(L.tag===5){var O=L.stateNode;A&&C&&(O=_2(O,L.type,L.memoizedProps)),y2(h,O)}else if(L.tag===6)O=L.stateNode,A&&C&&(O=A2(O,L.memoizedProps)),y2(h,O);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)O=L.child,O!==null&&(O.return=L),sb(h,L,!(L.memoizedProps!==null&&L.memoizedProps.mode==="manual"),!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===d)break;for(;L.sibling===null;){if(L.return===null||L.return===d)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function Cp(h,d){if(ka&&_f(h,d)){h=d.stateNode;var A=h.containerInfo,C=Xp();sb(C,d,!1,!1),h.pendingChildren=C,Pr(d),G0(A,C)}}function _0(h,d,A,C){if(us)h.memoizedProps!==C&&Pr(d);else if(ka){var L=h.stateNode,O=h.memoizedProps;if((h=_f(h,d))||O!==C){var K=hs.current;O=Uf(L,A,O,C,!h,null),O===L?d.stateNode=L:(Yl(O,A,C,K)&&Pr(d),d.stateNode=O,h?ku(O,d,!1,!1):Pr(d))}else d.stateNode=L}}function A0(h,d,A){if(u2(d,A)){if(h.flags|=16777216,!H0(d,A))if(jc())h.flags|=8192;else throw iu=em,tm}else h.flags&=-16777217}function x0(h,d){if(jb(d)){if(h.flags|=16777216,!Xu(d))if(jc())h.flags|=8192;else throw iu=em,tm}else h.flags&=-16777217}function Af(h,d){d!==null&&(h.flags|=4),h.flags&16384&&(d=h.tag!==22?U():536870912,h.lanes|=d,hl|=d)}function xf(h,d){if(!Bn)switch(h.tailMode){case"hidden":d=h.tail;for(var A=null;d!==null;)d.alternate!==null&&(A=d),d=d.sibling;A===null?h.tail=null:A.sibling=null;break;case"collapsed":A=h.tail;for(var C=null;A!==null;)A.alternate!==null&&(C=A),A=A.sibling;C===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:C.sibling=null}}function Ti(h){var d=h.alternate!==null&&h.alternate.child===h.child,A=0,C=0;if(d)for(var L=h.child;L!==null;)A|=L.lanes|L.childLanes,C|=L.subtreeFlags&31457280,C|=L.flags&31457280,L.return=h,L=L.sibling;else for(L=h.child;L!==null;)A|=L.lanes|L.childLanes,C|=L.subtreeFlags,C|=L.flags,L.return=h,L=L.sibling;return h.subtreeFlags|=C,h.childLanes=A,d}function rb(h,d,A){var C=d.pendingProps;switch(Et(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(d),null;case 1:return Ti(d),null;case 3:return A=d.stateNode,C=null,h!==null&&(C=h.memoizedState.cache),d.memoizedState.cache!==C&&(d.flags|=2048),Pl(gi),wt(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(h===null||h.child===null)&&(Ye(d)?Pr(d):h===null||h.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Qa!==null&&(Np(Qa),Qa=null))),Cp(h,d),Ti(d),null;case 26:if(ha){A=d.type;var L=d.memoizedState;return h===null?(Pr(d),L!==null?(Ti(d),x0(d,L)):(Ti(d),A0(d,A,C))):L?L!==h.memoizedState?(Pr(d),Ti(d),x0(d,L)):(Ti(d),d.flags&=-16777217):(us?h.memoizedProps!==C&&Pr(d):_0(h,d,A,C),Ti(d),A0(d,A,C)),null}case 27:if(ai){if(Ut(d),A=sl.current,L=d.type,h!==null&&d.stateNode!=null)us?h.memoizedProps!==C&&Pr(d):_0(h,d,L,C);else{if(!C){if(d.stateNode===null)throw Error(s(166));return Ti(d),null}h=hs.current,Ye(d)?ve(d,h):(h=vo(L,C,A,h,!0),d.stateNode=h,Pr(d))}return Ti(d),null}case 5:if(Ut(d),A=d.type,h!==null&&d.stateNode!=null)_0(h,d,A,C);else{if(!C){if(d.stateNode===null)throw Error(s(166));return Ti(d),null}h=hs.current,Ye(d)?ve(d,h):(L=c2(A,C,sl.current,h,d),ku(L,d,!1,!1),d.stateNode=L,Yl(L,A,C,h)&&Pr(d))}return Ti(d),A0(d,d.type,d.pendingProps),null;case 6:if(h&&d.stateNode!=null)A=h.memoizedProps,us?A!==C&&Pr(d):ka&&(A!==C?(d.stateNode=Zn(C,sl.current,hs.current,d),Pr(d)):d.stateNode=h.stateNode);else{if(typeof C!="string"&&d.stateNode===null)throw Error(s(166));if(h=sl.current,A=hs.current,Ye(d)){if(!Hs)throw Error(s(176));if(h=d.stateNode,A=d.memoizedProps,C=null,L=zs,L!==null)switch(L.tag){case 27:case 5:C=L.memoizedProps}E2(h,A,d,C)||Wt(d)}else d.stateNode=Zn(C,h,A,d)}return Ti(d),null;case 13:if(C=d.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(L=Ye(d),C!==null&&C.dehydrated!==null){if(h===null){if(!L)throw Error(s(318));if(!Hs)throw Error(s(344));if(L=d.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(s(317));Hb(L,d)}else we(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ti(d),L=!1}else Qa!==null&&(Np(Qa),Qa=null),L=!0;if(!L)return d.flags&256?(mr(d),d):(mr(d),null)}if(mr(d),(d.flags&128)!==0)return d.lanes=A,d;if(A=C!==null,h=h!==null&&h.memoizedState!==null,A){C=d.child,L=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(L=C.alternate.memoizedState.cachePool.pool);var O=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(O=C.memoizedState.cachePool.pool),O!==L&&(C.flags|=2048)}return A!==h&&A&&(d.child.flags|=8192),Af(d,d.updateQueue),Ti(d),null;case 4:return wt(),Cp(h,d),h===null&&ki(d.stateNode.containerInfo),Ti(d),null;case 10:return Pl(d.type),Ti(d),null;case 19:if(S(fs),L=d.memoizedState,L===null)return Ti(d),null;if(C=(d.flags&128)!==0,O=L.rendering,O===null)if(C)xf(L,!1);else{if(ci!==0||h!==null&&(h.flags&128)!==0)for(h=d.child;h!==null;){if(O=lo(h),O!==null){for(d.flags|=128,xf(L,!1),h=O.updateQueue,d.updateQueue=h,Af(d,h),d.subtreeFlags=0,h=A,A=d.child;A!==null;)Pp(A,h),A=A.sibling;return w(fs,fs.current&1|2),d.child}h=h.sibling}L.tail!==null&&Va()>Yf&&(d.flags|=128,C=!0,xf(L,!1),d.lanes=4194304)}else{if(!C)if(h=lo(O),h!==null){if(d.flags|=128,C=!0,h=h.updateQueue,d.updateQueue=h,Af(d,h),xf(L,!0),L.tail===null&&L.tailMode==="hidden"&&!O.alternate&&!Bn)return Ti(d),null}else 2*Va()-L.renderingStartTime>Yf&&A!==536870912&&(d.flags|=128,C=!0,xf(L,!1),d.lanes=4194304);L.isBackwards?(O.sibling=d.child,d.child=O):(h=L.last,h!==null?h.sibling=O:d.child=O,L.last=O)}return L.tail!==null?(d=L.tail,L.rendering=d,L.tail=d.sibling,L.renderingStartTime=Va(),d.sibling=null,h=fs.current,w(fs,C?h&1|2:h&1),d):(Ti(d),null);case 22:case 23:return mr(d),$s(),C=d.memoizedState!==null,h!==null?h.memoizedState!==null!==C&&(d.flags|=8192):C&&(d.flags|=8192),C?(A&536870912)!==0&&(d.flags&128)===0&&(Ti(d),d.subtreeFlags&6&&(d.flags|=8192)):Ti(d),A=d.updateQueue,A!==null&&Af(d,A.retryQueue),A=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(A=h.memoizedState.cachePool.pool),C=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(C=d.memoizedState.cachePool.pool),C!==A&&(d.flags|=2048),h!==null&&S(ll),null;case 24:return A=null,h!==null&&(A=h.memoizedState.cache),d.memoizedState.cache!==A&&(d.flags|=2048),Pl(gi),Ti(d),null;case 25:return null}throw Error(s(156,d.tag))}function YM(h,d){switch(Et(d),d.tag){case 1:return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return Pl(gi),wt(),h=d.flags,(h&65536)!==0&&(h&128)===0?(d.flags=h&-65537|128,d):null;case 26:case 27:case 5:return Ut(d),null;case 13:if(mr(d),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(s(340));we()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return S(fs),null;case 4:return wt(),null;case 10:return Pl(d.type),null;case 22:case 23:return mr(d),$s(),h!==null&&S(ll),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 24:return Pl(gi),null;case 25:return null;default:return null}}function ab(h,d){switch(Et(d),d.tag){case 3:Pl(gi),wt();break;case 26:case 27:case 5:Ut(d);break;case 4:wt();break;case 13:mr(d);break;case 19:S(fs);break;case 10:Pl(d.type);break;case 22:case 23:mr(d),$s(),h!==null&&S(ll);break;case 24:Pl(gi)}}function wp(h,d){try{var A=d.updateQueue,C=A!==null?A.lastEffect:null;if(C!==null){var L=C.next;A=L;do{if((A.tag&h)===h){C=void 0;var O=A.create,K=A.inst;C=O(),K.destroy=C}A=A.next}while(A!==L)}}catch(at){jn(d,d.return,at)}}function zc(h,d,A){try{var C=d.updateQueue,L=C!==null?C.lastEffect:null;if(L!==null){var O=L.next;C=O;do{if((C.tag&h)===h){var K=C.inst,at=K.destroy;if(at!==void 0){K.destroy=void 0,L=d;var At=A;try{at()}catch(Ht){jn(L,At,Ht)}}}C=C.next}while(C!==O)}}catch(Ht){jn(d,d.return,Ht)}}function ob(h){var d=h.updateQueue;if(d!==null){var A=h.stateNode;try{ue(d,A)}catch(C){jn(h,h.return,C)}}}function Fr(h,d,A){A.props=Il(h.type,h.memoizedProps),A.state=h.memoizedState;try{A.componentWillUnmount()}catch(C){jn(h,d,C)}}function fo(h,d){try{var A=h.ref;if(A!==null){var C=h.stateNode;switch(h.tag){case 26:case 27:case 5:var L=Of(C);break;default:L=C}typeof A=="function"?h.refCleanup=A(L):A.current=L}}catch(O){jn(h,d,O)}}function Hr(h,d){var A=h.ref,C=h.refCleanup;if(A!==null)if(typeof C=="function")try{C()}catch(L){jn(h,d,L)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof A=="function")try{A(null)}catch(L){jn(h,d,L)}else A.current=null}function Vy(h){var d=h.type,A=h.memoizedProps,C=h.stateNode;try{ZM(C,d,A,h)}catch(L){jn(h,h.return,L)}}function Qy(h,d,A){try{Eb(h.stateNode,h.type,A,d,h)}catch(C){jn(h,h.return,C)}}function jy(h){return h.tag===5||h.tag===3||(ha?h.tag===26:!1)||(ai?h.tag===27:!1)||h.tag===4}function Rp(h){t:for(;;){for(;h.sibling===null;){if(h.return===null||jy(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&(!ai||h.tag!==27)&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue t;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Xy(h,d,A){var C=h.tag;if(C===5||C===6)h=h.stateNode,d?Tb(A,h,d):m2(A,h);else if(!(C===4||ai&&C===27)&&(h=h.child,h!==null))for(Xy(h,d,A),h=h.sibling;h!==null;)Xy(h,d,A),h=h.sibling}function Fl(h,d,A){var C=h.tag;if(C===5||C===6)h=h.stateNode,d?Mb(A,h,d):bb(A,h);else if(!(C===4||ai&&C===27)&&(h=h.child,h!==null))for(Fl(h,d,A),h=h.sibling;h!==null;)Fl(h,d,A),h=h.sibling}function b0(h,d,A){h=h.containerInfo;try{Pf(h,A)}catch(C){jn(d,d.return,C)}}function Lp(h,d){for(P0(h.containerInfo),We=d;We!==null;)if(h=We,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,We=d;else for(;We!==null;){h=We;var A=h.alternate;switch(d=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&A!==null){d=void 0;var C=h,L=A.memoizedProps;A=A.memoizedState;var O=C.stateNode;try{var K=Il(C.type,L,C.elementType===C.type);d=O.getSnapshotBeforeUpdate(K,A),O.__reactInternalSnapshotBeforeUpdate=d}catch(at){jn(C,C.return,at)}}break;case 3:(d&1024)!==0&&us&&Db(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(s(163))}if(d=h.sibling,d!==null){d.return=h.return,We=d;break}We=h.return}return K=mn,mn=!1,K}function S0(h,d,A){var C=A.flags;switch(A.tag){case 0:case 11:case 15:zl(h,A),C&4&&wp(5,A);break;case 1:if(zl(h,A),C&4)if(h=A.stateNode,d===null)try{h.componentDidMount()}catch(at){jn(A,A.return,at)}else{var L=Il(A.type,d.memoizedProps);d=d.memoizedState;try{h.componentDidUpdate(L,d,h.__reactInternalSnapshotBeforeUpdate)}catch(at){jn(A,A.return,at)}}C&64&&ob(A),C&512&&fo(A,A.return);break;case 3:if(zl(h,A),C&64&&(C=A.updateQueue,C!==null)){if(h=null,A.child!==null)switch(A.child.tag){case 27:case 5:h=Of(A.child.stateNode);break;case 1:h=A.child.stateNode}try{ue(C,h)}catch(at){jn(A,A.return,at)}}break;case 26:if(ha){zl(h,A),C&512&&fo(A,A.return);break}case 27:case 5:zl(h,A),d===null&&C&4&&Vy(A),C&512&&fo(A,A.return);break;case 12:zl(h,A);break;case 13:zl(h,A),C&4&&E0(h,A);break;case 22:if(L=A.memoizedState!==null||cl,!L){d=d!==null&&d.memoizedState!==null||Pi;var O=cl,K=Pi;cl=L,(Pi=d)&&!K?Gl(h,A,(A.subtreeFlags&8772)!==0):zl(h,A),cl=O,Pi=K}C&512&&(A.memoizedProps.mode==="manual"?fo(A,A.return):Hr(A,A.return));break;default:zl(h,A)}}function qy(h){var d=h.alternate;d!==null&&(h.alternate=null,qy(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&JM(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Us(h,d,A){for(A=A.child;A!==null;)Gc(h,d,A),A=A.sibling}function Gc(h,d,A){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Qi,A)}catch{}switch(A.tag){case 26:if(ha){Pi||Hr(A,d),Us(h,d,A),A.memoizedState?ju(A.memoizedState):A.stateNode&&Ff(A.stateNode);break}case 27:if(ai){Pi||Hr(A,d);var C=Ue,L=an;Ue=A.stateNode,Us(h,d,A),tu(A.stateNode),Ue=C,an=L;break}case 5:Pi||Hr(A,d);case 6:if(us){if(C=Ue,L=an,Ue=null,Us(h,d,A),Ue=C,an=L,Ue!==null)if(an)try{Cb(Ue,A.stateNode)}catch(O){jn(A,d,O)}else try{g2(Ue,A.stateNode)}catch(O){jn(A,d,O)}}else Us(h,d,A);break;case 18:us&&Ue!==null&&(an?qp(Ue,A.stateNode):Gb(Ue,A.stateNode));break;case 4:us?(C=Ue,L=an,Ue=A.stateNode.containerInfo,an=!0,Us(h,d,A),Ue=C,an=L):(ka&&b0(A.stateNode,A,Xp()),Us(h,d,A));break;case 0:case 11:case 14:case 15:Pi||zc(2,A,d),Pi||zc(4,A,d),Us(h,d,A);break;case 1:Pi||(Hr(A,d),C=A.stateNode,typeof C.componentWillUnmount=="function"&&Fr(A,d,C)),Us(h,d,A);break;case 21:Us(h,d,A);break;case 22:Pi||Hr(A,d),Pi=(C=Pi)||A.memoizedState!==null,Us(h,d,A),Pi=C;break;default:Us(h,d,A)}}function E0(h,d){if(Hs&&d.memoizedState===null&&(h=d.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{nT(h)}catch(A){jn(d,d.return,A)}}function lb(h){switch(h.tag){case 13:case 19:var d=h.stateNode;return d===null&&(d=h.stateNode=new Xn),d;case 22:return h=h.stateNode,d=h._retryCache,d===null&&(d=h._retryCache=new Xn),d;default:throw Error(s(435,h.tag))}}function Hl(h,d){var A=lb(h);d.forEach(function(C){var L=Yc.bind(null,h,C);A.has(C)||(A.add(C),C.then(L,L))})}function yr(h,d){var A=d.deletions;if(A!==null)for(var C=0;C<A.length;C++){var L=A[C],O=h,K=d;if(us){var at=K;t:for(;at!==null;){switch(at.tag){case 27:case 5:Ue=at.stateNode,an=!1;break t;case 3:Ue=at.stateNode.containerInfo,an=!0;break t;case 4:Ue=at.stateNode.containerInfo,an=!0;break t}at=at.return}if(Ue===null)throw Error(s(160));Gc(O,K,L),Ue=null,an=!1}else Gc(O,K,L);O=L.alternate,O!==null&&(O.return=null),L.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)Yy(d,h),d=d.sibling}function Yy(h,d){var A=h.alternate,C=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:yr(d,h),zr(h),C&4&&(zc(3,h,h.return),wp(3,h),zc(5,h,h.return));break;case 1:yr(d,h),zr(h),C&512&&(Pi||A===null||Hr(A,A.return)),C&64&&cl&&(h=h.updateQueue,h!==null&&(C=h.callbacks,C!==null&&(A=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=A===null?C:A.concat(C))));break;case 26:if(ha){var L=Di;yr(d,h),zr(h),C&512&&(Pi||A===null||Hr(A,A.return)),C&4&&(C=A!==null?A.memoizedState:null,d=h.memoizedState,A===null?d===null?h.stateNode===null?h.stateNode=Wp(L,h.type,h.memoizedProps,h):Kp(L,h.type,h.stateNode):h.stateNode=Vb(L,d,h.memoizedProps):C!==d?(C===null?A.stateNode!==null&&Ff(A.stateNode):ju(C),d===null?Kp(L,h.type,h.stateNode):Vb(L,d,h.memoizedProps)):d===null&&h.stateNode!==null&&Qy(h,h.memoizedProps,A.memoizedProps));break}case 27:if(ai&&C&4&&h.alternate===null){L=h.stateNode;var O=h.memoizedProps;try{$c(L),qb(h.type,O,L,h)}catch($t){jn(h,h.return,$t)}}case 5:if(yr(d,h),zr(h),C&512&&(Pi||A===null||Hr(A,A.return)),us){if(h.flags&32){d=h.stateNode;try{v2(d)}catch($t){jn(h,h.return,$t)}}C&4&&h.stateNode!=null&&(d=h.memoizedProps,Qy(h,d,A!==null?A.memoizedProps:d)),C&1024&&(R2=!0)}break;case 6:if(yr(d,h),zr(h),C&4&&us){if(h.stateNode===null)throw Error(s(162));C=h.memoizedProps,A=A!==null?A.memoizedProps:C,d=h.stateNode;try{Sb(d,A,C)}catch($t){jn(h,h.return,$t)}}break;case 3:if(ha?(Qb(),L=Di,Di=q0(d.containerInfo),yr(d,h),Di=L):yr(d,h),zr(h),C&4){if(us&&Hs&&A!==null&&A.memoizedState.isDehydrated)try{eT(d.containerInfo)}catch($t){jn(h,h.return,$t)}if(ka){C=d.containerInfo,A=d.pendingChildren;try{Pf(C,A)}catch($t){jn(h,h.return,$t)}}}R2&&(R2=!1,cb(h));break;case 4:ha?(A=Di,Di=q0(h.stateNode.containerInfo),yr(d,h),zr(h),Di=A):(yr(d,h),zr(h)),C&4&&ka&&b0(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:yr(d,h),zr(h);break;case 13:yr(d,h),zr(h),h.child.flags&8192&&h.memoizedState!==null!=(A!==null&&A.memoizedState!==null)&&(Er=Va()),C&4&&(C=h.updateQueue,C!==null&&(h.updateQueue=null,Hl(h,C)));break;case 22:C&512&&(Pi||A===null||Hr(A,A.return)),L=h.memoizedState!==null;var K=A!==null&&A.memoizedState!==null,at=cl,At=Pi;if(cl=at||L,Pi=At||K,yr(d,h),Pi=At,cl=at,zr(h),d=h.stateNode,d._current=h,d._visibility&=-3,d._visibility|=d._pendingVisibility&2,C&8192&&(d._visibility=L?d._visibility&-2:d._visibility|1,L&&(d=cl||Pi,A===null||K||d||bf(h)),us&&(h.memoizedProps===null||h.memoizedProps.mode!=="manual"))){t:if(A=null,us)for(d=h;;){if(d.tag===5||ha&&d.tag===26||ai&&d.tag===27){if(A===null){K=A=d;try{O=K.stateNode,L?wb(O):Lb(K.stateNode,K.memoizedProps)}catch($t){jn(K,K.return,$t)}}}else if(d.tag===6){if(A===null){K=d;try{var Ht=K.stateNode;L?Rb(Ht):$M(Ht,K.memoizedProps)}catch($t){jn(K,K.return,$t)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===h)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break t;for(;d.sibling===null;){if(d.return===null||d.return===h)break t;A===d&&(A=null),d=d.return}A===d&&(A=null),d.sibling.return=d.return,d=d.sibling}}C&4&&(C=h.updateQueue,C!==null&&(A=C.retryQueue,A!==null&&(C.retryQueue=null,Hl(h,A))));break;case 19:yr(d,h),zr(h),C&4&&(C=h.updateQueue,C!==null&&(h.updateQueue=null,Hl(h,C)));break;case 21:break;default:yr(d,h),zr(h)}}function zr(h){var d=h.flags;if(d&2){try{if(us&&(!ai||h.tag!==27)){t:{for(var A=h.return;A!==null;){if(jy(A)){var C=A;break t}A=A.return}throw Error(s(160))}switch(C.tag){case 27:if(ai){var L=C.stateNode,O=Rp(h);Fl(h,O,L);break}case 5:var K=C.stateNode;C.flags&32&&(v2(K),C.flags&=-33);var at=Rp(h);Fl(h,at,K);break;case 3:case 4:var At=C.stateNode.containerInfo,Ht=Rp(h);Xy(h,Ht,At);break;default:throw Error(s(161))}}}catch($t){jn(h,h.return,$t)}h.flags&=-3}d&4096&&(h.flags&=-4097)}function cb(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var d=h;cb(d),d.tag===5&&d.flags&1024&&z0(d.stateNode),h=h.sibling}}function zl(h,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)S0(h,d.alternate,d),d=d.sibling}function bf(h){for(h=h.child;h!==null;){var d=h;switch(d.tag){case 0:case 11:case 14:case 15:zc(4,d,d.return),bf(d);break;case 1:Hr(d,d.return);var A=d.stateNode;typeof A.componentWillUnmount=="function"&&Fr(d,d.return,A),bf(d);break;case 26:case 27:case 5:Hr(d,d.return),bf(d);break;case 22:Hr(d,d.return),d.memoizedState===null&&bf(d);break;default:bf(d)}h=h.sibling}}function Gl(h,d,A){for(A=A&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var C=d.alternate,L=h,O=d,K=O.flags;switch(O.tag){case 0:case 11:case 15:Gl(L,O,A),wp(4,O);break;case 1:if(Gl(L,O,A),C=O,L=C.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(Ht){jn(C,C.return,Ht)}if(C=O,L=C.updateQueue,L!==null){var at=C.stateNode;try{var At=L.shared.hiddenCallbacks;if(At!==null)for(L.shared.hiddenCallbacks=null,L=0;L<At.length;L++)mt(At[L],at)}catch(Ht){jn(C,C.return,Ht)}}A&&K&64&&ob(O),fo(O,O.return);break;case 26:case 27:case 5:Gl(L,O,A),A&&C===null&&K&4&&Vy(O),fo(O,O.return);break;case 12:Gl(L,O,A);break;case 13:Gl(L,O,A),A&&K&4&&E0(L,O);break;case 22:O.memoizedState===null&&Gl(L,O,A),fo(O,O.return);break;default:Gl(L,O,A)}d=d.sibling}}function M0(h,d){var A=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(A=h.memoizedState.cachePool.pool),h=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(h=d.memoizedState.cachePool.pool),h!==A&&(h!=null&&h.refCount++,A!=null&&Tp(A))}function Dp(h,d){h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Tp(h))}function As(h,d,A,C){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Wy(h,d,A,C),d=d.sibling}function Wy(h,d,A,C){var L=d.flags;switch(d.tag){case 0:case 11:case 15:As(h,d,A,C),L&2048&&wp(9,d);break;case 3:As(h,d,A,C),L&2048&&(h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Tp(h)));break;case 12:if(L&2048){As(h,d,A,C),h=d.stateNode;try{var O=d.memoizedProps,K=O.id,at=O.onPostCommit;typeof at=="function"&&at(K,d.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(At){jn(d,d.return,At)}}else As(h,d,A,C);break;case 23:break;case 22:O=d.stateNode,d.memoizedState!==null?O._visibility&4?As(h,d,A,C):tr(h,d):O._visibility&4?As(h,d,A,C):(O._visibility|=4,Ps(h,d,A,C,(d.subtreeFlags&10256)!==0)),L&2048&&M0(d.alternate,d);break;case 24:As(h,d,A,C),L&2048&&Dp(d.alternate,d);break;default:As(h,d,A,C)}}function Ps(h,d,A,C,L){for(L=L&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var O=h,K=d,at=A,At=C,Ht=K.flags;switch(K.tag){case 0:case 11:case 15:Ps(O,K,at,At,L),wp(8,K);break;case 23:break;case 22:var $t=K.stateNode;K.memoizedState!==null?$t._visibility&4?Ps(O,K,at,At,L):tr(O,K):($t._visibility|=4,Ps(O,K,at,At,L)),L&&Ht&2048&&M0(K.alternate,K);break;case 24:Ps(O,K,at,At,L),L&&Ht&2048&&Dp(K.alternate,K);break;default:Ps(O,K,at,At,L)}d=d.sibling}}function tr(h,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var A=h,C=d,L=C.flags;switch(C.tag){case 22:tr(A,C),L&2048&&M0(C.alternate,C);break;case 24:tr(A,C),L&2048&&Dp(C.alternate,C);break;default:tr(A,C)}d=d.sibling}}function Pa(h){if(h.subtreeFlags&ya)for(h=h.child;h!==null;)T0(h),h=h.sibling}function T0(h){switch(h.tag){case 26:Pa(h),h.flags&ya&&(h.memoizedState!==null?Xb(Di,h.memoizedState,h.memoizedProps):xr(h.type,h.memoizedProps));break;case 5:Pa(h),h.flags&ya&&xr(h.type,h.memoizedProps);break;case 3:case 4:if(ha){var d=Di;Di=q0(h.stateNode.containerInfo),Pa(h),Di=d}else Pa(h);break;case 22:h.memoizedState===null&&(d=h.alternate,d!==null&&d.memoizedState!==null?(d=ya,ya=16777216,Pa(h),ya=d):Pa(h));break;default:Pa(h)}}function Bp(h){var d=h.alternate;if(d!==null&&(h=d.child,h!==null)){d.child=null;do d=h.sibling,h.sibling=null,h=d;while(h!==null)}}function kc(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var A=0;A<d.length;A++){var C=d[A];We=C,Ky(C,h)}Bp(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)C0(h),h=h.sibling}function C0(h){switch(h.tag){case 0:case 11:case 15:kc(h),h.flags&2048&&zc(9,h,h.return);break;case 3:kc(h);break;case 12:kc(h);break;case 22:var d=h.stateNode;h.memoizedState!==null&&d._visibility&4&&(h.return===null||h.return.tag!==13)?(d._visibility&=-5,kl(h)):kc(h);break;default:kc(h)}}function kl(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var A=0;A<d.length;A++){var C=d[A];We=C,Ky(C,h)}Bp(h)}for(h=h.child;h!==null;){switch(d=h,d.tag){case 0:case 11:case 15:zc(8,d,d.return),kl(d);break;case 22:A=d.stateNode,A._visibility&4&&(A._visibility&=-5,kl(d));break;default:kl(d)}h=h.sibling}}function Ky(h,d){for(;We!==null;){var A=We;switch(A.tag){case 0:case 11:case 15:zc(8,A,d);break;case 23:case 22:if(A.memoizedState!==null&&A.memoizedState.cachePool!==null){var C=A.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Tp(A.memoizedState.cache)}if(C=A.child,C!==null)C.return=A,We=C;else t:for(A=h;We!==null;){C=We;var L=C.sibling,O=C.return;if(qy(C),C===A){We=null;break t}if(L!==null){L.return=O,We=L;break t}We=O}}}function Sf(h){var d=mb(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(s(364));return d}if(h=d2(h),h===null)throw Error(s(362));return h.stateNode.current}function Vc(h,d){var A=h.tag;switch(d.$$typeof){case qf:if(h.type===d.value)return!0;break;case qa:t:{for(d=d.value,h=[h,0],A=0;A<h.length;){var C=h[A++],L=C.tag,O=h[A++],K=d[O];if(L!==5&&L!==26&&L!==27||!If(C)){for(;K!=null&&Vc(C,K);)O++,K=d[O];if(O===d.length){d=!0;break t}else for(C=C.child;C!==null;)h.push(C,O),C=C.sibling}}d=!1}return d;case xi:if((A===5||A===26||A===27)&&_b(h.stateNode,d.value))return!0;break;case ul:if((A===5||A===6||A===26||A===27)&&(h=yb(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case So:if((A===5||A===26||A===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Jy(h){switch(h.$$typeof){case qf:return"<"+(a(h.value)||"Unknown")+">";case qa:return":has("+(Jy(h)||"")+")";case xi:return'[role="'+h.value+'"]';case ul:return'"'+h.value+'"';case So:return'[data-testname="'+h.value+'"]';default:throw Error(s(365))}}function Gr(h,d){var A=[];h=[h,0];for(var C=0;C<h.length;){var L=h[C++],O=L.tag,K=h[C++],at=d[K];if(O!==5&&O!==26&&O!==27||!If(L)){for(;at!=null&&Vc(L,at);)K++,at=d[K];if(K===d.length)A.push(L);else for(L=L.child;L!==null;)h.push(L,K),L=L.sibling}}return A}function Op(h,d){if(!Zc)throw Error(s(363));h=Sf(h),h=Gr(h,d),d=[],h=Array.from(h);for(var A=0;A<h.length;){var C=h[A++],L=C.tag;if(L===5||L===26||L===27)If(C)||d.push(C.stateNode);else for(C=C.child;C!==null;)h.push(C),C=C.sibling}return d}function Gi(){if((Pn&2)!==0&&Sn!==0)return Sn&-Sn;if(Qe.T!==null){var h=pa;return h!==0?h:ne()}return gb()}function Zy(){xa===0&&(xa=(Sn&536870912)===0||Bn?z():536870912);var h=ma.current;return h!==null&&(h.flags|=32),xa}function xs(h,d,A){(h===qn&&ni===2||h.cancelPendingCommit!==null)&&(Fs(h,0),kr(h,Sn,xa,!1)),X(h,A),((Pn&2)===0||h!==qn)&&(h===qn&&((Pn&2)===0&&(nc|=A),ci===4&&kr(h,Sn,xa,!1)),qt(h))}function Qc(h,d,A){if((Pn&6)!==0)throw Error(s(327));var C=!A&&(d&60)===0&&(d&h.expiredLanes)===0||I(h,d),L=C?t2(h,d):R0(h,d,!0),O=C;do{if(L===0){_a&&!C&&kr(h,d,0,!1);break}else if(L===6)kr(h,d,0,!Wa);else{if(A=h.current.alternate,O&&!Ef(A)){L=R0(h,d,!1),O=!1;continue}if(L===2){if(O=d,h.errorRecoveryDisabledLanes&O)var K=0;else K=h.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){d=K;t:{var at=h;L=ah;var At=Hs&&at.current.memoizedState.isDehydrated;if(At&&(Fs(at,K).flags|=256),K=R0(at,K,!1),K!==2){if(ds&&!At){at.errorRecoveryDisabledLanes|=O,nc|=O,L=4;break t}O=Fi,Fi=L,O!==null&&Np(O)}L=K}if(O=!1,L!==2)continue}}if(L===1){Fs(h,0),kr(h,d,0,!0);break}t:{switch(C=h,L){case 0:case 1:throw Error(s(345));case 4:if((d&4194176)===d){kr(C,d,xa,!Wa);break t}break;case 2:Fi=null;break;case 3:case 5:break;default:throw Error(s(329))}if(C.finishedWork=A,C.finishedLanes=d,(d&62914560)===d&&(O=Er+300-Va(),10<O)){if(kr(C,d,xa,!Wa),N(C,0)!==0)break t;C.timeoutHandle=es(w0.bind(null,C,A,Fi,im,s1,d,xa,nc,hl,Wa,2,-0,0),O);break t}w0(C,A,Fi,im,s1,d,xa,nc,hl,Wa,0,-0,0)}}break}while(!0);qt(h)}function Np(h){Fi===null?Fi=h:Fi.push.apply(Fi,h)}function w0(h,d,A,C,L,O,K,at,At,Ht,$t,de,ye){var Ke=d.subtreeFlags;if((Ke&8192||(Ke&16785408)===16785408)&&(h2(),T0(d),d=ns(),d!==null)){h.cancelPendingCommit=d(Xc.bind(null,h,A,C,L,K,at,At,1,de,ye)),kr(h,O,K,!Ht);return}Xc(h,A,C,L,K,at,At,$t,de,ye)}function Ef(h){for(var d=h;;){var A=d.tag;if((A===0||A===11||A===15)&&d.flags&16384&&(A=d.updateQueue,A!==null&&(A=A.stores,A!==null)))for(var C=0;C<A.length;C++){var L=A[C],O=L.getSnapshot;L=L.value;try{if(!Qr(O(),L))return!1}catch{return!1}}if(A=d.child,d.subtreeFlags&16384&&A!==null)A.return=d,d=A;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function kr(h,d,A,C){d&=~nm,d&=~nc,h.suspendedLanes|=d,h.pingedLanes&=~d,C&&(h.warmLanes|=d),C=h.expirationTimes;for(var L=d;0<L;){var O=31-br(L),K=1<<O;C[O]=-1,L&=~K}A!==0&&it(h,A,d)}function Ip(){return(Pn&6)===0?($(0),!1):!0}function Mf(){if(ze!==null){if(ni===0)var h=ze.return;else h=ze,va=bo=null,ho(h),su=null,ru=0,h=ze;for(;h!==null;)ab(h.alternate,h),h=h.return;ze=null}}function Fs(h,d){h.finishedWork=null,h.finishedLanes=0;var A=h.timeoutHandle;A!==Kc&&(h.timeoutHandle=Kc,F0(A)),A=h.cancelPendingCommit,A!==null&&(h.cancelPendingCommit=null,A()),Mf(),qn=h,ze=A=Ha(h.current,null),Sn=d,ni=0,nr=null,Wa=!1,_a=I(h,d),ds=!1,hl=xa=nm=nc=Aa=ci=0,Fi=ah=null,s1=!1,(d&8)!==0&&(d|=d&32);var C=h.entangledLanes;if(C!==0)for(h=h.entanglements,C&=d;0<C;){var L=31-br(C),O=1<<L;d|=h[L],C&=~O}return ir=d,Z(),A}function la(h,d){ln=null,Qe.H=Ui,d===Vf?(d=qe(),ni=3):d===tm?(d=qe(),ni=4):ni=d===n1?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,nr=d,ze===null&&(ci=1,gf(h,_t(d,h.current)))}function jc(){var h=ma.current;return h===null?!0:(Sn&4194176)===Sn?oi===null:(Sn&62914560)===Sn||(Sn&536870912)!==0?h===oi:!1}function Zo(){var h=Qe.H;return Qe.H=Ui,h===null?Ui:h}function $o(){var h=Qe.A;return Qe.A=Xf,h}function Vl(){ci=4,Wa||(Sn&4194176)!==Sn&&ma.current!==null||(_a=!0),(Aa&134217727)===0&&(nc&134217727)===0||qn===null||kr(qn,Sn,xa,!1)}function R0(h,d,A){var C=Pn;Pn|=2;var L=Zo(),O=$o();(qn!==h||Sn!==d)&&(im=null,Fs(h,d)),d=!1;var K=ci;t:do try{if(ni!==0&&ze!==null){var at=ze,At=nr;switch(ni){case 8:Mf(),K=6;break t;case 3:case 2:case 6:ma.current===null&&(d=!0);var Ht=ni;if(ni=0,nr=null,Fa(h,at,At,Ht),A&&_a){K=0;break t}break;default:Ht=ni,ni=0,nr=null,Fa(h,at,At,Ht)}}$y(),K=ci;break}catch($t){la(h,$t)}while(!0);return d&&h.shellSuspendCounter++,va=bo=null,Pn=C,Qe.H=L,Qe.A=O,ze===null&&(qn=null,Sn=0,Z()),K}function $y(){for(;ze!==null;)Li(ze)}function t2(h,d){var A=Pn;Pn|=2;var C=Zo(),L=$o();qn!==h||Sn!==d?(im=null,Yf=Va()+500,Fs(h,d)):_a=I(h,d);t:do try{if(ni!==0&&ze!==null){d=ze;var O=nr;e:switch(ni){case 1:ni=0,nr=null,Fa(h,d,O,1);break;case 2:if(Qt(O)){ni=0,nr=null,kn(d);break}d=function(){ni===2&&qn===h&&(ni=7),qt(h)},O.then(d,d);break t;case 3:ni=7;break t;case 4:ni=5;break t;case 7:Qt(O)?(ni=0,nr=null,kn(d)):(ni=0,nr=null,Fa(h,d,O,7));break;case 5:var K=null;switch(ze.tag){case 26:K=ze.memoizedState;case 5:case 27:var at=ze,At=at.type,Ht=at.pendingProps;if(K?Xu(K):H0(At,Ht)){ni=0,nr=null;var $t=at.sibling;if($t!==null)ze=$t;else{var de=at.return;de!==null?(ze=de,ca(de)):ze=null}break e}}ni=0,nr=null,Fa(h,d,O,5);break;case 6:ni=0,nr=null,Fa(h,d,O,6);break;case 8:Mf(),ci=6;break t;default:throw Error(s(462))}}_r();break}catch(ye){la(h,ye)}while(!0);return va=bo=null,Qe.H=C,Qe.A=L,Pn=A,ze!==null?0:(qn=null,Sn=0,Z(),ci)}function _r(){for(;ze!==null&&!Kb();)Li(ze)}function Li(h){var d=ib(h.alternate,h,ir);h.memoizedProps=h.pendingProps,d===null?ca(h):ze=d}function kn(h){var d=h,A=d.alternate;switch(d.tag){case 15:case 0:d=Jx(A,d,d.pendingProps,d.type,void 0,Sn);break;case 11:d=Jx(A,d,d.pendingProps,d.type.render,d.ref,Sn);break;case 5:ho(d);default:ab(A,d),d=ze=Pp(d,ir),d=ib(A,d,ir)}h.memoizedProps=h.pendingProps,d===null?ca(h):ze=d}function Fa(h,d,A,C){va=bo=null,ho(d),su=null,ru=0;var L=d.return;try{if(XM(h,L,d,A,Sn)){ci=1,gf(h,_t(A,h.current)),ze=null;return}}catch(O){if(L!==null)throw ze=L,O;ci=1,gf(h,_t(A,h.current)),ze=null;return}d.flags&32768?(Bn||C===1?h=!0:_a||(Sn&536870912)!==0?h=!1:(Wa=h=!0,(C===2||C===3||C===6)&&(C=ma.current,C!==null&&C.tag===13&&(C.flags|=16384))),L0(d,h)):ca(d)}function ca(h){var d=h;do{if((d.flags&32768)!==0){L0(d,Wa);return}h=d.return;var A=rb(d.alternate,d,ir);if(A!==null){ze=A;return}if(d=d.sibling,d!==null){ze=d;return}ze=d=h}while(d!==null);ci===0&&(ci=5)}function L0(h,d){do{var A=YM(h.alternate,h);if(A!==null){A.flags&=32767,ze=A;return}if(A=h.return,A!==null&&(A.flags|=32768,A.subtreeFlags=0,A.deletions=null),!d&&(h=h.sibling,h!==null)){ze=h;return}ze=h=A}while(h!==null);ci=6,ze=null}function Xc(h,d,A,C,L,O,K,at,At,Ht){var $t=Qe.T,de=Wl();try{er(2),Qe.T=null,ub(h,d,A,C,de,L,O,K,at,At,Ht)}finally{Qe.T=$t,er(de)}}function ub(h,d,A,C,L,O,K,at){do po();while(fl!==null);if((Pn&6)!==0)throw Error(s(327));var At=h.finishedWork;if(C=h.finishedLanes,At===null)return null;if(h.finishedWork=null,h.finishedLanes=0,At===h.current)throw Error(s(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var Ht=At.lanes|At.childLanes;if(Ht|=Ao,lt(h,C,Ht,O,K,at),h===qn&&(ze=qn=null,Sn=0),(At.subtreeFlags&10256)===0&&(At.flags&10256)===0||Eo||(Eo=!0,uu=Ht,r1=A,jl(Z0,function(){return po(),null})),A=(At.flags&15990)!==0,(At.subtreeFlags&15990)!==0||A?(A=Qe.T,Qe.T=null,O=Wl(),er(2),K=Pn,Pn|=4,Lp(h,At),Yy(At,h),pb(h.containerInfo),h.current=At,S0(h,At.alternate,At),K0(),Pn=K,er(O),Qe.T=A):h.current=At,Eo?(Eo=!1,fl=h,oh=C):e2(h,Ht),Ht=h.pendingLanes,Ht===0&&(cu=null),j(At.stateNode),qt(h),d!==null)for(L=h.onRecoverableError,At=0;At<d.length;At++)Ht=d[At],L(Ht.value,{componentStack:Ht.stack});return(oh&3)!==0&&po(),Ht=h.pendingLanes,(C&4194218)!==0&&(Ht&42)!==0?h===a1?Wf++:(Wf=0,a1=h):Wf=0,$(0),null}function e2(h,d){(h.pooledCacheLanes&=d)===0&&(d=h.pooledCache,d!=null&&(h.pooledCache=null,Tp(d)))}function po(){if(fl!==null){var h=fl,d=uu;uu=0;var A=dt(oh),C=32>A?32:A;A=Qe.T;var L=Wl();try{if(er(C),Qe.T=null,fl===null)var O=!1;else{C=r1,r1=null;var K=fl,at=oh;if(fl=null,oh=0,(Pn&6)!==0)throw Error(s(331));var At=Pn;if(Pn|=4,C0(K.current),Wy(K,K.current,at,C),Pn=At,$(0,!1),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Qi,K)}catch{}O=!0}return O}finally{er(L),Qe.T=A,e2(h,d)}}return!1}function Tf(h,d,A){d=_t(A,d),d=yf(h.stateNode,d,2),h=Te(h,d,2),h!==null&&(X(h,2),qt(h))}function jn(h,d,A){if(h.tag===3)Tf(h,h,A);else for(;d!==null;){if(d.tag===3){Tf(d,h,A);break}else if(d.tag===1){var C=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(cu===null||!cu.has(C))){h=_t(A,h),A=Ny(2),C=Te(d,A,2),C!==null&&(Xx(A,C,d,h),X(C,2),qt(C));break}}d=d.return}}function Vu(h,d,A){var C=h.pingCache;if(C===null){C=h.pingCache=new Ya;var L=new Set;C.set(d,L)}else L=C.get(d),L===void 0&&(L=new Set,C.set(d,L));L.has(A)||(ds=!0,L.add(A),h=n2.bind(null,h,d,A),d.then(h,h))}function n2(h,d,A){var C=h.pingCache;C!==null&&C.delete(d),h.pingedLanes|=h.suspendedLanes&A,h.warmLanes&=~A,qn===h&&(Sn&A)===A&&(ci===4||ci===3&&(Sn&62914560)===Sn&&300>Va()-Er?(Pn&2)===0&&Fs(h,0):nm|=A,hl===Sn&&(hl=0)),qt(h)}function qc(h,d){d===0&&(d=U()),h=Vt(h,d),h!==null&&(X(h,d),qt(h))}function Ql(h){var d=h.memoizedState,A=0;d!==null&&(A=d.retryLane),qc(h,A)}function Yc(h,d){var A=0;switch(h.tag){case 13:var C=h.stateNode,L=h.memoizedState;L!==null&&(A=L.retryLane);break;case 19:C=h.stateNode;break;case 22:C=h.stateNode._retryCache;break;default:throw Error(s(314))}C!==null&&C.delete(d),qc(h,A)}function jl(h,d){return Jp(h,d)}function i2(h,d,A,C){this.tag=h,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Up(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Ha(h,d){var A=h.alternate;return A===null?(A=e(h.tag,d,h.key,h.mode),A.elementType=h.elementType,A.type=h.type,A.stateNode=h.stateNode,A.alternate=h,h.alternate=A):(A.pendingProps=d,A.type=h.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=h.flags&31457280,A.childLanes=h.childLanes,A.lanes=h.lanes,A.child=h.child,A.memoizedProps=h.memoizedProps,A.memoizedState=h.memoizedState,A.updateQueue=h.updateQueue,d=h.dependencies,A.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},A.sibling=h.sibling,A.index=h.index,A.ref=h.ref,A.refCleanup=h.refCleanup,A}function Pp(h,d){h.flags&=31457282;var A=h.alternate;return A===null?(h.childLanes=0,h.lanes=d,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=A.childLanes,h.lanes=A.lanes,h.child=A.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=A.memoizedProps,h.memoizedState=A.memoizedState,h.updateQueue=A.updateQueue,h.type=A.type,d=A.dependencies,h.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),h}function tl(h,d,A,C,L,O){var K=0;if(C=h,typeof h=="function")Up(h)&&(K=1);else if(typeof h=="string")K=ha&&ai?Yp(h,A,hs.current)?26:nl(h)?27:5:ha?Yp(h,A,hs.current)?26:5:ai&&nl(h)?27:5;else t:switch(h){case Wc:return Ii(A.children,L,O,d);case Gp:K=8,L|=24;break;case N0:return h=e(12,A,d,L|2),h.elementType=N0,h.lanes=O,h;case I0:return h=e(13,A,d,L),h.elementType=I0,h.lanes=O,h;case Lf:return h=e(19,A,d,L),h.elementType=Lf,h.lanes=O,h;case a2:return Fp(A,L,O,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case kp:case mo:K=10;break t;case r2:K=9;break t;case Vp:K=11;break t;case U0:K=14;break t;case Ga:K=16,C=null;break t}K=29,A=Error(s(130,h===null?"null":typeof h,"")),C=null}return d=e(K,A,d,L),d.elementType=h,d.type=C,d.lanes=O,d}function Ii(h,d,A,C){return h=e(7,h,C,d),h.lanes=A,h}function Fp(h,d,A,C){h=e(22,h,C,d),h.elementType=a2,h.lanes=A;var L={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var O=L._current;if(O===null)throw Error(s(456));if((L._pendingVisibility&2)===0){var K=Vt(O,2);K!==null&&(L._pendingVisibility|=2,xs(K,O,2))}},attach:function(){var O=L._current;if(O===null)throw Error(s(456));if((L._pendingVisibility&2)!==0){var K=Vt(O,2);K!==null&&(L._pendingVisibility&=-3,xs(K,O,2))}}};return h.stateNode=L,h}function D0(h,d,A){return h=e(6,h,null,d),h.lanes=A,h}function s2(h,d,A){return d=e(4,h.children!==null?h.children:[],h.key,d),d.lanes=A,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function WM(h,d,A,C,L,O,K,at){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Kc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=P(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P(0),this.hiddenUpdates=P(null),this.identifierPrefix=C,this.onUncaughtError=L,this.onCaughtError=O,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=at,this.incompleteTransitions=new Map}function hb(h,d,A,C,L,O,K,at,At,Ht,$t,de){return h=new WM(h,d,A,K,at,At,Ht,de),d=1,O===!0&&(d|=24),O=e(3,null,null,d),h.current=O,O.stateNode=h,d=Hc(),d.refCount++,h.pooledCache=d,d.refCount++,O.memoizedState={element:C,isDehydrated:A,cache:d},Jt(O),h}function ts(h){return h?(h=eu,h):eu}function B0(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(s(188)):(h=Object.keys(h).join(","),Error(s(268,h)));return h=_(d),h=h!==null?b(h):null,h===null?null:Of(h.stateNode)}function Cf(h,d,A,C,L,O){L=ts(L),C.context===null?C.context=L:C.pendingContext=L,C=Se(d),C.payload={element:A},O=O===void 0?null:O,O!==null&&(C.callback=O),A=Te(h,C,d),A!==null&&(xs(A,h,d),ce(A,h,d))}function wf(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var A=h.retryLane;h.retryLane=A!==0&&A<d?A:d}}function Hp(h,d){wf(h,d),(h=h.alternate)&&wf(h,d)}var tn={},Rf=e0(),ua=FO(),O0=Object.assign,KM=Symbol.for("react.element"),zp=Symbol.for("react.transitional.element"),za=Symbol.for("react.portal"),Wc=Symbol.for("react.fragment"),Gp=Symbol.for("react.strict_mode"),N0=Symbol.for("react.profiler"),kp=Symbol.for("react.provider"),r2=Symbol.for("react.consumer"),mo=Symbol.for("react.context"),Vp=Symbol.for("react.forward_ref"),I0=Symbol.for("react.suspense"),Lf=Symbol.for("react.suspense_list"),U0=Symbol.for("react.memo"),Ga=Symbol.for("react.lazy"),a2=Symbol.for("react.offscreen"),fb=Symbol.for("react.memo_cache_sentinel"),Xl=Symbol.iterator,o2=Symbol.for("react.client.reference"),Qe=Rf.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,el,ql,Qu=!1,Df=Array.isArray,l2=t.rendererVersion,Qp=t.rendererPackageName,Bf=t.extraDevToolsConfig,Of=t.getPublicInstance,db=t.getRootHostContext,Nf=t.getChildHostContext,P0=t.prepareForCommit,pb=t.resetAfterCommit,c2=t.createInstance,jp=t.appendInitialChild,Yl=t.finalizeInitialChildren,en=t.shouldSetTextContent,Zn=t.createTextInstance,es=t.scheduleTimeout,F0=t.cancelTimeout,Kc=t.noTimeout,Ar=t.isPrimaryRenderer;t.warnsIfNotActing;var us=t.supportsMutation,ka=t.supportsPersistence,Hs=t.supportsHydration,mb=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var ki=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var er=t.setCurrentUpdatePriority,Wl=t.getCurrentUpdatePriority,gb=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var vb=t.shouldAttemptEagerTransition,JM=t.detachDeletedInstance;t.requestPostPaintCallback;var u2=t.maySuspendCommit,H0=t.preloadInstance,h2=t.startSuspendingCommit,xr=t.suspendInstance,ns=t.waitForCommitToBeReady,Jc=t.NotPendingTransition,go=t.HostTransitionContext,z0=t.resetFormInstance;t.bindToConsole;var f2=t.supportsMicrotasks,Kl=t.scheduleMicrotask,Zc=t.supportsTestSelectors,d2=t.findFiberRoot,p2=t.getBoundingRect,yb=t.getTextContent,If=t.isHiddenSubtree,_b=t.matchAccessibilityRole,Ab=t.setFocusIfFocusable,xb=t.setupIntersectionObserver,bb=t.appendChild,m2=t.appendChildToContainer,Sb=t.commitTextUpdate,ZM=t.commitMount,Eb=t.commitUpdate,Mb=t.insertBefore,Tb=t.insertInContainerBefore,g2=t.removeChild,Cb=t.removeChildFromContainer,v2=t.resetTextContent,wb=t.hideInstance,Rb=t.hideTextInstance,Lb=t.unhideInstance,$M=t.unhideTextInstance,Db=t.clearContainer,Uf=t.cloneInstance,Xp=t.createContainerChildSet,y2=t.appendChildToContainerChildSet,G0=t.finalizeContainerChildren,Pf=t.replaceContainerChildren,_2=t.cloneHiddenInstance,A2=t.cloneHiddenTextInstance,k0=t.isSuspenseInstancePending,V0=t.isSuspenseInstanceFallback,Bb=t.getSuspenseInstanceFallbackErrorDetails,Ob=t.registerSuspenseInstanceRetry,x2=t.canHydrateFormStateMarker,Nb=t.isFormStateMarkerMatching,b2=t.getNextHydratableSibling,Q0=t.getFirstHydratableChild,Ib=t.getFirstHydratableChildWithinContainer,Ub=t.getFirstHydratableChildWithinSuspenseInstance,tT=t.canHydrateInstance,S2=t.canHydrateTextInstance,Pb=t.canHydrateSuspenseInstance,Fb=t.hydrateInstance,E2=t.hydrateTextInstance,Hb=t.hydrateSuspenseInstance,zb=t.getNextHydratableInstanceAfterSuspenseInstance,eT=t.commitHydratedContainer,nT=t.commitHydratedSuspenseInstance,Gb=t.clearSuspenseBoundary,qp=t.clearSuspenseBoundaryFromContainer,j0=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var X0=t.validateHydratableInstance,kb=t.validateHydratableTextInstance,ha=t.supportsResources,Yp=t.isHostHoistableType,q0=t.getHoistableRoot,M2=t.getResource,Vb=t.acquireResource,ju=t.releaseResource,Wp=t.hydrateHoistable,Kp=t.mountHoistable,Ff=t.unmountHoistable,Y0=t.createHoistableInstance,Qb=t.prepareToCommitHoistables,jb=t.mayResourceSuspendCommit,Xu=t.preloadResource,Xb=t.suspendResource,ai=t.supportsSingletons,vo=t.resolveSingletonInstance,$c=t.clearSingleton,qb=t.acquireSingletonInstance,tu=t.releaseSingletonInstance,nl=t.isHostSingletonType,Vi=[],Jl=-1,eu={},br=Math.clz32?Math.clz32:D,Yb=Math.log,Wb=Math.LN2,il=128,qu=4194304,Jp=ua.unstable_scheduleCallback,W0=ua.unstable_cancelCallback,Kb=ua.unstable_shouldYield,K0=ua.unstable_requestPaint,Va=ua.unstable_now,J0=ua.unstable_ImmediatePriority,Jb=ua.unstable_UserBlockingPriority,Z0=ua.unstable_NormalPriority,iT=ua.unstable_IdlePriority,Zb=ua.log,bs=ua.unstable_setDisableYieldValue,Qi=null,Vr=null,Qr=typeof Object.is=="function"?Object.is:nt,T2=new WeakMap,Yu=[],Wu=0,Ku=null,Hf=0,fa=[],da=0,nu=null,yo=1,_o="",hs=E(null),zf=E(null),sl=E(null),Ju=E(null),zs=null,Gs=null,Bn=!1,Qa=null,Ss=!1,Zp=Error(s(519)),ja=[],Zu=0,Ao=0,$p=null,Zl=null,$u=!1,pi=!1,C2=!1,Gf=0,kf=null,th=0,pa=0,eh=null,$l=!1,nh=!1,rl=Object.prototype.hasOwnProperty,Vf=Error(s(460)),tm=Error(s(474)),em={then:function(){}},iu=null,su=null,ru=0,au=ls(!0),al=ls(!1),mi=E(null),Qf=E(0),ma=E(null),oi=null,fs=E(0),tc=0,ln=null,Fe=null,Un=null,Xa=!1,ih=!1,ou=!1,$0=0,sh=0,Es=null,xo=0,t1=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Ui={readContext:Is,use:Rt,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useLayoutEffect:ti,useInsertionEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useSyncExternalStore:ti,useId:ti};Ui.useCacheRefresh=ti,Ui.useMemoCache=ti,Ui.useHostTransitionStatus=ti,Ui.useFormState=ti,Ui.useActionState=ti,Ui.useOptimistic=ti;var lu={readContext:Is,use:Rt,useCallback:function(h,d){return Y().memoizedState=[h,d===void 0?null:d],h},useContext:Is,useEffect:h0,useImperativeHandle:function(h,d,A){A=A!=null?A.concat([h]):null,pp(4194308,4,f0.bind(null,d,h),A)},useLayoutEffect:function(h,d){return pp(4194308,4,h,d)},useInsertionEffect:function(h,d){pp(4,2,h,d)},useMemo:function(h,d){var A=Y();d=d===void 0?null:d;var C=h();if(ou){tt(!0);try{h()}finally{tt(!1)}}return A.memoizedState=[C,d],C},useReducer:function(h,d,A){var C=Y();if(A!==void 0){var L=A(d);if(ou){tt(!0);try{A(d)}finally{tt(!1)}}}else L=d;return C.memoizedState=C.baseState=L,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:L},C.queue=h,h=h.dispatch=p0.bind(null,ln,h),[C.memoizedState,h]},useRef:function(h){var d=Y();return h={current:h},d.memoizedState=h},useState:function(h){h=yn(h);var d=h.queue,A=Oy.bind(null,ln,d);return d.dispatch=A,[h.memoizedState,A]},useDebugValue:Nc,useDeferredValue:function(h,d){var A=Y();return vp(A,h,d)},useTransition:function(){var h=yn(!1);return h=hf.bind(null,ln,h.queue,!0,!1),Y().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,d,A){var C=ln,L=Y();if(Bn){if(A===void 0)throw Error(s(407));A=A()}else{if(A=d(),qn===null)throw Error(s(349));(Sn&60)!==0||Oe(C,d,A)}L.memoizedState=A;var O={value:A,getSnapshot:d};return L.queue=O,h0(pn.bind(null,C,O,h),[h]),C.flags|=2048,gr(9,Ce.bind(null,C,O,A,d),{destroy:void 0},null),A},useId:function(){var h=Y(),d=qn.identifierPrefix;if(Bn){var A=_o,C=yo;A=(C&~(1<<32-br(C)-1)).toString(32)+A,d=":"+d+"R"+A,A=$0++,0<A&&(d+="H"+A.toString(32)),d+=":"}else A=xo++,d=":"+d+"r"+A.toString(32)+":";return h.memoizedState=d},useCacheRefresh:function(){return Y().memoizedState=By.bind(null,ln)}};lu.useMemoCache=yt,lu.useHostTransitionStatus=yp,lu.useFormState=ei,lu.useActionState=ei,lu.useOptimistic=function(h){var d=Y();d.memoizedState=d.baseState=h;var A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=A,d=df.bind(null,ln,!0,A),A.dispatch=d,[h,d]};var Sr={readContext:Is,use:Rt,useCallback:zu,useContext:Is,useEffect:Ry,useImperativeHandle:d0,useInsertionEffect:Qx,useLayoutEffect:gp,useMemo:Ly,useReducer:se,useRef:Ko,useState:function(){return se(Yt)},useDebugValue:Nc,useDeferredValue:function(h,d){var A=pt();return Dy(A,Fe.memoizedState,h,d)},useTransition:function(){var h=se(Yt)[0],d=pt().memoizedState;return[typeof h=="boolean"?h:Ct(h),d]},useSyncExternalStore:Ge,useId:ff};Sr.useCacheRefresh=Nl,Sr.useMemoCache=yt,Sr.useHostTransitionStatus=yp,Sr.useFormState=Os,Sr.useActionState=Os,Sr.useOptimistic=function(h,d){var A=pt();return bn(A,Fe,h,d)};var ga={readContext:Is,use:Rt,useCallback:zu,useContext:Is,useEffect:Ry,useImperativeHandle:d0,useInsertionEffect:Qx,useLayoutEffect:gp,useMemo:Ly,useReducer:Ae,useRef:Ko,useState:function(){return Ae(Yt)},useDebugValue:Nc,useDeferredValue:function(h,d){var A=pt();return Fe===null?vp(A,h,d):Dy(A,Fe.memoizedState,h,d)},useTransition:function(){var h=Ae(Yt)[0],d=pt().memoizedState;return[typeof h=="boolean"?h:Ct(h),d]},useSyncExternalStore:Ge,useId:ff};ga.useCacheRefresh=Nl,ga.useMemoCache=yt,ga.useHostTransitionStatus=yp,ga.useFormState=_s,ga.useActionState=_s,ga.useOptimistic=function(h,d){var A=pt();return Fe!==null?bn(A,Fe,h,d):(A.baseState=h,[h,A.queue.dispatch])};var ol={isMounted:function(h){return(h=h._reactInternals)?g(h)===h:!1},enqueueSetState:function(h,d,A){h=h._reactInternals;var C=Gi(),L=Se(C);L.payload=d,A!=null&&(L.callback=A),d=Te(h,L,C),d!==null&&(xs(d,h,C),ce(d,h,C))},enqueueReplaceState:function(h,d,A){h=h._reactInternals;var C=Gi(),L=Se(C);L.tag=1,L.payload=d,A!=null&&(L.callback=A),d=Te(h,L,C),d!==null&&(xs(d,h,C),ce(d,h,C))},enqueueForceUpdate:function(h,d){h=h._reactInternals;var A=Gi(),C=Se(A);C.tag=2,d!=null&&(C.callback=d),d=Te(h,C,A),d!==null&&(xs(d,h,A),ce(d,h,A))}},e1=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},n1=Error(s(461)),li=!1,i1={dehydrated:null,treeContext:null,retryLane:0},ec=E(null),bo=null,va=null,jf=typeof AbortController<"u"?AbortController:function(){var h=[],d=this.signal={aborted:!1,addEventListener:function(A,C){h.push(C)}};this.abort=function(){d.aborted=!0,h.forEach(function(A){return A()})}},$b=ua.unstable_scheduleCallback,tS=ua.unstable_NormalPriority,gi={$$typeof:mo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},w2=Qe.S;Qe.S=function(h,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&te(h,d),w2!==null&&w2(h,d)};var ll=E(null),cl=!1,Pi=!1,R2=!1,Xn=typeof WeakSet=="function"?WeakSet:Set,We=null,mn=!1,Ue=null,an=!1,Di=null,ya=8192,Xf={getCacheForType:function(h){var d=Is(gi),A=d.data.get(h);return A===void 0&&(A=h(),d.data.set(h,A)),A}},qf=0,qa=1,xi=2,So=3,ul=4;if(typeof Symbol=="function"&&Symbol.for){var rh=Symbol.for;qf=rh("selector.component"),qa=rh("selector.has_pseudo_class"),xi=rh("selector.role"),So=rh("selector.test_id"),ul=rh("selector.text")}var Ya=typeof WeakMap=="function"?WeakMap:Map,Pn=0,qn=null,ze=null,Sn=0,ni=0,nr=null,Wa=!1,_a=!1,ds=!1,ir=0,ci=0,Aa=0,nc=0,nm=0,xa=0,hl=0,ah=null,Fi=null,s1=!1,Er=0,Yf=1/0,im=null,cu=null,Eo=!1,fl=null,oh=0,uu=0,r1=null,Wf=0,a1=null;return tn.attemptContinuousHydration=function(h){if(h.tag===13){var d=Vt(h,67108864);d!==null&&xs(d,h,67108864),Hp(h,67108864)}},tn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=Gi(),A=Vt(h,d);A!==null&&xs(A,h,d),Hp(h,d)}},tn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var d=B(h.pendingLanes);if(d!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;d;){var A=1<<31-br(d);h.entanglements[1]|=A,d&=~A}qt(h),(Pn&6)===0&&(Yf=Va()+500,$(0))}}break;case 13:d=Vt(h,2),d!==null&&xs(d,h,2),Ip(),Hp(h,2)}},tn.batchedUpdates=function(h,d){return h(d)},tn.createComponentSelector=function(h){return{$$typeof:qf,value:h}},tn.createContainer=function(h,d,A,C,L,O,K,at,At,Ht){return hb(h,d,!1,null,A,C,O,K,at,At,Ht,null)},tn.createHasPseudoClassSelector=function(h){return{$$typeof:qa,value:h}},tn.createHydrationContainer=function(h,d,A,C,L,O,K,at,At,Ht,$t,de,ye){return h=hb(A,C,!0,h,L,O,at,At,Ht,$t,de,ye),h.context=ts(null),A=h.current,C=Gi(),L=Se(C),L.callback=d??null,Te(A,L,C),h.current.lanes=C,X(h,C),qt(h),h},tn.createPortal=function(h,d,A){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:za,key:C==null?null:""+C,children:h,containerInfo:d,implementation:A}},tn.createRoleSelector=function(h){return{$$typeof:xi,value:h}},tn.createTestNameSelector=function(h){return{$$typeof:So,value:h}},tn.createTextSelector=function(h){return{$$typeof:ul,value:h}},tn.defaultOnCaughtError=function(h){console.error(h)},tn.defaultOnRecoverableError=function(h){e1(h)},tn.defaultOnUncaughtError=function(h){e1(h)},tn.deferredUpdates=function(h){var d=Qe.T,A=Wl();try{return er(32),Qe.T=null,h()}finally{er(A),Qe.T=d}},tn.discreteUpdates=function(h,d,A,C,L){var O=Qe.T,K=Wl();try{return er(2),Qe.T=null,h(d,A,C,L)}finally{er(K),Qe.T=O,Pn===0&&(Yf=Va()+500)}},tn.findAllNodes=Op,tn.findBoundingRects=function(h,d){if(!Zc)throw Error(s(363));d=Op(h,d),h=[];for(var A=0;A<d.length;A++)h.push(p2(d[A]));for(d=h.length-1;0<d;d--){A=h[d];for(var C=A.x,L=C+A.width,O=A.y,K=O+A.height,at=d-1;0<=at;at--)if(d!==at){var At=h[at],Ht=At.x,$t=Ht+At.width,de=At.y,ye=de+At.height;if(C>=Ht&&O>=de&&L<=$t&&K<=ye){h.splice(d,1);break}else if(C!==Ht||A.width!==At.width||ye<O||de>K){if(!(O!==de||A.height!==At.height||$t<C||Ht>L)){Ht>C&&(At.width+=Ht-C,At.x=C),$t<L&&(At.width=L-Ht),h.splice(d,1);break}}else{de>O&&(At.height+=de-O,At.y=O),ye<K&&(At.height=K-de),h.splice(d,1);break}}}return h},tn.findHostInstance=B0,tn.findHostInstanceWithNoPortals=function(h){return h=_(h),h=h!==null?T(h):null,h===null?null:Of(h.stateNode)},tn.findHostInstanceWithWarning=function(h){return B0(h)},tn.flushPassiveEffects=po,tn.flushSyncFromReconciler=function(h){var d=Pn;Pn|=1;var A=Qe.T,C=Wl();try{if(er(2),Qe.T=null,h)return h()}finally{er(C),Qe.T=A,Pn=d,(Pn&6)===0&&$(0)}},tn.flushSyncWork=Ip,tn.focusWithin=function(h,d){if(!Zc)throw Error(s(363));for(h=Sf(h),d=Gr(h,d),d=Array.from(d),h=0;h<d.length;){var A=d[h++],C=A.tag;if(!If(A)){if((C===5||C===26||C===27)&&Ab(A.stateNode))return!0;for(A=A.child;A!==null;)d.push(A),A=A.sibling}}return!1},tn.getFindAllNodesFailureDescription=function(h,d){if(!Zc)throw Error(s(363));var A=0,C=[];h=[Sf(h),0];for(var L=0;L<h.length;){var O=h[L++],K=O.tag,at=h[L++],At=d[at];if((K!==5&&K!==26&&K!==27||!If(O))&&(Vc(O,At)&&(C.push(Jy(At)),at++,at>A&&(A=at)),at<d.length))for(O=O.child;O!==null;)h.push(O,at),O=O.sibling}if(A<d.length){for(h=[];A<d.length;A++)h.push(Jy(d[A]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},tn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return Of(h.child.stateNode);default:return h.child.stateNode}},tn.injectIntoDevTools=function(){var h={bundleType:0,version:l2,rendererPackageName:Qp,currentDispatcherRef:Qe,findFiberByHostInstance:mb,reconcilerVersion:"19.0.0"};if(Bf!==null&&(h.rendererConfig=Bf),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{Qi=d.inject(h),Vr=d}catch{}h=!!d.checkDCE}}return h},tn.isAlreadyRendering=function(){return!1},tn.observeVisibleRects=function(h,d,A,C){if(!Zc)throw Error(s(363));h=Op(h,d);var L=xb(h,A,C).disconnect;return{disconnect:function(){L()}}},tn.shouldError=function(){return null},tn.shouldSuspend=function(){return!1},tn.startHostTransition=function(h,d,A,C){if(h.tag!==5)throw Error(s(476));var L=Jo(h).queue;hf(h,L,d,Jc,A===null?n:function(){var O=Jo(h).next.queue;return Ic(h,O,{},Gi()),A(C)})},tn.updateContainer=function(h,d,A,C){var L=d.current,O=Gi();return Cf(L,O,h,d,A,C),O},tn.updateContainerSync=function(h,d,A,C){return d.tag===0&&po(),Cf(d.current,2,h,d,A,C),2},tn},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(I8)),I8.exports}var GL;function dY(){return GL||(GL=1,N8.exports=fY()),N8.exports}var pY=dY();const mY=IE(pY);var kL=FO();const gY=i=>typeof i=="object"&&typeof i.then=="function",Im=[];function HO(i,t,e=(n,s)=>n===s){if(i===t)return!0;if(!i||!t)return!1;const n=i.length;if(t.length!==n)return!1;for(let s=0;s<n;s++)if(!e(i[s],t[s]))return!1;return!0}function zO(i,t=null,e=!1,n={}){t===null&&(t=[i]);for(const r of Im)if(HO(t,r.keys,r.equal)){if(e)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!e)throw r.promise}const s={keys:t,equal:n.equal,remove:()=>{const r=Im.indexOf(s);r!==-1&&Im.splice(r,1)},promise:(gY(i)?i:i(...t)).then(r=>{s.response=r,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(r=>s.error=r)};if(Im.push(s),!e)throw s.promise}const vY=(i,t,e)=>zO(i,t,!1,e),yY=(i,t,e)=>void zO(i,t,!0,e),_Y=i=>{if(i===void 0||i.length===0)Im.splice(0,Im.length);else{const t=Im.find(e=>HO(i,e.keys,e.equal));t&&t.remove()}};function m7(i,t,e){if(!i)return;if(e(i)===!0)return i;let n=t?i.return:i.child;for(;n;){const s=m7(n,t,e);if(s)return s;n=t?null:n.sibling}}function GO(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const g7=GO(rt.createContext(null));class kO extends rt.Component{render(){return rt.createElement(g7.Provider,{value:this._reactInternals},this.props.children)}}function VO(){const i=rt.useContext(g7);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=rt.useId();return rt.useMemo(()=>{for(const e of[i,i==null?void 0:i.alternate]){if(!e)continue;const n=m7(e,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(n)return n}},[i,t])}const AY=Symbol.for("react.context"),xY=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===AY;function bY(){const i=VO(),[t]=rt.useState(()=>new Map);t.clear();let e=i;for(;e;){const n=e.type;xY(n)&&n!==g7&&!t.has(n)&&t.set(n,rt.use(GO(n))),e=e.return}return t}function SY(){const i=bY();return rt.useMemo(()=>Array.from(i.keys()).reduce((t,e)=>n=>rt.createElement(t,null,rt.createElement(e.Provider,{...n,value:i.get(e)})),t=>rt.createElement(kO,{...t})),[i])}function QO(i){let t=i.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const jO=i=>i&&i.isOrthographicCamera,EY=i=>i&&i.hasOwnProperty("current"),MY=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),Px=((i,t)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?rt.useLayoutEffect:rt.useEffect;function XO(i){const t=rt.useRef(i);return Px(()=>void(t.current=i),[i]),t}function TY(){const i=VO(),t=SY();return rt.useMemo(()=>({children:e})=>{const s=!!m7(i,!0,r=>r.type===rt.StrictMode)?rt.StrictMode:rt.Fragment;return k.jsx(s,{children:k.jsx(t,{children:e})})},[i,t])}function CY({set:i}){return Px(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const wY=(i=>(i=class extends rt.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function qO(i){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],e),i[1]):i}function D1(i){var t;return(t=i.__r3f)==null?void 0:t.root.getState()}const zi={obj:i=>i===Object(i)&&!zi.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,t,{arrays:e="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof t||!!i!=!!t)return!1;if(zi.str(i)||zi.num(i)||zi.boo(i))return i===t;const r=zi.obj(i);if(r&&n==="reference")return i===t;const a=zi.arr(i);if(a&&e==="reference")return i===t;if((a||r)&&i===t)return!0;let l;for(l in i)if(!(l in t))return!1;if(r&&e==="shallow"&&n==="shallow"){for(l in s?t:i)if(!zi.equ(i[l],t[l],{strict:s,objects:"reference"}))return!1}else for(l in s?t:i)if(i[l]!==t[l])return!1;if(zi.und(l)){if(a&&i.length===0&&t.length===0||r&&Object.keys(i).length===0&&Object.keys(t).length===0)return!0;if(i!==t)return!1}return!0}};function YO(i){const t={nodes:{},materials:{},meshes:{}};return i&&i.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}function RY(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const t in i){const e=i[t];(e==null?void 0:e.type)!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const WO=["children","key","ref"];function LY(i){const t={};for(const e in i)WO.includes(e)||(t[e]=i[e]);return t}function nE(i,t,e,n){const s=i;let r=s==null?void 0:s.__r3f;return r||(r={root:t,type:e,parent:null,children:[],props:LY(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function rA(i,t){let e=i[t];if(!t.includes("-"))return{root:i,key:t,target:e};e=i;for(const s of t.split("-")){var n;t=s,i=e,e=(n=e)==null?void 0:n[t]}return{root:i,key:t,target:e}}const VL=/-\d+$/;function iE(i,t){if(zi.str(t.props.attach)){if(VL.test(t.props.attach)){const s=t.props.attach.replace(VL,""),{root:r,key:a}=rA(i.object,s);Array.isArray(r[a])||(r[a]=[])}const{root:e,key:n}=rA(i.object,t.props.attach);t.previousAttach=e[n],e[n]=t.object}else zi.fun(t.props.attach)&&(t.previousAttach=t.props.attach(i.object,t.object))}function sE(i,t){if(zi.str(t.props.attach)){const{root:e,key:n}=rA(i.object,t.props.attach),s=t.previousAttach;s===void 0?delete e[n]:e[n]=s}else t.previousAttach==null||t.previousAttach(i.object,t.object);delete t.previousAttach}const U5=[...WO,"args","dispose","attach","object","onUpdate","dispose"],QL=new Map;function DY(i){let t=QL.get(i.constructor);try{t||(t=new i.constructor,QL.set(i.constructor,t))}catch{}return t}function BY(i,t){const e={};for(const n in t)if(!U5.includes(n)&&!zi.equ(t[n],i.props[n])){e[n]=t[n];for(const s in t)s.startsWith(`${n}-`)&&(e[s]=t[s])}for(const n in i.props){if(U5.includes(n)||t.hasOwnProperty(n))continue;const{root:s,key:r}=rA(i.object,n);if(s.constructor&&s.constructor.length===0){const a=DY(s);zi.und(a)||(e[r]=a[r])}else e[r]=0}return e}const OY=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],NY=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function gd(i,t){var e;const n=i.__r3f,s=n&&QO(n).getState(),r=n==null?void 0:n.eventCount;for(const l in t){let u=t[l];if(U5.includes(l))continue;if(n&&NY.test(l)){typeof u=="function"?n.handlers[l]=u:delete n.handlers[l],n.eventCount=Object.keys(n.handlers).length;continue}if(u===void 0)continue;let{root:f,key:m,target:g}=rA(i,l);if(g instanceof dy&&u instanceof dy)g.mask=u.mask;else if(g instanceof oe&&MY(u))g.set(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&u!=null&&u.constructor&&g.constructor===u.constructor)g.copy(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(u))typeof g.fromArray=="function"?g.fromArray(u):g.set(...u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof u=="number")typeof g.setScalar=="function"?g.setScalar(u):g.set(u);else{var a;f[m]=u,s&&!s.linear&&OY.includes(m)&&(a=f[m])!=null&&a.isTexture&&f[m].format===na&&f[m].type===Ws&&(f[m].colorSpace=Kn)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(e=n.object)!=null&&e.isObject3D&&r!==n.eventCount){const l=n.object,u=s.internal.interaction.indexOf(l);u>-1&&s.internal.interaction.splice(u,1),n.eventCount&&l.raycast!==null&&s.internal.interaction.push(l)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&wy(n),i}function wy(i){var t;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const e=(t=i.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function IY(i,t){i.manual||(jO(i)?(i.left=t.width/-2,i.right=t.width/2,i.top=t.height/2,i.bottom=t.height/-2):i.aspect=t.width/t.height,i.updateProjectionMatrix())}const wa=i=>i==null?void 0:i.isObject3D;function u4(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function KO(i,t,e,n){const s=e.get(t);s&&(e.delete(t),e.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function UY(i,t){const{internal:e}=i.getState();e.interaction=e.interaction.filter(n=>n!==t),e.initialHits=e.initialHits.filter(n=>n!==t),e.hovered.forEach((n,s)=>{(n.eventObject===t||n.object===t)&&e.hovered.delete(s)}),e.capturedMap.forEach((n,s)=>{KO(e.capturedMap,t,n,s)})}function PY(i){function t(u){const{internal:f}=i.getState(),m=u.offsetX-f.initialClick[0],g=u.offsetY-f.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function e(u){return u.filter(f=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=f.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function n(u,f){const m=i.getState(),g=new Set,v=[],_=f?f(m.internal.interaction):m.internal.interaction;for(let S=0;S<_.length;S++){const w=D1(_[S]);w&&(w.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(u,m);function b(S){const w=D1(S);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var D;w.events.compute==null||w.events.compute(u,w,(D=w.previousRoot)==null?void 0:D.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(S,!0):[]}let T=_.flatMap(b).sort((S,w)=>{const D=D1(S.object),B=D1(w.object);return!D||!B?S.distance-w.distance:B.events.priority-D.events.priority||S.distance-w.distance}).filter(S=>{const w=u4(S);return g.has(w)?!1:(g.add(w),!0)});m.events.filter&&(T=m.events.filter(T,m));for(const S of T){let w=S.object;for(;w;){var E;(E=w.__r3f)!=null&&E.eventCount&&v.push({...S,eventObject:w}),w=w.parent}}if("pointerId"in u&&m.internal.capturedMap.has(u.pointerId))for(let S of m.internal.capturedMap.get(u.pointerId).values())g.has(u4(S.intersection))||v.push(S.intersection);return v}function s(u,f,m,g){if(u.length){const v={stopped:!1};for(const _ of u){let b=D1(_.object);if(b||_.object.traverseAncestors(T=>{const E=D1(T);if(E)return b=E,!1}),b){const{raycaster:T,pointer:E,camera:S,internal:w}=b,D=new et(E.x,E.y,0).unproject(S),B=U=>{var P,X;return(P=(X=w.capturedMap.get(U))==null?void 0:X.has(_.eventObject))!=null?P:!1},N=U=>{const P={intersection:_,target:f.target};w.capturedMap.has(U)?w.capturedMap.get(U).set(_.eventObject,P):w.capturedMap.set(U,new Map([[_.eventObject,P]])),f.target.setPointerCapture(U)},I=U=>{const P=w.capturedMap.get(U);P&&KO(w.capturedMap,_.eventObject,P,U)};let F={};for(let U in f){let P=f[U];typeof P!="function"&&(F[U]=P)}let z={..._,...F,pointer:E,intersections:u,stopped:v.stopped,delta:m,unprojectedPoint:D,ray:T.ray,camera:S,stopPropagation(){const U="pointerId"in f&&w.capturedMap.get(f.pointerId);if((!U||U.has(_.eventObject))&&(z.stopped=v.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(P=>P.eventObject===_.eventObject))){const P=u.slice(0,u.indexOf(_));r([...P,_])}},target:{hasPointerCapture:B,setPointerCapture:N,releasePointerCapture:I},currentTarget:{hasPointerCapture:B,setPointerCapture:N,releasePointerCapture:I},nativeEvent:f};if(g(z),v.stopped===!0)break}}}return u}function r(u){const{internal:f}=i.getState();for(const m of f.hovered.values())if(!u.length||!u.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const v=m.eventObject.__r3f;if(f.hovered.delete(u4(m)),v!=null&&v.eventCount){const _=v.handlers,b={...m,intersections:u};_.onPointerOut==null||_.onPointerOut(b),_.onPointerLeave==null||_.onPointerLeave(b)}}}function a(u,f){for(let m=0;m<f.length;m++){const g=f[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return f=>{const{internal:m}=i.getState();"pointerId"in f&&m.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(f.pointerId)&&(m.capturedMap.delete(f.pointerId),r([]))})}}return function(m){const{onPointerMissed:g,internal:v}=i.getState();v.lastEvent.current=m;const _=u==="onPointerMove",b=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",E=n(m,_?e:void 0),S=b?t(m):0;u==="onPointerDown"&&(v.initialClick=[m.offsetX,m.offsetY],v.initialHits=E.map(D=>D.eventObject)),b&&!E.length&&S<=2&&(a(m,v.interaction),g&&g(m)),_&&r(E);function w(D){const B=D.eventObject,N=B.__r3f;if(!(N!=null&&N.eventCount))return;const I=N.handlers;if(_){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const F=u4(D),z=v.hovered.get(F);z?z.stopped&&D.stopPropagation():(v.hovered.set(F,D),I.onPointerOver==null||I.onPointerOver(D),I.onPointerEnter==null||I.onPointerEnter(D))}I.onPointerMove==null||I.onPointerMove(D)}else{const F=I[u];F?(!b||v.initialHits.includes(B))&&(a(m,v.interaction.filter(z=>!v.initialHits.includes(z))),F(D)):b&&v.initialHits.includes(B)&&a(m,v.interaction.filter(z=>!v.initialHits.includes(z)))}}s(E,m,S,w)}}return{handlePointer:l}}const jL=i=>!!(i!=null&&i.render),JO=rt.createContext(null),FY=(i,t)=>{const e=uY((l,u)=>{const f=new et,m=new et,g=new et;function v(S=u().camera,w=m,D=u().size){const{width:B,height:N,top:I,left:F}=D,z=B/N;w.isVector3?g.copy(w):g.set(...w);const U=S.getWorldPosition(f).distanceTo(g);if(jO(S))return{width:B/S.zoom,height:N/S.zoom,top:I,left:F,factor:1,distance:U,aspect:z};{const P=S.fov*Math.PI/180,X=2*Math.tan(P/2)*U,lt=X*(B/N);return{width:lt,height:X,top:I,left:F,factor:B/lt,distance:U,aspect:z}}}let _;const b=S=>l(w=>({performance:{...w.performance,current:S}})),T=new Pt;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(S=1)=>i(u(),S),advance:(S,w)=>t(S,w,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new c7,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=u();_&&clearTimeout(_),S.performance.current!==S.performance.min&&b(S.performance.min),_=setTimeout(()=>b(u().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:S=>l(w=>({...w,events:{...w.events,...S}})),setSize:(S,w,D=0,B=0)=>{const N=u().camera,I={width:S,height:w,top:D,left:B};l(F=>({size:I,viewport:{...F.viewport,...v(N,m,I)}}))},setDpr:S=>l(w=>{const D=qO(S);return{viewport:{...w.viewport,dpr:D,initialDpr:w.viewport.initialDpr||D}}}),setFrameloop:(S="always")=>{const w=u().clock;w.stop(),w.elapsedTime=0,S!=="never"&&(w.start(),w.elapsedTime=0),l(()=>({frameloop:S}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:rt.createRef(),active:!1,frames:0,priority:0,subscribe:(S,w,D)=>{const B=u().internal;return B.priority=B.priority+(w>0?1:0),B.subscribers.push({ref:S,priority:w,store:D}),B.subscribers=B.subscribers.sort((N,I)=>N.priority-I.priority),()=>{const N=u().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(w>0?1:0),N.subscribers=N.subscribers.filter(I=>I.ref!==S))}}}}}),n=e.getState();let s=n.size,r=n.viewport.dpr,a=n.camera;return e.subscribe(()=>{const{camera:l,size:u,viewport:f,gl:m,set:g}=e.getState();if(u.width!==s.width||u.height!==s.height||f.dpr!==r){s=u,r=f.dpr,IY(l,u),f.dpr>0&&m.setPixelRatio(f.dpr);const v=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(u.width,u.height,v)}l!==a&&(a=l,g(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),e.subscribe(l=>i(l)),e};function ZO(){const i=rt.useContext(JO);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function SM(i=e=>e,t){return ZO()(i,t)}function EM(i,t=0){const e=ZO(),n=e.getState().internal.subscribe,s=XO(i);return Px(()=>n(s,t,e),[t,n,e]),null}function HY(i){return rt.useMemo(()=>YO(i),[i])}const XL=new WeakMap,zY=i=>{var t;return typeof i=="function"&&(i==null||(t=i.prototype)==null?void 0:t.constructor)===i};function $O(i,t){return function(e,...n){let s;return zY(e)?(s=XL.get(e),s||(s=new e,XL.set(e,s))):s=e,i&&i(s),Promise.all(n.map(r=>new Promise((a,l)=>s.load(r,u=>{wa(u==null?void 0:u.scene)&&Object.assign(u,YO(u.scene)),a(u)},t,u=>l(new Error(`Could not load ${r}: ${u==null?void 0:u.message}`))))))}}function Fx(i,t,e,n){const s=Array.isArray(t)?t:[t],r=vY($O(e,n),[i,...s],{equal:zi.equ});return Array.isArray(t)?r:r[0]}Fx.preload=function(i,t,e){const n=Array.isArray(t)?t:[t];return yY($O(e),[i,...n])};Fx.clear=function(i,t){const e=Array.isArray(t)?t:[t];return _Y([i,...e])};function GY(i){const t=mY(i);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:rt.version}),t}const tN=0,gy={},kY=/^three(?=[A-Z])/,MM=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let VY=0;const QY=i=>typeof i=="function";function eN(i){if(QY(i)){const t=`${VY++}`;return gy[t]=i,t}else Object.assign(gy,i)}function nN(i,t){const e=MM(i),n=gy[e];if(i!=="primitive"&&!n)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function jY(i,t,e){var n;return i=MM(i)in gy?i:i.replace(kY,""),nN(i,t),i==="primitive"&&(n=t.object)!=null&&n.__r3f&&delete t.object.__r3f,nE(t.object,e,i,t)}function XY(i){if(!i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?sE(i.parent,i):wa(i.object)&&(i.object.visible=!1),i.isHidden=!0,wy(i)}}function iN(i){if(i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?iE(i.parent,i):wa(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,wy(i)}}function v7(i,t,e){const n=t.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!t.object){var s,r;const a=gy[MM(t.type)];t.object=(s=t.props.object)!=null?s:new a(...(r=t.props.args)!=null?r:[]),t.object.__r3f=t}if(gd(t.object,t.props),t.props.attach)iE(i,t);else if(wa(t.object)&&wa(i.object)){const a=i.object.children.indexOf(e==null?void 0:e.object);if(e&&a!==-1){const l=i.object.children.indexOf(t.object);if(l!==-1){i.object.children.splice(l,1);const u=l<a?a-1:a;i.object.children.splice(u,0,t.object)}else t.object.parent=i.object,i.object.children.splice(a,0,t.object),t.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:t.object})}else i.object.add(t.object)}for(const a of t.children)v7(t,a);wy(t)}}function F8(i,t){t&&(t.parent=i,i.children.push(t),v7(i,t))}function qL(i,t,e){if(!t||!e)return;t.parent=i;const n=i.children.indexOf(e);n!==-1?i.children.splice(n,0,t):i.children.push(t),v7(i,t,e)}function sN(i){if(typeof i.dispose=="function"){const t=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():kL.unstable_scheduleCallback(kL.unstable_IdlePriority,t)}}function P5(i,t,e){if(!t)return;t.parent=null;const n=i.children.indexOf(t);n!==-1&&i.children.splice(n,1),t.props.attach?sE(i,t):wa(t.object)&&wa(i.object)&&(i.object.remove(t.object),UY(QO(t),t.object));const s=t.props.dispose!==null&&e!==!1;for(let r=t.children.length-1;r>=0;r--){const a=t.children[r];P5(t,a,s)}t.children.length=0,delete t.object.__r3f,s&&t.type!=="primitive"&&t.object.type!=="Scene"&&sN(t.object),e===void 0&&wy(t)}function qY(i,t){for(const e of[i,i.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const n=e.ref(t);typeof n=="function"&&(e.refCleanup=n)}else e.ref&&(e.ref.current=t)}const N4=[];function YY(){for(const[e]of N4){const n=e.parent;if(n){e.props.attach?sE(n,e):wa(e.object)&&wa(n.object)&&n.object.remove(e.object);for(const s of e.children)s.props.attach?sE(e,s):wa(s.object)&&wa(e.object)&&e.object.remove(s.object)}e.isHidden&&iN(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&sN(e.object)}for(const[e,n,s]of N4){e.props=n;const r=e.parent;if(r){var i,t;const a=gy[MM(e.type)];e.object=(i=e.props.object)!=null?i:new a(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,qY(s,e.object),gd(e.object,e.props),e.props.attach?iE(r,e):wa(e.object)&&wa(r.object)&&r.object.add(e.object);for(const l of e.children)l.props.attach?iE(e,l):wa(l.object)&&wa(e.object)&&e.object.add(l.object);wy(e)}}N4.length=0}const H8=()=>{},YL={};let h4=tN;const WY=0,KY=4,F5=GY({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:jY,removeChild:P5,appendChild:F8,appendInitialChild:F8,insertBefore:qL,appendChildToContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||F8(e,t)},removeChildFromContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||P5(e,t)},insertInContainerBefore(i,t,e){const n=i.getState().scene.__r3f;!t||!e||!n||qL(n,t,e)},getRootHostContext:()=>YL,getChildHostContext:()=>YL,commitUpdate(i,t,e,n,s){var r,a,l;nN(t,n);let u=!1;if((i.type==="primitive"&&e.object!==n.object||((r=n.args)==null?void 0:r.length)!==((a=e.args)==null?void 0:a.length)||(l=n.args)!=null&&l.some((m,g)=>{var v;return m!==((v=e.args)==null?void 0:v[g])}))&&(u=!0),u)N4.push([i,{...n},s]);else{const m=BY(i,n);Object.keys(m).length&&(Object.assign(i.props,m),gd(i.object,m))}(s.sibling===null||(s.flags&KY)===WY)&&YY()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>nE(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:XY,unhideInstance:iN,createTextInstance:H8,hideTextInstance:H8,unhideTextInstance:H8,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:rt.createContext(null),setCurrentUpdatePriority(i){h4=i},getCurrentUpdatePriority(){return h4},resolveUpdatePriority(){var i;if(h4!==tN)return h4;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return O4.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return O4.ContinuousEventPriority;default:return O4.DefaultEventPriority}},resetFormInstance(){}}),jg=new Map,B1={objects:"shallow",strict:!1};function JY(i,t){if(!t&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:e,height:n,top:s,left:r}=i.parentElement.getBoundingClientRect();return{width:e,height:n,top:s,left:r}}else if(!t&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function ZY(i){const t=jg.get(i),e=t==null?void 0:t.fiber,n=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=n||FY(G5,KL),a=e||F5.createContainer(r,O4.ConcurrentRoot,null,!1,null,"",s,s,s,null);t||jg.set(i,{fiber:a,store:r});let l,u,f=!1,m=null;return{async configure(g={}){let v;m=new Promise(ot=>v=ot);let{gl:_,size:b,scene:T,events:E,onCreated:S,shadows:w=!1,linear:D=!1,flat:B=!1,legacy:N=!1,orthographic:I=!1,frameloop:F="always",dpr:z=[1,2],performance:U,raycaster:P,camera:X,onPointerMissed:lt}=g,it=r.getState(),ut=it.gl;if(!it.gl){const ot={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},xt=typeof _=="function"?await _(ot):_;jL(xt)?ut=xt:ut=new UO({...ot,..._}),it.set({gl:ut})}let dt=it.raycaster;dt||it.set({raycaster:dt=new CO});const{params:j,...tt}=P||{};if(zi.equ(tt,dt,B1)||gd(dt,{...tt}),zi.equ(j,dt.params,B1)||gd(dt,{params:{...dt.params,...j}}),!it.camera||it.camera===u&&!zi.equ(u,X,B1)){u=X;const ot=X==null?void 0:X.isCamera,xt=ot?X:I?new Ty(0,0,0,0,.1,1e3):new Rs(75,0,.1,1e3);ot||(xt.position.z=5,X&&(gd(xt,X),xt.manual||("aspect"in X||"left"in X||"right"in X||"bottom"in X||"top"in X)&&(xt.manual=!0,xt.updateProjectionMatrix())),!it.camera&&!(X!=null&&X.rotation)&&xt.lookAt(0,0,0)),it.set({camera:xt}),dt.camera=xt}if(!it.scene){let ot;T!=null&&T.isScene?(ot=T,nE(ot,r,"",{})):(ot=new tA,nE(ot,r,"",{}),T&&gd(ot,T)),it.set({scene:ot})}E&&!it.events.handlers&&it.set({events:E(r)});const nt=JY(i,b);if(zi.equ(nt,it.size,B1)||it.setSize(nt.width,nt.height,nt.top,nt.left),z&&it.viewport.dpr!==qO(z)&&it.setDpr(z),it.frameloop!==F&&it.setFrameloop(F),it.onPointerMissed||it.set({onPointerMissed:lt}),U&&!zi.equ(U,it.performance,B1)&&it.set(ot=>({performance:{...ot.performance,...U}})),!it.xr){var _t;const ot=(ct,wt)=>{const Bt=r.getState();Bt.frameloop!=="never"&&KL(ct,!0,Bt,wt)},xt=()=>{const ct=r.getState();ct.gl.xr.enabled=ct.gl.xr.isPresenting,ct.gl.xr.setAnimationLoop(ct.gl.xr.isPresenting?ot:null),ct.gl.xr.isPresenting||G5(ct)},Et={connect(){const ct=r.getState().gl;ct.xr.addEventListener("sessionstart",xt),ct.xr.addEventListener("sessionend",xt)},disconnect(){const ct=r.getState().gl;ct.xr.removeEventListener("sessionstart",xt),ct.xr.removeEventListener("sessionend",xt)}};typeof((_t=ut.xr)==null?void 0:_t.addEventListener)=="function"&&Et.connect(),it.set({xr:Et})}if(ut.shadowMap){const ot=ut.shadowMap.enabled,xt=ut.shadowMap.type;if(ut.shadowMap.enabled=!!w,zi.boo(w))ut.shadowMap.type=L_;else if(zi.str(w)){var J;const Et={basic:jD,percentage:QE,soft:L_,variance:lc};ut.shadowMap.type=(J=Et[w])!=null?J:L_}else zi.obj(w)&&Object.assign(ut.shadowMap,w);(ot!==ut.shadowMap.enabled||xt!==ut.shadowMap.type)&&(ut.shadowMap.needsUpdate=!0)}return Fn.enabled=!N,f||(ut.outputColorSpace=D?Fu:Kn,ut.toneMapping=B?Rc:Tw),it.legacy!==N&&it.set(()=>({legacy:N})),it.linear!==D&&it.set(()=>({linear:D})),it.flat!==B&&it.set(()=>({flat:B})),_&&!zi.fun(_)&&!jL(_)&&!zi.equ(_,ut,B1)&&gd(ut,_),l=S,f=!0,v(),this},render(g){return!f&&!m&&this.configure(),m.then(()=>{F5.updateContainer(k.jsx($Y,{store:r,children:g,onCreated:l,rootElement:i}),a,null,()=>{})}),r},unmount(){rN(i)}}}function $Y({store:i,children:t,onCreated:e,rootElement:n}){return Px(()=>{const s=i.getState();s.set(r=>({internal:{...r.internal,active:!0}})),e&&e(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),k.jsx(JO.Provider,{value:i,children:t})}function rN(i,t){const e=jg.get(i),n=e==null?void 0:e.fiber;if(n){const s=e==null?void 0:e.store.getState();s&&(s.internal.active=!1),F5.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var r,a,l,u;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(a=r.renderLists)==null||a.dispose==null||a.dispose(),(l=s.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=s.gl)!=null&&u.xr&&s.xr.disconnect(),RY(s.scene),jg.delete(i)}catch{}},500)})}}const tW=new Set,eW=new Set,nW=new Set;function z8(i,t){if(i.size)for(const{callback:e}of i.values())e(t)}function H_(i,t){switch(i){case"before":return z8(tW,t);case"after":return z8(eW,t);case"tail":return z8(nW,t)}}let G8,k8;function H5(i,t,e){let n=t.clock.getDelta();t.frameloop==="never"&&typeof i=="number"&&(n=i-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=i),G8=t.internal.subscribers;for(let s=0;s<G8.length;s++)k8=G8[s],k8.ref.current(k8.store.getState(),n,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let rE=!1,z5=!1,V8,WL,O1;function aN(i){WL=requestAnimationFrame(aN),rE=!0,V8=0,H_("before",i),z5=!0;for(const e of jg.values()){var t;O1=e.store.getState(),O1.internal.active&&(O1.frameloop==="always"||O1.internal.frames>0)&&!((t=O1.gl.xr)!=null&&t.isPresenting)&&(V8+=H5(i,O1))}if(z5=!1,H_("after",i),V8===0)return H_("tail",i),rE=!1,cancelAnimationFrame(WL)}function G5(i,t=1){var e;if(!i)return jg.forEach(n=>G5(n.store.getState(),t));(e=i.gl.xr)!=null&&e.isPresenting||!i.internal.active||i.frameloop==="never"||(t>1?i.internal.frames=Math.min(60,i.internal.frames+t):z5?i.internal.frames=2:i.internal.frames=1,rE||(rE=!0,requestAnimationFrame(aN)))}function KL(i,t=!0,e,n){if(t&&H_("before",i),e)H5(i,e,n);else for(const s of jg.values())H5(i,s.store.getState());t&&H_("after",i)}const Q8={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function iW(i){const{handlePointer:t}=PY(i);return{priority:1,enabled:!0,compute(e,n,s){n.pointer.set(e.offsetX/n.size.width*2-1,-(e.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(Q8).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var e;const{events:n,internal:s}=i.getState();(e=s.lastEvent)!=null&&e.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:e=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(r=>({events:{...r.events,connected:e}})),s.handlers)for(const r in s.handlers){const a=s.handlers[r],[l,u]=Q8[r];e.addEventListener(l,a,{passive:u})}},disconnect:()=>{const{set:e,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const r=n.handlers[s],[a]=Q8[s];n.connected.removeEventListener(a,r)}e(s=>({events:{...s.events,connected:void 0}}))}}}}function JL(i,t){let e;return(...n)=>{window.clearTimeout(e),e=window.setTimeout(()=>i(...n),t)}}function sW({debounce:i,scroll:t,polyfill:e,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,a]=rt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=rt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),u=i?typeof i=="number"?i:i.scroll:null,f=i?typeof i=="number"?i:i.resize:null,m=rt.useRef(!1);rt.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,v,_]=rt.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:w,top:D,width:B,height:N,bottom:I,right:F,x:z,y:U}=l.current.element.getBoundingClientRect(),P={left:w,top:D,width:B,height:N,bottom:I,right:F,x:z,y:U};l.current.element instanceof HTMLElement&&n&&(P.height=l.current.element.offsetHeight,P.width=l.current.element.offsetWidth),Object.freeze(P),m.current&&!lW(l.current.lastBounds,P)&&a(l.current.lastBounds=P)};return[S,f?JL(S,f):S,u?JL(S,u):S]},[a,n,u,f]);function b(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",_,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function T(){l.current.element&&(l.current.resizeObserver=new s(_),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",_,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const E=S=>{!S||S===l.current.element||(b(),l.current.element=S,l.current.scrollContainers=oN(S),T())};return aW(_,!!t),rW(v),rt.useEffect(()=>{b(),T()},[t,_,v]),rt.useEffect(()=>b,[]),[E,r,g]}function rW(i){rt.useEffect(()=>{const t=i;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[i])}function aW(i,t){rt.useEffect(()=>{if(t){const e=i;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[i,t])}function oN(i){const t=[];if(!i||i===document.body)return t;const{overflow:e,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[e,n,s].some(r=>r==="auto"||r==="scroll")&&t.push(i),[...t,...oN(i.parentElement)]}const oW=["x","y","top","bottom","left","right","width","height"],lW=(i,t)=>oW.every(e=>i[e]===t[e]);function cW({ref:i,children:t,fallback:e,resize:n,style:s,gl:r,events:a=iW,eventSource:l,eventPrefix:u,shadows:f,linear:m,flat:g,legacy:v,orthographic:_,frameloop:b,dpr:T,performance:E,raycaster:S,camera:w,scene:D,onPointerMissed:B,onCreated:N,...I}){rt.useMemo(()=>eN(Zq),[]);const F=TY(),[z,U]=sW({scroll:!0,debounce:{scroll:50,resize:0},...n}),P=rt.useRef(null),X=rt.useRef(null);rt.useImperativeHandle(i,()=>P.current);const lt=XO(B),[it,ut]=rt.useState(!1),[dt,j]=rt.useState(!1);if(it)throw it;if(dt)throw dt;const tt=rt.useRef(null);Px(()=>{const _t=P.current;if(U.width>0&&U.height>0&&_t){tt.current||(tt.current=ZY(_t));async function J(){await tt.current.configure({gl:r,scene:D,events:a,shadows:f,linear:m,flat:g,legacy:v,orthographic:_,frameloop:b,dpr:T,performance:E,raycaster:S,camera:w,size:U,onPointerMissed:(...ot)=>lt.current==null?void 0:lt.current(...ot),onCreated:ot=>{ot.events.connect==null||ot.events.connect(l?EY(l)?l.current:l:X.current),u&&ot.setEvents({compute:(xt,Et)=>{const ct=xt[u+"X"],wt=xt[u+"Y"];Et.pointer.set(ct/Et.size.width*2-1,-(wt/Et.size.height)*2+1),Et.raycaster.setFromCamera(Et.pointer,Et.camera)}}),N==null||N(ot)}}),tt.current.render(k.jsx(F,{children:k.jsx(wY,{set:j,children:k.jsx(rt.Suspense,{fallback:k.jsx(CY,{set:ut}),children:t??null})})}))}J()}}),rt.useEffect(()=>{const _t=P.current;if(_t)return()=>rN(_t)},[]);const nt=l?"none":"auto";return k.jsx("div",{ref:X,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:nt,...s},...I,children:k.jsx("div",{ref:z,style:{width:"100%",height:"100%"},children:k.jsx("canvas",{ref:P,style:{display:"block"},children:e})})})}function uW(i){return k.jsx(kO,{children:k.jsx(cW,{...i})})}const hW=i=>i;function fW(i,t=hW){const e=Ba.useSyncExternalStore(i.subscribe,()=>t(i.getState()),()=>t(i.getInitialState()));return Ba.useDebugValue(e),e}const ZL=i=>{const t=PO(i),e=n=>fW(t,n);return Object.assign(e,t),e},dW=i=>i?ZL(i):ZL;let n_=0;const pW=dW(i=>(q1.onStart=(t,e,n)=>{i({active:!0,item:t,loaded:e,total:n,progress:(e-n_)/(n-n_)*100})},q1.onLoad=()=>{i({active:!1})},q1.onError=t=>i(e=>({errors:[...e.errors,t]})),q1.onProgress=(t,e,n)=>{e===n&&(n_=n),i({active:!0,item:t,loaded:e,total:n,progress:(e-n_)/(n-n_)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),mW=parseInt(n0.replace(/\D+/g,""));function $L(i,t){if(t===bB)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===J3||t===Iw){let e=i.getIndex();if(e===null){const a=[],l=i.getAttribute("position");if(l!==void 0){for(let u=0;u<l.count;u++)a.push(u);i.setIndex(a),e=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=e.count-2,s=[];if(e)if(t===J3)for(let a=1;a<=n;a++)s.push(e.getX(0)),s.push(e.getX(a)),s.push(e.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(s.push(e.getX(a)),s.push(e.getX(a+1)),s.push(e.getX(a+2))):(s.push(e.getX(a+2)),s.push(e.getX(a+1)),s.push(e.getX(a)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=i.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}function lN(i,t,e={}){const n=new et,s=new Br,r=new et,a=new Ne,l=new Ne,u=new Ne;e.preserveMatrix=e.preserveMatrix!==void 0?e.preserveMatrix:!0,e.preservePosition=e.preservePosition!==void 0?e.preservePosition:!0,e.preserveHipPosition=e.preserveHipPosition!==void 0?e.preserveHipPosition:!1,e.useTargetMatrix=e.useTargetMatrix!==void 0?e.useTargetMatrix:!1,e.hip=e.hip!==void 0?e.hip:"hip",e.names=e.names||{};const f=t.isObject3D?t.skeleton.bones:aE(t),m=i.isObject3D?i.skeleton.bones:aE(i);let g,v,_,b,T;if(i.isObject3D?i.skeleton.pose():(e.useTargetMatrix=!0,e.preserveMatrix=!1),e.preservePosition){T=[];for(let E=0;E<m.length;E++)T.push(m[E].position.clone())}if(e.preserveMatrix){i.updateMatrixWorld(),i.matrixWorld.identity();for(let E=0;E<i.children.length;++E)i.children[E].updateMatrixWorld(!0)}if(e.offsets){g=[];for(let E=0;E<m.length;++E)v=m[E],_=e.names[v.name]||v.name,e.offsets[_]&&(v.matrix.multiply(e.offsets[_]),v.matrix.decompose(v.position,v.quaternion,v.scale),v.updateMatrixWorld()),g.push(v.matrixWorld.clone())}for(let E=0;E<m.length;++E){if(v=m[E],_=e.names[v.name]||v.name,b=cN(_,f),u.copy(v.matrixWorld),b){if(b.updateMatrixWorld(),e.useTargetMatrix?l.copy(b.matrixWorld):(l.copy(i.matrixWorld).invert(),l.multiply(b.matrixWorld)),r.setFromMatrixScale(l),l.scale(r.set(1/r.x,1/r.y,1/r.z)),u.makeRotationFromQuaternion(s.setFromRotationMatrix(l)),i.isObject3D){const S=m.indexOf(v),w=g?g[S]:a.copy(i.skeleton.boneInverses[S]).invert();u.multiply(w)}u.copyPosition(l)}v.parent&&v.parent.isBone?(v.matrix.copy(v.parent.matrixWorld).invert(),v.matrix.multiply(u)):v.matrix.copy(u),e.preserveHipPosition&&_===e.hip&&v.matrix.setPosition(n.set(0,v.position.y,0)),v.matrix.decompose(v.position,v.quaternion,v.scale),v.updateMatrixWorld()}if(e.preservePosition)for(let E=0;E<m.length;++E)v=m[E],_=e.names[v.name]||v.name,_!==e.hip&&v.position.copy(T[E]);e.preserveMatrix&&i.updateMatrixWorld(!0)}function gW(i,t,e,n={}){n.useFirstFramePosition=n.useFirstFramePosition!==void 0?n.useFirstFramePosition:!1,n.fps=n.fps!==void 0?n.fps:30,n.names=n.names||[],t.isObject3D||(t=yW(t));const s=Math.round(e.duration*(n.fps/1e3)*1e3),r=1/n.fps,a=[],l=new f7(t),u=aE(i.skeleton),f=[];let m,g,v,_,b;l.clipAction(e).play(),l.update(0),t.updateMatrixWorld();for(let T=0;T<s;++T){const E=T*r;lN(i,t,n);for(let S=0;S<u.length;++S)b=n.names[u[S].name]||u[S].name,v=cN(b,t.skeleton),v&&(g=u[S],_=f[S]=f[S]||{bone:g},n.hip===b&&(_.pos||(_.pos={times:new Float32Array(s),values:new Float32Array(s*3)}),n.useFirstFramePosition&&(T===0&&(m=g.position.clone()),g.position.sub(m)),_.pos.times[T]=E,g.position.toArray(_.pos.values,T*3)),_.quat||(_.quat={times:new Float32Array(s),values:new Float32Array(s*4)}),_.quat.times[T]=E,g.quaternion.toArray(_.quat.values,T*4));l.update(r),t.updateMatrixWorld()}for(let T=0;T<f.length;++T)_=f[T],_&&(_.pos&&a.push(new np(".bones["+_.bone.name+"].position",_.pos.times,_.pos.values)),a.push(new ep(".bones["+_.bone.name+"].quaternion",_.quat.times,_.quat.values)));return l.uncacheAction(e),new Qg(e.name,-1,a)}function vW(i){const t=new Map,e=new Map,n=i.clone();return uN(i,n,function(s,r){t.set(r,s),e.set(s,r)}),n.traverse(function(s){if(!s.isSkinnedMesh)return;const r=s,a=t.get(s),l=a.skeleton.bones;r.skeleton=a.skeleton.clone(),r.bindMatrix.copy(a.bindMatrix),r.skeleton.bones=l.map(function(u){return e.get(u)}),r.bind(r.skeleton,r.bindMatrix)}),n}function cN(i,t){for(let e=0,n=aE(t);e<n.length;e++)if(i===n[e].name)return n[e]}function aE(i){return Array.isArray(i)?i:i.bones}function yW(i){const t=new wO(i.bones[0]);return t.skeleton=i,t}function uN(i,t,e){e(i,t);for(let n=0;n<i.children.length;n++)uN(i.children[n],t.children[n],e)}const _W={retarget:lN,retargetClip:gW,clone:vW};function oE(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let t="";for(let e=0,n=i.length;e<n;e++)t+=String.fromCharCode(i[e]);try{return decodeURIComponent(escape(t))}catch{return t}}const Um="srgb",Zh="srgb-linear",t9=3001,AW=3e3;class y7 extends oa{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new MW(e)}),this.register(function(e){return new TW(e)}),this.register(function(e){return new IW(e)}),this.register(function(e){return new UW(e)}),this.register(function(e){return new PW(e)}),this.register(function(e){return new wW(e)}),this.register(function(e){return new RW(e)}),this.register(function(e){return new LW(e)}),this.register(function(e){return new DW(e)}),this.register(function(e){return new EW(e)}),this.register(function(e){return new BW(e)}),this.register(function(e){return new CW(e)}),this.register(function(e){return new NW(e)}),this.register(function(e){return new OW(e)}),this.register(function(e){return new bW(e)}),this.register(function(e){return new FW(e)}),this.register(function(e){return new HW(e)})}load(t,e,n,s){const r=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const f=Yd.extractUrlBase(t);a=Yd.resolveURL(f,this.path)}else a=Yd.extractUrlBase(t);this.manager.itemStart(t);const l=function(f){s?s(f):console.error(f),r.manager.itemError(t),r.manager.itemEnd(t)},u=new Qo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(f){try{r.parse(f,a,function(m){e(m),r.manager.itemEnd(t)},l)}catch(m){l(m)}},n,l)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,s){let r;const a={},l={};if(typeof t=="string")r=JSON.parse(t);else if(t instanceof ArrayBuffer)if(oE(new Uint8Array(t.slice(0,4)))===hN){try{a[Rn.KHR_BINARY_GLTF]=new zW(t)}catch(m){s&&s(m);return}r=JSON.parse(a[Rn.KHR_BINARY_GLTF].content)}else r=JSON.parse(oE(new Uint8Array(t)));else r=t;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new $W(r,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const m=this.pluginCallbacks[f](u);m.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[m.name]=m,a[m.name]=!0}if(r.extensionsUsed)for(let f=0;f<r.extensionsUsed.length;++f){const m=r.extensionsUsed[f],g=r.extensionsRequired||[];switch(m){case Rn.KHR_MATERIALS_UNLIT:a[m]=new SW;break;case Rn.KHR_DRACO_MESH_COMPRESSION:a[m]=new GW(r,this.dracoLoader);break;case Rn.KHR_TEXTURE_TRANSFORM:a[m]=new kW;break;case Rn.KHR_MESH_QUANTIZATION:a[m]=new VW;break;default:g.indexOf(m)>=0&&l[m]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+m+'".')}}u.setExtensions(a),u.setPlugins(l),u.parse(n,s)}parseAsync(t,e){const n=this;return new Promise(function(s,r){n.parse(t,e,s,r)})}}function xW(){let i={};return{get:function(t){return i[t]},add:function(t,e){i[t]=e},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const Rn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class bW{constructor(t){this.parser=t,this.name=Rn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,s=e.length;n<s;n++){const r=e[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let s=e.cache.get(n);if(s)return s;const r=e.json,u=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let f;const m=new oe(16777215);u.color!==void 0&&m.setRGB(u.color[0],u.color[1],u.color[2],Zh);const g=u.range!==void 0?u.range:0;switch(u.type){case"directional":f=new o7(m),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new a7(m),f.distance=g;break;case"spot":f=new r7(m),f.distance=g,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,f.angle=u.spot.outerConeAngle,f.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return f.position.set(0,0,0),f.decay=2,Ah(f,u),u.intensity!==void 0&&(f.intensity=u.intensity),f.name=e.createUniqueName(u.name||"light_"+t),s=Promise.resolve(f),e.cache.add(n,s),s}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,r=n.json.nodes[t],l=(r.extensions&&r.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return n._getNodeRef(e.cache,l,u)})}}class SW{constructor(){this.name=Rn.KHR_MATERIALS_UNLIT}getMaterialType(){return zo}extendParams(t,e,n){const s=[];t.color=new oe(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const a=r.baseColorFactor;t.color.setRGB(a[0],a[1],a[2],Zh),t.opacity=a[3]}r.baseColorTexture!==void 0&&s.push(n.assignTexture(t,"map",r.baseColorTexture,Um))}return Promise.all(s)}}class EW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(e.emissiveIntensity=r),Promise.resolve()}}class MW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];if(a.clearcoatFactor!==void 0&&(e.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&r.push(n.assignTexture(e,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(e,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const l=a.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Pt(l,l)}return Promise.all(r)}}class TW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_DISPERSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return e.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class CW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.iridescenceFactor!==void 0&&(e.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&r.push(n.assignTexture(e,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(e.iridescenceIOR=a.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&r.push(n.assignTexture(e,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(r)}}class wW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new oe(0,0,0),e.sheenRoughness=0,e.sheen=1;const a=s.extensions[this.name];if(a.sheenColorFactor!==void 0){const l=a.sheenColorFactor;e.sheenColor.setRGB(l[0],l[1],l[2],Zh)}return a.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&r.push(n.assignTexture(e,"sheenColorMap",a.sheenColorTexture,Um)),a.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(e,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(r)}}class RW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.transmissionFactor!==void 0&&(e.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&r.push(n.assignTexture(e,"transmissionMap",a.transmissionTexture)),Promise.all(r)}}class LW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];e.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&r.push(n.assignTexture(e,"thicknessMap",a.thicknessTexture)),e.attenuationDistance=a.attenuationDistance||1/0;const l=a.attenuationColor||[1,1,1];return e.attenuationColor=new oe().setRGB(l[0],l[1],l[2],Zh),Promise.all(r)}}class DW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return e.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class BW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];e.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&r.push(n.assignTexture(e,"specularIntensityMap",a.specularTexture));const l=a.specularColorFactor||[1,1,1];return e.specularColor=new oe().setRGB(l[0],l[1],l[2],Zh),a.specularColorTexture!==void 0&&r.push(n.assignTexture(e,"specularColorMap",a.specularColorTexture,Um)),Promise.all(r)}}class OW{constructor(t){this.parser=t,this.name=Rn.EXT_MATERIALS_BUMP}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return e.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&r.push(n.assignTexture(e,"bumpMap",a.bumpTexture)),Promise.all(r)}}class NW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.anisotropyStrength!==void 0&&(e.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(e.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&r.push(n.assignTexture(e,"anisotropyMap",a.anisotropyTexture)),Promise.all(r)}}class IW{constructor(t){this.parser=t,this.name=Rn.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,s=n.textures[t];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],a=e.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r.source,a)}}class UW{constructor(t){this.parser=t,this.name=Rn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,s=n.json,r=s.textures[t];if(!r.extensions||!r.extensions[e])return null;const a=r.extensions[e],l=s.images[a.source];let u=n.textureLoader;if(l.uri){const f=n.options.manager.getHandler(l.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(t,a.source,u);if(s.extensionsRequired&&s.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class PW{constructor(t){this.parser=t,this.name=Rn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,s=n.json,r=s.textures[t];if(!r.extensions||!r.extensions[e])return null;const a=r.extensions[e],l=s.images[a.source];let u=n.textureLoader;if(l.uri){const f=n.options.manager.getHandler(l.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(t,a.source,u);if(s.extensionsRequired&&s.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class FW{constructor(t){this.name=Rn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(l){const u=s.byteOffset||0,f=s.byteLength||0,m=s.count,g=s.byteStride,v=new Uint8Array(l,u,f);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(m,g,v,s.mode,s.filter).then(function(_){return _.buffer}):a.ready.then(function(){const _=new ArrayBuffer(m*g);return a.decodeGltfBuffer(new Uint8Array(_),m,g,v,s.mode,s.filter),_})})}else return null}}class HW{constructor(t){this.name=Rn.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const s=e.meshes[n.mesh];for(const f of s.primitives)if(f.mode!==yl.TRIANGLES&&f.mode!==yl.TRIANGLE_STRIP&&f.mode!==yl.TRIANGLE_FAN&&f.mode!==void 0)return null;const a=n.extensions[this.name].attributes,l=[],u={};for(const f in a)l.push(this.parser.getDependency("accessor",a[f]).then(m=>(u[f]=m,u[f])));return l.length<1?null:(l.push(this.parser.createNodeMesh(t)),Promise.all(l).then(f=>{const m=f.pop(),g=m.isGroup?m.children:[m],v=f[0].count,_=[];for(const b of g){const T=new Ne,E=new et,S=new Br,w=new et(1,1,1),D=new kw(b.geometry,b.material,v);for(let B=0;B<v;B++)u.TRANSLATION&&E.fromBufferAttribute(u.TRANSLATION,B),u.ROTATION&&S.fromBufferAttribute(u.ROTATION,B),u.SCALE&&w.fromBufferAttribute(u.SCALE,B),D.setMatrixAt(B,T.compose(E,S,w));for(const B in u)if(B==="_COLOR_0"){const N=u[B];D.instanceColor=new Gg(N.array,N.itemSize,N.normalized)}else B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&b.geometry.setAttribute(B,u[B]);Ln.prototype.copy.call(D,b),this.parser.assignFinalMaterial(D),_.push(D)}return m.isGroup?(m.clear(),m.add(..._),m):_[0]}))}}const hN="glTF",i_=12,e9={JSON:1313821514,BIN:5130562};class zW{constructor(t){this.name=Rn.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,i_);if(this.header={magic:oE(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==hN)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-i_,s=new DataView(t,i_);let r=0;for(;r<n;){const a=s.getUint32(r,!0);r+=4;const l=s.getUint32(r,!0);if(r+=4,l===e9.JSON){const u=new Uint8Array(t,i_+r,a);this.content=oE(u)}else if(l===e9.BIN){const u=i_+r;this.body=t.slice(u,u+a)}r+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GW{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Rn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,s=this.dracoLoader,r=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,l={},u={},f={};for(const m in a){const g=k5[m]||m.toLowerCase();l[g]=a[m]}for(const m in t.attributes){const g=k5[m]||m.toLowerCase();if(a[m]!==void 0){const v=n.accessors[t.attributes[m]],_=Z1[v.componentType];f[g]=_.name,u[g]=v.normalized===!0}}return e.getDependency("bufferView",r).then(function(m){return new Promise(function(g,v){s.decodeDracoFile(m,function(_){for(const b in _.attributes){const T=_.attributes[b],E=u[b];E!==void 0&&(T.normalized=E)}g(_)},l,f,Zh,v)})})}}class kW{constructor(){this.name=Rn.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class VW{constructor(){this.name=Rn.KHR_MESH_QUANTIZATION}}class fN extends My{constructor(t,e,n,s){super(t,e,n,s)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=t*s*3+s;for(let a=0;a!==s;a++)e[a]=n[r+a];return e}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=l*2,f=l*3,m=s-e,g=(n-e)/m,v=g*g,_=v*g,b=t*f,T=b-f,E=-2*_+3*v,S=_-v,w=1-E,D=S-v+g;for(let B=0;B!==l;B++){const N=a[T+B+l],I=a[T+B+u]*m,F=a[b+B+l],z=a[b+B]*m;r[B]=w*N+D*I+E*F+S*z}return r}}const QW=new Br;class jW extends fN{interpolate_(t,e,n,s){const r=super.interpolate_(t,e,n,s);return QW.fromArray(r).normalize().toArray(r),r}}const yl={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Z1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},n9={9728:os,9729:Ni,9984:XE,9985:K1,9986:Dm,9987:Tl},i9={33071:Ho,33648:oy,10497:$d},j8={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},k5={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...mW>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},cd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},XW={CUBICSPLINE:void 0,LINEAR:hy,STEP:uy},X8={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function qW(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Ux({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Lc})),i.DefaultMaterial}function ym(i,t,e){for(const n in e.extensions)i[n]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function Ah(i,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(i.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function YW(i,t,e){let n=!1,s=!1,r=!1;for(let f=0,m=t.length;f<m;f++){const g=t[f];if(g.POSITION!==void 0&&(n=!0),g.NORMAL!==void 0&&(s=!0),g.COLOR_0!==void 0&&(r=!0),n&&s&&r)break}if(!n&&!s&&!r)return Promise.resolve(i);const a=[],l=[],u=[];for(let f=0,m=t.length;f<m;f++){const g=t[f];if(n){const v=g.POSITION!==void 0?e.getDependency("accessor",g.POSITION):i.attributes.position;a.push(v)}if(s){const v=g.NORMAL!==void 0?e.getDependency("accessor",g.NORMAL):i.attributes.normal;l.push(v)}if(r){const v=g.COLOR_0!==void 0?e.getDependency("accessor",g.COLOR_0):i.attributes.color;u.push(v)}}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(f){const m=f[0],g=f[1],v=f[2];return n&&(i.morphAttributes.position=m),s&&(i.morphAttributes.normal=g),r&&(i.morphAttributes.color=v),i.morphTargetsRelative=!0,i})}function WW(i,t){if(i.updateMorphTargets(),t.weights!==void 0)for(let e=0,n=t.weights.length;e<n;e++)i.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(i.morphTargetInfluences.length===e.length){i.morphTargetDictionary={};for(let n=0,s=e.length;n<s;n++)i.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function KW(i){let t;const e=i.extensions&&i.extensions[Rn.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+q8(e.attributes):t=i.indices+":"+q8(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,s=i.targets.length;n<s;n++)t+=":"+q8(i.targets[n]);return t}function q8(i){let t="";const e=Object.keys(i).sort();for(let n=0,s=e.length;n<s;n++)t+=e[n]+":"+i[e[n]]+";";return t}function V5(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function JW(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const ZW=new Ne;class $W{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new xW,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||s&&r<98?this.textureLoader=new pO(this.options.manager):this.textureLoader=new bO(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Qo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const l={scene:a[0][s.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:s.asset,parser:n,userData:{}};return ym(r,l,s),Ah(l,s),Promise.all(n._invokeAll(function(u){return u.afterRoot&&u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();t(l)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let s=0,r=e.length;s<r;s++){const a=e[s].joints;for(let l=0,u=a.length;l<u;l++)t[a[l]].isBone=!0}for(let s=0,r=t.length;s<r;s++){const a=t[s];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const s=n.clone(),r=(a,l)=>{const u=this.associations.get(a);u!=null&&this.associations.set(l,u);for(const[f,m]of a.children.entries())r(m,l.children[f])};return r(n,s),s.name+="_instance_"+t.uses[e]++,s}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const s=t(e[n]);if(s)return s}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let s=0;s<e.length;s++){const r=t(e[s]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let s=this.cache.get(n);if(!s){switch(t){case"scene":s=this.loadScene(e);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(e)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(e)});break;case"accessor":s=this.loadAccessor(e);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(e)});break;case"buffer":s=this.loadBuffer(e);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(e)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(e)});break;case"skin":s=this.loadSkin(e);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(e)});break;case"camera":s=this.loadCamera(e);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(t,e)}),!s)throw new Error("Unknown type: "+t);break}this.cache.add(n,s)}return s}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,s=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(s.map(function(r,a){return n.getDependency(t,a)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[Rn.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,a){n.load(Yd.resolveURL(e.uri,s.path),r,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const s=e.byteLength||0,r=e.byteOffset||0;return n.slice(r,r+s)})}loadAccessor(t){const e=this,n=this.json,s=this.json.accessors[t];if(s.bufferView===void 0&&s.sparse===void 0){const a=j8[s.type],l=Z1[s.componentType],u=s.normalized===!0,f=new l(s.count*a);return Promise.resolve(new zn(f,a,u))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(a){const l=a[0],u=j8[s.type],f=Z1[s.componentType],m=f.BYTES_PER_ELEMENT,g=m*u,v=s.byteOffset||0,_=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,b=s.normalized===!0;let T,E;if(_&&_!==g){const S=Math.floor(v/_),w="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+S+":"+s.count;let D=e.cache.get(w);D||(T=new f(l,S*_,s.count*_/m),D=new Rx(T,_/m),e.cache.add(w,D)),E=new tp(D,u,v%_/m,b)}else l===null?T=new f(s.count*u):T=new f(l,v,s.count*u),E=new zn(T,u,b);if(s.sparse!==void 0){const S=j8.SCALAR,w=Z1[s.sparse.indices.componentType],D=s.sparse.indices.byteOffset||0,B=s.sparse.values.byteOffset||0,N=new w(a[1],D,s.sparse.count*S),I=new f(a[2],B,s.sparse.count*u);l!==null&&(E=new zn(E.array.slice(),E.itemSize,E.normalized));for(let F=0,z=N.length;F<z;F++){const U=N[F];if(E.setX(U,I[F*u]),u>=2&&E.setY(U,I[F*u+1]),u>=3&&E.setZ(U,I[F*u+2]),u>=4&&E.setW(U,I[F*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return E})}loadTexture(t){const e=this.json,n=this.options,r=e.textures[t].source,a=e.images[r];let l=this.textureLoader;if(a.uri){const u=n.manager.getHandler(a.uri);u!==null&&(l=u)}return this.loadTextureImage(t,r,l)}loadTextureImage(t,e,n){const s=this,r=this.json,a=r.textures[t],l=r.images[e],u=(l.uri||l.bufferView)+":"+a.sampler;if(this.textureCache[u])return this.textureCache[u];const f=this.loadImageSource(e,n).then(function(m){m.flipY=!1,m.name=a.name||l.name||"",m.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(m.name=l.uri);const v=(r.samplers||{})[a.sampler]||{};return m.magFilter=n9[v.magFilter]||Ni,m.minFilter=n9[v.minFilter]||Tl,m.wrapS=i9[v.wrapS]||$d,m.wrapT=i9[v.wrapT]||$d,s.associations.set(m,{textures:t}),m}).catch(function(){return null});return this.textureCache[u]=f,f}loadImageSource(t,e){const n=this,s=this.json,r=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(g=>g.clone());const a=s.images[t],l=self.URL||self.webkitURL;let u=a.uri||"",f=!1;if(a.bufferView!==void 0)u=n.getDependency("bufferView",a.bufferView).then(function(g){f=!0;const v=new Blob([g],{type:a.mimeType});return u=l.createObjectURL(v),u});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const m=Promise.resolve(u).then(function(g){return new Promise(function(v,_){let b=v;e.isImageBitmapLoader===!0&&(b=function(T){const E=new wi(T);E.needsUpdate=!0,v(E)}),e.load(Yd.resolveURL(g,r.path),b,void 0,_)})}).then(function(g){return f===!0&&l.revokeObjectURL(u),Ah(g,a),g.userData.mimeType=a.mimeType||JW(a.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),g});return this.sourceCache[t]=m,m}assignTexture(t,e,n,s){const r=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),r.extensions[Rn.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[Rn.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=r.associations.get(a);a=r.extensions[Rn.KHR_TEXTURE_TRANSFORM].extendTexture(a,l),r.associations.set(a,u)}}return s!==void 0&&(typeof s=="number"&&(s=s===t9?Um:Zh),"colorSpace"in a?a.colorSpace=s:a.encoding=s===Um?t9:AW),t[e]=a,a})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const s=e.attributes.tangent===void 0,r=e.attributes.color!==void 0,a=e.attributes.normal===void 0;if(t.isPoints){const l="PointsMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new aM,gs.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(l,u)),n=u}else if(t.isLine){const l="LineBasicMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new aa,gs.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,this.cache.add(l,u)),n=u}if(s||r||a){let l="ClonedMaterial:"+n.uuid+":";s&&(l+="derivative-tangents:"),r&&(l+="vertex-colors:"),a&&(l+="flat-shading:");let u=this.cache.get(l);u||(u=n.clone(),r&&(u.vertexColors=!0),a&&(u.flatShading=!0),s&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(n))),n=u}t.material=n}getMaterialType(){return Ux}loadMaterial(t){const e=this,n=this.json,s=this.extensions,r=n.materials[t];let a;const l={},u=r.extensions||{},f=[];if(u[Rn.KHR_MATERIALS_UNLIT]){const g=s[Rn.KHR_MATERIALS_UNLIT];a=g.getMaterialType(),f.push(g.extendParams(l,r,e))}else{const g=r.pbrMetallicRoughness||{};if(l.color=new oe(1,1,1),l.opacity=1,Array.isArray(g.baseColorFactor)){const v=g.baseColorFactor;l.color.setRGB(v[0],v[1],v[2],Zh),l.opacity=v[3]}g.baseColorTexture!==void 0&&f.push(e.assignTexture(l,"map",g.baseColorTexture,Um)),l.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,l.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(f.push(e.assignTexture(l,"metalnessMap",g.metallicRoughnessTexture)),f.push(e.assignTexture(l,"roughnessMap",g.metallicRoughnessTexture))),a=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(t)}),f.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(t,l)})))}r.doubleSided===!0&&(l.side=La);const m=r.alphaMode||X8.OPAQUE;if(m===X8.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,m===X8.MASK&&(l.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&a!==zo&&(f.push(e.assignTexture(l,"normalMap",r.normalTexture)),l.normalScale=new Pt(1,1),r.normalTexture.scale!==void 0)){const g=r.normalTexture.scale;l.normalScale.set(g,g)}if(r.occlusionTexture!==void 0&&a!==zo&&(f.push(e.assignTexture(l,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&a!==zo){const g=r.emissiveFactor;l.emissive=new oe().setRGB(g[0],g[1],g[2],Zh)}return r.emissiveTexture!==void 0&&a!==zo&&f.push(e.assignTexture(l,"emissiveMap",r.emissiveTexture,Um)),Promise.all(f).then(function(){const g=new a(l);return r.name&&(g.name=r.name),Ah(g,r),e.associations.set(g,{materials:t}),r.extensions&&ym(s,g,r),g})}createUniqueName(t){const e=Qn.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,n=this.extensions,s=this.primitiveCache;function r(l){return n[Rn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,e).then(function(u){return s9(u,l,e)})}const a=[];for(let l=0,u=t.length;l<u;l++){const f=t[l],m=KW(f),g=s[m];if(g)a.push(g.promise);else{let v;f.extensions&&f.extensions[Rn.KHR_DRACO_MESH_COMPRESSION]?v=r(f):v=s9(new $e,f,e),s[m]={primitive:f,promise:v},a.push(v)}}return Promise.all(a)}loadMesh(t){const e=this,n=this.json,s=this.extensions,r=n.meshes[t],a=r.primitives,l=[];for(let u=0,f=a.length;u<f;u++){const m=a[u].material===void 0?qW(this.cache):this.getDependency("material",a[u].material);l.push(m)}return l.push(e.loadGeometries(a)),Promise.all(l).then(function(u){const f=u.slice(0,u.length-1),m=u[u.length-1],g=[];for(let _=0,b=m.length;_<b;_++){const T=m[_],E=a[_];let S;const w=f[_];if(E.mode===yl.TRIANGLES||E.mode===yl.TRIANGLE_STRIP||E.mode===yl.TRIANGLE_FAN||E.mode===void 0)S=r.isSkinnedMesh===!0?new Gw(T,w):new as(T,w),S.isSkinnedMesh===!0&&S.normalizeSkinWeights(),E.mode===yl.TRIANGLE_STRIP?S.geometry=$L(S.geometry,Iw):E.mode===yl.TRIANGLE_FAN&&(S.geometry=$L(S.geometry,J3));else if(E.mode===yl.LINES)S=new Dc(T,w);else if(E.mode===yl.LINE_STRIP)S=new rf(T,w);else if(E.mode===yl.LINE_LOOP)S=new Vw(T,w);else if(E.mode===yl.POINTS)S=new Qw(T,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+E.mode);Object.keys(S.geometry.morphAttributes).length>0&&WW(S,r),S.name=e.createUniqueName(r.name||"mesh_"+t),Ah(S,r),E.extensions&&ym(s,S,E),e.assignFinalMaterial(S),g.push(S)}for(let _=0,b=g.length;_<b;_++)e.associations.set(g[_],{meshes:t,primitives:_});if(g.length===1)return r.extensions&&ym(s,g[0],r),g[0];const v=new Wh;r.extensions&&ym(s,v,r),e.associations.set(v,{meshes:t});for(let _=0,b=g.length;_<b;_++)v.add(g[_]);return v})}loadCamera(t){let e;const n=this.json.cameras[t],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?e=new Rs(Z_.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(e=new Ty(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),Ah(e,n),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],n=[];for(let s=0,r=e.joints.length;s<r;s++)n.push(this._loadNodeShallow(e.joints[s]));return e.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(s){const r=s.pop(),a=s,l=[],u=[];for(let f=0,m=a.length;f<m;f++){const g=a[f];if(g){l.push(g);const v=new Ne;r!==null&&v.fromArray(r.array,f*16),u.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[f])}return new Lx(l,u)})}loadAnimation(t){const e=this.json,n=this,s=e.animations[t],r=s.name?s.name:"animation_"+t,a=[],l=[],u=[],f=[],m=[];for(let g=0,v=s.channels.length;g<v;g++){const _=s.channels[g],b=s.samplers[_.sampler],T=_.target,E=T.node,S=s.parameters!==void 0?s.parameters[b.input]:b.input,w=s.parameters!==void 0?s.parameters[b.output]:b.output;T.node!==void 0&&(a.push(this.getDependency("node",E)),l.push(this.getDependency("accessor",S)),u.push(this.getDependency("accessor",w)),f.push(b),m.push(T))}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(f),Promise.all(m)]).then(function(g){const v=g[0],_=g[1],b=g[2],T=g[3],E=g[4],S=[];for(let w=0,D=v.length;w<D;w++){const B=v[w],N=_[w],I=b[w],F=T[w],z=E[w];if(B===void 0)continue;B.updateMatrix&&B.updateMatrix();const U=n._createAnimationTracks(B,N,I,F,z);if(U)for(let P=0;P<U.length;P++)S.push(U[P])}return new Qg(r,void 0,S)})}createNodeMesh(t){const e=this.json,n=this,s=e.nodes[t];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(r){const a=n._getNodeRef(n.meshCache,s.mesh,r);return s.weights!==void 0&&a.traverse(function(l){if(l.isMesh)for(let u=0,f=s.weights.length;u<f;u++)l.morphTargetInfluences[u]=s.weights[u]}),a})}loadNode(t){const e=this.json,n=this,s=e.nodes[t],r=n._loadNodeShallow(t),a=[],l=s.children||[];for(let f=0,m=l.length;f<m;f++)a.push(n.getDependency("node",l[f]));const u=s.skin===void 0?Promise.resolve(null):n.getDependency("skin",s.skin);return Promise.all([r,Promise.all(a),u]).then(function(f){const m=f[0],g=f[1],v=f[2];v!==null&&m.traverse(function(_){_.isSkinnedMesh&&_.bind(v,ZW)});for(let _=0,b=g.length;_<b;_++)m.add(g[_]);return m})}_loadNodeShallow(t){const e=this.json,n=this.extensions,s=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const r=e.nodes[t],a=r.name?s.createUniqueName(r.name):"",l=[],u=s._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(t)});return u&&l.push(u),r.camera!==void 0&&l.push(s.getDependency("camera",r.camera).then(function(f){return s._getNodeRef(s.cameraCache,r.camera,f)})),s._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(t)}).forEach(function(f){l.push(f)}),this.nodeCache[t]=Promise.all(l).then(function(f){let m;if(r.isBone===!0?m=new sM:f.length>1?m=new Wh:f.length===1?m=f[0]:m=new Ln,m!==f[0])for(let g=0,v=f.length;g<v;g++)m.add(f[g]);if(r.name&&(m.userData.name=r.name,m.name=a),Ah(m,r),r.extensions&&ym(n,m,r),r.matrix!==void 0){const g=new Ne;g.fromArray(r.matrix),m.applyMatrix4(g)}else r.translation!==void 0&&m.position.fromArray(r.translation),r.rotation!==void 0&&m.quaternion.fromArray(r.rotation),r.scale!==void 0&&m.scale.fromArray(r.scale);return s.associations.has(m)||s.associations.set(m,{}),s.associations.get(m).nodes=t,m}),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],s=this,r=new Wh;n.name&&(r.name=s.createUniqueName(n.name)),Ah(r,n),n.extensions&&ym(e,r,n);const a=n.nodes||[],l=[];for(let u=0,f=a.length;u<f;u++)l.push(s.getDependency("node",a[u]));return Promise.all(l).then(function(u){for(let m=0,g=u.length;m<g;m++)r.add(u[m]);const f=m=>{const g=new Map;for(const[v,_]of s.associations)(v instanceof gs||v instanceof wi)&&g.set(v,_);return m.traverse(v=>{const _=s.associations.get(v);_!=null&&g.set(v,_)}),g};return s.associations=f(r),r})}_createAnimationTracks(t,e,n,s,r){const a=[],l=t.name?t.name:t.uuid,u=[];cd[r.path]===cd.weights?t.traverse(function(v){v.morphTargetInfluences&&u.push(v.name?v.name:v.uuid)}):u.push(l);let f;switch(cd[r.path]){case cd.weights:f=Vg;break;case cd.rotation:f=ep;break;case cd.position:case cd.scale:f=np;break;default:switch(n.itemSize){case 1:f=Vg;break;case 2:case 3:default:f=np;break}break}const m=s.interpolation!==void 0?XW[s.interpolation]:hy,g=this._getArrayFromAccessor(n);for(let v=0,_=u.length;v<_;v++){const b=new f(u[v]+"."+cd[r.path],e.array,g,m);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(b),a.push(b)}return a}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const n=V5(e.constructor),s=new Float32Array(e.length);for(let r=0,a=e.length;r<a;r++)s[r]=e[r]*n;e=s}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(n){const s=this instanceof ep?jW:fN;return new s(this.times,this.values,this.getValueSize()/3,n)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function tK(i,t,e){const n=t.attributes,s=new Or;if(n.POSITION!==void 0){const l=e.json.accessors[n.POSITION],u=l.min,f=l.max;if(u!==void 0&&f!==void 0){if(s.set(new et(u[0],u[1],u[2]),new et(f[0],f[1],f[2])),l.normalized){const m=V5(Z1[l.componentType]);s.min.multiplyScalar(m),s.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=t.targets;if(r!==void 0){const l=new et,u=new et;for(let f=0,m=r.length;f<m;f++){const g=r[f];if(g.POSITION!==void 0){const v=e.json.accessors[g.POSITION],_=v.min,b=v.max;if(_!==void 0&&b!==void 0){if(u.setX(Math.max(Math.abs(_[0]),Math.abs(b[0]))),u.setY(Math.max(Math.abs(_[1]),Math.abs(b[1]))),u.setZ(Math.max(Math.abs(_[2]),Math.abs(b[2]))),v.normalized){const T=V5(Z1[v.componentType]);u.multiplyScalar(T)}l.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(l)}i.boundingBox=s;const a=new pr;s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=a}function s9(i,t,e){const n=t.attributes,s=[];function r(a,l){return e.getDependency("accessor",a).then(function(u){i.setAttribute(l,u)})}for(const a in n){const l=k5[a]||a.toLowerCase();l in i.attributes||s.push(r(n[a],l))}if(t.indices!==void 0&&!i.index){const a=e.getDependency("accessor",t.indices).then(function(l){i.setIndex(l)});s.push(a)}return Ah(i,t),tK(i,t,e),Promise.all(s).then(function(){return t.targets!==void 0?YW(i,t.targets,e):i})}const Y8=new WeakMap;class eK extends oa{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,s){const r=new Qo(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,a=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,l).then(e).catch(s)},n,s)}decodeDracoFile(t,e,n,s){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(t,r).then(e)}decodeGeometry(t,e){for(const u in e.attributeTypes){const f=e.attributeTypes[u];f.BYTES_PER_ELEMENT!==void 0&&(e.attributeTypes[u]=f.name)}const n=JSON.stringify(e);if(Y8.has(t)){const u=Y8.get(t);if(u.key===n)return u.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,a=t.byteLength,l=this._getWorker(r,a).then(u=>(s=u,new Promise((f,m)=>{s._callbacks[r]={resolve:f,reject:m},s.postMessage({type:"decode",id:r,taskConfig:e,buffer:t},[t])}))).then(u=>this._createGeometry(u.geometry));return l.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),Y8.set(t,{key:n,promise:l}),l}_createGeometry(t){const e=new $e;t.index&&e.setIndex(new zn(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const s=t.attributes[n],r=s.name,a=s.array,l=s.itemSize;e.setAttribute(r,new zn(a,l))}return e}_loadLibrary(t,e){const n=new Qo(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((s,r)=>{n.load(t,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(n=>{const s=n[0];t||(this.decoderConfig.wasmBinary=n[1]);const r=nK.toString(),a=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const a=r.data;switch(a.type){case"decode":s._callbacks[a.id].resolve(a);break;case"error":s._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function nK(){let i,t;onmessage=function(a){const l=a.data;switch(l.type){case"init":i=l.decoderConfig,t=new Promise(function(m){i.onModuleLoaded=function(g){m({draco:g})},DracoDecoderModule(i)});break;case"decode":const u=l.buffer,f=l.taskConfig;t.then(m=>{const g=m.draco,v=new g.Decoder,_=new g.DecoderBuffer;_.Init(new Int8Array(u),u.byteLength);try{const b=e(g,v,_,f),T=b.attributes.map(E=>E.array.buffer);b.index&&T.push(b.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:b},T)}catch(b){console.error(b),self.postMessage({type:"error",id:l.id,error:b.message})}finally{g.destroy(_),g.destroy(v)}});break}};function e(a,l,u,f){const m=f.attributeIDs,g=f.attributeTypes;let v,_;const b=l.GetEncodedGeometryType(u);if(b===a.TRIANGULAR_MESH)v=new a.Mesh,_=l.DecodeBufferToMesh(u,v);else if(b===a.POINT_CLOUD)v=new a.PointCloud,_=l.DecodeBufferToPointCloud(u,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!_.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+_.error_msg());const T={index:null,attributes:[]};for(const E in m){const S=self[g[E]];let w,D;if(f.useUniqueIDs)D=m[E],w=l.GetAttributeByUniqueId(v,D);else{if(D=l.GetAttributeId(v,a[m[E]]),D===-1)continue;w=l.GetAttribute(v,D)}T.attributes.push(s(a,l,v,E,S,w))}return b===a.TRIANGULAR_MESH&&(T.index=n(a,l,v)),a.destroy(v),T}function n(a,l,u){const m=u.num_faces()*3,g=m*4,v=a._malloc(g);l.GetTrianglesUInt32Array(u,g,v);const _=new Uint32Array(a.HEAPF32.buffer,v,m).slice();return a._free(v),{array:_,itemSize:1}}function s(a,l,u,f,m,g){const v=g.num_components(),b=u.num_points()*v,T=b*m.BYTES_PER_ELEMENT,E=r(a,m),S=a._malloc(T);l.GetAttributeDataArrayForAllPoints(u,g,E,T,S);const w=new m(a.HEAPF32.buffer,S,b).slice();return a._free(S),{name:f,array:w,itemSize:v}}function r(a,l){switch(l){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let f4;const W8=()=>{if(f4)return f4;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=i;WebAssembly.validate(e)&&(s=t);let r;const a=WebAssembly.instantiate(l(s),{}).then(g=>{r=g.instance,r.exports.__wasm_call_ctors()});function l(g){const v=new Uint8Array(g.length);for(let b=0;b<g.length;++b){const T=g.charCodeAt(b);v[b]=T>96?T-71:T>64?T-65:T>47?T+4:T>46?63:62}let _=0;for(let b=0;b<g.length;++b)v[_++]=v[b]<60?n[v[b]]:(v[b]-60)*64+v[++b];return v.buffer.slice(0,_)}function u(g,v,_,b,T,E){const S=r.exports.sbrk,w=_+3&-4,D=S(w*b),B=S(T.length),N=new Uint8Array(r.exports.memory.buffer);N.set(T,B);const I=g(D,_,b,B,T.length);if(I===0&&E&&E(D,w,b),v.set(N.subarray(D,D+_*b)),S(D-S(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},m={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return f4={ready:a,supported:!0,decodeVertexBuffer(g,v,_,b,T){u(r.exports.meshopt_decodeVertexBuffer,g,v,_,b,r.exports[f[T]])},decodeIndexBuffer(g,v,_,b){u(r.exports.meshopt_decodeIndexBuffer,g,v,_,b)},decodeIndexSequence(g,v,_,b){u(r.exports.meshopt_decodeIndexSequence,g,v,_,b)},decodeGltfBuffer(g,v,_,b,T,E){u(r.exports[m[T]],g,v,_,b,r.exports[f[E]])}},f4};let d4=null,dN="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function pN(i=!0,t=!0,e){return n=>{e&&e(n),i&&(d4||(d4=new eK),d4.setDecoderPath(typeof i=="string"?i:dN),n.setDRACOLoader(d4)),t&&n.setMeshoptDecoder(typeof W8=="function"?W8():W8)}}const o0=(i,t,e,n)=>Fx(y7,i,pN(t,e,n));o0.preload=(i,t,e,n)=>Fx.preload(y7,i,pN(t,e,n));o0.clear=i=>Fx.clear(y7,i);o0.setDecoderPath=i=>{dN=i};const iK="modulepreload",sK=function(i){return"/vibefolio/"+i},r9={},p4=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let a=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=a(e.map(f=>{if(f=sK(f),f in r9)return;r9[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":iK,m||(v.as="script"),v.crossOrigin="",v.href=f,u&&v.setAttribute("nonce",u),document.head.appendChild(v),m)return new Promise((_,b)=>{v.addEventListener("load",_),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})};function rK(i,t){const e=rt.useRef(null),[n]=rt.useState(()=>t?t instanceof Ln?{current:t}:t:e),[s]=rt.useState(()=>new f7(void 0));rt.useLayoutEffect(()=>{t&&(n.current=t instanceof Ln?t:t.current),s._root=n.current});const r=rt.useRef({}),a=rt.useMemo(()=>{const l={};return i.forEach(u=>Object.defineProperty(l,u.name,{enumerable:!0,get(){if(n.current)return r.current[u.name]||(r.current[u.name]=s.clipAction(u,n.current))},configurable:!0})),{ref:n,clips:i,actions:l,names:i.map(u=>u.name),mixer:s}},[i]);return EM((l,u)=>s.update(u)),rt.useEffect(()=>{const l=n.current;return()=>{r.current={},s.stopAllAction(),Object.values(a.actions).forEach(u=>{l&&s.uncacheAction(u,l)})}},[i]),a}o0.preload("models/retro_computer.glb");function aK(i){const t=rt.useRef(null),{nodes:e,materials:n}=o0("models/retro_computer.glb");return k.jsx("group",{ref:t,children:k.jsxs("group",{...i,dispose:null,children:[k.jsx("mesh",{castShadow:!0,geometry:e.Object_5.geometry,material:n.material_0,position:[.063,0,.438]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_7.geometry,material:n.material_0,position:[.063,.375,.438]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_9.geometry,material:n.material_0,position:[.063,.5,.438]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_11.geometry,material:n.material_0,position:[.063,.563,.313]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_13.geometry,material:n.material_0,position:[.063,1.5,.313]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_15.geometry,material:n.material_0,position:[.063,1.313,.313]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_17.geometry,material:n.material_0,position:[-1.031,1.313,.313]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_19.geometry,material:n.material_0,position:[-.094,1.313,.313]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_21.geometry,material:n.material_0,position:[-.094,1.313,.5]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_23.geometry,material:n.material_0,position:[-.094,1.188,.5]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_25.geometry,material:n.material_0,position:[.188,0,-.75]}),k.jsx("mesh",{castShadow:!0,geometry:e.Object_27.geometry,material:n.material_0,position:[-.75,0,-.625]})]})})}function oK(i){rt.useEffect(()=>{const t=e=>{i({x:e.clientX,y:e.clientY})};return window.addEventListener("pointermove",t),()=>window.removeEventListener("pointermove",t)},[i])}function lK(i,t){const{size:e}=SM(),{enabled:n=!0,initialAngle:s=0}=t,r=4,a=Math.PI/24,l=rt.useRef(s),u=rt.useRef(-a);oK(f=>{const m=f.x/e.width*1-1;u.current=m-a}),EM((f,m)=>{if(!n)return;l.current=Z_.damp(l.current,u.current,1,m);const g=r*Math.sin(l.current),v=r*Math.cos(l.current);i&&(i.position.set(g,2,v),i.lookAt(0,0,0))})}const mN=rt.createContext(null),gN=()=>{const i=rt.useContext(mN);if(!i)throw new Error("useCameraContext must be used within CameraProvider");return i};function cK({children:i}){const[t,e]=rt.useState(!1);return k.jsx(mN.Provider,{value:{started:t,start:()=>e(!0)},children:i})}function uK(){const{camera:i}=SM(),{started:t}=gN(),[e,n]=rt.useState(!1),s=rt.useRef(0),r=4,a=new et(-5,3,5),l=new et(r*Math.sin(-1),2,r*Math.cos(-1)),u=Math.atan2(l.x,l.z);return EM((f,m)=>{if(!t||e)return;s.current+=m*.5;const g=Z_.clamp(s.current,0,1),v=Z_.smoothstep(g,0,1),_=a.clone().lerp(l,v);i.position.copy(_),i.lookAt(0,0,0),g>=1&&n(!0)}),lK(i,{initialAngle:u,enabled:e}),null}/**
 * postprocessing v6.37.3 build Sun Apr 27 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var K8=1/1e3,hK=1e3,fK=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(i){typeof document<"u"&&document.hidden!==void 0&&(i?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=i)}get delta(){return this._delta*K8}get fixedDelta(){return this._fixedDelta*K8}set fixedDelta(i){this._fixedDelta=i*hK}get elapsed(){return this._elapsed*K8}update(i){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(i!==void 0?i:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(i){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},dK=(()=>{const i=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),e=new $e;return e.setAttribute("position",new zn(i,3)),e.setAttribute("uv",new zn(t,2)),e})(),ao=class Q5{static get fullscreenGeometry(){return dK}constructor(t="Pass",e=new tA,n=new Cx){this.name=t,this.renderer=null,this.scene=e,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;e!==null?e.material=t:(e=new as(Q5.fullscreenGeometry,t),e.frustumCulled=!1,this.scene===null&&(this.scene=new tA),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=op){}render(t,e,n,s,r){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof Ds||e instanceof gs||e instanceof wi||e instanceof Q5)&&this[t].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},pK=class extends ao{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(i,t,e,n,s){const r=i.state.buffers.stencil;r.setLocked(!1),r.setTest(!1)}},mK=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,vN="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",yN=class extends Ks{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new xn(null),opacity:new xn(1)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:mK,vertexShader:vN})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}getOpacity(i){return this.uniforms.opacity.value}setOpacity(i){this.uniforms.opacity.value=i}},gK=class extends ao{constructor(i,t=!0){super("CopyPass"),this.fullscreenMaterial=new yN,this.needsSwap=!1,this.renderTarget=i,i===void 0&&(this.renderTarget=new Ds(1,1,{minFilter:Ni,magFilter:Ni,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(i){this.autoResize=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(i){this.autoResize=i}render(i,t,e,n,s){this.fullscreenMaterial.inputBuffer=t.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,t){this.autoResize&&this.renderTarget.setSize(i,t)}initialize(i,t,e){e!==void 0&&(this.renderTarget.texture.type=e,e!==Ws?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":i!==null&&i.outputColorSpace===Kn&&(this.renderTarget.texture.colorSpace=Kn))}},a9=new oe,_N=class extends ao{constructor(i=!0,t=!0,e=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=i,this.depth=t,this.stencil=e,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(i,t,e){this.color=i,this.depth=t,this.stencil=e}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(i){this.overrideClearColor=i}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(i){this.overrideClearAlpha=i}render(i,t,e,n,s){const r=this.overrideClearColor,a=this.overrideClearAlpha,l=i.getClearAlpha(),u=r!==null,f=a>=0;u?(i.getClearColor(a9),i.setClearColor(r,f?a:l)):f&&i.setClearAlpha(a),i.setRenderTarget(this.renderToScreen?null:t),i.clear(this.color,this.depth,this.stencil),u?i.setClearColor(a9,l):f&&i.setClearAlpha(l)}},vK=class extends ao{constructor(i,t){super("MaskPass",i,t),this.needsSwap=!1,this.clearPass=new _N(!1,!1,!0),this.inverse=!1}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get inverted(){return this.inverse}set inverted(i){this.inverse=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(i){this.inverted=i}render(i,t,e,n,s){const r=i.getContext(),a=i.state.buffers,l=this.scene,u=this.camera,f=this.clearPass,m=this.inverted?0:1,g=1-m;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),a.stencil.setFunc(r.ALWAYS,m,4294967295),a.stencil.setClear(g),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(i,null):(f.render(i,t),f.render(i,e))),this.renderToScreen?(i.setRenderTarget(null),i.render(l,u)):(i.setRenderTarget(t),i.render(l,u),i.setRenderTarget(e),i.render(l,u)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(r.EQUAL,1,4294967295),a.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),a.stencil.setLocked(!0)}},yK=class{constructor(i=null,{depthBuffer:t=!0,stencilBuffer:e=!1,multisampling:n=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,e,s,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new gK,this.depthTexture=null,this.passes=[],this.timer=new fK,this.autoRenderToScreen=!0,this.setRenderer(i)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(i){const t=this.inputBuffer,e=this.multisampling;e>0&&i>0?(this.inputBuffer.samples=i,this.outputBuffer.samples=i,this.inputBuffer.dispose(),this.outputBuffer.dispose()):e!==i&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,i),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(i){if(this.renderer=i,i!==null){const t=i.getSize(new Pt),e=i.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===Ws&&i.outputColorSpace===Kn&&(this.inputBuffer.texture.colorSpace=Kn,this.outputBuffer.texture.colorSpace=Kn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),i.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(i,e,n)}}replaceRenderer(i,t=!0){const e=this.renderer,n=e.domElement.parentNode;return this.setRenderer(i),t&&n!==null&&(n.removeChild(e.domElement),n.appendChild(i.domElement)),e}createDepthTexture(){const i=this.depthTexture=new Dx;return this.inputBuffer.depthTexture=i,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(i.format=zg,i.type=Hg):i.type=Pu,i}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const i of this.passes)i.setDepthTexture(null)}}createBuffer(i,t,e,n){const s=this.renderer,r=s===null?new Pt:s.getDrawingBufferSize(new Pt),a={minFilter:Ni,magFilter:Ni,stencilBuffer:t,depthBuffer:i,type:e},l=new Ds(r.width,r.height,a);return n>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=n),e===Ws&&s!==null&&s.outputColorSpace===Kn&&(l.texture.colorSpace=Kn),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(i){for(const t of this.passes)t.mainScene=i}setMainCamera(i){for(const t of this.passes)t.mainCamera=i}addPass(i,t){const e=this.passes,n=this.renderer,s=n.getDrawingBufferSize(new Pt),r=n.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(i.setRenderer(n),i.setSize(s.width,s.height),i.initialize(n,r,a),this.autoRenderToScreen&&(e.length>0&&(e[e.length-1].renderToScreen=!1),i.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?e.splice(t,0,i):e.push(i),this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!0),i.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(i of e)i.setDepthTexture(l)}else i.setDepthTexture(this.depthTexture)}removePass(i){const t=this.passes,e=t.indexOf(i);if(e!==-1&&t.splice(e,1).length>0){if(this.depthTexture!==null){const r=(l,u)=>l||u.needsDepthTexture;t.reduce(r,!1)||(i.getDepthTexture()===this.depthTexture&&i.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&e===t.length&&(i.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const i=this.passes;this.deleteDepthTexture(),i.length>0&&(this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!1),this.passes=[])}render(i){const t=this.renderer,e=this.copyPass;let n=this.inputBuffer,s=this.outputBuffer,r=!1,a,l,u;i===void 0&&(this.timer.update(),i=this.timer.getDelta());for(const f of this.passes)f.enabled&&(f.render(t,n,s,i,r),f.needsSwap&&(r&&(e.renderToScreen=f.renderToScreen,a=t.getContext(),l=t.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),e.render(t,n,s,i,r),l.setFunc(a.EQUAL,1,4294967295)),u=n,n=s,s=u),f instanceof vK?r=!0:f instanceof pK&&(r=!1))}setSize(i,t,e){const n=this.renderer,s=n.getSize(new Pt);(i===void 0||t===void 0)&&(i=s.width,t=s.height),(s.width!==i||s.height!==t)&&n.setSize(i,t,e);const r=n.getDrawingBufferSize(new Pt);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const a of this.passes)a.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const i of this.passes)i.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),ao.fullscreenGeometry.dispose()}},Wd={NONE:0,DEPTH:1,CONVOLUTION:2},Wn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},_K=class{constructor(){this.shaderParts=new Map([[Wn.FRAGMENT_HEAD,null],[Wn.FRAGMENT_MAIN_UV,null],[Wn.FRAGMENT_MAIN_IMAGE,null],[Wn.VERTEX_HEAD,null],[Wn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Wd.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Fu}},J8=!1,o9=class{constructor(i=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(i),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let e;if(t.material.flatShading)switch(t.material.side){case La:e=this.materialsFlatShadedDoubleSide;break;case qs:e=this.materialsFlatShadedBackSide;break;default:e=this.materialsFlatShaded;break}else switch(t.material.side){case La:e=this.materialsDoubleSide;break;case qs:e=this.materialsBackSide;break;default:e=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=e[2]:t.isInstancedMesh?t.material=e[1]:t.material=e[0],++this.meshCount}}}cloneMaterial(i){if(!(i instanceof Ks))return i.clone();const t=i.uniforms,e=new Map;for(const s in t){const r=t[s].value;r.isRenderTargetTexture&&(t[s].value=null,e.set(s,r))}const n=i.clone();for(const s of e)t[s[0]].value=s[1],n.uniforms[s[0]].value=s[1];return n}setMaterial(i){if(this.disposeMaterials(),this.material=i,i!==null){const t=this.materials=[this.cloneMaterial(i),this.cloneMaterial(i),this.cloneMaterial(i)];for(const e of t)e.uniforms=Object.assign({},i.uniforms),e.side=Lc;t[2].skinning=!0,this.materialsBackSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.side=qs,n}),this.materialsDoubleSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.side=La,n}),this.materialsFlatShaded=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=qs,n}),this.materialsFlatShadedDoubleSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=La,n})}}render(i,t,e){const n=i.shadowMap.enabled;if(i.shadowMap.enabled=!1,J8){const s=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),i.render(t,e);for(const r of s)r[0].material=r[1];this.meshCount!==s.size&&s.clear()}else{const s=t.overrideMaterial;t.overrideMaterial=this.material,i.render(t,e),t.overrideMaterial=s}i.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){const i=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of i)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return J8}static set workaroundEnabled(i){J8=i}},ud=-1,ia=class extends qo{constructor(i,t=ud,e=ud,n=1){super(),this.resizable=i,this.baseSize=new Pt(1,1),this.preferredSize=new Pt(t,e),this.target=this.preferredSize,this.s=n,this.effectiveSize=new Pt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const i=this.baseSize,t=this.preferredSize,e=this.effectiveSize,n=this.scale;t.width!==ud?e.width=t.width:t.height!==ud?e.width=Math.round(t.height*(i.width/Math.max(i.height,1))):e.width=Math.round(i.width*n),t.height!==ud?e.height=t.height:t.width!==ud?e.height=Math.round(t.width/Math.max(i.width/Math.max(i.height,1),1)):e.height=Math.round(i.height*n)}get width(){return this.effectiveSize.width}set width(i){this.preferredWidth=i}get height(){return this.effectiveSize.height}set height(i){this.preferredHeight=i}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(i){this.s!==i&&(this.s=i,this.preferredSize.setScalar(ud),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(i){this.scale=i}get baseWidth(){return this.baseSize.width}set baseWidth(i){this.baseSize.width!==i&&(this.baseSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(i){this.baseWidth=i}get baseHeight(){return this.baseSize.height}set baseHeight(i){this.baseSize.height!==i&&(this.baseSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(i){this.baseHeight=i}setBaseSize(i,t){(this.baseSize.width!==i||this.baseSize.height!==t)&&(this.baseSize.set(i,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(i){this.preferredSize.width!==i&&(this.preferredSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(i){this.preferredWidth=i}get preferredHeight(){return this.preferredSize.height}set preferredHeight(i){this.preferredSize.height!==i&&(this.preferredSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(i){this.preferredHeight=i}setPreferredSize(i,t){(this.preferredSize.width!==i||this.preferredSize.height!==t)&&(this.preferredSize.set(i,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(i){this.s=i.scale,this.baseSize.set(i.baseWidth,i.baseHeight),this.preferredSize.set(i.preferredWidth,i.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return ud}},Tn={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},AK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",xK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",bK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",SK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",EK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",MK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",TK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",CK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",wK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",RK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",LK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",DK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",BK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",OK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",NK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",IK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",UK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",PK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",FK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",HK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",zK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",GK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",kK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",VK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",QK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",jK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",XK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",qK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",YK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",WK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",KK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",JK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",ZK=new Map([[Tn.ADD,AK],[Tn.ALPHA,xK],[Tn.AVERAGE,bK],[Tn.COLOR,SK],[Tn.COLOR_BURN,EK],[Tn.COLOR_DODGE,MK],[Tn.DARKEN,TK],[Tn.DIFFERENCE,CK],[Tn.DIVIDE,wK],[Tn.DST,null],[Tn.EXCLUSION,RK],[Tn.HARD_LIGHT,LK],[Tn.HARD_MIX,DK],[Tn.HUE,BK],[Tn.INVERT,OK],[Tn.INVERT_RGB,NK],[Tn.LIGHTEN,IK],[Tn.LINEAR_BURN,UK],[Tn.LINEAR_DODGE,PK],[Tn.LINEAR_LIGHT,FK],[Tn.LUMINOSITY,HK],[Tn.MULTIPLY,zK],[Tn.NEGATION,GK],[Tn.NORMAL,kK],[Tn.OVERLAY,VK],[Tn.PIN_LIGHT,QK],[Tn.REFLECT,jK],[Tn.SATURATION,XK],[Tn.SCREEN,qK],[Tn.SOFT_LIGHT,YK],[Tn.SRC,WK],[Tn.SUBTRACT,KK],[Tn.VIVID_LIGHT,JK]]),$K=class extends qo{constructor(i,t=1){super(),this._blendFunction=i,this.opacity=new xn(t)}getOpacity(){return this.opacity.value}setOpacity(i){this.opacity.value=i}get blendFunction(){return this._blendFunction}set blendFunction(i){this._blendFunction=i,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(i){this.blendFunction=i}getShaderCode(){return ZK.get(this.blendFunction)}},Xg=class extends qo{constructor(i,t,{attributes:e=Wd.NONE,blendFunction:n=Tn.NORMAL,defines:s=new Map,uniforms:r=new Map,extensions:a=null,vertexShader:l=null}={}){super(),this.name=i,this.renderer=null,this.attributes=e,this.fragmentShader=t,this.vertexShader=l,this.defines=s,this.uniforms=r,this.extensions=a,this.blendMode=new $K(n),this.blendMode.addEventListener("change",u=>this.setChanged()),this._inputColorSpace=Fu,this._outputColorSpace=Ec}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(i){this._inputColorSpace=i,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(i){this._outputColorSpace=i,this.setChanged()}set mainScene(i){}set mainCamera(i){}getName(){return this.name}setRenderer(i){this.renderer=i}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(i){this.attributes=i,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(i){this.fragmentShader=i,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(i){this.vertexShader=i,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(i,t=op){}update(i,t,e){}setSize(i,t){}initialize(i,t,e){}dispose(){for(const i of Object.keys(this)){const t=this[i];(t instanceof Ds||t instanceof gs||t instanceof wi||t instanceof ao)&&this[i].dispose()}}},_7={MEDIUM:2,LARGE:3},tJ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,eJ="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",nJ=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],iJ=class extends Ks{constructor(i=new On){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new xn(null),texelSize:new xn(new On),scale:new xn(1),kernel:new xn(0)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:tJ,vertexShader:eJ}),this.setTexelSize(i.x,i.y),this.kernelSize=_7.MEDIUM}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.inputBuffer=i}get kernelSequence(){return nJ[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(i){this.uniforms.scale.value=i}getScale(){return this.uniforms.scale.value}setScale(i){this.uniforms.scale.value=i}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(i){this.uniforms.kernel.value=i}setKernel(i){this.kernel=i}setTexelSize(i,t){this.uniforms.texelSize.value.set(i,t,i*.5,t*.5)}setSize(i,t){const e=1/i,n=1/t;this.uniforms.texelSize.value.set(e,n,e*.5,n*.5)}},sJ=class extends ao{constructor({kernelSize:i=_7.MEDIUM,resolutionScale:t=.5,width:e=ia.AUTO_SIZE,height:n=ia.AUTO_SIZE,resolutionX:s=e,resolutionY:r=n}={}){super("KawaseBlurPass"),this.renderTargetA=new Ds(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new ia(this,s,r,t);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new iJ,this._blurMaterial.kernelSize=i,this.copyMaterial=new yN}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(i){this._blurMaterial=i}get dithering(){return this.copyMaterial.dithering}set dithering(i){this.copyMaterial.dithering=i}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(i){this.blurMaterial.kernelSize=i}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get scale(){return this.blurMaterial.scale}set scale(i){this.blurMaterial.scale=i}getScale(){return this.blurMaterial.scale}setScale(i){this.blurMaterial.scale=i}getKernelSize(){return this.kernelSize}setKernelSize(i){this.kernelSize=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,t,e,n,s){const r=this.scene,a=this.camera,l=this.renderTargetA,u=this.renderTargetB,f=this.blurMaterial,m=f.kernelSequence;let g=t;this.fullscreenMaterial=f;for(let v=0,_=m.length;v<_;++v){const b=(v&1)===0?l:u;f.kernel=m[v],f.inputBuffer=g.texture,i.setRenderTarget(b),i.render(r,a),g=b}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=g.texture,i.setRenderTarget(this.renderToScreen?null:e),i.render(r,a)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t);const n=e.width,s=e.height;this.renderTargetA.setSize(n,s),this.renderTargetB.setSize(n,s),this.blurMaterial.setSize(i,t)}initialize(i,t,e){e!==void 0&&(this.renderTargetA.texture.type=e,this.renderTargetB.texture.type=e,e!==Ws?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):i!==null&&i.outputColorSpace===Kn&&(this.renderTargetA.texture.colorSpace=Kn,this.renderTargetB.texture.colorSpace=Kn))}static get AUTO_SIZE(){return ia.AUTO_SIZE}},rJ=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,aJ=class extends Ks{constructor(i=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:n0.replace(/\D+/g,"")},uniforms:{inputBuffer:new xn(null),threshold:new xn(0),smoothing:new xn(1),range:new xn(null)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:rJ,vertexShader:vN}),this.colorOutput=i,this.luminanceRange=t}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get threshold(){return this.uniforms.threshold.value}set threshold(i){this.smoothing>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=i}getThreshold(){return this.threshold}setThreshold(i){this.threshold=i}get smoothing(){return this.uniforms.smoothing.value}set smoothing(i){this.threshold>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=i}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(i){this.smoothing=i}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(i){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(i){i?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(i){return this.colorOutput}setColorOutputEnabled(i){this.colorOutput=i}get useRange(){return this.luminanceRange!==null}set useRange(i){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(i){i!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=i,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(i){this.luminanceRange=i}},oJ=class extends ao{constructor({renderTarget:i,luminanceRange:t,colorOutput:e,resolutionScale:n=1,width:s=ia.AUTO_SIZE,height:r=ia.AUTO_SIZE,resolutionX:a=s,resolutionY:l=r}={}){super("LuminancePass"),this.fullscreenMaterial=new aJ(e,t),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new Ds(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const u=this.resolution=new ia(this,a,l,n);u.addEventListener("change",f=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(i,t,e,n,s){const r=this.fullscreenMaterial;r.inputBuffer=t.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t),this.renderTarget.setSize(e.width,e.height)}initialize(i,t,e){e!==void 0&&e!==Ws&&(this.renderTarget.texture.type=e,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},lJ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,cJ="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",uJ=class extends Ks{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new xn(null),texelSize:new xn(new Pt)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:lJ,vertexShader:cJ})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setSize(i,t){this.uniforms.texelSize.value.set(1/i,1/t)}},hJ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,fJ="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",dJ=class extends Ks{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new xn(null),supportBuffer:new xn(null),texelSize:new xn(new Pt),radius:new xn(.85)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:hJ,vertexShader:fJ})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}set supportBuffer(i){this.uniforms.supportBuffer.value=i}get radius(){return this.uniforms.radius.value}set radius(i){this.uniforms.radius.value=i}setSize(i,t){this.uniforms.texelSize.value.set(1/i,1/t)}},pJ=class extends ao{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Ds(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new uJ,this.upsamplingMaterial=new dJ,this.resolution=new Pt}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(i){if(this.levels!==i){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let e=0;e<i;++e){const n=t.clone();n.texture.name="Downsampling.Mipmap"+e,this.downsamplingMipmaps.push(n)}this.upsamplingMipmaps.push(t);for(let e=1,n=i-1;e<n;++e){const s=t.clone();s.texture.name="Upsampling.Mipmap"+e,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(i){this.upsamplingMaterial.radius=i}render(i,t,e,n,s){const{scene:r,camera:a}=this,{downsamplingMaterial:l,upsamplingMaterial:u}=this,{downsamplingMipmaps:f,upsamplingMipmaps:m}=this;let g=t;this.fullscreenMaterial=l;for(let v=0,_=f.length;v<_;++v){const b=f[v];l.setSize(g.width,g.height),l.inputBuffer=g.texture,i.setRenderTarget(b),i.render(r,a),g=b}this.fullscreenMaterial=u;for(let v=m.length-1;v>=0;--v){const _=m[v];u.setSize(g.width,g.height),u.inputBuffer=g.texture,u.supportBuffer=f[v].texture,i.setRenderTarget(_),i.render(r,a),g=_}}setSize(i,t){const e=this.resolution;e.set(i,t);let n=e.width,s=e.height;for(let r=0,a=this.downsamplingMipmaps.length;r<a;++r)n=Math.round(n*.5),s=Math.round(s*.5),this.downsamplingMipmaps[r].setSize(n,s),r<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[r].setSize(n,s)}initialize(i,t,e){if(e!==void 0){const n=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of n)s.texture.type=e;if(e!==Ws)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(i!==null&&i.outputColorSpace===Kn)for(const s of n)s.texture.colorSpace=Kn}}dispose(){super.dispose();for(const i of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))i.dispose()}},mJ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,gJ=class extends Xg{constructor({blendFunction:i=Tn.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:e=.025,mipmapBlur:n=!1,intensity:s=1,radius:r=.85,levels:a=8,kernelSize:l=_7.LARGE,resolutionScale:u=.5,width:f=ia.AUTO_SIZE,height:m=ia.AUTO_SIZE,resolutionX:g=f,resolutionY:v=m}={}){super("BloomEffect",mJ,{blendFunction:i,uniforms:new Map([["map",new xn(null)],["intensity",new xn(s)]])}),this.renderTarget=new Ds(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new sJ({kernelSize:l}),this.luminancePass=new oJ({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=e,this.mipmapBlurPass=new pJ,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=r,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const _=this.resolution=new ia(this,g,v,u);_.addEventListener("change",b=>this.setSize(_.baseWidth,_.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get dithering(){return this.blurPass.dithering}set dithering(i){this.blurPass.dithering=i}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(i){this.blurPass.kernelSize=i}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(i){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(i){this.uniforms.get("intensity").value=i}getIntensity(){return this.intensity}setIntensity(i){this.intensity=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}update(i,t,e){const n=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(i,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,s.renderTarget):this.blurPass.render(i,s.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,t):this.blurPass.render(i,t,n)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t),this.renderTarget.setSize(e.width,e.height),this.blurPass.resolution.copy(e),this.luminancePass.setSize(i,t),this.mipmapBlurPass.setSize(i,t)}initialize(i,t,e){this.blurPass.initialize(i,t,e),this.luminancePass.initialize(i,t,e),this.mipmapBlurPass.initialize(i,t,e),e!==void 0&&(this.renderTarget.texture.type=e,i!==null&&i.outputColorSpace===Kn&&(this.renderTarget.texture.colorSpace=Kn))}},vJ=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,yJ="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",_J=class extends Xg{constructor({offset:i=new Pt(.001,5e-4),radialModulation:t=!1,modulationOffset:e=.15}={}){super("ChromaticAberrationEffect",vJ,{vertexShader:yJ,attributes:Wd.CONVOLUTION,uniforms:new Map([["offset",new xn(i)],["modulationOffset",new xn(e)]])}),this.radialModulation=t}get offset(){return this.uniforms.get("offset").value}set offset(i){this.uniforms.get("offset").value=i}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(i){i?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(i){this.uniforms.get("modulationOffset").value=i}getOffset(){return this.offset}setOffset(i){this.offset=i}},AN=class extends ao{constructor(i,t,e=null){super("RenderPass",i,t),this.needsSwap=!1,this.clearPass=new _N,this.overrideMaterialManager=e===null?null:new o9(e),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get renderToScreen(){return super.renderToScreen}set renderToScreen(i){super.renderToScreen=i,this.clearPass.renderToScreen=i}get overrideMaterial(){const i=this.overrideMaterialManager;return i!==null?i.material:null}set overrideMaterial(i){const t=this.overrideMaterialManager;i!==null?t!==null?t.setMaterial(i):this.overrideMaterialManager=new o9(i):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(i){this.overrideMaterial=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getSelection(){return this.selection}setSelection(i){this.selection=i}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(i){this.ignoreBackground=i}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(i){this.skipShadowMapUpdate=i}getClearPass(){return this.clearPass}render(i,t,e,n,s){const r=this.scene,a=this.camera,l=this.selection,u=a.layers.mask,f=r.background,m=i.shadowMap.autoUpdate,g=this.renderToScreen?null:t;l!==null&&a.layers.set(l.getLayer()),this.skipShadowMapUpdate&&(i.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(r.background=null),this.clearPass.enabled&&this.clearPass.render(i,t),i.setRenderTarget(g),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(i,r,a):i.render(r,a),a.layers.mask=u,r.background=f,i.shadowMap.autoUpdate=m}},s_={DEFAULT:0,ESKIL:1},AJ=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,xJ=class extends Xg{constructor({blendFunction:i=Tn.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",AJ,{blendFunction:i}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(i){this.premultiply!==i&&(i?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(i){this.premultiply=i}},bJ="uniform bool active;uniform vec4 d;void mainUv(inout vec2 uv){if(active){uv=d.xy*(floor(uv*d.zw)+0.5);}}",SJ=class extends Xg{constructor(i=30){super("PixelationEffect",bJ,{uniforms:new Map([["active",new xn(!1)],["d",new xn(new On)]])}),this.resolution=new Pt,this._granularity=0,this.granularity=i}get granularity(){return this._granularity}set granularity(i){let t=Math.floor(i);t%2>0&&(t+=1),this._granularity=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(i){this.granularity=i}setSize(i,t){const e=this.resolution;e.set(i,t);const n=this.granularity,s=n/e.x,r=n/e.y;this.uniforms.get("d").value.set(s,r,1/s,1/r)}},EJ=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,MJ="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",TJ=class extends Ks{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new xn(null),normalBuffer:new xn(null),texelSize:new xn(new Pt)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:EJ,vertexShader:MJ})}set depthBuffer(i){this.uniforms.depthBuffer.value=i}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,t=op){this.depthBuffer=i,this.depthPacking=t}set normalBuffer(i){this.uniforms.normalBuffer.value=i,i!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(i){this.normalBuffer=i}setTexelSize(i,t){this.uniforms.texelSize.value.set(i,t)}setSize(i,t){this.uniforms.texelSize.value.set(1/i,1/t)}},CJ=class extends ao{constructor({normalBuffer:i=null,resolutionScale:t=.5,width:e=ia.AUTO_SIZE,height:n=ia.AUTO_SIZE,resolutionX:s=e,resolutionY:r=n}={}){super("DepthDownsamplingPass");const a=new TJ;a.normalBuffer=i,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ds(1,1,{minFilter:os,magFilter:os,depthBuffer:!1,type:Oa}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const l=this.resolution=new ia(this,s,r,t);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(i,t=op){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=t}render(i,t,e,n,s){i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t),this.renderTarget.setSize(e.width,e.height),this.fullscreenMaterial.setSize(i,t)}initialize(i,t,e){const n=i.getContext();if(!(n.getExtension("EXT_color_buffer_float")||n.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},wJ=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,RJ=class extends Xg{constructor({blendFunction:i,eskil:t=!1,technique:e=t?s_.ESKIL:s_.DEFAULT,offset:n=.5,darkness:s=.5}={}){super("VignetteEffect",wJ,{blendFunction:i,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new xn(n)],["darkness",new xn(s)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(i){this.technique!==i&&(this.defines.set("VIGNETTE_TECHNIQUE",i.toFixed(0)),this.setChanged())}get eskil(){return this.technique===s_.ESKIL}set eskil(i){this.technique=i?s_.ESKIL:s_.DEFAULT}getTechnique(){return this.technique}setTechnique(i){this.technique=i}get offset(){return this.uniforms.get("offset").value}set offset(i){this.uniforms.get("offset").value=i}getOffset(){return this.offset}setOffset(i){this.offset=i}get darkness(){return this.uniforms.get("darkness").value}set darkness(i){this.uniforms.get("darkness").value=i}getDarkness(){return this.darkness}setDarkness(i){this.darkness=i}},LJ=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,DJ="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",BJ=class extends Ks{constructor(i,t,e,n,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:n0.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new xn(null),depthBuffer:new xn(null),resolution:new xn(new Pt),texelSize:new xn(new Pt),cameraNear:new xn(.3),cameraFar:new xn(1e3),aspect:new xn(1),time:new xn(0)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),i&&this.setShaderParts(i),t&&this.setDefines(t),e&&this.setUniforms(e),this.copyCameraSettings(n)}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(i){this.uniforms.depthBuffer.value=i}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,t=op){this.depthBuffer=i,this.depthPacking=t}setShaderData(i){this.setShaderParts(i.shaderParts),this.setDefines(i.defines),this.setUniforms(i.uniforms),this.setExtensions(i.extensions)}setShaderParts(i){return this.fragmentShader=LJ.replace(Wn.FRAGMENT_HEAD,i.get(Wn.FRAGMENT_HEAD)||"").replace(Wn.FRAGMENT_MAIN_UV,i.get(Wn.FRAGMENT_MAIN_UV)||"").replace(Wn.FRAGMENT_MAIN_IMAGE,i.get(Wn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=DJ.replace(Wn.VERTEX_HEAD,i.get(Wn.VERTEX_HEAD)||"").replace(Wn.VERTEX_MAIN_SUPPORT,i.get(Wn.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(i){for(const t of i.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(i){for(const t of i.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(i){this.extensions={};for(const t of i)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(i){this.encodeOutput!==i&&(i?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(i){return this.encodeOutput}setOutputEncodingEnabled(i){this.encodeOutput=i}get time(){return this.uniforms.time.value}set time(i){this.uniforms.time.value=i}setDeltaTime(i){this.uniforms.time.value+=i}adoptCameraSettings(i){this.copyCameraSettings(i)}copyCameraSettings(i){i&&(this.uniforms.cameraNear.value=i.near,this.uniforms.cameraFar.value=i.far,i instanceof Rs?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(i,t){const e=this.uniforms;e.resolution.value.set(i,t),e.texelSize.value.set(1/i,1/t),e.aspect.value=i/t}static get Section(){return Wn}};function l9(i,t,e){for(const n of t){const s="$1"+i+n.charAt(0).toUpperCase()+n.slice(1),r=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const a of e.entries())a[1]!==null&&e.set(a[0],a[1].replace(r,s))}}function OJ(i,t,e){let n=t.getFragmentShader(),s=t.getVertexShader();const r=n!==void 0&&/mainImage/.test(n),a=n!==void 0&&/mainUv/.test(n);if(e.attributes|=t.getAttributes(),n===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(a&&(e.attributes&Wd.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!r&&!a)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const l=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,u=e.shaderParts;let f=u.get(Wn.FRAGMENT_HEAD)||"",m=u.get(Wn.FRAGMENT_MAIN_UV)||"",g=u.get(Wn.FRAGMENT_MAIN_IMAGE)||"",v=u.get(Wn.VERTEX_HEAD)||"",_=u.get(Wn.VERTEX_MAIN_SUPPORT)||"";const b=new Set,T=new Set;if(a&&(m+=`	${i}MainUv(UV);
`,e.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const w=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);_+=`	${i}MainSupport(`,_+=w?`vUv);
`:`);
`;for(const D of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const B of D[1].split(/\s*,\s*/))e.varyings.add(B),b.add(B),T.add(B);for(const D of s.matchAll(l))T.add(D[1])}for(const w of n.matchAll(l))T.add(w[1]);for(const w of t.defines.keys())T.add(w.replace(/\([\w\s,]*\)/g,""));for(const w of t.uniforms.keys())T.add(w);T.delete("while"),T.delete("for"),T.delete("if"),t.uniforms.forEach((w,D)=>e.uniforms.set(i+D.charAt(0).toUpperCase()+D.slice(1),w)),t.defines.forEach((w,D)=>e.defines.set(i+D.charAt(0).toUpperCase()+D.slice(1),w));const E=new Map([["fragment",n],["vertex",s]]);l9(i,T,e.defines),l9(i,T,E),n=E.get("fragment"),s=E.get("vertex");const S=t.blendMode;if(e.blendModes.set(S.blendFunction,S),r){t.inputColorSpace!==null&&t.inputColorSpace!==e.colorSpace&&(g+=t.inputColorSpace===Kn?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==Ec?e.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(e.colorSpace=t.inputColorSpace);const w=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;g+=`${i}MainImage(color0, UV, `,(e.attributes&Wd.DEPTH)!==0&&w.test(n)&&(g+="depth, ",e.readDepth=!0),g+=`color1);
	`;const D=i+"BlendOpacity";e.uniforms.set(D,S.opacity),g+=`color0 = blend${S.blendFunction}(color0, color1, ${D});

	`,f+=`uniform float ${D};

`}if(f+=n+`
`,s!==null&&(v+=s+`
`),u.set(Wn.FRAGMENT_HEAD,f),u.set(Wn.FRAGMENT_MAIN_UV,m),u.set(Wn.FRAGMENT_MAIN_IMAGE,g),u.set(Wn.VERTEX_HEAD,v),u.set(Wn.VERTEX_MAIN_SUPPORT,_),t.extensions!==null)for(const w of t.extensions)e.extensions.add(w)}}var NJ=class extends ao{constructor(i,...t){super("EffectPass"),this.fullscreenMaterial=new BJ(null,null,null,i),this.listener=e=>this.handleEvent(e),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(i){for(const t of this.effects)t.mainScene=i}set mainCamera(i){this.fullscreenMaterial.copyCameraSettings(i);for(const t of this.effects)t.mainCamera=i}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(i){this.fullscreenMaterial.encodeOutput=i}get dithering(){return this.fullscreenMaterial.dithering}set dithering(i){const t=this.fullscreenMaterial;t.dithering=i,t.needsUpdate=!0}setEffects(i){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=i.sort((t,e)=>e.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const i=new _K;let t=0;for(const a of this.effects)if(a.blendMode.blendFunction===Tn.DST)i.attributes|=a.getAttributes()&Wd.DEPTH;else{if((i.attributes&a.getAttributes()&Wd.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${a.name})`);OJ("e"+t++,a,i)}let e=i.shaderParts.get(Wn.FRAGMENT_HEAD),n=i.shaderParts.get(Wn.FRAGMENT_MAIN_IMAGE),s=i.shaderParts.get(Wn.FRAGMENT_MAIN_UV);const r=/\bblend\b/g;for(const a of i.blendModes.values())e+=a.getShaderCode().replace(r,`blend${a.blendFunction}`)+`
`;(i.attributes&Wd.DEPTH)!==0?(i.readDepth&&(n=`float depth = readDepth(UV);

	`+n),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,i.colorSpace===Kn&&(n+=`color0 = sRGBToLinear(color0);
	`),i.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,i.defines.set("UV","transformedUv")):i.defines.set("UV","vUv"),i.shaderParts.set(Wn.FRAGMENT_HEAD,e),i.shaderParts.set(Wn.FRAGMENT_MAIN_IMAGE,n),i.shaderParts.set(Wn.FRAGMENT_MAIN_UV,s);for(const[a,l]of i.shaderParts)l!==null&&i.shaderParts.set(a,l.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(i)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(i,t=op){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=t;for(const e of this.effects)e.setDepthTexture(i,t)}render(i,t,e,n,s){for(const r of this.effects)r.update(i,t,n);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=t.texture,r.time+=n*this.timeScale,i.setRenderTarget(this.renderToScreen?null:e),i.render(this.scene,this.camera)}}setSize(i,t){this.fullscreenMaterial.setSize(i,t);for(const e of this.effects)e.setSize(i,t)}initialize(i,t,e){this.renderer=i;for(const n of this.effects)n.initialize(i,t,e);this.updateMaterial(),e!==void 0&&e!==Ws&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const i of this.effects)i.removeEventListener("change",this.listener),i.dispose()}handleEvent(i){switch(i.type){case"change":this.recompile();break}}},IJ=class extends ao{constructor(i,t,{renderTarget:e,resolutionScale:n=1,width:s=ia.AUTO_SIZE,height:r=ia.AUTO_SIZE,resolutionX:a=s,resolutionY:l=r}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new AN(i,t,new Jw);const u=this.renderPass;u.ignoreBackground=!0,u.skipShadowMapUpdate=!0;const f=u.getClearPass();f.overrideClearColor=new oe(7829503),f.overrideClearAlpha=1,this.renderTarget=e,this.renderTarget===void 0&&(this.renderTarget=new Ds(1,1,{minFilter:os,magFilter:os}),this.renderTarget.texture.name="NormalPass.Target");const m=this.resolution=new ia(this,a,l,n);m.addEventListener("change",g=>this.setSize(m.baseWidth,m.baseHeight))}set mainScene(i){this.renderPass.mainScene=i}set mainCamera(i){this.renderPass.mainCamera=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,t,e,n,s){const r=this.renderToScreen?null:this.renderTarget;this.renderPass.render(i,r,r)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t),this.renderTarget.setSize(e.width,e.height)}};function z_(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}new Pt;new Pt;function xN(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var gl=function i(t,e,n){var s=this;xN(this,i),z_(this,"dot2",function(r,a){return s.x*r+s.y*a}),z_(this,"dot3",function(r,a,l){return s.x*r+s.y*a+s.z*l}),this.x=t,this.y=e,this.z=n},UJ=[new gl(1,1,0),new gl(-1,1,0),new gl(1,-1,0),new gl(-1,-1,0),new gl(1,0,1),new gl(-1,0,1),new gl(1,0,-1),new gl(-1,0,-1),new gl(0,1,1),new gl(0,-1,1),new gl(0,1,-1),new gl(0,-1,-1)],c9=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],u9=new Array(512),h9=new Array(512),PJ=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var e=0;e<256;e++){var n;e&1?n=c9[e]^t&255:n=c9[e]^t>>8&255,u9[e]=u9[e+256]=n,h9[e]=h9[e+256]=UJ[n%12]}};PJ(0);function FJ(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var t=i;i=0;for(var e=0;e<t.length;e++)i=(i+(e+1)*(t.charCodeAt(e)%96))%2147483647}return i===0&&(i=311),i}function f9(i){var t=FJ(i);return function(){var e=t*48271%2147483647;return t=e,e/2147483647}}var HJ=function i(t){var e=this;xN(this,i),z_(this,"seed",0),z_(this,"init",function(n){e.seed=n,e.value=f9(n)}),z_(this,"value",f9(this.seed)),this.init(t)};new HJ(Math.random());const zJ=rt.createContext(null),d9=i=>(i.getAttributes()&2)===2,GJ=rt.memo(rt.forwardRef(({children:i,camera:t,scene:e,resolutionScale:n,enabled:s=!0,renderPriority:r=1,autoClear:a=!0,depthBuffer:l,enableNormalPass:u,stencilBuffer:f,multisampling:m=8,frameBufferType:g=i0},v)=>{const{gl:_,scene:b,camera:T,size:E}=SM(),S=e||b,w=t||T,[D,B,N]=rt.useMemo(()=>{const z=new yK(_,{depthBuffer:l,stencilBuffer:f,multisampling:m,frameBufferType:g});z.addPass(new AN(S,w));let U=null,P=null;return u&&(P=new IJ(S,w),P.enabled=!1,z.addPass(P),n!==void 0&&(U=new CJ({normalBuffer:P.texture,resolutionScale:n}),U.enabled=!1,z.addPass(U))),[z,P,U]},[w,_,l,f,m,g,S,u,n]);rt.useEffect(()=>D==null?void 0:D.setSize(E.width,E.height),[D,E]),EM((z,U)=>{if(s){const P=_.autoClear;_.autoClear=a,f&&!a&&_.clearStencil(),D.render(U),_.autoClear=P}},s?r:0);const I=rt.useRef(null);rt.useLayoutEffect(()=>{var P;const z=[],U=I.current.__r3f;if(U&&D){const X=U.children;for(let lt=0;lt<X.length;lt++){const it=X[lt].object;if(it instanceof Xg){const ut=[it];if(!d9(it)){let j=null;for(;(j=(P=X[lt+1])==null?void 0:P.object)instanceof Xg&&!d9(j);)ut.push(j),lt++}const dt=new NJ(w,...ut);z.push(dt)}else it instanceof ao&&z.push(it)}for(const lt of z)D==null||D.addPass(lt);B&&(B.enabled=!0),N&&(N.enabled=!0)}return()=>{for(const X of z)D==null||D.removePass(X);B&&(B.enabled=!1),N&&(N.enabled=!1)}},[D,i,w,B,N]),rt.useEffect(()=>{const z=_.toneMapping;return _.toneMapping=Rc,()=>{_.toneMapping=z}},[_]);const F=rt.useMemo(()=>({composer:D,normalPass:B,downSamplingPass:N,resolutionScale:n,camera:w,scene:S}),[D,B,N,n,w,S]);return rt.useImperativeHandle(v,()=>D,[D]),k.jsx(zJ.Provider,{value:F,children:k.jsx("group",{ref:I,children:i})})}));let kJ=0;const p9=new WeakMap,TM=(i,t)=>function({blendFunction:e=t==null?void 0:t.blendFunction,opacity:n=t==null?void 0:t.opacity,...s}){let r=p9.get(i);if(!r){const u=`@react-three/postprocessing/${i.name}-${kJ++}`;eN({[u]:i}),p9.set(i,r=u)}const a=SM(u=>u.camera),l=Ba.useMemo(()=>[...(t==null?void 0:t.args)??[],...s.args??[{...t,...s}]],[JSON.stringify(s)]);return k.jsx(r,{camera:a,"blendMode-blendFunction":e,"blendMode-opacity-value":n,...s,args:l})},VJ=TM(gJ,{blendFunction:0}),QJ=TM(_J),jJ=TM(xJ,{blendFunction:5}),XJ=rt.forwardRef(function({granularity:i=5},t){const e=rt.useMemo(()=>new SJ(i),[i]);return k.jsx("primitive",{ref:t,object:e,dispose:null})}),qJ=TM(RJ);function YJ(i){const t=kE();return k.jsx("group",{children:k.jsx("directionalLight",{intensity:.5,color:t.pallet.secondColor,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10,...i})})}function WJ(){return k.jsxs(k.Fragment,{children:[k.jsx(jJ,{opacity:.03}),k.jsx(XJ,{granularity:2}),k.jsx(QJ,{offset:[.0015,.0012],blendFunction:Tn.ADD}),k.jsx(VJ,{intensity:.2,luminanceThreshold:.2,luminanceSmoothing:.9}),k.jsx(qJ,{eskil:!1,offset:.2,darkness:.5})]})}o0.preload("models/coffee.glb");function KJ(i){const t=rt.useRef(null),{scene:e,animations:n}=o0("models/coffee.glb"),s=rt.useMemo(()=>_W.clone(e),[e]),{nodes:r,materials:a}=HY(s),{actions:l}=rK(n,t);return rt.useEffect(()=>{var f;const u=Object.keys(l)[0];u&&((f=l[u])==null||f.reset().fadeIn(.5).play())},[l]),k.jsx("group",{ref:t,dispose:null,scale:.1,...i,children:k.jsx("group",{name:"Sketchfab_Scene",children:k.jsx("group",{name:"Sketchfab_model",rotation:[-Math.PI/2,0,0],children:k.jsx("group",{name:"c444e300743744b392e68be146aac0cdfbx",rotation:[Math.PI/2,0,0],scale:.01,children:k.jsx("group",{name:"Object_2",children:k.jsxs("group",{name:"RootNode",children:[k.jsx("group",{name:"Camera",position:[1474.095,1039.759,-1350.41],rotation:[-Math.PI,-.637,2.68],scale:100,children:k.jsx("group",{name:"Object_5"})}),k.jsx("group",{name:"Empty",position:[53.104,23.279,-274.162],scale:115.93}),k.jsxs("group",{name:"Cylinder",position:[-7.398,183.359,-318.123],rotation:[-Math.PI/2,0,0],scale:158.782,children:[k.jsx("mesh",{castShadow:!0,name:"Cylinder_Material006_0",geometry:r.Cylinder_Material006_0.geometry,material:a["Material.006"]}),k.jsx("mesh",{castShadow:!0,name:"Cylinder_Material006_0_1",geometry:r.Cylinder_Material006_0_1.geometry,material:a["Material.006"]})]}),k.jsx("group",{name:"Area",position:[1236.323,142.358,-110.352],rotation:[0,0,-1.395],scale:100,children:k.jsx("group",{name:"Object_11",rotation:[Math.PI/2,0,0],children:k.jsx("group",{name:"Object_12"})})}),k.jsx("group",{name:"Area001",position:[76.334,642.177,-275.205],rotation:[0,0,-.082],scale:100,children:k.jsx("group",{name:"Object_14",rotation:[Math.PI/2,0,0],children:k.jsx("group",{name:"Object_15"})})}),k.jsx("group",{name:"Area002",position:[-888.088,321.865,-341.96],rotation:[0,0,1.672],scale:100,children:k.jsx("group",{name:"Object_17",rotation:[Math.PI/2,0,0],children:k.jsx("group",{name:"Object_18"})})}),k.jsx("group",{name:"Light001",position:[-212.659,804.176,610.725],rotation:[1.89,.881,-2.045],scale:100,children:k.jsx("group",{name:"Object_20",rotation:[Math.PI/2,0,0],children:k.jsx("group",{name:"Object_21"})})}),k.jsx("group",{name:"Light002",position:[-212.659,1006.576,-775.857],rotation:[1.89,.881,-2.045],scale:100,children:k.jsx("group",{name:"Object_23",rotation:[Math.PI/2,0,0],children:k.jsx("group",{name:"Object_24"})})}),k.jsx("group",{name:"Circle",position:[-5.467,22.872,-275.205],rotation:[-Math.PI/2,0,0],scale:[142.07,144.705,118.36],children:k.jsx("mesh",{castShadow:!0,name:"Circle_Material005_0",geometry:r.Circle_Material005_0.geometry,material:a["Material.005"]})}),k.jsx("group",{name:"Cylinder001",position:[-8.338,504.339,-316.572],rotation:[-Math.PI/2,0,0],scale:150.49}),k.jsx("group",{name:"Armature",position:[-5.645,381.247,-326.131],rotation:[-Math.PI/2,0,0],scale:100,children:k.jsxs("group",{name:"Object_29",children:[k.jsx("primitive",{object:r._rootJoint}),k.jsx("group",{name:"Object_31",position:[-8.338,504.339,-316.572],rotation:[-Math.PI/2,0,0],scale:150.49}),k.jsx("skinnedMesh",{castShadow:!0,name:"Object_32",geometry:r.Object_32.geometry,material:Object.assign(a.material_0,{transparent:!0,opacity:.1}),skeleton:r.Object_32.skeleton})]})})]})})})})})})}function JJ(){return k.jsx(uW,{shadows:!0,children:k.jsxs(GJ,{enabled:!0,children:[k.jsx(WJ,{}),k.jsx(uK,{}),k.jsx(YJ,{position:[1,2,1]}),k.jsxs(rt.Suspense,{fallback:null,children:[k.jsx(KJ,{rotation:[0,-.8,0],position:[1,0,.8]}),k.jsx(aK,{rotation:[0,3,0],position:[0,0,1]})]}),k.jsxs("mesh",{receiveShadow:!0,rotation:[-Math.PI/2,0,0],children:[k.jsx("planeGeometry",{args:[100,100]}),k.jsx("shadowMaterial",{attach:"material",opacity:.3})]})]})})}const ZJ=ie.header`
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 2rem;
  padding: 1rem;
  font-weight: 800;

  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  border-radius: 0.3rem;
  background-color: ${({theme:i})=>i.pallet.thirdColor};

  svg {
    fill: ${({theme:i})=>i.pallet.textColor};
  }
`,$J=ie.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  font-feature-settings: "tnum";
  font-variant-numeric: tabular-nums;
`,tZ=ie.div`
  display: flex;
  align-items: center;
`,eZ=ie.div`
  display: flex;
  gap: 0.5rem;
  align-items: center;
`,nZ=ie.div`
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
  padding: 1rem 2rem 0.5rem;
`,iZ=ie.div`
  display: flex;
  justify-content: flex-end;
`,sZ=ie.div`
  position: relative;
  width: clamp(1.5rem, 1vw, 2.5rem);
  height: clamp(1.5rem, 1vw, 2.5rem);
  z-index: ${({$isOpen:i})=>i?100:1};
`,rZ=ie.div`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.1rem;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  border-radius: 0.3rem;
  background-color: ${({theme:i})=>i.pallet.thirdColor};
  z-index: 2;
`,aZ=ie.button`
  position: absolute;
  inset: 0;
  transform: ${({$visible:i,x:t,y:e})=>i?`translate(${t}rem, ${e}rem)`:"translate(0, 0)"};
  transition: transform 0.4s ease ${({$index:i})=>i*.05}s;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.2rem;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  border-radius: 50%;
  background-color: ${({theme:i})=>i.pallet.thirdColor};
  z-index: 1;
`;function oZ(){const[i,t]=rt.useState(new Date),[e,n]=rt.useState(""),s=i.getHours().toString().padStart(2,"0"),r=i.getMinutes().toString().padStart(2,"0"),a=i.getSeconds().toString().padStart(2,"0"),l=(+s%12||12).toString().padStart(2,"0"),u=+s>=12?"PM":"AM";return rt.useEffect(()=>{const f=setInterval(()=>{t(new Date)},1e3);return()=>clearInterval(f)},[]),rt.useEffect(()=>{const f={weekday:"short",day:"numeric",month:"short"};n(i.toLocaleDateString("en-US",f))},[i]),k.jsxs($J,{children:[k.jsx("div",{children:e}),k.jsx("div",{children:`${l}:${r}:${a} ${u}`})]})}function Lr(i){return`Minified Redux error #${i}; visit https://redux.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}var lZ=typeof Symbol=="function"&&Symbol.observable||"@@observable",m9=lZ,Z8=()=>Math.random().toString(36).substring(7).split("").join("."),cZ={INIT:`@@redux/INIT${Z8()}`,REPLACE:`@@redux/REPLACE${Z8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Z8()}`},lE=cZ;function A7(i){if(typeof i!="object"||i===null)return!1;let t=i;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(i)===t||Object.getPrototypeOf(i)===null}function bN(i,t,e){if(typeof i!="function")throw new Error(Lr(2));if(typeof t=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(Lr(0));if(typeof t=="function"&&typeof e>"u"&&(e=t,t=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(Lr(1));return e(bN)(i,t)}let n=i,s=t,r=new Map,a=r,l=0,u=!1;function f(){a===r&&(a=new Map,r.forEach((E,S)=>{a.set(S,E)}))}function m(){if(u)throw new Error(Lr(3));return s}function g(E){if(typeof E!="function")throw new Error(Lr(4));if(u)throw new Error(Lr(5));let S=!0;f();const w=l++;return a.set(w,E),function(){if(S){if(u)throw new Error(Lr(6));S=!1,f(),a.delete(w),r=null}}}function v(E){if(!A7(E))throw new Error(Lr(7));if(typeof E.type>"u")throw new Error(Lr(8));if(typeof E.type!="string")throw new Error(Lr(17));if(u)throw new Error(Lr(9));try{u=!0,s=n(s,E)}finally{u=!1}return(r=a).forEach(w=>{w()}),E}function _(E){if(typeof E!="function")throw new Error(Lr(10));n=E,v({type:lE.REPLACE})}function b(){const E=g;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Lr(11));function w(){const B=S;B.next&&B.next(m())}return w(),{unsubscribe:E(w)}},[m9](){return this}}}return v({type:lE.INIT}),{dispatch:v,subscribe:g,getState:m,replaceReducer:_,[m9]:b}}function uZ(i){Object.keys(i).forEach(t=>{const e=i[t];if(typeof e(void 0,{type:lE.INIT})>"u")throw new Error(Lr(12));if(typeof e(void 0,{type:lE.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Lr(13))})}function hZ(i){const t=Object.keys(i),e={};for(let r=0;r<t.length;r++){const a=t[r];typeof i[a]=="function"&&(e[a]=i[a])}const n=Object.keys(e);let s;try{uZ(e)}catch(r){s=r}return function(a={},l){if(s)throw s;let u=!1;const f={};for(let m=0;m<n.length;m++){const g=n[m],v=e[g],_=a[g],b=v(_,l);if(typeof b>"u")throw l&&l.type,new Error(Lr(14));f[g]=b,u=u||b!==_}return u=u||n.length!==Object.keys(a).length,u?f:a}}function cE(...i){return i.length===0?t=>t:i.length===1?i[0]:i.reduce((t,e)=>(...n)=>t(e(...n)))}function fZ(...i){return t=>(e,n)=>{const s=t(e,n);let r=()=>{throw new Error(Lr(15))};const a={getState:s.getState,dispatch:(u,...f)=>r(u,...f)},l=i.map(u=>u(a));return r=cE(...l)(s.dispatch),{...s,dispatch:r}}}function dZ(i){return A7(i)&&"type"in i&&typeof i.type=="string"}var SN=Symbol.for("immer-nothing"),g9=Symbol.for("immer-draftable"),jo=Symbol.for("immer-state");function Mc(i,...t){throw new Error(`[Immer] minified error nr: ${i}. Full error at: https://bit.ly/3cXEKWf`)}var vy=Object.getPrototypeOf;function qg(i){return!!i&&!!i[jo]}function af(i){var t;return i?EN(i)||Array.isArray(i)||!!i[g9]||!!((t=i.constructor)!=null&&t[g9])||wM(i)||RM(i):!1}var pZ=Object.prototype.constructor.toString();function EN(i){if(!i||typeof i!="object")return!1;const t=vy(i);if(t===null)return!0;const e=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return e===Object?!0:typeof e=="function"&&Function.toString.call(e)===pZ}function uE(i,t){CM(i)===0?Reflect.ownKeys(i).forEach(e=>{t(e,i[e],i)}):i.forEach((e,n)=>t(n,e,i))}function CM(i){const t=i[jo];return t?t.type_:Array.isArray(i)?1:wM(i)?2:RM(i)?3:0}function j5(i,t){return CM(i)===2?i.has(t):Object.prototype.hasOwnProperty.call(i,t)}function MN(i,t,e){const n=CM(i);n===2?i.set(t,e):n===3?i.add(e):i[t]=e}function mZ(i,t){return i===t?i!==0||1/i===1/t:i!==i&&t!==t}function wM(i){return i instanceof Map}function RM(i){return i instanceof Set}function bm(i){return i.copy_||i.base_}function X5(i,t){if(wM(i))return new Map(i);if(RM(i))return new Set(i);if(Array.isArray(i))return Array.prototype.slice.call(i);const e=EN(i);if(t===!0||t==="class_only"&&!e){const n=Object.getOwnPropertyDescriptors(i);delete n[jo];let s=Reflect.ownKeys(n);for(let r=0;r<s.length;r++){const a=s[r],l=n[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:i[a]})}return Object.create(vy(i),n)}else{const n=vy(i);if(n!==null&&e)return{...i};const s=Object.create(n);return Object.assign(s,i)}}function x7(i,t=!1){return LM(i)||qg(i)||!af(i)||(CM(i)>1&&(i.set=i.add=i.clear=i.delete=gZ),Object.freeze(i),t&&Object.entries(i).forEach(([e,n])=>x7(n,!0))),i}function gZ(){Mc(2)}function LM(i){return Object.isFrozen(i)}var vZ={};function Yg(i){const t=vZ[i];return t||Mc(0,i),t}var aA;function TN(){return aA}function yZ(i,t){return{drafts_:[],parent_:i,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function v9(i,t){t&&(Yg("Patches"),i.patches_=[],i.inversePatches_=[],i.patchListener_=t)}function q5(i){Y5(i),i.drafts_.forEach(_Z),i.drafts_=null}function Y5(i){i===aA&&(aA=i.parent_)}function y9(i){return aA=yZ(aA,i)}function _Z(i){const t=i[jo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function _9(i,t){t.unfinalizedDrafts_=t.drafts_.length;const e=t.drafts_[0];return i!==void 0&&i!==e?(e[jo].modified_&&(q5(t),Mc(4)),af(i)&&(i=hE(t,i),t.parent_||fE(t,i)),t.patches_&&Yg("Patches").generateReplacementPatches_(e[jo].base_,i,t.patches_,t.inversePatches_)):i=hE(t,e,[]),q5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),i!==SN?i:void 0}function hE(i,t,e){if(LM(t))return t;const n=t[jo];if(!n)return uE(t,(s,r)=>A9(i,n,t,s,r,e)),t;if(n.scope_!==i)return t;if(!n.modified_)return fE(i,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let r=s,a=!1;n.type_===3&&(r=new Set(s),s.clear(),a=!0),uE(r,(l,u)=>A9(i,n,s,l,u,e,a)),fE(i,s,!1),e&&i.patches_&&Yg("Patches").generatePatches_(n,e,i.patches_,i.inversePatches_)}return n.copy_}function A9(i,t,e,n,s,r,a){if(qg(s)){const l=r&&t&&t.type_!==3&&!j5(t.assigned_,n)?r.concat(n):void 0,u=hE(i,s,l);if(MN(e,n,u),qg(u))i.canAutoFreeze_=!1;else return}else a&&e.add(s);if(af(s)&&!LM(s)){if(!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1)return;hE(i,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(e,n)&&fE(i,s)}}function fE(i,t,e=!1){!i.parent_&&i.immer_.autoFreeze_&&i.canAutoFreeze_&&x7(t,e)}function AZ(i,t){const e=Array.isArray(i),n={type_:e?1:0,scope_:t?t.scope_:TN(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:i,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,r=b7;e&&(s=[n],r=oA);const{revoke:a,proxy:l}=Proxy.revocable(s,r);return n.draft_=l,n.revoke_=a,l}var b7={get(i,t){if(t===jo)return i;const e=bm(i);if(!j5(e,t))return xZ(i,e,t);const n=e[t];return i.finalized_||!af(n)?n:n===$8(i.base_,t)?(t5(i),i.copy_[t]=K5(n,i)):n},has(i,t){return t in bm(i)},ownKeys(i){return Reflect.ownKeys(bm(i))},set(i,t,e){const n=CN(bm(i),t);if(n!=null&&n.set)return n.set.call(i.draft_,e),!0;if(!i.modified_){const s=$8(bm(i),t),r=s==null?void 0:s[jo];if(r&&r.base_===e)return i.copy_[t]=e,i.assigned_[t]=!1,!0;if(mZ(e,s)&&(e!==void 0||j5(i.base_,t)))return!0;t5(i),W5(i)}return i.copy_[t]===e&&(e!==void 0||t in i.copy_)||Number.isNaN(e)&&Number.isNaN(i.copy_[t])||(i.copy_[t]=e,i.assigned_[t]=!0),!0},deleteProperty(i,t){return $8(i.base_,t)!==void 0||t in i.base_?(i.assigned_[t]=!1,t5(i),W5(i)):delete i.assigned_[t],i.copy_&&delete i.copy_[t],!0},getOwnPropertyDescriptor(i,t){const e=bm(i),n=Reflect.getOwnPropertyDescriptor(e,t);return n&&{writable:!0,configurable:i.type_!==1||t!=="length",enumerable:n.enumerable,value:e[t]}},defineProperty(){Mc(11)},getPrototypeOf(i){return vy(i.base_)},setPrototypeOf(){Mc(12)}},oA={};uE(b7,(i,t)=>{oA[i]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});oA.deleteProperty=function(i,t){return oA.set.call(this,i,t,void 0)};oA.set=function(i,t,e){return b7.set.call(this,i[0],t,e,i[0])};function $8(i,t){const e=i[jo];return(e?bm(e):i)[t]}function xZ(i,t,e){var s;const n=CN(t,e);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(i.draft_):void 0}function CN(i,t){if(!(t in i))return;let e=vy(i);for(;e;){const n=Object.getOwnPropertyDescriptor(e,t);if(n)return n;e=vy(e)}}function W5(i){i.modified_||(i.modified_=!0,i.parent_&&W5(i.parent_))}function t5(i){i.copy_||(i.copy_=X5(i.base_,i.scope_.immer_.useStrictShallowCopy_))}var bZ=class{constructor(i){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,n)=>{if(typeof t=="function"&&typeof e!="function"){const r=e;e=t;const a=this;return function(u=r,...f){return a.produce(u,m=>e.call(this,m,...f))}}typeof e!="function"&&Mc(6),n!==void 0&&typeof n!="function"&&Mc(7);let s;if(af(t)){const r=y9(this),a=K5(t,void 0);let l=!0;try{s=e(a),l=!1}finally{l?q5(r):Y5(r)}return v9(r,n),_9(s,r)}else if(!t||typeof t!="object"){if(s=e(t),s===void 0&&(s=t),s===SN&&(s=void 0),this.autoFreeze_&&x7(s,!0),n){const r=[],a=[];Yg("Patches").generateReplacementPatches_(t,s,r,a),n(r,a)}return s}else Mc(1,t)},this.produceWithPatches=(t,e)=>{if(typeof t=="function")return(a,...l)=>this.produceWithPatches(a,u=>t(u,...l));let n,s;return[this.produce(t,e,(a,l)=>{n=a,s=l}),n,s]},typeof(i==null?void 0:i.autoFreeze)=="boolean"&&this.setAutoFreeze(i.autoFreeze),typeof(i==null?void 0:i.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(i.useStrictShallowCopy)}createDraft(i){af(i)||Mc(8),qg(i)&&(i=SZ(i));const t=y9(this),e=K5(i,void 0);return e[jo].isManual_=!0,Y5(t),e}finishDraft(i,t){const e=i&&i[jo];(!e||!e.isManual_)&&Mc(9);const{scope_:n}=e;return v9(n,t),_9(void 0,n)}setAutoFreeze(i){this.autoFreeze_=i}setUseStrictShallowCopy(i){this.useStrictShallowCopy_=i}applyPatches(i,t){let e;for(e=t.length-1;e>=0;e--){const s=t[e];if(s.path.length===0&&s.op==="replace"){i=s.value;break}}e>-1&&(t=t.slice(e+1));const n=Yg("Patches").applyPatches_;return qg(i)?n(i,t):this.produce(i,s=>n(s,t))}};function K5(i,t){const e=wM(i)?Yg("MapSet").proxyMap_(i,t):RM(i)?Yg("MapSet").proxySet_(i,t):AZ(i,t);return(t?t.scope_:TN()).drafts_.push(e),e}function SZ(i){return qg(i)||Mc(10,i),wN(i)}function wN(i){if(!af(i)||LM(i))return i;const t=i[jo];let e;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,e=X5(i,t.scope_.immer_.useStrictShallowCopy_)}else e=X5(i,!0);return uE(e,(n,s)=>{MN(e,n,wN(s))}),t&&(t.finalized_=!1),e}var Xo=new bZ,RN=Xo.produce;Xo.produceWithPatches.bind(Xo);Xo.setAutoFreeze.bind(Xo);Xo.setUseStrictShallowCopy.bind(Xo);Xo.applyPatches.bind(Xo);Xo.createDraft.bind(Xo);Xo.finishDraft.bind(Xo);function EZ(i,t=`expected a function, instead received ${typeof i}`){if(typeof i!="function")throw new TypeError(t)}function MZ(i,t=`expected an object, instead received ${typeof i}`){if(typeof i!="object")throw new TypeError(t)}function TZ(i,t="expected all items to be functions, instead received the following types: "){if(!i.every(e=>typeof e=="function")){const e=i.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${e}]`)}}var x9=i=>Array.isArray(i)?i:[i];function CZ(i){const t=Array.isArray(i[0])?i[0]:i;return TZ(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function wZ(i,t){const e=[],{length:n}=i;for(let s=0;s<n;s++)e.push(i[s].apply(null,t));return e}var RZ=class{constructor(i){this.value=i}deref(){return this.value}},LZ=typeof WeakRef<"u"?WeakRef:RZ,DZ=0,b9=1;function m4(){return{s:DZ,v:void 0,o:null,p:null}}function LN(i,t={}){let e=m4();const{resultEqualityCheck:n}=t;let s,r=0;function a(){var g;let l=e;const{length:u}=arguments;for(let v=0,_=u;v<_;v++){const b=arguments[v];if(typeof b=="function"||typeof b=="object"&&b!==null){let T=l.o;T===null&&(l.o=T=new WeakMap);const E=T.get(b);E===void 0?(l=m4(),T.set(b,l)):l=E}else{let T=l.p;T===null&&(l.p=T=new Map);const E=T.get(b);E===void 0?(l=m4(),T.set(b,l)):l=E}}const f=l;let m;if(l.s===b9)m=l.v;else if(m=i.apply(null,arguments),r++,n){const v=((g=s==null?void 0:s.deref)==null?void 0:g.call(s))??s;v!=null&&n(v,m)&&(m=v,r!==0&&r--),s=typeof m=="object"&&m!==null||typeof m=="function"?new LZ(m):m}return f.s=b9,f.v=m,m}return a.clearCache=()=>{e=m4(),a.resetResultsCount()},a.resultsCount=()=>r,a.resetResultsCount=()=>{r=0},a}function BZ(i,...t){const e=typeof i=="function"?{memoize:i,memoizeOptions:t}:i,n=(...s)=>{let r=0,a=0,l,u={},f=s.pop();typeof f=="object"&&(u=f,f=s.pop()),EZ(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const m={...e,...u},{memoize:g,memoizeOptions:v=[],argsMemoize:_=LN,argsMemoizeOptions:b=[]}=m,T=x9(v),E=x9(b),S=CZ(s),w=g(function(){return r++,f.apply(null,arguments)},...T),D=_(function(){a++;const N=wZ(S,arguments);return l=w.apply(null,N),l},...E);return Object.assign(D,{resultFunc:f,memoizedResultFunc:w,dependencies:S,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>l,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:g,argsMemoize:_})};return Object.assign(n,{withTypes:()=>n}),n}var DN=BZ(LN),OZ=Object.assign((i,t=DN)=>{MZ(i,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof i}`);const e=Object.keys(i),n=e.map(r=>i[r]);return t(n,(...r)=>r.reduce((a,l,u)=>(a[e[u]]=l,a),{}))},{withTypes:()=>OZ});function BN(i){return({dispatch:e,getState:n})=>s=>r=>typeof r=="function"?r(e,n,i):s(r)}var NZ=BN(),IZ=BN,UZ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?cE:cE.apply(null,arguments)};function S9(i,t){function e(...n){if(t){let s=t(...n);if(!s)throw new Error($h(0));return{type:i,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:i,payload:n[0]}}return e.toString=()=>`${i}`,e.type=i,e.match=n=>dZ(n)&&n.type===i,e}var ON=class f_ extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,f_.prototype)}static get[Symbol.species](){return f_}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new f_(...t[0].concat(this)):new f_(...t.concat(this))}};function E9(i){return af(i)?RN(i,()=>{}):i}function g4(i,t,e){return i.has(t)?i.get(t):i.set(t,e(t)).get(t)}function PZ(i){return typeof i=="boolean"}var FZ=()=>function(t){const{thunk:e=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:r=!0}=t??{};let a=new ON;return e&&(PZ(e)?a.push(NZ):a.push(IZ(e.extraArgument))),a},HZ="RTK_autoBatch",M9=i=>t=>{setTimeout(t,i)},zZ=(i={type:"raf"})=>t=>(...e)=>{const n=t(...e);let s=!0,r=!1,a=!1;const l=new Set,u=i.type==="tick"?queueMicrotask:i.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:M9(10):i.type==="callback"?i.queueNotification:M9(i.timeout),f=()=>{a=!1,r&&(r=!1,l.forEach(m=>m()))};return Object.assign({},n,{subscribe(m){const g=()=>s&&m(),v=n.subscribe(g);return l.add(m),()=>{v(),l.delete(m)}},dispatch(m){var g;try{return s=!((g=m==null?void 0:m.meta)!=null&&g[HZ]),r=!s,r&&(a||(a=!0,u(f))),n.dispatch(m)}finally{s=!0}}})},GZ=i=>function(e){const{autoBatch:n=!0}=e??{};let s=new ON(i);return n&&s.push(zZ(typeof n=="object"?n:void 0)),s};function kZ(i){const t=FZ(),{reducer:e=void 0,middleware:n,devTools:s=!0,preloadedState:r=void 0,enhancers:a=void 0}=i||{};let l;if(typeof e=="function")l=e;else if(A7(e))l=hZ(e);else throw new Error($h(1));let u;typeof n=="function"?u=n(t):u=t();let f=cE;s&&(f=UZ({trace:!1,...typeof s=="object"&&s}));const m=fZ(...u),g=GZ(m);let v=typeof a=="function"?a(g):g();const _=f(...v);return bN(l,r,_)}function NN(i){const t={},e=[];let n;const s={addCase(r,a){const l=typeof r=="string"?r:r.type;if(!l)throw new Error($h(28));if(l in t)throw new Error($h(29));return t[l]=a,s},addMatcher(r,a){return e.push({matcher:r,reducer:a}),s},addDefaultCase(r){return n=r,s}};return i(s),[t,e,n]}function VZ(i){return typeof i=="function"}function QZ(i,t){let[e,n,s]=NN(t),r;if(VZ(i))r=()=>E9(i());else{const l=E9(i);r=()=>l}function a(l=r(),u){let f=[e[u.type],...n.filter(({matcher:m})=>m(u)).map(({reducer:m})=>m)];return f.filter(m=>!!m).length===0&&(f=[s]),f.reduce((m,g)=>{if(g)if(qg(m)){const _=g(m,u);return _===void 0?m:_}else{if(af(m))return RN(m,v=>g(v,u));{const v=g(m,u);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return m},l)}return a.getInitialState=r,a}var jZ=Symbol.for("rtk-slice-createasyncthunk");function XZ(i,t){return`${i}/${t}`}function qZ({creators:i}={}){var e;const t=(e=i==null?void 0:i.asyncThunk)==null?void 0:e[jZ];return function(s){const{name:r,reducerPath:a=r}=s;if(!r)throw new Error($h(11));const l=(typeof s.reducers=="function"?s.reducers(WZ()):s.reducers)||{},u=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(B,N){const I=typeof B=="string"?B:B.type;if(!I)throw new Error($h(12));if(I in f.sliceCaseReducersByType)throw new Error($h(13));return f.sliceCaseReducersByType[I]=N,m},addMatcher(B,N){return f.sliceMatchers.push({matcher:B,reducer:N}),m},exposeAction(B,N){return f.actionCreators[B]=N,m},exposeCaseReducer(B,N){return f.sliceCaseReducersByName[B]=N,m}};u.forEach(B=>{const N=l[B],I={reducerName:B,type:XZ(r,B),createNotation:typeof s.reducers=="function"};JZ(N)?$Z(I,N,m,t):KZ(I,N,m)});function g(){const[B={},N=[],I=void 0]=typeof s.extraReducers=="function"?NN(s.extraReducers):[s.extraReducers],F={...B,...f.sliceCaseReducersByType};return QZ(s.initialState,z=>{for(let U in F)z.addCase(U,F[U]);for(let U of f.sliceMatchers)z.addMatcher(U.matcher,U.reducer);for(let U of N)z.addMatcher(U.matcher,U.reducer);I&&z.addDefaultCase(I)})}const v=B=>B,_=new Map,b=new WeakMap;let T;function E(B,N){return T||(T=g()),T(B,N)}function S(){return T||(T=g()),T.getInitialState()}function w(B,N=!1){function I(z){let U=z[B];return typeof U>"u"&&N&&(U=g4(b,I,S)),U}function F(z=v){const U=g4(_,N,()=>new WeakMap);return g4(U,z,()=>{const P={};for(const[X,lt]of Object.entries(s.selectors??{}))P[X]=YZ(lt,z,()=>g4(b,z,S),N);return P})}return{reducerPath:B,getSelectors:F,get selectors(){return F(I)},selectSlice:I}}const D={name:r,reducer:E,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:S,...w(a),injectInto(B,{reducerPath:N,...I}={}){const F=N??a;return B.inject({reducerPath:F,reducer:E},I),{...D,...w(F,!0)}}};return D}}function YZ(i,t,e,n){function s(r,...a){let l=t(r);return typeof l>"u"&&n&&(l=e()),i(l,...a)}return s.unwrapped=i,s}var S7=qZ();function WZ(){function i(t,e){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...e}}return i.withTypes=()=>i,{reducer(t){return Object.assign({[t.name](...e){return t(...e)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,e){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:e}},asyncThunk:i}}function KZ({type:i,reducerName:t,createNotation:e},n,s){let r,a;if("reducer"in n){if(e&&!ZZ(n))throw new Error($h(17));r=n.reducer,a=n.prepare}else r=n;s.addCase(i,r).exposeCaseReducer(t,r).exposeAction(t,a?S9(i,a):S9(i))}function JZ(i){return i._reducerDefinitionType==="asyncThunk"}function ZZ(i){return i._reducerDefinitionType==="reducerWithPrepare"}function $Z({type:i,reducerName:t},e,n,s){if(!s)throw new Error($h(18));const{payloadCreator:r,fulfilled:a,pending:l,rejected:u,settled:f,options:m}=e,g=s(i,r,m);n.exposeAction(t,g),a&&n.addCase(g.fulfilled,a),l&&n.addCase(g.pending,l),u&&n.addCase(g.rejected,u),f&&n.addMatcher(g.settled,f),n.exposeCaseReducer(t,{fulfilled:a||v4,pending:l||v4,rejected:u||v4,settled:f||v4})}function v4(){}function $h(i){return`Minified Redux Toolkit error #${i}; visit https://redux-toolkit.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}let IN=0;const t$=DN(i=>i.popups.popups,i=>i.filter(t=>t.type==="toast")),e$={popups:[]},UN=S7({name:"popup",initialState:e$,reducers:{openPopup:(i,t)=>{i.popups.push({id:++IN,result:"success",...t.payload})},openThunkPopup:(i,t)=>{i.popups.push({result:"success",...t.payload})},closePopup:(i,t)=>{i.popups=i.popups.filter(e=>e.id!==t.payload)},closeAllPopups:i=>{i.popups=[]}}}),{openPopup:Irt,closePopup:n$,closeAllPopups:Urt,openThunkPopup:i$}=UN.actions,J5=(i,t="success")=>e=>{const n=++IN;e(i$({type:"toast",text:i,id:n,result:t}))},s$=UN.reducer;function r$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 256 0 Q 184.7741935483871 1.032258064516129 126.96774193548387 35.096774193548384 L 126.96774193548387 35.096774193548384 L 126.96774193548387 35.096774193548384 Q 69.16129032258064 69.16129032258064 35.096774193548384 126.96774193548387 L 35.096774193548384 126.96774193548387 L 35.096774193548384 126.96774193548387 Q 1.032258064516129 184.7741935483871 0 256 Q 1.032258064516129 327.2258064516129 35.096774193548384 385.03225806451616 Q 69.16129032258064 442.83870967741933 126.96774193548387 476.9032258064516 Q 184.7741935483871 510.96774193548384 256 512 Q 327.2258064516129 510.96774193548384 385.03225806451616 476.9032258064516 Q 442.83870967741933 442.83870967741933 476.9032258064516 385.03225806451616 Q 510.96774193548384 327.2258064516129 512 256 Q 510.96774193548384 184.7741935483871 476.9032258064516 126.96774193548387 Q 442.83870967741933 69.16129032258064 385.03225806451616 35.096774193548384 Q 327.2258064516129 1.032258064516129 256 0 L 256 0 Z M 374.7096774193548 174.4516129032258 Q 372.64516129032256 195.09677419354838 367.48387096774195 230.19354838709677 L 367.48387096774195 230.19354838709677 L 367.48387096774195 230.19354838709677 Q 362.3225806451613 264.258064516129 356.1290322580645 299.35483870967744 L 356.1290322580645 299.35483870967744 L 356.1290322580645 299.35483870967744 Q 349.93548387096774 334.4516129032258 345.80645161290323 358.19354838709677 Q 339.61290322580646 385.03225806451616 328.258064516129 384 Q 311.741935483871 384 296.258064516129 371.61290322580646 Q 292.1290322580645 368.51612903225805 288 365.4193548387097 Q 270.4516129032258 354.06451612903226 258.06451612903226 344.7741935483871 Q 245.67741935483872 336.51612903225805 230.19354838709677 327.2258064516129 Q 214.70967741935485 315.8709677419355 217.80645161290323 308.64516129032256 Q 219.8709677419355 300.38709677419354 230.19354838709677 292.1290322580645 Q 233.29032258064515 289.03225806451616 236.38709677419354 285.93548387096774 Q 237.41935483870967 283.8709677419355 247.74193548387098 275.61290322580646 Q 264.258064516129 260.1290322580645 283.8709677419355 240.51612903225808 Q 304.51612903225805 221.93548387096774 306.5806451612903 216.7741935483871 Q 307.61290322580646 215.74193548387098 305.5483870967742 212.6451612903226 Q 302.4516129032258 210.58064516129033 300.38709677419354 211.61290322580646 Q 296.258064516129 212.6451612903226 192 283.8709677419355 Q 176.51612903225808 294.19354838709677 164.1290322580645 293.16129032258067 Q 156.90322580645162 293.16129032258067 145.5483870967742 290.06451612903226 Q 134.19354838709677 288 124.90322580645162 283.8709677419355 Q 121.80645161290323 282.83870967741933 118.70967741935483 282.83870967741933 Q 97.03225806451613 277.6774193548387 97.03225806451613 267.35483870967744 Q 98.06451612903226 260.1290322580645 115.61290322580645 252.90322580645162 Q 228.1290322580645 204.38709677419354 265.2903225806452 188.90322580645162 Q 316.9032258064516 167.2258064516129 335.48387096774195 161.03225806451613 Q 355.0967741935484 153.80645161290323 360.258064516129 153.80645161290323 Q 365.4193548387097 153.80645161290323 370.5806451612903 156.90322580645162 Q 373.6774193548387 160 374.7096774193548 164.1290322580645 Q 374.7096774193548 169.29032258064515 374.7096774193548 174.4516129032258 L 374.7096774193548 174.4516129032258 Z"})})}function a$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 171.3548387096774 407.741935483871 Q 170.32258064516128 411.8709677419355 166.19354838709677 411.8709677419355 Q 160 411.8709677419355 160 407.741935483871 Q 161.03225806451613 404.64516129032256 165.16129032258064 404.64516129032256 Q 170.32258064516128 404.64516129032256 171.3548387096774 407.741935483871 L 171.3548387096774 407.741935483871 Z M 139.3548387096774 403.61290322580646 Q 138.32258064516128 406.7096774193548 143.48387096774192 408.7741935483871 Q 148.6451612903226 409.80645161290323 149.67741935483872 406.7096774193548 Q 150.70967741935485 402.5806451612903 145.5483870967742 401.5483870967742 Q 140.38709677419354 400.51612903225805 139.3548387096774 403.61290322580646 L 139.3548387096774 403.61290322580646 Z M 184.7741935483871 401.5483870967742 Q 179.61290322580646 402.5806451612903 179.61290322580646 406.7096774193548 Q 180.6451612903226 409.80645161290323 185.80645161290323 409.80645161290323 Q 190.96774193548387 407.741935483871 190.96774193548387 404.64516129032256 Q 189.93548387096774 401.5483870967742 184.7741935483871 401.5483870967742 L 184.7741935483871 401.5483870967742 Z M 252.90322580645162 6.193548387096774 Q 142.4516129032258 8.258064516129032 72.25806451612904 78.45161290322581 L 72.25806451612904 78.45161290322581 L 72.25806451612904 78.45161290322581 Q 2.064516129032258 148.6451612903226 0 258.06451612903226 Q 1.032258064516129 345.80645161290323 48.516129032258064 411.8709677419355 Q 96 477.93548387096774 175.48387096774192 504.7741935483871 Q 194.06451612903226 505.80645161290323 193.03225806451613 492.38709677419354 Q 193.03225806451613 488.258064516129 193.03225806451613 476.9032258064516 Q 193.03225806451613 453.16129032258067 193.03225806451613 429.4193548387097 Q 190.96774193548387 429.4193548387097 173.41935483870967 431.48387096774195 Q 154.83870967741936 432.51612903225805 134.19354838709677 427.35483870967744 Q 113.54838709677419 421.16129032258067 105.29032258064517 398.4516129032258 Q 105.29032258064517 396.38709677419354 97.03225806451613 381.93548387096774 Q 88.7741935483871 368.51612903225805 76.38709677419355 360.258064516129 Q 74.3225806451613 359.2258064516129 68.12903225806451 352 Q 60.903225806451616 345.80645161290323 78.45161290322581 344.7741935483871 Q 79.48387096774194 343.741935483871 92.90322580645162 348.9032258064516 Q 106.3225806451613 353.03225806451616 117.6774193548387 371.61290322580646 Q 136.25806451612902 399.48387096774195 157.93548387096774 399.48387096774195 Q 180.6451612903226 399.48387096774195 193.03225806451613 393.2903225806452 Q 197.16129032258064 368.51612903225805 209.5483870967742 358.19354838709677 Q 164.1290322580645 356.1290322580645 130.06451612903226 335.48387096774195 Q 96 315.8709677419355 93.93548387096774 243.61290322580646 Q 93.93548387096774 222.96774193548387 100.12903225806451 209.5483870967742 Q 105.29032258064517 196.1290322580645 117.6774193548387 183.74193548387098 Q 115.61290322580645 177.5483870967742 113.54838709677419 158.96774193548387 Q 111.48387096774194 140.38709677419354 120.7741935483871 113.54838709677419 Q 139.3548387096774 110.45161290322581 164.1290322580645 124.90322580645162 Q 189.93548387096774 138.32258064516128 192 141.41935483870967 Q 192 141.41935483870967 192 141.41935483870967 Q 222.96774193548387 132.1290322580645 257.03225806451616 132.1290322580645 Q 290.06451612903226 132.1290322580645 322.06451612903226 141.41935483870967 Q 322.06451612903226 140.38709677419354 335.48387096774195 132.1290322580645 Q 347.8709677419355 123.87096774193549 364.38709677419354 117.6774193548387 Q 380.9032258064516 110.45161290322581 393.2903225806452 113.54838709677419 Q 402.5806451612903 140.38709677419354 400.51612903225805 158.96774193548387 Q 398.4516129032258 177.5483870967742 395.35483870967744 183.74193548387098 Q 407.741935483871 196.1290322580645 414.96774193548384 209.5483870967742 Q 422.19354838709677 222.96774193548387 422.19354838709677 243.61290322580646 Q 421.16129032258067 293.16129032258067 404.64516129032256 316.9032258064516 Q 387.0967741935484 339.61290322580646 360.258064516129 347.8709677419355 Q 333.4193548387097 356.1290322580645 303.48387096774195 358.19354838709677 Q 320 369.5483870967742 321.03225806451616 405.6774193548387 Q 321.03225806451616 443.8709677419355 321.03225806451616 473.80645161290323 Q 321.03225806451616 487.2258064516129 321.03225806451616 492.38709677419354 Q 320 505.80645161290323 338.5806451612903 504.7741935483871 Q 417.03225806451616 477.93548387096774 464.51612903225805 411.8709677419355 Q 510.96774193548384 345.80645161290323 512 258.06451612903226 Q 510.96774193548384 185.80645161290323 476.9032258064516 129.03225806451613 Q 441.80645161290323 72.25806451612904 384 39.225806451612904 Q 325.16129032258067 7.225806451612903 252.90322580645162 6.193548387096774 L 252.90322580645162 6.193548387096774 Z M 100.12903225806451 362.3225806451613 Q 98.06451612903226 364.38709677419354 101.16129032258064 367.48387096774195 Q 104.25806451612904 370.5806451612903 106.3225806451613 368.51612903225805 Q 108.38709677419355 366.4516129032258 105.29032258064517 363.35483870967744 Q 103.2258064516129 360.258064516129 100.12903225806451 362.3225806451613 L 100.12903225806451 362.3225806451613 Z M 88.7741935483871 354.06451612903226 Q 88.7741935483871 356.1290322580645 91.87096774193549 358.19354838709677 Q 94.96774193548387 359.2258064516129 96 357.16129032258067 Q 97.03225806451613 355.0967741935484 93.93548387096774 353.03225806451616 Q 90.83870967741936 352 88.7741935483871 354.06451612903226 L 88.7741935483871 354.06451612903226 Z M 122.83870967741936 390.19354838709677 Q 120.7741935483871 393.2903225806452 123.87096774193549 397.4193548387097 Q 128 400.51612903225805 131.09677419354838 398.4516129032258 Q 132.1290322580645 395.35483870967744 129.03225806451613 391.2258064516129 Q 124.90322580645162 388.1290322580645 122.83870967741936 390.19354838709677 L 122.83870967741936 390.19354838709677 Z M 110.45161290322581 375.741935483871 Q 108.38709677419355 377.80645161290323 110.45161290322581 381.93548387096774 Q 113.54838709677419 385.03225806451616 116.64516129032258 384 Q 118.70967741935483 381.93548387096774 116.64516129032258 377.80645161290323 Q 113.54838709677419 373.6774193548387 110.45161290322581 375.741935483871 L 110.45161290322581 375.741935483871 Z"})})}function o$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 475.42857142857144 0 L 36.57142857142857 0 L 475.42857142857144 0 L 36.57142857142857 0 Q 20.571428571428573 0 10.285714285714286 10.285714285714286 Q 0 21.714285714285715 0 36.57142857142857 L 0 475.42857142857144 L 0 475.42857142857144 Q 0 490.2857142857143 10.285714285714286 501.7142857142857 Q 20.571428571428573 512 36.57142857142857 512 L 475.42857142857144 512 L 475.42857142857144 512 Q 491.42857142857144 512 501.7142857142857 501.7142857142857 Q 512 490.2857142857143 512 475.42857142857144 L 512 36.57142857142857 L 512 36.57142857142857 Q 512 21.714285714285715 501.7142857142857 10.285714285714286 Q 491.42857142857144 0 475.42857142857144 0 L 475.42857142857144 0 Z M 154.28571428571428 438.85714285714283 L 78.85714285714286 438.85714285714283 L 154.28571428571428 438.85714285714283 L 78.85714285714286 438.85714285714283 L 78.85714285714286 194.28571428571428 L 78.85714285714286 194.28571428571428 L 155.42857142857142 194.28571428571428 L 155.42857142857142 194.28571428571428 L 155.42857142857142 438.85714285714283 L 154.28571428571428 438.85714285714283 Z M 116.57142857142857 161.14285714285714 Q 98.28571428571429 161.14285714285714 85.71428571428571 148.57142857142858 L 85.71428571428571 148.57142857142858 L 85.71428571428571 148.57142857142858 Q 73.14285714285714 136 73.14285714285714 117.71428571428571 Q 73.14285714285714 98.28571428571429 85.71428571428571 85.71428571428571 Q 98.28571428571429 73.14285714285714 116.57142857142857 73.14285714285714 Q 136 73.14285714285714 147.42857142857142 85.71428571428571 Q 160 98.28571428571429 161.14285714285714 117.71428571428571 Q 160 136 147.42857142857142 148.57142857142858 Q 136 161.14285714285714 116.57142857142857 161.14285714285714 L 116.57142857142857 161.14285714285714 Z M 438.85714285714283 438.85714285714283 L 363.42857142857144 438.85714285714283 L 438.85714285714283 438.85714285714283 L 363.42857142857144 438.85714285714283 L 363.42857142857144 320 L 363.42857142857144 320 Q 364.57142857142856 297.14285714285717 357.7142857142857 276.57142857142856 Q 352 257.14285714285717 323.42857142857144 254.85714285714286 Q 294.85714285714283 256 285.7142857142857 274.2857142857143 Q 277.7142857142857 292.57142857142856 278.85714285714283 317.7142857142857 L 278.85714285714283 438.85714285714283 L 278.85714285714283 438.85714285714283 L 202.28571428571428 438.85714285714283 L 202.28571428571428 438.85714285714283 L 202.28571428571428 194.28571428571428 L 202.28571428571428 194.28571428571428 L 275.42857142857144 194.28571428571428 L 275.42857142857144 194.28571428571428 L 275.42857142857144 227.42857142857142 L 275.42857142857144 227.42857142857142 L 276.57142857142856 227.42857142857142 L 276.57142857142856 227.42857142857142 Q 283.42857142857144 212.57142857142858 301.7142857142857 201.14285714285714 Q 320 188.57142857142858 348.57142857142856 188.57142857142858 Q 404.57142857142856 189.71428571428572 422.85714285714283 221.71428571428572 Q 441.14285714285717 254.85714285714286 438.85714285714283 305.14285714285717 L 438.85714285714283 438.85714285714283 L 438.85714285714283 438.85714285714283 Z"})})}function l$(){return k.jsxs(eZ,{children:[k.jsx("a",{href:"https://t.me/Nik0o_o",target:"_blank",children:k.jsx(r$,{width:"1.5rem",height:"1.5rem",className:"cursor-pointer"})}),k.jsx("a",{href:"https://github.com/kanedaSh0tar0",target:"_blank",children:k.jsx(a$,{width:"1.5rem",height:"1.5rem",className:"cursor-pointer"})}),k.jsx("a",{href:"https://www.linkedin.com/in/mykyta-antonov-246736354/",target:"_blank",children:k.jsx(o$,{width:"1.5rem",height:"1.5rem",className:"cursor-pointer"})})]})}function c$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 283.29411764705884 48 Q 300.2352941176471 56.470588235294116 301.1764705882353 75.29411764705883 L 301.1764705882353 436.70588235294116 L 301.1764705882353 436.70588235294116 Q 300.2352941176471 455.52941176470586 283.29411764705884 464 Q 265.4117647058824 471.52941176470586 251.2941176470588 459.29411764705884 L 124.23529411764706 346.3529411764706 L 124.23529411764706 346.3529411764706 L 60.23529411764706 346.3529411764706 L 60.23529411764706 346.3529411764706 Q 34.8235294117647 345.4117647058824 17.88235294117647 328.47058823529414 Q 0.9411764705882353 311.52941176470586 0 286.11764705882354 L 0 225.88235294117646 L 0 225.88235294117646 Q 0.9411764705882353 200.47058823529412 17.88235294117647 183.52941176470588 Q 34.8235294117647 166.58823529411765 60.23529411764706 165.64705882352942 L 124.23529411764706 165.64705882352942 L 124.23529411764706 165.64705882352942 L 251.2941176470588 52.705882352941174 L 251.2941176470588 52.705882352941174 Q 265.4117647058824 40.470588235294116 283.29411764705884 48 L 283.29411764705884 48 Z M 445.1764705882353 115.76470588235294 Q 476.2352941176471 141.1764705882353 494.11764705882354 176.94117647058823 L 494.11764705882354 176.94117647058823 L 494.11764705882354 176.94117647058823 Q 512 213.64705882352942 512 256 Q 512 298.3529411764706 494.11764705882354 335.05882352941177 Q 476.2352941176471 370.8235294117647 445.1764705882353 396.2352941176471 Q 428.2352941176471 407.52941176470586 413.1764705882353 393.4117647058824 Q 401.88235294117646 375.52941176470586 416.94117647058823 361.4117647058824 Q 464.94117647058823 321.88235294117646 466.8235294117647 256 Q 464.94117647058823 190.11764705882354 416.94117647058823 150.58823529411765 Q 401.88235294117646 136.47058823529412 413.1764705882353 118.58823529411765 Q 428.2352941176471 104.47058823529412 445.1764705882353 115.76470588235294 L 445.1764705882353 115.76470588235294 Z M 388.70588235294116 186.35294117647058 Q 419.7647058823529 211.76470588235293 421.6470588235294 256 Q 419.7647058823529 300.2352941176471 388.70588235294116 326.5882352941176 Q 370.8235294117647 337.88235294117646 356.70588235294116 322.8235294117647 Q 345.4117647058824 305.88235294117646 359.52941176470586 290.8235294117647 Q 375.52941176470586 277.6470588235294 376.47058823529414 256 Q 375.52941176470586 234.35294117647058 359.52941176470586 221.1764705882353 Q 345.4117647058824 206.11764705882354 356.70588235294116 189.1764705882353 Q 370.8235294117647 174.11764705882354 388.70588235294116 185.41176470588235 L 388.70588235294116 186.35294117647058 Z"})})}function u$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 264.34305317324186 61.914236706689536 Q 280.1509433962264 69.81818181818181 281.02915951972557 87.38250428816467 L 281.02915951972557 424.6174957118353 L 281.02915951972557 424.6174957118353 Q 280.1509433962264 442.1818181818182 264.34305317324186 450.08576329331044 Q 247.65694682675814 457.1114922813036 234.483704974271 445.69468267581476 L 115.9245283018868 340.30874785591766 L 115.9245283018868 340.30874785591766 L 56.20583190394511 340.30874785591766 L 56.20583190394511 340.30874785591766 Q 32.493996569468266 339.4305317324185 16.686106346483704 323.62264150943395 Q 0.8782161234991424 307.8147512864494 0 284.10291595197253 L 0 227.89708404802744 L 0 227.89708404802744 Q 0.8782161234991424 204.1852487135506 16.686106346483704 188.37735849056602 Q 32.493996569468266 172.56946826758147 56.20583190394511 171.69125214408234 L 115.9245283018868 171.69125214408234 L 115.9245283018868 171.69125214408234 L 234.483704974271 66.30531732418525 L 234.483704974271 66.30531732418525 Q 247.65694682675814 54.888507718696395 264.34305317324186 61.914236706689536 L 264.34305317324186 61.914236706689536 Z M 373.24185248713553 177.83876500857633 L 421.54373927958835 226.14065180102915 L 373.24185248713553 177.83876500857633 L 421.54373927958835 226.14065180102915 L 469.84562607204117 177.83876500857633 L 469.84562607204117 177.83876500857633 Q 484.77530017152657 165.54373927958832 499.704974271012 177.83876500857633 Q 512 192.76843910806176 499.704974271012 207.69811320754718 L 451.4030874785592 256 L 451.4030874785592 256 L 499.704974271012 304.3018867924528 L 499.704974271012 304.3018867924528 Q 512 319.2315608919383 499.704974271012 334.16123499142367 Q 484.77530017152657 346.45626072041165 469.84562607204117 334.16123499142367 L 421.54373927958835 285.85934819897085 L 421.54373927958835 285.85934819897085 L 373.24185248713553 334.16123499142367 L 373.24185248713553 334.16123499142367 Q 358.3121783876501 346.45626072041165 343.3825042881647 334.16123499142367 Q 331.08747855917665 319.2315608919383 343.3825042881647 304.3018867924528 L 391.6843910806175 256 L 391.6843910806175 256 L 343.3825042881647 207.69811320754718 L 343.3825042881647 207.69811320754718 Q 331.08747855917665 192.76843910806176 343.3825042881647 177.83876500857633 Q 358.3121783876501 165.54373927958832 373.24185248713553 177.83876500857633 L 373.24185248713553 177.83876500857633 Z"})})}function h$({isMuted:i,...t}){return k.jsx(k.Fragment,{children:i?k.jsx(u$,{...t}):k.jsx(c$,{...t})})}function f$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 496 167 Q 500 181 490 191 L 446 231 L 446 231 Q 448 243 448 256 Q 448 269 446 281 L 490 321 L 490 321 Q 500 331 496 345 Q 489 363 480 380 L 475 388 L 475 388 Q 465 404 453 419 Q 443 430 429 426 L 373 408 L 373 408 Q 353 424 329 433 L 317 491 L 317 491 Q 313 505 298 508 Q 278 512 256 512 Q 234 512 213 508 Q 199 505 195 491 L 183 433 L 183 433 Q 159 424 139 408 L 83 426 L 83 426 Q 69 430 59 419 Q 46 404 37 388 L 32 380 L 32 380 Q 23 363 16 346 Q 12 331 22 321 L 66 282 L 66 282 Q 64 269 64 256 Q 64 243 66 231 L 22 191 L 22 191 Q 12 181 16 167 Q 23 149 32 132 L 37 124 L 37 124 Q 46 108 59 93 Q 69 82 83 86 L 139 104 L 139 104 Q 159 88 183 78 L 195 21 L 195 21 Q 199 7 214 4 Q 234 0 256 0 Q 278 0 299 4 Q 313 7 317 21 L 329 78 L 329 78 Q 353 88 373 104 L 429 86 L 429 86 Q 443 82 453 93 Q 466 108 476 124 L 480 132 L 480 132 Q 489 149 496 167 L 496 167 Z M 256 336 Q 301 335 325 296 Q 347 256 325 216 Q 301 177 256 176 Q 211 177 187 216 Q 165 256 187 296 Q 211 335 256 336 L 256 336 Z"})})}function d$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 448 480 L 64 480 L 448 480 L 64 480 Q 37 479 19 461 Q 1 443 0 416 L 0 96 L 0 96 Q 1 69 19 51 Q 37 33 64 32 L 192 32 L 192 32 Q 224 33 243 58 L 262 83 L 262 83 Q 272 96 288 96 L 448 96 L 448 96 Q 475 97 493 115 Q 511 133 512 160 L 512 416 L 512 416 Q 511 443 493 461 Q 475 479 448 480 L 448 480 Z M 175 207 Q 161 224 175 241 L 222 288 L 222 288 L 175 335 L 175 335 Q 161 352 175 369 Q 192 383 209 369 L 256 322 L 256 322 L 303 369 L 303 369 Q 320 383 337 369 Q 351 352 337 335 L 290 288 L 290 288 L 337 241 L 337 241 Q 351 224 337 207 Q 320 193 303 207 L 256 254 L 256 254 L 209 207 L 209 207 Q 192 193 175 207 L 175 207 Z"})})}function p$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 226 6 Q 224 0 218 0 L 199 0 L 199 0 Q 192 0 190 6 L 169 58 L 169 58 Q 166 64 160 64 Q 154 64 151 58 L 130 6 L 130 6 Q 128 0 122 0 L 112 0 L 112 0 Q 92 1 78 14 Q 65 28 64 48 L 64 224 L 64 224 L 64 246 L 64 246 L 64 256 L 64 256 L 74 256 L 448 256 L 448 246 L 448 246 L 448 224 L 448 224 L 448 48 L 448 48 Q 447 28 434 14 Q 420 1 400 0 L 295 0 L 295 0 Q 288 0 286 6 L 265 58 L 265 58 Q 262 64 256 64 Q 250 64 247 58 L 226 6 L 226 6 Z M 64 288 L 64 320 L 64 288 L 64 320 Q 65 347 83 365 Q 101 383 128 384 L 192 384 L 192 384 L 192 448 L 192 448 Q 193 475 211 493 Q 229 511 256 512 Q 283 511 301 493 Q 319 475 320 448 L 320 384 L 320 384 L 384 384 L 384 384 Q 411 383 429 365 Q 447 347 448 320 L 448 288 L 448 288 L 64 288 L 64 288 Z M 256 432 Q 271 433 272 448 Q 271 463 256 464 Q 241 463 240 448 Q 241 433 256 432 L 256 432 Z"})})}const m$={clickDown:"sounds/click-down.mp3",clickUp:"sounds/click-up.mp3",intro:"sounds/intro-sound.mp3",notification:"sounds/pop.wav"},PN=rt.createContext(null),DM=()=>{const i=rt.useContext(PN);if(!i)throw new Error("useSounds must be used within SoundProvider");return i};function g$({children:i}){const[t,e]=rt.useState(!1),[n,s]=rt.useState(!1),[r,a]=rt.useState(0),l=rt.useRef(null),u=rt.useRef(new Map),f=rt.useRef(null);rt.useEffect(()=>{l.current=new AudioContext,f.current=l.current.createGain(),f.current.connect(l.current.destination),f.current.gain.value=1;const S=async(D,B)=>{const I=await(await fetch(B)).arrayBuffer(),F=await l.current.decodeAudioData(I);u.current.set(D,F),a(z=>z+1)};(async()=>{const D=Object.entries(m$);await Promise.all(D.map(([B,N])=>S(B,N))),s(!0)})()},[]);const m=rt.useCallback(S=>{if(!n)return;const w=l.current,D=u.current.get(S),B=f.current;if(!w||!D||!B)return;w.state==="suspended"&&w.resume();const N=w.createBufferSource();N.buffer=D,N.connect(B),N.start(0)},[n]),g=rt.useCallback(()=>m("clickDown"),[m]),v=rt.useCallback(()=>m("clickUp"),[m]),_=rt.useCallback(()=>m("intro"),[m]),b=rt.useCallback(()=>m("notification"),[m]),T=S=>{const w=l.current,D=f.current;if(!w||!D)return;const B=w.currentTime;D.gain.cancelScheduledValues(B),D.gain.setValueAtTime(D.gain.value,B),D.gain.linearRampToValueAtTime(S,B+.1),e(S===0)},E=rt.useMemo(()=>({playClickDown:g,playClickUp:v,playIntro:_,playNotification:b,mute:()=>T(0),unmute:()=>T(1),isLoaded:n,loadProgress:r,isMuted:t}),[g,v,_,b,n,r,t]);return k.jsx(PN.Provider,{value:E,children:i})}const v$={modals:[{type:"photo",title:"My_photo.jpg",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:2,height:2},isClosing:!1},{type:"about_me",title:"About_me.txt",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:5,height:2.5},isClosing:!1},{type:"skills",title:"Skills.exe",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:2.5,height:4},isClosing:!1},{type:"experience",title:"Work_experience.exe",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:3.5,height:4.5},isClosing:!1},{type:"pdf",title:"Resume.pdf",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:6.5,height:5},isClosing:!1},{type:"contact_me",title:"Email",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:6,height:5},isClosing:!1},{type:"folder",title:"New Folder",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:6,height:4},isClosing:!1},{type:"settings",title:"Settings",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:3,height:2},isClosing:!1}],topIndex:0,lastX:0,lastY:0},y$={info:["experience","about_me","skills","photo"]},_$=i=>(t,e)=>{const n=e(),s=y$[i],r=n.modals.modals;[...s].map(l=>r.find(u=>u.type===l)).filter(Boolean).sort((l,u)=>{const f=l.dimensions.width*l.dimensions.height;return u.dimensions.width*u.dimensions.height-f}).map(l=>l.type).forEach((l,u)=>{setTimeout(()=>t(BM(l)),200*u)})},A$=(i,t)=>{const e=i.modals.findIndex(s=>s.type===t);if(e===-1)return;const n=i.modals[e];if(!n.isOpen){n.isClosing=!1,n.isOpen=!0;const s=i.modals.filter(l=>l.isOpen),a=Math.max(...s.map(l=>l.index??0),0)+1;i.topIndex=a,n.index=i.topIndex}},FN=S7({name:"modals",initialState:v$,reducers:{openModal:(i,t)=>A$(i,t.payload),closeModal:(i,t)=>{const e=i.modals.findIndex(s=>s.type===t.payload.type);if(e===-1)return;const n=i.modals[e];n.isOpen=!1,n.isClosing=!1,n.index=0,t.payload.position&&(n.position=t.payload.position)},closeAllModals:i=>{for(const t of i.modals)t.isClosing=!0;i.topIndex=0},bringToFront:(i,t)=>{const e=i.modals.findIndex(u=>u.type===t.payload);if(e===-1)return;const s=i.modals[e].index??0,r=i.modals.filter(u=>u.isOpen),a=Math.max(...r.map(u=>u.index??0),0),l=a+1;i.modals=i.modals.map(u=>u.isOpen&&(u.index??0)>s?{...u,index:(u.index??0)-1}:u),i.modals[e].index=a,i.topIndex=l},setLastCoordinates:(i,t)=>{i.lastX=t.payload.x,i.lastY=t.payload.y},setPosition:(i,t)=>{const e=i.modals.findIndex(n=>n.type===t.payload.type);e!==-1&&(i.modals[e].position=t.payload.position,i.modals[e].gridPosition=t.payload.gridPosition)}}}),{openModal:BM,closeModal:x$,closeAllModals:b$,bringToFront:S$,setPosition:HN,setLastCoordinates:T9}=FN.actions,E$=FN.reducer;function M$(){const[i,t]=rt.useState(!1),e=Hu(),{isMuted:n,mute:s,unmute:r}=DM(),a=2,l=()=>{n?r():s()},u=()=>{e(b$()),t(!1)},f=()=>{e(BM("settings")),t(!1)},m=[{icon:k.jsx(d$,{}),angle:-180,label:"Mute",onClick:u},{icon:k.jsx(h$,{isMuted:n}),angle:-225,label:"Close All",onClick:l},{icon:k.jsx(p$,{}),angle:-270,label:"Wallpaper",onClick:f}];return k.jsxs(sZ,{$isOpen:i,children:[k.jsx(rZ,{className:"cursor-pointer",onClick:()=>t(g=>!g),children:k.jsx(f$,{})}),m.map(({icon:g,angle:v,label:_,onClick:b},T)=>{const E=v*Math.PI/180,S=Math.cos(E)*a,w=Math.sin(E)*a;return k.jsx(aZ,{className:"cursor-pointer",x:S,y:w,$visible:i,$index:T,onClick:b,children:g},_)})]})}function T$(){const i=Hu(),t=()=>{i(J5("Hello there "))};return k.jsxs(nZ,{children:[k.jsxs(ZJ,{children:[k.jsx(tZ,{children:k.jsx("span",{className:"cursor-pointer",onClick:t,children:"Antonov Mykyta"})}),k.jsx(l$,{}),k.jsx(oZ,{})]}),k.jsx(iZ,{children:k.jsx(M$,{})})]})}const C$=ie.div`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.5rem;
  position: relative;
  box-sizing: border-box;

  svg {
    flex-shrink: 0;
    width: 3rem;
    height: 3rem;
    object-fit: contain;
  }

  &::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 0.2rem;
    backdrop-filter: ${({$chosen:i})=>i?"blur(6px)":"none"};
    background-color: ${({$chosen:i})=>i?"var(--white-color)":"transparent"};
    opacity: 0.25;
    transition: all 0.2s ease;
    z-index: 0;
  }

  &::after {
    content: "";
    position: absolute;
    inset: -2px;
    border: ${({$chosen:i,$highlightColor:t})=>i?`0.15rem dashed ${t||"var(--white-color)"}`:"none"};
    outline-offset: -4px;
    border-radius: 0.2rem;
    pointer-events: none;
    z-index: 1;
  }

  > * {
    position: relative;
    z-index: 2;
  }
`,w$=ie.span`
  position: relative;
  font-family: "Segoe UI", sans-serif;
  font-size: 0.6rem;
  color: ${({color:i})=>i||"var(--white-color)"};
  text-align: center;
  padding: 0.2rem 0.4rem;
  border-radius: 0.2rem;
  user-select: none;
  margin: auto 0;
  display: inline-block;
  width: 100%;
  word-wrap: break-word;
  overflow-wrap: break-word;

  &::after {
    content: "";
    position: absolute;
    inset: 0;
    background-color: ${({highlightColor:i})=>i||"black"};
    opacity: 0.4;
    pointer-events: none;
    z-index: -1;
    border-radius: 0.2rem;
  }
`;function Xd({SvgIcon:i,text:t,onClick:e,textColor:n,highlightColor:s}){const[r,a]=rt.useState(!1),l=rt.useRef(null);return rt.useEffect(()=>{const u=f=>{l.current&&!l.current.contains(f.target)&&a(!1)};return window.addEventListener("click",u),()=>{window.removeEventListener("click",u)}},[]),k.jsxs(C$,{ref:l,className:"cursor-pointer",$chosen:r,$highlightColor:s,onClick:()=>{r?(e(),a(!1)):a(!0)},children:[k.jsx(i,{width:"100%",height:"100%"}),k.jsx(w$,{color:n,children:t})]})}const R$=ie.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`,zN=ie.div`
  display: grid;
  gap: 0.5rem;
  padding: 0.5rem;
  height: 100%;
  width: 100%;

  grid-auto-flow: ${({$flow:i})=>i||"column"};
  justify-content: start;

  grid-template-columns: repeat(auto-fill, minmax(6rem, 1fr));
  grid-template-rows: repeat(auto-fill, minmax(6rem, 1fr));
  align-items: start;
`;function L$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 128 0 Q 101 1 83 19 L 83 19 L 83 19 Q 65 37 64 64 L 64 448 L 64 448 Q 65 475 83 493 Q 101 511 128 512 L 384 512 L 384 512 Q 411 511 429 493 Q 447 475 448 448 L 448 160 L 448 160 L 320 160 L 320 160 Q 306 160 297 151 Q 288 142 288 128 L 288 0 L 288 0 L 128 0 L 128 0 Z M 320 0 L 320 128 L 320 0 L 320 128 L 448 128 L 448 128 L 320 0 L 320 0 Z M 192 256 Q 193 220 224 201 Q 256 183 288 201 Q 319 220 320 256 Q 319 292 288 311 Q 256 329 224 311 Q 193 292 192 256 L 192 256 Z M 144 432 Q 145 398 167 375 L 167 375 L 167 375 Q 190 353 224 352 L 288 352 L 288 352 Q 322 353 345 375 Q 367 398 368 432 Q 367 447 352 448 L 160 448 L 160 448 Q 145 447 144 432 L 144 432 Z"})})}function D$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 81.53424657534246 227.94520547945206 L 3.506849315068493 361.2054794520548 L 81.53424657534246 227.94520547945206 L 3.506849315068493 361.2054794520548 L 3.506849315068493 115.72602739726027 L 3.506849315068493 115.72602739726027 Q 4.383561643835616 92.05479452054794 20.164383561643834 76.27397260273973 Q 35.945205479452056 60.49315068493151 59.61643835616438 59.61643835616438 L 163.06849315068493 59.61643835616438 L 163.06849315068493 59.61643835616438 Q 185.86301369863014 59.61643835616438 202.5205479452055 76.27397260273973 L 225.31506849315068 99.06849315068493 L 225.31506849315068 99.06849315068493 Q 241.97260273972603 115.72602739726027 265.64383561643837 115.72602739726027 L 368.2191780821918 115.72602739726027 L 368.2191780821918 115.72602739726027 Q 391.8904109589041 116.6027397260274 407.67123287671234 132.3835616438356 Q 423.45205479452056 148.16438356164383 424.32876712328766 171.83561643835617 L 424.32876712328766 199.8904109589041 L 424.32876712328766 199.8904109589041 L 129.75342465753425 199.8904109589041 L 129.75342465753425 199.8904109589041 Q 98.1917808219178 200.76712328767124 81.53424657534246 227.94520547945206 L 81.53424657534246 227.94520547945206 Z M 105.20547945205479 241.97260273972603 Q 113.97260273972603 228.82191780821918 129.75342465753425 227.94520547945206 L 480.43835616438355 227.94520547945206 L 480.43835616438355 227.94520547945206 Q 496.2191780821918 228.82191780821918 504.986301369863 241.97260273972603 Q 512 256 504.986301369863 270.027397260274 L 406.7945205479452 438.35616438356163 L 406.7945205479452 438.35616438356163 Q 398.027397260274 451.5068493150685 382.24657534246575 452.3835616438356 L 31.561643835616437 452.3835616438356 L 31.561643835616437 452.3835616438356 Q 15.780821917808218 451.5068493150685 7.013698630136986 438.35616438356163 Q 0 424.32876712328766 7.013698630136986 410.3013698630137 L 105.20547945205479 241.97260273972603 L 105.20547945205479 241.97260273972603 Z"})})}function B$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 48 64 Q 28 65 14 78 L 14 78 L 14 78 Q 1 92 0 112 Q 1 136 19 150 L 237 314 L 237 314 Q 256 326 275 314 L 493 150 L 493 150 Q 511 136 512 112 Q 511 92 498 78 Q 484 65 464 64 L 48 64 L 48 64 Z M 0 176 L 0 384 L 0 176 L 0 384 Q 1 411 19 429 Q 37 447 64 448 L 448 448 L 448 448 Q 475 447 493 429 Q 511 411 512 384 L 512 176 L 512 176 L 294 339 L 294 339 Q 277 352 256 352 Q 235 352 218 339 L 0 176 L 0 176 Z"})})}function O$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 8 64 Q 9 37 27 19 L 27 19 L 27 19 Q 45 1 72 0 L 232 0 L 232 0 L 232 128 L 232 128 Q 232 142 241 151 Q 250 160 264 160 L 392 160 L 392 160 L 392 304 L 392 304 L 184 304 L 184 304 Q 157 305 139 323 Q 121 341 120 368 L 120 512 L 120 512 L 72 512 L 72 512 Q 45 511 27 493 Q 9 475 8 448 L 8 64 L 8 64 Z M 392 128 L 264 128 L 392 128 L 264 128 L 264 0 L 264 0 L 392 128 L 392 128 Z M 184 352 L 216 352 L 184 352 L 216 352 Q 240 353 256 368 Q 271 384 272 408 Q 271 432 256 448 Q 240 463 216 464 L 200 464 L 200 464 L 200 496 L 200 496 Q 199 511 184 512 Q 169 511 168 496 L 168 448 L 168 448 L 168 368 L 168 368 Q 169 353 184 352 L 184 352 Z M 216 432 Q 238 430 240 408 Q 238 386 216 384 L 200 384 L 200 384 L 200 432 L 200 432 L 216 432 L 216 432 Z M 312 352 L 344 352 L 312 352 L 344 352 Q 364 353 378 366 Q 391 380 392 400 L 392 464 L 392 464 Q 391 484 378 498 Q 364 511 344 512 L 312 512 L 312 512 Q 297 511 296 496 L 296 368 L 296 368 Q 297 353 312 352 L 312 352 Z M 344 480 Q 359 479 360 464 L 360 400 L 360 400 Q 359 385 344 384 L 328 384 L 328 384 L 328 480 L 328 480 L 344 480 L 344 480 Z M 424 368 Q 425 353 440 352 L 488 352 L 488 352 Q 503 353 504 368 Q 503 383 488 384 L 456 384 L 456 384 L 456 416 L 456 416 L 488 416 L 488 416 Q 503 417 504 432 Q 503 447 488 448 L 456 448 L 456 448 L 456 496 L 456 496 Q 455 511 440 512 Q 425 511 424 496 L 424 432 L 424 432 L 424 368 L 424 368 Z"})})}function N$(){const i=Hu(),t=n=>{i(BM(n))},e=n=>{i(_$(n))};return k.jsxs(R$,{children:[k.jsx(T$,{}),k.jsxs(zN,{children:[k.jsx(Xd,{onClick:()=>e("info"),SvgIcon:L$,text:"My CV"}),k.jsx(Xd,{onClick:()=>t("pdf"),SvgIcon:O$,text:"Resume.pdf"}),k.jsx(Xd,{onClick:()=>t("folder"),SvgIcon:D$,text:"New Folder"}),k.jsx(Xd,{onClick:()=>t("contact_me"),SvgIcon:B$,text:"Email"})]})]})}var GN=pD();function I$(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 497.6 88 Q 512 72 512 51.2 L 512 51.2 L 512 51.2 Q 512 30.4 497.6 14.4 Q 481.6 0 460.8 0 Q 440 0 424 14.4 L 256 184 L 256 184 L 88 14.4 L 88 14.4 Q 72 0 51.2 0 Q 30.4 0 14.4 14.4 Q 0 30.4 0 51.2 Q 0 72 14.4 88 L 184 256 L 184 256 L 14.4 424 L 14.4 424 Q 0 440 0 460.8 Q 0 481.6 14.4 497.6 Q 30.4 512 51.2 512 Q 72 512 88 497.6 L 256 328 L 256 328 L 424 497.6 L 424 497.6 Q 440 512 460.8 512 Q 481.6 512 497.6 497.6 Q 512 481.6 512 460.8 Q 512 440 497.6 424 L 328 256 L 328 256 L 497.6 88 L 497.6 88 Z"})})}const U$=ie.button`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 1rem;
  height: 1rem;
  border-radius: 50%;
  border: 0.1rem solid ${({theme:i})=>i.pallet.textColor};
  background-color: ${({theme:i})=>i.pallet.secondColor};
  padding: 0.2rem;

  svg {
    transform: ${({$clicked:i})=>i?"scale(0.9)":"scale(1)"};
    color: ${({theme:i})=>i.pallet.textColor};
  }
`,P$=ie.div`
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 0.2rem 0.5rem;
  border-radius: 0.3rem 0.3rem 0 0;
`,F$=ie.div`
  display: flex;
  align-center: center;
  gap: 0.25rem;
`,H$=ie.span`
  font-family: "Segoe UI", sans-serif;
  font-size: 0.8rem;
  font-weight: 600;
  color: ${({theme:i})=>i.pallet.textColor};
  text-align: center;
  user-select: none;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
`,z$=Ay`
  to {
    opacity: 1;
    transform: scale(1);
  }
`,G$=Ay`
  to {
    opacity: 0;
    transform: scale(0);
  }
`,k$=ie.div`
  position: absolute;
  display: flex;
  flex-direction: column;
  background-color: ${({theme:i})=>i.pallet.thirdColor};

  width: ${({$dimensions:i})=>`${i.width}px`};
  height: ${({$dimensions:i})=>`${i.height}px`};
  left: ${({$position:i})=>i?i.x:0}px;
  top: ${({$position:i})=>i?i.y:0}px;

  z-index: ${({$index:i})=>10*(i+1)};

  opacity: ${({$isClosing:i})=>i?"1":"0"};
  transform: ${({$isClosing:i})=>i?"scale(1)":"scale(0)"};
  animation: ${({$isClosing:i})=>i?G$:z$} 0.25s
    cubic-bezier(0.39, 0.575, 0.565, 1) both;

  border-radius: 0.3rem;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  box-shadow: 2.5px 2.5px 0px 2px rgba(0, 0, 0, 0.75);
`,V$=ie.div`
  background-color: ${({theme:i})=>i.pallet.thirdColor};
  flex: 1;
  display: flex;
  overflow: hidden;
  padding: 0.2rem;
  border-radius: 0 0 0.3rem 0.3rem;
`,Q$=ie.div`
  position: relative;
  width: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  background-color: var(--white-color);
  border-radius: 0.2rem;
`,j$=ie.div`
  display: flex;
  justify-content: flex-start;
  align-items: center;
  width: 100%;
  height: 2rem;
  padding: 0 0.5rem;
  gap: 0.5rem;
`,X$=ie.button`
  box-shadow: ${({$clicked:i})=>i?"inset 2px 2px 4px rgba(0, 0, 0, 0.6), inset -2px -2px 4px rgba(255, 255, 255, 0.2)":"2px 2px 0px 1px rgba(0, 0, 0, 0.75)"};
  padding: 0.2rem;
  width: 1.5rem;
  height: 1.5rem;
  border-radius: 0.3rem;
  display: grid;
  place-items: center;

  svg {
    transform: ${({$clicked:i})=>i?"scale(0.9)":"scale(1)"};
    color: ${({theme:i})=>i.pallet.textColor};
  }
`,q$=ie.div.attrs(({$isVisible:i,$position:t,$dimensions:e})=>({style:{left:t?`${t.x}px`:"0px",top:t?`${t.y}px`:"0px",width:`${e.width}px`,height:`${e.height}px`,visibility:i?"visible":"hidden"}}))`
  position: absolute;
  z-index: 1000;
  border-radius: 0.3rem;
  background-color: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(6px);
  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.1), 0 2px 10px rgba(0, 0, 0, 0.2);
`;function Y$({Icon:i,onClick:t}){const[e,n]=rt.useState(!1);return k.jsx(U$,{$clicked:e,onMouseDown:s=>s.stopPropagation(),onPointerDown:()=>n(!0),onPointerUp:()=>n(!1),onPointerOut:()=>n(!1),className:"cursor-pointer",onClick:t,children:k.jsx(i,{})})}function W$({handleClose:i,handleDrag:t,title:e}){return k.jsxs(P$,{className:"cursor-move",onMouseDown:t,children:[k.jsx(H$,{children:e}),k.jsx(F$,{children:k.jsx(Y$,{Icon:I$,onClick:i})})]})}function K$({Icon:i,onClick:t}){const[e,n]=rt.useState(!1);return k.jsx(X$,{className:"cursor-pointer",$clicked:e,onMouseDown:s=>s.stopPropagation(),onPointerDown:()=>n(!0),onPointerUp:()=>n(!1),onPointerOut:()=>n(!1),onClick:t,children:i})}const e5=20,n5=12,i5=6;function OM(){const[i,t]=rt.useState({width:window.innerWidth,height:window.innerHeight,cellSize:Math.min(window.innerWidth/n5,window.innerHeight/i5)-e5/2});return rt.useEffect(()=>{const e=()=>{t({width:window.innerWidth,height:window.innerHeight,cellSize:Math.min(window.innerWidth/n5,window.innerHeight/i5)-e5/2})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),{...i,columns:n5,rows:i5,gap:e5}}const Z5=({x:i,y:t},{cellSize:e,columns:n,rows:s})=>({x:i/(e*n),y:t/(e*s)}),J$=({x:i,y:t},{cellSize:e,columns:n,rows:s})=>({x:i*(e*n),y:t*(e*s)});function Z$(i){const t=Hu(),{cellSize:e,width:n,height:s,gap:r,columns:a,rows:l}=OM(),{modals:u,lastX:f,lastY:m}=VE(E=>E.modals),g=rt.useMemo(()=>e*1.5,[e]),v=rt.useMemo(()=>e,[e]),_=rt.useCallback((E,S)=>E.position.x<S.position.x+S.dimensions.width*e+r&&E.position.x+E.dimensions.width*e+r>S.position.x&&E.position.y<S.position.y+S.dimensions.height*e+r&&E.position.y+E.dimensions.height*e+r>S.position.y,[e,r]),b=rt.useCallback((E,S)=>{f+i.dimensions.width*e>n||m+i.dimensions.height*e>s?t(T9({x:e,y:e})):t(T9({x:E,y:S}))},[e,t,s,f,m,i.dimensions.height,i.dimensions.width,n]),T=rt.useCallback((E,S)=>{const w=E.filter(I=>I.isOpen&&I.type!==S.type),D=S.dimensions;for(let I=v;I<=s-D.height*e;I+=r)for(let F=g;F<=n-D.width*e;F+=r){const z={...S,position:{x:F,y:I}};if(!w.some(P=>_(z,P)))return z}const B=f+r,N=m+r;return b(B,N),{...S,position:{x:g+B,y:v+N}}},[g,v,e,_,r,b,s,f,m,n]);rt.useEffect(()=>{if(!i.gridPosition&&i.position.x===0&&i.position.y===0){const E=T(u,i);t(HN({type:i.type,position:E.position,gridPosition:Z5(E.position,{cellSize:e,columns:a,rows:l})}))}},[e,a,t,i,u,T,l])}function $$(i){const[t,e]=rt.useState(i.position),[n,s]=rt.useState(null),[r,a]=rt.useState(!1),l=rt.useRef(t),u=rt.useRef(!1),f=rt.useRef({x:0,y:0}),m=Hu(),{cellSize:g,columns:v,rows:_}=OM(),b=rt.useCallback(w=>{if(!u.current)return;const D=w.clientX-f.current.x,B=w.clientY-f.current.y;if(t.x!==D||t.y!==B){const N={x:D,y:B};s(N),l.current=N}},[l.current]),T=rt.useCallback(()=>{if(window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",T),u.current){const w={...l.current};e(w),m(HN({type:i.type,position:w,gridPosition:Z5(w,{cellSize:g,columns:v,rows:_})}))}u.current=!1,s(null)},[b,m,i.type,g,v,_]),E=w=>{u.current=!0,f.current={x:w.clientX-t.x,y:w.clientY-t.y},window.addEventListener("mousemove",b),window.addEventListener("mouseup",T)},S=rt.useCallback(()=>{const w=Z5(t,{cellSize:g,columns:v,rows:_});a(!0),setTimeout(()=>{m(x$({type:i.type,position:t,gridPosition:w}))},250)},[t,g,v,_,m,i.type]);return rt.useEffect(()=>{i.isClosing&&S()},[S,i.isClosing]),rt.useEffect(()=>{if(!i.gridPosition||u.current)return;const w=J$(i.gridPosition,{cellSize:g,columns:v,rows:_});e(w),l.current=w},[g,v,i.gridPosition,_]),rt.useEffect(()=>()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",T)},[]),{handleMouseDown:E,handleClose:S,ghostPosition:n,coordinates:t,dragging:u.current,isClosing:r,convertedWidth:i.dimensions.width*g,convertedHeight:i.dimensions.height*g}}function hp({children:i,modal:t,buttons:e}){const n=Hu(),{handleMouseDown:s,handleClose:r,ghostPosition:a,coordinates:l,dragging:u,isClosing:f,convertedWidth:m,convertedHeight:g}=$$(t);return Z$(t),k.jsxs(k.Fragment,{children:[k.jsx(q$,{className:"cursor-move",$isVisible:!!u&&!!a,$position:a,$dimensions:{width:m,height:g}}),k.jsxs(k$,{$index:t.index||1,$isClosing:f,$dimensions:{width:m,height:g},$position:l,className:"cursor",onMouseDown:()=>n(S$(t.type)),children:[k.jsx(W$,{title:t.title,handleClose:r,handleDrag:s}),e&&k.jsx(j$,{children:e.map(({Icon:v,onClick:_,key:b})=>k.jsx(K$,{Icon:v,onClick:_},b))}),k.jsx(V$,{title:t.title,children:k.jsx(Q$,{children:i})})]})]})}const ttt=ie.div`
  position: relative;
  overflow: hidden;
  width: 100%;
  height: 100%;
  max-width: ${i=>`${i.width}px`};
  max-height: ${i=>`${i.height}px`};
  display: flex;
  align-items: center;
  justify-content: center;
`,ett=ie.img`
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  max-width: 100%;
  display: block;
  transition: opacity 1s;
  position: relative;
  z-index: 100;
`;function ntt({src:i,thumb:t}){const[e,n]=rt.useState(t),[s,r]=rt.useState(!1);return rt.useEffect(()=>{const a=new Image;a.src=i,a.onload=()=>{n(i),r(!0)}},[i]),k.jsx(ett,{src:e,alt:"My photo",loading:"lazy",style:{transition:"filter 0.3s ease",filter:s?"none":"blur(5px)"}})}const itt="/vibefolio/pics/My_photo.webp",stt={MyPhoto:"data:image/webp;base64,UklGRjoEAABXRUJQVlA4IC4EAACQHgCdASpgAGAAPikShkKhoQp10swMAUJZQMkB+AH6gIupgF2U3y23H+53ZbZHv6J+HXfx/R/xA/FzuSPAPq1+KW8q9rl5d+V/85/Y/3T/mX2Z/sB4uP4t5Gf5N+TP5gfmZ4z3PG/0/qvsA9HtLYnZfLw5P3OlUkxc9vc8hiPQOIOL1efvZmcVsx77MlTXzTN8cDW00TQe9/X+a2A+a74Yyn+3wQ39dpOGjIytLgKUE4LowlyHP3ConOwaMa2EVKkYeN8Ovu9q3xQcQyiBoawv+rrmxYzeqt2C/X6gMNe9CTO0E8OdXZqRM1n8cbmBWoDDtp2+xxDeGPAROiUgANiXA4CzCEAaY1oJK8ib5hAAUlPX/MxbJjvf+XTnpshi5ksD9LBieqqficuiJ7ttyF7n8/PDnmgB7P6OdDu65Bet4hw3KOp839rrGMZXNvGOOvQkUKP5m7tvBROccbqSYwHtQwZvpegFd4GXH09heE407//hoMxsTwgP/DZ5D7Un5giR0SZpxdV7fk9+frzsIx3WbExiVsGFyozkIUCT+revLnki/r4FvmPcD0gk+XD6GN4LDde1OKGJcV3JEWvrkST3dJsUeDJacjQ3axC91fF5kcY/OzNf4AxLCDdzKMFJ+bg2iIh3+Pjoka1Zd0PJ0VYlfzAtQvdkJbeIHJRt0q0yd+iG0sYw/U7/HyVe8dzJVFKSLzMJ/+qf4KL3S///07VJBJOngOS4MsFxM8+yOPeFx0wR8XKb+Q+kHTww0PfMKh2Ds+aF9Ca8AhLrLZ9wQRMOTMZDpb+3j/l/JB+j+cU7xL6rutSJZ2MQsK4PM5cgHS6vuV09o3gIs1YvsnDrYwEHCX68IEfeuWMJr5j3Ou1D9b1Mc41BLV31s9WJB+MdpcFeVPkEOfFSeCu7Yw+2egm2xiV5GkkOvgevtSLsfXrecXem4gzm2Sf//hhapqEZVYSthZ3WhQsCi5woln1yHcRhvL5v9ir6FvFRazwpVvk0Ng8U9HKbUZIrBTEHGbH0W+lI8nEaeQUXHl8yhveu1noUrVi5SJaKf5DCPk6Sa9JyT37ofwT3Tk6wOO28PfIkbsUKqPmDYOb5X2dH//6jm0z2TC+rlomV9/lbGQw1TrFp6/O4tzHcXuNkXi7KPJfpmCvAhtHA0nfJGEFuW65swyXU/bsjf7WaEUHE5nDpr0JGus8rfsGHCZfsI/4H/+3mf/7tssgusAbZAFnYHhho22dj1oyvov3YzUnhIbLsf+Pt8UTAe1jAaqoH7hJIKJEPzLZrZaQw6zZgxNKR0yr4Z2LYrXDNIvr3w9euYoflPc3IJbL87zsUo1qlGb7fUSTq76nECJ3O60QyEMNqZJ4mCUJKgPoLtYEf8m2FoT8f8q98NWEoOYpDBsmC4rpUyEZueSBiNEzmCs0Aiu5safKAAA=="};function rtt({modal:i}){const{cellSize:t}=OM(),{width:e=2,height:n=2}=(i==null?void 0:i.dimensions)||{};return k.jsx(hp,{modal:i,children:k.jsx(ttt,{width:e*t,height:n*t,children:k.jsx(ntt,{src:itt,thumb:stt.MyPhoto})})})}const att=ie.div`
  padding: 0.5rem;
`;function ott({modal:i}){return k.jsx(hp,{modal:i,children:k.jsxs(att,{children:[k.jsx("h2",{children:"Hey there! Im Mykyta."}),k.jsx("p",{children:"Front-end developer with two years of experience in a dynamic environment as a shadow coder. Throughout my career, I have often taken on new projects received tasks outside of my area of expertise, and quickly learned new technologies and frameworks. It will not be a problem for me to switch to working with other technologies."}),k.jsx("p",{children:"I have a great desire to develop in different directions besides the front-end and React environment."})]})})}const ltt=ie.div`
  position: relative;
  width: clamp(2rem, 4vw, 4rem);
  height: clamp(2rem, 4vw, 4rem);
`,ctt=ie.svg`
  width: 100%;
  height: 100%;
`,utt=ie.div`
  position: absolute;
  top: ${({strokeWidth:i})=>i}px;
  left: ${({strokeWidth:i})=>i}px;
  right: ${({strokeWidth:i})=>i}px;
  bottom: ${({strokeWidth:i})=>i}px;

  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  overflow: hidden;

  svg {
    width: clamp(1rem, 2vw, 2rem);
    height: clamp(1rem, 2vw, 2rem);
  }
`,N1=({progress:i,Icon:t})=>{const[e,n]=rt.useState(0),s=kE();rt.useEffect(()=>{let m=null;const g=1500,v=_=>{m===null&&(m=_);const b=_-m,T=Math.min(i,b/g*i);n(T),b<g?requestAnimationFrame(v):n(i)};requestAnimationFrame(v)},[i]);const r=100,a=r*.06,l=(r-a)/2,u=2*Math.PI*l,f=u*(1-e/100);return k.jsxs(ltt,{children:[k.jsxs(ctt,{viewBox:`0 0 ${r} ${r}`,children:[k.jsx("circle",{stroke:"#e6e6e6",fill:"transparent",strokeWidth:a,r:l,cx:r/2,cy:r/2}),k.jsx("circle",{stroke:s.pallet.secondColor,fill:"transparent",strokeWidth:a,strokeLinecap:"round",r:l,cx:r/2,cy:r/2,strokeDasharray:u,strokeDashoffset:-f,transform:`rotate(-90 ${r/2} ${r/2})`,style:{transition:"stroke-dashoffset 0.3s linear"}})]}),k.jsx(utt,{strokeWidth:a,children:t})]})};function htt(i){return k.jsx("svg",{fill:"#3077C5",viewBox:"0 0 24 24",role:"img",xmlns:"http://www.w3.org/2000/svg",...i,children:k.jsx("path",{d:"M0 12v12h24V0H0zm19.341-.956c.61.152 1.074.423 1.501.865.221.236.549.666.575.77.008.03-1.036.73-1.668 1.123-.023.015-.115-.084-.217-.236-.31-.45-.633-.644-1.128-.678-.728-.05-1.196.331-1.192.967a.88.88 0 0 0 .102.45c.16.331.458.53 1.39.933 1.719.74 2.454 1.227 2.911 1.92.51.773.625 2.008.278 2.926-.38.998-1.325 1.676-2.655 1.9-.411.073-1.386.062-1.828-.018-.964-.172-1.878-.648-2.442-1.273-.221-.243-.652-.88-.625-.925.011-.016.11-.077.22-.141.108-.061.511-.294.892-.515l.69-.4.145.214c.202.308.643.731.91.872.766.404 1.817.347 2.335-.118a.883.883 0 0 0 .313-.72c0-.278-.035-.4-.18-.61-.186-.266-.567-.49-1.649-.96-1.238-.533-1.771-.864-2.259-1.39a3.165 3.165 0 0 1-.659-1.2c-.091-.339-.114-1.189-.042-1.531.255-1.197 1.158-2.03 2.461-2.278.423-.08 1.406-.05 1.821.053zm-5.634 1.002l.008.983H10.59v8.876H8.38v-8.876H5.258v-.964c0-.534.011-.98.026-.99.012-.016 1.913-.024 4.217-.02l4.195.012z"})})}function ftt(i){return k.jsx("svg",{fill:"#FBDF02",xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 0 0 L 0 512 L 0 0 L 0 512 L 512 512 L 512 512 L 512 0 L 512 0 L 0 0 L 0 0 Z M 278.85714285714283 398.85714285714283 Q 277.7142857142857 436.57142857142856 258.2857142857143 454.85714285714283 L 258.2857142857143 454.85714285714283 L 258.2857142857143 454.85714285714283 Q 238.85714285714286 472 206.85714285714286 472 Q 178.28571428571428 470.85714285714283 160 459.42857142857144 Q 142.85714285714286 446.85714285714283 134.85714285714286 427.42857142857144 L 173.71428571428572 404.57142857142856 L 173.71428571428572 404.57142857142856 Q 182.85714285714286 426.2857142857143 204.57142857142858 428.57142857142856 Q 229.71428571428572 432 230.85714285714286 398.85714285714283 L 230.85714285714286 235.42857142857142 L 230.85714285714286 235.42857142857142 L 278.85714285714283 235.42857142857142 L 278.85714285714283 235.42857142857142 L 278.85714285714283 398.85714285714283 L 278.85714285714283 398.85714285714283 Z M 392 472 Q 325.7142857142857 468.57142857142856 305.14285714285717 422.85714285714283 L 344 400 L 344 400 Q 357.7142857142857 427.42857142857144 392 429.7142857142857 Q 422.85714285714283 427.42857142857144 424 405.7142857142857 Q 424 393.14285714285717 414.85714285714283 387.42857142857144 Q 405.7142857142857 380.57142857142856 388.57142857142856 373.7142857142857 L 377.14285714285717 368 L 377.14285714285717 368 Q 350.85714285714283 357.7142857142857 334.85714285714283 341.7142857142857 Q 320 324.57142857142856 318.85714285714283 296 Q 320 268.57142857142856 338.2857142857143 250.28571428571428 Q 357.7142857142857 233.14285714285714 389.7142857142857 232 Q 435.42857142857144 230.85714285714286 458.2857142857143 270.85714285714283 L 420.57142857142856 294.85714285714283 L 420.57142857142856 294.85714285714283 Q 409.14285714285717 273.14285714285717 389.7142857142857 274.2857142857143 Q 368 275.42857142857144 366.85714285714283 294.85714285714283 Q 365.7142857142857 313.14285714285717 396.57142857142856 324.57142857142856 L 408 329.14285714285717 L 408 329.14285714285717 Q 438.85714285714283 341.7142857142857 456 358.85714285714283 Q 472 374.85714285714283 472 404.57142857142856 Q 470.85714285714283 437.7142857142857 449.14285714285717 454.85714285714283 Q 427.42857142857144 472 392 472 L 392 472 Z"})})}function C9(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"#00D8FF",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 418 177 Q 410 175 402 172 Q 403 167 404 161 Q 404 161 405 161 Q 414 116 408 83 Q 402 50 381 38 Q 361 27 332 37 Q 302 47 269 76 Q 262 82 256 88 Q 252 84 248 80 Q 213 49 182 38 Q 151 27 130 38 Q 110 50 104 81 Q 98 112 107 155 Q 108 163 110 172 Q 101 175 92 178 Q 51 192 26 212 Q 1 233 0 256 Q 1 279 27 301 Q 54 322 96 337 Q 103 339 110 341 Q 108 350 106 359 Q 98 402 104 432 Q 110 462 130 474 Q 151 485 182 475 Q 213 464 246 435 Q 249 433 252 430 Q 254 428 257 425 Q 264 432 271 438 Q 303 465 332 475 Q 362 485 382 474 Q 402 462 408 430 Q 415 398 406 354 Q 405 347 403 340 Q 408 339 413 337 Q 457 323 484 301 Q 511 280 512 256 Q 511 233 486 212 Q 460 192 418 177 L 418 177 Z M 283 92 Q 311 68 335 59 L 335 59 L 335 59 Q 358 50 371 56 Q 383 64 387 91 Q 391 118 383 157 Q 382 162 381 167 Q 348 159 314 156 Q 294 128 271 103 Q 277 98 283 92 L 283 92 Z M 167 308 Q 175 321 183 333 Q 160 331 137 326 Q 143 304 153 281 Q 160 295 167 308 L 167 308 Z M 137 187 Q 159 182 183 179 Q 175 192 167 205 Q 160 218 153 231 Q 143 208 137 187 L 137 187 Z M 164 256 Q 174 235 186 216 Q 197 196 210 177 Q 233 175 256 175 Q 279 175 302 177 Q 315 196 326 215 Q 338 235 348 256 Q 338 276 326 297 Q 315 316 302 336 Q 280 337 256 337 Q 232 337 210 336 Q 197 317 186 297 Q 174 277 164 256 L 164 256 Z M 345 307 Q 352 294 360 281 Q 369 302 376 325 Q 353 330 329 333 Q 337 320 345 307 L 345 307 Z M 359 231 Q 352 218 345 205 Q 337 192 330 179 Q 354 182 375 187 Q 368 210 359 231 L 359 231 Z M 256 118 Q 272 135 286 154 Q 256 153 226 154 Q 241 135 256 118 L 256 118 Z M 140 57 Q 153 50 178 60 L 178 60 L 178 60 Q 204 70 234 96 Q 236 98 239 101 Q 240 102 241 103 Q 218 128 198 156 Q 164 159 131 167 Q 129 159 128 151 Q 121 114 124 89 Q 128 64 140 57 L 140 57 Z M 116 321 Q 109 319 103 317 Q 69 306 40 286 Q 25 274 21 256 Q 22 241 43 226 Q 64 210 99 198 Q 107 195 116 193 Q 126 225 141 256 Q 126 288 116 321 L 116 321 Z M 232 419 Q 207 441 176 454 Q 158 462 141 455 Q 128 448 125 424 Q 121 399 127 363 Q 129 355 131 346 Q 164 354 199 356 Q 219 384 242 410 Q 237 414 232 419 L 232 419 Z M 257 394 Q 241 378 226 358 Q 241 359 256 359 Q 271 359 286 358 Q 273 377 257 394 L 257 394 Z M 388 424 Q 386 443 371 456 Q 359 462 336 454 Q 313 445 285 421 Q 278 416 272 410 Q 295 385 314 356 Q 349 353 382 346 Q 384 352 385 358 Q 392 391 388 424 L 388 424 Z M 406 317 Q 402 318 397 319 Q 387 287 372 256 Q 386 225 396 193 Q 404 195 411 197 Q 447 210 468 226 Q 490 241 491 255 Q 490 271 467 287 Q 444 304 406 317 L 406 317 Z M 256 302 Q 275 301 288 288 L 288 288 L 288 288 Q 301 275 302 256 Q 301 237 288 224 Q 275 211 256 210 Q 237 211 224 224 Q 211 237 210 256 Q 211 275 224 288 Q 237 301 256 302 L 256 302 Z"})})}function dtt(i){return k.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 512 512",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:10},...i,children:k.jsxs("g",{transform:"matrix(2.25096,0,0,2.25096,256.253,256.48)",children:[k.jsx("g",{id:"Three.js_Icon.svg",transform:"matrix(1,0,0,1,-113.385,-113.385)",children:k.jsxs("g",{transform:"matrix(1,0,0,1,8.964,4.2527)",children:[k.jsx("path",{d:"M63.02,200.61L19.807,25.67L193.037,75.544L63.02,200.61Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),k.jsx("path",{d:"M106.39,50.612L127.981,138.108L41.414,113.163L106.39,50.612Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),k.jsx("path",{d:"M84.91,125.03L74.186,81.565L117.194,93.911L84.91,125.03Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),k.jsx("path",{d:"M63.458,38.153L74.182,81.618L31.174,69.272L63.458,38.153Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),k.jsx("path",{d:"M149.47,62.93L160.194,106.395L117.186,94.049L149.47,62.93Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),k.jsx("path",{d:"M84.915,125.06L95.639,168.525L52.631,156.179L84.915,125.06Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}})]})}),k.jsx("g",{id:"Three.js_Icon.svg1"})]})})}function ptt(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",fill:"#82BF05",...i,children:k.jsx("path",{d:"M 255.49705304518665 512 Q 245.43811394891944 512 236.385068762279 506.9705304518664 L 174.0196463654224 469.7524557956778 L 174.0196463654224 469.7524557956778 Q 166.97838899803537 465.7288801571709 167.98428290766208 464.7229862475442 Q 168.9901768172888 462.71119842829074 172.00785854616896 461.70530451866404 Q 181.06090373280944 458.6876227897839 186.09037328094303 456.67583497053045 Q 191.11984282907662 454.66404715127703 200.1728880157171 449.63457760314344 Q 202.18467583497053 448.6286836935167 205.20235756385068 449.63457760314344 L 252.47937131630647 477.7996070726916 L 252.47937131630647 477.7996070726916 Q 255.49705304518665 479.811394891945 258.5147347740668 477.7996070726916 L 444.60510805500985 370.16895874263264 L 444.60510805500985 370.16895874263264 Q 446.61689587426326 369.1630648330059 446.61689587426326 365.139489194499 L 446.61689587426326 150.88408644400786 L 446.61689587426326 150.88408644400786 Q 446.61689587426326 147.86640471512771 443.5992141453831 145.85461689587427 L 258.5147347740668 39.22986247544204 L 258.5147347740668 39.22986247544204 Q 255.49705304518665 37.218074656188605 252.47937131630647 39.22986247544204 L 67.39489194499018 145.85461689587427 L 67.39489194499018 145.85461689587427 Q 64.37721021611002 147.86640471512771 64.37721021611002 150.88408644400786 L 64.37721021611002 366.14538310412576 L 64.37721021611002 366.14538310412576 Q 64.37721021611002 369.1630648330059 67.39489194499018 370.16895874263264 L 117.68958742632613 400.3457760314342 L 117.68958742632613 400.3457760314342 Q 138.81335952848724 409.39882121807466 150.88408644400786 402.3575638506876 Q 161.94891944990178 394.3104125736739 162.9548133595285 381.2337917485265 L 162.9548133595285 169.99607072691552 L 162.9548133595285 169.99607072691552 Q 162.9548133595285 164.96660117878193 167.98428290766208 163.9607072691552 L 191.11984282907662 163.9607072691552 L 191.11984282907662 163.9607072691552 Q 196.1493123772102 164.96660117878193 197.15520628683694 169.99607072691552 L 197.15520628683694 381.2337917485265 L 197.15520628683694 381.2337917485265 Q 195.1434184675835 437.5638506876228 141.8310412573674 439.5756385068762 Q 134.78978388998036 439.5756385068762 125.73673870333988 437.5638506876228 Q 116.6836935166994 435.5520628683694 98.57760314341847 427.5049115913556 L 50.29469548133595 399.3398821218075 L 50.29469548133595 399.3398821218075 Q 31.18271119842829 388.27504911591353 31.18271119842829 365.139489194499 L 31.18271119842829 150.88408644400786 L 31.18271119842829 150.88408644400786 Q 31.18271119842829 128.75442043222003 50.29469548133595 117.68958742632613 L 236.385068762279 10.05893909626719 L 236.385068762279 10.05893909626719 Q 255.49705304518665 0 274.6090373280943 10.05893909626719 L 460.69941060903733 117.68958742632613 L 460.69941060903733 117.68958742632613 Q 479.811394891945 128.75442043222003 480.8172888015717 150.88408644400786 L 480.8172888015717 366.14538310412576 L 480.8172888015717 366.14538310412576 Q 479.811394891945 387.2691552062868 460.69941060903733 399.3398821218075 L 274.6090373280943 506.9705304518664 L 274.6090373280943 506.9705304518664 Q 265.5559921414538 512 255.49705304518665 512 L 255.49705304518665 512 Z M 405.3752455795678 300.762278978389 Q 405.3752455795678 271.5913555992141 385.2573673870334 259.52062868369353 L 385.2573673870334 259.52062868369353 L 385.2573673870334 259.52062868369353 Q 364.1335952848723 247.44990176817288 320.8801571709234 242.4204322200393 Q 279.6385068762279 237.3909626719057 267.56777996070724 232.3614931237721 Q 256.50294695481335 227.33202357563852 257.50884086444006 217.2730844793713 Q 256.50294695481335 208.22003929273083 265.5559921414538 200.1728880157171 Q 274.6090373280943 192.12573673870335 305.7917485265226 191.11984282907662 Q 333.95677799607074 191.11984282907662 346.02750491159134 198.16110019646365 Q 359.1041257367387 206.20825147347742 363.1277013752456 225.32023575638507 Q 364.1335952848723 229.34381139489196 369.1630648330059 229.34381139489196 L 393.3045186640471 229.34381139489196 L 393.3045186640471 229.34381139489196 Q 395.3163064833006 229.34381139489196 396.3222003929273 227.33202357563852 Q 398.33398821218077 226.32612966601178 398.33398821218077 223.30844793713163 Q 393.3045186640471 157.9253438113949 305.7917485265226 158.9312377210216 Q 223.30844793713163 159.93713163064834 221.2966601178782 218.27897838899804 Q 221.2966601178782 248.4557956777996 242.4204322200393 260.52652259332024 Q 264.5500982318271 272.5972495088409 302.77406679764243 275.614931237721 Q 347.0333988212181 279.6385068762279 359.1041257367387 286.67976424361495 Q 370.16895874263264 293.72102161100196 369.1630648330059 302.77406679764243 Q 370.16895874263264 332.95088408644403 312.8330058939096 331.94499017681727 Q 276.6208251473477 331.94499017681727 263.5442043222004 322.8919449901768 Q 251.47347740667976 313.8388998035363 249.46168958742632 294.72691552062867 Q 248.4557956777996 290.7033398821218 244.43222003929273 290.7033398821218 L 220.29076620825148 290.7033398821218 L 220.29076620825148 290.7033398821218 Q 215.26129666011786 290.7033398821218 214.25540275049116 295.73280943025543 Q 213.24950884086445 320.8801571709234 233.3673870333988 342.00392927308445 Q 253.4852652259332 363.1277013752456 312.8330058939096 364.1335952848723 Q 403.36345776031436 363.1277013752456 405.3752455795678 300.762278978389 L 405.3752455795678 300.762278978389 Z"})})}const mtt=ie.div`
  padding: 0.5rem;
  display: grid;
  gap: 0.5rem;
  grid-template-columns: 1fr 1fr;
`,I1=ie.div`
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  align-items: center;
`,U1=ie.span`
  font-family: "Segoe UI", sans-serif;
  font-size: 0.8rem;
  color: ${({theme:i})=>i.pallet.textColor};
  text-align: center;
  user-select: none;
`;function gtt({modal:i}){return k.jsx(hp,{modal:i,children:k.jsxs(mtt,{children:[k.jsxs(I1,{children:[k.jsx(N1,{progress:80,Icon:k.jsx(ftt,{})}),k.jsx(U1,{children:"Javascript"})]}),k.jsxs(I1,{children:[k.jsx(N1,{progress:60,Icon:k.jsx(htt,{})}),k.jsx(U1,{children:"Typescript"})]}),k.jsxs(I1,{children:[k.jsx(N1,{progress:70,Icon:k.jsx(C9,{})}),k.jsx(U1,{children:"React"})]}),k.jsxs(I1,{children:[k.jsx(N1,{progress:50,Icon:k.jsx("div",{style:{backgroundColor:"#00D8FF",padding:1},children:k.jsx(C9,{fill:"white"})})}),k.jsx(U1,{children:"React Native"})]}),k.jsxs(I1,{children:[k.jsx(N1,{progress:25,Icon:k.jsx(dtt,{})}),k.jsx(U1,{children:"Three js"})]}),k.jsxs(I1,{children:[k.jsx(N1,{progress:25,Icon:k.jsx(ptt,{})}),k.jsx(U1,{children:"Node js"})]})]})})}const vtt=[{company:"Incora",lengthOfService:"2023  2025",position:"Front-end Developer (Shadow Coder)",projects:[{name:"Hotel Management Platform",technologies:"React, React Native, Firebase",features:["Developed both web and mobile applications simultaneously, ensuring a shared codebase for both platforms.","Built internal utilities to streamline Firebase interactions.","General mobile application performance optimization and implemented offline features"]},{name:"Food Delivery Platform",technologies:"Angular, React",features:["Maintained multiple applications, including a web versions built with Angular (for common users) and React (for staff).","Refactored legacy codebase, migrating to a newer libraries and implementing best practices.","Enhanced test coverage with new unit and end-to-end tests."]},{name:"Sports Betting Platform",technologies:"React",features:["Focused on responsive UI and interactive components for both mobile and desktop.","Collaborated closely with backend developers to facilitate rapid feature implementation.","Contributed to creating reusable component libraries."]}]}];function w9(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 385.7219730941704 236.48430493273543 Q 401.7937219730942 256 385.7219730941704 275.5156950672646 L 165.30941704035874 495.92825112107624 L 165.30941704035874 495.92825112107624 Q 145.79372197309416 512 126.27802690582959 495.92825112107624 Q 110.20627802690584 476.41255605381167 126.27802690582959 456.8968609865471 L 327.17488789237666 256 L 327.17488789237666 256 L 126.27802690582959 55.10313901345292 L 126.27802690582959 55.10313901345292 Q 110.20627802690584 35.587443946188344 126.27802690582959 16.071748878923767 Q 145.79372197309416 0 165.30941704035874 16.071748878923767 L 385.7219730941704 236.48430493273543 L 385.7219730941704 236.48430493273543 Z"})})}const ytt=ie.div`
  display: flex;
  flex-direction: column;
  gap: 0.25rem 0;
  margin-bottom: 0.5rem;
`,_tt=ie.a`
  color: blue;
  text-decoration: underline;

  &:link {
    color: blue;
    text-decoration: underline;
  }

  &:visited {
    color: purple;
    text-decoration: underline;
  }

  &:hover {
    color: darkblue;
    text-decoration: underline;
  }

  &:active {
    color: red;
    text-decoration: underline;
  }
`,Att=ie.span`
  font-size: 0.8rem;
  font-weight: 600;
`,xtt=ie.span`
  font-size: 0.8rem;
`,R9=ie.button`
  position: relative;
  height: 100%;
  width: auto;
  z-index: 2;

  svg {
    height: 100%;
    width: auto;
  }

  &:hover:not([disabled]) {
    svg {
      fill: ${({theme:i})=>i.pallet.secondColor};
    }
  }
`,btt=ie.div`
  width: 100%;
  height: 100%;
`,Stt=ie.div`
  display: flex;
  justify-content: space-between;
  align-items; center;
  height: 5rem;
`,Ett=ie.div`
  display: flex;
  align-items: center;
  position: relative;
  overflow: hidden;
`,Mtt=ie.div`
  position: relative;
  display: flex;
  align-items: center;
  transition: linear 0.3s;
  width: 100%;
`,Ttt=ie.div`
  display: flex;
  flex-direction: column;
  padding: 0.25rem;
  min-width: 100%;
`,Ctt=ie.div`
  display: flex;
  flex-direction: column;
`,wtt=ie.span`
  font-weight: 600;
  font-size: 0.8rem;
`,Rtt=ie.span`
  font-style: italic;
  font-size: 0.7rem;
`,Ltt=ie.div`
  position: relative;
  font-size: 0.8rem;
`,Dtt=ie.ul`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  margin: 0;
  padding-top: 0.8rem;

  opacity: ${({$isVisible:i})=>i?1:0};
  visibility: ${({$isVisible:i})=>i?"visible":"hidden"};
  transition: opacity 0.4s ease-in-out, visibility 0.3s ease-in-out;
  pointer-events: ${({$isVisible:i})=>i?"auto":"none"};
`,Btt=ie.li`
  margin-bottom: 0.2rem;

  &:last-child {
    margin: 0;
  }

  &::marker {
    color: ${({theme:i})=>i.pallet.secondColor};
  }
`;function Ott({company:i}){const{company:t,lengthOfService:e,position:n,projects:s}=i,[r,a]=rt.useState(0),l=rt.useRef(null),u=rt.useRef(null),[f,m]=rt.useState(0),g=r===0,v=r===s.length-1;rt.useEffect(()=>{const b=l.current;if(b){const T=b.children[0];b.style.left=`-${T.clientWidth*r}px`}u.current&&m(u.current.scrollHeight)},[r]);const _=b=>{b==="next"&&a(T=>s.length-1===T?T:T+1),b==="prev"&&a(T=>T===0?T:T-1)};return k.jsxs(k.Fragment,{children:[k.jsxs(ytt,{children:[k.jsxs("span",{children:[k.jsx(_tt,{className:"cursor-pointer",target:"_blank",href:"https://incora.software/",children:t})," "," ",k.jsx(Att,{children:e})]}),k.jsx(xtt,{children:n})]}),k.jsx(btt,{children:k.jsxs(Ctt,{children:[k.jsxs(Stt,{children:[k.jsx(R9,{onClick:()=>_("prev"),disabled:g,className:g?"not-allowed":"cursor-pointer",children:k.jsx(w9,{style:{transform:"rotate(180deg)"}})}),k.jsx(Ett,{children:k.jsx(Mtt,{ref:l,children:s.map(b=>k.jsxs(Ttt,{children:[k.jsx(wtt,{children:b.name}),k.jsx(Rtt,{children:b.technologies})]},b.name))})}),k.jsx(R9,{onClick:()=>_("next"),disabled:v,className:v?"not-allowed":"cursor-pointer",children:k.jsx(w9,{})})]}),k.jsx(Ltt,{style:{height:f},children:s.map((b,T)=>k.jsx(Dtt,{$isVisible:T===r,ref:T===r?u:null,children:b.features.map(E=>k.jsx(Btt,{children:E},E))},b.name))})]})})]})}const Ntt=ie.div`
  padding: 0.5rem;
`;function Itt({modal:i}){return k.jsx(hp,{modal:i,children:k.jsx(Ntt,{children:vtt.map(t=>k.jsx(Ott,{company:t},t.company))})})}function Utt(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 0 64 Q 1 37 19 19 L 19 19 L 19 19 Q 37 1 64 0 L 224 0 L 224 0 L 224 128 L 224 128 Q 224 142 233 151 Q 242 160 256 160 L 384 160 L 384 160 L 384 304 L 384 304 L 176 304 L 176 304 Q 149 305 131 323 Q 113 341 112 368 L 112 512 L 112 512 L 64 512 L 64 512 Q 37 511 19 493 Q 1 475 0 448 L 0 64 L 0 64 Z M 384 128 L 256 128 L 384 128 L 256 128 L 256 0 L 256 0 L 384 128 L 384 128 Z M 208 512 Q 188 511 174 498 L 174 498 L 174 498 Q 161 484 160 464 L 160 448 L 160 448 Q 161 433 176 432 Q 191 433 192 448 L 192 464 L 192 464 Q 193 479 208 480 Q 223 479 224 464 L 224 368 L 224 368 Q 225 353 240 352 Q 255 353 256 368 L 256 464 L 256 464 Q 255 484 242 498 Q 228 511 208 512 L 208 512 Z M 304 352 L 336 352 L 304 352 L 336 352 Q 360 353 376 368 Q 391 384 392 408 Q 391 432 376 448 Q 360 463 336 464 L 320 464 L 320 464 L 320 496 L 320 496 Q 319 511 304 512 Q 289 511 288 496 L 288 448 L 288 448 L 288 368 L 288 368 Q 289 353 304 352 L 304 352 Z M 336 432 Q 358 430 360 408 Q 358 386 336 384 L 320 384 L 320 384 L 320 432 L 320 432 L 336 432 L 336 432 Z M 416 392 Q 416 375 428 364 L 428 364 L 428 364 Q 439 352 456 352 L 472 352 L 472 352 Q 489 352 500 364 Q 512 375 512 392 L 512 400 L 512 400 Q 511 415 496 416 Q 481 415 480 400 L 480 392 L 480 392 Q 479 385 472 384 L 456 384 L 456 384 Q 449 385 448 392 L 448 472 L 448 472 Q 449 479 456 480 L 472 480 L 472 480 Q 479 479 480 472 L 480 464 L 480 464 Q 465 463 464 448 Q 465 433 480 432 L 496 432 L 496 432 Q 511 433 512 448 L 512 472 L 512 472 Q 512 489 500 500 Q 489 512 472 512 L 456 512 L 456 512 Q 439 512 428 500 Q 416 489 416 472 L 416 392 L 416 392 Z"})})}function Ptt(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 32 96 Q 33 55 60 28 L 60 28 L 60 28 Q 87 1 128 0 L 224 0 L 224 0 L 224 191 L 224 191 Q 225 201 233 205 Q 241 209 250 203 L 304 160 L 304 160 L 358 203 L 358 203 Q 367 209 375 205 Q 383 201 384 191 L 384 0 L 384 0 L 416 0 L 448 0 Q 462 0 471 9 Q 480 18 480 32 L 480 352 L 480 352 Q 480 366 471 375 Q 462 384 448 384 L 448 448 L 448 448 Q 462 448 471 457 Q 480 466 480 480 Q 480 494 471 503 Q 462 512 448 512 L 416 512 L 128 512 Q 87 511 60 484 Q 33 457 32 416 L 32 96 L 32 96 Z M 96 416 Q 96 430 105 439 L 105 439 L 105 439 Q 114 448 128 448 L 384 448 L 384 448 L 384 384 L 384 384 L 128 384 L 128 384 Q 114 384 105 393 Q 96 402 96 416 L 96 416 Z"})})}function Ftt(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 235.55271565495207 46.61980830670927 L 130.8626198083067 46.61980830670927 L 235.55271565495207 46.61980830670927 L 104.69009584664536 46.61980830670927 Q 93.23961661341853 46.61980830670927 85.87859424920129 53.980830670926515 Q 78.51757188498402 61.34185303514377 78.51757188498402 72.7923322683706 Q 78.51757188498402 84.24281150159744 85.87859424920129 91.60383386581469 Q 93.23961661341853 98.96485623003196 104.69009584664536 98.96485623003196 L 104.69009584664536 207.7444089456869 L 104.69009584664536 207.7444089456869 Q 104.69009584664536 222.4664536741214 97.32907348242811 234.73482428115017 L 8.178913738019169 378.68370607028754 L 8.178913738019169 378.68370607028754 Q 0 392.5878594249201 0 408.9456869009585 Q 0.8178913738019169 432.6645367412141 16.357827476038338 449.0223642172524 Q 32.715654952076676 464.5623003194888 56.43450479233227 465.3801916932907 L 309.98083067092654 465.3801916932907 L 309.98083067092654 465.3801916932907 Q 323.0670926517572 465.3801916932907 333.6996805111821 459.6549520766773 Q 330.4281150159744 452.29392971246006 330.4281150159744 444.1150159744409 L 330.4281150159744 443.297124600639 L 330.4281150159744 443.297124600639 Q 318.9776357827476 449.0223642172524 306.7092651757188 447.38658146964855 Q 293.62300319488816 446.56869009584665 283.8083067092652 435.93610223642173 Q 272.3578274760383 423.66773162939296 264.17891373801916 408.9456869009585 Q 255.18210862619807 394.22364217252397 250.2747603833866 377.86581469648564 Q 246.18530351437698 364.779552715655 251.0926517571885 353.3290734824281 Q 256 341.0607028753994 266.6325878594249 334.517571884984 L 266.6325878594249 334.517571884984 L 266.6325878594249 334.517571884984 L 97.32907348242811 334.517571884984 L 97.32907348242811 334.517571884984 L 141.49520766773162 262.54313099041536 L 141.49520766773162 262.54313099041536 Q 157.03514376996804 237.18849840255592 157.03514376996804 207.7444089456869 L 157.03514376996804 98.96485623003196 L 157.03514376996804 98.96485623003196 L 209.38019169329073 98.96485623003196 L 209.38019169329073 98.96485623003196 L 209.38019169329073 207.7444089456869 L 209.38019169329073 207.7444089456869 Q 209.38019169329073 237.18849840255592 224.92012779552715 262.54313099041536 L 248.63897763578274 300.9840255591054 L 248.63897763578274 300.9840255591054 Q 248.63897763578274 296.0766773162939 250.2747603833866 291.1693290734824 Q 255.18210862619807 274.8115015974441 263.36102236421726 260.0894568690096 Q 269.08626198083067 251.91054313099042 274.8115015974441 243.73162939297126 L 269.90415335463257 234.73482428115017 L 269.90415335463257 234.73482428115017 Q 261.7252396166134 222.4664536741214 261.7252396166134 207.7444089456869 L 261.7252396166134 98.96485623003196 L 261.7252396166134 98.96485623003196 Q 273.1757188498403 98.96485623003196 280.5367412140575 91.60383386581469 Q 287.89776357827475 84.24281150159744 287.89776357827475 72.7923322683706 Q 287.89776357827475 61.34185303514377 280.5367412140575 53.980830670926515 Q 273.1757188498403 46.61980830670927 261.7252396166134 46.61980830670927 L 235.55271565495207 46.61980830670927 L 235.55271565495207 46.61980830670927 Z M 356.6006389776358 224.92012779552715 L 356.6006389776358 239.64217252396165 L 356.6006389776358 224.92012779552715 L 356.6006389776358 239.64217252396165 Q 355.78274760383385 249.45686900958466 346.7859424920128 254.36421725239617 Q 337.7891373801917 260.0894568690096 328.7923322683706 255.18210862619807 L 318.1597444089457 248.63897763578274 L 318.1597444089457 248.63897763578274 Q 309.1629392971246 244.54952076677316 302.6198083067093 251.0926517571885 Q 293.62300319488816 260.9073482428115 286.26198083067095 273.1757188498403 Q 278.9009584664537 285.444089456869 275.62939297124603 298.53035143769966 Q 273.1757188498403 307.5271565495208 281.35463258785944 312.4345047923323 L 292.80511182108626 318.9776357827476 L 292.80511182108626 318.9776357827476 Q 300.9840255591054 324.702875399361 300.9840255591054 334.517571884984 Q 300.9840255591054 344.33226837060704 292.80511182108626 349.23961661341855 L 281.35463258785944 356.6006389776358 L 281.35463258785944 356.6006389776358 Q 273.1757188498403 361.50798722044726 275.62939297124603 370.5047923322684 Q 279.7188498402556 383.59105431309905 286.26198083067095 395.8594249201278 Q 293.62300319488816 408.12779552715654 302.6198083067093 417.94249201277955 Q 309.98083067092654 424.48562300319486 318.1597444089457 419.5782747603834 L 328.7923322683706 413.85303514376994 L 328.7923322683706 413.85303514376994 Q 337.7891373801917 408.9456869009585 346.7859424920128 413.85303514376994 Q 355.78274760383385 419.5782747603834 356.6006389776358 429.39297124600637 L 356.6006389776358 443.297124600639 L 356.6006389776358 443.297124600639 Q 356.6006389776358 453.11182108626195 365.59744408945687 455.5654952076677 Q 378.68370607028754 458.8370607028754 392.5878594249201 458.8370607028754 Q 406.49201277955274 458.8370607028754 419.5782747603834 455.5654952076677 Q 427.75718849840257 453.11182108626195 428.57507987220447 443.297124600639 L 428.57507987220447 429.39297124600637 L 428.57507987220447 429.39297124600637 Q 429.39297124600637 418.76038338658145 437.5718849840256 413.85303514376994 Q 446.56869009584665 408.9456869009585 455.5654952076677 413.03514376996804 L 467.0159744408946 419.5782747603834 L 467.0159744408946 419.5782747603834 Q 475.19488817891374 423.66773162939296 482.555910543131 417.94249201277955 Q 491.55271565495207 408.12779552715654 498.91373801916933 395.04153354632587 Q 505.45686900958464 382.77316293929715 509.54632587859425 369.6869009584665 Q 512 361.50798722044726 503.82108626198084 355.78274760383385 L 492.37060702875397 349.23961661341855 L 492.37060702875397 349.23961661341855 Q 484.1916932907348 344.33226837060704 484.1916932907348 334.517571884984 Q 484.1916932907348 324.702875399361 492.37060702875397 318.9776357827476 L 503.82108626198084 312.4345047923323 L 503.82108626198084 312.4345047923323 Q 512 307.5271565495208 509.54632587859425 298.53035143769966 Q 505.45686900958464 285.444089456869 498.91373801916933 273.1757188498403 Q 491.55271565495207 260.9073482428115 482.555910543131 250.2747603833866 Q 475.19488817891374 244.54952076677316 467.0159744408946 248.63897763578274 L 455.5654952076677 255.18210862619807 L 455.5654952076677 255.18210862619807 Q 446.56869009584665 260.0894568690096 437.5718849840256 254.36421725239617 Q 429.39297124600637 249.45686900958466 428.57507987220447 239.64217252396165 L 428.57507987220447 224.92012779552715 L 428.57507987220447 224.92012779552715 Q 427.75718849840257 215.92332268370606 419.5782747603834 212.6517571884984 Q 406.49201277955274 210.19808306709265 392.5878594249201 210.19808306709265 Q 378.68370607028754 210.19808306709265 365.59744408945687 212.6517571884984 Q 356.6006389776358 215.92332268370606 356.6006389776358 224.92012779552715 L 356.6006389776358 224.92012779552715 Z M 353.3290734824281 334.517571884984 Q 353.3290734824281 311.61661341853033 372.1405750798722 298.53035143769966 Q 392.5878594249201 287.89776357827475 413.03514376996804 298.53035143769966 Q 431.8466453674121 311.61661341853033 431.8466453674121 334.517571884984 Q 431.8466453674121 357.4185303514377 413.03514376996804 369.6869009584665 Q 392.5878594249201 381.1373801916933 372.1405750798722 369.6869009584665 Q 353.3290734824281 357.4185303514377 353.3290734824281 334.517571884984 L 353.3290734824281 334.517571884984 Z"})})}function Htt(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 56.888888888888886 56.888888888888886 Q 32.888888888888886 57.77777777777778 16.88888888888889 73.77777777777777 L 16.88888888888889 73.77777777777777 L 16.88888888888889 73.77777777777777 Q 0.8888888888888888 89.77777777777777 0 113.77777777777777 L 0 398.22222222222223 L 0 398.22222222222223 Q 0.8888888888888888 422.22222222222223 16.88888888888889 438.22222222222223 Q 32.888888888888886 454.22222222222223 56.888888888888886 455.1111111111111 L 455.1111111111111 455.1111111111111 L 455.1111111111111 455.1111111111111 Q 479.1111111111111 454.22222222222223 495.1111111111111 438.22222222222223 Q 511.1111111111111 422.22222222222223 512 398.22222222222223 L 512 113.77777777777777 L 512 113.77777777777777 Q 511.1111111111111 89.77777777777777 495.1111111111111 73.77777777777777 Q 479.1111111111111 57.77777777777778 455.1111111111111 56.888888888888886 L 56.888888888888886 56.888888888888886 L 56.888888888888886 56.888888888888886 Z M 128 284.44444444444446 L 184.88888888888889 284.44444444444446 L 128 284.44444444444446 L 184.88888888888889 284.44444444444446 Q 215.11111111111111 285.3333333333333 235.55555555555554 304.8888888888889 Q 255.11111111111111 325.3333333333333 256 355.55555555555554 Q 255.11111111111111 368.8888888888889 241.77777777777777 369.77777777777777 L 71.11111111111111 369.77777777777777 L 71.11111111111111 369.77777777777777 Q 57.77777777777778 368.8888888888889 56.888888888888886 355.55555555555554 Q 57.77777777777778 325.3333333333333 77.33333333333333 304.8888888888889 Q 97.77777777777777 285.3333333333333 128 284.44444444444446 L 128 284.44444444444446 Z M 99.55555555555556 199.11111111111111 Q 100.44444444444444 167.11111111111111 128 150.22222222222223 Q 156.44444444444446 134.22222222222223 184.88888888888889 150.22222222222223 Q 212.44444444444446 167.11111111111111 213.33333333333334 199.11111111111111 Q 212.44444444444446 231.11111111111111 184.88888888888889 248 Q 156.44444444444446 264 128 248 Q 100.44444444444444 231.11111111111111 99.55555555555556 199.11111111111111 L 99.55555555555556 199.11111111111111 Z M 327.1111111111111 170.66666666666666 L 440.8888888888889 170.66666666666666 L 327.1111111111111 170.66666666666666 L 440.8888888888889 170.66666666666666 Q 454.22222222222223 171.55555555555554 455.1111111111111 184.88888888888889 Q 454.22222222222223 198.22222222222223 440.8888888888889 199.11111111111111 L 327.1111111111111 199.11111111111111 L 327.1111111111111 199.11111111111111 Q 313.77777777777777 198.22222222222223 312.8888888888889 184.88888888888889 Q 313.77777777777777 171.55555555555554 327.1111111111111 170.66666666666666 L 327.1111111111111 170.66666666666666 Z M 327.1111111111111 227.55555555555554 L 440.8888888888889 227.55555555555554 L 327.1111111111111 227.55555555555554 L 440.8888888888889 227.55555555555554 Q 454.22222222222223 228.44444444444446 455.1111111111111 241.77777777777777 Q 454.22222222222223 255.11111111111111 440.8888888888889 256 L 327.1111111111111 256 L 327.1111111111111 256 Q 313.77777777777777 255.11111111111111 312.8888888888889 241.77777777777777 Q 313.77777777777777 228.44444444444446 327.1111111111111 227.55555555555554 L 327.1111111111111 227.55555555555554 Z M 327.1111111111111 284.44444444444446 L 440.8888888888889 284.44444444444446 L 327.1111111111111 284.44444444444446 L 440.8888888888889 284.44444444444446 Q 454.22222222222223 285.3333333333333 455.1111111111111 298.6666666666667 Q 454.22222222222223 312 440.8888888888889 312.8888888888889 L 327.1111111111111 312.8888888888889 L 327.1111111111111 312.8888888888889 Q 313.77777777777777 312 312.8888888888889 298.6666666666667 Q 313.77777777777777 285.3333333333333 327.1111111111111 284.44444444444446 L 327.1111111111111 284.44444444444446 Z"})})}function ztt({modal:i}){const t=Hu(),e=kE(),n=s=>{t(BM(s))};return k.jsx(hp,{modal:i,children:k.jsxs(zN,{$flow:"row",children:[k.jsx(Xd,{onClick:()=>n("photo"),SvgIcon:Utt,text:"My_photo",highlightColor:e.pallet.textColor}),k.jsx(Xd,{onClick:()=>n("experience"),SvgIcon:Ftt,text:"Experience",highlightColor:e.pallet.textColor}),k.jsx(Xd,{onClick:()=>n("about_me"),SvgIcon:Htt,text:"About_me",highlightColor:e.pallet.textColor}),k.jsx(Xd,{onClick:()=>n("skills"),SvgIcon:Ptt,text:"Skills",highlightColor:e.pallet.textColor})]})})}var G_={};G_.d=(i,t)=>{for(var e in t)G_.o(t,e)&&!G_.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})};G_.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var sn=globalThis.pdfjsLib={};G_.d(sn,{AbortException:()=>c0,AnnotationEditorLayer:()=>uw,AnnotationEditorParamsType:()=>Ze,AnnotationEditorType:()=>dn,AnnotationEditorUIManager:()=>Kg,AnnotationLayer:()=>znt,AnnotationMode:()=>vd,ColorPicker:()=>gE,DOMSVGFactory:()=>I7,DrawLayer:()=>pw,FeatureTest:()=>Na,GlobalWorkerOptions:()=>Yh,ImageKind:()=>I4,InvalidPDFException:()=>VN,MissingPDFException:()=>l0,OPS:()=>cc,OutputScale:()=>iC,PDFDataRangeTransport:()=>HI,PDFDateString:()=>w7,PDFWorker:()=>tv,PasswordResponses:()=>Qtt,PermissionFlag:()=>Vtt,PixelsPerInch:()=>ip,RenderingCancelledException:()=>T7,TextLayer:()=>DC,UnexpectedResponseException:()=>PM,Util:()=>Le,VerbosityLevel:()=>NM,XfaLayer:()=>GI,build:()=>Ant,createValidAbsoluteUrl:()=>Ytt,fetchData:()=>HM,getDocument:()=>hnt,getFilenameFromUrl:()=>iet,getPdfFilenameFromUrl:()=>set,getXfaPageViewport:()=>ret,isDataScheme:()=>zM,isPdfFile:()=>C7,noContextMenu:()=>Ll,normalizeUnicode:()=>tet,setLayerDimensions:()=>Wg,shadow:()=>Hn,version:()=>_nt});const sa=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),kN=[1,0,0,1,0,0],$5=[.001,0,0,.001,0,0],Gtt=1e7,s5=1.35,Po={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},vd={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ktt="pdfjs_internal_editor_",dn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ze={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Vtt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Wr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},I4={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ks={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},r_={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},NM={ERRORS:0,WARNINGS:1,INFOS:5},cc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Qtt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let IM=NM.WARNINGS;function jtt(i){Number.isInteger(i)&&(IM=i)}function Xtt(){return IM}function UM(i){IM>=NM.INFOS&&console.log(`Info: ${i}`)}function An(i){IM>=NM.WARNINGS&&console.log(`Warning: ${i}`)}function Oi(i){throw new Error(i)}function Xs(i,t){i||Oi(t)}function qtt(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ytt(i,t=null,e=null){if(!i)return null;try{if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=$tt(i)}catch{}}const n=t?new URL(i,t):new URL(i);if(qtt(n))return n}catch{}return null}function Hn(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const fp=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class tC extends fp{constructor(t,e){super(t,"PasswordException"),this.code=e}}class eC extends fp{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class VN extends fp{constructor(t){super(t,"InvalidPDFException")}}class l0 extends fp{constructor(t){super(t,"MissingPDFException")}}class PM extends fp{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class Wtt extends fp{constructor(t){super(t,"FormatError")}}class c0 extends fp{constructor(t){super(t,"AbortException")}}function QN(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Oi("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),a=i.subarray(s,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function FM(i){typeof i!="string"&&Oi("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function Ktt(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function E7(i){const t=Object.create(null);for(const[e,n]of i)t[e]=n;return t}function Jtt(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function Ztt(){try{return new Function(""),!0}catch{return!1}}class Na{static get isLittleEndian(){return Hn(this,"isLittleEndian",Jtt())}static get isEvalSupported(){return Hn(this,"isEvalSupported",Ztt())}static get isOffscreenCanvasSupported(){return Hn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Hn(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Hn(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Hn(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const r5=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var ef,U4,nC;class Le{static makeHexColor(t,e,n){return`#${r5[t]}${r5[e]}${r5[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[n,s]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[s,r]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),a=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],s[0],r[0],a[0]),Math.min(n[1],s[1],r[1],a[1]),Math.max(n[0],s[0],r[0],a[0]),Math.max(n[1],s[1],r[1],a[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],l=(n+a)/2,u=Math.sqrt((n+a)**2-4*(n*a-r*s))/2,f=l+u||1,m=l-u||1;return[Math.sqrt(f),Math.sqrt(m)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[n,r,s,a]}static bezierBoundingBox(t,e,n,s,r,a,l,u,f){return f?(f[0]=Math.min(f[0],t,l),f[1]=Math.min(f[1],e,u),f[2]=Math.max(f[2],t,l),f[3]=Math.max(f[3],e,u)):f=[Math.min(t,l),Math.min(e,u),Math.max(t,l),Math.max(e,u)],V(this,ef,nC).call(this,t,n,r,l,e,s,a,u,3*(-t+3*(n-r)+l),6*(t-2*n+r),3*(n-t),f),V(this,ef,nC).call(this,t,n,r,l,e,s,a,u,3*(-e+3*(s-a)+u),6*(e-2*s+a),3*(s-e),f),f}}ef=new WeakSet,U4=function(t,e,n,s,r,a,l,u,f,m){if(f<=0||f>=1)return;const g=1-f,v=f*f,_=v*f,b=g*(g*(g*t+3*f*e)+3*v*n)+_*s,T=g*(g*(g*r+3*f*a)+3*v*l)+_*u;m[0]=Math.min(m[0],b),m[1]=Math.min(m[1],T),m[2]=Math.max(m[2],b),m[3]=Math.max(m[3],T)},nC=function(t,e,n,s,r,a,l,u,f,m,g,v){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&V(this,ef,U4).call(this,t,e,n,s,r,a,l,u,-g/m,v);return}const _=m**2-4*g*f;if(_<0)return;const b=Math.sqrt(_),T=2*f;V(this,ef,U4).call(this,t,e,n,s,r,a,l,u,(-m+b)/T,v),V(this,ef,U4).call(this,t,e,n,s,r,a,l,u,(-m-b)/T,v)},W(Le,ef);function $tt(i){return decodeURIComponent(escape(i))}let a5=null,L9=null;function tet(i){return a5||(a5=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,L9=new Map([["","t"]])),i.replaceAll(a5,(t,e,n)=>e?e.normalize("NFKC"):L9.get(n))}function eet(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let t=0;t<32;t++)i[t]=Math.floor(Math.random()*255);return QN(i)}const M7="pdfjs_internal_id_",gh={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function net(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(QN(i))}const yh="http://www.w3.org/2000/svg",wm=class wm{};Je(wm,"CSS",96),Je(wm,"PDF",72),Je(wm,"PDF_TO_CSS_UNITS",wm.CSS/wm.PDF);let ip=wm;async function HM(i,t="text"){if(d_(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class Hx{constructor({viewBox:t,scale:e,rotation:n,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=s,this.offsetY=r;const l=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let f,m,g,v;switch(n%=360,n<0&&(n+=360),n){case 180:f=-1,m=0,g=0,v=1;break;case 90:f=0,m=1,g=1,v=0;break;case 270:f=0,m=-1,g=-1,v=0;break;case 0:f=1,m=0,g=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(g=-g,v=-v);let _,b,T,E;f===0?(_=Math.abs(u-t[1])*e+s,b=Math.abs(l-t[0])*e+r,T=(t[3]-t[1])*e,E=(t[2]-t[0])*e):(_=Math.abs(l-t[0])*e+s,b=Math.abs(u-t[1])*e+r,T=(t[2]-t[0])*e,E=(t[3]-t[1])*e),this.transform=[f*e,m*e,g*e,v*e,_-f*e*l-g*e*u,b-m*e*l-v*e*u],this.width=T,this.height=E}get rawDims(){const{viewBox:t}=this;return Hn(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new Hx({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){return Le.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Le.applyTransform([t[0],t[1]],this.transform),n=Le.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return Le.applyInverseTransform([t,e],this.transform)}}class T7 extends fp{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function zM(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function C7(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function iet(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function set(i,t="document.pdf"){if(typeof i!="string")return t;if(zM(i))return An('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(i);let r=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class D9{constructor(){Je(this,"started",Object.create(null));Je(this,"times",[])}time(t){t in this.started&&An(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||An(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-s}ms
`);return t.join("")}}function d_(i,t){try{const{protocol:e}=t?new URL(i,t):new URL(i);return e==="http:"||e==="https:"}catch{return!1}}function Ll(i){i.preventDefault()}function B9(i){console.log("Deprecated API usage: "+i)}var cA;class w7{static toDateObject(t){if(!t||typeof t!="string")return null;x(this,cA)||G(this,cA,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=x(this,cA).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let u=parseInt(e[6],10);u=u>=0&&u<=59?u:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(a+=m,l+=g):f==="+"&&(a-=m,l-=g),new Date(Date.UTC(n,s,r,a,l,u))}}cA=new WeakMap,W(w7,cA);function ret(i,{scale:t=1,rotation:e=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new Hx({viewBox:r,scale:t,rotation:e})}function R7(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(An(`Not a valid color format: "${i}"`),[0,0,0])}function aet(i){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,R7(n))}t.remove()}function Wi(i){const{a:t,b:e,c:n,d:s,e:r,f:a}=i.getTransform();return[t,e,n,s,r,a]}function vh(i){const{a:t,b:e,c:n,d:s,e:r,f:a}=i.getTransform().invertSelf();return[t,e,n,s,r,a]}function Wg(i,t,e=!1,n=!0){if(t instanceof Hx){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:a}=i,l=Na.isCSSRoundSupported,u=`var(--scale-factor) * ${s}px`,f=`var(--scale-factor) * ${r}px`,m=l?`round(down, ${u}, var(--scale-round-x, 1px))`:`calc(${u})`,g=l?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!e||t.rotation%180===0?(a.width=m,a.height=g):(a.width=g,a.height=m)}n&&i.setAttribute("data-main-rotation",t.rotation)}class iC{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var yd,Pm,uc,Fm,uA,hA,yE,jN,Ia,XN,qN,P4,YN,rC;const xh=class xh{constructor(t){W(this,Ia);W(this,yd,null);W(this,Pm,null);W(this,uc);W(this,Fm,null);W(this,uA,null);G(this,uc,t),x(xh,hA)||G(xh,hA,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=G(this,yd,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=x(this,uc)._uiManager._signal;t.addEventListener("contextmenu",Ll,{signal:e}),t.addEventListener("pointerdown",V(xh,yE,jN),{signal:e});const n=G(this,Fm,document.createElement("div"));n.className="buttons",t.append(n);const s=x(this,uc).toolbarPosition;if(s){const{style:r}=t,a=x(this,uc)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return V(this,Ia,YN).call(this),t}get div(){return x(this,yd)}hide(){var t;x(this,yd).classList.add("hidden"),(t=x(this,Pm))==null||t.hideDropdown()}show(){var t;x(this,yd).classList.remove("hidden"),(t=x(this,uA))==null||t.shown()}async addAltText(t){const e=await t.render();V(this,Ia,P4).call(this,e),x(this,Fm).prepend(e,x(this,Ia,rC)),G(this,uA,t)}addColorPicker(t){G(this,Pm,t);const e=t.renderButton();V(this,Ia,P4).call(this,e),x(this,Fm).prepend(e,x(this,Ia,rC))}remove(){var t;x(this,yd).remove(),(t=x(this,Pm))==null||t.destroy(),G(this,Pm,null)}};yd=new WeakMap,Pm=new WeakMap,uc=new WeakMap,Fm=new WeakMap,uA=new WeakMap,hA=new WeakMap,yE=new WeakSet,jN=function(t){t.stopPropagation()},Ia=new WeakSet,XN=function(t){x(this,uc)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},qN=function(t){x(this,uc)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},P4=function(t){const e=x(this,uc)._uiManager._signal;t.addEventListener("focusin",V(this,Ia,XN).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",V(this,Ia,qN).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ll,{signal:e})},YN=function(){const{editorType:t,_uiManager:e}=x(this,uc),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",x(xh,hA)[t]),V(this,Ia,P4).call(this,n),n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),x(this,Fm).append(n)},rC=function(){const t=document.createElement("div");return t.className="divider",t},W(xh,yE),W(xh,hA,null);let sC=xh;var fA,Hm,zm,rp,WN,KN,JN;class oet{constructor(t){W(this,rp);W(this,fA,null);W(this,Hm,null);W(this,zm);G(this,zm,t)}show(t,e,n){const[s,r]=V(this,rp,KN).call(this,e,n),{style:a}=x(this,Hm)||G(this,Hm,V(this,rp,WN).call(this));t.append(x(this,Hm)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){x(this,Hm).remove()}}fA=new WeakMap,Hm=new WeakMap,zm=new WeakMap,rp=new WeakSet,WN=function(){const t=G(this,Hm,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ll,{signal:x(this,zm)._signal});const e=G(this,fA,document.createElement("div"));return e.className="buttons",t.append(e),V(this,rp,JN).call(this),t},KN=function(t,e){let n=0,s=0;for(const r of t){const a=r.y+r.height;if(a<n)continue;const l=r.x+(e?r.width:0);if(a>n){s=l,n=a;continue}e?l>s&&(s=l):l<s&&(s=l)}return[e?1-s:s,n]},JN=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=x(this,zm)._signal;t.addEventListener("contextmenu",Ll,{signal:n}),t.addEventListener("click",()=>{x(this,zm).highlightSelection("floating_button")},{signal:n}),x(this,fA).append(t)};function dE(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}function cet(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var _E;class uet{constructor(){W(this,_E,0)}get id(){return`${ktt}${Sa(this,_E)._++}`}}_E=new WeakMap;var iv,dA,Jr,sv,F4;const H7=class H7{constructor(){W(this,sv);W(this,iv,eet());W(this,dA,0);W(this,Jr,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Hn(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:r}=t;return V(this,sv,F4).call(this,`${e}_${n}_${s}_${r}`,t)}async getFromUrl(t){return V(this,sv,F4).call(this,t,t)}async getFromBlob(t,e){const n=await e;return V(this,sv,F4).call(this,t,n)}async getFromId(t){x(this,Jr)||G(this,Jr,new Map);const e=x(this,Jr).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){x(this,Jr)||G(this,Jr,new Map);let n=x(this,Jr).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${x(this,iv)}_${Sa(this,dA)._++}`,refCounter:1,isSvg:!1},x(this,Jr).set(t,n),x(this,Jr).set(n.id,n),n}getSvgUrl(t){const e=x(this,Jr).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;x(this,Jr)||G(this,Jr,new Map);const e=x(this,Jr).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(s=n.close)==null||s.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${x(this,iv)}_`)}};iv=new WeakMap,dA=new WeakMap,Jr=new WeakMap,sv=new WeakSet,F4=async function(t,e){x(this,Jr)||G(this,Jr,new Map);let n=x(this,Jr).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${x(this,iv)}_${Sa(this,dA)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(n.url=e,s=await HM(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=H7._isSVGFittingCanvas,a=new FileReader,l=new Image,u=new Promise((f,m)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,f()},a.onload=async()=>{const g=n.svgUrl=a.result;l.src=await r?`${g}#svgView(preserveAspectRatio(none))`:g},l.onerror=a.onerror=m});a.readAsDataURL(s),await u}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){console.error(s),n=null}return x(this,Jr).set(t,n),n&&x(this,Jr).set(n.id,n),n};let aC=H7;var or,_d,pA,lr;class het{constructor(t=128){W(this,or,[]);W(this,_d,!1);W(this,pA);W(this,lr,-1);G(this,pA,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(s&&t(),x(this,_d))return;const u={cmd:t,undo:e,post:n,type:r};if(x(this,lr)===-1){x(this,or).length>0&&(x(this,or).length=0),G(this,lr,0),x(this,or).push(u);return}if(a&&x(this,or)[x(this,lr)].type===r){l&&(u.undo=x(this,or)[x(this,lr)].undo),x(this,or)[x(this,lr)]=u;return}const f=x(this,lr)+1;f===x(this,pA)?x(this,or).splice(0,1):(G(this,lr,f),f<x(this,or).length&&x(this,or).splice(f)),x(this,or).push(u)}undo(){if(x(this,lr)===-1)return;G(this,_d,!0);const{undo:t,post:e}=x(this,or)[x(this,lr)];t(),e==null||e(),G(this,_d,!1),G(this,lr,x(this,lr)-1)}redo(){if(x(this,lr)<x(this,or).length-1){G(this,lr,x(this,lr)+1),G(this,_d,!0);const{cmd:t,post:e}=x(this,or)[x(this,lr)];t(),e==null||e(),G(this,_d,!1)}}hasSomethingToUndo(){return x(this,lr)!==-1}hasSomethingToRedo(){return x(this,lr)<x(this,or).length-1}destroy(){G(this,or,null)}}or=new WeakMap,_d=new WeakMap,pA=new WeakMap,lr=new WeakMap;var AE,ZN;class zx{constructor(t){W(this,AE);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Na.platform;for(const[n,s,r={}]of t)for(const a of n){const l=a.startsWith("mac+");e&&l?(this.callbacks.set(a.slice(4),{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1))):!e&&!l&&(this.callbacks.set(a,{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(V(this,AE,ZN).call(this,e));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:a=[],checker:l=null}}=n;l&&!l(t,e)||(s.bind(t,...a,e)(),r||(e.stopPropagation(),e.preventDefault()))}}AE=new WeakSet,ZN=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const xE=class xE{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return aet(t),Hn(this,"_colors",t)}convert(t){const e=R7(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((r,a)=>r===e[a]))return xE._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Le.makeHexColor(...e):t}};Je(xE,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let oC=xE;var rv,Ro,Vs,Cr,av,Sh,ov,hc,Ad,lv,Gm,vu,fc,km,mA,gA,cv,vA,yu,xd,uv,bd,_u,bE,Sd,yA,Ed,Vm,_A,AA,cr,ui,Eh,Qm,xA,bA,Md,Au,Mh,SA,_l,me,H4,lC,$N,tI,z4,eI,nI,iI,cC,sI,uC,hC,rI,Ma,fd,aI,oI,fC,lI,p_,dC;const W1=class W1{constructor(t,e,n,s,r,a,l,u,f,m,g){W(this,me);W(this,rv,new AbortController);W(this,Ro,null);W(this,Vs,new Map);W(this,Cr,new Map);W(this,av,null);W(this,Sh,null);W(this,ov,null);W(this,hc,new het);W(this,Ad,null);W(this,lv,0);W(this,Gm,new Set);W(this,vu,null);W(this,fc,null);W(this,km,new Set);W(this,mA,!1);W(this,gA,!1);W(this,cv,!1);W(this,vA,null);W(this,yu,null);W(this,xd,null);W(this,uv,null);W(this,bd,!1);W(this,_u,null);W(this,bE,new uet);W(this,Sd,!1);W(this,yA,!1);W(this,Ed,null);W(this,Vm,null);W(this,_A,null);W(this,AA,null);W(this,cr,dn.NONE);W(this,ui,new Set);W(this,Eh,null);W(this,Qm,null);W(this,xA,null);W(this,bA,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});W(this,Md,[0,0]);W(this,Au,null);W(this,Mh,null);W(this,SA,null);W(this,_l,null);const v=this._signal=x(this,rv).signal;G(this,Mh,t),G(this,SA,e),G(this,av,n),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:v}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),s._on("setpreference",this.onSetPreference.bind(this),{signal:v}),s._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:v}),V(this,me,eI).call(this),V(this,me,rI).call(this),V(this,me,cC).call(this),G(this,Sh,r.annotationStorage),G(this,vA,r.filterFactory),G(this,Qm,a),G(this,uv,l||null),G(this,mA,u),G(this,gA,f),G(this,cv,m),G(this,AA,g||null),this.viewParameters={realScale:ip.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=W1.prototype,e=a=>x(a,Mh).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:u}=l;return u!=="text"&&u!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Hn(this,"_keyboardManager",new zx([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&x(a,Mh).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&x(a,Mh).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,s;(t=x(this,_l))==null||t.resolve(),G(this,_l,null),(e=x(this,rv))==null||e.abort(),G(this,rv,null),this._signal=null;for(const r of x(this,Cr).values())r.destroy();x(this,Cr).clear(),x(this,Vs).clear(),x(this,km).clear(),G(this,Ro,null),x(this,ui).clear(),x(this,hc).destroy(),(n=x(this,av))==null||n.destroy(),(s=x(this,_u))==null||s.hide(),G(this,_u,null),x(this,yu)&&(clearTimeout(x(this,yu)),G(this,yu,null)),x(this,Au)&&(clearTimeout(x(this,Au)),G(this,Au,null))}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return x(this,AA)}get useNewAltTextFlow(){return x(this,gA)}get useNewAltTextWhenAddingImage(){return x(this,cv)}get hcmFilter(){return Hn(this,"hcmFilter",x(this,Qm)?x(this,vA).addHCMFilter(x(this,Qm).foreground,x(this,Qm).background):"none")}get direction(){return Hn(this,"direction",getComputedStyle(x(this,Mh)).direction)}get highlightColors(){return Hn(this,"highlightColors",x(this,uv)?new Map(x(this,uv).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Hn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){G(this,_A,t)}editAltText(t,e=!1){var n;(n=x(this,av))==null||n.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":G(this,cv,e);break}}onPageChanging({pageNumber:t}){G(this,lv,t-1)}focusMainContainer(){x(this,Mh).focus()}findParent(t,e){for(const n of x(this,Cr).values()){const{x:s,y:r,width:a,height:l}=n.div.getBoundingClientRect();if(t>=s&&t<=s+a&&e>=r&&e<=r+l)return n}return null}disableUserSelect(t=!1){x(this,SA).classList.toggle("noUserSelect",t)}addShouldRescale(t){x(this,km).add(t)}removeShouldRescale(t){x(this,km).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ip.PDF_TO_CSS_UNITS;for(const e of x(this,km))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a}=e,l=e.toString(),f=V(this,me,H4).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(f);if(!m)return;e.empty();const g=V(this,me,lC).call(this,f),v=x(this,cr)===dn.NONE,_=()=>{g==null||g.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a,text:l}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(dn.HIGHLIGHT,_);return}_()}addToAnnotationStorage(t){!t.isEmpty()&&x(this,Sh)&&!x(this,Sh).has(t.id)&&x(this,Sh).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,x(this,bd)&&(G(this,bd,!1),V(this,me,z4).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of x(this,ui))if(e.div.contains(t)){G(this,Vm,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!x(this,Vm))return;const[t,e]=x(this,Vm);G(this,Vm,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){V(this,me,cC).call(this),V(this,me,uC).call(this)}removeEditListeners(){V(this,me,sI).call(this),V(this,me,hC).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of x(this,fc))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of x(this,fc))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=x(this,Ro))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of x(this,ui)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const a of x(this,fc))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){An(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const u of n){const f=await s.deserialize(u);if(!f)return;r.push(f)}const a=()=>{for(const u of r)V(this,me,fC).call(this,u);V(this,me,dC).call(this,r)},l=()=>{for(const u of r)u.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(r){An(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),x(this,cr)!==dn.NONE&&!this.isEditorHandlingKeyboard&&W1._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,x(this,bd)&&(G(this,bd,!1),V(this,me,z4).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(V(this,me,nI).call(this),V(this,me,uC).call(this),V(this,me,Ma).call(this,{isEditing:x(this,cr)!==dn.NONE,isEmpty:V(this,me,p_).call(this),hasSomethingToUndo:x(this,hc).hasSomethingToUndo(),hasSomethingToRedo:x(this,hc).hasSomethingToRedo(),hasSelectedEditor:!1})):(V(this,me,iI).call(this),V(this,me,hC).call(this),V(this,me,Ma).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!x(this,fc)){G(this,fc,t);for(const e of x(this,fc))V(this,me,fd).call(this,e.defaultPropertiesToUpdate)}}getId(){return x(this,bE).id}get currentLayer(){return x(this,Cr).get(x(this,lv))}getLayer(t){return x(this,Cr).get(t)}get currentPageIndex(){return x(this,lv)}addLayer(t){x(this,Cr).set(t.pageIndex,t),x(this,Sd)?t.enable():t.disable()}removeLayer(t){x(this,Cr).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){if(x(this,cr)!==t&&!(x(this,_l)&&(await x(this,_l).promise,!x(this,_l)))){if(G(this,_l,Promise.withResolvers()),G(this,cr,t),t===dn.NONE){this.setEditingState(!1),V(this,me,oI).call(this),x(this,_l).resolve();return}this.setEditingState(!0),await V(this,me,aI).call(this),this.unselectAll();for(const s of x(this,Cr).values())s.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),x(this,_l).resolve();return}for(const s of x(this,Vs).values())s.annotationElementId===e?(this.setSelected(s),s.enterInEditMode()):s.unselect();x(this,_l).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==x(this,cr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(x(this,fc)){switch(t){case Ze.CREATE:this.currentLayer.addNewEditor();return;case Ze.HIGHLIGHT_DEFAULT_COLOR:(n=x(this,_A))==null||n.updateColor(e);break;case Ze.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(x(this,xA)||G(this,xA,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of x(this,ui))s.updateParams(t,e);for(const s of x(this,fc))s.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const a of x(this,Vs).values())a.editorType===t&&a.show(e);(((r=x(this,xA))==null?void 0:r.get(Ze.HIGHLIGHT_SHOW_ALL))??!0)!==e&&V(this,me,fd).call(this,[[Ze.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(x(this,yA)!==t){G(this,yA,t);for(const e of x(this,Cr).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of x(this,Vs).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return x(this,Vs).get(t)}addEditor(t){x(this,Vs).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(x(this,yu)&&clearTimeout(x(this,yu)),G(this,yu,setTimeout(()=>{this.focusMainContainer(),G(this,yu,null)},0))),x(this,Vs).delete(t.id),this.unselect(t),(!t.annotationElementId||!x(this,Gm).has(t.annotationElementId))&&((e=x(this,Sh))==null||e.remove(t.id))}addDeletedAnnotationElement(t){x(this,Gm).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return x(this,Gm).has(t)}removeDeletedAnnotationElement(t){x(this,Gm).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){x(this,Ro)!==t&&(G(this,Ro,t),t&&V(this,me,fd).call(this,t.propertiesToUpdate))}updateUI(t){x(this,me,lI)===t&&V(this,me,fd).call(this,t.propertiesToUpdate)}toggleSelected(t){if(x(this,ui).has(t)){x(this,ui).delete(t),t.unselect(),V(this,me,Ma).call(this,{hasSelectedEditor:this.hasSelection});return}x(this,ui).add(t),t.select(),V(this,me,fd).call(this,t.propertiesToUpdate),V(this,me,Ma).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of x(this,ui))e!==t&&e.unselect();x(this,ui).clear(),x(this,ui).add(t),t.select(),V(this,me,fd).call(this,t.propertiesToUpdate),V(this,me,Ma).call(this,{hasSelectedEditor:!0})}isSelected(t){return x(this,ui).has(t)}get firstSelectedEditor(){return x(this,ui).values().next().value}unselect(t){t.unselect(),x(this,ui).delete(t),V(this,me,Ma).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return x(this,ui).size!==0}get isEnterHandled(){return x(this,ui).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){x(this,hc).undo(),V(this,me,Ma).call(this,{hasSomethingToUndo:x(this,hc).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:V(this,me,p_).call(this)})}redo(){x(this,hc).redo(),V(this,me,Ma).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:x(this,hc).hasSomethingToRedo(),isEmpty:V(this,me,p_).call(this)})}addCommands(t){x(this,hc).add(t),V(this,me,Ma).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:V(this,me,p_).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...x(this,ui)],e=()=>{for(const s of t)s.remove()},n=()=>{for(const s of t)V(this,me,fC).call(this,s)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=x(this,Ro))==null||t.commitOrRemove()}hasSomethingToControl(){return x(this,Ro)||this.hasSelection}selectAll(){for(const t of x(this,ui))t.commit();V(this,me,dC).call(this,x(this,Vs).values())}unselectAll(){if(!(x(this,Ro)&&(x(this,Ro).commitOrRemove(),x(this,cr)!==dn.NONE))&&this.hasSelection){for(const t of x(this,ui))t.unselect();x(this,ui).clear(),V(this,me,Ma).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;x(this,Md)[0]+=t,x(this,Md)[1]+=e;const[s,r]=x(this,Md),a=[...x(this,ui)],l=1e3;x(this,Au)&&clearTimeout(x(this,Au)),G(this,Au,setTimeout(()=>{G(this,Au,null),x(this,Md)[0]=x(this,Md)[1]=0,this.addCommands({cmd:()=>{for(const u of a)x(this,Vs).has(u.id)&&u.translateInPage(s,r)},undo:()=>{for(const u of a)x(this,Vs).has(u.id)&&u.translateInPage(-s,-r)},mustExec:!1})},l));for(const u of a)u.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),G(this,vu,new Map);for(const t of x(this,ui))x(this,vu).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!x(this,vu))return!1;this.disableUserSelect(!1);const t=x(this,vu);G(this,vu,null);let e=!1;for(const[{x:s,y:r,pageIndex:a},l]of t)l.newX=s,l.newY=r,l.newPageIndex=a,e||(e=s!==l.savedX||r!==l.savedY||a!==l.savedPageIndex);if(!e)return!1;const n=(s,r,a,l)=>{if(x(this,Vs).has(s.id)){const u=x(this,Cr).get(l);u?s._setParentAndPosition(u,r,a):(s.pageIndex=l,s.x=r,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:a,newPageIndex:l}]of t)n(s,r,a,l)},undo:()=>{for(const[s,{savedX:r,savedY:a,savedPageIndex:l}]of t)n(s,r,a,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(x(this,vu))for(const n of x(this,vu).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||x(this,ui).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return x(this,Ro)===t}getActive(){return x(this,Ro)}getMode(){return x(this,cr)}get imageManager(){return Hn(this,"imageManager",new aC)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:a}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(f,m,g,v)=>({x:(m-s)/a,y:1-(f+g-n)/r,width:v/a,height:g/r});break;case"180":l=(f,m,g,v)=>({x:1-(f+g-n)/r,y:1-(m+v-s)/a,width:g/r,height:v/a});break;case"270":l=(f,m,g,v)=>({x:1-(m+v-s)/a,y:(f-n)/r,width:v/a,height:g/r});break;default:l=(f,m,g,v)=>({x:(f-n)/r,y:(m-s)/a,width:g/r,height:v/a});break}const u=[];for(let f=0,m=e.rangeCount;f<m;f++){const g=e.getRangeAt(f);if(!g.collapsed)for(const{x:v,y:_,width:b,height:T}of g.getClientRects())b===0||T===0||u.push(l(v,_,b,T))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:t,id:e}){(x(this,ov)||G(this,ov,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=x(this,ov))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=x(this,ov))==null?void 0:s.get(t.data.id);if(!e)return;const n=x(this,Sh).getRawValue(e);n&&(x(this,cr)===dn.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};rv=new WeakMap,Ro=new WeakMap,Vs=new WeakMap,Cr=new WeakMap,av=new WeakMap,Sh=new WeakMap,ov=new WeakMap,hc=new WeakMap,Ad=new WeakMap,lv=new WeakMap,Gm=new WeakMap,vu=new WeakMap,fc=new WeakMap,km=new WeakMap,mA=new WeakMap,gA=new WeakMap,cv=new WeakMap,vA=new WeakMap,yu=new WeakMap,xd=new WeakMap,uv=new WeakMap,bd=new WeakMap,_u=new WeakMap,bE=new WeakMap,Sd=new WeakMap,yA=new WeakMap,Ed=new WeakMap,Vm=new WeakMap,_A=new WeakMap,AA=new WeakMap,cr=new WeakMap,ui=new WeakMap,Eh=new WeakMap,Qm=new WeakMap,xA=new WeakMap,bA=new WeakMap,Md=new WeakMap,Au=new WeakMap,Mh=new WeakMap,SA=new WeakMap,_l=new WeakMap,me=new WeakSet,H4=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},lC=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of x(this,Cr).values())if(n.hasTextLayer(t))return n;return null},$N=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=V(this,me,H4).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(x(this,_u)||G(this,_u,new oet(this)),x(this,_u).show(n,s,this.direction==="ltr"))},tI=function(){var r,a,l;const t=document.getSelection();if(!t||t.isCollapsed){x(this,Eh)&&((r=x(this,_u))==null||r.hide(),G(this,Eh,null),V(this,me,Ma).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===x(this,Eh))return;const s=V(this,me,H4).call(this,t).closest(".textLayer");if(!s){x(this,Eh)&&((a=x(this,_u))==null||a.hide(),G(this,Eh,null),V(this,me,Ma).call(this,{hasSelectedText:!1}));return}if((l=x(this,_u))==null||l.hide(),G(this,Eh,e),V(this,me,Ma).call(this,{hasSelectedText:!0}),!(x(this,cr)!==dn.HIGHLIGHT&&x(this,cr)!==dn.NONE)&&(x(this,cr)===dn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),G(this,bd,this.isShiftKeyDown),!this.isShiftKeyDown)){const u=x(this,cr)===dn.HIGHLIGHT?V(this,me,lC).call(this,s):null;u==null||u.toggleDrawing();const f=new AbortController,m=this.combinedSignal(f),g=v=>{v.type==="pointerup"&&v.button!==0||(f.abort(),u==null||u.toggleDrawing(!0),v.type==="pointerup"&&V(this,me,z4).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("blur",g,{signal:m})}},z4=function(t=""){x(this,cr)===dn.HIGHLIGHT?this.highlightSelection(t):x(this,mA)&&V(this,me,$N).call(this)},eI=function(){document.addEventListener("selectionchange",V(this,me,tI).bind(this),{signal:this._signal})},nI=function(){if(x(this,xd))return;G(this,xd,new AbortController);const t=this.combinedSignal(x(this,xd));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},iI=function(){var t;(t=x(this,xd))==null||t.abort(),G(this,xd,null)},cC=function(){if(x(this,Ed))return;G(this,Ed,new AbortController);const t=this.combinedSignal(x(this,Ed));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},sI=function(){var t;(t=x(this,Ed))==null||t.abort(),G(this,Ed,null)},uC=function(){if(x(this,Ad))return;G(this,Ad,new AbortController);const t=this.combinedSignal(x(this,Ad));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},hC=function(){var t;(t=x(this,Ad))==null||t.abort(),G(this,Ad,null)},rI=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Ma=function(t){Object.entries(t).some(([n,s])=>x(this,bA)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(x(this,bA),t)}),x(this,cr)===dn.HIGHLIGHT&&t.hasSelectedEditor===!1&&V(this,me,fd).call(this,[[Ze.HIGHLIGHT_FREE,!0]]))},fd=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},aI=async function(){if(!x(this,Sd)){G(this,Sd,!0);const t=[];for(const e of x(this,Cr).values())t.push(e.enable());await Promise.all(t);for(const e of x(this,Vs).values())e.enable()}},oI=function(){if(this.unselectAll(),x(this,Sd)){G(this,Sd,!1);for(const t of x(this,Cr).values())t.disable();for(const t of x(this,Vs).values())t.disable()}},fC=function(t){const e=x(this,Cr).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},lI=function(){let t=null;for(t of x(this,ui));return t},p_=function(){if(x(this,Vs).size===0)return!0;if(x(this,Vs).size===1)for(const t of x(this,Vs).values())return t.isEmpty();return!1},dC=function(t){for(const e of x(this,ui))e.unselect();x(this,ui).clear();for(const e of t)e.isEmpty()||(x(this,ui).add(e),e.select());V(this,me,Ma).call(this,{hasSelectedEditor:this.hasSelection})},Je(W1,"TRANSLATE_SMALL",1),Je(W1,"TRANSLATE_BIG",10);let Kg=W1;var ur,xu,dc,hv,bu,Lo,fv,Su,to,Th,jm,Eu,Td,Cc,m_,G4;const Ca=class Ca{constructor(t){W(this,Cc);W(this,ur,null);W(this,xu,!1);W(this,dc,null);W(this,hv,null);W(this,bu,null);W(this,Lo,null);W(this,fv,!1);W(this,Su,null);W(this,to,null);W(this,Th,null);W(this,jm,null);W(this,Eu,!1);G(this,to,t),G(this,Eu,t._uiManager.useNewAltTextFlow),x(Ca,Td)||G(Ca,Td,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Ca._l10n??(Ca._l10n=t)}async render(){const t=G(this,dc,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=G(this,hv,document.createElement("span"));t.append(e),x(this,Eu)?(t.classList.add("new"),t.setAttribute("data-l10n-id",x(Ca,Td).missing),e.setAttribute("data-l10n-id",x(Ca,Td)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=x(this,to)._uiManager._signal;t.addEventListener("contextmenu",Ll,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),x(this,to)._uiManager.editAltText(x(this,to)),x(this,Eu)&&x(this,to)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:x(this,Cc,m_)}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(G(this,fv,!0),s(r))},{signal:n}),await V(this,Cc,G4).call(this),t}finish(){x(this,dc)&&(x(this,dc).focus({focusVisible:x(this,fv)}),G(this,fv,!1))}isEmpty(){return x(this,Eu)?x(this,ur)===null:!x(this,ur)&&!x(this,xu)}hasData(){return x(this,Eu)?x(this,ur)!==null||!!x(this,Th):this.isEmpty()}get guessedText(){return x(this,Th)}async setGuessedText(t){x(this,ur)===null&&(G(this,Th,t),G(this,jm,await Ca._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),V(this,Cc,G4).call(this))}toggleAltTextBadge(t=!1){var e;if(!x(this,Eu)||x(this,ur)){(e=x(this,Su))==null||e.remove(),G(this,Su,null);return}if(!x(this,Su)){const n=G(this,Su,document.createElement("div"));n.className="noAltTextBadge",x(this,to).div.append(n)}x(this,Su).classList.toggle("hidden",!t)}serialize(t){let e=x(this,ur);return!t&&x(this,Th)===e&&(e=x(this,jm)),{altText:e,decorative:x(this,xu),guessedText:x(this,Th),textWithDisclaimer:x(this,jm)}}get data(){return{altText:x(this,ur),decorative:x(this,xu)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:r=!1}){n&&(G(this,Th,n),G(this,jm,s)),!(x(this,ur)===t&&x(this,xu)===e)&&(r||(G(this,ur,t),G(this,xu,e)),V(this,Cc,G4).call(this))}toggle(t=!1){x(this,dc)&&(!t&&x(this,Lo)&&(clearTimeout(x(this,Lo)),G(this,Lo,null)),x(this,dc).disabled=!t)}shown(){x(this,to)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:x(this,Cc,m_)}})}destroy(){var t,e;(t=x(this,dc))==null||t.remove(),G(this,dc,null),G(this,hv,null),G(this,bu,null),(e=x(this,Su))==null||e.remove(),G(this,Su,null)}};ur=new WeakMap,xu=new WeakMap,dc=new WeakMap,hv=new WeakMap,bu=new WeakMap,Lo=new WeakMap,fv=new WeakMap,Su=new WeakMap,to=new WeakMap,Th=new WeakMap,jm=new WeakMap,Eu=new WeakMap,Td=new WeakMap,Cc=new WeakSet,m_=function(){return x(this,ur)&&"added"||x(this,ur)===null&&this.guessedText&&"review"||"missing"},G4=async function(){var s,r,a;const t=x(this,dc);if(!t)return;if(x(this,Eu)){if(t.classList.toggle("done",!!x(this,ur)),t.setAttribute("data-l10n-id",x(Ca,Td)[x(this,Cc,m_)]),(s=x(this,hv))==null||s.setAttribute("data-l10n-id",x(Ca,Td)[`${x(this,Cc,m_)}-label`]),!x(this,ur)){(r=x(this,bu))==null||r.remove();return}}else{if(!x(this,ur)&&!x(this,xu)){t.classList.remove("done"),(a=x(this,bu))==null||a.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=x(this,bu);if(!e){G(this,bu,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${x(this,to).id}`;const l=100,u=x(this,to)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(x(this,Lo)),G(this,Lo,null)},{once:!0}),t.addEventListener("mouseenter",()=>{G(this,Lo,setTimeout(()=>{G(this,Lo,null),x(this,bu).classList.add("show"),x(this,to)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:u}),t.addEventListener("mouseleave",()=>{var f;x(this,Lo)&&(clearTimeout(x(this,Lo)),G(this,Lo,null)),(f=x(this,bu))==null||f.classList.remove("show")},{signal:u})}x(this,xu)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=x(this,ur)),e.parentNode||t.append(e);const n=x(this,to).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},W(Ca,Td,null),Je(Ca,"_l10n",null);let pE=Ca;var Xm,pc,qi,dv,qm,wr,Ym,Cd,EA,Wm,wd,MA,Km,Ch,Mu,pv,mv,Al,TA,SE,vn,pC,CA,mC,gC,cI,uI,vC,yC,_C,hI,AC,fI,dI,pI,xC,g_;const si=class si{constructor(t){W(this,vn);W(this,Xm,null);W(this,pc,null);W(this,qi,null);W(this,dv,!1);W(this,qm,!1);W(this,wr,null);W(this,Ym,null);W(this,Cd,null);W(this,EA,"");W(this,Wm,!1);W(this,wd,null);W(this,MA,!1);W(this,Km,!1);W(this,Ch,!1);W(this,Mu,null);W(this,pv,0);W(this,mv,0);W(this,Al,null);Je(this,"_editToolbar",null);Je(this,"_initialOptions",Object.create(null));Je(this,"_initialData",null);Je(this,"_isVisible",!0);Je(this,"_uiManager",null);Je(this,"_focusEventsAllowed",!0);W(this,TA,!1);W(this,SE,si._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,a];const[l,u]=this.parentDimensions;this.x=t.x/l,this.y=t.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=si.prototype._resizeWithKeyboard,e=Kg.TRANSLATE_SMALL,n=Kg.TRANSLATE_BIG;return Hn(this,"_resizerKeyboardManager",new zx([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],si.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Hn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new fet({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(si._l10n??(si._l10n=t),si._l10nResizer||(si._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),si._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);si._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Oi("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return x(this,TA)}set _isDraggable(t){var e;G(this,TA,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=x(this,SE)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):V(this,vn,g_).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(x(this,Wm)?G(this,Wm,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[r,a]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/r,this.y=(e+s)/a,this.fixAndSetPosition()}translate(t,e){V(this,vn,pC).call(this,this.parentDimensions,t,e)}translateInPage(t,e){x(this,wd)||G(this,wd,[this.x,this.y]),V(this,vn,pC).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){x(this,wd)||G(this,wd,[this.x,this.y]);const[n,s]=this.parentDimensions;if(this.x+=t/n,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[l,u]=this.getBaseTranslation();r+=l,a+=u,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!x(this,wd)&&(x(this,wd)[0]!==this.x||x(this,wd)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=si,s=n/t,r=n/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:s,y:r,width:a,height:l}=this;if(a*=e,l*=n,s*=e,r*=n,this._mustFixPosition)switch(t){case 0:s=Math.max(0,Math.min(e-a,s)),r=Math.max(0,Math.min(n-l,r));break;case 90:s=Math.max(0,Math.min(e-l,s)),r=Math.min(n,Math.max(a,r));break;case 180:s=Math.min(e,Math.max(a,s)),r=Math.min(n,Math.max(l,r));break;case 270:s=Math.min(e,Math.max(l,s)),r=Math.max(0,Math.min(n-a,r));break}this.x=s/=e,this.y=r/=n;const[u,f]=this.getBaseTranslation();s+=u,r+=f;const{style:m}=this.div;m.left=`${(100*s).toFixed(2)}%`,m.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return V(n=si,CA,mC).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return V(n=si,CA,mC).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,s]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,x(this,qm)||(this.div.style.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,s=n.endsWith("%"),r=!x(this,qm)&&e.endsWith("%");if(s&&r)return;const[a,l]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!x(this,qm)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=x(this,qi))==null||t.finish()}async addEditToolbar(){return this._editToolbar||x(this,Km)?this._editToolbar:(this._editToolbar=new sC(this),this.div.append(this._editToolbar.render()),x(this,qi)&&await this._editToolbar.addAltText(x(this,qi)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=x(this,qi))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){x(this,qi)||(pE.initialize(si._l10n),G(this,qi,new pE(this)),x(this,Xm)&&(x(this,qi).data=x(this,Xm),G(this,Xm,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=x(this,qi))==null?void 0:t.data}set altTextData(t){x(this,qi)&&(x(this,qi).data=t)}get guessedAltText(){var t;return(t=x(this,qi))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=x(this,qi))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=x(this,qi))==null?void 0:e.serialize(t)}hasAltText(){return!!x(this,qi)&&!x(this,qi).isEmpty()}hasAltTextData(){var t;return((t=x(this,qi))==null?void 0:t.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=x(this,dv)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),V(this,vn,AC).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),dE(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Na.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(G(this,Wm,!0),this._isDraggable){V(this,vn,hI).call(this,t);return}V(this,vn,_C).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){x(this,Mu)&&clearTimeout(x(this,Mu)),G(this,Mu,setTimeout(()=>{var t;G(this,Mu,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const s=this.parentScale,[r,a]=this.pageDimensions,[l,u]=this.pageTranslation,f=t/s,m=e/s,g=this.x*r,v=this.y*a,_=this.width*r,b=this.height*a;switch(n){case 0:return[g+f+l,a-v-m-b+u,g+f+_+l,a-v-m+u];case 90:return[g+m+l,a-v+f+u,g+m+b+l,a-v+f+_+u];case 180:return[g-f-_+l,a-v+m+u,g-f+l,a-v+m+b+u];case 270:return[g-m-b+l,a-v-f-_+u,g-m+l,a-v-f+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,r,a]=t,l=r-n,u=a-s;switch(this.rotation){case 0:return[n,e-a,l,u];case 90:return[n,e-s,u,l];case 180:return[r,e-s,l,u];case 270:return[r,e-a,u,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){G(this,Km,!0)}disableEditMode(){G(this,Km,!1)}isInEditMode(){return x(this,Km)}shouldGetKeyboardEvents(){return x(this,Ch)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){V(this,vn,AC).call(this)}rotate(t){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Oi("An editor must be serializable")}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});s.rotation=t.rotation,G(s,Xm,t.accessibilityData);const[r,a]=s.pageDimensions,[l,u,f,m]=s.getRectInCurrentCoords(t.rect,a);return s.x=l/r,s.y=u/a,s.width=f/r,s.height=m/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t;if((t=x(this,Cd))==null||t.abort(),G(this,Cd,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),x(this,Mu)&&(clearTimeout(x(this,Mu)),G(this,Mu,null)),V(this,vn,g_).call(this),this.removeEditToolbar(),x(this,Al)){for(const e of x(this,Al).values())clearTimeout(e);G(this,Al,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(V(this,vn,cI).call(this),x(this,wr).classList.remove("hidden"),dE(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),G(this,Ym,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=x(this,wr).children;if(!x(this,pc)){G(this,pc,Array.from(e));const a=V(this,vn,fI).bind(this),l=V(this,vn,dI).bind(this),u=this._uiManager._signal;for(const f of x(this,pc)){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",a,{signal:u}),f.addEventListener("blur",l,{signal:u}),f.addEventListener("focus",V(this,vn,pI).bind(this,m),{signal:u}),f.setAttribute("data-l10n-id",si._l10nResizer[m])}}const n=x(this,pc)[0];let s=0;for(const a of e){if(a===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(x(this,pc).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)x(this,wr).append(x(this,wr).firstChild);else if(r>s)for(let l=0;l<r-s;l++)x(this,wr).firstChild.before(x(this,wr).lastChild);let a=0;for(const l of e){const f=x(this,pc)[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",si._l10nResizer[f])}}V(this,vn,xC).call(this,0),G(this,Ch,!0),x(this,wr).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){x(this,Ch)&&V(this,vn,yC).call(this,x(this,EA),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){V(this,vn,g_).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=x(this,qi))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,s,r;(t=x(this,wr))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=x(this,qi))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return x(this,MA)}set isEditing(t){G(this,MA,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){G(this,qm,!0);const n=t/e,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){x(this,Al)||G(this,Al,new Map);const{action:n}=t;let s=x(this,Al).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),x(this,Al).delete(n),x(this,Al).size===0&&G(this,Al,null)},si._telemetryTimeout),x(this,Al).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),G(this,dv,!1)}disable(){this.div&&(this.div.tabIndex=-1),G(this,dv,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Xm=new WeakMap,pc=new WeakMap,qi=new WeakMap,dv=new WeakMap,qm=new WeakMap,wr=new WeakMap,Ym=new WeakMap,Cd=new WeakMap,EA=new WeakMap,Wm=new WeakMap,wd=new WeakMap,MA=new WeakMap,Km=new WeakMap,Ch=new WeakMap,Mu=new WeakMap,pv=new WeakMap,mv=new WeakMap,Al=new WeakMap,TA=new WeakMap,SE=new WeakMap,vn=new WeakSet,pC=function([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this.fixAndSetPosition()},CA=new WeakSet,mC=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},gC=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},cI=function(){if(x(this,wr))return;G(this,wr,document.createElement("div")),x(this,wr).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");x(this,wr).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",V(this,vn,uI).bind(this,n),{signal:e}),s.addEventListener("contextmenu",Ll,{signal:e}),s.tabIndex=-1}this.div.prepend(x(this,wr))},uI=function(t,e){var b;e.preventDefault();const{isMac:n}=Na.platform;if(e.button!==0||e.ctrlKey&&n)return;(b=x(this,qi))==null||b.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",V(this,vn,yC).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",Ll,{signal:a});const l=this.x,u=this.y,f=this.width,m=this.height,g=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const _=()=>{var T;r.abort(),this.parent.togglePointerEvents(!0),(T=x(this,qi))==null||T.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=g,this.div.style.cursor=v,V(this,vn,vC).call(this,l,u,f,m)};window.addEventListener("pointerup",_,{signal:a}),window.addEventListener("blur",_,{signal:a})},vC=function(t,e,n,s){const r=this.x,a=this.y,l=this.width,u=this.height;r===t&&a===e&&l===n&&u===s||this.addCommands({cmd:()=>{this.width=l,this.height=u,this.x=r,this.y=a;const[f,m]=this.parentDimensions;this.setDims(f*l,m*u),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=s,this.x=t,this.y=e;const[f,m]=this.parentDimensions;this.setDims(f*n,m*s),this.fixAndSetPosition()},mustExec:!0})},yC=function(t,e){const[n,s]=this.parentDimensions,r=this.x,a=this.y,l=this.width,u=this.height,f=si.MIN_SIZE/n,m=si.MIN_SIZE/s,g=tt=>Math.round(tt*1e4)/1e4,v=V(this,vn,gC).call(this,this.rotation),_=(tt,nt)=>[v[0]*tt+v[2]*nt,v[1]*tt+v[3]*nt],b=V(this,vn,gC).call(this,360-this.rotation),T=(tt,nt)=>[b[0]*tt+b[2]*nt,b[1]*tt+b[3]*nt];let E,S,w=!1,D=!1;switch(t){case"topLeft":w=!0,E=(tt,nt)=>[0,0],S=(tt,nt)=>[tt,nt];break;case"topMiddle":E=(tt,nt)=>[tt/2,0],S=(tt,nt)=>[tt/2,nt];break;case"topRight":w=!0,E=(tt,nt)=>[tt,0],S=(tt,nt)=>[0,nt];break;case"middleRight":D=!0,E=(tt,nt)=>[tt,nt/2],S=(tt,nt)=>[0,nt/2];break;case"bottomRight":w=!0,E=(tt,nt)=>[tt,nt],S=(tt,nt)=>[0,0];break;case"bottomMiddle":E=(tt,nt)=>[tt/2,nt],S=(tt,nt)=>[tt/2,0];break;case"bottomLeft":w=!0,E=(tt,nt)=>[0,nt],S=(tt,nt)=>[tt,0];break;case"middleLeft":D=!0,E=(tt,nt)=>[0,nt/2],S=(tt,nt)=>[tt,nt/2];break}const B=E(l,u),N=S(l,u);let I=_(...N);const F=g(r+I[0]),z=g(a+I[1]);let U=1,P=1,[X,lt]=this.screenToPageTranslation(e.movementX,e.movementY);if([X,lt]=T(X/n,lt/s),w){const tt=Math.hypot(l,u);U=P=Math.max(Math.min(Math.hypot(N[0]-B[0]-X,N[1]-B[1]-lt)/tt,1/l,1/u),f/l,m/u)}else D?U=Math.max(f,Math.min(1,Math.abs(N[0]-B[0]-X)))/l:P=Math.max(m,Math.min(1,Math.abs(N[1]-B[1]-lt)))/u;const it=g(l*U),ut=g(u*P);I=_(...S(it,ut));const dt=F-I[0],j=z-I[1];this.width=it,this.height=ut,this.x=dt,this.y=j,this.setDims(n*it,s*ut),this.fixAndSetPosition()},_C=function(t){const{isMac:e}=Na.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},hI=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();const n=new AbortController,s=this._uiManager.combinedSignal(n);if(e){this.div.classList.add("moving"),G(this,pv,t.clientX),G(this,mv,t.clientY);const a=l=>{const{clientX:u,clientY:f}=l,[m,g]=this.screenToPageTranslation(u-x(this,pv),f-x(this,mv));G(this,pv,u),G(this,mv,f),this._uiManager.dragSelectedEditors(m,g)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:s})}const r=()=>{n.abort(),e&&this.div.classList.remove("moving"),G(this,Wm,!1),this._uiManager.endDragSession()||V(this,vn,_C).call(this,t)};window.addEventListener("pointerup",r,{signal:s}),window.addEventListener("blur",r,{signal:s})},AC=function(){if(x(this,Cd)||!this.div)return;G(this,Cd,new AbortController);const t=this._uiManager.combinedSignal(x(this,Cd));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},fI=function(t){si._resizerKeyboardManager.exec(this,t)},dI=function(t){var e;x(this,Ch)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==x(this,wr)&&V(this,vn,g_).call(this)},pI=function(t){G(this,EA,x(this,Ch)?t:"")},xC=function(t){if(x(this,pc))for(const e of x(this,pc))e.tabIndex=t},g_=function(){if(G(this,Ch,!1),V(this,vn,xC).call(this,-1),x(this,Ym)){const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=x(this,Ym);V(this,vn,vC).call(this,t,e,n,s),G(this,Ym,null)}},W(si,CA),Je(si,"_l10n",null),Je(si,"_l10nResizer",null),Je(si,"_borderLineWidth",-1),Je(si,"_colorManager",new oC),Je(si,"_zIndex",1),Je(si,"_telemetryTimeout",1e3);let di=si;class fet extends di{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const O9=3285377520,vl=4294901760,gu=65535;class mI{constructor(t){this.h1=t?t&4294967295:O9,this.h2=t?t&4294967295:O9}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let T=0,E=t.length;T<E;T++){const S=t.charCodeAt(T);S<=255?e[n++]=S:(e[n++]=S>>>8,e[n++]=S&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,a=new Uint32Array(e.buffer,0,s);let l=0,u=0,f=this.h1,m=this.h2;const g=3432918353,v=461845907,_=g&gu,b=v&gu;for(let T=0;T<s;T++)T&1?(l=a[T],l=l*g&vl|l*_&gu,l=l<<15|l>>>17,l=l*v&vl|l*b&gu,f^=l,f=f<<13|f>>>19,f=f*5+3864292196):(u=a[T],u=u*g&vl|u*_&gu,u=u<<15|u>>>17,u=u*v&vl|u*b&gu,m^=u,m=m<<13|m>>>19,m=m*5+3864292196);switch(l=0,r){case 3:l^=e[s*4+2]<<16;case 2:l^=e[s*4+1]<<8;case 1:l^=e[s*4],l=l*g&vl|l*_&gu,l=l<<15|l>>>17,l=l*v&vl|l*b&gu,s&1?f^=l:m^=l}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&vl|t*36045&gu,e=e*4283543511&vl|((e<<16|t>>>16)*2950163797&vl)>>>16,t^=e>>>1,t=t*444984403&vl|t*60499&gu,e=e*3301882366&vl|((e<<16|t>>>16)*3120437893&vl)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const bC=Object.freeze({map:null,hash:"",transfer:void 0});var Jm,Zm,hr,EE,gI;class L7{constructor(){W(this,EE);W(this,Jm,!1);W(this,Zm,null);W(this,hr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=x(this,hr).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return x(this,hr).get(t)}remove(t){if(x(this,hr).delete(t),x(this,hr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of x(this,hr).values())if(e instanceof di)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=x(this,hr).get(t);let s=!1;if(n!==void 0)for(const[r,a]of Object.entries(e))n[r]!==a&&(s=!0,n[r]=a);else s=!0,x(this,hr).set(t,e);s&&V(this,EE,gI).call(this),e instanceof di&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return x(this,hr).has(t)}getAll(){return x(this,hr).size>0?E7(x(this,hr)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return x(this,hr).size}resetModified(){x(this,Jm)&&(G(this,Jm,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new vI(this)}get serializable(){if(x(this,hr).size===0)return bC;const t=new Map,e=new mI,n=[],s=Object.create(null);let r=!1;for(const[a,l]of x(this,hr)){const u=l instanceof di?l.serialize(!1,s):l;u&&(t.set(a,u),e.update(`${a}:${JSON.stringify(u)}`),r||(r=!!u.bitmap))}if(r)for(const a of t.values())a.bitmap&&n.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:bC}get editorStats(){let t=null;const e=new Map;for(const n of x(this,hr).values()){if(!(n instanceof di))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:r}=s;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const a=t[r]||(t[r]=new Map);for(const[l,u]of Object.entries(s)){if(l==="type")continue;let f=a.get(l);f||(f=new Map,a.set(l,f));const m=f.get(u)??0;f.set(u,m+1)}}for(const[n,s]of e)t[n]=s.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){G(this,Zm,null)}get modifiedIds(){if(x(this,Zm))return x(this,Zm);const t=[];for(const e of x(this,hr).values())!(e instanceof di)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return G(this,Zm,{ids:new Set(t),hash:t.join(",")})}}Jm=new WeakMap,Zm=new WeakMap,hr=new WeakMap,EE=new WeakSet,gI=function(){x(this,Jm)||(G(this,Jm,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var wA;class vI extends L7{constructor(e){super();W(this,wA);const{map:n,hash:s,transfer:r}=e.serializable,a=structuredClone(n,r?{transfer:r}:null);G(this,wA,{map:a,hash:s,transfer:r})}get print(){Oi("Should not call PrintAnnotationStorage.print")}get serializable(){return x(this,wA)}get modifiedIds(){return Hn(this,"modifiedIds",{ids:new Set,hash:""})}}wA=new WeakMap;var gv;class det{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){W(this,gv,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),x(this,gv).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||x(this,gv).has(t.loadedName))){if(Xs(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:r}=t,a=new FontFace(n,s,r);this.addNativeFontFace(a);try{await a.load(),x(this,gv).add(n),e==null||e(t)}catch{An(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Oi("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw An(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Hn(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(sa||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Hn(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Xs(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Hn(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(B,N){return B.charCodeAt(N)<<24|B.charCodeAt(N+1)<<16|B.charCodeAt(N+2)<<8|B.charCodeAt(N+3)&255}function s(B,N,I,F){const z=B.substring(0,N),U=B.substring(N+I);return z+F+U}let r,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const u=l.getContext("2d");let f=0;function m(B,N){if(++f>30){An("Load test font never loaded."),N();return}if(u.font="30px "+B,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(m.bind(null,B,N))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,g.length,g);const b=16,T=1482184792;let E=n(v,b);for(r=0,a=g.length-3;r<a;r+=4)E=E-T+n(g,r)|0;r<g.length&&(E=E-T+n(g+"XXX",r)|0),v=s(v,b,4,Ktt(E));const S=`url(data:font/opentype;base64,${btoa(v)});`,w=`@font-face {font-family:"${g}";src:${S}}`;this.insertRule(w);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const B of[t.loadedName,g]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=B,D.append(N)}this._document.body.append(D),m(g,()=>{D.remove(),e.complete()})}}gv=new WeakMap;class pet{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${net(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(r){An(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(r,a){};const s=[];for(let r=0,a=n.length;r<a;)switch(n[r++]){case gh.BEZIER_CURVE_TO:{const[l,u,f,m,g,v]=n.slice(r,r+6);s.push(_=>_.bezierCurveTo(l,u,f,m,g,v)),r+=6}break;case gh.MOVE_TO:{const[l,u]=n.slice(r,r+2);s.push(f=>f.moveTo(l,u)),r+=2}break;case gh.LINE_TO:{const[l,u]=n.slice(r,r+2);s.push(f=>f.lineTo(l,u)),r+=2}break;case gh.QUADRATIC_CURVE_TO:{const[l,u,f,m]=n.slice(r,r+4);s.push(g=>g.quadraticCurveTo(l,u,f,m)),r+=4}break;case gh.RESTORE:s.push(l=>l.restore());break;case gh.SAVE:s.push(l=>l.save());break;case gh.SCALE:Xs(s.length===2,"Scale command is only valid at the third position.");break;case gh.TRANSFORM:{const[l,u,f,m,g,v]=n.slice(r,r+6);s.push(_=>_.transform(l,u,f,m,g,v)),r+=6}break;case gh.TRANSLATE:{const[l,u]=n.slice(r,r+2);s.push(f=>f.translate(l,u)),r+=2}break}return this.compiledGlyphs[e]=function(a,l){s[0](a),s[1](a),a.scale(l,-l);for(let u=2,f=s.length;u<f;u++)s[u](a)}}}var RA;class yI{constructor({enableHWA:t=!1}){W(this,RA,!1);G(this,RA,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!x(this,RA)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Oi("Abstract method `_createCanvas` called.")}}RA=new WeakMap;class met extends yI{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class _I{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Oi("Abstract method `_fetch` called.")}}class AI extends _I{async _fetch(t){const e=await HM(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):FM(e)}}class xI{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,r){return"none"}destroy(t=!1){}}var $m,tg,Tu,wh,Zr,ME,eg,xe,Kr,P1,F1,k4,H1,bI,SC,z1,v_,y_,EC,__;class get extends xI{constructor({docId:e,ownerDocument:n=globalThis.document}){super();W(this,xe);W(this,$m);W(this,tg);W(this,Tu);W(this,wh);W(this,Zr);W(this,ME);W(this,eg,0);G(this,wh,e),G(this,Zr,n)}addFilter(e){if(!e)return"none";let n=x(this,xe,Kr).get(e);if(n)return n;const[s,r,a]=V(this,xe,k4).call(this,e),l=e.length===1?s:`${s}${r}${a}`;if(n=x(this,xe,Kr).get(l),n)return x(this,xe,Kr).set(e,n),n;const u=`g_${x(this,wh)}_transfer_map_${Sa(this,eg)._++}`,f=V(this,xe,H1).call(this,u);x(this,xe,Kr).set(e,f),x(this,xe,Kr).set(l,f);const m=V(this,xe,z1).call(this,u);return V(this,xe,y_).call(this,s,r,a,m),f}addHCMFilter(e,n){var b;const s=`${e}-${n}`,r="base";let a=x(this,xe,P1).get(r);if((a==null?void 0:a.key)===s||(a?((b=a.filter)==null||b.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},x(this,xe,P1).set(r,a)),!e||!n))return a.url;const l=V(this,xe,__).call(this,e);e=Le.makeHexColor(...l);const u=V(this,xe,__).call(this,n);if(n=Le.makeHexColor(...u),x(this,xe,F1).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return a.url;const f=new Array(256);for(let T=0;T<=255;T++){const E=T/255;f[T]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const m=f.join(","),g=`g_${x(this,wh)}_hcm_filter`,v=a.filter=V(this,xe,z1).call(this,g);V(this,xe,y_).call(this,m,m,m,v),V(this,xe,SC).call(this,v);const _=(T,E)=>{const S=l[T]/255,w=u[T]/255,D=new Array(E+1);for(let B=0;B<=E;B++)D[B]=S+B/E*(w-S);return D.join(",")};return V(this,xe,y_).call(this,_(0,5),_(1,5),_(2,5),v),a.url=V(this,xe,H1).call(this,g),a.url}addAlphaFilter(e){let n=x(this,xe,Kr).get(e);if(n)return n;const[s]=V(this,xe,k4).call(this,[e]),r=`alpha_${s}`;if(n=x(this,xe,Kr).get(r),n)return x(this,xe,Kr).set(e,n),n;const a=`g_${x(this,wh)}_alpha_map_${Sa(this,eg)._++}`,l=V(this,xe,H1).call(this,a);x(this,xe,Kr).set(e,l),x(this,xe,Kr).set(r,l);const u=V(this,xe,z1).call(this,a);return V(this,xe,EC).call(this,s,u),l}addLuminosityFilter(e){let n=x(this,xe,Kr).get(e||"luminosity");if(n)return n;let s,r;if(e?([s]=V(this,xe,k4).call(this,[e]),r=`luminosity_${s}`):r="luminosity",n=x(this,xe,Kr).get(r),n)return x(this,xe,Kr).set(e,n),n;const a=`g_${x(this,wh)}_luminosity_map_${Sa(this,eg)._++}`,l=V(this,xe,H1).call(this,a);x(this,xe,Kr).set(e,l),x(this,xe,Kr).set(r,l);const u=V(this,xe,z1).call(this,a);return V(this,xe,bI).call(this,u),e&&V(this,xe,EC).call(this,s,u),l}addHighlightHCMFilter(e,n,s,r,a){var w;const l=`${n}-${s}-${r}-${a}`;let u=x(this,xe,P1).get(e);if((u==null?void 0:u.key)===l||(u?((w=u.filter)==null||w.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},x(this,xe,P1).set(e,u)),!n||!s))return u.url;const[f,m]=[n,s].map(V(this,xe,__).bind(this));let g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[_,b]=[r,a].map(V(this,xe,__).bind(this));v<g&&([g,v,_,b]=[v,g,b,_]),x(this,xe,F1).style.color="";const T=(D,B,N)=>{const I=new Array(256),F=(v-g)/N,z=D/255,U=(B-D)/(255*N);let P=0;for(let X=0;X<=N;X++){const lt=Math.round(g+X*F),it=z+X*U;for(let ut=P;ut<=lt;ut++)I[ut]=it;P=lt+1}for(let X=P;X<256;X++)I[X]=I[P-1];return I.join(",")},E=`g_${x(this,wh)}_hcm_${e}_filter`,S=u.filter=V(this,xe,z1).call(this,E);return V(this,xe,SC).call(this,S),V(this,xe,y_).call(this,T(_[0],b[0],5),T(_[1],b[1],5),T(_[2],b[2],5),S),u.url=V(this,xe,H1).call(this,E),u.url}destroy(e=!1){e&&x(this,xe,P1).size!==0||(x(this,Tu)&&(x(this,Tu).parentNode.parentNode.remove(),G(this,Tu,null)),x(this,tg)&&(x(this,tg).clear(),G(this,tg,null)),G(this,eg,0))}}$m=new WeakMap,tg=new WeakMap,Tu=new WeakMap,wh=new WeakMap,Zr=new WeakMap,ME=new WeakMap,eg=new WeakMap,xe=new WeakSet,Kr=function(){return x(this,tg)||G(this,tg,new Map)},P1=function(){return x(this,ME)||G(this,ME,new Map)},F1=function(){if(!x(this,Tu)){const e=x(this,Zr).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=x(this,Zr).createElementNS(yh,"svg");s.setAttribute("width",0),s.setAttribute("height",0),G(this,Tu,x(this,Zr).createElementNS(yh,"defs")),e.append(s),s.append(x(this,Tu)),x(this,Zr).body.append(e)}return x(this,Tu)},k4=function(e){if(e.length===1){const f=e[0],m=new Array(256);for(let v=0;v<256;v++)m[v]=f[v]/255;const g=m.join(",");return[g,g,g]}const[n,s,r]=e,a=new Array(256),l=new Array(256),u=new Array(256);for(let f=0;f<256;f++)a[f]=n[f]/255,l[f]=s[f]/255,u[f]=r[f]/255;return[a.join(","),l.join(","),u.join(",")]},H1=function(e){if(x(this,$m)===void 0){G(this,$m,"");const n=x(this,Zr).URL;n!==x(this,Zr).baseURI&&(zM(n)?An('#createUrl: ignore "data:"-URL for performance reasons.'):G(this,$m,n.split("#",1)[0]))}return`url(${x(this,$m)}#${e})`},bI=function(e){const n=x(this,Zr).createElementNS(yh,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},SC=function(e){const n=x(this,Zr).createElementNS(yh,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},z1=function(e){const n=x(this,Zr).createElementNS(yh,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),x(this,xe,F1).append(n),n},v_=function(e,n,s){const r=x(this,Zr).createElementNS(yh,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},y_=function(e,n,s,r){const a=x(this,Zr).createElementNS(yh,"feComponentTransfer");r.append(a),V(this,xe,v_).call(this,a,"feFuncR",e),V(this,xe,v_).call(this,a,"feFuncG",n),V(this,xe,v_).call(this,a,"feFuncB",s)},EC=function(e,n){const s=x(this,Zr).createElementNS(yh,"feComponentTransfer");n.append(s),V(this,xe,v_).call(this,s,"feFuncA",e)},__=function(e){return x(this,xe,F1).style.color=e,R7(getComputedStyle(x(this,xe,F1)).getPropertyValue("color"))};class SI{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Oi("Abstract method `_fetch` called.")}}class EI extends SI{async _fetch(t){const e=await HM(t,"arraybuffer");return new Uint8Array(e)}}if(sa){var MC=Promise.withResolvers(),k_=null;(async()=>{const t=await p4(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await p4(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await p4(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await p4(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,a;return new Map(Object.entries({fs:t,http:e,https:n,url:s,canvas:r,path2d:a}))})().then(t=>{k_=t,MC.resolve()},t=>{An(`loadPackages: ${t}`),k_=new Map,MC.resolve()})}class sp{static get promise(){return MC.promise}static get(t){return k_==null?void 0:k_.get(t)}}async function MI(i){const e=await sp.get("fs").promises.readFile(i);return new Uint8Array(e)}class vet extends xI{}class yet extends yI{_createCanvas(t,e){return sp.get("canvas").createCanvas(t,e)}}class _et extends _I{async _fetch(t){return MI(t)}}class Aet extends SI{async _fetch(t){return MI(t)}}const Ra={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function TC(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),i.clip(s)}class D7{getPattern(){Oi("Abstract method `getPattern` called.")}}class xet extends D7{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let r;if(s===Ra.STROKE||s===Ra.FILL){const a=e.current.getClippedPathBoundingBox(s,Wi(t))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,u=Math.ceil(a[3]-a[1])||1,f=e.cachedCanvases.getCanvas("pattern",l,u),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-a[0],-a[1]),n=Le.transform(n,[1,0,0,1,a[0],a[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),TC(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),r=t.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(n);r.setTransform(g)}else TC(t,this._bbox),r=this._createGradient(t);return r}}function o5(i,t,e,n,s,r,a,l){const u=t.coords,f=t.colors,m=i.data,g=i.width*4;let v;u[e+1]>u[n+1]&&(v=e,e=n,n=v,v=r,r=a,a=v),u[n+1]>u[s+1]&&(v=n,n=s,s=v,v=a,a=l,l=v),u[e+1]>u[n+1]&&(v=e,e=n,n=v,v=r,r=a,a=v);const _=(u[e]+t.offsetX)*t.scaleX,b=(u[e+1]+t.offsetY)*t.scaleY,T=(u[n]+t.offsetX)*t.scaleX,E=(u[n+1]+t.offsetY)*t.scaleY,S=(u[s]+t.offsetX)*t.scaleX,w=(u[s+1]+t.offsetY)*t.scaleY;if(b>=w)return;const D=f[r],B=f[r+1],N=f[r+2],I=f[a],F=f[a+1],z=f[a+2],U=f[l],P=f[l+1],X=f[l+2],lt=Math.round(b),it=Math.round(w);let ut,dt,j,tt,nt,_t,J,ot;for(let xt=lt;xt<=it;xt++){if(xt<E){const Ut=xt<b?0:(b-xt)/(b-E);ut=_-(_-T)*Ut,dt=D-(D-I)*Ut,j=B-(B-F)*Ut,tt=N-(N-z)*Ut}else{let Ut;xt>w?Ut=1:E===w?Ut=0:Ut=(E-xt)/(E-w),ut=T-(T-S)*Ut,dt=I-(I-U)*Ut,j=F-(F-P)*Ut,tt=z-(z-X)*Ut}let Et;xt<b?Et=0:xt>w?Et=1:Et=(b-xt)/(b-w),nt=_-(_-S)*Et,_t=D-(D-U)*Et,J=B-(B-P)*Et,ot=N-(N-X)*Et;const ct=Math.round(Math.min(ut,nt)),wt=Math.round(Math.max(ut,nt));let Bt=g*xt+ct*4;for(let Ut=ct;Ut<=wt;Ut++)Et=(ut-Ut)/(ut-nt),Et<0?Et=0:Et>1&&(Et=1),m[Bt++]=dt-(dt-_t)*Et|0,m[Bt++]=j-(j-J)*Et|0,m[Bt++]=tt-(tt-ot)*Et|0,m[Bt++]=255}}function bet(i,t,e){const n=t.coords,s=t.colors;let r,a;switch(t.type){case"lattice":const l=t.verticesPerRow,u=Math.floor(n.length/l)-1,f=l-1;for(r=0;r<u;r++){let m=r*l;for(let g=0;g<f;g++,m++)o5(i,e,n[m],n[m+1],n[m+l],s[m],s[m+1],s[m+l]),o5(i,e,n[m+l+1],n[m+1],n[m+l],s[m+l+1],s[m+1],s[m+l])}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)o5(i,e,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class Eet extends D7{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const l=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-l,m=Math.ceil(this._bounds[3])-u,g=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),_=f/g,b=m/v,T={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-u,scaleX:1/_,scaleY:1/b},E=g+2*2,S=v+2*2,w=n.getCanvas("mesh",E,S),D=w.context,B=D.createImageData(g,v);if(e){const I=B.data;for(let F=0,z=I.length;F<z;F+=4)I[F]=e[0],I[F+1]=e[1],I[F+2]=e[2],I[F+3]=255}for(const I of this._figures)bet(B,I,T);return D.putImageData(B,2,2),{canvas:w.canvas,offsetX:l-2*_,offsetY:u-2*b,scaleX:_,scaleY:b}}getPattern(t,e,n,s){TC(t,this._bbox);let r;if(s===Ra.SHADING)r=Le.singularValueDecompose2dScale(Wi(t));else if(r=Le.singularValueDecompose2dScale(e.baseTransform),this.matrix){const l=Le.singularValueDecompose2dScale(this.matrix);r=[r[0]*l[0],r[1]*l[1]]}const a=this._createMeshCanvas(r,s===Ra.SHADING?null:this._background,e.cachedCanvases);return s!==Ra.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class Met extends D7{getPattern(){return"hotpink"}}function Tet(i){switch(i[0]){case"RadialAxial":return new xet(i);case"Mesh":return new Eet(i);case"Dummy":return new Met}throw new Error(`Unknown IR type: ${i[0]}`)}const N9={COLORED:1,UNCOLORED:2},TE=class TE{constructor(t,e,n,s,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:s,tilingType:r,color:a,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:f}=this;u=Math.abs(u),f=Math.abs(f),UM("TilingType: "+r);const m=e[0],g=e[1],v=e[2],_=e[3],b=v-m,T=_-g,E=Le.singularValueDecompose2dScale(this.matrix),S=Le.singularValueDecompose2dScale(this.baseTransform),w=E[0]*S[0],D=E[1]*S[1];let B=b,N=T,I=!1,F=!1;const z=Math.ceil(u*w),U=Math.ceil(f*D),P=Math.ceil(b*w),X=Math.ceil(T*D);z>=P?B=u:I=!0,U>=X?N=f:F=!0;const lt=this.getSizeAndScale(B,this.ctx.canvas.width,w),it=this.getSizeAndScale(N,this.ctx.canvas.height,D),ut=t.cachedCanvases.getCanvas("pattern",lt.size,it.size),dt=ut.context,j=l.createCanvasGraphics(dt);if(j.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(j,s,a),dt.translate(-lt.scale*m,-it.scale*g),j.transform(lt.scale,0,0,it.scale,0,0),dt.save(),this.clipBbox(j,m,g,v,_),j.baseTransform=Wi(j.ctx),j.executeOperatorList(n),j.endDrawing(),dt.restore(),I||F){const tt=ut.canvas;I&&(B=u),F&&(N=f);const nt=this.getSizeAndScale(B,this.ctx.canvas.width,w),_t=this.getSizeAndScale(N,this.ctx.canvas.height,D),J=nt.size,ot=_t.size,xt=t.cachedCanvases.getCanvas("pattern-workaround",J,ot),Et=xt.context,ct=I?Math.floor(b/u):0,wt=F?Math.floor(T/f):0;for(let Bt=0;Bt<=ct;Bt++)for(let Ut=0;Ut<=wt;Ut++)Et.drawImage(tt,J*Bt,ot*Ut,J,ot,0,0,J,ot);return{canvas:xt.canvas,scaleX:nt.scale,scaleY:_t.scale,offsetX:m,offsetY:g}}return{canvas:ut.canvas,scaleX:lt.scale,scaleY:it.scale,offsetX:m,offsetY:g}}getSizeAndScale(t,e,n){const s=Math.max(TE.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=s?r=s:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,s,r){const a=s-e,l=r-n;t.ctx.rect(e,n,a,l),t.current.updateRectMinMax(Wi(t.ctx),[e,n,s,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,r=t.current;switch(e){case N9.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case N9.UNCOLORED:const l=Le.makeHexColor(n[0],n[1],n[2]);s.fillStyle=l,s.strokeStyle=l,r.fillColor=l,r.strokeColor=l;break;default:throw new Wtt(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,s){let r=n;s!==Ra.SHADING&&(r=Le.transform(r,e.baseTransform),this.matrix&&(r=Le.transform(r,this.matrix)));const a=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const u=t.createPattern(a.canvas,"repeat");return u.setTransform(l),u}};Je(TE,"MAX_PATTERN_SIZE",3e3);let CC=TE;function Cet({src:i,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const l=Na.isLittleEndian?4278190080:255,[u,f]=a?[r,l]:[l,r],m=n>>3,g=n&7,v=i.length;e=new Uint32Array(e.buffer);let _=0;for(let b=0;b<s;b++){for(const E=t+m;t<E;t++){const S=t<v?i[t]:255;e[_++]=S&128?f:u,e[_++]=S&64?f:u,e[_++]=S&32?f:u,e[_++]=S&16?f:u,e[_++]=S&8?f:u,e[_++]=S&4?f:u,e[_++]=S&2?f:u,e[_++]=S&1?f:u}if(g===0)continue;const T=t<v?i[t++]:255;for(let E=0;E<g;E++)e[_++]=T&1<<7-E?f:u}return{srcPos:t,destPos:_}}const I9=16,U9=100,wet=15,P9=10,F9=1e3,io=16;function Ret(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},i.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},i.transform=function(n,s,r,a,l,u){t.transform(n,s,r,a,l,u),this.__originalTransform(n,s,r,a,l,u)},i.setTransform=function(n,s,r,a,l,u){t.setTransform(n,s,r,a,l,u),this.__originalSetTransform(n,s,r,a,l,u)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){t.rotate(n),this.__originalRotate(n)},i.clip=function(n){t.clip(n),this.__originalClip(n)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,s,r,a,l){t.bezierCurveTo(e,n,s,r,a,l),this.__originalBezierCurveTo(e,n,s,r,a,l)},i.rect=function(e,n,s,r){t.rect(e,n,s,r),this.__originalRect(e,n,s,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Let{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function y4(i,t,e,n,s,r,a,l,u,f){const[m,g,v,_,b,T]=Wi(i);if(g===0&&v===0){const w=a*m+b,D=Math.round(w),B=l*_+T,N=Math.round(B),I=(a+u)*m+b,F=Math.abs(Math.round(I)-D)||1,z=(l+f)*_+T,U=Math.abs(Math.round(z)-N)||1;return i.setTransform(Math.sign(m),0,0,Math.sign(_),D,N),i.drawImage(t,e,n,s,r,0,0,F,U),i.setTransform(m,g,v,_,b,T),[F,U]}if(m===0&&_===0){const w=l*v+b,D=Math.round(w),B=a*g+T,N=Math.round(B),I=(l+f)*v+b,F=Math.abs(Math.round(I)-D)||1,z=(a+u)*g+T,U=Math.abs(Math.round(z)-N)||1;return i.setTransform(0,Math.sign(g),Math.sign(v),0,D,N),i.drawImage(t,e,n,s,r,0,0,U,F),i.setTransform(m,g,v,_,b,T),[U,F]}i.drawImage(t,e,n,s,r,a,l,u,f);const E=Math.hypot(m,g),S=Math.hypot(v,_);return[E*u,S*f]}function Det(i){const{width:t,height:e}=i;if(t>F9||e>F9)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let a=new Uint8Array(r*(e+1)),l,u,f;const m=t+7&-8;let g=new Uint8Array(m*e),v=0;for(const S of i.data){let w=128;for(;w>0;)g[v++]=S&w?0:255,w>>=1}let _=0;for(v=0,g[v]!==0&&(a[0]=1,++_),u=1;u<t;u++)g[v]!==g[v+1]&&(a[u]=g[v]?2:1,++_),v++;for(g[v]!==0&&(a[u]=2,++_),l=1;l<e;l++){v=l*m,f=l*r,g[v-m]!==g[v]&&(a[f]=g[v]?1:8,++_);let S=(g[v]?4:0)+(g[v-m]?8:0);for(u=1;u<t;u++)S=(S>>2)+(g[v+1]?4:0)+(g[v-m+1]?8:0),s[S]&&(a[f+u]=s[S],++_),v++;if(g[v-m]!==g[v]&&(a[f+u]=g[v]?2:4,++_),_>n)return null}for(v=m*(e-1),f=l*r,g[v]!==0&&(a[f]=8,++_),u=1;u<t;u++)g[v]!==g[v+1]&&(a[f+u]=g[v]?4:8,++_),v++;if(g[v]!==0&&(a[f+u]=4,++_),_>n)return null;const b=new Int32Array([0,r,-1,0,-r,0,0,0,1]),T=new Path2D;for(l=0;_&&l<=e;l++){let S=l*r;const w=S+t;for(;S<w&&!a[S];)S++;if(S===w)continue;T.moveTo(S%r,l);const D=S;let B=a[S];do{const N=b[B];do S+=N;while(!a[S]);const I=a[S];I!==5&&I!==10?(B=I,a[S]=0):(B=I&51*B>>4,a[S]&=B>>2|B<<2),T.lineTo(S%r,S/r|0),a[S]||--_}while(D!==S);--l}return g=null,a=null,function(S){S.save(),S.scale(1/t,-1/e),S.translate(0,-e),S.fill(T),S.beginPath(),S.restore()}}class H9{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=kN,this.textMatrixScale=1,this.fontMatrix=$5,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Wr.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=Le.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=Le.applyTransform(e,t),s=Le.applyTransform(e.slice(2),t),r=Le.applyTransform([e[0],e[3]],t),a=Le.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],s[0],r[0],a[0]),this.minY=Math.min(this.minY,n[1],s[1],r[1],a[1]),this.maxX=Math.max(this.maxX,n[0],s[0],r[0],a[0]),this.maxY=Math.max(this.maxY,n[1],s[1],r[1],a[1])}updateScalingPathMinMax(t,e){Le.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,s,r,a,l,u,f,m){const g=Le.bezierBoundingBox(e,n,s,r,a,l,u,f,m);m||this.updateRectMinMax(t,g)}getPathBoundingBox(t=Ra.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Ra.STROKE){e||Oi("Stroke bounding box must include transform.");const s=Le.singularValueDecompose2dScale(e),r=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;n[0]-=r,n[1]-=a,n[2]+=r,n[3]+=a}return n}updateClipFromPath(){const t=Le.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Ra.FILL,e=null){return Le.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function z9(i,t){if(typeof ImageData<"u"&&t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%io,r=(e-s)/io,a=s===0?r:r+1,l=i.createImageData(n,io);let u=0,f;const m=t.data,g=l.data;let v,_,b,T;if(t.kind===I4.GRAYSCALE_1BPP){const E=m.byteLength,S=new Uint32Array(g.buffer,0,g.byteLength>>2),w=S.length,D=n+7>>3,B=4294967295,N=Na.isLittleEndian?4278190080:255;for(v=0;v<a;v++){for(b=v<r?io:s,f=0,_=0;_<b;_++){const I=E-u;let F=0;const z=I>D?n:I*8-7,U=z&-8;let P=0,X=0;for(;F<U;F+=8)X=m[u++],S[f++]=X&128?B:N,S[f++]=X&64?B:N,S[f++]=X&32?B:N,S[f++]=X&16?B:N,S[f++]=X&8?B:N,S[f++]=X&4?B:N,S[f++]=X&2?B:N,S[f++]=X&1?B:N;for(;F<z;F++)P===0&&(X=m[u++],P=128),S[f++]=X&P?B:N,P>>=1}for(;f<w;)S[f++]=0;i.putImageData(l,0,v*io)}}else if(t.kind===I4.RGBA_32BPP){for(_=0,T=n*io*4,v=0;v<r;v++)g.set(m.subarray(u,u+T)),u+=T,i.putImageData(l,0,_),_+=io;v<a&&(T=n*s*4,g.set(m.subarray(u,u+T)),i.putImageData(l,0,_))}else if(t.kind===I4.RGB_24BPP)for(b=io,T=n*b,v=0;v<a;v++){for(v>=r&&(b=s,T=n*b),f=0,_=T;_--;)g[f++]=m[u++],g[f++]=m[u++],g[f++]=m[u++],g[f++]=255;i.putImageData(l,0,v*io)}else throw new Error(`bad image kind: ${t.kind}`)}function G9(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%io,r=(e-s)/io,a=s===0?r:r+1,l=i.createImageData(n,io);let u=0;const f=t.data,m=l.data;for(let g=0;g<a;g++){const v=g<r?io:s;({srcPos:u}=Cet({src:f,srcPos:u,dest:m,width:n,height:v,nonBlackColor:0})),i.putImageData(l,0,g*io)}}function a_(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function _4(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!sa){const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}}function k9(i,t){if(t)return!0;const e=Le.singularValueDecompose2dScale(i);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*ip.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const Bet=["butt","round","square"],Oet=["miter","round","bevel"],Net={},V9={};var ap,wC,RC;const z7=class z7{constructor(t,e,n,s,r,{optionalContentConfig:a,markedContentStack:l=null},u,f){W(this,ap);this.ctx=t,this.current=new H9(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new Let(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=l,n){const u=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...Wi(this.compositeCtx))}this.ctx.save(),_4(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Wi(this.ctx)}executeOperatorList(t,e,n,s){const r=t.argsArray,a=t.fnArray;let l=e||0;const u=r.length;if(u===l)return l;const f=u-l>P9&&typeof n=="function",m=f?Date.now()+wet:0;let g=0;const v=this.commonObjs,_=this.objs;let b;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,n),l;if(b=a[l],b!==cc.dependency)this[b].apply(this,r[l]);else for(const T of r[l]){const E=T.startsWith("g_")?v:_;if(!E.has(T))return E.get(T,n),l}if(l++,l===u)return l;if(f&&++g>P9){if(Date.now()>m)return n(),l;g=0}}}endDrawing(){V(this,ap,wC).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),V(this,ap,RC).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),l=n,u=s,f="prescale1",m,g;for(;r>2&&l>1||a>2&&u>1;){let v=l,_=u;r>2&&l>1&&(v=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/v),a>2&&u>1&&(_=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,a/=u/_),m=this.cachedCanvases.getCanvas(f,v,_),g=m.context,g.clearRect(0,0,v,_),g.drawImage(t,0,0,l,u,0,0,v,_),t=m.canvas,l=v,u=_,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:u}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:s}=t,r=this.current.fillColor,a=this.current.patternFill,l=Wi(e);let u,f,m,g;if((t.bitmap||t.data)&&t.count>1){const z=t.bitmap||t.data.buffer;f=JSON.stringify(a?l:[l.slice(0,4),r]),u=this._cachedBitmapsMap.get(z),u||(u=new Map,this._cachedBitmapsMap.set(z,u));const U=u.get(f);if(U&&!a){const P=Math.round(Math.min(l[0],l[2])+l[4]),X=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:U,offsetX:P,offsetY:X}}m=U}m||(g=this.cachedCanvases.getCanvas("maskCanvas",n,s),G9(g.context,t));let v=Le.transform(l,[1/n,0,0,-1/s,0,0]);v=Le.transform(v,[1,0,0,1,0,-s]);const[_,b,T,E]=Le.getAxialAlignedBoundingBox([0,0,n,s],v),S=Math.round(T-_)||1,w=Math.round(E-b)||1,D=this.cachedCanvases.getCanvas("fillCanvas",S,w),B=D.context,N=_,I=b;B.translate(-N,-I),B.transform(...v),m||(m=this._scaleImage(g.canvas,vh(B)),m=m.img,u&&a&&u.set(f,m)),B.imageSmoothingEnabled=k9(Wi(B),t.interpolate),y4(B,m,0,0,m.width,m.height,0,0,n,s),B.globalCompositeOperation="source-in";const F=Le.transform(vh(B),[1,0,0,1,-N,-I]);return B.fillStyle=a?r.getPattern(e,this,F,Ra.FILL):r,B.fillRect(0,0,n,s),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(f,D.canvas)),{canvas:D.canvas,offsetX:Math.round(N),offsetY:Math.round(I)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=Bet[t]}setLineJoin(t){this.ctx.lineJoin=Oet[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...Wi(this.suspendedCtx)),a_(this.suspendedCtx,r),Ret(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),a_(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const r=s[0],a=s[1],l=s[2]-r,u=s[3]-a;l===0||u===0||(this.genericComposeSMask(e.context,n,l,u,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,r,a,l,u,f,m,g){let v=t.canvas,_=u-m,b=f-g;if(a){const E=Le.makeHexColor(...a);if(_<0||b<0||_+n>v.width||b+s>v.height){const S=this.cachedCanvases.getCanvas("maskExtension",n,s),w=S.context;w.drawImage(v,-_,-b),w.globalCompositeOperation="destination-atop",w.fillStyle=E,w.fillRect(0,0,n,s),w.globalCompositeOperation="source-over",v=S.canvas,_=b=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(_,b,n,s),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=E,t.fillRect(_,b,n,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const T=new Path2D;T.rect(u,f,n,s),e.clip(T),e.globalCompositeOperation="destination-in",e.drawImage(v,_,b,n,s,u,f,n,s),e.restore()}save(){this.inSMaskMode?(a_(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),a_(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,s,r,a){this.ctx.transform(t,e,n,s,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const s=this.ctx,r=this.current;let a=r.x,l=r.y,u,f;const m=Wi(s),g=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,v=g?n.slice(0):null;for(let _=0,b=0,T=t.length;_<T;_++)switch(t[_]|0){case cc.rectangle:a=e[b++],l=e[b++];const E=e[b++],S=e[b++],w=a+E,D=l+S;s.moveTo(a,l),E===0||S===0?s.lineTo(w,D):(s.lineTo(w,l),s.lineTo(w,D),s.lineTo(a,D)),g||r.updateRectMinMax(m,[a,l,w,D]),s.closePath();break;case cc.moveTo:a=e[b++],l=e[b++],s.moveTo(a,l),g||r.updatePathMinMax(m,a,l);break;case cc.lineTo:a=e[b++],l=e[b++],s.lineTo(a,l),g||r.updatePathMinMax(m,a,l);break;case cc.curveTo:u=a,f=l,a=e[b+4],l=e[b+5],s.bezierCurveTo(e[b],e[b+1],e[b+2],e[b+3],a,l),r.updateCurvePathMinMax(m,u,f,e[b],e[b+1],e[b+2],e[b+3],a,l,v),b+=6;break;case cc.curveTo2:u=a,f=l,s.bezierCurveTo(a,l,e[b],e[b+1],e[b+2],e[b+3]),r.updateCurvePathMinMax(m,u,f,a,l,e[b],e[b+1],e[b+2],e[b+3],v),a=e[b+2],l=e[b+3],b+=4;break;case cc.curveTo3:u=a,f=l,a=e[b+2],l=e[b+3],s.bezierCurveTo(e[b],e[b+1],a,l,a,l),r.updateCurvePathMinMax(m,u,f,e[b],e[b+1],a,l,a,l,v),b+=4;break;case cc.closePath:s.closePath();break}g&&r.updateScalingPathMinMax(m,v),r.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,vh(e),Ra.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(e.save(),e.fillStyle=n.getPattern(e,this,vh(e),Ra.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Net}eoClip(){this.pendingClip=V9}beginText(){this.current.textMatrix=kN,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const n=this.commonObjs.get(t),s=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=n.fontMatrix||$5,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&An("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const r=n.loadedName||"sans-serif",a=((m=n.systemFontInfo)==null?void 0:m.css)||`"${r}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const u=n.italic?"italic":"normal";let f=e;e<I9?f=I9:e>U9&&(f=U9),this.current.fontSizeScale=e/f,this.ctx.font=`${u} ${l} ${f}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,s,r,a){this.current.textMatrix=[t,e,n,s,r,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,s){const r=this.ctx,a=this.current,l=a.font,u=a.textRenderingMode,f=a.fontSize/a.fontSizeScale,m=u&Wr.FILL_STROKE_MASK,g=!!(u&Wr.ADD_TO_PATH_FLAG),v=a.patternFill&&!l.missingFile;let _;(l.disableFontFace||g||v)&&(_=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||v?(r.save(),r.translate(e,n),r.beginPath(),_(r,f),s&&r.setTransform(...s),(m===Wr.FILL||m===Wr.FILL_STROKE)&&r.fill(),(m===Wr.STROKE||m===Wr.FILL_STROKE)&&r.stroke(),r.restore()):((m===Wr.FILL||m===Wr.FILL_STROKE)&&r.fillText(t,e,n),(m===Wr.STROKE||m===Wr.FILL_STROKE)&&r.strokeText(t,e,n)),g&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Wi(r),x:e,y:n,fontSize:f,addToPath:_})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return Hn(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const r=this.ctx,a=e.fontSizeScale,l=e.charSpacing,u=e.wordSpacing,f=e.fontDirection,m=e.textHScale*f,g=t.length,v=n.vertical,_=v?1:-1,b=n.defaultVMetrics,T=s*e.fontMatrix[0],E=e.textRenderingMode===Wr.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),f>0?r.scale(m,-1):r.scale(m,1);let S;if(e.patternFill){r.save();const I=e.fillColor.getPattern(r,this,vh(r),Ra.FILL);S=Wi(r),r.restore(),r.fillStyle=I}let w=e.lineWidth;const D=e.textMatrixScale;if(D===0||w===0){const I=e.textRenderingMode&Wr.FILL_STROKE_MASK;(I===Wr.STROKE||I===Wr.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=D;if(a!==1&&(r.scale(a,a),w/=a),r.lineWidth=w,n.isInvalidPDFjsFont){const I=[];let F=0;for(const z of t)I.push(z.unicode),F+=z.width;r.fillText(I.join(""),0,0),e.x+=F*T*m,r.restore(),this.compose();return}let B=0,N;for(N=0;N<g;++N){const I=t[N];if(typeof I=="number"){B+=_*I*s/1e3;continue}let F=!1;const z=(I.isSpace?u:0)+l,U=I.fontChar,P=I.accent;let X,lt,it=I.width;if(v){const dt=I.vmetric||b,j=-(I.vmetric?dt[1]:it*.5)*T,tt=dt[2]*T;it=dt?-dt[0]:it,X=j/a,lt=(B+tt)/a}else X=B/a,lt=0;if(n.remeasure&&it>0){const dt=r.measureText(U).width*1e3/s*a;if(it<dt&&this.isFontSubpixelAAEnabled){const j=it/dt;F=!0,r.save(),r.scale(j,1),X/=j}else it!==dt&&(X+=(it-dt)/2e3*s/a)}if(this.contentVisible&&(I.isInFont||n.missingFile)){if(E&&!P)r.fillText(U,X,lt);else if(this.paintChar(U,X,lt,S),P){const dt=X+s*P.offset.x/a,j=lt-s*P.offset.y/a;this.paintChar(P.fontChar,dt,j,S)}}const ut=v?it*T-z*f:it*T+z*f;B+=ut,F&&r.restore()}v?e.y-=B:e.x+=B*m,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,s=n.font,r=n.fontSize,a=n.fontDirection,l=s.vertical?1:-1,u=n.charSpacing,f=n.wordSpacing,m=n.textHScale*a,g=n.fontMatrix||$5,v=t.length,_=n.textRenderingMode===Wr.INVISIBLE;let b,T,E,S;if(!(_||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(m,a),b=0;b<v;++b){if(T=t[b],typeof T=="number"){S=l*T*r/1e3,this.ctx.translate(S,0),n.x+=S*m;continue}const w=(T.isSpace?f:0)+u,D=s.charProcOperatorList[T.operatorListId];if(!D){An(`Type3 character "${T.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=T,this.save(),e.scale(r,r),e.transform(...g),this.executeOperatorList(D),this.restore()),E=Le.applyTransform([T.width,0],g)[0]*r+w,e.translate(E,0),n.x+=E*m}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,s,r,a){this.ctx.rect(n,s,r-n,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],s=this.baseTransform||Wi(this.ctx),r={createCanvasGraphics:a=>new z7(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new CC(t,n,this.ctx,r,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=Le.makeHexColor(t,e,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=Le.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=Tet(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,vh(e),Ra.SHADING);const s=vh(e);if(s){const{width:r,height:a}=e.canvas,[l,u,f,m]=Le.getAxialAlignedBoundingBox([0,0,r,a],s);this.ctx.fillRect(l,u,f-l,m-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Oi("Should not call beginInlineImage")}beginImageData(){Oi("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Wi(this.ctx),e)){const n=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],n,s),this.current.updateRectMinMax(Wi(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||UM("TODO: Support non-isolated groups."),t.knockout&&An("Knockout groups not supported.");const n=Wi(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=Le.getAxialAlignedBoundingBox(t.bbox,Wi(e));const r=[0,0,e.canvas.width,e.canvas.height];s=Le.intersect(s,r)||[0,0,0,0];const a=Math.floor(s[0]),l=Math.floor(s[1]),u=Math.max(Math.ceil(s[2])-a,1),f=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,f]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,u,f),v=g.context;v.translate(-a,-l),v.transform(...n),t.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,l),e.save()),a_(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Wi(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=Le.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,s,r){if(V(this,ap,wC).call(this),_4(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=l;const[u,f]=Le.singularValueDecompose2dScale(Wi(this.ctx)),{viewportScale:m}=this,g=Math.ceil(a*this.outputScaleX*m),v=Math.ceil(l*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(g,v);const{canvas:_,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(u,0,0,-f,0,l*f),_4(this.ctx)}else _4(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],a,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new H9(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),V(this,ap,RC).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=Det(t)),s.compiled)){s.compiled(n);return}const r=this._createMaskCanvas(t),a=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,s=0,r,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const u=Wi(l);l.transform(e,n,s,r,0,0);const f=this._createMaskCanvas(t);l.setTransform(1,0,0,1,f.offsetX-u[4],f.offsetY-u[5]);for(let m=0,g=a.length;m<g;m+=2){const v=Le.transform(u,[e,n,s,r,a[m],a[m+1]]),[_,b]=Le.applyTransform([0,0],v);l.drawImage(f.canvas,_,b)}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const r of t){const{data:a,width:l,height:u,transform:f}=r,m=this.cachedCanvases.getCanvas("maskCanvas",l,u),g=m.context;g.save();const v=this.getObject(a,r);G9(g,v),g.globalCompositeOperation="source-in",g.fillStyle=s?n.getPattern(g,this,vh(e),Ra.FILL):n,g.fillRect(0,0,l,u),g.restore(),e.save(),e.transform(...f),e.scale(1,-1),y4(e,m.canvas,0,0,l,u,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){An("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,s){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){An("Dependent image isn't ready yet");return}const a=r.width,l=r.height,u=[];for(let f=0,m=s.length;f<m;f+=2)u.push({transform:[e,0,0,n,s[f],s[f+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(r,u)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,s),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,s=this.ctx;if(this.save(),!sa){const{filter:l}=s;l!=="none"&&l!==""&&(s.filter="none")}s.scale(1/e,-1/n);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const u=this.cachedCanvases.getCanvas("inlineImage",e,n).context;z9(u,t),r=this.applyTransferMapsToCanvas(u)}const a=this._scaleImage(r,vh(s));s.imageSmoothingEnabled=k9(Wi(s),t.interpolate),y4(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const r=t.width,a=t.height,u=this.cachedCanvases.getCanvas("inlineImage",r,a).context;z9(u,t),s=this.applyTransferMapsToCanvas(u)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),y4(n,s,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===V9?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Wi(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:r}=this.ctx.getTransform();let a,l;if(n===0&&s===0){const u=Math.abs(e),f=Math.abs(r);if(u===f)if(t===0)a=l=1/u;else{const m=u*t;a=l=m<1?1/m:1}else if(t===0)a=1/u,l=1/f;else{const m=u*t,g=f*t;a=m<1?1/m:1,l=g<1?1/g:1}}else{const u=Math.abs(e*r-n*s),f=Math.hypot(e,n),m=Math.hypot(s,r);if(t===0)a=m/u,l=f/u;else{const g=t*u;a=m>g?m/g:1,l=f>g?f/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[s,r]=this.getScaleForStroking();if(e.lineWidth=n||1,s===1&&r===1){e.stroke();return}const a=e.getLineDash();if(t&&e.save(),e.scale(s,r),a.length>0){const l=Math.max(s,r);e.setLineDash(a.map(u=>u/l)),e.lineDashOffset/=l}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ap=new WeakSet,wC=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},RC=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let $1=z7;for(const i in cc)$1.prototype[i]!==void 0&&($1.prototype[cc[i]]=$1.prototype[i]);var LA,DA;class Yh{static get workerPort(){return x(this,LA)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");G(this,LA,t)}static get workerSrc(){return x(this,DA)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");G(this,DA,t)}}LA=new WeakMap,DA=new WeakMap,W(Yh,LA,null),W(Yh,DA,"");const A4={DATA:1,ERROR:2},Ts={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Co(i){switch(i instanceof Error||typeof i=="object"&&i!==null||Oi('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new c0(i.message);case"MissingPDFException":return new l0(i.message);case"PasswordException":return new tC(i.message,i.code);case"UnexpectedResponseException":return new PM(i.message,i.status);case"UnknownErrorException":return new eC(i.message,i.details);default:return new eC(i.message,i.toString())}}var vv,wl,TI,CI,wI,V4;class A_{constructor(t,e,n){W(this,wl);W(this,vv,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",V(this,wl,TI).bind(this),{signal:x(this,vv).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(a){r.reject(a)}return r.promise}sendWithStream(t,e,n,s){const r=this.streamId++,a=this.sourceName,l=this.targetName,u=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[r]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:a,targetName:l,action:t,streamId:r,data:e,desiredSize:f.desiredSize},s),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[r].pullCall=m,u.postMessage({sourceName:a,targetName:l,stream:Ts.PULL,streamId:r,desiredSize:f.desiredSize}),m.promise},cancel:f=>{Xs(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[r].cancelCall=m,this.streamControllers[r].isClosed=!0,u.postMessage({sourceName:a,targetName:l,stream:Ts.CANCEL,streamId:r,reason:Co(f)}),m.promise}},n)}destroy(){var t;(t=x(this,vv))==null||t.abort(),G(this,vv,null)}}vv=new WeakMap,wl=new WeakSet,TI=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){V(this,wl,wI).call(this,t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===A4.DATA)s.resolve(t.data);else if(t.callback===A4.ERROR)s.reject(Co(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,r=this.comObj;new Promise(function(a){a(e(t.data))}).then(function(a){r.postMessage({sourceName:n,targetName:s,callback:A4.DATA,callbackId:t.callbackId,data:a})},function(a){r.postMessage({sourceName:n,targetName:s,callback:A4.ERROR,callbackId:t.callbackId,reason:Co(a)})});return}if(t.streamId){V(this,wl,CI).call(this,t);return}e(t.data)},CI=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,a=this,l=this.actionHandler[t.action],u={enqueue(f,m=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:Ts.ENQUEUE,streamId:e,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Ts.CLOSE,streamId:e}),delete a.streamSinks[e])},error(f){Xs(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Ts.ERROR,streamId:e,reason:Co(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,new Promise(function(f){f(l(t.data,u))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Ts.START_COMPLETE,streamId:e,success:!0})},function(f){r.postMessage({sourceName:n,targetName:s,stream:Ts.START_COMPLETE,streamId:e,reason:Co(f)})})},wI=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,a=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case Ts.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(Co(t.reason));break;case Ts.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(Co(t.reason));break;case Ts.PULL:if(!l){r.postMessage({sourceName:n,targetName:s,stream:Ts.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,new Promise(function(u){var f;u((f=l.onPull)==null?void 0:f.call(l))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Ts.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:s,stream:Ts.PULL_COMPLETE,streamId:e,reason:Co(u)})});break;case Ts.ENQUEUE:if(Xs(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case Ts.CLOSE:if(Xs(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),V(this,wl,V4).call(this,a,e);break;case Ts.ERROR:Xs(a,"error should have stream controller"),a.controller.error(Co(t.reason)),V(this,wl,V4).call(this,a,e);break;case Ts.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(Co(t.reason)),V(this,wl,V4).call(this,a,e);break;case Ts.CANCEL:if(!l)break;new Promise(function(u){var f;u((f=l.onCancel)==null?void 0:f.call(l,Co(t.reason)))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Ts.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:s,stream:Ts.CANCEL_COMPLETE,streamId:e,reason:Co(u)})}),l.sinkCapability.reject(Co(t.reason)),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},V4=async function(t,e){var n,s,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var ng,BA;class Iet{constructor({parsedData:t,rawData:e}){W(this,ng);W(this,BA);G(this,ng,t),G(this,BA,e)}getRaw(){return x(this,BA)}get(t){return x(this,ng).get(t)??null}getAll(){return E7(x(this,ng))}has(t){return x(this,ng).has(t)}}ng=new WeakMap,BA=new WeakMap;const G1=Symbol("INTERNAL");var OA,NA,IA,yv;class Uet{constructor(t,{name:e,intent:n,usage:s,rbGroups:r}){W(this,OA,!1);W(this,NA,!1);W(this,IA,!1);W(this,yv,!0);G(this,OA,!!(t&Po.DISPLAY)),G(this,NA,!!(t&Po.PRINT)),this.name=e,this.intent=n,this.usage=s,this.rbGroups=r}get visible(){if(x(this,IA))return x(this,yv);if(!x(this,yv))return!1;const{print:t,view:e}=this.usage;return x(this,OA)?(e==null?void 0:e.viewState)!=="OFF":x(this,NA)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==G1&&Oi("Internal method `_setVisible` called."),G(this,IA,n),G(this,yv,e)}}OA=new WeakMap,NA=new WeakMap,IA=new WeakMap,yv=new WeakMap;var Rd,hi,_v,Av,UA,LC;class Pet{constructor(t,e=Po.DISPLAY){W(this,UA);W(this,Rd,null);W(this,hi,new Map);W(this,_v,null);W(this,Av,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,G(this,Av,t.order);for(const n of t.groups)x(this,hi).set(n.id,new Uet(e,n));if(t.baseState==="OFF")for(const n of x(this,hi).values())n._setVisible(G1,!1);for(const n of t.on)x(this,hi).get(n)._setVisible(G1,!0);for(const n of t.off)x(this,hi).get(n)._setVisible(G1,!1);G(this,_v,this.getHash())}}isVisible(t){if(x(this,hi).size===0)return!0;if(!t)return UM("Optional content group not defined."),!0;if(t.type==="OCG")return x(this,hi).has(t.id)?x(this,hi).get(t.id).visible:(An(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return V(this,UA,LC).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(x(this,hi).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(!x(this,hi).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(!x(this,hi).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(x(this,hi).get(e).visible)return!1}return!0}return An(`Unknown optional content policy ${t.policy}.`),!0}return An(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const s=x(this,hi).get(t);if(!s){An(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const a of s.rbGroups)for(const l of a)l!==t&&((r=x(this,hi).get(l))==null||r._setVisible(G1,!1,!0));s._setVisible(G1,!!e,!0),G(this,Rd,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=x(this,hi).get(s);if(r)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}G(this,Rd,null)}get hasInitialVisibility(){return x(this,_v)===null||this.getHash()===x(this,_v)}getOrder(){return x(this,hi).size?x(this,Av)?x(this,Av).slice():[...x(this,hi).keys()]:null}getGroups(){return x(this,hi).size>0?E7(x(this,hi)):null}getGroup(t){return x(this,hi).get(t)||null}getHash(){if(x(this,Rd)!==null)return x(this,Rd);const t=new mI;for(const[e,n]of x(this,hi))t.update(`${e}:${n.visible}`);return G(this,Rd,t.hexdigest())}}Rd=new WeakMap,hi=new WeakMap,_v=new WeakMap,Av=new WeakMap,UA=new WeakSet,LC=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const r=t[s];let a;if(Array.isArray(r))a=V(this,UA,LC).call(this,r);else if(x(this,hi).has(r))a=x(this,hi).get(r).visible;else return An(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class Fet{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Xs(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const u=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((u,f)=>{this._onReceiveData({begin:u,chunk:f})}),t.addProgressListener((u,f)=>{this._onProgress({loaded:u,total:f})}),t.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});Xs(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,s,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Xs(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Het(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new zet(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class Het{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=C7(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class zet{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Get(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let m=l(e);return m=unescape(m),m=u(m),m=f(m),r(m)}if(e=a(i),e){const m=f(e);return r(m)}if(e=n("filename","i").exec(i),e){e=e[1];let m=l(e);return m=f(m),r(m)}function n(m,g){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function s(m,g){if(m){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(m,{fatal:!0}),_=FM(g);g=v.decode(_),t=!1}catch{}}return g}function r(m){return t&&/[\x80-\xff]/.test(m)&&(m=s("utf-8",m),t&&(m=s("iso-8859-1",m))),m}function a(m){const g=[];let v;const _=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=_.exec(m))!==null;){let[,T,E,S]=v;if(T=parseInt(T,10),T in g){if(T===0)break;continue}g[T]=[E,S]}const b=[];for(let T=0;T<g.length&&T in g;++T){let[E,S]=g[T];S=l(S),E&&(S=unescape(S),T===0&&(S=u(S))),b.push(S)}return b.join("")}function l(m){if(m.startsWith('"')){const g=m.slice(1).split('\\"');for(let v=0;v<g.length;++v){const _=g[v].indexOf('"');_!==-1&&(g[v]=g[v].slice(0,_),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}m=g.join('"')}return m}function u(m){const g=m.indexOf("'");if(g===-1)return m;const v=m.slice(0,g),b=m.slice(g+1).replace(/^[^']*'/,"");return s(v,b)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,_,b){if(_==="q"||_==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(T,E){return String.fromCharCode(parseInt(E,16))}),s(v,b);try{b=atob(b)}catch{}return s(v,b)})}return""}function B7(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function O7({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function N7(i){const t=i.get("Content-Disposition");if(t){let e=Get(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(C7(e))return e}return null}function GM(i,t){return i===404||i===0&&t.startsWith("file:")?new l0('Missing PDF "'+t+'".'):new PM(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i)}function RI(i){return i===200||i===206}function LI(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function DI(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(An(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class Q9{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=B7(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Xs(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ket(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Vet(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class ket{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),s=e.url;fetch(s,LI(n,this._withCredentials,this._abortController)).then(r=>{if(!RI(r.status))throw GM(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:l,suggestedLength:u}=O7({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=u||this._contentLength,this._filename=N7(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new c0("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:DI(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Vet{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const a=s.url;fetch(a,LI(r,this._withCredentials,this._abortController)).then(l=>{if(!RI(l.status))throw GM(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:DI(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const l5=200,c5=206;function Qet(i){const t=i.response;return typeof t!="string"?t:FM(t).buffer}class jet{constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=B7(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const s={begin:t,end:e};for(const r in n)s[r]=n[r];return this.request(s)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,a]of this.headers)e.setRequestHeader(r,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=c5):s.expectedStatus=l5,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var s;const n=this.pendingRequests[t];n&&((s=n.onProgress)==null||s.call(n,e))}onStateChange(t,e){var u,f,m;const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){(u=n.onError)==null||u.call(n,s.status);return}const r=s.status||l5;if(!(r===l5&&n.expectedStatus===c5)&&r!==n.expectedStatus){(f=n.onError)==null||f.call(n,s.status);return}const l=Qet(s);if(r===c5){const g=s.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);n.onDone({begin:parseInt(v[1],10),chunk:l})}else l?n.onDone({begin:0,chunk:l}):(m=n.onError)==null||m.call(n,s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Xet{constructor(t){this._source=t,this._manager=new jet(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Xs(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new qet(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new Yet(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class qet{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=new Headers(e.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[l,...u]=a.split(": ");return[l,u.join(": ")]})),{allowRangeRequests:s,suggestedLength:r}=O7({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=N7(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=GM(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Yet{constructor(t,e,n){this._manager=t;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=GM(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Wet=/^[a-z][a-z0-9\-+.]+:/i;function Ket(i){if(Wet.test(i))return new URL(i);const t=sp.get("url");return new URL(t.pathToFileURL(i))}function BI(i,t,e){return i.protocol==="http:"?sp.get("http").request(i,{headers:t},e):sp.get("https").request(i,{headers:t},e)}class Jet{constructor(t){this.source=t,this.url=Ket(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=B7(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Xs(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new tnt(this):new Zet(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new ent(this,t,e):new $et(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class OI{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new c0("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class NI{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class Zet extends OI{constructor(t){super(t);const e=Object.fromEntries(t.headers),n=s=>{if(s.statusCode===404){const u=new l0(`Missing PDF "${this._url}".`);this._storedError=u,this._headersCapability.reject(u);return}this._headersCapability.resolve(),this._setReadableStream(s);const r=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:l}=O7({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=N7(r)};this._request=BI(this._url,e,n),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class $et extends NI{constructor(t,e,n){super(t);const s=Object.fromEntries(t.headers);s.Range=`bytes=${e}-${n-1}`;const r=a=>{if(a.statusCode===404){const l=new l0(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(a)};this._request=BI(this._url,s,r),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class tnt extends OI{constructor(t){super(t);const e=sp.get("fs");e.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new l0(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class ent extends NI{constructor(t,e,n){super(t);const s=sp.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:n-1}))}}const nnt=1e5,Ja=30,int=.8;var fD,Ld,eo,PA,FA,ig,Rh,HA,zA,sg,xv,bv,Dd,Sv,GA,Ev,rg,kA,VA,rs,ag,og,QA,Bd,Mv,of,II,UI,BC,ko,Q4,OC,PI,FI;let DC=(rs=class{constructor({textContentSource:t,container:e,viewport:n}){W(this,of);W(this,Ld,Promise.withResolvers());W(this,eo,null);W(this,PA,!1);W(this,FA,!!((fD=globalThis.FontInspector)!=null&&fD.enabled));W(this,ig,null);W(this,Rh,null);W(this,HA,0);W(this,zA,0);W(this,sg,null);W(this,xv,null);W(this,bv,0);W(this,Dd,0);W(this,Sv,Object.create(null));W(this,GA,[]);W(this,Ev,null);W(this,rg,[]);W(this,kA,new WeakMap);W(this,VA,null);var u;if(t instanceof ReadableStream)G(this,Ev,t);else if(typeof t=="object")G(this,Ev,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');G(this,eo,G(this,xv,e)),G(this,Dd,n.scale*(globalThis.devicePixelRatio||1)),G(this,bv,n.rotation),G(this,Rh,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:a,pageY:l}=n.rawDims;G(this,VA,[1,0,0,-1,-a,l+r]),G(this,zA,s),G(this,HA,r),V(u=rs,ko,PI).call(u),Wg(e,n),x(this,Ld).promise.finally(()=>{x(rs,Mv).delete(this),G(this,Rh,null),G(this,Sv,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Na.platform;return Hn(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{x(this,sg).read().then(({value:e,done:n})=>{if(n){x(this,Ld).resolve();return}x(this,ig)??G(this,ig,e.lang),Object.assign(x(this,Sv),e.styles),V(this,of,II).call(this,e.items),t()},x(this,Ld).reject)};return G(this,sg,x(this,Ev).getReader()),x(rs,Mv).add(this),t(),x(this,Ld).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==x(this,bv)&&(e==null||e(),G(this,bv,s),Wg(x(this,xv),{rotation:s})),n!==x(this,Dd)){e==null||e(),G(this,Dd,n);const a={div:null,properties:null,ctx:V(r=rs,ko,Q4).call(r,x(this,ig))};for(const l of x(this,rg))a.properties=x(this,kA).get(l),a.div=l,V(this,of,BC).call(this,a)}}cancel(){var e;const t=new c0("TextLayer task cancelled.");(e=x(this,sg))==null||e.cancel(t).catch(()=>{}),G(this,sg,null),x(this,Ld).reject(t)}get textDivs(){return x(this,rg)}get textContentItemsStr(){return x(this,GA)}static cleanup(){if(!(x(this,Mv).size>0)){x(this,ag).clear();for(const{canvas:t}of x(this,og).values())t.remove();x(this,og).clear()}}},Ld=new WeakMap,eo=new WeakMap,PA=new WeakMap,FA=new WeakMap,ig=new WeakMap,Rh=new WeakMap,HA=new WeakMap,zA=new WeakMap,sg=new WeakMap,xv=new WeakMap,bv=new WeakMap,Dd=new WeakMap,Sv=new WeakMap,GA=new WeakMap,Ev=new WeakMap,rg=new WeakMap,kA=new WeakMap,VA=new WeakMap,ag=new WeakMap,og=new WeakMap,QA=new WeakMap,Bd=new WeakMap,Mv=new WeakMap,of=new WeakSet,II=function(t){var s,r;if(x(this,PA))return;(r=x(this,Rh)).ctx??(r.ctx=V(s=rs,ko,Q4).call(s,x(this,ig)));const e=x(this,rg),n=x(this,GA);for(const a of t){if(e.length>nnt){An("Ignoring additional textDivs for performance reasons."),G(this,PA,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=x(this,eo);G(this,eo,document.createElement("span")),x(this,eo).classList.add("markedContent"),a.id!==null&&x(this,eo).setAttribute("id",`${a.id}`),l.append(x(this,eo))}else a.type==="endMarkedContent"&&G(this,eo,x(this,eo).parentNode);continue}n.push(a.str),V(this,of,UI).call(this,a)}},UI=function(t){var T;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};x(this,rg).push(e);const s=Le.transform(x(this,VA),t.transform);let r=Math.atan2(s[1],s[0]);const a=x(this,Sv)[t.fontName];a.vertical&&(r+=Math.PI/2);let l=x(this,FA)&&a.fontSubstitution||a.fontFamily;l=rs.fontFamilyMap.get(l)||l;const u=Math.hypot(s[2],s[3]),f=u*V(T=rs,ko,FI).call(T,l,x(this,ig));let m,g;r===0?(m=s[4],g=s[5]-f):(m=s[4]+f*Math.sin(r),g=s[5]-f*Math.cos(r));const v="calc(var(--scale-factor)*",_=e.style;x(this,eo)===x(this,xv)?(_.left=`${(100*m/x(this,zA)).toFixed(2)}%`,_.top=`${(100*g/x(this,HA)).toFixed(2)}%`):(_.left=`${v}${m.toFixed(2)}px)`,_.top=`${v}${g.toFixed(2)}px)`),_.fontSize=`${v}${(x(rs,Bd)*u).toFixed(2)}px)`,_.fontFamily=l,n.fontSize=u,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,x(this,FA)&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const E=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);E!==S&&Math.max(E,S)/Math.min(E,S)>1.5&&(b=!0)}if(b&&(n.canvasWidth=a.vertical?t.height:t.width),x(this,kA).set(e,n),x(this,Rh).div=e,x(this,Rh).properties=n,V(this,of,BC).call(this,x(this,Rh)),n.hasText&&x(this,eo).append(e),n.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),x(this,eo).append(E)}},BC=function(t){var l;const{div:e,properties:n,ctx:s}=t,{style:r}=e;let a="";if(x(rs,Bd)>1&&(a=`scale(${1/x(rs,Bd)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=r,{canvasWidth:f,fontSize:m}=n;V(l=rs,ko,OC).call(l,s,m*x(this,Dd),u);const{width:g}=s.measureText(e.textContent);g>0&&(a=`scaleX(${f*x(this,Dd)/g}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(r.transform=a)},ko=new WeakSet,Q4=function(t=null){let e=x(this,og).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),x(this,og).set(t,e),x(this,QA).set(e,{size:0,family:""})}return e},OC=function(t,e,n){const s=x(this,QA).get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)},PI=function(){if(x(this,Bd)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),G(this,Bd,t.getBoundingClientRect().height),t.remove()},FI=function(t,e){const n=x(this,ag).get(t);if(n)return n;const s=V(this,ko,Q4).call(this,e);s.canvas.width=s.canvas.height=Ja,V(this,ko,OC).call(this,s,Ja,t);const r=s.measureText("");let a=r.fontBoundingBoxAscent,l=Math.abs(r.fontBoundingBoxDescent);if(a){const m=a/(a+l);return x(this,ag).set(t,m),s.canvas.width=s.canvas.height=0,m}s.strokeStyle="red",s.clearRect(0,0,Ja,Ja),s.strokeText("g",0,0);let u=s.getImageData(0,0,Ja,Ja).data;l=0;for(let m=u.length-1-3;m>=0;m-=4)if(u[m]>0){l=Math.ceil(m/4/Ja);break}s.clearRect(0,0,Ja,Ja),s.strokeText("A",0,Ja),u=s.getImageData(0,0,Ja,Ja).data,a=0;for(let m=0,g=u.length;m<g;m+=4)if(u[m]>0){a=Ja-Math.floor(m/4/Ja);break}s.canvas.width=s.canvas.height=0;const f=a?a/(a+l):int;return x(this,ag).set(t,f),f},W(rs,ko),W(rs,ag,new Map),W(rs,og,new Map),W(rs,QA,new WeakMap),W(rs,Bd,null),W(rs,Mv,new Set),rs);class lA{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(r){var u;if(!r)return;let a=null;const l=r.name;if(l==="#text")a=r.value;else if(lA.shouldBuildText(l))(u=r==null?void 0:r.attributes)!=null&&u.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&e.push({str:a}),!!r.children)for(const f of r.children)s(f)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const snt=65536,rnt=100,ant=5e3,ont=sa?yet:met,lnt=sa?_et:AI,cnt=sa?vet:get,unt=sa?Aet:EI;function hnt(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new NC,{docId:e}=t,n=i.url?fnt(i.url):null,s=i.data?dnt(i.data):null,r=i.httpHeaders||null,a=i.withCredentials===!0,l=i.password??null,u=i.range instanceof HI?i.range:null,f=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:snt;let m=i.worker instanceof tv?i.worker:null;const g=i.verbosity,v=typeof i.docBaseUrl=="string"&&!zM(i.docBaseUrl)?i.docBaseUrl:null,_=typeof i.cMapUrl=="string"?i.cMapUrl:null,b=i.cMapPacked!==!1,T=i.CMapReaderFactory||lnt,E=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,S=i.StandardFontDataFactory||unt,w=i.stopAtErrors!==!0,D=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,B=i.isEvalSupported!==!1,N=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!sa,I=typeof i.isChrome=="boolean"?i.isChrome:!Na.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),F=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,z=typeof i.disableFontFace=="boolean"?i.disableFontFace:sa,U=i.fontExtraProperties===!0,P=i.enableXfa===!0,X=i.ownerDocument||globalThis.document,lt=i.disableRange===!0,it=i.disableStream===!0,ut=i.disableAutoFetch===!0,dt=i.pdfBug===!0,j=i.CanvasFactory||ont,tt=i.FilterFactory||cnt,nt=i.enableHWA===!0,_t=u?u.length:i.length??NaN,J=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!sa&&!z,ot=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:T===AI&&S===EI&&_&&E&&d_(_,document.baseURI)&&d_(E,document.baseURI);i.canvasFactory&&B9("`canvasFactory`-instance option, please use `CanvasFactory` instead."),i.filterFactory&&B9("`filterFactory`-instance option, please use `FilterFactory` instead.");const xt=null;jtt(g);const Et={canvasFactory:new j({ownerDocument:X,enableHWA:nt}),filterFactory:new tt({docId:e,ownerDocument:X}),cMapReaderFactory:ot?null:new T({baseUrl:_,isCompressed:b}),standardFontDataFactory:ot?null:new S({baseUrl:E})};if(!m){const Bt={verbosity:g,port:Yh.workerPort};m=Bt.port?tv.fromPort(Bt):new tv(Bt),t._worker=m}const ct={docId:e,apiVersion:"4.8.69",data:s,password:l,disableAutoFetch:ut,rangeChunkSize:f,length:_t,docBaseUrl:v,enableXfa:P,evaluatorOptions:{maxImageSize:D,disableFontFace:z,ignoreErrors:w,isEvalSupported:B,isOffscreenCanvasSupported:N,isChrome:I,canvasMaxAreaInBytes:F,fontExtraProperties:U,useSystemFonts:J,cMapUrl:ot?_:null,standardFontDataUrl:ot?E:null}},wt={disableFontFace:z,fontExtraProperties:U,ownerDocument:X,pdfBug:dt,styleElement:xt,loadingParams:{disableAutoFetch:ut,enableXfa:P}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Bt=m.messageHandler.sendWithPromise("GetDocRequest",ct,s?[s.buffer]:null);let Ut;if(u)Ut=new Fet(u,{disableRange:lt,disableStream:it});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Wt;sa?Wt=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&d_(n)?Q9:Jet:Wt=d_(n)?Q9:Xet,Ut=new Wt({url:n,length:_t,httpHeaders:r,withCredentials:a,rangeChunkSize:f,disableRange:lt,disableStream:it})}return Bt.then(Wt=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ve=new A_(e,Wt,m.port),ee=new vnt(ve,t,Ut,wt,Et);t._transport=ee,ve.send("Ready",null)})}).catch(t._capability.reject),t}function fnt(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(sa&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function dnt(i){if(sa&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return FM(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function j9(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var CE;const wE=class wE{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Sa(wE,CE)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};CE=new WeakMap,W(wE,CE,0);let NC=wE,HI=class{constructor(t,e,n=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Oi("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class pnt{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Hn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Od,Lh,El,k1,j4;class mnt{constructor(t,e,n,s=!1){W(this,El);W(this,Od,null);W(this,Lh,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new D9:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new zI,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new Hx({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Hn(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:s=vd.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:f=null,printAnnotationStorage:m=null,isEditing:g=!1}){var B,N;(B=this._stats)==null||B.time("Overall");const v=this._transport.getRenderingIntent(n,s,m,g),{renderingIntent:_,cacheKey:b}=v;G(this,Lh,!1),V(this,El,j4).call(this),l||(l=this._transport.getOptionalContentConfig(_));let T=this._intentStates.get(b);T||(T=Object.create(null),this._intentStates.set(b,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const E=!!(_&Po.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(N=this._stats)==null||N.time("Page Request"),this._pumpOperatorList(v));const S=I=>{var F;T.renderTasks.delete(w),(this._maybeCleanupAfterRender||E)&&G(this,Lh,!0),V(this,El,k1).call(this,!E),I?(w.capability.reject(I),this._abortOperatorList({intentState:T,reason:I instanceof Error?I:new Error(I)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new UC({callback:S,params:{canvasContext:t,viewport:e,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:f});(T.renderTasks||(T.renderTasks=new Set)).add(w);const D=w.task;return Promise.all([T.displayReadyCapability.promise,l]).then(([I,F])=>{var z;if(this.destroyed){S();return}if((z=this._stats)==null||z.time("Rendering"),!(F.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:I,optionalContentConfig:F}),w.operatorListChanged()}).catch(S),D}getOperatorList({intent:t="display",annotationMode:e=vd.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var f;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(u))}const a=this._transport.getRenderingIntent(t,e,n,s,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let u;return l.opListReadCapability||(u=Object.create(null),u.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(u),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>lA.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function r(){a.read().then(function({value:u,done:f}){if(f){n(l);return}l.lang??(l.lang=u.lang),Object.assign(l.styles,u.styles),l.items.push(...u.items),r()},s)}const a=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),G(this,Lh,!1),V(this,El,j4).call(this),Promise.all(t)}cleanup(t=!1){G(this,Lh,!0);const e=V(this,El,k1).call(this,!1);return t&&e&&this._stats&&(this._stats=new D9),e}_startRenderPage(t,e){var s,r;const n=this._intentStates.get(e);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&V(this,El,k1).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:r,transfer:a}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},a).getReader(),f=this._intentStates.get(e);f.streamReader=u;const m=()=>{u.read().then(({value:g,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),m())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();V(this,El,k1).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof T7){let s=rnt;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new c0(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Od=new WeakMap,Lh=new WeakMap,El=new WeakSet,k1=function(t=!1){if(V(this,El,j4).call(this),!x(this,Lh)||this.destroyed)return!1;if(t)return G(this,Od,setTimeout(()=>{G(this,Od,null),V(this,El,k1).call(this,!1)},ant)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),G(this,Lh,!1),!0},j4=function(){x(this,Od)&&(clearTimeout(x(this,Od)),G(this,Od,null))};var Dh,RE;class gnt{constructor(){W(this,Dh,new Map);W(this,RE,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};x(this,RE).then(()=>{for(const[s]of x(this,Dh))s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){An("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}x(this,Dh).set(e,s)}removeEventListener(t,e){const n=x(this,Dh).get(e);n==null||n(),x(this,Dh).delete(e)}terminate(){for(const[,t]of x(this,Dh))t==null||t();x(this,Dh).clear()}}Dh=new WeakMap,RE=new WeakMap;var LE,lg,cg,Tv,X4,Cv,q4;const Hi=class Hi{constructor({name:t=null,port:e=null,verbosity:n=Xtt()}={}){W(this,Tv);var s;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((s=x(Hi,cg))!=null&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(x(Hi,cg)||G(Hi,cg,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return sa?Promise.all([sp.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new A_("main","worker",t),this._messageHandler.on("ready",function(){}),V(this,Tv,X4).call(this)}_initialize(){if(x(Hi,lg)||x(Hi,Cv,q4)){this._setupFakeWorker();return}let{workerSrc:t}=Hi;try{Hi._isSameOrigin(window.location.href,t)||(t=Hi._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new A_("main","worker",e),s=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),n.on("test",l=>{if(r.abort(),this.destroyed||!l){s();return}this._messageHandler=n,this._port=e,this._webWorker=e,V(this,Tv,X4).call(this)}),n.on("ready",l=>{if(r.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{UM("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){x(Hi,lg)||(An("Setting up fake worker."),G(Hi,lg,!0)),Hi._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new gnt;this._port=e;const n=`fake${Sa(Hi,LE)._++}`,s=new A_(n+"_worker",n,e);t.setup(s,e),this._messageHandler=new A_(n,n+"_worker",e),V(this,Tv,X4).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=x(Hi,cg))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=x(this,cg))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Hi(t)}static get workerSrc(){if(Yh.workerSrc)return Yh.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Hn(this,"_setupFakeWorkerGlobal",(async()=>x(this,Cv,q4)?x(this,Cv,q4):(await import(this.workerSrc)).WorkerMessageHandler)())}};LE=new WeakMap,lg=new WeakMap,cg=new WeakMap,Tv=new WeakSet,X4=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Cv=new WeakSet,q4=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},W(Hi,Cv),W(Hi,LE,0),W(Hi,lg,!1),W(Hi,cg),sa&&(G(Hi,lg,!0),Yh.workerSrc||(Yh.workerSrc="./pdf.worker.mjs")),Hi._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const s=new URL(e,n);return n.origin===s.origin},Hi._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let tv=Hi;var Bh,Cu,wv,Rv,wu,ug,x_;class vnt{constructor(t,e,n,s,r){W(this,ug);W(this,Bh,new Map);W(this,Cu,new Map);W(this,wv,new Map);W(this,Rv,new Map);W(this,wu,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new zI,this.fontLoader=new det({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Hn(this,"annotationStorage",new L7)}getRenderingIntent(t,e=vd.ENABLE,n=null,s=!1,r=!1){let a=Po.DISPLAY,l=bC;switch(t){case"any":a=Po.ANY;break;case"display":break;case"print":a=Po.PRINT;break;default:An(`getRenderingIntent - invalid intent: ${t}`)}const u=a&Po.PRINT&&n instanceof vI?n:this.annotationStorage;switch(e){case vd.DISABLE:a+=Po.ANNOTATIONS_DISABLE;break;case vd.ENABLE:break;case vd.ENABLE_FORMS:a+=Po.ANNOTATIONS_FORMS;break;case vd.ENABLE_STORAGE:a+=Po.ANNOTATIONS_STORAGE,l=u.serializable;break;default:An(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(a+=Po.IS_EDITING),r&&(a+=Po.OPLIST);const{ids:f,hash:m}=u.modifiedIds,g=[a,l.hash,m];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:l,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=x(this,wu))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of x(this,Cu).values())t.push(s._destroy());x(this,Cu).clear(),x(this,wv).clear(),x(this,Rv).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),x(this,Bh).clear(),this.filterFactory.destroy(),DC.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new c0("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{Xs(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){s.close();return}Xs(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:a}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=u=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:u.loaded,total:u.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:a}}),t.on("GetRangeReader",(n,s)=>{Xs(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:a,done:l}){if(l){s.close();return}Xs(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{r.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new pnt(n,this))}),t.on("DocException",function(n){let s;switch(n.name){case"PasswordException":s=new tC(n.message,n.code);break;case"InvalidPDFException":s=new VN(n.message);break;case"MissingPDFException":s=new l0(n.message);break;case"UnexpectedResponseException":s=new PM(n.message,n.status);break;case"UnknownErrorException":s=new eC(n.message,n.details);break;default:Oi("DocException - expected a valid Error.")}e._capability.reject(s)}),t.on("PasswordRequest",n=>{if(G(this,wu,Promise.withResolvers()),e.onPassword){const s=r=>{r instanceof Error?x(this,wu).reject(r):x(this,wu).resolve({password:r})};try{e.onPassword(s,n.code)}catch(r){x(this,wu).reject(r)}}else x(this,wu).reject(new tC(n.message,n.code));return x(this,wu).promise}),t.on("DataLoaded",n=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;x(this,Cu).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,r])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:l,fontExtraProperties:u,pdfBug:f}=this._params;if("error"in r){const _=r.error;An(`Error during font loading: ${_}`),this.commonObjs.resolve(n,_);break}const m=f&&((a=globalThis.FontInspector)!=null&&a.enabled)?(_,b)=>globalThis.FontInspector.fontAdded(_,b):null,g=new pet(r,{disableFontFace:l,inspectFont:m});this.fontLoader.bind(g).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u&&g.data&&(g.data=null),this.commonObjs.resolve(n,g)});break;case"CopyLocalImage":const{imageRef:v}=r;Xs(v,"The imageRef must be defined.");for(const _ of x(this,Cu).values())for(const[,b]of _.objs)if((b==null?void 0:b.ref)===v)return b.dataLen?(this.commonObjs.resolve(n,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,r,a])=>{var u;if(this.destroyed)return;const l=x(this,Cu).get(s);if(!l.objs.has(n)){if(l._intentStates.size===0){(u=a==null?void 0:a.bitmap)==null||u.close();return}switch(r){case"Image":l.objs.resolve(n,a),(a==null?void 0:a.dataLen)>Gtt&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&An("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=x(this,wv).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&x(this,Rv).set(r.refStr,t);const a=new mnt(e,r,this,this._params.pdfBug);return x(this,Cu).set(e,a),a});return x(this,wv).set(e,s),s}getPageIndex(t){return j9(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return V(this,ug,x_).call(this,"GetFieldObjects")}hasJSActions(){return V(this,ug,x_).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return V(this,ug,x_).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return V(this,ug,x_).call(this,"GetOptionalContentConfig").then(e=>new Pet(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=x(this,Bh).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,a;return{info:s[0],metadata:s[1]?new Iet(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return x(this,Bh).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of x(this,Cu).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),x(this,Bh).clear(),this.filterFactory.destroy(!0),DC.cleanup()}}cachedPageNumber(t){if(!j9(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return x(this,Rv).get(e)??null}}Bh=new WeakMap,Cu=new WeakMap,wv=new WeakMap,Rv=new WeakMap,wu=new WeakMap,ug=new WeakSet,x_=function(t,e=null){const n=x(this,Bh).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return x(this,Bh).set(t,s),s};const x4=Symbol("INITIAL_DATA");var mc,jA,IC;class zI{constructor(){W(this,jA);W(this,mc,Object.create(null))}get(t,e=null){if(e){const s=V(this,jA,IC).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=x(this,mc)[t];if(!n||n.data===x4)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=x(this,mc)[t];return!!e&&e.data!==x4}resolve(t,e=null){const n=V(this,jA,IC).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in x(this,mc)){const{data:n}=x(this,mc)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}G(this,mc,Object.create(null))}*[Symbol.iterator](){for(const t in x(this,mc)){const{data:e}=x(this,mc)[t];e!==x4&&(yield[t,e])}}}mc=new WeakMap,jA=new WeakSet,IC=function(t){var e;return(e=x(this,mc))[t]||(e[t]={...Promise.withResolvers(),data:x4})};var Nd;class ynt{constructor(t){W(this,Nd,null);G(this,Nd,t),this.onContinue=null}get promise(){return x(this,Nd).capability.promise}cancel(t=0){x(this,Nd).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=x(this,Nd).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=x(this,Nd);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Nd=new WeakMap;var Id,hg;const Rm=class Rm{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:l,canvasFactory:u,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:g=!1,pageColors:v=null}){W(this,Id,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=u,this.filterFactory=f,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new ynt(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,u;if(this.cancelled)return;if(this._canvas){if(x(Rm,hg).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");x(Rm,hg).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:r,background:a}=this.params;this.gfx=new $1(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),x(this,Id)&&(window.cancelAnimationFrame(x(this,Id)),G(this,Id,null)),x(Rm,hg).delete(this._canvas),this.callback(t||new T7(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?G(this,Id,window.requestAnimationFrame(()=>{G(this,Id,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),x(Rm,hg).delete(this._canvas),this.callback())))}};Id=new WeakMap,hg=new WeakMap,W(Rm,hg,new WeakSet);let UC=Rm;const _nt="4.8.69",Ant="3634dab10";function X9(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function o_(i){return Math.max(0,Math.min(255,255*i))}class q9{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=o_(t),[t,t,t]}static G_HTML([t]){const e=X9(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(o_)}static RGB_HTML(t){return`#${t.map(X9).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[o_(1-Math.min(1,t+s)),o_(1-Math.min(1,n+s)),o_(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,r=1-e,a=1-n,l=Math.min(s,r,a);return["CMYK",s,r,a,l]}}class xnt{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Oi("Abstract method `_createSVG` called.")}}class I7 extends xnt{_createSVG(t){return document.createElementNS(yh,t)}}class GI{static setupStorage(t,e,n,s,r){const a=s.getValue(e,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?t.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{s.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const l of n.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const u=l.target.options,f=u.selectedIndex===-1?"":u[u.selectedIndex].value;s.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:r}){const{attributes:a}=e,l=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[u,f]of Object.entries(a))if(f!=null)switch(u){case"class":f.length&&t.setAttribute(u,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!l||u!=="href"&&u!=="newWindow")&&t.setAttribute(u,f)}l&&r.addLinkAttributes(t,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(t,a.dataId,e,n)}static render(t){var g,v;const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,r=t.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:r,linkService:n});const l=r!=="richText",u=t.div;if(u.append(a),t.viewport){const _=`matrix(${t.viewport.transform.join(",")})`;u.style.transform=_}l&&u.setAttribute("class","xfaLayer xfaFont");const f=[];if(s.children.length===0){if(s.value){const _=document.createTextNode(s.value);a.append(_),l&&lA.shouldBuildText(s.name)&&f.push(_)}return{textDivs:f}}const m=[[s,-1,a]];for(;m.length>0;){const[_,b,T]=m.at(-1);if(b+1===_.children.length){m.pop();continue}const E=_.children[++m.at(-1)[1]];if(E===null)continue;const{name:S}=E;if(S==="#text"){const D=document.createTextNode(E.value);f.push(D),T.append(D);continue}const w=(g=E==null?void 0:E.attributes)!=null&&g.xmlns?document.createElementNS(E.attributes.xmlns,S):document.createElement(S);if(T.append(w),E.attributes&&this.setAttributes({html:w,element:E,storage:e,intent:r,linkService:n}),((v=E.children)==null?void 0:v.length)>0)m.push([E,-1,w]);else if(E.value){const D=document.createTextNode(E.value);l&&lA.shouldBuildText(S)&&f.push(D),w.append(D)}}for(const _ of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Gx=1e3,bnt=9,Jg=new WeakSet;function tf(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class Snt{static create(t){switch(t.data.annotationType){case ks.LINK:return new kI(t);case ks.TEXT:return new Ent(t);case ks.WIDGET:switch(t.data.fieldType){case"Tx":return new Mnt(t);case"Btn":return t.data.radioButton?new jI(t):t.data.checkBox?new Cnt(t):new wnt(t);case"Ch":return new Rnt(t);case"Sig":return new Tnt(t)}return new u0(t);case ks.POPUP:return new FC(t);case ks.FREETEXT:return new KI(t);case ks.LINE:return new Dnt(t);case ks.SQUARE:return new Bnt(t);case ks.CIRCLE:return new Ont(t);case ks.POLYLINE:return new JI(t);case ks.CARET:return new Int(t);case ks.INK:return new U7(t);case ks.POLYGON:return new Nnt(t);case ks.HIGHLIGHT:return new ZI(t);case ks.UNDERLINE:return new Unt(t);case ks.SQUIGGLY:return new Pnt(t);case ks.STRIKEOUT:return new Fnt(t);case ks.STAMP:return new $I(t);case ks.FILEATTACHMENT:return new Hnt(t);default:return new vs(t)}}}var fg,Lv,Dv,XA,PC;const G7=class G7{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){W(this,XA);W(this,fg,null);W(this,Lv,!1);W(this,Dv,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return G7._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;x(this,fg)||G(this,fg,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&V(this,XA,PC).call(this,e),(n=x(this,Dv))==null||n.popup.updateEdited(t)}resetEdited(){var t;x(this,fg)&&(V(this,XA,PC).call(this,x(this,fg).rect),(t=x(this,Dv))==null||t.popup.resetEdited(),G(this,fg,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof u0||(r.tabIndex=Gx);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof FC){const{rotation:T}=e;return!e.hasOwnCanvas&&T!==0&&this.setRotation(T,r),r}const{width:l,height:u}=tf(e.rect);if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const T=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(T>0||E>0){const w=`calc(${T}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;a.borderRadius=w}else if(this instanceof jI){const w=`calc(${l}px * var(--scale-factor)) / calc(${u}px * var(--scale-factor))`;a.borderRadius=w}switch(e.borderStyle.style){case r_.SOLID:a.borderStyle="solid";break;case r_.DASHED:a.borderStyle="dashed";break;case r_.BEVELED:An("Unimplemented border style: beveled");break;case r_.INSET:An("Unimplemented border style: inset");break;case r_.UNDERLINE:a.borderBottomStyle="solid";break}const S=e.borderColor||null;S?(G(this,Lv,!0),a.borderColor=Le.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):a.borderWidth=0}const f=Le.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:g,pageX:v,pageY:_}=s.rawDims;a.left=`${100*(f[0]-v)/m}%`,a.top=`${100*(f[1]-_)/g}%`;const{rotation:b}=e;return e.hasOwnCanvas||b===0?(a.width=`${100*l/m}%`,a.height=`${100*u/g}%`):this.setRotation(b,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:a}=tf(this.data.rect);let l,u;t%180===0?(l=100*r/n,u=100*a/s):(l=100*a/n,u=100*r/s),e.style.width=`${l}%`,e.style.height=`${u}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const r=s.detail[e],a=r[0],l=r.slice(1);s.target.style[n]=q9[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:q9[`${a}_rgb`](l)})};return Hn(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||n[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,r]of Object.entries(e)){const a=n[s];if(a){const l={detail:{[s]:r},target:t};a(l),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,r]=this.data.rect.map(T=>Math.fround(T));if(t.length===8){const[T,E,S,w]=t.subarray(2,6);if(s===T&&r===E&&e===S&&n===w)return}const{style:a}=this.container;let l;if(x(this,Lv)){const{borderColor:T,borderWidth:E}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${T}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const u=s-e,f=r-n,{svgFactory:m}=this,g=m.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0);const v=m.createElement("defs");g.append(v);const _=m.createElement("clipPath"),b=`clippath_${this.data.id}`;_.setAttribute("id",b),_.setAttribute("clipPathUnits","objectBoundingBox"),v.append(_);for(let T=2,E=t.length;T<E;T+=8){const S=t[T],w=t[T+1],D=t[T+2],B=t[T+3],N=m.createElement("rect"),I=(D-e)/u,F=(r-w)/f,z=(S-D)/u,U=(w-B)/f;N.setAttribute("x",I),N.setAttribute("y",F),N.setAttribute("width",z),N.setAttribute("height",U),_.append(N),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${F}" width="${z}" height="${U}"/>`)}x(this,Lv)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(g),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{data:t}=this,e=G(this,Dv,new FC({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Oi("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:a,exportValues:l}of s){if(r===-1||a===e)continue;const u=typeof l=="string"?l:null,f=document.querySelector(`[data-element-id="${a}"]`);if(f&&!Jg.has(f)){An(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:u,domElement:f})}return n}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,a=s.getAttribute("data-element-id");a!==e&&Jg.has(s)&&n.push({id:a,exportValue:r,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};fg=new WeakMap,Lv=new WeakMap,Dv=new WeakMap,XA=new WeakSet,PC=function(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:l,pageY:u}}}}=this;n==null||n.splice(0,4,...t);const{width:f,height:m}=tf(t);e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(a-t[3]+u)/a}%`,s===0?(e.width=`${100*f/r}%`,e.height=`${100*m/a}%`):this.setRotation(s)};let vs=G7;var Fo,Sm,VI,QI;class kI extends vs{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});W(this,Fo);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action),r=!0):e.attachment?(V(this,Fo,VI).call(this,s,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(V(this,Fo,QI).call(this,s,e.setOCGState),r=!0):e.dest?(this._bindLink(s,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&V(this,Fo,Sm).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),V(this,Fo,Sm).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const a=s.get(r);a&&(e[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),V(this,Fo,Sm).call(this)}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),V(this,Fo,Sm).call(this),!this._fieldObjects){An('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var g;s==null||s();const{fields:r,refs:a,include:l}=n,u=[];if(r.length!==0||a.length!==0){const v=new Set(a);for(const _ of r){const b=this._fieldObjects[_]||[];for(const{id:T}of b)v.add(T)}for(const _ of Object.values(this._fieldObjects))for(const b of _)v.has(b.id)===l&&u.push(b)}else for(const v of Object.values(this._fieldObjects))u.push(...v);const f=this.annotationStorage,m=[];for(const v of u){const{id:_}=v;switch(m.push(_),v.type){case"text":{const T=v.defaultValue||"";f.setValue(_,{value:T});break}case"checkbox":case"radiobutton":{const T=v.defaultValue===v.exportValues;f.setValue(_,{value:T});break}case"combobox":case"listbox":{const T=v.defaultValue||"";f.setValue(_,{value:T});break}default:continue}const b=document.querySelector(`[data-element-id="${_}"]`);if(b){if(!Jg.has(b)){An(`_bindResetFormAction - element not allowed: ${_}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Fo=new WeakSet,Sm=function(){this.container.setAttribute("data-internal-link","")},VI=function(e,n,s=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,s),!1},V(this,Fo,Sm).call(this)},QI=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),V(this,Fo,Sm).call(this)};class Ent extends vs{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class u0 extends vs{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Na.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,r){n.includes("mouse")?t.addEventListener(n,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(n,a=>{var l;if(n==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a)}}))})}_setEventListeners(t,e,n,s){var r,a,l;for(const[u,f]of n)(f==="Action"||(r=this.data.actions)!=null&&r[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,u,f,s),f==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Le.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||bnt,r=t.style;let a;const l=2,u=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-l),m=Math.round(f/(s5*s))||1,g=f/m;a=Math.min(s,u(g/s5))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(s,u(f/s5))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=Le.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Mnt extends u0{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=n),r.setValue(a.id,{[s]:n})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let l=a.value||"";const u=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;u&&l.length>u&&(l=l.slice(0,u));let f=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const m={userValue:l,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",f??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Jg.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Gx,this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",v=>{t.setValue(e,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",v=>{const _=this.data.defaultFieldValue??"";n.value=m.userValue=_,m.formattedValue=null});let g=v=>{const{formattedValue:_}=m;_!=null&&(v.target.value=_),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",_=>{var T;if(m.focused)return;const{target:b}=_;m.userValue&&(b.value=m.userValue),m.lastCommittedValue=b.value,m.commitKey=1,(T=this.data.actions)!=null&&T.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const b={value(T){m.userValue=T.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),T.target.value=m.userValue},formattedValue(T){const{formattedValue:E}=T.detail;m.formattedValue=E,E!=null&&T.target!==document.activeElement&&(T.target.value=E),t.setValue(e,{formattedValue:E})},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{var D;const{charLimit:E}=T.detail,{target:S}=T;if(E===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",E);let w=m.userValue;!w||w.length<=E||(w=w.slice(0,E),S.value=m.userValue=w,t.setValue(e,{value:w}),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(b,_)}),n.addEventListener("keydown",_=>{var E;m.commitKey=1;let b=-1;if(_.key==="Escape"?b=0:_.key==="Enter"&&!this.data.multiLine?b=2:_.key==="Tab"&&(m.commitKey=3),b===-1)return;const{value:T}=_.target;m.lastCommittedValue!==T&&(m.lastCommittedValue=T,m.userValue=T,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:b,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const v=g;g=null,n.addEventListener("blur",_=>{var T,E;if(!m.focused||!_.relatedTarget)return;(T=this.data.actions)!=null&&T.Blur||(m.focused=!1);const{value:b}=_.target;m.userValue=b,m.lastCommittedValue!==b&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:m.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}})),v(_)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",_=>{var N;m.lastCommittedValue=null;const{data:b,target:T}=_,{value:E,selectionStart:S,selectionEnd:w}=T;let D=S,B=w;switch(_.inputType){case"deleteWordBackward":{const I=E.substring(0,S).match(/\w*[^\w]*$/);I&&(D-=I[0].length);break}case"deleteWordForward":{const I=E.substring(S).match(/^[^\w]*\w*/);I&&(B+=I[0].length);break}case"deleteContentBackward":S===w&&(D-=1);break;case"deleteContentForward":S===w&&(B+=1);break}_.preventDefault(),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,change:b||"",willCommit:!1,selStart:D,selEnd:B}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing=`calc(${_}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Tnt extends u0{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Cnt extends u0{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Jg.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Gx,r.addEventListener("change",a=>{const{name:l,checked:u}=a.target;for(const f of this._getElementsByName(l,n)){const m=u&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(n,{value:u})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue||"Off";a.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const l={value(u){u.target.checked=u.detail.value!=="Off",t.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class jI extends u0{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const a of this._getElementsByName(e.fieldName,n))t.setValue(a.id,{value:!1});const r=document.createElement("input");if(Jg.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=Gx,r.addEventListener("change",a=>{const{name:l,checked:u}=a.target;for(const f of this._getElementsByName(l,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:u})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue;a.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const u={value:f=>{const m=a===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const v=m&&g.id===n;g.domElement&&(g.domElement.checked=v),t.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class wnt extends kI{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class Rnt extends u0{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Jg.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Gx;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",m=>{const g=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===g});for(const m of this.data.options){const g=document.createElement("option");g.textContent=m.displayValue,g.value=m.exportValue,n.value.includes(m.exportValue)&&(g.setAttribute("selected",!0),r=!1),s.append(g)}let a=null;if(r){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),s.prepend(m),a=()=>{m.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const l=m=>{const g=m?"value":"textContent",{options:v,multiple:_}=s;return _?Array.prototype.filter.call(v,b=>b.selected).map(b=>b[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let u=l(!1);const f=m=>{const g=m.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",m=>{const g={value(v){a==null||a();const _=v.detail.value,b=new Set(Array.isArray(_)?_:[_]);for(const T of s.options)T.selected=b.has(T.value);t.setValue(e,{value:l(!0)}),u=l(!1)},multipleSelection(v){s.multiple=!0},remove(v){const _=s.options,b=v.detail.remove;_[b].selected=!1,s.remove(b),_.length>0&&Array.prototype.findIndex.call(_,E=>E.selected)===-1&&(_[0].selected=!0),t.setValue(e,{value:l(!0),items:f(v)}),u=l(!1)},clear(v){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),u=l(!1)},insert(v){const{index:_,displayValue:b,exportValue:T}=v.detail.insert,E=s.children[_],S=document.createElement("option");S.textContent=b,S.value=T,E?E.before(S):s.append(S),t.setValue(e,{value:l(!0),items:f(v)}),u=l(!1)},items(v){const{items:_}=v.detail;for(;s.length!==0;)s.remove(0);for(const b of _){const{displayValue:T,exportValue:E}=b,S=document.createElement("option");S.textContent=T,S.value=E,s.append(S)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:l(!0),items:f(v)}),u=l(!1)},indices(v){const _=new Set(v.detail.indices);for(const b of v.target.options)b.selected=_.has(b.index);t.setValue(e,{value:l(!0)}),u=l(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,m)}),s.addEventListener("input",m=>{var _;const g=l(!0),v=l(!1);t.setValue(e,{value:g}),m.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:u,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):s.addEventListener("input",function(m){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class FC extends vs{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:vs._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Lnt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${M7}${n}`).join(",")),this.container}}var Bv,DE,BE,Ov,dg,ss,Oh,Nv,qA,YA,Iv,Nh,gc,Ih,WA,Uh,KA,pg,mg,Ai,Y4,HC,XI,qI,YI,WI,W4,K4,zC;class Lnt{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:r,contentsObj:a,richText:l,parent:u,rect:f,parentRect:m,open:g}){W(this,Ai);W(this,Bv,V(this,Ai,YI).bind(this));W(this,DE,V(this,Ai,zC).bind(this));W(this,BE,V(this,Ai,K4).bind(this));W(this,Ov,V(this,Ai,W4).bind(this));W(this,dg,null);W(this,ss,null);W(this,Oh,null);W(this,Nv,null);W(this,qA,null);W(this,YA,null);W(this,Iv,null);W(this,Nh,!1);W(this,gc,null);W(this,Ih,null);W(this,WA,null);W(this,Uh,null);W(this,KA,null);W(this,pg,null);W(this,mg,!1);var v;G(this,ss,t),G(this,KA,s),G(this,Oh,a),G(this,Uh,l),G(this,YA,u),G(this,dg,e),G(this,WA,f),G(this,Iv,m),G(this,qA,n),G(this,Nv,w7.toDateObject(r)),this.trigger=n.flatMap(_=>_.getElementsToTriggerPopup());for(const _ of this.trigger)_.addEventListener("click",x(this,Ov)),_.addEventListener("mouseenter",x(this,BE)),_.addEventListener("mouseleave",x(this,DE)),_.classList.add("popupTriggerArea");for(const _ of n)(v=_.container)==null||v.addEventListener("keydown",x(this,Bv));x(this,ss).hidden=!0,g&&V(this,Ai,W4).call(this)}render(){if(x(this,gc))return;const t=G(this,gc,document.createElement("div"));if(t.className="popup",x(this,dg)){const r=t.style.outlineColor=Le.makeHexColor(...x(this,dg));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=Le.makeHexColor(...x(this,dg).map(l=>Math.floor(.7*(255-l)+l)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=x(this,KA),t.append(e),x(this,Nv)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:x(this,Nv).valueOf()})),e.append(r)}const s=x(this,Ai,Y4);if(s)GI.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(x(this,Oh));t.append(r)}x(this,ss).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const l=s[r];n.append(document.createTextNode(l)),r<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;x(this,pg)||G(this,pg,{contentsObj:x(this,Oh),richText:x(this,Uh)}),t&&G(this,Ih,null),e&&(G(this,Uh,V(this,Ai,qI).call(this,e)),G(this,Oh,null)),(n=x(this,gc))==null||n.remove(),G(this,gc,null)}resetEdited(){var t;x(this,pg)&&({contentsObj:Sa(this,Oh)._,richText:Sa(this,Uh)._}=x(this,pg),G(this,pg,null),(t=x(this,gc))==null||t.remove(),G(this,gc,null),G(this,Ih,null))}forceHide(){G(this,mg,this.isVisible),x(this,mg)&&(x(this,ss).hidden=!0)}maybeShow(){x(this,mg)&&(x(this,gc)||V(this,Ai,K4).call(this),G(this,mg,!1),x(this,ss).hidden=!1)}get isVisible(){return x(this,ss).hidden===!1}}Bv=new WeakMap,DE=new WeakMap,BE=new WeakMap,Ov=new WeakMap,dg=new WeakMap,ss=new WeakMap,Oh=new WeakMap,Nv=new WeakMap,qA=new WeakMap,YA=new WeakMap,Iv=new WeakMap,Nh=new WeakMap,gc=new WeakMap,Ih=new WeakMap,WA=new WeakMap,Uh=new WeakMap,KA=new WeakMap,pg=new WeakMap,mg=new WeakMap,Ai=new WeakSet,Y4=function(){const t=x(this,Uh),e=x(this,Oh);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&x(this,Uh).html||null},HC=function(){var t,e,n;return((n=(e=(t=x(this,Ai,Y4))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},XI=function(){var t,e,n;return((n=(e=(t=x(this,Ai,Y4))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},qI=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:x(this,Ai,XI),fontSize:x(this,Ai,HC)?`calc(${x(this,Ai,HC)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return n},YI=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&x(this,Nh))&&V(this,Ai,W4).call(this)},WI=function(){if(x(this,Ih)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:r}}}=x(this,YA);let a=!!x(this,Iv),l=a?x(this,Iv):x(this,WA);for(const b of x(this,qA))if(!l||Le.intersect(b.data.rect,l)!==null){l=b.data.rect,a=!0;break}const u=Le.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),m=a?l[2]-l[0]+5:0,g=u[0]+m,v=u[1];G(this,Ih,[100*(g-s)/e,100*(v-r)/n]);const{style:_}=x(this,ss);_.left=`${x(this,Ih)[0]}%`,_.top=`${x(this,Ih)[1]}%`},W4=function(){G(this,Nh,!x(this,Nh)),x(this,Nh)?(V(this,Ai,K4).call(this),x(this,ss).addEventListener("click",x(this,Ov)),x(this,ss).addEventListener("keydown",x(this,Bv))):(V(this,Ai,zC).call(this),x(this,ss).removeEventListener("click",x(this,Ov)),x(this,ss).removeEventListener("keydown",x(this,Bv)))},K4=function(){x(this,gc)||this.render(),this.isVisible?x(this,Nh)&&x(this,ss).classList.add("focused"):(V(this,Ai,WI).call(this),x(this,ss).hidden=!1,x(this,ss).style.zIndex=parseInt(x(this,ss).style.zIndex)+1e3)},zC=function(){x(this,ss).classList.remove("focused"),!(x(this,Nh)||!this.isVisible)&&(x(this,ss).hidden=!0,x(this,ss).style.zIndex=parseInt(x(this,ss).style.zIndex)-1e3)};class KI extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=dn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var JA;class Dnt extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,JA,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:s}=tf(e.rect),r=this.svgFactory.create(n,s,!0),a=G(this,JA,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,JA)}addHighlightArea(){this.container.classList.add("highlightArea")}}JA=new WeakMap;var ZA;class Bnt extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,ZA,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:s}=tf(e.rect),r=this.svgFactory.create(n,s,!0),a=e.borderStyle.width,l=G(this,ZA,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",n-a),l.setAttribute("height",s-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,ZA)}addHighlightArea(){this.container.classList.add("highlightArea")}}ZA=new WeakMap;var $A;class Ont extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,$A,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:s}=tf(e.rect),r=this.svgFactory.create(n,s,!0),a=e.borderStyle.width,l=G(this,$A,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",s/2),l.setAttribute("rx",n/2-a/2),l.setAttribute("ry",s/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,$A)}addHighlightArea(){this.container.classList.add("highlightArea")}}$A=new WeakMap;var tx;class JI extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,tx,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:r}}=this;if(!n)return this.container;const{width:a,height:l}=tf(e),u=this.svgFactory.create(a,l,!0);let f=[];for(let g=0,v=n.length;g<v;g+=2){const _=n[g]-e[0],b=e[3]-n[g+1];f.push(`${_},${b}`)}f=f.join(" ");const m=G(this,tx,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",f),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),u.append(m),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,tx)}addHighlightArea(){this.container.classList.add("highlightArea")}}tx=new WeakMap;class Nnt extends JI{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Int extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var ex;class U7 extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,ex,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?dn.HIGHLIGHT:dn.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:n,borderStyle:s,popupRef:r}}=this,{width:a,height:l}=tf(e),u=this.svgFactory.create(a,l,!0);for(const f of n){let m=[];for(let v=0,_=f.length;v<_;v+=2){const b=f[v]-e[0],T=e[3]-f[v+1];m.push(`${b},${T}`)}m=m.join(" ");const g=this.svgFactory.createElement(this.svgElementName);x(this,ex).push(g),g.setAttribute("points",m),g.setAttribute("stroke-width",s.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),u.append(g)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return x(this,ex)}addHighlightArea(){this.container.classList.add("highlightArea")}}ex=new WeakMap;class ZI extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=dn.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Unt extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Pnt extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Fnt extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class $I extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=dn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var nx,ix,GC;class Hnt extends vs{constructor(e){var s;super(e,{isRenderable:!0});W(this,ix);W(this,nx,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",V(this,ix,GC).bind(this)),G(this,nx,s);const{isMac:r}=Na.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&V(this,ix,GC).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return x(this,nx)}addHighlightArea(){this.container.classList.add("highlightArea")}}nx=new WeakMap,ix=new WeakSet,GC=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var sx,gg,vg,rx,$g,tU,kC,dD;let znt=(dD=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:a,structTreeLayer:l}){W(this,$g);W(this,sx,null);W(this,gg,null);W(this,vg,new Map);W(this,rx,null);this.div=t,G(this,sx,e),G(this,gg,n),G(this,rx,l||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return x(this,vg).size>0}async render(t){var a;const{annotations:e}=t,n=this.div;Wg(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new I7,annotationStorage:t.annotationStorage||new L7,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const u=l.annotationType===ks.POPUP;if(u){const g=s.get(l.id);if(!g)continue;r.elements=g}else{const{width:g,height:v}=tf(l.rect);if(g<=0||v<=0)continue}r.data=l;const f=Snt.create(r);if(!f.isRenderable)continue;if(!u&&l.popupRef){const g=s.get(l.popupRef);g?g.push(f):s.set(l.popupRef,[f])}const m=f.render();l.hidden&&(m.style.visibility="hidden"),await V(this,$g,tU).call(this,m,l.id),f._isEditable&&(x(this,vg).set(f.data.id,f),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(f))}V(this,$g,kC).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Wg(e,{rotation:t.rotation}),V(this,$g,kC).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(x(this,vg).values())}getEditableAnnotation(t){return x(this,vg).get(t)}},sx=new WeakMap,gg=new WeakMap,vg=new WeakMap,rx=new WeakMap,$g=new WeakSet,tU=async function(t,e){var a,l;const n=t.firstChild||t,s=n.id=`${M7}${e}`,r=await((a=x(this,rx))==null?void 0:a.getAriaAttributes(s));if(r)for(const[u,f]of r)n.setAttribute(u,f);this.div.append(t),(l=x(this,sx))==null||l.moveElementInDOM(this.div,t,n,!1)},kC=function(){if(!x(this,gg))return;const t=this.div;for(const[e,n]of x(this,gg)){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):s.append(n)}x(this,gg).clear()},dD);const b4=/\r\n?|\n/g;var vc,Do,ax,yg,Bo,Ls,eU,nU,iU,J4,nf,Z4,$4,sU,QC,rU;const Ci=class Ci extends di{constructor(e){super({...e,name:"freeTextEditor"});W(this,Ls);W(this,vc);W(this,Do,"");W(this,ax,`${this.id}-editor`);W(this,yg,null);W(this,Bo);G(this,vc,e.color||Ci._defaultColor||di._defaultLineColor),G(this,Bo,e.fontSize||Ci._defaultFontSize)}static get _keyboardManager(){const e=Ci.prototype,n=a=>a.isEmpty(),s=Kg.TRANSLATE_SMALL,r=Kg.TRANSLATE_BIG;return Hn(this,"_keyboardManager",new zx([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){di.initialize(e,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Ze.FREETEXT_SIZE:Ci._defaultFontSize=n;break;case Ze.FREETEXT_COLOR:Ci._defaultColor=n;break}}updateParams(e,n){switch(e){case Ze.FREETEXT_SIZE:V(this,Ls,eU).call(this,n);break;case Ze.FREETEXT_COLOR:V(this,Ls,nU).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ze.FREETEXT_SIZE,Ci._defaultFontSize],[Ze.FREETEXT_COLOR,Ci._defaultColor||di._defaultLineColor]]}get propertiesToUpdate(){return[[Ze.FREETEXT_SIZE,x(this,Bo)],[Ze.FREETEXT_COLOR,x(this,vc)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ci._internalPadding*e,-(Ci._internalPadding+x(this,Bo))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(dn.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),G(this,yg,new AbortController);const e=this._uiManager.combinedSignal(x(this,yg));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",x(this,ax)),this._isDraggable=!0,(e=x(this,yg))==null||e.abort(),G(this,yg,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=x(this,Do),n=G(this,Do,V(this,Ls,iU).call(this).trimEnd());if(e===n)return;const s=r=>{if(G(this,Do,r),!r){this.remove();return}V(this,Ls,$4).call(this),this._uiManager.rebuild(this),V(this,Ls,J4).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),V(this,Ls,J4).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ci._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",x(this,ax)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${x(this,Bo)}px * var(--scale-factor))`,s.color=x(this,vc),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),dE(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,f]=this.getInitialTranslation();[u,f]=this.pageTranslationToScreen(u,f);const[m,g]=this.pageDimensions,[v,_]=this.pageTranslation;let b,T;switch(this.rotation){case 0:b=e+(l[0]-v)/m,T=n+this.height-(l[1]-_)/g;break;case 90:b=e+(l[0]-v)/m,T=n-(l[1]-_)/g,[u,f]=[f,-u];break;case 180:b=e-this.width+(l[0]-v)/m,T=n-(l[1]-_)/g,[u,f]=[-u,-f];break;case 270:b=e+(l[0]-v-this.height*g)/m,T=n+(l[1]-_-this.width*m)/g,[u,f]=[-f,u];break}this.setAt(b*r,T*a,u,f)}else this.setAt(e*r,n*a,this.width*r,this.height*a);V(this,Ls,$4).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var b,T,E;const n=e.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=V(b=Ci,nf,QC).call(b,n.getData("text")||"").replaceAll(b4,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:u,startOffset:f}=l,m=[],g=[];if(u.nodeType===Node.TEXT_NODE){const S=u.parentElement;if(g.push(u.nodeValue.slice(f).replaceAll(b4,"")),S!==this.editorDiv){let w=m;for(const D of this.editorDiv.childNodes){if(D===S){w=g;continue}w.push(V(T=Ci,nf,Z4).call(T,D))}}m.push(u.nodeValue.slice(0,f).replaceAll(b4,""))}else if(u===this.editorDiv){let S=m,w=0;for(const D of this.editorDiv.childNodes)w++===f&&(S=g),S.push(V(E=Ci,nf,Z4).call(E,D))}G(this,Do,`${m.join(`
`)}${r}${g.join(`
`)}`),V(this,Ls,$4).call(this);const v=new Range;let _=m.reduce((S,w)=>S+w.length,0);for(const{firstChild:S}of this.editorDiv.childNodes)if(S.nodeType===Node.TEXT_NODE){const w=S.nodeValue.length;if(_<=w){v.setStart(S,_),v.setEnd(S,_);break}_-=w}a.removeAllRanges(),a.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,s){var l;let r=null;if(e instanceof KI){const{data:{defaultAppearanceData:{fontSize:u,fontColor:f},rect:m,rotation:g,id:v,popupRef:_},textContent:b,textPosition:T,parent:{page:{pageNumber:E}}}=e;if(!b||b.length===0)return null;r=e={annotationType:dn.FREETEXT,color:Array.from(f),fontSize:u,value:b.join(`
`),position:T,pageIndex:E-1,rect:m.slice(0),rotation:g,id:v,deleted:!1,popupRef:_}}const a=await super.deserialize(e,n,s);return G(a,Bo,e.fontSize),G(a,vc,Le.makeHexColor(...e.color)),G(a,Do,V(l=Ci,nf,QC).call(l,e.value)),a.annotationElementId=e.id||null,a._initialData=r,a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ci._internalPadding*this.parentScale,s=this.getRect(n,n),r=di._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:x(this,vc)),a={annotationType:dn.FREETEXT,color:r,fontSize:x(this,Bo),value:V(this,Ls,sU).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?a:this.annotationElementId&&!V(this,Ls,rU).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${x(this,Bo)}px * var(--scale-factor))`,s.color=x(this,vc),n.replaceChildren();for(const a of x(this,Do).split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),n.append(l)}const r=Ci._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:x(this,Do)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};vc=new WeakMap,Do=new WeakMap,ax=new WeakMap,yg=new WeakMap,Bo=new WeakMap,Ls=new WeakSet,eU=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-x(this,Bo))*this.parentScale),G(this,Bo,r),V(this,Ls,J4).call(this)},s=x(this,Bo);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},nU=function(e){const n=r=>{G(this,vc,this.editorDiv.style.color=r)},s=x(this,vc);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},iU=function(){var s;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(V(s=Ci,nf,Z4).call(s,r)),n=r);return e.join(`
`)},J4=function(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,l=a.style.display,u=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()},nf=new WeakSet,Z4=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(b4,"")},$4=function(){if(this.editorDiv.replaceChildren(),!!x(this,Do))for(const e of x(this,Do).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},sU=function(){return x(this,Do).replaceAll(""," ")},QC=function(e){return e.replaceAll(" ","")},rU=function(e){const{value:n,fontSize:s,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((l,u)=>l!==r[u])||e.pageIndex!==a},W(Ci,nf),Je(Ci,"_freeTextDefaultContent",""),Je(Ci,"_internalPadding",0),Je(Ci,"_defaultColor",null),Je(Ci,"_defaultFontSize",10),Je(Ci,"_type","freetext"),Je(Ci,"_editorType",dn.FREETEXT);let VC=Ci;class aU{toSVGPath(){Oi("Abstract method `toSVGPath` must be implemented.")}get box(){Oi("Abstract getter `box` must be implemented.")}serialize(t,e){Oi("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Oi("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Oi("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Oo,yc,Uv,Pv,Ru,Mn,_g,Ag,ox,lx,Fv,Hv,Ud,cx,OE,NE,Ys,b_,oU,lU,cU,uU,hU,fU;const bh=class bh{constructor({x:t,y:e},n,s,r,a,l=0){W(this,Ys);W(this,Oo);W(this,yc,[]);W(this,Uv);W(this,Pv);W(this,Ru,[]);W(this,Mn,new Float64Array(18));W(this,_g);W(this,Ag);W(this,ox);W(this,lx);W(this,Fv);W(this,Hv);W(this,Ud,[]);G(this,Oo,n),G(this,Hv,r*s),G(this,Pv,a),x(this,Mn).set([NaN,NaN,NaN,NaN,t,e],6),G(this,Uv,l),G(this,lx,x(bh,cx)*s),G(this,ox,x(bh,NE)*s),G(this,Fv,s),x(this,Ud).push(t,e)}isEmpty(){return isNaN(x(this,Mn)[8])}add({x:t,y:e}){var U;G(this,_g,t),G(this,Ag,e);const[n,s,r,a]=x(this,Oo);let[l,u,f,m]=x(this,Mn).subarray(8,12);const g=t-f,v=e-m,_=Math.hypot(g,v);if(_<x(this,ox))return!1;const b=_-x(this,lx),T=b/_,E=T*g,S=T*v;let w=l,D=u;l=f,u=m,f+=E,m+=S,(U=x(this,Ud))==null||U.push(t,e);const B=-S/b,N=E/b,I=B*x(this,Hv),F=N*x(this,Hv);return x(this,Mn).set(x(this,Mn).subarray(2,8),0),x(this,Mn).set([f+I,m+F],4),x(this,Mn).set(x(this,Mn).subarray(14,18),12),x(this,Mn).set([f-I,m-F],16),isNaN(x(this,Mn)[6])?(x(this,Ru).length===0&&(x(this,Mn).set([l+I,u+F],2),x(this,Ru).push(NaN,NaN,NaN,NaN,(l+I-n)/r,(u+F-s)/a),x(this,Mn).set([l-I,u-F],14),x(this,yc).push(NaN,NaN,NaN,NaN,(l-I-n)/r,(u-F-s)/a)),x(this,Mn).set([w,D,l,u,f,m],6),!this.isEmpty()):(x(this,Mn).set([w,D,l,u,f,m],6),Math.abs(Math.atan2(D-u,w-l)-Math.atan2(S,E))<Math.PI/2?([l,u,f,m]=x(this,Mn).subarray(2,6),x(this,Ru).push(NaN,NaN,NaN,NaN,((l+f)/2-n)/r,((u+m)/2-s)/a),[l,u,w,D]=x(this,Mn).subarray(14,18),x(this,yc).push(NaN,NaN,NaN,NaN,((w+l)/2-n)/r,((D+u)/2-s)/a),!0):([w,D,l,u,f,m]=x(this,Mn).subarray(0,6),x(this,Ru).push(((w+5*l)/6-n)/r,((D+5*u)/6-s)/a,((5*l+f)/6-n)/r,((5*u+m)/6-s)/a,((l+f)/2-n)/r,((u+m)/2-s)/a),[f,m,l,u,w,D]=x(this,Mn).subarray(12,18),x(this,yc).push(((w+5*l)/6-n)/r,((D+5*u)/6-s)/a,((5*l+f)/6-n)/r,((5*u+m)/6-s)/a,((l+f)/2-n)/r,((u+m)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=x(this,Ru),e=x(this,yc);if(isNaN(x(this,Mn)[6])&&!this.isEmpty())return V(this,Ys,oU).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);V(this,Ys,cU).call(this,n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return V(this,Ys,lU).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,s,r,a){return new dU(t,e,n,s,r,a)}getOutlines(){var g;const t=x(this,Ru),e=x(this,yc),n=x(this,Mn),[s,r,a,l]=x(this,Oo),u=new Float64Array((((g=x(this,Ud))==null?void 0:g.length)??0)+2);for(let v=0,_=u.length-2;v<_;v+=2)u[v]=(x(this,Ud)[v]-s)/a,u[v+1]=(x(this,Ud)[v+1]-r)/l;if(u[u.length-2]=(x(this,_g)-s)/a,u[u.length-1]=(x(this,Ag)-r)/l,isNaN(n[6])&&!this.isEmpty())return V(this,Ys,uU).call(this,u);const f=new Float64Array(x(this,Ru).length+24+x(this,yc).length);let m=t.length;for(let v=0;v<m;v+=2){if(isNaN(t[v])){f[v]=f[v+1]=NaN;continue}f[v]=t[v],f[v+1]=t[v+1]}m=V(this,Ys,fU).call(this,f,m);for(let v=e.length-6;v>=6;v-=6)for(let _=0;_<6;_+=2){if(isNaN(e[v+_])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[v+_],f[m+1]=e[v+_+1],m+=2}return V(this,Ys,hU).call(this,f,m),this.newFreeDrawOutline(f,u,x(this,Oo),x(this,Fv),x(this,Uv),x(this,Pv))}};Oo=new WeakMap,yc=new WeakMap,Uv=new WeakMap,Pv=new WeakMap,Ru=new WeakMap,Mn=new WeakMap,_g=new WeakMap,Ag=new WeakMap,ox=new WeakMap,lx=new WeakMap,Fv=new WeakMap,Hv=new WeakMap,Ud=new WeakMap,cx=new WeakMap,OE=new WeakMap,NE=new WeakMap,Ys=new WeakSet,b_=function(){const t=x(this,Mn).subarray(4,6),e=x(this,Mn).subarray(16,18),[n,s,r,a]=x(this,Oo);return[(x(this,_g)+(t[0]-e[0])/2-n)/r,(x(this,Ag)+(t[1]-e[1])/2-s)/a,(x(this,_g)+(e[0]-t[0])/2-n)/r,(x(this,Ag)+(e[1]-t[1])/2-s)/a]},oU=function(){const[t,e,n,s]=x(this,Oo),[r,a,l,u]=V(this,Ys,b_).call(this);return`M${(x(this,Mn)[2]-t)/n} ${(x(this,Mn)[3]-e)/s} L${(x(this,Mn)[4]-t)/n} ${(x(this,Mn)[5]-e)/s} L${r} ${a} L${l} ${u} L${(x(this,Mn)[16]-t)/n} ${(x(this,Mn)[17]-e)/s} L${(x(this,Mn)[14]-t)/n} ${(x(this,Mn)[15]-e)/s} Z`},lU=function(t){const e=x(this,yc);t.push(`L${e[4]} ${e[5]} Z`)},cU=function(t){const[e,n,s,r]=x(this,Oo),a=x(this,Mn).subarray(4,6),l=x(this,Mn).subarray(16,18),[u,f,m,g]=V(this,Ys,b_).call(this);t.push(`L${(a[0]-e)/s} ${(a[1]-n)/r} L${u} ${f} L${m} ${g} L${(l[0]-e)/s} ${(l[1]-n)/r}`)},uU=function(t){const e=x(this,Mn),[n,s,r,a]=x(this,Oo),[l,u,f,m]=V(this,Ys,b_).call(this),g=new Float64Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-s)/a,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-s)/a,NaN,NaN,NaN,NaN,l,u,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-s)/a,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-s)/a],0),this.newFreeDrawOutline(g,t,x(this,Oo),x(this,Fv),x(this,Uv),x(this,Pv))},hU=function(t,e){const n=x(this,yc);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},fU=function(t,e){const n=x(this,Mn).subarray(4,6),s=x(this,Mn).subarray(16,18),[r,a,l,u]=x(this,Oo),[f,m,g,v]=V(this,Ys,b_).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/l,(n[1]-a)/u,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-a)/u],e),e+=24},W(bh,cx,8),W(bh,OE,2),W(bh,NE,x(bh,cx)+x(bh,OE));let mE=bh;var zv,xg,Ph,ux,No,hx,ms,ro,S_,E_,pU;class dU extends aU{constructor(e,n,s,r,a,l){super();W(this,ro);W(this,zv);W(this,xg,null);W(this,Ph);W(this,ux);W(this,No);W(this,hx);W(this,ms);G(this,ms,e),G(this,No,n),G(this,zv,s),G(this,hx,r),G(this,Ph,a),G(this,ux,l),V(this,ro,pU).call(this,l);const{x:u,y:f,width:m,height:g}=x(this,xg);for(let v=0,_=e.length;v<_;v+=2)e[v]=(e[v]-u)/m,e[v+1]=(e[v+1]-f)/g;for(let v=0,_=n.length;v<_;v+=2)n[v]=(n[v]-u)/m,n[v+1]=(n[v+1]-f)/g}toSVGPath(){const e=[`M${x(this,ms)[4]} ${x(this,ms)[5]}`];for(let n=6,s=x(this,ms).length;n<s;n+=6){if(isNaN(x(this,ms)[n])){e.push(`L${x(this,ms)[n+4]} ${x(this,ms)[n+5]}`);continue}e.push(`C${x(this,ms)[n]} ${x(this,ms)[n+1]} ${x(this,ms)[n+2]} ${x(this,ms)[n+3]} ${x(this,ms)[n+4]} ${x(this,ms)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,s,r],a){const l=s-e,u=r-n;let f,m;switch(a){case 0:f=V(this,ro,S_).call(this,x(this,ms),e,r,l,-u),m=V(this,ro,S_).call(this,x(this,No),e,r,l,-u);break;case 90:f=V(this,ro,E_).call(this,x(this,ms),e,n,l,u),m=V(this,ro,E_).call(this,x(this,No),e,n,l,u);break;case 180:f=V(this,ro,S_).call(this,x(this,ms),s,n,-l,u),m=V(this,ro,S_).call(this,x(this,No),s,n,-l,u);break;case 270:f=V(this,ro,E_).call(this,x(this,ms),s,r,-l,-u),m=V(this,ro,E_).call(this,x(this,No),s,r,-l,-u);break}return{outline:Array.from(f),points:[Array.from(m)]}}get box(){return x(this,xg)}newOutliner(e,n,s,r,a,l=0){return new mE(e,n,s,r,a,l)}getNewOutline(e,n){const{x:s,y:r,width:a,height:l}=x(this,xg),[u,f,m,g]=x(this,zv),v=a*m,_=l*g,b=s*m+u,T=r*g+f,E=this.newOutliner({x:x(this,No)[0]*v+b,y:x(this,No)[1]*_+T},x(this,zv),x(this,hx),e,x(this,ux),n??x(this,Ph));for(let S=2;S<x(this,No).length;S+=2)E.add({x:x(this,No)[S]*v+b,y:x(this,No)[S+1]*_+T});return E.getOutlines()}get mustRemoveSelfIntersections(){return!0}}zv=new WeakMap,xg=new WeakMap,Ph=new WeakMap,ux=new WeakMap,No=new WeakMap,hx=new WeakMap,ms=new WeakMap,ro=new WeakSet,S_=function(e,n,s,r,a){const l=new Float64Array(e.length);for(let u=0,f=e.length;u<f;u+=2)l[u]=n+e[u]*r,l[u+1]=s+e[u+1]*a;return l},E_=function(e,n,s,r,a){const l=new Float64Array(e.length);for(let u=0,f=e.length;u<f;u+=2)l[u]=n+e[u+1]*r,l[u+1]=s+e[u]*a;return l},pU=function(e){const n=x(this,ms);let s=n[4],r=n[5],a=s,l=r,u=s,f=r,m=s,g=r;const v=e?Math.max:Math.min;for(let S=6,w=n.length;S<w;S+=6){if(isNaN(n[S]))a=Math.min(a,n[S+4]),l=Math.min(l,n[S+5]),u=Math.max(u,n[S+4]),f=Math.max(f,n[S+5]),g<n[S+5]?(m=n[S+4],g=n[S+5]):g===n[S+5]&&(m=v(m,n[S+4]));else{const D=Le.bezierBoundingBox(s,r,...n.slice(S,S+6));a=Math.min(a,D[0]),l=Math.min(l,D[1]),u=Math.max(u,D[2]),f=Math.max(f,D[3]),g<D[3]?(m=D[2],g=D[3]):g===D[3]&&(m=v(m,D[2]))}s=n[S+4],r=n[S+5]}const _=a-x(this,Ph),b=l-x(this,Ph),T=u-a+2*x(this,Ph),E=f-l+2*x(this,Ph);G(this,xg,{x:_,y:b,width:T,height:E,lastPoint:[m,g]})};var fx,Pd,_c,Ua,mU,t3,gU,vU,jC;class Y9{constructor(t,e=0,n=0,s=!0){W(this,Ua);W(this,fx);W(this,Pd,[]);W(this,_c,[]);let r=1/0,a=-1/0,l=1/0,u=-1/0;const f=10**-4;for(const{x:E,y:S,width:w,height:D}of t){const B=Math.floor((E-e)/f)*f,N=Math.ceil((E+w+e)/f)*f,I=Math.floor((S-e)/f)*f,F=Math.ceil((S+D+e)/f)*f,z=[B,I,F,!0],U=[N,I,F,!1];x(this,Pd).push(z,U),r=Math.min(r,B),a=Math.max(a,N),l=Math.min(l,I),u=Math.max(u,F)}const m=a-r+2*n,g=u-l+2*n,v=r-n,_=l-n,b=x(this,Pd).at(s?-1:-2),T=[b[0],b[2]];for(const E of x(this,Pd)){const[S,w,D]=E;E[0]=(S-v)/m,E[1]=(w-_)/g,E[2]=(D-_)/g}G(this,fx,{x:v,y:_,width:m,height:g,lastPoint:T})}getOutlines(){x(this,Pd).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of x(this,Pd))e[3]?(t.push(...V(this,Ua,jC).call(this,e)),V(this,Ua,gU).call(this,e)):(V(this,Ua,vU).call(this,e),t.push(...V(this,Ua,jC).call(this,e)));return V(this,Ua,mU).call(this,t)}}fx=new WeakMap,Pd=new WeakMap,_c=new WeakMap,Ua=new WeakSet,mU=function(t){const e=[],n=new Set;for(const a of t){const[l,u,f]=a;e.push([l,u,a],[l,f,a])}e.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=e.length;a<l;a+=2){const u=e[a][2],f=e[a+1][2];u.push(f),f.push(u),n.add(u),n.add(f)}const s=[];let r;for(;n.size>0;){const a=n.values().next().value;let[l,u,f,m,g]=a;n.delete(a);let v=l,_=u;for(r=[l,f],s.push(r);;){let b;if(n.has(m))b=m;else if(n.has(g))b=g;else break;n.delete(b),[l,u,f,m,g]=b,v!==l&&(r.push(v,_,l,_===u?u:f),v=l),_=_===u?f:u}r.push(v,_)}return new Gnt(s,x(this,fx))},t3=function(t){const e=x(this,_c);let n=0,s=e.length-1;for(;n<=s;){const r=n+s>>1,a=e[r][0];if(a===t)return r;a<t?n=r+1:s=r-1}return s+1},gU=function([,t,e]){const n=V(this,Ua,t3).call(this,t);x(this,_c).splice(n,0,[t,e])},vU=function([,t,e]){const n=V(this,Ua,t3).call(this,t);for(let s=n;s<x(this,_c).length;s++){const[r,a]=x(this,_c)[s];if(r!==t)break;if(r===t&&a===e){x(this,_c).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[r,a]=x(this,_c)[s];if(r!==t)break;if(r===t&&a===e){x(this,_c).splice(s,1);return}}},jC=function(t){const[e,n,s]=t,r=[[e,n,s]],a=V(this,Ua,t3).call(this,s);for(let l=0;l<a;l++){const[u,f]=x(this,_c)[l];for(let m=0,g=r.length;m<g;m++){const[,v,_]=r[m];if(!(f<=v||_<=u)){if(v>=u){if(_>f)r[m][1]=f;else{if(g===1)return[];r.splice(m,1),m--,g--}continue}r[m][2]=u,_>f&&r.push([e,f,_])}}}return r};var dx,Gv;class Gnt extends aU{constructor(e,n){super();W(this,dx);W(this,Gv);G(this,Gv,e),G(this,dx,n)}toSVGPath(){const e=[];for(const n of x(this,Gv)){let[s,r]=n;e.push(`M${s} ${r}`);for(let a=2;a<n.length;a+=2){const l=n[a],u=n[a+1];l===s?(e.push(`V${u}`),r=u):u===r&&(e.push(`H${l}`),s=l)}e.push("Z")}return e.join(" ")}serialize([e,n,s,r],a){const l=[],u=s-e,f=r-n;for(const m of x(this,Gv)){const g=new Array(m.length);for(let v=0;v<m.length;v+=2)g[v]=e+m[v]*u,g[v+1]=r-m[v+1]*f;l.push(g)}return l}get box(){return x(this,dx)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}dx=new WeakMap,Gv=new WeakMap;class XC extends mE{newFreeDrawOutline(t,e,n,s,r,a){return new knt(t,e,n,s,r,a)}get classNamesForDrawing(){return["highlight","free"]}}class knt extends dU{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,e,n,s,r,a=0){return new XC(t,e,n,s,r,a)}}var Ac,bg,kv,Qs,px,Vv,mx,gx,Fd,xc,Qv,vx,_i,qC,YC,WC,Em,yU,dd;const $a=class $a{constructor({editor:t=null,uiManager:e=null}){W(this,_i);W(this,Ac,null);W(this,bg,null);W(this,kv);W(this,Qs,null);W(this,px,!1);W(this,Vv,!1);W(this,mx,null);W(this,gx);W(this,Fd,null);W(this,xc,null);W(this,Qv);var n;t?(G(this,Vv,!1),G(this,Qv,Ze.HIGHLIGHT_COLOR),G(this,mx,t)):(G(this,Vv,!0),G(this,Qv,Ze.HIGHLIGHT_DEFAULT_COLOR)),G(this,xc,(t==null?void 0:t._uiManager)||e),G(this,gx,x(this,xc)._eventBus),G(this,kv,(t==null?void 0:t.color)||((n=x(this,xc))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),x($a,vx)||G($a,vx,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Hn(this,"_keyboardManager",new zx([[["Escape","mac+Escape"],$a.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],$a.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],$a.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],$a.prototype._moveToPrevious],[["Home","mac+Home"],$a.prototype._moveToBeginning],[["End","mac+End"],$a.prototype._moveToEnd]]))}renderButton(){const t=G(this,Ac,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=x(this,xc)._signal;t.addEventListener("click",V(this,_i,Em).bind(this),{signal:e}),t.addEventListener("keydown",V(this,_i,WC).bind(this),{signal:e});const n=G(this,bg,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=x(this,kv),t.append(n),t}renderMainDropdown(){const t=G(this,Qs,V(this,_i,qC).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===x(this,Ac)){V(this,_i,Em).call(this,t);return}const e=t.target.getAttribute("data-color");e&&V(this,_i,YC).call(this,e,t)}_moveToNext(t){var e,n;if(!x(this,_i,dd)){V(this,_i,Em).call(this,t);return}if(t.target===x(this,Ac)){(e=x(this,Qs).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=x(this,Qs))==null?void 0:e.firstChild)||t.target===x(this,Ac)){x(this,_i,dd)&&this._hideDropdownFromKeyboard();return}x(this,_i,dd)||V(this,_i,Em).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!x(this,_i,dd)){V(this,_i,Em).call(this,t);return}(e=x(this,Qs).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!x(this,_i,dd)){V(this,_i,Em).call(this,t);return}(e=x(this,Qs).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=x(this,Qs))==null||t.classList.add("hidden"),(e=x(this,Fd))==null||e.abort(),G(this,Fd,null)}_hideDropdownFromKeyboard(){var t;if(!x(this,Vv)){if(!x(this,_i,dd)){(t=x(this,mx))==null||t.unselect();return}this.hideDropdown(),x(this,Ac).focus({preventScroll:!0,focusVisible:x(this,px)})}}updateColor(t){if(x(this,bg)&&(x(this,bg).style.backgroundColor=t),!x(this,Qs))return;const e=x(this,xc).highlightColors.values();for(const n of x(this,Qs).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=x(this,Ac))==null||t.remove(),G(this,Ac,null),G(this,bg,null),(e=x(this,Qs))==null||e.remove(),G(this,Qs,null)}};Ac=new WeakMap,bg=new WeakMap,kv=new WeakMap,Qs=new WeakMap,px=new WeakMap,Vv=new WeakMap,mx=new WeakMap,gx=new WeakMap,Fd=new WeakMap,xc=new WeakMap,Qv=new WeakMap,vx=new WeakMap,_i=new WeakSet,qC=function(){const t=document.createElement("div"),e=x(this,xc)._signal;t.addEventListener("contextmenu",Ll,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of x(this,xc).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",x($a,vx)[n]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=s,r.setAttribute("aria-selected",s===x(this,kv)),r.addEventListener("click",V(this,_i,YC).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",V(this,_i,WC).bind(this),{signal:e}),t},YC=function(t,e){e.stopPropagation(),x(this,gx).dispatch("switchannotationeditorparams",{source:this,type:x(this,Qv),value:t})},WC=function(t){$a._keyboardManager.exec(this,t)},Em=function(t){if(x(this,_i,dd)){this.hideDropdown();return}if(G(this,px,t.detail===0),x(this,Fd)||(G(this,Fd,new AbortController),window.addEventListener("pointerdown",V(this,_i,yU).bind(this),{signal:x(this,xc).combinedSignal(x(this,Fd))})),x(this,Qs)){x(this,Qs).classList.remove("hidden");return}const e=G(this,Qs,V(this,_i,qC).call(this));x(this,Ac).append(e)},yU=function(t){var e;(e=x(this,Qs))!=null&&e.contains(t.target)||this.hideDropdown()},dd=function(){return x(this,Qs)&&!x(this,Qs).classList.contains("hidden")},W($a,vx,null);let gE=$a;var jv,yx,Fh,Sg,Xv,xl,_x,Ax,Eg,bc,$r,no,qv,Hh,js,Yv,bl,xx,un,KC,e3,_U,AU,xU,JC,Mm,Ml,V1,bU,n3,M_,SU,EU,MU,TU,CU;const $n=class $n extends di{constructor(e){super({...e,name:"highlightEditor"});W(this,un);W(this,jv,null);W(this,yx,0);W(this,Fh);W(this,Sg,null);W(this,Xv,null);W(this,xl,null);W(this,_x,null);W(this,Ax,0);W(this,Eg,null);W(this,bc,null);W(this,$r,null);W(this,no,!1);W(this,qv,null);W(this,Hh);W(this,js,null);W(this,Yv,"");W(this,bl);W(this,xx,"");this.color=e.color||$n._defaultColor,G(this,bl,e.thickness||$n._defaultThickness),G(this,Hh,e.opacity||$n._defaultOpacity),G(this,Fh,e.boxes||null),G(this,xx,e.methodOfCreation||""),G(this,Yv,e.text||""),this._isDraggable=!1,e.highlightId>-1?(G(this,no,!0),V(this,un,e3).call(this,e),V(this,un,Mm).call(this)):x(this,Fh)&&(G(this,jv,e.anchorNode),G(this,yx,e.anchorOffset),G(this,_x,e.focusNode),G(this,Ax,e.focusOffset),V(this,un,KC).call(this),V(this,un,Mm).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=$n.prototype;return Hn(this,"_keyboardManager",new zx([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:x(this,no)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:x(this,bl),methodOfCreation:x(this,xx)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var s;di.initialize(e,n),$n._defaultColor||($n._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Ze.HIGHLIGHT_DEFAULT_COLOR:$n._defaultColor=n;break;case Ze.HIGHLIGHT_THICKNESS:$n._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return x(this,qv)}updateParams(e,n){switch(e){case Ze.HIGHLIGHT_COLOR:V(this,un,_U).call(this,n);break;case Ze.HIGHLIGHT_THICKNESS:V(this,un,AU).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ze.HIGHLIGHT_DEFAULT_COLOR,$n._defaultColor],[Ze.HIGHLIGHT_THICKNESS,$n._defaultThickness]]}get propertiesToUpdate(){return[[Ze.HIGHLIGHT_COLOR,this.color||$n._defaultColor],[Ze.HIGHLIGHT_THICKNESS,x(this,bl)||$n._defaultThickness],[Ze.HIGHLIGHT_FREE,x(this,no)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(G(this,Xv,new gE({editor:this})),e.addColorPicker(x(this,Xv))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(V(this,un,M_).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,V(this,un,M_).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){V(this,un,JC).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(V(this,un,Mm).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?V(this,un,JC).call(this):e&&(V(this,un,Mm).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,a,l;const{drawLayer:n}=this.parent;let s;x(this,no)?(e=(e-this.rotation+360)%360,s=V(r=$n,Ml,V1).call(r,x(this,bc).box,e)):s=V(a=$n,Ml,V1).call(a,this,e),n.rotate(x(this,$r),e),n.rotate(x(this,js),e),n.updateBox(x(this,$r),s),n.updateBox(x(this,js),V(l=$n,Ml,V1).call(l,x(this,xl).box,e))}render(){if(this.div)return this.div;const e=super.render();x(this,Yv)&&(e.setAttribute("aria-label",x(this,Yv)),e.setAttribute("role","mark")),x(this,no)?e.classList.add("free"):this.div.addEventListener("keydown",V(this,un,bU).bind(this),{signal:this._uiManager._signal});const n=G(this,Eg,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=x(this,Sg);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),dE(this,x(this,Eg),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(x(this,js),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(x(this,js),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:V(this,un,n3).call(this,!0);break;case 1:case 3:V(this,un,n3).call(this,!1);break}}select(){var e,n;super.select(),x(this,js)&&((e=this.parent)==null||e.drawLayer.removeClass(x(this,js),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(x(this,js),"selected"))}unselect(){var e;super.unselect(),x(this,js)&&((e=this.parent)==null||e.drawLayer.removeClass(x(this,js),"selected"),x(this,no)||V(this,un,n3).call(this,!1))}get _mustFixPosition(){return!x(this,no)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(x(this,$r),e),this.parent.drawLayer.show(x(this,js),e))}static startHighlighting(e,n,{target:s,x:r,y:a}){const{x:l,y:u,width:f,height:m}=s.getBoundingClientRect(),g=new AbortController,v=e.combinedSignal(g),_=T=>{T.preventDefault(),T.stopPropagation()},b=T=>{g.abort(),V(this,Ml,TU).call(this,e,T)};window.addEventListener("blur",b,{signal:v}),window.addEventListener("pointerup",b,{signal:v}),window.addEventListener("pointerdown",_,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Ll,{signal:v}),s.addEventListener("pointermove",V(this,Ml,MU).bind(this,e),{signal:v}),this._freeHighlight=new XC({x:r,y:a},[l,u,f,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(e,n,s){var T,E,S,w;let r=null;if(e instanceof ZI){const{data:{quadPoints:D,rect:B,rotation:N,id:I,color:F,opacity:z,popupRef:U},parent:{page:{pageNumber:P}}}=e;r=e={annotationType:dn.HIGHLIGHT,color:Array.from(F),opacity:z,quadPoints:D,boxes:null,pageIndex:P-1,rect:B.slice(0),rotation:N,id:I,deleted:!1,popupRef:U}}else if(e instanceof U7){const{data:{inkLists:D,rect:B,rotation:N,id:I,color:F,borderStyle:{rawWidth:z},popupRef:U},parent:{page:{pageNumber:P}}}=e;r=e={annotationType:dn.HIGHLIGHT,color:Array.from(F),thickness:z,inkLists:D,boxes:null,pageIndex:P-1,rect:B.slice(0),rotation:N,id:I,deleted:!1,popupRef:U}}const{color:a,quadPoints:l,inkLists:u,opacity:f}=e,m=await super.deserialize(e,n,s);m.color=Le.makeHexColor(...a),G(m,Hh,f||1),u&&G(m,bl,e.thickness),m.annotationElementId=e.id||null,m._initialData=r;const[g,v]=m.pageDimensions,[_,b]=m.pageTranslation;if(l){const D=G(m,Fh,[]);for(let B=0;B<l.length;B+=8)D.push({x:(l[B]-_)/g,y:1-(l[B+1]-b)/v,width:(l[B+2]-l[B])/g,height:(l[B+1]-l[B+5])/v});V(T=m,un,KC).call(T),V(E=m,un,Mm).call(E),m.rotate(m.rotation)}else if(u){G(m,no,!0);const D=u[0],B={x:D[0]-_,y:v-(D[1]-b)},N=new XC(B,[0,0,g,v],1,x(m,bl)/2,!0,.001);for(let z=0,U=D.length;z<U;z+=2)B.x=D[z]-_,B.y=v-(D[z+1]-b),N.add(B);const{id:I,clipPathId:F}=n.drawLayer.draw(N,m.color,m._defaultOpacity,!0);V(S=m,un,e3).call(S,{highlightOutlines:N.getOutlines(),highlightId:I,clipPathId:F}),V(w=m,un,Mm).call(w)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=di._colorManager.convert(this.color),r={annotationType:dn.HIGHLIGHT,color:s,opacity:x(this,Hh),thickness:x(this,bl),quadPoints:V(this,un,SU).call(this),outlines:V(this,un,EU).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:V(this,un,M_).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!V(this,un,CU).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};jv=new WeakMap,yx=new WeakMap,Fh=new WeakMap,Sg=new WeakMap,Xv=new WeakMap,xl=new WeakMap,_x=new WeakMap,Ax=new WeakMap,Eg=new WeakMap,bc=new WeakMap,$r=new WeakMap,no=new WeakMap,qv=new WeakMap,Hh=new WeakMap,js=new WeakMap,Yv=new WeakMap,bl=new WeakMap,xx=new WeakMap,un=new WeakSet,KC=function(){const e=new Y9(x(this,Fh),.001);G(this,bc,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=x(this,bc).box;const n=new Y9(x(this,Fh),.0025,.001,this._uiManager.direction==="ltr");G(this,xl,n.getOutlines());const{lastPoint:s}=x(this,xl).box;G(this,qv,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},e3=function({highlightOutlines:e,highlightId:n,clipPathId:s}){var g,v;if(G(this,bc,e),G(this,xl,e.getNewOutline(x(this,bl)/2+1.5,.0025)),n>=0)G(this,$r,n),G(this,Sg,s),this.parent.drawLayer.finalizeLine(n,e),G(this,js,this.parent.drawLayer.drawOutline(x(this,xl)));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(x(this,$r),e),this.parent.drawLayer.updateBox(x(this,$r),V(g=$n,Ml,V1).call(g,x(this,bc).box,(_-this.rotation+360)%360)),this.parent.drawLayer.updateLine(x(this,js),x(this,xl)),this.parent.drawLayer.updateBox(x(this,js),V(v=$n,Ml,V1).call(v,x(this,xl).box,_))}const{x:a,y:l,width:u,height:f}=e.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=u,this.height=f;break;case 90:{const[_,b]=this.parentDimensions;this.x=l,this.y=1-a,this.width=u*b/_,this.height=f*_/b;break}case 180:this.x=1-a,this.y=1-l,this.width=u,this.height=f;break;case 270:{const[_,b]=this.parentDimensions;this.x=1-l,this.y=a,this.width=u*b/_,this.height=f*_/b;break}}const{lastPoint:m}=x(this,xl).box;G(this,qv,[(m[0]-a)/u,(m[1]-l)/f])},_U=function(e){const n=(a,l)=>{var u,f,m;this.color=a,(u=this.parent)==null||u.drawLayer.changeColor(x(this,$r),a),(f=x(this,Xv))==null||f.updateColor(a),G(this,Hh,l),(m=this.parent)==null||m.drawLayer.changeOpacity(x(this,$r),l)},s=this.color,r=x(this,Hh);this.addCommands({cmd:n.bind(this,e,$n._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},AU=function(e){const n=x(this,bl),s=r=>{G(this,bl,r),V(this,un,xU).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},xU=function(e){if(!x(this,no))return;V(this,un,e3).call(this,{highlightOutlines:x(this,bc).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},JC=function(){x(this,$r)===null||!this.parent||(this.parent.drawLayer.remove(x(this,$r)),G(this,$r,null),this.parent.drawLayer.remove(x(this,js)),G(this,js,null))},Mm=function(e=this.parent){x(this,$r)===null&&({id:Sa(this,$r)._,clipPathId:Sa(this,Sg)._}=e.drawLayer.draw(x(this,bc),this.color,x(this,Hh)),G(this,js,e.drawLayer.drawOutline(x(this,xl))),x(this,Eg)&&(x(this,Eg).style.clipPath=x(this,Sg)))},Ml=new WeakSet,V1=function({x:e,y:n,width:s,height:r},a){switch(a){case 90:return{x:1-n-r,y:e,width:r,height:s};case 180:return{x:1-e-s,y:1-n-r,width:s,height:r};case 270:return{x:n,y:1-e-s,width:r,height:s}}return{x:e,y:n,width:s,height:r}},bU=function(e){$n._keyboardManager.exec(this,e)},n3=function(e){if(!x(this,jv))return;const n=window.getSelection();e?n.setPosition(x(this,jv),x(this,yx)):n.setPosition(x(this,_x),x(this,Ax))},M_=function(){return x(this,no)?this.rotation:0},SU=function(){if(x(this,no))return null;const[e,n]=this.pageDimensions,[s,r]=this.pageTranslation,a=x(this,Fh),l=new Float32Array(a.length*8);let u=0;for(const{x:f,y:m,width:g,height:v}of a){const _=f*e+s,b=(1-m-v)*n+r;l[u]=l[u+4]=_,l[u+1]=l[u+3]=b,l[u+2]=l[u+6]=_+g*e,l[u+5]=l[u+7]=b+v*n,u+=8}return l},EU=function(e){return x(this,bc).serialize(e,V(this,un,M_).call(this))},MU=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},TU=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},CU=function(e){const{color:n}=this._initialData;return e.color.some((s,r)=>s!==n[r])},W($n,Ml),Je($n,"_defaultColor",null),Je($n,"_defaultOpacity",1),Je($n,"_defaultThickness",12),Je($n,"_type","highlight"),Je($n,"_editorType",dn.HIGHLIGHT),Je($n,"_freeHighlightId",-1),Je($n,"_freeHighlight",null),Je($n,"_freeHighlightClipId","");let vE=$n;var Mg,Tg,Lu,zh,Sl,Cg,wg,Rg,Gh,Wv,Lg,Dg,Hd,le,wU,RU,LU,DU,$C,BU,tw,OU,NU,IU,UU,PU,Tm,ew,nw,iw,i3,s3,Q1,sw,r3,lf,FU,rw,HU,zU,aw,a3,T_;const Xi=class Xi extends di{constructor(e){super({...e,name:"inkEditor"});W(this,le);W(this,Mg,0);W(this,Tg,0);W(this,Lu,null);W(this,zh,new Path2D);W(this,Sl,!1);W(this,Cg,null);W(this,wg,!1);W(this,Rg,!1);W(this,Gh,null);W(this,Wv,null);W(this,Lg,0);W(this,Dg,0);W(this,Hd,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,n){di.initialize(e,n)}static updateDefaultParams(e,n){switch(e){case Ze.INK_THICKNESS:Xi._defaultThickness=n;break;case Ze.INK_COLOR:Xi._defaultColor=n;break;case Ze.INK_OPACITY:Xi._defaultOpacity=n/100;break}}updateParams(e,n){switch(e){case Ze.INK_THICKNESS:V(this,le,wU).call(this,n);break;case Ze.INK_COLOR:V(this,le,RU).call(this,n);break;case Ze.INK_OPACITY:V(this,le,LU).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ze.INK_THICKNESS,Xi._defaultThickness],[Ze.INK_COLOR,Xi._defaultColor||di._defaultLineColor],[Ze.INK_OPACITY,Math.round(Xi._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Ze.INK_THICKNESS,this.thickness||Xi._defaultThickness],[Ze.INK_COLOR,this.color||Xi._defaultColor||di._defaultLineColor],[Ze.INK_OPACITY,Math.round(100*(this.opacity??Xi._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(V(this,le,i3).call(this),V(this,le,s3).call(this)),this.isAttachedToDOM||(this.parent.add(this),V(this,le,Q1).call(this)),V(this,le,T_).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,x(this,Lu)&&(clearTimeout(x(this,Lu)),G(this,Lu,null)),(e=x(this,Gh))==null||e.disconnect(),G(this,Gh,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,n]=this.parentDimensions,s=this.width*e,r=this.height*n;this.setDimensions(s,r)}enableEditMode(){x(this,Sl)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,V(this,le,ew).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),V(this,le,nw).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){x(this,Sl)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),G(this,Sl,!0),this.div.classList.add("disabled"),V(this,le,T_).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||x(this,Sl)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),V(this,le,BU).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),V(this,le,tw).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),V(this,le,iw).call(this,e)}canvasPointerleave(e){V(this,le,iw).call(this,e)}get isResizable(){return!this.isEmpty()&&x(this,Sl)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,a,l]=V(this,le,DU).call(this);if(this.setAt(s,r,0,0),this.setDims(a,l),V(this,le,i3).call(this),this.width){const[u,f]=this.parentDimensions;this.setAspectRatio(this.width*u,this.height*f),this.setAt(e*u,n*f,this.width*u,this.height*f),G(this,Rg,!0),V(this,le,Q1).call(this),this.setDims(this.width*u,this.height*f),V(this,le,Tm).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return V(this,le,s3).call(this),this.div}setDimensions(e,n){const s=Math.round(e),r=Math.round(n);if(x(this,Lg)===s&&x(this,Dg)===r)return;G(this,Lg,s),G(this,Dg,r),this.canvas.style.visibility="hidden";const[a,l]=this.parentDimensions;this.width=e/a,this.height=n/l,this.fixAndSetPosition(),x(this,Sl)&&V(this,le,sw).call(this,e,n),V(this,le,Q1).call(this),V(this,le,Tm).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(e,n,s){var E,S,w;if(e instanceof U7)return null;const r=await super.deserialize(e,n,s);r.thickness=e.thickness,r.color=Le.makeHexColor(...e.color),r.opacity=e.opacity;const[a,l]=r.pageDimensions,u=r.width*a,f=r.height*l,m=r.parentScale,g=e.thickness/2;G(r,Sl,!0),G(r,Lg,Math.round(u)),G(r,Dg,Math.round(f));const{paths:v,rect:_,rotation:b}=e;for(let{bezier:D}of v){D=V(E=Xi,lf,HU).call(E,D,_,b);const B=[];r.paths.push(B);let N=m*(D[0]-g),I=m*(D[1]-g);for(let z=2,U=D.length;z<U;z+=6){const P=m*(D[z]-g),X=m*(D[z+1]-g),lt=m*(D[z+2]-g),it=m*(D[z+3]-g),ut=m*(D[z+4]-g),dt=m*(D[z+5]-g);B.push([[N,I],[P,X],[lt,it],[ut,dt]]),N=ut,I=dt}const F=V(this,lf,FU).call(this,B);r.bezierPath2D.push(F)}const T=V(S=r,le,aw).call(S);return G(r,Tg,Math.max(di.MIN_SIZE,T[2]-T[0])),G(r,Mg,Math.max(di.MIN_SIZE,T[3]-T[1])),V(w=r,le,sw).call(w,u,f),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),n=di._colorManager.convert(this.ctx.strokeStyle);return{annotationType:dn.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:V(this,le,zU).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Mg=new WeakMap,Tg=new WeakMap,Lu=new WeakMap,zh=new WeakMap,Sl=new WeakMap,Cg=new WeakMap,wg=new WeakMap,Rg=new WeakMap,Gh=new WeakMap,Wv=new WeakMap,Lg=new WeakMap,Dg=new WeakMap,Hd=new WeakMap,le=new WeakSet,wU=function(e){const n=r=>{this.thickness=r,V(this,le,T_).call(this)},s=this.thickness;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},RU=function(e){const n=r=>{this.color=r,V(this,le,Tm).call(this)},s=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},LU=function(e){const n=r=>{this.opacity=r,V(this,le,Tm).call(this)};e/=100;const s=this.opacity;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},DU=function(){const{parentRotation:e,parentDimensions:[n,s]}=this;switch(e){case 90:return[0,s,s,n];case 180:return[n,s,n,s];case 270:return[n,0,s,n];default:return[0,0,n,s]}},$C=function(){const{ctx:e,color:n,opacity:s,thickness:r,parentScale:a,scaleFactor:l}=this;e.lineWidth=r*a/l,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${n}${cet(s)}`},BU=function(e,n){this.canvas.addEventListener("contextmenu",Ll,{signal:this._uiManager._signal}),V(this,le,nw).call(this),G(this,Cg,new AbortController);const s=this._uiManager.combinedSignal(x(this,Cg));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,x(this,Rg)||(G(this,Rg,!0),V(this,le,Q1).call(this),this.thickness||(this.thickness=Xi._defaultThickness),this.color||(this.color=Xi._defaultColor||di._defaultLineColor),this.opacity??(this.opacity=Xi._defaultOpacity)),this.currentPath.push([e,n]),G(this,wg,!1),V(this,le,$C).call(this),G(this,Hd,()=>{V(this,le,IU).call(this),x(this,Hd)&&window.requestAnimationFrame(x(this,Hd))}),window.requestAnimationFrame(x(this,Hd))},tw=function(e,n){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===s&&n===r)return;const a=this.currentPath;let l=x(this,zh);if(a.push([e,n]),G(this,wg,!0),a.length<=2){l.moveTo(...a[0]),l.lineTo(e,n);return}a.length===3&&(G(this,zh,l=new Path2D),l.moveTo(...a[0])),V(this,le,UU).call(this,l,...a.at(-3),...a.at(-2),e,n)},OU=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);x(this,zh).lineTo(...e)},NU=function(e,n){G(this,Hd,null),e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),V(this,le,tw).call(this,e,n),V(this,le,OU).call(this);let s;if(this.currentPath.length!==1)s=V(this,le,PU).call(this);else{const f=[e,n];s=[[f,f.slice(),f.slice(),f]]}const r=x(this,zh),a=this.currentPath;this.currentPath=[],G(this,zh,new Path2D);const l=()=>{this.allRawPaths.push(a),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},u=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(V(this,le,i3).call(this),V(this,le,s3).call(this)),V(this,le,T_).call(this))};this.addCommands({cmd:l,undo:u,mustExec:!0})},IU=function(){if(!x(this,wg))return;G(this,wg,!1);const e=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),s=n.map(l=>l[0]),r=n.map(l=>l[1]);Math.min(...s)-e,Math.max(...s)+e,Math.min(...r)-e,Math.max(...r)+e;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const l of this.bezierPath2D)a.stroke(l);a.stroke(x(this,zh)),a.restore()},UU=function(e,n,s,r,a,l,u){const f=(n+r)/2,m=(s+a)/2,g=(r+l)/2,v=(a+u)/2;e.bezierCurveTo(f+2*(r-f)/3,m+2*(a-m)/3,g+2*(r-g)/3,v+2*(a-v)/3,g,v)},PU=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const n=[];let s,[r,a]=e[0];for(s=1;s<e.length-2;s++){const[_,b]=e[s],[T,E]=e[s+1],S=(_+T)/2,w=(b+E)/2,D=[r+2*(_-r)/3,a+2*(b-a)/3],B=[S+2*(_-S)/3,w+2*(b-w)/3];n.push([[r,a],D,B,[S,w]]),[r,a]=[S,w]}const[l,u]=e[s],[f,m]=e[s+1],g=[r+2*(l-r)/3,a+2*(u-a)/3],v=[f+2*(l-f)/3,m+2*(u-m)/3];return n.push([[r,a],g,v,[f,m]]),n},Tm=function(){if(this.isEmpty()){V(this,le,r3).call(this);return}V(this,le,$C).call(this);const{canvas:e,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),V(this,le,r3).call(this);for(const s of this.bezierPath2D)n.stroke(s)},ew=function(){if(x(this,Wv))return;G(this,Wv,new AbortController);const e=this._uiManager.combinedSignal(x(this,Wv));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})},nw=function(){var e;(e=this.pointerdownAC)==null||e.abort(),this.pointerdownAC=null},iw=function(e){var n;(n=x(this,Cg))==null||n.abort(),G(this,Cg,null),V(this,le,ew).call(this),x(this,Lu)&&clearTimeout(x(this,Lu)),G(this,Lu,setTimeout(()=>{G(this,Lu,null),this.canvas.removeEventListener("contextmenu",Ll)},10)),V(this,le,NU).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},i3=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},s3=function(){G(this,Gh,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),x(this,Gh).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=x(this,Gh))==null||e.disconnect(),G(this,Gh,null)},{once:!0})},Q1=function(){if(!x(this,Rg))return;const[e,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),V(this,le,r3).call(this)},sw=function(e,n){const s=V(this,le,a3).call(this),r=(e-s)/x(this,Tg),a=(n-s)/x(this,Mg);this.scaleFactor=Math.min(r,a)},r3=function(){const e=V(this,le,a3).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},lf=new WeakSet,FU=function(e){const n=new Path2D;for(let s=0,r=e.length;s<r;s++){const[a,l,u,f]=e[s];s===0&&n.moveTo(...a),n.bezierCurveTo(l[0],l[1],u[0],u[1],f[0],f[1])}return n},rw=function(e,n,s){const[r,a,l,u]=n;switch(s){case 0:for(let f=0,m=e.length;f<m;f+=2)e[f]+=r,e[f+1]=u-e[f+1];break;case 90:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=e[f+1]+r,e[f+1]=g+a}break;case 180:for(let f=0,m=e.length;f<m;f+=2)e[f]=l-e[f],e[f+1]+=a;break;case 270:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=l-e[f+1],e[f+1]=u-g}break;default:throw new Error("Invalid rotation")}return e},HU=function(e,n,s){const[r,a,l,u]=n;switch(s){case 0:for(let f=0,m=e.length;f<m;f+=2)e[f]-=r,e[f+1]=u-e[f+1];break;case 90:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=e[f+1]-a,e[f+1]=g-r}break;case 180:for(let f=0,m=e.length;f<m;f+=2)e[f]=l-e[f],e[f+1]-=a;break;case 270:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=u-e[f+1],e[f+1]=l-g}break;default:throw new Error("Invalid rotation")}return e},zU=function(e,n,s,r){var m,g;const a=[],l=this.thickness/2,u=e*n+l,f=e*s+l;for(const v of this.paths){const _=[],b=[];for(let T=0,E=v.length;T<E;T++){const[S,w,D,B]=v[T];if(S[0]===B[0]&&S[1]===B[1]&&E===1){const it=e*S[0]+u,ut=e*S[1]+f;_.push(it,ut),b.push(it,ut);break}const N=e*S[0]+u,I=e*S[1]+f,F=e*w[0]+u,z=e*w[1]+f,U=e*D[0]+u,P=e*D[1]+f,X=e*B[0]+u,lt=e*B[1]+f;T===0&&(_.push(N,I),b.push(N,I)),_.push(F,z,U,P,X,lt),b.push(F,z),T===E-1&&b.push(X,lt)}a.push({bezier:V(m=Xi,lf,rw).call(m,_,r,this.rotation),points:V(g=Xi,lf,rw).call(g,b,r,this.rotation)})}return a},aw=function(){let e=1/0,n=-1/0,s=1/0,r=-1/0;for(const a of this.paths)for(const[l,u,f,m]of a){const g=Le.bezierBoundingBox(...l,...u,...f,...m);e=Math.min(e,g[0]),s=Math.min(s,g[1]),n=Math.max(n,g[2]),r=Math.max(r,g[3])}return[e,s,n,r]},a3=function(){return x(this,Sl)?Math.ceil(this.thickness*this.parentScale):0},T_=function(e=!1){if(this.isEmpty())return;if(!x(this,Sl)){V(this,le,Tm).call(this);return}const n=V(this,le,aw).call(this),s=V(this,le,a3).call(this);G(this,Tg,Math.max(di.MIN_SIZE,n[2]-n[0])),G(this,Mg,Math.max(di.MIN_SIZE,n[3]-n[1]));const r=Math.ceil(s+x(this,Tg)*this.scaleFactor),a=Math.ceil(s+x(this,Mg)*this.scaleFactor),[l,u]=this.parentDimensions;this.width=r/l,this.height=a/u,this.setAspectRatio(r,a);const f=this.translationX,m=this.translationY;this.translationX=-n[0],this.translationY=-n[1],V(this,le,Q1).call(this),V(this,le,Tm).call(this),G(this,Lg,r),G(this,Dg,a),this.setDims(r,a);const g=e?s/this.scaleFactor/2:0;this.translate(f-this.translationX-g,m-this.translationY-g)},W(Xi,lf),Je(Xi,"_defaultColor",null),Je(Xi,"_defaultOpacity",1),Je(Xi,"_defaultThickness",1),Je(Xi,"_type","ink"),Je(Xi,"_editorType",dn.INK);let ZC=Xi;var Yi,Rr,zd,kh,Gd,Kv,Du,Vh,Bu,Io,Jv,Nn,C_,w_,o3,lw,GU,l3,cw,c3,kU,VU;const V_=class V_ extends di{constructor(e){super({...e,name:"stampEditor"});W(this,Nn);W(this,Yi,null);W(this,Rr,null);W(this,zd,null);W(this,kh,null);W(this,Gd,null);W(this,Kv,"");W(this,Du,null);W(this,Vh,null);W(this,Bu,null);W(this,Io,!1);W(this,Jv,!1);G(this,kh,e.bitmapUrl),G(this,Gd,e.bitmapFile)}static initialize(e,n){di.initialize(e,n)}static get supportedTypes(){return Hn(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Hn(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(dn.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:l}=e||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:a,height:l,channels:r.length/(a*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const f=u.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e,n;x(this,Rr)&&(G(this,Yi,null),this._uiManager.imageManager.deleteId(x(this,Rr)),(e=x(this,Du))==null||e.remove(),G(this,Du,null),(n=x(this,Vh))==null||n.disconnect(),G(this,Vh,null),x(this,Bu)&&(clearTimeout(x(this,Bu)),G(this,Bu,null))),super.remove()}rebuild(){if(!this.parent){x(this,Rr)&&V(this,Nn,o3).call(this);return}super.rebuild(),this.div!==null&&(x(this,Rr)&&x(this,Du)===null&&V(this,Nn,o3).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(x(this,zd)||x(this,Yi)||x(this,kh)||x(this,Gd)||x(this,Rr))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),x(this,Yi)?V(this,Nn,lw).call(this):V(this,Nn,o3).call(this),this.width&&!this.annotationElementId){const[s,r]=this.parentDimensions;this.setAt(e*s,n*r,this.width*s,this.height*r)}return this.div}copyCanvas(e,n,s=!1){var _;e||(e=224);const{width:r,height:a}=x(this,Yi),l=new iC;let u=x(this,Yi),f=r,m=a,g=null;if(n){if(r>n||a>n){const z=Math.min(n/r,n/a);f=Math.floor(r*z),m=Math.floor(a*z)}g=document.createElement("canvas");const b=g.width=Math.ceil(f*l.sx),T=g.height=Math.ceil(m*l.sy);x(this,Io)||(u=V(this,Nn,l3).call(this,b,T));const E=g.getContext("2d");E.filter=this._uiManager.hcmFilter;let S="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":(_=window.matchMedia)!=null&&_.call(window,"(prefers-color-scheme: dark)").matches&&(S="#8f8f9d",w="#42414d");const D=15,B=D*l.sx,N=D*l.sy,I=new OffscreenCanvas(B*2,N*2),F=I.getContext("2d");F.fillStyle=S,F.fillRect(0,0,B*2,N*2),F.fillStyle=w,F.fillRect(0,0,B,N),F.fillRect(B,N,B,N),E.fillStyle=E.createPattern(I,"repeat"),E.fillRect(0,0,b,T),E.drawImage(u,0,0,u.width,u.height,0,0,b,T)}let v=null;if(s){let b,T;if(l.symmetric&&u.width<e&&u.height<e)b=u.width,T=u.height;else if(u=x(this,Yi),r>e||a>e){const w=Math.min(e/r,e/a);b=Math.floor(r*w),T=Math.floor(a*w),x(this,Io)||(u=V(this,Nn,l3).call(this,b,T))}const S=new OffscreenCanvas(b,T).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,T),v={width:b,height:T,data:S.getImageData(0,0,b,T).data}}return{canvas:g,width:f,height:m,imageData:v}}getImageForAltText(){return x(this,Du)}static async deserialize(e,n,s){var T;let r=null;if(e instanceof $I){const{data:{rect:E,rotation:S,id:w,structParent:D,popupRef:B},container:N,parent:{page:{pageNumber:I}}}=e,F=N.querySelector("canvas"),z=s.imageManager.getFromCanvas(N.id,F);F.remove();const U=((T=await n._structTree.getAriaAttributes(`${M7}${w}`))==null?void 0:T.get("aria-label"))||"";r=e={annotationType:dn.STAMP,bitmapId:z.id,bitmap:z.bitmap,pageIndex:I-1,rect:E.slice(0),rotation:S,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:U},isSvg:!1,structParent:D,popupRef:B}}const a=await super.deserialize(e,n,s),{rect:l,bitmap:u,bitmapUrl:f,bitmapId:m,isSvg:g,accessibilityData:v}=e;m&&s.imageManager.isValidId(m)?(G(a,Rr,m),u&&G(a,Yi,u)):G(a,kh,f),G(a,Io,g);const[_,b]=a.pageDimensions;return a.width=(l[2]-l[0])/_,a.height=(l[3]-l[1])/b,a.annotationElementId=e.id||null,v&&(a.altTextData=v),a._initialData=r,G(a,Jv,!!r),a}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:dn.STAMP,bitmapId:x(this,Rr),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:x(this,Io),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=V(this,Nn,c3).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const u=V(this,Nn,VU).call(this,s);if(u.isSame)return null;u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||(n.stamps=new Map);const l=x(this,Io)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(x(this,Rr)))n.stamps.set(x(this,Rr),{area:l,serialized:s}),s.bitmap=V(this,Nn,c3).call(this,!1);else if(x(this,Io)){const u=n.stamps.get(x(this,Rr));l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=V(this,Nn,c3).call(this,!1))}return s}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};Yi=new WeakMap,Rr=new WeakMap,zd=new WeakMap,kh=new WeakMap,Gd=new WeakMap,Kv=new WeakMap,Du=new WeakMap,Vh=new WeakMap,Bu=new WeakMap,Io=new WeakMap,Jv=new WeakMap,Nn=new WeakSet,C_=function(e,n=!1){if(!e){this.remove();return}G(this,Yi,e.bitmap),n||(G(this,Rr,e.id),G(this,Io,e.isSvg)),e.file&&G(this,Kv,e.file.name),V(this,Nn,lw).call(this)},w_=function(){if(G(this,zd,null),this._uiManager.enableWaiting(!1),!!x(this,Du)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&x(this,Yi)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&x(this,Yi)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},o3=function(){if(x(this,Rr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(x(this,Rr)).then(s=>V(this,Nn,C_).call(this,s,!0)).finally(()=>V(this,Nn,w_).call(this));return}if(x(this,kh)){const s=x(this,kh);G(this,kh,null),this._uiManager.enableWaiting(!0),G(this,zd,this._uiManager.imageManager.getFromUrl(s).then(r=>V(this,Nn,C_).call(this,r)).finally(()=>V(this,Nn,w_).call(this)));return}if(x(this,Gd)){const s=x(this,Gd);G(this,Gd,null),this._uiManager.enableWaiting(!0),G(this,zd,this._uiManager.imageManager.getFromFile(s).then(r=>V(this,Nn,C_).call(this,r)).finally(()=>V(this,Nn,w_).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=V_.supportedTypesStr;const n=this._uiManager._signal;G(this,zd,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),V(this,Nn,C_).call(this,r)}s()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>V(this,Nn,w_).call(this))),e.click()},lw=function(){const{div:e}=this;let{width:n,height:s}=x(this,Yi);const[r,a]=this.pageDimensions,l=.75;if(this.width)n=this.width*r,s=this.height*a;else if(n>l*r||s>l*a){const g=Math.min(l*r/n,l*a/s);n*=g,s*=g}const[u,f]=this.parentDimensions;this.setDims(n*u/r,s*f/a),this._uiManager.enableWaiting(!1);const m=G(this,Du,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),V(this,Nn,cw).call(this,n,s),V(this,Nn,kU).call(this),x(this,Jv)||(this.parent.addUndoableEditor(this),G(this,Jv,!0)),this._reportTelemetry({action:"inserted_image"}),x(this,Kv)&&m.setAttribute("aria-label",x(this,Kv))},GU=function(e,n){var l;const[s,r]=this.parentDimensions;this.width=e/s,this.height=n/r,(l=this._initialOptions)!=null&&l.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,x(this,Bu)!==null&&clearTimeout(x(this,Bu)),G(this,Bu,setTimeout(()=>{G(this,Bu,null),V(this,Nn,cw).call(this,e,n)},200))},l3=function(e,n){const{width:s,height:r}=x(this,Yi);let a=s,l=r,u=x(this,Yi);for(;a>2*e||l>2*n;){const f=a,m=l;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(a,l);g.getContext("2d").drawImage(u,0,0,f,m,0,0,a,l),u=g.transferToImageBitmap()}return u},cw=function(e,n){const s=new iC,r=Math.ceil(e*s.sx),a=Math.ceil(n*s.sy),l=x(this,Du);if(!l||l.width===r&&l.height===a)return;l.width=r,l.height=a;const u=x(this,Io)?x(this,Yi):V(this,Nn,l3).call(this,r,a),f=l.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(u,0,0,u.width,u.height,0,0,r,a)},c3=function(e){if(e){if(x(this,Io)){const r=this._uiManager.imageManager.getSvgUrl(x(this,Rr));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=x(this,Yi),n.getContext("2d").drawImage(x(this,Yi),0,0),n.toDataURL()}if(x(this,Io)){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*ip.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*ip.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,a);return l.getContext("2d").drawImage(x(this,Yi),0,0,x(this,Yi).width,x(this,Yi).height,0,0,r,a),l.transferToImageBitmap()}return structuredClone(x(this,Yi))},kU=function(){this._uiManager._signal&&(G(this,Vh,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&V(this,Nn,GU).call(this,n.width,n.height)})),x(this,Vh).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=x(this,Vh))==null||e.disconnect(),G(this,Vh,null)},{once:!0}))},VU=function(e){var f;const{rect:n,pageIndex:s,accessibilityData:{altText:r}}=this._initialData,a=e.rect.every((m,g)=>Math.abs(m-n[g])<1),l=e.pageIndex===s,u=(((f=e.accessibilityData)==null?void 0:f.alt)||"")===r;return{isSame:a&&l&&u,isSameAltText:u}},Je(V_,"_type","stamp"),Je(V_,"_editorType",dn.STAMP);let ow=V_;var Bg,Zv,Ou,kd,Qh,Uo,Vd,$v,ty,ta,jh,Pe,Qd,Nr,QU,hw,fw,dw,u3;const oc=class oc{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:r,annotationLayer:a,drawLayer:l,textLayer:u,viewport:f,l10n:m}){W(this,Nr);W(this,Bg);W(this,Zv,!1);W(this,Ou,null);W(this,kd,null);W(this,Qh,null);W(this,Uo,new Map);W(this,Vd,!1);W(this,$v,!1);W(this,ty,!1);W(this,ta,null);W(this,jh,null);W(this,Pe);const g=[...x(oc,Qd).values()];if(!oc._initialized){oc._initialized=!0;for(const v of g)v.initialize(m,t)}t.registerEditorTypes(g),G(this,Pe,t),this.pageIndex=e,this.div=n,G(this,Bg,r),G(this,Ou,a),this.viewport=f,G(this,ta,u),this.drawLayer=l,this._structTree=s,x(this,Pe).addLayer(this)}get isEmpty(){return x(this,Uo).size===0}get isInvisible(){return this.isEmpty&&x(this,Pe).getMode()===dn.NONE}updateToolbar(t){x(this,Pe).updateToolbar(t)}updateMode(t=x(this,Pe).getMode()){switch(V(this,Nr,u3).call(this),t){case dn.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case dn.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case dn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of x(oc,Qd).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=x(this,ta))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(x(this,Pe).getMode()!==dn.INK)return;if(!t){for(const n of x(this,Uo).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){x(this,Pe).setEditingState(t)}addCommands(t){x(this,Pe).addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=x(this,Ou))==null||e.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of x(this,Uo).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(x(this,Pe).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!x(this,Ou))return;const e=x(this,Ou).getEditableAnnotations();for(const n of e){if(n.hide(),x(this,Pe).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;G(this,ty,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of x(this,Uo).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(x(this,Ou)){const r=x(this,Ou).getEditableAnnotations();for(const a of r){const{id:l}=a.data;if(x(this,Pe).isDeletedAnnotationElement(l))continue;let u=e.get(l);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=t.get(l),u&&(x(this,Pe).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}V(this,Nr,u3).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of x(oc,Qd).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),G(this,ty,!1)}getEditableAnnotation(t){var e;return((e=x(this,Ou))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){x(this,Pe).getActive()!==t&&x(this,Pe).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=x(this,ta))!=null&&t.div&&!x(this,jh)){G(this,jh,new AbortController);const e=x(this,Pe).combinedSignal(x(this,jh));x(this,ta).div.addEventListener("pointerdown",V(this,Nr,QU).bind(this),{signal:e}),x(this,ta).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=x(this,ta))!=null&&t.div&&x(this,jh)&&(x(this,jh).abort(),G(this,jh,null),x(this,ta).div.classList.remove("highlighting"))}enableClick(){if(x(this,kd))return;G(this,kd,new AbortController);const t=x(this,Pe).combinedSignal(x(this,kd));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){var t;(t=x(this,kd))==null||t.abort(),G(this,kd,null)}attach(t){x(this,Uo).set(t.id,t);const{annotationElementId:e}=t;e&&x(this,Pe).isDeletedAnnotationElement(e)&&x(this,Pe).removeDeletedAnnotationElement(t)}detach(t){var e;x(this,Uo).delete(t.id),(e=x(this,Bg))==null||e.removePointerInTextLayer(t.contentDiv),!x(this,ty)&&t.annotationElementId&&x(this,Pe).addDeletedAnnotationElement(t)}remove(t){this.detach(t),x(this,Pe).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,x(this,$v)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(x(this,Pe).addDeletedAnnotationElement(t.annotationElementId),di.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),x(this,Pe).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),x(this,Pe).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!x(this,Qh)&&(t._focusEventsAllowed=!1,G(this,Qh,setTimeout(()=>{G(this,Qh,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:x(this,Pe)._signal}),e.focus())},0))),t._structTreeParentId=(n=x(this,Bg))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return x(this,Pe).getId()}combinedSignal(t){return x(this,Pe).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=x(this,Nr,hw))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){x(this,Pe).updateToolbar(t),x(this,Pe).updateMode(t);const{offsetX:n,offsetY:s}=V(this,Nr,dw).call(this),r=this.getNextId(),a=V(this,Nr,fw).call(this,{parent:this,id:r,x:n,y:s,uiManager:x(this,Pe),isCentered:!0,...e});a&&this.add(a)}async deserialize(t){var e;return await((e=x(oc,Qd).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,x(this,Pe)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),r=V(this,Nr,fw).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:x(this,Pe),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(V(this,Nr,dw).call(this),!0)}setSelected(t){x(this,Pe).setSelected(t)}toggleSelected(t){x(this,Pe).toggleSelected(t)}unselect(t){x(this,Pe).unselect(t)}pointerup(t){const{isMac:e}=Na.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&x(this,Vd)){if(G(this,Vd,!1),!x(this,Zv)){G(this,Zv,!0);return}if(x(this,Pe).getMode()===dn.STAMP){x(this,Pe).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(x(this,Pe).getMode()===dn.HIGHLIGHT&&this.enableTextSelection(),x(this,Vd)){G(this,Vd,!1);return}const{isMac:e}=Na.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;G(this,Vd,!0);const n=x(this,Pe).getActive();G(this,Zv,!n||n.isEmpty())}findNewParent(t,e,n){const s=x(this,Pe).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}destroy(){var t,e;((t=x(this,Pe).getActive())==null?void 0:t.parent)===this&&(x(this,Pe).commitOrRemove(),x(this,Pe).setActiveEditor(null)),x(this,Qh)&&(clearTimeout(x(this,Qh)),G(this,Qh,null));for(const n of x(this,Uo).values())(e=x(this,Bg))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,x(this,Uo).clear(),x(this,Pe).removeLayer(this)}render({viewport:t}){this.viewport=t,Wg(this.div,t);for(const e of x(this,Pe).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){x(this,Pe).commitOrRemove(),V(this,Nr,u3).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Wg(this.div,{rotation:n}),e!==n)for(const s of x(this,Uo).values())s.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return x(this,Pe).viewParameters.realScale}};Bg=new WeakMap,Zv=new WeakMap,Ou=new WeakMap,kd=new WeakMap,Qh=new WeakMap,Uo=new WeakMap,Vd=new WeakMap,$v=new WeakMap,ty=new WeakMap,ta=new WeakMap,jh=new WeakMap,Pe=new WeakMap,Qd=new WeakMap,Nr=new WeakSet,QU=function(t){x(this,Pe).unselectAll();const{target:e}=t;if(e===x(this,ta).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&x(this,ta).div.contains(e)){const{isMac:n}=Na.platform;if(t.button!==0||t.ctrlKey&&n)return;x(this,Pe).showAllEditors("highlight",!0,!0),x(this,ta).div.classList.add("free"),this.toggleDrawing(),vE.startHighlighting(this,x(this,Pe).direction==="ltr",{target:x(this,ta).div,x:t.x,y:t.y}),x(this,ta).div.addEventListener("pointerup",()=>{x(this,ta).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:x(this,Pe)._signal}),t.preventDefault()}},hw=function(){return x(oc,Qd).get(x(this,Pe).getMode())},fw=function(t){const e=x(this,Nr,hw);return e?new e.prototype.constructor(t):null},dw=function(){const{x:t,y:e,width:n,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,t),a=Math.max(0,e),l=Math.min(window.innerWidth,t+n),u=Math.min(window.innerHeight,e+s),f=(r+l)/2-t,m=(a+u)/2-e,[g,v]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:g,offsetY:v}},u3=function(){G(this,$v,!0);for(const t of x(this,Uo).values())t.isEmpty()&&t.remove();G(this,$v,!1)},Je(oc,"_initialized",!1),W(oc,Qd,new Map([VC,ZC,ow,vE].map(t=>[t._editorType,t])));let uw=oc;var Nu,bx,Cs,Xh,Sx,mw,t0,gw,jU;const Tr=class Tr{constructor({pageIndex:t}){W(this,t0);W(this,Nu,null);W(this,bx,0);W(this,Cs,new Map);W(this,Xh,new Map);this.pageIndex=t}setParent(t){if(!x(this,Nu)){G(this,Nu,t);return}if(x(this,Nu)!==t){if(x(this,Cs).size>0)for(const e of x(this,Cs).values())e.remove(),t.append(e);G(this,Nu,t)}}static get _svgFactory(){return Hn(this,"_svgFactory",new I7)}draw(t,e,n,s=!1){const r=Sa(this,bx)._++,a=V(this,t0,gw).call(this,t.box);a.classList.add(...t.classNamesForDrawing);const l=Tr._svgFactory.createElement("defs");a.append(l);const u=Tr._svgFactory.createElement("path");l.append(u);const f=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",f),u.setAttribute("d",t.toSVGPath()),s&&x(this,Xh).set(r,u);const m=V(this,t0,jU).call(this,l,f),g=Tr._svgFactory.createElement("use");return a.append(g),a.setAttribute("fill",e),a.setAttribute("fill-opacity",n),g.setAttribute("href",`#${f}`),x(this,Cs).set(r,a),{id:r,clipPathId:`url(#${m})`}}drawOutline(t){const e=Sa(this,bx)._++,n=V(this,t0,gw).call(this,t.box);n.classList.add(...t.classNamesForOutlining);const s=Tr._svgFactory.createElement("defs");n.append(s);const r=Tr._svgFactory.createElement("path");s.append(r);const a=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",a),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let l;if(t.mustRemoveSelfIntersections){const m=Tr._svgFactory.createElement("mask");s.append(m),l=`mask_p${this.pageIndex}_${e}`,m.setAttribute("id",l),m.setAttribute("maskUnits","objectBoundingBox");const g=Tr._svgFactory.createElement("rect");m.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const v=Tr._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${a}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const u=Tr._svgFactory.createElement("use");n.append(u),u.setAttribute("href",`#${a}`),l&&u.setAttribute("mask",`url(#${l})`);const f=u.cloneNode();return n.append(f),u.classList.add("mainOutline"),f.classList.add("secondaryOutline"),x(this,Cs).set(e,n),e}finalizeLine(t,e){const n=x(this,Xh).get(t);x(this,Xh).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){x(this,Cs).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}updatePath(t,e){x(this,Xh).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var n;V(n=Tr,Sx,mw).call(n,x(this,Cs).get(t),e)}show(t,e){x(this,Cs).get(t).classList.toggle("hidden",!e)}rotate(t,e){x(this,Cs).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){x(this,Cs).get(t).setAttribute("fill",e)}changeOpacity(t,e){x(this,Cs).get(t).setAttribute("fill-opacity",e)}addClass(t,e){x(this,Cs).get(t).classList.add(e)}removeClass(t,e){x(this,Cs).get(t).classList.remove(e)}getSVGRoot(t){return x(this,Cs).get(t)}remove(t){x(this,Xh).delete(t),x(this,Nu)!==null&&(x(this,Cs).get(t).remove(),x(this,Cs).delete(t))}destroy(){G(this,Nu,null);for(const t of x(this,Cs).values())t.remove();x(this,Cs).clear(),x(this,Xh).clear()}};Nu=new WeakMap,bx=new WeakMap,Cs=new WeakMap,Xh=new WeakMap,Sx=new WeakSet,mw=function(t,{x:e=0,y:n=0,width:s=1,height:r=1}={}){const{style:a}=t;a.top=`${100*n}%`,a.left=`${100*e}%`,a.width=`${100*s}%`,a.height=`${100*r}%`},t0=new WeakSet,gw=function(t){var n;const e=Tr._svgFactory.create(1,1,!0);return x(this,Nu).append(e),e.setAttribute("aria-hidden",!0),V(n=Tr,Sx,mw).call(n,e,t),e},jU=function(t,e){const n=Tr._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Tr._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},W(Tr,Sx);let pw=Tr;var Vnt=sn.AbortException,Qnt=sn.AnnotationEditorLayer,jnt=sn.AnnotationEditorParamsType,Xnt=sn.AnnotationEditorType,qnt=sn.AnnotationEditorUIManager,XU=sn.AnnotationLayer,qU=sn.AnnotationMode,Ynt=sn.ColorPicker,Wnt=sn.DOMSVGFactory,Knt=sn.DrawLayer,Jnt=sn.FeatureTest,P7=sn.GlobalWorkerOptions,Znt=sn.ImageKind,$nt=sn.InvalidPDFException,tit=sn.MissingPDFException,eit=sn.OPS,nit=sn.OutputScale,iit=sn.PDFDataRangeTransport,sit=sn.PDFDateString,rit=sn.PDFWorker,ait=sn.PasswordResponses,oit=sn.PermissionFlag,lit=sn.PixelsPerInch,cit=sn.RenderingCancelledException,YU=sn.TextLayer,uit=sn.UnexpectedResponseException,hit=sn.Util,fit=sn.VerbosityLevel,dit=sn.XfaLayer,pit=sn.build,mit=sn.createValidAbsoluteUrl,git=sn.fetchData,WU=sn.getDocument,vit=sn.getFilenameFromUrl,yit=sn.getPdfFilenameFromUrl,_it=sn.getXfaPageViewport,Ait=sn.isDataScheme,xit=sn.isPdfFile,bit=sn.noContextMenu,Sit=sn.normalizeUnicode,Eit=sn.setLayerDimensions,Mit=sn.shadow,Tit=sn.version;const Cit=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Vnt,AnnotationEditorLayer:Qnt,AnnotationEditorParamsType:jnt,AnnotationEditorType:Xnt,AnnotationEditorUIManager:qnt,AnnotationLayer:XU,AnnotationMode:qU,ColorPicker:Ynt,DOMSVGFactory:Wnt,DrawLayer:Knt,FeatureTest:Jnt,GlobalWorkerOptions:P7,ImageKind:Znt,InvalidPDFException:$nt,MissingPDFException:tit,OPS:eit,OutputScale:nit,PDFDataRangeTransport:iit,PDFDateString:sit,PDFWorker:rit,PasswordResponses:ait,PermissionFlag:oit,PixelsPerInch:lit,RenderingCancelledException:cit,TextLayer:YU,UnexpectedResponseException:uit,Util:hit,VerbosityLevel:fit,XfaLayer:dit,build:pit,createValidAbsoluteUrl:mit,fetchData:git,getDocument:WU,getFilenameFromUrl:vit,getPdfFilenameFromUrl:yit,getXfaPageViewport:_it,isDataScheme:Ait,isPdfFile:xit,noContextMenu:bit,normalizeUnicode:Sit,setLayerDimensions:Eit,shadow:Mit,version:Tit},Symbol.toStringTag,{value:"Module"}));var ar=function(i,t,e){if(e||arguments.length===2)for(var n=0,s=t.length,r;n<s;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return i.concat(r||Array.prototype.slice.call(t))},wit=["onCopy","onCut","onPaste"],Rit=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Lit=["onFocus","onBlur"],Dit=["onInput","onInvalid","onReset","onSubmit"],Bit=["onLoad","onError"],Oit=["onKeyDown","onKeyPress","onKeyUp"],Nit=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],Iit=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Uit=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Pit=["onSelect"],Fit=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Hit=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],zit=["onScroll"],Git=["onWheel"],kit=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Vit=["onTransitionEnd"],Qit=["onToggle"],jit=["onChange"],Xit=ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar([],wit,!0),Rit,!0),Lit,!0),Dit,!0),Bit,!0),Oit,!0),Nit,!0),Iit,!0),Uit,!0),Pit,!0),Fit,!0),Hit,!0),zit,!0),Git,!0),kit,!0),Vit,!0),jit,!0),Qit,!0);function KU(i,t){var e={};return Xit.forEach(function(n){var s=i[n];s&&(t?e[n]=function(r){return s(r,t(n))}:e[n]=s)}),e}function kx(i){var t=!1,e=new Promise(function(n,s){i.then(function(r){return!t&&n(r)}).catch(function(r){return!t&&s(r)})});return{promise:e,cancel:function(){t=!0}}}function JU(i){var t,e,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(t=0;t<s;t++)i[t]&&(e=JU(i[t]))&&(n&&(n+=" "),n+=e)}else for(e in i)i[e]&&(n&&(n+=" "),n+=e);return n}function kM(){for(var i,t,e=0,n="",s=arguments.length;e<s;e++)(i=arguments[e])&&(t=JU(i))&&(n&&(n+=" "),n+=t);return n}var qit="Invariant failed";function Si(i,t){if(!i)throw new Error(qit)}var u5,W9;function Yit(){if(W9)return u5;W9=1;var i=function(){};return u5=i,u5}var Wit=Yit();const ea=IE(Wit);var K9=Object.prototype.hasOwnProperty;function J9(i,t,e){for(e of i.keys())if(ev(e,t))return e}function ev(i,t){var e,n,s;if(i===t)return!0;if(i&&t&&(e=i.constructor)===t.constructor){if(e===Date)return i.getTime()===t.getTime();if(e===RegExp)return i.toString()===t.toString();if(e===Array){if((n=i.length)===t.length)for(;n--&&ev(i[n],t[n]););return n===-1}if(e===Set){if(i.size!==t.size)return!1;for(n of i)if(s=n,s&&typeof s=="object"&&(s=J9(t,s),!s)||!t.has(s))return!1;return!0}if(e===Map){if(i.size!==t.size)return!1;for(n of i)if(s=n[0],s&&typeof s=="object"&&(s=J9(t,s),!s)||!ev(n[1],t.get(s)))return!1;return!0}if(e===ArrayBuffer)i=new Uint8Array(i),t=new Uint8Array(t);else if(e===DataView){if((n=i.byteLength)===t.byteLength)for(;n--&&i.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===t.byteLength)for(;n--&&i[n]===t[n];);return n===-1}if(!e||typeof i=="object"){n=0;for(e in i)if(K9.call(i,e)&&++n&&!K9.call(t,e)||!(e in t)||!ev(i[e],t[e]))return!1;return Object.keys(t).length===n}}return i!==i&&t!==t}const ZU=rt.createContext(null);function nv({children:i,type:t}){return k.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:i})}const Kit="noopener noreferrer nofollow";class Jit{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Si(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Si(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{Si(this.pdfDocument),Si(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Si(Array.isArray(e));const n=e[0];new Promise(s=>{Si(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{s(r)}).catch(()=>{Si(!1)}):typeof n=="number"?s(n):Si(!1)}).then(s=>{const r=s+1;Si(this.pdfViewer),Si(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:s,pageNumber:r})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;Si(this.pdfViewer),Si(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||Kit,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Z9={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},VM=typeof window<"u",$U=VM&&window.location.protocol==="file:";function Zit(i){return typeof i<"u"}function _m(i){return Zit(i)&&i!==null}function $it(i){return typeof i=="string"}function tst(i){return i instanceof ArrayBuffer}function est(i){return Si(VM),i instanceof Blob}function vw(i){return $it(i)&&/^data:/.test(i)}function $9(i){Si(vw(i));const[t="",e=""]=i.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function nst(){return VM&&window.devicePixelRatio||1}const tP="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function tD(){ea(!$U,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${tP}`)}function ist(){ea(!$U,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${tP}`)}function Zg(i){i!=null&&i.cancel&&i.cancel()}function yw(i,t){return Object.defineProperty(i,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function sst(i){return i.name==="RenderingCancelledException"}function rst(i){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=s=>{if(!s.target)return e(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}function ast(i,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function yy(){return rt.useReducer(ast,{value:void 0,error:void 0})}var ost=function(i,t,e,n){function s(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function l(m){try{f(n.next(m))}catch(g){a(g)}}function u(m){try{f(n.throw(m))}catch(g){a(g)}}function f(m){m.done?r(m.value):s(m.value).then(l,u)}f((n=n.apply(i,t||[])).next())})},eD=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e};const{PDFDataRangeTransport:lst}=Cit,cst=(i,t)=>{switch(t){case Z9.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");i(e);break}case Z9.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");i(e);break}}};function nD(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const ust=rt.forwardRef(function(t,e){var{children:n,className:s,error:r="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:l,file:u,inputRef:f,imageResourcesPath:m,loading:g="Loading PDF",noData:v="No PDF file specified.",onItemClick:_,onLoadError:b,onLoadProgress:T,onLoadSuccess:E,onPassword:S=cst,onSourceError:w,onSourceSuccess:D,options:B,renderMode:N,rotate:I}=t,F=eD(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[z,U]=yy(),{value:P,error:X}=z,[lt,it]=yy(),{value:ut,error:dt}=lt,j=rt.useRef(new Jit),tt=rt.useRef([]),nt=rt.useRef(void 0),_t=rt.useRef(void 0);u&&u!==nt.current&&nD(u)&&(ea(!ev(u,nt.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),nt.current=u),B&&B!==_t.current&&(ea(!ev(B,_t.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),_t.current=B);const J=rt.useRef({scrollPageIntoView:re=>{const{dest:Z,pageNumber:Kt,pageIndex:Ft=Kt-1}=re;if(_){_({dest:Z,pageIndex:Ft,pageNumber:Kt});return}const Vt=tt.current[Ft];if(Vt){Vt.scrollIntoView();return}ea(!1,`An internal link leading to page ${Kt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});rt.useImperativeHandle(e,()=>({linkService:j,pages:tt,viewer:J}),[]);function ot(){D&&D()}function xt(){X&&(ea(!1,X.toString()),w&&w(X))}function Et(){U({type:"RESET"})}rt.useEffect(Et,[u,U]);const ct=rt.useCallback(()=>ost(this,void 0,void 0,function*(){if(!u)return null;if(typeof u=="string")return vw(u)?{data:$9(u)}:(tD(),{url:u});if(u instanceof lst)return{range:u};if(tst(u))return{data:u};if(VM&&est(u))return{data:yield rst(u)};if(Si(typeof u=="object"),Si(nD(u)),"url"in u&&typeof u.url=="string"){if(vw(u.url)){const{url:re}=u,Z=eD(u,["url"]),Kt=$9(re);return Object.assign({data:Kt},Z)}tD()}return u}),[u]);rt.useEffect(()=>{const re=kx(ct());return re.promise.then(Z=>{U({type:"RESOLVE",value:Z})}).catch(Z=>{U({type:"REJECT",error:Z})}),()=>{Zg(re)}},[ct,U]),rt.useEffect(()=>{if(!(typeof P>"u")){if(P===!1){xt();return}ot()}},[P]);function wt(){ut&&(E&&E(ut),tt.current=new Array(ut.numPages),j.current.setDocument(ut))}function Bt(){dt&&(ea(!1,dt.toString()),b&&b(dt))}rt.useEffect(function(){it({type:"RESET"})},[it,P]),rt.useEffect(function(){if(!P)return;const Z=B?Object.assign(Object.assign({},P),B):P,Kt=WU(Z);T&&(Kt.onProgress=T),S&&(Kt.onPassword=S);const Ft=Kt,Vt=Ft.promise.then(Gt=>{it({type:"RESOLVE",value:Gt})}).catch(Gt=>{Ft.destroyed||it({type:"REJECT",error:Gt})});return()=>{Vt.finally(()=>Ft.destroy())}},[B,it,P]),rt.useEffect(()=>{if(!(typeof ut>"u")){if(ut===!1){Bt();return}wt()}},[ut]),rt.useEffect(function(){j.current.setViewer(J.current),j.current.setExternalLinkRel(a),j.current.setExternalLinkTarget(l)},[a,l]);const Ut=rt.useCallback((re,Z)=>{tt.current[re]=Z},[]),Wt=rt.useCallback(re=>{delete tt.current[re]},[]),ve=rt.useMemo(()=>({imageResourcesPath:m,linkService:j.current,onItemClick:_,pdf:ut,registerPage:Ut,renderMode:N,rotate:I,unregisterPage:Wt}),[m,_,ut,Ut,N,I,Wt]),ee=rt.useMemo(()=>KU(F,()=>ut),[F,ut]);function Ye(){return k.jsx(ZU.Provider,{value:ve,children:n})}function we(){return u?ut==null?k.jsx(nv,{type:"loading",children:typeof g=="function"?g():g}):ut===!1?k.jsx(nv,{type:"error",children:typeof r=="function"?r():r}):Ye():k.jsx(nv,{type:"no-data",children:typeof v=="function"?v():v})}return k.jsx("div",Object.assign({className:kM("react-pdf__Document",s),ref:f,style:{"--scale-factor":"1"}},ee,{children:we()}))});function eP(){return rt.useContext(ZU)}function nP(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=i.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(r){e.forEach(function(a){typeof a=="function"?a(r):a&&(a.current=r)})}}const iP=rt.createContext(null),sP={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},hst=/^H(\d+)$/;function fst(i){return i in sP}function QM(i){return"children"in i}function rP(i){return QM(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function dst(i){const t={};if(QM(i)){const{role:e}=i,n=e.match(hst);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(fst(e)){const s=sP[e];s&&(t.role=s)}}return t}function aP(i){const t={};if(QM(i)){if(i.alt!==void 0&&(t["aria-label"]=i.alt),i.lang!==void 0&&(t.lang=i.lang),rP(i)){const[e]=i.children;if(e){const n=aP(e);return Object.assign(Object.assign({},t),n)}}}else"id"in i&&(t["aria-owns"]=i.id);return t}function pst(i){return i?Object.assign(Object.assign({},dst(i)),aP(i)):null}function oP({className:i,node:t}){const e=rt.useMemo(()=>pst(t),[t]),n=rt.useMemo(()=>!QM(t)||rP(t)?null:t.children.map((s,r)=>k.jsx(oP,{node:s},r)),[t]);return k.jsx("span",Object.assign({className:i},e,{children:n}))}function jM(){return rt.useContext(iP)}function mst(){const i=jM();Si(i);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=i,[n,s]=yy(),{value:r,error:a}=n,{customTextRenderer:l,page:u}=i;function f(){r&&e&&e(r)}function m(){a&&(ea(!1,a.toString()),t&&t(a))}return rt.useEffect(function(){s({type:"RESET"})},[s,u]),rt.useEffect(function(){if(l||!u)return;const v=kx(u.getStructTree()),_=v;return v.promise.then(b=>{s({type:"RESOLVE",value:b})}).catch(b=>{s({type:"REJECT",error:b})}),()=>Zg(_)},[l,u,s]),rt.useEffect(()=>{if(r!==void 0){if(r===!1){m();return}f()}},[r]),r?k.jsx(oP,{className:"react-pdf__Page__structTree structTree",node:r}):null}const iD=qU;function gst(i){const t=jM();Si(t);const e=Object.assign(Object.assign({},t),i),{_className:n,canvasBackground:s,devicePixelRatio:r=nst(),onRenderError:a,onRenderSuccess:l,page:u,renderForms:f,renderTextLayer:m,rotate:g,scale:v}=e,{canvasRef:_}=i;Si(u);const b=rt.useRef(null);function T(){u&&l&&l(yw(u,v))}function E(B){sst(B)||(ea(!1,B.toString()),a&&a(B))}const S=rt.useMemo(()=>u.getViewport({scale:v*r,rotation:g}),[r,u,g,v]),w=rt.useMemo(()=>u.getViewport({scale:v,rotation:g}),[u,g,v]);rt.useEffect(function(){if(!u)return;u.cleanup();const{current:N}=b;if(!N)return;N.width=S.width,N.height=S.height,N.style.width=`${Math.floor(w.width)}px`,N.style.height=`${Math.floor(w.height)}px`,N.style.visibility="hidden";const I={annotationMode:f?iD.ENABLE_FORMS:iD.ENABLE,canvasContext:N.getContext("2d",{alpha:!1}),viewport:S};s&&(I.background=s);const F=u.render(I),z=F;return F.promise.then(()=>{N.style.visibility="",T()}).catch(E),()=>Zg(z)},[s,u,f,S,w]);const D=rt.useCallback(()=>{const{current:B}=b;B&&(B.width=0,B.height=0)},[]);return rt.useEffect(()=>D,[D]),k.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:nP(_,b),style:{display:"block",userSelect:"none"},children:m?k.jsx(mst,{}):null})}function vst(i){return"str"in i}function yst(){const i=jM();Si(i);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:a,pageIndex:l,pageNumber:u,rotate:f,scale:m}=i;Si(a);const[g,v]=yy(),{value:_,error:b}=g,T=rt.useRef(null);ea(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){_&&n&&n(_)}function S(){b&&(ea(!1,b.toString()),e&&e(b))}rt.useEffect(function(){v({type:"RESET"})},[a,v]),rt.useEffect(function(){if(!a)return;const z=kx(a.getTextContent()),U=z;return z.promise.then(P=>{v({type:"RESOLVE",value:P})}).catch(P=>{v({type:"REJECT",error:P})}),()=>Zg(U)},[a,v]),rt.useEffect(()=>{if(_!==void 0){if(_===!1){S();return}E()}},[_]);const w=rt.useCallback(()=>{r&&r()},[r]),D=rt.useCallback(F=>{ea(!1,F.toString()),s&&s(F)},[s]);function B(){const F=T.current;F&&F.classList.add("selecting")}function N(){const F=T.current;F&&F.classList.remove("selecting")}const I=rt.useMemo(()=>a.getViewport({scale:m,rotation:f}),[a,f,m]);return rt.useLayoutEffect(function(){if(!a||!_)return;const{current:z}=T;if(!z)return;z.innerHTML="";const U=a.streamTextContent({includeMarkedContent:!0}),P={container:z,textContentSource:U,viewport:I},X=new YU(P),lt=X;return X.render().then(()=>{const it=document.createElement("div");it.className="endOfContent",z.append(it);const ut=z.querySelectorAll('[role="presentation"]');if(t){let dt=0;_.items.forEach((j,tt)=>{if(!vst(j))return;const nt=ut[dt];if(!nt)return;const _t=t(Object.assign({pageIndex:l,pageNumber:u,itemIndex:tt},j));nt.innerHTML=_t,dt+=j.str&&j.hasEOL?2:1})}w()}).catch(D),()=>Zg(lt)},[t,D,w,a,l,u,_,I]),k.jsx("div",{className:kM("react-pdf__Page__textContent","textLayer"),onMouseUp:N,onMouseDown:B,ref:T})}function _st(){const i=eP(),t=jM();Si(t);const e=Object.assign(Object.assign({},i),t),{imageResourcesPath:n,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:u,page:f,pdf:m,renderForms:g,rotate:v,scale:_=1}=e;Si(m),Si(f),Si(s);const[b,T]=yy(),{value:E,error:S}=b,w=rt.useRef(null);ea(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function D(){E&&a&&a(E)}function B(){S&&(ea(!1,S.toString()),r&&r(S))}rt.useEffect(function(){T({type:"RESET"})},[T,f]),rt.useEffect(function(){if(!f)return;const U=kx(f.getAnnotations()),P=U;return U.promise.then(X=>{T({type:"RESOLVE",value:X})}).catch(X=>{T({type:"REJECT",error:X})}),()=>{Zg(P)}},[T,f]),rt.useEffect(()=>{if(E!==void 0){if(E===!1){B();return}D()}},[E]);function N(){u&&u()}function I(z){ea(!1,`${z}`),l&&l(z)}const F=rt.useMemo(()=>f.getViewport({scale:_,rotation:v}),[f,v,_]);return rt.useEffect(function(){if(!m||!f||!s||!E)return;const{current:U}=w;if(!U)return;const P=F.clone({dontFlip:!0}),X={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:U,l10n:null,page:f,structTreeLayer:null,viewport:P},lt={annotations:E,annotationStorage:m.annotationStorage,div:U,imageResourcesPath:n,linkService:s,page:f,renderForms:g,viewport:P};U.innerHTML="";try{new XU(X).render(lt),N()}catch(it){I(it)}return()=>{}},[E,n,s,f,m,g,F]),k.jsx("div",{className:kM("react-pdf__Page__annotations","annotationLayer"),ref:w})}var Ast=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e};const sD=1;function xst(i){const t=eP(),e=Object.assign(Object.assign({},t),i),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:a,children:l,className:u,customRenderer:f,customTextRenderer:m,devicePixelRatio:g,error:v="Failed to load the page.",height:_,inputRef:b,loading:T="Loading page",noData:E="No page specified.",onGetAnnotationsError:S,onGetAnnotationsSuccess:w,onGetStructTreeError:D,onGetStructTreeSuccess:B,onGetTextError:N,onGetTextSuccess:I,onLoadError:F,onLoadSuccess:z,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:P,onRenderError:X,onRenderSuccess:lt,onRenderTextLayerError:it,onRenderTextLayerSuccess:ut,pageIndex:dt,pageNumber:j,pdf:tt,registerPage:nt,renderAnnotationLayer:_t=!0,renderForms:J=!1,renderMode:ot="canvas",renderTextLayer:xt=!0,rotate:Et,scale:ct=sD,unregisterPage:wt,width:Bt}=e,Ut=Ast(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Wt,ve]=yy(),{value:ee,error:Ye}=Wt,we=rt.useRef(null);Si(tt);const re=_m(j)?j-1:dt??null,Z=j??(_m(dt)?dt+1:null),Kt=Et??(ee?ee.rotate:null),Ft=rt.useMemo(()=>{if(!ee)return null;let ne=1;const te=ct??sD;if(Bt||_){const ge=ee.getViewport({scale:1,rotation:Kt});Bt?ne=Bt/ge.width:_&&(ne=_/ge.height)}return te*ne},[_,ee,Kt,ct,Bt]);rt.useEffect(function(){return()=>{_m(re)&&s&&wt&&wt(re)}},[s,tt,re,wt]);function Vt(){if(z){if(!ee||!Ft)return;z(yw(ee,Ft))}if(s&&nt){if(!_m(re)||!we.current)return;nt(re,we.current)}}function Gt(){Ye&&(ea(!1,Ye.toString()),F&&F(Ye))}rt.useEffect(function(){ve({type:"RESET"})},[ve,tt,re]),rt.useEffect(function(){if(!tt||!Z)return;const te=kx(tt.getPage(Z)),ge=te;return te.promise.then(De=>{ve({type:"RESOLVE",value:De})}).catch(De=>{ve({type:"REJECT",error:De})}),()=>Zg(ge)},[ve,tt,Z]),rt.useEffect(()=>{if(ee!==void 0){if(ee===!1){Gt();return}Vt()}},[ee,Ft]);const be=rt.useMemo(()=>ee&&_m(re)&&Z&&_m(Kt)&&_m(Ft)?{_className:n,canvasBackground:r,customTextRenderer:m,devicePixelRatio:g,onGetAnnotationsError:S,onGetAnnotationsSuccess:w,onGetStructTreeError:D,onGetStructTreeSuccess:B,onGetTextError:N,onGetTextSuccess:I,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:P,onRenderError:X,onRenderSuccess:lt,onRenderTextLayerError:it,onRenderTextLayerSuccess:ut,page:ee,pageIndex:re,pageNumber:Z,renderForms:J,renderTextLayer:xt,rotate:Kt,scale:Ft}:null,[n,r,m,g,S,w,D,B,N,I,U,P,X,lt,it,ut,ee,re,Z,J,xt,Kt,Ft]),qt=rt.useMemo(()=>KU(Ut,()=>ee&&(Ft?yw(ee,Ft):void 0)),[Ut,ee,Ft]),$=`${re}@${Ft}/${Kt}`;function Q(){switch(ot){case"custom":return Si(f),k.jsx(f,{},`${$}_custom`);case"none":return null;case"canvas":default:return k.jsx(gst,{canvasRef:a},`${$}_canvas`)}}function vt(){return xt?k.jsx(yst,{},`${$}_text`):null}function It(){return _t?k.jsx(_st,{},`${$}_annotations`):null}function jt(){return k.jsxs(iP.Provider,{value:be,children:[Q(),vt(),It(),l]})}function Ot(){return Z?tt===null||ee===void 0||ee===null?k.jsx(nv,{type:"loading",children:typeof T=="function"?T():T}):tt===!1||ee===!1?k.jsx(nv,{type:"error",children:typeof v=="function"?v():v}):jt():k.jsx(nv,{type:"no-data",children:typeof E=="function"?E():E})}return k.jsx("div",Object.assign({className:kM(n,u),"data-page-number":Z,ref:nP(b,we),style:{"--scale-factor":`${Ft}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},qt,{children:Ot()}))}ist();P7.workerSrc="pdf.worker.mjs";function bst(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 36.57142857142857 0 Q 20.571428571428573 0 10.285714285714286 10.285714285714286 L 10.285714285714286 10.285714285714286 L 10.285714285714286 10.285714285714286 Q 0 20.571428571428573 0 36.57142857142857 L 0 146.28571428571428 L 0 146.28571428571428 Q 0 162.28571428571428 10.285714285714286 172.57142857142858 Q 20.571428571428573 182.85714285714286 36.57142857142857 182.85714285714286 Q 52.57142857142857 182.85714285714286 62.857142857142854 172.57142857142858 Q 73.14285714285714 162.28571428571428 73.14285714285714 146.28571428571428 L 73.14285714285714 73.14285714285714 L 73.14285714285714 73.14285714285714 L 146.28571428571428 73.14285714285714 L 146.28571428571428 73.14285714285714 Q 162.28571428571428 73.14285714285714 172.57142857142858 62.857142857142854 Q 182.85714285714286 52.57142857142857 182.85714285714286 36.57142857142857 Q 182.85714285714286 20.571428571428573 172.57142857142858 10.285714285714286 Q 162.28571428571428 0 146.28571428571428 0 L 36.57142857142857 0 L 36.57142857142857 0 Z M 73.14285714285714 365.7142857142857 Q 73.14285714285714 349.7142857142857 62.857142857142854 339.42857142857144 L 62.857142857142854 339.42857142857144 L 62.857142857142854 339.42857142857144 Q 52.57142857142857 329.14285714285717 36.57142857142857 329.14285714285717 Q 20.571428571428573 329.14285714285717 10.285714285714286 339.42857142857144 Q 0 349.7142857142857 0 365.7142857142857 L 0 475.42857142857144 L 0 475.42857142857144 Q 0 491.42857142857144 10.285714285714286 501.7142857142857 Q 20.571428571428573 512 36.57142857142857 512 L 146.28571428571428 512 L 146.28571428571428 512 Q 162.28571428571428 512 172.57142857142858 501.7142857142857 Q 182.85714285714286 491.42857142857144 182.85714285714286 475.42857142857144 Q 182.85714285714286 459.42857142857144 172.57142857142858 449.14285714285717 Q 162.28571428571428 438.85714285714283 146.28571428571428 438.85714285714283 L 73.14285714285714 438.85714285714283 L 73.14285714285714 438.85714285714283 L 73.14285714285714 365.7142857142857 L 73.14285714285714 365.7142857142857 Z M 365.7142857142857 0 Q 349.7142857142857 0 339.42857142857144 10.285714285714286 L 339.42857142857144 10.285714285714286 L 339.42857142857144 10.285714285714286 Q 329.14285714285717 20.571428571428573 329.14285714285717 36.57142857142857 Q 329.14285714285717 52.57142857142857 339.42857142857144 62.857142857142854 Q 349.7142857142857 73.14285714285714 365.7142857142857 73.14285714285714 L 438.85714285714283 73.14285714285714 L 438.85714285714283 73.14285714285714 L 438.85714285714283 146.28571428571428 L 438.85714285714283 146.28571428571428 Q 438.85714285714283 162.28571428571428 449.14285714285717 172.57142857142858 Q 459.42857142857144 182.85714285714286 475.42857142857144 182.85714285714286 Q 491.42857142857144 182.85714285714286 501.7142857142857 172.57142857142858 Q 512 162.28571428571428 512 146.28571428571428 L 512 36.57142857142857 L 512 36.57142857142857 Q 512 20.571428571428573 501.7142857142857 10.285714285714286 Q 491.42857142857144 0 475.42857142857144 0 L 365.7142857142857 0 L 365.7142857142857 0 Z M 512 365.7142857142857 Q 512 349.7142857142857 501.7142857142857 339.42857142857144 L 501.7142857142857 339.42857142857144 L 501.7142857142857 339.42857142857144 Q 491.42857142857144 329.14285714285717 475.42857142857144 329.14285714285717 Q 459.42857142857144 329.14285714285717 449.14285714285717 339.42857142857144 Q 438.85714285714283 349.7142857142857 438.85714285714283 365.7142857142857 L 438.85714285714283 438.85714285714283 L 438.85714285714283 438.85714285714283 L 365.7142857142857 438.85714285714283 L 365.7142857142857 438.85714285714283 Q 349.7142857142857 438.85714285714283 339.42857142857144 449.14285714285717 Q 329.14285714285717 459.42857142857144 329.14285714285717 475.42857142857144 Q 329.14285714285717 491.42857142857144 339.42857142857144 501.7142857142857 Q 349.7142857142857 512 365.7142857142857 512 L 475.42857142857144 512 L 475.42857142857144 512 Q 491.42857142857144 512 501.7142857142857 501.7142857142857 Q 512 491.42857142857144 512 475.42857142857144 L 512 365.7142857142857 L 512 365.7142857142857 Z"})})}function Sst(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 128 0 Q 101 1 83 19 L 83 19 L 83 19 Q 65 37 64 64 L 64 448 L 64 448 Q 65 475 83 493 Q 101 511 128 512 L 384 512 L 384 512 Q 411 511 429 493 Q 447 475 448 448 L 448 160 L 448 160 L 320 160 L 320 160 Q 306 160 297 151 Q 288 142 288 128 L 288 0 L 288 0 L 128 0 L 128 0 Z M 320 0 L 320 128 L 320 0 L 320 128 L 448 128 L 448 128 L 320 0 L 320 0 Z M 280 232 L 280 334 L 280 232 L 280 334 L 311 303 L 311 303 Q 328 289 345 303 Q 359 320 345 337 L 273 409 L 273 409 Q 256 423 239 409 L 167 337 L 167 337 Q 153 320 167 303 Q 184 289 201 303 L 232 334 L 232 334 L 232 232 L 232 232 Q 234 210 256 208 Q 278 210 280 232 L 280 232 Z"})})}const Est=ie.div`
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  width: 100%;
  z-index: 100;
  background-color: rgba(255, 255, 255, 0.5);
`,Mst=ie.img`
  width: 8rem;
`,rD=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAGCAYAAABuFqY0AAAAAXNSR0IArs4c6QAAAFRJREFUOI1jrKys/M+ABbS3tzPC2NnZ2VjVTJ06Fa7Gzc0Nq5pdu3bB1RgbG2NVc/bsWbgacXFxrGpevnwJV8PHx4dVDRM2waEKRj0zWMGoZwYrAAArJhU1ws9KfwAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAGCAYAAABuFqY0AAAAAXNSR0IArs4c6QAAAFRJREFUOI1j5OPj+8+ABXz69IkRxq6srMSqpr29Ha4mOzsbq5qpU6fC1bi5uWFVs2vXLrgaY2NjrGrOnj0LVyMuLo5VDRM2waEKRj0zWMGoZwYrAACXJhVQyOEnmQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAGCAYAAABuFqY0AAAAAXNSR0IArs4c6QAAAFRJREFUOI1jFBcX/8+ABbx8+ZIRxubj48Oq5tOnT3A1lZWVWNW0t7fD1WRnZ2NVM3XqVLgaNzc3rGp27doFV2NsbIxVDRM2waEKRj0zWMGoZwYrAADnNRWkJS54aAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAGCAYAAABuFqY0AAAAAXNSR0IArs4c6QAAAFRJREFUOI1jNDY2/s+ABZw9e5YRxhYXF8eq5uXLl3A1fHx8WNV8+vQJrqayshKrmvb2dria7OxsrGqmTp0KV+Pm5oZVDRM2waEKRj0zWMGoZwYrAADLRBXdUVYF0QAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAGCAYAAABuFqY0AAAAAXNSR0IArs4c6QAAAFRJREFUOI1jdHNz+8+ABezatYsRxjY2Nsaq5uzZs3A14uLiWNW8fPkSroaPjw+rmk+fPsHVVFZWYlXT3t4OV5OdnY1VDRM2waEKRj0zWMGoZwYrAACHYhZMkLP7WAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAGCAYAAABuFqY0AAAAAXNSR0IArs4c6QAAAFRJREFUOI1jzM7O/s+ABUydOpURxnZzc8OqZteuXXA1xsbGWNWcPXsWrkZcXByrmpcvX8LV8PHxYVXz6dMnuJrKykqsapiwCQ5VMOqZwQpGPTNYAQAvcRZ2QUm+2gAAAABJRU5ErkJggg=="],aD=["cursor-loading-start","cursor-loading-mid","cursor-loading-end"],oD=300;function lP(){const[i,t]=rt.useState(0),[e,n]=rt.useState(0),s=rt.useRef(performance.now()),r=rt.useRef(performance.now()),a=rt.useRef(0);return rt.useEffect(()=>{const l=u=>{const f=u-s.current,m=u-r.current;f>=oD&&(t(g=>(g+1)%rD.length),s.current=u),m>=oD*2&&(n(g=>(g+1)%aD.length),r.current=u),a.current=requestAnimationFrame(l)};return a.current=requestAnimationFrame(l),()=>{a.current&&cancelAnimationFrame(a.current)}},[]),k.jsx(Est,{className:aD[e],children:k.jsx(Mst,{src:rD[i],alt:"Loading frame"})})}P7.workerSrc="pdfjs/pdf.worker.min.mjs";const h5="pdf/cv_antonov_mykyta.pdf";function Tst({modal:i}){const[t,e]=rt.useState(!0),{cellSize:n}=OM(),s=()=>{window.open(h5,"_blank","noopener noreferrer")},r=async()=>{fetch(h5).then(a=>{a.blob().then(l=>{const u=window.URL.createObjectURL(l),f=document.createElement("a");f.href=u,f.download="cv_antonov_mykyta.pdf",f.click()})})};return k.jsxs(hp,{modal:i,buttons:[{Icon:k.jsx(bst,{}),onClick:s,key:"expand"},{Icon:k.jsx(Sst,{}),onClick:()=>setTimeout(r,0),key:"download"}],children:[t&&k.jsx(lP,{}),k.jsx(ust,{onLoadSuccess:()=>e(!1),onLoadError:()=>e(!1),file:h5,children:k.jsx(xst,{width:i.dimensions.width*n,renderTextLayer:!1,renderAnnotationLayer:!1,pageNumber:1})})]})}const Cst=ie.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  padding: 0.5rem;
`;ie.div`
  display: flex;
  width: 100%;
  // padding-left: 50px;
  // padding-top: 10px;
  // height: 50px;
`;ie.button`
  position: relative;
  // width: 120px;
  height: 100%;
  background-color: ${({backgroundColor:i})=>i};

  border: 2px solid ${({theme:i})=>i.pallet.textColor};
  border-bottom: ${({backgroundColor:i})=>`0.15rem solid ${i}`};
  border-top-left-radius: 4px;
  border-top-right-radius: 50%;
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;

  // margin-right: -32px;
  // transform: translateY(2px);

  z-index: ${({zIndex:i,isActive:t})=>t?10:i};

  color: ${({isActive:i})=>i?"var(--white-color)":"inherit"};

  &:hover {
    color: var(--white-color);
  }
`;const wst=ie.div`
  display: flex;
  width: 100%;
  height: 100%;
  background-color: ${({$backgroundColor:i})=>i||"var(--white-color)"};
  z-index: 100;
  border: 2px solid ${({theme:i})=>i.pallet.textColor};
  // border-top-left-radius: 10px;
  // border-top-right-radius: 10px;
  // border-bottom-left-radius: 0;
  // border-bottom-right-radius: 0;
  border-radius: 0.3rem;
  padding: 0.5rem;
`,Rst=ie.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  gap: 1rem;
`,S4=ie.input`
  width: 100%;
  height: 1.5rem;
  background-color: var(--white-color);
  border-radius: 0.2rem;
  font-weight: 600;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  outline: none;
  padding: 1rem 0.5rem;

  &:disabled {
    color: gray;
    cursor: url("/vibefolio/cursor/Win95Stop.cur"), not-allowed;
  }
`,f5=ie.label`
  display: flex;
  align-items: center;
  color: var(--white-color);

  span {
    display: inline-block;
    width: 5rem;
  }
`,lD=ie.div`
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  width: 100%;
  height: fit-content;
`,Lst=ie.textarea`
  width: 100%;
  height: 100%;
  border-radius: 0.2rem;
  resize: none;
  outline: none;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
`,Dst=ie.div`
  display: flex;
  justify-content: flex-end;
  align-items: center;
`,Bst=ie.button`
  width: fit-content;
  padding: 0.25rem;
  font-weight: 600;
  border-radius: 0.2rem;
  color: var(--white-color);
  box-shadow: 2px 2px 0px 1px rgba(0, 0, 0, 0.75);
`;ie.div`
  display: grid;
  // grid-template-columns: 150px 1fr;
  width: 100%;
  background-color: ${({theme:i})=>i.pallet.thirdColor};
  border-radius: 0.2rem;
`;ie.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  border-right: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
`;ie.button`
  display: flex;
  flex-direction: column;
  align-items: self-start;
  width: 100%;
  height: min-content;
  line-height: 1.2;
  // padding: 4px 2px;
`;ie.span`
  display: inline-block;
  font-weight: 900;

  max-width: 98%;
  white-space: nowrap;
  overflow: hidden !important;
  text-overflow: ellipsis;
`;ie.span`
  display: inline-block;
  font-weight: 600;
  font-family: "monospace";

  max-width: 98%;
  white-space: nowrap;
  overflow: hidden !important;
  text-overflow: ellipsis;
`;ie.span`
  display: inline-block;
  opacity: 0.7;

  max-width: 98%;
  white-space: nowrap;
  overflow: hidden !important;
  text-overflow: ellipsis;
`;ie.div`
  display: flex;
  flex-direction: column;
  width: 100%;
`;class Vx{constructor(t=0,e="Network Error"){this.status=t,this.text=e}}const Ost=()=>{if(!(typeof localStorage>"u"))return{get:i=>Promise.resolve(localStorage.getItem(i)),set:(i,t)=>Promise.resolve(localStorage.setItem(i,t)),remove:i=>Promise.resolve(localStorage.removeItem(i))}},Dr={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Ost()},F7=i=>i?typeof i=="string"?{publicKey:i}:i.toString()==="[object Object]"?i:{}:{},Nst=(i,t="https://api.emailjs.com")=>{if(!i)return;const e=F7(i);Dr.publicKey=e.publicKey,Dr.blockHeadless=e.blockHeadless,Dr.storageProvider=e.storageProvider,Dr.blockList=e.blockList,Dr.limitRate=e.limitRate,Dr.origin=e.origin||t},cP=async(i,t,e={})=>{const n=await fetch(Dr.origin+i,{method:"POST",headers:e,body:t}),s=await n.text(),r=new Vx(n.status,s);if(n.ok)return r;throw r},uP=(i,t,e)=>{if(!i||typeof i!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e||typeof e!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Ist=i=>{if(i&&i.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},hP=i=>i.webdriver||!i.languages||i.languages.length===0,fP=()=>new Vx(451,"Unavailable For Headless Browser"),Ust=(i,t)=>{if(!Array.isArray(i))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},Pst=i=>{var t;return!((t=i.list)!=null&&t.length)||!i.watchVariable},Fst=(i,t)=>i instanceof FormData?i.get(t):i[t],dP=(i,t)=>{if(Pst(i))return!1;Ust(i.list,i.watchVariable);const e=Fst(t,i.watchVariable);return typeof e!="string"?!1:i.list.includes(e)},pP=()=>new Vx(403,"Forbidden"),Hst=(i,t)=>{if(typeof i!="number"||i<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},zst=async(i,t,e)=>{const n=Number(await e.get(i)||0);return t-Date.now()+n},mP=async(i,t,e)=>{if(!t.throttle||!e)return!1;Hst(t.throttle,t.id);const n=t.id||i;return await zst(n,t.throttle,e)>0?!0:(await e.set(n,Date.now().toString()),!1)},gP=()=>new Vx(429,"Too Many Requests"),Gst=async(i,t,e,n)=>{const s=F7(n),r=s.publicKey||Dr.publicKey,a=s.blockHeadless||Dr.blockHeadless,l=s.storageProvider||Dr.storageProvider,u={...Dr.blockList,...s.blockList},f={...Dr.limitRate,...s.limitRate};return a&&hP(navigator)?Promise.reject(fP()):(uP(r,i,t),Ist(e),e&&dP(u,e)?Promise.reject(pP()):await mP(location.pathname,f,l)?Promise.reject(gP()):cP("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:r,service_id:i,template_id:t,template_params:e}),{"Content-type":"application/json"}))},kst=i=>{if(!i||i.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Vst=i=>typeof i=="string"?document.querySelector(i):i,Qst=async(i,t,e,n)=>{const s=F7(n),r=s.publicKey||Dr.publicKey,a=s.blockHeadless||Dr.blockHeadless,l=Dr.storageProvider||s.storageProvider,u={...Dr.blockList,...s.blockList},f={...Dr.limitRate,...s.limitRate};if(a&&hP(navigator))return Promise.reject(fP());const m=Vst(e);uP(r,i,t),kst(m);const g=new FormData(m);return dP(u,g)?Promise.reject(pP()):await mP(location.pathname,f,l)?Promise.reject(gP()):(g.append("lib_version","4.4.1"),g.append("service_id",i),g.append("template_id",t),g.append("user_id",r),cP("/api/v1.0/email/send-form",g))},jst={init:Nst,send:Gst,sendForm:Qst,EmailJSResponseStatus:Vx};function Xst(){const[i,t]=rt.useState(!1),e=rt.useRef(null),n=Hu(),s=async r=>{if(r.preventDefault(),!!e.current){t(!0);try{await jst.sendForm("service_lm3u50h","template_7vobhdn",e.current,{publicKey:"omhAz0lvyswze0XoT"}),n(J5(`The letter has been sent. 
I will contact you soon `))}catch(a){console.error(a),n(J5("I apologize, something went wrong ","fail"))}finally{t(!1)}}};return k.jsxs(Rst,{ref:e,onSubmit:s,children:[i&&k.jsx(lP,{}),k.jsxs(lD,{children:[k.jsxs(f5,{children:[k.jsx("span",{children:"From:"}),k.jsx(S4,{type:"email",name:"email",required:!0})]}),k.jsxs(f5,{children:[k.jsx("span",{children:"To:"}),k.jsx(S4,{disabled:!0,type:"email",name:"fake_to",value:"Me"})]}),k.jsxs(f5,{children:[k.jsx("span",{children:"Name:"}),k.jsx(S4,{type:"text",name:"name",required:!0})]})]}),k.jsxs(lD,{style:{flexGrow:1},children:[k.jsx(S4,{placeholder:"Title",type:"text",name:"title",required:!0}),k.jsx(Lst,{placeholder:"Message",name:"message",required:!0})]}),k.jsx(Dst,{children:k.jsx(Bst,{className:"cursor-pointer",type:"submit",children:"Send"})})]})}function qst({modal:i}){return k.jsx(hp,{modal:i,children:k.jsx(Cst,{children:k.jsx(wst,{$backgroundColor:"#345995",children:k.jsx(Xst,{})})})})}const Yst=ie.div`
  display: grid;
  gap: 0.5rem;
  width: 100%;
  height: 100%;
  padding: 0.5rem;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(2, 1fr);
`,Wst=ie.div`
  width: 1fr;
  height: 1fr;
  border-radius: 0.3rem;
  background-color: ${({$tileColor:i})=>i};
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
`,vP=["#BFECFF","#0B7189","#E55934","#C33C54","#50514F","#17301C"],yP={mainColor:"#BFECFF",secondColor:"#FFCCEA",thirdColor:"#FFF6E3",textColor:"#1D1C1A "},Kst={mainColor:"#000000",secondColor:"#CD1715",thirdColor:"#19260A",textColor:"#7DBB02"},Jst={name:"pastel",fontFamily:"'Manrope', sans-serif",pallet:yP,backgroundColors:vP},_P=S7({name:"themes",initialState:Jst,reducers:{changeTheme:(i,t)=>{switch(t.payload){case"pastel":return{name:"pastel",fontFamily:"'Manrope', sans-serif",pallet:yP,backgroundColors:vP};case"code":return{name:"code",fontFamily:"'VT323', monospace;",pallet:Kst,backgroundColors:[]}}},changeBackground:(i,t)=>{i.pallet.mainColor=t.payload}}}),{changeTheme:Hrt,changeBackground:Zst}=_P.actions,$st=_P.reducer;function trt({modal:i}){const{backgroundColors:t}=kE(),e=Hu(),n=s=>{e(Zst(s))};return k.jsx(hp,{modal:i,children:k.jsx(Yst,{children:t.map(s=>k.jsx(Wst,{$tileColor:s,className:"cursor-pointer",onClick:()=>n(s)},s))})})}const cD=document.getElementById("modal-root");function ert(){const i=VE(t=>t.modals);return!cD||i.modals.length===0?null:GN.createPortal(k.jsx(k.Fragment,{children:i.modals.filter(({isOpen:t})=>t).map(t=>{switch(t.type){case"photo":return k.jsx(rtt,{modal:t},t.type);case"about_me":return k.jsx(ott,{modal:t},t.type);case"skills":return k.jsx(gtt,{modal:t},t.type);case"experience":return k.jsx(Itt,{modal:t},t.type);case"folder":return k.jsx(ztt,{modal:t},t.type);case"pdf":return k.jsx(Tst,{modal:t},t.type);case"contact_me":return k.jsx(qst,{modal:t},t.type);case"settings":return k.jsx(trt,{modal:t},t.type);default:return null}})}),cD)}const nrt=Ay`
  0%{
    animation-timing-function:$ease-in-quint;
    transform:scale(0.000,0.0001) translate3d(0,0,0);
    -webkit-filter:brightness(50);
    filter:brightness(50);
  }

  60%{
    transform:scale(1.3,0.001) translate3d(0,0,0);
    -webkit-filter:brightness(10);
    filter:brightness(10);
  }

  100%{
    transform:scale(1,1.3) translate3d(0,0,0);
    -webkit-filter:brightness(1);
    filter:brightness(1);
    opacity:1;
  }
`,irt=ie.div`
  position: absolute;
  inset: 0;
  z-index: 9999;
  background-color: black;
`,srt=ie.div`
  width: 100%;
  height: 100%;
  animation: ${nrt} 1s linear forwards;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: black;
`,rrt=ie.pre`
  font-family: monospace;
  color: #00ffcc;
`,art=ie.span`
  color: #ff6347;
`,uD=ie.span`
  color: #ffa500;
`,ort={arrow:"/vibefolio/cursor/Arrow1.cur",pointer:"/vibefolio/cursor/Hand2.cur",notAllowed:"/vibefolio/cursor/Win95Stop.cur",move:"/vibefolio/cursor/Win95Move.cur",loadingStart:"/vibefolio/cursor/Hourglass_Start.cur",loadingMid:"/vibefolio/cursor/Hourglass_Mid.cur",loadingEnd:"/vibefolio/cursor/Hourglass_End.cur"};function lrt({onFinish:i}){const{progress:t}=pW(),{start:e}=gN(),[n,s]=rt.useState(!1),[r,a]=rt.useState(!1),{playIntro:l,isLoaded:u,loadProgress:f}=DM(),m=t===100&&n&&u&&r,[g,v]=rt.useState(""),_=E=>new Promise((S,w)=>{const D=new Image;D.src=E,D.onload=()=>S(),D.onerror=()=>w()}),b=rt.useCallback(()=>{i(),l(),e()},[i,l,e]),T=rt.useCallback(E=>{E.key==="Enter"&&m&&b()},[m,b]);return rt.useEffect(()=>{const E=setInterval(()=>{v(S=>S==="..."?"":S+".")},300);return()=>clearInterval(E)},[]),rt.useEffect(()=>{const E=async()=>{const S=Object.entries(ort);await Promise.all(S.map(([,w])=>_(w))),a(!0)};document.fonts.ready.then(()=>s(!0)),E()},[]),rt.useEffect(()=>(window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)),[T]),k.jsx(irt,{children:k.jsx(srt,{children:k.jsxs(rrt,{children:[["> Booting PortfolioOS v1.0",`> Loading 3D assets.... ${Math.round(t).toString().padEnd(3," ")}%`,`> Fonts system......... ${n?"OK":"LOADING"}`,`> Audio system......... ${u?"OK":`${Math.round(f)}%`}`,"> CRT Display.......... ONLINE"].join(`
`),k.jsxs(k.Fragment,{children:[`
> Employment status.... `,k.jsx(art,{children:"UNEMPLOYED"})]}),k.jsxs(k.Fragment,{children:[`
> Job seek subsystem... `,k.jsxs(uD,{children:["SCANNING NETWORK",g]})]}),k.jsxs(k.Fragment,{children:[`
> Floppy drive......... `,k.jsx(uD,{children:"NOT FOUND  SKIPPING"})]}),m&&k.jsxs(k.Fragment,{children:[`
> Boot sequence complete. Press `,k.jsx("span",{onClick:b,className:"cursor-pointer",style:{textDecoration:"underline"},children:"ENTER"})," to continue..."]})]})})})}const crt=Ay`
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
`,urt=Ay`
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(100%);
  }
`,hrt=ie.div`
  position: fixed;
  bottom: 0;
  right: 0;
  padding: 0 0.5rem 0.5rem 0;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  align-items: flex-end;
  z-index: 1000;
  pointer-events: none;
`,frt=ie.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  border: 0.15rem solid ${({theme:i})=>i.pallet.textColor};
  background-color: ${({theme:i})=>i.pallet.thirdColor};
  border-radius: 0.3rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  min-width: 12rem;
  min-height: 4rem;
  pointer-events: auto;
  transition: transform 0.3s ease;

  animation: ${({$isVisible:i})=>i?j_`
          ${crt} 0.4s ease-out forwards
        `:j_`
          ${urt} 0.4s ease-in forwards
        `};
`,drt=ie.div`
  min-width: 2rem;
  min-height: 2rem;
  max-width: 2rem;
  max-height: 2rem;
`,prt=ie.div`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
`,mrt=ie.span`
  font-weight: 900;
`,grt=ie.span`
  font-size: 0.8rem;
  white-space: pre-line;
`;function vrt(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 256 512 Q 326 511 384 478 L 384 478 L 384 478 Q 442 444 478 384 Q 512 323 512 256 Q 512 189 478 128 Q 442 68 384 34 Q 326 1 256 0 Q 186 1 128 34 Q 70 68 34 128 Q 0 189 0 256 Q 0 323 34 384 Q 70 444 128 478 Q 186 511 256 512 L 256 512 Z M 369 209 L 241 337 L 369 209 L 241 337 Q 224 351 207 337 L 143 273 L 143 273 Q 129 256 143 239 Q 160 225 177 239 L 224 286 L 224 286 L 335 175 L 335 175 Q 352 161 369 175 Q 383 192 369 209 L 369 209 Z"})})}function yrt(i){return k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:k.jsx("path",{d:"M 256 512 Q 326 511 384 478 L 384 478 L 384 478 Q 442 444 478 384 Q 512 323 512 256 Q 512 189 478 128 Q 442 68 384 34 Q 326 1 256 0 Q 186 1 128 34 Q 70 68 34 128 Q 0 189 0 256 Q 0 323 34 384 Q 70 444 128 478 Q 186 511 256 512 L 256 512 Z M 175 175 Q 192 161 209 175 L 256 222 L 256 222 L 303 175 L 303 175 Q 320 161 337 175 Q 351 192 337 209 L 290 256 L 290 256 L 337 303 L 337 303 Q 351 320 337 337 Q 320 351 303 337 L 256 290 L 256 290 L 209 337 L 209 337 Q 192 351 175 337 Q 161 320 175 303 L 222 256 L 222 256 L 175 209 L 175 209 Q 161 192 175 175 L 175 175 Z"})})}const _rt={success:vrt,fail:yrt};function Art({text:i,id:t,result:e="success",sound:n}){const s=Hu(),[r,a]=rt.useState(!0);rt.useEffect(()=>{n&&n()},[]);const l=rt.useCallback(()=>{a(!1),setTimeout(()=>s(n$(t)),400)},[s,t]);rt.useEffect(()=>{const f=setTimeout(l,5e3);return()=>clearTimeout(f)},[s,l,t]);const u=_rt[e];return k.jsxs(frt,{className:"cursor-pointer",onClick:l,$isVisible:r,children:[k.jsx(drt,{children:k.jsx(u,{fill:e==="success"?"green":"red"})}),k.jsxs(prt,{children:[k.jsx(mrt,{children:e.charAt(0).toUpperCase()+e.slice(1)}),k.jsx(grt,{children:i})]})]})}const hD=document.getElementById("popup-root"),xrt={confirm:()=>k.jsx("div",{}),toast:Art};function brt(){const{playNotification:i}=DM(),t=VE(t$);return!hD||t.length===0?null:GN.createPortal(k.jsx(hrt,{children:t.map(e=>{const{type:n,id:s,text:r,result:a}=e,l=xrt[n];return l?k.jsx(l,{sound:i,result:a,text:r,id:s},s):null})}),hD)}const Srt=1024,Ert=600;function Mrt(){const[i,t]=rt.useState(!0),[e,n]=rt.useState(!1),s=VE(l=>l.themes),{playClickDown:r,playClickUp:a}=DM();return rt.useEffect(()=>{if(e)return window.addEventListener("pointerdown",r),window.addEventListener("pointerup",a),()=>{window.removeEventListener("pointerdown",r),window.removeEventListener("pointerup",a)}},[e]),rt.useEffect(()=>{const l=()=>{const{innerWidth:u,innerHeight:f}=window;t(u>=Srt&&f>=Ert)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),i?k.jsxs(dH,{theme:s,children:[k.jsx(_H,{}),k.jsx(yH,{}),!e&&k.jsx(lrt,{onFinish:()=>n(!0)}),k.jsxs(AH,{$bootDone:e,children:[k.jsx(JJ,{}),k.jsx(N$,{}),k.jsx(ert,{}),k.jsx(brt,{})]})]}):k.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[k.jsx("h1",{children:"The screen is too small"}),k.jsx("span",{children:"Desktop only"}),k.jsx("br",{}),k.jsx("a",{href:"pdf/cv_antonov_mykyta.pdf",children:"PDF"})]})}const Trt=kZ({reducer:{modals:E$,themes:$st,popups:s$}});mF.createRoot(document.getElementById("root")).render(k.jsx(rt.StrictMode,{children:k.jsx(IH,{store:Trt,children:k.jsx(g$,{children:k.jsx(cK,{children:k.jsx(Mrt,{})})})})}));
