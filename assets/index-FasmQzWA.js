var XP=Object.defineProperty;var S7=s=>{throw TypeError(s)};var jP=(s,t,e)=>t in s?XP(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var Je=(s,t,e)=>jP(s,typeof t!="symbol"?t+"":t,e),bT=(s,t,e)=>t.has(s)||S7("Cannot "+e);var x=(s,t,e)=>(bT(s,t,"read from private field"),e?e.call(s):t.get(s)),Y=(s,t,e)=>t.has(s)?S7("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),G=(s,t,e,n)=>(bT(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),k=(s,t,e)=>(bT(s,t,"access private method"),e);var Ea=(s,t,e,n)=>({set _(i){G(s,t,i,e)},get _(){return x(s,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function I3(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ST={exports:{}},V2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E7;function qP(){if(E7)return V2;E7=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,i,r){var a=null;if(r!==void 0&&(a=""+r),i.key!==void 0&&(a=""+i.key),"key"in i){r={};for(var l in i)l!=="key"&&(r[l]=i[l])}else r=i;return i=r.ref,{$$typeof:s,type:n,key:a,ref:i!==void 0?i:null,props:r}}return V2.Fragment=t,V2.jsx=e,V2.jsxs=e,V2}var M7;function YP(){return M7||(M7=1,ST.exports=qP()),ST.exports}var J=YP(),ET={exports:{}},hn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T7;function WP(){if(T7)return hn;T7=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(K){return K===null||typeof K!="object"?null:(K=g&&K[g]||K["@@iterator"],typeof K=="function"?K:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function T(K,at,xt){this.props=K,this.context=at,this.refs=C,this.updater=xt||_}T.prototype.isReactComponent={},T.prototype.setState=function(K,at){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,at,"setState")},T.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function S(){}S.prototype=T.prototype;function R(K,at,xt){this.props=K,this.context=at,this.refs=C,this.updater=xt||_}var B=R.prototype=new S;B.constructor=R,b(B,T.prototype),B.isPureReactComponent=!0;var D=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function F(K,at,xt,Et,lt,wt){return xt=wt.ref,{$$typeof:s,type:K,key:at,ref:xt!==void 0?xt:null,props:wt}}function z(K,at){return F(K.type,at,void 0,void 0,void 0,K.props)}function U(K){return typeof K=="object"&&K!==null&&K.$$typeof===s}function P(K){var at={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(xt){return at[xt]})}var X=/\/+/g;function ot(K,at){return typeof K=="object"&&K!==null&&K.key!=null?P(""+K.key):at.toString(36)}function it(){}function ct(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(it,it):(K.status="pending",K.then(function(at){K.status==="pending"&&(K.status="fulfilled",K.value=at)},function(at){K.status==="pending"&&(K.status="rejected",K.reason=at)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function dt(K,at,xt,Et,lt){var wt=typeof K;(wt==="undefined"||wt==="boolean")&&(K=null);var Bt=!1;if(K===null)Bt=!0;else switch(wt){case"bigint":case"string":case"number":Bt=!0;break;case"object":switch(K.$$typeof){case s:case t:Bt=!0;break;case m:return Bt=K._init,dt(Bt(K._payload),at,xt,Et,lt)}}if(Bt)return lt=lt(K),Bt=Et===""?"."+ot(K,0):Et,D(lt)?(xt="",Bt!=null&&(xt=Bt.replace(X,"$&/")+"/"),dt(lt,at,xt,"",function(ve){return ve})):lt!=null&&(U(lt)&&(lt=z(lt,xt+(lt.key==null||K&&K.key===lt.key?"":(""+lt.key).replace(X,"$&/")+"/")+Bt)),at.push(lt)),1;Bt=0;var Ut=Et===""?".":Et+":";if(D(K))for(var Wt=0;Wt<K.length;Wt++)Et=K[Wt],wt=Ut+ot(Et,Wt),Bt+=dt(Et,at,xt,wt,lt);else if(Wt=v(K),typeof Wt=="function")for(K=Wt.call(K),Wt=0;!(Et=K.next()).done;)Et=Et.value,wt=Ut+ot(Et,Wt++),Bt+=dt(Et,at,xt,wt,lt);else if(wt==="object"){if(typeof K.then=="function")return dt(ct(K),at,xt,Et,lt);throw at=String(K),Error("Objects are not valid as a React child (found: "+(at==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":at)+"). If you meant to render a collection of children, use an array instead.")}return Bt}function Q(K,at,xt){if(K==null)return K;var Et=[],lt=0;return dt(K,Et,"","",function(wt){return at.call(xt,wt,lt++)}),Et}function tt(K){if(K._status===-1){var at=K._result;at=at(),at.then(function(xt){(K._status===0||K._status===-1)&&(K._status=1,K._result=xt)},function(xt){(K._status===0||K._status===-1)&&(K._status=2,K._result=xt)}),K._status===-1&&(K._status=0,K._result=at)}if(K._status===1)return K._result.default;throw K._result}var et=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var at=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(at))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function _t(){}return hn.Children={map:Q,forEach:function(K,at,xt){Q(K,function(){at.apply(this,arguments)},xt)},count:function(K){var at=0;return Q(K,function(){at++}),at},toArray:function(K){return Q(K,function(at){return at})||[]},only:function(K){if(!U(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},hn.Component=T,hn.Fragment=e,hn.Profiler=i,hn.PureComponent=R,hn.StrictMode=n,hn.Suspense=u,hn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,hn.__COMPILER_RUNTIME={__proto__:null,c:function(K){return N.H.useMemoCache(K)}},hn.cache=function(K){return function(){return K.apply(null,arguments)}},hn.cloneElement=function(K,at,xt){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Et=b({},K.props),lt=K.key,wt=void 0;if(at!=null)for(Bt in at.ref!==void 0&&(wt=void 0),at.key!==void 0&&(lt=""+at.key),at)!I.call(at,Bt)||Bt==="key"||Bt==="__self"||Bt==="__source"||Bt==="ref"&&at.ref===void 0||(Et[Bt]=at[Bt]);var Bt=arguments.length-2;if(Bt===1)Et.children=xt;else if(1<Bt){for(var Ut=Array(Bt),Wt=0;Wt<Bt;Wt++)Ut[Wt]=arguments[Wt+2];Et.children=Ut}return F(K.type,lt,void 0,void 0,wt,Et)},hn.createContext=function(K){return K={$$typeof:a,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:r,_context:K},K},hn.createElement=function(K,at,xt){var Et,lt={},wt=null;if(at!=null)for(Et in at.key!==void 0&&(wt=""+at.key),at)I.call(at,Et)&&Et!=="key"&&Et!=="__self"&&Et!=="__source"&&(lt[Et]=at[Et]);var Bt=arguments.length-2;if(Bt===1)lt.children=xt;else if(1<Bt){for(var Ut=Array(Bt),Wt=0;Wt<Bt;Wt++)Ut[Wt]=arguments[Wt+2];lt.children=Ut}if(K&&K.defaultProps)for(Et in Bt=K.defaultProps,Bt)lt[Et]===void 0&&(lt[Et]=Bt[Et]);return F(K,wt,void 0,void 0,null,lt)},hn.createRef=function(){return{current:null}},hn.forwardRef=function(K){return{$$typeof:l,render:K}},hn.isValidElement=U,hn.lazy=function(K){return{$$typeof:m,_payload:{_status:-1,_result:K},_init:tt}},hn.memo=function(K,at){return{$$typeof:f,type:K,compare:at===void 0?null:at}},hn.startTransition=function(K){var at=N.T,xt={};N.T=xt;try{var Et=K(),lt=N.S;lt!==null&&lt(xt,Et),typeof Et=="object"&&Et!==null&&typeof Et.then=="function"&&Et.then(_t,et)}catch(wt){et(wt)}finally{N.T=at}},hn.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},hn.use=function(K){return N.H.use(K)},hn.useActionState=function(K,at,xt){return N.H.useActionState(K,at,xt)},hn.useCallback=function(K,at){return N.H.useCallback(K,at)},hn.useContext=function(K){return N.H.useContext(K)},hn.useDebugValue=function(){},hn.useDeferredValue=function(K,at){return N.H.useDeferredValue(K,at)},hn.useEffect=function(K,at,xt){var Et=N.H;if(typeof xt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Et.useEffect(K,at)},hn.useId=function(){return N.H.useId()},hn.useImperativeHandle=function(K,at,xt){return N.H.useImperativeHandle(K,at,xt)},hn.useInsertionEffect=function(K,at){return N.H.useInsertionEffect(K,at)},hn.useLayoutEffect=function(K,at){return N.H.useLayoutEffect(K,at)},hn.useMemo=function(K,at){return N.H.useMemo(K,at)},hn.useOptimistic=function(K,at){return N.H.useOptimistic(K,at)},hn.useReducer=function(K,at,xt){return N.H.useReducer(K,at,xt)},hn.useRef=function(K){return N.H.useRef(K)},hn.useState=function(K){return N.H.useState(K)},hn.useSyncExternalStore=function(K,at,xt){return N.H.useSyncExternalStore(K,at,xt)},hn.useTransition=function(){return N.H.useTransition()},hn.version="19.1.0",hn}var C7;function t0(){return C7||(C7=1,ET.exports=WP()),ET.exports}var ht=t0();const Oa=I3(ht);var MT={exports:{}},Q2={},TT={exports:{}},CT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w7;function KP(){return w7||(w7=1,function(s){function t(Q,tt){var et=Q.length;Q.push(tt);t:for(;0<et;){var _t=et-1>>>1,K=Q[_t];if(0<i(K,tt))Q[_t]=tt,Q[et]=K,et=_t;else break t}}function e(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var tt=Q[0],et=Q.pop();if(et!==tt){Q[0]=et;t:for(var _t=0,K=Q.length,at=K>>>1;_t<at;){var xt=2*(_t+1)-1,Et=Q[xt],lt=xt+1,wt=Q[lt];if(0>i(Et,et))lt<K&&0>i(wt,Et)?(Q[_t]=wt,Q[lt]=et,_t=lt):(Q[_t]=Et,Q[xt]=et,_t=xt);else if(lt<K&&0>i(wt,et))Q[_t]=wt,Q[lt]=et,_t=lt;else break t}}return tt}function i(Q,tt){var et=Q.sortIndex-tt.sortIndex;return et!==0?et:Q.id-tt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();s.unstable_now=function(){return a.now()-l}}var u=[],f=[],m=1,g=null,v=3,_=!1,b=!1,C=!1,T=!1,S=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function D(Q){for(var tt=e(f);tt!==null;){if(tt.callback===null)n(f);else if(tt.startTime<=Q)n(f),tt.sortIndex=tt.expirationTime,t(u,tt);else break;tt=e(f)}}function N(Q){if(C=!1,D(Q),!b)if(e(u)!==null)b=!0,I||(I=!0,ot());else{var tt=e(f);tt!==null&&dt(N,tt.startTime-Q)}}var I=!1,F=-1,z=5,U=-1;function P(){return T?!0:!(s.unstable_now()-U<z)}function X(){if(T=!1,I){var Q=s.unstable_now();U=Q;var tt=!0;try{t:{b=!1,C&&(C=!1,R(F),F=-1),_=!0;var et=v;try{e:{for(D(Q),g=e(u);g!==null&&!(g.expirationTime>Q&&P());){var _t=g.callback;if(typeof _t=="function"){g.callback=null,v=g.priorityLevel;var K=_t(g.expirationTime<=Q);if(Q=s.unstable_now(),typeof K=="function"){g.callback=K,D(Q),tt=!0;break e}g===e(u)&&n(u),D(Q)}else n(u);g=e(u)}if(g!==null)tt=!0;else{var at=e(f);at!==null&&dt(N,at.startTime-Q),tt=!1}}break t}finally{g=null,v=et,_=!1}tt=void 0}}finally{tt?ot():I=!1}}}var ot;if(typeof B=="function")ot=function(){B(X)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,ct=it.port2;it.port1.onmessage=X,ot=function(){ct.postMessage(null)}}else ot=function(){S(X,0)};function dt(Q,tt){F=S(function(){Q(s.unstable_now())},tt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var tt=3;break;default:tt=v}var et=v;v=tt;try{return Q()}finally{v=et}},s.unstable_requestPaint=function(){T=!0},s.unstable_runWithPriority=function(Q,tt){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var et=v;v=Q;try{return tt()}finally{v=et}},s.unstable_scheduleCallback=function(Q,tt,et){var _t=s.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?_t+et:_t):et=_t,Q){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=et+K,Q={id:m++,callback:tt,priorityLevel:Q,startTime:et,expirationTime:K,sortIndex:-1},et>_t?(Q.sortIndex=et,t(f,Q),e(u)===null&&Q===e(f)&&(C?(R(F),F=-1):C=!0,dt(N,et-_t))):(Q.sortIndex=K,t(u,Q),b||_||(b=!0,I||(I=!0,ot()))),Q},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(Q){var tt=v;return function(){var et=v;v=tt;try{return Q.apply(this,arguments)}finally{v=et}}}}(CT)),CT}var R7;function JP(){return R7||(R7=1,TT.exports=KP()),TT.exports}var wT={exports:{}},Qr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L7;function ZP(){if(L7)return Qr;L7=1;var s=t0();function t(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function r(u,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:f,implementation:m}}var a=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Qr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Qr.createPortal=function(u,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return r(u,f,null,m)},Qr.flushSync=function(u){var f=a.T,m=n.p;try{if(a.T=null,n.p=2,u)return u()}finally{a.T=f,n.p=m,n.d.f()}},Qr.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(u,f))},Qr.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},Qr.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var m=f.as,g=l(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:_}):m==="script"&&n.d.X(u,{crossOrigin:g,integrity:v,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Qr.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=l(f.as,f.crossOrigin);n.d.M(u,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(u)},Qr.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=l(m,f.crossOrigin);n.d.L(u,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Qr.preloadModule=function(u,f){if(typeof u=="string")if(f){var m=l(f.as,f.crossOrigin);n.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(u)},Qr.requestFormReset=function(u){n.d.r(u)},Qr.unstable_batchedUpdates=function(u,f){return u(f)},Qr.useFormState=function(u,f,m){return a.H.useFormState(u,f,m)},Qr.useFormStatus=function(){return a.H.useHostTransitionStatus()},Qr.version="19.1.0",Qr}var D7;function cB(){if(D7)return wT.exports;D7=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),wT.exports=ZP(),wT.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B7;function $P(){if(B7)return Q2;B7=1;var s=JP(),t=t0(),e=cB();function n(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function r(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function a(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(r(o)!==o)throw Error(n(188))}function u(o){var c=o.alternate;if(!c){if(c=r(o),c===null)throw Error(n(188));return c!==o?null:o}for(var p=o,y=c;;){var E=p.return;if(E===null)break;var w=E.alternate;if(w===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===w.child){for(w=E.child;w;){if(w===p)return l(E),o;if(w===y)return l(E),c;w=w.sibling}throw Error(n(188))}if(p.return!==y.return)p=E,y=w;else{for(var H=!1,j=E.child;j;){if(j===p){H=!0,p=E,y=w;break}if(j===y){H=!0,y=E,p=w;break}j=j.sibling}if(!H){for(j=w.child;j;){if(j===p){H=!0,p=w,y=E;break}if(j===y){H=!0,y=w,p=E;break}j=j.sibling}if(!H)throw Error(n(189))}}if(p.alternate!==y)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?o:c}function f(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=f(o),c!==null)return c;o=o.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),B=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function ot(o){return o===null||typeof o!="object"?null:(o=X&&o[X]||o["@@iterator"],typeof o=="function"?o:null)}var it=Symbol.for("react.client.reference");function ct(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===it?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case T:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case I:return"SuspenseList";case U:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case _:return"Portal";case B:return(o.displayName||"Context")+".Provider";case R:return(o._context.displayName||"Context")+".Consumer";case D:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case F:return c=o.displayName||null,c!==null?c:ct(o.type)||"Memo";case z:c=o._payload,o=o._init;try{return ct(o(c))}catch{}}return null}var dt=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},_t=[],K=-1;function at(o){return{current:o}}function xt(o){0>K||(o.current=_t[K],_t[K]=null,K--)}function Et(o,c){K++,_t[K]=o.current,o.current=c}var lt=at(null),wt=at(null),Bt=at(null),Ut=at(null);function Wt(o,c){switch(Et(Bt,c),Et(wt,o),Et(lt,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?JR(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=JR(c),o=ZR(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}xt(lt),Et(lt,o)}function ve(){xt(lt),xt(wt),xt(Bt)}function ee(o){o.memoizedState!==null&&Et(Ut,o);var c=lt.current,p=ZR(c,o.type);c!==p&&(Et(wt,o),Et(lt,p))}function Ye(o){wt.current===o&&(xt(lt),xt(wt)),Ut.current===o&&(xt(Ut),F2._currentValue=et)}var we=Object.prototype.hasOwnProperty,se=s.unstable_scheduleCallback,Z=s.unstable_cancelCallback,Kt=s.unstable_shouldYield,Ft=s.unstable_requestPaint,Vt=s.unstable_now,Gt=s.unstable_getCurrentPriorityLevel,be=s.unstable_ImmediatePriority,qt=s.unstable_UserBlockingPriority,$=s.unstable_NormalPriority,V=s.unstable_LowPriority,vt=s.unstable_IdlePriority,It=s.log,Xt=s.unstable_setDisableYieldValue,Ot=null,ne=null;function te(o){if(typeof It=="function"&&Xt(o),ne&&typeof ne.setStrictMode=="function")try{ne.setStrictMode(Ot,o)}catch{}}var ge=Math.clz32?Math.clz32:_e,De=Math.log,Jt=Math.LN2;function _e(o){return o>>>=0,o===0?32:31-(De(o)/Jt|0)|0}var Se=256,Te=4194304;function le(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function rn(o,c,p){var y=o.pendingLanes;if(y===0)return 0;var E=0,w=o.suspendedLanes,H=o.pingedLanes;o=o.warmLanes;var j=y&134217727;return j!==0?(y=j&~w,y!==0?E=le(y):(H&=j,H!==0?E=le(H):p||(p=j&~o,p!==0&&(E=le(p))))):(j=y&~w,j!==0?E=le(j):H!==0?E=le(H):p||(p=y&~o,p!==0&&(E=le(p)))),E===0?0:c!==0&&c!==E&&(c&w)===0&&(w=E&-E,p=c&-c,w>=p||w===32&&(p&4194048)!==0)?c:E}function He(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Gn(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var o=Se;return Se<<=1,(Se&4194048)===0&&(Se=256),o}function ce(){var o=Te;return Te<<=1,(Te&62914560)===0&&(Te=4194304),o}function Nt(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function Qt(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function fe(o,c,p,y,E,w){var H=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var j=o.entanglements,st=o.expirationTimes,St=o.hiddenUpdates;for(p=H&~p;0<p;){var zt=31-ge(p),jt=1<<zt;j[zt]=0,st[zt]=-1;var Tt=St[zt];if(Tt!==null)for(St[zt]=null,zt=0;zt<Tt.length;zt++){var Lt=Tt[zt];Lt!==null&&(Lt.lane&=-536870913)}p&=~jt}y!==0&&ue(o,y,0),w!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=w&~(H&~c))}function ue(o,c,p){o.pendingLanes|=c,o.suspendedLanes&=~c;var y=31-ge(c);o.entangledLanes|=c,o.entanglements[y]=o.entanglements[y]|1073741824|p&4194090}function qe(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var y=31-ge(p),E=1<<y;E&c|o[y]&c&&(o[y]|=c),p&=~E}}function Jn(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ei(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Cn(){var o=tt.p;return o!==0?o:(o=window.event,o===void 0?32:v7(o.type))}function Nr(o,c){var p=tt.p;try{return tt.p=o,c()}finally{tt.p=p}}var ls=Math.random().toString(36).slice(2),Ji="__reactFiber$"+ls,cs="__reactProps$"+ls,$s="__reactContainer$"+ls,Ir="__reactEvents$"+ls,hp="__reactListeners$"+ls,lo="__reactHandles$"+ls,mr="__reactResources$"+ls,co="__reactMarker$"+ls;function ti(o){delete o[Ji],delete o[cs],delete o[Ir],delete o[hp],delete o[lo]}function uo(o){var c=o[Ji];if(c)return c;for(var p=o.parentNode;p;){if(c=p[$s]||p[Ji]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=n7(o);o!==null;){if(p=o[Ji])return p;o=n7(o)}return c}o=p,p=o.parentNode}return null}function ho(o){if(o=o[Ji]||o[$s]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Nc(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(n(33))}function Nl(o){var c=o[mr];return c||(c=o[mr]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Zi(o){o[co]=!0}var uf=new Set,hf={};function fo(o,c){q(o,c),q(o+"Capture",c)}function q(o,c){for(hf[o]=c,o=0;o<c.length;o++)uf.add(c[o])}var pt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ct={},Rt={};function yt(o){return we.call(Rt,o)?!0:we.call(Ct,o)?!1:pt.test(o)?Rt[o]=!0:(Ct[o]=!0,!1)}function Yt(o,c,p){if(yt(c))if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+p)}}function ie(o,c,p){if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+p)}}function re(o,c,p,y){if(y===null)o.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(p);return}o.setAttributeNS(c,p,""+y)}}var Ae,Ge;function Oe(o){if(Ae===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);Ae=c&&c[1]||"",Ge=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ae+o+Ge}var Ce=!1;function pn(o,c){if(!o||Ce)return"";Ce=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var jt=function(){throw Error()};if(Object.defineProperty(jt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(jt,[])}catch(Lt){var Tt=Lt}Reflect.construct(o,[],jt)}else{try{jt.call()}catch(Lt){Tt=Lt}o.call(jt.prototype)}}else{try{throw Error()}catch(Lt){Tt=Lt}(jt=o())&&typeof jt.catch=="function"&&jt.catch(function(){})}}catch(Lt){if(Lt&&Tt&&typeof Lt.stack=="string")return[Lt.stack,Tt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=y.DetermineComponentFrameRoot(),H=w[0],j=w[1];if(H&&j){var st=H.split(`
`),St=j.split(`
`);for(E=y=0;y<st.length&&!st[y].includes("DetermineComponentFrameRoot");)y++;for(;E<St.length&&!St[E].includes("DetermineComponentFrameRoot");)E++;if(y===st.length||E===St.length)for(y=st.length-1,E=St.length-1;1<=y&&0<=E&&st[y]!==St[E];)E--;for(;1<=y&&0<=E;y--,E--)if(st[y]!==St[E]){if(y!==1||E!==1)do if(y--,E--,0>E||st[y]!==St[E]){var zt=`
`+st[y].replace(" at new "," at ");return o.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",o.displayName)),zt}while(1<=y&&0<=E);break}}}finally{Ce=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?Oe(p):""}function Nn(o){switch(o.tag){case 26:case 27:case 5:return Oe(o.type);case 16:return Oe("Lazy");case 13:return Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return pn(o.type,!1);case 11:return pn(o.type.render,!1);case 1:return pn(o.type,!0);case 31:return Oe("Activity");default:return""}}function Mi(o){try{var c="";do c+=Nn(o),o=o.return;while(o);return c}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function yn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function bn(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ne(o){var c=bn(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),y=""+o[c];if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var E=p.get,w=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return E.call(this)},set:function(H){y=""+H,w.call(this,H)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(H){y=""+H},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Ri(o){o._valueTracker||(o._valueTracker=Ne(o))}function Ln(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return o&&(y=bn(o)?o.checked?"true":"false":o.value),o=y,o!==p?(c.setValue(o),!0):!1}function Bs(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Wo=/[\n"\\]/g;function ri(o){return o.replace(Wo,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Ko(o,c,p,y,E,w,H,j){o.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.type=H:o.removeAttribute("type"),c!=null?H==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+yn(c)):o.value!==""+yn(c)&&(o.value=""+yn(c)):H!=="submit"&&H!=="reset"||o.removeAttribute("value"),c!=null?Os(o,H,yn(c)):p!=null?Os(o,H,yn(p)):y!=null&&o.removeAttribute("value"),E==null&&w!=null&&(o.defaultChecked=!!w),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?o.name=""+yn(j):o.removeAttribute("name")}function ei(o,c,p,y,E,w,H,j){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.type=w),c!=null||p!=null){if(!(w!=="submit"&&w!=="reset"||c!=null))return;p=p!=null?""+yn(p):"",c=c!=null?""+yn(c):p,j||c===o.value||(o.value=c),o.defaultValue=c}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=j?o.checked:!!y,o.defaultChecked=!!y,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(o.name=H)}function Os(o,c,p){c==="number"&&Bs(o.ownerDocument)===o||o.defaultValue===""+p||(o.defaultValue=""+p)}function $i(o,c,p,y){if(o=o.options,c){c={};for(var E=0;E<p.length;E++)c["$"+p[E]]=!0;for(p=0;p<o.length;p++)E=c.hasOwnProperty("$"+o[p].value),o[p].selected!==E&&(o[p].selected=E),E&&y&&(o[p].defaultSelected=!0)}else{for(p=""+yn(p),c=null,E=0;E<o.length;E++){if(o[E].value===p){o[E].selected=!0,y&&(o[E].defaultSelected=!0);return}c!==null||o[E].disabled||(c=o[E])}c!==null&&(c.selected=!0)}}function ys(o,c,p){if(c!=null&&(c=""+yn(c),c!==o.value&&(o.value=c),p==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=p!=null?""+yn(p):""}function _s(o,c,p,y){if(c==null){if(y!=null){if(p!=null)throw Error(n(92));if(dt(y)){if(1<y.length)throw Error(n(93));y=y[0]}p=y}p==null&&(p=""),c=p}p=yn(c),o.defaultValue=p,y=o.textContent,y===p&&y!==""&&y!==null&&(o.value=y)}function gr(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var Jo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fp(o,c,p){var y=c.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":y?o.setProperty(c,p):typeof p!="number"||p===0||Jo.has(c)?c==="float"?o.cssFloat=p:o[c]=(""+p).trim():o[c]=p+"px"}function dp(o,c,p){if(c!=null&&typeof c!="object")throw Error(n(62));if(o=o.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var E in c)y=c[E],c.hasOwnProperty(E)&&p[E]!==y&&fp(o,E,y)}else for(var w in c)c.hasOwnProperty(w)&&fp(o,w,c[w])}function u0(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ly=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pp(o){return jx.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var h0=null;function f0(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ic=null,Gu=null;function Dy(o){var c=ho(o);if(c&&(o=c.stateNode)){var p=o[cs]||null;t:switch(o=c.stateNode,c.type){case"input":if(Ko(o,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+ri(""+c)+'"][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==o&&y.form===o.form){var E=y[cs]||null;if(!E)throw Error(n(90));Ko(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(c=0;c<p.length;c++)y=p[c],y.form===o.form&&Ln(y)}break t;case"textarea":ys(o,p.value,p.defaultValue);break t;case"select":c=p.value,c!=null&&$i(o,!!p.multiple,c,!1)}}}var mp=!1;function By(o,c,p){if(mp)return o(c,p);mp=!0;try{var y=o(c);return y}finally{if(mp=!1,(Ic!==null||Gu!==null)&&(dl(),Ic&&(c=Ic,o=Gu,Gu=Ic=null,Dy(c),o)))for(c=0;c<o.length;c++)Dy(o[c])}}function ff(o,c){var p=o.stateNode;if(p===null)return null;var y=p[cs]||null;if(y===null)return null;p=y[c];t:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break t;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(n(231,c,typeof p));return p}var Zo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gp=!1;if(Zo)try{var df={};Object.defineProperty(df,"passive",{get:function(){gp=!0}}),window.addEventListener("test",df,df),window.removeEventListener("test",df,df)}catch{gp=!1}var Il=null,Oy=null,d0=null;function Ny(){if(d0)return d0;var o,c=Oy,p=c.length,y,E="value"in Il?Il.value:Il.textContent,w=E.length;for(o=0;o<p&&c[o]===E[o];o++);var H=p-o;for(y=1;y<=H&&c[p-y]===E[w-y];y++);return d0=E.slice(o,1<y?1-y:void 0)}function Uc(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function pf(){return!0}function vp(){return!1}function vr(o){function c(p,y,E,w,H){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=w,this.target=H,this.currentTarget=null;for(var j in o)o.hasOwnProperty(j)&&(p=o[j],this[j]=p?p(w):w[j]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?pf:vp,this.isPropagationStopped=vp,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=pf)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=pf)},persist:function(){},isPersistent:pf}),c}var Pc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mf=vr(Pc),gf=m({},Pc,{view:0,detail:0}),qx=vr(gf),Ul,vf,yf,_f=m({},gf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_p,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==yf&&(yf&&o.type==="mousemove"?(Ul=o.screenX-yf.screenX,vf=o.screenY-yf.screenY):vf=Ul=0,yf=o),Ul)},movementY:function(o){return"movementY"in o?o.movementY:vf}}),Iy=vr(_f),Yx=m({},_f,{dataTransfer:0}),z4=vr(Yx),Ns=m({},gf,{relatedTarget:0}),p0=vr(Ns),Wx=m({},Pc,{animationName:0,elapsedTime:0,pseudoElement:0}),Kx=vr(Wx),Jx=m({},Pc,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Zx=vr(Jx),yp=m({},Pc,{data:0}),m0=vr(yp),$x={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uy(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=eb[o])?!!c[o]:!1}function _p(){return Uy}var nb=m({},gf,{key:function(o){if(o.key){var c=$x[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Uc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?tb[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_p,charCode:function(o){return o.type==="keypress"?Uc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Uc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Py=vr(nb),Fy=m({},_f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g0=vr(Fy),ib=m({},gf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_p}),Hy=vr(ib),sb=m({},Pc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pl=vr(sb),zy=m({},_f,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),G4=vr(zy),rb=m({},Pc,{newState:0,oldState:0}),Fc=vr(rb),Fl=[9,13,27,32],Ap=Zo&&"CompositionEvent"in window,ku=null;Zo&&"documentMode"in document&&(ku=document.documentMode);var xp=Zo&&"TextEvent"in window&&!ku,bp=Zo&&(!Ap||ku&&8<ku&&11>=ku),Hc=" ",Is=!1;function Sp(o,c){switch(o){case"keyup":return Fl.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gy(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var zc=!1;function Ep(o,c){switch(o){case"compositionend":return Gy(c);case"keypress":return c.which!==32?null:(Is=!0,Hc);case"textInput":return o=c.data,o===Hc&&Is?null:o;default:return null}}function ky(o,c){if(zc)return o==="compositionend"||!Ap&&Sp(o,c)?(o=Ny(),d0=Oy=Il=null,zc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return bp&&c.locale!=="ko"?null:c.data;default:return null}}var v0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vy(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!v0[o.type]:c==="textarea"}function Ur(o,c,p,y){Ic?Gu?Gu.push(y):Gu=[y]:Ic=y,c=sS(c,"onChange"),0<c.length&&(p=new mf("onChange","change",null,p,y),o.push({event:p,listeners:c}))}var Af=null,Vu=null;function ab(o){jR(o,0)}function Mp(o){var c=Nc(o);if(Ln(c))return o}function y0(o,c){if(o==="change")return c}var _0=!1;if(Zo){var A0;if(Zo){var xf="oninput"in document;if(!xf){var bf=document.createElement("div");bf.setAttribute("oninput","return;"),xf=typeof bf.oninput=="function"}A0=xf}else A0=!1;_0=A0&&(!document.documentMode||9<document.documentMode)}function Ti(){Af&&(Af.detachEvent("onpropertychange",ob),Vu=Af=null)}function ob(o){if(o.propertyName==="value"&&Mp(Vu)){var c=[];Ur(c,Vu,o,f0(o)),By(ab,c)}}function k4(o,c,p){o==="focusin"?(Ti(),Af=c,Vu=p,Af.attachEvent("onpropertychange",ob)):o==="focusout"&&Ti()}function lb(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Mp(Vu)}function Tp(o,c){if(o==="click")return Mp(c)}function Gc(o,c){if(o==="input"||o==="change")return Mp(c)}function cb(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Pr=typeof Object.is=="function"?Object.is:cb;function po(o,c){if(Pr(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!we.call(c,E)||!Pr(o[E],c[E]))return!1}return!0}function Fr(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Qy(o,c){var p=Fr(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=c&&y>=c)return{node:p,offset:c-o};o=y}t:{for(;p;){if(p.nextSibling){p=p.nextSibling;break t}p=p.parentNode}p=void 0}p=Fr(p)}}function Xy(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Xy(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function jy(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Bs(o.document);c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)o=c.contentWindow;else break;c=Bs(o.document)}return c}function Cp(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var qy=Zo&&"documentMode"in document&&11>=document.documentMode,Hl=null,x0=null,wp=null,b0=!1;function Yy(o,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;b0||Hl==null||Hl!==Bs(y)||(y=Hl,"selectionStart"in y&&Cp(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),wp&&po(wp,y)||(wp=y,y=sS(x0,"onSelect"),0<y.length&&(c=new mf("onSelect","select",null,c,p),o.push({event:c,listeners:y}),c.target=Hl)))}function Us(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var kc={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},S0={},ub={};Zo&&(ub=document.createElement("div").style,"AnimationEvent"in window||(delete kc.animationend.animation,delete kc.animationiteration.animation,delete kc.animationstart.animation),"TransitionEvent"in window||delete kc.transitionend.transition);function zl(o){if(S0[o])return S0[o];if(!kc[o])return o;var c=kc[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in ub)return S0[o]=c[p];return o}var yr=zl("animationend"),Wy=zl("animationiteration"),Hr=zl("animationstart"),hb=zl("transitionrun"),Gl=zl("transitionstart"),Sf=zl("transitioncancel"),kl=zl("transitionend"),E0=new Map,Rp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rp.push("scrollEnd");function As(o,c){E0.set(o,c),fo(c,[o])}var Ky=new WeakMap;function Ps(o,c){if(typeof o=="object"&&o!==null){var p=Ky.get(o);return p!==void 0?p:(c={value:o,source:c,stack:Mi(c)},Ky.set(o,c),c)}return{value:o,source:c,stack:Mi(c)}}var tr=[],Fa=0,M0=0;function Lp(){for(var o=Fa,c=M0=Fa=0;c<o;){var p=tr[c];tr[c++]=null;var y=tr[c];tr[c++]=null;var E=tr[c];tr[c++]=null;var w=tr[c];if(tr[c++]=null,y!==null&&E!==null){var H=y.pending;H===null?E.next=E:(E.next=H.next,H.next=E),y.pending=E}w!==0&&Jy(p,E,w)}}function Vc(o,c,p,y){tr[Fa++]=o,tr[Fa++]=c,tr[Fa++]=p,tr[Fa++]=y,M0|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function T0(o,c,p,y){return Vc(o,c,p,y),Ef(o)}function Vl(o,c){return Vc(o,null,null,c),Ef(o)}function Jy(o,c,p){o.lanes|=p;var y=o.alternate;y!==null&&(y.lanes|=p);for(var E=!1,w=o.return;w!==null;)w.childLanes|=p,y=w.alternate,y!==null&&(y.childLanes|=p),w.tag===22&&(o=w.stateNode,o===null||o._visibility&1||(E=!0)),o=w,w=w.return;return o.tag===3?(w=o.stateNode,E&&c!==null&&(E=31-ge(p),o=w.hiddenUpdates,y=o[E],y===null?o[E]=[c]:y.push(c),c.lane=p|536870912),w):null}function Ef(o){if(50<fl)throw fl=0,oh=null,Error(n(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Qc={};function Zy(o,c,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(o,c,p,y){return new Zy(o,c,p,y)}function Dp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Gi(o,c){var p=o.alternate;return p===null?(p=zr(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function $y(o,c){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,c=p.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function xs(o,c,p,y,E,w){var H=0;if(y=o,typeof o=="function")Dp(o)&&(H=1);else if(typeof o=="string")H=BP(o,p,lt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case U:return o=zr(31,p,c,E),o.elementType=U,o.lanes=w,o;case b:return Xc(p.children,E,w,c);case C:H=8,E|=24;break;case T:return o=zr(12,p,c,E|2),o.elementType=T,o.lanes=w,o;case N:return o=zr(13,p,c,E),o.elementType=N,o.lanes=w,o;case I:return o=zr(19,p,c,E),o.elementType=I,o.lanes=w,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case S:case B:H=10;break t;case R:H=9;break t;case D:H=11;break t;case F:H=14;break t;case z:H=16,y=null;break t}H=29,p=Error(n(130,o===null?"null":typeof o,"")),y=null}return c=zr(H,p,c,E),c.elementType=o,c.type=y,c.lanes=w,c}function Xc(o,c,p,y){return o=zr(7,o,y,c),o.lanes=p,o}function Bp(o,c,p){return o=zr(6,o,null,c),o.lanes=p,o}function C0(o,c,p){return c=zr(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var Mf=[],Gr=0,Op=null,Tf=0,Fs=[],ca=0,jc=null,$o=1,tl="";function Ql(o,c){Mf[Gr++]=Tf,Mf[Gr++]=Op,Op=o,Tf=c}function w0(o,c,p){Fs[ca++]=$o,Fs[ca++]=tl,Fs[ca++]=jc,jc=o;var y=$o;o=tl;var E=32-ge(y)-1;y&=~(1<<E),p+=1;var w=32-ge(c)+E;if(30<w){var H=E-E%5;w=(y&(1<<H)-1).toString(32),y>>=H,E-=H,$o=1<<32-ge(c)+E|p<<E|y,tl=w+o}else $o=1<<w|p<<E|y,tl=o}function t2(o){o.return!==null&&(Ql(o,1),w0(o,1,0))}function e2(o){for(;o===Op;)Op=Mf[--Gr],Mf[Gr]=null,Tf=Mf[--Gr],Mf[Gr]=null;for(;o===jc;)jc=Fs[--ca],Fs[ca]=null,tl=Fs[--ca],Fs[ca]=null,$o=Fs[--ca],Fs[ca]=null}var _r=null,Li=null,kn=!1,Ha=null,ua=!1,R0=Error(n(519));function qc(o){var c=Error(n(418,""));throw Qu(Ps(c,o)),R0}function fb(o){var c=o.stateNode,p=o.type,y=o.memoizedProps;switch(c[Ji]=o,c[cs]=y,p){case"dialog":wn("cancel",c),wn("close",c);break;case"iframe":case"object":case"embed":wn("load",c);break;case"video":case"audio":for(p=0;p<B2.length;p++)wn(B2[p],c);break;case"source":wn("error",c);break;case"img":case"image":case"link":wn("error",c),wn("load",c);break;case"details":wn("toggle",c);break;case"input":wn("invalid",c),ei(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Ri(c);break;case"select":wn("invalid",c);break;case"textarea":wn("invalid",c),_s(c,y.value,y.defaultValue,y.children),Ri(c)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||c.textContent===""+p||y.suppressHydrationWarning===!0||KR(c.textContent,p)?(y.popover!=null&&(wn("beforetoggle",c),wn("toggle",c)),y.onScroll!=null&&wn("scroll",c),y.onScrollEnd!=null&&wn("scrollend",c),y.onClick!=null&&(c.onclick=rS),c=!0):c=!1,c||qc(o)}function n2(o){for(_r=o.return;_r;)switch(_r.tag){case 5:case 13:ua=!1;return;case 27:case 3:ua=!0;return;default:_r=_r.return}}function mo(o){if(o!==_r)return!1;if(!kn)return n2(o),kn=!0,!1;var c=o.tag,p;if((p=c!==3&&c!==27)&&((p=c===5)&&(p=o.type,p=!(p!=="form"&&p!=="button")||lT(o.type,o.memoizedProps)),p=!p),p&&Li&&qc(o),n2(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));t:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(p=o.data,p==="/$"){if(c===0){Li=sc(o.nextSibling);break t}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++;o=o.nextSibling}Li=null}}else c===27?(c=Li,Jf(o.type)?(o=fT,fT=null,Li=o):Li=c):Li=_r?sc(o.stateNode.nextSibling):null;return!0}function Cf(){Li=_r=null,kn=!1}function Xn(){var o=Ha;return o!==null&&(ze===null?ze=o:ze.push.apply(ze,o),Ha=null),o}function Qu(o){Ha===null?Ha=[o]:Ha.push(o)}var i2=at(null),Yc=null,Xl=null;function Wc(o,c,p){Et(i2,c._currentValue),c._currentValue=p}function jl(o){o._currentValue=i2.current,xt(i2)}function s2(o,c,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===p)break;o=o.return}}function Np(o,c,p,y){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var w=E.dependencies;if(w!==null){var H=E.child;w=w.firstContext;t:for(;w!==null;){var j=w;w=E;for(var st=0;st<c.length;st++)if(j.context===c[st]){w.lanes|=p,j=w.alternate,j!==null&&(j.lanes|=p),s2(w.return,p,o),y||(H=null);break t}w=j.next}}else if(E.tag===18){if(H=E.return,H===null)throw Error(n(341));H.lanes|=p,w=H.alternate,w!==null&&(w.lanes|=p),s2(H,p,o),H=null}else H=E.child;if(H!==null)H.return=E;else for(H=E;H!==null;){if(H===o){H=null;break}if(E=H.sibling,E!==null){E.return=H.return,H=E;break}H=H.return}E=H}}function za(o,c,p,y){o=null;for(var E=c,w=!1;E!==null;){if(!w){if((E.flags&524288)!==0)w=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var H=E.alternate;if(H===null)throw Error(n(387));if(H=H.memoizedProps,H!==null){var j=E.type;Pr(E.pendingProps.value,H.value)||(o!==null?o.push(j):o=[j])}}else if(E===Ut.current){if(H=E.alternate,H===null)throw Error(n(387));H.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(F2):o=[F2])}E=E.return}o!==null&&Np(c,o,p,y),c.flags|=262144}function Ip(o){for(o=o.firstContext;o!==null;){if(!Pr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function el(o){Yc=o,Xl=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ii(o){return L0(Yc,o)}function Up(o,c){return Yc===null&&el(o),L0(o,c)}function L0(o,c){var p=c._currentValue;if(c={context:c,memoizedValue:p,next:null},Xl===null){if(o===null)throw Error(n(308));Xl=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Xl=Xl.next=c;return p}var r2=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(p,y){o.push(y)}};this.abort=function(){c.aborted=!0,o.forEach(function(p){return p()})}},V4=s.unstable_scheduleCallback,db=s.unstable_NormalPriority,ts={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function D0(){return{controller:new r2,data:new Map,refCount:0}}function wf(o){o.refCount--,o.refCount===0&&V4(db,function(){o.controller.abort()})}var Rf=null,Pp=0,tn=0,Lf=null;function ha(o,c){if(Rf===null){var p=Rf=[];Pp=0,tn=$4(),Lf={status:"pending",value:void 0,then:function(y){p.push(y)}}}return Pp++,c.then(B0,B0),c}function B0(){if(--Pp===0&&Rf!==null){Lf!==null&&(Lf.status="fulfilled");var o=Rf;Rf=null,tn=0,Lf=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function Q4(o,c){var p=[],y={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return o.then(function(){y.status="fulfilled",y.value=c;for(var E=0;E<p.length;E++)(0,p[E])(c)},function(E){for(y.status="rejected",y.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),y}var Fp=Q.S;Q.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&ha(o,c),Fp!==null&&Fp(o,c)};var Ga=at(null);function Kc(){var o=Ga.current;return o!==null?o:We.pooledCache}function Hp(o,c){c===null?Et(Ga,Ga.current):Et(Ga,c.pool)}function O0(){var o=Kc();return o===null?null:{parent:ts._currentValue,pool:o}}var zp=Error(n(460)),a2=Error(n(474)),go=Error(n(542)),Gp={then:function(){}};function N0(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Df(){}function I0(o,c,p){switch(p=o[p],p===void 0?o.push(c):p!==c&&(c.then(Df,Df),c=p),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,pb(o),o;default:if(typeof c.status=="string")c.then(Df,Df);else{if(o=We,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=c,o.status="pending",o.then(function(y){if(c.status==="pending"){var E=c;E.status="fulfilled",E.value=y}},function(y){if(c.status==="pending"){var E=c;E.status="rejected",E.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,pb(o),o}throw ka=c,zp}}var ka=null;function o2(){if(ka===null)throw Error(n(459));var o=ka;return ka=null,o}function pb(o){if(o===zp||o===go)throw Error(n(483))}var ql=!1;function l2(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qe(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function nl(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Yl(o,c,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(jn&2)!==0){var E=y.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),y.pending=c,c=Ef(o),Jy(o,null,p),c}return Vc(o,y,c,p),Ef(o)}function Xu(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194048)!==0)){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,qe(o,p)}}function Bf(o,c){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var H={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};w===null?E=w=H:w=w.next=H,p=p.next}while(p!==null);w===null?E=w=c:w=w.next=c}else E=w=c;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:w,shared:y.shared,callbacks:y.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}var c2=!1;function kp(){if(c2){var o=Lf;if(o!==null)throw o}}function Of(o,c,p,y){c2=!1;var E=o.updateQueue;ql=!1;var w=E.firstBaseUpdate,H=E.lastBaseUpdate,j=E.shared.pending;if(j!==null){E.shared.pending=null;var st=j,St=st.next;st.next=null,H===null?w=St:H.next=St,H=st;var zt=o.alternate;zt!==null&&(zt=zt.updateQueue,j=zt.lastBaseUpdate,j!==H&&(j===null?zt.firstBaseUpdate=St:j.next=St,zt.lastBaseUpdate=st))}if(w!==null){var jt=E.baseState;H=0,zt=St=st=null,j=w;do{var Tt=j.lane&-536870913,Lt=Tt!==j.lane;if(Lt?(Ie&Tt)===Tt:(y&Tt)===Tt){Tt!==0&&Tt===tn&&(c2=!0),zt!==null&&(zt=zt.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});t:{var je=o,ke=j;Tt=c;var yi=p;switch(ke.tag){case 1:if(je=ke.payload,typeof je=="function"){jt=je.call(yi,jt,Tt);break t}jt=je;break t;case 3:je.flags=je.flags&-65537|128;case 0:if(je=ke.payload,Tt=typeof je=="function"?je.call(yi,jt,Tt):je,Tt==null)break t;jt=m({},jt,Tt);break t;case 2:ql=!0}}Tt=j.callback,Tt!==null&&(o.flags|=64,Lt&&(o.flags|=8192),Lt=E.callbacks,Lt===null?E.callbacks=[Tt]:Lt.push(Tt))}else Lt={lane:Tt,tag:j.tag,payload:j.payload,callback:j.callback,next:null},zt===null?(St=zt=Lt,st=jt):zt=zt.next=Lt,H|=Tt;if(j=j.next,j===null){if(j=E.shared.pending,j===null)break;Lt=j,j=Lt.next,Lt.next=null,E.lastBaseUpdate=Lt,E.shared.pending=null}}while(!0);zt===null&&(st=jt),E.baseState=st,E.firstBaseUpdate=St,E.lastBaseUpdate=zt,w===null&&(E.shared.lanes=0),Eo|=H,o.lanes=H,o.memoizedState=jt}}function Nf(o,c){if(typeof o!="function")throw Error(n(191,o));o.call(c)}function mb(o,c){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)Nf(p[o],c)}var If=at(null),U0=at(0);function gb(o,c){o=Ya,Et(U0,o),Et(If,c),Ya=o|c.baseLanes}function u2(){Et(U0,Ya),Et(If,If.current)}function Vp(){Ya=U0.current,xt(If),xt(U0)}var Wl=0,en=null,Zn=null,es=null,P0=!1,Jc=!1,Ar=!1,us=0,Va=0,Hs=null,vb=0;function ki(){throw Error(n(321))}function er(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!Pr(o[p],c[p]))return!1;return!0}function Kl(o,c,p,y,E,w){return Wl=w,en=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Q.H=o===null||o.memoizedState===null?j0:T2,Ar=!1,w=p(y,E),Ar=!1,Jc&&(w=_b(c,p,y,E)),yb(o),w}function yb(o){Q.H=jp;var c=Zn!==null&&Zn.next!==null;if(Wl=0,es=Zn=en=null,P0=!1,Va=0,Hs=null,c)throw Error(n(300));o===null||bs||(o=o.dependencies,o!==null&&Ip(o)&&(bs=!0))}function _b(o,c,p,y){en=o;var E=0;do{if(Jc&&(Hs=null),Va=0,Jc=!1,25<=E)throw Error(n(301));if(E+=1,es=Zn=null,o.updateQueue!=null){var w=o.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Q.H=Xb,w=c(p,y)}while(Jc);return w}function X4(){var o=Q.H,c=o.useState()[0];return c=typeof c.then=="function"?vo(c):c,o=o.useState()[0],(Zn!==null?Zn.memoizedState:null)!==o&&(en.flags|=1024),c}function h2(){var o=us!==0;return us=0,o}function F0(o,c,p){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~p}function f2(o){if(P0){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}P0=!1}Wl=0,es=Zn=en=null,Jc=!1,Va=us=0,Hs=null}function xr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return es===null?en.memoizedState=es=o:es=es.next=o,es}function ns(){if(Zn===null){var o=en.alternate;o=o!==null?o.memoizedState:null}else o=Zn.next;var c=es===null?en.memoizedState:es.next;if(c!==null)es=c,Zn=o;else{if(o===null)throw en.alternate===null?Error(n(467)):Error(n(310));Zn=o,o={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},es===null?en.memoizedState=es=o:es=es.next=o}return es}function Zc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vo(o){var c=Va;return Va+=1,Hs===null&&(Hs=[]),o=I0(Hs,o,c),c=en,(es===null?c.memoizedState:es.next)===null&&(c=c.alternate,Q.H=c===null||c.memoizedState===null?j0:T2),o}function H0(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return vo(o);if(o.$$typeof===B)return Ii(o)}throw Error(n(438,String(o)))}function d2(o){var c=null,p=en.updateQueue;if(p!==null&&(c=p.memoCache),c==null){var y=en.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(E){return E.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),p===null&&(p=Zc(),en.updateQueue=p),p.memoCache=c,p=c.data[c.index],p===void 0)for(p=c.data[c.index]=Array(o),y=0;y<o;y++)p[y]=P;return c.index++,p}function Jl(o,c){return typeof c=="function"?c(o):c}function $c(o){var c=ns();return p2(c,Zn,o)}function p2(o,c,p){var y=o.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=p;var E=o.baseQueue,w=y.pending;if(w!==null){if(E!==null){var H=E.next;E.next=w.next,w.next=H}c.baseQueue=E=w,y.pending=null}if(w=o.baseState,E===null)o.memoizedState=w;else{c=E.next;var j=H=null,st=null,St=c,zt=!1;do{var jt=St.lane&-536870913;if(jt!==St.lane?(Ie&jt)===jt:(Wl&jt)===jt){var Tt=St.revertLane;if(Tt===0)st!==null&&(st=st.next={lane:0,revertLane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),jt===tn&&(zt=!0);else if((Wl&Tt)===Tt){St=St.next,Tt===tn&&(zt=!0);continue}else jt={lane:0,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},st===null?(j=st=jt,H=w):st=st.next=jt,en.lanes|=Tt,Eo|=Tt;jt=St.action,Ar&&p(w,jt),w=St.hasEagerState?St.eagerState:p(w,jt)}else Tt={lane:jt,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},st===null?(j=st=Tt,H=w):st=st.next=Tt,en.lanes|=jt,Eo|=jt;St=St.next}while(St!==null&&St!==c);if(st===null?H=w:st.next=j,!Pr(w,o.memoizedState)&&(bs=!0,zt&&(p=Lf,p!==null)))throw p;o.memoizedState=w,o.baseState=H,o.baseQueue=st,y.lastRenderedState=w}return E===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function m2(o){var c=ns(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=o;var y=p.dispatch,E=p.pending,w=c.memoizedState;if(E!==null){p.pending=null;var H=E=E.next;do w=o(w,H.action),H=H.next;while(H!==E);Pr(w,c.memoizedState)||(bs=!0),c.memoizedState=w,c.baseQueue===null&&(c.baseState=w),p.lastRenderedState=w}return[w,y]}function Ab(o,c,p){var y=en,E=ns(),w=kn;if(w){if(p===void 0)throw Error(n(407));p=p()}else p=c();var H=!Pr((Zn||E).memoizedState,p);H&&(E.memoizedState=p,bs=!0),E=E.queue;var j=bb.bind(null,y,E,o);if(Ff(2048,8,j,[o]),E.getSnapshot!==c||H||es!==null&&es.memoizedState.tag&1){if(y.flags|=2048,Pf(9,Qp(),xb.bind(null,y,E,p,c),null),We===null)throw Error(n(349));w||(Wl&124)!==0||Uf(y,c,p)}return p}function Uf(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=en.updateQueue,c===null?(c=Zc(),en.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function xb(o,c,p,y){c.value=p,c.getSnapshot=y,Sb(c)&&Eb(o)}function bb(o,c,p){return p(function(){Sb(c)&&Eb(o)})}function Sb(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!Pr(o,p)}catch{return!0}}function Eb(o){var c=Vl(o,2);c!==null&&Er(c,o,2)}function g2(o){var c=xr();if(typeof o=="function"){var p=o;if(o=p(),Ar){te(!0);try{p()}finally{te(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jl,lastRenderedState:o},c}function Mb(o,c,p,y){return o.baseState=p,p2(o,Zn,typeof y=="function"?y:Jl)}function j4(o,c,p,y,E){if(X0(o))throw Error(n(485));if(o=c.action,o!==null){var w={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){w.listeners.push(H)}};Q.T!==null?p(!0):w.isTransition=!1,y(w),p=c.pending,p===null?(w.next=c.pending=w,Tb(c,w)):(w.next=p.next,c.pending=p.next=w)}}function Tb(o,c){var p=c.action,y=c.payload,E=o.state;if(c.isTransition){var w=Q.T,H={};Q.T=H;try{var j=p(E,y),st=Q.S;st!==null&&st(H,j),Cb(o,c,j)}catch(St){v2(o,c,St)}finally{Q.T=w}}else try{w=p(E,y),Cb(o,c,w)}catch(St){v2(o,c,St)}}function Cb(o,c,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){wb(o,c,y)},function(y){return v2(o,c,y)}):wb(o,c,p)}function wb(o,c,p){c.status="fulfilled",c.value=p,Rb(c),o.state=p,c=o.pending,c!==null&&(p=c.next,p===c?o.pending=null:(p=p.next,c.next=p,Tb(o,p)))}function v2(o,c,p){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=p,Rb(c),c=c.next;while(c!==y)}o.action=null}function Rb(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function y2(o,c){return c}function Lb(o,c){if(kn){var p=We.formState;if(p!==null){t:{var y=en;if(kn){if(Li){e:{for(var E=Li,w=ua;E.nodeType!==8;){if(!w){E=null;break e}if(E=sc(E.nextSibling),E===null){E=null;break e}}w=E.data,E=w==="F!"||w==="F"?E:null}if(E){Li=sc(E.nextSibling),y=E.data==="F!";break t}}qc(y)}y=!1}y&&(c=p[0])}}return p=xr(),p.memoizedState=p.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y2,lastRenderedState:c},p.queue=y,p=Vb.bind(null,en,y),y.dispatch=p,y=g2(!1),w=Q0.bind(null,en,!1,y.queue),y=xr(),E={state:c,dispatch:null,action:o,pending:null},y.queue=E,p=j4.bind(null,en,E,w,p),E.dispatch=p,y.memoizedState=o,[c,p,!1]}function Db(o){var c=ns();return Bb(c,Zn,o)}function Bb(o,c,p){if(c=p2(o,c,y2)[0],o=$c(Jl)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=vo(c)}catch(H){throw H===zp?go:H}else y=c;c=ns();var E=c.queue,w=E.dispatch;return p!==c.memoizedState&&(en.flags|=2048,Pf(9,Qp(),q4.bind(null,E,p),null)),[y,w,o]}function q4(o,c){o.action=c}function Ob(o){var c=ns(),p=Zn;if(p!==null)return Bb(c,p,o);ns(),c=c.memoizedState,p=ns();var y=p.queue.dispatch;return p.memoizedState=o,[c,y,!1]}function Pf(o,c,p,y){return o={tag:o,create:p,deps:y,inst:c,next:null},c=en.updateQueue,c===null&&(c=Zc(),en.updateQueue=c),p=c.lastEffect,p===null?c.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,c.lastEffect=o),o}function Qp(){return{destroy:void 0,resource:void 0}}function _2(){return ns().memoizedState}function z0(o,c,p,y){var E=xr();y=y===void 0?null:y,en.flags|=o,E.memoizedState=Pf(1|c,Qp(),p,y)}function Ff(o,c,p,y){var E=ns();y=y===void 0?null:y;var w=E.memoizedState.inst;Zn!==null&&y!==null&&er(y,Zn.memoizedState.deps)?E.memoizedState=Pf(c,w,p,y):(en.flags|=o,E.memoizedState=Pf(1|c,w,p,y))}function A2(o,c){z0(8390656,8,o,c)}function x2(o,c){Ff(2048,8,o,c)}function G0(o,c){return Ff(4,2,o,c)}function k0(o,c){return Ff(4,4,o,c)}function Nb(o,c){if(typeof c=="function"){o=o();var p=c(o);return function(){typeof p=="function"?p():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Ib(o,c,p){p=p!=null?p.concat([o]):null,Ff(4,4,Nb.bind(null,c,o),p)}function b2(){}function Ub(o,c){var p=ns();c=c===void 0?null:c;var y=p.memoizedState;return c!==null&&er(c,y[1])?y[0]:(p.memoizedState=[o,c],o)}function S2(o,c){var p=ns();c=c===void 0?null:c;var y=p.memoizedState;if(c!==null&&er(c,y[1]))return y[0];if(y=o(),Ar){te(!0);try{o()}finally{te(!1)}}return p.memoizedState=[y,c],y}function V0(o,c,p){return p===void 0||(Wl&1073741824)!==0?o.memoizedState=c:(o.memoizedState=p,o=i1(),en.lanes|=o,Eo|=o,p)}function Pb(o,c,p,y){return Pr(p,c)?p:If.current!==null?(o=V0(o,p,y),Pr(o,c)||(bs=!0),o):(Wl&42)===0?(bs=!0,o.memoizedState=p):(o=i1(),en.lanes|=o,Eo|=o,c)}function Fb(o,c,p,y,E){var w=tt.p;tt.p=w!==0&&8>w?w:8;var H=Q.T,j={};Q.T=j,Q0(o,!1,c,p);try{var st=E(),St=Q.S;if(St!==null&&St(j,st),st!==null&&typeof st=="object"&&typeof st.then=="function"){var zt=Q4(st,y);Xp(o,c,zt,Fi(o))}else Xp(o,c,y,Fi(o))}catch(jt){Xp(o,c,{then:function(){},status:"rejected",reason:jt},Fi())}finally{tt.p=w,Q.T=H}}function Y4(){}function E2(o,c,p,y){if(o.tag!==5)throw Error(n(476));var E=Hb(o).queue;Fb(o,E,c,et,p===null?Y4:function(){return zb(o),p(y)})}function Hb(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jl,lastRenderedState:et},next:null};var p={};return c.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jl,lastRenderedState:p},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function zb(o){var c=Hb(o).next.queue;Xp(o,c,{},Fi())}function M2(){return Ii(F2)}function Gb(){return ns().memoizedState}function kb(){return ns().memoizedState}function W4(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var p=Fi();o=nl(p);var y=Yl(c,o,p);y!==null&&(Er(y,c,p),Xu(y,c,p)),c={cache:D0()},o.payload=c;return}c=c.return}}function K4(o,c,p){var y=Fi();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},X0(o)?Qb(c,p):(p=T0(o,c,p,y),p!==null&&(Er(p,o,y),fa(p,c,y)))}function Vb(o,c,p){var y=Fi();Xp(o,c,p,y)}function Xp(o,c,p,y){var E={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(X0(o))Qb(c,E);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=c.lastRenderedReducer,w!==null))try{var H=c.lastRenderedState,j=w(H,p);if(E.hasEagerState=!0,E.eagerState=j,Pr(j,H))return Vc(o,c,E,0),We===null&&Lp(),!1}catch{}finally{}if(p=T0(o,c,E,y),p!==null)return Er(p,o,y),fa(p,c,y),!0}return!1}function Q0(o,c,p,y){if(y={lane:2,revertLane:$4(),action:y,hasEagerState:!1,eagerState:null,next:null},X0(o)){if(c)throw Error(n(479))}else c=T0(o,p,y,2),c!==null&&Er(c,o,2)}function X0(o){var c=o.alternate;return o===en||c!==null&&c===en}function Qb(o,c){Jc=P0=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function fa(o,c,p){if((p&4194048)!==0){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,qe(o,p)}}var jp={readContext:Ii,use:H0,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useLayoutEffect:ki,useInsertionEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useSyncExternalStore:ki,useId:ki,useHostTransitionStatus:ki,useFormState:ki,useActionState:ki,useOptimistic:ki,useMemoCache:ki,useCacheRefresh:ki},j0={readContext:Ii,use:H0,useCallback:function(o,c){return xr().memoizedState=[o,c===void 0?null:c],o},useContext:Ii,useEffect:A2,useImperativeHandle:function(o,c,p){p=p!=null?p.concat([o]):null,z0(4194308,4,Nb.bind(null,c,o),p)},useLayoutEffect:function(o,c){return z0(4194308,4,o,c)},useInsertionEffect:function(o,c){z0(4,2,o,c)},useMemo:function(o,c){var p=xr();c=c===void 0?null:c;var y=o();if(Ar){te(!0);try{o()}finally{te(!1)}}return p.memoizedState=[y,c],y},useReducer:function(o,c,p){var y=xr();if(p!==void 0){var E=p(c);if(Ar){te(!0);try{p(c)}finally{te(!1)}}}else E=c;return y.memoizedState=y.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},y.queue=o,o=o.dispatch=K4.bind(null,en,o),[y.memoizedState,o]},useRef:function(o){var c=xr();return o={current:o},c.memoizedState=o},useState:function(o){o=g2(o);var c=o.queue,p=Vb.bind(null,en,c);return c.dispatch=p,[o.memoizedState,p]},useDebugValue:b2,useDeferredValue:function(o,c){var p=xr();return V0(p,o,c)},useTransition:function(){var o=g2(!1);return o=Fb.bind(null,en,o.queue,!0,!1),xr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,p){var y=en,E=xr();if(kn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=c(),We===null)throw Error(n(349));(Ie&124)!==0||Uf(y,c,p)}E.memoizedState=p;var w={value:p,getSnapshot:c};return E.queue=w,A2(bb.bind(null,y,w,o),[o]),y.flags|=2048,Pf(9,Qp(),xb.bind(null,y,w,p,c),null),p},useId:function(){var o=xr(),c=We.identifierPrefix;if(kn){var p=tl,y=$o;p=(y&~(1<<32-ge(y)-1)).toString(32)+p,c=""+c+"R"+p,p=us++,0<p&&(c+="H"+p.toString(32)),c+=""}else p=vb++,c=""+c+"r"+p.toString(32)+"";return o.memoizedState=c},useHostTransitionStatus:M2,useFormState:Lb,useActionState:Lb,useOptimistic:function(o){var c=xr();c.memoizedState=c.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=p,c=Q0.bind(null,en,!0,p),p.dispatch=c,[o,c]},useMemoCache:d2,useCacheRefresh:function(){return xr().memoizedState=W4.bind(null,en)}},T2={readContext:Ii,use:H0,useCallback:Ub,useContext:Ii,useEffect:x2,useImperativeHandle:Ib,useInsertionEffect:G0,useLayoutEffect:k0,useMemo:S2,useReducer:$c,useRef:_2,useState:function(){return $c(Jl)},useDebugValue:b2,useDeferredValue:function(o,c){var p=ns();return Pb(p,Zn.memoizedState,o,c)},useTransition:function(){var o=$c(Jl)[0],c=ns().memoizedState;return[typeof o=="boolean"?o:vo(o),c]},useSyncExternalStore:Ab,useId:Gb,useHostTransitionStatus:M2,useFormState:Db,useActionState:Db,useOptimistic:function(o,c){var p=ns();return Mb(p,Zn,o,c)},useMemoCache:d2,useCacheRefresh:kb},Xb={readContext:Ii,use:H0,useCallback:Ub,useContext:Ii,useEffect:x2,useImperativeHandle:Ib,useInsertionEffect:G0,useLayoutEffect:k0,useMemo:S2,useReducer:m2,useRef:_2,useState:function(){return m2(Jl)},useDebugValue:b2,useDeferredValue:function(o,c){var p=ns();return Zn===null?V0(p,o,c):Pb(p,Zn.memoizedState,o,c)},useTransition:function(){var o=m2(Jl)[0],c=ns().memoizedState;return[typeof o=="boolean"?o:vo(o),c]},useSyncExternalStore:Ab,useId:Gb,useHostTransitionStatus:M2,useFormState:Ob,useActionState:Ob,useOptimistic:function(o,c){var p=ns();return Zn!==null?Mb(p,Zn,o,c):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:d2,useCacheRefresh:kb},ju=null,qp=0;function Yp(o){var c=qp;return qp+=1,ju===null&&(ju=[]),I0(ju,o,c)}function Hf(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function q0(o,c){throw c.$$typeof===g?Error(n(525)):(o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function jb(o){var c=o._init;return c(o._payload)}function qb(o){function c(gt,ft){if(o){var bt=gt.deletions;bt===null?(gt.deletions=[ft],gt.flags|=16):bt.push(ft)}}function p(gt,ft){if(!o)return null;for(;ft!==null;)c(gt,ft),ft=ft.sibling;return null}function y(gt){for(var ft=new Map;gt!==null;)gt.key!==null?ft.set(gt.key,gt):ft.set(gt.index,gt),gt=gt.sibling;return ft}function E(gt,ft){return gt=Gi(gt,ft),gt.index=0,gt.sibling=null,gt}function w(gt,ft,bt){return gt.index=bt,o?(bt=gt.alternate,bt!==null?(bt=bt.index,bt<ft?(gt.flags|=67108866,ft):bt):(gt.flags|=67108866,ft)):(gt.flags|=1048576,ft)}function H(gt){return o&&gt.alternate===null&&(gt.flags|=67108866),gt}function j(gt,ft,bt,kt){return ft===null||ft.tag!==6?(ft=Bp(bt,gt.mode,kt),ft.return=gt,ft):(ft=E(ft,bt),ft.return=gt,ft)}function st(gt,ft,bt,kt){var Ee=bt.type;return Ee===b?zt(gt,ft,bt.props.children,kt,bt.key):ft!==null&&(ft.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===z&&jb(Ee)===ft.type)?(ft=E(ft,bt.props),Hf(ft,bt),ft.return=gt,ft):(ft=xs(bt.type,bt.key,bt.props,null,gt.mode,kt),Hf(ft,bt),ft.return=gt,ft)}function St(gt,ft,bt,kt){return ft===null||ft.tag!==4||ft.stateNode.containerInfo!==bt.containerInfo||ft.stateNode.implementation!==bt.implementation?(ft=C0(bt,gt.mode,kt),ft.return=gt,ft):(ft=E(ft,bt.children||[]),ft.return=gt,ft)}function zt(gt,ft,bt,kt,Ee){return ft===null||ft.tag!==7?(ft=Xc(bt,gt.mode,kt,Ee),ft.return=gt,ft):(ft=E(ft,bt),ft.return=gt,ft)}function jt(gt,ft,bt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return ft=Bp(""+ft,gt.mode,bt),ft.return=gt,ft;if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case v:return bt=xs(ft.type,ft.key,ft.props,null,gt.mode,bt),Hf(bt,ft),bt.return=gt,bt;case _:return ft=C0(ft,gt.mode,bt),ft.return=gt,ft;case z:var kt=ft._init;return ft=kt(ft._payload),jt(gt,ft,bt)}if(dt(ft)||ot(ft))return ft=Xc(ft,gt.mode,bt,null),ft.return=gt,ft;if(typeof ft.then=="function")return jt(gt,Yp(ft),bt);if(ft.$$typeof===B)return jt(gt,Up(gt,ft),bt);q0(gt,ft)}return null}function Tt(gt,ft,bt,kt){var Ee=ft!==null?ft.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return Ee!==null?null:j(gt,ft,""+bt,kt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case v:return bt.key===Ee?st(gt,ft,bt,kt):null;case _:return bt.key===Ee?St(gt,ft,bt,kt):null;case z:return Ee=bt._init,bt=Ee(bt._payload),Tt(gt,ft,bt,kt)}if(dt(bt)||ot(bt))return Ee!==null?null:zt(gt,ft,bt,kt,null);if(typeof bt.then=="function")return Tt(gt,ft,Yp(bt),kt);if(bt.$$typeof===B)return Tt(gt,ft,Up(gt,bt),kt);q0(gt,bt)}return null}function Lt(gt,ft,bt,kt,Ee){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return gt=gt.get(bt)||null,j(ft,gt,""+kt,Ee);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case v:return gt=gt.get(kt.key===null?bt:kt.key)||null,st(ft,gt,kt,Ee);case _:return gt=gt.get(kt.key===null?bt:kt.key)||null,St(ft,gt,kt,Ee);case z:var En=kt._init;return kt=En(kt._payload),Lt(gt,ft,bt,kt,Ee)}if(dt(kt)||ot(kt))return gt=gt.get(bt)||null,zt(ft,gt,kt,Ee,null);if(typeof kt.then=="function")return Lt(gt,ft,bt,Yp(kt),Ee);if(kt.$$typeof===B)return Lt(gt,ft,bt,Up(ft,kt),Ee);q0(ft,kt)}return null}function je(gt,ft,bt,kt){for(var Ee=null,En=null,Be=ft,Ve=ft=0,sr=null;Be!==null&&Ve<bt.length;Ve++){Be.index>Ve?(sr=Be,Be=null):sr=Be.sibling;var Yn=Tt(gt,Be,bt[Ve],kt);if(Yn===null){Be===null&&(Be=sr);break}o&&Be&&Yn.alternate===null&&c(gt,Be),ft=w(Yn,ft,Ve),En===null?Ee=Yn:En.sibling=Yn,En=Yn,Be=sr}if(Ve===bt.length)return p(gt,Be),kn&&Ql(gt,Ve),Ee;if(Be===null){for(;Ve<bt.length;Ve++)Be=jt(gt,bt[Ve],kt),Be!==null&&(ft=w(Be,ft,Ve),En===null?Ee=Be:En.sibling=Be,En=Be);return kn&&Ql(gt,Ve),Ee}for(Be=y(Be);Ve<bt.length;Ve++)sr=Lt(Be,gt,Ve,bt[Ve],kt),sr!==null&&(o&&sr.alternate!==null&&Be.delete(sr.key===null?Ve:sr.key),ft=w(sr,ft,Ve),En===null?Ee=sr:En.sibling=sr,En=sr);return o&&Be.forEach(function(nd){return c(gt,nd)}),kn&&Ql(gt,Ve),Ee}function ke(gt,ft,bt,kt){if(bt==null)throw Error(n(151));for(var Ee=null,En=null,Be=ft,Ve=ft=0,sr=null,Yn=bt.next();Be!==null&&!Yn.done;Ve++,Yn=bt.next()){Be.index>Ve?(sr=Be,Be=null):sr=Be.sibling;var nd=Tt(gt,Be,Yn.value,kt);if(nd===null){Be===null&&(Be=sr);break}o&&Be&&nd.alternate===null&&c(gt,Be),ft=w(nd,ft,Ve),En===null?Ee=nd:En.sibling=nd,En=nd,Be=sr}if(Yn.done)return p(gt,Be),kn&&Ql(gt,Ve),Ee;if(Be===null){for(;!Yn.done;Ve++,Yn=bt.next())Yn=jt(gt,Yn.value,kt),Yn!==null&&(ft=w(Yn,ft,Ve),En===null?Ee=Yn:En.sibling=Yn,En=Yn);return kn&&Ql(gt,Ve),Ee}for(Be=y(Be);!Yn.done;Ve++,Yn=bt.next())Yn=Lt(Be,gt,Ve,Yn.value,kt),Yn!==null&&(o&&Yn.alternate!==null&&Be.delete(Yn.key===null?Ve:Yn.key),ft=w(Yn,ft,Ve),En===null?Ee=Yn:En.sibling=Yn,En=Yn);return o&&Be.forEach(function(QP){return c(gt,QP)}),kn&&Ql(gt,Ve),Ee}function yi(gt,ft,bt,kt){if(typeof bt=="object"&&bt!==null&&bt.type===b&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case v:t:{for(var Ee=bt.key;ft!==null;){if(ft.key===Ee){if(Ee=bt.type,Ee===b){if(ft.tag===7){p(gt,ft.sibling),kt=E(ft,bt.props.children),kt.return=gt,gt=kt;break t}}else if(ft.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===z&&jb(Ee)===ft.type){p(gt,ft.sibling),kt=E(ft,bt.props),Hf(kt,bt),kt.return=gt,gt=kt;break t}p(gt,ft);break}else c(gt,ft);ft=ft.sibling}bt.type===b?(kt=Xc(bt.props.children,gt.mode,kt,bt.key),kt.return=gt,gt=kt):(kt=xs(bt.type,bt.key,bt.props,null,gt.mode,kt),Hf(kt,bt),kt.return=gt,gt=kt)}return H(gt);case _:t:{for(Ee=bt.key;ft!==null;){if(ft.key===Ee)if(ft.tag===4&&ft.stateNode.containerInfo===bt.containerInfo&&ft.stateNode.implementation===bt.implementation){p(gt,ft.sibling),kt=E(ft,bt.children||[]),kt.return=gt,gt=kt;break t}else{p(gt,ft);break}else c(gt,ft);ft=ft.sibling}kt=C0(bt,gt.mode,kt),kt.return=gt,gt=kt}return H(gt);case z:return Ee=bt._init,bt=Ee(bt._payload),yi(gt,ft,bt,kt)}if(dt(bt))return je(gt,ft,bt,kt);if(ot(bt)){if(Ee=ot(bt),typeof Ee!="function")throw Error(n(150));return bt=Ee.call(bt),ke(gt,ft,bt,kt)}if(typeof bt.then=="function")return yi(gt,ft,Yp(bt),kt);if(bt.$$typeof===B)return yi(gt,ft,Up(gt,bt),kt);q0(gt,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint"?(bt=""+bt,ft!==null&&ft.tag===6?(p(gt,ft.sibling),kt=E(ft,bt),kt.return=gt,gt=kt):(p(gt,ft),kt=Bp(bt,gt.mode,kt),kt.return=gt,gt=kt),H(gt)):p(gt,ft)}return function(gt,ft,bt,kt){try{qp=0;var Ee=yi(gt,ft,bt,kt);return ju=null,Ee}catch(Be){if(Be===zp||Be===go)throw Be;var En=zr(29,Be,null,gt.mode);return En.lanes=kt,En.return=gt,En}finally{}}}var qu=qb(!0),Yb=qb(!1),ai=at(null),yo=null;function tu(o){var c=o.alternate;Et(Vi,Vi.current&1),Et(ai,o),yo===null&&(c===null||If.current!==null||c.memoizedState!==null)&&(yo=o)}function Wb(o){if(o.tag===22){if(Et(Vi,Vi.current),Et(ai,o),yo===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(yo=o)}}else eu()}function eu(){Et(Vi,Vi.current),Et(ai,ai.current)}function il(o){xt(ai),yo===o&&(yo=null),xt(Vi)}var Vi=at(0);function Zl(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||hT(p)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function nu(o,c,p,y){c=o.memoizedState,p=p(y,c),p=p==null?c:m({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var br={enqueueSetState:function(o,c,p){o=o._reactInternals;var y=Fi(),E=nl(y);E.payload=c,p!=null&&(E.callback=p),c=Yl(o,E,y),c!==null&&(Er(c,o,y),Xu(c,o,y))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var y=Fi(),E=nl(y);E.tag=1,E.payload=c,p!=null&&(E.callback=p),c=Yl(o,E,y),c!==null&&(Er(c,o,y),Xu(c,o,y))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=Fi(),y=nl(p);y.tag=2,c!=null&&(y.callback=c),c=Yl(o,y,p),c!==null&&(Er(c,o,p),Xu(c,o,p))}};function Kb(o,c,p,y,E,w,H){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,w,H):c.prototype&&c.prototype.isPureReactComponent?!po(p,y)||!po(E,w):!0}function Jb(o,c,p,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==o&&br.enqueueReplaceState(c,c.state,null)}function sl(o,c){var p=c;if("ref"in c){p={};for(var y in c)y!=="ref"&&(p[y]=c[y])}if(o=o.defaultProps){p===c&&(p=m({},p));for(var E in o)p[E]===void 0&&(p[E]=o[E])}return p}var Yu=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Wp(o){Yu(o)}function Y0(o){console.error(o)}function Zb(o){Yu(o)}function W0(o,c){try{var p=o.onUncaughtError;p(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function Qa(o,c,p){try{var y=o.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function K0(o,c,p){return p=nl(p),p.tag=3,p.payload={element:null},p.callback=function(){W0(o,c)},p}function $b(o){return o=nl(o),o.tag=3,o}function J0(o,c,p,y){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var w=y.value;o.payload=function(){return E(w)},o.callback=function(){Qa(c,p,y)}}var H=p.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(o.callback=function(){Qa(c,p,y),typeof E!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var j=y.stack;this.componentDidCatch(y.value,{componentStack:j!==null?j:""})})}function J4(o,c,p,y,E){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=p.alternate,c!==null&&za(c,p,E,!0),p=ai.current,p!==null){switch(p.tag){case 13:return yo===null?h():p.alternate===null&&xi===0&&(xi=3),p.flags&=-257,p.flags|=65536,p.lanes=E,y===Gp?p.flags|=16384:(c=p.updateQueue,c===null?p.updateQueue=new Set([y]):c.add(y),Dt(o,y,E)),!1;case 22:return p.flags|=65536,y===Gp?p.flags|=16384:(c=p.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=c):(p=c.retryQueue,p===null?c.retryQueue=new Set([y]):p.add(y)),Dt(o,y,E)),!1}throw Error(n(435,p.tag))}return Dt(o,y,E),h(),!1}if(kn)return c=ai.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=E,y!==R0&&(o=Error(n(422),{cause:y}),Qu(Ps(o,p)))):(y!==R0&&(c=Error(n(423),{cause:y}),Qu(Ps(c,p))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,y=Ps(y,p),E=K0(o.stateNode,y,E),Bf(o,E),xi!==4&&(xi=2)),!1;var w=Error(n(520),{cause:y});if(w=Ps(w,p),qn===null?qn=[w]:qn.push(w),xi!==4&&(xi=2),c===null)return!0;y=Ps(y,p),p=c;do{switch(p.tag){case 3:return p.flags|=65536,o=E&-E,p.lanes|=o,o=K0(p.stateNode,y,o),Bf(p,o),!1;case 1:if(c=p.type,w=p.stateNode,(p.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Aa===null||!Aa.has(w))))return p.flags|=65536,E&=-E,p.lanes|=E,E=$b(E),J0(E,o,p,y),Bf(p,E),!1}p=p.return}while(p!==null);return!1}var tS=Error(n(461)),bs=!1;function Qi(o,c,p,y){c.child=o===null?Yb(c,null,p,y):qu(c,o.child,p,y)}function kr(o,c,p,y,E){p=p.render;var w=c.ref;if("ref"in y){var H={};for(var j in y)j!=="ref"&&(H[j]=y[j])}else H=y;return el(c),y=Kl(o,c,p,H,w,E),j=h2(),o!==null&&!bs?(F0(o,c,E),Ss(o,c,E)):(kn&&j&&t2(c),c.flags|=1,Qi(o,c,y,E),c.child)}function Vr(o,c,p,y,E){if(o===null){var w=p.type;return typeof w=="function"&&!Dp(w)&&w.defaultProps===void 0&&p.compare===null?(c.tag=15,c.type=w,C2(o,c,w,y,E)):(o=xs(p.type,null,y,c,c.mode,E),o.ref=c.ref,o.return=c,c.child=o)}if(w=o.child,!Kp(o,E)){var H=w.memoizedProps;if(p=p.compare,p=p!==null?p:po,p(H,y)&&o.ref===c.ref)return Ss(o,c,E)}return c.flags|=1,o=Gi(w,y),o.ref=c.ref,o.return=c,c.child=o}function C2(o,c,p,y,E){if(o!==null){var w=o.memoizedProps;if(po(w,y)&&o.ref===c.ref)if(bs=!1,c.pendingProps=y=w,Kp(o,E))(o.flags&131072)!==0&&(bs=!0);else return c.lanes=o.lanes,Ss(o,c,E)}return zf(o,c,p,y,E)}function Wu(o,c,p){var y=c.pendingProps,E=y.children,w=o!==null?o.memoizedState:null;if(y.mode==="hidden"){if((c.flags&128)!==0){if(y=w!==null?w.baseLanes|p:p,o!==null){for(E=c.child=o.child,w=0;E!==null;)w=w|E.lanes|E.childLanes,E=E.sibling;c.childLanes=w&~y}else c.childLanes=0,c.child=null;return Ku(o,c,y,p)}if((p&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Hp(c,w!==null?w.cachePool:null),w!==null?gb(c,w):u2(),Wb(c);else return c.lanes=c.childLanes=536870912,Ku(o,c,w!==null?w.baseLanes|p:p,p)}else w!==null?(Hp(c,w.cachePool),gb(c,w),eu(),c.memoizedState=null):(o!==null&&Hp(c,null),u2(),eu());return Qi(o,c,E,p),c.child}function Ku(o,c,p,y){var E=Kc();return E=E===null?null:{parent:ts._currentValue,pool:E},c.memoizedState={baseLanes:p,cachePool:E},o!==null&&Hp(c,null),u2(),Wb(c),o!==null&&za(o,c,y,!0),null}function Ju(o,c){var p=c.ref;if(p===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(o===null||o.ref!==p)&&(c.flags|=4194816)}}function zf(o,c,p,y,E){return el(c),p=Kl(o,c,p,y,void 0,E),y=h2(),o!==null&&!bs?(F0(o,c,E),Ss(o,c,E)):(kn&&y&&t2(c),c.flags|=1,Qi(o,c,p,E),c.child)}function da(o,c,p,y,E,w){return el(c),c.updateQueue=null,p=_b(c,y,p,E),yb(o),y=h2(),o!==null&&!bs?(F0(o,c,w),Ss(o,c,w)):(kn&&y&&t2(c),c.flags|=1,Qi(o,c,p,w),c.child)}function pa(o,c,p,y,E){if(el(c),c.stateNode===null){var w=Qc,H=p.contextType;typeof H=="object"&&H!==null&&(w=Ii(H)),w=new p(y,w),c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=br,c.stateNode=w,w._reactInternals=c,w=c.stateNode,w.props=y,w.state=c.memoizedState,w.refs={},l2(c),H=p.contextType,w.context=typeof H=="object"&&H!==null?Ii(H):Qc,w.state=c.memoizedState,H=p.getDerivedStateFromProps,typeof H=="function"&&(nu(c,p,H,y),w.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(H=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),H!==w.state&&br.enqueueReplaceState(w,w.state,null),Of(c,y,w,E),kp(),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(o===null){w=c.stateNode;var j=c.memoizedProps,st=sl(p,j);w.props=st;var St=w.context,zt=p.contextType;H=Qc,typeof zt=="object"&&zt!==null&&(H=Ii(zt));var jt=p.getDerivedStateFromProps;zt=typeof jt=="function"||typeof w.getSnapshotBeforeUpdate=="function",j=c.pendingProps!==j,zt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(j||St!==H)&&Jb(c,w,y,H),ql=!1;var Tt=c.memoizedState;w.state=Tt,Of(c,y,w,E),kp(),St=c.memoizedState,j||Tt!==St||ql?(typeof jt=="function"&&(nu(c,p,jt,y),St=c.memoizedState),(st=ql||Kb(c,p,st,y,Tt,St,H))?(zt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(c.flags|=4194308)):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=St),w.props=y,w.state=St,w.context=H,y=st):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{w=c.stateNode,Qe(o,c),H=c.memoizedProps,zt=sl(p,H),w.props=zt,jt=c.pendingProps,Tt=w.context,St=p.contextType,st=Qc,typeof St=="object"&&St!==null&&(st=Ii(St)),j=p.getDerivedStateFromProps,(St=typeof j=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(H!==jt||Tt!==st)&&Jb(c,w,y,st),ql=!1,Tt=c.memoizedState,w.state=Tt,Of(c,y,w,E),kp();var Lt=c.memoizedState;H!==jt||Tt!==Lt||ql||o!==null&&o.dependencies!==null&&Ip(o.dependencies)?(typeof j=="function"&&(nu(c,p,j,y),Lt=c.memoizedState),(zt=ql||Kb(c,p,zt,y,Tt,Lt,st)||o!==null&&o.dependencies!==null&&Ip(o.dependencies))?(St||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(y,Lt,st),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(y,Lt,st)),typeof w.componentDidUpdate=="function"&&(c.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof w.componentDidUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Lt),w.props=y,w.state=Lt,w.context=st,y=zt):(typeof w.componentDidUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=1024),y=!1)}return w=y,Ju(o,c),y=(c.flags&128)!==0,w||y?(w=c.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:w.render(),c.flags|=1,o!==null&&y?(c.child=qu(c,o.child,null,E),c.child=qu(c,null,p,E)):Qi(o,c,p,E),c.memoizedState=w.state,o=c.child):o=Ss(o,c,E),o}function iu(o,c,p,y){return Cf(),c.flags|=256,Qi(o,c,p,y),c.child}var _o={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ao(o){return{baseLanes:o,cachePool:O0()}}function hs(o,c,p){return o=o!==null?o.childLanes&~p:0,c&&(o|=Wa),o}function Gf(o,c,p){var y=c.pendingProps,E=!1,w=(c.flags&128)!==0,H;if((H=w)||(H=o!==null&&o.memoizedState===null?!1:(Vi.current&2)!==0),H&&(E=!0,c.flags&=-129),H=(c.flags&32)!==0,c.flags&=-33,o===null){if(kn){if(E?tu(c):eu(),kn){var j=Li,st;if(st=j){t:{for(st=j,j=ua;st.nodeType!==8;){if(!j){j=null;break t}if(st=sc(st.nextSibling),st===null){j=null;break t}}j=st}j!==null?(c.memoizedState={dehydrated:j,treeContext:jc!==null?{id:$o,overflow:tl}:null,retryLane:536870912,hydrationErrors:null},st=zr(18,null,null,0),st.stateNode=j,st.return=c,c.child=st,_r=c,Li=null,st=!0):st=!1}st||qc(c)}if(j=c.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return hT(j)?c.lanes=32:c.lanes=536870912,null;il(c)}return j=y.children,y=y.fallback,E?(eu(),E=c.mode,j=Zu({mode:"hidden",children:j},E),y=Xc(y,E,p,null),j.return=c,y.return=c,j.sibling=y,c.child=j,E=c.child,E.memoizedState=Ao(p),E.childLanes=hs(o,H,p),c.memoizedState=_o,y):(tu(c),rl(c,j))}if(st=o.memoizedState,st!==null&&(j=st.dehydrated,j!==null)){if(w)c.flags&256?(tu(c),c.flags&=-257,c=zs(o,c,p)):c.memoizedState!==null?(eu(),c.child=o.child,c.flags|=128,c=null):(eu(),E=y.fallback,j=c.mode,y=Zu({mode:"visible",children:y.children},j),E=Xc(E,j,p,null),E.flags|=2,y.return=c,E.return=c,y.sibling=E,c.child=y,qu(c,o.child,null,p),y=c.child,y.memoizedState=Ao(p),y.childLanes=hs(o,H,p),c.memoizedState=_o,c=E);else if(tu(c),hT(j)){if(H=j.nextSibling&&j.nextSibling.dataset,H)var St=H.dgst;H=St,y=Error(n(419)),y.stack="",y.digest=H,Qu({value:y,source:null,stack:null}),c=zs(o,c,p)}else if(bs||za(o,c,p,!1),H=(p&o.childLanes)!==0,bs||H){if(H=We,H!==null&&(y=p&-p,y=(y&42)!==0?1:Jn(y),y=(y&(H.suspendedLanes|p))!==0?0:y,y!==0&&y!==st.retryLane))throw st.retryLane=y,Vl(o,y),Er(H,o,y),tS;j.data==="$?"||h(),c=zs(o,c,p)}else j.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=st.treeContext,Li=sc(j.nextSibling),_r=c,kn=!0,Ha=null,ua=!1,o!==null&&(Fs[ca++]=$o,Fs[ca++]=tl,Fs[ca++]=jc,$o=o.id,tl=o.overflow,jc=c),c=rl(c,y.children),c.flags|=4096);return c}return E?(eu(),E=y.fallback,j=c.mode,st=o.child,St=st.sibling,y=Gi(st,{mode:"hidden",children:y.children}),y.subtreeFlags=st.subtreeFlags&65011712,St!==null?E=Gi(St,E):(E=Xc(E,j,p,null),E.flags|=2),E.return=c,y.return=c,y.sibling=E,c.child=y,y=E,E=c.child,j=o.child.memoizedState,j===null?j=Ao(p):(st=j.cachePool,st!==null?(St=ts._currentValue,st=st.parent!==St?{parent:St,pool:St}:st):st=O0(),j={baseLanes:j.baseLanes|p,cachePool:st}),E.memoizedState=j,E.childLanes=hs(o,H,p),c.memoizedState=_o,y):(tu(c),p=o.child,o=p.sibling,p=Gi(p,{mode:"visible",children:y.children}),p.return=c,p.sibling=null,o!==null&&(H=c.deletions,H===null?(c.deletions=[o],c.flags|=16):H.push(o)),c.child=p,c.memoizedState=null,p)}function rl(o,c){return c=Zu({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Zu(o,c){return o=zr(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function zs(o,c,p){return qu(c,o.child,null,p),o=rl(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function Gs(o,c,p){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),s2(o.return,c,p)}function Dn(o,c,p,y,E){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E}:(w.isBackwards=c,w.rendering=null,w.renderingStartTime=0,w.last=y,w.tail=p,w.tailMode=E)}function Xa(o,c,p){var y=c.pendingProps,E=y.revealOrder,w=y.tail;if(Qi(o,c,y.children,p),y=Vi.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Gs(o,p,c);else if(o.tag===19)Gs(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break t;for(;o.sibling===null;){if(o.return===null||o.return===c)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}switch(Et(Vi,y),E){case"forwards":for(p=c.child,E=null;p!==null;)o=p.alternate,o!==null&&Zl(o)===null&&(E=p),p=p.sibling;p=E,p===null?(E=c.child,c.child=null):(E=p.sibling,p.sibling=null),Dn(c,!1,E,p,w);break;case"backwards":for(p=null,E=c.child,c.child=null;E!==null;){if(o=E.alternate,o!==null&&Zl(o)===null){c.child=E;break}o=E.sibling,E.sibling=p,p=E,E=o}Dn(c,!0,p,null,w);break;case"together":Dn(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ss(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),Eo|=c.lanes,(p&c.childLanes)===0)if(o!==null){if(za(o,c,p,!1),(p&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,p=Gi(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=Gi(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function Kp(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Ip(o)))}function ja(o,c,p){switch(c.tag){case 3:Wt(c,c.stateNode.containerInfo),Wc(c,ts,o.memoizedState.cache),Cf();break;case 27:case 5:ee(c);break;case 4:Wt(c,c.stateNode.containerInfo);break;case 10:Wc(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(tu(c),c.flags|=128,null):(p&c.child.childLanes)!==0?Gf(o,c,p):(tu(c),o=Ss(o,c,p),o!==null?o.sibling:null);tu(c);break;case 19:var E=(o.flags&128)!==0;if(y=(p&c.childLanes)!==0,y||(za(o,c,p,!1),y=(p&c.childLanes)!==0),E){if(y)return Xa(o,c,p);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Et(Vi,Vi.current),y)break;return null;case 22:case 23:return c.lanes=0,Wu(o,c,p);case 24:Wc(c,ts,o.memoizedState.cache)}return Ss(o,c,p)}function $u(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps)bs=!0;else{if(!Kp(o,p)&&(c.flags&128)===0)return bs=!1,ja(o,c,p);bs=(o.flags&131072)!==0}else bs=!1,kn&&(c.flags&1048576)!==0&&w0(c,Tf,c.index);switch(c.lanes=0,c.tag){case 16:t:{o=c.pendingProps;var y=c.elementType,E=y._init;if(y=E(y._payload),c.type=y,typeof y=="function")Dp(y)?(o=sl(y,o),c.tag=1,c=pa(null,c,y,o,p)):(c.tag=0,c=zf(null,c,y,o,p));else{if(y!=null){if(E=y.$$typeof,E===D){c.tag=11,c=kr(null,c,y,o,p);break t}else if(E===F){c.tag=14,c=Vr(null,c,y,o,p);break t}}throw c=ct(y)||y,Error(n(306,c,""))}}return c;case 0:return zf(o,c,c.type,c.pendingProps,p);case 1:return y=c.type,E=sl(y,c.pendingProps),pa(o,c,y,E,p);case 3:t:{if(Wt(c,c.stateNode.containerInfo),o===null)throw Error(n(387));y=c.pendingProps;var w=c.memoizedState;E=w.element,Qe(o,c),Of(c,y,null,p);var H=c.memoizedState;if(y=H.cache,Wc(c,ts,y),y!==w.cache&&Np(c,[ts],p,!0),kp(),y=H.element,w.isDehydrated)if(w={element:y,isDehydrated:!1,cache:H.cache},c.updateQueue.baseState=w,c.memoizedState=w,c.flags&256){c=iu(o,c,y,p);break t}else if(y!==E){E=Ps(Error(n(424)),c),Qu(E),c=iu(o,c,y,p);break t}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Li=sc(o.firstChild),_r=c,kn=!0,Ha=null,ua=!0,p=Yb(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Cf(),y===E){c=Ss(o,c,p);break t}Qi(o,c,y,p)}c=c.child}return c;case 26:return Ju(o,c),o===null?(p=a7(c.type,null,c.pendingProps,null))?c.memoizedState=p:kn||(p=c.type,o=c.pendingProps,y=aS(Bt.current).createElement(p),y[Ji]=c,y[cs]=o,Mr(y,p,o),Zi(y),c.stateNode=y):c.memoizedState=a7(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return ee(c),o===null&&kn&&(y=c.stateNode=i7(c.type,c.pendingProps,Bt.current),_r=c,ua=!0,E=Li,Jf(c.type)?(fT=E,Li=sc(y.firstChild)):Li=E),Qi(o,c,c.pendingProps.children,p),Ju(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&kn&&((E=y=Li)&&(y=_P(y,c.type,c.pendingProps,ua),y!==null?(c.stateNode=y,_r=c,Li=sc(y.firstChild),ua=!1,E=!0):E=!1),E||qc(c)),ee(c),E=c.type,w=c.pendingProps,H=o!==null?o.memoizedProps:null,y=w.children,lT(E,w)?y=null:H!==null&&lT(E,H)&&(c.flags|=32),c.memoizedState!==null&&(E=Kl(o,c,X4,null,null,p),F2._currentValue=E),Ju(o,c),Qi(o,c,y,p),c.child;case 6:return o===null&&kn&&((o=p=Li)&&(p=AP(p,c.pendingProps,ua),p!==null?(c.stateNode=p,_r=c,Li=null,o=!0):o=!1),o||qc(c)),null;case 13:return Gf(o,c,p);case 4:return Wt(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=qu(c,null,y,p):Qi(o,c,y,p),c.child;case 11:return kr(o,c,c.type,c.pendingProps,p);case 7:return Qi(o,c,c.pendingProps,p),c.child;case 8:return Qi(o,c,c.pendingProps.children,p),c.child;case 12:return Qi(o,c,c.pendingProps.children,p),c.child;case 10:return y=c.pendingProps,Wc(c,c.type,y.value),Qi(o,c,y.children,p),c.child;case 9:return E=c.type._context,y=c.pendingProps.children,el(c),E=Ii(E),y=y(E),c.flags|=1,Qi(o,c,y,p),c.child;case 14:return Vr(o,c,c.type,c.pendingProps,p);case 15:return C2(o,c,c.type,c.pendingProps,p);case 19:return Xa(o,c,p);case 31:return y=c.pendingProps,p=c.mode,y={mode:y.mode,children:y.children},o===null?(p=Zu(y,p),p.ref=c.ref,c.child=p,p.return=c,c=p):(p=Gi(o.child,y),p.ref=c.ref,c.child=p,p.return=c,c=p),c;case 22:return Wu(o,c,p);case 24:return el(c),y=Ii(ts),o===null?(E=Kc(),E===null&&(E=We,w=D0(),E.pooledCache=w,w.refCount++,w!==null&&(E.pooledCacheLanes|=p),E=w),c.memoizedState={parent:y,cache:E},l2(c),Wc(c,ts,E)):((o.lanes&p)!==0&&(Qe(o,c),Of(c,null,null,p),kp()),E=o.memoizedState,w=c.memoizedState,E.parent!==y?(E={parent:y,cache:y},c.memoizedState=E,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=E),Wc(c,ts,y)):(y=w.cache,Wc(c,ts,y),y!==E.cache&&Np(c,[ts],p,!0))),Qi(o,c,c.pendingProps.children,p),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function xo(o){o.flags|=4}function Jp(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!h7(c)){if(c=ai.current,c!==null&&((Ie&4194048)===Ie?yo!==null:(Ie&62914560)!==Ie&&(Ie&536870912)===0||c!==yo))throw ka=Gp,a2;o.flags|=8192}}function $l(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?ce():536870912,o.lanes|=c,Un|=c)}function th(o,c){if(!kn)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function pi(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(c)for(var E=o.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=y,o.childLanes=p,c}function w2(o,c,p){var y=c.pendingProps;switch(e2(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(c),null;case 1:return pi(c),null;case 3:return p=c.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),jl(ts),ve(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(mo(c)?xo(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Xn())),pi(c),null;case 26:return p=c.memoizedState,o===null?(xo(c),p!==null?(pi(c),Jp(c,p)):(pi(c),c.flags&=-16777217)):p?p!==o.memoizedState?(xo(c),pi(c),Jp(c,p)):(pi(c),c.flags&=-16777217):(o.memoizedProps!==y&&xo(c),pi(c),c.flags&=-16777217),null;case 27:Ye(c),p=Bt.current;var E=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==y&&xo(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return pi(c),null}o=lt.current,mo(c)?fb(c):(o=i7(E,y,p),c.stateNode=o,xo(c))}return pi(c),null;case 5:if(Ye(c),p=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==y&&xo(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return pi(c),null}if(o=lt.current,mo(c))fb(c);else{switch(E=aS(Bt.current),o){case 1:o=E.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:o=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":o=E.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":o=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":o=E.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof y.is=="string"?E.createElement("select",{is:y.is}):E.createElement("select"),y.multiple?o.multiple=!0:y.size&&(o.size=y.size);break;default:o=typeof y.is=="string"?E.createElement(p,{is:y.is}):E.createElement(p)}}o[Ji]=c,o[cs]=y;t:for(E=c.child;E!==null;){if(E.tag===5||E.tag===6)o.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===c)break t;for(;E.sibling===null;){if(E.return===null||E.return===c)break t;E=E.return}E.sibling.return=E.return,E=E.sibling}c.stateNode=o;t:switch(Mr(o,p,y),p){case"button":case"input":case"select":case"textarea":o=!!y.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&xo(c)}}return pi(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==y&&xo(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(n(166));if(o=Bt.current,mo(c)){if(o=c.stateNode,p=c.memoizedProps,y=null,E=_r,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}o[Ji]=c,o=!!(o.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||KR(o.nodeValue,p)),o||qc(c)}else o=aS(o).createTextNode(y),o[Ji]=c,c.stateNode=o}return pi(c),null;case 13:if(y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=mo(c),y!==null&&y.dehydrated!==null){if(o===null){if(!E)throw Error(n(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[Ji]=c}else Cf(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;pi(c),E=!1}else E=Xn(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return c.flags&256?(il(c),c):(il(c),null)}if(il(c),(c.flags&128)!==0)return c.lanes=p,c;if(p=y!==null,o=o!==null&&o.memoizedState!==null,p){y=c.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool);var w=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(w=y.memoizedState.cachePool.pool),w!==E&&(y.flags|=2048)}return p!==o&&p&&(c.child.flags|=8192),$l(c,c.updateQueue),pi(c),null;case 4:return ve(),o===null&&iT(c.stateNode.containerInfo),pi(c),null;case 10:return jl(c.type),pi(c),null;case 19:if(xt(Vi),E=c.memoizedState,E===null)return pi(c),null;if(y=(c.flags&128)!==0,w=E.rendering,w===null)if(y)th(E,!1);else{if(xi!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(w=Zl(o),w!==null){for(c.flags|=128,th(E,!1),o=w.updateQueue,c.updateQueue=o,$l(c,o),c.subtreeFlags=0,o=p,p=c.child;p!==null;)$y(p,o),p=p.sibling;return Et(Vi,Vi.current&1|2),c.child}o=o.sibling}E.tail!==null&&Vt()>nr&&(c.flags|=128,y=!0,th(E,!1),c.lanes=4194304)}else{if(!y)if(o=Zl(w),o!==null){if(c.flags|=128,y=!0,o=o.updateQueue,c.updateQueue=o,$l(c,o),th(E,!0),E.tail===null&&E.tailMode==="hidden"&&!w.alternate&&!kn)return pi(c),null}else 2*Vt()-E.renderingStartTime>nr&&p!==536870912&&(c.flags|=128,y=!0,th(E,!1),c.lanes=4194304);E.isBackwards?(w.sibling=c.child,c.child=w):(o=E.last,o!==null?o.sibling=w:c.child=w,E.last=w)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=Vt(),c.sibling=null,o=Vi.current,Et(Vi,y?o&1|2:o&1),c):(pi(c),null);case 22:case 23:return il(c),Vp(),y=c.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(p&536870912)!==0&&(c.flags&128)===0&&(pi(c),c.subtreeFlags&6&&(c.flags|=8192)):pi(c),p=c.updateQueue,p!==null&&$l(c,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048),o!==null&&xt(Ga),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),jl(ts),pi(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function kf(o,c){switch(e2(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return jl(ts),ve(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Ye(c),null;case 13:if(il(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Cf()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return xt(Vi),null;case 4:return ve(),null;case 10:return jl(c.type),null;case 22:case 23:return il(c),Vp(),o!==null&&xt(Ga),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return jl(ts),null;case 25:return null;default:return null}}function Vf(o,c){switch(e2(c),c.tag){case 3:jl(ts),ve();break;case 26:case 27:case 5:Ye(c);break;case 4:ve();break;case 13:il(c);break;case 19:xt(Vi);break;case 10:jl(c.type);break;case 22:case 23:il(c),Vp(),o!==null&&xt(Ga);break;case 24:jl(ts)}}function eh(o,c){try{var p=c.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var E=y.next;p=E;do{if((p.tag&o)===o){y=void 0;var w=p.create,H=p.inst;y=w(),H.destroy=y}p=p.next}while(p!==E)}}catch(j){ut(c,c.return,j)}}function ma(o,c,p){try{var y=c.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var w=E.next;y=w;do{if((y.tag&o)===o){var H=y.inst,j=H.destroy;if(j!==void 0){H.destroy=void 0,E=c;var st=p,St=j;try{St()}catch(zt){ut(E,st,zt)}}}y=y.next}while(y!==w)}}catch(zt){ut(c,c.return,zt)}}function nh(o){var c=o.updateQueue;if(c!==null){var p=o.stateNode;try{mb(c,p)}catch(y){ut(o,o.return,y)}}}function tc(o,c,p){p.props=sl(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(y){ut(o,c,y)}}function ih(o,c){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof p=="function"?o.refCleanup=p(y):p.current=y}}catch(E){ut(o,c,E)}}function al(o,c){var p=o.ref,y=o.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(E){ut(o,c,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){ut(o,c,E)}else p.current=null}function Qf(o){var c=o.type,p=o.memoizedProps,y=o.stateNode;try{t:switch(c){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break t;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(E){ut(o,o.return,E)}}function Zp(o,c,p){try{var y=o.stateNode;pP(y,o.type,p,c),y[cs]=c}catch(E){ut(o,o.return,E)}}function $p(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Jf(o.type)||o.tag===4}function su(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||$p(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Jf(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ru(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(o,c):(c=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,c.appendChild(o),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=rS));else if(y!==4&&(y===27&&Jf(o.type)&&(p=o.stateNode,c=null),o=o.child,o!==null))for(ru(o,c,p),o=o.sibling;o!==null;)ru(o,c,p),o=o.sibling}function au(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(y!==4&&(y===27&&Jf(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(au(o,c,p),o=o.sibling;o!==null;)au(o,c,p),o=o.sibling}function ou(o){var c=o.stateNode,p=o.memoizedProps;try{for(var y=o.type,E=c.attributes;E.length;)c.removeAttributeNode(E[0]);Mr(c,y,p),c[Ji]=o,c[cs]=p}catch(w){ut(o,o.return,w)}}var ol=!1,mi=!1,Xf=!1,ga=typeof WeakSet=="function"?WeakSet:Set,oi=null;function fs(o,c){if(o=o.containerInfo,aT=fS,o=jy(o),Cp(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else t:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,w=y.focusNode;y=y.focusOffset;try{p.nodeType,w.nodeType}catch{p=null;break t}var H=0,j=-1,st=-1,St=0,zt=0,jt=o,Tt=null;e:for(;;){for(var Lt;jt!==p||E!==0&&jt.nodeType!==3||(j=H+E),jt!==w||y!==0&&jt.nodeType!==3||(st=H+y),jt.nodeType===3&&(H+=jt.nodeValue.length),(Lt=jt.firstChild)!==null;)Tt=jt,jt=Lt;for(;;){if(jt===o)break e;if(Tt===p&&++St===E&&(j=H),Tt===w&&++zt===y&&(st=H),(Lt=jt.nextSibling)!==null)break;jt=Tt,Tt=jt.parentNode}jt=Lt}p=j===-1||st===-1?null:{start:j,end:st}}else p=null}p=p||{start:0,end:0}}else p=null;for(oT={focusedElem:o,selectionRange:p},fS=!1,oi=c;oi!==null;)if(c=oi,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,oi=o;else for(;oi!==null;){switch(c=oi,w=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&w!==null){o=void 0,p=c,E=w.memoizedProps,w=w.memoizedState,y=p.stateNode;try{var je=sl(p.type,E,p.elementType===p.type);o=y.getSnapshotBeforeUpdate(je,w),y.__reactInternalSnapshotBeforeUpdate=o}catch(ke){ut(p,p.return,ke)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,p=o.nodeType,p===9)uT(o);else if(p===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":uT(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=c.sibling,o!==null){o.return=c.return,oi=o;break}oi=c.return}}function ec(o,c,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Sr(o,p),y&4&&eh(5,p);break;case 1:if(Sr(o,p),y&4)if(o=p.stateNode,c===null)try{o.componentDidMount()}catch(H){ut(p,p.return,H)}else{var E=sl(p.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(E,c,o.__reactInternalSnapshotBeforeUpdate)}catch(H){ut(p,p.return,H)}}y&64&&nh(p),y&512&&ih(p,p.return);break;case 3:if(Sr(o,p),y&64&&(o=p.updateQueue,o!==null)){if(c=null,p.child!==null)switch(p.child.tag){case 27:case 5:c=p.child.stateNode;break;case 1:c=p.child.stateNode}try{mb(o,c)}catch(H){ut(p,p.return,H)}}break;case 27:c===null&&y&4&&ou(p);case 26:case 5:Sr(o,p),c===null&&y&4&&Qf(p),y&512&&ih(p,p.return);break;case 12:Sr(o,p);break;case 13:Sr(o,p),y&4&&lu(o,p),y&64&&(o=p.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(p=bi.bind(null,p),xP(o,p))));break;case 22:if(y=p.memoizedState!==null||ol,!y){c=c!==null&&c.memoizedState!==null||mi,E=ol;var w=mi;ol=y,(mi=c)&&!w?ll(o,p,(p.subtreeFlags&8772)!==0):Sr(o,p),ol=E,mi=w}break;case 30:break;default:Sr(o,p)}}function ln(o){var c=o.alternate;c!==null&&(o.alternate=null,ln(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&ti(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Pe=null,In=!1;function qa(o,c,p){for(p=p.child;p!==null;)sh(o,c,p),p=p.sibling}function sh(o,c,p){if(ne&&typeof ne.onCommitFiberUnmount=="function")try{ne.onCommitFiberUnmount(Ot,p)}catch{}switch(p.tag){case 26:mi||al(p,c),qa(o,c,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:mi||al(p,c);var y=Pe,E=In;Jf(p.type)&&(Pe=p.stateNode,In=!1),qa(o,c,p),N2(p.stateNode),Pe=y,In=E;break;case 5:mi||al(p,c);case 6:if(y=Pe,E=In,Pe=null,qa(o,c,p),Pe=y,In=E,Pe!==null)if(In)try{(Pe.nodeType===9?Pe.body:Pe.nodeName==="HTML"?Pe.ownerDocument.body:Pe).removeChild(p.stateNode)}catch(w){ut(p,c,w)}else try{Pe.removeChild(p.stateNode)}catch(w){ut(p,c,w)}break;case 18:Pe!==null&&(In?(o=Pe,e7(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,p.stateNode),k2(o)):e7(Pe,p.stateNode));break;case 4:y=Pe,E=In,Pe=p.stateNode.containerInfo,In=!0,qa(o,c,p),Pe=y,In=E;break;case 0:case 11:case 14:case 15:mi||ma(2,p,c),mi||ma(4,p,c),qa(o,c,p);break;case 1:mi||(al(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"&&tc(p,c,y)),qa(o,c,p);break;case 21:qa(o,c,p);break;case 22:mi=(y=mi)||p.memoizedState!==null,qa(o,c,p),mi=y;break;default:qa(o,c,p)}}function lu(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{k2(o)}catch(p){ut(c,c.return,p)}}function Z0(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new ga),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new ga),c;default:throw Error(n(435,o.tag))}}function rh(o,c){var p=Z0(o);c.forEach(function(y){var E=Xe.bind(null,o,y);p.has(y)||(p.add(y),y.then(E,E))})}function Es(o,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y],w=o,H=c,j=H;t:for(;j!==null;){switch(j.tag){case 27:if(Jf(j.type)){Pe=j.stateNode,In=!1;break t}break;case 5:Pe=j.stateNode,In=!1;break t;case 3:case 4:Pe=j.stateNode.containerInfo,In=!0;break t}j=j.return}if(Pe===null)throw Error(n(160));sh(w,H,E),Pe=null,In=!1,w=E.alternate,w!==null&&(w.return=null),E.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)$0(c,o),c=c.sibling}var bo=null;function $0(o,c){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Es(c,o),Ui(o),y&4&&(ma(3,o,o.return),eh(3,o),ma(5,o,o.return));break;case 1:Es(c,o),Ui(o),y&512&&(mi||p===null||al(p,p.return)),y&64&&ol&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var E=bo;if(Es(c,o),Ui(o),y&512&&(mi||p===null||al(p,p.return)),y&4){var w=p!==null?p.memoizedState:null;if(y=o.memoizedState,p===null)if(y===null)if(o.stateNode===null){t:{y=o.type,p=o.memoizedProps,E=E.ownerDocument||E;e:switch(y){case"title":w=E.getElementsByTagName("title")[0],(!w||w[co]||w[Ji]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=E.createElement(y),E.head.insertBefore(w,E.querySelector("head > title"))),Mr(w,y,p),w[Ji]=o,Zi(w),y=w;break t;case"link":var H=c7("link","href",E).get(y+(p.href||""));if(H){for(var j=0;j<H.length;j++)if(w=H[j],w.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&w.getAttribute("rel")===(p.rel==null?null:p.rel)&&w.getAttribute("title")===(p.title==null?null:p.title)&&w.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){H.splice(j,1);break e}}w=E.createElement(y),Mr(w,y,p),E.head.appendChild(w);break;case"meta":if(H=c7("meta","content",E).get(y+(p.content||""))){for(j=0;j<H.length;j++)if(w=H[j],w.getAttribute("content")===(p.content==null?null:""+p.content)&&w.getAttribute("name")===(p.name==null?null:p.name)&&w.getAttribute("property")===(p.property==null?null:p.property)&&w.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&w.getAttribute("charset")===(p.charSet==null?null:p.charSet)){H.splice(j,1);break e}}w=E.createElement(y),Mr(w,y,p),E.head.appendChild(w);break;default:throw Error(n(468,y))}w[Ji]=o,Zi(w),y=w}o.stateNode=y}else u7(E,o.type,o.stateNode);else o.stateNode=l7(E,y,o.memoizedProps);else w!==y?(w===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):w.count--,y===null?u7(E,o.type,o.stateNode):l7(E,y,o.memoizedProps)):y===null&&o.stateNode!==null&&Zp(o,o.memoizedProps,p.memoizedProps)}break;case 27:Es(c,o),Ui(o),y&512&&(mi||p===null||al(p,p.return)),p!==null&&y&4&&Zp(o,o.memoizedProps,p.memoizedProps);break;case 5:if(Es(c,o),Ui(o),y&512&&(mi||p===null||al(p,p.return)),o.flags&32){E=o.stateNode;try{gr(E,"")}catch(Lt){ut(o,o.return,Lt)}}y&4&&o.stateNode!=null&&(E=o.memoizedProps,Zp(o,E,p!==null?p.memoizedProps:E)),y&1024&&(Xf=!0);break;case 6:if(Es(c,o),Ui(o),y&4){if(o.stateNode===null)throw Error(n(162));y=o.memoizedProps,p=o.stateNode;try{p.nodeValue=y}catch(Lt){ut(o,o.return,Lt)}}break;case 3:if(cS=null,E=bo,bo=oS(c.containerInfo),Es(c,o),bo=E,Ui(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{k2(c.containerInfo)}catch(Lt){ut(o,o.return,Lt)}Xf&&(Xf=!1,cu(o));break;case 4:y=bo,bo=oS(o.stateNode.containerInfo),Es(c,o),Ui(o),bo=y;break;case 12:Es(c,o),Ui(o);break;case 13:Es(c,o),Ui(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(ni=Vt()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,rh(o,y)));break;case 22:E=o.memoizedState!==null;var st=p!==null&&p.memoizedState!==null,St=ol,zt=mi;if(ol=St||E,mi=zt||st,Es(c,o),mi=zt,ol=St,Ui(o),y&8192)t:for(c=o.stateNode,c._visibility=E?c._visibility&-2:c._visibility|1,E&&(p===null||st||ol||mi||va(o)),p=null,c=o;;){if(c.tag===5||c.tag===26){if(p===null){st=p=c;try{if(w=st.stateNode,E)H=w.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{j=st.stateNode;var jt=st.memoizedProps.style,Tt=jt!=null&&jt.hasOwnProperty("display")?jt.display:null;j.style.display=Tt==null||typeof Tt=="boolean"?"":(""+Tt).trim()}}catch(Lt){ut(st,st.return,Lt)}}}else if(c.tag===6){if(p===null){st=c;try{st.stateNode.nodeValue=E?"":st.memoizedProps}catch(Lt){ut(st,st.return,Lt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break t;for(;c.sibling===null;){if(c.return===null||c.return===o)break t;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=o.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,rh(o,p))));break;case 19:Es(c,o),Ui(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,rh(o,y)));break;case 30:break;case 21:break;default:Es(c,o),Ui(o)}}function Ui(o){var c=o.flags;if(c&2){try{for(var p,y=o.return;y!==null;){if($p(y)){p=y;break}y=y.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var E=p.stateNode,w=su(o);au(o,w,E);break;case 5:var H=p.stateNode;p.flags&32&&(gr(H,""),p.flags&=-33);var j=su(o);au(o,j,H);break;case 3:case 4:var st=p.stateNode.containerInfo,St=su(o);ru(o,St,st);break;default:throw Error(n(161))}}catch(zt){ut(o,o.return,zt)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function cu(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;cu(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function Sr(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)ec(o,c.alternate,c),c=c.sibling}function va(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:ma(4,c,c.return),va(c);break;case 1:al(c,c.return);var p=c.stateNode;typeof p.componentWillUnmount=="function"&&tc(c,c.return,p),va(c);break;case 27:N2(c.stateNode);case 26:case 5:al(c,c.return),va(c);break;case 22:c.memoizedState===null&&va(c);break;case 30:va(c);break;default:va(c)}o=o.sibling}}function ll(o,c,p){for(p=p&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,E=o,w=c,H=w.flags;switch(w.tag){case 0:case 11:case 15:ll(E,w,p),eh(4,w);break;case 1:if(ll(E,w,p),y=w,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(St){ut(y,y.return,St)}if(y=w,E=y.updateQueue,E!==null){var j=y.stateNode;try{var st=E.shared.hiddenCallbacks;if(st!==null)for(E.shared.hiddenCallbacks=null,E=0;E<st.length;E++)Nf(st[E],j)}catch(St){ut(y,y.return,St)}}p&&H&64&&nh(w),ih(w,w.return);break;case 27:ou(w);case 26:case 5:ll(E,w,p),p&&y===null&&H&4&&Qf(w),ih(w,w.return);break;case 12:ll(E,w,p);break;case 13:ll(E,w,p),p&&H&4&&lu(E,w);break;case 22:w.memoizedState===null&&ll(E,w,p),ih(w,w.return);break;case 30:break;default:ll(E,w,p)}c=c.sibling}}function t1(o,c){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&wf(p))}function e1(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&wf(o))}function li(o,c,p,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)n1(o,c,p,y),c=c.sibling}function n1(o,c,p,y){var E=c.flags;switch(c.tag){case 0:case 11:case 15:li(o,c,p,y),E&2048&&eh(9,c);break;case 1:li(o,c,p,y);break;case 3:li(o,c,p,y),E&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&wf(o)));break;case 12:if(E&2048){li(o,c,p,y),o=c.stateNode;try{var w=c.memoizedProps,H=w.id,j=w.onPostCommit;typeof j=="function"&&j(H,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(st){ut(c,c.return,st)}}else li(o,c,p,y);break;case 13:li(o,c,p,y);break;case 23:break;case 22:w=c.stateNode,H=c.alternate,c.memoizedState!==null?w._visibility&2?li(o,c,p,y):So(o,c):w._visibility&2?li(o,c,p,y):(w._visibility|=2,nc(o,c,p,y,(c.subtreeFlags&10256)!==0)),E&2048&&t1(H,c);break;case 24:li(o,c,p,y),E&2048&&e1(c.alternate,c);break;default:li(o,c,p,y)}}function nc(o,c,p,y,E){for(E=E&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var w=o,H=c,j=p,st=y,St=H.flags;switch(H.tag){case 0:case 11:case 15:nc(w,H,j,st,E),eh(8,H);break;case 23:break;case 22:var zt=H.stateNode;H.memoizedState!==null?zt._visibility&2?nc(w,H,j,st,E):So(w,H):(zt._visibility|=2,nc(w,H,j,st,E)),E&&St&2048&&t1(H.alternate,H);break;case 24:nc(w,H,j,st,E),E&&St&2048&&e1(H.alternate,H);break;default:nc(w,H,j,st,E)}c=c.sibling}}function So(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var p=o,y=c,E=y.flags;switch(y.tag){case 22:So(p,y),E&2048&&t1(y.alternate,y);break;case 24:So(p,y),E&2048&&e1(y.alternate,y);break;default:So(p,y)}c=c.sibling}}var ya=8192;function jf(o){if(o.subtreeFlags&ya)for(o=o.child;o!==null;)eS(o),o=o.sibling}function eS(o){switch(o.tag){case 26:jf(o),o.flags&ya&&o.memoizedState!==null&&NP(bo,o.memoizedState,o.memoizedProps);break;case 5:jf(o);break;case 3:case 4:var c=bo;bo=oS(o.stateNode.containerInfo),jf(o),bo=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=ya,ya=16777216,jf(o),ya=c):jf(o));break;default:jf(o)}}function nS(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function gi(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];oi=y,ul(y,o)}nS(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)R2(o),o=o.sibling}function R2(o){switch(o.tag){case 0:case 11:case 15:gi(o),o.flags&2048&&ma(9,o,o.return);break;case 3:gi(o);break;case 12:gi(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,cl(o)):gi(o);break;default:gi(o)}}function cl(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];oi=y,ul(y,o)}nS(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:ma(8,c,c.return),cl(c);break;case 22:p=c.stateNode,p._visibility&2&&(p._visibility&=-3,cl(c));break;default:cl(c)}o=o.sibling}}function ul(o,c){for(;oi!==null;){var p=oi;switch(p.tag){case 0:case 11:case 15:ma(8,p,c);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:wf(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,oi=y;else t:for(p=o;oi!==null;){y=oi;var E=y.sibling,w=y.return;if(ln(y),y===p){oi=null;break t}if(E!==null){E.return=w,oi=E;break t}oi=w}}}var Pi={getCacheForType:function(o){var c=Ii(ts),p=c.data.get(o);return p===void 0&&(p=o(),c.data.set(o,p)),p}},L2=typeof WeakMap=="function"?WeakMap:Map,jn=0,We=null,mn=null,Ie=0,an=0,Di=null,_a=!1,qf=!1,Yf=!1,Ya=0,xi=0,Eo=0,hl=0,ah=0,Wa=0,Un=0,qn=null,ze=null,Sn=!1,ni=0,nr=1/0,Ka=null,Aa=null,ds=0,ir=null,ci=null,xa=0,ic=0,tm=null,ba=null,fl=0,oh=null;function Fi(){if((jn&2)!==0&&Ie!==0)return Ie&-Ie;if(Q.T!==null){var o=tn;return o!==0?o:$4()}return Cn()}function i1(){Wa===0&&(Wa=(Ie&536870912)===0||kn?mt():536870912);var o=ai.current;return o!==null&&(o.flags|=32),Wa}function Er(o,c,p){(o===We&&(an===2||an===9)||o.cancelPendingCommit!==null)&&(hu(o,0),Mo(o,Ie,Wa,!1)),Qt(o,p),((jn&2)===0||o!==We)&&(o===We&&((jn&2)===0&&(hl|=p),xi===4&&Mo(o,Ie,Wa,!1)),pu(o))}function Wf(o,c,p){if((jn&6)!==0)throw Error(n(327));var y=!p&&(c&124)===0&&(c&o.expiredLanes)===0||He(o,c),E=y?M(o,c):d(o,c,!0),w=y;do{if(E===0){qf&&!y&&Mo(o,c,0,!1);break}else{if(p=o.current.alternate,w&&!uu(p)){E=d(o,c,!1),w=!1;continue}if(E===2){if(w=c,o.errorRecoveryDisabledLanes&w)var H=0;else H=o.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){c=H;t:{var j=o;E=qn;var st=j.current.memoizedState.isDehydrated;if(st&&(hu(j,H).flags|=256),H=d(j,H,!1),H!==2){if(Yf&&!st){j.errorRecoveryDisabledLanes|=w,hl|=w,E=4;break t}w=ze,ze=E,w!==null&&(ze===null?ze=w:ze.push.apply(ze,w))}E=H}if(w=!1,E!==2)continue}}if(E===1){hu(o,0),Mo(o,c,0,!0);break}t:{switch(y=o,w=E,w){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:Mo(y,c,Wa,!_a);break t;case 2:ze=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(E=ni+300-Vt(),10<E)){if(Mo(y,c,Wa,!_a),rn(y,0,!0)!==0)break t;y.timeoutHandle=$R(em.bind(null,y,p,ze,Ka,Sn,c,Wa,hl,Un,_a,w,2,-0,0),E);break t}em(y,p,ze,Ka,Sn,c,Wa,hl,Un,_a,w,0,-0,0)}}break}while(!0);pu(o)}function em(o,c,p,y,E,w,H,j,st,St,zt,jt,Tt,Lt){if(o.timeoutHandle=-1,jt=c.subtreeFlags,(jt&8192||(jt&16785408)===16785408)&&(P2={stylesheets:null,count:0,unsuspend:OP},eS(c),jt=IP(),jt!==null)){o.cancelPendingCommit=jt($t.bind(null,o,c,w,p,y,E,H,j,st,zt,1,Tt,Lt)),Mo(o,w,H,!St);return}$t(o,c,w,p,y,E,H,j,st)}function uu(o){for(var c=o;;){var p=c.tag;if((p===0||p===11||p===15)&&c.flags&16384&&(p=c.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var E=p[y],w=E.getSnapshot;E=E.value;try{if(!Pr(w(),E))return!1}catch{return!1}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Mo(o,c,p,y){c&=~ah,c&=~hl,o.suspendedLanes|=c,o.pingedLanes&=~c,y&&(o.warmLanes|=c),y=o.expirationTimes;for(var E=c;0<E;){var w=31-ge(E),H=1<<w;y[w]=-1,E&=~H}p!==0&&ue(o,p,c)}function dl(){return(jn&6)===0?(D2(0),!1):!0}function lh(){if(mn!==null){if(an===0)var o=mn.return;else o=mn,Xl=Yc=null,f2(o),ju=null,qp=0,o=mn;for(;o!==null;)Vf(o.alternate,o),o=o.return;mn=null}}function hu(o,c){var p=o.timeoutHandle;p!==-1&&(o.timeoutHandle=-1,gP(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),lh(),We=o,mn=p=Gi(o.current,null),Ie=c,an=0,Di=null,_a=!1,qf=He(o,c),Yf=!1,Un=Wa=ah=hl=Eo=xi=0,ze=qn=null,Sn=!1,(c&8)!==0&&(c|=c&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=c;0<y;){var E=31-ge(y),w=1<<E;c|=o[E],y&=~w}return Ya=c,Lp(),p}function s1(o,c){en=null,Q.H=jp,c===zp||c===go?(c=o2(),an=3):c===a2?(c=o2(),an=4):an=c===tS?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Di=c,mn===null&&(xi=1,W0(o,Ps(c,o.current)))}function Kf(){var o=Q.H;return Q.H=jp,o===null?jp:o}function r1(){var o=Q.A;return Q.A=Pi,o}function h(){xi=4,_a||(Ie&4194048)!==Ie&&ai.current!==null||(qf=!0),(Eo&134217727)===0&&(hl&134217727)===0||We===null||Mo(We,Ie,Wa,!1)}function d(o,c,p){var y=jn;jn|=2;var E=Kf(),w=r1();(We!==o||Ie!==c)&&(Ka=null,hu(o,c)),c=!1;var H=xi;t:do try{if(an!==0&&mn!==null){var j=mn,st=Di;switch(an){case 8:lh(),H=6;break t;case 3:case 2:case 9:case 6:ai.current===null&&(c=!0);var St=an;if(an=0,Di=null,rt(o,j,st,St),p&&qf){H=0;break t}break;default:St=an,an=0,Di=null,rt(o,j,st,St)}}A(),H=xi;break}catch(zt){s1(o,zt)}while(!0);return c&&o.shellSuspendCounter++,Xl=Yc=null,jn=y,Q.H=E,Q.A=w,mn===null&&(We=null,Ie=0,Lp()),H}function A(){for(;mn!==null;)O(mn)}function M(o,c){var p=jn;jn|=2;var y=Kf(),E=r1();We!==o||Ie!==c?(Ka=null,nr=Vt()+500,hu(o,c)):qf=He(o,c);t:do try{if(an!==0&&mn!==null){c=mn;var w=Di;e:switch(an){case 1:an=0,Di=null,rt(o,c,w,1);break;case 2:case 9:if(N0(w)){an=0,Di=null,W(c);break}c=function(){an!==2&&an!==9||We!==o||(an=7),pu(o)},w.then(c,c);break t;case 3:an=7;break t;case 4:an=5;break t;case 7:N0(w)?(an=0,Di=null,W(c)):(an=0,Di=null,rt(o,c,w,7));break;case 5:var H=null;switch(mn.tag){case 26:H=mn.memoizedState;case 5:case 27:var j=mn;if(!H||h7(H)){an=0,Di=null;var st=j.sibling;if(st!==null)mn=st;else{var St=j.return;St!==null?(mn=St,At(St)):mn=null}break e}}an=0,Di=null,rt(o,c,w,5);break;case 6:an=0,Di=null,rt(o,c,w,6);break;case 8:lh(),xi=6;break t;default:throw Error(n(462))}}L();break}catch(zt){s1(o,zt)}while(!0);return Xl=Yc=null,Q.H=y,Q.A=E,jn=p,mn!==null?0:(We=null,Ie=0,Lp(),xi)}function L(){for(;mn!==null&&!Kt();)O(mn)}function O(o){var c=$u(o.alternate,o,Ya);o.memoizedProps=o.pendingProps,c===null?At(o):mn=c}function W(o){var c=o,p=c.alternate;switch(c.tag){case 15:case 0:c=da(p,c,c.pendingProps,c.type,void 0,Ie);break;case 11:c=da(p,c,c.pendingProps,c.type.render,c.ref,Ie);break;case 5:f2(c);default:Vf(p,c),c=mn=$y(c,Ya),c=$u(p,c,Ya)}o.memoizedProps=o.pendingProps,c===null?At(o):mn=c}function rt(o,c,p,y){Xl=Yc=null,f2(c),ju=null,qp=0;var E=c.return;try{if(J4(o,E,c,p,Ie)){xi=1,W0(o,Ps(p,o.current)),mn=null;return}}catch(w){if(E!==null)throw mn=E,w;xi=1,W0(o,Ps(p,o.current)),mn=null;return}c.flags&32768?(kn||y===1?o=!0:qf||(Ie&536870912)!==0?o=!1:(_a=o=!0,(y===2||y===9||y===3||y===6)&&(y=ai.current,y!==null&&y.tag===13&&(y.flags|=16384))),Ht(c,o)):At(c)}function At(o){var c=o;do{if((c.flags&32768)!==0){Ht(c,_a);return}o=c.return;var p=w2(c.alternate,c,Ya);if(p!==null){mn=p;return}if(c=c.sibling,c!==null){mn=c;return}mn=c=o}while(c!==null);xi===0&&(xi=5)}function Ht(o,c){do{var p=kf(o.alternate,o);if(p!==null){p.flags&=32767,mn=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!c&&(o=o.sibling,o!==null)){mn=o;return}mn=o=p}while(o!==null);xi=6,mn=null}function $t(o,c,p,y,E,w,H,j,st){o.cancelPendingCommit=null;do fu();while(ds!==0);if((jn&6)!==0)throw Error(n(327));if(c!==null){if(c===o.current)throw Error(n(177));if(w=c.lanes|c.childLanes,w|=M0,fe(o,p,w,H,j,st),o===We&&(mn=We=null,Ie=0),ci=c,ir=o,xa=p,ic=w,tm=E,ba=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Vn($,function(){return du(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=Q.T,Q.T=null,E=tt.p,tt.p=2,H=jn,jn|=4;try{fs(o,c,p)}finally{jn=H,tt.p=E,Q.T=y}}ds=1,de(),ye(),Ke()}}function de(){if(ds===1){ds=0;var o=ir,c=ci,p=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||p){p=Q.T,Q.T=null;var y=tt.p;tt.p=2;var E=jn;jn|=4;try{$0(c,o);var w=oT,H=jy(o.containerInfo),j=w.focusedElem,st=w.selectionRange;if(H!==j&&j&&j.ownerDocument&&Xy(j.ownerDocument.documentElement,j)){if(st!==null&&Cp(j)){var St=st.start,zt=st.end;if(zt===void 0&&(zt=St),"selectionStart"in j)j.selectionStart=St,j.selectionEnd=Math.min(zt,j.value.length);else{var jt=j.ownerDocument||document,Tt=jt&&jt.defaultView||window;if(Tt.getSelection){var Lt=Tt.getSelection(),je=j.textContent.length,ke=Math.min(st.start,je),yi=st.end===void 0?ke:Math.min(st.end,je);!Lt.extend&&ke>yi&&(H=yi,yi=ke,ke=H);var gt=Qy(j,ke),ft=Qy(j,yi);if(gt&&ft&&(Lt.rangeCount!==1||Lt.anchorNode!==gt.node||Lt.anchorOffset!==gt.offset||Lt.focusNode!==ft.node||Lt.focusOffset!==ft.offset)){var bt=jt.createRange();bt.setStart(gt.node,gt.offset),Lt.removeAllRanges(),ke>yi?(Lt.addRange(bt),Lt.extend(ft.node,ft.offset)):(bt.setEnd(ft.node,ft.offset),Lt.addRange(bt))}}}}for(jt=[],Lt=j;Lt=Lt.parentNode;)Lt.nodeType===1&&jt.push({element:Lt,left:Lt.scrollLeft,top:Lt.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<jt.length;j++){var kt=jt[j];kt.element.scrollLeft=kt.left,kt.element.scrollTop=kt.top}}fS=!!aT,oT=aT=null}finally{jn=E,tt.p=y,Q.T=p}}o.current=c,ds=2}}function ye(){if(ds===2){ds=0;var o=ir,c=ci,p=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||p){p=Q.T,Q.T=null;var y=tt.p;tt.p=2;var E=jn;jn|=4;try{ec(o,c.alternate,c)}finally{jn=E,tt.p=y,Q.T=p}}ds=3}}function Ke(){if(ds===4||ds===3){ds=0,Ft();var o=ir,c=ci,p=xa,y=ba;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ds=5:(ds=0,ci=ir=null,Sa(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(Aa=null),Ei(p),c=c.stateNode,ne&&typeof ne.onCommitFiberRoot=="function")try{ne.onCommitFiberRoot(Ot,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=Q.T,E=tt.p,tt.p=2,Q.T=null;try{for(var w=o.onRecoverableError,H=0;H<y.length;H++){var j=y[H];w(j.value,{componentStack:j.stack})}}finally{Q.T=c,tt.p=E}}(xa&3)!==0&&fu(),pu(o),E=o.pendingLanes,(p&4194090)!==0&&(E&42)!==0?o===oh?fl++:(fl=0,oh=o):fl=0,D2(0)}}function Sa(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,wf(c)))}function fu(o){return de(),ye(),Ke(),du()}function du(){if(ds!==5)return!1;var o=ir,c=ic;ic=0;var p=Ei(xa),y=Q.T,E=tt.p;try{tt.p=32>p?32:p,Q.T=null,p=tm,tm=null;var w=ir,H=xa;if(ds=0,ci=ir=null,xa=0,(jn&6)!==0)throw Error(n(331));var j=jn;if(jn|=4,R2(w.current),n1(w,w.current,H,p),jn=j,D2(0,!1),ne&&typeof ne.onPostCommitFiberRoot=="function")try{ne.onPostCommitFiberRoot(Ot,w)}catch{}return!0}finally{tt.p=E,Q.T=y,Sa(o,c)}}function Mt(o,c,p){c=Ps(p,c),c=K0(o.stateNode,c,2),o=Yl(o,c,2),o!==null&&(Qt(o,2),pu(o))}function ut(o,c,p){if(o.tag===3)Mt(o,o,p);else for(;c!==null;){if(c.tag===3){Mt(c,o,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Aa===null||!Aa.has(y))){o=Ps(p,o),p=$b(2),y=Yl(c,p,2),y!==null&&(J0(p,y,c,o),Qt(y,2),pu(y));break}}c=c.return}}function Dt(o,c,p){var y=o.pingCache;if(y===null){y=o.pingCache=new L2;var E=new Set;y.set(c,E)}else E=y.get(c),E===void 0&&(E=new Set,y.set(c,E));E.has(p)||(Yf=!0,E.add(p),o=Zt.bind(null,o,c,p),c.then(o,o))}function Zt(o,c,p){var y=o.pingCache;y!==null&&y.delete(c),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,We===o&&(Ie&p)===p&&(xi===4||xi===3&&(Ie&62914560)===Ie&&300>Vt()-ni?(jn&2)===0&&hu(o,0):ah|=p,Un===Ie&&(Un=0)),pu(o)}function Re(o,c){c===0&&(c=ce()),o=Vl(o,c),o!==null&&(Qt(o,c),pu(o))}function bi(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),Re(o,p)}function Xe(o,c){var p=0;switch(o.tag){case 13:var y=o.stateNode,E=o.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(n(314))}y!==null&&y.delete(c),Re(o,p)}function Vn(o,c){return se(o,c)}var Xi=null,_n=null,pl=!1,a1=!1,Z4=!1,nm=0;function pu(o){o!==_n&&o.next===null&&(_n===null?Xi=_n=o:_n=_n.next=o),a1=!0,pl||(pl=!0,oP())}function D2(o,c){if(!Z4&&a1){Z4=!0;do for(var p=!1,y=Xi;y!==null;){if(o!==0){var E=y.pendingLanes;if(E===0)var w=0;else{var H=y.suspendedLanes,j=y.pingedLanes;w=(1<<31-ge(42|o)+1)-1,w&=E&~(H&~j),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(p=!0,VR(y,w))}else w=Ie,w=rn(y,y===We?w:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(w&3)===0||He(y,w)||(p=!0,VR(y,w));y=y.next}while(p);Z4=!1}}function aP(){zR()}function zR(){a1=pl=!1;var o=0;nm!==0&&(mP()&&(o=nm),nm=0);for(var c=Vt(),p=null,y=Xi;y!==null;){var E=y.next,w=GR(y,c);w===0?(y.next=null,p===null?Xi=E:p.next=E,E===null&&(_n=p)):(p=y,(o!==0||(w&3)!==0)&&(a1=!0)),y=E}D2(o)}function GR(o,c){for(var p=o.suspendedLanes,y=o.pingedLanes,E=o.expirationTimes,w=o.pendingLanes&-62914561;0<w;){var H=31-ge(w),j=1<<H,st=E[H];st===-1?((j&p)===0||(j&y)!==0)&&(E[H]=Gn(j,c)):st<=c&&(o.expiredLanes|=j),w&=~j}if(c=We,p=Ie,p=rn(o,o===c?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,p===0||o===c&&(an===2||an===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&Z(y),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||He(o,p)){if(c=p&-p,c===o.callbackPriority)return c;switch(y!==null&&Z(y),Ei(p)){case 2:case 8:p=qt;break;case 32:p=$;break;case 268435456:p=vt;break;default:p=$}return y=kR.bind(null,o),p=se(p,y),o.callbackPriority=c,o.callbackNode=p,c}return y!==null&&y!==null&&Z(y),o.callbackPriority=2,o.callbackNode=null,2}function kR(o,c){if(ds!==0&&ds!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if(fu()&&o.callbackNode!==p)return null;var y=Ie;return y=rn(o,o===We?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(Wf(o,y,c),GR(o,Vt()),o.callbackNode!=null&&o.callbackNode===p?kR.bind(null,o):null)}function VR(o,c){if(fu())return null;Wf(o,c,!0)}function oP(){vP(function(){(jn&6)!==0?se(be,aP):zR()})}function $4(){return nm===0&&(nm=mt()),nm}function QR(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:pp(""+o)}function XR(o,c){var p=c.ownerDocument.createElement("input");return p.name=c.name,p.value=c.value,o.id&&p.setAttribute("form",o.id),c.parentNode.insertBefore(p,c),o=new FormData(o),p.parentNode.removeChild(p),o}function lP(o,c,p,y,E){if(c==="submit"&&p&&p.stateNode===E){var w=QR((E[cs]||null).action),H=y.submitter;H&&(c=(c=H[cs]||null)?QR(c.formAction):H.getAttribute("formAction"),c!==null&&(w=c,H=null));var j=new mf("action","action",null,y,E);o.push({event:j,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(nm!==0){var st=H?XR(E,H):new FormData(E);E2(p,{pending:!0,data:st,method:E.method,action:w},null,st)}}else typeof w=="function"&&(j.preventDefault(),st=H?XR(E,H):new FormData(E),E2(p,{pending:!0,data:st,method:E.method,action:w},w,st))},currentTarget:E}]})}}for(var tT=0;tT<Rp.length;tT++){var eT=Rp[tT],cP=eT.toLowerCase(),uP=eT[0].toUpperCase()+eT.slice(1);As(cP,"on"+uP)}As(yr,"onAnimationEnd"),As(Wy,"onAnimationIteration"),As(Hr,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(hb,"onTransitionRun"),As(Gl,"onTransitionStart"),As(Sf,"onTransitionCancel"),As(kl,"onTransitionEnd"),q("onMouseEnter",["mouseout","mouseover"]),q("onMouseLeave",["mouseout","mouseover"]),q("onPointerEnter",["pointerout","pointerover"]),q("onPointerLeave",["pointerout","pointerover"]),fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fo("onBeforeInput",["compositionend","keypress","textInput","paste"]),fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var B2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(B2));function jR(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],E=y.event;y=y.listeners;t:{var w=void 0;if(c)for(var H=y.length-1;0<=H;H--){var j=y[H],st=j.instance,St=j.currentTarget;if(j=j.listener,st!==w&&E.isPropagationStopped())break t;w=j,E.currentTarget=St;try{w(E)}catch(zt){Yu(zt)}E.currentTarget=null,w=st}else for(H=0;H<y.length;H++){if(j=y[H],st=j.instance,St=j.currentTarget,j=j.listener,st!==w&&E.isPropagationStopped())break t;w=j,E.currentTarget=St;try{w(E)}catch(zt){Yu(zt)}E.currentTarget=null,w=st}}}}function wn(o,c){var p=c[Ir];p===void 0&&(p=c[Ir]=new Set);var y=o+"__bubble";p.has(y)||(qR(c,o,2,!1),p.add(y))}function nT(o,c,p){var y=0;c&&(y|=4),qR(p,o,y,c)}var iS="_reactListening"+Math.random().toString(36).slice(2);function iT(o){if(!o[iS]){o[iS]=!0,uf.forEach(function(p){p!=="selectionchange"&&(hP.has(p)||nT(p,!1,o),nT(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[iS]||(c[iS]=!0,nT("selectionchange",!1,c))}}function qR(o,c,p,y){switch(v7(c)){case 2:var E=FP;break;case 8:E=HP;break;default:E=vT}p=E.bind(null,c,p,o),E=void 0,!gp||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),y?E!==void 0?o.addEventListener(c,p,{capture:!0,passive:E}):o.addEventListener(c,p,!0):E!==void 0?o.addEventListener(c,p,{passive:E}):o.addEventListener(c,p,!1)}function sT(o,c,p,y,E){var w=y;if((c&1)===0&&(c&2)===0&&y!==null)t:for(;;){if(y===null)return;var H=y.tag;if(H===3||H===4){var j=y.stateNode.containerInfo;if(j===E)break;if(H===4)for(H=y.return;H!==null;){var st=H.tag;if((st===3||st===4)&&H.stateNode.containerInfo===E)return;H=H.return}for(;j!==null;){if(H=uo(j),H===null)return;if(st=H.tag,st===5||st===6||st===26||st===27){y=w=H;continue t}j=j.parentNode}}y=y.return}By(function(){var St=w,zt=f0(p),jt=[];t:{var Tt=E0.get(o);if(Tt!==void 0){var Lt=mf,je=o;switch(o){case"keypress":if(Uc(p)===0)break t;case"keydown":case"keyup":Lt=Py;break;case"focusin":je="focus",Lt=p0;break;case"focusout":je="blur",Lt=p0;break;case"beforeblur":case"afterblur":Lt=p0;break;case"click":if(p.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Lt=Iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Lt=z4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Lt=Hy;break;case yr:case Wy:case Hr:Lt=Kx;break;case kl:Lt=Pl;break;case"scroll":case"scrollend":Lt=qx;break;case"wheel":Lt=G4;break;case"copy":case"cut":case"paste":Lt=Zx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Lt=g0;break;case"toggle":case"beforetoggle":Lt=Fc}var ke=(c&4)!==0,yi=!ke&&(o==="scroll"||o==="scrollend"),gt=ke?Tt!==null?Tt+"Capture":null:Tt;ke=[];for(var ft=St,bt;ft!==null;){var kt=ft;if(bt=kt.stateNode,kt=kt.tag,kt!==5&&kt!==26&&kt!==27||bt===null||gt===null||(kt=ff(ft,gt),kt!=null&&ke.push(O2(ft,kt,bt))),yi)break;ft=ft.return}0<ke.length&&(Tt=new Lt(Tt,je,null,p,zt),jt.push({event:Tt,listeners:ke}))}}if((c&7)===0){t:{if(Tt=o==="mouseover"||o==="pointerover",Lt=o==="mouseout"||o==="pointerout",Tt&&p!==h0&&(je=p.relatedTarget||p.fromElement)&&(uo(je)||je[$s]))break t;if((Lt||Tt)&&(Tt=zt.window===zt?zt:(Tt=zt.ownerDocument)?Tt.defaultView||Tt.parentWindow:window,Lt?(je=p.relatedTarget||p.toElement,Lt=St,je=je?uo(je):null,je!==null&&(yi=r(je),ke=je.tag,je!==yi||ke!==5&&ke!==27&&ke!==6)&&(je=null)):(Lt=null,je=St),Lt!==je)){if(ke=Iy,kt="onMouseLeave",gt="onMouseEnter",ft="mouse",(o==="pointerout"||o==="pointerover")&&(ke=g0,kt="onPointerLeave",gt="onPointerEnter",ft="pointer"),yi=Lt==null?Tt:Nc(Lt),bt=je==null?Tt:Nc(je),Tt=new ke(kt,ft+"leave",Lt,p,zt),Tt.target=yi,Tt.relatedTarget=bt,kt=null,uo(zt)===St&&(ke=new ke(gt,ft+"enter",je,p,zt),ke.target=bt,ke.relatedTarget=yi,kt=ke),yi=kt,Lt&&je)e:{for(ke=Lt,gt=je,ft=0,bt=ke;bt;bt=o1(bt))ft++;for(bt=0,kt=gt;kt;kt=o1(kt))bt++;for(;0<ft-bt;)ke=o1(ke),ft--;for(;0<bt-ft;)gt=o1(gt),bt--;for(;ft--;){if(ke===gt||gt!==null&&ke===gt.alternate)break e;ke=o1(ke),gt=o1(gt)}ke=null}else ke=null;Lt!==null&&YR(jt,Tt,Lt,ke,!1),je!==null&&yi!==null&&YR(jt,yi,je,ke,!0)}}t:{if(Tt=St?Nc(St):window,Lt=Tt.nodeName&&Tt.nodeName.toLowerCase(),Lt==="select"||Lt==="input"&&Tt.type==="file")var Ee=y0;else if(Vy(Tt))if(_0)Ee=Gc;else{Ee=lb;var En=k4}else Lt=Tt.nodeName,!Lt||Lt.toLowerCase()!=="input"||Tt.type!=="checkbox"&&Tt.type!=="radio"?St&&u0(St.elementType)&&(Ee=y0):Ee=Tp;if(Ee&&(Ee=Ee(o,St))){Ur(jt,Ee,p,zt);break t}En&&En(o,Tt,St),o==="focusout"&&St&&Tt.type==="number"&&St.memoizedProps.value!=null&&Os(Tt,"number",Tt.value)}switch(En=St?Nc(St):window,o){case"focusin":(Vy(En)||En.contentEditable==="true")&&(Hl=En,x0=St,wp=null);break;case"focusout":wp=x0=Hl=null;break;case"mousedown":b0=!0;break;case"contextmenu":case"mouseup":case"dragend":b0=!1,Yy(jt,p,zt);break;case"selectionchange":if(qy)break;case"keydown":case"keyup":Yy(jt,p,zt)}var Be;if(Ap)t:{switch(o){case"compositionstart":var Ve="onCompositionStart";break t;case"compositionend":Ve="onCompositionEnd";break t;case"compositionupdate":Ve="onCompositionUpdate";break t}Ve=void 0}else zc?Sp(o,p)&&(Ve="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Ve="onCompositionStart");Ve&&(bp&&p.locale!=="ko"&&(zc||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&zc&&(Be=Ny()):(Il=zt,Oy="value"in Il?Il.value:Il.textContent,zc=!0)),En=sS(St,Ve),0<En.length&&(Ve=new m0(Ve,o,null,p,zt),jt.push({event:Ve,listeners:En}),Be?Ve.data=Be:(Be=Gy(p),Be!==null&&(Ve.data=Be)))),(Be=xp?Ep(o,p):ky(o,p))&&(Ve=sS(St,"onBeforeInput"),0<Ve.length&&(En=new m0("onBeforeInput","beforeinput",null,p,zt),jt.push({event:En,listeners:Ve}),En.data=Be)),lP(jt,o,St,p,zt)}jR(jt,c)})}function O2(o,c,p){return{instance:o,listener:c,currentTarget:p}}function sS(o,c){for(var p=c+"Capture",y=[];o!==null;){var E=o,w=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||w===null||(E=ff(o,p),E!=null&&y.unshift(O2(o,E,w)),E=ff(o,c),E!=null&&y.push(O2(o,E,w))),o.tag===3)return y;o=o.return}return[]}function o1(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function YR(o,c,p,y,E){for(var w=c._reactName,H=[];p!==null&&p!==y;){var j=p,st=j.alternate,St=j.stateNode;if(j=j.tag,st!==null&&st===y)break;j!==5&&j!==26&&j!==27||St===null||(st=St,E?(St=ff(p,w),St!=null&&H.unshift(O2(p,St,st))):E||(St=ff(p,w),St!=null&&H.push(O2(p,St,st)))),p=p.return}H.length!==0&&o.push({event:c,listeners:H})}var fP=/\r\n?/g,dP=/\u0000|\uFFFD/g;function WR(o){return(typeof o=="string"?o:""+o).replace(fP,`
`).replace(dP,"")}function KR(o,c){return c=WR(c),WR(o)===c}function rS(){}function vi(o,c,p,y,E,w){switch(p){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||gr(o,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&gr(o,""+y);break;case"className":ie(o,"class",y);break;case"tabIndex":ie(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":ie(o,p,y);break;case"style":dp(o,y,w);break;case"data":if(c!=="object"){ie(o,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||p!=="href")){o.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=pp(""+y),o.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(p==="formAction"?(c!=="input"&&vi(o,c,"name",E.name,E,null),vi(o,c,"formEncType",E.formEncType,E,null),vi(o,c,"formMethod",E.formMethod,E,null),vi(o,c,"formTarget",E.formTarget,E,null)):(vi(o,c,"encType",E.encType,E,null),vi(o,c,"method",E.method,E,null),vi(o,c,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=pp(""+y),o.setAttribute(p,y);break;case"onClick":y!=null&&(o.onclick=rS);break;case"onScroll":y!=null&&wn("scroll",o);break;case"onScrollEnd":y!=null&&wn("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(n(60));o.innerHTML=p}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}p=pp(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""+y):o.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""):o.removeAttribute(p);break;case"capture":case"download":y===!0?o.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,y):o.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(p,y):o.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(p):o.setAttribute(p,y);break;case"popover":wn("beforetoggle",o),wn("toggle",o),Yt(o,"popover",y);break;case"xlinkActuate":re(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":re(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":re(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":re(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":re(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":re(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":re(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":re(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":re(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Yt(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Ly.get(p)||p,Yt(o,p,y))}}function rT(o,c,p,y,E,w){switch(p){case"style":dp(o,y,w);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(n(60));o.innerHTML=p}}break;case"children":typeof y=="string"?gr(o,y):(typeof y=="number"||typeof y=="bigint")&&gr(o,""+y);break;case"onScroll":y!=null&&wn("scroll",o);break;case"onScrollEnd":y!=null&&wn("scrollend",o);break;case"onClick":y!=null&&(o.onclick=rS);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hf.hasOwnProperty(p))t:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),c=p.slice(2,E?p.length-7:void 0),w=o[cs]||null,w=w!=null?w[p]:null,typeof w=="function"&&o.removeEventListener(c,w,E),typeof y=="function")){typeof w!="function"&&w!==null&&(p in o?o[p]=null:o.hasAttribute(p)&&o.removeAttribute(p)),o.addEventListener(c,y,E);break t}p in o?o[p]=y:y===!0?o.setAttribute(p,""):Yt(o,p,y)}}}function Mr(o,c,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wn("error",o),wn("load",o);var y=!1,E=!1,w;for(w in p)if(p.hasOwnProperty(w)){var H=p[w];if(H!=null)switch(w){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:vi(o,c,w,H,p,null)}}E&&vi(o,c,"srcSet",p.srcSet,p,null),y&&vi(o,c,"src",p.src,p,null);return;case"input":wn("invalid",o);var j=w=H=E=null,st=null,St=null;for(y in p)if(p.hasOwnProperty(y)){var zt=p[y];if(zt!=null)switch(y){case"name":E=zt;break;case"type":H=zt;break;case"checked":st=zt;break;case"defaultChecked":St=zt;break;case"value":w=zt;break;case"defaultValue":j=zt;break;case"children":case"dangerouslySetInnerHTML":if(zt!=null)throw Error(n(137,c));break;default:vi(o,c,y,zt,p,null)}}ei(o,w,j,st,St,H,E,!1),Ri(o);return;case"select":wn("invalid",o),y=H=w=null;for(E in p)if(p.hasOwnProperty(E)&&(j=p[E],j!=null))switch(E){case"value":w=j;break;case"defaultValue":H=j;break;case"multiple":y=j;default:vi(o,c,E,j,p,null)}c=w,p=H,o.multiple=!!y,c!=null?$i(o,!!y,c,!1):p!=null&&$i(o,!!y,p,!0);return;case"textarea":wn("invalid",o),w=E=y=null;for(H in p)if(p.hasOwnProperty(H)&&(j=p[H],j!=null))switch(H){case"value":y=j;break;case"defaultValue":E=j;break;case"children":w=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(n(91));break;default:vi(o,c,H,j,p,null)}_s(o,y,E,w),Ri(o);return;case"option":for(st in p)if(p.hasOwnProperty(st)&&(y=p[st],y!=null))switch(st){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:vi(o,c,st,y,p,null)}return;case"dialog":wn("beforetoggle",o),wn("toggle",o),wn("cancel",o),wn("close",o);break;case"iframe":case"object":wn("load",o);break;case"video":case"audio":for(y=0;y<B2.length;y++)wn(B2[y],o);break;case"image":wn("error",o),wn("load",o);break;case"details":wn("toggle",o);break;case"embed":case"source":case"link":wn("error",o),wn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(St in p)if(p.hasOwnProperty(St)&&(y=p[St],y!=null))switch(St){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:vi(o,c,St,y,p,null)}return;default:if(u0(c)){for(zt in p)p.hasOwnProperty(zt)&&(y=p[zt],y!==void 0&&rT(o,c,zt,y,p,void 0));return}}for(j in p)p.hasOwnProperty(j)&&(y=p[j],y!=null&&vi(o,c,j,y,p,null))}function pP(o,c,p,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,w=null,H=null,j=null,st=null,St=null,zt=null;for(Lt in p){var jt=p[Lt];if(p.hasOwnProperty(Lt)&&jt!=null)switch(Lt){case"checked":break;case"value":break;case"defaultValue":st=jt;default:y.hasOwnProperty(Lt)||vi(o,c,Lt,null,y,jt)}}for(var Tt in y){var Lt=y[Tt];if(jt=p[Tt],y.hasOwnProperty(Tt)&&(Lt!=null||jt!=null))switch(Tt){case"type":w=Lt;break;case"name":E=Lt;break;case"checked":St=Lt;break;case"defaultChecked":zt=Lt;break;case"value":H=Lt;break;case"defaultValue":j=Lt;break;case"children":case"dangerouslySetInnerHTML":if(Lt!=null)throw Error(n(137,c));break;default:Lt!==jt&&vi(o,c,Tt,Lt,y,jt)}}Ko(o,H,j,st,St,zt,w,E);return;case"select":Lt=H=j=Tt=null;for(w in p)if(st=p[w],p.hasOwnProperty(w)&&st!=null)switch(w){case"value":break;case"multiple":Lt=st;default:y.hasOwnProperty(w)||vi(o,c,w,null,y,st)}for(E in y)if(w=y[E],st=p[E],y.hasOwnProperty(E)&&(w!=null||st!=null))switch(E){case"value":Tt=w;break;case"defaultValue":j=w;break;case"multiple":H=w;default:w!==st&&vi(o,c,E,w,y,st)}c=j,p=H,y=Lt,Tt!=null?$i(o,!!p,Tt,!1):!!y!=!!p&&(c!=null?$i(o,!!p,c,!0):$i(o,!!p,p?[]:"",!1));return;case"textarea":Lt=Tt=null;for(j in p)if(E=p[j],p.hasOwnProperty(j)&&E!=null&&!y.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:vi(o,c,j,null,y,E)}for(H in y)if(E=y[H],w=p[H],y.hasOwnProperty(H)&&(E!=null||w!=null))switch(H){case"value":Tt=E;break;case"defaultValue":Lt=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(n(91));break;default:E!==w&&vi(o,c,H,E,y,w)}ys(o,Tt,Lt);return;case"option":for(var je in p)if(Tt=p[je],p.hasOwnProperty(je)&&Tt!=null&&!y.hasOwnProperty(je))switch(je){case"selected":o.selected=!1;break;default:vi(o,c,je,null,y,Tt)}for(st in y)if(Tt=y[st],Lt=p[st],y.hasOwnProperty(st)&&Tt!==Lt&&(Tt!=null||Lt!=null))switch(st){case"selected":o.selected=Tt&&typeof Tt!="function"&&typeof Tt!="symbol";break;default:vi(o,c,st,Tt,y,Lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in p)Tt=p[ke],p.hasOwnProperty(ke)&&Tt!=null&&!y.hasOwnProperty(ke)&&vi(o,c,ke,null,y,Tt);for(St in y)if(Tt=y[St],Lt=p[St],y.hasOwnProperty(St)&&Tt!==Lt&&(Tt!=null||Lt!=null))switch(St){case"children":case"dangerouslySetInnerHTML":if(Tt!=null)throw Error(n(137,c));break;default:vi(o,c,St,Tt,y,Lt)}return;default:if(u0(c)){for(var yi in p)Tt=p[yi],p.hasOwnProperty(yi)&&Tt!==void 0&&!y.hasOwnProperty(yi)&&rT(o,c,yi,void 0,y,Tt);for(zt in y)Tt=y[zt],Lt=p[zt],!y.hasOwnProperty(zt)||Tt===Lt||Tt===void 0&&Lt===void 0||rT(o,c,zt,Tt,y,Lt);return}}for(var gt in p)Tt=p[gt],p.hasOwnProperty(gt)&&Tt!=null&&!y.hasOwnProperty(gt)&&vi(o,c,gt,null,y,Tt);for(jt in y)Tt=y[jt],Lt=p[jt],!y.hasOwnProperty(jt)||Tt===Lt||Tt==null&&Lt==null||vi(o,c,jt,Tt,y,Lt)}var aT=null,oT=null;function aS(o){return o.nodeType===9?o:o.ownerDocument}function JR(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ZR(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function lT(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var cT=null;function mP(){var o=window.event;return o&&o.type==="popstate"?o===cT?!1:(cT=o,!0):(cT=null,!1)}var $R=typeof setTimeout=="function"?setTimeout:void 0,gP=typeof clearTimeout=="function"?clearTimeout:void 0,t7=typeof Promise=="function"?Promise:void 0,vP=typeof queueMicrotask=="function"?queueMicrotask:typeof t7<"u"?function(o){return t7.resolve(null).then(o).catch(yP)}:$R;function yP(o){setTimeout(function(){throw o})}function Jf(o){return o==="head"}function e7(o,c){var p=c,y=0,E=0;do{var w=p.nextSibling;if(o.removeChild(p),w&&w.nodeType===8)if(p=w.data,p==="/$"){if(0<y&&8>y){p=y;var H=o.ownerDocument;if(p&1&&N2(H.documentElement),p&2&&N2(H.body),p&4)for(p=H.head,N2(p),H=p.firstChild;H;){var j=H.nextSibling,st=H.nodeName;H[co]||st==="SCRIPT"||st==="STYLE"||st==="LINK"&&H.rel.toLowerCase()==="stylesheet"||p.removeChild(H),H=j}}if(E===0){o.removeChild(w),k2(c);return}E--}else p==="$"||p==="$?"||p==="$!"?E++:y=p.charCodeAt(0)-48;else y=0;p=w}while(p);k2(c)}function uT(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var p=c;switch(c=c.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":uT(p),ti(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}o.removeChild(p)}}function _P(o,c,p,y){for(;o.nodeType===1;){var E=p;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[co])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(w=o.getAttribute("rel"),w==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(w!==E.rel||o.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(w=o.getAttribute("src"),(w!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&w&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var w=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===w)return o}else return o;if(o=sc(o.nextSibling),o===null)break}return null}function AP(o,c,p){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!p||(o=sc(o.nextSibling),o===null))return null;return o}function hT(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function xP(o,c){var p=o.ownerDocument;if(o.data!=="$?"||p.readyState==="complete")c();else{var y=function(){c(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function sc(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var fT=null;function n7(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}function i7(o,c,p){switch(c=aS(p),o){case"html":if(o=c.documentElement,!o)throw Error(n(452));return o;case"head":if(o=c.head,!o)throw Error(n(453));return o;case"body":if(o=c.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function N2(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);ti(o)}var ml=new Map,s7=new Set;function oS(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ch=tt.d;tt.d={f:bP,r:SP,D:EP,C:MP,L:TP,m:CP,X:RP,S:wP,M:LP};function bP(){var o=ch.f(),c=dl();return o||c}function SP(o){var c=ho(o);c!==null&&c.tag===5&&c.type==="form"?zb(c):ch.r(o)}var l1=typeof document>"u"?null:document;function r7(o,c,p){var y=l1;if(y&&typeof c=="string"&&c){var E=ri(c);E='link[rel="'+o+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),s7.has(E)||(s7.add(E),o={rel:o,crossOrigin:p,href:c},y.querySelector(E)===null&&(c=y.createElement("link"),Mr(c,"link",o),Zi(c),y.head.appendChild(c)))}}function EP(o){ch.D(o),r7("dns-prefetch",o,null)}function MP(o,c){ch.C(o,c),r7("preconnect",o,c)}function TP(o,c,p){ch.L(o,c,p);var y=l1;if(y&&o&&c){var E='link[rel="preload"][as="'+ri(c)+'"]';c==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+ri(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+ri(p.imageSizes)+'"]')):E+='[href="'+ri(o)+'"]';var w=E;switch(c){case"style":w=c1(o);break;case"script":w=u1(o)}ml.has(w)||(o=m({rel:"preload",href:c==="image"&&p&&p.imageSrcSet?void 0:o,as:c},p),ml.set(w,o),y.querySelector(E)!==null||c==="style"&&y.querySelector(I2(w))||c==="script"&&y.querySelector(U2(w))||(c=y.createElement("link"),Mr(c,"link",o),Zi(c),y.head.appendChild(c)))}}function CP(o,c){ch.m(o,c);var p=l1;if(p&&o){var y=c&&typeof c.as=="string"?c.as:"script",E='link[rel="modulepreload"][as="'+ri(y)+'"][href="'+ri(o)+'"]',w=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=u1(o)}if(!ml.has(w)&&(o=m({rel:"modulepreload",href:o},c),ml.set(w,o),p.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(U2(w)))return}y=p.createElement("link"),Mr(y,"link",o),Zi(y),p.head.appendChild(y)}}}function wP(o,c,p){ch.S(o,c,p);var y=l1;if(y&&o){var E=Nl(y).hoistableStyles,w=c1(o);c=c||"default";var H=E.get(w);if(!H){var j={loading:0,preload:null};if(H=y.querySelector(I2(w)))j.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":c},p),(p=ml.get(w))&&dT(o,p);var st=H=y.createElement("link");Zi(st),Mr(st,"link",o),st._p=new Promise(function(St,zt){st.onload=St,st.onerror=zt}),st.addEventListener("load",function(){j.loading|=1}),st.addEventListener("error",function(){j.loading|=2}),j.loading|=4,lS(H,c,y)}H={type:"stylesheet",instance:H,count:1,state:j},E.set(w,H)}}}function RP(o,c){ch.X(o,c);var p=l1;if(p&&o){var y=Nl(p).hoistableScripts,E=u1(o),w=y.get(E);w||(w=p.querySelector(U2(E)),w||(o=m({src:o,async:!0},c),(c=ml.get(E))&&pT(o,c),w=p.createElement("script"),Zi(w),Mr(w,"link",o),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(E,w))}}function LP(o,c){ch.M(o,c);var p=l1;if(p&&o){var y=Nl(p).hoistableScripts,E=u1(o),w=y.get(E);w||(w=p.querySelector(U2(E)),w||(o=m({src:o,async:!0,type:"module"},c),(c=ml.get(E))&&pT(o,c),w=p.createElement("script"),Zi(w),Mr(w,"link",o),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(E,w))}}function a7(o,c,p,y){var E=(E=Bt.current)?oS(E):null;if(!E)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(c=c1(p.href),p=Nl(E).hoistableStyles,y=p.get(c),y||(y={type:"style",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){o=c1(p.href);var w=Nl(E).hoistableStyles,H=w.get(o);if(H||(E=E.ownerDocument||E,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(o,H),(w=E.querySelector(I2(o)))&&!w._p&&(H.instance=w,H.state.loading=5),ml.has(o)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},ml.set(o,p),w||DP(E,o,p,H.state))),c&&y===null)throw Error(n(528,""));return H}if(c&&y!==null)throw Error(n(529,""));return null;case"script":return c=p.async,p=p.src,typeof p=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=u1(p),p=Nl(E).hoistableScripts,y=p.get(c),y||(y={type:"script",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function c1(o){return'href="'+ri(o)+'"'}function I2(o){return'link[rel="stylesheet"]['+o+"]"}function o7(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function DP(o,c,p,y){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=o.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),Mr(c,"link",p),Zi(c),o.head.appendChild(c))}function u1(o){return'[src="'+ri(o)+'"]'}function U2(o){return"script[async]"+o}function l7(o,c,p){if(c.count++,c.instance===null)switch(c.type){case"style":var y=o.querySelector('style[data-href~="'+ri(p.href)+'"]');if(y)return c.instance=y,Zi(y),y;var E=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),Zi(y),Mr(y,"style",E),lS(y,p.precedence,o),c.instance=y;case"stylesheet":E=c1(p.href);var w=o.querySelector(I2(E));if(w)return c.state.loading|=4,c.instance=w,Zi(w),w;y=o7(p),(E=ml.get(E))&&dT(y,E),w=(o.ownerDocument||o).createElement("link"),Zi(w);var H=w;return H._p=new Promise(function(j,st){H.onload=j,H.onerror=st}),Mr(w,"link",y),c.state.loading|=4,lS(w,p.precedence,o),c.instance=w;case"script":return w=u1(p.src),(E=o.querySelector(U2(w)))?(c.instance=E,Zi(E),E):(y=p,(E=ml.get(w))&&(y=m({},p),pT(y,E)),o=o.ownerDocument||o,E=o.createElement("script"),Zi(E),Mr(E,"link",y),o.head.appendChild(E),c.instance=E);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,lS(y,p.precedence,o));return c.instance}function lS(o,c,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,w=E,H=0;H<y.length;H++){var j=y[H];if(j.dataset.precedence===c)w=j;else if(w!==E)break}w?w.parentNode.insertBefore(o,w.nextSibling):(c=p.nodeType===9?p.head:p,c.insertBefore(o,c.firstChild))}function dT(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function pT(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var cS=null;function c7(o,c,p){if(cS===null){var y=new Map,E=cS=new Map;E.set(p,y)}else E=cS,y=E.get(p),y||(y=new Map,E.set(p,y));if(y.has(o))return y;for(y.set(o,null),p=p.getElementsByTagName(o),E=0;E<p.length;E++){var w=p[E];if(!(w[co]||w[Ji]||o==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var H=w.getAttribute(c)||"";H=o+H;var j=y.get(H);j?j.push(w):y.set(H,[w])}}return y}function u7(o,c,p){o=o.ownerDocument||o,o.head.insertBefore(p,c==="title"?o.querySelector("head > title"):null)}function BP(o,c,p){if(p===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function h7(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var P2=null;function OP(){}function NP(o,c,p){if(P2===null)throw Error(n(475));var y=P2;if(c.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=c1(p.href),w=o.querySelector(I2(E));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(y.count++,y=uS.bind(y),o.then(y,y)),c.state.loading|=4,c.instance=w,Zi(w);return}w=o.ownerDocument||o,p=o7(p),(E=ml.get(E))&&dT(p,E),w=w.createElement("link"),Zi(w);var H=w;H._p=new Promise(function(j,st){H.onload=j,H.onerror=st}),Mr(w,"link",p),c.instance=w}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(y.count++,c=uS.bind(y),o.addEventListener("load",c),o.addEventListener("error",c))}}function IP(){if(P2===null)throw Error(n(475));var o=P2;return o.stylesheets&&o.count===0&&mT(o,o.stylesheets),0<o.count?function(c){var p=setTimeout(function(){if(o.stylesheets&&mT(o,o.stylesheets),o.unsuspend){var y=o.unsuspend;o.unsuspend=null,y()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(p)}}:null}function uS(){if(this.count--,this.count===0){if(this.stylesheets)mT(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var hS=null;function mT(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,hS=new Map,c.forEach(UP,o),hS=null,uS.call(o))}function UP(o,c){if(!(c.state.loading&4)){var p=hS.get(o);if(p)var y=p.get(null);else{p=new Map,hS.set(o,p);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<E.length;w++){var H=E[w];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(p.set(H.dataset.precedence,H),y=H)}y&&p.set(null,y)}E=c.instance,H=E.getAttribute("data-precedence"),w=p.get(H)||y,w===y&&p.set(null,E),p.set(H,E),this.count++,y=uS.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),w?w.parentNode.insertBefore(E,w.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),c.state.loading|=4}}var F2={$$typeof:B,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function PP(o,c,p,y,E,w,H,j){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=w,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function f7(o,c,p,y,E,w,H,j,st,St,zt,jt){return o=new PP(o,c,p,H,j,st,St,jt),c=1,w===!0&&(c|=24),w=zr(3,null,null,c),o.current=w,w.stateNode=o,c=D0(),c.refCount++,o.pooledCache=c,c.refCount++,w.memoizedState={element:y,isDehydrated:p,cache:c},l2(w),o}function d7(o){return o?(o=Qc,o):Qc}function p7(o,c,p,y,E,w){E=d7(E),y.context===null?y.context=E:y.pendingContext=E,y=nl(c),y.payload={element:p},w=w===void 0?null:w,w!==null&&(y.callback=w),p=Yl(o,y,c),p!==null&&(Er(p,o,c),Xu(p,o,c))}function m7(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function gT(o,c){m7(o,c),(o=o.alternate)&&m7(o,c)}function g7(o){if(o.tag===13){var c=Vl(o,67108864);c!==null&&Er(c,o,67108864),gT(o,67108864)}}var fS=!0;function FP(o,c,p,y){var E=Q.T;Q.T=null;var w=tt.p;try{tt.p=2,vT(o,c,p,y)}finally{tt.p=w,Q.T=E}}function HP(o,c,p,y){var E=Q.T;Q.T=null;var w=tt.p;try{tt.p=8,vT(o,c,p,y)}finally{tt.p=w,Q.T=E}}function vT(o,c,p,y){if(fS){var E=yT(y);if(E===null)sT(o,c,y,dS,p),y7(o,y);else if(GP(E,o,c,p,y))y.stopPropagation();else if(y7(o,y),c&4&&-1<zP.indexOf(o)){for(;E!==null;){var w=ho(E);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var H=le(w.pendingLanes);if(H!==0){var j=w;for(j.pendingLanes|=2,j.entangledLanes|=2;H;){var st=1<<31-ge(H);j.entanglements[1]|=st,H&=~st}pu(w),(jn&6)===0&&(nr=Vt()+500,D2(0))}}break;case 13:j=Vl(w,2),j!==null&&Er(j,w,2),dl(),gT(w,2)}if(w=yT(y),w===null&&sT(o,c,y,dS,p),w===E)break;E=w}E!==null&&y.stopPropagation()}else sT(o,c,y,null,p)}}function yT(o){return o=f0(o),_T(o)}var dS=null;function _T(o){if(dS=null,o=uo(o),o!==null){var c=r(o);if(c===null)o=null;else{var p=c.tag;if(p===13){if(o=a(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return dS=o,null}function v7(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gt()){case be:return 2;case qt:return 8;case $:case V:return 32;case vt:return 268435456;default:return 32}default:return 32}}var AT=!1,Zf=null,$f=null,td=null,H2=new Map,z2=new Map,ed=[],zP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function y7(o,c){switch(o){case"focusin":case"focusout":Zf=null;break;case"dragenter":case"dragleave":$f=null;break;case"mouseover":case"mouseout":td=null;break;case"pointerover":case"pointerout":H2.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":z2.delete(c.pointerId)}}function G2(o,c,p,y,E,w){return o===null||o.nativeEvent!==w?(o={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:w,targetContainers:[E]},c!==null&&(c=ho(c),c!==null&&g7(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),o)}function GP(o,c,p,y,E){switch(c){case"focusin":return Zf=G2(Zf,o,c,p,y,E),!0;case"dragenter":return $f=G2($f,o,c,p,y,E),!0;case"mouseover":return td=G2(td,o,c,p,y,E),!0;case"pointerover":var w=E.pointerId;return H2.set(w,G2(H2.get(w)||null,o,c,p,y,E)),!0;case"gotpointercapture":return w=E.pointerId,z2.set(w,G2(z2.get(w)||null,o,c,p,y,E)),!0}return!1}function _7(o){var c=uo(o.target);if(c!==null){var p=r(c);if(p!==null){if(c=p.tag,c===13){if(c=a(p),c!==null){o.blockedOn=c,Nr(o.priority,function(){if(p.tag===13){var y=Fi();y=Jn(y);var E=Vl(p,y);E!==null&&Er(E,p,y),gT(p,y)}});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function pS(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=yT(o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);h0=y,p.target.dispatchEvent(y),h0=null}else return c=ho(p),c!==null&&g7(c),o.blockedOn=p,!1;c.shift()}return!0}function A7(o,c,p){pS(o)&&p.delete(c)}function kP(){AT=!1,Zf!==null&&pS(Zf)&&(Zf=null),$f!==null&&pS($f)&&($f=null),td!==null&&pS(td)&&(td=null),H2.forEach(A7),z2.forEach(A7)}function mS(o,c){o.blockedOn===c&&(o.blockedOn=null,AT||(AT=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,kP)))}var gS=null;function x7(o){gS!==o&&(gS=o,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){gS===o&&(gS=null);for(var c=0;c<o.length;c+=3){var p=o[c],y=o[c+1],E=o[c+2];if(typeof y!="function"){if(_T(y||p)===null)continue;break}var w=ho(p);w!==null&&(o.splice(c,3),c-=3,E2(w,{pending:!0,data:E,method:p.method,action:y},y,E))}}))}function k2(o){function c(st){return mS(st,o)}Zf!==null&&mS(Zf,o),$f!==null&&mS($f,o),td!==null&&mS(td,o),H2.forEach(c),z2.forEach(c);for(var p=0;p<ed.length;p++){var y=ed[p];y.blockedOn===o&&(y.blockedOn=null)}for(;0<ed.length&&(p=ed[0],p.blockedOn===null);)_7(p),p.blockedOn===null&&ed.shift();if(p=(o.ownerDocument||o).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var E=p[y],w=p[y+1],H=E[cs]||null;if(typeof w=="function")H||x7(p);else if(H){var j=null;if(w&&w.hasAttribute("formAction")){if(E=w,H=w[cs]||null)j=H.formAction;else if(_T(E)!==null)continue}else j=H.action;typeof j=="function"?p[y+1]=j:(p.splice(y,3),y-=3),x7(p)}}}function xT(o){this._internalRoot=o}vS.prototype.render=xT.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));var p=c.current,y=Fi();p7(p,y,o,c,null,null)},vS.prototype.unmount=xT.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;p7(o.current,2,null,o,null,null),dl(),c[$s]=null}};function vS(o){this._internalRoot=o}vS.prototype.unstable_scheduleHydration=function(o){if(o){var c=Cn();o={blockedOn:null,target:o,priority:c};for(var p=0;p<ed.length&&c!==0&&c<ed[p].priority;p++);ed.splice(p,0,o),p===0&&_7(o)}};var b7=t.version;if(b7!=="19.1.0")throw Error(n(527,b7,"19.1.0"));tt.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=u(c),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var VP={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yS.isDisabled&&yS.supportsFiber)try{Ot=yS.inject(VP),ne=yS}catch{}}return Q2.createRoot=function(o,c){if(!i(o))throw Error(n(299));var p=!1,y="",E=Wp,w=Y0,H=Zb,j=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(E=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(H=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(j=c.unstable_transitionCallbacks)),c=f7(o,1,!1,null,null,p,y,E,w,H,j,null),o[$s]=c.current,iT(o),new xT(c)},Q2.hydrateRoot=function(o,c,p){if(!i(o))throw Error(n(299));var y=!1,E="",w=Wp,H=Y0,j=Zb,st=null,St=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(w=p.onUncaughtError),p.onCaughtError!==void 0&&(H=p.onCaughtError),p.onRecoverableError!==void 0&&(j=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(st=p.unstable_transitionCallbacks),p.formState!==void 0&&(St=p.formState)),c=f7(o,1,!0,c,p??null,y,E,w,H,j,st,St),c.context=d7(null),p=c.current,y=Fi(),y=Jn(y),E=nl(y),E.callback=null,Yl(p,E,y),p=y,c.current.lanes=p,Qt(c,p),pu(c),o[$s]=c.current,iT(o),new vS(c)},Q2.version="19.1.0",Q2}var O7;function tF(){if(O7)return MT.exports;O7=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),MT.exports=$P(),MT.exports}var eF=tF(),dr=function(){return dr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},dr.apply(this,arguments)};function ty(s,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,r;n<i;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return s.concat(r||Array.prototype.slice.call(t))}var Bi="-ms-",L_="-moz-",ii="-webkit-",uB="comm",U3="rule",c5="decl",nF="@import",hB="@keyframes",iF="@layer",fB=Math.abs,u5=String.fromCharCode,s8=Object.assign;function sF(s,t){return fr(s,0)^45?(((t<<2^fr(s,0))<<2^fr(s,1))<<2^fr(s,2))<<2^fr(s,3):0}function dB(s){return s.trim()}function Ah(s,t){return(s=t.exec(s))?s[0]:s}function gn(s,t,e){return s.replace(t,e)}function ME(s,t,e){return s.indexOf(t,e)}function fr(s,t){return s.charCodeAt(t)|0}function ey(s,t,e){return s.slice(t,e)}function Uu(s){return s.length}function pB(s){return s.length}function c_(s,t){return t.push(s),s}function rF(s,t){return s.map(t).join("")}function N7(s,t){return s.filter(function(e){return!Ah(e,t)})}var P3=1,ny=1,mB=0,Ll=0,ws=0,_y="";function F3(s,t,e,n,i,r,a,l){return{value:s,root:t,parent:e,type:n,props:i,children:r,line:P3,column:ny,length:a,return:"",siblings:l}}function fd(s,t){return s8(F3("",null,null,"",null,null,0,s.siblings),s,{length:-s.length},t)}function h1(s){for(;s.root;)s=fd(s.root,{children:[s]});c_(s,s.siblings)}function aF(){return ws}function oF(){return ws=Ll>0?fr(_y,--Ll):0,ny--,ws===10&&(ny=1,P3--),ws}function Rc(){return ws=Ll<mB?fr(_y,Ll++):0,ny++,ws===10&&(ny=1,P3++),ws}function Dg(){return fr(_y,Ll)}function TE(){return Ll}function H3(s,t){return ey(_y,s,t)}function r8(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function lF(s){return P3=ny=1,mB=Uu(_y=s),Ll=0,[]}function cF(s){return _y="",s}function RT(s){return dB(H3(Ll-1,a8(s===91?s+2:s===40?s+1:s)))}function uF(s){for(;(ws=Dg())&&ws<33;)Rc();return r8(s)>2||r8(ws)>3?"":" "}function hF(s,t){for(;--t&&Rc()&&!(ws<48||ws>102||ws>57&&ws<65||ws>70&&ws<97););return H3(s,TE()+(t<6&&Dg()==32&&Rc()==32))}function a8(s){for(;Rc();)switch(ws){case s:return Ll;case 34:case 39:s!==34&&s!==39&&a8(ws);break;case 40:s===41&&a8(s);break;case 92:Rc();break}return Ll}function fF(s,t){for(;Rc()&&s+ws!==57;)if(s+ws===84&&Dg()===47)break;return"/*"+H3(t,Ll-1)+"*"+u5(s===47?s:Rc())}function dF(s){for(;!r8(Dg());)Rc();return H3(s,Ll)}function pF(s){return cF(CE("",null,null,null,[""],s=lF(s),0,[0],s))}function CE(s,t,e,n,i,r,a,l,u){for(var f=0,m=0,g=a,v=0,_=0,b=0,C=1,T=1,S=1,R=0,B="",D=i,N=r,I=n,F=B;T;)switch(b=R,R=Rc()){case 40:if(b!=108&&fr(F,g-1)==58){ME(F+=gn(RT(R),"&","&\f"),"&\f",fB(f?l[f-1]:0))!=-1&&(S=-1);break}case 34:case 39:case 91:F+=RT(R);break;case 9:case 10:case 13:case 32:F+=uF(b);break;case 92:F+=hF(TE()-1,7);continue;case 47:switch(Dg()){case 42:case 47:c_(mF(fF(Rc(),TE()),t,e,u),u);break;default:F+="/"}break;case 123*C:l[f++]=Uu(F)*S;case 125*C:case 59:case 0:switch(R){case 0:case 125:T=0;case 59+m:S==-1&&(F=gn(F,/\f/g,"")),_>0&&Uu(F)-g&&c_(_>32?U7(F+";",n,e,g-1,u):U7(gn(F," ","")+";",n,e,g-2,u),u);break;case 59:F+=";";default:if(c_(I=I7(F,t,e,f,m,i,l,B,D=[],N=[],g,r),r),R===123)if(m===0)CE(F,t,I,I,D,r,g,l,N);else switch(v===99&&fr(F,3)===110?100:v){case 100:case 108:case 109:case 115:CE(s,I,I,n&&c_(I7(s,I,I,0,0,i,l,B,i,D=[],g,N),N),i,N,g,l,n?D:N);break;default:CE(F,I,I,I,[""],N,0,l,N)}}f=m=_=0,C=S=1,B=F="",g=a;break;case 58:g=1+Uu(F),_=b;default:if(C<1){if(R==123)--C;else if(R==125&&C++==0&&oF()==125)continue}switch(F+=u5(R),R*C){case 38:S=m>0?1:(F+="\f",-1);break;case 44:l[f++]=(Uu(F)-1)*S,S=1;break;case 64:Dg()===45&&(F+=RT(Rc())),v=Dg(),m=g=Uu(B=F+=dF(TE())),R++;break;case 45:b===45&&Uu(F)==2&&(C=0)}}return r}function I7(s,t,e,n,i,r,a,l,u,f,m,g){for(var v=i-1,_=i===0?r:[""],b=pB(_),C=0,T=0,S=0;C<n;++C)for(var R=0,B=ey(s,v+1,v=fB(T=a[C])),D=s;R<b;++R)(D=dB(T>0?_[R]+" "+B:gn(B,/&\f/g,_[R])))&&(u[S++]=D);return F3(s,t,e,i===0?U3:l,u,f,m,g)}function mF(s,t,e,n){return F3(s,t,e,uB,u5(aF()),ey(s,2,-2),0,n)}function U7(s,t,e,n,i){return F3(s,t,e,c5,ey(s,0,n),ey(s,n+1,-1),n,i)}function gB(s,t,e){switch(sF(s,t)){case 5103:return ii+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ii+s+s;case 4789:return L_+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return ii+s+L_+s+Bi+s+s;case 5936:switch(fr(s,t+11)){case 114:return ii+s+Bi+gn(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return ii+s+Bi+gn(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return ii+s+Bi+gn(s,/[svh]\w+-[tblr]{2}/,"lr")+s}case 6828:case 4268:case 2903:return ii+s+Bi+s+s;case 6165:return ii+s+Bi+"flex-"+s+s;case 5187:return ii+s+gn(s,/(\w+).+(:[^]+)/,ii+"box-$1$2"+Bi+"flex-$1$2")+s;case 5443:return ii+s+Bi+"flex-item-"+gn(s,/flex-|-self/g,"")+(Ah(s,/flex-|baseline/)?"":Bi+"grid-row-"+gn(s,/flex-|-self/g,""))+s;case 4675:return ii+s+Bi+"flex-line-pack"+gn(s,/align-content|flex-|-self/g,"")+s;case 5548:return ii+s+Bi+gn(s,"shrink","negative")+s;case 5292:return ii+s+Bi+gn(s,"basis","preferred-size")+s;case 6060:return ii+"box-"+gn(s,"-grow","")+ii+s+Bi+gn(s,"grow","positive")+s;case 4554:return ii+gn(s,/([^-])(transform)/g,"$1"+ii+"$2")+s;case 6187:return gn(gn(gn(s,/(zoom-|grab)/,ii+"$1"),/(image-set)/,ii+"$1"),s,"")+s;case 5495:case 3959:return gn(s,/(image-set\([^]*)/,ii+"$1$`$1");case 4968:return gn(gn(s,/(.+:)(flex-)?(.*)/,ii+"box-pack:$3"+Bi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ii+s+s;case 4200:if(!Ah(s,/flex-|baseline/))return Bi+"grid-column-align"+ey(s,t)+s;break;case 2592:case 3360:return Bi+gn(s,"template-","")+s;case 4384:case 3616:return e&&e.some(function(n,i){return t=i,Ah(n.props,/grid-\w+-end/)})?~ME(s+(e=e[t].value),"span",0)?s:Bi+gn(s,"-start","")+s+Bi+"grid-row-span:"+(~ME(e,"span",0)?Ah(e,/\d+/):+Ah(e,/\d+/)-+Ah(s,/\d+/))+";":Bi+gn(s,"-start","")+s;case 4896:case 4128:return e&&e.some(function(n){return Ah(n.props,/grid-\w+-start/)})?s:Bi+gn(gn(s,"-end","-span"),"span ","")+s;case 4095:case 3583:case 4068:case 2532:return gn(s,/(.+)-inline(.+)/,ii+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Uu(s)-1-t>6)switch(fr(s,t+1)){case 109:if(fr(s,t+4)!==45)break;case 102:return gn(s,/(.+:)(.+)-([^]+)/,"$1"+ii+"$2-$3$1"+L_+(fr(s,t+3)==108?"$3":"$2-$3"))+s;case 115:return~ME(s,"stretch",0)?gB(gn(s,"stretch","fill-available"),t,e)+s:s}break;case 5152:case 5920:return gn(s,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,i,r,a,l,u,f){return Bi+i+":"+r+f+(a?Bi+i+"-span:"+(l?u:+u-+r)+f:"")+s});case 4949:if(fr(s,t+6)===121)return gn(s,":",":"+ii)+s;break;case 6444:switch(fr(s,fr(s,14)===45?18:11)){case 120:return gn(s,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ii+(fr(s,14)===45?"inline-":"")+"box$3$1"+ii+"$2$3$1"+Bi+"$2box$3")+s;case 100:return gn(s,":",":"+Bi)+s}break;case 5719:case 2647:case 2135:case 3927:case 2391:return gn(s,"scroll-","scroll-snap-")+s}return s}function fM(s,t){for(var e="",n=0;n<s.length;n++)e+=t(s[n],n,s,t)||"";return e}function gF(s,t,e,n){switch(s.type){case iF:if(s.children.length)break;case nF:case c5:return s.return=s.return||s.value;case uB:return"";case hB:return s.return=s.value+"{"+fM(s.children,n)+"}";case U3:if(!Uu(s.value=s.props.join(",")))return""}return Uu(e=fM(s.children,n))?s.return=s.value+"{"+e+"}":""}function vF(s){var t=pB(s);return function(e,n,i,r){for(var a="",l=0;l<t;l++)a+=s[l](e,n,i,r)||"";return a}}function yF(s){return function(t){t.root||(t=t.return)&&s(t)}}function _F(s,t,e,n){if(s.length>-1&&!s.return)switch(s.type){case c5:s.return=gB(s.value,s.length,e);return;case hB:return fM([fd(s,{value:gn(s.value,"@","@"+ii)})],n);case U3:if(s.length)return rF(e=s.props,function(i){switch(Ah(i,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":h1(fd(s,{props:[gn(i,/:(read-\w+)/,":"+L_+"$1")]})),h1(fd(s,{props:[i]})),s8(s,{props:N7(e,n)});break;case"::placeholder":h1(fd(s,{props:[gn(i,/:(plac\w+)/,":"+ii+"input-$1")]})),h1(fd(s,{props:[gn(i,/:(plac\w+)/,":"+L_+"$1")]})),h1(fd(s,{props:[gn(i,/:(plac\w+)/,Bi+"input-$1")]})),h1(fd(s,{props:[i]})),s8(s,{props:N7(e,n)});break}return""})}}var AF={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ro={},iy=typeof process<"u"&&Ro!==void 0&&(Ro.REACT_APP_SC_ATTR||Ro.SC_ATTR)||"data-styled",vB="active",yB="data-styled-version",z3="6.1.17",h5=`/*!sc*/
`,dM=typeof window<"u"&&"HTMLElement"in window,xF=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Ro!==void 0&&Ro.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Ro.REACT_APP_SC_DISABLE_SPEEDY!==""?Ro.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Ro.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Ro!==void 0&&Ro.SC_DISABLE_SPEEDY!==void 0&&Ro.SC_DISABLE_SPEEDY!==""&&Ro.SC_DISABLE_SPEEDY!=="false"&&Ro.SC_DISABLE_SPEEDY),bF={},G3=Object.freeze([]),sy=Object.freeze({});function _B(s,t,e){return e===void 0&&(e=sy),s.theme!==e.theme&&s.theme||t||e.theme}var AB=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),SF=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,EF=/(^-|-$)/g;function P7(s){return s.replace(SF,"-").replace(EF,"")}var MF=/(a)(d)/gi,_S=52,F7=function(s){return String.fromCharCode(s+(s>25?39:97))};function o8(s){var t,e="";for(t=Math.abs(s);t>_S;t=t/_S|0)e=F7(t%_S)+e;return(F7(t%_S)+e).replace(MF,"$1-$2")}var LT,xB=5381,Q1=function(s,t){for(var e=t.length;e;)s=33*s^t.charCodeAt(--e);return s},bB=function(s){return Q1(xB,s)};function f5(s){return o8(bB(s)>>>0)}function TF(s){return s.displayName||s.name||"Component"}function DT(s){return typeof s=="string"&&!0}var SB=typeof Symbol=="function"&&Symbol.for,EB=SB?Symbol.for("react.memo"):60115,CF=SB?Symbol.for("react.forward_ref"):60112,wF={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},RF={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},MB={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},LF=((LT={})[CF]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},LT[EB]=MB,LT);function H7(s){return("type"in(t=s)&&t.type.$$typeof)===EB?MB:"$$typeof"in s?LF[s.$$typeof]:wF;var t}var DF=Object.defineProperty,BF=Object.getOwnPropertyNames,z7=Object.getOwnPropertySymbols,OF=Object.getOwnPropertyDescriptor,NF=Object.getPrototypeOf,G7=Object.prototype;function TB(s,t,e){if(typeof t!="string"){if(G7){var n=NF(t);n&&n!==G7&&TB(s,n,e)}var i=BF(t);z7&&(i=i.concat(z7(t)));for(var r=H7(s),a=H7(t),l=0;l<i.length;++l){var u=i[l];if(!(u in RF||e&&e[u]||a&&u in a||r&&u in r)){var f=OF(t,u);try{DF(s,u,f)}catch{}}}}return s}function Ig(s){return typeof s=="function"}function d5(s){return typeof s=="object"&&"styledComponentId"in s}function wm(s,t){return s&&t?"".concat(s," ").concat(t):s||t||""}function pM(s,t){if(s.length===0)return"";for(var e=s[0],n=1;n<s.length;n++)e+=s[n];return e}function X_(s){return s!==null&&typeof s=="object"&&s.constructor.name===Object.name&&!("props"in s&&s.$$typeof)}function l8(s,t,e){if(e===void 0&&(e=!1),!e&&!X_(s)&&!Array.isArray(s))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)s[n]=l8(s[n],t[n]);else if(X_(t))for(var n in t)s[n]=l8(s[n],t[n]);return s}function p5(s,t){Object.defineProperty(s,"toString",{value:t})}function Jd(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(s," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var IF=function(){function s(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return s.prototype.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},s.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,r=i;t>=r;)if((r<<=1)<0)throw Jd(16,"".concat(t));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var a=i;a<r;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(t+1),u=(a=0,e.length);a<u;a++)this.tag.insertRule(l,e[a])&&(this.groupSizes[t]++,l++)},s.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),i=n+e;this.groupSizes[t]=0;for(var r=n;r<i;r++)this.tag.deleteRule(n)}},s.prototype.getGroup=function(t){var e="";if(t>=this.length||this.groupSizes[t]===0)return e;for(var n=this.groupSizes[t],i=this.indexOfGroup(t),r=i+n,a=i;a<r;a++)e+="".concat(this.tag.getRule(a)).concat(h5);return e},s}(),wE=new Map,mM=new Map,RE=1,AS=function(s){if(wE.has(s))return wE.get(s);for(;mM.has(RE);)RE++;var t=RE++;return wE.set(s,t),mM.set(t,s),t},UF=function(s,t){RE=t+1,wE.set(s,t),mM.set(t,s)},PF="style[".concat(iy,"][").concat(yB,'="').concat(z3,'"]'),FF=new RegExp("^".concat(iy,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),HF=function(s,t,e){for(var n,i=e.split(","),r=0,a=i.length;r<a;r++)(n=i[r])&&s.registerName(t,n)},zF=function(s,t){for(var e,n=((e=t.textContent)!==null&&e!==void 0?e:"").split(h5),i=[],r=0,a=n.length;r<a;r++){var l=n[r].trim();if(l){var u=l.match(FF);if(u){var f=0|parseInt(u[1],10),m=u[2];f!==0&&(UF(m,f),HF(s,m,u[3]),s.getTag().insertRules(f,i)),i.length=0}else i.push(l)}}},k7=function(s){for(var t=document.querySelectorAll(PF),e=0,n=t.length;e<n;e++){var i=t[e];i&&i.getAttribute(iy)!==vB&&(zF(s,i),i.parentNode&&i.parentNode.removeChild(i))}};function GF(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var CB=function(s){var t=document.head,e=s||t,n=document.createElement("style"),i=function(l){var u=Array.from(l.querySelectorAll("style[".concat(iy,"]")));return u[u.length-1]}(e),r=i!==void 0?i.nextSibling:null;n.setAttribute(iy,vB),n.setAttribute(yB,z3);var a=GF();return a&&n.setAttribute("nonce",a),e.insertBefore(n,r),n},kF=function(){function s(t){this.element=CB(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,i=0,r=n.length;i<r;i++){var a=n[i];if(a.ownerNode===e)return a}throw Jd(17)}(this.element),this.length=0}return s.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch{return!1}},s.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},s.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},s}(),VF=function(){function s(t){this.element=CB(t),this.nodes=this.element.childNodes,this.length=0}return s.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},s.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},s.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},s}(),QF=function(){function s(t){this.rules=[],this.length=0}return s.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},s.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},s.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},s}(),V7=dM,XF={isServer:!dM,useCSSOMInjection:!xF},gM=function(){function s(t,e,n){t===void 0&&(t=sy),e===void 0&&(e={});var i=this;this.options=dr(dr({},XF),t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&dM&&V7&&(V7=!1,k7(this)),p5(this,function(){return function(r){for(var a=r.getTag(),l=a.length,u="",f=function(g){var v=function(S){return mM.get(S)}(g);if(v===void 0)return"continue";var _=r.names.get(v),b=a.getGroup(g);if(_===void 0||!_.size||b.length===0)return"continue";var C="".concat(iy,".g").concat(g,'[id="').concat(v,'"]'),T="";_!==void 0&&_.forEach(function(S){S.length>0&&(T+="".concat(S,","))}),u+="".concat(b).concat(C,'{content:"').concat(T,'"}').concat(h5)},m=0;m<l;m++)f(m);return u}(i)})}return s.registerId=function(t){return AS(t)},s.prototype.rehydrate=function(){!this.server&&dM&&k7(this)},s.prototype.reconstructWithOptions=function(t,e){return e===void 0&&(e=!0),new s(dr(dr({},this.options),t),this.gs,e&&this.names||void 0)},s.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},s.prototype.getTag=function(){return this.tag||(this.tag=(t=function(e){var n=e.useCSSOMInjection,i=e.target;return e.isServer?new QF(i):n?new kF(i):new VF(i)}(this.options),new IF(t)));var t},s.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},s.prototype.registerName=function(t,e){if(AS(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},s.prototype.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(AS(t),n)},s.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},s.prototype.clearRules=function(t){this.getTag().clearGroup(AS(t)),this.clearNames(t)},s.prototype.clearTag=function(){this.tag=void 0},s}(),jF=/&/g,qF=/^\s*\/\/.*$/gm;function wB(s,t){return s.map(function(e){return e.type==="rule"&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(e.children)&&e.type!=="@keyframes"&&(e.children=wB(e.children,t)),e})}function YF(s){var t,e,n,i=sy,r=i.options,a=r===void 0?sy:r,l=i.plugins,u=l===void 0?G3:l,f=function(v,_,b){return b.startsWith(e)&&b.endsWith(e)&&b.replaceAll(e,"").length>0?".".concat(t):v},m=u.slice();m.push(function(v){v.type===U3&&v.value.includes("&")&&(v.props[0]=v.props[0].replace(jF,e).replace(n,f))}),a.prefix&&m.push(_F),m.push(gF);var g=function(v,_,b,C){_===void 0&&(_=""),b===void 0&&(b=""),C===void 0&&(C="&"),t=C,e=_,n=new RegExp("\\".concat(e,"\\b"),"g");var T=v.replace(qF,""),S=pF(b||_?"".concat(b," ").concat(_," { ").concat(T," }"):T);a.namespace&&(S=wB(S,a.namespace));var R=[];return fM(S,vF(m.concat(yF(function(B){return R.push(B)})))),R};return g.hash=u.length?u.reduce(function(v,_){return _.name||Jd(15),Q1(v,_.name)},xB).toString():"",g}var WF=new gM,c8=YF(),RB=Oa.createContext({shouldForwardProp:void 0,styleSheet:WF,stylis:c8});RB.Consumer;Oa.createContext(void 0);function u8(){return ht.useContext(RB)}var LB=function(){function s(t,e){var n=this;this.inject=function(i,r){r===void 0&&(r=c8);var a=n.name+r.hash;i.hasNameForId(n.id,a)||i.insertRules(n.id,a,r(n.rules,a,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,p5(this,function(){throw Jd(12,String(n.name))})}return s.prototype.getName=function(t){return t===void 0&&(t=c8),this.name+t.hash},s}(),KF=function(s){return s>="A"&&s<="Z"};function Q7(s){for(var t="",e=0;e<s.length;e++){var n=s[e];if(e===1&&n==="-"&&s[0]==="-")return s;KF(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var DB=function(s){return s==null||s===!1||s===""},BB=function(s){var t,e,n=[];for(var i in s){var r=s[i];s.hasOwnProperty(i)&&!DB(r)&&(Array.isArray(r)&&r.isCss||Ig(r)?n.push("".concat(Q7(i),":"),r,";"):X_(r)?n.push.apply(n,ty(ty(["".concat(i," {")],BB(r),!1),["}"],!1)):n.push("".concat(Q7(i),": ").concat((t=i,(e=r)==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||t in AF||t.startsWith("--")?String(e).trim():"".concat(e,"px")),";")))}return n};function Yd(s,t,e,n){if(DB(s))return[];if(d5(s))return[".".concat(s.styledComponentId)];if(Ig(s)){if(!Ig(r=s)||r.prototype&&r.prototype.isReactComponent||!t)return[s];var i=s(t);return Yd(i,t,e,n)}var r;return s instanceof LB?e?(s.inject(e,n),[s.getName(n)]):[s]:X_(s)?BB(s):Array.isArray(s)?Array.prototype.concat.apply(G3,s.map(function(a){return Yd(a,t,e,n)})):[s.toString()]}function OB(s){for(var t=0;t<s.length;t+=1){var e=s[t];if(Ig(e)&&!d5(e))return!1}return!0}var JF=bB(z3),ZF=function(){function s(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&OB(t),this.componentId=e,this.baseHash=Q1(JF,e),this.baseStyle=n,gM.registerId(e)}return s.prototype.generateAndInjectStyles=function(t,e,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))i=wm(i,this.staticRulesId);else{var r=pM(Yd(this.rules,t,e,n)),a=o8(Q1(this.baseHash,r)>>>0);if(!e.hasNameForId(this.componentId,a)){var l=n(r,".".concat(a),void 0,this.componentId);e.insertRules(this.componentId,a,l)}i=wm(i,a),this.staticRulesId=a}else{for(var u=Q1(this.baseHash,n.hash),f="",m=0;m<this.rules.length;m++){var g=this.rules[m];if(typeof g=="string")f+=g;else if(g){var v=pM(Yd(g,t,e,n));u=Q1(u,v+m),f+=v}}if(f){var _=o8(u>>>0);e.hasNameForId(this.componentId,_)||e.insertRules(this.componentId,_,n(f,".".concat(_),void 0,this.componentId)),i=wm(i,_)}}return i},s}(),ry=Oa.createContext(void 0);ry.Consumer;function m5(){var s=ht.useContext(ry);if(!s)throw Jd(18);return s}function $F(s){var t=Oa.useContext(ry),e=ht.useMemo(function(){return function(n,i){if(!n)throw Jd(14);if(Ig(n)){var r=n(i);return r}if(Array.isArray(n)||typeof n!="object")throw Jd(8);return i?dr(dr({},i),n):n}(s.theme,t)},[s.theme,t]);return s.children?Oa.createElement(ry.Provider,{value:e},s.children):null}var BT={};function tH(s,t,e){var n=d5(s),i=s,r=!DT(s),a=t.attrs,l=a===void 0?G3:a,u=t.componentId,f=u===void 0?function(D,N){var I=typeof D!="string"?"sc":P7(D);BT[I]=(BT[I]||0)+1;var F="".concat(I,"-").concat(f5(z3+I+BT[I]));return N?"".concat(N,"-").concat(F):F}(t.displayName,t.parentComponentId):u,m=t.displayName,g=m===void 0?function(D){return DT(D)?"styled.".concat(D):"Styled(".concat(TF(D),")")}(s):m,v=t.displayName&&t.componentId?"".concat(P7(t.displayName),"-").concat(t.componentId):t.componentId||f,_=n&&i.attrs?i.attrs.concat(l).filter(Boolean):l,b=t.shouldForwardProp;if(n&&i.shouldForwardProp){var C=i.shouldForwardProp;if(t.shouldForwardProp){var T=t.shouldForwardProp;b=function(D,N){return C(D,N)&&T(D,N)}}else b=C}var S=new ZF(e,v,n?i.componentStyle:void 0);function R(D,N){return function(I,F,z){var U=I.attrs,P=I.componentStyle,X=I.defaultProps,ot=I.foldedComponentIds,it=I.styledComponentId,ct=I.target,dt=Oa.useContext(ry),Q=u8(),tt=I.shouldForwardProp||Q.shouldForwardProp,et=_B(F,dt,X)||sy,_t=function(wt,Bt,Ut){for(var Wt,ve=dr(dr({},Bt),{className:void 0,theme:Ut}),ee=0;ee<wt.length;ee+=1){var Ye=Ig(Wt=wt[ee])?Wt(ve):Wt;for(var we in Ye)ve[we]=we==="className"?wm(ve[we],Ye[we]):we==="style"?dr(dr({},ve[we]),Ye[we]):Ye[we]}return Bt.className&&(ve.className=wm(ve.className,Bt.className)),ve}(U,F,et),K=_t.as||ct,at={};for(var xt in _t)_t[xt]===void 0||xt[0]==="$"||xt==="as"||xt==="theme"&&_t.theme===et||(xt==="forwardedAs"?at.as=_t.forwardedAs:tt&&!tt(xt,K)||(at[xt]=_t[xt]));var Et=function(wt,Bt){var Ut=u8(),Wt=wt.generateAndInjectStyles(Bt,Ut.styleSheet,Ut.stylis);return Wt}(P,_t),lt=wm(ot,it);return Et&&(lt+=" "+Et),_t.className&&(lt+=" "+_t.className),at[DT(K)&&!AB.has(K)?"class":"className"]=lt,z&&(at.ref=z),ht.createElement(K,at)}(B,D,N)}R.displayName=g;var B=Oa.forwardRef(R);return B.attrs=_,B.componentStyle=S,B.displayName=g,B.shouldForwardProp=b,B.foldedComponentIds=n?wm(i.foldedComponentIds,i.styledComponentId):"",B.styledComponentId=v,B.target=n?i.target:s,Object.defineProperty(B,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(D){this._foldedDefaultProps=n?function(N){for(var I=[],F=1;F<arguments.length;F++)I[F-1]=arguments[F];for(var z=0,U=I;z<U.length;z++)l8(N,U[z],!0);return N}({},i.defaultProps,D):D}}),p5(B,function(){return".".concat(B.styledComponentId)}),r&&TB(B,s,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),B}function X7(s,t){for(var e=[s[0]],n=0,i=t.length;n<i;n+=1)e.push(t[n],s[n+1]);return e}var j7=function(s){return Object.assign(s,{isCss:!0})};function j_(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Ig(s)||X_(s))return j7(Yd(X7(G3,ty([s],t,!0))));var n=s;return t.length===0&&n.length===1&&typeof n[0]=="string"?Yd(n):j7(Yd(X7(n,t)))}function h8(s,t,e){if(e===void 0&&(e=sy),!t)throw Jd(1,t);var n=function(i){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return s(t,e,j_.apply(void 0,ty([i],r,!1)))};return n.attrs=function(i){return h8(s,t,dr(dr({},e),{attrs:Array.prototype.concat(e.attrs,i).filter(Boolean)}))},n.withConfig=function(i){return h8(s,t,dr(dr({},e),i))},n}var NB=function(s){return h8(tH,s)},he=NB;AB.forEach(function(s){he[s]=NB(s)});var eH=function(){function s(t,e){this.rules=t,this.componentId=e,this.isStatic=OB(t),gM.registerId(this.componentId+1)}return s.prototype.createStyles=function(t,e,n,i){var r=i(pM(Yd(this.rules,e,n,i)),""),a=this.componentId+t;n.insertRules(a,a,r)},s.prototype.removeStyles=function(t,e){e.clearRules(this.componentId+t)},s.prototype.renderStyles=function(t,e,n,i){t>2&&gM.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,i)},s}();function nH(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=j_.apply(void 0,ty([s],t,!1)),i="sc-global-".concat(f5(JSON.stringify(n))),r=new eH(n,i),a=function(u){var f=u8(),m=Oa.useContext(ry),g=Oa.useRef(f.styleSheet.allocateGSInstance(i)).current;return f.styleSheet.server&&l(g,u,f.styleSheet,m,f.stylis),Oa.useLayoutEffect(function(){if(!f.styleSheet.server)return l(g,u,f.styleSheet,m,f.stylis),function(){return r.removeStyles(g,f.styleSheet)}},[g,u,f.styleSheet,m,f.stylis]),null};function l(u,f,m,g,v){if(r.isStatic)r.renderStyles(u,bF,m,v);else{var _=dr(dr({},f),{theme:_B(f,g,a.defaultProps)});r.renderStyles(u,_,m,v)}}return Oa.memo(a)}function Ay(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=pM(j_.apply(void 0,ty([s],t,!1))),i=f5(n);return new LB(i,n)}const iH=Ay`
    from {
      text-shadow: 0.5px 0 0 #ea36af, -1px 0 0 #75fa69;
    }
    to {
      text-shadow: 1px 0.5px 1px #ea36af, -0.5px -0.5px 1px #75fa69;
    }
`,sH=nH`
  :root {
    --white-color: #F8F8FF;
  }

  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    animation-duration: 0.01s;
    animation-name: ${iH};
    animation-iteration-count: infinite;
    animation-direction: alternate;
  }

  html {
    font-size: clamp(12px, 0.75vw + 0.5rem, 26px);
    cursor: url("cursor/Arrow1.cur"), auto;
  }

  html, body {
    user-select: none; 
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: ${({theme:s})=>s.fontFamily};
    letter-spacing: 0.1em;
    line-height: 1.5;
    color: ${({theme:s})=>s.pallet.textColor};
    background-color: ${({theme:s})=>s.pallet.mainColor};
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    letter-spacing: -0.5px;
  }

  img, picture, video, svg {
    display: block;
    max-width: 100%;
  }

  canvas {4
    min-width: 100vw;
    min-height: 100vh;
  }

  input, button, textarea, select {
    font: inherit;
  }

  input:hover, textarea:hover {
    caret-color: ${({theme:s})=>s.pallet.textColor};
    cursor: url("cursor/Win95ZBlinkCur.cur"), auto;
  }

  button {
    background: none;
    border: none;
  }

  a {
    text-decoration: none;
    color: inherit;
  }
`,rH=he.div`
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;

  &::before {
    content: "";
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.1),
      rgba(0, 0, 0, 0.1) 1px,
      transparent 2px,
      transparent 4px
    );
    pointer-events: none;
    mix-blend-mode: overlay;
  }

  &::after {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
      ellipse at center,
      rgba(0, 0, 0, 0) 60%,
      rgba(0, 0, 0, 0.4) 100%
    );
    pointer-events: none;
    mix-blend-mode: multiply;
  }
`,aH=he.div`
  opacity: ${({bootDone:s})=>s?1:0};
  transition: opacity 2s ease-in-out;
  pointerevents: ${({bootDone:s})=>s?"auto":"none"};
`;var OT={exports:{}},NT={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q7;function oH(){if(q7)return NT;q7=1;var s=t0();function t(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var e=typeof Object.is=="function"?Object.is:t,n=s.useSyncExternalStore,i=s.useRef,r=s.useEffect,a=s.useMemo,l=s.useDebugValue;return NT.useSyncExternalStoreWithSelector=function(u,f,m,g,v){var _=i(null);if(_.current===null){var b={hasValue:!1,value:null};_.current=b}else b=_.current;_=a(function(){function T(N){if(!S){if(S=!0,R=N,N=g(N),v!==void 0&&b.hasValue){var I=b.value;if(v(I,N))return B=I}return B=N}if(I=B,e(R,N))return I;var F=g(N);return v!==void 0&&v(I,F)?(R=N,I):(R=N,B=F)}var S=!1,R,B,D=m===void 0?null:m;return[function(){return T(f())},D===null?void 0:function(){return T(D())}]},[f,m,g,v]);var C=n(u,_[0],_[1]);return r(function(){b.hasValue=!0,b.value=C},[C]),l(C),C},NT}var Y7;function lH(){return Y7||(Y7=1,OT.exports=oH()),OT.exports}var cH=lH();function uH(s){s()}function hH(){let s=null,t=null;return{clear(){s=null,t=null},notify(){uH(()=>{let e=s;for(;e;)e.callback(),e=e.next})},get(){const e=[];let n=s;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let n=!0;const i=t={callback:e,next:null,prev:t};return i.prev?i.prev.next=i:s=i,function(){!n||s===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:s=i.next)}}}}var W7={notify(){},get:()=>[]};function fH(s,t){let e,n=W7,i=0,r=!1;function a(C){m();const T=n.subscribe(C);let S=!1;return()=>{S||(S=!0,T(),g())}}function l(){n.notify()}function u(){b.onStateChange&&b.onStateChange()}function f(){return r}function m(){i++,e||(e=s.subscribe(u),n=hH())}function g(){i--,e&&i===0&&(e(),e=void 0,n.clear(),n=W7)}function v(){r||(r=!0,m())}function _(){r&&(r=!1,g())}const b={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:f,trySubscribe:v,tryUnsubscribe:_,getListeners:()=>n};return b}var dH=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pH=dH(),mH=()=>typeof navigator<"u"&&navigator.product==="ReactNative",gH=mH(),vH=()=>pH||gH?ht.useLayoutEffect:ht.useEffect,yH=vH(),IT=Symbol.for("react-redux-context"),UT=typeof globalThis<"u"?globalThis:{};function _H(){if(!ht.createContext)return{};const s=UT[IT]??(UT[IT]=new Map);let t=s.get(ht.createContext);return t||(t=ht.createContext(null),s.set(ht.createContext,t)),t}var Zd=_H();function AH(s){const{children:t,context:e,serverState:n,store:i}=s,r=ht.useMemo(()=>{const u=fH(i);return{store:i,subscription:u,getServerState:n?()=>n:void 0}},[i,n]),a=ht.useMemo(()=>i.getState(),[i]);yH(()=>{const{subscription:u}=r;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[r,a]);const l=e||Zd;return ht.createElement(l.Provider,{value:r},t)}var xH=AH;function g5(s=Zd){return function(){return ht.useContext(s)}}var IB=g5();function UB(s=Zd){const t=s===Zd?IB:g5(s),e=()=>{const{store:n}=t();return n};return Object.assign(e,{withTypes:()=>e}),e}var PB=UB();function bH(s=Zd){const t=s===Zd?PB:UB(s),e=()=>t().dispatch;return Object.assign(e,{withTypes:()=>e}),e}var SH=bH(),EH=(s,t)=>s===t;function MH(s=Zd){const t=s===Zd?IB:g5(s),e=(n,i={})=>{const{equalityFn:r=EH}=typeof i=="function"?{equalityFn:i}:i,a=t(),{store:l,subscription:u,getServerState:f}=a;ht.useRef(!0);const m=ht.useCallback({[n.name](v){return n(v)}}[n.name],[n]),g=cH.useSyncExternalStoreWithSelector(u.addNestedSub,l.getState,f||l.getState,m,r);return ht.useDebugValue(g),g};return Object.assign(e,{withTypes:()=>e}),e}var TH=MH();const xy=SH.withTypes(),v5=TH.withTypes();PB.withTypes();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const e0="176",CH={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},wH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},FB=0,f8=1,HB=2,RH=3,zB=0,k3=1,D_=2,cc=3,Dc=0,qs=1,Da=2,ra=0,Bg=1,d8=2,p8=3,m8=4,GB=5,gd=100,kB=101,VB=102,QB=103,XB=104,jB=200,qB=201,YB=202,WB=203,vM=204,yM=205,KB=206,JB=207,ZB=208,$B=209,t9=210,e9=211,n9=212,i9=213,s9=214,_M=0,AM=1,xM=2,Ug=3,bM=4,SM=5,EM=6,MM=7,Mx=0,r9=1,a9=2,Lc=0,o9=1,l9=2,c9=3,y5=4,u9=5,h9=6,f9=7,g8="attached",d9="detached",V3=300,rf=301,$d=302,q_=303,Y_=304,by=306,tp=1e3,zo=1001,ay=1002,os=1003,Q3=1004,LH=1004,Rm=1005,DH=1005,Ni=1006,W1=1007,BH=1007,Cl=1008,OH=1008,Ws=1009,_5=1010,A5=1011,oy=1012,X3=1013,Hu=1014,Na=1015,n0=1016,j3=1017,q3=1018,Pg=1020,x5=35902,b5=1021,S5=1022,na=1023,ly=1026,Fg=1027,Y3=1028,Tx=1029,E5=1030,W3=1031,NH=1032,K3=1033,B_=33776,O_=33777,N_=33778,I_=33779,TM=35840,CM=35841,wM=35842,RM=35843,LM=36196,DM=37492,BM=37496,OM=37808,NM=37809,IM=37810,UM=37811,PM=37812,FM=37813,HM=37814,zM=37815,GM=37816,kM=37817,VM=37818,QM=37819,XM=37820,jM=37821,U_=36492,qM=36494,YM=36495,M5=36283,WM=36284,KM=36285,JM=36286,p9=2200,m9=2201,g9=2202,cy=2300,uy=2301,LE=2302,Lm=2400,Dm=2401,W_=2402,J3=2500,T5=2501,v9=0,C5=1,ZM=2,ap=3200,y9=3201,IH=3202,UH=3203,op=0,_9=1,Mc="",Kn="srgb",zu="srgb-linear",K_="linear",fi="srgb",PH=0,ym=7680,FH=7681,HH=7682,zH=7683,GH=34055,kH=34056,VH=5386,QH=512,XH=513,jH=514,qH=515,YH=516,WH=517,KH=518,v8=519,A9=512,x9=513,b9=514,w5=515,S9=516,E9=517,M9=518,T9=519,J_=35044,JH=35048,ZH=35040,$H=35045,tz=35049,ez=35041,nz=35046,iz=35050,sz=35042,rz="100",y8="300 es",wl=2e3,Z_=2001,az={COMPUTE:"compute",RENDER:"render"},oz={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},lz={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};class Yo{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){const n=this._listeners;if(n===void 0)return;const i=n[t];if(i!==void 0){const r=i.indexOf(e);r!==-1&&i.splice(r,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const n=e[t.type];if(n!==void 0){t.target=this;const i=n.slice(0);for(let r=0,a=i.length;r<a;r++)i[r].call(this,t);t.target=null}}}const Xr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let K7=1234567;const Og=Math.PI/180,hy=180/Math.PI;function ko(){const s=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Xr[s&255]+Xr[s>>8&255]+Xr[s>>16&255]+Xr[s>>24&255]+"-"+Xr[t&255]+Xr[t>>8&255]+"-"+Xr[t>>16&15|64]+Xr[t>>24&255]+"-"+Xr[e&63|128]+Xr[e>>8&255]+"-"+Xr[e>>16&255]+Xr[e>>24&255]+Xr[n&255]+Xr[n>>8&255]+Xr[n>>16&255]+Xr[n>>24&255]).toLowerCase()}function nn(s,t,e){return Math.max(t,Math.min(e,s))}function R5(s,t){return(s%t+t)%t}function cz(s,t,e,n,i){return n+(s-t)*(i-n)/(e-t)}function uz(s,t,e){return s!==t?(e-s)/(t-s):0}function P_(s,t,e){return(1-e)*s+e*t}function hz(s,t,e,n){return P_(s,t,1-Math.exp(-e*n))}function fz(s,t=1){return t-Math.abs(R5(s,t*2)-t)}function dz(s,t,e){return s<=t?0:s>=e?1:(s=(s-t)/(e-t),s*s*(3-2*s))}function pz(s,t,e){return s<=t?0:s>=e?1:(s=(s-t)/(e-t),s*s*s*(s*(s*6-15)+10))}function mz(s,t){return s+Math.floor(Math.random()*(t-s+1))}function gz(s,t){return s+Math.random()*(t-s)}function vz(s){return s*(.5-Math.random())}function yz(s){s!==void 0&&(K7=s);let t=K7+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function _z(s){return s*Og}function Az(s){return s*hy}function xz(s){return(s&s-1)===0&&s!==0}function bz(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function Sz(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))}function Ez(s,t,e,n,i){const r=Math.cos,a=Math.sin,l=r(e/2),u=a(e/2),f=r((t+n)/2),m=a((t+n)/2),g=r((t-n)/2),v=a((t-n)/2),_=r((n-t)/2),b=a((n-t)/2);switch(i){case"XYX":s.set(l*m,u*g,u*v,l*f);break;case"YZY":s.set(u*v,l*m,u*g,l*f);break;case"ZXZ":s.set(u*g,u*v,l*m,l*f);break;case"XZX":s.set(l*m,u*b,u*_,l*f);break;case"YXY":s.set(u*_,l*m,u*b,l*f);break;case"ZYZ":s.set(u*b,u*_,l*m,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Ba(s,t){switch(t.constructor){case Float32Array:return s;case Uint32Array:return s/4294967295;case Uint16Array:return s/65535;case Uint8Array:return s/255;case Int32Array:return Math.max(s/2147483647,-1);case Int16Array:return Math.max(s/32767,-1);case Int8Array:return Math.max(s/127,-1);default:throw new Error("Invalid component type.")}}function cn(s,t){switch(t.constructor){case Float32Array:return s;case Uint32Array:return Math.round(s*4294967295);case Uint16Array:return Math.round(s*65535);case Uint8Array:return Math.round(s*255);case Int32Array:return Math.round(s*2147483647);case Int16Array:return Math.round(s*32767);case Int8Array:return Math.round(s*127);default:throw new Error("Invalid component type.")}}const $_={DEG2RAD:Og,RAD2DEG:hy,generateUUID:ko,clamp:nn,euclideanModulo:R5,mapLinear:cz,inverseLerp:uz,lerp:P_,damp:hz,pingpong:fz,smoothstep:dz,smootherstep:pz,randInt:mz,randFloat:gz,randFloatSpread:vz,seededRandom:yz,degToRad:_z,radToDeg:Az,isPowerOfTwo:xz,ceilPowerOfTwo:bz,floorPowerOfTwo:Sz,setQuaternionFromProperEuler:Ez,normalize:cn,denormalize:Ba};class Pt{constructor(t=0,e=0){Pt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=nn(this.x,t.x,e.x),this.y=nn(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=nn(this.x,t,e),this.y=nn(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(nn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*i+t.x,this.y=r*i+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class on{constructor(t,e,n,i,r,a,l,u,f){on.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,i,r,a,l,u,f)}set(t,e,n,i,r,a,l,u,f){const m=this.elements;return m[0]=t,m[1]=i,m[2]=l,m[3]=e,m[4]=r,m[5]=u,m[6]=n,m[7]=a,m[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,a=n[0],l=n[3],u=n[6],f=n[1],m=n[4],g=n[7],v=n[2],_=n[5],b=n[8],C=i[0],T=i[3],S=i[6],R=i[1],B=i[4],D=i[7],N=i[2],I=i[5],F=i[8];return r[0]=a*C+l*R+u*N,r[3]=a*T+l*B+u*I,r[6]=a*S+l*D+u*F,r[1]=f*C+m*R+g*N,r[4]=f*T+m*B+g*I,r[7]=f*S+m*D+g*F,r[2]=v*C+_*R+b*N,r[5]=v*T+_*B+b*I,r[8]=v*S+_*D+b*F,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],l=t[5],u=t[6],f=t[7],m=t[8];return e*a*m-e*l*f-n*r*m+n*l*u+i*r*f-i*a*u}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],l=t[5],u=t[6],f=t[7],m=t[8],g=m*a-l*f,v=l*u-m*r,_=f*r-a*u,b=e*g+n*v+i*_;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const C=1/b;return t[0]=g*C,t[1]=(i*f-m*n)*C,t[2]=(l*n-i*a)*C,t[3]=v*C,t[4]=(m*e-i*u)*C,t[5]=(i*r-l*e)*C,t[6]=_*C,t[7]=(n*u-f*e)*C,t[8]=(a*e-n*r)*C,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,a,l){const u=Math.cos(r),f=Math.sin(r);return this.set(n*u,n*f,-n*(u*a+f*l)+a+t,-i*f,i*u,-i*(-f*a+u*l)+l+e,0,0,1),this}scale(t,e){return this.premultiply(PT.makeScale(t,e)),this}rotate(t){return this.premultiply(PT.makeRotation(-t)),this}translate(t,e){return this.premultiply(PT.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const PT=new on;function C9(s){for(let t=s.length-1;t>=0;--t)if(s[t]>=65535)return!0;return!1}const Mz={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function X1(s,t){return new Mz[s](t)}function tA(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}function w9(){const s=tA("canvas");return s.style.display="block",s}const J7={};function DE(s){s in J7||(J7[s]=!0,console.warn(s))}function Tz(s,t,e){return new Promise(function(n,i){function r(){switch(s.clientWaitSync(t,s.SYNC_FLUSH_COMMANDS_BIT,0)){case s.WAIT_FAILED:i();break;case s.TIMEOUT_EXPIRED:setTimeout(r,e);break;default:n()}}setTimeout(r,e)})}function Cz(s){const t=s.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function wz(s){const t=s.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const Z7=new on().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),$7=new on().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Rz(){const s={enabled:!0,workingColorSpace:zu,spaces:{},convert:function(i,r,a){return this.enabled===!1||r===a||!r||!a||(this.spaces[r].transfer===fi&&(i.r=Zh(i.r),i.g=Zh(i.g),i.b=Zh(i.b)),this.spaces[r].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[r].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===fi&&(i.r=K1(i.r),i.g=K1(i.g),i.b=K1(i.b))),i},fromWorkingColorSpace:function(i,r){return this.convert(i,this.workingColorSpace,r)},toWorkingColorSpace:function(i,r){return this.convert(i,r,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Mc?K_:this.spaces[i].transfer},getLuminanceCoefficients:function(i,r=this.workingColorSpace){return i.fromArray(this.spaces[r].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,r,a){return i.copy(this.spaces[r].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],n=[.3127,.329];return s.define({[zu]:{primaries:t,whitePoint:n,transfer:K_,toXYZ:Z7,fromXYZ:$7,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Kn},outputColorSpaceConfig:{drawingBufferColorSpace:Kn}},[Kn]:{primaries:t,whitePoint:n,transfer:fi,toXYZ:Z7,fromXYZ:$7,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Kn}}}),s}const Pn=Rz();function Zh(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}function K1(s){return s<.0031308?s*12.92:1.055*Math.pow(s,.41666)-.055}let f1;class R9{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{f1===void 0&&(f1=tA("canvas")),f1.width=t.width,f1.height=t.height;const i=f1.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),n=f1}return n.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=tA("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let a=0;a<r.length;a++)r[a]=Zh(r[a]/255)*255;return n.putImageData(i,0,0),e}else if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(Zh(e[n]/255)*255):e[n]=Zh(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Lz=0;class jd{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Lz++}),this.uuid=ko(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let r;if(Array.isArray(i)){r=[];for(let a=0,l=i.length;a<l;a++)i[a].isDataTexture?r.push(FT(i[a].image)):r.push(FT(i[a]))}else r=FT(i);n.url=r}return e||(t.images[this.uuid]=n),n}}function FT(s){return typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap?R9.getDataURL(s):s.data?{data:Array.from(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Dz=0;class wi extends Yo{constructor(t=wi.DEFAULT_IMAGE,e=wi.DEFAULT_MAPPING,n=zo,i=zo,r=Ni,a=Cl,l=na,u=Ws,f=wi.DEFAULT_ANISOTROPY,m=Mc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Dz++}),this.uuid=ko(),this.name="",this.source=new jd(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Pt(0,0),this.repeat=new Pt(1,1),this.center=new Pt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new on,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isTextureArray=t.isTextureArray,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==V3)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case tp:t.x=t.x-Math.floor(t.x);break;case zo:t.x=t.x<0?0:1;break;case ay:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case tp:t.y=t.y-Math.floor(t.y);break;case zo:t.y=t.y<0?0:1;break;case ay:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}wi.DEFAULT_IMAGE=null;wi.DEFAULT_MAPPING=V3;wi.DEFAULT_ANISOTROPY=1;class Bn{constructor(t=0,e=0,n=0,i=1){Bn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*i+a[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const u=t.elements,f=u[0],m=u[4],g=u[8],v=u[1],_=u[5],b=u[9],C=u[2],T=u[6],S=u[10];if(Math.abs(m-v)<.01&&Math.abs(g-C)<.01&&Math.abs(b-T)<.01){if(Math.abs(m+v)<.1&&Math.abs(g+C)<.1&&Math.abs(b+T)<.1&&Math.abs(f+_+S-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const B=(f+1)/2,D=(_+1)/2,N=(S+1)/2,I=(m+v)/4,F=(g+C)/4,z=(b+T)/4;return B>D&&B>N?B<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(B),i=I/n,r=F/n):D>N?D<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(D),n=I/i,r=z/i):N<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(N),n=F/r,i=z/r),this.set(n,i,r,e),this}let R=Math.sqrt((T-b)*(T-b)+(g-C)*(g-C)+(v-m)*(v-m));return Math.abs(R)<.001&&(R=1),this.x=(T-b)/R,this.y=(g-C)/R,this.z=(v-m)/R,this.w=Math.acos((f+_+S-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=nn(this.x,t.x,e.x),this.y=nn(this.y,t.y,e.y),this.z=nn(this.z,t.z,e.z),this.w=nn(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=nn(this.x,t,e),this.y=nn(this.y,t,e),this.z=nn(this.z,t,e),this.w=nn(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Z3 extends Yo{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=n.depth?n.depth:1,this.scissor=new Bn(0,0,t,e),this.scissorTest=!1,this.viewport=new Bn(0,0,t,e);const i={width:t,height:e,depth:this.depth};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ni,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},n);const r=new wi(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let l=0;l<a;l++)this.textures[l]=r.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=t,this.textures[i].image.height=e,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const i=Object.assign({},t.textures[e].image);this.textures[e].source=new jd(i)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ds extends Z3{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class Cx extends wi{constructor(t=null,e=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=os,this.minFilter=os,this.wrapR=zo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Bz extends Ds{constructor(t=1,e=1,n=1,i={}){super(t,e,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Cx(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class $3 extends wi{constructor(t=null,e=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=os,this.minFilter=os,this.wrapR=zo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Oz extends Ds{constructor(t=1,e=1,n=1,i={}){super(t,e,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new $3(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class aa{constructor(t=0,e=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,r,a,l){let u=n[i+0],f=n[i+1],m=n[i+2],g=n[i+3];const v=r[a+0],_=r[a+1],b=r[a+2],C=r[a+3];if(l===0){t[e+0]=u,t[e+1]=f,t[e+2]=m,t[e+3]=g;return}if(l===1){t[e+0]=v,t[e+1]=_,t[e+2]=b,t[e+3]=C;return}if(g!==C||u!==v||f!==_||m!==b){let T=1-l;const S=u*v+f*_+m*b+g*C,R=S>=0?1:-1,B=1-S*S;if(B>Number.EPSILON){const N=Math.sqrt(B),I=Math.atan2(N,S*R);T=Math.sin(T*I)/N,l=Math.sin(l*I)/N}const D=l*R;if(u=u*T+v*D,f=f*T+_*D,m=m*T+b*D,g=g*T+C*D,T===1-l){const N=1/Math.sqrt(u*u+f*f+m*m+g*g);u*=N,f*=N,m*=N,g*=N}}t[e]=u,t[e+1]=f,t[e+2]=m,t[e+3]=g}static multiplyQuaternionsFlat(t,e,n,i,r,a){const l=n[i],u=n[i+1],f=n[i+2],m=n[i+3],g=r[a],v=r[a+1],_=r[a+2],b=r[a+3];return t[e]=l*b+m*g+u*_-f*v,t[e+1]=u*b+m*v+f*g-l*_,t[e+2]=f*b+m*_+l*v-u*g,t[e+3]=m*b-l*g-u*v-f*_,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,i=t._y,r=t._z,a=t._order,l=Math.cos,u=Math.sin,f=l(n/2),m=l(i/2),g=l(r/2),v=u(n/2),_=u(i/2),b=u(r/2);switch(a){case"XYZ":this._x=v*m*g+f*_*b,this._y=f*_*g-v*m*b,this._z=f*m*b+v*_*g,this._w=f*m*g-v*_*b;break;case"YXZ":this._x=v*m*g+f*_*b,this._y=f*_*g-v*m*b,this._z=f*m*b-v*_*g,this._w=f*m*g+v*_*b;break;case"ZXY":this._x=v*m*g-f*_*b,this._y=f*_*g+v*m*b,this._z=f*m*b+v*_*g,this._w=f*m*g-v*_*b;break;case"ZYX":this._x=v*m*g-f*_*b,this._y=f*_*g+v*m*b,this._z=f*m*b-v*_*g,this._w=f*m*g+v*_*b;break;case"YZX":this._x=v*m*g+f*_*b,this._y=f*_*g+v*m*b,this._z=f*m*b-v*_*g,this._w=f*m*g-v*_*b;break;case"XZY":this._x=v*m*g-f*_*b,this._y=f*_*g-v*m*b,this._z=f*m*b+v*_*g,this._w=f*m*g+v*_*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],a=e[1],l=e[5],u=e[9],f=e[2],m=e[6],g=e[10],v=n+l+g;if(v>0){const _=.5/Math.sqrt(v+1);this._w=.25/_,this._x=(m-u)*_,this._y=(r-f)*_,this._z=(a-i)*_}else if(n>l&&n>g){const _=2*Math.sqrt(1+n-l-g);this._w=(m-u)/_,this._x=.25*_,this._y=(i+a)/_,this._z=(r+f)/_}else if(l>g){const _=2*Math.sqrt(1+l-n-g);this._w=(r-f)/_,this._x=(i+a)/_,this._y=.25*_,this._z=(u+m)/_}else{const _=2*Math.sqrt(1+g-n-l);this._w=(a-i)/_,this._x=(r+f)/_,this._y=(u+m)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(nn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,a=t._w,l=e._x,u=e._y,f=e._z,m=e._w;return this._x=n*m+a*l+i*f-r*u,this._y=i*m+a*u+r*l-n*f,this._z=r*m+a*f+n*u-i*l,this._w=a*m-n*l-i*u-r*f,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,i=this._y,r=this._z,a=this._w;let l=a*t._w+n*t._x+i*t._y+r*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const u=1-l*l;if(u<=Number.EPSILON){const _=1-e;return this._w=_*a+e*this._w,this._x=_*n+e*this._x,this._y=_*i+e*this._y,this._z=_*r+e*this._z,this.normalize(),this}const f=Math.sqrt(u),m=Math.atan2(f,l),g=Math.sin((1-e)*m)/f,v=Math.sin(e*m)/f;return this._w=a*g+this._w*v,this._x=n*g+this._x*v,this._y=i*g+this._y*v,this._z=r*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(t),i*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class nt{constructor(t=0,e=0,n=0){nt.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(t6.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(t6.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,l=t.z,u=t.w,f=2*(a*i-l*n),m=2*(l*e-r*i),g=2*(r*n-a*e);return this.x=e+u*f+a*g-l*m,this.y=n+u*m+l*f-r*g,this.z=i+u*g+r*m-a*f,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=nn(this.x,t.x,e.x),this.y=nn(this.y,t.y,e.y),this.z=nn(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=nn(this.x,t,e),this.y=nn(this.y,t,e),this.z=nn(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,a=e.x,l=e.y,u=e.z;return this.x=i*u-r*l,this.y=r*a-n*u,this.z=n*l-i*a,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return HT.copy(this).projectOnVector(t),this.sub(HT)}reflect(t){return this.sub(HT.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(nn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const HT=new nt,t6=new aa;class Br{constructor(t=new nt(1/0,1/0,1/0),e=new nt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(rc.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(rc.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=rc.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const r=n.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let a=0,l=r.count;a<l;a++)t.isMesh===!0?t.getVertexPosition(a,rc):rc.fromBufferAttribute(r,a),rc.applyMatrix4(t.matrixWorld),this.expandByPoint(rc);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),xS.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),xS.copy(n.boundingBox)),xS.applyMatrix4(t.matrixWorld),this.union(xS)}const i=t.children;for(let r=0,a=i.length;r<a;r++)this.expandByObject(i[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,rc),rc.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(X2),bS.subVectors(this.max,X2),d1.subVectors(t.a,X2),p1.subVectors(t.b,X2),m1.subVectors(t.c,X2),id.subVectors(p1,d1),sd.subVectors(m1,p1),im.subVectors(d1,m1);let e=[0,-id.z,id.y,0,-sd.z,sd.y,0,-im.z,im.y,id.z,0,-id.x,sd.z,0,-sd.x,im.z,0,-im.x,-id.y,id.x,0,-sd.y,sd.x,0,-im.y,im.x,0];return!zT(e,d1,p1,m1,bS)||(e=[1,0,0,0,1,0,0,0,1],!zT(e,d1,p1,m1,bS))?!1:(SS.crossVectors(id,sd),e=[SS.x,SS.y,SS.z],zT(e,d1,p1,m1,bS))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,rc).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(rc).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(uh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),uh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),uh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),uh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),uh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),uh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),uh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),uh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(uh),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const uh=[new nt,new nt,new nt,new nt,new nt,new nt,new nt,new nt],rc=new nt,xS=new Br,d1=new nt,p1=new nt,m1=new nt,id=new nt,sd=new nt,im=new nt,X2=new nt,bS=new nt,SS=new nt,sm=new nt;function zT(s,t,e,n,i){for(let r=0,a=s.length-3;r<=a;r+=3){sm.fromArray(s,r);const l=i.x*Math.abs(sm.x)+i.y*Math.abs(sm.y)+i.z*Math.abs(sm.z),u=t.dot(sm),f=e.dot(sm),m=n.dot(sm);if(Math.max(-Math.max(u,f,m),Math.min(u,f,m))>l)return!1}return!0}const Nz=new Br,j2=new nt,GT=new nt;class pr{constructor(t=new nt,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):Nz.setFromPoints(t).getCenter(n);let i=0;for(let r=0,a=t.length;r<a;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;j2.subVectors(t,this.center);const e=j2.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),i=(n-this.radius)*.5;this.center.addScaledVector(j2,i/n),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(GT.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(j2.copy(t.center).add(GT)),this.expandByPoint(j2.copy(t.center).sub(GT))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const hh=new nt,kT=new nt,ES=new nt,rd=new nt,VT=new nt,MS=new nt,QT=new nt;class Sy{constructor(t=new nt,e=new nt(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,hh)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=hh.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(hh.copy(this.origin).addScaledVector(this.direction,e),hh.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){kT.copy(t).add(e).multiplyScalar(.5),ES.copy(e).sub(t).normalize(),rd.copy(this.origin).sub(kT);const r=t.distanceTo(e)*.5,a=-this.direction.dot(ES),l=rd.dot(this.direction),u=-rd.dot(ES),f=rd.lengthSq(),m=Math.abs(1-a*a);let g,v,_,b;if(m>0)if(g=a*u-l,v=a*l-u,b=r*m,g>=0)if(v>=-b)if(v<=b){const C=1/m;g*=C,v*=C,_=g*(g+a*v+2*l)+v*(a*g+v+2*u)+f}else v=r,g=Math.max(0,-(a*v+l)),_=-g*g+v*(v+2*u)+f;else v=-r,g=Math.max(0,-(a*v+l)),_=-g*g+v*(v+2*u)+f;else v<=-b?(g=Math.max(0,-(-a*r+l)),v=g>0?-r:Math.min(Math.max(-r,-u),r),_=-g*g+v*(v+2*u)+f):v<=b?(g=0,v=Math.min(Math.max(-r,-u),r),_=v*(v+2*u)+f):(g=Math.max(0,-(a*r+l)),v=g>0?r:Math.min(Math.max(-r,-u),r),_=-g*g+v*(v+2*u)+f);else v=a>0?-r:r,g=Math.max(0,-(a*v+l)),_=-g*g+v*(v+2*u)+f;return n&&n.copy(this.origin).addScaledVector(this.direction,g),i&&i.copy(kT).addScaledVector(ES,v),_}intersectSphere(t,e){hh.subVectors(t.center,this.origin);const n=hh.dot(this.direction),i=hh.dot(hh)-n*n,r=t.radius*t.radius;if(i>r)return null;const a=Math.sqrt(r-i),l=n-a,u=n+a;return u<0?null:l<0?this.at(u,e):this.at(l,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,a,l,u;const f=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,v=this.origin;return f>=0?(n=(t.min.x-v.x)*f,i=(t.max.x-v.x)*f):(n=(t.max.x-v.x)*f,i=(t.min.x-v.x)*f),m>=0?(r=(t.min.y-v.y)*m,a=(t.max.y-v.y)*m):(r=(t.max.y-v.y)*m,a=(t.min.y-v.y)*m),n>a||r>i||((r>n||isNaN(n))&&(n=r),(a<i||isNaN(i))&&(i=a),g>=0?(l=(t.min.z-v.z)*g,u=(t.max.z-v.z)*g):(l=(t.max.z-v.z)*g,u=(t.min.z-v.z)*g),n>u||l>i)||((l>n||n!==n)&&(n=l),(u<i||i!==i)&&(i=u),i<0)?null:this.at(n>=0?n:i,e)}intersectsBox(t){return this.intersectBox(t,hh)!==null}intersectTriangle(t,e,n,i,r){VT.subVectors(e,t),MS.subVectors(n,t),QT.crossVectors(VT,MS);let a=this.direction.dot(QT),l;if(a>0){if(i)return null;l=1}else if(a<0)l=-1,a=-a;else return null;rd.subVectors(this.origin,t);const u=l*this.direction.dot(MS.crossVectors(rd,MS));if(u<0)return null;const f=l*this.direction.dot(VT.cross(rd));if(f<0||u+f>a)return null;const m=-l*rd.dot(QT);return m<0?null:this.at(m/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Fe{constructor(t,e,n,i,r,a,l,u,f,m,g,v,_,b,C,T){Fe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,i,r,a,l,u,f,m,g,v,_,b,C,T)}set(t,e,n,i,r,a,l,u,f,m,g,v,_,b,C,T){const S=this.elements;return S[0]=t,S[4]=e,S[8]=n,S[12]=i,S[1]=r,S[5]=a,S[9]=l,S[13]=u,S[2]=f,S[6]=m,S[10]=g,S[14]=v,S[3]=_,S[7]=b,S[11]=C,S[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Fe().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/g1.setFromMatrixColumn(t,0).length(),r=1/g1.setFromMatrixColumn(t,1).length(),a=1/g1.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n),l=Math.sin(n),u=Math.cos(i),f=Math.sin(i),m=Math.cos(r),g=Math.sin(r);if(t.order==="XYZ"){const v=a*m,_=a*g,b=l*m,C=l*g;e[0]=u*m,e[4]=-u*g,e[8]=f,e[1]=_+b*f,e[5]=v-C*f,e[9]=-l*u,e[2]=C-v*f,e[6]=b+_*f,e[10]=a*u}else if(t.order==="YXZ"){const v=u*m,_=u*g,b=f*m,C=f*g;e[0]=v+C*l,e[4]=b*l-_,e[8]=a*f,e[1]=a*g,e[5]=a*m,e[9]=-l,e[2]=_*l-b,e[6]=C+v*l,e[10]=a*u}else if(t.order==="ZXY"){const v=u*m,_=u*g,b=f*m,C=f*g;e[0]=v-C*l,e[4]=-a*g,e[8]=b+_*l,e[1]=_+b*l,e[5]=a*m,e[9]=C-v*l,e[2]=-a*f,e[6]=l,e[10]=a*u}else if(t.order==="ZYX"){const v=a*m,_=a*g,b=l*m,C=l*g;e[0]=u*m,e[4]=b*f-_,e[8]=v*f+C,e[1]=u*g,e[5]=C*f+v,e[9]=_*f-b,e[2]=-f,e[6]=l*u,e[10]=a*u}else if(t.order==="YZX"){const v=a*u,_=a*f,b=l*u,C=l*f;e[0]=u*m,e[4]=C-v*g,e[8]=b*g+_,e[1]=g,e[5]=a*m,e[9]=-l*m,e[2]=-f*m,e[6]=_*g+b,e[10]=v-C*g}else if(t.order==="XZY"){const v=a*u,_=a*f,b=l*u,C=l*f;e[0]=u*m,e[4]=-g,e[8]=f*m,e[1]=v*g+C,e[5]=a*m,e[9]=_*g-b,e[2]=b*g-_,e[6]=l*m,e[10]=C*g+v}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Iz,t,Uz)}lookAt(t,e,n){const i=this.elements;return To.subVectors(t,e),To.lengthSq()===0&&(To.z=1),To.normalize(),ad.crossVectors(n,To),ad.lengthSq()===0&&(Math.abs(n.z)===1?To.x+=1e-4:To.z+=1e-4,To.normalize(),ad.crossVectors(n,To)),ad.normalize(),TS.crossVectors(To,ad),i[0]=ad.x,i[4]=TS.x,i[8]=To.x,i[1]=ad.y,i[5]=TS.y,i[9]=To.y,i[2]=ad.z,i[6]=TS.z,i[10]=To.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,a=n[0],l=n[4],u=n[8],f=n[12],m=n[1],g=n[5],v=n[9],_=n[13],b=n[2],C=n[6],T=n[10],S=n[14],R=n[3],B=n[7],D=n[11],N=n[15],I=i[0],F=i[4],z=i[8],U=i[12],P=i[1],X=i[5],ot=i[9],it=i[13],ct=i[2],dt=i[6],Q=i[10],tt=i[14],et=i[3],_t=i[7],K=i[11],at=i[15];return r[0]=a*I+l*P+u*ct+f*et,r[4]=a*F+l*X+u*dt+f*_t,r[8]=a*z+l*ot+u*Q+f*K,r[12]=a*U+l*it+u*tt+f*at,r[1]=m*I+g*P+v*ct+_*et,r[5]=m*F+g*X+v*dt+_*_t,r[9]=m*z+g*ot+v*Q+_*K,r[13]=m*U+g*it+v*tt+_*at,r[2]=b*I+C*P+T*ct+S*et,r[6]=b*F+C*X+T*dt+S*_t,r[10]=b*z+C*ot+T*Q+S*K,r[14]=b*U+C*it+T*tt+S*at,r[3]=R*I+B*P+D*ct+N*et,r[7]=R*F+B*X+D*dt+N*_t,r[11]=R*z+B*ot+D*Q+N*K,r[15]=R*U+B*it+D*tt+N*at,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],l=t[5],u=t[9],f=t[13],m=t[2],g=t[6],v=t[10],_=t[14],b=t[3],C=t[7],T=t[11],S=t[15];return b*(+r*u*g-i*f*g-r*l*v+n*f*v+i*l*_-n*u*_)+C*(+e*u*_-e*f*v+r*a*v-i*a*_+i*f*m-r*u*m)+T*(+e*f*g-e*l*_-r*a*g+n*a*_+r*l*m-n*f*m)+S*(-i*l*m-e*u*g+e*l*v+i*a*g-n*a*v+n*u*m)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],l=t[5],u=t[6],f=t[7],m=t[8],g=t[9],v=t[10],_=t[11],b=t[12],C=t[13],T=t[14],S=t[15],R=g*T*f-C*v*f+C*u*_-l*T*_-g*u*S+l*v*S,B=b*v*f-m*T*f-b*u*_+a*T*_+m*u*S-a*v*S,D=m*C*f-b*g*f+b*l*_-a*C*_-m*l*S+a*g*S,N=b*g*u-m*C*u-b*l*v+a*C*v+m*l*T-a*g*T,I=e*R+n*B+i*D+r*N;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/I;return t[0]=R*F,t[1]=(C*v*r-g*T*r-C*i*_+n*T*_+g*i*S-n*v*S)*F,t[2]=(l*T*r-C*u*r+C*i*f-n*T*f-l*i*S+n*u*S)*F,t[3]=(g*u*r-l*v*r-g*i*f+n*v*f+l*i*_-n*u*_)*F,t[4]=B*F,t[5]=(m*T*r-b*v*r+b*i*_-e*T*_-m*i*S+e*v*S)*F,t[6]=(b*u*r-a*T*r-b*i*f+e*T*f+a*i*S-e*u*S)*F,t[7]=(a*v*r-m*u*r+m*i*f-e*v*f-a*i*_+e*u*_)*F,t[8]=D*F,t[9]=(b*g*r-m*C*r-b*n*_+e*C*_+m*n*S-e*g*S)*F,t[10]=(a*C*r-b*l*r+b*n*f-e*C*f-a*n*S+e*l*S)*F,t[11]=(m*l*r-a*g*r-m*n*f+e*g*f+a*n*_-e*l*_)*F,t[12]=N*F,t[13]=(m*C*i-b*g*i+b*n*v-e*C*v-m*n*T+e*g*T)*F,t[14]=(b*l*i-a*C*i-b*n*u+e*C*u+a*n*T-e*l*T)*F,t[15]=(a*g*i-m*l*i+m*n*u-e*g*u-a*n*v+e*l*v)*F,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,l=t.y,u=t.z,f=r*a,m=r*l;return this.set(f*a+n,f*l-i*u,f*u+i*l,0,f*l+i*u,m*l+n,m*u-i*a,0,f*u-i*l,m*u+i*a,r*u*u+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,a){return this.set(1,n,r,0,t,1,a,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,a=e._y,l=e._z,u=e._w,f=r+r,m=a+a,g=l+l,v=r*f,_=r*m,b=r*g,C=a*m,T=a*g,S=l*g,R=u*f,B=u*m,D=u*g,N=n.x,I=n.y,F=n.z;return i[0]=(1-(C+S))*N,i[1]=(_+D)*N,i[2]=(b-B)*N,i[3]=0,i[4]=(_-D)*I,i[5]=(1-(v+S))*I,i[6]=(T+R)*I,i[7]=0,i[8]=(b+B)*F,i[9]=(T-R)*F,i[10]=(1-(v+C))*F,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=g1.set(i[0],i[1],i[2]).length();const a=g1.set(i[4],i[5],i[6]).length(),l=g1.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],ac.copy(this);const f=1/r,m=1/a,g=1/l;return ac.elements[0]*=f,ac.elements[1]*=f,ac.elements[2]*=f,ac.elements[4]*=m,ac.elements[5]*=m,ac.elements[6]*=m,ac.elements[8]*=g,ac.elements[9]*=g,ac.elements[10]*=g,e.setFromRotationMatrix(ac),n.x=r,n.y=a,n.z=l,this}makePerspective(t,e,n,i,r,a,l=wl){const u=this.elements,f=2*r/(e-t),m=2*r/(n-i),g=(e+t)/(e-t),v=(n+i)/(n-i);let _,b;if(l===wl)_=-(a+r)/(a-r),b=-2*a*r/(a-r);else if(l===Z_)_=-a/(a-r),b=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=f,u[4]=0,u[8]=g,u[12]=0,u[1]=0,u[5]=m,u[9]=v,u[13]=0,u[2]=0,u[6]=0,u[10]=_,u[14]=b,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(t,e,n,i,r,a,l=wl){const u=this.elements,f=1/(e-t),m=1/(n-i),g=1/(a-r),v=(e+t)*f,_=(n+i)*m;let b,C;if(l===wl)b=(a+r)*g,C=-2*g;else if(l===Z_)b=r*g,C=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*f,u[4]=0,u[8]=0,u[12]=-v,u[1]=0,u[5]=2*m,u[9]=0,u[13]=-_,u[2]=0,u[6]=0,u[10]=C,u[14]=-b,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const g1=new nt,ac=new Fe,Iz=new nt(0,0,0),Uz=new nt(1,1,1),ad=new nt,TS=new nt,To=new nt,e6=new Fe,n6=new aa;class Qo{constructor(t=0,e=0,n=0,i=Qo.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,r=i[0],a=i[4],l=i[8],u=i[1],f=i[5],m=i[9],g=i[2],v=i[6],_=i[10];switch(e){case"XYZ":this._y=Math.asin(nn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-m,_),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-nn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-g,r),this._z=0);break;case"ZXY":this._x=Math.asin(nn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(u,r));break;case"ZYX":this._y=Math.asin(-nn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,_),this._z=Math.atan2(u,r)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(nn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,f),this._y=Math.atan2(-g,r)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-nn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(l,r)):(this._x=Math.atan2(-m,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return e6.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e6,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return n6.setFromEuler(this),this.setFromQuaternion(n6,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Qo.DEFAULT_ORDER="XYZ";class fy{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Pz=0;const i6=new nt,v1=new aa,fh=new Fe,CS=new nt,q2=new nt,Fz=new nt,Hz=new aa,s6=new nt(1,0,0),r6=new nt(0,1,0),a6=new nt(0,0,1),o6={type:"added"},zz={type:"removed"},y1={type:"childadded",child:null},XT={type:"childremoved",child:null};class Hn extends Yo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Pz++}),this.uuid=ko(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Hn.DEFAULT_UP.clone();const t=new nt,e=new Qo,n=new aa,i=new nt(1,1,1);function r(){n.setFromEuler(e,!1)}function a(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Fe},normalMatrix:{value:new on}}),this.matrix=new Fe,this.matrixWorld=new Fe,this.matrixAutoUpdate=Hn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new fy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return v1.setFromAxisAngle(t,e),this.quaternion.multiply(v1),this}rotateOnWorldAxis(t,e){return v1.setFromAxisAngle(t,e),this.quaternion.premultiply(v1),this}rotateX(t){return this.rotateOnAxis(s6,t)}rotateY(t){return this.rotateOnAxis(r6,t)}rotateZ(t){return this.rotateOnAxis(a6,t)}translateOnAxis(t,e){return i6.copy(t).applyQuaternion(this.quaternion),this.position.add(i6.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(s6,t)}translateY(t){return this.translateOnAxis(r6,t)}translateZ(t){return this.translateOnAxis(a6,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(fh.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?CS.copy(t):CS.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),q2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fh.lookAt(q2,CS,this.up):fh.lookAt(CS,q2,this.up),this.quaternion.setFromRotationMatrix(fh),i&&(fh.extractRotation(i.matrixWorld),v1.setFromRotationMatrix(fh),this.quaternion.premultiply(v1.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(o6),y1.child=t,this.dispatchEvent(y1),y1.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(zz),XT.child=t,this.dispatchEvent(XT),XT.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),fh.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),fh.multiply(t.parent.matrixWorld)),t.applyMatrix4(fh),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(o6),y1.child=t,this.dispatchEvent(y1),y1.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const a=this.children[n].getObjectByProperty(t,e);if(a!==void 0)return a}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const i=this.children;for(let r=0,a=i.length;r<a;r++)i[r].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(q2,t,Fz),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(q2,Hz,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const i=this.children;for(let r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),i.instanceInfo=this._instanceInfo.map(l=>({...l})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(t),i.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(i.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function r(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(t)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let f=0,m=u.length;f<m;f++){const g=u[f];r(t.shapes,g)}else r(t.shapes,u)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(r(t.materials,this.material[u]));i.material=l}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let l=0;l<this.children.length;l++)i.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];i.animations.push(r(t.animations,u))}}if(e){const l=a(t.geometries),u=a(t.materials),f=a(t.textures),m=a(t.images),g=a(t.shapes),v=a(t.skeletons),_=a(t.animations),b=a(t.nodes);l.length>0&&(n.geometries=l),u.length>0&&(n.materials=u),f.length>0&&(n.textures=f),m.length>0&&(n.images=m),g.length>0&&(n.shapes=g),v.length>0&&(n.skeletons=v),_.length>0&&(n.animations=_),b.length>0&&(n.nodes=b)}return n.object=i,n;function a(l){const u=[];for(const f in l){const m=l[f];delete m.metadata,u.push(m)}return u}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const i=t.children[n];this.add(i.clone())}return this}}Hn.DEFAULT_UP=new nt(0,1,0);Hn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const oc=new nt,dh=new nt,jT=new nt,ph=new nt,_1=new nt,A1=new nt,l6=new nt,qT=new nt,YT=new nt,WT=new nt,KT=new Bn,JT=new Bn,ZT=new Bn;class ro{constructor(t=new nt,e=new nt,n=new nt){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),oc.subVectors(t,e),i.cross(oc);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){oc.subVectors(i,e),dh.subVectors(n,e),jT.subVectors(t,e);const a=oc.dot(oc),l=oc.dot(dh),u=oc.dot(jT),f=dh.dot(dh),m=dh.dot(jT),g=a*f-l*l;if(g===0)return r.set(0,0,0),null;const v=1/g,_=(f*u-l*m)*v,b=(a*m-l*u)*v;return r.set(1-_-b,b,_)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,ph)===null?!1:ph.x>=0&&ph.y>=0&&ph.x+ph.y<=1}static getInterpolation(t,e,n,i,r,a,l,u){return this.getBarycoord(t,e,n,i,ph)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(r,ph.x),u.addScaledVector(a,ph.y),u.addScaledVector(l,ph.z),u)}static getInterpolatedAttribute(t,e,n,i,r,a){return KT.setScalar(0),JT.setScalar(0),ZT.setScalar(0),KT.fromBufferAttribute(t,e),JT.fromBufferAttribute(t,n),ZT.fromBufferAttribute(t,i),a.setScalar(0),a.addScaledVector(KT,r.x),a.addScaledVector(JT,r.y),a.addScaledVector(ZT,r.z),a}static isFrontFacing(t,e,n,i){return oc.subVectors(n,e),dh.subVectors(t,e),oc.cross(dh).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return oc.subVectors(this.c,this.b),dh.subVectors(this.a,this.b),oc.cross(dh).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ro.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ro.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,i,r){return ro.getInterpolation(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return ro.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ro.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let a,l;_1.subVectors(i,n),A1.subVectors(r,n),qT.subVectors(t,n);const u=_1.dot(qT),f=A1.dot(qT);if(u<=0&&f<=0)return e.copy(n);YT.subVectors(t,i);const m=_1.dot(YT),g=A1.dot(YT);if(m>=0&&g<=m)return e.copy(i);const v=u*g-m*f;if(v<=0&&u>=0&&m<=0)return a=u/(u-m),e.copy(n).addScaledVector(_1,a);WT.subVectors(t,r);const _=_1.dot(WT),b=A1.dot(WT);if(b>=0&&_<=b)return e.copy(r);const C=_*f-u*b;if(C<=0&&f>=0&&b<=0)return l=f/(f-b),e.copy(n).addScaledVector(A1,l);const T=m*b-_*g;if(T<=0&&g-m>=0&&_-b>=0)return l6.subVectors(r,i),l=(g-m)/(g-m+(_-b)),e.copy(i).addScaledVector(l6,l);const S=1/(T+C+v);return a=C*S,l=v*S,e.copy(n).addScaledVector(_1,a).addScaledVector(A1,l)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const L9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},od={h:0,s:0,l:0},wS={h:0,s:0,l:0};function $T(s,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+(t-s)*6*e:e<1/2?t:e<2/3?s+(t-s)*6*(2/3-e):s}class ae{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){const i=t;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Kn){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Pn.toWorkingColorSpace(this,e),this}setRGB(t,e,n,i=Pn.workingColorSpace){return this.r=t,this.g=e,this.b=n,Pn.toWorkingColorSpace(this,i),this}setHSL(t,e,n,i=Pn.workingColorSpace){if(t=R5(t,1),e=nn(e,0,1),n=nn(n,0,1),e===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,a=2*n-r;this.r=$T(a,r,t+1/3),this.g=$T(a,r,t),this.b=$T(a,r,t-1/3)}return Pn.toWorkingColorSpace(this,i),this}setStyle(t,e=Kn){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const a=i[1],l=i[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=i[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(a===6)return this.setHex(parseInt(r,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Kn){const n=L9[t.toLowerCase()];return n!==void 0?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Zh(t.r),this.g=Zh(t.g),this.b=Zh(t.b),this}copyLinearToSRGB(t){return this.r=K1(t.r),this.g=K1(t.g),this.b=K1(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Kn){return Pn.fromWorkingColorSpace(jr.copy(this),t),Math.round(nn(jr.r*255,0,255))*65536+Math.round(nn(jr.g*255,0,255))*256+Math.round(nn(jr.b*255,0,255))}getHexString(t=Kn){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Pn.workingColorSpace){Pn.fromWorkingColorSpace(jr.copy(this),e);const n=jr.r,i=jr.g,r=jr.b,a=Math.max(n,i,r),l=Math.min(n,i,r);let u,f;const m=(l+a)/2;if(l===a)u=0,f=0;else{const g=a-l;switch(f=m<=.5?g/(a+l):g/(2-a-l),a){case n:u=(i-r)/g+(i<r?6:0);break;case i:u=(r-n)/g+2;break;case r:u=(n-i)/g+4;break}u/=6}return t.h=u,t.s=f,t.l=m,t}getRGB(t,e=Pn.workingColorSpace){return Pn.fromWorkingColorSpace(jr.copy(this),e),t.r=jr.r,t.g=jr.g,t.b=jr.b,t}getStyle(t=Kn){Pn.fromWorkingColorSpace(jr.copy(this),t);const e=jr.r,n=jr.g,i=jr.b;return t!==Kn?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(t,e,n){return this.getHSL(od),this.setHSL(od.h+t,od.s+e,od.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(od),t.getHSL(wS);const n=P_(od.h,wS.h,e),i=P_(od.s,wS.s,e),r=P_(od.l,wS.l,e);return this.setHSL(n,i,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,i=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*i,this.g=r[1]*e+r[4]*n+r[7]*i,this.b=r[2]*e+r[5]*n+r[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const jr=new ae;ae.NAMES=L9;let Gz=0;class gs extends Yo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Gz++}),this.uuid=ko(),this.name="",this.type="Material",this.blending=Bg,this.side=Dc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=vM,this.blendDst=yM,this.blendEquation=gd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ae(0,0,0),this.blendAlpha=0,this.depthFunc=Ug,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=v8,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ym,this.stencilZFail=ym,this.stencilZPass=ym,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const i=this[e];if(i===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Bg&&(n.blending=this.blending),this.side!==Dc&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==vM&&(n.blendSrc=this.blendSrc),this.blendDst!==yM&&(n.blendDst=this.blendDst),this.blendEquation!==gd&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Ug&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==v8&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ym&&(n.stencilFail=this.stencilFail),this.stencilZFail!==ym&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==ym&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(r){const a=[];for(const l in r){const u=r[l];delete u.metadata,a.push(u)}return a}if(e){const r=i(t.textures),a=i(t.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const i=e.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Go extends gs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qo,this.combine=Mx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Yh=kz();function kz(){const s=new ArrayBuffer(4),t=new Float32Array(s),e=new Uint32Array(s),n=new Uint32Array(512),i=new Uint32Array(512);for(let u=0;u<256;++u){const f=u-127;f<-27?(n[u]=0,n[u|256]=32768,i[u]=24,i[u|256]=24):f<-14?(n[u]=1024>>-f-14,n[u|256]=1024>>-f-14|32768,i[u]=-f-1,i[u|256]=-f-1):f<=15?(n[u]=f+15<<10,n[u|256]=f+15<<10|32768,i[u]=13,i[u|256]=13):f<128?(n[u]=31744,n[u|256]=64512,i[u]=24,i[u|256]=24):(n[u]=31744,n[u|256]=64512,i[u]=13,i[u|256]=13)}const r=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let f=u<<13,m=0;for(;(f&8388608)===0;)f<<=1,m-=8388608;f&=-8388609,m+=947912704,r[u]=f|m}for(let u=1024;u<2048;++u)r[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)a[u]=u<<23;a[31]=1199570944,a[32]=2147483648;for(let u=33;u<63;++u)a[u]=2147483648+(u-32<<23);a[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:t,uint32View:e,baseTable:n,shiftTable:i,mantissaTable:r,exponentTable:a,offsetTable:l}}function $a(s){Math.abs(s)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),s=nn(s,-65504,65504),Yh.floatView[0]=s;const t=Yh.uint32View[0],e=t>>23&511;return Yh.baseTable[e]+((t&8388607)>>Yh.shiftTable[e])}function u_(s){const t=s>>10;return Yh.uint32View[0]=Yh.mantissaTable[Yh.offsetTable[t]+(s&1023)]+Yh.exponentTable[t],Yh.floatView[0]}class Vz{static toHalfFloat(t){return $a(t)}static fromHalfFloat(t){return u_(t)}}const Ms=new nt,RS=new Pt;let Qz=0;class zn{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Qz++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=J_,this.updateRanges=[],this.gpuType=Na,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)RS.fromBufferAttribute(this,e),RS.applyMatrix3(t),this.setXY(e,RS.x,RS.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.applyMatrix3(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.applyMatrix4(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.applyNormalMatrix(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.transformDirection(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=Ba(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=cn(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Ba(e,this.array)),e}setX(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Ba(e,this.array)),e}setY(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Ba(e,this.array)),e}setZ(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Ba(e,this.array)),e}setW(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),i=cn(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),i=cn(i,this.array),r=cn(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==J_&&(t.usage=this.usage),t}}class Xz extends zn{constructor(t,e,n){super(new Int8Array(t),e,n)}}class jz extends zn{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class qz extends zn{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class Yz extends zn{constructor(t,e,n){super(new Int16Array(t),e,n)}}class L5 extends zn{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Wz extends zn{constructor(t,e,n){super(new Int32Array(t),e,n)}}class D5 extends zn{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class Kz extends zn{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=u_(this.array[t*this.itemSize]);return this.normalized&&(e=Ba(e,this.array)),e}setX(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize]=$a(e),this}getY(t){let e=u_(this.array[t*this.itemSize+1]);return this.normalized&&(e=Ba(e,this.array)),e}setY(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+1]=$a(e),this}getZ(t){let e=u_(this.array[t*this.itemSize+2]);return this.normalized&&(e=Ba(e,this.array)),e}setZ(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+2]=$a(e),this}getW(t){let e=u_(this.array[t*this.itemSize+3]);return this.normalized&&(e=Ba(e,this.array)),e}setW(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+3]=$a(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array)),this.array[t+0]=$a(e),this.array[t+1]=$a(n),this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),i=cn(i,this.array)),this.array[t+0]=$a(e),this.array[t+1]=$a(n),this.array[t+2]=$a(i),this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),i=cn(i,this.array),r=cn(r,this.array)),this.array[t+0]=$a(e),this.array[t+1]=$a(n),this.array[t+2]=$a(i),this.array[t+3]=$a(r),this}}class Me extends zn{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Jz=0;const gl=new Fe,tC=new Hn,x1=new nt,Co=new Br,Y2=new Br,rr=new nt;class $e extends Yo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Jz++}),this.uuid=ko(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(C9(t)?D5:L5)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new on().getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return gl.makeRotationFromQuaternion(t),this.applyMatrix4(gl),this}rotateX(t){return gl.makeRotationX(t),this.applyMatrix4(gl),this}rotateY(t){return gl.makeRotationY(t),this.applyMatrix4(gl),this}rotateZ(t){return gl.makeRotationZ(t),this.applyMatrix4(gl),this}translate(t,e,n){return gl.makeTranslation(t,e,n),this.applyMatrix4(gl),this}scale(t,e,n){return gl.makeScale(t,e,n),this.applyMatrix4(gl),this}lookAt(t){return tC.lookAt(t),tC.updateMatrix(),this.applyMatrix4(tC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(x1).negate(),this.translate(x1.x,x1.y,x1.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const n=[];for(let i=0,r=t.length;i<r;i++){const a=t[i];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Me(n,3))}else{const n=Math.min(t.length,e.count);for(let i=0;i<n;i++){const r=t[i];e.setXYZ(i,r.x,r.y,r.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Br);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new nt(-1/0,-1/0,-1/0),new nt(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){const r=e[n];Co.setFromBufferAttribute(r),this.morphTargetsRelative?(rr.addVectors(this.boundingBox.min,Co.min),this.boundingBox.expandByPoint(rr),rr.addVectors(this.boundingBox.max,Co.max),this.boundingBox.expandByPoint(rr)):(this.boundingBox.expandByPoint(Co.min),this.boundingBox.expandByPoint(Co.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new pr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new nt,1/0);return}if(t){const n=this.boundingSphere.center;if(Co.setFromBufferAttribute(t),e)for(let r=0,a=e.length;r<a;r++){const l=e[r];Y2.setFromBufferAttribute(l),this.morphTargetsRelative?(rr.addVectors(Co.min,Y2.min),Co.expandByPoint(rr),rr.addVectors(Co.max,Y2.max),Co.expandByPoint(rr)):(Co.expandByPoint(Y2.min),Co.expandByPoint(Y2.max))}Co.getCenter(n);let i=0;for(let r=0,a=t.count;r<a;r++)rr.fromBufferAttribute(t,r),i=Math.max(i,n.distanceToSquared(rr));if(e)for(let r=0,a=e.length;r<a;r++){const l=e[r],u=this.morphTargetsRelative;for(let f=0,m=l.count;f<m;f++)rr.fromBufferAttribute(l,f),u&&(x1.fromBufferAttribute(t,f),rr.add(x1)),i=Math.max(i,n.distanceToSquared(rr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.position,i=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zn(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),l=[],u=[];for(let z=0;z<n.count;z++)l[z]=new nt,u[z]=new nt;const f=new nt,m=new nt,g=new nt,v=new Pt,_=new Pt,b=new Pt,C=new nt,T=new nt;function S(z,U,P){f.fromBufferAttribute(n,z),m.fromBufferAttribute(n,U),g.fromBufferAttribute(n,P),v.fromBufferAttribute(r,z),_.fromBufferAttribute(r,U),b.fromBufferAttribute(r,P),m.sub(f),g.sub(f),_.sub(v),b.sub(v);const X=1/(_.x*b.y-b.x*_.y);isFinite(X)&&(C.copy(m).multiplyScalar(b.y).addScaledVector(g,-_.y).multiplyScalar(X),T.copy(g).multiplyScalar(_.x).addScaledVector(m,-b.x).multiplyScalar(X),l[z].add(C),l[U].add(C),l[P].add(C),u[z].add(T),u[U].add(T),u[P].add(T))}let R=this.groups;R.length===0&&(R=[{start:0,count:t.count}]);for(let z=0,U=R.length;z<U;++z){const P=R[z],X=P.start,ot=P.count;for(let it=X,ct=X+ot;it<ct;it+=3)S(t.getX(it+0),t.getX(it+1),t.getX(it+2))}const B=new nt,D=new nt,N=new nt,I=new nt;function F(z){N.fromBufferAttribute(i,z),I.copy(N);const U=l[z];B.copy(U),B.sub(N.multiplyScalar(N.dot(U))).normalize(),D.crossVectors(I,U);const X=D.dot(u[z])<0?-1:1;a.setXYZW(z,B.x,B.y,B.z,X)}for(let z=0,U=R.length;z<U;++z){const P=R[z],X=P.start,ot=P.count;for(let it=X,ct=X+ot;it<ct;it+=3)F(t.getX(it+0)),F(t.getX(it+1)),F(t.getX(it+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new zn(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let v=0,_=n.count;v<_;v++)n.setXYZ(v,0,0,0);const i=new nt,r=new nt,a=new nt,l=new nt,u=new nt,f=new nt,m=new nt,g=new nt;if(t)for(let v=0,_=t.count;v<_;v+=3){const b=t.getX(v+0),C=t.getX(v+1),T=t.getX(v+2);i.fromBufferAttribute(e,b),r.fromBufferAttribute(e,C),a.fromBufferAttribute(e,T),m.subVectors(a,r),g.subVectors(i,r),m.cross(g),l.fromBufferAttribute(n,b),u.fromBufferAttribute(n,C),f.fromBufferAttribute(n,T),l.add(m),u.add(m),f.add(m),n.setXYZ(b,l.x,l.y,l.z),n.setXYZ(C,u.x,u.y,u.z),n.setXYZ(T,f.x,f.y,f.z)}else for(let v=0,_=e.count;v<_;v+=3)i.fromBufferAttribute(e,v+0),r.fromBufferAttribute(e,v+1),a.fromBufferAttribute(e,v+2),m.subVectors(a,r),g.subVectors(i,r),m.cross(g),n.setXYZ(v+0,m.x,m.y,m.z),n.setXYZ(v+1,m.x,m.y,m.z),n.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)rr.fromBufferAttribute(t,e),rr.normalize(),t.setXYZ(e,rr.x,rr.y,rr.z)}toNonIndexed(){function t(l,u){const f=l.array,m=l.itemSize,g=l.normalized,v=new f.constructor(u.length*m);let _=0,b=0;for(let C=0,T=u.length;C<T;C++){l.isInterleavedBufferAttribute?_=u[C]*l.data.stride+l.offset:_=u[C]*m;for(let S=0;S<m;S++)v[b++]=f[_++]}return new zn(v,m,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new $e,n=this.index.array,i=this.attributes;for(const l in i){const u=i[l],f=t(u,n);e.setAttribute(l,f)}const r=this.morphAttributes;for(const l in r){const u=[],f=r[l];for(let m=0,g=f.length;m<g;m++){const v=f[m],_=t(v,n);u.push(_)}e.morphAttributes[l]=u}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,u=a.length;l<u;l++){const f=a[l];e.addGroup(f.start,f.count,f.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(t[f]=u[f]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const u in n){const f=n[u];t.data.attributes[u]=f.toJSON(t.data)}const i={};let r=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],m=[];for(let g=0,v=f.length;g<v;g++){const _=f[g];m.push(_.toJSON(t.data))}m.length>0&&(i[u]=m,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone());const i=t.attributes;for(const f in i){const m=i[f];this.setAttribute(f,m.clone(e))}const r=t.morphAttributes;for(const f in r){const m=[],g=r[f];for(let v=0,_=g.length;v<_;v++)m.push(g[v].clone(e));this.morphAttributes[f]=m}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let f=0,m=a.length;f<m;f++){const g=a[f];this.addGroup(g.start,g.count,g.materialIndex)}const l=t.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=t.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const c6=new Fe,rm=new Sy,LS=new pr,u6=new nt,DS=new nt,BS=new nt,OS=new nt,eC=new nt,NS=new nt,h6=new nt,IS=new nt;class as extends Hn{constructor(t=new $e,e=new Go){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){const l=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}getVertexPosition(t,e){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;e.fromBufferAttribute(i,t);const l=this.morphTargetInfluences;if(r&&l){NS.set(0,0,0);for(let u=0,f=r.length;u<f;u++){const m=l[u],g=r[u];m!==0&&(eC.fromBufferAttribute(g,t),a?NS.addScaledVector(eC,m):NS.addScaledVector(eC.sub(e),m))}e.add(NS)}return e}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),LS.copy(n.boundingSphere),LS.applyMatrix4(r),rm.copy(t.ray).recast(t.near),!(LS.containsPoint(rm.origin)===!1&&(rm.intersectSphere(LS,u6)===null||rm.origin.distanceToSquared(u6)>(t.far-t.near)**2))&&(c6.copy(r).invert(),rm.copy(t.ray).applyMatrix4(c6),!(n.boundingBox!==null&&rm.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,rm)))}_computeIntersections(t,e,n){let i;const r=this.geometry,a=this.material,l=r.index,u=r.attributes.position,f=r.attributes.uv,m=r.attributes.uv1,g=r.attributes.normal,v=r.groups,_=r.drawRange;if(l!==null)if(Array.isArray(a))for(let b=0,C=v.length;b<C;b++){const T=v[b],S=a[T.materialIndex],R=Math.max(T.start,_.start),B=Math.min(l.count,Math.min(T.start+T.count,_.start+_.count));for(let D=R,N=B;D<N;D+=3){const I=l.getX(D),F=l.getX(D+1),z=l.getX(D+2);i=US(this,S,t,n,f,m,g,I,F,z),i&&(i.faceIndex=Math.floor(D/3),i.face.materialIndex=T.materialIndex,e.push(i))}}else{const b=Math.max(0,_.start),C=Math.min(l.count,_.start+_.count);for(let T=b,S=C;T<S;T+=3){const R=l.getX(T),B=l.getX(T+1),D=l.getX(T+2);i=US(this,a,t,n,f,m,g,R,B,D),i&&(i.faceIndex=Math.floor(T/3),e.push(i))}}else if(u!==void 0)if(Array.isArray(a))for(let b=0,C=v.length;b<C;b++){const T=v[b],S=a[T.materialIndex],R=Math.max(T.start,_.start),B=Math.min(u.count,Math.min(T.start+T.count,_.start+_.count));for(let D=R,N=B;D<N;D+=3){const I=D,F=D+1,z=D+2;i=US(this,S,t,n,f,m,g,I,F,z),i&&(i.faceIndex=Math.floor(D/3),i.face.materialIndex=T.materialIndex,e.push(i))}}else{const b=Math.max(0,_.start),C=Math.min(u.count,_.start+_.count);for(let T=b,S=C;T<S;T+=3){const R=T,B=T+1,D=T+2;i=US(this,a,t,n,f,m,g,R,B,D),i&&(i.faceIndex=Math.floor(T/3),e.push(i))}}}}function Zz(s,t,e,n,i,r,a,l){let u;if(t.side===qs?u=n.intersectTriangle(a,r,i,!0,l):u=n.intersectTriangle(i,r,a,t.side===Dc,l),u===null)return null;IS.copy(l),IS.applyMatrix4(s.matrixWorld);const f=e.ray.origin.distanceTo(IS);return f<e.near||f>e.far?null:{distance:f,point:IS.clone(),object:s}}function US(s,t,e,n,i,r,a,l,u,f){s.getVertexPosition(l,DS),s.getVertexPosition(u,BS),s.getVertexPosition(f,OS);const m=Zz(s,t,e,n,DS,BS,OS,h6);if(m){const g=new nt;ro.getBarycoord(h6,DS,BS,OS,g),i&&(m.uv=ro.getInterpolatedAttribute(i,l,u,f,g,new Pt)),r&&(m.uv1=ro.getInterpolatedAttribute(r,l,u,f,g,new Pt)),a&&(m.normal=ro.getInterpolatedAttribute(a,l,u,f,g,new nt),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const v={a:l,b:u,c:f,normal:new nt,materialIndex:0};ro.getNormal(DS,BS,OS,v.normal),m.face=v,m.barycoord=g}return m}class i0 extends $e{constructor(t=1,e=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const l=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const u=[],f=[],m=[],g=[];let v=0,_=0;b("z","y","x",-1,-1,n,e,t,a,r,0),b("z","y","x",1,-1,n,e,-t,a,r,1),b("x","z","y",1,1,t,n,e,i,a,2),b("x","z","y",1,-1,t,n,-e,i,a,3),b("x","y","z",1,-1,t,e,n,i,r,4),b("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(u),this.setAttribute("position",new Me(f,3)),this.setAttribute("normal",new Me(m,3)),this.setAttribute("uv",new Me(g,2));function b(C,T,S,R,B,D,N,I,F,z,U){const P=D/F,X=N/z,ot=D/2,it=N/2,ct=I/2,dt=F+1,Q=z+1;let tt=0,et=0;const _t=new nt;for(let K=0;K<Q;K++){const at=K*X-it;for(let xt=0;xt<dt;xt++){const Et=xt*P-ot;_t[C]=Et*R,_t[T]=at*B,_t[S]=ct,f.push(_t.x,_t.y,_t.z),_t[C]=0,_t[T]=0,_t[S]=I>0?1:-1,m.push(_t.x,_t.y,_t.z),g.push(xt/F),g.push(1-K/z),tt+=1}}for(let K=0;K<z;K++)for(let at=0;at<F;at++){const xt=v+at+dt*K,Et=v+at+dt*(K+1),lt=v+(at+1)+dt*(K+1),wt=v+(at+1)+dt*K;u.push(xt,Et,wt),u.push(Et,lt,wt),et+=6}l.addGroup(_,et,U),_+=et,v+=tt}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new i0(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function dy(s){const t={};for(const e in s){t[e]={};for(const n in s[e]){const i=s[e][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=i.clone():Array.isArray(i)?t[e][n]=i.slice():t[e][n]=i}}return t}function Ca(s){const t={};for(let e=0;e<s.length;e++){const n=dy(s[e]);for(const i in n)t[i]=n[i]}return t}function $z(s){const t=[];for(let e=0;e<s.length;e++)t.push(s[e].clone());return t}function D9(s){const t=s.getRenderTarget();return t===null?s.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Pn.workingColorSpace}const B9={clone:dy,merge:Ca};var tG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,eG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ks extends gs{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=tG,this.fragmentShader=eG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=dy(t.uniforms),this.uniformsGroups=$z(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?e.uniforms[i]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?e.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?e.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?e.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?e.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?e.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?e.uniforms[i]={type:"m4",value:a.toArray()}:e.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}let wx=class extends Hn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Fe,this.projectionMatrix=new Fe,this.projectionMatrixInverse=new Fe,this.coordinateSystem=wl}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const ld=new nt,f6=new Pt,d6=new Pt;class Rs extends wx{constructor(t=50,e=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=hy*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Og*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return hy*2*Math.atan(Math.tan(Og*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){ld.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(ld.x,ld.y).multiplyScalar(-t/ld.z),ld.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ld.x,ld.y).multiplyScalar(-t/ld.z)}getViewSize(t,e){return this.getViewBounds(t,f6,d6),e.subVectors(d6,f6)}setViewOffset(t,e,n,i,r,a){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(Og*.5*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const u=a.fullWidth,f=a.fullHeight;r+=a.offsetX*i/u,e-=a.offsetY*n/f,i*=a.width/u,n*=a.height/f}const l=this.filmOffset;l!==0&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const b1=-90,S1=1;class O9 extends Hn{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Rs(b1,S1,t,e);i.layers=this.layers,this.add(i);const r=new Rs(b1,S1,t,e);r.layers=this.layers,this.add(r);const a=new Rs(b1,S1,t,e);a.layers=this.layers,this.add(a);const l=new Rs(b1,S1,t,e);l.layers=this.layers,this.add(l);const u=new Rs(b1,S1,t,e);u.layers=this.layers,this.add(u);const f=new Rs(b1,S1,t,e);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,i,r,a,l,u]=e;for(const f of e)this.remove(f);if(t===wl)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(t===Z_)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const f of e)this.add(f),f.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,a,l,u,f,m]=this.children,g=t.getRenderTarget(),v=t.getActiveCubeFace(),_=t.getActiveMipmapLevel(),b=t.xr.enabled;t.xr.enabled=!1;const C=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,i),t.render(e,r),t.setRenderTarget(n,1,i),t.render(e,a),t.setRenderTarget(n,2,i),t.render(e,l),t.setRenderTarget(n,3,i),t.render(e,u),t.setRenderTarget(n,4,i),t.render(e,f),n.texture.generateMipmaps=C,t.setRenderTarget(n,5,i),t.render(e,m),t.setRenderTarget(g,v,_),t.xr.enabled=b,n.texture.needsPMREMUpdate=!0}}class Rx extends wi{constructor(t=[],e=rf,n,i,r,a,l,u,f,m){super(t,e,n,i,r,a,l,u,f,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class N9 extends Ds{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},i=[n,n,n,n,n,n];this.texture=new Rx(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Ni}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new i0(5,5,5),r=new Ks({name:"CubemapFromEquirect",uniforms:dy(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:qs,blending:ra});r.uniforms.tEquirect.value=e;const a=new as(i,r),l=e.minFilter;return e.minFilter===Cl&&(e.minFilter=Ni),new O9(1,10,this).update(t,a),e.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(t,e=!0,n=!0,i=!0){const r=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,n,i);t.setRenderTarget(r)}}class Kh extends Hn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const nG={type:"move"};class BE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Kh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Kh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new nt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new nt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Kh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new nt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new nt),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,a=null;const l=this._targetRay,u=this._grip,f=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(f&&t.hand){a=!0;for(const C of t.hand.values()){const T=e.getJointPose(C,n),S=this._getHandJoint(f,C);T!==null&&(S.matrix.fromArray(T.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=T.radius),S.visible=T!==null}const m=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],v=m.position.distanceTo(g.position),_=.02,b=.005;f.inputState.pinching&&v>_+b?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!f.inputState.pinching&&v<=_-b&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else u!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),r!==null&&(u.matrix.fromArray(r.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,r.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(r.linearVelocity)):u.hasLinearVelocity=!1,r.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(r.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(i=e.getPose(t.targetRaySpace,n),i===null&&r!==null&&(i=r),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(nG)))}return l!==null&&(l.visible=i!==null),u!==null&&(u.visible=r!==null),f!==null&&(f.visible=a!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const n=new Kh;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class t4{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new ae(t),this.density=e}clone(){return new t4(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class e4{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new ae(t),this.near=e,this.far=n}clone(){return new e4(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let eA=class extends Hn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Qo,this.environmentIntensity=1,this.environmentRotation=new Qo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}};class Lx{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=J_,this.updateRanges=[],this.version=0,this.uuid=ko()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ko()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ko()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ma=new nt;class ep{constructor(t,e,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Ma.fromBufferAttribute(this,e),Ma.applyMatrix4(t),this.setXYZ(e,Ma.x,Ma.y,Ma.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ma.fromBufferAttribute(this,e),Ma.applyNormalMatrix(t),this.setXYZ(e,Ma.x,Ma.y,Ma.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ma.fromBufferAttribute(this,e),Ma.transformDirection(t),this.setXYZ(e,Ma.x,Ma.y,Ma.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=Ba(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Ba(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Ba(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Ba(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Ba(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),i=cn(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),i=cn(i,this.array),r=cn(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return new zn(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ep(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class B5 extends gs{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ae(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let E1;const W2=new nt,M1=new nt,T1=new nt,C1=new Pt,K2=new Pt,I9=new Fe,PS=new nt,J2=new nt,FS=new nt,p6=new Pt,nC=new Pt,m6=new Pt;class U9 extends Hn{constructor(t=new B5){if(super(),this.isSprite=!0,this.type="Sprite",E1===void 0){E1=new $e;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Lx(e,5);E1.setIndex([0,1,2,0,2,3]),E1.setAttribute("position",new ep(n,3,0,!1)),E1.setAttribute("uv",new ep(n,2,3,!1))}this.geometry=E1,this.material=t,this.center=new Pt(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),M1.setFromMatrixScale(this.matrixWorld),I9.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),T1.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&M1.multiplyScalar(-T1.z);const n=this.material.rotation;let i,r;n!==0&&(r=Math.cos(n),i=Math.sin(n));const a=this.center;HS(PS.set(-.5,-.5,0),T1,a,M1,i,r),HS(J2.set(.5,-.5,0),T1,a,M1,i,r),HS(FS.set(.5,.5,0),T1,a,M1,i,r),p6.set(0,0),nC.set(1,0),m6.set(1,1);let l=t.ray.intersectTriangle(PS,J2,FS,!1,W2);if(l===null&&(HS(J2.set(-.5,.5,0),T1,a,M1,i,r),nC.set(0,1),l=t.ray.intersectTriangle(PS,FS,J2,!1,W2),l===null))return;const u=t.ray.origin.distanceTo(W2);u<t.near||u>t.far||e.push({distance:u,point:W2.clone(),uv:ro.getInterpolation(W2,PS,J2,FS,p6,nC,m6,new Pt),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function HS(s,t,e,n,i,r){C1.subVectors(s,e).addScalar(.5).multiply(n),i!==void 0?(K2.x=r*C1.x-i*C1.y,K2.y=i*C1.x+r*C1.y):K2.copy(C1),s.copy(t),s.x+=K2.x,s.y+=K2.y,s.applyMatrix4(I9)}const zS=new nt,g6=new nt;class P9 extends Hn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,i=e.length;n<i;n++){const r=e[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const i=this.levels;let r;for(r=0;r<i.length&&!(e<i[r].distance);r++);return i.splice(r,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let n=0;n<e.length;n++)if(e[n].distance===t){const i=e.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,i;for(n=1,i=e.length;n<i;n++){let r=e[n].distance;if(e[n].object.visible&&(r-=r*e[n].hysteresis),t<r)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){zS.setFromMatrixPosition(this.matrixWorld);const i=t.ray.origin.distanceTo(zS);this.getObjectForDistance(i).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){zS.setFromMatrixPosition(t.matrixWorld),g6.setFromMatrixPosition(this.matrixWorld);const n=zS.distanceTo(g6)/t.zoom;e[0].object.visible=!0;let i,r;for(i=1,r=e.length;i<r;i++){let a=e[i].distance;if(e[i].object.visible&&(a-=a*e[i].hysteresis),n>=a)e[i-1].object.visible=!1,e[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const a=n[i];e.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return e}}const v6=new nt,y6=new Bn,_6=new Bn,iG=new nt,A6=new Fe,GS=new nt,iC=new pr,x6=new Fe,sC=new Sy;class O5 extends as{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=g8,this.bindMatrix=new Fe,this.bindMatrixInverse=new Fe,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Br),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,GS),this.boundingBox.expandByPoint(GS)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new pr),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,GS),this.boundingSphere.expandByPoint(GS)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),iC.copy(this.boundingSphere),iC.applyMatrix4(i),t.ray.intersectsSphere(iC)!==!1&&(x6.copy(i).invert(),sC.copy(t.ray).applyMatrix4(x6),!(this.boundingBox!==null&&sC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,sC)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Bn,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===g8?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===d9?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,i=this.geometry;y6.fromBufferAttribute(i.attributes.skinIndex,t),_6.fromBufferAttribute(i.attributes.skinWeight,t),v6.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const a=_6.getComponent(r);if(a!==0){const l=y6.getComponent(r);A6.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),e.addScaledVector(iG.copy(v6).applyMatrix4(A6),a)}}return e.applyMatrix4(this.bindMatrixInverse)}}class n4 extends Hn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Fu extends wi{constructor(t=null,e=1,n=1,i,r,a,l,u,f=os,m=os,g,v){super(null,a,l,u,f,m,i,r,g,v),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const b6=new Fe,sG=new Fe;class Dx{constructor(t=[],e=[]){this.uuid=ko(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Fe)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new Fe;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,a=t.length;r<a;r++){const l=t[r]?t[r].matrixWorld:sG;b6.multiplyMatrices(l,e[r]),b6.toArray(n,r*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Dx(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Fu(e,t,t,na,Na);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];if(i.name===t)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const r=t.bones[n];let a=e[r];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new n4),this.bones.push(a),this.boneInverses.push(new Fe().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const a=e[i];t.bones.push(a.uuid);const l=n[i];t.boneInverses.push(l.toArray())}return t}}class Hg extends zn{constructor(t,e,n,i=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const w1=new Fe,S6=new Fe,kS=[],E6=new Br,rG=new Fe,Z2=new as,$2=new pr;class N5 extends as{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Hg(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,rG)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Br),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,w1),E6.copy(t.boundingBox).applyMatrix4(w1),this.boundingBox.union(E6)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new pr),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,w1),$2.copy(t.boundingSphere).applyMatrix4(w1),this.boundingSphere.union($2)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const n=e.morphTargetInfluences,i=this.morphTexture.source.data.data,r=n.length+1,a=t*r+1;for(let l=0;l<n.length;l++)n[l]=i[a+l]}raycast(t,e){const n=this.matrixWorld,i=this.count;if(Z2.geometry=this.geometry,Z2.material=this.material,Z2.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),$2.copy(this.boundingSphere),$2.applyMatrix4(n),t.ray.intersectsSphere($2)!==!1))for(let r=0;r<i;r++){this.getMatrixAt(r,w1),S6.multiplyMatrices(n,w1),Z2.matrixWorld=S6,Z2.raycast(t,kS);for(let a=0,l=kS.length;a<l;a++){const u=kS[a];u.instanceId=r,u.object=this,e.push(u)}kS.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Hg(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const n=e.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new Fu(new Float32Array(i*this.count),i,this.count,Y3,Na));const r=this.morphTexture.source.data.data;let a=0;for(let f=0;f<n.length;f++)a+=n[f];const l=this.geometry.morphTargetsRelative?1:1-a,u=i*t;r[u]=l,r.set(n,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const rC=new nt,aG=new nt,oG=new on;class md{constructor(t=new nt(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=rC.subVectors(n,e).cross(aG.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(rC),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||oG.getNormalMatrix(t),i=this.coplanarPoint(rC).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const am=new pr,VS=new nt;class Ey{constructor(t=new md,e=new md,n=new md,i=new md,r=new md,a=new md){this.planes=[t,e,n,i,r,a]}set(t,e,n,i,r,a){const l=this.planes;return l[0].copy(t),l[1].copy(e),l[2].copy(n),l[3].copy(i),l[4].copy(r),l[5].copy(a),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=wl){const n=this.planes,i=t.elements,r=i[0],a=i[1],l=i[2],u=i[3],f=i[4],m=i[5],g=i[6],v=i[7],_=i[8],b=i[9],C=i[10],T=i[11],S=i[12],R=i[13],B=i[14],D=i[15];if(n[0].setComponents(u-r,v-f,T-_,D-S).normalize(),n[1].setComponents(u+r,v+f,T+_,D+S).normalize(),n[2].setComponents(u+a,v+m,T+b,D+R).normalize(),n[3].setComponents(u-a,v-m,T-b,D-R).normalize(),n[4].setComponents(u-l,v-g,T-C,D-B).normalize(),e===wl)n[5].setComponents(u+l,v+g,T+C,D+B).normalize();else if(e===Z_)n[5].setComponents(l,g,C,B).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),am.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),am.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(am)}intersectsSprite(t){return am.center.set(0,0,0),am.radius=.7071067811865476,am.applyMatrix4(t.matrixWorld),this.intersectsSphere(am)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(n)<i)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(VS.x=i.normal.x>0?t.max.x:t.min.x,VS.y=i.normal.y>0?t.max.y:t.min.y,VS.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(VS)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const mu=new Fe,gu=new Ey;class i4{constructor(){this.coordinateSystem=wl}intersectsObject(t,e){if(!e.isArrayCamera||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const i=e.cameras[n];if(mu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),gu.setFromProjectionMatrix(mu,this.coordinateSystem),gu.intersectsObject(t))return!0}return!1}intersectsSprite(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const i=e.cameras[n];if(mu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),gu.setFromProjectionMatrix(mu,this.coordinateSystem),gu.intersectsSprite(t))return!0}return!1}intersectsSphere(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const i=e.cameras[n];if(mu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),gu.setFromProjectionMatrix(mu,this.coordinateSystem),gu.intersectsSphere(t))return!0}return!1}intersectsBox(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const i=e.cameras[n];if(mu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),gu.setFromProjectionMatrix(mu,this.coordinateSystem),gu.intersectsBox(t))return!0}return!1}containsPoint(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const i=e.cameras[n];if(mu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),gu.setFromProjectionMatrix(mu,this.coordinateSystem),gu.containsPoint(t))return!0}return!1}clone(){return new i4}}function aC(s,t){return s-t}function lG(s,t){return s.z-t.z}function cG(s,t){return t.z-s.z}class uG{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,n,i){const r=this.pool,a=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const l=r[this.index];a.push(l),this.index++,l.start=t,l.count=e,l.z=n,l.index=i}reset(){this.list.length=0,this.index=0}}const Ja=new Fe,hG=new ae(1,1,1),M6=new Ey,fG=new i4,QS=new Br,om=new pr,t_=new nt,T6=new nt,dG=new nt,oC=new uG,qr=new as,XS=[];function pG(s,t,e=0){const n=t.itemSize;if(s.isInterleavedBufferAttribute||s.array.constructor!==t.array.constructor){const i=s.count;for(let r=0;r<i;r++)for(let a=0;a<n;a++)t.setComponent(r+e,a,s.getComponent(r,a))}else t.array.set(s.array,e*n);t.needsUpdate=!0}function lm(s,t){if(s.constructor!==t.constructor){const e=Math.min(s.length,t.length);for(let n=0;n<e;n++)t[n]=s[n]}else{const e=Math.min(s.length,t.length);t.set(new s.constructor(s.buffer,0,e))}}class F9 extends as{constructor(t,e,n=e*2,i){super(new $e,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new Fu(e,t,t,na,Na);this._matricesTexture=n}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),n=new Fu(e,t,t,Tx,Hu);this._indirectTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new Fu(e,t,t,na,Na);n.colorSpace=Pn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in t.attributes){const a=t.getAttribute(r),{array:l,itemSize:u,normalized:f}=a,m=new l.constructor(n*u),g=new zn(m,u,f);e.setAttribute(r,g)}if(t.getIndex()!==null){const r=n>65535?new Uint32Array(i):new Uint16Array(i);e.setIndex(new zn(r,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(!t.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=t.getAttribute(n),r=e.getAttribute(n);if(i.itemSize!==r.itemSize||i.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Br);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let n=0,i=e.length;n<i;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,Ja),this.getBoundingBoxAt(r,QS).applyMatrix4(Ja),t.union(QS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new pr);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let n=0,i=e.length;n<i;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,Ja),this.getBoundingSphereAt(r,om).applyMatrix4(Ja),t.union(om)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:t};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(aC),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=n):(i=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;Ja.identity().toArray(r.image.data,i*16),r.needsUpdate=!0;const a=this._colorsTexture;return a&&(hG.toArray(a.image.data,i*4),a.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(t,e=-1,n=-1){this._initializeGeometry(t),this._validateGeometry(t);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const a=t.getIndex();if(a!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=n===-1?a.count:n),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(aC),u=this._availableGeometryIds.shift(),r[u]=i):(u=this._geometryCount,this._geometryCount++,r.push(i)),this.setGeometryAt(u,t),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,u}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,i=n.getIndex()!==null,r=n.getIndex(),a=e.getIndex(),l=this._geometryInfo[t];if(i&&a.count>l.reservedIndexCount||e.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=e.getAttribute("position").count;for(const m in n.attributes){const g=e.getAttribute(m),v=n.getAttribute(m);pG(g,v,u);const _=g.itemSize;for(let b=g.count,C=f;b<C;b++){const T=u+b;for(let S=0;S<_;S++)v.setComponent(T,S,0)}v.needsUpdate=!0,v.addUpdateRange(u*_,f*_)}if(i){const m=l.indexStart,g=l.reservedIndexCount;l.indexCount=e.getIndex().count;for(let v=0;v<a.count;v++)r.setX(m+v,u+a.getX(v));for(let v=a.count,_=g;v<_;v++)r.setX(m+v,u);r.needsUpdate=!0,r.addUpdateRange(m,l.reservedIndexCount)}return l.start=i?l.indexStart:l.vertexStart,l.count=i?l.indexCount:l.vertexCount,l.boundingBox=null,e.boundingBox!==null&&(l.boundingBox=e.boundingBox.clone()),l.boundingSphere=null,e.boundingSphere!==null&&(l.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const n=this._instanceInfo;for(let i=0,r=n.length;i<r;i++)n[i].active&&n[i].geometryIndex===t&&this.deleteInstance(i);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const n=this._geometryInfo,i=n.map((a,l)=>l).sort((a,l)=>n[a].vertexStart-n[l].vertexStart),r=this.geometry;for(let a=0,l=n.length;a<l;a++){const u=i[a],f=n[u];if(f.active!==!1){if(r.index!==null){if(f.indexStart!==e){const{indexStart:m,vertexStart:g,reservedIndexCount:v}=f,_=r.index,b=_.array,C=t-g;for(let T=m;T<m+v;T++)b[T]=b[T]+C;_.array.copyWithin(e,m,m+v),_.addUpdateRange(e,v),f.indexStart=e}e+=f.reservedIndexCount}if(f.vertexStart!==t){const{vertexStart:m,reservedVertexCount:g}=f,v=r.attributes;for(const _ in v){const b=v[_],{array:C,itemSize:T}=b;C.copyWithin(t*T,m*T,(m+g)*T),b.addUpdateRange(t*T,g*T)}f.vertexStart=t}t+=f.reservedVertexCount,f.start=r.index?f.indexStart:f.vertexStart,this._nextIndexStart=r.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[t];if(i.boundingBox===null){const r=new Br,a=n.index,l=n.attributes.position;for(let u=i.start,f=i.start+i.count;u<f;u++){let m=u;a&&(m=a.getX(m)),r.expandByPoint(t_.fromBufferAttribute(l,m))}i.boundingBox=r}return e.copy(i.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[t];if(i.boundingSphere===null){const r=new pr;this.getBoundingBoxAt(t,QS),QS.getCenter(r.center);const a=n.index,l=n.attributes.position;let u=0;for(let f=i.start,m=i.start+i.count;f<m;f++){let g=f;a&&(g=a.getX(g)),t_.fromBufferAttribute(l,g),u=Math.max(u,r.center.distanceToSquared(t_))}r.radius=Math.sqrt(u),i.boundingSphere=r}return e.copy(i.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const n=this._matricesTexture,i=this._matricesTexture.image.data;return e.toArray(i,t*16),n.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}setInstanceCount(t){const e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(aC);e[e.length-1]===n.length;)n.pop(),e.pop();if(t<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const i=new Int32Array(t),r=new Int32Array(t);lm(this._multiDrawCounts,i),lm(this._multiDrawStarts,r),this._multiDrawCounts=i,this._multiDrawStarts=r,this._maxInstanceCount=t;const a=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;a.dispose(),this._initIndirectTexture(),lm(a.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),lm(l.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),lm(u.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const n=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...n.map(l=>l.vertexStart+l.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(u=>u.indexStart+u.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new $e,this._initializeGeometry(r));const a=this.geometry;r.index&&lm(r.index.array,a.index.array);for(const l in r.attributes)lm(r.attributes[l].array,a.attributes[l].array)}raycast(t,e){const n=this._instanceInfo,i=this._geometryInfo,r=this.matrixWorld,a=this.geometry;qr.material=this.material,qr.geometry.index=a.index,qr.geometry.attributes=a.attributes,qr.geometry.boundingBox===null&&(qr.geometry.boundingBox=new Br),qr.geometry.boundingSphere===null&&(qr.geometry.boundingSphere=new pr);for(let l=0,u=n.length;l<u;l++){if(!n[l].visible||!n[l].active)continue;const f=n[l].geometryIndex,m=i[f];qr.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(l,qr.matrixWorld).premultiply(r),this.getBoundingBoxAt(f,qr.geometry.boundingBox),this.getBoundingSphereAt(f,qr.geometry.boundingSphere),qr.raycast(t,XS);for(let g=0,v=XS.length;g<v;g++){const _=XS[g];_.object=this,_.batchId=l,e.push(_)}XS.length=0}qr.material=null,qr.geometry.index=null,qr.geometry.attributes={},qr.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._availableInstanceIds=t._availableInstanceIds.slice(),this._availableGeometryIds=t._availableGeometryIds.slice(),this._nextIndexStart=t._nextIndexStart,this._nextVertexStart=t._nextVertexStart,this._geometryCount=t._geometryCount,this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._indirectTexture=t._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,n,i,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,u=this._instanceInfo,f=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,_=this._indirectTexture,b=_.image.data,C=n.isArrayCamera?fG:M6;v&&!n.isArrayCamera&&(Ja.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),M6.setFromProjectionMatrix(Ja,t.coordinateSystem));let T=0;if(this.sortObjects){Ja.copy(this.matrixWorld).invert(),t_.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Ja),T6.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Ja);for(let B=0,D=u.length;B<D;B++)if(u[B].visible&&u[B].active){const N=u[B].geometryIndex;this.getMatrixAt(B,Ja),this.getBoundingSphereAt(N,om).applyMatrix4(Ja);let I=!1;if(v&&(I=!C.intersectsSphere(om,n)),!I){const F=g[N],z=dG.subVectors(om.center,t_).dot(T6);oC.push(F.start,F.count,z,B)}}const S=oC.list,R=this.customSort;R===null?S.sort(r.transparent?cG:lG):R.call(this,S,n);for(let B=0,D=S.length;B<D;B++){const N=S[B];f[T]=N.start*l,m[T]=N.count,b[T]=N.index,T++}oC.reset()}else for(let S=0,R=u.length;S<R;S++)if(u[S].visible&&u[S].active){const B=u[S].geometryIndex;let D=!1;if(v&&(this.getMatrixAt(S,Ja),this.getBoundingSphereAt(B,om).applyMatrix4(Ja),D=!C.intersectsSphere(om,n)),!D){const N=g[B];f[T]=N.start*l,m[T]=N.count,b[T]=S,T++}}_.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(t,e,n,i,r,a){this.onBeforeRender(t,null,i,r,a)}}class oa extends gs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ae(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const $M=new nt,t3=new nt,C6=new Fe,e_=new Sy,jS=new pr,lC=new nt,w6=new nt;class af extends Hn{constructor(t=new $e,e=new oa){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[0];for(let i=1,r=e.count;i<r;i++)$M.fromBufferAttribute(e,i-1),t3.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=$M.distanceTo(t3);t.setAttribute("lineDistance",new Me(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),jS.copy(n.boundingSphere),jS.applyMatrix4(i),jS.radius+=r,t.ray.intersectsSphere(jS)===!1)return;C6.copy(i).invert(),e_.copy(t.ray).applyMatrix4(C6);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=this.isLineSegments?2:1,m=n.index,v=n.attributes.position;if(m!==null){const _=Math.max(0,a.start),b=Math.min(m.count,a.start+a.count);for(let C=_,T=b-1;C<T;C+=f){const S=m.getX(C),R=m.getX(C+1),B=qS(this,t,e_,u,S,R,C);B&&e.push(B)}if(this.isLineLoop){const C=m.getX(b-1),T=m.getX(_),S=qS(this,t,e_,u,C,T,b-1);S&&e.push(S)}}else{const _=Math.max(0,a.start),b=Math.min(v.count,a.start+a.count);for(let C=_,T=b-1;C<T;C+=f){const S=qS(this,t,e_,u,C,C+1,C);S&&e.push(S)}if(this.isLineLoop){const C=qS(this,t,e_,u,b-1,_,b-1);C&&e.push(C)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){const l=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function qS(s,t,e,n,i,r,a){const l=s.geometry.attributes.position;if($M.fromBufferAttribute(l,i),t3.fromBufferAttribute(l,r),e.distanceSqToSegment($M,t3,lC,w6)>n)return;lC.applyMatrix4(s.matrixWorld);const f=t.ray.origin.distanceTo(lC);if(!(f<t.near||f>t.far))return{distance:f,point:w6.clone().applyMatrix4(s.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:s}}const R6=new nt,L6=new nt;class Bc extends af{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[];for(let i=0,r=e.count;i<r;i+=2)R6.fromBufferAttribute(e,i),L6.fromBufferAttribute(e,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+R6.distanceTo(L6);t.setAttribute("lineDistance",new Me(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class I5 extends af{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class s4 extends gs{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ae(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const D6=new Fe,_8=new Sy,YS=new pr,WS=new nt;class U5 extends Hn{constructor(t=new $e,e=new s4){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),YS.copy(n.boundingSphere),YS.applyMatrix4(i),YS.radius+=r,t.ray.intersectsSphere(YS)===!1)return;D6.copy(i).invert(),_8.copy(t.ray).applyMatrix4(D6);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=n.index,g=n.attributes.position;if(f!==null){const v=Math.max(0,a.start),_=Math.min(f.count,a.start+a.count);for(let b=v,C=_;b<C;b++){const T=f.getX(b);WS.fromBufferAttribute(g,T),B6(WS,T,u,i,t,e,this)}}else{const v=Math.max(0,a.start),_=Math.min(g.count,a.start+a.count);for(let b=v,C=_;b<C;b++)WS.fromBufferAttribute(g,b),B6(WS,b,u,i,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){const l=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function B6(s,t,e,n,i,r,a){const l=_8.distanceSqToPoint(s);if(l<e){const u=new nt;_8.closestPointToPoint(s,u),u.applyMatrix4(n);const f=i.ray.origin.distanceTo(u);if(f<i.near||f>i.far)return;r.push({distance:f,distanceToRay:Math.sqrt(l),point:u,index:t,face:null,faceIndex:null,barycoord:null,object:a})}}class H9 extends wi{constructor(t,e,n,i,r=Ni,a=Ni,l,u,f){super(t,e,n,i,r,a,l,u,f),this.isVideoTexture=!0,this.generateMipmaps=!1;const m=this;function g(){m.needsUpdate=!0,t.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class mG extends H9{constructor(t,e,n,i,r,a,l,u){super({},t,e,n,i,r,a,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class gG extends wi{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=os,this.minFilter=os,this.generateMipmaps=!1,this.needsUpdate=!0}}class r4 extends wi{constructor(t,e,n,i,r,a,l,u,f,m,g,v){super(null,a,l,u,f,m,i,r,g,v),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class vG extends r4{constructor(t,e,n,i,r,a){super(t,e,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=zo,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class yG extends r4{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,rf),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class _G extends wi{constructor(t,e,n,i,r,a,l,u,f){super(t,e,n,i,r,a,l,u,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Bx extends wi{constructor(t,e,n=Hu,i,r,a,l=os,u=os,f,m=ly){if(m!==ly&&m!==Fg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,i,r,a,l,u,m,n,f),this.isDepthTexture=!0,this.image={width:t,height:e},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new jd(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class AG extends Bx{constructor(t=1,e=1,n=1){super(t,e),this.isDepthArrayTexture=!0,this.image={width:t,height:e,depth:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class a4 extends $e{constructor(t=1,e=1,n=4,i=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:i,heightSegments:r},e=Math.max(0,e),n=Math.max(1,Math.floor(n)),i=Math.max(3,Math.floor(i)),r=Math.max(1,Math.floor(r));const a=[],l=[],u=[],f=[],m=e/2,g=Math.PI/2*t,v=e,_=2*g+v,b=n*2+r,C=i+1,T=new nt,S=new nt;for(let R=0;R<=b;R++){let B=0,D=0,N=0,I=0;if(R<=n){const U=R/n,P=U*Math.PI/2;D=-m-t*Math.cos(P),N=t*Math.sin(P),I=-t*Math.cos(P),B=U*g}else if(R<=n+r){const U=(R-n)/r;D=-m+U*e,N=t,I=0,B=g+U*v}else{const U=(R-n-r)/n,P=U*Math.PI/2;D=m+t*Math.sin(P),N=t*Math.cos(P),I=t*Math.sin(P),B=g+v+U*g}const F=Math.max(0,Math.min(1,B/_));let z=0;R===0?z=.5/i:R===b&&(z=-.5/i);for(let U=0;U<=i;U++){const P=U/i,X=P*Math.PI*2,ot=Math.sin(X),it=Math.cos(X);S.x=-N*it,S.y=D,S.z=N*ot,l.push(S.x,S.y,S.z),T.set(-N*it,I,N*ot),T.normalize(),u.push(T.x,T.y,T.z),f.push(P+z,F)}if(R>0){const U=(R-1)*C;for(let P=0;P<i;P++){const X=U+P,ot=U+P+1,it=R*C+P,ct=R*C+P+1;a.push(X,ot,it),a.push(ot,ct,it)}}}this.setIndex(a),this.setAttribute("position",new Me(l,3)),this.setAttribute("normal",new Me(u,3)),this.setAttribute("uv",new Me(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new a4(t.radius,t.height,t.capSegments,t.radialSegments,t.heightSegments)}}class o4 extends $e{constructor(t=1,e=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},e=Math.max(3,e);const r=[],a=[],l=[],u=[],f=new nt,m=new Pt;a.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let g=0,v=3;g<=e;g++,v+=3){const _=n+g/e*i;f.x=t*Math.cos(_),f.y=t*Math.sin(_),a.push(f.x,f.y,f.z),l.push(0,0,1),m.x=(a[v]/t+1)/2,m.y=(a[v+1]/t+1)/2,u.push(m.x,m.y)}for(let g=1;g<=e;g++)r.push(g,g+1,0);this.setIndex(r),this.setAttribute("position",new Me(a,3)),this.setAttribute("normal",new Me(l,3)),this.setAttribute("uv",new Me(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new o4(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Ox extends $e{constructor(t=1,e=1,n=1,i=32,r=1,a=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:l,thetaLength:u};const f=this;i=Math.floor(i),r=Math.floor(r);const m=[],g=[],v=[],_=[];let b=0;const C=[],T=n/2;let S=0;R(),a===!1&&(t>0&&B(!0),e>0&&B(!1)),this.setIndex(m),this.setAttribute("position",new Me(g,3)),this.setAttribute("normal",new Me(v,3)),this.setAttribute("uv",new Me(_,2));function R(){const D=new nt,N=new nt;let I=0;const F=(e-t)/n;for(let z=0;z<=r;z++){const U=[],P=z/r,X=P*(e-t)+t;for(let ot=0;ot<=i;ot++){const it=ot/i,ct=it*u+l,dt=Math.sin(ct),Q=Math.cos(ct);N.x=X*dt,N.y=-P*n+T,N.z=X*Q,g.push(N.x,N.y,N.z),D.set(dt,F,Q).normalize(),v.push(D.x,D.y,D.z),_.push(it,1-P),U.push(b++)}C.push(U)}for(let z=0;z<i;z++)for(let U=0;U<r;U++){const P=C[U][z],X=C[U+1][z],ot=C[U+1][z+1],it=C[U][z+1];(t>0||U!==0)&&(m.push(P,X,it),I+=3),(e>0||U!==r-1)&&(m.push(X,ot,it),I+=3)}f.addGroup(S,I,0),S+=I}function B(D){const N=b,I=new Pt,F=new nt;let z=0;const U=D===!0?t:e,P=D===!0?1:-1;for(let ot=1;ot<=i;ot++)g.push(0,T*P,0),v.push(0,P,0),_.push(.5,.5),b++;const X=b;for(let ot=0;ot<=i;ot++){const ct=ot/i*u+l,dt=Math.cos(ct),Q=Math.sin(ct);F.x=U*Q,F.y=T*P,F.z=U*dt,g.push(F.x,F.y,F.z),v.push(0,P,0),I.x=dt*.5+.5,I.y=Q*.5*P+.5,_.push(I.x,I.y),b++}for(let ot=0;ot<i;ot++){const it=N+ot,ct=X+ot;D===!0?m.push(ct,ct+1,it):m.push(ct+1,ct,it),z+=3}f.addGroup(S,z,D===!0?1:2),S+=z}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ox(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Nx extends Ox{constructor(t=1,e=1,n=32,i=1,r=!1,a=0,l=Math.PI*2){super(0,t,e,n,i,r,a,l),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:l}}static fromJSON(t){return new Nx(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class lp extends $e{constructor(t=[],e=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i};const r=[],a=[];l(i),f(n),m(),this.setAttribute("position",new Me(r,3)),this.setAttribute("normal",new Me(r.slice(),3)),this.setAttribute("uv",new Me(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function l(R){const B=new nt,D=new nt,N=new nt;for(let I=0;I<e.length;I+=3)_(e[I+0],B),_(e[I+1],D),_(e[I+2],N),u(B,D,N,R)}function u(R,B,D,N){const I=N+1,F=[];for(let z=0;z<=I;z++){F[z]=[];const U=R.clone().lerp(D,z/I),P=B.clone().lerp(D,z/I),X=I-z;for(let ot=0;ot<=X;ot++)ot===0&&z===I?F[z][ot]=U:F[z][ot]=U.clone().lerp(P,ot/X)}for(let z=0;z<I;z++)for(let U=0;U<2*(I-z)-1;U++){const P=Math.floor(U/2);U%2===0?(v(F[z][P+1]),v(F[z+1][P]),v(F[z][P])):(v(F[z][P+1]),v(F[z+1][P+1]),v(F[z+1][P]))}}function f(R){const B=new nt;for(let D=0;D<r.length;D+=3)B.x=r[D+0],B.y=r[D+1],B.z=r[D+2],B.normalize().multiplyScalar(R),r[D+0]=B.x,r[D+1]=B.y,r[D+2]=B.z}function m(){const R=new nt;for(let B=0;B<r.length;B+=3){R.x=r[B+0],R.y=r[B+1],R.z=r[B+2];const D=T(R)/2/Math.PI+.5,N=S(R)/Math.PI+.5;a.push(D,1-N)}b(),g()}function g(){for(let R=0;R<a.length;R+=6){const B=a[R+0],D=a[R+2],N=a[R+4],I=Math.max(B,D,N),F=Math.min(B,D,N);I>.9&&F<.1&&(B<.2&&(a[R+0]+=1),D<.2&&(a[R+2]+=1),N<.2&&(a[R+4]+=1))}}function v(R){r.push(R.x,R.y,R.z)}function _(R,B){const D=R*3;B.x=t[D+0],B.y=t[D+1],B.z=t[D+2]}function b(){const R=new nt,B=new nt,D=new nt,N=new nt,I=new Pt,F=new Pt,z=new Pt;for(let U=0,P=0;U<r.length;U+=9,P+=6){R.set(r[U+0],r[U+1],r[U+2]),B.set(r[U+3],r[U+4],r[U+5]),D.set(r[U+6],r[U+7],r[U+8]),I.set(a[P+0],a[P+1]),F.set(a[P+2],a[P+3]),z.set(a[P+4],a[P+5]),N.copy(R).add(B).add(D).divideScalar(3);const X=T(N);C(I,P+0,R,X),C(F,P+2,B,X),C(z,P+4,D,X)}}function C(R,B,D,N){N<0&&R.x===1&&(a[B]=R.x-1),D.x===0&&D.z===0&&(a[B]=N/2/Math.PI+.5)}function T(R){return Math.atan2(R.z,-R.x)}function S(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new lp(t.vertices,t.indices,t.radius,t.details)}}class l4 extends lp{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,a,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new l4(t.radius,t.detail)}}const KS=new nt,JS=new nt,cC=new nt,ZS=new ro;class z9 extends $e{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const i=Math.pow(10,4),r=Math.cos(Og*e),a=t.getIndex(),l=t.getAttribute("position"),u=a?a.count:l.count,f=[0,0,0],m=["a","b","c"],g=new Array(3),v={},_=[];for(let b=0;b<u;b+=3){a?(f[0]=a.getX(b),f[1]=a.getX(b+1),f[2]=a.getX(b+2)):(f[0]=b,f[1]=b+1,f[2]=b+2);const{a:C,b:T,c:S}=ZS;if(C.fromBufferAttribute(l,f[0]),T.fromBufferAttribute(l,f[1]),S.fromBufferAttribute(l,f[2]),ZS.getNormal(cC),g[0]=`${Math.round(C.x*i)},${Math.round(C.y*i)},${Math.round(C.z*i)}`,g[1]=`${Math.round(T.x*i)},${Math.round(T.y*i)},${Math.round(T.z*i)}`,g[2]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let R=0;R<3;R++){const B=(R+1)%3,D=g[R],N=g[B],I=ZS[m[R]],F=ZS[m[B]],z=`${D}_${N}`,U=`${N}_${D}`;U in v&&v[U]?(cC.dot(v[U].normal)<=r&&(_.push(I.x,I.y,I.z),_.push(F.x,F.y,F.z)),v[U]=null):z in v||(v[z]={index0:f[R],index1:f[B],normal:cC.clone()})}}for(const b in v)if(v[b]){const{index0:C,index1:T}=v[b];KS.fromBufferAttribute(l,C),JS.fromBufferAttribute(l,T),_.push(KS.x,KS.y,KS.z),_.push(JS.x,JS.y,JS.z)}this.setAttribute("position",new Me(_,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Oc{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let a=1;a<=t;a++)n=this.getPoint(a/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const n=this.getLengths();let i=0;const r=n.length;let a;e?a=e:a=t*n[r-1];let l=0,u=r-1,f;for(;l<=u;)if(i=Math.floor(l+(u-l)/2),f=n[i]-a,f<0)l=i+1;else if(f>0)u=i-1;else{u=i;break}if(i=u,n[i]===a)return i/(r-1);const m=n[i],v=n[i+1]-m,_=(a-m)/v;return(i+_)/(r-1)}getTangent(t,e){let i=t-1e-4,r=t+1e-4;i<0&&(i=0),r>1&&(r=1);const a=this.getPoint(i),l=this.getPoint(r),u=e||(a.isVector2?new Pt:new nt);return u.copy(l).sub(a).normalize(),u}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e=!1){const n=new nt,i=[],r=[],a=[],l=new nt,u=new Fe;for(let _=0;_<=t;_++){const b=_/t;i[_]=this.getTangentAt(b,new nt)}r[0]=new nt,a[0]=new nt;let f=Number.MAX_VALUE;const m=Math.abs(i[0].x),g=Math.abs(i[0].y),v=Math.abs(i[0].z);m<=f&&(f=m,n.set(1,0,0)),g<=f&&(f=g,n.set(0,1,0)),v<=f&&n.set(0,0,1),l.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],l),a[0].crossVectors(i[0],r[0]);for(let _=1;_<=t;_++){if(r[_]=r[_-1].clone(),a[_]=a[_-1].clone(),l.crossVectors(i[_-1],i[_]),l.length()>Number.EPSILON){l.normalize();const b=Math.acos(nn(i[_-1].dot(i[_]),-1,1));r[_].applyMatrix4(u.makeRotationAxis(l,b))}a[_].crossVectors(i[_],r[_])}if(e===!0){let _=Math.acos(nn(r[0].dot(r[t]),-1,1));_/=t,i[0].dot(l.crossVectors(r[0],r[t]))>0&&(_=-_);for(let b=1;b<=t;b++)r[b].applyMatrix4(u.makeRotationAxis(i[b],_*b)),a[b].crossVectors(i[b],r[b])}return{tangents:i,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class c4 extends Oc{constructor(t=0,e=0,n=1,i=1,r=0,a=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=l,this.aRotation=u}getPoint(t,e=new Pt){const n=e,i=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(a?r=0:r=i),this.aClockwise===!0&&!a&&(r===i?r=-i:r=r-i);const l=this.aStartAngle+t*r;let u=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=u-this.aX,_=f-this.aY;u=v*m-_*g+this.aX,f=v*g+_*m+this.aY}return n.set(u,f)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class G9 extends c4{constructor(t,e,n,i,r,a){super(t,e,n,n,i,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function P5(){let s=0,t=0,e=0,n=0;function i(r,a,l,u){s=r,t=l,e=-3*r+3*a-2*l-u,n=2*r-2*a+l+u}return{initCatmullRom:function(r,a,l,u,f){i(a,l,f*(l-r),f*(u-a))},initNonuniformCatmullRom:function(r,a,l,u,f,m,g){let v=(a-r)/f-(l-r)/(f+m)+(l-a)/m,_=(l-a)/m-(u-a)/(m+g)+(u-l)/g;v*=m,_*=m,i(a,l,v,_)},calc:function(r){const a=r*r,l=a*r;return s+t*r+e*a+n*l}}}const $S=new nt,uC=new P5,hC=new P5,fC=new P5;class k9 extends Oc{constructor(t=[],e=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t,e=new nt){const n=e,i=this.points,r=i.length,a=(r-(this.closed?0:1))*t;let l=Math.floor(a),u=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:u===0&&l===r-1&&(l=r-2,u=1);let f,m;this.closed||l>0?f=i[(l-1)%r]:($S.subVectors(i[0],i[1]).add(i[0]),f=$S);const g=i[l%r],v=i[(l+1)%r];if(this.closed||l+2<r?m=i[(l+2)%r]:($S.subVectors(i[r-1],i[r-2]).add(i[r-1]),m=$S),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let b=Math.pow(f.distanceToSquared(g),_),C=Math.pow(g.distanceToSquared(v),_),T=Math.pow(v.distanceToSquared(m),_);C<1e-4&&(C=1),b<1e-4&&(b=C),T<1e-4&&(T=C),uC.initNonuniformCatmullRom(f.x,g.x,v.x,m.x,b,C,T),hC.initNonuniformCatmullRom(f.y,g.y,v.y,m.y,b,C,T),fC.initNonuniformCatmullRom(f.z,g.z,v.z,m.z,b,C,T)}else this.curveType==="catmullrom"&&(uC.initCatmullRom(f.x,g.x,v.x,m.x,this.tension),hC.initCatmullRom(f.y,g.y,v.y,m.y,this.tension),fC.initCatmullRom(f.z,g.z,v.z,m.z,this.tension));return n.set(uC.calc(u),hC.calc(u),fC.calc(u)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(new nt().fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function O6(s,t,e,n,i){const r=(n-t)*.5,a=(i-e)*.5,l=s*s,u=s*l;return(2*e-2*n+r+a)*u+(-3*e+3*n-2*r-a)*l+r*s+e}function xG(s,t){const e=1-s;return e*e*t}function bG(s,t){return 2*(1-s)*s*t}function SG(s,t){return s*s*t}function F_(s,t,e,n){return xG(s,t)+bG(s,e)+SG(s,n)}function EG(s,t){const e=1-s;return e*e*e*t}function MG(s,t){const e=1-s;return 3*e*e*s*t}function TG(s,t){return 3*(1-s)*s*s*t}function CG(s,t){return s*s*s*t}function H_(s,t,e,n,i){return EG(s,t)+MG(s,e)+TG(s,n)+CG(s,i)}class F5 extends Oc{constructor(t=new Pt,e=new Pt,n=new Pt,i=new Pt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new Pt){const n=e,i=this.v0,r=this.v1,a=this.v2,l=this.v3;return n.set(H_(t,i.x,r.x,a.x,l.x),H_(t,i.y,r.y,a.y,l.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class V9 extends Oc{constructor(t=new nt,e=new nt,n=new nt,i=new nt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new nt){const n=e,i=this.v0,r=this.v1,a=this.v2,l=this.v3;return n.set(H_(t,i.x,r.x,a.x,l.x),H_(t,i.y,r.y,a.y,l.y),H_(t,i.z,r.z,a.z,l.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class H5 extends Oc{constructor(t=new Pt,e=new Pt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Pt){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Pt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Q9 extends Oc{constructor(t=new nt,e=new nt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new nt){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new nt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class z5 extends Oc{constructor(t=new Pt,e=new Pt,n=new Pt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Pt){const n=e,i=this.v0,r=this.v1,a=this.v2;return n.set(F_(t,i.x,r.x,a.x),F_(t,i.y,r.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class G5 extends Oc{constructor(t=new nt,e=new nt,n=new nt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new nt){const n=e,i=this.v0,r=this.v1,a=this.v2;return n.set(F_(t,i.x,r.x,a.x),F_(t,i.y,r.y,a.y),F_(t,i.z,r.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class k5 extends Oc{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Pt){const n=e,i=this.points,r=(i.length-1)*t,a=Math.floor(r),l=r-a,u=i[a===0?a:a-1],f=i[a],m=i[a>i.length-2?i.length-1:a+1],g=i[a>i.length-3?i.length-1:a+2];return n.set(O6(l,u.x,f.x,m.x,g.x),O6(l,u.y,f.y,m.y,g.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const i=this.points[e];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(new Pt().fromArray(i))}return this}}var e3=Object.freeze({__proto__:null,ArcCurve:G9,CatmullRomCurve3:k9,CubicBezierCurve:F5,CubicBezierCurve3:V9,EllipseCurve:c4,LineCurve:H5,LineCurve3:Q9,QuadraticBezierCurve:z5,QuadraticBezierCurve3:G5,SplineCurve:k5});class X9 extends Oc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new e3[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const a=i[r]-n,l=this.curves[r],u=l.getLength(),f=u===0?0:1-a/u;return l.getPointAt(f,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const a=r[i],l=a.isEllipseCurve?t*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,u=a.getPoints(l);for(let f=0;f<u.length;f++){const m=u[f];n&&n.equals(m)||(e.push(m),n=m)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const i=this.curves[e];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const i=t.curves[e];this.curves.push(new e3[i.type]().fromJSON(i))}return this}}class n3 extends X9{constructor(t){super(),this.type="Path",this.currentPoint=new Pt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new H5(this.currentPoint.clone(),new Pt(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const r=new z5(this.currentPoint.clone(),new Pt(t,e),new Pt(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,a){const l=new F5(this.currentPoint.clone(),new Pt(t,e),new Pt(n,i),new Pt(r,a));return this.curves.push(l),this.currentPoint.set(r,a),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new k5(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,a){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(t+l,e+u,n,i,r,a),this}absarc(t,e,n,i,r,a){return this.absellipse(t,e,n,n,i,r,a),this}ellipse(t,e,n,i,r,a,l,u){const f=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(t+f,e+m,n,i,r,a,l,u),this}absellipse(t,e,n,i,r,a,l,u){const f=new c4(t,e,n,i,r,a,l,u);if(this.curves.length>0){const g=f.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(f);const m=f.getPoint(1);return this.currentPoint.copy(m),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Ng extends n3{constructor(t){super(t),this.uuid=ko(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const i=t.holes[e];this.holes.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const i=this.holes[e];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const i=t.holes[e];this.holes.push(new n3().fromJSON(i))}return this}}function wG(s,t,e=2){const n=t&&t.length,i=n?t[0]*e:s.length;let r=j9(s,0,i,e,!0);const a=[];if(!r||r.next===r.prev)return a;let l,u,f;if(n&&(r=OG(s,t,r,e)),s.length>80*e){l=1/0,u=1/0;let m=-1/0,g=-1/0;for(let v=e;v<i;v+=e){const _=s[v],b=s[v+1];_<l&&(l=_),b<u&&(u=b),_>m&&(m=_),b>g&&(g=b)}f=Math.max(m-l,g-u),f=f!==0?32767/f:0}return nA(r,a,e,l,u,f,0),a}function j9(s,t,e,n,i){let r;if(i===QG(s,t,e,n)>0)for(let a=t;a<e;a+=n)r=N6(a/n|0,s[a],s[a+1],r);else for(let a=e-n;a>=t;a-=n)r=N6(a/n|0,s[a],s[a+1],r);return r&&py(r,r.next)&&(sA(r),r=r.next),r}function zg(s,t){if(!s)return s;t||(t=s);let e=s,n;do if(n=!1,!e.steiner&&(py(e,e.next)||Ki(e.prev,e,e.next)===0)){if(sA(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function nA(s,t,e,n,i,r,a){if(!s)return;!a&&r&&FG(s,n,i,r);let l=s;for(;s.prev!==s.next;){const u=s.prev,f=s.next;if(r?LG(s,n,i,r):RG(s)){t.push(u.i,s.i,f.i),sA(s),s=f.next,l=f.next;continue}if(s=f,s===l){a?a===1?(s=DG(zg(s),t),nA(s,t,e,n,i,r,2)):a===2&&BG(s,t,e,n,i,r):nA(zg(s),t,e,n,i,r,1);break}}}function RG(s){const t=s.prev,e=s,n=s.next;if(Ki(t,e,n)>=0)return!1;const i=t.x,r=e.x,a=n.x,l=t.y,u=e.y,f=n.y,m=Math.min(i,r,a),g=Math.min(l,u,f),v=Math.max(i,r,a),_=Math.max(l,u,f);let b=n.next;for(;b!==t;){if(b.x>=m&&b.x<=v&&b.y>=g&&b.y<=_&&h_(i,l,r,u,a,f,b.x,b.y)&&Ki(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function LG(s,t,e,n){const i=s.prev,r=s,a=s.next;if(Ki(i,r,a)>=0)return!1;const l=i.x,u=r.x,f=a.x,m=i.y,g=r.y,v=a.y,_=Math.min(l,u,f),b=Math.min(m,g,v),C=Math.max(l,u,f),T=Math.max(m,g,v),S=A8(_,b,t,e,n),R=A8(C,T,t,e,n);let B=s.prevZ,D=s.nextZ;for(;B&&B.z>=S&&D&&D.z<=R;){if(B.x>=_&&B.x<=C&&B.y>=b&&B.y<=T&&B!==i&&B!==a&&h_(l,m,u,g,f,v,B.x,B.y)&&Ki(B.prev,B,B.next)>=0||(B=B.prevZ,D.x>=_&&D.x<=C&&D.y>=b&&D.y<=T&&D!==i&&D!==a&&h_(l,m,u,g,f,v,D.x,D.y)&&Ki(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;B&&B.z>=S;){if(B.x>=_&&B.x<=C&&B.y>=b&&B.y<=T&&B!==i&&B!==a&&h_(l,m,u,g,f,v,B.x,B.y)&&Ki(B.prev,B,B.next)>=0)return!1;B=B.prevZ}for(;D&&D.z<=R;){if(D.x>=_&&D.x<=C&&D.y>=b&&D.y<=T&&D!==i&&D!==a&&h_(l,m,u,g,f,v,D.x,D.y)&&Ki(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function DG(s,t){let e=s;do{const n=e.prev,i=e.next.next;!py(n,i)&&Y9(n,e,e.next,i)&&iA(n,i)&&iA(i,n)&&(t.push(n.i,e.i,i.i),sA(e),sA(e.next),e=s=i),e=e.next}while(e!==s);return zg(e)}function BG(s,t,e,n,i,r){let a=s;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&GG(a,l)){let u=W9(a,l);a=zg(a,a.next),u=zg(u,u.next),nA(a,t,e,n,i,r,0),nA(u,t,e,n,i,r,0);return}l=l.next}a=a.next}while(a!==s)}function OG(s,t,e,n){const i=[];for(let r=0,a=t.length;r<a;r++){const l=t[r]*n,u=r<a-1?t[r+1]*n:s.length,f=j9(s,l,u,n,!1);f===f.next&&(f.steiner=!0),i.push(zG(f))}i.sort(NG);for(let r=0;r<i.length;r++)e=IG(i[r],e);return e}function NG(s,t){let e=s.x-t.x;if(e===0&&(e=s.y-t.y,e===0)){const n=(s.next.y-s.y)/(s.next.x-s.x),i=(t.next.y-t.y)/(t.next.x-t.x);e=n-i}return e}function IG(s,t){const e=UG(s,t);if(!e)return t;const n=W9(e,s);return zg(n,n.next),zg(e,e.next)}function UG(s,t){let e=t;const n=s.x,i=s.y;let r=-1/0,a;if(py(s,e))return e;do{if(py(s,e.next))return e.next;if(i<=e.y&&i>=e.next.y&&e.next.y!==e.y){const g=e.x+(i-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(g<=n&&g>r&&(r=g,a=e.x<e.next.x?e:e.next,g===n))return a}e=e.next}while(e!==t);if(!a)return null;const l=a,u=a.x,f=a.y;let m=1/0;e=a;do{if(n>=e.x&&e.x>=u&&n!==e.x&&q9(i<f?n:r,i,u,f,i<f?r:n,i,e.x,e.y)){const g=Math.abs(i-e.y)/(n-e.x);iA(e,s)&&(g<m||g===m&&(e.x>a.x||e.x===a.x&&PG(a,e)))&&(a=e,m=g)}e=e.next}while(e!==l);return a}function PG(s,t){return Ki(s.prev,s,t.prev)<0&&Ki(t.next,s,s.next)<0}function FG(s,t,e,n){let i=s;do i.z===0&&(i.z=A8(i.x,i.y,t,e,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==s);i.prevZ.nextZ=null,i.prevZ=null,HG(i)}function HG(s){let t,e=1;do{let n=s,i;s=null;let r=null;for(t=0;n;){t++;let a=n,l=0;for(let f=0;f<e&&(l++,a=a.nextZ,!!a);f++);let u=e;for(;l>0||u>0&&a;)l!==0&&(u===0||!a||n.z<=a.z)?(i=n,n=n.nextZ,l--):(i=a,a=a.nextZ,u--),r?r.nextZ=i:s=i,i.prevZ=r,r=i;n=a}r.nextZ=null,e*=2}while(t>1);return s}function A8(s,t,e,n,i){return s=(s-e)*i|0,t=(t-n)*i|0,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,s|t<<1}function zG(s){let t=s,e=s;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==s);return e}function q9(s,t,e,n,i,r,a,l){return(i-a)*(t-l)>=(s-a)*(r-l)&&(s-a)*(n-l)>=(e-a)*(t-l)&&(e-a)*(r-l)>=(i-a)*(n-l)}function h_(s,t,e,n,i,r,a,l){return!(s===a&&t===l)&&q9(s,t,e,n,i,r,a,l)}function GG(s,t){return s.next.i!==t.i&&s.prev.i!==t.i&&!kG(s,t)&&(iA(s,t)&&iA(t,s)&&VG(s,t)&&(Ki(s.prev,s,t.prev)||Ki(s,t.prev,t))||py(s,t)&&Ki(s.prev,s,s.next)>0&&Ki(t.prev,t,t.next)>0)}function Ki(s,t,e){return(t.y-s.y)*(e.x-t.x)-(t.x-s.x)*(e.y-t.y)}function py(s,t){return s.x===t.x&&s.y===t.y}function Y9(s,t,e,n){const i=eE(Ki(s,t,e)),r=eE(Ki(s,t,n)),a=eE(Ki(e,n,s)),l=eE(Ki(e,n,t));return!!(i!==r&&a!==l||i===0&&tE(s,e,t)||r===0&&tE(s,n,t)||a===0&&tE(e,s,n)||l===0&&tE(e,t,n))}function tE(s,t,e){return t.x<=Math.max(s.x,e.x)&&t.x>=Math.min(s.x,e.x)&&t.y<=Math.max(s.y,e.y)&&t.y>=Math.min(s.y,e.y)}function eE(s){return s>0?1:s<0?-1:0}function kG(s,t){let e=s;do{if(e.i!==s.i&&e.next.i!==s.i&&e.i!==t.i&&e.next.i!==t.i&&Y9(e,e.next,s,t))return!0;e=e.next}while(e!==s);return!1}function iA(s,t){return Ki(s.prev,s,s.next)<0?Ki(s,t,s.next)>=0&&Ki(s,s.prev,t)>=0:Ki(s,t,s.prev)<0||Ki(s,s.next,t)<0}function VG(s,t){let e=s,n=!1;const i=(s.x+t.x)/2,r=(s.y+t.y)/2;do e.y>r!=e.next.y>r&&e.next.y!==e.y&&i<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==s);return n}function W9(s,t){const e=x8(s.i,s.x,s.y),n=x8(t.i,t.x,t.y),i=s.next,r=t.prev;return s.next=t,t.prev=s,e.next=i,i.prev=e,n.next=e,e.prev=n,r.next=n,n.prev=r,n}function N6(s,t,e,n){const i=x8(s,t,e);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function sA(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function x8(s,t,e){return{i:s,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function QG(s,t,e,n){let i=0;for(let r=t,a=e-n;r<e;r+=n)i+=(s[a]-s[r])*(s[r+1]+s[a+1]),a=r;return i}class XG{static triangulate(t,e,n=2){return wG(t,e,n)}}class Cc{static area(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return n*.5}static isClockWise(t){return Cc.area(t)<0}static triangulateShape(t,e){const n=[],i=[],r=[];I6(t),U6(n,t);let a=t.length;e.forEach(I6);for(let u=0;u<e.length;u++)i.push(a),a+=e[u].length,U6(n,e[u]);const l=XG.triangulate(n,i);for(let u=0;u<l.length;u+=3)r.push(l.slice(u,u+3));return r}}function I6(s){const t=s.length;t>2&&s[t-1].equals(s[0])&&s.pop()}function U6(s,t){for(let e=0;e<t.length;e++)s.push(t[e].x),s.push(t[e].y)}class u4 extends $e{constructor(t=new Ng([new Pt(.5,.5),new Pt(-.5,.5),new Pt(-.5,-.5),new Pt(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],r=[];for(let l=0,u=t.length;l<u;l++){const f=t[l];a(f)}this.setAttribute("position",new Me(i,3)),this.setAttribute("uv",new Me(r,2)),this.computeVertexNormals();function a(l){const u=[],f=e.curveSegments!==void 0?e.curveSegments:12,m=e.steps!==void 0?e.steps:1,g=e.depth!==void 0?e.depth:1;let v=e.bevelEnabled!==void 0?e.bevelEnabled:!0,_=e.bevelThickness!==void 0?e.bevelThickness:.2,b=e.bevelSize!==void 0?e.bevelSize:_-.1,C=e.bevelOffset!==void 0?e.bevelOffset:0,T=e.bevelSegments!==void 0?e.bevelSegments:3;const S=e.extrudePath,R=e.UVGenerator!==void 0?e.UVGenerator:jG;let B,D=!1,N,I,F,z;S&&(B=S.getSpacedPoints(m),D=!0,v=!1,N=S.computeFrenetFrames(m,!1),I=new nt,F=new nt,z=new nt),v||(T=0,_=0,b=0,C=0);const U=l.extractPoints(f);let P=U.shape;const X=U.holes;if(!Cc.isClockWise(P)){P=P.reverse();for(let Z=0,Kt=X.length;Z<Kt;Z++){const Ft=X[Z];Cc.isClockWise(Ft)&&(X[Z]=Ft.reverse())}}function it(Z){const Ft=10000000000000001e-36;let Vt=Z[0];for(let Gt=1;Gt<=Z.length;Gt++){const be=Gt%Z.length,qt=Z[be],$=qt.x-Vt.x,V=qt.y-Vt.y,vt=$*$+V*V,It=Math.max(Math.abs(qt.x),Math.abs(qt.y),Math.abs(Vt.x),Math.abs(Vt.y)),Xt=Ft*It*It;if(vt<=Xt){Z.splice(be,1),Gt--;continue}Vt=qt}}it(P),X.forEach(it);const ct=X.length,dt=P;for(let Z=0;Z<ct;Z++){const Kt=X[Z];P=P.concat(Kt)}function Q(Z,Kt,Ft){return Kt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(Kt,Ft)}const tt=P.length;function et(Z,Kt,Ft){let Vt,Gt,be;const qt=Z.x-Kt.x,$=Z.y-Kt.y,V=Ft.x-Z.x,vt=Ft.y-Z.y,It=qt*qt+$*$,Xt=qt*vt-$*V;if(Math.abs(Xt)>Number.EPSILON){const Ot=Math.sqrt(It),ne=Math.sqrt(V*V+vt*vt),te=Kt.x-$/Ot,ge=Kt.y+qt/Ot,De=Ft.x-vt/ne,Jt=Ft.y+V/ne,_e=((De-te)*vt-(Jt-ge)*V)/(qt*vt-$*V);Vt=te+qt*_e-Z.x,Gt=ge+$*_e-Z.y;const Se=Vt*Vt+Gt*Gt;if(Se<=2)return new Pt(Vt,Gt);be=Math.sqrt(Se/2)}else{let Ot=!1;qt>Number.EPSILON?V>Number.EPSILON&&(Ot=!0):qt<-Number.EPSILON?V<-Number.EPSILON&&(Ot=!0):Math.sign($)===Math.sign(vt)&&(Ot=!0),Ot?(Vt=-$,Gt=qt,be=Math.sqrt(It)):(Vt=qt,Gt=$,be=Math.sqrt(It/2))}return new Pt(Vt/be,Gt/be)}const _t=[];for(let Z=0,Kt=dt.length,Ft=Kt-1,Vt=Z+1;Z<Kt;Z++,Ft++,Vt++)Ft===Kt&&(Ft=0),Vt===Kt&&(Vt=0),_t[Z]=et(dt[Z],dt[Ft],dt[Vt]);const K=[];let at,xt=_t.concat();for(let Z=0,Kt=ct;Z<Kt;Z++){const Ft=X[Z];at=[];for(let Vt=0,Gt=Ft.length,be=Gt-1,qt=Vt+1;Vt<Gt;Vt++,be++,qt++)be===Gt&&(be=0),qt===Gt&&(qt=0),at[Vt]=et(Ft[Vt],Ft[be],Ft[qt]);K.push(at),xt=xt.concat(at)}let Et;if(T===0)Et=Cc.triangulateShape(dt,X);else{const Z=[],Kt=[];for(let Ft=0;Ft<T;Ft++){const Vt=Ft/T,Gt=_*Math.cos(Vt*Math.PI/2),be=b*Math.sin(Vt*Math.PI/2)+C;for(let qt=0,$=dt.length;qt<$;qt++){const V=Q(dt[qt],_t[qt],be);ve(V.x,V.y,-Gt),Vt===0&&Z.push(V)}for(let qt=0,$=ct;qt<$;qt++){const V=X[qt];at=K[qt];const vt=[];for(let It=0,Xt=V.length;It<Xt;It++){const Ot=Q(V[It],at[It],be);ve(Ot.x,Ot.y,-Gt),Vt===0&&vt.push(Ot)}Vt===0&&Kt.push(vt)}}Et=Cc.triangulateShape(Z,Kt)}const lt=Et.length,wt=b+C;for(let Z=0;Z<tt;Z++){const Kt=v?Q(P[Z],xt[Z],wt):P[Z];D?(F.copy(N.normals[0]).multiplyScalar(Kt.x),I.copy(N.binormals[0]).multiplyScalar(Kt.y),z.copy(B[0]).add(F).add(I),ve(z.x,z.y,z.z)):ve(Kt.x,Kt.y,0)}for(let Z=1;Z<=m;Z++)for(let Kt=0;Kt<tt;Kt++){const Ft=v?Q(P[Kt],xt[Kt],wt):P[Kt];D?(F.copy(N.normals[Z]).multiplyScalar(Ft.x),I.copy(N.binormals[Z]).multiplyScalar(Ft.y),z.copy(B[Z]).add(F).add(I),ve(z.x,z.y,z.z)):ve(Ft.x,Ft.y,g/m*Z)}for(let Z=T-1;Z>=0;Z--){const Kt=Z/T,Ft=_*Math.cos(Kt*Math.PI/2),Vt=b*Math.sin(Kt*Math.PI/2)+C;for(let Gt=0,be=dt.length;Gt<be;Gt++){const qt=Q(dt[Gt],_t[Gt],Vt);ve(qt.x,qt.y,g+Ft)}for(let Gt=0,be=X.length;Gt<be;Gt++){const qt=X[Gt];at=K[Gt];for(let $=0,V=qt.length;$<V;$++){const vt=Q(qt[$],at[$],Vt);D?ve(vt.x,vt.y+B[m-1].y,B[m-1].x+Ft):ve(vt.x,vt.y,g+Ft)}}}Bt(),Ut();function Bt(){const Z=i.length/3;if(v){let Kt=0,Ft=tt*Kt;for(let Vt=0;Vt<lt;Vt++){const Gt=Et[Vt];ee(Gt[2]+Ft,Gt[1]+Ft,Gt[0]+Ft)}Kt=m+T*2,Ft=tt*Kt;for(let Vt=0;Vt<lt;Vt++){const Gt=Et[Vt];ee(Gt[0]+Ft,Gt[1]+Ft,Gt[2]+Ft)}}else{for(let Kt=0;Kt<lt;Kt++){const Ft=Et[Kt];ee(Ft[2],Ft[1],Ft[0])}for(let Kt=0;Kt<lt;Kt++){const Ft=Et[Kt];ee(Ft[0]+tt*m,Ft[1]+tt*m,Ft[2]+tt*m)}}n.addGroup(Z,i.length/3-Z,0)}function Ut(){const Z=i.length/3;let Kt=0;Wt(dt,Kt),Kt+=dt.length;for(let Ft=0,Vt=X.length;Ft<Vt;Ft++){const Gt=X[Ft];Wt(Gt,Kt),Kt+=Gt.length}n.addGroup(Z,i.length/3-Z,1)}function Wt(Z,Kt){let Ft=Z.length;for(;--Ft>=0;){const Vt=Ft;let Gt=Ft-1;Gt<0&&(Gt=Z.length-1);for(let be=0,qt=m+T*2;be<qt;be++){const $=tt*be,V=tt*(be+1),vt=Kt+Vt+$,It=Kt+Gt+$,Xt=Kt+Gt+V,Ot=Kt+Vt+V;Ye(vt,It,Xt,Ot)}}}function ve(Z,Kt,Ft){u.push(Z),u.push(Kt),u.push(Ft)}function ee(Z,Kt,Ft){we(Z),we(Kt),we(Ft);const Vt=i.length/3,Gt=R.generateTopUV(n,i,Vt-3,Vt-2,Vt-1);se(Gt[0]),se(Gt[1]),se(Gt[2])}function Ye(Z,Kt,Ft,Vt){we(Z),we(Kt),we(Vt),we(Kt),we(Ft),we(Vt);const Gt=i.length/3,be=R.generateSideWallUV(n,i,Gt-6,Gt-3,Gt-2,Gt-1);se(be[0]),se(be[1]),se(be[3]),se(be[1]),se(be[2]),se(be[3])}function we(Z){i.push(u[Z*3+0]),i.push(u[Z*3+1]),i.push(u[Z*3+2])}function se(Z){r.push(Z.x),r.push(Z.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return qG(e,n,t)}static fromJSON(t,e){const n=[];for(let r=0,a=t.shapes.length;r<a;r++){const l=e[t.shapes[r]];n.push(l)}const i=t.options.extrudePath;return i!==void 0&&(t.options.extrudePath=new e3[i.type]().fromJSON(i)),new u4(n,t.options)}}const jG={generateTopUV:function(s,t,e,n,i){const r=t[e*3],a=t[e*3+1],l=t[n*3],u=t[n*3+1],f=t[i*3],m=t[i*3+1];return[new Pt(r,a),new Pt(l,u),new Pt(f,m)]},generateSideWallUV:function(s,t,e,n,i,r){const a=t[e*3],l=t[e*3+1],u=t[e*3+2],f=t[n*3],m=t[n*3+1],g=t[n*3+2],v=t[i*3],_=t[i*3+1],b=t[i*3+2],C=t[r*3],T=t[r*3+1],S=t[r*3+2];return Math.abs(l-m)<Math.abs(a-f)?[new Pt(a,1-u),new Pt(f,1-g),new Pt(v,1-b),new Pt(C,1-S)]:[new Pt(l,1-u),new Pt(m,1-g),new Pt(_,1-b),new Pt(T,1-S)]}};function qG(s,t,e){if(e.shapes=[],Array.isArray(s))for(let n=0,i=s.length;n<i;n++){const r=s[n];e.shapes.push(r.uuid)}else e.shapes.push(s.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class h4 extends lp{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new h4(t.radius,t.detail)}}class f4 extends $e{constructor(t=[new Pt(0,-.5),new Pt(.5,0),new Pt(0,.5)],e=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e),i=nn(i,0,Math.PI*2);const r=[],a=[],l=[],u=[],f=[],m=1/e,g=new nt,v=new Pt,_=new nt,b=new nt,C=new nt;let T=0,S=0;for(let R=0;R<=t.length-1;R++)switch(R){case 0:T=t[R+1].x-t[R].x,S=t[R+1].y-t[R].y,_.x=S*1,_.y=-T,_.z=S*0,C.copy(_),_.normalize(),u.push(_.x,_.y,_.z);break;case t.length-1:u.push(C.x,C.y,C.z);break;default:T=t[R+1].x-t[R].x,S=t[R+1].y-t[R].y,_.x=S*1,_.y=-T,_.z=S*0,b.copy(_),_.x+=C.x,_.y+=C.y,_.z+=C.z,_.normalize(),u.push(_.x,_.y,_.z),C.copy(b)}for(let R=0;R<=e;R++){const B=n+R*m*i,D=Math.sin(B),N=Math.cos(B);for(let I=0;I<=t.length-1;I++){g.x=t[I].x*D,g.y=t[I].y,g.z=t[I].x*N,a.push(g.x,g.y,g.z),v.x=R/e,v.y=I/(t.length-1),l.push(v.x,v.y);const F=u[3*I+0]*D,z=u[3*I+1],U=u[3*I+0]*N;f.push(F,z,U)}}for(let R=0;R<e;R++)for(let B=0;B<t.length-1;B++){const D=B+R*t.length,N=D,I=D+t.length,F=D+t.length+1,z=D+1;r.push(N,I,z),r.push(F,z,I)}this.setIndex(r),this.setAttribute("position",new Me(a,3)),this.setAttribute("uv",new Me(l,2)),this.setAttribute("normal",new Me(f,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new f4(t.points,t.segments,t.phiStart,t.phiLength)}}class Ix extends lp{constructor(t=1,e=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Ix(t.radius,t.detail)}}class My extends $e{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,a=e/2,l=Math.floor(n),u=Math.floor(i),f=l+1,m=u+1,g=t/l,v=e/u,_=[],b=[],C=[],T=[];for(let S=0;S<m;S++){const R=S*v-a;for(let B=0;B<f;B++){const D=B*g-r;b.push(D,-R,0),C.push(0,0,1),T.push(B/l),T.push(1-S/u)}}for(let S=0;S<u;S++)for(let R=0;R<l;R++){const B=R+f*S,D=R+f*(S+1),N=R+1+f*(S+1),I=R+1+f*S;_.push(B,D,I),_.push(D,N,I)}this.setIndex(_),this.setAttribute("position",new Me(b,3)),this.setAttribute("normal",new Me(C,3)),this.setAttribute("uv",new Me(T,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new My(t.width,t.height,t.widthSegments,t.heightSegments)}}class d4 extends $e{constructor(t=.5,e=1,n=32,i=1,r=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},n=Math.max(3,n),i=Math.max(1,i);const l=[],u=[],f=[],m=[];let g=t;const v=(e-t)/i,_=new nt,b=new Pt;for(let C=0;C<=i;C++){for(let T=0;T<=n;T++){const S=r+T/n*a;_.x=g*Math.cos(S),_.y=g*Math.sin(S),u.push(_.x,_.y,_.z),f.push(0,0,1),b.x=(_.x/e+1)/2,b.y=(_.y/e+1)/2,m.push(b.x,b.y)}g+=v}for(let C=0;C<i;C++){const T=C*(n+1);for(let S=0;S<n;S++){const R=S+T,B=R,D=R+n+1,N=R+n+2,I=R+1;l.push(B,D,I),l.push(D,N,I)}}this.setIndex(l),this.setAttribute("position",new Me(u,3)),this.setAttribute("normal",new Me(f,3)),this.setAttribute("uv",new Me(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new d4(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class p4 extends $e{constructor(t=new Ng([new Pt(0,.5),new Pt(-.5,-.5),new Pt(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],r=[],a=[];let l=0,u=0;if(Array.isArray(t)===!1)f(t);else for(let m=0;m<t.length;m++)f(t[m]),this.addGroup(l,u,m),l+=u,u=0;this.setIndex(n),this.setAttribute("position",new Me(i,3)),this.setAttribute("normal",new Me(r,3)),this.setAttribute("uv",new Me(a,2));function f(m){const g=i.length/3,v=m.extractPoints(e);let _=v.shape;const b=v.holes;Cc.isClockWise(_)===!1&&(_=_.reverse());for(let T=0,S=b.length;T<S;T++){const R=b[T];Cc.isClockWise(R)===!0&&(b[T]=R.reverse())}const C=Cc.triangulateShape(_,b);for(let T=0,S=b.length;T<S;T++){const R=b[T];_=_.concat(R)}for(let T=0,S=_.length;T<S;T++){const R=_[T];i.push(R.x,R.y,0),r.push(0,0,1),a.push(R.x,R.y)}for(let T=0,S=C.length;T<S;T++){const R=C[T],B=R[0]+g,D=R[1]+g,N=R[2]+g;n.push(B,D,N),u+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return YG(e,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const a=e[t.shapes[i]];n.push(a)}return new p4(n,t.curveSegments)}}function YG(s,t){if(t.shapes=[],Array.isArray(s))for(let e=0,n=s.length;e<n;e++){const i=s[e];t.shapes.push(i.uuid)}else t.shapes.push(s.uuid);return t}class Ux extends $e{constructor(t=1,e=32,n=16,i=0,r=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:l},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const u=Math.min(a+l,Math.PI);let f=0;const m=[],g=new nt,v=new nt,_=[],b=[],C=[],T=[];for(let S=0;S<=n;S++){const R=[],B=S/n;let D=0;S===0&&a===0?D=.5/e:S===n&&u===Math.PI&&(D=-.5/e);for(let N=0;N<=e;N++){const I=N/e;g.x=-t*Math.cos(i+I*r)*Math.sin(a+B*l),g.y=t*Math.cos(a+B*l),g.z=t*Math.sin(i+I*r)*Math.sin(a+B*l),b.push(g.x,g.y,g.z),v.copy(g).normalize(),C.push(v.x,v.y,v.z),T.push(I+D,1-B),R.push(f++)}m.push(R)}for(let S=0;S<n;S++)for(let R=0;R<e;R++){const B=m[S][R+1],D=m[S][R],N=m[S+1][R],I=m[S+1][R+1];(S!==0||a>0)&&_.push(B,D,I),(S!==n-1||u<Math.PI)&&_.push(D,N,I)}this.setIndex(_),this.setAttribute("position",new Me(b,3)),this.setAttribute("normal",new Me(C,3)),this.setAttribute("uv",new Me(T,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ux(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class m4 extends lp{constructor(t=1,e=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new m4(t.radius,t.detail)}}class g4 extends $e{constructor(t=1,e=.4,n=12,i=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const a=[],l=[],u=[],f=[],m=new nt,g=new nt,v=new nt;for(let _=0;_<=n;_++)for(let b=0;b<=i;b++){const C=b/i*r,T=_/n*Math.PI*2;g.x=(t+e*Math.cos(T))*Math.cos(C),g.y=(t+e*Math.cos(T))*Math.sin(C),g.z=e*Math.sin(T),l.push(g.x,g.y,g.z),m.x=t*Math.cos(C),m.y=t*Math.sin(C),v.subVectors(g,m).normalize(),u.push(v.x,v.y,v.z),f.push(b/i),f.push(_/n)}for(let _=1;_<=n;_++)for(let b=1;b<=i;b++){const C=(i+1)*_+b-1,T=(i+1)*(_-1)+b-1,S=(i+1)*(_-1)+b,R=(i+1)*_+b;a.push(C,T,R),a.push(T,S,R)}this.setIndex(a),this.setAttribute("position",new Me(l,3)),this.setAttribute("normal",new Me(u,3)),this.setAttribute("uv",new Me(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new g4(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class v4 extends $e{constructor(t=1,e=.4,n=64,i=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},n=Math.floor(n),i=Math.floor(i);const l=[],u=[],f=[],m=[],g=new nt,v=new nt,_=new nt,b=new nt,C=new nt,T=new nt,S=new nt;for(let B=0;B<=n;++B){const D=B/n*r*Math.PI*2;R(D,r,a,t,_),R(D+.01,r,a,t,b),T.subVectors(b,_),S.addVectors(b,_),C.crossVectors(T,S),S.crossVectors(C,T),C.normalize(),S.normalize();for(let N=0;N<=i;++N){const I=N/i*Math.PI*2,F=-e*Math.cos(I),z=e*Math.sin(I);g.x=_.x+(F*S.x+z*C.x),g.y=_.y+(F*S.y+z*C.y),g.z=_.z+(F*S.z+z*C.z),u.push(g.x,g.y,g.z),v.subVectors(g,_).normalize(),f.push(v.x,v.y,v.z),m.push(B/n),m.push(N/i)}}for(let B=1;B<=n;B++)for(let D=1;D<=i;D++){const N=(i+1)*(B-1)+(D-1),I=(i+1)*B+(D-1),F=(i+1)*B+D,z=(i+1)*(B-1)+D;l.push(N,I,z),l.push(I,F,z)}this.setIndex(l),this.setAttribute("position",new Me(u,3)),this.setAttribute("normal",new Me(f,3)),this.setAttribute("uv",new Me(m,2));function R(B,D,N,I,F){const z=Math.cos(B),U=Math.sin(B),P=N/D*B,X=Math.cos(P);F.x=I*(2+X)*.5*z,F.y=I*(2+X)*U*.5,F.z=I*Math.sin(P)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new v4(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class y4 extends $e{constructor(t=new G5(new nt(-1,-1,0),new nt(-1,1,0),new nt(1,1,0)),e=64,n=1,i=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r};const a=t.computeFrenetFrames(e,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new nt,u=new nt,f=new Pt;let m=new nt;const g=[],v=[],_=[],b=[];C(),this.setIndex(b),this.setAttribute("position",new Me(g,3)),this.setAttribute("normal",new Me(v,3)),this.setAttribute("uv",new Me(_,2));function C(){for(let B=0;B<e;B++)T(B);T(r===!1?e:0),R(),S()}function T(B){m=t.getPointAt(B/e,m);const D=a.normals[B],N=a.binormals[B];for(let I=0;I<=i;I++){const F=I/i*Math.PI*2,z=Math.sin(F),U=-Math.cos(F);u.x=U*D.x+z*N.x,u.y=U*D.y+z*N.y,u.z=U*D.z+z*N.z,u.normalize(),v.push(u.x,u.y,u.z),l.x=m.x+n*u.x,l.y=m.y+n*u.y,l.z=m.z+n*u.z,g.push(l.x,l.y,l.z)}}function S(){for(let B=1;B<=e;B++)for(let D=1;D<=i;D++){const N=(i+1)*(B-1)+(D-1),I=(i+1)*B+(D-1),F=(i+1)*B+D,z=(i+1)*(B-1)+D;b.push(N,I,z),b.push(I,F,z)}}function R(){for(let B=0;B<=e;B++)for(let D=0;D<=i;D++)f.x=B/e,f.y=D/i,_.push(f.x,f.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new y4(new e3[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class K9 extends $e{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],n=new Set,i=new nt,r=new nt;if(t.index!==null){const a=t.attributes.position,l=t.index;let u=t.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,m=u.length;f<m;++f){const g=u[f],v=g.start,_=g.count;for(let b=v,C=v+_;b<C;b+=3)for(let T=0;T<3;T++){const S=l.getX(b+T),R=l.getX(b+(T+1)%3);i.fromBufferAttribute(a,S),r.fromBufferAttribute(a,R),P6(i,r,n)===!0&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}}else{const a=t.attributes.position;for(let l=0,u=a.count/3;l<u;l++)for(let f=0;f<3;f++){const m=3*l+f,g=3*l+(f+1)%3;i.fromBufferAttribute(a,m),r.fromBufferAttribute(a,g),P6(i,r,n)===!0&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new Me(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function P6(s,t,e){const n=`${s.x},${s.y},${s.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${s.x},${s.y},${s.z}`;return e.has(n)===!0||e.has(i)===!0?!1:(e.add(n),e.add(i),!0)}var F6=Object.freeze({__proto__:null,BoxGeometry:i0,CapsuleGeometry:a4,CircleGeometry:o4,ConeGeometry:Nx,CylinderGeometry:Ox,DodecahedronGeometry:l4,EdgesGeometry:z9,ExtrudeGeometry:u4,IcosahedronGeometry:h4,LatheGeometry:f4,OctahedronGeometry:Ix,PlaneGeometry:My,PolyhedronGeometry:lp,RingGeometry:d4,ShapeGeometry:p4,SphereGeometry:Ux,TetrahedronGeometry:m4,TorusGeometry:g4,TorusKnotGeometry:v4,TubeGeometry:y4,WireframeGeometry:K9});class J9 extends gs{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ae(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class Z9 extends Ks{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Px extends gs{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ae(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Bl extends Px{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Pt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return nn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ae(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ae(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ae(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class $9 extends gs{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ae(16777215),this.specular=new ae(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qo,this.combine=Mx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class tO extends gs{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ae(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class V5 extends gs{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class eO extends gs{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qo,this.combine=Mx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Q5 extends gs{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ap,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class X5 extends gs{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class nO extends gs{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ae(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class iO extends oa{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Bm(s,t){return!s||s.constructor===t?s:typeof t.BYTES_PER_ELEMENT=="number"?new t(s):Array.prototype.slice.call(s)}function sO(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}function rO(s){function t(i,r){return s[i]-s[r]}const e=s.length,n=new Array(e);for(let i=0;i!==e;++i)n[i]=i;return n.sort(t),n}function b8(s,t,e){const n=s.length,i=new s.constructor(n);for(let r=0,a=0;a!==n;++r){const l=e[r]*t;for(let u=0;u!==t;++u)i[a++]=s[l+u]}return i}function j5(s,t,e,n){let i=1,r=s[0];for(;r!==void 0&&r[n]===void 0;)r=s[i++];if(r===void 0)return;let a=r[n];if(a!==void 0)if(Array.isArray(a))do a=r[n],a!==void 0&&(t.push(r.time),e.push(...a)),r=s[i++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[n],a!==void 0&&(t.push(r.time),a.toArray(e,e.length)),r=s[i++];while(r!==void 0);else do a=r[n],a!==void 0&&(t.push(r.time),e.push(a)),r=s[i++];while(r!==void 0)}function WG(s,t,e,n,i=30){const r=s.clone();r.name=t;const a=[];for(let u=0;u<r.tracks.length;++u){const f=r.tracks[u],m=f.getValueSize(),g=[],v=[];for(let _=0;_<f.times.length;++_){const b=f.times[_]*i;if(!(b<e||b>=n)){g.push(f.times[_]);for(let C=0;C<m;++C)v.push(f.values[_*m+C])}}g.length!==0&&(f.times=Bm(g,f.times.constructor),f.values=Bm(v,f.values.constructor),a.push(f))}r.tracks=a;let l=1/0;for(let u=0;u<r.tracks.length;++u)l>r.tracks[u].times[0]&&(l=r.tracks[u].times[0]);for(let u=0;u<r.tracks.length;++u)r.tracks[u].shift(-1*l);return r.resetDuration(),r}function KG(s,t=0,e=s,n=30){n<=0&&(n=30);const i=e.tracks.length,r=t/n;for(let a=0;a<i;++a){const l=e.tracks[a],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const f=s.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===u});if(f===void 0)continue;let m=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let v=0;const _=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=_/3);const b=l.times.length-1;let C;if(r<=l.times[0]){const S=m,R=g-m;C=l.values.slice(S,R)}else if(r>=l.times[b]){const S=b*g+m,R=S+g-m;C=l.values.slice(S,R)}else{const S=l.createInterpolant(),R=m,B=g-m;S.evaluate(r),C=S.resultBuffer.slice(R,B)}u==="quaternion"&&new aa().fromArray(C).normalize().conjugate().toArray(C);const T=f.times.length;for(let S=0;S<T;++S){const R=S*_+v;if(u==="quaternion")aa.multiplyQuaternionsFlat(f.values,R,C,0,f.values,R);else{const B=_-v*2;for(let D=0;D<B;++D)f.values[R+D]-=C[D]}}}return s.blendMode=T5,s}class JG{static convertArray(t,e){return Bm(t,e)}static isTypedArray(t){return sO(t)}static getKeyframeOrder(t){return rO(t)}static sortedArray(t,e,n){return b8(t,e,n)}static flattenJSON(t,e,n,i){j5(t,e,n,i)}static subclip(t,e,n,i,r=30){return WG(t,e,n,i,r)}static makeClipAdditive(t,e=0,n=t,i=30){return KG(t,e,n,i)}}class Ty{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let a;n:{i:if(!(t<i)){for(let l=n+2;;){if(i===void 0){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(r=i,i=e[++n],t<i)break e}a=e.length;break n}if(!(t>=r)){const l=e[1];t<l&&(n=2,r=l);for(let u=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(i=r,r=e[--n-1],t>=r)break e}a=n,n=0;break n}break t}for(;n<a;){const l=n+a>>>1;t<e[l]?a=l:n=l+1}if(i=e[n],r=e[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let a=0;a!==i;++a)e[a]=n[r+a];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class aO extends Ty{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Lm,endingEnd:Lm}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,a=t+1,l=i[r],u=i[a];if(l===void 0)switch(this.getSettings_().endingStart){case Dm:r=t,l=2*e-n;break;case W_:r=i.length-2,l=e+i[r]-i[r+1];break;default:r=t,l=n}if(u===void 0)switch(this.getSettings_().endingEnd){case Dm:a=t,u=2*n-e;break;case W_:a=1,u=n+i[1]-i[0];break;default:a=t-1,u=e}const f=(n-e)*.5,m=this.valueSize;this._weightPrev=f/(e-l),this._weightNext=f/(u-n),this._offsetPrev=r*m,this._offsetNext=a*m}interpolate_(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=t*l,f=u-l,m=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,_=this._weightNext,b=(n-e)/(i-e),C=b*b,T=C*b,S=-v*T+2*v*C-v*b,R=(1+v)*T+(-1.5-2*v)*C+(-.5+v)*b+1,B=(-1-_)*T+(1.5+_)*C+.5*b,D=_*T-_*C;for(let N=0;N!==l;++N)r[N]=S*a[m+N]+R*a[f+N]+B*a[u+N]+D*a[g+N];return r}}class q5 extends Ty{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=t*l,f=u-l,m=(n-e)/(i-e),g=1-m;for(let v=0;v!==l;++v)r[v]=a[f+v]*g+a[u+v]*m;return r}}class oO extends Ty{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class Ol{constructor(t,e,n,i){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Bm(e,this.TimeBufferType),this.values=Bm(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Bm(t.times,Array),values:Bm(t.values,Array)};const i=t.getInterpolation();i!==t.DefaultInterpolation&&(n.interpolation=i)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new oO(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new q5(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new aO(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case cy:e=this.InterpolantFactoryMethodDiscrete;break;case uy:e=this.InterpolantFactoryMethodLinear;break;case LE:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return cy;case this.InterpolantFactoryMethodLinear:return uy;case this.InterpolantFactoryMethodSmooth:return LE}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,a=i-1;for(;r!==i&&n[r]<t;)++r;for(;a!==-1&&n[a]>e;)--a;if(++a,r!==0||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const l=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*l,a*l)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let l=0;l!==r;l++){const u=n[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),t=!1;break}if(a!==null&&a>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,a),t=!1;break}a=u}if(i!==void 0&&sO(i))for(let l=0,u=i.length;l!==u;++l){const f=i[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===LE,r=t.length-1;let a=1;for(let l=1;l<r;++l){let u=!1;const f=t[l],m=t[l+1];if(f!==m&&(l!==1||f!==t[0]))if(i)u=!0;else{const g=l*n,v=g-n,_=g+n;for(let b=0;b!==n;++b){const C=e[g+b];if(C!==e[v+b]||C!==e[_+b]){u=!0;break}}}if(u){if(l!==a){t[a]=t[l];const g=l*n,v=a*n;for(let _=0;_!==n;++_)e[v+_]=e[g+_]}++a}}if(r>0){t[a]=t[r];for(let l=r*n,u=a*n,f=0;f!==n;++f)e[u+f]=e[l+f];++a}return a!==t.length?(this.times=t.slice(0,a),this.values=e.slice(0,a*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=this.constructor,i=new n(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}Ol.prototype.ValueTypeName="";Ol.prototype.TimeBufferType=Float32Array;Ol.prototype.ValueBufferType=Float32Array;Ol.prototype.DefaultInterpolation=uy;class s0 extends Ol{constructor(t,e,n){super(t,e,n)}}s0.prototype.ValueTypeName="bool";s0.prototype.ValueBufferType=Array;s0.prototype.DefaultInterpolation=cy;s0.prototype.InterpolantFactoryMethodLinear=void 0;s0.prototype.InterpolantFactoryMethodSmooth=void 0;class Y5 extends Ol{constructor(t,e,n,i){super(t,e,n,i)}}Y5.prototype.ValueTypeName="color";class Gg extends Ol{constructor(t,e,n,i){super(t,e,n,i)}}Gg.prototype.ValueTypeName="number";class lO extends Ty{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=(n-e)/(i-e);let f=t*l;for(let m=f+l;f!==m;f+=4)aa.slerpFlat(r,0,a,f-l,a,f,u);return r}}class kg extends Ol{constructor(t,e,n,i){super(t,e,n,i)}InterpolantFactoryMethodLinear(t){return new lO(this.times,this.values,this.getValueSize(),t)}}kg.prototype.ValueTypeName="quaternion";kg.prototype.InterpolantFactoryMethodSmooth=void 0;class r0 extends Ol{constructor(t,e,n){super(t,e,n)}}r0.prototype.ValueTypeName="string";r0.prototype.ValueBufferType=Array;r0.prototype.DefaultInterpolation=cy;r0.prototype.InterpolantFactoryMethodLinear=void 0;r0.prototype.InterpolantFactoryMethodSmooth=void 0;class Vg extends Ol{constructor(t,e,n,i){super(t,e,n,i)}}Vg.prototype.ValueTypeName="vector";class my{constructor(t="",e=-1,n=[],i=J3){this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=ko(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let a=0,l=n.length;a!==l;++a)e.push($G(n[a]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,a=n.length;r!==a;++r)e.push(Ol.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const r=e.length,a=[];for(let l=0;l<r;l++){let u=[],f=[];u.push((l+r-1)%r,l,(l+1)%r),f.push(0,1,0);const m=rO(u);u=b8(u,1,m),f=b8(f,1,m),!i&&u[0]===0&&(u.push(r),f.push(f[0])),a.push(new Gg(".morphTargetInfluences["+e[l].name+"]",u,f).scale(1/n))}return new this(t,-1,a)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const i=t;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let l=0,u=t.length;l<u;l++){const f=t[l],m=f.name.match(r);if(m&&m.length>1){const g=m[1];let v=i[g];v||(i[g]=v=[]),v.push(f)}}const a=[];for(const l in i)a.push(this.CreateFromMorphTargetSequence(l,i[l],e,n));return a}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(g,v,_,b,C){if(_.length!==0){const T=[],S=[];j5(_,T,S,b),T.length!==0&&C.push(new g(v,T,S))}},i=[],r=t.name||"default",a=t.fps||30,l=t.blendMode;let u=t.length||-1;const f=t.hierarchy||[];for(let g=0;g<f.length;g++){const v=f[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const _={};let b;for(b=0;b<v.length;b++)if(v[b].morphTargets)for(let C=0;C<v[b].morphTargets.length;C++)_[v[b].morphTargets[C]]=-1;for(const C in _){const T=[],S=[];for(let R=0;R!==v[b].morphTargets.length;++R){const B=v[b];T.push(B.time),S.push(B.morphTarget===C?1:0)}i.push(new Gg(".morphTargetInfluence["+C+"]",T,S))}u=_.length*a}else{const _=".bones["+e[g].name+"]";n(Vg,_+".position",v,"pos",i),n(kg,_+".quaternion",v,"rot",i),n(Vg,_+".scale",v,"scl",i)}}return i.length===0?null:new this(r,u,i,l)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,i=t.length;n!==i;++n){const r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ZG(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Gg;case"vector":case"vector2":case"vector3":case"vector4":return Vg;case"color":return Y5;case"quaternion":return kg;case"bool":case"boolean":return s0;case"string":return r0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+s)}function $G(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=ZG(s.type);if(s.times===void 0){const e=[],n=[];j5(s.keys,e,n,"value"),s.times=e,s.values=n}return t.parse!==void 0?t.parse(s):new t(s.name,s.times,s.values,s.interpolation)}const Jh={enabled:!1,files:{},add:function(s,t){this.enabled!==!1&&(this.files[s]=t)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class W5{constructor(t,e,n){const i=this;let r=!1,a=0,l=0,u;const f=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(m){l++,r===!1&&i.onStart!==void 0&&i.onStart(m,a,l),r=!0},this.itemEnd=function(m){a++,i.onProgress!==void 0&&i.onProgress(m,a,l),a===l&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(m){i.onError!==void 0&&i.onError(m)},this.resolveURL=function(m){return u?u(m):m},this.setURLModifier=function(m){return u=m,this},this.addHandler=function(m,g){return f.push(m,g),this},this.removeHandler=function(m){const g=f.indexOf(m);return g!==-1&&f.splice(g,2),this},this.getHandler=function(m){for(let g=0,v=f.length;g<v;g+=2){const _=f[g],b=f[g+1];if(_.global&&(_.lastIndex=0),_.test(m))return b}return null}}}const j1=new W5;let la=class{constructor(t){this.manager=t!==void 0?t:j1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(i,r){n.load(t,i,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}};la.DEFAULT_MATERIAL_NAME="__DEFAULT";const mh={};class tk extends Error{constructor(t,e){super(t),this.response=e}}class Xo extends la{constructor(t){super(t),this.mimeType="",this.responseType=""}load(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Jh.get(t);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(mh[t]!==void 0){mh[t].push({onLoad:e,onProgress:n,onError:i});return}mh[t]=[],mh[t].push({onLoad:e,onProgress:n,onError:i});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(a).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const m=mh[t],g=f.body.getReader(),v=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),_=v?parseInt(v):0,b=_!==0;let C=0;const T=new ReadableStream({start(S){R();function R(){g.read().then(({done:B,value:D})=>{if(B)S.close();else{C+=D.byteLength;const N=new ProgressEvent("progress",{lengthComputable:b,loaded:C,total:_});for(let I=0,F=m.length;I<F;I++){const z=m[I];z.onProgress&&z.onProgress(N)}S.enqueue(D),R()}},B=>{S.error(B)})}}});return new Response(T)}else throw new tk(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(m=>new DOMParser().parseFromString(m,l));case"json":return f.json();default:if(l==="")return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,_=new TextDecoder(v);return f.arrayBuffer().then(b=>_.decode(b))}}}).then(f=>{Jh.add(t,f);const m=mh[t];delete mh[t];for(let g=0,v=m.length;g<v;g++){const _=m[g];_.onLoad&&_.onLoad(f)}}).catch(f=>{const m=mh[t];if(m===void 0)throw this.manager.itemError(t),f;delete mh[t];for(let g=0,v=m.length;g<v;g++){const _=m[g];_.onError&&_.onError(f)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class ek extends la{constructor(t){super(t)}load(t,e,n,i){const r=this,a=new Xo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(u){i?i(u):console.error(u),r.manager.itemError(t)}},n,i)}parse(t){const e=[];for(let n=0;n<t.length;n++){const i=my.parse(t[n]);e.push(i)}return e}}class nk extends la{constructor(t){super(t)}load(t,e,n,i){const r=this,a=[],l=new r4,u=new Xo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(r.withCredentials);let f=0;function m(g){u.load(t[g],function(v){const _=r.parse(v,!0);a[g]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},f+=1,f===6&&(_.mipmapCount===1&&(l.minFilter=Ni),l.image=a,l.format=_.format,l.needsUpdate=!0,e&&e(l))},n,i)}if(Array.isArray(t))for(let g=0,v=t.length;g<v;++g)m(g);else u.load(t,function(g){const v=r.parse(g,!0);if(v.isCubemap){const _=v.mipmaps.length/v.mipmapCount;for(let b=0;b<_;b++){a[b]={mipmaps:[]};for(let C=0;C<v.mipmapCount;C++)a[b].mipmaps.push(v.mipmaps[b*v.mipmapCount+C]),a[b].format=v.format,a[b].width=v.width,a[b].height=v.height}l.image=a}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=Ni),l.format=v.format,l.needsUpdate=!0,e&&e(l)},n,i);return l}}class rA extends la{constructor(t){super(t)}load(t,e,n,i){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=Jh.get(t);if(a!==void 0)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;const l=tA("img");function u(){m(),Jh.add(t,this),e&&e(this),r.manager.itemEnd(t)}function f(g){m(),i&&i(g),r.manager.itemError(t),r.manager.itemEnd(t)}function m(){l.removeEventListener("load",u,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",f,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),r.manager.itemStart(t),l.src=t,l}}class ik extends la{constructor(t){super(t)}load(t,e,n,i){const r=new Rx;r.colorSpace=Kn;const a=new rA(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function u(f){a.load(t[f],function(m){r.images[f]=m,l++,l===6&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}for(let f=0;f<t.length;++f)u(f);return r}}class sk extends la{constructor(t){super(t)}load(t,e,n,i){const r=this,a=new Fu,l=new Xo(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(r.withCredentials),l.load(t,function(u){let f;try{f=r.parse(u)}catch(m){if(i!==void 0)i(m);else{console.error(m);return}}f.image!==void 0?a.image=f.image:f.data!==void 0&&(a.image.width=f.width,a.image.height=f.height,a.image.data=f.data),a.wrapS=f.wrapS!==void 0?f.wrapS:zo,a.wrapT=f.wrapT!==void 0?f.wrapT:zo,a.magFilter=f.magFilter!==void 0?f.magFilter:Ni,a.minFilter=f.minFilter!==void 0?f.minFilter:Ni,a.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(a.colorSpace=f.colorSpace),f.flipY!==void 0&&(a.flipY=f.flipY),f.format!==void 0&&(a.format=f.format),f.type!==void 0&&(a.type=f.type),f.mipmaps!==void 0&&(a.mipmaps=f.mipmaps,a.minFilter=Cl),f.mipmapCount===1&&(a.minFilter=Ni),f.generateMipmaps!==void 0&&(a.generateMipmaps=f.generateMipmaps),a.needsUpdate=!0,e&&e(a,f)},n,i),a}}class cO extends la{constructor(t){super(t)}load(t,e,n,i){const r=new wi,a=new rA(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(l){r.image=l,r.needsUpdate=!0,e!==void 0&&e(r)},n,i),r}}let cp=class extends Hn{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new ae(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}};class uO extends cp{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ae(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const dC=new Fe,H6=new nt,z6=new nt;class K5{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Pt(512,512),this.mapType=Ws,this.map=null,this.mapPass=null,this.matrix=new Fe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ey,this._frameExtents=new Pt(1,1),this._viewportCount=1,this._viewports=[new Bn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;H6.setFromMatrixPosition(t.matrixWorld),e.position.copy(H6),z6.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(z6),e.updateMatrixWorld(),dC.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dC),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(dC)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class rk extends K5{constructor(){super(new Rs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=hy*2*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;(n!==e.fov||i!==e.aspect||r!==e.far)&&(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class J5 extends cp{constructor(t,e,n=0,i=Math.PI/3,r=0,a=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.target=new Hn,this.distance=n,this.angle=i,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new rk}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const G6=new Fe,n_=new nt,pC=new nt;class ak extends K5{constructor(){super(new Rs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Pt(4,2),this._viewportCount=6,this._viewports=[new Bn(2,1,1,1),new Bn(0,1,1,1),new Bn(3,1,1,1),new Bn(1,1,1,1),new Bn(3,0,1,1),new Bn(1,0,1,1)],this._cubeDirections=[new nt(1,0,0),new nt(-1,0,0),new nt(0,0,1),new nt(0,0,-1),new nt(0,1,0),new nt(0,-1,0)],this._cubeUps=[new nt(0,1,0),new nt(0,1,0),new nt(0,1,0),new nt(0,1,0),new nt(0,0,1),new nt(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),n_.setFromMatrixPosition(t.matrixWorld),n.position.copy(n_),pC.copy(n.position),pC.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(pC),n.updateMatrixWorld(),i.makeTranslation(-n_.x,-n_.y,-n_.z),G6.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(G6)}}class Z5 extends cp{constructor(t,e,n=0,i=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new ak}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Cy extends wx{constructor(t=-1,e=1,n=1,i=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,a=n+t,l=i+e,u=i-e;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=f*this.view.offsetX,a=r+f*this.view.width,l-=m*this.view.offsetY,u=l-m*this.view.height}this.projectionMatrix.makeOrthographic(r,a,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class ok extends K5{constructor(){super(new Cy(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class $5 extends cp{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.target=new Hn,this.shadow=new ok}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class hO extends cp{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class fO extends cp{constructor(t,e,n=10,i=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class dO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new nt)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*i),e.addScaledVector(a[2],.488603*r),e.addScaledVector(a[3],.488603*n),e.addScaledVector(a[4],1.092548*(n*i)),e.addScaledVector(a[5],1.092548*(i*r)),e.addScaledVector(a[6],.315392*(3*r*r-1)),e.addScaledVector(a[7],1.092548*(n*r)),e.addScaledVector(a[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],2*.511664*i),e.addScaledVector(a[2],2*.511664*r),e.addScaledVector(a[3],2*.511664*n),e.addScaledVector(a[4],2*.429043*n*i),e.addScaledVector(a[5],2*.429043*i*r),e.addScaledVector(a[6],.743125*r*r-.247708),e.addScaledVector(a[7],2*.429043*n*r),e.addScaledVector(a[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+i*3);return this}toArray(t=[],e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+i*3);return t}static getBasisAt(t,e){const n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}class pO extends cp{constructor(t=new dO,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class _4 extends la{constructor(t){super(t),this.textures={}}load(t,e,n,i){const r=this,a=new Xo(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(u){i?i(u):console.error(u),r.manager.itemError(t)}},n,i)}parse(t){const e=this.textures;function n(r){return e[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),e[r]}const i=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(i.uuid=t.uuid),t.name!==void 0&&(i.name=t.name),t.color!==void 0&&i.color!==void 0&&i.color.setHex(t.color),t.roughness!==void 0&&(i.roughness=t.roughness),t.metalness!==void 0&&(i.metalness=t.metalness),t.sheen!==void 0&&(i.sheen=t.sheen),t.sheenColor!==void 0&&(i.sheenColor=new ae().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(i.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(t.emissive),t.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(t.specular),t.specularIntensity!==void 0&&(i.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(i.shininess=t.shininess),t.clearcoat!==void 0&&(i.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(i.dispersion=t.dispersion),t.iridescence!==void 0&&(i.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(i.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(i.transmission=t.transmission),t.thickness!==void 0&&(i.thickness=t.thickness),t.attenuationDistance!==void 0&&(i.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(i.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(i.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(i.fog=t.fog),t.flatShading!==void 0&&(i.flatShading=t.flatShading),t.blending!==void 0&&(i.blending=t.blending),t.combine!==void 0&&(i.combine=t.combine),t.side!==void 0&&(i.side=t.side),t.shadowSide!==void 0&&(i.shadowSide=t.shadowSide),t.opacity!==void 0&&(i.opacity=t.opacity),t.transparent!==void 0&&(i.transparent=t.transparent),t.alphaTest!==void 0&&(i.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(i.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(i.depthFunc=t.depthFunc),t.depthTest!==void 0&&(i.depthTest=t.depthTest),t.depthWrite!==void 0&&(i.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(i.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(i.blendSrc=t.blendSrc),t.blendDst!==void 0&&(i.blendDst=t.blendDst),t.blendEquation!==void 0&&(i.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(i.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(i.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(i.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(i.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(i.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(i.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(i.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(i.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(i.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(i.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(i.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(i.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(i.rotation=t.rotation),t.linewidth!==void 0&&(i.linewidth=t.linewidth),t.dashSize!==void 0&&(i.dashSize=t.dashSize),t.gapSize!==void 0&&(i.gapSize=t.gapSize),t.scale!==void 0&&(i.scale=t.scale),t.polygonOffset!==void 0&&(i.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(i.dithering=t.dithering),t.alphaToCoverage!==void 0&&(i.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(i.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(i.visible=t.visible),t.toneMapped!==void 0&&(i.toneMapped=t.toneMapped),t.userData!==void 0&&(i.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const r in t.uniforms){const a=t.uniforms[r];switch(i.uniforms[r]={},a.type){case"t":i.uniforms[r].value=n(a.value);break;case"c":i.uniforms[r].value=new ae().setHex(a.value);break;case"v2":i.uniforms[r].value=new Pt().fromArray(a.value);break;case"v3":i.uniforms[r].value=new nt().fromArray(a.value);break;case"v4":i.uniforms[r].value=new Bn().fromArray(a.value);break;case"m3":i.uniforms[r].value=new on().fromArray(a.value);break;case"m4":i.uniforms[r].value=new Fe().fromArray(a.value);break;default:i.uniforms[r].value=a.value}}if(t.defines!==void 0&&(i.defines=t.defines),t.vertexShader!==void 0&&(i.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(i.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(i.glslVersion=t.glslVersion),t.extensions!==void 0)for(const r in t.extensions)i.extensions[r]=t.extensions[r];if(t.lights!==void 0&&(i.lights=t.lights),t.clipping!==void 0&&(i.clipping=t.clipping),t.size!==void 0&&(i.size=t.size),t.sizeAttenuation!==void 0&&(i.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(i.map=n(t.map)),t.matcap!==void 0&&(i.matcap=n(t.matcap)),t.alphaMap!==void 0&&(i.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(i.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(i.bumpScale=t.bumpScale),t.normalMap!==void 0&&(i.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(i.normalMapType=t.normalMapType),t.normalScale!==void 0){let r=t.normalScale;Array.isArray(r)===!1&&(r=[r,r]),i.normalScale=new Pt().fromArray(r)}return t.displacementMap!==void 0&&(i.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(i.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(i.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(i.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(i.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(i.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(i.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(i.specularMap=n(t.specularMap)),t.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(t.specularIntensityMap)),t.specularColorMap!==void 0&&(i.specularColorMap=n(t.specularColorMap)),t.envMap!==void 0&&(i.envMap=n(t.envMap)),t.envMapRotation!==void 0&&i.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(i.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(i.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(i.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(i.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(i.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(i.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(i.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(i.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(i.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Pt().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(i.iridescenceMap=n(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(i.transmissionMap=n(t.transmissionMap)),t.thicknessMap!==void 0&&(i.thicknessMap=n(t.thicknessMap)),t.anisotropyMap!==void 0&&(i.anisotropyMap=n(t.anisotropyMap)),t.sheenColorMap!==void 0&&(i.sheenColorMap=n(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(t.sheenRoughnessMap)),i}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return _4.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:J9,SpriteMaterial:B5,RawShaderMaterial:Z9,ShaderMaterial:Ks,PointsMaterial:s4,MeshPhysicalMaterial:Bl,MeshStandardMaterial:Px,MeshPhongMaterial:$9,MeshToonMaterial:tO,MeshNormalMaterial:V5,MeshLambertMaterial:eO,MeshDepthMaterial:Q5,MeshDistanceMaterial:X5,MeshBasicMaterial:Go,MeshMatcapMaterial:nO,LineDashedMaterial:iO,LineBasicMaterial:oa,Material:gs};return new e[t]}}class Wd{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class mO extends $e{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class gO extends la{constructor(t){super(t)}load(t,e,n,i){const r=this,a=new Xo(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(u){i?i(u):console.error(u),r.manager.itemError(t)}},n,i)}parse(t){const e={},n={};function i(_,b){if(e[b]!==void 0)return e[b];const T=_.interleavedBuffers[b],S=r(_,T.buffer),R=X1(T.type,S),B=new Lx(R,T.stride);return B.uuid=T.uuid,e[b]=B,B}function r(_,b){if(n[b]!==void 0)return n[b];const T=_.arrayBuffers[b],S=new Uint32Array(T).buffer;return n[b]=S,S}const a=t.isInstancedBufferGeometry?new mO:new $e,l=t.data.index;if(l!==void 0){const _=X1(l.type,l.array);a.setIndex(new zn(_,1))}const u=t.data.attributes;for(const _ in u){const b=u[_];let C;if(b.isInterleavedBufferAttribute){const T=i(t.data,b.data);C=new ep(T,b.itemSize,b.offset,b.normalized)}else{const T=X1(b.type,b.array),S=b.isInstancedBufferAttribute?Hg:zn;C=new S(T,b.itemSize,b.normalized)}b.name!==void 0&&(C.name=b.name),b.usage!==void 0&&C.setUsage(b.usage),a.setAttribute(_,C)}const f=t.data.morphAttributes;if(f)for(const _ in f){const b=f[_],C=[];for(let T=0,S=b.length;T<S;T++){const R=b[T];let B;if(R.isInterleavedBufferAttribute){const D=i(t.data,R.data);B=new ep(D,R.itemSize,R.offset,R.normalized)}else{const D=X1(R.type,R.array);B=new zn(D,R.itemSize,R.normalized)}R.name!==void 0&&(B.name=R.name),C.push(B)}a.morphAttributes[_]=C}t.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=t.data.groups||t.data.drawcalls||t.data.offsets;if(g!==void 0)for(let _=0,b=g.length;_!==b;++_){const C=g[_];a.addGroup(C.start,C.count,C.materialIndex)}const v=t.data.boundingSphere;if(v!==void 0){const _=new nt;v.center!==void 0&&_.fromArray(v.center),a.boundingSphere=new pr(_,v.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}}class lk extends la{constructor(t){super(t)}load(t,e,n,i){const r=this,a=this.path===""?Wd.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const l=new Xo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(u){let f=null;try{f=JSON.parse(u)}catch(g){i!==void 0&&i(g),console.error("THREE:ObjectLoader: Can't parse "+t+".",g.message);return}const m=f.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}r.parse(f,e)},n,i)}async loadAsync(t,e){const n=this,i=this.path===""?Wd.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||i;const r=new Xo(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const a=await r.loadAsync(t,e),l=JSON.parse(a),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await n.parseAsync(l)}parse(t,e){const n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),a=this.parseImages(t.images,function(){e!==void 0&&e(f)}),l=this.parseTextures(t.textures,a),u=this.parseMaterials(t.materials,l),f=this.parseObject(t.object,r,u,l,n),m=this.parseSkeletons(t.skeletons,f);if(this.bindSkeletons(f,m),this.bindLightTargets(f),e!==void 0){let g=!1;for(const v in a)if(a[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&e(f)}return f}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),a=this.parseTextures(t.textures,r),l=this.parseMaterials(t.materials,a),u=this.parseObject(t.object,i,l,a,e),f=this.parseSkeletons(t.skeletons,u);return this.bindSkeletons(u,f),this.bindLightTargets(u),u}parseShapes(t){const e={};if(t!==void 0)for(let n=0,i=t.length;n<i;n++){const r=new Ng().fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},i={};if(e.traverse(function(r){r.isBone&&(i[r.uuid]=r)}),t!==void 0)for(let r=0,a=t.length;r<a;r++){const l=new Dx().fromJSON(t[r],i);n[l.uuid]=l}return n}parseGeometries(t,e){const n={};if(t!==void 0){const i=new gO;for(let r=0,a=t.length;r<a;r++){let l;const u=t[r];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=i.parse(u);break;default:u.type in F6?l=F6[u.type].fromJSON(u,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),n[u.uuid]=l}}return n}parseMaterials(t,e){const n={},i={};if(t!==void 0){const r=new _4;r.setTextures(e);for(let a=0,l=t.length;a<l;a++){const u=t[a];n[u.uuid]===void 0&&(n[u.uuid]=r.parse(u)),i[u.uuid]=n[u.uuid]}}return i}parseAnimations(t){const e={};if(t!==void 0)for(let n=0;n<t.length;n++){const i=t[n],r=my.parse(i);e[r.uuid]=r}return e}parseImages(t,e){const n=this,i={};let r;function a(u){return n.manager.itemStart(u),r.load(u,function(){n.manager.itemEnd(u)},void 0,function(){n.manager.itemError(u),n.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const f=u,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;return a(m)}else return u.data?{data:X1(u.type,u.data),width:u.width,height:u.height}:null}if(t!==void 0&&t.length>0){const u=new W5(e);r=new rA(u),r.setCrossOrigin(this.crossOrigin);for(let f=0,m=t.length;f<m;f++){const g=t[f],v=g.url;if(Array.isArray(v)){const _=[];for(let b=0,C=v.length;b<C;b++){const T=v[b],S=l(T);S!==null&&(S instanceof HTMLImageElement?_.push(S):_.push(new Fu(S.data,S.width,S.height)))}i[g.uuid]=new jd(_)}else{const _=l(g.url);i[g.uuid]=new jd(_)}}}return i}async parseImagesAsync(t){const e=this,n={};let i;async function r(a){if(typeof a=="string"){const l=a,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:e.resourcePath+l;return await i.loadAsync(u)}else return a.data?{data:X1(a.type,a.data),width:a.width,height:a.height}:null}if(t!==void 0&&t.length>0){i=new rA(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,l=t.length;a<l;a++){const u=t[a],f=u.url;if(Array.isArray(f)){const m=[];for(let g=0,v=f.length;g<v;g++){const _=f[g],b=await r(_);b!==null&&(b instanceof HTMLImageElement?m.push(b):m.push(new Fu(b.data,b.width,b.height)))}n[u.uuid]=new jd(m)}else{const m=await r(u.url);n[u.uuid]=new jd(m)}}}return n}parseTextures(t,e){function n(r,a){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),a[r])}const i={};if(t!==void 0)for(let r=0,a=t.length;r<a;r++){const l=t[r];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),e[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=e[l.image],f=u.data;let m;Array.isArray(f)?(m=new Rx,f.length===6&&(m.needsUpdate=!0)):(f&&f.data?m=new Fu:m=new wi,f&&(m.needsUpdate=!0)),m.source=u,m.uuid=l.uuid,l.name!==void 0&&(m.name=l.name),l.mapping!==void 0&&(m.mapping=n(l.mapping,ck)),l.channel!==void 0&&(m.channel=l.channel),l.offset!==void 0&&m.offset.fromArray(l.offset),l.repeat!==void 0&&m.repeat.fromArray(l.repeat),l.center!==void 0&&m.center.fromArray(l.center),l.rotation!==void 0&&(m.rotation=l.rotation),l.wrap!==void 0&&(m.wrapS=n(l.wrap[0],k6),m.wrapT=n(l.wrap[1],k6)),l.format!==void 0&&(m.format=l.format),l.internalFormat!==void 0&&(m.internalFormat=l.internalFormat),l.type!==void 0&&(m.type=l.type),l.colorSpace!==void 0&&(m.colorSpace=l.colorSpace),l.minFilter!==void 0&&(m.minFilter=n(l.minFilter,V6)),l.magFilter!==void 0&&(m.magFilter=n(l.magFilter,V6)),l.anisotropy!==void 0&&(m.anisotropy=l.anisotropy),l.flipY!==void 0&&(m.flipY=l.flipY),l.generateMipmaps!==void 0&&(m.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(m.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(m.compareFunction=l.compareFunction),l.userData!==void 0&&(m.userData=l.userData),i[l.uuid]=m}return i}parseObject(t,e,n,i,r){let a;function l(v){return e[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),e[v]}function u(v){if(v!==void 0){if(Array.isArray(v)){const _=[];for(let b=0,C=v.length;b<C;b++){const T=v[b];n[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",T),_.push(n[T])}return _}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function f(v){return i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),i[v]}let m,g;switch(t.type){case"Scene":a=new eA,t.background!==void 0&&(Number.isInteger(t.background)?a.background=new ae(t.background):a.background=f(t.background)),t.environment!==void 0&&(a.environment=f(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?a.fog=new e4(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(a.fog=new t4(t.fog.color,t.fog.density)),t.fog.name!==""&&(a.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(a.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(a.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&a.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":a=new Rs(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(a.focus=t.focus),t.zoom!==void 0&&(a.zoom=t.zoom),t.filmGauge!==void 0&&(a.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(a.filmOffset=t.filmOffset),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new Cy(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(a.zoom=t.zoom),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new hO(t.color,t.intensity);break;case"DirectionalLight":a=new $5(t.color,t.intensity),a.target=t.target||"";break;case"PointLight":a=new Z5(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new fO(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new J5(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),a.target=t.target||"";break;case"HemisphereLight":a=new uO(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=new pO().fromJSON(t);break;case"SkinnedMesh":m=l(t.geometry),g=u(t.material),a=new O5(m,g),t.bindMode!==void 0&&(a.bindMode=t.bindMode),t.bindMatrix!==void 0&&a.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(a.skeleton=t.skeleton);break;case"Mesh":m=l(t.geometry),g=u(t.material),a=new as(m,g);break;case"InstancedMesh":m=l(t.geometry),g=u(t.material);const v=t.count,_=t.instanceMatrix,b=t.instanceColor;a=new N5(m,g,v),a.instanceMatrix=new Hg(new Float32Array(_.array),16),b!==void 0&&(a.instanceColor=new Hg(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":m=l(t.geometry),g=u(t.material),a=new F9(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,g),a.geometry=m,a.perObjectFrustumCulled=t.perObjectFrustumCulled,a.sortObjects=t.sortObjects,a._drawRanges=t.drawRanges,a._reservedRanges=t.reservedRanges,a._geometryInfo=t.geometryInfo.map(C=>{let T=null,S=null;return C.boundingBox!==void 0&&(T=new Br,T.min.fromArray(C.boundingBox.min),T.max.fromArray(C.boundingBox.max)),C.boundingSphere!==void 0&&(S=new pr,S.radius=C.boundingSphere.radius,S.center.fromArray(C.boundingSphere.center)),{...C,boundingBox:T,boundingSphere:S}}),a._instanceInfo=t.instanceInfo,a._availableInstanceIds=t._availableInstanceIds,a._availableGeometryIds=t._availableGeometryIds,a._nextIndexStart=t.nextIndexStart,a._nextVertexStart=t.nextVertexStart,a._geometryCount=t.geometryCount,a._maxInstanceCount=t.maxInstanceCount,a._maxVertexCount=t.maxVertexCount,a._maxIndexCount=t.maxIndexCount,a._geometryInitialized=t.geometryInitialized,a._matricesTexture=f(t.matricesTexture.uuid),a._indirectTexture=f(t.indirectTexture.uuid),t.colorsTexture!==void 0&&(a._colorsTexture=f(t.colorsTexture.uuid)),t.boundingSphere!==void 0&&(a.boundingSphere=new pr,a.boundingSphere.center.fromArray(t.boundingSphere.center),a.boundingSphere.radius=t.boundingSphere.radius),t.boundingBox!==void 0&&(a.boundingBox=new Br,a.boundingBox.min.fromArray(t.boundingBox.min),a.boundingBox.max.fromArray(t.boundingBox.max));break;case"LOD":a=new P9;break;case"Line":a=new af(l(t.geometry),u(t.material));break;case"LineLoop":a=new I5(l(t.geometry),u(t.material));break;case"LineSegments":a=new Bc(l(t.geometry),u(t.material));break;case"PointCloud":case"Points":a=new U5(l(t.geometry),u(t.material));break;case"Sprite":a=new U9(u(t.material));break;case"Group":a=new Kh;break;case"Bone":a=new n4;break;default:a=new Hn}if(a.uuid=t.uuid,t.name!==void 0&&(a.name=t.name),t.matrix!==void 0?(a.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(t.position!==void 0&&a.position.fromArray(t.position),t.rotation!==void 0&&a.rotation.fromArray(t.rotation),t.quaternion!==void 0&&a.quaternion.fromArray(t.quaternion),t.scale!==void 0&&a.scale.fromArray(t.scale)),t.up!==void 0&&a.up.fromArray(t.up),t.castShadow!==void 0&&(a.castShadow=t.castShadow),t.receiveShadow!==void 0&&(a.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(a.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(a.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(a.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(a.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(a.visible=t.visible),t.frustumCulled!==void 0&&(a.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(a.renderOrder=t.renderOrder),t.userData!==void 0&&(a.userData=t.userData),t.layers!==void 0&&(a.layers.mask=t.layers),t.children!==void 0){const v=t.children;for(let _=0;_<v.length;_++)a.add(this.parseObject(v[_],e,n,i,r))}if(t.animations!==void 0){const v=t.animations;for(let _=0;_<v.length;_++){const b=v[_];a.animations.push(r[b])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(a.autoUpdate=t.autoUpdate);const v=t.levels;for(let _=0;_<v.length;_++){const b=v[_],C=a.getObjectByProperty("uuid",b.object);C!==void 0&&a.addLevel(C,b.distance,b.hysteresis)}}return a}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=e[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const n=e.target,i=t.getObjectByProperty("uuid",n);i!==void 0?e.target=i:e.target=new Hn}})}}const ck={UVMapping:V3,CubeReflectionMapping:rf,CubeRefractionMapping:$d,EquirectangularReflectionMapping:q_,EquirectangularRefractionMapping:Y_,CubeUVReflectionMapping:by},k6={RepeatWrapping:tp,ClampToEdgeWrapping:zo,MirroredRepeatWrapping:ay},V6={NearestFilter:os,NearestMipmapNearestFilter:Q3,NearestMipmapLinearFilter:Rm,LinearFilter:Ni,LinearMipmapNearestFilter:W1,LinearMipmapLinearFilter:Cl};class vO extends la{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=Jh.get(t);if(a!==void 0){if(r.manager.itemStart(t),a.then){a.then(f=>{e&&e(f),r.manager.itemEnd(t)}).catch(f=>{i&&i(f)});return}return setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const u=fetch(t,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(f){return Jh.add(t,f),e&&e(f),r.manager.itemEnd(t),f}).catch(function(f){i&&i(f),Jh.remove(t),r.manager.itemError(t),r.manager.itemEnd(t)});Jh.add(t,u),r.manager.itemStart(t)}}let nE,tR=class{static getContext(){return nE===void 0&&(nE=new(window.AudioContext||window.webkitAudioContext)),nE}static setContext(t){nE=t}};class uk extends la{constructor(t){super(t)}load(t,e,n,i){const r=this,a=new Xo(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(u){try{const f=u.slice(0);tR.getContext().decodeAudioData(f,function(g){e(g)}).catch(l)}catch(f){l(f)}},n,i);function l(u){i?i(u):console.error(u),r.manager.itemError(t)}}}const Q6=new Fe,X6=new Fe,cm=new Fe;class hk{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Rs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Rs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,cm.copy(t.projectionMatrix);const i=e.eyeSep/2,r=i*e.near/e.focus,a=e.near*Math.tan(Og*e.fov*.5)/e.zoom;let l,u;X6.elements[12]=-i,Q6.elements[12]=i,l=-a*e.aspect+r,u=a*e.aspect+r,cm.elements[0]=2*e.near/(u-l),cm.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(cm),l=-a*e.aspect-r,u=a*e.aspect-r,cm.elements[0]=2*e.near/(u-l),cm.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(cm)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(X6),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Q6)}}class yO extends Rs{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}let eR=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=j6(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=j6();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};function j6(){return performance.now()}const um=new nt,q6=new aa,fk=new nt,hm=new nt;class dk extends Hn{constructor(){super(),this.type="AudioListener",this.context=tR.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new eR}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(um,q6,fk),hm.set(0,0,-1).applyQuaternion(q6),e.positionX){const i=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(um.x,i),e.positionY.linearRampToValueAtTime(um.y,i),e.positionZ.linearRampToValueAtTime(um.z,i),e.forwardX.linearRampToValueAtTime(hm.x,i),e.forwardY.linearRampToValueAtTime(hm.y,i),e.forwardZ.linearRampToValueAtTime(hm.z,i),e.upX.linearRampToValueAtTime(n.x,i),e.upY.linearRampToValueAtTime(n.y,i),e.upZ.linearRampToValueAtTime(n.z,i)}else e.setPosition(um.x,um.y,um.z),e.setOrientation(hm.x,hm.y,hm.z,n.x,n.y,n.z)}}class _O extends Hn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const fm=new nt,Y6=new aa,pk=new nt,dm=new nt;class mk extends _O{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(fm,Y6,pk),dm.set(0,0,1).applyQuaternion(Y6);const e=this.panner;if(e.positionX){const n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(fm.x,n),e.positionY.linearRampToValueAtTime(fm.y,n),e.positionZ.linearRampToValueAtTime(fm.z,n),e.orientationX.linearRampToValueAtTime(dm.x,n),e.orientationY.linearRampToValueAtTime(dm.y,n),e.orientationZ.linearRampToValueAtTime(dm.z,n)}else e.setPosition(fm.x,fm.y,fm.z),e.setOrientation(dm.x,dm.y,dm.z)}}class gk{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class AO{constructor(t,e,n){this.binding=t,this.valueSize=n;let i,r,a;switch(e){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==i;++l)n[r+l]=n[l];a=e}else{a+=e;const l=e/a;this._mixBufferRegion(n,r,0,l,i)}this.cumulativeWeight=a}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const u=e*this._origIndex;this._mixBufferRegion(n,i,u,1-r,e)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let u=e,f=e+e;u!==f;++u)if(n[u]!==n[u+e]){l.setValue(n,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let r=n,a=i;r!==a;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,i,r){if(i>=.5)for(let a=0;a!==r;++a)t[e+a]=t[n+a]}_slerp(t,e,n,i){aa.slerpFlat(t,e,t,e,t,n,i)}_slerpAdditive(t,e,n,i,r){const a=this._workIndex*r;aa.multiplyQuaternionsFlat(t,a,t,e,t,n),aa.slerpFlat(t,e,t,e,t,a,i)}_lerp(t,e,n,i,r){const a=1-i;for(let l=0;l!==r;++l){const u=e+l;t[u]=t[u]*a+t[n+l]*i}}_lerpAdditive(t,e,n,i,r){for(let a=0;a!==r;++a){const l=e+a;t[l]=t[l]+t[n+a]*i}}}const nR="\\[\\]\\.:\\/",vk=new RegExp("["+nR+"]","g"),iR="[^"+nR+"]",yk="[^"+nR.replace("\\.","")+"]",_k=/((?:WC+[\/:])*)/.source.replace("WC",iR),Ak=/(WCOD+)?/.source.replace("WCOD",yk),xk=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",iR),bk=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",iR),Sk=new RegExp("^"+_k+Ak+xk+bk+"$"),Ek=["material","materials","bones","map"];class Mk{constructor(t,e,n){const i=n||Qn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class Qn{constructor(t,e,n){this.path=e,this.parsedPath=n||Qn.parseTrackName(e),this.node=Qn.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Qn.Composite(t,e,n):new Qn(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(vk,"")}static parseTrackName(t){const e=Sk.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const r=n.nodeName.substring(i+1);Ek.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(r){for(let a=0;a<r.length;a++){const l=r[a];if(l.name===e||l.uuid===e)return l;const u=n(l.children);if(u)return u}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=Qn.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let f=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let m=0;m<t.length;m++)if(t[m].name===f){f=m;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(f!==void 0){if(t[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[f]}}const a=t[i];if(a===void 0){const f=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+i+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?l=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(r!==void 0){if(i==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[r]!==void 0&&(r=t.morphTargetDictionary[r])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Qn.Composite=Mk;Qn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Qn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Qn.prototype.GetterByBindingType=[Qn.prototype._getValue_direct,Qn.prototype._getValue_array,Qn.prototype._getValue_arrayElement,Qn.prototype._getValue_toArray];Qn.prototype.SetterByBindingTypeAndVersioning=[[Qn.prototype._setValue_direct,Qn.prototype._setValue_direct_setNeedsUpdate,Qn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_array,Qn.prototype._setValue_array_setNeedsUpdate,Qn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_arrayElement,Qn.prototype._setValue_arrayElement_setNeedsUpdate,Qn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_fromArray,Qn.prototype._setValue_fromArray_setNeedsUpdate,Qn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Tk{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ko(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length;let l,u=t.length,f=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const v=arguments[m],_=v.uuid;let b=e[_];if(b===void 0){b=u++,e[_]=b,t.push(v);for(let C=0,T=a;C!==T;++C)r[C].push(new Qn(v,n[C],i[C]))}else if(b<f){l=t[b];const C=--f,T=t[C];e[T.uuid]=b,t[b]=T,e[_]=C,t[C]=v;for(let S=0,R=a;S!==R;++S){const B=r[S],D=B[C];let N=B[b];B[b]=D,N===void 0&&(N=new Qn(v,n[S],i[S])),B[C]=N}}else t[b]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],f=u.uuid,m=e[f];if(m!==void 0&&m>=r){const g=r++,v=t[g];e[v.uuid]=m,t[m]=v,e[f]=g,t[g]=u;for(let _=0,b=i;_!==b;++_){const C=n[_],T=C[g],S=C[m];C[m]=T,C[g]=S}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,a=t.length;for(let l=0,u=arguments.length;l!==u;++l){const f=arguments[l],m=f.uuid,g=e[m];if(g!==void 0)if(delete e[m],g<r){const v=--r,_=t[v],b=--a,C=t[b];e[_.uuid]=g,t[g]=_,e[C.uuid]=v,t[v]=C,t.pop();for(let T=0,S=i;T!==S;++T){const R=n[T],B=R[v],D=R[b];R[g]=B,R[v]=D,R.pop()}}else{const v=--a,_=t[v];v>0&&(e[_.uuid]=g),t[g]=_,t.pop();for(let b=0,C=i;b!==C;++b){const T=n[b];T[g]=T[v],T.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let i=n[t];const r=this._bindings;if(i!==void 0)return r[i];const a=this._paths,l=this._parsedPaths,u=this._objects,f=u.length,m=this.nCachedObjects_,g=new Array(f);i=r.length,n[t]=i,a.push(t),l.push(e),r.push(g);for(let v=m,_=u.length;v!==_;++v){const b=u[v];g[v]=new Qn(b,t,e)}return g}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const i=this._paths,r=this._parsedPaths,a=this._bindings,l=a.length-1,u=a[l],f=t[l];e[f]=n,a[n]=u,a.pop(),r[n]=r[l],r.pop(),i[n]=i[l],i.pop()}}}class xO{constructor(t,e,n=null,i=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const r=e.tracks,a=r.length,l=new Array(a),u={endingStart:Lm,endingEnd:Lm};for(let f=0;f!==a;++f){const m=r[f].createInterpolant(null);l[f]=m,m.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=m9,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n=!1){if(t.fadeOut(e),this.fadeIn(e),n===!0){const i=this._clip.duration,r=t._clip.duration,a=r/i,l=i/r;t.warp(1,a,e),this.warp(l,1,e)}return this}crossFadeTo(t,e,n=!1){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,r=i.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=i._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,f=l.sampleValues;return u[0]=r,u[1]=r+n,f[0]=t/a,f[1]=e/a,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled){this._updateWeight(t);return}const r=this._startTime;if(r!==null){const u=(t-r)*n;u<0||n===0?e=0:(this._startTime=null,e=n*u)}e*=this._updateTimeScale(t);const a=this._updateTime(e),l=this._updateWeight(t);if(l>0){const u=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case T5:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(a),f[m].accumulateAdditive(l);break;case J3:default:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(a),f[m].accumulate(i,l)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,r=this._loopCount;const a=n===g9;if(t===0)return r===-1?i:a&&(r&1)===1?e-i:i;if(n===p9){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else if(i<0)i=0;else{this.time=i;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(r===-1&&(t>=0?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=e||i<0){const l=Math.floor(i/e);i-=e*l,r+=Math.abs(l);const u=this.repetitions-r;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(u===1){const f=t<0;this._setEndings(f,!f,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=i;if(a&&(r&1)===1)return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=Dm,i.endingEnd=Dm):(t?i.endingStart=this.zeroSlopeAtStart?Dm:Lm:i.endingStart=W_,e?i.endingEnd=this.zeroSlopeAtEnd?Dm:Lm:i.endingEnd=W_)}_scheduleFading(t,e,n){const i=this._mixer,r=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=r,u[0]=e,l[1]=r+t,u[1]=n,this}}const Ck=new Float32Array(1);class wk extends Yo{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,l=t._interpolants,u=n.uuid,f=this._bindingsByRootAndName;let m=f[u];m===void 0&&(m={},f[u]=m);for(let g=0;g!==r;++g){const v=i[g],_=v.name;let b=m[_];if(b!==void 0)++b.referenceCount,a[g]=b;else{if(b=a[g],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,u,_));continue}const C=e&&e._propertyBindings[g].binding.parsedPath;b=new AO(Qn.create(n,_,C),v.ValueTypeName,v.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,u,_),a[g]=b}l[g].resultBuffer=b.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,i=t._clip.uuid,r=this._actionsByClip[i];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,i,n)}const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const r=e[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const r=e[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,n){const i=this._actions,r=this._actionsByClip;let a=r[e];if(a===void 0)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{const l=a.knownActions;t._byClipCacheIndex=l.length,l.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,a=this._actionsByClip,l=a[r],u=l.knownActions,f=u[u.length-1],m=t._byClipCacheIndex;f._byClipCacheIndex=m,u[m]=f,u.pop(),t._byClipCacheIndex=null;const g=l.actionByRoot,v=(t._localRoot||this._root).uuid;delete g[v],u.length===0&&delete a[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const r=e[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let a=i[e];a===void 0&&(a={},i[e]=a),a[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,l=a[i],u=e[e.length-1],f=t._cacheIndex;u._cacheIndex=f,e[f]=u,e.pop(),delete l[r],Object.keys(l).length===0&&delete a[i]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new q5(new Float32Array(2),new Float32Array(2),1,Ck),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const i=e||this._root,r=i.uuid;let a=typeof t=="string"?my.findByName(i,t):t;const l=a!==null?a.uuid:t,u=this._actionsByClip[l];let f=null;if(n===void 0&&(a!==null?n=a.blendMode:n=J3),u!==void 0){const g=u.actionByRoot[r];if(g!==void 0&&g.blendMode===n)return g;f=u.knownActions[0],a===null&&(a=f._clip)}if(a===null)return null;const m=new xO(this,a,e,n);return this._bindAction(m,f),this._addInactiveAction(m,l,r),m}existingAction(t,e){const n=e||this._root,i=n.uuid,r=typeof t=="string"?my.findByName(n,t):t,a=r?r.uuid:t,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[i]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1;for(let f=0;f!==n;++f)e[f]._update(i,t,r,a);const l=this._bindings,u=this._nActiveBindings;for(let f=0;f!==u;++f)l[f].apply(a);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(r!==void 0){const a=r.knownActions;for(let l=0,u=a.length;l!==u;++l){const f=a[l];this._deactivateAction(f);const m=f._cacheIndex,g=e[e.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,g._cacheIndex=m,e[m]=g,e.pop(),this._removeInactiveBindingsForAction(f)}delete i[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const a in n){const l=n[a].actionByRoot,u=l[e];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const i=this._bindingsByRootAndName,r=i[e];if(r!==void 0)for(const a in r){const l=r[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Rk extends Z3{constructor(t=1,e=1,n=1,i={}){super(t,e,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new $3(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class Lk extends Z3{constructor(t=1,e=1,n=1,i={}){super(t,e,i),this.isRenderTargetArray=!0,this.depth=n,this.texture=new Cx(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class xn{constructor(t){this.value=t}clone(){return new xn(this.value.clone===void 0?this.value:this.value.clone())}}let Dk=0;class Bk extends Yo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Dk++}),this.name="",this.usage=J_,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,i=e.length;n<i;n++){const r=Array.isArray(e[n])?e[n]:[e[n]];for(let a=0;a<r.length;a++)this.uniforms.push(r[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class Ok extends Lx{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class Nk{constructor(t,e,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const W6=new Fe;class bO{constructor(t,e,n=0,i=1/0){this.ray=new Sy(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new fy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return W6.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(W6),this}intersectObject(t,e=!0,n=[]){return S8(t,this,n,e),n.sort(K6),n}intersectObjects(t,e=!0,n=[]){for(let i=0,r=t.length;i<r;i++)S8(t[i],this,n,e);return n.sort(K6),n}}function K6(s,t){return s.distance-t.distance}function S8(s,t,e,n){let i=!0;if(s.layers.test(t.layers)&&s.raycast(t,e)===!1&&(i=!1),i===!0&&n===!0){const r=s.children;for(let a=0,l=r.length;a<l;a++)S8(r[a],t,e,!0)}}class Ik{constructor(t=1,e=0,n=0){this.radius=t,this.phi=e,this.theta=n}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=nn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(nn(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Uk{constructor(t=1,e=0,n=0){this.radius=t,this.theta=e,this.y=n}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return new this.constructor().copy(this)}}class sR{constructor(t,e,n,i){sR.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let n=0;n<4;n++)this.elements[n]=t[n+e];return this}set(t,e,n,i){const r=this.elements;return r[0]=t,r[2]=e,r[1]=n,r[3]=i,this}}const J6=new Pt;class Pk{constructor(t=new Pt(1/0,1/0),e=new Pt(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=J6.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,J6).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Z6=new nt,iE=new nt;class Fk{constructor(t=new nt,e=new nt){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Z6.subVectors(t,this.start),iE.subVectors(this.end,this.start);const n=iE.dot(iE);let r=iE.dot(Z6)/n;return e&&(r=nn(r,0,1)),r}closestPointToPoint(t,e,n){const i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const $6=new nt;class Hk extends Hn{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new $e,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,u=32;a<u;a++,l++){const f=a/u*Math.PI*2,m=l/u*Math.PI*2;i.push(Math.cos(f),Math.sin(f),1,Math.cos(m),Math.sin(m),1)}n.setAttribute("position",new Me(i,3));const r=new oa({fog:!1,toneMapped:!1});this.cone=new Bc(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),$6.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt($6),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const cd=new nt,sE=new Fe,mC=new Fe;class zk extends Bc{constructor(t){const e=SO(t),n=new $e,i=[],r=[],a=new ae(0,0,1),l=new ae(0,1,0);for(let f=0;f<e.length;f++){const m=e[f];m.parent&&m.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(l.r,l.g,l.b))}n.setAttribute("position",new Me(i,3)),n.setAttribute("color",new Me(r,3));const u=new oa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");mC.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<e.length;r++){const l=e[r];l.parent&&l.parent.isBone&&(sE.multiplyMatrices(mC,l.matrixWorld),cd.setFromMatrixPosition(sE),i.setXYZ(a,cd.x,cd.y,cd.z),sE.multiplyMatrices(mC,l.parent.matrixWorld),cd.setFromMatrixPosition(sE),i.setXYZ(a+1,cd.x,cd.y,cd.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function SO(s){const t=[];s.isBone===!0&&t.push(s);for(let e=0;e<s.children.length;e++)t.push(...SO(s.children[e]));return t}class Gk extends as{constructor(t,e,n){const i=new Ux(e,4,2),r=new Go({wireframe:!0,fog:!1,toneMapped:!1});super(i,r),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const kk=new nt,tL=new ae,eL=new ae;class Vk extends Hn{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Ix(e);i.rotateY(Math.PI*.5),this.material=new Go({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),a=new Float32Array(r.count*3);i.setAttribute("color",new zn(a,3)),this.add(new as(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");tL.copy(this.light.color),eL.copy(this.light.groundColor);for(let n=0,i=e.count;n<i;n++){const r=n<i/2?tL:eL;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(kk.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Qk extends Bc{constructor(t=10,e=10,n=4473924,i=8947848){n=new ae(n),i=new ae(i);const r=e/2,a=t/e,l=t/2,u=[],f=[];for(let v=0,_=0,b=-l;v<=e;v++,b+=a){u.push(-l,0,b,l,0,b),u.push(b,0,-l,b,0,l);const C=v===r?n:i;C.toArray(f,_),_+=3,C.toArray(f,_),_+=3,C.toArray(f,_),_+=3,C.toArray(f,_),_+=3}const m=new $e;m.setAttribute("position",new Me(u,3)),m.setAttribute("color",new Me(f,3));const g=new oa({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Xk extends Bc{constructor(t=10,e=16,n=8,i=64,r=4473924,a=8947848){r=new ae(r),a=new ae(a);const l=[],u=[];if(e>1)for(let g=0;g<e;g++){const v=g/e*(Math.PI*2),_=Math.sin(v)*t,b=Math.cos(v)*t;l.push(0,0,0),l.push(_,0,b);const C=g&1?r:a;u.push(C.r,C.g,C.b),u.push(C.r,C.g,C.b)}for(let g=0;g<n;g++){const v=g&1?r:a,_=t-t/n*g;for(let b=0;b<i;b++){let C=b/i*(Math.PI*2),T=Math.sin(C)*_,S=Math.cos(C)*_;l.push(T,0,S),u.push(v.r,v.g,v.b),C=(b+1)/i*(Math.PI*2),T=Math.sin(C)*_,S=Math.cos(C)*_,l.push(T,0,S),u.push(v.r,v.g,v.b)}}const f=new $e;f.setAttribute("position",new Me(l,3)),f.setAttribute("color",new Me(u,3));const m=new oa({vertexColors:!0,toneMapped:!1});super(f,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const nL=new nt,rE=new nt,iL=new nt;class jk extends Hn{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let i=new $e;i.setAttribute("position",new Me([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new oa({fog:!1,toneMapped:!1});this.lightPlane=new af(i,r),this.add(this.lightPlane),i=new $e,i.setAttribute("position",new Me([0,0,0,0,0,1],3)),this.targetLine=new af(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),nL.setFromMatrixPosition(this.light.matrixWorld),rE.setFromMatrixPosition(this.light.target.matrixWorld),iL.subVectors(rE,nL),this.lightPlane.lookAt(rE),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(rE),this.targetLine.scale.z=iL.length()}}const aE=new nt,is=new wx;class qk extends Bc{constructor(t){const e=new $e,n=new oa({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(b,C){u(b),u(C)}function u(b){i.push(0,0,0),r.push(0,0,0),a[b]===void 0&&(a[b]=[]),a[b].push(i.length/3-1)}e.setAttribute("position",new Me(i,3)),e.setAttribute("color",new Me(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const f=new ae(16755200),m=new ae(16711680),g=new ae(43775),v=new ae(16777215),_=new ae(3355443);this.setColors(f,m,g,v,_)}setColors(t,e,n,i,r){const l=this.geometry.getAttribute("color");l.setXYZ(0,t.r,t.g,t.b),l.setXYZ(1,t.r,t.g,t.b),l.setXYZ(2,t.r,t.g,t.b),l.setXYZ(3,t.r,t.g,t.b),l.setXYZ(4,t.r,t.g,t.b),l.setXYZ(5,t.r,t.g,t.b),l.setXYZ(6,t.r,t.g,t.b),l.setXYZ(7,t.r,t.g,t.b),l.setXYZ(8,t.r,t.g,t.b),l.setXYZ(9,t.r,t.g,t.b),l.setXYZ(10,t.r,t.g,t.b),l.setXYZ(11,t.r,t.g,t.b),l.setXYZ(12,t.r,t.g,t.b),l.setXYZ(13,t.r,t.g,t.b),l.setXYZ(14,t.r,t.g,t.b),l.setXYZ(15,t.r,t.g,t.b),l.setXYZ(16,t.r,t.g,t.b),l.setXYZ(17,t.r,t.g,t.b),l.setXYZ(18,t.r,t.g,t.b),l.setXYZ(19,t.r,t.g,t.b),l.setXYZ(20,t.r,t.g,t.b),l.setXYZ(21,t.r,t.g,t.b),l.setXYZ(22,t.r,t.g,t.b),l.setXYZ(23,t.r,t.g,t.b),l.setXYZ(24,e.r,e.g,e.b),l.setXYZ(25,e.r,e.g,e.b),l.setXYZ(26,e.r,e.g,e.b),l.setXYZ(27,e.r,e.g,e.b),l.setXYZ(28,e.r,e.g,e.b),l.setXYZ(29,e.r,e.g,e.b),l.setXYZ(30,e.r,e.g,e.b),l.setXYZ(31,e.r,e.g,e.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,i.r,i.g,i.b),l.setXYZ(39,i.r,i.g,i.b),l.setXYZ(40,r.r,r.g,r.b),l.setXYZ(41,r.r,r.g,r.b),l.setXYZ(42,r.r,r.g,r.b),l.setXYZ(43,r.r,r.g,r.b),l.setXYZ(44,r.r,r.g,r.b),l.setXYZ(45,r.r,r.g,r.b),l.setXYZ(46,r.r,r.g,r.b),l.setXYZ(47,r.r,r.g,r.b),l.setXYZ(48,r.r,r.g,r.b),l.setXYZ(49,r.r,r.g,r.b),l.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap,n=1,i=1;is.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===wl?-1:0;ps("c",e,t,is,0,0,r),ps("t",e,t,is,0,0,1),ps("n1",e,t,is,-1,-1,r),ps("n2",e,t,is,n,-1,r),ps("n3",e,t,is,-1,i,r),ps("n4",e,t,is,n,i,r),ps("f1",e,t,is,-1,-1,1),ps("f2",e,t,is,n,-1,1),ps("f3",e,t,is,-1,i,1),ps("f4",e,t,is,n,i,1),ps("u1",e,t,is,n*.7,i*1.1,r),ps("u2",e,t,is,-1*.7,i*1.1,r),ps("u3",e,t,is,0,i*2,r),ps("cf1",e,t,is,-1,0,1),ps("cf2",e,t,is,n,0,1),ps("cf3",e,t,is,0,-1,1),ps("cf4",e,t,is,0,i,1),ps("cn1",e,t,is,-1,0,r),ps("cn2",e,t,is,n,0,r),ps("cn3",e,t,is,0,-1,r),ps("cn4",e,t,is,0,i,r),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ps(s,t,e,n,i,r,a){aE.set(i,r,a).unproject(n);const l=t[s];if(l!==void 0){const u=e.getAttribute("position");for(let f=0,m=l.length;f<m;f++)u.setXYZ(l[f],aE.x,aE.y,aE.z)}}const oE=new Br;class Yk extends Bc{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),r=new $e;r.setIndex(new zn(n,1)),r.setAttribute("position",new zn(i,3)),super(r,new oa({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&oE.setFromObject(this.object),oE.isEmpty())return;const t=oE.min,e=oE.max,n=this.geometry.attributes.position,i=n.array;i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=t.x,i[4]=e.y,i[5]=e.z,i[6]=t.x,i[7]=t.y,i[8]=e.z,i[9]=e.x,i[10]=t.y,i[11]=e.z,i[12]=e.x,i[13]=e.y,i[14]=t.z,i[15]=t.x,i[16]=e.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=e.x,i[22]=t.y,i[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Wk extends Bc{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new $e;r.setIndex(new zn(n,1)),r.setAttribute("position",new Me(i,3)),super(r,new oa({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Kk extends af{constructor(t,e=1,n=16776960){const i=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new $e;a.setAttribute("position",new Me(r,3)),a.computeBoundingSphere(),super(a,new oa({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new $e;u.setAttribute("position",new Me(l,3)),u.computeBoundingSphere(),this.add(new as(u,new Go({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const sL=new nt;let lE,gC;class Jk extends Hn{constructor(t=new nt(0,0,1),e=new nt(0,0,0),n=1,i=16776960,r=n*.2,a=r*.2){super(),this.type="ArrowHelper",lE===void 0&&(lE=new $e,lE.setAttribute("position",new Me([0,0,0,0,1,0],3)),gC=new Nx(.5,1,5,1),gC.translate(0,-.5,0)),this.position.copy(e),this.line=new af(lE,new oa({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new as(gC,new Go({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{sL.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(sL,e)}}setLength(t,e=t*.2,n=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Zk extends Bc{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new $e;i.setAttribute("position",new Me(e,3)),i.setAttribute("color",new Me(n,3));const r=new oa({vertexColors:!0,toneMapped:!1});super(i,r),this.type="AxesHelper"}setColors(t,e,n){const i=new ae,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class $k{constructor(){this.type="ShapePath",this.color=new ae,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new n3,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this}bezierCurveTo(t,e,n,i,r,a){return this.currentPath.bezierCurveTo(t,e,n,i,r,a),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(S){const R=[];for(let B=0,D=S.length;B<D;B++){const N=S[B],I=new Ng;I.curves=N.curves,R.push(I)}return R}function n(S,R){const B=R.length;let D=!1;for(let N=B-1,I=0;I<B;N=I++){let F=R[N],z=R[I],U=z.x-F.x,P=z.y-F.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(F=R[I],U=-U,z=R[N],P=-P),S.y<F.y||S.y>z.y)continue;if(S.y===F.y){if(S.x===F.x)return!0}else{const X=P*(S.x-F.x)-U*(S.y-F.y);if(X===0)return!0;if(X<0)continue;D=!D}}else{if(S.y!==F.y)continue;if(z.x<=S.x&&S.x<=F.x||F.x<=S.x&&S.x<=z.x)return!0}}return D}const i=Cc.isClockWise,r=this.subPaths;if(r.length===0)return[];let a,l,u;const f=[];if(r.length===1)return l=r[0],u=new Ng,u.curves=l.curves,f.push(u),f;let m=!i(r[0].getPoints());m=t?!m:m;const g=[],v=[];let _=[],b=0,C;v[b]=void 0,_[b]=[];for(let S=0,R=r.length;S<R;S++)l=r[S],C=l.getPoints(),a=i(C),a=t?!a:a,a?(!m&&v[b]&&b++,v[b]={s:new Ng,p:C},v[b].s.curves=l.curves,m&&b++,_[b]=[]):_[b].push({h:l,p:C[0]});if(!v[0])return e(r);if(v.length>1){let S=!1,R=0;for(let B=0,D=v.length;B<D;B++)g[B]=[];for(let B=0,D=v.length;B<D;B++){const N=_[B];for(let I=0;I<N.length;I++){const F=N[I];let z=!0;for(let U=0;U<v.length;U++)n(F.p,v[U].p)&&(B!==U&&R++,z?(z=!1,g[U].push(F)):S=!0);z&&g[B].push(F)}}R>0&&S===!1&&(_=g)}let T;for(let S=0,R=v.length;S<R;S++){u=v[S].s,f.push(u),T=_[S];for(let B=0,D=T.length;B<D;B++)u.holes.push(T[B].h)}return f}}class tV extends Yo{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function eV(s,t){const e=s.image&&s.image.width?s.image.width/s.image.height:1;return e>t?(s.repeat.x=1,s.repeat.y=e/t,s.offset.x=0,s.offset.y=(1-s.repeat.y)/2):(s.repeat.x=t/e,s.repeat.y=1,s.offset.x=(1-s.repeat.x)/2,s.offset.y=0),s}function nV(s,t){const e=s.image&&s.image.width?s.image.width/s.image.height:1;return e>t?(s.repeat.x=t/e,s.repeat.y=1,s.offset.x=(1-s.repeat.x)/2,s.offset.y=0):(s.repeat.x=1,s.repeat.y=e/t,s.offset.x=0,s.offset.y=(1-s.repeat.y)/2),s}function iV(s){return s.repeat.x=1,s.repeat.y=1,s.offset.x=0,s.offset.y=0,s}function E8(s,t,e,n){const i=sV(n);switch(e){case b5:return s*t;case Y3:return s*t/i.components*i.byteLength;case Tx:return s*t/i.components*i.byteLength;case E5:return s*t*2/i.components*i.byteLength;case W3:return s*t*2/i.components*i.byteLength;case S5:return s*t*3/i.components*i.byteLength;case na:return s*t*4/i.components*i.byteLength;case K3:return s*t*4/i.components*i.byteLength;case B_:case O_:return Math.floor((s+3)/4)*Math.floor((t+3)/4)*8;case N_:case I_:return Math.floor((s+3)/4)*Math.floor((t+3)/4)*16;case CM:case RM:return Math.max(s,16)*Math.max(t,8)/4;case TM:case wM:return Math.max(s,8)*Math.max(t,8)/2;case LM:case DM:return Math.floor((s+3)/4)*Math.floor((t+3)/4)*8;case BM:return Math.floor((s+3)/4)*Math.floor((t+3)/4)*16;case OM:return Math.floor((s+3)/4)*Math.floor((t+3)/4)*16;case NM:return Math.floor((s+4)/5)*Math.floor((t+3)/4)*16;case IM:return Math.floor((s+4)/5)*Math.floor((t+4)/5)*16;case UM:return Math.floor((s+5)/6)*Math.floor((t+4)/5)*16;case PM:return Math.floor((s+5)/6)*Math.floor((t+5)/6)*16;case FM:return Math.floor((s+7)/8)*Math.floor((t+4)/5)*16;case HM:return Math.floor((s+7)/8)*Math.floor((t+5)/6)*16;case zM:return Math.floor((s+7)/8)*Math.floor((t+7)/8)*16;case GM:return Math.floor((s+9)/10)*Math.floor((t+4)/5)*16;case kM:return Math.floor((s+9)/10)*Math.floor((t+5)/6)*16;case VM:return Math.floor((s+9)/10)*Math.floor((t+7)/8)*16;case QM:return Math.floor((s+9)/10)*Math.floor((t+9)/10)*16;case XM:return Math.floor((s+11)/12)*Math.floor((t+9)/10)*16;case jM:return Math.floor((s+11)/12)*Math.floor((t+11)/12)*16;case U_:case qM:case YM:return Math.ceil(s/4)*Math.ceil(t/4)*16;case M5:case WM:return Math.ceil(s/4)*Math.ceil(t/4)*8;case KM:case JM:return Math.ceil(s/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function sV(s){switch(s){case Ws:case _5:return{byteLength:1,components:1};case oy:case A5:case n0:return{byteLength:2,components:1};case j3:case q3:return{byteLength:2,components:4};case Hu:case X3:case Na:return{byteLength:4,components:1};case x5:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${s}.`)}class rV{static contain(t,e){return eV(t,e)}static cover(t,e){return nV(t,e)}static fill(t){return iV(t)}static getByteLength(t,e,n,i){return E8(t,e,n,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:e0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=e0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function EO(){let s=null,t=!1,e=null,n=null;function i(r,a){e(r,a),n=s.requestAnimationFrame(i)}return{start:function(){t!==!0&&e!==null&&(n=s.requestAnimationFrame(i),t=!0)},stop:function(){s.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(r){e=r},setContext:function(r){s=r}}}function aV(s){const t=new WeakMap;function e(l,u){const f=l.array,m=l.usage,g=f.byteLength,v=s.createBuffer();s.bindBuffer(u,v),s.bufferData(u,f,m),l.onUploadCallback();let _;if(f instanceof Float32Array)_=s.FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?_=s.HALF_FLOAT:_=s.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=s.SHORT;else if(f instanceof Uint32Array)_=s.UNSIGNED_INT;else if(f instanceof Int32Array)_=s.INT;else if(f instanceof Int8Array)_=s.BYTE;else if(f instanceof Uint8Array)_=s.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=s.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:g}}function n(l,u,f){const m=u.array,g=u.updateRanges;if(s.bindBuffer(f,l),g.length===0)s.bufferSubData(f,0,m);else{g.sort((_,b)=>_.start-b.start);let v=0;for(let _=1;_<g.length;_++){const b=g[v],C=g[_];C.start<=b.start+b.count+1?b.count=Math.max(b.count,C.start+C.count-b.start):(++v,g[v]=C)}g.length=v+1;for(let _=0,b=g.length;_<b;_++){const C=g[_];s.bufferSubData(f,C.start*m.BYTES_PER_ELEMENT,m,C.start,C.count)}u.clearUpdateRanges()}u.onUploadCallback()}function i(l){return l.isInterleavedBufferAttribute&&(l=l.data),t.get(l)}function r(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=t.get(l);u&&(s.deleteBuffer(u.buffer),t.delete(l))}function a(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const m=t.get(l);(!m||m.version<l.version)&&t.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=t.get(l);if(f===void 0)t.set(l,e(l,u));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(f.buffer,l,u),f.version=l.version}}return{get:i,remove:r,update:a}}var oV=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,lV=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,cV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,uV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hV=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,fV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,dV=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,pV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,mV=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,gV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,vV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,yV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,_V=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,AV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,xV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,bV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,SV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,EV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,MV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,TV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,CV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,wV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,RV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,LV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,DV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,BV=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,OV=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,NV=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,IV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,UV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,PV="gl_FragColor = linearToOutputTexel( gl_FragColor );",FV=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,HV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,zV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,GV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,kV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,VV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,QV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,XV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,jV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,qV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,YV=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,WV=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,KV=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,JV=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,ZV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,$V=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,tQ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,eQ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,nQ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,iQ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,sQ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,rQ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,aQ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,oQ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lQ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,cQ=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,uQ=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hQ=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fQ=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,dQ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,pQ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,mQ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,gQ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vQ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,yQ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,_Q=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,AQ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,xQ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,bQ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,SQ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,EQ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,MQ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,TQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,CQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,wQ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,RQ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,LQ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,DQ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,BQ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,OQ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,NQ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,IQ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,UQ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,PQ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,FQ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,HQ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,zQ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,GQ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,kQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,VQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,QQ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,XQ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,jQ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,qQ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,YQ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,WQ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,KQ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,JQ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ZQ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,$Q=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,tX=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,eX=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,nX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,iX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,rX=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const aX=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,oX=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cX=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hX=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,dX=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,pX=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,mX=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,gX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,vX=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yX=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_X=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,AX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,xX=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bX=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SX=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EX=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,MX=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TX=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,CX=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,wX=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RX=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LX=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,DX=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BX=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OX=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NX=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,IX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,UX=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,PX=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,FX=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fn={alphahash_fragment:oV,alphahash_pars_fragment:lV,alphamap_fragment:cV,alphamap_pars_fragment:uV,alphatest_fragment:hV,alphatest_pars_fragment:fV,aomap_fragment:dV,aomap_pars_fragment:pV,batching_pars_vertex:mV,batching_vertex:gV,begin_vertex:vV,beginnormal_vertex:yV,bsdfs:_V,iridescence_fragment:AV,bumpmap_pars_fragment:xV,clipping_planes_fragment:bV,clipping_planes_pars_fragment:SV,clipping_planes_pars_vertex:EV,clipping_planes_vertex:MV,color_fragment:TV,color_pars_fragment:CV,color_pars_vertex:wV,color_vertex:RV,common:LV,cube_uv_reflection_fragment:DV,defaultnormal_vertex:BV,displacementmap_pars_vertex:OV,displacementmap_vertex:NV,emissivemap_fragment:IV,emissivemap_pars_fragment:UV,colorspace_fragment:PV,colorspace_pars_fragment:FV,envmap_fragment:HV,envmap_common_pars_fragment:zV,envmap_pars_fragment:GV,envmap_pars_vertex:kV,envmap_physical_pars_fragment:$V,envmap_vertex:VV,fog_vertex:QV,fog_pars_vertex:XV,fog_fragment:jV,fog_pars_fragment:qV,gradientmap_pars_fragment:YV,lightmap_pars_fragment:WV,lights_lambert_fragment:KV,lights_lambert_pars_fragment:JV,lights_pars_begin:ZV,lights_toon_fragment:tQ,lights_toon_pars_fragment:eQ,lights_phong_fragment:nQ,lights_phong_pars_fragment:iQ,lights_physical_fragment:sQ,lights_physical_pars_fragment:rQ,lights_fragment_begin:aQ,lights_fragment_maps:oQ,lights_fragment_end:lQ,logdepthbuf_fragment:cQ,logdepthbuf_pars_fragment:uQ,logdepthbuf_pars_vertex:hQ,logdepthbuf_vertex:fQ,map_fragment:dQ,map_pars_fragment:pQ,map_particle_fragment:mQ,map_particle_pars_fragment:gQ,metalnessmap_fragment:vQ,metalnessmap_pars_fragment:yQ,morphinstance_vertex:_Q,morphcolor_vertex:AQ,morphnormal_vertex:xQ,morphtarget_pars_vertex:bQ,morphtarget_vertex:SQ,normal_fragment_begin:EQ,normal_fragment_maps:MQ,normal_pars_fragment:TQ,normal_pars_vertex:CQ,normal_vertex:wQ,normalmap_pars_fragment:RQ,clearcoat_normal_fragment_begin:LQ,clearcoat_normal_fragment_maps:DQ,clearcoat_pars_fragment:BQ,iridescence_pars_fragment:OQ,opaque_fragment:NQ,packing:IQ,premultiplied_alpha_fragment:UQ,project_vertex:PQ,dithering_fragment:FQ,dithering_pars_fragment:HQ,roughnessmap_fragment:zQ,roughnessmap_pars_fragment:GQ,shadowmap_pars_fragment:kQ,shadowmap_pars_vertex:VQ,shadowmap_vertex:QQ,shadowmask_pars_fragment:XQ,skinbase_vertex:jQ,skinning_pars_vertex:qQ,skinning_vertex:YQ,skinnormal_vertex:WQ,specularmap_fragment:KQ,specularmap_pars_fragment:JQ,tonemapping_fragment:ZQ,tonemapping_pars_fragment:$Q,transmission_fragment:tX,transmission_pars_fragment:eX,uv_pars_fragment:nX,uv_pars_vertex:iX,uv_vertex:sX,worldpos_vertex:rX,background_vert:aX,background_frag:oX,backgroundCube_vert:lX,backgroundCube_frag:cX,cube_vert:uX,cube_frag:hX,depth_vert:fX,depth_frag:dX,distanceRGBA_vert:pX,distanceRGBA_frag:mX,equirect_vert:gX,equirect_frag:vX,linedashed_vert:yX,linedashed_frag:_X,meshbasic_vert:AX,meshbasic_frag:xX,meshlambert_vert:bX,meshlambert_frag:SX,meshmatcap_vert:EX,meshmatcap_frag:MX,meshnormal_vert:TX,meshnormal_frag:CX,meshphong_vert:wX,meshphong_frag:RX,meshphysical_vert:LX,meshphysical_frag:DX,meshtoon_vert:BX,meshtoon_frag:OX,points_vert:NX,points_frag:IX,shadow_vert:UX,shadow_frag:PX,sprite_vert:FX,sprite_frag:HX},pe={common:{diffuse:{value:new ae(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new on}},envmap:{envMap:{value:null},envMapRotation:{value:new on},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new on}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new on}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new on},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new on},normalScale:{value:new Pt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new on},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new on}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new on}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new on}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ae(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ae(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0},uvTransform:{value:new on}},sprite:{diffuse:{value:new ae(16777215)},opacity:{value:1},center:{value:new Pt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}}},Ec={basic:{uniforms:Ca([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:Ca([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,pe.lights,{emissive:{value:new ae(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:Ca([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,pe.lights,{emissive:{value:new ae(0)},specular:{value:new ae(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:Ca([pe.common,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.roughnessmap,pe.metalnessmap,pe.fog,pe.lights,{emissive:{value:new ae(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},toon:{uniforms:Ca([pe.common,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.gradientmap,pe.fog,pe.lights,{emissive:{value:new ae(0)}}]),vertexShader:fn.meshtoon_vert,fragmentShader:fn.meshtoon_frag},matcap:{uniforms:Ca([pe.common,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,{matcap:{value:null}}]),vertexShader:fn.meshmatcap_vert,fragmentShader:fn.meshmatcap_frag},points:{uniforms:Ca([pe.points,pe.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:Ca([pe.common,pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:Ca([pe.common,pe.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:Ca([pe.common,pe.bumpmap,pe.normalmap,pe.displacementmap,{opacity:{value:1}}]),vertexShader:fn.meshnormal_vert,fragmentShader:fn.meshnormal_frag},sprite:{uniforms:Ca([pe.sprite,pe.fog]),vertexShader:fn.sprite_vert,fragmentShader:fn.sprite_frag},background:{uniforms:{uvTransform:{value:new on},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fn.background_vert,fragmentShader:fn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new on}},vertexShader:fn.backgroundCube_vert,fragmentShader:fn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:Ca([pe.common,pe.displacementmap,{referencePosition:{value:new nt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:Ca([pe.lights,pe.fog,{color:{value:new ae(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};Ec.physical={uniforms:Ca([Ec.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new on},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new on},clearcoatNormalScale:{value:new Pt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new on},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new on},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new on},sheen:{value:0},sheenColor:{value:new ae(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new on},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new on},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new on},transmissionSamplerSize:{value:new Pt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new on},attenuationDistance:{value:0},attenuationColor:{value:new ae(0)},specularColor:{value:new ae(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new on},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new on},anisotropyVector:{value:new Pt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new on}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag};const cE={r:0,b:0,g:0},pm=new Qo,zX=new Fe;function GX(s,t,e,n,i,r,a){const l=new ae(0);let u=r===!0?0:1,f,m,g=null,v=0,_=null;function b(B){let D=B.isScene===!0?B.background:null;return D&&D.isTexture&&(D=(B.backgroundBlurriness>0?e:t).get(D)),D}function C(B){let D=!1;const N=b(B);N===null?S(l,u):N&&N.isColor&&(S(N,1),D=!0);const I=s.xr.getEnvironmentBlendMode();I==="additive"?n.buffers.color.setClear(0,0,0,1,a):I==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(s.autoClear||D)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}function T(B,D){const N=b(D);N&&(N.isCubeTexture||N.mapping===by)?(m===void 0&&(m=new as(new i0(1,1,1),new Ks({name:"BackgroundCubeMaterial",uniforms:dy(Ec.backgroundCube.uniforms),vertexShader:Ec.backgroundCube.vertexShader,fragmentShader:Ec.backgroundCube.fragmentShader,side:qs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(I,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(m)),pm.copy(D.backgroundRotation),pm.x*=-1,pm.y*=-1,pm.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(pm.y*=-1,pm.z*=-1),m.material.uniforms.envMap.value=N,m.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(zX.makeRotationFromEuler(pm)),m.material.toneMapped=Pn.getTransfer(N.colorSpace)!==fi,(g!==N||v!==N.version||_!==s.toneMapping)&&(m.material.needsUpdate=!0,g=N,v=N.version,_=s.toneMapping),m.layers.enableAll(),B.unshift(m,m.geometry,m.material,0,0,null)):N&&N.isTexture&&(f===void 0&&(f=new as(new My(2,2),new Ks({name:"BackgroundMaterial",uniforms:dy(Ec.background.uniforms),vertexShader:Ec.background.vertexShader,fragmentShader:Ec.background.fragmentShader,side:Dc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(f)),f.material.uniforms.t2D.value=N,f.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,f.material.toneMapped=Pn.getTransfer(N.colorSpace)!==fi,N.matrixAutoUpdate===!0&&N.updateMatrix(),f.material.uniforms.uvTransform.value.copy(N.matrix),(g!==N||v!==N.version||_!==s.toneMapping)&&(f.material.needsUpdate=!0,g=N,v=N.version,_=s.toneMapping),f.layers.enableAll(),B.unshift(f,f.geometry,f.material,0,0,null))}function S(B,D){B.getRGB(cE,D9(s)),n.buffers.color.setClear(cE.r,cE.g,cE.b,D,a)}function R(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(B,D=1){l.set(B),u=D,S(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(B){u=B,S(l,u)},render:C,addToRenderList:T,dispose:R}}function kX(s,t){const e=s.getParameter(s.MAX_VERTEX_ATTRIBS),n={},i=v(null);let r=i,a=!1;function l(P,X,ot,it,ct){let dt=!1;const Q=g(it,ot,X);r!==Q&&(r=Q,f(r.object)),dt=_(P,it,ot,ct),dt&&b(P,it,ot,ct),ct!==null&&t.update(ct,s.ELEMENT_ARRAY_BUFFER),(dt||a)&&(a=!1,D(P,X,ot,it),ct!==null&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,t.get(ct).buffer))}function u(){return s.createVertexArray()}function f(P){return s.bindVertexArray(P)}function m(P){return s.deleteVertexArray(P)}function g(P,X,ot){const it=ot.wireframe===!0;let ct=n[P.id];ct===void 0&&(ct={},n[P.id]=ct);let dt=ct[X.id];dt===void 0&&(dt={},ct[X.id]=dt);let Q=dt[it];return Q===void 0&&(Q=v(u()),dt[it]=Q),Q}function v(P){const X=[],ot=[],it=[];for(let ct=0;ct<e;ct++)X[ct]=0,ot[ct]=0,it[ct]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:ot,attributeDivisors:it,object:P,attributes:{},index:null}}function _(P,X,ot,it){const ct=r.attributes,dt=X.attributes;let Q=0;const tt=ot.getAttributes();for(const et in tt)if(tt[et].location>=0){const K=ct[et];let at=dt[et];if(at===void 0&&(et==="instanceMatrix"&&P.instanceMatrix&&(at=P.instanceMatrix),et==="instanceColor"&&P.instanceColor&&(at=P.instanceColor)),K===void 0||K.attribute!==at||at&&K.data!==at.data)return!0;Q++}return r.attributesNum!==Q||r.index!==it}function b(P,X,ot,it){const ct={},dt=X.attributes;let Q=0;const tt=ot.getAttributes();for(const et in tt)if(tt[et].location>=0){let K=dt[et];K===void 0&&(et==="instanceMatrix"&&P.instanceMatrix&&(K=P.instanceMatrix),et==="instanceColor"&&P.instanceColor&&(K=P.instanceColor));const at={};at.attribute=K,K&&K.data&&(at.data=K.data),ct[et]=at,Q++}r.attributes=ct,r.attributesNum=Q,r.index=it}function C(){const P=r.newAttributes;for(let X=0,ot=P.length;X<ot;X++)P[X]=0}function T(P){S(P,0)}function S(P,X){const ot=r.newAttributes,it=r.enabledAttributes,ct=r.attributeDivisors;ot[P]=1,it[P]===0&&(s.enableVertexAttribArray(P),it[P]=1),ct[P]!==X&&(s.vertexAttribDivisor(P,X),ct[P]=X)}function R(){const P=r.newAttributes,X=r.enabledAttributes;for(let ot=0,it=X.length;ot<it;ot++)X[ot]!==P[ot]&&(s.disableVertexAttribArray(ot),X[ot]=0)}function B(P,X,ot,it,ct,dt,Q){Q===!0?s.vertexAttribIPointer(P,X,ot,ct,dt):s.vertexAttribPointer(P,X,ot,it,ct,dt)}function D(P,X,ot,it){C();const ct=it.attributes,dt=ot.getAttributes(),Q=X.defaultAttributeValues;for(const tt in dt){const et=dt[tt];if(et.location>=0){let _t=ct[tt];if(_t===void 0&&(tt==="instanceMatrix"&&P.instanceMatrix&&(_t=P.instanceMatrix),tt==="instanceColor"&&P.instanceColor&&(_t=P.instanceColor)),_t!==void 0){const K=_t.normalized,at=_t.itemSize,xt=t.get(_t);if(xt===void 0)continue;const Et=xt.buffer,lt=xt.type,wt=xt.bytesPerElement,Bt=lt===s.INT||lt===s.UNSIGNED_INT||_t.gpuType===X3;if(_t.isInterleavedBufferAttribute){const Ut=_t.data,Wt=Ut.stride,ve=_t.offset;if(Ut.isInstancedInterleavedBuffer){for(let ee=0;ee<et.locationSize;ee++)S(et.location+ee,Ut.meshPerAttribute);P.isInstancedMesh!==!0&&it._maxInstanceCount===void 0&&(it._maxInstanceCount=Ut.meshPerAttribute*Ut.count)}else for(let ee=0;ee<et.locationSize;ee++)T(et.location+ee);s.bindBuffer(s.ARRAY_BUFFER,Et);for(let ee=0;ee<et.locationSize;ee++)B(et.location+ee,at/et.locationSize,lt,K,Wt*wt,(ve+at/et.locationSize*ee)*wt,Bt)}else{if(_t.isInstancedBufferAttribute){for(let Ut=0;Ut<et.locationSize;Ut++)S(et.location+Ut,_t.meshPerAttribute);P.isInstancedMesh!==!0&&it._maxInstanceCount===void 0&&(it._maxInstanceCount=_t.meshPerAttribute*_t.count)}else for(let Ut=0;Ut<et.locationSize;Ut++)T(et.location+Ut);s.bindBuffer(s.ARRAY_BUFFER,Et);for(let Ut=0;Ut<et.locationSize;Ut++)B(et.location+Ut,at/et.locationSize,lt,K,at*wt,at/et.locationSize*Ut*wt,Bt)}}else if(Q!==void 0){const K=Q[tt];if(K!==void 0)switch(K.length){case 2:s.vertexAttrib2fv(et.location,K);break;case 3:s.vertexAttrib3fv(et.location,K);break;case 4:s.vertexAttrib4fv(et.location,K);break;default:s.vertexAttrib1fv(et.location,K)}}}}R()}function N(){z();for(const P in n){const X=n[P];for(const ot in X){const it=X[ot];for(const ct in it)m(it[ct].object),delete it[ct];delete X[ot]}delete n[P]}}function I(P){if(n[P.id]===void 0)return;const X=n[P.id];for(const ot in X){const it=X[ot];for(const ct in it)m(it[ct].object),delete it[ct];delete X[ot]}delete n[P.id]}function F(P){for(const X in n){const ot=n[X];if(ot[P.id]===void 0)continue;const it=ot[P.id];for(const ct in it)m(it[ct].object),delete it[ct];delete ot[P.id]}}function z(){U(),a=!0,r!==i&&(r=i,f(r.object))}function U(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:l,reset:z,resetDefaultState:U,dispose:N,releaseStatesOfGeometry:I,releaseStatesOfProgram:F,initAttributes:C,enableAttribute:T,disableUnusedAttributes:R}}function VX(s,t,e){let n;function i(f){n=f}function r(f,m){s.drawArrays(n,f,m),e.update(m,n,1)}function a(f,m,g){g!==0&&(s.drawArraysInstanced(n,f,m,g),e.update(m,n,g))}function l(f,m,g){if(g===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,f,0,m,0,g);let _=0;for(let b=0;b<g;b++)_+=m[b];e.update(_,n,1)}function u(f,m,g,v){if(g===0)return;const _=t.get("WEBGL_multi_draw");if(_===null)for(let b=0;b<f.length;b++)a(f[b],m[b],v[b]);else{_.multiDrawArraysInstancedWEBGL(n,f,0,m,0,v,0,g);let b=0;for(let C=0;C<g;C++)b+=m[C]*v[C];e.update(b,n,1)}}this.setMode=i,this.render=r,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function QX(s,t,e,n){let i;function r(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){const F=t.get("EXT_texture_filter_anisotropic");i=s.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(F){return!(F!==na&&n.convert(F)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(F){const z=F===n0&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(F!==Ws&&n.convert(F)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==Na&&!z)}function u(F){if(F==="highp"){if(s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.HIGH_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.MEDIUM_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=e.precision!==void 0?e.precision:"highp";const m=u(f);m!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",m,"instead."),f=m);const g=e.logarithmicDepthBuffer===!0,v=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),_=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),b=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C=s.getParameter(s.MAX_TEXTURE_SIZE),T=s.getParameter(s.MAX_CUBE_MAP_TEXTURE_SIZE),S=s.getParameter(s.MAX_VERTEX_ATTRIBS),R=s.getParameter(s.MAX_VERTEX_UNIFORM_VECTORS),B=s.getParameter(s.MAX_VARYING_VECTORS),D=s.getParameter(s.MAX_FRAGMENT_UNIFORM_VECTORS),N=b>0,I=s.getParameter(s.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:u,textureFormatReadable:a,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:g,reverseDepthBuffer:v,maxTextures:_,maxVertexTextures:b,maxTextureSize:C,maxCubemapSize:T,maxAttributes:S,maxVertexUniforms:R,maxVaryings:B,maxFragmentUniforms:D,vertexTextures:N,maxSamples:I}}function XX(s){const t=this;let e=null,n=0,i=!1,r=!1;const a=new md,l=new on,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const _=g.length!==0||v||n!==0||i;return i=v,n=g.length,_},this.beginShadows=function(){r=!0,m(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(g,v){e=m(g,v,0)},this.setState=function(g,v,_){const b=g.clippingPlanes,C=g.clipIntersection,T=g.clipShadows,S=s.get(g);if(!i||b===null||b.length===0||r&&!T)r?m(null):f();else{const R=r?0:n,B=R*4;let D=S.clippingState||null;u.value=D,D=m(b,v,B,_);for(let N=0;N!==B;++N)D[N]=e[N];S.clippingState=D,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=R}};function f(){u.value!==e&&(u.value=e,u.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function m(g,v,_,b){const C=g!==null?g.length:0;let T=null;if(C!==0){if(T=u.value,b!==!0||T===null){const S=_+C*4,R=v.matrixWorldInverse;l.getNormalMatrix(R),(T===null||T.length<S)&&(T=new Float32Array(S));for(let B=0,D=_;B!==C;++B,D+=4)a.copy(g[B]).applyMatrix4(R,l),a.normal.toArray(T,D),T[D+3]=a.constant}u.value=T,u.needsUpdate=!0}return t.numPlanes=C,t.numIntersection=0,T}}function jX(s){let t=new WeakMap;function e(a,l){return l===q_?a.mapping=rf:l===Y_&&(a.mapping=$d),a}function n(a){if(a&&a.isTexture){const l=a.mapping;if(l===q_||l===Y_)if(t.has(a)){const u=t.get(a).texture;return e(u,a.mapping)}else{const u=a.image;if(u&&u.height>0){const f=new N9(u.height);return f.fromEquirectangularTexture(s,a),t.set(a,f),a.addEventListener("dispose",i),e(f.texture,a.mapping)}else return null}}return a}function i(a){const l=a.target;l.removeEventListener("dispose",i);const u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function r(){t=new WeakMap}return{get:n,dispose:r}}const q1=4,rL=[.125,.215,.35,.446,.526,.582],Mm=20,vC=new Cy,aL=new ae;let yC=null,_C=0,AC=0,xC=!1;const _m=(1+Math.sqrt(5))/2,R1=1/_m,oL=[new nt(-_m,R1,0),new nt(_m,R1,0),new nt(-R1,0,_m),new nt(R1,0,_m),new nt(0,_m,-R1),new nt(0,_m,R1),new nt(-1,1,-1),new nt(1,1,-1),new nt(-1,1,1),new nt(1,1,1)],qX=new nt;class M8{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100,r={}){const{size:a=256,position:l=qX}=r;yC=this._renderer.getRenderTarget(),_C=this._renderer.getActiveCubeFace(),AC=this._renderer.getActiveMipmapLevel(),xC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(t,n,i,u,l),e>0&&this._blur(u,0,0,e),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=uL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=cL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(yC,_C,AC),this._renderer.xr.enabled=xC,t.scissorTest=!1,uE(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===rf||t.mapping===$d?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),yC=this._renderer.getRenderTarget(),_C=this._renderer.getActiveCubeFace(),AC=this._renderer.getActiveMipmapLevel(),xC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Ni,minFilter:Ni,generateMipmaps:!1,type:n0,format:na,colorSpace:zu,depthBuffer:!1},i=lL(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=lL(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=YX(r)),this._blurMaterial=WX(r,t,e)}return i}_compileMaterial(t){const e=new as(this._lodPlanes[0],t);this._renderer.compile(e,vC)}_sceneToCubeUV(t,e,n,i,r){const u=new Rs(90,1,e,n),f=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],g=this._renderer,v=g.autoClear,_=g.toneMapping;g.getClearColor(aL),g.toneMapping=Lc,g.autoClear=!1;const b=new Go({name:"PMREM.Background",side:qs,depthWrite:!1,depthTest:!1}),C=new as(new i0,b);let T=!1;const S=t.background;S?S.isColor&&(b.color.copy(S),t.background=null,T=!0):(b.color.copy(aL),T=!0);for(let R=0;R<6;R++){const B=R%3;B===0?(u.up.set(0,f[R],0),u.position.set(r.x,r.y,r.z),u.lookAt(r.x+m[R],r.y,r.z)):B===1?(u.up.set(0,0,f[R]),u.position.set(r.x,r.y,r.z),u.lookAt(r.x,r.y+m[R],r.z)):(u.up.set(0,f[R],0),u.position.set(r.x,r.y,r.z),u.lookAt(r.x,r.y,r.z+m[R]));const D=this._cubeSize;uE(i,B*D,R>2?D:0,D,D),g.setRenderTarget(i),T&&g.render(C,u),g.render(t,u)}C.geometry.dispose(),C.material.dispose(),g.toneMapping=_,g.autoClear=v,t.background=S}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===rf||t.mapping===$d;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=uL()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=cL());const r=i?this._cubemapMaterial:this._equirectMaterial,a=new as(this._lodPlanes[0],r),l=r.uniforms;l.envMap.value=t;const u=this._cubeSize;uE(e,0,0,3*u,2*u),n.setRenderTarget(e),n.render(a,vC)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const i=this._lodPlanes.length;for(let r=1;r<i;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),l=oL[(i-r-1)%oL.length];this._blur(t,r-1,r,a,l)}e.autoClear=n}_blur(t,e,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,i,"latitudinal",r),this._halfBlur(a,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,a,l){const u=this._renderer,f=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,g=new as(this._lodPlanes[i],f),v=f.uniforms,_=this._sizeLods[n]-1,b=isFinite(r)?Math.PI/(2*_):2*Math.PI/(2*Mm-1),C=r/b,T=isFinite(r)?1+Math.floor(m*C):Mm;T>Mm&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${Mm}`);const S=[];let R=0;for(let F=0;F<Mm;++F){const z=F/C,U=Math.exp(-z*z/2);S.push(U),F===0?R+=U:F<T&&(R+=2*U)}for(let F=0;F<S.length;F++)S[F]=S[F]/R;v.envMap.value=t.texture,v.samples.value=T,v.weights.value=S,v.latitudinal.value=a==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:B}=this;v.dTheta.value=b,v.mipInt.value=B-n;const D=this._sizeLods[i],N=3*D*(i>B-q1?i-B+q1:0),I=4*(this._cubeSize-D);uE(e,N,I,3*D,2*D),u.setRenderTarget(e),u.render(g,vC)}}function YX(s){const t=[],e=[],n=[];let i=s;const r=s-q1+1+rL.length;for(let a=0;a<r;a++){const l=Math.pow(2,i);e.push(l);let u=1/l;a>s-q1?u=rL[a-s+q1-1]:a===0&&(u=0),n.push(u);const f=1/(l-2),m=-f,g=1+f,v=[m,m,g,m,g,g,m,m,g,g,m,g],_=6,b=6,C=3,T=2,S=1,R=new Float32Array(C*b*_),B=new Float32Array(T*b*_),D=new Float32Array(S*b*_);for(let I=0;I<_;I++){const F=I%3*2/3-1,z=I>2?0:-1,U=[F,z,0,F+2/3,z,0,F+2/3,z+1,0,F,z,0,F+2/3,z+1,0,F,z+1,0];R.set(U,C*b*I),B.set(v,T*b*I);const P=[I,I,I,I,I,I];D.set(P,S*b*I)}const N=new $e;N.setAttribute("position",new zn(R,C)),N.setAttribute("uv",new zn(B,T)),N.setAttribute("faceIndex",new zn(D,S)),t.push(N),i>q1&&i--}return{lodPlanes:t,sizeLods:e,sigmas:n}}function lL(s,t,e){const n=new Ds(s,t,e);return n.texture.mapping=by,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function uE(s,t,e,n,i){s.viewport.set(t,e,n,i),s.scissor.set(t,e,n,i)}function WX(s,t,e){const n=new Float32Array(Mm),i=new nt(0,1,0);return new Ks({name:"SphericalGaussianBlur",defines:{n:Mm,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:rR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ra,depthTest:!1,depthWrite:!1})}function cL(){return new Ks({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:rR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ra,depthTest:!1,depthWrite:!1})}function uL(){return new Ks({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:rR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ra,depthTest:!1,depthWrite:!1})}function rR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function KX(s){let t=new WeakMap,e=null;function n(l){if(l&&l.isTexture){const u=l.mapping,f=u===q_||u===Y_,m=u===rf||u===$d;if(f||m){let g=t.get(l);const v=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return e===null&&(e=new M8(s)),g=f?e.fromEquirectangular(l,g):e.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,t.set(l,g),g.texture;if(g!==void 0)return g.texture;{const _=l.image;return f&&_&&_.height>0||m&&_&&i(_)?(e===null&&(e=new M8(s)),g=f?e.fromEquirectangular(l):e.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,t.set(l,g),l.addEventListener("dispose",r),g.texture):null}}}return l}function i(l){let u=0;const f=6;for(let m=0;m<f;m++)l[m]!==void 0&&u++;return u===f}function r(l){const u=l.target;u.removeEventListener("dispose",r);const f=t.get(u);f!==void 0&&(t.delete(u),f.dispose())}function a(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:a}}function JX(s){const t={};function e(n){if(t[n]!==void 0)return t[n];let i;switch(n){case"WEBGL_depth_texture":i=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=s.getExtension(n)}return t[n]=i,i}return{has:function(n){return e(n)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const i=e(n);return i===null&&DE("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function ZX(s,t,e,n){const i={},r=new WeakMap;function a(g){const v=g.target;v.index!==null&&t.remove(v.index);for(const b in v.attributes)t.remove(v.attributes[b]);v.removeEventListener("dispose",a),delete i[v.id];const _=r.get(v);_&&(t.remove(_),r.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,e.memory.geometries--}function l(g,v){return i[v.id]===!0||(v.addEventListener("dispose",a),i[v.id]=!0,e.memory.geometries++),v}function u(g){const v=g.attributes;for(const _ in v)t.update(v[_],s.ARRAY_BUFFER)}function f(g){const v=[],_=g.index,b=g.attributes.position;let C=0;if(_!==null){const R=_.array;C=_.version;for(let B=0,D=R.length;B<D;B+=3){const N=R[B+0],I=R[B+1],F=R[B+2];v.push(N,I,I,F,F,N)}}else if(b!==void 0){const R=b.array;C=b.version;for(let B=0,D=R.length/3-1;B<D;B+=3){const N=B+0,I=B+1,F=B+2;v.push(N,I,I,F,F,N)}}else return;const T=new(C9(v)?D5:L5)(v,1);T.version=C;const S=r.get(g);S&&t.remove(S),r.set(g,T)}function m(g){const v=r.get(g);if(v){const _=g.index;_!==null&&v.version<_.version&&f(g)}else f(g);return r.get(g)}return{get:l,update:u,getWireframeAttribute:m}}function $X(s,t,e){let n;function i(v){n=v}let r,a;function l(v){r=v.type,a=v.bytesPerElement}function u(v,_){s.drawElements(n,_,r,v*a),e.update(_,n,1)}function f(v,_,b){b!==0&&(s.drawElementsInstanced(n,_,r,v*a,b),e.update(_,n,b))}function m(v,_,b){if(b===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,_,0,r,v,0,b);let T=0;for(let S=0;S<b;S++)T+=_[S];e.update(T,n,1)}function g(v,_,b,C){if(b===0)return;const T=t.get("WEBGL_multi_draw");if(T===null)for(let S=0;S<v.length;S++)f(v[S]/a,_[S],C[S]);else{T.multiDrawElementsInstancedWEBGL(n,_,0,r,v,0,C,0,b);let S=0;for(let R=0;R<b;R++)S+=_[R]*C[R];e.update(S,n,1)}}this.setMode=i,this.setIndex=l,this.render=u,this.renderInstances=f,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function tj(s){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,a,l){switch(e.calls++,a){case s.TRIANGLES:e.triangles+=l*(r/3);break;case s.LINES:e.lines+=l*(r/2);break;case s.LINE_STRIP:e.lines+=l*(r-1);break;case s.LINE_LOOP:e.lines+=l*r;break;case s.POINTS:e.points+=l*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:i,update:n}}function ej(s,t,e){const n=new WeakMap,i=new Bn;function r(a,l,u){const f=a.morphTargetInfluences,m=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=m!==void 0?m.length:0;let v=n.get(l);if(v===void 0||v.count!==g){let P=function(){z.dispose(),n.delete(l),l.removeEventListener("dispose",P)};var _=P;v!==void 0&&v.texture.dispose();const b=l.morphAttributes.position!==void 0,C=l.morphAttributes.normal!==void 0,T=l.morphAttributes.color!==void 0,S=l.morphAttributes.position||[],R=l.morphAttributes.normal||[],B=l.morphAttributes.color||[];let D=0;b===!0&&(D=1),C===!0&&(D=2),T===!0&&(D=3);let N=l.attributes.position.count*D,I=1;N>t.maxTextureSize&&(I=Math.ceil(N/t.maxTextureSize),N=t.maxTextureSize);const F=new Float32Array(N*I*4*g),z=new Cx(F,N,I,g);z.type=Na,z.needsUpdate=!0;const U=D*4;for(let X=0;X<g;X++){const ot=S[X],it=R[X],ct=B[X],dt=N*I*4*X;for(let Q=0;Q<ot.count;Q++){const tt=Q*U;b===!0&&(i.fromBufferAttribute(ot,Q),F[dt+tt+0]=i.x,F[dt+tt+1]=i.y,F[dt+tt+2]=i.z,F[dt+tt+3]=0),C===!0&&(i.fromBufferAttribute(it,Q),F[dt+tt+4]=i.x,F[dt+tt+5]=i.y,F[dt+tt+6]=i.z,F[dt+tt+7]=0),T===!0&&(i.fromBufferAttribute(ct,Q),F[dt+tt+8]=i.x,F[dt+tt+9]=i.y,F[dt+tt+10]=i.z,F[dt+tt+11]=ct.itemSize===4?i.w:1)}}v={count:g,texture:z,size:new Pt(N,I)},n.set(l,v),l.addEventListener("dispose",P)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)u.getUniforms().setValue(s,"morphTexture",a.morphTexture,e);else{let b=0;for(let T=0;T<f.length;T++)b+=f[T];const C=l.morphTargetsRelative?1:1-b;u.getUniforms().setValue(s,"morphTargetBaseInfluence",C),u.getUniforms().setValue(s,"morphTargetInfluences",f)}u.getUniforms().setValue(s,"morphTargetsTexture",v.texture,e),u.getUniforms().setValue(s,"morphTargetsTextureSize",v.size)}return{update:r}}function nj(s,t,e,n){let i=new WeakMap;function r(u){const f=n.render.frame,m=u.geometry,g=t.get(u,m);if(i.get(g)!==f&&(t.update(g),i.set(g,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),i.get(u)!==f&&(e.update(u.instanceMatrix,s.ARRAY_BUFFER),u.instanceColor!==null&&e.update(u.instanceColor,s.ARRAY_BUFFER),i.set(u,f))),u.isSkinnedMesh){const v=u.skeleton;i.get(v)!==f&&(v.update(),i.set(v,f))}return g}function a(){i=new WeakMap}function l(u){const f=u.target;f.removeEventListener("dispose",l),e.remove(f.instanceMatrix),f.instanceColor!==null&&e.remove(f.instanceColor)}return{update:r,dispose:a}}const MO=new wi,hL=new Bx(1,1),TO=new Cx,CO=new $3,wO=new Rx,fL=[],dL=[],pL=new Float32Array(16),mL=new Float32Array(9),gL=new Float32Array(4);function wy(s,t,e){const n=s[0];if(n<=0||n>0)return s;const i=t*e;let r=fL[i];if(r===void 0&&(r=new Float32Array(i),fL[i]=r),t!==0){n.toArray(r,0);for(let a=1,l=0;a!==t;++a)l+=e,s[a].toArray(r,l)}return r}function Js(s,t){if(s.length!==t.length)return!1;for(let e=0,n=s.length;e<n;e++)if(s[e]!==t[e])return!1;return!0}function Zs(s,t){for(let e=0,n=t.length;e<n;e++)s[e]=t[e]}function A4(s,t){let e=dL[t];e===void 0&&(e=new Int32Array(t),dL[t]=e);for(let n=0;n!==t;++n)e[n]=s.allocateTextureUnit();return e}function ij(s,t){const e=this.cache;e[0]!==t&&(s.uniform1f(this.addr,t),e[0]=t)}function sj(s,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(s.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Js(e,t))return;s.uniform2fv(this.addr,t),Zs(e,t)}}function rj(s,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(s.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(s.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Js(e,t))return;s.uniform3fv(this.addr,t),Zs(e,t)}}function aj(s,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(s.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Js(e,t))return;s.uniform4fv(this.addr,t),Zs(e,t)}}function oj(s,t){const e=this.cache,n=t.elements;if(n===void 0){if(Js(e,t))return;s.uniformMatrix2fv(this.addr,!1,t),Zs(e,t)}else{if(Js(e,n))return;gL.set(n),s.uniformMatrix2fv(this.addr,!1,gL),Zs(e,n)}}function lj(s,t){const e=this.cache,n=t.elements;if(n===void 0){if(Js(e,t))return;s.uniformMatrix3fv(this.addr,!1,t),Zs(e,t)}else{if(Js(e,n))return;mL.set(n),s.uniformMatrix3fv(this.addr,!1,mL),Zs(e,n)}}function cj(s,t){const e=this.cache,n=t.elements;if(n===void 0){if(Js(e,t))return;s.uniformMatrix4fv(this.addr,!1,t),Zs(e,t)}else{if(Js(e,n))return;pL.set(n),s.uniformMatrix4fv(this.addr,!1,pL),Zs(e,n)}}function uj(s,t){const e=this.cache;e[0]!==t&&(s.uniform1i(this.addr,t),e[0]=t)}function hj(s,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(s.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Js(e,t))return;s.uniform2iv(this.addr,t),Zs(e,t)}}function fj(s,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(s.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Js(e,t))return;s.uniform3iv(this.addr,t),Zs(e,t)}}function dj(s,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(s.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Js(e,t))return;s.uniform4iv(this.addr,t),Zs(e,t)}}function pj(s,t){const e=this.cache;e[0]!==t&&(s.uniform1ui(this.addr,t),e[0]=t)}function mj(s,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(s.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Js(e,t))return;s.uniform2uiv(this.addr,t),Zs(e,t)}}function gj(s,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(s.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Js(e,t))return;s.uniform3uiv(this.addr,t),Zs(e,t)}}function vj(s,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(s.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Js(e,t))return;s.uniform4uiv(this.addr,t),Zs(e,t)}}function yj(s,t,e){const n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(s.uniform1i(this.addr,i),n[0]=i);let r;this.type===s.SAMPLER_2D_SHADOW?(hL.compareFunction=w5,r=hL):r=MO,e.setTexture2D(t||r,i)}function _j(s,t,e){const n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(s.uniform1i(this.addr,i),n[0]=i),e.setTexture3D(t||CO,i)}function Aj(s,t,e){const n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(s.uniform1i(this.addr,i),n[0]=i),e.setTextureCube(t||wO,i)}function xj(s,t,e){const n=this.cache,i=e.allocateTextureUnit();n[0]!==i&&(s.uniform1i(this.addr,i),n[0]=i),e.setTexture2DArray(t||TO,i)}function bj(s){switch(s){case 5126:return ij;case 35664:return sj;case 35665:return rj;case 35666:return aj;case 35674:return oj;case 35675:return lj;case 35676:return cj;case 5124:case 35670:return uj;case 35667:case 35671:return hj;case 35668:case 35672:return fj;case 35669:case 35673:return dj;case 5125:return pj;case 36294:return mj;case 36295:return gj;case 36296:return vj;case 35678:case 36198:case 36298:case 36306:case 35682:return yj;case 35679:case 36299:case 36307:return _j;case 35680:case 36300:case 36308:case 36293:return Aj;case 36289:case 36303:case 36311:case 36292:return xj}}function Sj(s,t){s.uniform1fv(this.addr,t)}function Ej(s,t){const e=wy(t,this.size,2);s.uniform2fv(this.addr,e)}function Mj(s,t){const e=wy(t,this.size,3);s.uniform3fv(this.addr,e)}function Tj(s,t){const e=wy(t,this.size,4);s.uniform4fv(this.addr,e)}function Cj(s,t){const e=wy(t,this.size,4);s.uniformMatrix2fv(this.addr,!1,e)}function wj(s,t){const e=wy(t,this.size,9);s.uniformMatrix3fv(this.addr,!1,e)}function Rj(s,t){const e=wy(t,this.size,16);s.uniformMatrix4fv(this.addr,!1,e)}function Lj(s,t){s.uniform1iv(this.addr,t)}function Dj(s,t){s.uniform2iv(this.addr,t)}function Bj(s,t){s.uniform3iv(this.addr,t)}function Oj(s,t){s.uniform4iv(this.addr,t)}function Nj(s,t){s.uniform1uiv(this.addr,t)}function Ij(s,t){s.uniform2uiv(this.addr,t)}function Uj(s,t){s.uniform3uiv(this.addr,t)}function Pj(s,t){s.uniform4uiv(this.addr,t)}function Fj(s,t,e){const n=this.cache,i=t.length,r=A4(e,i);Js(n,r)||(s.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==i;++a)e.setTexture2D(t[a]||MO,r[a])}function Hj(s,t,e){const n=this.cache,i=t.length,r=A4(e,i);Js(n,r)||(s.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==i;++a)e.setTexture3D(t[a]||CO,r[a])}function zj(s,t,e){const n=this.cache,i=t.length,r=A4(e,i);Js(n,r)||(s.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==i;++a)e.setTextureCube(t[a]||wO,r[a])}function Gj(s,t,e){const n=this.cache,i=t.length,r=A4(e,i);Js(n,r)||(s.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==i;++a)e.setTexture2DArray(t[a]||TO,r[a])}function kj(s){switch(s){case 5126:return Sj;case 35664:return Ej;case 35665:return Mj;case 35666:return Tj;case 35674:return Cj;case 35675:return wj;case 35676:return Rj;case 5124:case 35670:return Lj;case 35667:case 35671:return Dj;case 35668:case 35672:return Bj;case 35669:case 35673:return Oj;case 5125:return Nj;case 36294:return Ij;case 36295:return Uj;case 36296:return Pj;case 35678:case 36198:case 36298:case 36306:case 35682:return Fj;case 35679:case 36299:case 36307:return Hj;case 35680:case 36300:case 36308:case 36293:return zj;case 36289:case 36303:case 36311:case 36292:return Gj}}class Vj{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=bj(e.type)}}class Qj{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=kj(e.type)}}class Xj{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const l=i[r];l.setValue(t,e[l.id],n)}}}const bC=/(\w+)(\])?(\[|\.)?/g;function vL(s,t){s.seq.push(t),s.map[t.id]=t}function jj(s,t,e){const n=s.name,i=n.length;for(bC.lastIndex=0;;){const r=bC.exec(n),a=bC.lastIndex;let l=r[1];const u=r[2]==="]",f=r[3];if(u&&(l=l|0),f===void 0||f==="["&&a+2===i){vL(e,f===void 0?new Vj(l,s,t):new Qj(l,s,t));break}else{let g=e.map[l];g===void 0&&(g=new Xj(l),vL(e,g)),e=g}}}class OE{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const r=t.getActiveUniform(e,i),a=t.getUniformLocation(e,r.name);jj(r,a,this)}}setValue(t,e,n,i){const r=this.map[e];r!==void 0&&r.setValue(t,n,i)}setOptional(t,e,n){const i=e[n];i!==void 0&&this.setValue(t,n,i)}static upload(t,e,n,i){for(let r=0,a=e.length;r!==a;++r){const l=e[r],u=n[l.id];u.needsUpdate!==!1&&l.setValue(t,u.value,i)}}static seqWithValue(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const a=t[i];a.id in e&&n.push(a)}return n}}function yL(s,t,e){const n=s.createShader(t);return s.shaderSource(n,e),s.compileShader(n),n}const qj=37297;let Yj=0;function Wj(s,t){const e=s.split(`
`),n=[],i=Math.max(t-6,0),r=Math.min(t+6,e.length);for(let a=i;a<r;a++){const l=a+1;n.push(`${l===t?">":" "} ${l}: ${e[a]}`)}return n.join(`
`)}const _L=new on;function Kj(s){Pn._getMatrix(_L,Pn.workingColorSpace,s);const t=`mat3( ${_L.elements.map(e=>e.toFixed(4))} )`;switch(Pn.getTransfer(s)){case K_:return[t,"LinearTransferOETF"];case fi:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",s),[t,"LinearTransferOETF"]}}function AL(s,t,e){const n=s.getShaderParameter(t,s.COMPILE_STATUS),i=s.getShaderInfoLog(t).trim();if(n&&i==="")return"";const r=/ERROR: 0:(\d+)/.exec(i);if(r){const a=parseInt(r[1]);return e.toUpperCase()+`

`+i+`

`+Wj(s.getShaderSource(t),a)}else return i}function Jj(s,t){const e=Kj(t);return[`vec4 ${s}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function Zj(s,t){let e;switch(t){case o9:e="Linear";break;case l9:e="Reinhard";break;case c9:e="Cineon";break;case y5:e="ACESFilmic";break;case h9:e="AgX";break;case f9:e="Neutral";break;case u9:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+s+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const hE=new nt;function $j(){Pn.getLuminanceCoefficients(hE);const s=hE.x.toFixed(4),t=hE.y.toFixed(4),e=hE.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${s}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function tq(s){return[s.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",s.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(f_).join(`
`)}function eq(s){const t=[];for(const e in s){const n=s[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function nq(s,t){const e={},n=s.getProgramParameter(t,s.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const r=s.getActiveAttrib(t,i),a=r.name;let l=1;r.type===s.FLOAT_MAT2&&(l=2),r.type===s.FLOAT_MAT3&&(l=3),r.type===s.FLOAT_MAT4&&(l=4),e[a]={type:r.type,location:s.getAttribLocation(t,a),locationSize:l}}return e}function f_(s){return s!==""}function xL(s,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return s.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function bL(s,t){return s.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const iq=/^[ \t]*#include +<([\w\d./]+)>/gm;function T8(s){return s.replace(iq,rq)}const sq=new Map;function rq(s,t){let e=fn[t];if(e===void 0){const n=sq.get(t);if(n!==void 0)e=fn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return T8(e)}const aq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function SL(s){return s.replace(aq,oq)}function oq(s,t,e,n){let i="";for(let r=parseInt(t);r<parseInt(e);r++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return i}function EL(s){let t=`precision ${s.precision} float;
	precision ${s.precision} int;
	precision ${s.precision} sampler2D;
	precision ${s.precision} samplerCube;
	precision ${s.precision} sampler3D;
	precision ${s.precision} sampler2DArray;
	precision ${s.precision} sampler2DShadow;
	precision ${s.precision} samplerCubeShadow;
	precision ${s.precision} sampler2DArrayShadow;
	precision ${s.precision} isampler2D;
	precision ${s.precision} isampler3D;
	precision ${s.precision} isamplerCube;
	precision ${s.precision} isampler2DArray;
	precision ${s.precision} usampler2D;
	precision ${s.precision} usampler3D;
	precision ${s.precision} usamplerCube;
	precision ${s.precision} usampler2DArray;
	`;return s.precision==="highp"?t+=`
#define HIGH_PRECISION`:s.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function lq(s){let t="SHADOWMAP_TYPE_BASIC";return s.shadowMapType===k3?t="SHADOWMAP_TYPE_PCF":s.shadowMapType===D_?t="SHADOWMAP_TYPE_PCF_SOFT":s.shadowMapType===cc&&(t="SHADOWMAP_TYPE_VSM"),t}function cq(s){let t="ENVMAP_TYPE_CUBE";if(s.envMap)switch(s.envMapMode){case rf:case $d:t="ENVMAP_TYPE_CUBE";break;case by:t="ENVMAP_TYPE_CUBE_UV";break}return t}function uq(s){let t="ENVMAP_MODE_REFLECTION";if(s.envMap)switch(s.envMapMode){case $d:t="ENVMAP_MODE_REFRACTION";break}return t}function hq(s){let t="ENVMAP_BLENDING_NONE";if(s.envMap)switch(s.combine){case Mx:t="ENVMAP_BLENDING_MULTIPLY";break;case r9:t="ENVMAP_BLENDING_MIX";break;case a9:t="ENVMAP_BLENDING_ADD";break}return t}function fq(s){const t=s.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:n,maxMip:e}}function dq(s,t,e,n){const i=s.getContext(),r=e.defines;let a=e.vertexShader,l=e.fragmentShader;const u=lq(e),f=cq(e),m=uq(e),g=hq(e),v=fq(e),_=tq(e),b=eq(r),C=i.createProgram();let T,S,R=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(T=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(f_).join(`
`),T.length>0&&(T+=`
`),S=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(f_).join(`
`),S.length>0&&(S+=`
`)):(T=[EL(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+m:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(f_).join(`
`),S=[EL(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.envMap?"#define "+m:"",e.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Lc?"#define TONE_MAPPING":"",e.toneMapping!==Lc?fn.tonemapping_pars_fragment:"",e.toneMapping!==Lc?Zj("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",fn.colorspace_pars_fragment,Jj("linearToOutputTexel",e.outputColorSpace),$j(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(f_).join(`
`)),a=T8(a),a=xL(a,e),a=bL(a,e),l=T8(l),l=xL(l,e),l=bL(l,e),a=SL(a),l=SL(l),e.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,T=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,S=["#define varying in",e.glslVersion===y8?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===y8?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const B=R+T+a,D=R+S+l,N=yL(i,i.VERTEX_SHADER,B),I=yL(i,i.FRAGMENT_SHADER,D);i.attachShader(C,N),i.attachShader(C,I),e.index0AttributeName!==void 0?i.bindAttribLocation(C,0,e.index0AttributeName):e.morphTargets===!0&&i.bindAttribLocation(C,0,"position"),i.linkProgram(C);function F(X){if(s.debug.checkShaderErrors){const ot=i.getProgramInfoLog(C).trim(),it=i.getShaderInfoLog(N).trim(),ct=i.getShaderInfoLog(I).trim();let dt=!0,Q=!0;if(i.getProgramParameter(C,i.LINK_STATUS)===!1)if(dt=!1,typeof s.debug.onShaderError=="function")s.debug.onShaderError(i,C,N,I);else{const tt=AL(i,N,"vertex"),et=AL(i,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(C,i.VALIDATE_STATUS)+`

Material Name: `+X.name+`
Material Type: `+X.type+`

Program Info Log: `+ot+`
`+tt+`
`+et)}else ot!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ot):(it===""||ct==="")&&(Q=!1);Q&&(X.diagnostics={runnable:dt,programLog:ot,vertexShader:{log:it,prefix:T},fragmentShader:{log:ct,prefix:S}})}i.deleteShader(N),i.deleteShader(I),z=new OE(i,C),U=nq(i,C)}let z;this.getUniforms=function(){return z===void 0&&F(this),z};let U;this.getAttributes=function(){return U===void 0&&F(this),U};let P=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=i.getProgramParameter(C,qj)),P},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(C),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=Yj++,this.cacheKey=t,this.usedTimes=1,this.program=C,this.vertexShader=N,this.fragmentShader=I,this}let pq=0;class mq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return n===void 0&&(n=new gq(t),e.set(t,n)),n}}class gq{constructor(t){this.id=pq++,this.code=t,this.usedTimes=0}}function vq(s,t,e,n,i,r,a){const l=new fy,u=new mq,f=new Set,m=[],g=i.logarithmicDepthBuffer,v=i.vertexTextures;let _=i.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function C(U){return f.add(U),U===0?"uv":`uv${U}`}function T(U,P,X,ot,it){const ct=ot.fog,dt=it.geometry,Q=U.isMeshStandardMaterial?ot.environment:null,tt=(U.isMeshStandardMaterial?e:t).get(U.envMap||Q),et=tt&&tt.mapping===by?tt.image.height:null,_t=b[U.type];U.precision!==null&&(_=i.getMaxPrecision(U.precision),_!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",_,"instead."));const K=dt.morphAttributes.position||dt.morphAttributes.normal||dt.morphAttributes.color,at=K!==void 0?K.length:0;let xt=0;dt.morphAttributes.position!==void 0&&(xt=1),dt.morphAttributes.normal!==void 0&&(xt=2),dt.morphAttributes.color!==void 0&&(xt=3);let Et,lt,wt,Bt;if(_t){const Cn=Ec[_t];Et=Cn.vertexShader,lt=Cn.fragmentShader}else Et=U.vertexShader,lt=U.fragmentShader,u.update(U),wt=u.getVertexShaderID(U),Bt=u.getFragmentShaderID(U);const Ut=s.getRenderTarget(),Wt=s.state.buffers.depth.getReversed(),ve=it.isInstancedMesh===!0,ee=it.isBatchedMesh===!0,Ye=!!U.map,we=!!U.matcap,se=!!tt,Z=!!U.aoMap,Kt=!!U.lightMap,Ft=!!U.bumpMap,Vt=!!U.normalMap,Gt=!!U.displacementMap,be=!!U.emissiveMap,qt=!!U.metalnessMap,$=!!U.roughnessMap,V=U.anisotropy>0,vt=U.clearcoat>0,It=U.dispersion>0,Xt=U.iridescence>0,Ot=U.sheen>0,ne=U.transmission>0,te=V&&!!U.anisotropyMap,ge=vt&&!!U.clearcoatMap,De=vt&&!!U.clearcoatNormalMap,Jt=vt&&!!U.clearcoatRoughnessMap,_e=Xt&&!!U.iridescenceMap,Se=Xt&&!!U.iridescenceThicknessMap,Te=Ot&&!!U.sheenColorMap,le=Ot&&!!U.sheenRoughnessMap,rn=!!U.specularMap,He=!!U.specularColorMap,Gn=!!U.specularIntensityMap,mt=ne&&!!U.transmissionMap,ce=ne&&!!U.thicknessMap,Nt=!!U.gradientMap,Qt=!!U.alphaMap,fe=U.alphaTest>0,ue=!!U.alphaHash,qe=!!U.extensions;let Jn=Lc;U.toneMapped&&(Ut===null||Ut.isXRRenderTarget===!0)&&(Jn=s.toneMapping);const Ei={shaderID:_t,shaderType:U.type,shaderName:U.name,vertexShader:Et,fragmentShader:lt,defines:U.defines,customVertexShaderID:wt,customFragmentShaderID:Bt,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:_,batching:ee,batchingColor:ee&&it._colorsTexture!==null,instancing:ve,instancingColor:ve&&it.instanceColor!==null,instancingMorph:ve&&it.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:Ut===null?s.outputColorSpace:Ut.isXRRenderTarget===!0?Ut.texture.colorSpace:zu,alphaToCoverage:!!U.alphaToCoverage,map:Ye,matcap:we,envMap:se,envMapMode:se&&tt.mapping,envMapCubeUVHeight:et,aoMap:Z,lightMap:Kt,bumpMap:Ft,normalMap:Vt,displacementMap:v&&Gt,emissiveMap:be,normalMapObjectSpace:Vt&&U.normalMapType===_9,normalMapTangentSpace:Vt&&U.normalMapType===op,metalnessMap:qt,roughnessMap:$,anisotropy:V,anisotropyMap:te,clearcoat:vt,clearcoatMap:ge,clearcoatNormalMap:De,clearcoatRoughnessMap:Jt,dispersion:It,iridescence:Xt,iridescenceMap:_e,iridescenceThicknessMap:Se,sheen:Ot,sheenColorMap:Te,sheenRoughnessMap:le,specularMap:rn,specularColorMap:He,specularIntensityMap:Gn,transmission:ne,transmissionMap:mt,thicknessMap:ce,gradientMap:Nt,opaque:U.transparent===!1&&U.blending===Bg&&U.alphaToCoverage===!1,alphaMap:Qt,alphaTest:fe,alphaHash:ue,combine:U.combine,mapUv:Ye&&C(U.map.channel),aoMapUv:Z&&C(U.aoMap.channel),lightMapUv:Kt&&C(U.lightMap.channel),bumpMapUv:Ft&&C(U.bumpMap.channel),normalMapUv:Vt&&C(U.normalMap.channel),displacementMapUv:Gt&&C(U.displacementMap.channel),emissiveMapUv:be&&C(U.emissiveMap.channel),metalnessMapUv:qt&&C(U.metalnessMap.channel),roughnessMapUv:$&&C(U.roughnessMap.channel),anisotropyMapUv:te&&C(U.anisotropyMap.channel),clearcoatMapUv:ge&&C(U.clearcoatMap.channel),clearcoatNormalMapUv:De&&C(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Jt&&C(U.clearcoatRoughnessMap.channel),iridescenceMapUv:_e&&C(U.iridescenceMap.channel),iridescenceThicknessMapUv:Se&&C(U.iridescenceThicknessMap.channel),sheenColorMapUv:Te&&C(U.sheenColorMap.channel),sheenRoughnessMapUv:le&&C(U.sheenRoughnessMap.channel),specularMapUv:rn&&C(U.specularMap.channel),specularColorMapUv:He&&C(U.specularColorMap.channel),specularIntensityMapUv:Gn&&C(U.specularIntensityMap.channel),transmissionMapUv:mt&&C(U.transmissionMap.channel),thicknessMapUv:ce&&C(U.thicknessMap.channel),alphaMapUv:Qt&&C(U.alphaMap.channel),vertexTangents:!!dt.attributes.tangent&&(Vt||V),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!dt.attributes.color&&dt.attributes.color.itemSize===4,pointsUvs:it.isPoints===!0&&!!dt.attributes.uv&&(Ye||Qt),fog:!!ct,useFog:U.fog===!0,fogExp2:!!ct&&ct.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:Wt,skinning:it.isSkinnedMesh===!0,morphTargets:dt.morphAttributes.position!==void 0,morphNormals:dt.morphAttributes.normal!==void 0,morphColors:dt.morphAttributes.color!==void 0,morphTargetsCount:at,morphTextureStride:xt,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:U.dithering,shadowMapEnabled:s.shadowMap.enabled&&X.length>0,shadowMapType:s.shadowMap.type,toneMapping:Jn,decodeVideoTexture:Ye&&U.map.isVideoTexture===!0&&Pn.getTransfer(U.map.colorSpace)===fi,decodeVideoTextureEmissive:be&&U.emissiveMap.isVideoTexture===!0&&Pn.getTransfer(U.emissiveMap.colorSpace)===fi,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===Da,flipSided:U.side===qs,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:qe&&U.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(qe&&U.extensions.multiDraw===!0||ee)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return Ei.vertexUv1s=f.has(1),Ei.vertexUv2s=f.has(2),Ei.vertexUv3s=f.has(3),f.clear(),Ei}function S(U){const P=[];if(U.shaderID?P.push(U.shaderID):(P.push(U.customVertexShaderID),P.push(U.customFragmentShaderID)),U.defines!==void 0)for(const X in U.defines)P.push(X),P.push(U.defines[X]);return U.isRawShaderMaterial===!1&&(R(P,U),B(P,U),P.push(s.outputColorSpace)),P.push(U.customProgramCacheKey),P.join()}function R(U,P){U.push(P.precision),U.push(P.outputColorSpace),U.push(P.envMapMode),U.push(P.envMapCubeUVHeight),U.push(P.mapUv),U.push(P.alphaMapUv),U.push(P.lightMapUv),U.push(P.aoMapUv),U.push(P.bumpMapUv),U.push(P.normalMapUv),U.push(P.displacementMapUv),U.push(P.emissiveMapUv),U.push(P.metalnessMapUv),U.push(P.roughnessMapUv),U.push(P.anisotropyMapUv),U.push(P.clearcoatMapUv),U.push(P.clearcoatNormalMapUv),U.push(P.clearcoatRoughnessMapUv),U.push(P.iridescenceMapUv),U.push(P.iridescenceThicknessMapUv),U.push(P.sheenColorMapUv),U.push(P.sheenRoughnessMapUv),U.push(P.specularMapUv),U.push(P.specularColorMapUv),U.push(P.specularIntensityMapUv),U.push(P.transmissionMapUv),U.push(P.thicknessMapUv),U.push(P.combine),U.push(P.fogExp2),U.push(P.sizeAttenuation),U.push(P.morphTargetsCount),U.push(P.morphAttributeCount),U.push(P.numDirLights),U.push(P.numPointLights),U.push(P.numSpotLights),U.push(P.numSpotLightMaps),U.push(P.numHemiLights),U.push(P.numRectAreaLights),U.push(P.numDirLightShadows),U.push(P.numPointLightShadows),U.push(P.numSpotLightShadows),U.push(P.numSpotLightShadowsWithMaps),U.push(P.numLightProbes),U.push(P.shadowMapType),U.push(P.toneMapping),U.push(P.numClippingPlanes),U.push(P.numClipIntersection),U.push(P.depthPacking)}function B(U,P){l.disableAll(),P.supportsVertexTextures&&l.enable(0),P.instancing&&l.enable(1),P.instancingColor&&l.enable(2),P.instancingMorph&&l.enable(3),P.matcap&&l.enable(4),P.envMap&&l.enable(5),P.normalMapObjectSpace&&l.enable(6),P.normalMapTangentSpace&&l.enable(7),P.clearcoat&&l.enable(8),P.iridescence&&l.enable(9),P.alphaTest&&l.enable(10),P.vertexColors&&l.enable(11),P.vertexAlphas&&l.enable(12),P.vertexUv1s&&l.enable(13),P.vertexUv2s&&l.enable(14),P.vertexUv3s&&l.enable(15),P.vertexTangents&&l.enable(16),P.anisotropy&&l.enable(17),P.alphaHash&&l.enable(18),P.batching&&l.enable(19),P.dispersion&&l.enable(20),P.batchingColor&&l.enable(21),U.push(l.mask),l.disableAll(),P.fog&&l.enable(0),P.useFog&&l.enable(1),P.flatShading&&l.enable(2),P.logarithmicDepthBuffer&&l.enable(3),P.reverseDepthBuffer&&l.enable(4),P.skinning&&l.enable(5),P.morphTargets&&l.enable(6),P.morphNormals&&l.enable(7),P.morphColors&&l.enable(8),P.premultipliedAlpha&&l.enable(9),P.shadowMapEnabled&&l.enable(10),P.doubleSided&&l.enable(11),P.flipSided&&l.enable(12),P.useDepthPacking&&l.enable(13),P.dithering&&l.enable(14),P.transmission&&l.enable(15),P.sheen&&l.enable(16),P.opaque&&l.enable(17),P.pointsUvs&&l.enable(18),P.decodeVideoTexture&&l.enable(19),P.decodeVideoTextureEmissive&&l.enable(20),P.alphaToCoverage&&l.enable(21),U.push(l.mask)}function D(U){const P=b[U.type];let X;if(P){const ot=Ec[P];X=B9.clone(ot.uniforms)}else X=U.uniforms;return X}function N(U,P){let X;for(let ot=0,it=m.length;ot<it;ot++){const ct=m[ot];if(ct.cacheKey===P){X=ct,++X.usedTimes;break}}return X===void 0&&(X=new dq(s,P,U,r),m.push(X)),X}function I(U){if(--U.usedTimes===0){const P=m.indexOf(U);m[P]=m[m.length-1],m.pop(),U.destroy()}}function F(U){u.remove(U)}function z(){u.dispose()}return{getParameters:T,getProgramCacheKey:S,getUniforms:D,acquireProgram:N,releaseProgram:I,releaseShaderCache:F,programs:m,dispose:z}}function yq(){let s=new WeakMap;function t(a){return s.has(a)}function e(a){let l=s.get(a);return l===void 0&&(l={},s.set(a,l)),l}function n(a){s.delete(a)}function i(a,l,u){s.get(a)[l]=u}function r(){s=new WeakMap}return{has:t,get:e,remove:n,update:i,dispose:r}}function _q(s,t){return s.groupOrder!==t.groupOrder?s.groupOrder-t.groupOrder:s.renderOrder!==t.renderOrder?s.renderOrder-t.renderOrder:s.material.id!==t.material.id?s.material.id-t.material.id:s.z!==t.z?s.z-t.z:s.id-t.id}function ML(s,t){return s.groupOrder!==t.groupOrder?s.groupOrder-t.groupOrder:s.renderOrder!==t.renderOrder?s.renderOrder-t.renderOrder:s.z!==t.z?t.z-s.z:s.id-t.id}function TL(){const s=[];let t=0;const e=[],n=[],i=[];function r(){t=0,e.length=0,n.length=0,i.length=0}function a(g,v,_,b,C,T){let S=s[t];return S===void 0?(S={id:g.id,object:g,geometry:v,material:_,groupOrder:b,renderOrder:g.renderOrder,z:C,group:T},s[t]=S):(S.id=g.id,S.object=g,S.geometry=v,S.material=_,S.groupOrder=b,S.renderOrder=g.renderOrder,S.z=C,S.group=T),t++,S}function l(g,v,_,b,C,T){const S=a(g,v,_,b,C,T);_.transmission>0?n.push(S):_.transparent===!0?i.push(S):e.push(S)}function u(g,v,_,b,C,T){const S=a(g,v,_,b,C,T);_.transmission>0?n.unshift(S):_.transparent===!0?i.unshift(S):e.unshift(S)}function f(g,v){e.length>1&&e.sort(g||_q),n.length>1&&n.sort(v||ML),i.length>1&&i.sort(v||ML)}function m(){for(let g=t,v=s.length;g<v;g++){const _=s[g];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:e,transmissive:n,transparent:i,init:r,push:l,unshift:u,finish:m,sort:f}}function Aq(){let s=new WeakMap;function t(n,i){const r=s.get(n);let a;return r===void 0?(a=new TL,s.set(n,[a])):i>=r.length?(a=new TL,r.push(a)):a=r[i],a}function e(){s=new WeakMap}return{get:t,dispose:e}}function xq(){const s={};return{get:function(t){if(s[t.id]!==void 0)return s[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new nt,color:new ae};break;case"SpotLight":e={position:new nt,direction:new nt,color:new ae,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new nt,color:new ae,distance:0,decay:0};break;case"HemisphereLight":e={direction:new nt,skyColor:new ae,groundColor:new ae};break;case"RectAreaLight":e={color:new ae,position:new nt,halfWidth:new nt,halfHeight:new nt};break}return s[t.id]=e,e}}}function bq(){const s={};return{get:function(t){if(s[t.id]!==void 0)return s[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt,shadowCameraNear:1,shadowCameraFar:1e3};break}return s[t.id]=e,e}}}let Sq=0;function Eq(s,t){return(t.castShadow?2:0)-(s.castShadow?2:0)+(t.map?1:0)-(s.map?1:0)}function Mq(s){const t=new xq,e=bq(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)n.probe.push(new nt);const i=new nt,r=new Fe,a=new Fe;function l(f){let m=0,g=0,v=0;for(let U=0;U<9;U++)n.probe[U].set(0,0,0);let _=0,b=0,C=0,T=0,S=0,R=0,B=0,D=0,N=0,I=0,F=0;f.sort(Eq);for(let U=0,P=f.length;U<P;U++){const X=f[U],ot=X.color,it=X.intensity,ct=X.distance,dt=X.shadow&&X.shadow.map?X.shadow.map.texture:null;if(X.isAmbientLight)m+=ot.r*it,g+=ot.g*it,v+=ot.b*it;else if(X.isLightProbe){for(let Q=0;Q<9;Q++)n.probe[Q].addScaledVector(X.sh.coefficients[Q],it);F++}else if(X.isDirectionalLight){const Q=t.get(X);if(Q.color.copy(X.color).multiplyScalar(X.intensity),X.castShadow){const tt=X.shadow,et=e.get(X);et.shadowIntensity=tt.intensity,et.shadowBias=tt.bias,et.shadowNormalBias=tt.normalBias,et.shadowRadius=tt.radius,et.shadowMapSize=tt.mapSize,n.directionalShadow[_]=et,n.directionalShadowMap[_]=dt,n.directionalShadowMatrix[_]=X.shadow.matrix,R++}n.directional[_]=Q,_++}else if(X.isSpotLight){const Q=t.get(X);Q.position.setFromMatrixPosition(X.matrixWorld),Q.color.copy(ot).multiplyScalar(it),Q.distance=ct,Q.coneCos=Math.cos(X.angle),Q.penumbraCos=Math.cos(X.angle*(1-X.penumbra)),Q.decay=X.decay,n.spot[C]=Q;const tt=X.shadow;if(X.map&&(n.spotLightMap[N]=X.map,N++,tt.updateMatrices(X),X.castShadow&&I++),n.spotLightMatrix[C]=tt.matrix,X.castShadow){const et=e.get(X);et.shadowIntensity=tt.intensity,et.shadowBias=tt.bias,et.shadowNormalBias=tt.normalBias,et.shadowRadius=tt.radius,et.shadowMapSize=tt.mapSize,n.spotShadow[C]=et,n.spotShadowMap[C]=dt,D++}C++}else if(X.isRectAreaLight){const Q=t.get(X);Q.color.copy(ot).multiplyScalar(it),Q.halfWidth.set(X.width*.5,0,0),Q.halfHeight.set(0,X.height*.5,0),n.rectArea[T]=Q,T++}else if(X.isPointLight){const Q=t.get(X);if(Q.color.copy(X.color).multiplyScalar(X.intensity),Q.distance=X.distance,Q.decay=X.decay,X.castShadow){const tt=X.shadow,et=e.get(X);et.shadowIntensity=tt.intensity,et.shadowBias=tt.bias,et.shadowNormalBias=tt.normalBias,et.shadowRadius=tt.radius,et.shadowMapSize=tt.mapSize,et.shadowCameraNear=tt.camera.near,et.shadowCameraFar=tt.camera.far,n.pointShadow[b]=et,n.pointShadowMap[b]=dt,n.pointShadowMatrix[b]=X.shadow.matrix,B++}n.point[b]=Q,b++}else if(X.isHemisphereLight){const Q=t.get(X);Q.skyColor.copy(X.color).multiplyScalar(it),Q.groundColor.copy(X.groundColor).multiplyScalar(it),n.hemi[S]=Q,S++}}T>0&&(s.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=pe.LTC_FLOAT_1,n.rectAreaLTC2=pe.LTC_FLOAT_2):(n.rectAreaLTC1=pe.LTC_HALF_1,n.rectAreaLTC2=pe.LTC_HALF_2)),n.ambient[0]=m,n.ambient[1]=g,n.ambient[2]=v;const z=n.hash;(z.directionalLength!==_||z.pointLength!==b||z.spotLength!==C||z.rectAreaLength!==T||z.hemiLength!==S||z.numDirectionalShadows!==R||z.numPointShadows!==B||z.numSpotShadows!==D||z.numSpotMaps!==N||z.numLightProbes!==F)&&(n.directional.length=_,n.spot.length=C,n.rectArea.length=T,n.point.length=b,n.hemi.length=S,n.directionalShadow.length=R,n.directionalShadowMap.length=R,n.pointShadow.length=B,n.pointShadowMap.length=B,n.spotShadow.length=D,n.spotShadowMap.length=D,n.directionalShadowMatrix.length=R,n.pointShadowMatrix.length=B,n.spotLightMatrix.length=D+N-I,n.spotLightMap.length=N,n.numSpotLightShadowsWithMaps=I,n.numLightProbes=F,z.directionalLength=_,z.pointLength=b,z.spotLength=C,z.rectAreaLength=T,z.hemiLength=S,z.numDirectionalShadows=R,z.numPointShadows=B,z.numSpotShadows=D,z.numSpotMaps=N,z.numLightProbes=F,n.version=Sq++)}function u(f,m){let g=0,v=0,_=0,b=0,C=0;const T=m.matrixWorldInverse;for(let S=0,R=f.length;S<R;S++){const B=f[S];if(B.isDirectionalLight){const D=n.directional[g];D.direction.setFromMatrixPosition(B.matrixWorld),i.setFromMatrixPosition(B.target.matrixWorld),D.direction.sub(i),D.direction.transformDirection(T),g++}else if(B.isSpotLight){const D=n.spot[_];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(T),D.direction.setFromMatrixPosition(B.matrixWorld),i.setFromMatrixPosition(B.target.matrixWorld),D.direction.sub(i),D.direction.transformDirection(T),_++}else if(B.isRectAreaLight){const D=n.rectArea[b];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(T),a.identity(),r.copy(B.matrixWorld),r.premultiply(T),a.extractRotation(r),D.halfWidth.set(B.width*.5,0,0),D.halfHeight.set(0,B.height*.5,0),D.halfWidth.applyMatrix4(a),D.halfHeight.applyMatrix4(a),b++}else if(B.isPointLight){const D=n.point[v];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(T),v++}else if(B.isHemisphereLight){const D=n.hemi[C];D.direction.setFromMatrixPosition(B.matrixWorld),D.direction.transformDirection(T),C++}}}return{setup:l,setupView:u,state:n}}function CL(s){const t=new Mq(s),e=[],n=[];function i(m){f.camera=m,e.length=0,n.length=0}function r(m){e.push(m)}function a(m){n.push(m)}function l(){t.setup(e)}function u(m){t.setupView(e,m)}const f={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:i,state:f,setupLights:l,setupLightsView:u,pushLight:r,pushShadow:a}}function Tq(s){let t=new WeakMap;function e(i,r=0){const a=t.get(i);let l;return a===void 0?(l=new CL(s),t.set(i,[l])):r>=a.length?(l=new CL(s),a.push(l)):l=a[r],l}function n(){t=new WeakMap}return{get:e,dispose:n}}const Cq=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,wq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Rq(s,t,e){let n=new Ey;const i=new Pt,r=new Pt,a=new Bn,l=new Q5({depthPacking:y9}),u=new X5,f={},m=e.maxTextureSize,g={[Dc]:qs,[qs]:Dc,[Da]:Da},v=new Ks({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Pt},radius:{value:4}},vertexShader:Cq,fragmentShader:wq}),_=v.clone();_.defines.HORIZONTAL_PASS=1;const b=new $e;b.setAttribute("position",new zn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new as(b,v),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=k3;let S=this.type;this.render=function(I,F,z){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||I.length===0)return;const U=s.getRenderTarget(),P=s.getActiveCubeFace(),X=s.getActiveMipmapLevel(),ot=s.state;ot.setBlending(ra),ot.buffers.color.setClear(1,1,1,1),ot.buffers.depth.setTest(!0),ot.setScissorTest(!1);const it=S!==cc&&this.type===cc,ct=S===cc&&this.type!==cc;for(let dt=0,Q=I.length;dt<Q;dt++){const tt=I[dt],et=tt.shadow;if(et===void 0){console.warn("THREE.WebGLShadowMap:",tt,"has no shadow.");continue}if(et.autoUpdate===!1&&et.needsUpdate===!1)continue;i.copy(et.mapSize);const _t=et.getFrameExtents();if(i.multiply(_t),r.copy(et.mapSize),(i.x>m||i.y>m)&&(i.x>m&&(r.x=Math.floor(m/_t.x),i.x=r.x*_t.x,et.mapSize.x=r.x),i.y>m&&(r.y=Math.floor(m/_t.y),i.y=r.y*_t.y,et.mapSize.y=r.y)),et.map===null||it===!0||ct===!0){const at=this.type!==cc?{minFilter:os,magFilter:os}:{};et.map!==null&&et.map.dispose(),et.map=new Ds(i.x,i.y,at),et.map.texture.name=tt.name+".shadowMap",et.camera.updateProjectionMatrix()}s.setRenderTarget(et.map),s.clear();const K=et.getViewportCount();for(let at=0;at<K;at++){const xt=et.getViewport(at);a.set(r.x*xt.x,r.y*xt.y,r.x*xt.z,r.y*xt.w),ot.viewport(a),et.updateMatrices(tt,at),n=et.getFrustum(),D(F,z,et.camera,tt,this.type)}et.isPointLightShadow!==!0&&this.type===cc&&R(et,z),et.needsUpdate=!1}S=this.type,T.needsUpdate=!1,s.setRenderTarget(U,P,X)};function R(I,F){const z=t.update(C);v.defines.VSM_SAMPLES!==I.blurSamples&&(v.defines.VSM_SAMPLES=I.blurSamples,_.defines.VSM_SAMPLES=I.blurSamples,v.needsUpdate=!0,_.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Ds(i.x,i.y)),v.uniforms.shadow_pass.value=I.map.texture,v.uniforms.resolution.value=I.mapSize,v.uniforms.radius.value=I.radius,s.setRenderTarget(I.mapPass),s.clear(),s.renderBufferDirect(F,null,z,v,C,null),_.uniforms.shadow_pass.value=I.mapPass.texture,_.uniforms.resolution.value=I.mapSize,_.uniforms.radius.value=I.radius,s.setRenderTarget(I.map),s.clear(),s.renderBufferDirect(F,null,z,_,C,null)}function B(I,F,z,U){let P=null;const X=z.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(X!==void 0)P=X;else if(P=z.isPointLight===!0?u:l,s.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0||F.alphaToCoverage===!0){const ot=P.uuid,it=F.uuid;let ct=f[ot];ct===void 0&&(ct={},f[ot]=ct);let dt=ct[it];dt===void 0&&(dt=P.clone(),ct[it]=dt,F.addEventListener("dispose",N)),P=dt}if(P.visible=F.visible,P.wireframe=F.wireframe,U===cc?P.side=F.shadowSide!==null?F.shadowSide:F.side:P.side=F.shadowSide!==null?F.shadowSide:g[F.side],P.alphaMap=F.alphaMap,P.alphaTest=F.alphaToCoverage===!0?.5:F.alphaTest,P.map=F.map,P.clipShadows=F.clipShadows,P.clippingPlanes=F.clippingPlanes,P.clipIntersection=F.clipIntersection,P.displacementMap=F.displacementMap,P.displacementScale=F.displacementScale,P.displacementBias=F.displacementBias,P.wireframeLinewidth=F.wireframeLinewidth,P.linewidth=F.linewidth,z.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const ot=s.properties.get(P);ot.light=z}return P}function D(I,F,z,U,P){if(I.visible===!1)return;if(I.layers.test(F.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&P===cc)&&(!I.frustumCulled||n.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,I.matrixWorld);const it=t.update(I),ct=I.material;if(Array.isArray(ct)){const dt=it.groups;for(let Q=0,tt=dt.length;Q<tt;Q++){const et=dt[Q],_t=ct[et.materialIndex];if(_t&&_t.visible){const K=B(I,_t,U,P);I.onBeforeShadow(s,I,F,z,it,K,et),s.renderBufferDirect(z,null,it,K,I,et),I.onAfterShadow(s,I,F,z,it,K,et)}}}else if(ct.visible){const dt=B(I,ct,U,P);I.onBeforeShadow(s,I,F,z,it,dt,null),s.renderBufferDirect(z,null,it,dt,I,null),I.onAfterShadow(s,I,F,z,it,dt,null)}}const ot=I.children;for(let it=0,ct=ot.length;it<ct;it++)D(ot[it],F,z,U,P)}function N(I){I.target.removeEventListener("dispose",N);for(const z in f){const U=f[z],P=I.target.uuid;P in U&&(U[P].dispose(),delete U[P])}}}const Lq={[_M]:AM,[xM]:EM,[bM]:MM,[Ug]:SM,[AM]:_M,[EM]:xM,[MM]:bM,[SM]:Ug};function Dq(s,t){function e(){let mt=!1;const ce=new Bn;let Nt=null;const Qt=new Bn(0,0,0,0);return{setMask:function(fe){Nt!==fe&&!mt&&(s.colorMask(fe,fe,fe,fe),Nt=fe)},setLocked:function(fe){mt=fe},setClear:function(fe,ue,qe,Jn,Ei){Ei===!0&&(fe*=Jn,ue*=Jn,qe*=Jn),ce.set(fe,ue,qe,Jn),Qt.equals(ce)===!1&&(s.clearColor(fe,ue,qe,Jn),Qt.copy(ce))},reset:function(){mt=!1,Nt=null,Qt.set(-1,0,0,0)}}}function n(){let mt=!1,ce=!1,Nt=null,Qt=null,fe=null;return{setReversed:function(ue){if(ce!==ue){const qe=t.get("EXT_clip_control");ue?qe.clipControlEXT(qe.LOWER_LEFT_EXT,qe.ZERO_TO_ONE_EXT):qe.clipControlEXT(qe.LOWER_LEFT_EXT,qe.NEGATIVE_ONE_TO_ONE_EXT),ce=ue;const Jn=fe;fe=null,this.setClear(Jn)}},getReversed:function(){return ce},setTest:function(ue){ue?Ut(s.DEPTH_TEST):Wt(s.DEPTH_TEST)},setMask:function(ue){Nt!==ue&&!mt&&(s.depthMask(ue),Nt=ue)},setFunc:function(ue){if(ce&&(ue=Lq[ue]),Qt!==ue){switch(ue){case _M:s.depthFunc(s.NEVER);break;case AM:s.depthFunc(s.ALWAYS);break;case xM:s.depthFunc(s.LESS);break;case Ug:s.depthFunc(s.LEQUAL);break;case bM:s.depthFunc(s.EQUAL);break;case SM:s.depthFunc(s.GEQUAL);break;case EM:s.depthFunc(s.GREATER);break;case MM:s.depthFunc(s.NOTEQUAL);break;default:s.depthFunc(s.LEQUAL)}Qt=ue}},setLocked:function(ue){mt=ue},setClear:function(ue){fe!==ue&&(ce&&(ue=1-ue),s.clearDepth(ue),fe=ue)},reset:function(){mt=!1,Nt=null,Qt=null,fe=null,ce=!1}}}function i(){let mt=!1,ce=null,Nt=null,Qt=null,fe=null,ue=null,qe=null,Jn=null,Ei=null;return{setTest:function(Cn){mt||(Cn?Ut(s.STENCIL_TEST):Wt(s.STENCIL_TEST))},setMask:function(Cn){ce!==Cn&&!mt&&(s.stencilMask(Cn),ce=Cn)},setFunc:function(Cn,Nr,ls){(Nt!==Cn||Qt!==Nr||fe!==ls)&&(s.stencilFunc(Cn,Nr,ls),Nt=Cn,Qt=Nr,fe=ls)},setOp:function(Cn,Nr,ls){(ue!==Cn||qe!==Nr||Jn!==ls)&&(s.stencilOp(Cn,Nr,ls),ue=Cn,qe=Nr,Jn=ls)},setLocked:function(Cn){mt=Cn},setClear:function(Cn){Ei!==Cn&&(s.clearStencil(Cn),Ei=Cn)},reset:function(){mt=!1,ce=null,Nt=null,Qt=null,fe=null,ue=null,qe=null,Jn=null,Ei=null}}}const r=new e,a=new n,l=new i,u=new WeakMap,f=new WeakMap;let m={},g={},v=new WeakMap,_=[],b=null,C=!1,T=null,S=null,R=null,B=null,D=null,N=null,I=null,F=new ae(0,0,0),z=0,U=!1,P=null,X=null,ot=null,it=null,ct=null;const dt=s.getParameter(s.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,tt=0;const et=s.getParameter(s.VERSION);et.indexOf("WebGL")!==-1?(tt=parseFloat(/^WebGL (\d)/.exec(et)[1]),Q=tt>=1):et.indexOf("OpenGL ES")!==-1&&(tt=parseFloat(/^OpenGL ES (\d)/.exec(et)[1]),Q=tt>=2);let _t=null,K={};const at=s.getParameter(s.SCISSOR_BOX),xt=s.getParameter(s.VIEWPORT),Et=new Bn().fromArray(at),lt=new Bn().fromArray(xt);function wt(mt,ce,Nt,Qt){const fe=new Uint8Array(4),ue=s.createTexture();s.bindTexture(mt,ue),s.texParameteri(mt,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(mt,s.TEXTURE_MAG_FILTER,s.NEAREST);for(let qe=0;qe<Nt;qe++)mt===s.TEXTURE_3D||mt===s.TEXTURE_2D_ARRAY?s.texImage3D(ce,0,s.RGBA,1,1,Qt,0,s.RGBA,s.UNSIGNED_BYTE,fe):s.texImage2D(ce+qe,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,fe);return ue}const Bt={};Bt[s.TEXTURE_2D]=wt(s.TEXTURE_2D,s.TEXTURE_2D,1),Bt[s.TEXTURE_CUBE_MAP]=wt(s.TEXTURE_CUBE_MAP,s.TEXTURE_CUBE_MAP_POSITIVE_X,6),Bt[s.TEXTURE_2D_ARRAY]=wt(s.TEXTURE_2D_ARRAY,s.TEXTURE_2D_ARRAY,1,1),Bt[s.TEXTURE_3D]=wt(s.TEXTURE_3D,s.TEXTURE_3D,1,1),r.setClear(0,0,0,1),a.setClear(1),l.setClear(0),Ut(s.DEPTH_TEST),a.setFunc(Ug),Ft(!1),Vt(f8),Ut(s.CULL_FACE),Z(ra);function Ut(mt){m[mt]!==!0&&(s.enable(mt),m[mt]=!0)}function Wt(mt){m[mt]!==!1&&(s.disable(mt),m[mt]=!1)}function ve(mt,ce){return g[mt]!==ce?(s.bindFramebuffer(mt,ce),g[mt]=ce,mt===s.DRAW_FRAMEBUFFER&&(g[s.FRAMEBUFFER]=ce),mt===s.FRAMEBUFFER&&(g[s.DRAW_FRAMEBUFFER]=ce),!0):!1}function ee(mt,ce){let Nt=_,Qt=!1;if(mt){Nt=v.get(ce),Nt===void 0&&(Nt=[],v.set(ce,Nt));const fe=mt.textures;if(Nt.length!==fe.length||Nt[0]!==s.COLOR_ATTACHMENT0){for(let ue=0,qe=fe.length;ue<qe;ue++)Nt[ue]=s.COLOR_ATTACHMENT0+ue;Nt.length=fe.length,Qt=!0}}else Nt[0]!==s.BACK&&(Nt[0]=s.BACK,Qt=!0);Qt&&s.drawBuffers(Nt)}function Ye(mt){return b!==mt?(s.useProgram(mt),b=mt,!0):!1}const we={[gd]:s.FUNC_ADD,[kB]:s.FUNC_SUBTRACT,[VB]:s.FUNC_REVERSE_SUBTRACT};we[QB]=s.MIN,we[XB]=s.MAX;const se={[jB]:s.ZERO,[qB]:s.ONE,[YB]:s.SRC_COLOR,[vM]:s.SRC_ALPHA,[t9]:s.SRC_ALPHA_SATURATE,[ZB]:s.DST_COLOR,[KB]:s.DST_ALPHA,[WB]:s.ONE_MINUS_SRC_COLOR,[yM]:s.ONE_MINUS_SRC_ALPHA,[$B]:s.ONE_MINUS_DST_COLOR,[JB]:s.ONE_MINUS_DST_ALPHA,[e9]:s.CONSTANT_COLOR,[n9]:s.ONE_MINUS_CONSTANT_COLOR,[i9]:s.CONSTANT_ALPHA,[s9]:s.ONE_MINUS_CONSTANT_ALPHA};function Z(mt,ce,Nt,Qt,fe,ue,qe,Jn,Ei,Cn){if(mt===ra){C===!0&&(Wt(s.BLEND),C=!1);return}if(C===!1&&(Ut(s.BLEND),C=!0),mt!==GB){if(mt!==T||Cn!==U){if((S!==gd||D!==gd)&&(s.blendEquation(s.FUNC_ADD),S=gd,D=gd),Cn)switch(mt){case Bg:s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case d8:s.blendFunc(s.ONE,s.ONE);break;case p8:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case m8:s.blendFuncSeparate(s.ZERO,s.SRC_COLOR,s.ZERO,s.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",mt);break}else switch(mt){case Bg:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case d8:s.blendFunc(s.SRC_ALPHA,s.ONE);break;case p8:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case m8:s.blendFunc(s.ZERO,s.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",mt);break}R=null,B=null,N=null,I=null,F.set(0,0,0),z=0,T=mt,U=Cn}return}fe=fe||ce,ue=ue||Nt,qe=qe||Qt,(ce!==S||fe!==D)&&(s.blendEquationSeparate(we[ce],we[fe]),S=ce,D=fe),(Nt!==R||Qt!==B||ue!==N||qe!==I)&&(s.blendFuncSeparate(se[Nt],se[Qt],se[ue],se[qe]),R=Nt,B=Qt,N=ue,I=qe),(Jn.equals(F)===!1||Ei!==z)&&(s.blendColor(Jn.r,Jn.g,Jn.b,Ei),F.copy(Jn),z=Ei),T=mt,U=!1}function Kt(mt,ce){mt.side===Da?Wt(s.CULL_FACE):Ut(s.CULL_FACE);let Nt=mt.side===qs;ce&&(Nt=!Nt),Ft(Nt),mt.blending===Bg&&mt.transparent===!1?Z(ra):Z(mt.blending,mt.blendEquation,mt.blendSrc,mt.blendDst,mt.blendEquationAlpha,mt.blendSrcAlpha,mt.blendDstAlpha,mt.blendColor,mt.blendAlpha,mt.premultipliedAlpha),a.setFunc(mt.depthFunc),a.setTest(mt.depthTest),a.setMask(mt.depthWrite),r.setMask(mt.colorWrite);const Qt=mt.stencilWrite;l.setTest(Qt),Qt&&(l.setMask(mt.stencilWriteMask),l.setFunc(mt.stencilFunc,mt.stencilRef,mt.stencilFuncMask),l.setOp(mt.stencilFail,mt.stencilZFail,mt.stencilZPass)),be(mt.polygonOffset,mt.polygonOffsetFactor,mt.polygonOffsetUnits),mt.alphaToCoverage===!0?Ut(s.SAMPLE_ALPHA_TO_COVERAGE):Wt(s.SAMPLE_ALPHA_TO_COVERAGE)}function Ft(mt){P!==mt&&(mt?s.frontFace(s.CW):s.frontFace(s.CCW),P=mt)}function Vt(mt){mt!==FB?(Ut(s.CULL_FACE),mt!==X&&(mt===f8?s.cullFace(s.BACK):mt===HB?s.cullFace(s.FRONT):s.cullFace(s.FRONT_AND_BACK))):Wt(s.CULL_FACE),X=mt}function Gt(mt){mt!==ot&&(Q&&s.lineWidth(mt),ot=mt)}function be(mt,ce,Nt){mt?(Ut(s.POLYGON_OFFSET_FILL),(it!==ce||ct!==Nt)&&(s.polygonOffset(ce,Nt),it=ce,ct=Nt)):Wt(s.POLYGON_OFFSET_FILL)}function qt(mt){mt?Ut(s.SCISSOR_TEST):Wt(s.SCISSOR_TEST)}function $(mt){mt===void 0&&(mt=s.TEXTURE0+dt-1),_t!==mt&&(s.activeTexture(mt),_t=mt)}function V(mt,ce,Nt){Nt===void 0&&(_t===null?Nt=s.TEXTURE0+dt-1:Nt=_t);let Qt=K[Nt];Qt===void 0&&(Qt={type:void 0,texture:void 0},K[Nt]=Qt),(Qt.type!==mt||Qt.texture!==ce)&&(_t!==Nt&&(s.activeTexture(Nt),_t=Nt),s.bindTexture(mt,ce||Bt[mt]),Qt.type=mt,Qt.texture=ce)}function vt(){const mt=K[_t];mt!==void 0&&mt.type!==void 0&&(s.bindTexture(mt.type,null),mt.type=void 0,mt.texture=void 0)}function It(){try{s.compressedTexImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Xt(){try{s.compressedTexImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Ot(){try{s.texSubImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function ne(){try{s.texSubImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function te(){try{s.compressedTexSubImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function ge(){try{s.compressedTexSubImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function De(){try{s.texStorage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Jt(){try{s.texStorage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function _e(){try{s.texImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Se(){try{s.texImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Te(mt){Et.equals(mt)===!1&&(s.scissor(mt.x,mt.y,mt.z,mt.w),Et.copy(mt))}function le(mt){lt.equals(mt)===!1&&(s.viewport(mt.x,mt.y,mt.z,mt.w),lt.copy(mt))}function rn(mt,ce){let Nt=f.get(ce);Nt===void 0&&(Nt=new WeakMap,f.set(ce,Nt));let Qt=Nt.get(mt);Qt===void 0&&(Qt=s.getUniformBlockIndex(ce,mt.name),Nt.set(mt,Qt))}function He(mt,ce){const Qt=f.get(ce).get(mt);u.get(ce)!==Qt&&(s.uniformBlockBinding(ce,Qt,mt.__bindingPointIndex),u.set(ce,Qt))}function Gn(){s.disable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.DEPTH_TEST),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SCISSOR_TEST),s.disable(s.STENCIL_TEST),s.disable(s.SAMPLE_ALPHA_TO_COVERAGE),s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ZERO),s.blendFuncSeparate(s.ONE,s.ZERO,s.ONE,s.ZERO),s.blendColor(0,0,0,0),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(s.LESS),a.setReversed(!1),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(s.ALWAYS,0,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.clearStencil(0),s.cullFace(s.BACK),s.frontFace(s.CCW),s.polygonOffset(0,0),s.activeTexture(s.TEXTURE0),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),s.bindFramebuffer(s.READ_FRAMEBUFFER,null),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),m={},_t=null,K={},g={},v=new WeakMap,_=[],b=null,C=!1,T=null,S=null,R=null,B=null,D=null,N=null,I=null,F=new ae(0,0,0),z=0,U=!1,P=null,X=null,ot=null,it=null,ct=null,Et.set(0,0,s.canvas.width,s.canvas.height),lt.set(0,0,s.canvas.width,s.canvas.height),r.reset(),a.reset(),l.reset()}return{buffers:{color:r,depth:a,stencil:l},enable:Ut,disable:Wt,bindFramebuffer:ve,drawBuffers:ee,useProgram:Ye,setBlending:Z,setMaterial:Kt,setFlipSided:Ft,setCullFace:Vt,setLineWidth:Gt,setPolygonOffset:be,setScissorTest:qt,activeTexture:$,bindTexture:V,unbindTexture:vt,compressedTexImage2D:It,compressedTexImage3D:Xt,texImage2D:_e,texImage3D:Se,updateUBOMapping:rn,uniformBlockBinding:He,texStorage2D:De,texStorage3D:Jt,texSubImage2D:Ot,texSubImage3D:ne,compressedTexSubImage2D:te,compressedTexSubImage3D:ge,scissor:Te,viewport:le,reset:Gn}}function Bq(s,t,e,n,i,r,a){const l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new Pt,m=new WeakMap;let g;const v=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b($,V){return _?new OffscreenCanvas($,V):tA("canvas")}function C($,V,vt){let It=1;const Xt=qt($);if((Xt.width>vt||Xt.height>vt)&&(It=vt/Math.max(Xt.width,Xt.height)),It<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const Ot=Math.floor(It*Xt.width),ne=Math.floor(It*Xt.height);g===void 0&&(g=b(Ot,ne));const te=V?b(Ot,ne):g;return te.width=Ot,te.height=ne,te.getContext("2d").drawImage($,0,0,Ot,ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Xt.width+"x"+Xt.height+") to ("+Ot+"x"+ne+")."),te}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Xt.width+"x"+Xt.height+")."),$;return $}function T($){return $.generateMipmaps}function S($){s.generateMipmap($)}function R($){return $.isWebGLCubeRenderTarget?s.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?s.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?s.TEXTURE_2D_ARRAY:s.TEXTURE_2D}function B($,V,vt,It,Xt=!1){if($!==null){if(s[$]!==void 0)return s[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Ot=V;if(V===s.RED&&(vt===s.FLOAT&&(Ot=s.R32F),vt===s.HALF_FLOAT&&(Ot=s.R16F),vt===s.UNSIGNED_BYTE&&(Ot=s.R8)),V===s.RED_INTEGER&&(vt===s.UNSIGNED_BYTE&&(Ot=s.R8UI),vt===s.UNSIGNED_SHORT&&(Ot=s.R16UI),vt===s.UNSIGNED_INT&&(Ot=s.R32UI),vt===s.BYTE&&(Ot=s.R8I),vt===s.SHORT&&(Ot=s.R16I),vt===s.INT&&(Ot=s.R32I)),V===s.RG&&(vt===s.FLOAT&&(Ot=s.RG32F),vt===s.HALF_FLOAT&&(Ot=s.RG16F),vt===s.UNSIGNED_BYTE&&(Ot=s.RG8)),V===s.RG_INTEGER&&(vt===s.UNSIGNED_BYTE&&(Ot=s.RG8UI),vt===s.UNSIGNED_SHORT&&(Ot=s.RG16UI),vt===s.UNSIGNED_INT&&(Ot=s.RG32UI),vt===s.BYTE&&(Ot=s.RG8I),vt===s.SHORT&&(Ot=s.RG16I),vt===s.INT&&(Ot=s.RG32I)),V===s.RGB_INTEGER&&(vt===s.UNSIGNED_BYTE&&(Ot=s.RGB8UI),vt===s.UNSIGNED_SHORT&&(Ot=s.RGB16UI),vt===s.UNSIGNED_INT&&(Ot=s.RGB32UI),vt===s.BYTE&&(Ot=s.RGB8I),vt===s.SHORT&&(Ot=s.RGB16I),vt===s.INT&&(Ot=s.RGB32I)),V===s.RGBA_INTEGER&&(vt===s.UNSIGNED_BYTE&&(Ot=s.RGBA8UI),vt===s.UNSIGNED_SHORT&&(Ot=s.RGBA16UI),vt===s.UNSIGNED_INT&&(Ot=s.RGBA32UI),vt===s.BYTE&&(Ot=s.RGBA8I),vt===s.SHORT&&(Ot=s.RGBA16I),vt===s.INT&&(Ot=s.RGBA32I)),V===s.RGB&&vt===s.UNSIGNED_INT_5_9_9_9_REV&&(Ot=s.RGB9_E5),V===s.RGBA){const ne=Xt?K_:Pn.getTransfer(It);vt===s.FLOAT&&(Ot=s.RGBA32F),vt===s.HALF_FLOAT&&(Ot=s.RGBA16F),vt===s.UNSIGNED_BYTE&&(Ot=ne===fi?s.SRGB8_ALPHA8:s.RGBA8),vt===s.UNSIGNED_SHORT_4_4_4_4&&(Ot=s.RGBA4),vt===s.UNSIGNED_SHORT_5_5_5_1&&(Ot=s.RGB5_A1)}return(Ot===s.R16F||Ot===s.R32F||Ot===s.RG16F||Ot===s.RG32F||Ot===s.RGBA16F||Ot===s.RGBA32F)&&t.get("EXT_color_buffer_float"),Ot}function D($,V){let vt;return $?V===null||V===Hu||V===Pg?vt=s.DEPTH24_STENCIL8:V===Na?vt=s.DEPTH32F_STENCIL8:V===oy&&(vt=s.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===Hu||V===Pg?vt=s.DEPTH_COMPONENT24:V===Na?vt=s.DEPTH_COMPONENT32F:V===oy&&(vt=s.DEPTH_COMPONENT16),vt}function N($,V){return T($)===!0||$.isFramebufferTexture&&$.minFilter!==os&&$.minFilter!==Ni?Math.log2(Math.max(V.width,V.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?V.mipmaps.length:1}function I($){const V=$.target;V.removeEventListener("dispose",I),z(V),V.isVideoTexture&&m.delete(V)}function F($){const V=$.target;V.removeEventListener("dispose",F),P(V)}function z($){const V=n.get($);if(V.__webglInit===void 0)return;const vt=$.source,It=v.get(vt);if(It){const Xt=It[V.__cacheKey];Xt.usedTimes--,Xt.usedTimes===0&&U($),Object.keys(It).length===0&&v.delete(vt)}n.remove($)}function U($){const V=n.get($);s.deleteTexture(V.__webglTexture);const vt=$.source,It=v.get(vt);delete It[V.__cacheKey],a.memory.textures--}function P($){const V=n.get($);if($.depthTexture&&($.depthTexture.dispose(),n.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let It=0;It<6;It++){if(Array.isArray(V.__webglFramebuffer[It]))for(let Xt=0;Xt<V.__webglFramebuffer[It].length;Xt++)s.deleteFramebuffer(V.__webglFramebuffer[It][Xt]);else s.deleteFramebuffer(V.__webglFramebuffer[It]);V.__webglDepthbuffer&&s.deleteRenderbuffer(V.__webglDepthbuffer[It])}else{if(Array.isArray(V.__webglFramebuffer))for(let It=0;It<V.__webglFramebuffer.length;It++)s.deleteFramebuffer(V.__webglFramebuffer[It]);else s.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&s.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&s.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let It=0;It<V.__webglColorRenderbuffer.length;It++)V.__webglColorRenderbuffer[It]&&s.deleteRenderbuffer(V.__webglColorRenderbuffer[It]);V.__webglDepthRenderbuffer&&s.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const vt=$.textures;for(let It=0,Xt=vt.length;It<Xt;It++){const Ot=n.get(vt[It]);Ot.__webglTexture&&(s.deleteTexture(Ot.__webglTexture),a.memory.textures--),n.remove(vt[It])}n.remove($)}let X=0;function ot(){X=0}function it(){const $=X;return $>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+i.maxTextures),X+=1,$}function ct($){const V=[];return V.push($.wrapS),V.push($.wrapT),V.push($.wrapR||0),V.push($.magFilter),V.push($.minFilter),V.push($.anisotropy),V.push($.internalFormat),V.push($.format),V.push($.type),V.push($.generateMipmaps),V.push($.premultiplyAlpha),V.push($.flipY),V.push($.unpackAlignment),V.push($.colorSpace),V.join()}function dt($,V){const vt=n.get($);if($.isVideoTexture&&Gt($),$.isRenderTargetTexture===!1&&$.version>0&&vt.__version!==$.version){const It=$.image;if(It===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(It.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{lt(vt,$,V);return}}e.bindTexture(s.TEXTURE_2D,vt.__webglTexture,s.TEXTURE0+V)}function Q($,V){const vt=n.get($);if($.version>0&&vt.__version!==$.version){lt(vt,$,V);return}e.bindTexture(s.TEXTURE_2D_ARRAY,vt.__webglTexture,s.TEXTURE0+V)}function tt($,V){const vt=n.get($);if($.version>0&&vt.__version!==$.version){lt(vt,$,V);return}e.bindTexture(s.TEXTURE_3D,vt.__webglTexture,s.TEXTURE0+V)}function et($,V){const vt=n.get($);if($.version>0&&vt.__version!==$.version){wt(vt,$,V);return}e.bindTexture(s.TEXTURE_CUBE_MAP,vt.__webglTexture,s.TEXTURE0+V)}const _t={[tp]:s.REPEAT,[zo]:s.CLAMP_TO_EDGE,[ay]:s.MIRRORED_REPEAT},K={[os]:s.NEAREST,[Q3]:s.NEAREST_MIPMAP_NEAREST,[Rm]:s.NEAREST_MIPMAP_LINEAR,[Ni]:s.LINEAR,[W1]:s.LINEAR_MIPMAP_NEAREST,[Cl]:s.LINEAR_MIPMAP_LINEAR},at={[A9]:s.NEVER,[T9]:s.ALWAYS,[x9]:s.LESS,[w5]:s.LEQUAL,[b9]:s.EQUAL,[M9]:s.GEQUAL,[S9]:s.GREATER,[E9]:s.NOTEQUAL};function xt($,V){if(V.type===Na&&t.has("OES_texture_float_linear")===!1&&(V.magFilter===Ni||V.magFilter===W1||V.magFilter===Rm||V.magFilter===Cl||V.minFilter===Ni||V.minFilter===W1||V.minFilter===Rm||V.minFilter===Cl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),s.texParameteri($,s.TEXTURE_WRAP_S,_t[V.wrapS]),s.texParameteri($,s.TEXTURE_WRAP_T,_t[V.wrapT]),($===s.TEXTURE_3D||$===s.TEXTURE_2D_ARRAY)&&s.texParameteri($,s.TEXTURE_WRAP_R,_t[V.wrapR]),s.texParameteri($,s.TEXTURE_MAG_FILTER,K[V.magFilter]),s.texParameteri($,s.TEXTURE_MIN_FILTER,K[V.minFilter]),V.compareFunction&&(s.texParameteri($,s.TEXTURE_COMPARE_MODE,s.COMPARE_REF_TO_TEXTURE),s.texParameteri($,s.TEXTURE_COMPARE_FUNC,at[V.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===os||V.minFilter!==Rm&&V.minFilter!==Cl||V.type===Na&&t.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||n.get(V).__currentAnisotropy){const vt=t.get("EXT_texture_filter_anisotropic");s.texParameterf($,vt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,i.getMaxAnisotropy())),n.get(V).__currentAnisotropy=V.anisotropy}}}function Et($,V){let vt=!1;$.__webglInit===void 0&&($.__webglInit=!0,V.addEventListener("dispose",I));const It=V.source;let Xt=v.get(It);Xt===void 0&&(Xt={},v.set(It,Xt));const Ot=ct(V);if(Ot!==$.__cacheKey){Xt[Ot]===void 0&&(Xt[Ot]={texture:s.createTexture(),usedTimes:0},a.memory.textures++,vt=!0),Xt[Ot].usedTimes++;const ne=Xt[$.__cacheKey];ne!==void 0&&(Xt[$.__cacheKey].usedTimes--,ne.usedTimes===0&&U(V)),$.__cacheKey=Ot,$.__webglTexture=Xt[Ot].texture}return vt}function lt($,V,vt){let It=s.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(It=s.TEXTURE_2D_ARRAY),V.isData3DTexture&&(It=s.TEXTURE_3D);const Xt=Et($,V),Ot=V.source;e.bindTexture(It,$.__webglTexture,s.TEXTURE0+vt);const ne=n.get(Ot);if(Ot.version!==ne.__version||Xt===!0){e.activeTexture(s.TEXTURE0+vt);const te=Pn.getPrimaries(Pn.workingColorSpace),ge=V.colorSpace===Mc?null:Pn.getPrimaries(V.colorSpace),De=V.colorSpace===Mc||te===ge?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,V.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,V.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,De);let Jt=C(V.image,!1,i.maxTextureSize);Jt=be(V,Jt);const _e=r.convert(V.format,V.colorSpace),Se=r.convert(V.type);let Te=B(V.internalFormat,_e,Se,V.colorSpace,V.isVideoTexture);xt(It,V);let le;const rn=V.mipmaps,He=V.isVideoTexture!==!0,Gn=ne.__version===void 0||Xt===!0,mt=Ot.dataReady,ce=N(V,Jt);if(V.isDepthTexture)Te=D(V.format===Fg,V.type),Gn&&(He?e.texStorage2D(s.TEXTURE_2D,1,Te,Jt.width,Jt.height):e.texImage2D(s.TEXTURE_2D,0,Te,Jt.width,Jt.height,0,_e,Se,null));else if(V.isDataTexture)if(rn.length>0){He&&Gn&&e.texStorage2D(s.TEXTURE_2D,ce,Te,rn[0].width,rn[0].height);for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)le=rn[Nt],He?mt&&e.texSubImage2D(s.TEXTURE_2D,Nt,0,0,le.width,le.height,_e,Se,le.data):e.texImage2D(s.TEXTURE_2D,Nt,Te,le.width,le.height,0,_e,Se,le.data);V.generateMipmaps=!1}else He?(Gn&&e.texStorage2D(s.TEXTURE_2D,ce,Te,Jt.width,Jt.height),mt&&e.texSubImage2D(s.TEXTURE_2D,0,0,0,Jt.width,Jt.height,_e,Se,Jt.data)):e.texImage2D(s.TEXTURE_2D,0,Te,Jt.width,Jt.height,0,_e,Se,Jt.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){He&&Gn&&e.texStorage3D(s.TEXTURE_2D_ARRAY,ce,Te,rn[0].width,rn[0].height,Jt.depth);for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)if(le=rn[Nt],V.format!==na)if(_e!==null)if(He){if(mt)if(V.layerUpdates.size>0){const fe=E8(le.width,le.height,V.format,V.type);for(const ue of V.layerUpdates){const qe=le.data.subarray(ue*fe/le.data.BYTES_PER_ELEMENT,(ue+1)*fe/le.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Nt,0,0,ue,le.width,le.height,1,_e,qe)}V.clearLayerUpdates()}else e.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Nt,0,0,0,le.width,le.height,Jt.depth,_e,le.data)}else e.compressedTexImage3D(s.TEXTURE_2D_ARRAY,Nt,Te,le.width,le.height,Jt.depth,0,le.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else He?mt&&e.texSubImage3D(s.TEXTURE_2D_ARRAY,Nt,0,0,0,le.width,le.height,Jt.depth,_e,Se,le.data):e.texImage3D(s.TEXTURE_2D_ARRAY,Nt,Te,le.width,le.height,Jt.depth,0,_e,Se,le.data)}else{He&&Gn&&e.texStorage2D(s.TEXTURE_2D,ce,Te,rn[0].width,rn[0].height);for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)le=rn[Nt],V.format!==na?_e!==null?He?mt&&e.compressedTexSubImage2D(s.TEXTURE_2D,Nt,0,0,le.width,le.height,_e,le.data):e.compressedTexImage2D(s.TEXTURE_2D,Nt,Te,le.width,le.height,0,le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?mt&&e.texSubImage2D(s.TEXTURE_2D,Nt,0,0,le.width,le.height,_e,Se,le.data):e.texImage2D(s.TEXTURE_2D,Nt,Te,le.width,le.height,0,_e,Se,le.data)}else if(V.isDataArrayTexture)if(He){if(Gn&&e.texStorage3D(s.TEXTURE_2D_ARRAY,ce,Te,Jt.width,Jt.height,Jt.depth),mt)if(V.layerUpdates.size>0){const Nt=E8(Jt.width,Jt.height,V.format,V.type);for(const Qt of V.layerUpdates){const fe=Jt.data.subarray(Qt*Nt/Jt.data.BYTES_PER_ELEMENT,(Qt+1)*Nt/Jt.data.BYTES_PER_ELEMENT);e.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,Qt,Jt.width,Jt.height,1,_e,Se,fe)}V.clearLayerUpdates()}else e.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,0,Jt.width,Jt.height,Jt.depth,_e,Se,Jt.data)}else e.texImage3D(s.TEXTURE_2D_ARRAY,0,Te,Jt.width,Jt.height,Jt.depth,0,_e,Se,Jt.data);else if(V.isData3DTexture)He?(Gn&&e.texStorage3D(s.TEXTURE_3D,ce,Te,Jt.width,Jt.height,Jt.depth),mt&&e.texSubImage3D(s.TEXTURE_3D,0,0,0,0,Jt.width,Jt.height,Jt.depth,_e,Se,Jt.data)):e.texImage3D(s.TEXTURE_3D,0,Te,Jt.width,Jt.height,Jt.depth,0,_e,Se,Jt.data);else if(V.isFramebufferTexture){if(Gn)if(He)e.texStorage2D(s.TEXTURE_2D,ce,Te,Jt.width,Jt.height);else{let Nt=Jt.width,Qt=Jt.height;for(let fe=0;fe<ce;fe++)e.texImage2D(s.TEXTURE_2D,fe,Te,Nt,Qt,0,_e,Se,null),Nt>>=1,Qt>>=1}}else if(rn.length>0){if(He&&Gn){const Nt=qt(rn[0]);e.texStorage2D(s.TEXTURE_2D,ce,Te,Nt.width,Nt.height)}for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)le=rn[Nt],He?mt&&e.texSubImage2D(s.TEXTURE_2D,Nt,0,0,_e,Se,le):e.texImage2D(s.TEXTURE_2D,Nt,Te,_e,Se,le);V.generateMipmaps=!1}else if(He){if(Gn){const Nt=qt(Jt);e.texStorage2D(s.TEXTURE_2D,ce,Te,Nt.width,Nt.height)}mt&&e.texSubImage2D(s.TEXTURE_2D,0,0,0,_e,Se,Jt)}else e.texImage2D(s.TEXTURE_2D,0,Te,_e,Se,Jt);T(V)&&S(It),ne.__version=Ot.version,V.onUpdate&&V.onUpdate(V)}$.__version=V.version}function wt($,V,vt){if(V.image.length!==6)return;const It=Et($,V),Xt=V.source;e.bindTexture(s.TEXTURE_CUBE_MAP,$.__webglTexture,s.TEXTURE0+vt);const Ot=n.get(Xt);if(Xt.version!==Ot.__version||It===!0){e.activeTexture(s.TEXTURE0+vt);const ne=Pn.getPrimaries(Pn.workingColorSpace),te=V.colorSpace===Mc?null:Pn.getPrimaries(V.colorSpace),ge=V.colorSpace===Mc||ne===te?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,V.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,V.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,ge);const De=V.isCompressedTexture||V.image[0].isCompressedTexture,Jt=V.image[0]&&V.image[0].isDataTexture,_e=[];for(let Qt=0;Qt<6;Qt++)!De&&!Jt?_e[Qt]=C(V.image[Qt],!0,i.maxCubemapSize):_e[Qt]=Jt?V.image[Qt].image:V.image[Qt],_e[Qt]=be(V,_e[Qt]);const Se=_e[0],Te=r.convert(V.format,V.colorSpace),le=r.convert(V.type),rn=B(V.internalFormat,Te,le,V.colorSpace),He=V.isVideoTexture!==!0,Gn=Ot.__version===void 0||It===!0,mt=Xt.dataReady;let ce=N(V,Se);xt(s.TEXTURE_CUBE_MAP,V);let Nt;if(De){He&&Gn&&e.texStorage2D(s.TEXTURE_CUBE_MAP,ce,rn,Se.width,Se.height);for(let Qt=0;Qt<6;Qt++){Nt=_e[Qt].mipmaps;for(let fe=0;fe<Nt.length;fe++){const ue=Nt[fe];V.format!==na?Te!==null?He?mt&&e.compressedTexSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe,0,0,ue.width,ue.height,Te,ue.data):e.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe,rn,ue.width,ue.height,0,ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):He?mt&&e.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe,0,0,ue.width,ue.height,Te,le,ue.data):e.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe,rn,ue.width,ue.height,0,Te,le,ue.data)}}}else{if(Nt=V.mipmaps,He&&Gn){Nt.length>0&&ce++;const Qt=qt(_e[0]);e.texStorage2D(s.TEXTURE_CUBE_MAP,ce,rn,Qt.width,Qt.height)}for(let Qt=0;Qt<6;Qt++)if(Jt){He?mt&&e.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,0,0,_e[Qt].width,_e[Qt].height,Te,le,_e[Qt].data):e.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,rn,_e[Qt].width,_e[Qt].height,0,Te,le,_e[Qt].data);for(let fe=0;fe<Nt.length;fe++){const qe=Nt[fe].image[Qt].image;He?mt&&e.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe+1,0,0,qe.width,qe.height,Te,le,qe.data):e.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe+1,rn,qe.width,qe.height,0,Te,le,qe.data)}}else{He?mt&&e.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,0,0,Te,le,_e[Qt]):e.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,rn,Te,le,_e[Qt]);for(let fe=0;fe<Nt.length;fe++){const ue=Nt[fe];He?mt&&e.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe+1,0,0,Te,le,ue.image[Qt]):e.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,fe+1,rn,Te,le,ue.image[Qt])}}}T(V)&&S(s.TEXTURE_CUBE_MAP),Ot.__version=Xt.version,V.onUpdate&&V.onUpdate(V)}$.__version=V.version}function Bt($,V,vt,It,Xt,Ot){const ne=r.convert(vt.format,vt.colorSpace),te=r.convert(vt.type),ge=B(vt.internalFormat,ne,te,vt.colorSpace),De=n.get(V),Jt=n.get(vt);if(Jt.__renderTarget=V,!De.__hasExternalTextures){const _e=Math.max(1,V.width>>Ot),Se=Math.max(1,V.height>>Ot);Xt===s.TEXTURE_3D||Xt===s.TEXTURE_2D_ARRAY?e.texImage3D(Xt,Ot,ge,_e,Se,V.depth,0,ne,te,null):e.texImage2D(Xt,Ot,ge,_e,Se,0,ne,te,null)}e.bindFramebuffer(s.FRAMEBUFFER,$),Vt(V)?l.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,It,Xt,Jt.__webglTexture,0,Ft(V)):(Xt===s.TEXTURE_2D||Xt>=s.TEXTURE_CUBE_MAP_POSITIVE_X&&Xt<=s.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&s.framebufferTexture2D(s.FRAMEBUFFER,It,Xt,Jt.__webglTexture,Ot),e.bindFramebuffer(s.FRAMEBUFFER,null)}function Ut($,V,vt){if(s.bindRenderbuffer(s.RENDERBUFFER,$),V.depthBuffer){const It=V.depthTexture,Xt=It&&It.isDepthTexture?It.type:null,Ot=D(V.stencilBuffer,Xt),ne=V.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,te=Ft(V);Vt(V)?l.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,te,Ot,V.width,V.height):vt?s.renderbufferStorageMultisample(s.RENDERBUFFER,te,Ot,V.width,V.height):s.renderbufferStorage(s.RENDERBUFFER,Ot,V.width,V.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,ne,s.RENDERBUFFER,$)}else{const It=V.textures;for(let Xt=0;Xt<It.length;Xt++){const Ot=It[Xt],ne=r.convert(Ot.format,Ot.colorSpace),te=r.convert(Ot.type),ge=B(Ot.internalFormat,ne,te,Ot.colorSpace),De=Ft(V);vt&&Vt(V)===!1?s.renderbufferStorageMultisample(s.RENDERBUFFER,De,ge,V.width,V.height):Vt(V)?l.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,De,ge,V.width,V.height):s.renderbufferStorage(s.RENDERBUFFER,ge,V.width,V.height)}}s.bindRenderbuffer(s.RENDERBUFFER,null)}function Wt($,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(s.FRAMEBUFFER,$),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const It=n.get(V.depthTexture);It.__renderTarget=V,(!It.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),dt(V.depthTexture,0);const Xt=It.__webglTexture,Ot=Ft(V);if(V.depthTexture.format===ly)Vt(V)?l.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Xt,0,Ot):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Xt,0);else if(V.depthTexture.format===Fg)Vt(V)?l.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Xt,0,Ot):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Xt,0);else throw new Error("Unknown depthTexture format")}function ve($){const V=n.get($),vt=$.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==$.depthTexture){const It=$.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),It){const Xt=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,It.removeEventListener("dispose",Xt)};It.addEventListener("dispose",Xt),V.__depthDisposeCallback=Xt}V.__boundDepthTexture=It}if($.depthTexture&&!V.__autoAllocateDepthBuffer){if(vt)throw new Error("target.depthTexture not supported in Cube render targets");const It=$.texture.mipmaps;It&&It.length>0?Wt(V.__webglFramebuffer[0],$):Wt(V.__webglFramebuffer,$)}else if(vt){V.__webglDepthbuffer=[];for(let It=0;It<6;It++)if(e.bindFramebuffer(s.FRAMEBUFFER,V.__webglFramebuffer[It]),V.__webglDepthbuffer[It]===void 0)V.__webglDepthbuffer[It]=s.createRenderbuffer(),Ut(V.__webglDepthbuffer[It],$,!1);else{const Xt=$.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,Ot=V.__webglDepthbuffer[It];s.bindRenderbuffer(s.RENDERBUFFER,Ot),s.framebufferRenderbuffer(s.FRAMEBUFFER,Xt,s.RENDERBUFFER,Ot)}}else{const It=$.texture.mipmaps;if(It&&It.length>0?e.bindFramebuffer(s.FRAMEBUFFER,V.__webglFramebuffer[0]):e.bindFramebuffer(s.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=s.createRenderbuffer(),Ut(V.__webglDepthbuffer,$,!1);else{const Xt=$.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,Ot=V.__webglDepthbuffer;s.bindRenderbuffer(s.RENDERBUFFER,Ot),s.framebufferRenderbuffer(s.FRAMEBUFFER,Xt,s.RENDERBUFFER,Ot)}}e.bindFramebuffer(s.FRAMEBUFFER,null)}function ee($,V,vt){const It=n.get($);V!==void 0&&Bt(It.__webglFramebuffer,$,$.texture,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,0),vt!==void 0&&ve($)}function Ye($){const V=$.texture,vt=n.get($),It=n.get(V);$.addEventListener("dispose",F);const Xt=$.textures,Ot=$.isWebGLCubeRenderTarget===!0,ne=Xt.length>1;if(ne||(It.__webglTexture===void 0&&(It.__webglTexture=s.createTexture()),It.__version=V.version,a.memory.textures++),Ot){vt.__webglFramebuffer=[];for(let te=0;te<6;te++)if(V.mipmaps&&V.mipmaps.length>0){vt.__webglFramebuffer[te]=[];for(let ge=0;ge<V.mipmaps.length;ge++)vt.__webglFramebuffer[te][ge]=s.createFramebuffer()}else vt.__webglFramebuffer[te]=s.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){vt.__webglFramebuffer=[];for(let te=0;te<V.mipmaps.length;te++)vt.__webglFramebuffer[te]=s.createFramebuffer()}else vt.__webglFramebuffer=s.createFramebuffer();if(ne)for(let te=0,ge=Xt.length;te<ge;te++){const De=n.get(Xt[te]);De.__webglTexture===void 0&&(De.__webglTexture=s.createTexture(),a.memory.textures++)}if($.samples>0&&Vt($)===!1){vt.__webglMultisampledFramebuffer=s.createFramebuffer(),vt.__webglColorRenderbuffer=[],e.bindFramebuffer(s.FRAMEBUFFER,vt.__webglMultisampledFramebuffer);for(let te=0;te<Xt.length;te++){const ge=Xt[te];vt.__webglColorRenderbuffer[te]=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,vt.__webglColorRenderbuffer[te]);const De=r.convert(ge.format,ge.colorSpace),Jt=r.convert(ge.type),_e=B(ge.internalFormat,De,Jt,ge.colorSpace,$.isXRRenderTarget===!0),Se=Ft($);s.renderbufferStorageMultisample(s.RENDERBUFFER,Se,_e,$.width,$.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+te,s.RENDERBUFFER,vt.__webglColorRenderbuffer[te])}s.bindRenderbuffer(s.RENDERBUFFER,null),$.depthBuffer&&(vt.__webglDepthRenderbuffer=s.createRenderbuffer(),Ut(vt.__webglDepthRenderbuffer,$,!0)),e.bindFramebuffer(s.FRAMEBUFFER,null)}}if(Ot){e.bindTexture(s.TEXTURE_CUBE_MAP,It.__webglTexture),xt(s.TEXTURE_CUBE_MAP,V);for(let te=0;te<6;te++)if(V.mipmaps&&V.mipmaps.length>0)for(let ge=0;ge<V.mipmaps.length;ge++)Bt(vt.__webglFramebuffer[te][ge],$,V,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+te,ge);else Bt(vt.__webglFramebuffer[te],$,V,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+te,0);T(V)&&S(s.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(ne){for(let te=0,ge=Xt.length;te<ge;te++){const De=Xt[te],Jt=n.get(De);e.bindTexture(s.TEXTURE_2D,Jt.__webglTexture),xt(s.TEXTURE_2D,De),Bt(vt.__webglFramebuffer,$,De,s.COLOR_ATTACHMENT0+te,s.TEXTURE_2D,0),T(De)&&S(s.TEXTURE_2D)}e.unbindTexture()}else{let te=s.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(te=$.isWebGL3DRenderTarget?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY),e.bindTexture(te,It.__webglTexture),xt(te,V),V.mipmaps&&V.mipmaps.length>0)for(let ge=0;ge<V.mipmaps.length;ge++)Bt(vt.__webglFramebuffer[ge],$,V,s.COLOR_ATTACHMENT0,te,ge);else Bt(vt.__webglFramebuffer,$,V,s.COLOR_ATTACHMENT0,te,0);T(V)&&S(te),e.unbindTexture()}$.depthBuffer&&ve($)}function we($){const V=$.textures;for(let vt=0,It=V.length;vt<It;vt++){const Xt=V[vt];if(T(Xt)){const Ot=R($),ne=n.get(Xt).__webglTexture;e.bindTexture(Ot,ne),S(Ot),e.unbindTexture()}}}const se=[],Z=[];function Kt($){if($.samples>0){if(Vt($)===!1){const V=$.textures,vt=$.width,It=$.height;let Xt=s.COLOR_BUFFER_BIT;const Ot=$.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,ne=n.get($),te=V.length>1;if(te)for(let De=0;De<V.length;De++)e.bindFramebuffer(s.FRAMEBUFFER,ne.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+De,s.RENDERBUFFER,null),e.bindFramebuffer(s.FRAMEBUFFER,ne.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+De,s.TEXTURE_2D,null,0);e.bindFramebuffer(s.READ_FRAMEBUFFER,ne.__webglMultisampledFramebuffer);const ge=$.texture.mipmaps;ge&&ge.length>0?e.bindFramebuffer(s.DRAW_FRAMEBUFFER,ne.__webglFramebuffer[0]):e.bindFramebuffer(s.DRAW_FRAMEBUFFER,ne.__webglFramebuffer);for(let De=0;De<V.length;De++){if($.resolveDepthBuffer&&($.depthBuffer&&(Xt|=s.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(Xt|=s.STENCIL_BUFFER_BIT)),te){s.framebufferRenderbuffer(s.READ_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,ne.__webglColorRenderbuffer[De]);const Jt=n.get(V[De]).__webglTexture;s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,Jt,0)}s.blitFramebuffer(0,0,vt,It,0,0,vt,It,Xt,s.NEAREST),u===!0&&(se.length=0,Z.length=0,se.push(s.COLOR_ATTACHMENT0+De),$.depthBuffer&&$.resolveDepthBuffer===!1&&(se.push(Ot),Z.push(Ot),s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,Z)),s.invalidateFramebuffer(s.READ_FRAMEBUFFER,se))}if(e.bindFramebuffer(s.READ_FRAMEBUFFER,null),e.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),te)for(let De=0;De<V.length;De++){e.bindFramebuffer(s.FRAMEBUFFER,ne.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+De,s.RENDERBUFFER,ne.__webglColorRenderbuffer[De]);const Jt=n.get(V[De]).__webglTexture;e.bindFramebuffer(s.FRAMEBUFFER,ne.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+De,s.TEXTURE_2D,Jt,0)}e.bindFramebuffer(s.DRAW_FRAMEBUFFER,ne.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&u){const V=$.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT;s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,[V])}}}function Ft($){return Math.min(i.maxSamples,$.samples)}function Vt($){const V=n.get($);return $.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function Gt($){const V=a.render.frame;m.get($)!==V&&(m.set($,V),$.update())}function be($,V){const vt=$.colorSpace,It=$.format,Xt=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||vt!==zu&&vt!==Mc&&(Pn.getTransfer(vt)===fi?(It!==na||Xt!==Ws)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",vt)),V}function qt($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(f.width=$.naturalWidth||$.width,f.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(f.width=$.displayWidth,f.height=$.displayHeight):(f.width=$.width,f.height=$.height),f}this.allocateTextureUnit=it,this.resetTextureUnits=ot,this.setTexture2D=dt,this.setTexture2DArray=Q,this.setTexture3D=tt,this.setTextureCube=et,this.rebindTextures=ee,this.setupRenderTarget=Ye,this.updateRenderTargetMipmap=we,this.updateMultisampleRenderTarget=Kt,this.setupDepthRenderbuffer=ve,this.setupFrameBufferTexture=Bt,this.useMultisampledRTT=Vt}function RO(s,t){function e(n,i=Mc){let r;const a=Pn.getTransfer(i);if(n===Ws)return s.UNSIGNED_BYTE;if(n===j3)return s.UNSIGNED_SHORT_4_4_4_4;if(n===q3)return s.UNSIGNED_SHORT_5_5_5_1;if(n===x5)return s.UNSIGNED_INT_5_9_9_9_REV;if(n===_5)return s.BYTE;if(n===A5)return s.SHORT;if(n===oy)return s.UNSIGNED_SHORT;if(n===X3)return s.INT;if(n===Hu)return s.UNSIGNED_INT;if(n===Na)return s.FLOAT;if(n===n0)return s.HALF_FLOAT;if(n===b5)return s.ALPHA;if(n===S5)return s.RGB;if(n===na)return s.RGBA;if(n===ly)return s.DEPTH_COMPONENT;if(n===Fg)return s.DEPTH_STENCIL;if(n===Y3)return s.RED;if(n===Tx)return s.RED_INTEGER;if(n===E5)return s.RG;if(n===W3)return s.RG_INTEGER;if(n===K3)return s.RGBA_INTEGER;if(n===B_||n===O_||n===N_||n===I_)if(a===fi)if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===B_)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===O_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===N_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===I_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=t.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===B_)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===O_)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===N_)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===I_)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===TM||n===CM||n===wM||n===RM)if(r=t.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===TM)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===CM)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===wM)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===RM)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===LM||n===DM||n===BM)if(r=t.get("WEBGL_compressed_texture_etc"),r!==null){if(n===LM||n===DM)return a===fi?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===BM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===OM||n===NM||n===IM||n===UM||n===PM||n===FM||n===HM||n===zM||n===GM||n===kM||n===VM||n===QM||n===XM||n===jM)if(r=t.get("WEBGL_compressed_texture_astc"),r!==null){if(n===OM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===NM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===IM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===UM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===PM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===FM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===HM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===zM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===GM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===kM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===VM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===QM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===XM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===jM)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===U_||n===qM||n===YM)if(r=t.get("EXT_texture_compression_bptc"),r!==null){if(n===U_)return a===fi?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===qM)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===YM)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===M5||n===WM||n===KM||n===JM)if(r=t.get("EXT_texture_compression_rgtc"),r!==null){if(n===U_)return r.COMPRESSED_RED_RGTC1_EXT;if(n===WM)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===KM)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===JM)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Pg?s.UNSIGNED_INT_24_8:s[n]!==void 0?s[n]:null}return{convert:e}}const Oq=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Nq=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Iq{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(this.texture===null){const i=new wi,r=t.properties.get(i);r.__webglTexture=e.texture,(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,n=new Ks({vertexShader:Oq,fragmentShader:Nq,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new as(new My(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Uq extends Yo{constructor(t,e){super();const n=this;let i=null,r=1,a=null,l="local-floor",u=1,f=null,m=null,g=null,v=null,_=null,b=null;const C=new Iq,T=e.getContextAttributes();let S=null,R=null;const B=[],D=[],N=new Pt;let I=null;const F=new Rs;F.viewport=new Bn;const z=new Rs;z.viewport=new Bn;const U=[F,z],P=new yO;let X=null,ot=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(lt){let wt=B[lt];return wt===void 0&&(wt=new BE,B[lt]=wt),wt.getTargetRaySpace()},this.getControllerGrip=function(lt){let wt=B[lt];return wt===void 0&&(wt=new BE,B[lt]=wt),wt.getGripSpace()},this.getHand=function(lt){let wt=B[lt];return wt===void 0&&(wt=new BE,B[lt]=wt),wt.getHandSpace()};function it(lt){const wt=D.indexOf(lt.inputSource);if(wt===-1)return;const Bt=B[wt];Bt!==void 0&&(Bt.update(lt.inputSource,lt.frame,f||a),Bt.dispatchEvent({type:lt.type,data:lt.inputSource}))}function ct(){i.removeEventListener("select",it),i.removeEventListener("selectstart",it),i.removeEventListener("selectend",it),i.removeEventListener("squeeze",it),i.removeEventListener("squeezestart",it),i.removeEventListener("squeezeend",it),i.removeEventListener("end",ct),i.removeEventListener("inputsourceschange",dt);for(let lt=0;lt<B.length;lt++){const wt=D[lt];wt!==null&&(D[lt]=null,B[lt].disconnect(wt))}X=null,ot=null,C.reset(),t.setRenderTarget(S),_=null,v=null,g=null,i=null,R=null,Et.stop(),n.isPresenting=!1,t.setPixelRatio(I),t.setSize(N.width,N.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(lt){r=lt,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(lt){l=lt,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||a},this.setReferenceSpace=function(lt){f=lt},this.getBaseLayer=function(){return v!==null?v:_},this.getBinding=function(){return g},this.getFrame=function(){return b},this.getSession=function(){return i},this.setSession=async function(lt){if(i=lt,i!==null){if(S=t.getRenderTarget(),i.addEventListener("select",it),i.addEventListener("selectstart",it),i.addEventListener("selectend",it),i.addEventListener("squeeze",it),i.addEventListener("squeezestart",it),i.addEventListener("squeezeend",it),i.addEventListener("end",ct),i.addEventListener("inputsourceschange",dt),T.xrCompatible!==!0&&await e.makeXRCompatible(),I=t.getPixelRatio(),t.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Bt=null,Ut=null,Wt=null;T.depth&&(Wt=T.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Bt=T.stencil?Fg:ly,Ut=T.stencil?Pg:Hu);const ve={colorFormat:e.RGBA8,depthFormat:Wt,scaleFactor:r};g=new XRWebGLBinding(i,e),v=g.createProjectionLayer(ve),i.updateRenderState({layers:[v]}),t.setPixelRatio(1),t.setSize(v.textureWidth,v.textureHeight,!1),R=new Ds(v.textureWidth,v.textureHeight,{format:na,type:Ws,depthTexture:new Bx(v.textureWidth,v.textureHeight,Ut,void 0,void 0,void 0,void 0,void 0,void 0,Bt),stencilBuffer:T.stencil,colorSpace:t.outputColorSpace,samples:T.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const Bt={antialias:T.antialias,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:r};_=new XRWebGLLayer(i,e,Bt),i.updateRenderState({baseLayer:_}),t.setPixelRatio(1),t.setSize(_.framebufferWidth,_.framebufferHeight,!1),R=new Ds(_.framebufferWidth,_.framebufferHeight,{format:na,type:Ws,colorSpace:t.outputColorSpace,stencilBuffer:T.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}R.isXRRenderTarget=!0,this.setFoveation(u),f=null,a=await i.requestReferenceSpace(l),Et.setContext(i),Et.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return C.getDepthTexture()};function dt(lt){for(let wt=0;wt<lt.removed.length;wt++){const Bt=lt.removed[wt],Ut=D.indexOf(Bt);Ut>=0&&(D[Ut]=null,B[Ut].disconnect(Bt))}for(let wt=0;wt<lt.added.length;wt++){const Bt=lt.added[wt];let Ut=D.indexOf(Bt);if(Ut===-1){for(let ve=0;ve<B.length;ve++)if(ve>=D.length){D.push(Bt),Ut=ve;break}else if(D[ve]===null){D[ve]=Bt,Ut=ve;break}if(Ut===-1)break}const Wt=B[Ut];Wt&&Wt.connect(Bt)}}const Q=new nt,tt=new nt;function et(lt,wt,Bt){Q.setFromMatrixPosition(wt.matrixWorld),tt.setFromMatrixPosition(Bt.matrixWorld);const Ut=Q.distanceTo(tt),Wt=wt.projectionMatrix.elements,ve=Bt.projectionMatrix.elements,ee=Wt[14]/(Wt[10]-1),Ye=Wt[14]/(Wt[10]+1),we=(Wt[9]+1)/Wt[5],se=(Wt[9]-1)/Wt[5],Z=(Wt[8]-1)/Wt[0],Kt=(ve[8]+1)/ve[0],Ft=ee*Z,Vt=ee*Kt,Gt=Ut/(-Z+Kt),be=Gt*-Z;if(wt.matrixWorld.decompose(lt.position,lt.quaternion,lt.scale),lt.translateX(be),lt.translateZ(Gt),lt.matrixWorld.compose(lt.position,lt.quaternion,lt.scale),lt.matrixWorldInverse.copy(lt.matrixWorld).invert(),Wt[10]===-1)lt.projectionMatrix.copy(wt.projectionMatrix),lt.projectionMatrixInverse.copy(wt.projectionMatrixInverse);else{const qt=ee+Gt,$=Ye+Gt,V=Ft-be,vt=Vt+(Ut-be),It=we*Ye/$*qt,Xt=se*Ye/$*qt;lt.projectionMatrix.makePerspective(V,vt,It,Xt,qt,$),lt.projectionMatrixInverse.copy(lt.projectionMatrix).invert()}}function _t(lt,wt){wt===null?lt.matrixWorld.copy(lt.matrix):lt.matrixWorld.multiplyMatrices(wt.matrixWorld,lt.matrix),lt.matrixWorldInverse.copy(lt.matrixWorld).invert()}this.updateCamera=function(lt){if(i===null)return;let wt=lt.near,Bt=lt.far;C.texture!==null&&(C.depthNear>0&&(wt=C.depthNear),C.depthFar>0&&(Bt=C.depthFar)),P.near=z.near=F.near=wt,P.far=z.far=F.far=Bt,(X!==P.near||ot!==P.far)&&(i.updateRenderState({depthNear:P.near,depthFar:P.far}),X=P.near,ot=P.far),F.layers.mask=lt.layers.mask|2,z.layers.mask=lt.layers.mask|4,P.layers.mask=F.layers.mask|z.layers.mask;const Ut=lt.parent,Wt=P.cameras;_t(P,Ut);for(let ve=0;ve<Wt.length;ve++)_t(Wt[ve],Ut);Wt.length===2?et(P,F,z):P.projectionMatrix.copy(F.projectionMatrix),K(lt,P,Ut)};function K(lt,wt,Bt){Bt===null?lt.matrix.copy(wt.matrixWorld):(lt.matrix.copy(Bt.matrixWorld),lt.matrix.invert(),lt.matrix.multiply(wt.matrixWorld)),lt.matrix.decompose(lt.position,lt.quaternion,lt.scale),lt.updateMatrixWorld(!0),lt.projectionMatrix.copy(wt.projectionMatrix),lt.projectionMatrixInverse.copy(wt.projectionMatrixInverse),lt.isPerspectiveCamera&&(lt.fov=hy*2*Math.atan(1/lt.projectionMatrix.elements[5]),lt.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(v===null&&_===null))return u},this.setFoveation=function(lt){u=lt,v!==null&&(v.fixedFoveation=lt),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=lt)},this.hasDepthSensing=function(){return C.texture!==null},this.getDepthSensingMesh=function(){return C.getMesh(P)};let at=null;function xt(lt,wt){if(m=wt.getViewerPose(f||a),b=wt,m!==null){const Bt=m.views;_!==null&&(t.setRenderTargetFramebuffer(R,_.framebuffer),t.setRenderTarget(R));let Ut=!1;Bt.length!==P.cameras.length&&(P.cameras.length=0,Ut=!0);for(let ee=0;ee<Bt.length;ee++){const Ye=Bt[ee];let we=null;if(_!==null)we=_.getViewport(Ye);else{const Z=g.getViewSubImage(v,Ye);we=Z.viewport,ee===0&&(t.setRenderTargetTextures(R,Z.colorTexture,Z.depthStencilTexture),t.setRenderTarget(R))}let se=U[ee];se===void 0&&(se=new Rs,se.layers.enable(ee),se.viewport=new Bn,U[ee]=se),se.matrix.fromArray(Ye.transform.matrix),se.matrix.decompose(se.position,se.quaternion,se.scale),se.projectionMatrix.fromArray(Ye.projectionMatrix),se.projectionMatrixInverse.copy(se.projectionMatrix).invert(),se.viewport.set(we.x,we.y,we.width,we.height),ee===0&&(P.matrix.copy(se.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),Ut===!0&&P.cameras.push(se)}const Wt=i.enabledFeatures;if(Wt&&Wt.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&g){const ee=g.getDepthInformation(Bt[0]);ee&&ee.isValid&&ee.texture&&C.init(t,ee,i.renderState)}}for(let Bt=0;Bt<B.length;Bt++){const Ut=D[Bt],Wt=B[Bt];Ut!==null&&Wt!==void 0&&Wt.update(Ut,wt,f||a)}at&&at(lt,wt),wt.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:wt}),b=null}const Et=new EO;Et.setAnimationLoop(xt),this.setAnimationLoop=function(lt){at=lt},this.dispose=function(){}}}const mm=new Qo,Pq=new Fe;function Fq(s,t){function e(T,S){T.matrixAutoUpdate===!0&&T.updateMatrix(),S.value.copy(T.matrix)}function n(T,S){S.color.getRGB(T.fogColor.value,D9(s)),S.isFog?(T.fogNear.value=S.near,T.fogFar.value=S.far):S.isFogExp2&&(T.fogDensity.value=S.density)}function i(T,S,R,B,D){S.isMeshBasicMaterial||S.isMeshLambertMaterial?r(T,S):S.isMeshToonMaterial?(r(T,S),g(T,S)):S.isMeshPhongMaterial?(r(T,S),m(T,S)):S.isMeshStandardMaterial?(r(T,S),v(T,S),S.isMeshPhysicalMaterial&&_(T,S,D)):S.isMeshMatcapMaterial?(r(T,S),b(T,S)):S.isMeshDepthMaterial?r(T,S):S.isMeshDistanceMaterial?(r(T,S),C(T,S)):S.isMeshNormalMaterial?r(T,S):S.isLineBasicMaterial?(a(T,S),S.isLineDashedMaterial&&l(T,S)):S.isPointsMaterial?u(T,S,R,B):S.isSpriteMaterial?f(T,S):S.isShadowMaterial?(T.color.value.copy(S.color),T.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function r(T,S){T.opacity.value=S.opacity,S.color&&T.diffuse.value.copy(S.color),S.emissive&&T.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(T.map.value=S.map,e(S.map,T.mapTransform)),S.alphaMap&&(T.alphaMap.value=S.alphaMap,e(S.alphaMap,T.alphaMapTransform)),S.bumpMap&&(T.bumpMap.value=S.bumpMap,e(S.bumpMap,T.bumpMapTransform),T.bumpScale.value=S.bumpScale,S.side===qs&&(T.bumpScale.value*=-1)),S.normalMap&&(T.normalMap.value=S.normalMap,e(S.normalMap,T.normalMapTransform),T.normalScale.value.copy(S.normalScale),S.side===qs&&T.normalScale.value.negate()),S.displacementMap&&(T.displacementMap.value=S.displacementMap,e(S.displacementMap,T.displacementMapTransform),T.displacementScale.value=S.displacementScale,T.displacementBias.value=S.displacementBias),S.emissiveMap&&(T.emissiveMap.value=S.emissiveMap,e(S.emissiveMap,T.emissiveMapTransform)),S.specularMap&&(T.specularMap.value=S.specularMap,e(S.specularMap,T.specularMapTransform)),S.alphaTest>0&&(T.alphaTest.value=S.alphaTest);const R=t.get(S),B=R.envMap,D=R.envMapRotation;B&&(T.envMap.value=B,mm.copy(D),mm.x*=-1,mm.y*=-1,mm.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(mm.y*=-1,mm.z*=-1),T.envMapRotation.value.setFromMatrix4(Pq.makeRotationFromEuler(mm)),T.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=S.reflectivity,T.ior.value=S.ior,T.refractionRatio.value=S.refractionRatio),S.lightMap&&(T.lightMap.value=S.lightMap,T.lightMapIntensity.value=S.lightMapIntensity,e(S.lightMap,T.lightMapTransform)),S.aoMap&&(T.aoMap.value=S.aoMap,T.aoMapIntensity.value=S.aoMapIntensity,e(S.aoMap,T.aoMapTransform))}function a(T,S){T.diffuse.value.copy(S.color),T.opacity.value=S.opacity,S.map&&(T.map.value=S.map,e(S.map,T.mapTransform))}function l(T,S){T.dashSize.value=S.dashSize,T.totalSize.value=S.dashSize+S.gapSize,T.scale.value=S.scale}function u(T,S,R,B){T.diffuse.value.copy(S.color),T.opacity.value=S.opacity,T.size.value=S.size*R,T.scale.value=B*.5,S.map&&(T.map.value=S.map,e(S.map,T.uvTransform)),S.alphaMap&&(T.alphaMap.value=S.alphaMap,e(S.alphaMap,T.alphaMapTransform)),S.alphaTest>0&&(T.alphaTest.value=S.alphaTest)}function f(T,S){T.diffuse.value.copy(S.color),T.opacity.value=S.opacity,T.rotation.value=S.rotation,S.map&&(T.map.value=S.map,e(S.map,T.mapTransform)),S.alphaMap&&(T.alphaMap.value=S.alphaMap,e(S.alphaMap,T.alphaMapTransform)),S.alphaTest>0&&(T.alphaTest.value=S.alphaTest)}function m(T,S){T.specular.value.copy(S.specular),T.shininess.value=Math.max(S.shininess,1e-4)}function g(T,S){S.gradientMap&&(T.gradientMap.value=S.gradientMap)}function v(T,S){T.metalness.value=S.metalness,S.metalnessMap&&(T.metalnessMap.value=S.metalnessMap,e(S.metalnessMap,T.metalnessMapTransform)),T.roughness.value=S.roughness,S.roughnessMap&&(T.roughnessMap.value=S.roughnessMap,e(S.roughnessMap,T.roughnessMapTransform)),S.envMap&&(T.envMapIntensity.value=S.envMapIntensity)}function _(T,S,R){T.ior.value=S.ior,S.sheen>0&&(T.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),T.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(T.sheenColorMap.value=S.sheenColorMap,e(S.sheenColorMap,T.sheenColorMapTransform)),S.sheenRoughnessMap&&(T.sheenRoughnessMap.value=S.sheenRoughnessMap,e(S.sheenRoughnessMap,T.sheenRoughnessMapTransform))),S.clearcoat>0&&(T.clearcoat.value=S.clearcoat,T.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(T.clearcoatMap.value=S.clearcoatMap,e(S.clearcoatMap,T.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,e(S.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(T.clearcoatNormalMap.value=S.clearcoatNormalMap,e(S.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===qs&&T.clearcoatNormalScale.value.negate())),S.dispersion>0&&(T.dispersion.value=S.dispersion),S.iridescence>0&&(T.iridescence.value=S.iridescence,T.iridescenceIOR.value=S.iridescenceIOR,T.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(T.iridescenceMap.value=S.iridescenceMap,e(S.iridescenceMap,T.iridescenceMapTransform)),S.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=S.iridescenceThicknessMap,e(S.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),S.transmission>0&&(T.transmission.value=S.transmission,T.transmissionSamplerMap.value=R.texture,T.transmissionSamplerSize.value.set(R.width,R.height),S.transmissionMap&&(T.transmissionMap.value=S.transmissionMap,e(S.transmissionMap,T.transmissionMapTransform)),T.thickness.value=S.thickness,S.thicknessMap&&(T.thicknessMap.value=S.thicknessMap,e(S.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=S.attenuationDistance,T.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(T.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(T.anisotropyMap.value=S.anisotropyMap,e(S.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=S.specularIntensity,T.specularColor.value.copy(S.specularColor),S.specularColorMap&&(T.specularColorMap.value=S.specularColorMap,e(S.specularColorMap,T.specularColorMapTransform)),S.specularIntensityMap&&(T.specularIntensityMap.value=S.specularIntensityMap,e(S.specularIntensityMap,T.specularIntensityMapTransform))}function b(T,S){S.matcap&&(T.matcap.value=S.matcap)}function C(T,S){const R=t.get(S).light;T.referencePosition.value.setFromMatrixPosition(R.matrixWorld),T.nearDistance.value=R.shadow.camera.near,T.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Hq(s,t,e,n){let i={},r={},a=[];const l=s.getParameter(s.MAX_UNIFORM_BUFFER_BINDINGS);function u(R,B){const D=B.program;n.uniformBlockBinding(R,D)}function f(R,B){let D=i[R.id];D===void 0&&(b(R),D=m(R),i[R.id]=D,R.addEventListener("dispose",T));const N=B.program;n.updateUBOMapping(R,N);const I=t.render.frame;r[R.id]!==I&&(v(R),r[R.id]=I)}function m(R){const B=g();R.__bindingPointIndex=B;const D=s.createBuffer(),N=R.__size,I=R.usage;return s.bindBuffer(s.UNIFORM_BUFFER,D),s.bufferData(s.UNIFORM_BUFFER,N,I),s.bindBuffer(s.UNIFORM_BUFFER,null),s.bindBufferBase(s.UNIFORM_BUFFER,B,D),D}function g(){for(let R=0;R<l;R++)if(a.indexOf(R)===-1)return a.push(R),R;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(R){const B=i[R.id],D=R.uniforms,N=R.__cache;s.bindBuffer(s.UNIFORM_BUFFER,B);for(let I=0,F=D.length;I<F;I++){const z=Array.isArray(D[I])?D[I]:[D[I]];for(let U=0,P=z.length;U<P;U++){const X=z[U];if(_(X,I,U,N)===!0){const ot=X.__offset,it=Array.isArray(X.value)?X.value:[X.value];let ct=0;for(let dt=0;dt<it.length;dt++){const Q=it[dt],tt=C(Q);typeof Q=="number"||typeof Q=="boolean"?(X.__data[0]=Q,s.bufferSubData(s.UNIFORM_BUFFER,ot+ct,X.__data)):Q.isMatrix3?(X.__data[0]=Q.elements[0],X.__data[1]=Q.elements[1],X.__data[2]=Q.elements[2],X.__data[3]=0,X.__data[4]=Q.elements[3],X.__data[5]=Q.elements[4],X.__data[6]=Q.elements[5],X.__data[7]=0,X.__data[8]=Q.elements[6],X.__data[9]=Q.elements[7],X.__data[10]=Q.elements[8],X.__data[11]=0):(Q.toArray(X.__data,ct),ct+=tt.storage/Float32Array.BYTES_PER_ELEMENT)}s.bufferSubData(s.UNIFORM_BUFFER,ot,X.__data)}}}s.bindBuffer(s.UNIFORM_BUFFER,null)}function _(R,B,D,N){const I=R.value,F=B+"_"+D;if(N[F]===void 0)return typeof I=="number"||typeof I=="boolean"?N[F]=I:N[F]=I.clone(),!0;{const z=N[F];if(typeof I=="number"||typeof I=="boolean"){if(z!==I)return N[F]=I,!0}else if(z.equals(I)===!1)return z.copy(I),!0}return!1}function b(R){const B=R.uniforms;let D=0;const N=16;for(let F=0,z=B.length;F<z;F++){const U=Array.isArray(B[F])?B[F]:[B[F]];for(let P=0,X=U.length;P<X;P++){const ot=U[P],it=Array.isArray(ot.value)?ot.value:[ot.value];for(let ct=0,dt=it.length;ct<dt;ct++){const Q=it[ct],tt=C(Q),et=D%N,_t=et%tt.boundary,K=et+_t;D+=_t,K!==0&&N-K<tt.storage&&(D+=N-K),ot.__data=new Float32Array(tt.storage/Float32Array.BYTES_PER_ELEMENT),ot.__offset=D,D+=tt.storage}}}const I=D%N;return I>0&&(D+=N-I),R.__size=D,R.__cache={},this}function C(R){const B={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(B.boundary=4,B.storage=4):R.isVector2?(B.boundary=8,B.storage=8):R.isVector3||R.isColor?(B.boundary=16,B.storage=12):R.isVector4?(B.boundary=16,B.storage=16):R.isMatrix3?(B.boundary=48,B.storage=48):R.isMatrix4?(B.boundary=64,B.storage=64):R.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",R),B}function T(R){const B=R.target;B.removeEventListener("dispose",T);const D=a.indexOf(B.__bindingPointIndex);a.splice(D,1),s.deleteBuffer(i[B.id]),delete i[B.id],delete r[B.id]}function S(){for(const R in i)s.deleteBuffer(i[R]);a=[],i={},r={}}return{bind:u,update:f,dispose:S}}class LO{constructor(t={}){const{canvas:e=w9(),context:n=null,depth:i=!0,stencil:r=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:f=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:v=!1}=t;this.isWebGLRenderer=!0;let _;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=a;const b=new Uint32Array(4),C=new Int32Array(4);let T=null,S=null;const R=[],B=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Lc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const D=this;let N=!1;this._outputColorSpace=Kn;let I=0,F=0,z=null,U=-1,P=null;const X=new Bn,ot=new Bn;let it=null;const ct=new ae(0);let dt=0,Q=e.width,tt=e.height,et=1,_t=null,K=null;const at=new Bn(0,0,Q,tt),xt=new Bn(0,0,Q,tt);let Et=!1;const lt=new Ey;let wt=!1,Bt=!1;const Ut=new Fe,Wt=new Fe,ve=new nt,ee=new Bn,Ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let we=!1;function se(){return z===null?et:1}let Z=n;function Kt(q,pt){return e.getContext(q,pt)}try{const q={alpha:!0,depth:i,stencil:r,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:f,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${e0}`),e.addEventListener("webglcontextlost",Qt,!1),e.addEventListener("webglcontextrestored",fe,!1),e.addEventListener("webglcontextcreationerror",ue,!1),Z===null){const pt="webgl2";if(Z=Kt(pt,q),Z===null)throw Kt(pt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(q){throw console.error("THREE.WebGLRenderer: "+q.message),q}let Ft,Vt,Gt,be,qt,$,V,vt,It,Xt,Ot,ne,te,ge,De,Jt,_e,Se,Te,le,rn,He,Gn,mt;function ce(){Ft=new JX(Z),Ft.init(),He=new RO(Z,Ft),Vt=new QX(Z,Ft,t,He),Gt=new Dq(Z,Ft),Vt.reverseDepthBuffer&&v&&Gt.buffers.depth.setReversed(!0),be=new tj(Z),qt=new yq,$=new Bq(Z,Ft,Gt,qt,Vt,He,be),V=new jX(D),vt=new KX(D),It=new aV(Z),Gn=new kX(Z,It),Xt=new ZX(Z,It,be,Gn),Ot=new nj(Z,Xt,It,be),Te=new ej(Z,Vt,$),Jt=new XX(qt),ne=new vq(D,V,vt,Ft,Vt,Gn,Jt),te=new Fq(D,qt),ge=new Aq,De=new Tq(Ft),Se=new GX(D,V,vt,Gt,Ot,_,u),_e=new Rq(D,Ot,Vt),mt=new Hq(Z,be,Vt,Gt),le=new VX(Z,Ft,be),rn=new $X(Z,Ft,be),be.programs=ne.programs,D.capabilities=Vt,D.extensions=Ft,D.properties=qt,D.renderLists=ge,D.shadowMap=_e,D.state=Gt,D.info=be}ce();const Nt=new Uq(D,Z);this.xr=Nt,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const q=Ft.get("WEBGL_lose_context");q&&q.loseContext()},this.forceContextRestore=function(){const q=Ft.get("WEBGL_lose_context");q&&q.restoreContext()},this.getPixelRatio=function(){return et},this.setPixelRatio=function(q){q!==void 0&&(et=q,this.setSize(Q,tt,!1))},this.getSize=function(q){return q.set(Q,tt)},this.setSize=function(q,pt,Ct=!0){if(Nt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Q=q,tt=pt,e.width=Math.floor(q*et),e.height=Math.floor(pt*et),Ct===!0&&(e.style.width=q+"px",e.style.height=pt+"px"),this.setViewport(0,0,q,pt)},this.getDrawingBufferSize=function(q){return q.set(Q*et,tt*et).floor()},this.setDrawingBufferSize=function(q,pt,Ct){Q=q,tt=pt,et=Ct,e.width=Math.floor(q*Ct),e.height=Math.floor(pt*Ct),this.setViewport(0,0,q,pt)},this.getCurrentViewport=function(q){return q.copy(X)},this.getViewport=function(q){return q.copy(at)},this.setViewport=function(q,pt,Ct,Rt){q.isVector4?at.set(q.x,q.y,q.z,q.w):at.set(q,pt,Ct,Rt),Gt.viewport(X.copy(at).multiplyScalar(et).round())},this.getScissor=function(q){return q.copy(xt)},this.setScissor=function(q,pt,Ct,Rt){q.isVector4?xt.set(q.x,q.y,q.z,q.w):xt.set(q,pt,Ct,Rt),Gt.scissor(ot.copy(xt).multiplyScalar(et).round())},this.getScissorTest=function(){return Et},this.setScissorTest=function(q){Gt.setScissorTest(Et=q)},this.setOpaqueSort=function(q){_t=q},this.setTransparentSort=function(q){K=q},this.getClearColor=function(q){return q.copy(Se.getClearColor())},this.setClearColor=function(){Se.setClearColor(...arguments)},this.getClearAlpha=function(){return Se.getClearAlpha()},this.setClearAlpha=function(){Se.setClearAlpha(...arguments)},this.clear=function(q=!0,pt=!0,Ct=!0){let Rt=0;if(q){let yt=!1;if(z!==null){const Yt=z.texture.format;yt=Yt===K3||Yt===W3||Yt===Tx}if(yt){const Yt=z.texture.type,ie=Yt===Ws||Yt===Hu||Yt===oy||Yt===Pg||Yt===j3||Yt===q3,re=Se.getClearColor(),Ae=Se.getClearAlpha(),Ge=re.r,Oe=re.g,Ce=re.b;ie?(b[0]=Ge,b[1]=Oe,b[2]=Ce,b[3]=Ae,Z.clearBufferuiv(Z.COLOR,0,b)):(C[0]=Ge,C[1]=Oe,C[2]=Ce,C[3]=Ae,Z.clearBufferiv(Z.COLOR,0,C))}else Rt|=Z.COLOR_BUFFER_BIT}pt&&(Rt|=Z.DEPTH_BUFFER_BIT),Ct&&(Rt|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear(Rt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Qt,!1),e.removeEventListener("webglcontextrestored",fe,!1),e.removeEventListener("webglcontextcreationerror",ue,!1),Se.dispose(),ge.dispose(),De.dispose(),qt.dispose(),V.dispose(),vt.dispose(),Ot.dispose(),Gn.dispose(),mt.dispose(),ne.dispose(),Nt.dispose(),Nt.removeEventListener("sessionstart",Ji),Nt.removeEventListener("sessionend",cs),$s.stop()};function Qt(q){q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function fe(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const q=be.autoReset,pt=_e.enabled,Ct=_e.autoUpdate,Rt=_e.needsUpdate,yt=_e.type;ce(),be.autoReset=q,_e.enabled=pt,_e.autoUpdate=Ct,_e.needsUpdate=Rt,_e.type=yt}function ue(q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",q.statusMessage)}function qe(q){const pt=q.target;pt.removeEventListener("dispose",qe),Jn(pt)}function Jn(q){Ei(q),qt.remove(q)}function Ei(q){const pt=qt.get(q).programs;pt!==void 0&&(pt.forEach(function(Ct){ne.releaseProgram(Ct)}),q.isShaderMaterial&&ne.releaseShaderCache(q))}this.renderBufferDirect=function(q,pt,Ct,Rt,yt,Yt){pt===null&&(pt=Ye);const ie=yt.isMesh&&yt.matrixWorld.determinant()<0,re=Nc(q,pt,Ct,Rt,yt);Gt.setMaterial(Rt,ie);let Ae=Ct.index,Ge=1;if(Rt.wireframe===!0){if(Ae=Xt.getWireframeAttribute(Ct),Ae===void 0)return;Ge=2}const Oe=Ct.drawRange,Ce=Ct.attributes.position;let pn=Oe.start*Ge,Nn=(Oe.start+Oe.count)*Ge;Yt!==null&&(pn=Math.max(pn,Yt.start*Ge),Nn=Math.min(Nn,(Yt.start+Yt.count)*Ge)),Ae!==null?(pn=Math.max(pn,0),Nn=Math.min(Nn,Ae.count)):Ce!=null&&(pn=Math.max(pn,0),Nn=Math.min(Nn,Ce.count));const Mi=Nn-pn;if(Mi<0||Mi===1/0)return;Gn.setup(yt,Rt,re,Ct,Ae);let yn,bn=le;if(Ae!==null&&(yn=It.get(Ae),bn=rn,bn.setIndex(yn)),yt.isMesh)Rt.wireframe===!0?(Gt.setLineWidth(Rt.wireframeLinewidth*se()),bn.setMode(Z.LINES)):bn.setMode(Z.TRIANGLES);else if(yt.isLine){let Ne=Rt.linewidth;Ne===void 0&&(Ne=1),Gt.setLineWidth(Ne*se()),yt.isLineSegments?bn.setMode(Z.LINES):yt.isLineLoop?bn.setMode(Z.LINE_LOOP):bn.setMode(Z.LINE_STRIP)}else yt.isPoints?bn.setMode(Z.POINTS):yt.isSprite&&bn.setMode(Z.TRIANGLES);if(yt.isBatchedMesh)if(yt._multiDrawInstances!==null)DE("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),bn.renderMultiDrawInstances(yt._multiDrawStarts,yt._multiDrawCounts,yt._multiDrawCount,yt._multiDrawInstances);else if(Ft.get("WEBGL_multi_draw"))bn.renderMultiDraw(yt._multiDrawStarts,yt._multiDrawCounts,yt._multiDrawCount);else{const Ne=yt._multiDrawStarts,Ri=yt._multiDrawCounts,Ln=yt._multiDrawCount,Bs=Ae?It.get(Ae).bytesPerElement:1,Wo=qt.get(Rt).currentProgram.getUniforms();for(let ri=0;ri<Ln;ri++)Wo.setValue(Z,"_gl_DrawID",ri),bn.render(Ne[ri]/Bs,Ri[ri])}else if(yt.isInstancedMesh)bn.renderInstances(pn,Mi,yt.count);else if(Ct.isInstancedBufferGeometry){const Ne=Ct._maxInstanceCount!==void 0?Ct._maxInstanceCount:1/0,Ri=Math.min(Ct.instanceCount,Ne);bn.renderInstances(pn,Mi,Ri)}else bn.render(pn,Mi)};function Cn(q,pt,Ct){q.transparent===!0&&q.side===Da&&q.forceSinglePass===!1?(q.side=qs,q.needsUpdate=!0,ti(q,pt,Ct),q.side=Dc,q.needsUpdate=!0,ti(q,pt,Ct),q.side=Da):ti(q,pt,Ct)}this.compile=function(q,pt,Ct=null){Ct===null&&(Ct=q),S=De.get(Ct),S.init(pt),B.push(S),Ct.traverseVisible(function(yt){yt.isLight&&yt.layers.test(pt.layers)&&(S.pushLight(yt),yt.castShadow&&S.pushShadow(yt))}),q!==Ct&&q.traverseVisible(function(yt){yt.isLight&&yt.layers.test(pt.layers)&&(S.pushLight(yt),yt.castShadow&&S.pushShadow(yt))}),S.setupLights();const Rt=new Set;return q.traverse(function(yt){if(!(yt.isMesh||yt.isPoints||yt.isLine||yt.isSprite))return;const Yt=yt.material;if(Yt)if(Array.isArray(Yt))for(let ie=0;ie<Yt.length;ie++){const re=Yt[ie];Cn(re,Ct,yt),Rt.add(re)}else Cn(Yt,Ct,yt),Rt.add(Yt)}),S=B.pop(),Rt},this.compileAsync=function(q,pt,Ct=null){const Rt=this.compile(q,pt,Ct);return new Promise(yt=>{function Yt(){if(Rt.forEach(function(ie){qt.get(ie).currentProgram.isReady()&&Rt.delete(ie)}),Rt.size===0){yt(q);return}setTimeout(Yt,10)}Ft.get("KHR_parallel_shader_compile")!==null?Yt():setTimeout(Yt,10)})};let Nr=null;function ls(q){Nr&&Nr(q)}function Ji(){$s.stop()}function cs(){$s.start()}const $s=new EO;$s.setAnimationLoop(ls),typeof self<"u"&&$s.setContext(self),this.setAnimationLoop=function(q){Nr=q,Nt.setAnimationLoop(q),q===null?$s.stop():$s.start()},Nt.addEventListener("sessionstart",Ji),Nt.addEventListener("sessionend",cs),this.render=function(q,pt){if(pt!==void 0&&pt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),pt.parent===null&&pt.matrixWorldAutoUpdate===!0&&pt.updateMatrixWorld(),Nt.enabled===!0&&Nt.isPresenting===!0&&(Nt.cameraAutoUpdate===!0&&Nt.updateCamera(pt),pt=Nt.getCamera()),q.isScene===!0&&q.onBeforeRender(D,q,pt,z),S=De.get(q,B.length),S.init(pt),B.push(S),Wt.multiplyMatrices(pt.projectionMatrix,pt.matrixWorldInverse),lt.setFromProjectionMatrix(Wt),Bt=this.localClippingEnabled,wt=Jt.init(this.clippingPlanes,Bt),T=ge.get(q,R.length),T.init(),R.push(T),Nt.enabled===!0&&Nt.isPresenting===!0){const Yt=D.xr.getDepthSensingMesh();Yt!==null&&Ir(Yt,pt,-1/0,D.sortObjects)}Ir(q,pt,0,D.sortObjects),T.finish(),D.sortObjects===!0&&T.sort(_t,K),we=Nt.enabled===!1||Nt.isPresenting===!1||Nt.hasDepthSensing()===!1,we&&Se.addToRenderList(T,q),this.info.render.frame++,wt===!0&&Jt.beginShadows();const Ct=S.state.shadowsArray;_e.render(Ct,q,pt),wt===!0&&Jt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Rt=T.opaque,yt=T.transmissive;if(S.setupLights(),pt.isArrayCamera){const Yt=pt.cameras;if(yt.length>0)for(let ie=0,re=Yt.length;ie<re;ie++){const Ae=Yt[ie];lo(Rt,yt,q,Ae)}we&&Se.render(q);for(let ie=0,re=Yt.length;ie<re;ie++){const Ae=Yt[ie];hp(T,q,Ae,Ae.viewport)}}else yt.length>0&&lo(Rt,yt,q,pt),we&&Se.render(q),hp(T,q,pt);z!==null&&F===0&&($.updateMultisampleRenderTarget(z),$.updateRenderTargetMipmap(z)),q.isScene===!0&&q.onAfterRender(D,q,pt),Gn.resetDefaultState(),U=-1,P=null,B.pop(),B.length>0?(S=B[B.length-1],wt===!0&&Jt.setGlobalState(D.clippingPlanes,S.state.camera)):S=null,R.pop(),R.length>0?T=R[R.length-1]:T=null};function Ir(q,pt,Ct,Rt){if(q.visible===!1)return;if(q.layers.test(pt.layers)){if(q.isGroup)Ct=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&&q.update(pt);else if(q.isLight)S.pushLight(q),q.castShadow&&S.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||lt.intersectsSprite(q)){Rt&&ee.setFromMatrixPosition(q.matrixWorld).applyMatrix4(Wt);const ie=Ot.update(q),re=q.material;re.visible&&T.push(q,ie,re,Ct,ee.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&&(!q.frustumCulled||lt.intersectsObject(q))){const ie=Ot.update(q),re=q.material;if(Rt&&(q.boundingSphere!==void 0?(q.boundingSphere===null&&q.computeBoundingSphere(),ee.copy(q.boundingSphere.center)):(ie.boundingSphere===null&&ie.computeBoundingSphere(),ee.copy(ie.boundingSphere.center)),ee.applyMatrix4(q.matrixWorld).applyMatrix4(Wt)),Array.isArray(re)){const Ae=ie.groups;for(let Ge=0,Oe=Ae.length;Ge<Oe;Ge++){const Ce=Ae[Ge],pn=re[Ce.materialIndex];pn&&pn.visible&&T.push(q,ie,pn,Ct,ee.z,Ce)}}else re.visible&&T.push(q,ie,re,Ct,ee.z,null)}}const Yt=q.children;for(let ie=0,re=Yt.length;ie<re;ie++)Ir(Yt[ie],pt,Ct,Rt)}function hp(q,pt,Ct,Rt){const yt=q.opaque,Yt=q.transmissive,ie=q.transparent;S.setupLightsView(Ct),wt===!0&&Jt.setGlobalState(D.clippingPlanes,Ct),Rt&&Gt.viewport(X.copy(Rt)),yt.length>0&&mr(yt,pt,Ct),Yt.length>0&&mr(Yt,pt,Ct),ie.length>0&&mr(ie,pt,Ct),Gt.buffers.depth.setTest(!0),Gt.buffers.depth.setMask(!0),Gt.buffers.color.setMask(!0),Gt.setPolygonOffset(!1)}function lo(q,pt,Ct,Rt){if((Ct.isScene===!0?Ct.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[Rt.id]===void 0&&(S.state.transmissionRenderTarget[Rt.id]=new Ds(1,1,{generateMipmaps:!0,type:Ft.has("EXT_color_buffer_half_float")||Ft.has("EXT_color_buffer_float")?n0:Ws,minFilter:Cl,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Pn.workingColorSpace}));const Yt=S.state.transmissionRenderTarget[Rt.id],ie=Rt.viewport||X;Yt.setSize(ie.z*D.transmissionResolutionScale,ie.w*D.transmissionResolutionScale);const re=D.getRenderTarget();D.setRenderTarget(Yt),D.getClearColor(ct),dt=D.getClearAlpha(),dt<1&&D.setClearColor(16777215,.5),D.clear(),we&&Se.render(Ct);const Ae=D.toneMapping;D.toneMapping=Lc;const Ge=Rt.viewport;if(Rt.viewport!==void 0&&(Rt.viewport=void 0),S.setupLightsView(Rt),wt===!0&&Jt.setGlobalState(D.clippingPlanes,Rt),mr(q,Ct,Rt),$.updateMultisampleRenderTarget(Yt),$.updateRenderTargetMipmap(Yt),Ft.has("WEBGL_multisampled_render_to_texture")===!1){let Oe=!1;for(let Ce=0,pn=pt.length;Ce<pn;Ce++){const Nn=pt[Ce],Mi=Nn.object,yn=Nn.geometry,bn=Nn.material,Ne=Nn.group;if(bn.side===Da&&Mi.layers.test(Rt.layers)){const Ri=bn.side;bn.side=qs,bn.needsUpdate=!0,co(Mi,Ct,Rt,yn,bn,Ne),bn.side=Ri,bn.needsUpdate=!0,Oe=!0}}Oe===!0&&($.updateMultisampleRenderTarget(Yt),$.updateRenderTargetMipmap(Yt))}D.setRenderTarget(re),D.setClearColor(ct,dt),Ge!==void 0&&(Rt.viewport=Ge),D.toneMapping=Ae}function mr(q,pt,Ct){const Rt=pt.isScene===!0?pt.overrideMaterial:null;for(let yt=0,Yt=q.length;yt<Yt;yt++){const ie=q[yt],re=ie.object,Ae=ie.geometry,Ge=ie.group;let Oe=ie.material;Oe.allowOverride===!0&&Rt!==null&&(Oe=Rt),re.layers.test(Ct.layers)&&co(re,pt,Ct,Ae,Oe,Ge)}}function co(q,pt,Ct,Rt,yt,Yt){q.onBeforeRender(D,pt,Ct,Rt,yt,Yt),q.modelViewMatrix.multiplyMatrices(Ct.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),yt.onBeforeRender(D,pt,Ct,Rt,q,Yt),yt.transparent===!0&&yt.side===Da&&yt.forceSinglePass===!1?(yt.side=qs,yt.needsUpdate=!0,D.renderBufferDirect(Ct,pt,Rt,yt,q,Yt),yt.side=Dc,yt.needsUpdate=!0,D.renderBufferDirect(Ct,pt,Rt,yt,q,Yt),yt.side=Da):D.renderBufferDirect(Ct,pt,Rt,yt,q,Yt),q.onAfterRender(D,pt,Ct,Rt,yt,Yt)}function ti(q,pt,Ct){pt.isScene!==!0&&(pt=Ye);const Rt=qt.get(q),yt=S.state.lights,Yt=S.state.shadowsArray,ie=yt.state.version,re=ne.getParameters(q,yt.state,Yt,pt,Ct),Ae=ne.getProgramCacheKey(re);let Ge=Rt.programs;Rt.environment=q.isMeshStandardMaterial?pt.environment:null,Rt.fog=pt.fog,Rt.envMap=(q.isMeshStandardMaterial?vt:V).get(q.envMap||Rt.environment),Rt.envMapRotation=Rt.environment!==null&&q.envMap===null?pt.environmentRotation:q.envMapRotation,Ge===void 0&&(q.addEventListener("dispose",qe),Ge=new Map,Rt.programs=Ge);let Oe=Ge.get(Ae);if(Oe!==void 0){if(Rt.currentProgram===Oe&&Rt.lightsStateVersion===ie)return ho(q,re),Oe}else re.uniforms=ne.getUniforms(q),q.onBeforeCompile(re,D),Oe=ne.acquireProgram(re,Ae),Ge.set(Ae,Oe),Rt.uniforms=re.uniforms;const Ce=Rt.uniforms;return(!q.isShaderMaterial&&!q.isRawShaderMaterial||q.clipping===!0)&&(Ce.clippingPlanes=Jt.uniform),ho(q,re),Rt.needsLights=Zi(q),Rt.lightsStateVersion=ie,Rt.needsLights&&(Ce.ambientLightColor.value=yt.state.ambient,Ce.lightProbe.value=yt.state.probe,Ce.directionalLights.value=yt.state.directional,Ce.directionalLightShadows.value=yt.state.directionalShadow,Ce.spotLights.value=yt.state.spot,Ce.spotLightShadows.value=yt.state.spotShadow,Ce.rectAreaLights.value=yt.state.rectArea,Ce.ltc_1.value=yt.state.rectAreaLTC1,Ce.ltc_2.value=yt.state.rectAreaLTC2,Ce.pointLights.value=yt.state.point,Ce.pointLightShadows.value=yt.state.pointShadow,Ce.hemisphereLights.value=yt.state.hemi,Ce.directionalShadowMap.value=yt.state.directionalShadowMap,Ce.directionalShadowMatrix.value=yt.state.directionalShadowMatrix,Ce.spotShadowMap.value=yt.state.spotShadowMap,Ce.spotLightMatrix.value=yt.state.spotLightMatrix,Ce.spotLightMap.value=yt.state.spotLightMap,Ce.pointShadowMap.value=yt.state.pointShadowMap,Ce.pointShadowMatrix.value=yt.state.pointShadowMatrix),Rt.currentProgram=Oe,Rt.uniformsList=null,Oe}function uo(q){if(q.uniformsList===null){const pt=q.currentProgram.getUniforms();q.uniformsList=OE.seqWithValue(pt.seq,q.uniforms)}return q.uniformsList}function ho(q,pt){const Ct=qt.get(q);Ct.outputColorSpace=pt.outputColorSpace,Ct.batching=pt.batching,Ct.batchingColor=pt.batchingColor,Ct.instancing=pt.instancing,Ct.instancingColor=pt.instancingColor,Ct.instancingMorph=pt.instancingMorph,Ct.skinning=pt.skinning,Ct.morphTargets=pt.morphTargets,Ct.morphNormals=pt.morphNormals,Ct.morphColors=pt.morphColors,Ct.morphTargetsCount=pt.morphTargetsCount,Ct.numClippingPlanes=pt.numClippingPlanes,Ct.numIntersection=pt.numClipIntersection,Ct.vertexAlphas=pt.vertexAlphas,Ct.vertexTangents=pt.vertexTangents,Ct.toneMapping=pt.toneMapping}function Nc(q,pt,Ct,Rt,yt){pt.isScene!==!0&&(pt=Ye),$.resetTextureUnits();const Yt=pt.fog,ie=Rt.isMeshStandardMaterial?pt.environment:null,re=z===null?D.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:zu,Ae=(Rt.isMeshStandardMaterial?vt:V).get(Rt.envMap||ie),Ge=Rt.vertexColors===!0&&!!Ct.attributes.color&&Ct.attributes.color.itemSize===4,Oe=!!Ct.attributes.tangent&&(!!Rt.normalMap||Rt.anisotropy>0),Ce=!!Ct.morphAttributes.position,pn=!!Ct.morphAttributes.normal,Nn=!!Ct.morphAttributes.color;let Mi=Lc;Rt.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&(Mi=D.toneMapping);const yn=Ct.morphAttributes.position||Ct.morphAttributes.normal||Ct.morphAttributes.color,bn=yn!==void 0?yn.length:0,Ne=qt.get(Rt),Ri=S.state.lights;if(wt===!0&&(Bt===!0||q!==P)){const ys=q===P&&Rt.id===U;Jt.setState(Rt,q,ys)}let Ln=!1;Rt.version===Ne.__version?(Ne.needsLights&&Ne.lightsStateVersion!==Ri.state.version||Ne.outputColorSpace!==re||yt.isBatchedMesh&&Ne.batching===!1||!yt.isBatchedMesh&&Ne.batching===!0||yt.isBatchedMesh&&Ne.batchingColor===!0&&yt.colorTexture===null||yt.isBatchedMesh&&Ne.batchingColor===!1&&yt.colorTexture!==null||yt.isInstancedMesh&&Ne.instancing===!1||!yt.isInstancedMesh&&Ne.instancing===!0||yt.isSkinnedMesh&&Ne.skinning===!1||!yt.isSkinnedMesh&&Ne.skinning===!0||yt.isInstancedMesh&&Ne.instancingColor===!0&&yt.instanceColor===null||yt.isInstancedMesh&&Ne.instancingColor===!1&&yt.instanceColor!==null||yt.isInstancedMesh&&Ne.instancingMorph===!0&&yt.morphTexture===null||yt.isInstancedMesh&&Ne.instancingMorph===!1&&yt.morphTexture!==null||Ne.envMap!==Ae||Rt.fog===!0&&Ne.fog!==Yt||Ne.numClippingPlanes!==void 0&&(Ne.numClippingPlanes!==Jt.numPlanes||Ne.numIntersection!==Jt.numIntersection)||Ne.vertexAlphas!==Ge||Ne.vertexTangents!==Oe||Ne.morphTargets!==Ce||Ne.morphNormals!==pn||Ne.morphColors!==Nn||Ne.toneMapping!==Mi||Ne.morphTargetsCount!==bn)&&(Ln=!0):(Ln=!0,Ne.__version=Rt.version);let Bs=Ne.currentProgram;Ln===!0&&(Bs=ti(Rt,pt,yt));let Wo=!1,ri=!1,Ko=!1;const ei=Bs.getUniforms(),Os=Ne.uniforms;if(Gt.useProgram(Bs.program)&&(Wo=!0,ri=!0,Ko=!0),Rt.id!==U&&(U=Rt.id,ri=!0),Wo||P!==q){Gt.buffers.depth.getReversed()?(Ut.copy(q.projectionMatrix),Cz(Ut),wz(Ut),ei.setValue(Z,"projectionMatrix",Ut)):ei.setValue(Z,"projectionMatrix",q.projectionMatrix),ei.setValue(Z,"viewMatrix",q.matrixWorldInverse);const _s=ei.map.cameraPosition;_s!==void 0&&_s.setValue(Z,ve.setFromMatrixPosition(q.matrixWorld)),Vt.logarithmicDepthBuffer&&ei.setValue(Z,"logDepthBufFC",2/(Math.log(q.far+1)/Math.LN2)),(Rt.isMeshPhongMaterial||Rt.isMeshToonMaterial||Rt.isMeshLambertMaterial||Rt.isMeshBasicMaterial||Rt.isMeshStandardMaterial||Rt.isShaderMaterial)&&ei.setValue(Z,"isOrthographic",q.isOrthographicCamera===!0),P!==q&&(P=q,ri=!0,Ko=!0)}if(yt.isSkinnedMesh){ei.setOptional(Z,yt,"bindMatrix"),ei.setOptional(Z,yt,"bindMatrixInverse");const ys=yt.skeleton;ys&&(ys.boneTexture===null&&ys.computeBoneTexture(),ei.setValue(Z,"boneTexture",ys.boneTexture,$))}yt.isBatchedMesh&&(ei.setOptional(Z,yt,"batchingTexture"),ei.setValue(Z,"batchingTexture",yt._matricesTexture,$),ei.setOptional(Z,yt,"batchingIdTexture"),ei.setValue(Z,"batchingIdTexture",yt._indirectTexture,$),ei.setOptional(Z,yt,"batchingColorTexture"),yt._colorsTexture!==null&&ei.setValue(Z,"batchingColorTexture",yt._colorsTexture,$));const $i=Ct.morphAttributes;if(($i.position!==void 0||$i.normal!==void 0||$i.color!==void 0)&&Te.update(yt,Ct,Bs),(ri||Ne.receiveShadow!==yt.receiveShadow)&&(Ne.receiveShadow=yt.receiveShadow,ei.setValue(Z,"receiveShadow",yt.receiveShadow)),Rt.isMeshGouraudMaterial&&Rt.envMap!==null&&(Os.envMap.value=Ae,Os.flipEnvMap.value=Ae.isCubeTexture&&Ae.isRenderTargetTexture===!1?-1:1),Rt.isMeshStandardMaterial&&Rt.envMap===null&&pt.environment!==null&&(Os.envMapIntensity.value=pt.environmentIntensity),ri&&(ei.setValue(Z,"toneMappingExposure",D.toneMappingExposure),Ne.needsLights&&Nl(Os,Ko),Yt&&Rt.fog===!0&&te.refreshFogUniforms(Os,Yt),te.refreshMaterialUniforms(Os,Rt,et,tt,S.state.transmissionRenderTarget[q.id]),OE.upload(Z,uo(Ne),Os,$)),Rt.isShaderMaterial&&Rt.uniformsNeedUpdate===!0&&(OE.upload(Z,uo(Ne),Os,$),Rt.uniformsNeedUpdate=!1),Rt.isSpriteMaterial&&ei.setValue(Z,"center",yt.center),ei.setValue(Z,"modelViewMatrix",yt.modelViewMatrix),ei.setValue(Z,"normalMatrix",yt.normalMatrix),ei.setValue(Z,"modelMatrix",yt.matrixWorld),Rt.isShaderMaterial||Rt.isRawShaderMaterial){const ys=Rt.uniformsGroups;for(let _s=0,gr=ys.length;_s<gr;_s++){const Jo=ys[_s];mt.update(Jo,Bs),mt.bind(Jo,Bs)}}return Bs}function Nl(q,pt){q.ambientLightColor.needsUpdate=pt,q.lightProbe.needsUpdate=pt,q.directionalLights.needsUpdate=pt,q.directionalLightShadows.needsUpdate=pt,q.pointLights.needsUpdate=pt,q.pointLightShadows.needsUpdate=pt,q.spotLights.needsUpdate=pt,q.spotLightShadows.needsUpdate=pt,q.rectAreaLights.needsUpdate=pt,q.hemisphereLights.needsUpdate=pt}function Zi(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&&q.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(q,pt,Ct){const Rt=qt.get(q);Rt.__autoAllocateDepthBuffer=q.resolveDepthBuffer===!1,Rt.__autoAllocateDepthBuffer===!1&&(Rt.__useRenderToTexture=!1),qt.get(q.texture).__webglTexture=pt,qt.get(q.depthTexture).__webglTexture=Rt.__autoAllocateDepthBuffer?void 0:Ct,Rt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(q,pt){const Ct=qt.get(q);Ct.__webglFramebuffer=pt,Ct.__useDefaultFramebuffer=pt===void 0};const uf=Z.createFramebuffer();this.setRenderTarget=function(q,pt=0,Ct=0){z=q,I=pt,F=Ct;let Rt=!0,yt=null,Yt=!1,ie=!1;if(q){const Ae=qt.get(q);if(Ae.__useDefaultFramebuffer!==void 0)Gt.bindFramebuffer(Z.FRAMEBUFFER,null),Rt=!1;else if(Ae.__webglFramebuffer===void 0)$.setupRenderTarget(q);else if(Ae.__hasExternalTextures)$.rebindTextures(q,qt.get(q.texture).__webglTexture,qt.get(q.depthTexture).__webglTexture);else if(q.depthBuffer){const Ce=q.depthTexture;if(Ae.__boundDepthTexture!==Ce){if(Ce!==null&&qt.has(Ce)&&(q.width!==Ce.image.width||q.height!==Ce.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$.setupDepthRenderbuffer(q)}}const Ge=q.texture;(Ge.isData3DTexture||Ge.isDataArrayTexture||Ge.isCompressedArrayTexture)&&(ie=!0);const Oe=qt.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(Array.isArray(Oe[pt])?yt=Oe[pt][Ct]:yt=Oe[pt],Yt=!0):q.samples>0&&$.useMultisampledRTT(q)===!1?yt=qt.get(q).__webglMultisampledFramebuffer:Array.isArray(Oe)?yt=Oe[Ct]:yt=Oe,X.copy(q.viewport),ot.copy(q.scissor),it=q.scissorTest}else X.copy(at).multiplyScalar(et).floor(),ot.copy(xt).multiplyScalar(et).floor(),it=Et;if(Ct!==0&&(yt=uf),Gt.bindFramebuffer(Z.FRAMEBUFFER,yt)&&Rt&&Gt.drawBuffers(q,yt),Gt.viewport(X),Gt.scissor(ot),Gt.setScissorTest(it),Yt){const Ae=qt.get(q.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Ae.__webglTexture,Ct)}else if(ie){const Ae=qt.get(q.texture),Ge=pt;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Ae.__webglTexture,Ct,Ge)}else if(q!==null&&Ct!==0){const Ae=qt.get(q.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,Ae.__webglTexture,Ct)}U=-1},this.readRenderTargetPixels=function(q,pt,Ct,Rt,yt,Yt,ie){if(!(q&&q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let re=qt.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&ie!==void 0&&(re=re[ie]),re){Gt.bindFramebuffer(Z.FRAMEBUFFER,re);try{const Ae=q.texture,Ge=Ae.format,Oe=Ae.type;if(!Vt.textureFormatReadable(Ge)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Vt.textureTypeReadable(Oe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pt>=0&&pt<=q.width-Rt&&Ct>=0&&Ct<=q.height-yt&&Z.readPixels(pt,Ct,Rt,yt,He.convert(Ge),He.convert(Oe),Yt)}finally{const Ae=z!==null?qt.get(z).__webglFramebuffer:null;Gt.bindFramebuffer(Z.FRAMEBUFFER,Ae)}}},this.readRenderTargetPixelsAsync=async function(q,pt,Ct,Rt,yt,Yt,ie){if(!(q&&q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let re=qt.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&ie!==void 0&&(re=re[ie]),re)if(pt>=0&&pt<=q.width-Rt&&Ct>=0&&Ct<=q.height-yt){Gt.bindFramebuffer(Z.FRAMEBUFFER,re);const Ae=q.texture,Ge=Ae.format,Oe=Ae.type;if(!Vt.textureFormatReadable(Ge))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Vt.textureTypeReadable(Oe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ce=Z.createBuffer();Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Ce),Z.bufferData(Z.PIXEL_PACK_BUFFER,Yt.byteLength,Z.STREAM_READ),Z.readPixels(pt,Ct,Rt,yt,He.convert(Ge),He.convert(Oe),0);const pn=z!==null?qt.get(z).__webglFramebuffer:null;Gt.bindFramebuffer(Z.FRAMEBUFFER,pn);const Nn=Z.fenceSync(Z.SYNC_GPU_COMMANDS_COMPLETE,0);return Z.flush(),await Tz(Z,Nn,4),Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Ce),Z.getBufferSubData(Z.PIXEL_PACK_BUFFER,0,Yt),Z.deleteBuffer(Ce),Z.deleteSync(Nn),Yt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(q,pt=null,Ct=0){const Rt=Math.pow(2,-Ct),yt=Math.floor(q.image.width*Rt),Yt=Math.floor(q.image.height*Rt),ie=pt!==null?pt.x:0,re=pt!==null?pt.y:0;$.setTexture2D(q,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,Ct,0,0,ie,re,yt,Yt),Gt.unbindTexture()};const hf=Z.createFramebuffer(),fo=Z.createFramebuffer();this.copyTextureToTexture=function(q,pt,Ct=null,Rt=null,yt=0,Yt=null){Yt===null&&(yt!==0?(DE("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Yt=yt,yt=0):Yt=0);let ie,re,Ae,Ge,Oe,Ce,pn,Nn,Mi;const yn=q.isCompressedTexture?q.mipmaps[Yt]:q.image;if(Ct!==null)ie=Ct.max.x-Ct.min.x,re=Ct.max.y-Ct.min.y,Ae=Ct.isBox3?Ct.max.z-Ct.min.z:1,Ge=Ct.min.x,Oe=Ct.min.y,Ce=Ct.isBox3?Ct.min.z:0;else{const $i=Math.pow(2,-yt);ie=Math.floor(yn.width*$i),re=Math.floor(yn.height*$i),q.isDataArrayTexture?Ae=yn.depth:q.isData3DTexture?Ae=Math.floor(yn.depth*$i):Ae=1,Ge=0,Oe=0,Ce=0}Rt!==null?(pn=Rt.x,Nn=Rt.y,Mi=Rt.z):(pn=0,Nn=0,Mi=0);const bn=He.convert(pt.format),Ne=He.convert(pt.type);let Ri;pt.isData3DTexture?($.setTexture3D(pt,0),Ri=Z.TEXTURE_3D):pt.isDataArrayTexture||pt.isCompressedArrayTexture?($.setTexture2DArray(pt,0),Ri=Z.TEXTURE_2D_ARRAY):($.setTexture2D(pt,0),Ri=Z.TEXTURE_2D),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,pt.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pt.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,pt.unpackAlignment);const Ln=Z.getParameter(Z.UNPACK_ROW_LENGTH),Bs=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),Wo=Z.getParameter(Z.UNPACK_SKIP_PIXELS),ri=Z.getParameter(Z.UNPACK_SKIP_ROWS),Ko=Z.getParameter(Z.UNPACK_SKIP_IMAGES);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,yn.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,yn.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Ge),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Oe),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Ce);const ei=q.isDataArrayTexture||q.isData3DTexture,Os=pt.isDataArrayTexture||pt.isData3DTexture;if(q.isDepthTexture){const $i=qt.get(q),ys=qt.get(pt),_s=qt.get($i.__renderTarget),gr=qt.get(ys.__renderTarget);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,_s.__webglFramebuffer),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,gr.__webglFramebuffer);for(let Jo=0;Jo<Ae;Jo++)ei&&(Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,qt.get(q).__webglTexture,yt,Ce+Jo),Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,qt.get(pt).__webglTexture,Yt,Mi+Jo)),Z.blitFramebuffer(Ge,Oe,ie,re,pn,Nn,ie,re,Z.DEPTH_BUFFER_BIT,Z.NEAREST);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,null),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else if(yt!==0||q.isRenderTargetTexture||qt.has(q)){const $i=qt.get(q),ys=qt.get(pt);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,hf),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,fo);for(let _s=0;_s<Ae;_s++)ei?Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,$i.__webglTexture,yt,Ce+_s):Z.framebufferTexture2D(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,$i.__webglTexture,yt),Os?Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,ys.__webglTexture,Yt,Mi+_s):Z.framebufferTexture2D(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,ys.__webglTexture,Yt),yt!==0?Z.blitFramebuffer(Ge,Oe,ie,re,pn,Nn,ie,re,Z.COLOR_BUFFER_BIT,Z.NEAREST):Os?Z.copyTexSubImage3D(Ri,Yt,pn,Nn,Mi+_s,Ge,Oe,ie,re):Z.copyTexSubImage2D(Ri,Yt,pn,Nn,Ge,Oe,ie,re);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,null),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else Os?q.isDataTexture||q.isData3DTexture?Z.texSubImage3D(Ri,Yt,pn,Nn,Mi,ie,re,Ae,bn,Ne,yn.data):pt.isCompressedArrayTexture?Z.compressedTexSubImage3D(Ri,Yt,pn,Nn,Mi,ie,re,Ae,bn,yn.data):Z.texSubImage3D(Ri,Yt,pn,Nn,Mi,ie,re,Ae,bn,Ne,yn):q.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,Yt,pn,Nn,ie,re,bn,Ne,yn.data):q.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,Yt,pn,Nn,yn.width,yn.height,bn,yn.data):Z.texSubImage2D(Z.TEXTURE_2D,Yt,pn,Nn,ie,re,bn,Ne,yn);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,Ln),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,Bs),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Wo),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,ri),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Ko),Yt===0&&pt.generateMipmaps&&Z.generateMipmap(Ri),Gt.unbindTexture()},this.copyTextureToTexture3D=function(q,pt,Ct=null,Rt=null,yt=0){return DE('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(q,pt,Ct,Rt,yt)},this.initRenderTarget=function(q){qt.get(q).__webglFramebuffer===void 0&&$.setupRenderTarget(q)},this.initTexture=function(q){q.isCubeTexture?$.setTextureCube(q,0):q.isData3DTexture?$.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?$.setTexture2DArray(q,0):$.setTexture2D(q,0),Gt.unbindTexture()},this.resetState=function(){I=0,F=0,z=null,Gt.reset(),Gn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return wl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=Pn._getDrawingBufferColorSpace(t),e.unpackColorSpace=Pn._getUnpackColorSpace()}}const zq=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:y5,AddEquation:gd,AddOperation:a9,AdditiveAnimationBlendMode:T5,AdditiveBlending:d8,AgXToneMapping:h9,AlphaFormat:b5,AlwaysCompare:T9,AlwaysDepth:AM,AlwaysStencilFunc:v8,AmbientLight:hO,AnimationAction:xO,AnimationClip:my,AnimationLoader:ek,AnimationMixer:wk,AnimationObjectGroup:Tk,AnimationUtils:JG,ArcCurve:G9,ArrayCamera:yO,ArrowHelper:Jk,AttachedBindMode:g8,Audio:_O,AudioAnalyser:gk,AudioContext:tR,AudioListener:dk,AudioLoader:uk,AxesHelper:Zk,BackSide:qs,BasicDepthPacking:ap,BasicShadowMap:zB,BatchedMesh:F9,Bone:n4,BooleanKeyframeTrack:s0,Box2:Pk,Box3:Br,Box3Helper:Wk,BoxGeometry:i0,BoxHelper:Yk,BufferAttribute:zn,BufferGeometry:$e,BufferGeometryLoader:gO,ByteType:_5,Cache:Jh,Camera:wx,CameraHelper:qk,CanvasTexture:_G,CapsuleGeometry:a4,CatmullRomCurve3:k9,CineonToneMapping:c9,CircleGeometry:o4,ClampToEdgeWrapping:zo,Clock:eR,Color:ae,ColorKeyframeTrack:Y5,ColorManagement:Pn,CompressedArrayTexture:vG,CompressedCubeTexture:yG,CompressedTexture:r4,CompressedTextureLoader:nk,ConeGeometry:Nx,ConstantAlphaFactor:i9,ConstantColorFactor:e9,Controls:tV,CubeCamera:O9,CubeReflectionMapping:rf,CubeRefractionMapping:$d,CubeTexture:Rx,CubeTextureLoader:ik,CubeUVReflectionMapping:by,CubicBezierCurve:F5,CubicBezierCurve3:V9,CubicInterpolant:aO,CullFaceBack:f8,CullFaceFront:HB,CullFaceFrontBack:RH,CullFaceNone:FB,Curve:Oc,CurvePath:X9,CustomBlending:GB,CustomToneMapping:u9,CylinderGeometry:Ox,Cylindrical:Uk,Data3DTexture:$3,DataArrayTexture:Cx,DataTexture:Fu,DataTextureLoader:sk,DataUtils:Vz,DecrementStencilOp:zH,DecrementWrapStencilOp:kH,DefaultLoadingManager:j1,DepthArrayTexture:AG,DepthFormat:ly,DepthStencilFormat:Fg,DepthTexture:Bx,DetachedBindMode:d9,DirectionalLight:$5,DirectionalLightHelper:jk,DiscreteInterpolant:oO,DodecahedronGeometry:l4,DoubleSide:Da,DstAlphaFactor:KB,DstColorFactor:ZB,DynamicCopyUsage:iz,DynamicDrawUsage:JH,DynamicReadUsage:tz,EdgesGeometry:z9,EllipseCurve:c4,EqualCompare:b9,EqualDepth:bM,EqualStencilFunc:jH,EquirectangularReflectionMapping:q_,EquirectangularRefractionMapping:Y_,Euler:Qo,EventDispatcher:Yo,ExtrudeGeometry:u4,FileLoader:Xo,Float16BufferAttribute:Kz,Float32BufferAttribute:Me,FloatType:Na,Fog:e4,FogExp2:t4,FramebufferTexture:gG,FrontSide:Dc,Frustum:Ey,FrustumArray:i4,GLBufferAttribute:Nk,GLSL1:rz,GLSL3:y8,GreaterCompare:S9,GreaterDepth:EM,GreaterEqualCompare:M9,GreaterEqualDepth:SM,GreaterEqualStencilFunc:KH,GreaterStencilFunc:YH,GridHelper:Qk,Group:Kh,HalfFloatType:n0,HemisphereLight:uO,HemisphereLightHelper:Vk,IcosahedronGeometry:h4,ImageBitmapLoader:vO,ImageLoader:rA,ImageUtils:R9,IncrementStencilOp:HH,IncrementWrapStencilOp:GH,InstancedBufferAttribute:Hg,InstancedBufferGeometry:mO,InstancedInterleavedBuffer:Ok,InstancedMesh:N5,Int16BufferAttribute:Yz,Int32BufferAttribute:Wz,Int8BufferAttribute:Xz,IntType:X3,InterleavedBuffer:Lx,InterleavedBufferAttribute:ep,Interpolant:Ty,InterpolateDiscrete:cy,InterpolateLinear:uy,InterpolateSmooth:LE,InterpolationSamplingMode:lz,InterpolationSamplingType:oz,InvertStencilOp:VH,KeepStencilOp:ym,KeyframeTrack:Ol,LOD:P9,LatheGeometry:f4,Layers:fy,LessCompare:x9,LessDepth:xM,LessEqualCompare:w5,LessEqualDepth:Ug,LessEqualStencilFunc:qH,LessStencilFunc:XH,Light:cp,LightProbe:pO,Line:af,Line3:Fk,LineBasicMaterial:oa,LineCurve:H5,LineCurve3:Q9,LineDashedMaterial:iO,LineLoop:I5,LineSegments:Bc,LinearFilter:Ni,LinearInterpolant:q5,LinearMipMapLinearFilter:OH,LinearMipMapNearestFilter:BH,LinearMipmapLinearFilter:Cl,LinearMipmapNearestFilter:W1,LinearSRGBColorSpace:zu,LinearToneMapping:o9,LinearTransfer:K_,Loader:la,LoaderUtils:Wd,LoadingManager:W5,LoopOnce:p9,LoopPingPong:g9,LoopRepeat:m9,MOUSE:CH,Material:gs,MaterialLoader:_4,MathUtils:$_,Matrix2:sR,Matrix3:on,Matrix4:Fe,MaxEquation:XB,Mesh:as,MeshBasicMaterial:Go,MeshDepthMaterial:Q5,MeshDistanceMaterial:X5,MeshLambertMaterial:eO,MeshMatcapMaterial:nO,MeshNormalMaterial:V5,MeshPhongMaterial:$9,MeshPhysicalMaterial:Bl,MeshStandardMaterial:Px,MeshToonMaterial:tO,MinEquation:QB,MirroredRepeatWrapping:ay,MixOperation:r9,MultiplyBlending:m8,MultiplyOperation:Mx,NearestFilter:os,NearestMipMapLinearFilter:DH,NearestMipMapNearestFilter:LH,NearestMipmapLinearFilter:Rm,NearestMipmapNearestFilter:Q3,NeutralToneMapping:f9,NeverCompare:A9,NeverDepth:_M,NeverStencilFunc:QH,NoBlending:ra,NoColorSpace:Mc,NoToneMapping:Lc,NormalAnimationBlendMode:J3,NormalBlending:Bg,NotEqualCompare:E9,NotEqualDepth:MM,NotEqualStencilFunc:WH,NumberKeyframeTrack:Gg,Object3D:Hn,ObjectLoader:lk,ObjectSpaceNormalMap:_9,OctahedronGeometry:Ix,OneFactor:qB,OneMinusConstantAlphaFactor:s9,OneMinusConstantColorFactor:n9,OneMinusDstAlphaFactor:JB,OneMinusDstColorFactor:$B,OneMinusSrcAlphaFactor:yM,OneMinusSrcColorFactor:WB,OrthographicCamera:Cy,PCFShadowMap:k3,PCFSoftShadowMap:D_,PMREMGenerator:M8,Path:n3,PerspectiveCamera:Rs,Plane:md,PlaneGeometry:My,PlaneHelper:Kk,PointLight:Z5,PointLightHelper:Gk,Points:U5,PointsMaterial:s4,PolarGridHelper:Xk,PolyhedronGeometry:lp,PositionalAudio:mk,PropertyBinding:Qn,PropertyMixer:AO,QuadraticBezierCurve:z5,QuadraticBezierCurve3:G5,Quaternion:aa,QuaternionKeyframeTrack:kg,QuaternionLinearInterpolant:lO,RED_GREEN_RGTC2_Format:KM,RED_RGTC1_Format:M5,REVISION:e0,RGBADepthPacking:y9,RGBAFormat:na,RGBAIntegerFormat:K3,RGBA_ASTC_10x10_Format:QM,RGBA_ASTC_10x5_Format:GM,RGBA_ASTC_10x6_Format:kM,RGBA_ASTC_10x8_Format:VM,RGBA_ASTC_12x10_Format:XM,RGBA_ASTC_12x12_Format:jM,RGBA_ASTC_4x4_Format:OM,RGBA_ASTC_5x4_Format:NM,RGBA_ASTC_5x5_Format:IM,RGBA_ASTC_6x5_Format:UM,RGBA_ASTC_6x6_Format:PM,RGBA_ASTC_8x5_Format:FM,RGBA_ASTC_8x6_Format:HM,RGBA_ASTC_8x8_Format:zM,RGBA_BPTC_Format:U_,RGBA_ETC2_EAC_Format:BM,RGBA_PVRTC_2BPPV1_Format:RM,RGBA_PVRTC_4BPPV1_Format:wM,RGBA_S3TC_DXT1_Format:O_,RGBA_S3TC_DXT3_Format:N_,RGBA_S3TC_DXT5_Format:I_,RGBDepthPacking:IH,RGBFormat:S5,RGBIntegerFormat:NH,RGB_BPTC_SIGNED_Format:qM,RGB_BPTC_UNSIGNED_Format:YM,RGB_ETC1_Format:LM,RGB_ETC2_Format:DM,RGB_PVRTC_2BPPV1_Format:CM,RGB_PVRTC_4BPPV1_Format:TM,RGB_S3TC_DXT1_Format:B_,RGDepthPacking:UH,RGFormat:E5,RGIntegerFormat:W3,RawShaderMaterial:Z9,Ray:Sy,Raycaster:bO,RectAreaLight:fO,RedFormat:Y3,RedIntegerFormat:Tx,ReinhardToneMapping:l9,RenderTarget:Z3,RenderTarget3D:Rk,RenderTargetArray:Lk,RepeatWrapping:tp,ReplaceStencilOp:FH,ReverseSubtractEquation:VB,RingGeometry:d4,SIGNED_RED_GREEN_RGTC2_Format:JM,SIGNED_RED_RGTC1_Format:WM,SRGBColorSpace:Kn,SRGBTransfer:fi,Scene:eA,ShaderChunk:fn,ShaderLib:Ec,ShaderMaterial:Ks,ShadowMaterial:J9,Shape:Ng,ShapeGeometry:p4,ShapePath:$k,ShapeUtils:Cc,ShortType:A5,Skeleton:Dx,SkeletonHelper:zk,SkinnedMesh:O5,Source:jd,Sphere:pr,SphereGeometry:Ux,Spherical:Ik,SphericalHarmonics3:dO,SplineCurve:k5,SpotLight:J5,SpotLightHelper:Hk,Sprite:U9,SpriteMaterial:B5,SrcAlphaFactor:vM,SrcAlphaSaturateFactor:t9,SrcColorFactor:YB,StaticCopyUsage:nz,StaticDrawUsage:J_,StaticReadUsage:$H,StereoCamera:hk,StreamCopyUsage:sz,StreamDrawUsage:ZH,StreamReadUsage:ez,StringKeyframeTrack:r0,SubtractEquation:kB,SubtractiveBlending:p8,TOUCH:wH,TangentSpaceNormalMap:op,TetrahedronGeometry:m4,Texture:wi,TextureLoader:cO,TextureUtils:rV,TimestampQuery:az,TorusGeometry:g4,TorusKnotGeometry:v4,Triangle:ro,TriangleFanDrawMode:ZM,TriangleStripDrawMode:C5,TrianglesDrawMode:v9,TubeGeometry:y4,UVMapping:V3,Uint16BufferAttribute:L5,Uint32BufferAttribute:D5,Uint8BufferAttribute:jz,Uint8ClampedBufferAttribute:qz,Uniform:xn,UniformsGroup:Bk,UniformsLib:pe,UniformsUtils:B9,UnsignedByteType:Ws,UnsignedInt248Type:Pg,UnsignedInt5999Type:x5,UnsignedIntType:Hu,UnsignedShort4444Type:j3,UnsignedShort5551Type:q3,UnsignedShortType:oy,VSMShadowMap:cc,Vector2:Pt,Vector3:nt,Vector4:Bn,VectorKeyframeTrack:Vg,VideoFrameTexture:mG,VideoTexture:H9,WebGL3DRenderTarget:Oz,WebGLArrayRenderTarget:Bz,WebGLCoordinateSystem:wl,WebGLCubeRenderTarget:N9,WebGLRenderTarget:Ds,WebGLRenderer:LO,WebGLUtils:RO,WebGPUCoordinateSystem:Z_,WebXRController:BE,WireframeGeometry:K9,WrapAroundEnding:W_,ZeroCurvatureEnding:Lm,ZeroFactor:jB,ZeroSlopeEnding:Dm,ZeroStencilOp:PH,createCanvasElement:w9},Symbol.toStringTag,{value:"Module"}));var SC={exports:{}},gh={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wL;function Gq(){return wL||(wL=1,gh.ConcurrentRoot=1,gh.ContinuousEventPriority=8,gh.DefaultEventPriority=32,gh.DiscreteEventPriority=2,gh.IdleEventPriority=268435456,gh.LegacyRoot=0,gh.NoEventPriority=0),gh}var RL;function kq(){return RL||(RL=1,SC.exports=Gq()),SC.exports}var NE=kq(),EC={exports:{}},MC={},TC={exports:{}},CC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LL;function Vq(){if(LL)return CC;LL=1;var s=t0();function t(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var e=typeof Object.is=="function"?Object.is:t,n=s.useState,i=s.useEffect,r=s.useLayoutEffect,a=s.useDebugValue;function l(g,v){var _=v(),b=n({inst:{value:_,getSnapshot:v}}),C=b[0].inst,T=b[1];return r(function(){C.value=_,C.getSnapshot=v,u(C)&&T({inst:C})},[g,_,v]),i(function(){return u(C)&&T({inst:C}),g(function(){u(C)&&T({inst:C})})},[g]),a(_),_}function u(g){var v=g.getSnapshot;g=g.value;try{var _=v();return!e(g,_)}catch{return!0}}function f(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return CC.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:m,CC}var DL;function Qq(){return DL||(DL=1,TC.exports=Vq()),TC.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BL;function Xq(){if(BL)return MC;BL=1;var s=t0(),t=Qq();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,r=s.useRef,a=s.useEffect,l=s.useMemo,u=s.useDebugValue;return MC.useSyncExternalStoreWithSelector=function(f,m,g,v,_){var b=r(null);if(b.current===null){var C={hasValue:!1,value:null};b.current=C}else C=b.current;b=l(function(){function S(I){if(!R){if(R=!0,B=I,I=v(I),_!==void 0&&C.hasValue){var F=C.value;if(_(F,I))return D=F}return D=I}if(F=D,n(B,I))return F;var z=v(I);return _!==void 0&&_(F,z)?(B=I,F):(B=I,D=z)}var R=!1,B,D,N=g===void 0?null:g;return[function(){return S(m())},N===null?void 0:function(){return S(N())}]},[m,g,v,_]);var T=i(f,b[0],b[1]);return a(function(){C.hasValue=!0,C.value=T},[T]),u(T),T},MC}var OL;function jq(){return OL||(OL=1,EC.exports=Xq()),EC.exports}var qq=jq();const Yq=I3(qq),NL=s=>{let t;const e=new Set,n=(f,m)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const v=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),e.forEach(_=>_(t,v))}},i=()=>t,l={setState:n,getState:i,getInitialState:()=>u,subscribe:f=>(e.add(f),()=>e.delete(f))},u=t=s(n,i,l);return l},DO=s=>s?NL(s):NL,{useSyncExternalStoreWithSelector:Wq}=Yq,Kq=s=>s;function Jq(s,t=Kq,e){const n=Wq(s.subscribe,s.getState,s.getInitialState,t,e);return Oa.useDebugValue(n),n}const IL=(s,t)=>{const e=DO(s),n=(i,r=t)=>Jq(e,i,r);return Object.assign(n,e),n},Zq=(s,t)=>s?IL(s,t):IL;var wC={exports:{}},RC={exports:{}},LC={exports:{}},DC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UL;function $q(){return UL||(UL=1,function(s){function t(Q,tt){var et=Q.length;Q.push(tt);t:for(;0<et;){var _t=et-1>>>1,K=Q[_t];if(0<i(K,tt))Q[_t]=tt,Q[et]=K,et=_t;else break t}}function e(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var tt=Q[0],et=Q.pop();if(et!==tt){Q[0]=et;t:for(var _t=0,K=Q.length,at=K>>>1;_t<at;){var xt=2*(_t+1)-1,Et=Q[xt],lt=xt+1,wt=Q[lt];if(0>i(Et,et))lt<K&&0>i(wt,Et)?(Q[_t]=wt,Q[lt]=et,_t=lt):(Q[_t]=Et,Q[xt]=et,_t=xt);else if(lt<K&&0>i(wt,et))Q[_t]=wt,Q[lt]=et,_t=lt;else break t}}return tt}function i(Q,tt){var et=Q.sortIndex-tt.sortIndex;return et!==0?et:Q.id-tt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();s.unstable_now=function(){return a.now()-l}}var u=[],f=[],m=1,g=null,v=3,_=!1,b=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function B(Q){for(var tt=e(f);tt!==null;){if(tt.callback===null)n(f);else if(tt.startTime<=Q)n(f),tt.sortIndex=tt.expirationTime,t(u,tt);else break;tt=e(f)}}function D(Q){if(C=!1,B(Q),!b)if(e(u)!==null)b=!0,ct();else{var tt=e(f);tt!==null&&dt(D,tt.startTime-Q)}}var N=!1,I=-1,F=5,z=-1;function U(){return!(s.unstable_now()-z<F)}function P(){if(N){var Q=s.unstable_now();z=Q;var tt=!0;try{t:{b=!1,C&&(C=!1,S(I),I=-1),_=!0;var et=v;try{e:{for(B(Q),g=e(u);g!==null&&!(g.expirationTime>Q&&U());){var _t=g.callback;if(typeof _t=="function"){g.callback=null,v=g.priorityLevel;var K=_t(g.expirationTime<=Q);if(Q=s.unstable_now(),typeof K=="function"){g.callback=K,B(Q),tt=!0;break e}g===e(u)&&n(u),B(Q)}else n(u);g=e(u)}if(g!==null)tt=!0;else{var at=e(f);at!==null&&dt(D,at.startTime-Q),tt=!1}}break t}finally{g=null,v=et,_=!1}tt=void 0}}finally{tt?X():N=!1}}}var X;if(typeof R=="function")X=function(){R(P)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,it=ot.port2;ot.port1.onmessage=P,X=function(){it.postMessage(null)}}else X=function(){T(P,0)};function ct(){N||(N=!0,X())}function dt(Q,tt){I=T(function(){Q(s.unstable_now())},tt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_continueExecution=function(){b||_||(b=!0,ct())},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_getFirstCallbackNode=function(){return e(u)},s.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var tt=3;break;default:tt=v}var et=v;v=tt;try{return Q()}finally{v=et}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Q,tt){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var et=v;v=Q;try{return tt()}finally{v=et}},s.unstable_scheduleCallback=function(Q,tt,et){var _t=s.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?_t+et:_t):et=_t,Q){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=et+K,Q={id:m++,callback:tt,priorityLevel:Q,startTime:et,expirationTime:K,sortIndex:-1},et>_t?(Q.sortIndex=et,t(f,Q),e(u)===null&&Q===e(f)&&(C?(S(I),I=-1):C=!0,dt(D,et-_t))):(Q.sortIndex=K,t(u,Q),b||_||(b=!0,ct())),Q},s.unstable_shouldYield=U,s.unstable_wrapCallback=function(Q){var tt=v;return function(){var et=v;v=tt;try{return Q.apply(this,arguments)}finally{v=et}}}}(DC)),DC}var PL;function BO(){return PL||(PL=1,LC.exports=$q()),LC.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FL;function tY(){return FL||(FL=1,function(s){s.exports=function(t){function e(h,d,A,M){return new s2(h,d,A,M)}function n(){}function i(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)d+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(h){return h===null||typeof h!="object"?null:(h=ql&&h[ql]||h["@@iterator"],typeof h=="function"?h:null)}function a(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===l2?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case Kc:return"Fragment";case Ga:return"Portal";case O0:return"Profiler";case Hp:return"StrictMode";case N0:return"Suspense";case Df:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case go:return(h.displayName||"Context")+".Provider";case a2:return(h._context.displayName||"Context")+".Consumer";case Gp:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case I0:return d=h.displayName||null,d!==null?d:a(h.type)||"Memo";case ka:d=h._payload,h=h._init;try{return a(h(d))}catch{}}return null}function l(h){if(nl===void 0)try{throw Error()}catch(A){var d=A.stack.trim().match(/\n( *(at )?)/);nl=d&&d[1]||"",Yl=-1<A.stack.indexOf(`
    at`)?" (<anonymous>)":-1<A.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nl+h+Yl}function u(h,d){if(!h||Xu)return"";Xu=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var M={DetermineComponentFrameRoot:function(){try{if(d){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(Ke){var ye=Ke}Reflect.construct(h,[],de)}else{try{de.call()}catch(Ke){ye=Ke}h.call(de.prototype)}}else{try{throw Error()}catch(Ke){ye=Ke}(de=h())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(Ke){if(Ke&&ye&&typeof Ke.stack=="string")return[Ke.stack,ye.stack]}return[null,null]}};M.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(M.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(M.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=M.DetermineComponentFrameRoot(),W=O[0],rt=O[1];if(W&&rt){var At=W.split(`
`),Ht=rt.split(`
`);for(L=M=0;M<At.length&&!At[M].includes("DetermineComponentFrameRoot");)M++;for(;L<Ht.length&&!Ht[L].includes("DetermineComponentFrameRoot");)L++;if(M===At.length||L===Ht.length)for(M=At.length-1,L=Ht.length-1;1<=M&&0<=L&&At[M]!==Ht[L];)L--;for(;1<=M&&0<=L;M--,L--)if(At[M]!==Ht[L]){if(M!==1||L!==1)do if(M--,L--,0>L||At[M]!==Ht[L]){var $t=`
`+At[M].replace(" at new "," at ");return h.displayName&&$t.includes("<anonymous>")&&($t=$t.replace("<anonymous>",h.displayName)),$t}while(1<=M&&0<=L);break}}}finally{Xu=!1,Error.prepareStackTrace=A}return(A=h?h.displayName||h.name:"")?l(A):""}function f(h){switch(h.tag){case 26:case 27:case 5:return l(h.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return h=u(h.type,!1),h;case 11:return h=u(h.type.render,!1),h;case 1:return h=u(h.type,!0),h;default:return""}}function m(h){try{var d="";do d+=f(h),h=h.return;while(h);return d}catch(A){return`
Error generating stack: `+A.message+`
`+A.stack}}function g(h){var d=h,A=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,(d.flags&4098)!==0&&(A=d.return),h=d.return;while(h)}return d.tag===3?A:null}function v(h){if(g(h)!==h)throw Error(i(188))}function _(h){var d=h.alternate;if(!d){if(d=g(h),d===null)throw Error(i(188));return d!==h?null:h}for(var A=h,M=d;;){var L=A.return;if(L===null)break;var O=L.alternate;if(O===null){if(M=L.return,M!==null){A=M;continue}break}if(L.child===O.child){for(O=L.child;O;){if(O===A)return v(L),h;if(O===M)return v(L),d;O=O.sibling}throw Error(i(188))}if(A.return!==M.return)A=L,M=O;else{for(var W=!1,rt=L.child;rt;){if(rt===A){W=!0,A=L,M=O;break}if(rt===M){W=!0,M=L,A=O;break}rt=rt.sibling}if(!W){for(rt=O.child;rt;){if(rt===A){W=!0,A=O,M=L;break}if(rt===M){W=!0,M=O,A=L;break}rt=rt.sibling}if(!W)throw Error(i(189))}}if(A.alternate!==M)throw Error(i(190))}if(A.tag!==3)throw Error(i(188));return A.stateNode.current===A?h:d}function b(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(d=b(h),d!==null)return d;h=h.sibling}return null}function C(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(d=C(h),d!==null))return d;h=h.sibling}return null}function T(h){return{current:h}}function S(h){0>Zl||(h.current=Vi[Zl],Vi[Zl]=null,Zl--)}function R(h,d){Zl++,Vi[Zl]=h.current,h.current=d}function B(h){return h>>>=0,h===0?32:31-(Kb(h)/Jb|0)|0}function D(h){var d=h&42;if(d!==0)return d;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function N(h,d){var A=h.pendingLanes;if(A===0)return 0;var M=0,L=h.suspendedLanes,O=h.pingedLanes,W=h.warmLanes;h=h.finishedLanes!==0;var rt=A&134217727;return rt!==0?(A=rt&~L,A!==0?M=D(A):(O&=rt,O!==0?M=D(O):h||(W=rt&~W,W!==0&&(M=D(W))))):(rt=A&~L,rt!==0?M=D(rt):O!==0?M=D(O):h||(W=A&~W,W!==0&&(M=D(W)))),M===0?0:d!==0&&d!==M&&(d&L)===0&&(L=M&-M,W=d&-d,L>=W||L===32&&(W&4194176)!==0)?d:M}function I(h,d){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&d)===0}function F(h,d){switch(h){case 1:case 2:case 4:case 8:return d+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z(){var h=sl;return sl<<=1,(sl&4194176)===0&&(sl=128),h}function U(){var h=Yu;return Yu<<=1,(Yu&62914560)===0&&(Yu=4194304),h}function P(h){for(var d=[],A=0;31>A;A++)d.push(h);return d}function X(h,d){h.pendingLanes|=d,d!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function ot(h,d,A,M,L,O){var W=h.pendingLanes;h.pendingLanes=A,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=A,h.entangledLanes&=A,h.errorRecoveryDisabledLanes&=A,h.shellSuspendCounter=0;var rt=h.entanglements,At=h.expirationTimes,Ht=h.hiddenUpdates;for(A=W&~A;0<A;){var $t=31-br(A),de=1<<$t;rt[$t]=0,At[$t]=-1;var ye=Ht[$t];if(ye!==null)for(Ht[$t]=null,$t=0;$t<ye.length;$t++){var Ke=ye[$t];Ke!==null&&(Ke.lane&=-536870913)}A&=~de}M!==0&&it(h,M,0),O!==0&&L===0&&h.tag!==0&&(h.suspendedLanes|=O&~(W&~d))}function it(h,d,A){h.pendingLanes|=d,h.suspendedLanes&=~d;var M=31-br(d);h.entangledLanes|=d,h.entanglements[M]=h.entanglements[M]|1073741824|A&4194218}function ct(h,d){var A=h.entangledLanes|=d;for(h=h.entanglements;A;){var M=31-br(A),L=1<<M;L&d|h[M]&d&&(h[M]|=d),A&=~L}}function dt(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Q(h){if(kr&&typeof kr.onCommitFiberRoot=="function")try{kr.onCommitFiberRoot(Qi,h,void 0,(h.current.flags&128)===128)}catch{}}function tt(h){if(typeof tS=="function"&&bs(h),kr&&typeof kr.setStrictMode=="function")try{kr.setStrictMode(Qi,h)}catch{}}function et(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}function _t(h,d){if(typeof h=="object"&&h!==null){var A=C2.get(h);return A!==void 0?A:(d={value:h,source:d,stack:m(d)},C2.set(h,d),d)}return{value:h,source:d,stack:m(d)}}function K(h,d){Wu[Ku++]=zf,Wu[Ku++]=Ju,Ju=h,zf=d}function at(h,d,A){da[pa++]=_o,da[pa++]=Ao,da[pa++]=iu,iu=h;var M=_o;h=Ao;var L=32-br(M)-1;M&=~(1<<L),A+=1;var O=32-br(d)+L;if(30<O){var W=L-L%5;O=(M&(1<<W)-1).toString(32),M>>=W,L-=W,_o=1<<32-br(d)+L|A<<L|M,Ao=O+h}else _o=1<<O|A<<L|M,Ao=h}function xt(h){h.return!==null&&(K(h,1),at(h,1,0))}function Et(h){for(;h===Ju;)Ju=Wu[--Ku],Wu[Ku]=null,zf=Wu[--Ku],Wu[Ku]=null;for(;h===iu;)iu=da[--pa],da[pa]=null,Ao=da[--pa],da[pa]=null,_o=da[--pa],da[pa]=null}function lt(h,d){R(rl,d),R(Gf,h),R(hs,null),h=mb(d),S(hs),R(hs,h)}function wt(){S(hs),S(Gf),S(rl)}function Bt(h){h.memoizedState!==null&&R(Zu,h);var d=hs.current,A=If(d,h.type);d!==A&&(R(Gf,h),R(hs,A))}function Ut(h){Gf.current===h&&(S(hs),S(Gf)),Zu.current===h&&(S(Zu),Ar?vo._currentValue=Zc:vo._currentValue2=Zc)}function Wt(h){var d=Error(i(418,""));throw se(_t(d,h)),Kp}function ve(h,d){if(!Hs)throw Error(i(175));zb(h.stateNode,h.type,h.memoizedProps,d,h)||Wt(h)}function ee(h){for(zs=h.return;zs;)switch(zs.tag){case 3:case 27:Ss=!0;return;case 5:case 13:Ss=!1;return;default:zs=zs.return}}function Ye(h){if(!Hs||h!==zs)return!1;if(!Dn)return ee(h),Dn=!0,!1;var d=!1;if(ai?h.tag!==3&&h.tag!==27&&(h.tag!==5||Q0(h.type)&&!en(h.type,h.memoizedProps))&&(d=!0):h.tag!==3&&(h.tag!==5||Q0(h.type)&&!en(h.type,h.memoizedProps))&&(d=!0),d&&Gs&&Wt(h),ee(h),h.tag===13){if(!Hs)throw Error(i(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));Gs=kb(h)}else Gs=zs?S2(h.stateNode):null;return!0}function we(){Hs&&(Gs=zs=null,Dn=!1)}function se(h){Xa===null?Xa=[h]:Xa.push(h)}function Z(){for(var h=$u,d=xo=$u=0;d<h;){var A=ja[d];ja[d++]=null;var M=ja[d];ja[d++]=null;var L=ja[d];ja[d++]=null;var O=ja[d];if(ja[d++]=null,M!==null&&L!==null){var W=M.pending;W===null?L.next=L:(L.next=W.next,W.next=L),M.pending=L}O!==0&&Gt(A,L,O)}}function Kt(h,d,A,M){ja[$u++]=h,ja[$u++]=d,ja[$u++]=A,ja[$u++]=M,xo|=M,h.lanes|=M,h=h.alternate,h!==null&&(h.lanes|=M)}function Ft(h,d,A,M){return Kt(h,d,A,M),be(h)}function Vt(h,d){return Kt(h,null,null,d),be(h)}function Gt(h,d,A){h.lanes|=A;var M=h.alternate;M!==null&&(M.lanes|=A);for(var L=!1,O=h.return;O!==null;)O.childLanes|=A,M=O.alternate,M!==null&&(M.childLanes|=A),O.tag===22&&(h=O.stateNode,h===null||h._visibility&1||(L=!0)),h=O,O=O.return;L&&d!==null&&h.tag===3&&(O=h.stateNode,L=31-br(A),O=O.hiddenUpdates,h=O[L],h===null?O[L]=[d]:h.push(d),d.lane=A|536870912)}function be(h){if(50<Kf)throw Kf=0,r1=null,Error(i(185));for(var d=h.return;d!==null;)h=d,d=h.return;return h.tag===3?h.stateNode:null}function qt(h){h!==$l&&h.next===null&&($l===null?Jp=$l=h:$l=$l.next=h),pi=!0,th||(th=!0,Ot(V))}function $(h,d){if(!w2&&pi){w2=!0;do for(var A=!1,M=Jp;M!==null;){if(h!==0){var L=M.pendingLanes;if(L===0)var O=0;else{var W=M.suspendedLanes,rt=M.pingedLanes;O=(1<<31-br(42|h)+1)-1,O&=L&~(W&~rt),O=O&201326677?O&201326677|1:O?O|2:0}O!==0&&(A=!0,Xt(M,O))}else O=Sn,O=N(M,M===qn?O:0),(O&3)===0||I(M,O)||(A=!0,Xt(M,O));M=M.next}while(A);w2=!1}}function V(){pi=th=!1;var h=0;kf!==0&&(_b()&&(h=kf),kf=0);for(var d=Qa(),A=null,M=Jp;M!==null;){var L=M.next,O=vt(M,d);O===0?(M.next=null,A===null?Jp=L:A.next=L,L===null&&($l=A)):(A=M,(h!==0||(O&3)!==0)&&(pi=!0)),M=L}$(h)}function vt(h,d){for(var A=h.suspendedLanes,M=h.pingedLanes,L=h.expirationTimes,O=h.pendingLanes&-62914561;0<O;){var W=31-br(O),rt=1<<W,At=L[W];At===-1?((rt&A)===0||(rt&M)!==0)&&(L[W]=F(rt,d)):At<=d&&(h.expiredLanes|=rt),O&=~rt}if(d=qn,A=Sn,A=N(h,h===d?A:0),M=h.callbackNode,A===0||h===d&&ni===2||h.cancelPendingCommit!==null)return M!==null&&M!==null&&Y0(M),h.callbackNode=null,h.callbackPriority=0;if((A&3)===0||I(h,A)){if(d=A&-A,d===h.callbackPriority)return d;switch(M!==null&&Y0(M),dt(A)){case 2:case 8:A=$b;break;case 32:A=J0;break;case 268435456:A=J4;break;default:A=J0}return M=It.bind(null,h),A=Wp(A,M),h.callbackPriority=d,h.callbackNode=A,d}return M!==null&&M!==null&&Y0(M),h.callbackPriority=2,h.callbackNode=null,2}function It(h,d){var A=h.callbackNode;if(mo()&&h.callbackNode!==A)return null;var M=Sn;return M=N(h,h===qn?M:0),M===0?null:(Xc(h,M,d),vt(h,Qa()),h.callbackNode!=null&&h.callbackNode===A?It.bind(null,h):null)}function Xt(h,d){if(mo())return null;Xc(h,d,!0)}function Ot(h){d2?Jl(function(){(Un&6)!==0?Wp(K0,h):h()}):Wp(K0,h)}function ne(){return kf===0&&(kf=z()),kf}function te(h,d){if(Vf===null){var A=Vf=[];eh=0,ma=ne(),nh={status:"pending",value:void 0,then:function(M){A.push(M)}}}return eh++,d.then(ge,ge),d}function ge(){if(--eh===0&&Vf!==null){nh!==null&&(nh.status="fulfilled");var h=Vf;Vf=null,ma=0,nh=null;for(var d=0;d<h.length;d++)(0,h[d])()}}function De(h,d){var A=[],M={status:"pending",value:null,reason:null,then:function(L){A.push(L)}};return h.then(function(){M.status="fulfilled",M.value=d;for(var L=0;L<A.length;L++)(0,A[L])(d)},function(L){for(M.status="rejected",M.reason=L,L=0;L<A.length;L++)(0,A[L])(void 0)}),M}function Jt(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _e(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Se(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Te(h,d,A){var M=h.updateQueue;if(M===null)return null;if(M=M.shared,(Un&2)!==0){var L=M.pending;return L===null?d.next=d:(d.next=L.next,L.next=d),M.pending=d,d=be(h),Gt(h,null,A),d}return Kt(h,M,d,A),be(h)}function le(h,d,A){if(d=d.updateQueue,d!==null&&(d=d.shared,(A&4194176)!==0)){var M=d.lanes;M&=h.pendingLanes,A|=M,d.lanes=A,ct(h,A)}}function rn(h,d){var A=h.updateQueue,M=h.alternate;if(M!==null&&(M=M.updateQueue,A===M)){var L=null,O=null;if(A=A.firstBaseUpdate,A!==null){do{var W={lane:A.lane,tag:A.tag,payload:A.payload,callback:null,next:null};O===null?L=O=W:O=O.next=W,A=A.next}while(A!==null);O===null?L=O=d:O=O.next=d}else L=O=d;A={baseState:M.baseState,firstBaseUpdate:L,lastBaseUpdate:O,shared:M.shared,callbacks:M.callbacks},h.updateQueue=A;return}h=A.lastBaseUpdate,h===null?A.firstBaseUpdate=d:h.next=d,A.lastBaseUpdate=d}function He(){if(ih){var h=nh;if(h!==null)throw h}}function Gn(h,d,A,M){ih=!1;var L=h.updateQueue;tc=!1;var O=L.firstBaseUpdate,W=L.lastBaseUpdate,rt=L.shared.pending;if(rt!==null){L.shared.pending=null;var At=rt,Ht=At.next;At.next=null,W===null?O=Ht:W.next=Ht,W=At;var $t=h.alternate;$t!==null&&($t=$t.updateQueue,rt=$t.lastBaseUpdate,rt!==W&&(rt===null?$t.firstBaseUpdate=Ht:rt.next=Ht,$t.lastBaseUpdate=At))}if(O!==null){var de=L.baseState;W=0,$t=Ht=At=null,rt=O;do{var ye=rt.lane&-536870913,Ke=ye!==rt.lane;if(Ke?(Sn&ye)===ye:(M&ye)===ye){ye!==0&&ye===ma&&(ih=!0),$t!==null&&($t=$t.next={lane:0,tag:rt.tag,payload:rt.payload,callback:null,next:null});t:{var Sa=h,fu=rt;ye=d;var du=A;switch(fu.tag){case 1:if(Sa=fu.payload,typeof Sa=="function"){de=Sa.call(du,de,ye);break t}de=Sa;break t;case 3:Sa.flags=Sa.flags&-65537|128;case 0:if(Sa=fu.payload,ye=typeof Sa=="function"?Sa.call(du,de,ye):Sa,ye==null)break t;de=B0({},de,ye);break t;case 2:tc=!0}}ye=rt.callback,ye!==null&&(h.flags|=64,Ke&&(h.flags|=8192),Ke=L.callbacks,Ke===null?L.callbacks=[ye]:Ke.push(ye))}else Ke={lane:ye,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null},$t===null?(Ht=$t=Ke,At=de):$t=$t.next=Ke,W|=ye;if(rt=rt.next,rt===null){if(rt=L.shared.pending,rt===null)break;Ke=rt,rt=Ke.next,Ke.next=null,L.lastBaseUpdate=Ke,L.shared.pending=null}}while(!0);$t===null&&(At=de),L.baseState=At,L.firstBaseUpdate=Ht,L.lastBaseUpdate=$t,O===null&&(L.shared.lanes=0),xa|=W,h.lanes=W,h.memoizedState=de}}function mt(h,d){if(typeof h!="function")throw Error(i(191,h));h.call(d)}function ce(h,d){var A=h.callbacks;if(A!==null)for(h.callbacks=null,h=0;h<A.length;h++)mt(A[h],d)}function Nt(h,d){if(Vr(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var A=Object.keys(h),M=Object.keys(d);if(A.length!==M.length)return!1;for(M=0;M<A.length;M++){var L=A[M];if(!al.call(d,L)||!Vr(h[L],d[L]))return!1}return!0}function Qt(h){return h=h.status,h==="fulfilled"||h==="rejected"}function fe(){}function ue(h,d,A){switch(A=h[A],A===void 0?h.push(d):A!==d&&(d.then(fe,fe),d=A),d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===Qf?Error(i(483)):h;default:if(typeof d.status=="string")d.then(fe,fe);else{if(h=qn,h!==null&&100<h.shellSuspendCounter)throw Error(i(482));h=d,h.status="pending",h.then(function(M){if(d.status==="pending"){var L=d;L.status="fulfilled",L.value=M}},function(M){if(d.status==="pending"){var L=d;L.status="rejected",L.reason=M}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===Qf?Error(i(483)):h}throw su=d,Qf}}function qe(){if(su===null)throw Error(i(459));var h=su;return su=null,h}function Jn(h){var d=au;return au+=1,ru===null&&(ru=[]),ue(ru,h,d)}function Ei(h,d){d=d.props.ref,h.ref=d!==void 0?d:null}function Cn(h,d){throw d.$$typeof===Q4?Error(i(525)):(h=Object.prototype.toString.call(d),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h)))}function Nr(h){var d=h._init;return d(h._payload)}function ls(h){function d(Mt,ut){if(h){var Dt=Mt.deletions;Dt===null?(Mt.deletions=[ut],Mt.flags|=16):Dt.push(ut)}}function A(Mt,ut){if(!h)return null;for(;ut!==null;)d(Mt,ut),ut=ut.sibling;return null}function M(Mt){for(var ut=new Map;Mt!==null;)Mt.key!==null?ut.set(Mt.key,Mt):ut.set(Mt.index,Mt),Mt=Mt.sibling;return ut}function L(Mt,ut){return Mt=za(Mt,ut),Mt.index=0,Mt.sibling=null,Mt}function O(Mt,ut,Dt){return Mt.index=Dt,h?(Dt=Mt.alternate,Dt!==null?(Dt=Dt.index,Dt<ut?(Mt.flags|=33554434,ut):Dt):(Mt.flags|=33554434,ut)):(Mt.flags|=1048576,ut)}function W(Mt){return h&&Mt.alternate===null&&(Mt.flags|=33554434),Mt}function rt(Mt,ut,Dt,Zt){return ut===null||ut.tag!==6?(ut=L0(Dt,Mt.mode,Zt),ut.return=Mt,ut):(ut=L(ut,Dt),ut.return=Mt,ut)}function At(Mt,ut,Dt,Zt){var Re=Dt.type;return Re===Kc?$t(Mt,ut,Dt.props.children,Zt,Dt.key):ut!==null&&(ut.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===ka&&Nr(Re)===ut.type)?(ut=L(ut,Dt.props),Ei(ut,Dt),ut.return=Mt,ut):(ut=el(Dt.type,Dt.key,Dt.props,null,Mt.mode,Zt),Ei(ut,Dt),ut.return=Mt,ut)}function Ht(Mt,ut,Dt,Zt){return ut===null||ut.tag!==4||ut.stateNode.containerInfo!==Dt.containerInfo||ut.stateNode.implementation!==Dt.implementation?(ut=r2(Dt,Mt.mode,Zt),ut.return=Mt,ut):(ut=L(ut,Dt.children||[]),ut.return=Mt,ut)}function $t(Mt,ut,Dt,Zt,Re){return ut===null||ut.tag!==7?(ut=Ii(Dt,Mt.mode,Zt,Re),ut.return=Mt,ut):(ut=L(ut,Dt),ut.return=Mt,ut)}function de(Mt,ut,Dt){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return ut=L0(""+ut,Mt.mode,Dt),ut.return=Mt,ut;if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case Fp:return Dt=el(ut.type,ut.key,ut.props,null,Mt.mode,Dt),Ei(Dt,ut),Dt.return=Mt,Dt;case Ga:return ut=r2(ut,Mt.mode,Dt),ut.return=Mt,ut;case ka:var Zt=ut._init;return ut=Zt(ut._payload),de(Mt,ut,Dt)}if(Bf(ut)||r(ut))return ut=Ii(ut,Mt.mode,Dt,null),ut.return=Mt,ut;if(typeof ut.then=="function")return de(Mt,Jn(ut),Dt);if(ut.$$typeof===go)return de(Mt,Sp(Mt,ut),Dt);Cn(Mt,ut)}return null}function ye(Mt,ut,Dt,Zt){var Re=ut!==null?ut.key:null;if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return Re!==null?null:rt(Mt,ut,""+Dt,Zt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case Fp:return Dt.key===Re?At(Mt,ut,Dt,Zt):null;case Ga:return Dt.key===Re?Ht(Mt,ut,Dt,Zt):null;case ka:return Re=Dt._init,Dt=Re(Dt._payload),ye(Mt,ut,Dt,Zt)}if(Bf(Dt)||r(Dt))return Re!==null?null:$t(Mt,ut,Dt,Zt,null);if(typeof Dt.then=="function")return ye(Mt,ut,Jn(Dt),Zt);if(Dt.$$typeof===go)return ye(Mt,ut,Sp(Mt,Dt),Zt);Cn(Mt,Dt)}return null}function Ke(Mt,ut,Dt,Zt,Re){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint")return Mt=Mt.get(Dt)||null,rt(ut,Mt,""+Zt,Re);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case Fp:return Mt=Mt.get(Zt.key===null?Dt:Zt.key)||null,At(ut,Mt,Zt,Re);case Ga:return Mt=Mt.get(Zt.key===null?Dt:Zt.key)||null,Ht(ut,Mt,Zt,Re);case ka:var bi=Zt._init;return Zt=bi(Zt._payload),Ke(Mt,ut,Dt,Zt,Re)}if(Bf(Zt)||r(Zt))return Mt=Mt.get(Dt)||null,$t(ut,Mt,Zt,Re,null);if(typeof Zt.then=="function")return Ke(Mt,ut,Dt,Jn(Zt),Re);if(Zt.$$typeof===go)return Ke(Mt,ut,Dt,Sp(ut,Zt),Re);Cn(ut,Zt)}return null}function Sa(Mt,ut,Dt,Zt){for(var Re=null,bi=null,Xe=ut,Vn=ut=0,Xi=null;Xe!==null&&Vn<Dt.length;Vn++){Xe.index>Vn?(Xi=Xe,Xe=null):Xi=Xe.sibling;var _n=ye(Mt,Xe,Dt[Vn],Zt);if(_n===null){Xe===null&&(Xe=Xi);break}h&&Xe&&_n.alternate===null&&d(Mt,Xe),ut=O(_n,ut,Vn),bi===null?Re=_n:bi.sibling=_n,bi=_n,Xe=Xi}if(Vn===Dt.length)return A(Mt,Xe),Dn&&K(Mt,Vn),Re;if(Xe===null){for(;Vn<Dt.length;Vn++)Xe=de(Mt,Dt[Vn],Zt),Xe!==null&&(ut=O(Xe,ut,Vn),bi===null?Re=Xe:bi.sibling=Xe,bi=Xe);return Dn&&K(Mt,Vn),Re}for(Xe=M(Xe);Vn<Dt.length;Vn++)Xi=Ke(Xe,Mt,Vn,Dt[Vn],Zt),Xi!==null&&(h&&Xi.alternate!==null&&Xe.delete(Xi.key===null?Vn:Xi.key),ut=O(Xi,ut,Vn),bi===null?Re=Xi:bi.sibling=Xi,bi=Xi);return h&&Xe.forEach(function(pl){return d(Mt,pl)}),Dn&&K(Mt,Vn),Re}function fu(Mt,ut,Dt,Zt){if(Dt==null)throw Error(i(151));for(var Re=null,bi=null,Xe=ut,Vn=ut=0,Xi=null,_n=Dt.next();Xe!==null&&!_n.done;Vn++,_n=Dt.next()){Xe.index>Vn?(Xi=Xe,Xe=null):Xi=Xe.sibling;var pl=ye(Mt,Xe,_n.value,Zt);if(pl===null){Xe===null&&(Xe=Xi);break}h&&Xe&&pl.alternate===null&&d(Mt,Xe),ut=O(pl,ut,Vn),bi===null?Re=pl:bi.sibling=pl,bi=pl,Xe=Xi}if(_n.done)return A(Mt,Xe),Dn&&K(Mt,Vn),Re;if(Xe===null){for(;!_n.done;Vn++,_n=Dt.next())_n=de(Mt,_n.value,Zt),_n!==null&&(ut=O(_n,ut,Vn),bi===null?Re=_n:bi.sibling=_n,bi=_n);return Dn&&K(Mt,Vn),Re}for(Xe=M(Xe);!_n.done;Vn++,_n=Dt.next())_n=Ke(Xe,Mt,Vn,_n.value,Zt),_n!==null&&(h&&_n.alternate!==null&&Xe.delete(_n.key===null?Vn:_n.key),ut=O(_n,ut,Vn),bi===null?Re=_n:bi.sibling=_n,bi=_n);return h&&Xe.forEach(function(a1){return d(Mt,a1)}),Dn&&K(Mt,Vn),Re}function du(Mt,ut,Dt,Zt){if(typeof Dt=="object"&&Dt!==null&&Dt.type===Kc&&Dt.key===null&&(Dt=Dt.props.children),typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case Fp:t:{for(var Re=Dt.key;ut!==null;){if(ut.key===Re){if(Re=Dt.type,Re===Kc){if(ut.tag===7){A(Mt,ut.sibling),Zt=L(ut,Dt.props.children),Zt.return=Mt,Mt=Zt;break t}}else if(ut.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===ka&&Nr(Re)===ut.type){A(Mt,ut.sibling),Zt=L(ut,Dt.props),Ei(Zt,Dt),Zt.return=Mt,Mt=Zt;break t}A(Mt,ut);break}else d(Mt,ut);ut=ut.sibling}Dt.type===Kc?(Zt=Ii(Dt.props.children,Mt.mode,Zt,Dt.key),Zt.return=Mt,Mt=Zt):(Zt=el(Dt.type,Dt.key,Dt.props,null,Mt.mode,Zt),Ei(Zt,Dt),Zt.return=Mt,Mt=Zt)}return W(Mt);case Ga:t:{for(Re=Dt.key;ut!==null;){if(ut.key===Re)if(ut.tag===4&&ut.stateNode.containerInfo===Dt.containerInfo&&ut.stateNode.implementation===Dt.implementation){A(Mt,ut.sibling),Zt=L(ut,Dt.children||[]),Zt.return=Mt,Mt=Zt;break t}else{A(Mt,ut);break}else d(Mt,ut);ut=ut.sibling}Zt=r2(Dt,Mt.mode,Zt),Zt.return=Mt,Mt=Zt}return W(Mt);case ka:return Re=Dt._init,Dt=Re(Dt._payload),du(Mt,ut,Dt,Zt)}if(Bf(Dt))return Sa(Mt,ut,Dt,Zt);if(r(Dt)){if(Re=r(Dt),typeof Re!="function")throw Error(i(150));return Dt=Re.call(Dt),fu(Mt,ut,Dt,Zt)}if(typeof Dt.then=="function")return du(Mt,ut,Jn(Dt),Zt);if(Dt.$$typeof===go)return du(Mt,ut,Sp(Mt,Dt),Zt);Cn(Mt,Dt)}return typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint"?(Dt=""+Dt,ut!==null&&ut.tag===6?(A(Mt,ut.sibling),Zt=L(ut,Dt),Zt.return=Mt,Mt=Zt):(A(Mt,ut),Zt=L0(Dt,Mt.mode,Zt),Zt.return=Mt,Mt=Zt),W(Mt)):A(Mt,ut)}return function(Mt,ut,Dt,Zt){try{au=0;var Re=du(Mt,ut,Dt,Zt);return ru=null,Re}catch(Xe){if(Xe===Qf)throw Xe;var bi=e(29,Xe,null,Mt.mode);return bi.lanes=Zt,bi.return=Mt,bi}finally{}}}function Ji(h,d){h=ir,R(Xf,h),R(mi,d),ir=h|d.baseLanes}function cs(){R(Xf,ir),R(mi,mi.current)}function $s(){ir=Xf.current,S(mi),S(Xf)}function Ir(h){var d=h.alternate;R(fs,fs.current&1),R(ga,h),oi===null&&(d===null||mi.current!==null||d.memoizedState!==null)&&(oi=h)}function hp(h){if(h.tag===22){if(R(fs,fs.current),R(ga,h),oi===null){var d=h.alternate;d!==null&&d.memoizedState!==null&&(oi=h)}}else lo()}function lo(){R(fs,fs.current),R(ga,ga.current)}function mr(h){S(ga),oi===h&&(oi=null),S(fs)}function co(h){for(var d=h;d!==null;){if(d.tag===13){var A=d.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||G0(A)||k0(A)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function ti(){throw Error(i(321))}function uo(h,d){if(d===null)return!1;for(var A=0;A<d.length&&A<h.length;A++)if(!Vr(h[A],d[A]))return!1;return!0}function ho(h,d,A,M,L,O){return ec=O,ln=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Qe.H=h===null||h.memoizedState===null?cu:Sr,lu=!1,O=A(M,L),lu=!1,sh&&(O=Nl(d,A,M,L)),Nc(h),O}function Nc(h){Qe.H=Ui;var d=Pe!==null&&Pe.next!==null;if(ec=0,In=Pe=ln=null,qa=!1,rh=0,Es=null,d)throw Error(i(300));h===null||li||(h=h.dependencies,h!==null&&bp(h)&&(li=!0))}function Nl(h,d,A,M){ln=h;var L=0;do{if(sh&&(Es=null),rh=0,sh=!1,25<=L)throw Error(i(301));if(L+=1,In=Pe=null,h.updateQueue!=null){var O=h.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Qe.H=va,O=d(A,M)}while(sh);return O}function Zi(){var h=Qe.H,d=h.useState()[0];return d=typeof d.then=="function"?Ct(d):d,h=h.useState()[0],(Pe!==null?Pe.memoizedState:null)!==h&&(ln.flags|=1024),d}function uf(){var h=Z0!==0;return Z0=0,h}function hf(h,d,A){d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~A}function fo(h){if(qa){for(h=h.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}qa=!1}ec=0,In=Pe=ln=null,sh=!1,rh=Z0=0,Es=null}function q(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?ln.memoizedState=In=h:In=In.next=h,In}function pt(){if(Pe===null){var h=ln.alternate;h=h!==null?h.memoizedState:null}else h=Pe.next;var d=In===null?ln.memoizedState:In.next;if(d!==null)In=d,Pe=h;else{if(h===null)throw ln.alternate===null?Error(i(467)):Error(i(310));Pe=h,h={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},In===null?ln.memoizedState=In=h:In=In.next=h}return In}function Ct(h){var d=rh;return rh+=1,Es===null&&(Es=[]),h=ue(Es,h,d),d=ln,(In===null?d.memoizedState:In.next)===null&&(d=d.alternate,Qe.H=d===null||d.memoizedState===null?cu:Sr),h}function Rt(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Ct(h);if(h.$$typeof===go)return Is(h)}throw Error(i(438,String(h)))}function yt(h){var d=null,A=ln.updateQueue;if(A!==null&&(d=A.memoCache),d==null){var M=ln.alternate;M!==null&&(M=M.updateQueue,M!==null&&(M=M.memoCache,M!=null&&(d={data:M.data.map(function(L){return L.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),A===null&&(A=$0(),ln.updateQueue=A),A.memoCache=d,A=d.data[d.index],A===void 0)for(A=d.data[d.index]=Array(h),M=0;M<h;M++)A[M]=pb;return d.index++,A}function Yt(h,d){return typeof d=="function"?d(h):d}function ie(h){var d=pt();return re(d,Pe,h)}function re(h,d,A){var M=h.queue;if(M===null)throw Error(i(311));M.lastRenderedReducer=A;var L=h.baseQueue,O=M.pending;if(O!==null){if(L!==null){var W=L.next;L.next=O.next,O.next=W}d.baseQueue=L=O,M.pending=null}if(O=h.baseState,L===null)h.memoizedState=O;else{d=L.next;var rt=W=null,At=null,Ht=d,$t=!1;do{var de=Ht.lane&-536870913;if(de!==Ht.lane?(Sn&de)===de:(ec&de)===de){var ye=Ht.revertLane;if(ye===0)At!==null&&(At=At.next={lane:0,revertLane:0,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null}),de===ma&&($t=!0);else if((ec&ye)===ye){Ht=Ht.next,ye===ma&&($t=!0);continue}else de={lane:0,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},At===null?(rt=At=de,W=O):At=At.next=de,ln.lanes|=ye,xa|=ye;de=Ht.action,lu&&A(O,de),O=Ht.hasEagerState?Ht.eagerState:A(O,de)}else ye={lane:de,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},At===null?(rt=At=ye,W=O):At=At.next=ye,ln.lanes|=de,xa|=de;Ht=Ht.next}while(Ht!==null&&Ht!==d);if(At===null?W=O:At.next=rt,!Vr(O,h.memoizedState)&&(li=!0,$t&&(A=nh,A!==null)))throw A;h.memoizedState=O,h.baseState=W,h.baseQueue=At,M.lastRenderedState=O}return L===null&&(M.lanes=0),[h.memoizedState,M.dispatch]}function Ae(h){var d=pt(),A=d.queue;if(A===null)throw Error(i(311));A.lastRenderedReducer=h;var M=A.dispatch,L=A.pending,O=d.memoizedState;if(L!==null){A.pending=null;var W=L=L.next;do O=h(O,W.action),W=W.next;while(W!==L);Vr(O,d.memoizedState)||(li=!0),d.memoizedState=O,d.baseQueue===null&&(d.baseState=O),A.lastRenderedState=O}return[O,M]}function Ge(h,d,A){var M=ln,L=pt(),O=Dn;if(O){if(A===void 0)throw Error(i(407));A=A()}else A=d();var W=!Vr((Pe||L).memoizedState,A);if(W&&(L.memoizedState=A,li=!0),L=L.queue,Ly(pn.bind(null,M,L,h),[h]),L.getSnapshot!==d||W||In!==null&&In.memoizedState.tag&1){if(M.flags|=2048,gr(9,Ce.bind(null,M,L,A,d),{destroy:void 0},null),qn===null)throw Error(i(349));O||(ec&60)!==0||Oe(M,d,A)}return A}function Oe(h,d,A){h.flags|=16384,h={getSnapshot:d,value:A},d=ln.updateQueue,d===null?(d=$0(),ln.updateQueue=d,d.stores=[h]):(A=d.stores,A===null?d.stores=[h]:A.push(h))}function Ce(h,d,A,M){d.value=A,d.getSnapshot=M,Nn(d)&&Mi(h)}function pn(h,d,A){return A(function(){Nn(d)&&Mi(h)})}function Nn(h){var d=h.getSnapshot;h=h.value;try{var A=d();return!Vr(h,A)}catch{return!0}}function Mi(h){var d=Vt(h,2);d!==null&&xs(d,h,2)}function yn(h){var d=q();if(typeof h=="function"){var A=h;if(h=A(),lu){tt(!0);try{A()}finally{tt(!1)}}}return d.memoizedState=d.baseState=h,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:h},d}function bn(h,d,A,M){return h.baseState=A,re(h,Pe,typeof M=="function"?M:Yt)}function Ne(h,d,A,M,L){if(vp(h))throw Error(i(485));if(h=d.action,h!==null){var O={payload:L,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){O.listeners.push(W)}};Qe.T!==null?A(!0):O.isTransition=!1,M(O),A=d.pending,A===null?(O.next=d.pending=O,Ri(d,O)):(O.next=A.next,d.pending=A.next=O)}}function Ri(h,d){var A=d.action,M=d.payload,L=h.state;if(d.isTransition){var O=Qe.T,W={};Qe.T=W;try{var rt=A(L,M),At=Qe.S;At!==null&&At(W,rt),Ln(h,d,rt)}catch(Ht){Wo(h,d,Ht)}finally{Qe.T=O}}else try{O=A(L,M),Ln(h,d,O)}catch(Ht){Wo(h,d,Ht)}}function Ln(h,d,A){A!==null&&typeof A=="object"&&typeof A.then=="function"?A.then(function(M){Bs(h,d,M)},function(M){return Wo(h,d,M)}):Bs(h,d,A)}function Bs(h,d,A){d.status="fulfilled",d.value=A,ri(d),h.state=A,d=h.pending,d!==null&&(A=d.next,A===d?h.pending=null:(A=A.next,d.next=A,Ri(h,A)))}function Wo(h,d,A){var M=h.pending;if(h.pending=null,M!==null){M=M.next;do d.status="rejected",d.reason=A,ri(d),d=d.next;while(d!==M)}h.action=null}function ri(h){h=h.listeners;for(var d=0;d<h.length;d++)(0,h[d])()}function Ko(h,d){return d}function ei(h,d){if(Dn){var A=qn.formState;if(A!==null){t:{var M=ln;if(Dn){if(Gs){var L=b2(Gs,Ss);if(L){Gs=S2(L),M=Ub(L);break t}}Wt(M)}M=!1}M&&(d=A[0])}}A=q(),A.memoizedState=A.baseState=d,M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:d},A.queue=M,A=Ny.bind(null,ln,M),M.dispatch=A,M=yn(!1);var O=pf.bind(null,ln,!1,M.queue);return M=q(),L={state:d,dispatch:null,action:h,pending:null},M.queue=L,A=Ne.bind(null,ln,L,O,A),L.dispatch=A,M.memoizedState=h,[d,A,!1]}function Os(h){var d=pt();return $i(d,Pe,h)}function $i(h,d,A){d=re(h,d,Ko)[0],h=ie(Yt)[0],d=typeof d=="object"&&d!==null&&typeof d.then=="function"?Ct(d):d;var M=pt(),L=M.queue,O=L.dispatch;return A!==M.memoizedState&&(ln.flags|=2048,gr(9,ys.bind(null,L,A),{destroy:void 0},null)),[d,O,h]}function ys(h,d){h.action=d}function _s(h){var d=pt(),A=Pe;if(A!==null)return $i(d,A,h);pt(),d=d.memoizedState,A=pt();var M=A.queue.dispatch;return A.memoizedState=h,[d,M,!1]}function gr(h,d,A,M){return h={tag:h,create:d,inst:A,deps:M,next:null},d=ln.updateQueue,d===null&&(d=$0(),ln.updateQueue=d),A=d.lastEffect,A===null?d.lastEffect=h.next=h:(M=A.next,A.next=h,h.next=M,d.lastEffect=h),h}function Jo(){return pt().memoizedState}function fp(h,d,A,M){var L=q();ln.flags|=h,L.memoizedState=gr(1|d,A,{destroy:void 0},M===void 0?null:M)}function dp(h,d,A,M){var L=pt();M=M===void 0?null:M;var O=L.memoizedState.inst;Pe!==null&&M!==null&&uo(M,Pe.memoizedState.deps)?L.memoizedState=gr(d,A,O,M):(ln.flags|=h,L.memoizedState=gr(1|d,A,O,M))}function u0(h,d){fp(8390656,8,h,d)}function Ly(h,d){dp(2048,8,h,d)}function jx(h,d){return dp(4,2,h,d)}function pp(h,d){return dp(4,4,h,d)}function h0(h,d){if(typeof d=="function"){h=h();var A=d(h);return function(){typeof A=="function"?A():d(null)}}if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function f0(h,d,A){A=A!=null?A.concat([h]):null,dp(4,4,h0.bind(null,d,h),A)}function Ic(){}function Gu(h,d){var A=pt();d=d===void 0?null:d;var M=A.memoizedState;return d!==null&&uo(d,M[1])?M[0]:(A.memoizedState=[h,d],h)}function Dy(h,d){var A=pt();d=d===void 0?null:d;var M=A.memoizedState;if(d!==null&&uo(d,M[1]))return M[0];if(M=h(),lu){tt(!0);try{h()}finally{tt(!1)}}return A.memoizedState=[M,d],M}function mp(h,d,A){return A===void 0||(ec&1073741824)!==0?h.memoizedState=d:(h.memoizedState=A,h=$y(),ln.lanes|=h,xa|=h,A)}function By(h,d,A,M){return Vr(A,d)?A:mi.current!==null?(h=mp(h,A,M),Vr(h,d)||(li=!0),h):(ec&42)===0?(li=!0,h.memoizedState=A):(h=$y(),ln.lanes|=h,xa|=h,d)}function ff(h,d,A,M,L){var O=Kl();er(O!==0&&8>O?O:8);var W=Qe.T,rt={};Qe.T=rt,pf(h,!1,d,A);try{var At=L(),Ht=Qe.S;if(Ht!==null&&Ht(rt,At),At!==null&&typeof At=="object"&&typeof At.then=="function"){var $t=De(At,M);Uc(h,d,$t,Gi(h))}else Uc(h,d,M,Gi(h))}catch(de){Uc(h,d,{then:function(){},status:"rejected",reason:de},Gi())}finally{er(O),Qe.T=W}}function Zo(h){var d=h.memoizedState;if(d!==null)return d;d={memoizedState:Zc,baseState:Zc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:Zc},next:null};var A={};return d.next={memoizedState:A,baseState:A,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:A},next:null},h.memoizedState=d,h=h.alternate,h!==null&&(h.memoizedState=d),d}function gp(){return Is(vo)}function df(){return pt().memoizedState}function Il(){return pt().memoizedState}function Oy(h){for(var d=h.return;d!==null;){switch(d.tag){case 24:case 3:var A=Gi();h=Se(A);var M=Te(d,h,A);M!==null&&(xs(M,d,A),le(M,d,A)),d={cache:zc()},h.payload=d;return}d=d.return}}function d0(h,d,A){var M=Gi();A={lane:M,revertLane:0,action:A,hasEagerState:!1,eagerState:null,next:null},vp(h)?vr(d,A):(A=Ft(h,d,A,M),A!==null&&(xs(A,h,M),Pc(A,d,M)))}function Ny(h,d,A){var M=Gi();Uc(h,d,A,M)}function Uc(h,d,A,M){var L={lane:M,revertLane:0,action:A,hasEagerState:!1,eagerState:null,next:null};if(vp(h))vr(d,L);else{var O=h.alternate;if(h.lanes===0&&(O===null||O.lanes===0)&&(O=d.lastRenderedReducer,O!==null))try{var W=d.lastRenderedState,rt=O(W,A);if(L.hasEagerState=!0,L.eagerState=rt,Vr(rt,W))return Kt(h,d,L,0),qn===null&&Z(),!1}catch{}finally{}if(A=Ft(h,d,L,M),A!==null)return xs(A,h,M),Pc(A,d,M),!0}return!1}function pf(h,d,A,M){if(M={lane:2,revertLane:ne(),action:M,hasEagerState:!1,eagerState:null,next:null},vp(h)){if(d)throw Error(i(479))}else d=Ft(h,A,M,2),d!==null&&xs(d,h,2)}function vp(h){var d=h.alternate;return h===ln||d!==null&&d===ln}function vr(h,d){sh=qa=!0;var A=h.pending;A===null?d.next=d:(d.next=A.next,A.next=d),h.pending=d}function Pc(h,d,A){if((A&4194176)!==0){var M=d.lanes;M&=h.pendingLanes,A|=M,d.lanes=A,ct(h,A)}}function mf(h,d,A,M){d=h.memoizedState,A=A(M,d),A=A==null?d:B0({},d,A),h.memoizedState=A,h.lanes===0&&(h.updateQueue.baseState=A)}function gf(h,d,A,M,L,O,W){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(M,O,W):d.prototype&&d.prototype.isPureReactComponent?!Nt(A,M)||!Nt(L,O):!0}function qx(h,d,A,M){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(A,M),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(A,M),d.state!==h&&ll.enqueueReplaceState(d,d.state,null)}function Ul(h,d){var A=d;if("ref"in d){A={};for(var M in d)M!=="ref"&&(A[M]=d[M])}if(h=h.defaultProps){A===d&&(A=B0({},A));for(var L in h)A[L]===void 0&&(A[L]=h[L])}return A}function vf(h,d){try{var A=h.onUncaughtError;A(d.value,{componentStack:d.stack})}catch(M){setTimeout(function(){throw M})}}function yf(h,d,A){try{var M=h.onCaughtError;M(A.value,{componentStack:A.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function _f(h,d,A){return A=Se(A),A.tag=3,A.payload={element:null},A.callback=function(){vf(h,d)},A}function Iy(h){return h=Se(h),h.tag=3,h}function Yx(h,d,A,M){var L=A.type.getDerivedStateFromError;if(typeof L=="function"){var O=M.value;h.payload=function(){return L(O)},h.callback=function(){yf(d,A,M)}}var W=A.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(h.callback=function(){yf(d,A,M),typeof L!="function"&&(uu===null?uu=new Set([this]):uu.add(this));var rt=M.stack;this.componentDidCatch(M.value,{componentStack:rt!==null?rt:""})})}function z4(h,d,A,M,L){if(A.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){if(d=A.alternate,d!==null&&xp(d,A,L,!0),A=ga.current,A!==null){switch(A.tag){case 13:return oi===null?Ql():A.alternate===null&&ci===0&&(ci=3),A.flags&=-257,A.flags|=65536,A.lanes=L,M===$p?A.flags|=16384:(d=A.updateQueue,d===null?A.updateQueue=new Set([M]):d.add(M),Qu(h,M,L)),!1;case 22:return A.flags|=65536,M===$p?A.flags|=16384:(d=A.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([M])},A.updateQueue=d):(A=d.retryQueue,A===null?d.retryQueue=new Set([M]):A.add(M)),Qu(h,M,L)),!1}throw Error(i(435,A.tag))}return Qu(h,M,L),Ql(),!1}if(Dn)return d=ga.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=L,M!==Kp&&(h=Error(i(422),{cause:M}),se(_t(h,A)))):(M!==Kp&&(d=Error(i(423),{cause:M}),se(_t(d,A))),h=h.current.alternate,h.flags|=65536,L&=-L,h.lanes|=L,M=_t(M,A),L=_f(h.stateNode,M,L),rn(h,L),ci!==4&&(ci=2)),!1;var O=Error(i(520),{cause:M});if(O=_t(O,A),oh===null?oh=[O]:oh.push(O),ci!==4&&(ci=2),d===null)return!0;M=_t(M,A),A=d;do{switch(A.tag){case 3:return A.flags|=65536,h=L&-L,A.lanes|=h,h=_f(A.stateNode,M,h),rn(A,h),!1;case 1:if(d=A.type,O=A.stateNode,(A.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(uu===null||!uu.has(O))))return A.flags|=65536,L&=-L,A.lanes|=L,L=Iy(L),Yx(L,h,A,M),rn(A,L),!1}A=A.return}while(A!==null);return!1}function Ns(h,d,A,M){d.child=h===null?ol(d,null,A,M):ou(d,h.child,A,M)}function p0(h,d,A,M,L){A=A.render;var O=d.ref;if("ref"in M){var W={};for(var rt in M)rt!=="ref"&&(W[rt]=M[rt])}else W=M;return Hc(d),M=ho(h,d,A,W,O,L),rt=uf(),h!==null&&!li?(hf(h,d,L),Pl(h,d,L)):(Dn&&rt&&xt(d),d.flags|=1,Ns(h,d,M,L),d.child)}function Wx(h,d,A,M,L){if(h===null){var O=A.type;return typeof O=="function"&&!Np(O)&&O.defaultProps===void 0&&A.compare===null?(d.tag=15,d.type=O,Kx(h,d,O,M,L)):(h=el(A.type,null,M,d,d.mode,L),h.ref=d.ref,h.return=d,d.child=h)}if(O=h.child,!zy(h,L)){var W=O.memoizedProps;if(A=A.compare,A=A!==null?A:Nt,A(W,M)&&h.ref===d.ref)return Pl(h,d,L)}return d.flags|=1,h=za(O,M),h.ref=d.ref,h.return=d,d.child=h}function Kx(h,d,A,M,L){if(h!==null){var O=h.memoizedProps;if(Nt(O,M)&&h.ref===d.ref)if(li=!1,d.pendingProps=M=O,zy(h,L))(h.flags&131072)!==0&&(li=!0);else return d.lanes=h.lanes,Pl(h,d,L)}return m0(h,d,A,M,L)}function Jx(h,d,A){var M=d.pendingProps,L=M.children,O=(d.stateNode._pendingVisibility&2)!==0,W=h!==null?h.memoizedState:null;if(yp(h,d),M.mode==="hidden"||O){if((d.flags&128)!==0){if(M=W!==null?W.baseLanes|A:A,h!==null){for(L=d.child=h.child,O=0;L!==null;)O=O|L.lanes|L.childLanes,L=L.sibling;d.childLanes=O&~M}else d.childLanes=0,d.child=null;return Zx(h,d,M,A)}if((A&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},h!==null&&v0(d,W!==null?W.cachePool:null),W!==null?Ji(d,W):cs(),hp(d);else return d.lanes=d.childLanes=536870912,Zx(h,d,W!==null?W.baseLanes|A:A,A)}else W!==null?(v0(d,W.cachePool),Ji(d,W),lo(),d.memoizedState=null):(h!==null&&v0(d,null),cs(),lo());return Ns(h,d,L,A),d.child}function Zx(h,d,A,M){var L=ky();return L=L===null?null:{parent:Ar?gi._currentValue:gi._currentValue2,pool:L},d.memoizedState={baseLanes:A,cachePool:L},h!==null&&v0(d,null),cs(),hp(d),h!==null&&xp(h,d,M,!0),null}function yp(h,d){var A=d.ref;if(A===null)h!==null&&h.ref!==null&&(d.flags|=2097664);else{if(typeof A!="function"&&typeof A!="object")throw Error(i(284));(h===null||h.ref!==A)&&(d.flags|=2097664)}}function m0(h,d,A,M,L){return Hc(d),A=ho(h,d,A,M,void 0,L),M=uf(),h!==null&&!li?(hf(h,d,L),Pl(h,d,L)):(Dn&&M&&xt(d),d.flags|=1,Ns(h,d,A,L),d.child)}function $x(h,d,A,M,L,O){return Hc(d),d.updateQueue=null,A=Nl(d,M,A,L),Nc(h),M=uf(),h!==null&&!li?(hf(h,d,O),Pl(h,d,O)):(Dn&&M&&xt(d),d.flags|=1,Ns(h,d,A,O),d.child)}function tb(h,d,A,M,L){if(Hc(d),d.stateNode===null){var O=nu,W=A.contextType;typeof W=="object"&&W!==null&&(O=Is(W)),O=new A(M,O),d.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=ll,d.stateNode=O,O._reactInternals=d,O=d.stateNode,O.props=M,O.state=d.memoizedState,O.refs={},Jt(d),W=A.contextType,O.context=typeof W=="object"&&W!==null?Is(W):nu,O.state=d.memoizedState,W=A.getDerivedStateFromProps,typeof W=="function"&&(mf(d,A,W,M),O.state=d.memoizedState),typeof A.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(W=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),W!==O.state&&ll.enqueueReplaceState(O,O.state,null),Gn(d,M,O,L),He(),O.state=d.memoizedState),typeof O.componentDidMount=="function"&&(d.flags|=4194308),M=!0}else if(h===null){O=d.stateNode;var rt=d.memoizedProps,At=Ul(A,rt);O.props=At;var Ht=O.context,$t=A.contextType;W=nu,typeof $t=="object"&&$t!==null&&(W=Is($t));var de=A.getDerivedStateFromProps;$t=typeof de=="function"||typeof O.getSnapshotBeforeUpdate=="function",rt=d.pendingProps!==rt,$t||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(rt||Ht!==W)&&qx(d,O,M,W),tc=!1;var ye=d.memoizedState;O.state=ye,Gn(d,M,O,L),He(),Ht=d.memoizedState,rt||ye!==Ht||tc?(typeof de=="function"&&(mf(d,A,de,M),Ht=d.memoizedState),(At=tc||gf(d,A,At,M,ye,Ht,W))?($t||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(d.flags|=4194308)):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=M,d.memoizedState=Ht),O.props=M,O.state=Ht,O.context=W,M=At):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),M=!1)}else{O=d.stateNode,_e(h,d),W=d.memoizedProps,$t=Ul(A,W),O.props=$t,de=d.pendingProps,ye=O.context,Ht=A.contextType,At=nu,typeof Ht=="object"&&Ht!==null&&(At=Is(Ht)),rt=A.getDerivedStateFromProps,(Ht=typeof rt=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W!==de||ye!==At)&&qx(d,O,M,At),tc=!1,ye=d.memoizedState,O.state=ye,Gn(d,M,O,L),He();var Ke=d.memoizedState;W!==de||ye!==Ke||tc||h!==null&&h.dependencies!==null&&bp(h.dependencies)?(typeof rt=="function"&&(mf(d,A,rt,M),Ke=d.memoizedState),($t=tc||gf(d,A,$t,M,ye,Ke,At)||h!==null&&h.dependencies!==null&&bp(h.dependencies))?(Ht||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(M,Ke,At),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(M,Ke,At)),typeof O.componentDidUpdate=="function"&&(d.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof O.componentDidUpdate!="function"||W===h.memoizedProps&&ye===h.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===h.memoizedProps&&ye===h.memoizedState||(d.flags|=1024),d.memoizedProps=M,d.memoizedState=Ke),O.props=M,O.state=Ke,O.context=At,M=$t):(typeof O.componentDidUpdate!="function"||W===h.memoizedProps&&ye===h.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===h.memoizedProps&&ye===h.memoizedState||(d.flags|=1024),M=!1)}return O=M,yp(h,d),M=(d.flags&128)!==0,O||M?(O=d.stateNode,A=M&&typeof A.getDerivedStateFromError!="function"?null:O.render(),d.flags|=1,h!==null&&M?(d.child=ou(d,h.child,null,L),d.child=ou(d,null,A,L)):Ns(h,d,A,L),d.memoizedState=O.state,h=d.child):h=Pl(h,d,L),h}function eb(h,d,A,M){return we(),d.flags|=256,Ns(h,d,A,M),d.child}function Uy(h){return{baseLanes:h,cachePool:Vy()}}function _p(h,d,A){return h=h!==null?h.childLanes&~A:0,d&&(h|=ba),h}function nb(h,d,A){var M=d.pendingProps,L=!1,O=(d.flags&128)!==0,W;if((W=O)||(W=h!==null&&h.memoizedState===null?!1:(fs.current&2)!==0),W&&(L=!0,d.flags&=-129),W=(d.flags&32)!==0,d.flags&=-33,h===null){if(Dn){if(L?Ir(d):lo(),Dn){var rt=Gs,At;(At=rt)&&(rt=Hb(rt,Ss),rt!==null?(d.memoizedState={dehydrated:rt,treeContext:iu!==null?{id:_o,overflow:Ao}:null,retryLane:536870912},At=e(18,null,null,0),At.stateNode=rt,At.return=d,d.child=At,zs=d,Gs=null,At=!0):At=!1),At||Wt(d)}if(rt=d.memoizedState,rt!==null&&(rt=rt.dehydrated,rt!==null))return k0(rt)?d.lanes=16:d.lanes=536870912,null;mr(d)}return rt=M.children,M=M.fallback,L?(lo(),L=d.mode,rt=Fy({mode:"hidden",children:rt},L),M=Ii(M,L,A,null),rt.return=d,M.return=d,rt.sibling=M,d.child=rt,L=d.child,L.memoizedState=Uy(A),L.childLanes=_p(h,W,A),d.memoizedState=n1,M):(Ir(d),Py(d,rt))}if(At=h.memoizedState,At!==null&&(rt=At.dehydrated,rt!==null)){if(O)d.flags&256?(Ir(d),d.flags&=-257,d=g0(h,d,A)):d.memoizedState!==null?(lo(),d.child=h.child,d.flags|=128,d=null):(lo(),L=M.fallback,rt=d.mode,M=Fy({mode:"visible",children:M.children},rt),L=Ii(L,rt,A,null),L.flags|=2,M.return=d,L.return=d,M.sibling=L,d.child=M,ou(d,h.child,null,A),M=d.child,M.memoizedState=Uy(A),M.childLanes=_p(h,W,A),d.memoizedState=n1,d=L);else if(Ir(d),k0(rt))W=Nb(rt).digest,M=Error(i(419)),M.stack="",M.digest=W,se({value:M,source:null,stack:null}),d=g0(h,d,A);else if(li||xp(h,d,A,!1),W=(A&h.childLanes)!==0,li||W){if(W=qn,W!==null){if(M=A&-A,(M&42)!==0)M=1;else switch(M){case 2:M=1;break;case 8:M=4;break;case 32:M=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:M=64;break;case 268435456:M=134217728;break;default:M=0}if(M=(M&(W.suspendedLanes|A))!==0?0:M,M!==0&&M!==At.retryLane)throw At.retryLane=M,Vt(h,M),xs(W,h,M),e1}G0(rt)||Ql(),d=g0(h,d,A)}else G0(rt)?(d.flags|=128,d.child=h.child,d=Xl.bind(null,h),Ib(rt,d),d=null):(h=At.treeContext,Hs&&(Gs=Fb(rt),zs=d,Dn=!0,Xa=null,Ss=!1,h!==null&&(da[pa++]=_o,da[pa++]=Ao,da[pa++]=iu,_o=h.id,Ao=h.overflow,iu=d)),d=Py(d,M.children),d.flags|=4096);return d}return L?(lo(),L=M.fallback,rt=d.mode,At=h.child,O=At.sibling,M=za(At,{mode:"hidden",children:M.children}),M.subtreeFlags=At.subtreeFlags&31457280,O!==null?L=za(O,L):(L=Ii(L,rt,A,null),L.flags|=2),L.return=d,M.return=d,M.sibling=L,d.child=M,M=L,L=d.child,rt=h.child.memoizedState,rt===null?rt=Uy(A):(At=rt.cachePool,At!==null?(O=Ar?gi._currentValue:gi._currentValue2,At=At.parent!==O?{parent:O,pool:O}:At):At=Vy(),rt={baseLanes:rt.baseLanes|A,cachePool:At}),L.memoizedState=rt,L.childLanes=_p(h,W,A),d.memoizedState=n1,M):(Ir(d),A=h.child,h=A.sibling,A=za(A,{mode:"visible",children:M.children}),A.return=d,A.sibling=null,h!==null&&(W=d.deletions,W===null?(d.deletions=[h],d.flags|=16):W.push(h)),d.child=A,d.memoizedState=null,A)}function Py(h,d){return d=Fy({mode:"visible",children:d},h.mode),d.return=h,h.child=d}function Fy(h,d){return Up(h,d,0,null)}function g0(h,d,A){return ou(d,h.child,null,A),h=Py(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function ib(h,d,A){h.lanes|=d;var M=h.alternate;M!==null&&(M.lanes|=d),Ap(h.return,d,A)}function Hy(h,d,A,M,L){var O=h.memoizedState;O===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:M,tail:A,tailMode:L}:(O.isBackwards=d,O.rendering=null,O.renderingStartTime=0,O.last=M,O.tail=A,O.tailMode=L)}function sb(h,d,A){var M=d.pendingProps,L=M.revealOrder,O=M.tail;if(Ns(h,d,M.children,A),M=fs.current,(M&2)!==0)M=M&1|2,d.flags|=128;else{if(h!==null&&(h.flags&128)!==0)t:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&ib(h,A,d);else if(h.tag===19)ib(h,A,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break t;for(;h.sibling===null;){if(h.return===null||h.return===d)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}M&=1}switch(R(fs,M),L){case"forwards":for(A=d.child,L=null;A!==null;)h=A.alternate,h!==null&&co(h)===null&&(L=A),A=A.sibling;A=L,A===null?(L=d.child,d.child=null):(L=A.sibling,A.sibling=null),Hy(d,!1,L,A,O);break;case"backwards":for(A=null,L=d.child,d.child=null;L!==null;){if(h=L.alternate,h!==null&&co(h)===null){d.child=L;break}h=L.sibling,L.sibling=A,A=L,L=h}Hy(d,!0,A,null,O);break;case"together":Hy(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Pl(h,d,A){if(h!==null&&(d.dependencies=h.dependencies),xa|=d.lanes,(A&d.childLanes)===0)if(h!==null){if(xp(h,d,A,!1),(A&d.childLanes)===0)return null}else return null;if(h!==null&&d.child!==h.child)throw Error(i(153));if(d.child!==null){for(h=d.child,A=za(h,h.pendingProps),d.child=A,A.return=d;h.sibling!==null;)h=h.sibling,A=A.sibling=za(h,h.pendingProps),A.return=d;A.sibling=null}return d.child}function zy(h,d){return(h.lanes&d)!==0?!0:(h=h.dependencies,!!(h!==null&&bp(h)))}function G4(h,d,A){switch(d.tag){case 3:lt(d,d.stateNode.containerInfo),Fc(d,gi,h.memoizedState.cache),we();break;case 27:case 5:Bt(d);break;case 4:lt(d,d.stateNode.containerInfo);break;case 10:Fc(d,d.type,d.memoizedProps.value);break;case 13:var M=d.memoizedState;if(M!==null)return M.dehydrated!==null?(Ir(d),d.flags|=128,null):(A&d.child.childLanes)!==0?nb(h,d,A):(Ir(d),h=Pl(h,d,A),h!==null?h.sibling:null);Ir(d);break;case 19:var L=(h.flags&128)!==0;if(M=(A&d.childLanes)!==0,M||(xp(h,d,A,!1),M=(A&d.childLanes)!==0),L){if(M)return sb(h,d,A);d.flags|=128}if(L=d.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),R(fs,fs.current),M)break;return null;case 22:case 23:return d.lanes=0,Jx(h,d,A);case 24:Fc(d,gi,h.memoizedState.cache)}return Pl(h,d,A)}function rb(h,d,A){if(h!==null)if(h.memoizedProps!==d.pendingProps)li=!0;else{if(!zy(h,A)&&(d.flags&128)===0)return li=!1,G4(h,d,A);li=(h.flags&131072)!==0}else li=!1,Dn&&(d.flags&1048576)!==0&&at(d,zf,d.index);switch(d.lanes=0,d.tag){case 16:t:{h=d.pendingProps;var M=d.elementType,L=M._init;if(M=L(M._payload),d.type=M,typeof M=="function")Np(M)?(h=Ul(M,h),d.tag=1,d=tb(null,d,M,h,A)):(d.tag=0,d=m0(null,d,M,h,A));else{if(M!=null){if(L=M.$$typeof,L===Gp){d.tag=11,d=p0(null,d,M,h,A);break t}else if(L===I0){d.tag=14,d=Wx(null,d,M,h,A);break t}}throw d=a(M)||M,Error(i(306,d,""))}}return d;case 0:return m0(h,d,d.type,d.pendingProps,A);case 1:return M=d.type,L=Ul(M,d.pendingProps),tb(h,d,M,L,A);case 3:t:{if(lt(d,d.stateNode.containerInfo),h===null)throw Error(i(387));var O=d.pendingProps;L=d.memoizedState,M=L.element,_e(h,d),Gn(d,O,null,A);var W=d.memoizedState;if(O=W.cache,Fc(d,gi,O),O!==L.cache&&ku(d,[gi],A,!0),He(),O=W.element,Hs&&L.isDehydrated)if(L={element:O,isDehydrated:!1,cache:W.cache},d.updateQueue.baseState=L,d.memoizedState=L,d.flags&256){d=eb(h,d,O,A);break t}else if(O!==M){M=_t(Error(i(424)),d),se(M),d=eb(h,d,O,A);break t}else for(Hs&&(Gs=Pb(d.stateNode.containerInfo),zs=d,Dn=!0,Xa=null,Ss=!0),A=ol(d,null,O,A),d.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(we(),O===M){d=Pl(h,d,A);break t}Ns(h,d,O,A)}d=d.child}return d;case 26:if(fa)return yp(h,d),h===null?(A=T2(d.type,null,d.pendingProps,null))?d.memoizedState=A:Dn||(d.stateNode=q0(d.type,d.pendingProps,rl.current,d)):d.memoizedState=T2(d.type,h.memoizedProps,d.pendingProps,h.memoizedState),null;case 27:if(ai)return Bt(d),h===null&&ai&&Dn&&(M=d.stateNode=yo(d.type,d.pendingProps,rl.current,hs.current,!1),zs=d,Ss=!0,Gs=V0(M)),M=d.pendingProps.children,h!==null||Dn?Ns(h,d,M,A):d.child=ou(d,null,M,A),yp(h,d),d.child;case 5:return h===null&&Dn&&(X0(d.type,d.pendingProps,hs.current),(L=M=Gs)&&(M=Y4(M,d.type,d.pendingProps,Ss),M!==null?(d.stateNode=M,zs=d,Gs=V0(M),Ss=!1,L=!0):L=!1),L||Wt(d)),Bt(d),L=d.type,O=d.pendingProps,W=h!==null?h.memoizedProps:null,M=O.children,en(L,O)?M=null:W!==null&&en(L,W)&&(d.flags|=32),d.memoizedState!==null&&(L=ho(h,d,Zi,null,null,A),Ar?vo._currentValue=L:vo._currentValue2=L),yp(h,d),Ns(h,d,M,A),d.child;case 6:return h===null&&Dn&&(Qb(d.pendingProps,hs.current),(h=A=Gs)&&(A=E2(A,d.pendingProps,Ss),A!==null?(d.stateNode=A,zs=d,Gs=null,h=!0):h=!1),h||Wt(d)),null;case 13:return nb(h,d,A);case 4:return lt(d,d.stateNode.containerInfo),M=d.pendingProps,h===null?d.child=ou(d,null,M,A):Ns(h,d,M,A),d.child;case 11:return p0(h,d,d.type,d.pendingProps,A);case 7:return Ns(h,d,d.pendingProps,A),d.child;case 8:return Ns(h,d,d.pendingProps.children,A),d.child;case 12:return Ns(h,d,d.pendingProps.children,A),d.child;case 10:return M=d.pendingProps,Fc(d,d.type,M.value),Ns(h,d,M.children,A),d.child;case 9:return L=d.type._context,M=d.pendingProps.children,Hc(d),L=Is(L),M=M(L),d.flags|=1,Ns(h,d,M,A),d.child;case 14:return Wx(h,d,d.type,d.pendingProps,A);case 15:return Kx(h,d,d.type,d.pendingProps,A);case 19:return sb(h,d,A);case 22:return Jx(h,d,A);case 24:return Hc(d),M=Is(gi),h===null?(L=ky(),L===null&&(L=qn,O=zc(),L.pooledCache=O,O.refCount++,O!==null&&(L.pooledCacheLanes|=A),L=O),d.memoizedState={parent:M,cache:L},Jt(d),Fc(d,gi,L)):((h.lanes&A)!==0&&(_e(h,d),Gn(d,null,null,A),He()),L=h.memoizedState,O=d.memoizedState,L.parent!==M?(L={parent:M,cache:M},d.memoizedState=L,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=L),Fc(d,gi,M)):(M=O.cache,Fc(d,gi,M),M!==L.cache&&ku(d,[gi],A,!0))),Ns(h,d,d.pendingProps.children,A),d.child;case 29:throw d.pendingProps}throw Error(i(156,d.tag))}function Fc(h,d,A){Ar?(R(nc,d._currentValue),d._currentValue=A):(R(nc,d._currentValue2),d._currentValue2=A)}function Fl(h){var d=nc.current;Ar?h._currentValue=d:h._currentValue2=d,S(nc)}function Ap(h,d,A){for(;h!==null;){var M=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,M!==null&&(M.childLanes|=d)):M!==null&&(M.childLanes&d)!==d&&(M.childLanes|=d),h===A)break;h=h.return}}function ku(h,d,A,M){var L=h.child;for(L!==null&&(L.return=h);L!==null;){var O=L.dependencies;if(O!==null){var W=L.child;O=O.firstContext;t:for(;O!==null;){var rt=O;O=L;for(var At=0;At<d.length;At++)if(rt.context===d[At]){O.lanes|=A,rt=O.alternate,rt!==null&&(rt.lanes|=A),Ap(O.return,A,h),M||(W=null);break t}O=rt.next}}else if(L.tag===18){if(W=L.return,W===null)throw Error(i(341));W.lanes|=A,O=W.alternate,O!==null&&(O.lanes|=A),Ap(W,A,h),W=null}else W=L.child;if(W!==null)W.return=L;else for(W=L;W!==null;){if(W===h){W=null;break}if(L=W.sibling,L!==null){L.return=W.return,W=L;break}W=W.return}L=W}}function xp(h,d,A,M){h=null;for(var L=d,O=!1;L!==null;){if(!O){if((L.flags&524288)!==0)O=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var W=L.alternate;if(W===null)throw Error(i(387));if(W=W.memoizedProps,W!==null){var rt=L.type;Vr(L.pendingProps.value,W.value)||(h!==null?h.push(rt):h=[rt])}}else if(L===Zu.current){if(W=L.alternate,W===null)throw Error(i(387));W.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(h!==null?h.push(vo):h=[vo])}L=L.return}h!==null&&ku(d,h,A,M),d.flags|=262144}function bp(h){for(h=h.firstContext;h!==null;){var d=h.context;if(!Vr(Ar?d._currentValue:d._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function Hc(h){So=h,ya=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Is(h){return Gy(So,h)}function Sp(h,d){return So===null&&Hc(h),Gy(h,d)}function Gy(h,d){var A=Ar?d._currentValue:d._currentValue2;if(d={context:d,memoizedValue:A,next:null},ya===null){if(h===null)throw Error(i(308));ya=d,h.dependencies={lanes:0,firstContext:d},h.flags|=524288}else ya=ya.next=d;return A}function zc(){return{controller:new jf,data:new Map,refCount:0}}function Ep(h){h.refCount--,h.refCount===0&&eS(nS,function(){h.controller.abort()})}function ky(){var h=cl.current;return h!==null?h:qn.pooledCache}function v0(h,d){d===null?R(cl,cl.current):R(cl,d.pool)}function Vy(){var h=ky();return h===null?null:{parent:Ar?gi._currentValue:gi._currentValue2,pool:h}}function Ur(h){h.flags|=4}function Af(h,d){if(h!==null&&h.child===d.child)return!1;if((d.flags&16)!==0)return!0;for(h=d.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function Vu(h,d,A,M){if(us)for(A=d.child;A!==null;){if(A.tag===5||A.tag===6)Vp(h,A.stateNode);else if(!(A.tag===4||ai&&A.tag===27)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===d)break;for(;A.sibling===null;){if(A.return===null||A.return===d)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else if(Va)for(var L=d.child;L!==null;){if(L.tag===5){var O=L.stateNode;A&&M&&(O=A2(O,L.type,L.memoizedProps)),Vp(h,O)}else if(L.tag===6)O=L.stateNode,A&&M&&(O=x2(O,L.memoizedProps)),Vp(h,O);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)O=L.child,O!==null&&(O.return=L),Vu(h,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===d)break;for(;L.sibling===null;){if(L.return===null||L.return===d)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function ab(h,d,A,M){if(Va)for(var L=d.child;L!==null;){if(L.tag===5){var O=L.stateNode;A&&M&&(O=A2(O,L.type,L.memoizedProps)),_2(h,O)}else if(L.tag===6)O=L.stateNode,A&&M&&(O=x2(O,L.memoizedProps)),_2(h,O);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)O=L.child,O!==null&&(O.return=L),ab(h,L,!(L.memoizedProps!==null&&L.memoizedProps.mode==="manual"),!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===d)break;for(;L.sibling===null;){if(L.return===null||L.return===d)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function Mp(h,d){if(Va&&Af(h,d)){h=d.stateNode;var A=h.containerInfo,M=Qp();ab(M,d,!1,!1),h.pendingChildren=M,Ur(d),z0(A,M)}}function y0(h,d,A,M){if(us)h.memoizedProps!==M&&Ur(d);else if(Va){var L=h.stateNode,O=h.memoizedProps;if((h=Af(h,d))||O!==M){var W=hs.current;O=Pf(L,A,O,M,!h,null),O===L?d.stateNode=L:(Wl(O,A,M,W)&&Ur(d),d.stateNode=O,h?Vu(O,d,!1,!1):Ur(d))}else d.stateNode=L}}function _0(h,d,A){if(h2(d,A)){if(h.flags|=16777216,!F0(d,A))if(jc())h.flags|=8192;else throw su=$p,Zp}else h.flags&=-16777217}function A0(h,d){if(qb(d)){if(h.flags|=16777216,!qu(d))if(jc())h.flags|=8192;else throw su=$p,Zp}else h.flags&=-16777217}function xf(h,d){d!==null&&(h.flags|=4),h.flags&16384&&(d=h.tag!==22?U():536870912,h.lanes|=d,fl|=d)}function bf(h,d){if(!Dn)switch(h.tailMode){case"hidden":d=h.tail;for(var A=null;d!==null;)d.alternate!==null&&(A=d),d=d.sibling;A===null?h.tail=null:A.sibling=null;break;case"collapsed":A=h.tail;for(var M=null;A!==null;)A.alternate!==null&&(M=A),A=A.sibling;M===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:M.sibling=null}}function Ti(h){var d=h.alternate!==null&&h.alternate.child===h.child,A=0,M=0;if(d)for(var L=h.child;L!==null;)A|=L.lanes|L.childLanes,M|=L.subtreeFlags&31457280,M|=L.flags&31457280,L.return=h,L=L.sibling;else for(L=h.child;L!==null;)A|=L.lanes|L.childLanes,M|=L.subtreeFlags,M|=L.flags,L.return=h,L=L.sibling;return h.subtreeFlags|=M,h.childLanes=A,d}function ob(h,d,A){var M=d.pendingProps;switch(Et(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(d),null;case 1:return Ti(d),null;case 3:return A=d.stateNode,M=null,h!==null&&(M=h.memoizedState.cache),d.memoizedState.cache!==M&&(d.flags|=2048),Fl(gi),wt(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(h===null||h.child===null)&&(Ye(d)?Ur(d):h===null||h.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Xa!==null&&(Bp(Xa),Xa=null))),Mp(h,d),Ti(d),null;case 26:if(fa){A=d.type;var L=d.memoizedState;return h===null?(Ur(d),L!==null?(Ti(d),A0(d,L)):(Ti(d),_0(d,A,M))):L?L!==h.memoizedState?(Ur(d),Ti(d),A0(d,L)):(Ti(d),d.flags&=-16777217):(us?h.memoizedProps!==M&&Ur(d):y0(h,d,A,M),Ti(d),_0(d,A,M)),null}case 27:if(ai){if(Ut(d),A=rl.current,L=d.type,h!==null&&d.stateNode!=null)us?h.memoizedProps!==M&&Ur(d):y0(h,d,L,M);else{if(!M){if(d.stateNode===null)throw Error(i(166));return Ti(d),null}h=hs.current,Ye(d)?ve(d,h):(h=yo(L,M,A,h,!0),d.stateNode=h,Ur(d))}return Ti(d),null}case 5:if(Ut(d),A=d.type,h!==null&&d.stateNode!=null)y0(h,d,A,M);else{if(!M){if(d.stateNode===null)throw Error(i(166));return Ti(d),null}h=hs.current,Ye(d)?ve(d,h):(L=u2(A,M,rl.current,h,d),Vu(L,d,!1,!1),d.stateNode=L,Wl(L,A,M,h)&&Ur(d))}return Ti(d),_0(d,d.type,d.pendingProps),null;case 6:if(h&&d.stateNode!=null)A=h.memoizedProps,us?A!==M&&Ur(d):Va&&(A!==M?(d.stateNode=Zn(M,rl.current,hs.current,d),Ur(d)):d.stateNode=h.stateNode);else{if(typeof M!="string"&&d.stateNode===null)throw Error(i(166));if(h=rl.current,A=hs.current,Ye(d)){if(!Hs)throw Error(i(176));if(h=d.stateNode,A=d.memoizedProps,M=null,L=zs,L!==null)switch(L.tag){case 27:case 5:M=L.memoizedProps}M2(h,A,d,M)||Wt(d)}else d.stateNode=Zn(M,h,A,d)}return Ti(d),null;case 13:if(M=d.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(L=Ye(d),M!==null&&M.dehydrated!==null){if(h===null){if(!L)throw Error(i(318));if(!Hs)throw Error(i(344));if(L=d.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(i(317));Gb(L,d)}else we(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ti(d),L=!1}else Xa!==null&&(Bp(Xa),Xa=null),L=!0;if(!L)return d.flags&256?(mr(d),d):(mr(d),null)}if(mr(d),(d.flags&128)!==0)return d.lanes=A,d;if(A=M!==null,h=h!==null&&h.memoizedState!==null,A){M=d.child,L=null,M.alternate!==null&&M.alternate.memoizedState!==null&&M.alternate.memoizedState.cachePool!==null&&(L=M.alternate.memoizedState.cachePool.pool);var O=null;M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(O=M.memoizedState.cachePool.pool),O!==L&&(M.flags|=2048)}return A!==h&&A&&(d.child.flags|=8192),xf(d,d.updateQueue),Ti(d),null;case 4:return wt(),Mp(h,d),h===null&&ki(d.stateNode.containerInfo),Ti(d),null;case 10:return Fl(d.type),Ti(d),null;case 19:if(S(fs),L=d.memoizedState,L===null)return Ti(d),null;if(M=(d.flags&128)!==0,O=L.rendering,O===null)if(M)bf(L,!1);else{if(ci!==0||h!==null&&(h.flags&128)!==0)for(h=d.child;h!==null;){if(O=co(h),O!==null){for(d.flags|=128,bf(L,!1),h=O.updateQueue,d.updateQueue=h,xf(d,h),d.subtreeFlags=0,h=A,A=d.child;A!==null;)Ip(A,h),A=A.sibling;return R(fs,fs.current&1|2),d.child}h=h.sibling}L.tail!==null&&Qa()>Wf&&(d.flags|=128,M=!0,bf(L,!1),d.lanes=4194304)}else{if(!M)if(h=co(O),h!==null){if(d.flags|=128,M=!0,h=h.updateQueue,d.updateQueue=h,xf(d,h),bf(L,!0),L.tail===null&&L.tailMode==="hidden"&&!O.alternate&&!Dn)return Ti(d),null}else 2*Qa()-L.renderingStartTime>Wf&&A!==536870912&&(d.flags|=128,M=!0,bf(L,!1),d.lanes=4194304);L.isBackwards?(O.sibling=d.child,d.child=O):(h=L.last,h!==null?h.sibling=O:d.child=O,L.last=O)}return L.tail!==null?(d=L.tail,L.rendering=d,L.tail=d.sibling,L.renderingStartTime=Qa(),d.sibling=null,h=fs.current,R(fs,M?h&1|2:h&1),d):(Ti(d),null);case 22:case 23:return mr(d),$s(),M=d.memoizedState!==null,h!==null?h.memoizedState!==null!==M&&(d.flags|=8192):M&&(d.flags|=8192),M?(A&536870912)!==0&&(d.flags&128)===0&&(Ti(d),d.subtreeFlags&6&&(d.flags|=8192)):Ti(d),A=d.updateQueue,A!==null&&xf(d,A.retryQueue),A=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(A=h.memoizedState.cachePool.pool),M=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(M=d.memoizedState.cachePool.pool),M!==A&&(d.flags|=2048),h!==null&&S(cl),null;case 24:return A=null,h!==null&&(A=h.memoizedState.cache),d.memoizedState.cache!==A&&(d.flags|=2048),Fl(gi),Ti(d),null;case 25:return null}throw Error(i(156,d.tag))}function k4(h,d){switch(Et(d),d.tag){case 1:return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return Fl(gi),wt(),h=d.flags,(h&65536)!==0&&(h&128)===0?(d.flags=h&-65537|128,d):null;case 26:case 27:case 5:return Ut(d),null;case 13:if(mr(d),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(i(340));we()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return S(fs),null;case 4:return wt(),null;case 10:return Fl(d.type),null;case 22:case 23:return mr(d),$s(),h!==null&&S(cl),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 24:return Fl(gi),null;case 25:return null;default:return null}}function lb(h,d){switch(Et(d),d.tag){case 3:Fl(gi),wt();break;case 26:case 27:case 5:Ut(d);break;case 4:wt();break;case 13:mr(d);break;case 19:S(fs);break;case 10:Fl(d.type);break;case 22:case 23:mr(d),$s(),h!==null&&S(cl);break;case 24:Fl(gi)}}function Tp(h,d){try{var A=d.updateQueue,M=A!==null?A.lastEffect:null;if(M!==null){var L=M.next;A=L;do{if((A.tag&h)===h){M=void 0;var O=A.create,W=A.inst;M=O(),W.destroy=M}A=A.next}while(A!==L)}}catch(rt){Xn(d,d.return,rt)}}function Gc(h,d,A){try{var M=d.updateQueue,L=M!==null?M.lastEffect:null;if(L!==null){var O=L.next;M=O;do{if((M.tag&h)===h){var W=M.inst,rt=W.destroy;if(rt!==void 0){W.destroy=void 0,L=d;var At=A;try{rt()}catch(Ht){Xn(L,At,Ht)}}}M=M.next}while(M!==O)}}catch(Ht){Xn(d,d.return,Ht)}}function cb(h){var d=h.updateQueue;if(d!==null){var A=h.stateNode;try{ce(d,A)}catch(M){Xn(h,h.return,M)}}}function Pr(h,d,A){A.props=Ul(h.type,h.memoizedProps),A.state=h.memoizedState;try{A.componentWillUnmount()}catch(M){Xn(h,d,M)}}function po(h,d){try{var A=h.ref;if(A!==null){var M=h.stateNode;switch(h.tag){case 26:case 27:case 5:var L=Nf(M);break;default:L=M}typeof A=="function"?h.refCleanup=A(L):A.current=L}}catch(O){Xn(h,d,O)}}function Fr(h,d){var A=h.ref,M=h.refCleanup;if(A!==null)if(typeof M=="function")try{M()}catch(L){Xn(h,d,L)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof A=="function")try{A(null)}catch(L){Xn(h,d,L)}else A.current=null}function Qy(h){var d=h.type,A=h.memoizedProps,M=h.stateNode;try{j4(M,d,A,h)}catch(L){Xn(h,h.return,L)}}function Xy(h,d,A){try{Tb(h.stateNode,h.type,A,d,h)}catch(M){Xn(h,h.return,M)}}function jy(h){return h.tag===5||h.tag===3||(fa?h.tag===26:!1)||(ai?h.tag===27:!1)||h.tag===4}function Cp(h){t:for(;;){for(;h.sibling===null;){if(h.return===null||jy(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&(!ai||h.tag!==27)&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue t;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function qy(h,d,A){var M=h.tag;if(M===5||M===6)h=h.stateNode,d?wb(A,h,d):g2(A,h);else if(!(M===4||ai&&M===27)&&(h=h.child,h!==null))for(qy(h,d,A),h=h.sibling;h!==null;)qy(h,d,A),h=h.sibling}function Hl(h,d,A){var M=h.tag;if(M===5||M===6)h=h.stateNode,d?Cb(A,h,d):Eb(A,h);else if(!(M===4||ai&&M===27)&&(h=h.child,h!==null))for(Hl(h,d,A),h=h.sibling;h!==null;)Hl(h,d,A),h=h.sibling}function x0(h,d,A){h=h.containerInfo;try{Ff(h,A)}catch(M){Xn(d,d.return,M)}}function wp(h,d){for(U0(h.containerInfo),We=d;We!==null;)if(h=We,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,We=d;else for(;We!==null;){h=We;var A=h.alternate;switch(d=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&A!==null){d=void 0;var M=h,L=A.memoizedProps;A=A.memoizedState;var O=M.stateNode;try{var W=Ul(M.type,L,M.elementType===M.type);d=O.getSnapshotBeforeUpdate(W,A),O.__reactInternalSnapshotBeforeUpdate=d}catch(rt){Xn(M,M.return,rt)}}break;case 3:(d&1024)!==0&&us&&Ob(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(i(163))}if(d=h.sibling,d!==null){d.return=h.return,We=d;break}We=h.return}return W=mn,mn=!1,W}function b0(h,d,A){var M=A.flags;switch(A.tag){case 0:case 11:case 15:Gl(h,A),M&4&&Tp(5,A);break;case 1:if(Gl(h,A),M&4)if(h=A.stateNode,d===null)try{h.componentDidMount()}catch(rt){Xn(A,A.return,rt)}else{var L=Ul(A.type,d.memoizedProps);d=d.memoizedState;try{h.componentDidUpdate(L,d,h.__reactInternalSnapshotBeforeUpdate)}catch(rt){Xn(A,A.return,rt)}}M&64&&cb(A),M&512&&po(A,A.return);break;case 3:if(Gl(h,A),M&64&&(M=A.updateQueue,M!==null)){if(h=null,A.child!==null)switch(A.child.tag){case 27:case 5:h=Nf(A.child.stateNode);break;case 1:h=A.child.stateNode}try{ce(M,h)}catch(rt){Xn(A,A.return,rt)}}break;case 26:if(fa){Gl(h,A),M&512&&po(A,A.return);break}case 27:case 5:Gl(h,A),d===null&&M&4&&Qy(A),M&512&&po(A,A.return);break;case 12:Gl(h,A);break;case 13:Gl(h,A),M&4&&S0(h,A);break;case 22:if(L=A.memoizedState!==null||ul,!L){d=d!==null&&d.memoizedState!==null||Pi;var O=ul,W=Pi;ul=L,(Pi=d)&&!W?kl(h,A,(A.subtreeFlags&8772)!==0):Gl(h,A),ul=O,Pi=W}M&512&&(A.memoizedProps.mode==="manual"?po(A,A.return):Fr(A,A.return));break;default:Gl(h,A)}}function Yy(h){var d=h.alternate;d!==null&&(h.alternate=null,Yy(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&X4(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Us(h,d,A){for(A=A.child;A!==null;)kc(h,d,A),A=A.sibling}function kc(h,d,A){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(Qi,A)}catch{}switch(A.tag){case 26:if(fa){Pi||Fr(A,d),Us(h,d,A),A.memoizedState?ju(A.memoizedState):A.stateNode&&Hf(A.stateNode);break}case 27:if(ai){Pi||Fr(A,d);var M=Ie,L=an;Ie=A.stateNode,Us(h,d,A),eu(A.stateNode),Ie=M,an=L;break}case 5:Pi||Fr(A,d);case 6:if(us){if(M=Ie,L=an,Ie=null,Us(h,d,A),Ie=M,an=L,Ie!==null)if(an)try{Rb(Ie,A.stateNode)}catch(O){Xn(A,d,O)}else try{v2(Ie,A.stateNode)}catch(O){Xn(A,d,O)}}else Us(h,d,A);break;case 18:us&&Ie!==null&&(an?Xp(Ie,A.stateNode):Vb(Ie,A.stateNode));break;case 4:us?(M=Ie,L=an,Ie=A.stateNode.containerInfo,an=!0,Us(h,d,A),Ie=M,an=L):(Va&&x0(A.stateNode,A,Qp()),Us(h,d,A));break;case 0:case 11:case 14:case 15:Pi||Gc(2,A,d),Pi||Gc(4,A,d),Us(h,d,A);break;case 1:Pi||(Fr(A,d),M=A.stateNode,typeof M.componentWillUnmount=="function"&&Pr(A,d,M)),Us(h,d,A);break;case 21:Us(h,d,A);break;case 22:Pi||Fr(A,d),Pi=(M=Pi)||A.memoizedState!==null,Us(h,d,A),Pi=M;break;default:Us(h,d,A)}}function S0(h,d){if(Hs&&d.memoizedState===null&&(h=d.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{K4(h)}catch(A){Xn(d,d.return,A)}}function ub(h){switch(h.tag){case 13:case 19:var d=h.stateNode;return d===null&&(d=h.stateNode=new jn),d;case 22:return h=h.stateNode,d=h._retryCache,d===null&&(d=h._retryCache=new jn),d;default:throw Error(i(435,h.tag))}}function zl(h,d){var A=ub(h);d.forEach(function(M){var L=Wc.bind(null,h,M);A.has(M)||(A.add(M),M.then(L,L))})}function yr(h,d){var A=d.deletions;if(A!==null)for(var M=0;M<A.length;M++){var L=A[M],O=h,W=d;if(us){var rt=W;t:for(;rt!==null;){switch(rt.tag){case 27:case 5:Ie=rt.stateNode,an=!1;break t;case 3:Ie=rt.stateNode.containerInfo,an=!0;break t;case 4:Ie=rt.stateNode.containerInfo,an=!0;break t}rt=rt.return}if(Ie===null)throw Error(i(160));kc(O,W,L),Ie=null,an=!1}else kc(O,W,L);O=L.alternate,O!==null&&(O.return=null),L.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)Wy(d,h),d=d.sibling}function Wy(h,d){var A=h.alternate,M=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:yr(d,h),Hr(h),M&4&&(Gc(3,h,h.return),Tp(3,h),Gc(5,h,h.return));break;case 1:yr(d,h),Hr(h),M&512&&(Pi||A===null||Fr(A,A.return)),M&64&&ul&&(h=h.updateQueue,h!==null&&(M=h.callbacks,M!==null&&(A=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=A===null?M:A.concat(M))));break;case 26:if(fa){var L=Di;yr(d,h),Hr(h),M&512&&(Pi||A===null||Fr(A,A.return)),M&4&&(M=A!==null?A.memoizedState:null,d=h.memoizedState,A===null?d===null?h.stateNode===null?h.stateNode=qp(L,h.type,h.memoizedProps,h):Yp(L,h.type,h.stateNode):h.stateNode=Xb(L,d,h.memoizedProps):M!==d?(M===null?A.stateNode!==null&&Hf(A.stateNode):ju(M),d===null?Yp(L,h.type,h.stateNode):Xb(L,d,h.memoizedProps)):d===null&&h.stateNode!==null&&Xy(h,h.memoizedProps,A.memoizedProps));break}case 27:if(ai&&M&4&&h.alternate===null){L=h.stateNode;var O=h.memoizedProps;try{tu(L),Wb(h.type,O,L,h)}catch($t){Xn(h,h.return,$t)}}case 5:if(yr(d,h),Hr(h),M&512&&(Pi||A===null||Fr(A,A.return)),us){if(h.flags&32){d=h.stateNode;try{y2(d)}catch($t){Xn(h,h.return,$t)}}M&4&&h.stateNode!=null&&(d=h.memoizedProps,Xy(h,d,A!==null?A.memoizedProps:d)),M&1024&&(L2=!0)}break;case 6:if(yr(d,h),Hr(h),M&4&&us){if(h.stateNode===null)throw Error(i(162));M=h.memoizedProps,A=A!==null?A.memoizedProps:M,d=h.stateNode;try{Mb(d,A,M)}catch($t){Xn(h,h.return,$t)}}break;case 3:if(fa?(jb(),L=Di,Di=j0(d.containerInfo),yr(d,h),Di=L):yr(d,h),Hr(h),M&4){if(us&&Hs&&A!==null&&A.memoizedState.isDehydrated)try{W4(d.containerInfo)}catch($t){Xn(h,h.return,$t)}if(Va){M=d.containerInfo,A=d.pendingChildren;try{Ff(M,A)}catch($t){Xn(h,h.return,$t)}}}L2&&(L2=!1,hb(h));break;case 4:fa?(A=Di,Di=j0(h.stateNode.containerInfo),yr(d,h),Hr(h),Di=A):(yr(d,h),Hr(h)),M&4&&Va&&x0(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:yr(d,h),Hr(h);break;case 13:yr(d,h),Hr(h),h.child.flags&8192&&h.memoizedState!==null!=(A!==null&&A.memoizedState!==null)&&(Er=Qa()),M&4&&(M=h.updateQueue,M!==null&&(h.updateQueue=null,zl(h,M)));break;case 22:M&512&&(Pi||A===null||Fr(A,A.return)),L=h.memoizedState!==null;var W=A!==null&&A.memoizedState!==null,rt=ul,At=Pi;if(ul=rt||L,Pi=At||W,yr(d,h),Pi=At,ul=rt,Hr(h),d=h.stateNode,d._current=h,d._visibility&=-3,d._visibility|=d._pendingVisibility&2,M&8192&&(d._visibility=L?d._visibility&-2:d._visibility|1,L&&(d=ul||Pi,A===null||W||d||Sf(h)),us&&(h.memoizedProps===null||h.memoizedProps.mode!=="manual"))){t:if(A=null,us)for(d=h;;){if(d.tag===5||fa&&d.tag===26||ai&&d.tag===27){if(A===null){W=A=d;try{O=W.stateNode,L?Lb(O):Bb(W.stateNode,W.memoizedProps)}catch($t){Xn(W,W.return,$t)}}}else if(d.tag===6){if(A===null){W=d;try{var Ht=W.stateNode;L?Db(Ht):q4(Ht,W.memoizedProps)}catch($t){Xn(W,W.return,$t)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===h)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break t;for(;d.sibling===null;){if(d.return===null||d.return===h)break t;A===d&&(A=null),d=d.return}A===d&&(A=null),d.sibling.return=d.return,d=d.sibling}}M&4&&(M=h.updateQueue,M!==null&&(A=M.retryQueue,A!==null&&(M.retryQueue=null,zl(h,A))));break;case 19:yr(d,h),Hr(h),M&4&&(M=h.updateQueue,M!==null&&(h.updateQueue=null,zl(h,M)));break;case 21:break;default:yr(d,h),Hr(h)}}function Hr(h){var d=h.flags;if(d&2){try{if(us&&(!ai||h.tag!==27)){t:{for(var A=h.return;A!==null;){if(jy(A)){var M=A;break t}A=A.return}throw Error(i(160))}switch(M.tag){case 27:if(ai){var L=M.stateNode,O=Cp(h);Hl(h,O,L);break}case 5:var W=M.stateNode;M.flags&32&&(y2(W),M.flags&=-33);var rt=Cp(h);Hl(h,rt,W);break;case 3:case 4:var At=M.stateNode.containerInfo,Ht=Cp(h);qy(h,Ht,At);break;default:throw Error(i(161))}}}catch($t){Xn(h,h.return,$t)}h.flags&=-3}d&4096&&(h.flags&=-4097)}function hb(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var d=h;hb(d),d.tag===5&&d.flags&1024&&H0(d.stateNode),h=h.sibling}}function Gl(h,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)b0(h,d.alternate,d),d=d.sibling}function Sf(h){for(h=h.child;h!==null;){var d=h;switch(d.tag){case 0:case 11:case 14:case 15:Gc(4,d,d.return),Sf(d);break;case 1:Fr(d,d.return);var A=d.stateNode;typeof A.componentWillUnmount=="function"&&Pr(d,d.return,A),Sf(d);break;case 26:case 27:case 5:Fr(d,d.return),Sf(d);break;case 22:Fr(d,d.return),d.memoizedState===null&&Sf(d);break;default:Sf(d)}h=h.sibling}}function kl(h,d,A){for(A=A&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var M=d.alternate,L=h,O=d,W=O.flags;switch(O.tag){case 0:case 11:case 15:kl(L,O,A),Tp(4,O);break;case 1:if(kl(L,O,A),M=O,L=M.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(Ht){Xn(M,M.return,Ht)}if(M=O,L=M.updateQueue,L!==null){var rt=M.stateNode;try{var At=L.shared.hiddenCallbacks;if(At!==null)for(L.shared.hiddenCallbacks=null,L=0;L<At.length;L++)mt(At[L],rt)}catch(Ht){Xn(M,M.return,Ht)}}A&&W&64&&cb(O),po(O,O.return);break;case 26:case 27:case 5:kl(L,O,A),A&&M===null&&W&4&&Qy(O),po(O,O.return);break;case 12:kl(L,O,A);break;case 13:kl(L,O,A),A&&W&4&&S0(L,O);break;case 22:O.memoizedState===null&&kl(L,O,A),po(O,O.return);break;default:kl(L,O,A)}d=d.sibling}}function E0(h,d){var A=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(A=h.memoizedState.cachePool.pool),h=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(h=d.memoizedState.cachePool.pool),h!==A&&(h!=null&&h.refCount++,A!=null&&Ep(A))}function Rp(h,d){h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Ep(h))}function As(h,d,A,M){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Ky(h,d,A,M),d=d.sibling}function Ky(h,d,A,M){var L=d.flags;switch(d.tag){case 0:case 11:case 15:As(h,d,A,M),L&2048&&Tp(9,d);break;case 3:As(h,d,A,M),L&2048&&(h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Ep(h)));break;case 12:if(L&2048){As(h,d,A,M),h=d.stateNode;try{var O=d.memoizedProps,W=O.id,rt=O.onPostCommit;typeof rt=="function"&&rt(W,d.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(At){Xn(d,d.return,At)}}else As(h,d,A,M);break;case 23:break;case 22:O=d.stateNode,d.memoizedState!==null?O._visibility&4?As(h,d,A,M):tr(h,d):O._visibility&4?As(h,d,A,M):(O._visibility|=4,Ps(h,d,A,M,(d.subtreeFlags&10256)!==0)),L&2048&&E0(d.alternate,d);break;case 24:As(h,d,A,M),L&2048&&Rp(d.alternate,d);break;default:As(h,d,A,M)}}function Ps(h,d,A,M,L){for(L=L&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var O=h,W=d,rt=A,At=M,Ht=W.flags;switch(W.tag){case 0:case 11:case 15:Ps(O,W,rt,At,L),Tp(8,W);break;case 23:break;case 22:var $t=W.stateNode;W.memoizedState!==null?$t._visibility&4?Ps(O,W,rt,At,L):tr(O,W):($t._visibility|=4,Ps(O,W,rt,At,L)),L&&Ht&2048&&E0(W.alternate,W);break;case 24:Ps(O,W,rt,At,L),L&&Ht&2048&&Rp(W.alternate,W);break;default:Ps(O,W,rt,At,L)}d=d.sibling}}function tr(h,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var A=h,M=d,L=M.flags;switch(M.tag){case 22:tr(A,M),L&2048&&E0(M.alternate,M);break;case 24:tr(A,M),L&2048&&Rp(M.alternate,M);break;default:tr(A,M)}d=d.sibling}}function Fa(h){if(h.subtreeFlags&_a)for(h=h.child;h!==null;)M0(h),h=h.sibling}function M0(h){switch(h.tag){case 26:Fa(h),h.flags&_a&&(h.memoizedState!==null?Yb(Di,h.memoizedState,h.memoizedProps):xr(h.type,h.memoizedProps));break;case 5:Fa(h),h.flags&_a&&xr(h.type,h.memoizedProps);break;case 3:case 4:if(fa){var d=Di;Di=j0(h.stateNode.containerInfo),Fa(h),Di=d}else Fa(h);break;case 22:h.memoizedState===null&&(d=h.alternate,d!==null&&d.memoizedState!==null?(d=_a,_a=16777216,Fa(h),_a=d):Fa(h));break;default:Fa(h)}}function Lp(h){var d=h.alternate;if(d!==null&&(h=d.child,h!==null)){d.child=null;do d=h.sibling,h.sibling=null,h=d;while(h!==null)}}function Vc(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var A=0;A<d.length;A++){var M=d[A];We=M,Jy(M,h)}Lp(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)T0(h),h=h.sibling}function T0(h){switch(h.tag){case 0:case 11:case 15:Vc(h),h.flags&2048&&Gc(9,h,h.return);break;case 3:Vc(h);break;case 12:Vc(h);break;case 22:var d=h.stateNode;h.memoizedState!==null&&d._visibility&4&&(h.return===null||h.return.tag!==13)?(d._visibility&=-5,Vl(h)):Vc(h);break;default:Vc(h)}}function Vl(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var A=0;A<d.length;A++){var M=d[A];We=M,Jy(M,h)}Lp(h)}for(h=h.child;h!==null;){switch(d=h,d.tag){case 0:case 11:case 15:Gc(8,d,d.return),Vl(d);break;case 22:A=d.stateNode,A._visibility&4&&(A._visibility&=-5,Vl(d));break;default:Vl(d)}h=h.sibling}}function Jy(h,d){for(;We!==null;){var A=We;switch(A.tag){case 0:case 11:case 15:Gc(8,A,d);break;case 23:case 22:if(A.memoizedState!==null&&A.memoizedState.cachePool!==null){var M=A.memoizedState.cachePool.pool;M!=null&&M.refCount++}break;case 24:Ep(A.memoizedState.cache)}if(M=A.child,M!==null)M.return=A,We=M;else t:for(A=h;We!==null;){M=We;var L=M.sibling,O=M.return;if(Yy(M),M===A){We=null;break t}if(L!==null){L.return=O,We=L;break t}We=O}}}function Ef(h){var d=vb(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(i(364));return d}if(h=p2(h),h===null)throw Error(i(362));return h.stateNode.current}function Qc(h,d){var A=h.tag;switch(d.$$typeof){case Yf:if(h.type===d.value)return!0;break;case Ya:t:{for(d=d.value,h=[h,0],A=0;A<h.length;){var M=h[A++],L=M.tag,O=h[A++],W=d[O];if(L!==5&&L!==26&&L!==27||!Uf(M)){for(;W!=null&&Qc(M,W);)O++,W=d[O];if(O===d.length){d=!0;break t}else for(M=M.child;M!==null;)h.push(M,O),M=M.sibling}}d=!1}return d;case xi:if((A===5||A===26||A===27)&&xb(h.stateNode,d.value))return!0;break;case hl:if((A===5||A===6||A===26||A===27)&&(h=Ab(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case Eo:if((A===5||A===26||A===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function Zy(h){switch(h.$$typeof){case Yf:return"<"+(a(h.value)||"Unknown")+">";case Ya:return":has("+(Zy(h)||"")+")";case xi:return'[role="'+h.value+'"]';case hl:return'"'+h.value+'"';case Eo:return'[data-testname="'+h.value+'"]';default:throw Error(i(365))}}function zr(h,d){var A=[];h=[h,0];for(var M=0;M<h.length;){var L=h[M++],O=L.tag,W=h[M++],rt=d[W];if(O!==5&&O!==26&&O!==27||!Uf(L)){for(;rt!=null&&Qc(L,rt);)W++,rt=d[W];if(W===d.length)A.push(L);else for(L=L.child;L!==null;)h.push(L,W),L=L.sibling}}return A}function Dp(h,d){if(!$c)throw Error(i(363));h=Ef(h),h=zr(h,d),d=[],h=Array.from(h);for(var A=0;A<h.length;){var M=h[A++],L=M.tag;if(L===5||L===26||L===27)Uf(M)||d.push(M.stateNode);else for(M=M.child;M!==null;)h.push(M),M=M.sibling}return d}function Gi(){if((Un&2)!==0&&Sn!==0)return Sn&-Sn;if(Qe.T!==null){var h=ma;return h!==0?h:ne()}return yb()}function $y(){ba===0&&(ba=(Sn&536870912)===0||Dn?z():536870912);var h=ga.current;return h!==null&&(h.flags|=32),ba}function xs(h,d,A){(h===qn&&ni===2||h.cancelPendingCommit!==null)&&(Fs(h,0),Gr(h,Sn,ba,!1)),X(h,A),((Un&2)===0||h!==qn)&&(h===qn&&((Un&2)===0&&(ic|=A),ci===4&&Gr(h,Sn,ba,!1)),qt(h))}function Xc(h,d,A){if((Un&6)!==0)throw Error(i(327));var M=!A&&(d&60)===0&&(d&h.expiredLanes)===0||I(h,d),L=M?e2(h,d):w0(h,d,!0),O=M;do{if(L===0){Aa&&!M&&Gr(h,d,0,!1);break}else if(L===6)Gr(h,d,0,!Ka);else{if(A=h.current.alternate,O&&!Mf(A)){L=w0(h,d,!1),O=!1;continue}if(L===2){if(O=d,h.errorRecoveryDisabledLanes&O)var W=0;else W=h.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){d=W;t:{var rt=h;L=oh;var At=Hs&&rt.current.memoizedState.isDehydrated;if(At&&(Fs(rt,W).flags|=256),W=w0(rt,W,!1),W!==2){if(ds&&!At){rt.errorRecoveryDisabledLanes|=O,ic|=O,L=4;break t}O=Fi,Fi=L,O!==null&&Bp(O)}L=W}if(O=!1,L!==2)continue}}if(L===1){Fs(h,0),Gr(h,d,0,!0);break}t:{switch(M=h,L){case 0:case 1:throw Error(i(345));case 4:if((d&4194176)===d){Gr(M,d,ba,!Ka);break t}break;case 2:Fi=null;break;case 3:case 5:break;default:throw Error(i(329))}if(M.finishedWork=A,M.finishedLanes=d,(d&62914560)===d&&(O=Er+300-Qa(),10<O)){if(Gr(M,d,ba,!Ka),N(M,0)!==0)break t;M.timeoutHandle=es(C0.bind(null,M,A,Fi,em,i1,d,ba,ic,fl,Ka,2,-0,0),O);break t}C0(M,A,Fi,em,i1,d,ba,ic,fl,Ka,0,-0,0)}}break}while(!0);qt(h)}function Bp(h){Fi===null?Fi=h:Fi.push.apply(Fi,h)}function C0(h,d,A,M,L,O,W,rt,At,Ht,$t,de,ye){var Ke=d.subtreeFlags;if((Ke&8192||(Ke&16785408)===16785408)&&(f2(),M0(d),d=ns(),d!==null)){h.cancelPendingCommit=d(qc.bind(null,h,A,M,L,W,rt,At,1,de,ye)),Gr(h,O,W,!Ht);return}qc(h,A,M,L,W,rt,At,$t,de,ye)}function Mf(h){for(var d=h;;){var A=d.tag;if((A===0||A===11||A===15)&&d.flags&16384&&(A=d.updateQueue,A!==null&&(A=A.stores,A!==null)))for(var M=0;M<A.length;M++){var L=A[M],O=L.getSnapshot;L=L.value;try{if(!Vr(O(),L))return!1}catch{return!1}}if(A=d.child,d.subtreeFlags&16384&&A!==null)A.return=d,d=A;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Gr(h,d,A,M){d&=~tm,d&=~ic,h.suspendedLanes|=d,h.pingedLanes&=~d,M&&(h.warmLanes|=d),M=h.expirationTimes;for(var L=d;0<L;){var O=31-br(L),W=1<<O;M[O]=-1,L&=~W}A!==0&&it(h,A,d)}function Op(){return(Un&6)===0?($(0),!1):!0}function Tf(){if(ze!==null){if(ni===0)var h=ze.return;else h=ze,ya=So=null,fo(h),ru=null,au=0,h=ze;for(;h!==null;)lb(h.alternate,h),h=h.return;ze=null}}function Fs(h,d){h.finishedWork=null,h.finishedLanes=0;var A=h.timeoutHandle;A!==Jc&&(h.timeoutHandle=Jc,P0(A)),A=h.cancelPendingCommit,A!==null&&(h.cancelPendingCommit=null,A()),Tf(),qn=h,ze=A=za(h.current,null),Sn=d,ni=0,nr=null,Ka=!1,Aa=I(h,d),ds=!1,fl=ba=tm=ic=xa=ci=0,Fi=oh=null,i1=!1,(d&8)!==0&&(d|=d&32);var M=h.entangledLanes;if(M!==0)for(h=h.entanglements,M&=d;0<M;){var L=31-br(M),O=1<<L;d|=h[L],M&=~O}return ir=d,Z(),A}function ca(h,d){ln=null,Qe.H=Ui,d===Qf?(d=qe(),ni=3):d===Zp?(d=qe(),ni=4):ni=d===e1?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,nr=d,ze===null&&(ci=1,vf(h,_t(d,h.current)))}function jc(){var h=ga.current;return h===null?!0:(Sn&4194176)===Sn?oi===null:(Sn&62914560)===Sn||(Sn&536870912)!==0?h===oi:!1}function $o(){var h=Qe.H;return Qe.H=Ui,h===null?Ui:h}function tl(){var h=Qe.A;return Qe.A=qf,h}function Ql(){ci=4,Ka||(Sn&4194176)!==Sn&&ga.current!==null||(Aa=!0),(xa&134217727)===0&&(ic&134217727)===0||qn===null||Gr(qn,Sn,ba,!1)}function w0(h,d,A){var M=Un;Un|=2;var L=$o(),O=tl();(qn!==h||Sn!==d)&&(em=null,Fs(h,d)),d=!1;var W=ci;t:do try{if(ni!==0&&ze!==null){var rt=ze,At=nr;switch(ni){case 8:Tf(),W=6;break t;case 3:case 2:case 6:ga.current===null&&(d=!0);var Ht=ni;if(ni=0,nr=null,Ha(h,rt,At,Ht),A&&Aa){W=0;break t}break;default:Ht=ni,ni=0,nr=null,Ha(h,rt,At,Ht)}}t2(),W=ci;break}catch($t){ca(h,$t)}while(!0);return d&&h.shellSuspendCounter++,ya=So=null,Un=M,Qe.H=L,Qe.A=O,ze===null&&(qn=null,Sn=0,Z()),W}function t2(){for(;ze!==null;)Li(ze)}function e2(h,d){var A=Un;Un|=2;var M=$o(),L=tl();qn!==h||Sn!==d?(em=null,Wf=Qa()+500,Fs(h,d)):Aa=I(h,d);t:do try{if(ni!==0&&ze!==null){d=ze;var O=nr;e:switch(ni){case 1:ni=0,nr=null,Ha(h,d,O,1);break;case 2:if(Qt(O)){ni=0,nr=null,kn(d);break}d=function(){ni===2&&qn===h&&(ni=7),qt(h)},O.then(d,d);break t;case 3:ni=7;break t;case 4:ni=5;break t;case 7:Qt(O)?(ni=0,nr=null,kn(d)):(ni=0,nr=null,Ha(h,d,O,7));break;case 5:var W=null;switch(ze.tag){case 26:W=ze.memoizedState;case 5:case 27:var rt=ze,At=rt.type,Ht=rt.pendingProps;if(W?qu(W):F0(At,Ht)){ni=0,nr=null;var $t=rt.sibling;if($t!==null)ze=$t;else{var de=rt.return;de!==null?(ze=de,ua(de)):ze=null}break e}}ni=0,nr=null,Ha(h,d,O,5);break;case 6:ni=0,nr=null,Ha(h,d,O,6);break;case 8:Tf(),ci=6;break t;default:throw Error(i(462))}}_r();break}catch(ye){ca(h,ye)}while(!0);return ya=So=null,Qe.H=M,Qe.A=L,Un=A,ze!==null?0:(qn=null,Sn=0,Z(),ci)}function _r(){for(;ze!==null&&!Zb();)Li(ze)}function Li(h){var d=rb(h.alternate,h,ir);h.memoizedProps=h.pendingProps,d===null?ua(h):ze=d}function kn(h){var d=h,A=d.alternate;switch(d.tag){case 15:case 0:d=$x(A,d,d.pendingProps,d.type,void 0,Sn);break;case 11:d=$x(A,d,d.pendingProps,d.type.render,d.ref,Sn);break;case 5:fo(d);default:lb(A,d),d=ze=Ip(d,ir),d=rb(A,d,ir)}h.memoizedProps=h.pendingProps,d===null?ua(h):ze=d}function Ha(h,d,A,M){ya=So=null,fo(d),ru=null,au=0;var L=d.return;try{if(z4(h,L,d,A,Sn)){ci=1,vf(h,_t(A,h.current)),ze=null;return}}catch(O){if(L!==null)throw ze=L,O;ci=1,vf(h,_t(A,h.current)),ze=null;return}d.flags&32768?(Dn||M===1?h=!0:Aa||(Sn&536870912)!==0?h=!1:(Ka=h=!0,(M===2||M===3||M===6)&&(M=ga.current,M!==null&&M.tag===13&&(M.flags|=16384))),R0(d,h)):ua(d)}function ua(h){var d=h;do{if((d.flags&32768)!==0){R0(d,Ka);return}h=d.return;var A=ob(d.alternate,d,ir);if(A!==null){ze=A;return}if(d=d.sibling,d!==null){ze=d;return}ze=d=h}while(d!==null);ci===0&&(ci=5)}function R0(h,d){do{var A=k4(h.alternate,h);if(A!==null){A.flags&=32767,ze=A;return}if(A=h.return,A!==null&&(A.flags|=32768,A.subtreeFlags=0,A.deletions=null),!d&&(h=h.sibling,h!==null)){ze=h;return}ze=h=A}while(h!==null);ci=6,ze=null}function qc(h,d,A,M,L,O,W,rt,At,Ht){var $t=Qe.T,de=Kl();try{er(2),Qe.T=null,fb(h,d,A,M,de,L,O,W,rt,At,Ht)}finally{Qe.T=$t,er(de)}}function fb(h,d,A,M,L,O,W,rt){do mo();while(dl!==null);if((Un&6)!==0)throw Error(i(327));var At=h.finishedWork;if(M=h.finishedLanes,At===null)return null;if(h.finishedWork=null,h.finishedLanes=0,At===h.current)throw Error(i(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var Ht=At.lanes|At.childLanes;if(Ht|=xo,ot(h,M,Ht,O,W,rt),h===qn&&(ze=qn=null,Sn=0),(At.subtreeFlags&10256)===0&&(At.flags&10256)===0||Mo||(Mo=!0,hu=Ht,s1=A,jl(J0,function(){return mo(),null})),A=(At.flags&15990)!==0,(At.subtreeFlags&15990)!==0||A?(A=Qe.T,Qe.T=null,O=Kl(),er(2),W=Un,Un|=4,wp(h,At),Wy(At,h),gb(h.containerInfo),h.current=At,b0(h,At.alternate,At),W0(),Un=W,er(O),Qe.T=A):h.current=At,Mo?(Mo=!1,dl=h,lh=M):n2(h,Ht),Ht=h.pendingLanes,Ht===0&&(uu=null),Q(At.stateNode),qt(h),d!==null)for(L=h.onRecoverableError,At=0;At<d.length;At++)Ht=d[At],L(Ht.value,{componentStack:Ht.stack});return(lh&3)!==0&&mo(),Ht=h.pendingLanes,(M&4194218)!==0&&(Ht&42)!==0?h===r1?Kf++:(Kf=0,r1=h):Kf=0,$(0),null}function n2(h,d){(h.pooledCacheLanes&=d)===0&&(d=h.pooledCache,d!=null&&(h.pooledCache=null,Ep(d)))}function mo(){if(dl!==null){var h=dl,d=hu;hu=0;var A=dt(lh),M=32>A?32:A;A=Qe.T;var L=Kl();try{if(er(M),Qe.T=null,dl===null)var O=!1;else{M=s1,s1=null;var W=dl,rt=lh;if(dl=null,lh=0,(Un&6)!==0)throw Error(i(331));var At=Un;if(Un|=4,T0(W.current),Ky(W,W.current,rt,M),Un=At,$(0,!1),kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(Qi,W)}catch{}O=!0}return O}finally{er(L),Qe.T=A,n2(h,d)}}return!1}function Cf(h,d,A){d=_t(A,d),d=_f(h.stateNode,d,2),h=Te(h,d,2),h!==null&&(X(h,2),qt(h))}function Xn(h,d,A){if(h.tag===3)Cf(h,h,A);else for(;d!==null;){if(d.tag===3){Cf(d,h,A);break}else if(d.tag===1){var M=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(uu===null||!uu.has(M))){h=_t(A,h),A=Iy(2),M=Te(d,A,2),M!==null&&(Yx(A,M,d,h),X(M,2),qt(M));break}}d=d.return}}function Qu(h,d,A){var M=h.pingCache;if(M===null){M=h.pingCache=new Wa;var L=new Set;M.set(d,L)}else L=M.get(d),L===void 0&&(L=new Set,M.set(d,L));L.has(A)||(ds=!0,L.add(A),h=i2.bind(null,h,d,A),d.then(h,h))}function i2(h,d,A){var M=h.pingCache;M!==null&&M.delete(d),h.pingedLanes|=h.suspendedLanes&A,h.warmLanes&=~A,qn===h&&(Sn&A)===A&&(ci===4||ci===3&&(Sn&62914560)===Sn&&300>Qa()-Er?(Un&2)===0&&Fs(h,0):tm|=A,fl===Sn&&(fl=0)),qt(h)}function Yc(h,d){d===0&&(d=U()),h=Vt(h,d),h!==null&&(X(h,d),qt(h))}function Xl(h){var d=h.memoizedState,A=0;d!==null&&(A=d.retryLane),Yc(h,A)}function Wc(h,d){var A=0;switch(h.tag){case 13:var M=h.stateNode,L=h.memoizedState;L!==null&&(A=L.retryLane);break;case 19:M=h.stateNode;break;case 22:M=h.stateNode._retryCache;break;default:throw Error(i(314))}M!==null&&M.delete(d),Yc(h,A)}function jl(h,d){return Wp(h,d)}function s2(h,d,A,M){this.tag=h,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Np(h){return h=h.prototype,!(!h||!h.isReactComponent)}function za(h,d){var A=h.alternate;return A===null?(A=e(h.tag,d,h.key,h.mode),A.elementType=h.elementType,A.type=h.type,A.stateNode=h.stateNode,A.alternate=h,h.alternate=A):(A.pendingProps=d,A.type=h.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=h.flags&31457280,A.childLanes=h.childLanes,A.lanes=h.lanes,A.child=h.child,A.memoizedProps=h.memoizedProps,A.memoizedState=h.memoizedState,A.updateQueue=h.updateQueue,d=h.dependencies,A.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},A.sibling=h.sibling,A.index=h.index,A.ref=h.ref,A.refCleanup=h.refCleanup,A}function Ip(h,d){h.flags&=31457282;var A=h.alternate;return A===null?(h.childLanes=0,h.lanes=d,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=A.childLanes,h.lanes=A.lanes,h.child=A.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=A.memoizedProps,h.memoizedState=A.memoizedState,h.updateQueue=A.updateQueue,h.type=A.type,d=A.dependencies,h.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),h}function el(h,d,A,M,L,O){var W=0;if(M=h,typeof h=="function")Np(h)&&(W=1);else if(typeof h=="string")W=fa&&ai?jp(h,A,hs.current)?26:il(h)?27:5:fa?jp(h,A,hs.current)?26:5:ai&&il(h)?27:5;else t:switch(h){case Kc:return Ii(A.children,L,O,d);case Hp:W=8,L|=24;break;case O0:return h=e(12,A,d,L|2),h.elementType=O0,h.lanes=O,h;case N0:return h=e(13,A,d,L),h.elementType=N0,h.lanes=O,h;case Df:return h=e(19,A,d,L),h.elementType=Df,h.lanes=O,h;case o2:return Up(A,L,O,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case zp:case go:W=10;break t;case a2:W=9;break t;case Gp:W=11;break t;case I0:W=14;break t;case ka:W=16,M=null;break t}W=29,A=Error(i(130,h===null?"null":typeof h,"")),M=null}return d=e(W,A,d,L),d.elementType=h,d.type=M,d.lanes=O,d}function Ii(h,d,A,M){return h=e(7,h,M,d),h.lanes=A,h}function Up(h,d,A,M){h=e(22,h,M,d),h.elementType=o2,h.lanes=A;var L={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var O=L._current;if(O===null)throw Error(i(456));if((L._pendingVisibility&2)===0){var W=Vt(O,2);W!==null&&(L._pendingVisibility|=2,xs(W,O,2))}},attach:function(){var O=L._current;if(O===null)throw Error(i(456));if((L._pendingVisibility&2)!==0){var W=Vt(O,2);W!==null&&(L._pendingVisibility&=-3,xs(W,O,2))}}};return h.stateNode=L,h}function L0(h,d,A){return h=e(6,h,null,d),h.lanes=A,h}function r2(h,d,A){return d=e(4,h.children!==null?h.children:[],h.key,d),d.lanes=A,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function V4(h,d,A,M,L,O,W,rt){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Jc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=P(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P(0),this.hiddenUpdates=P(null),this.identifierPrefix=M,this.onUncaughtError=L,this.onCaughtError=O,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=rt,this.incompleteTransitions=new Map}function db(h,d,A,M,L,O,W,rt,At,Ht,$t,de){return h=new V4(h,d,A,W,rt,At,Ht,de),d=1,O===!0&&(d|=24),O=e(3,null,null,d),h.current=O,O.stateNode=h,d=zc(),d.refCount++,h.pooledCache=d,d.refCount++,O.memoizedState={element:M,isDehydrated:A,cache:d},Jt(O),h}function ts(h){return h?(h=nu,h):nu}function D0(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=_(d),h=h!==null?b(h):null,h===null?null:Nf(h.stateNode)}function wf(h,d,A,M,L,O){L=ts(L),M.context===null?M.context=L:M.pendingContext=L,M=Se(d),M.payload={element:A},O=O===void 0?null:O,O!==null&&(M.callback=O),A=Te(h,M,d),A!==null&&(xs(A,h,d),le(A,h,d))}function Rf(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var A=h.retryLane;h.retryLane=A!==0&&A<d?A:d}}function Pp(h,d){Rf(h,d),(h=h.alternate)&&Rf(h,d)}var tn={},Lf=t0(),ha=BO(),B0=Object.assign,Q4=Symbol.for("react.element"),Fp=Symbol.for("react.transitional.element"),Ga=Symbol.for("react.portal"),Kc=Symbol.for("react.fragment"),Hp=Symbol.for("react.strict_mode"),O0=Symbol.for("react.profiler"),zp=Symbol.for("react.provider"),a2=Symbol.for("react.consumer"),go=Symbol.for("react.context"),Gp=Symbol.for("react.forward_ref"),N0=Symbol.for("react.suspense"),Df=Symbol.for("react.suspense_list"),I0=Symbol.for("react.memo"),ka=Symbol.for("react.lazy"),o2=Symbol.for("react.offscreen"),pb=Symbol.for("react.memo_cache_sentinel"),ql=Symbol.iterator,l2=Symbol.for("react.client.reference"),Qe=Lf.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nl,Yl,Xu=!1,Bf=Array.isArray,c2=t.rendererVersion,kp=t.rendererPackageName,Of=t.extraDevToolsConfig,Nf=t.getPublicInstance,mb=t.getRootHostContext,If=t.getChildHostContext,U0=t.prepareForCommit,gb=t.resetAfterCommit,u2=t.createInstance,Vp=t.appendInitialChild,Wl=t.finalizeInitialChildren,en=t.shouldSetTextContent,Zn=t.createTextInstance,es=t.scheduleTimeout,P0=t.cancelTimeout,Jc=t.noTimeout,Ar=t.isPrimaryRenderer;t.warnsIfNotActing;var us=t.supportsMutation,Va=t.supportsPersistence,Hs=t.supportsHydration,vb=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var ki=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var er=t.setCurrentUpdatePriority,Kl=t.getCurrentUpdatePriority,yb=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var _b=t.shouldAttemptEagerTransition,X4=t.detachDeletedInstance;t.requestPostPaintCallback;var h2=t.maySuspendCommit,F0=t.preloadInstance,f2=t.startSuspendingCommit,xr=t.suspendInstance,ns=t.waitForCommitToBeReady,Zc=t.NotPendingTransition,vo=t.HostTransitionContext,H0=t.resetFormInstance;t.bindToConsole;var d2=t.supportsMicrotasks,Jl=t.scheduleMicrotask,$c=t.supportsTestSelectors,p2=t.findFiberRoot,m2=t.getBoundingRect,Ab=t.getTextContent,Uf=t.isHiddenSubtree,xb=t.matchAccessibilityRole,bb=t.setFocusIfFocusable,Sb=t.setupIntersectionObserver,Eb=t.appendChild,g2=t.appendChildToContainer,Mb=t.commitTextUpdate,j4=t.commitMount,Tb=t.commitUpdate,Cb=t.insertBefore,wb=t.insertInContainerBefore,v2=t.removeChild,Rb=t.removeChildFromContainer,y2=t.resetTextContent,Lb=t.hideInstance,Db=t.hideTextInstance,Bb=t.unhideInstance,q4=t.unhideTextInstance,Ob=t.clearContainer,Pf=t.cloneInstance,Qp=t.createContainerChildSet,_2=t.appendChildToContainerChildSet,z0=t.finalizeContainerChildren,Ff=t.replaceContainerChildren,A2=t.cloneHiddenInstance,x2=t.cloneHiddenTextInstance,G0=t.isSuspenseInstancePending,k0=t.isSuspenseInstanceFallback,Nb=t.getSuspenseInstanceFallbackErrorDetails,Ib=t.registerSuspenseInstanceRetry,b2=t.canHydrateFormStateMarker,Ub=t.isFormStateMarkerMatching,S2=t.getNextHydratableSibling,V0=t.getFirstHydratableChild,Pb=t.getFirstHydratableChildWithinContainer,Fb=t.getFirstHydratableChildWithinSuspenseInstance,Y4=t.canHydrateInstance,E2=t.canHydrateTextInstance,Hb=t.canHydrateSuspenseInstance,zb=t.hydrateInstance,M2=t.hydrateTextInstance,Gb=t.hydrateSuspenseInstance,kb=t.getNextHydratableInstanceAfterSuspenseInstance,W4=t.commitHydratedContainer,K4=t.commitHydratedSuspenseInstance,Vb=t.clearSuspenseBoundary,Xp=t.clearSuspenseBoundaryFromContainer,Q0=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var X0=t.validateHydratableInstance,Qb=t.validateHydratableTextInstance,fa=t.supportsResources,jp=t.isHostHoistableType,j0=t.getHoistableRoot,T2=t.getResource,Xb=t.acquireResource,ju=t.releaseResource,qp=t.hydrateHoistable,Yp=t.mountHoistable,Hf=t.unmountHoistable,q0=t.createHoistableInstance,jb=t.prepareToCommitHoistables,qb=t.mayResourceSuspendCommit,qu=t.preloadResource,Yb=t.suspendResource,ai=t.supportsSingletons,yo=t.resolveSingletonInstance,tu=t.clearSingleton,Wb=t.acquireSingletonInstance,eu=t.releaseSingletonInstance,il=t.isHostSingletonType,Vi=[],Zl=-1,nu={},br=Math.clz32?Math.clz32:B,Kb=Math.log,Jb=Math.LN2,sl=128,Yu=4194304,Wp=ha.unstable_scheduleCallback,Y0=ha.unstable_cancelCallback,Zb=ha.unstable_shouldYield,W0=ha.unstable_requestPaint,Qa=ha.unstable_now,K0=ha.unstable_ImmediatePriority,$b=ha.unstable_UserBlockingPriority,J0=ha.unstable_NormalPriority,J4=ha.unstable_IdlePriority,tS=ha.log,bs=ha.unstable_setDisableYieldValue,Qi=null,kr=null,Vr=typeof Object.is=="function"?Object.is:et,C2=new WeakMap,Wu=[],Ku=0,Ju=null,zf=0,da=[],pa=0,iu=null,_o=1,Ao="",hs=T(null),Gf=T(null),rl=T(null),Zu=T(null),zs=null,Gs=null,Dn=!1,Xa=null,Ss=!1,Kp=Error(i(519)),ja=[],$u=0,xo=0,Jp=null,$l=null,th=!1,pi=!1,w2=!1,kf=0,Vf=null,eh=0,ma=0,nh=null,tc=!1,ih=!1,al=Object.prototype.hasOwnProperty,Qf=Error(i(460)),Zp=Error(i(474)),$p={then:function(){}},su=null,ru=null,au=0,ou=ls(!0),ol=ls(!1),mi=T(null),Xf=T(0),ga=T(null),oi=null,fs=T(0),ec=0,ln=null,Pe=null,In=null,qa=!1,sh=!1,lu=!1,Z0=0,rh=0,Es=null,bo=0,$0=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Ui={readContext:Is,use:Rt,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useLayoutEffect:ti,useInsertionEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useSyncExternalStore:ti,useId:ti};Ui.useCacheRefresh=ti,Ui.useMemoCache=ti,Ui.useHostTransitionStatus=ti,Ui.useFormState=ti,Ui.useActionState=ti,Ui.useOptimistic=ti;var cu={readContext:Is,use:Rt,useCallback:function(h,d){return q().memoizedState=[h,d===void 0?null:d],h},useContext:Is,useEffect:u0,useImperativeHandle:function(h,d,A){A=A!=null?A.concat([h]):null,fp(4194308,4,h0.bind(null,d,h),A)},useLayoutEffect:function(h,d){return fp(4194308,4,h,d)},useInsertionEffect:function(h,d){fp(4,2,h,d)},useMemo:function(h,d){var A=q();d=d===void 0?null:d;var M=h();if(lu){tt(!0);try{h()}finally{tt(!1)}}return A.memoizedState=[M,d],M},useReducer:function(h,d,A){var M=q();if(A!==void 0){var L=A(d);if(lu){tt(!0);try{A(d)}finally{tt(!1)}}}else L=d;return M.memoizedState=M.baseState=L,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:L},M.queue=h,h=h.dispatch=d0.bind(null,ln,h),[M.memoizedState,h]},useRef:function(h){var d=q();return h={current:h},d.memoizedState=h},useState:function(h){h=yn(h);var d=h.queue,A=Ny.bind(null,ln,d);return d.dispatch=A,[h.memoizedState,A]},useDebugValue:Ic,useDeferredValue:function(h,d){var A=q();return mp(A,h,d)},useTransition:function(){var h=yn(!1);return h=ff.bind(null,ln,h.queue,!0,!1),q().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,d,A){var M=ln,L=q();if(Dn){if(A===void 0)throw Error(i(407));A=A()}else{if(A=d(),qn===null)throw Error(i(349));(Sn&60)!==0||Oe(M,d,A)}L.memoizedState=A;var O={value:A,getSnapshot:d};return L.queue=O,u0(pn.bind(null,M,O,h),[h]),M.flags|=2048,gr(9,Ce.bind(null,M,O,A,d),{destroy:void 0},null),A},useId:function(){var h=q(),d=qn.identifierPrefix;if(Dn){var A=Ao,M=_o;A=(M&~(1<<32-br(M)-1)).toString(32)+A,d=":"+d+"R"+A,A=Z0++,0<A&&(d+="H"+A.toString(32)),d+=":"}else A=bo++,d=":"+d+"r"+A.toString(32)+":";return h.memoizedState=d},useCacheRefresh:function(){return q().memoizedState=Oy.bind(null,ln)}};cu.useMemoCache=yt,cu.useHostTransitionStatus=gp,cu.useFormState=ei,cu.useActionState=ei,cu.useOptimistic=function(h){var d=q();d.memoizedState=d.baseState=h;var A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=A,d=pf.bind(null,ln,!0,A),A.dispatch=d,[h,d]};var Sr={readContext:Is,use:Rt,useCallback:Gu,useContext:Is,useEffect:Ly,useImperativeHandle:f0,useInsertionEffect:jx,useLayoutEffect:pp,useMemo:Dy,useReducer:ie,useRef:Jo,useState:function(){return ie(Yt)},useDebugValue:Ic,useDeferredValue:function(h,d){var A=pt();return By(A,Pe.memoizedState,h,d)},useTransition:function(){var h=ie(Yt)[0],d=pt().memoizedState;return[typeof h=="boolean"?h:Ct(h),d]},useSyncExternalStore:Ge,useId:df};Sr.useCacheRefresh=Il,Sr.useMemoCache=yt,Sr.useHostTransitionStatus=gp,Sr.useFormState=Os,Sr.useActionState=Os,Sr.useOptimistic=function(h,d){var A=pt();return bn(A,Pe,h,d)};var va={readContext:Is,use:Rt,useCallback:Gu,useContext:Is,useEffect:Ly,useImperativeHandle:f0,useInsertionEffect:jx,useLayoutEffect:pp,useMemo:Dy,useReducer:Ae,useRef:Jo,useState:function(){return Ae(Yt)},useDebugValue:Ic,useDeferredValue:function(h,d){var A=pt();return Pe===null?mp(A,h,d):By(A,Pe.memoizedState,h,d)},useTransition:function(){var h=Ae(Yt)[0],d=pt().memoizedState;return[typeof h=="boolean"?h:Ct(h),d]},useSyncExternalStore:Ge,useId:df};va.useCacheRefresh=Il,va.useMemoCache=yt,va.useHostTransitionStatus=gp,va.useFormState=_s,va.useActionState=_s,va.useOptimistic=function(h,d){var A=pt();return Pe!==null?bn(A,Pe,h,d):(A.baseState=h,[h,A.queue.dispatch])};var ll={isMounted:function(h){return(h=h._reactInternals)?g(h)===h:!1},enqueueSetState:function(h,d,A){h=h._reactInternals;var M=Gi(),L=Se(M);L.payload=d,A!=null&&(L.callback=A),d=Te(h,L,M),d!==null&&(xs(d,h,M),le(d,h,M))},enqueueReplaceState:function(h,d,A){h=h._reactInternals;var M=Gi(),L=Se(M);L.tag=1,L.payload=d,A!=null&&(L.callback=A),d=Te(h,L,M),d!==null&&(xs(d,h,M),le(d,h,M))},enqueueForceUpdate:function(h,d){h=h._reactInternals;var A=Gi(),M=Se(A);M.tag=2,d!=null&&(M.callback=d),d=Te(h,M,A),d!==null&&(xs(d,h,A),le(d,h,A))}},t1=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},e1=Error(i(461)),li=!1,n1={dehydrated:null,treeContext:null,retryLane:0},nc=T(null),So=null,ya=null,jf=typeof AbortController<"u"?AbortController:function(){var h=[],d=this.signal={aborted:!1,addEventListener:function(A,M){h.push(M)}};this.abort=function(){d.aborted=!0,h.forEach(function(A){return A()})}},eS=ha.unstable_scheduleCallback,nS=ha.unstable_NormalPriority,gi={$$typeof:go,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},R2=Qe.S;Qe.S=function(h,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&te(h,d),R2!==null&&R2(h,d)};var cl=T(null),ul=!1,Pi=!1,L2=!1,jn=typeof WeakSet=="function"?WeakSet:Set,We=null,mn=!1,Ie=null,an=!1,Di=null,_a=8192,qf={getCacheForType:function(h){var d=Is(gi),A=d.data.get(h);return A===void 0&&(A=h(),d.data.set(h,A)),A}},Yf=0,Ya=1,xi=2,Eo=3,hl=4;if(typeof Symbol=="function"&&Symbol.for){var ah=Symbol.for;Yf=ah("selector.component"),Ya=ah("selector.has_pseudo_class"),xi=ah("selector.role"),Eo=ah("selector.test_id"),hl=ah("selector.text")}var Wa=typeof WeakMap=="function"?WeakMap:Map,Un=0,qn=null,ze=null,Sn=0,ni=0,nr=null,Ka=!1,Aa=!1,ds=!1,ir=0,ci=0,xa=0,ic=0,tm=0,ba=0,fl=0,oh=null,Fi=null,i1=!1,Er=0,Wf=1/0,em=null,uu=null,Mo=!1,dl=null,lh=0,hu=0,s1=null,Kf=0,r1=null;return tn.attemptContinuousHydration=function(h){if(h.tag===13){var d=Vt(h,67108864);d!==null&&xs(d,h,67108864),Pp(h,67108864)}},tn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=Gi(),A=Vt(h,d);A!==null&&xs(A,h,d),Pp(h,d)}},tn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var d=D(h.pendingLanes);if(d!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;d;){var A=1<<31-br(d);h.entanglements[1]|=A,d&=~A}qt(h),(Un&6)===0&&(Wf=Qa()+500,$(0))}}break;case 13:d=Vt(h,2),d!==null&&xs(d,h,2),Op(),Pp(h,2)}},tn.batchedUpdates=function(h,d){return h(d)},tn.createComponentSelector=function(h){return{$$typeof:Yf,value:h}},tn.createContainer=function(h,d,A,M,L,O,W,rt,At,Ht){return db(h,d,!1,null,A,M,O,W,rt,At,Ht,null)},tn.createHasPseudoClassSelector=function(h){return{$$typeof:Ya,value:h}},tn.createHydrationContainer=function(h,d,A,M,L,O,W,rt,At,Ht,$t,de,ye){return h=db(A,M,!0,h,L,O,rt,At,Ht,$t,de,ye),h.context=ts(null),A=h.current,M=Gi(),L=Se(M),L.callback=d??null,Te(A,L,M),h.current.lanes=M,X(h,M),qt(h),h},tn.createPortal=function(h,d,A){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ga,key:M==null?null:""+M,children:h,containerInfo:d,implementation:A}},tn.createRoleSelector=function(h){return{$$typeof:xi,value:h}},tn.createTestNameSelector=function(h){return{$$typeof:Eo,value:h}},tn.createTextSelector=function(h){return{$$typeof:hl,value:h}},tn.defaultOnCaughtError=function(h){console.error(h)},tn.defaultOnRecoverableError=function(h){t1(h)},tn.defaultOnUncaughtError=function(h){t1(h)},tn.deferredUpdates=function(h){var d=Qe.T,A=Kl();try{return er(32),Qe.T=null,h()}finally{er(A),Qe.T=d}},tn.discreteUpdates=function(h,d,A,M,L){var O=Qe.T,W=Kl();try{return er(2),Qe.T=null,h(d,A,M,L)}finally{er(W),Qe.T=O,Un===0&&(Wf=Qa()+500)}},tn.findAllNodes=Dp,tn.findBoundingRects=function(h,d){if(!$c)throw Error(i(363));d=Dp(h,d),h=[];for(var A=0;A<d.length;A++)h.push(m2(d[A]));for(d=h.length-1;0<d;d--){A=h[d];for(var M=A.x,L=M+A.width,O=A.y,W=O+A.height,rt=d-1;0<=rt;rt--)if(d!==rt){var At=h[rt],Ht=At.x,$t=Ht+At.width,de=At.y,ye=de+At.height;if(M>=Ht&&O>=de&&L<=$t&&W<=ye){h.splice(d,1);break}else if(M!==Ht||A.width!==At.width||ye<O||de>W){if(!(O!==de||A.height!==At.height||$t<M||Ht>L)){Ht>M&&(At.width+=Ht-M,At.x=M),$t<L&&(At.width=L-Ht),h.splice(d,1);break}}else{de>O&&(At.height+=de-O,At.y=O),ye<W&&(At.height=W-de),h.splice(d,1);break}}}return h},tn.findHostInstance=D0,tn.findHostInstanceWithNoPortals=function(h){return h=_(h),h=h!==null?C(h):null,h===null?null:Nf(h.stateNode)},tn.findHostInstanceWithWarning=function(h){return D0(h)},tn.flushPassiveEffects=mo,tn.flushSyncFromReconciler=function(h){var d=Un;Un|=1;var A=Qe.T,M=Kl();try{if(er(2),Qe.T=null,h)return h()}finally{er(M),Qe.T=A,Un=d,(Un&6)===0&&$(0)}},tn.flushSyncWork=Op,tn.focusWithin=function(h,d){if(!$c)throw Error(i(363));for(h=Ef(h),d=zr(h,d),d=Array.from(d),h=0;h<d.length;){var A=d[h++],M=A.tag;if(!Uf(A)){if((M===5||M===26||M===27)&&bb(A.stateNode))return!0;for(A=A.child;A!==null;)d.push(A),A=A.sibling}}return!1},tn.getFindAllNodesFailureDescription=function(h,d){if(!$c)throw Error(i(363));var A=0,M=[];h=[Ef(h),0];for(var L=0;L<h.length;){var O=h[L++],W=O.tag,rt=h[L++],At=d[rt];if((W!==5&&W!==26&&W!==27||!Uf(O))&&(Qc(O,At)&&(M.push(Zy(At)),rt++,rt>A&&(A=rt)),rt<d.length))for(O=O.child;O!==null;)h.push(O,rt),O=O.sibling}if(A<d.length){for(h=[];A<d.length;A++)h.push(Zy(d[A]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},tn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return Nf(h.child.stateNode);default:return h.child.stateNode}},tn.injectIntoDevTools=function(){var h={bundleType:0,version:c2,rendererPackageName:kp,currentDispatcherRef:Qe,findFiberByHostInstance:vb,reconcilerVersion:"19.0.0"};if(Of!==null&&(h.rendererConfig=Of),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{Qi=d.inject(h),kr=d}catch{}h=!!d.checkDCE}}return h},tn.isAlreadyRendering=function(){return!1},tn.observeVisibleRects=function(h,d,A,M){if(!$c)throw Error(i(363));h=Dp(h,d);var L=Sb(h,A,M).disconnect;return{disconnect:function(){L()}}},tn.shouldError=function(){return null},tn.shouldSuspend=function(){return!1},tn.startHostTransition=function(h,d,A,M){if(h.tag!==5)throw Error(i(476));var L=Zo(h).queue;ff(h,L,d,Zc,A===null?n:function(){var O=Zo(h).next.queue;return Uc(h,O,{},Gi()),A(M)})},tn.updateContainer=function(h,d,A,M){var L=d.current,O=Gi();return wf(L,O,h,d,A,M),O},tn.updateContainerSync=function(h,d,A,M){return d.tag===0&&mo(),wf(d.current,2,h,d,A,M),2},tn},s.exports.default=s.exports,Object.defineProperty(s.exports,"__esModule",{value:!0})}(RC)),RC.exports}var HL;function eY(){return HL||(HL=1,wC.exports=tY()),wC.exports}var nY=eY();const iY=I3(nY);var zL=BO();const sY=s=>typeof s=="object"&&typeof s.then=="function",Om=[];function OO(s,t,e=(n,i)=>n===i){if(s===t)return!0;if(!s||!t)return!1;const n=s.length;if(t.length!==n)return!1;for(let i=0;i<n;i++)if(!e(s[i],t[i]))return!1;return!0}function NO(s,t=null,e=!1,n={}){t===null&&(t=[s]);for(const r of Om)if(OO(t,r.keys,r.equal)){if(e)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!e)throw r.promise}const i={keys:t,equal:n.equal,remove:()=>{const r=Om.indexOf(i);r!==-1&&Om.splice(r,1)},promise:(sY(s)?s:s(...t)).then(r=>{i.response=r,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(r=>i.error=r)};if(Om.push(i),!e)throw i.promise}const rY=(s,t,e)=>NO(s,t,!1,e),aY=(s,t,e)=>void NO(s,t,!0,e),oY=s=>{if(s===void 0||s.length===0)Om.splice(0,Om.length);else{const t=Om.find(e=>OO(s,e.keys,e.equal));t&&t.remove()}};function aR(s,t,e){if(!s)return;if(e(s)===!0)return s;let n=t?s.return:s.child;for(;n;){const i=aR(n,t,e);if(i)return i;n=t?null:n.sibling}}function IO(s){try{return Object.defineProperties(s,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return s}}const oR=IO(ht.createContext(null));class UO extends ht.Component{render(){return ht.createElement(oR.Provider,{value:this._reactInternals},this.props.children)}}function PO(){const s=ht.useContext(oR);if(s===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=ht.useId();return ht.useMemo(()=>{for(const e of[s,s==null?void 0:s.alternate]){if(!e)continue;const n=aR(e,!1,i=>{let r=i.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(n)return n}},[s,t])}const lY=Symbol.for("react.context"),cY=s=>s!==null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===lY;function uY(){const s=PO(),[t]=ht.useState(()=>new Map);t.clear();let e=s;for(;e;){const n=e.type;cY(n)&&n!==oR&&!t.has(n)&&t.set(n,ht.use(IO(n))),e=e.return}return t}function hY(){const s=uY();return ht.useMemo(()=>Array.from(s.keys()).reduce((t,e)=>n=>ht.createElement(t,null,ht.createElement(e.Provider,{...n,value:s.get(e)})),t=>ht.createElement(UO,{...t})),[s])}function FO(s){let t=s.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const HO=s=>s&&s.isOrthographicCamera,fY=s=>s&&s.hasOwnProperty("current"),dY=s=>s!=null&&(typeof s=="string"||typeof s=="number"||s.isColor),Fx=((s,t)=>typeof window<"u"&&(((s=window.document)==null?void 0:s.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?ht.useLayoutEffect:ht.useEffect;function zO(s){const t=ht.useRef(s);return Fx(()=>void(t.current=s),[s]),t}function pY(){const s=PO(),t=hY();return ht.useMemo(()=>({children:e})=>{const i=!!aR(s,!0,r=>r.type===ht.StrictMode)?ht.StrictMode:ht.Fragment;return J.jsx(i,{children:J.jsx(t,{children:e})})},[s,t])}function mY({set:s}){return Fx(()=>(s(new Promise(()=>null)),()=>s(!1)),[s]),null}const gY=(s=>(s=class extends ht.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},s.getDerivedStateFromError=()=>({error:!0}),s))();function GO(s){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(s)?Math.min(Math.max(s[0],e),s[1]):s}function L1(s){var t;return(t=s.__r3f)==null?void 0:t.root.getState()}const zi={obj:s=>s===Object(s)&&!zi.arr(s)&&typeof s!="function",fun:s=>typeof s=="function",str:s=>typeof s=="string",num:s=>typeof s=="number",boo:s=>typeof s=="boolean",und:s=>s===void 0,nul:s=>s===null,arr:s=>Array.isArray(s),equ(s,t,{arrays:e="shallow",objects:n="reference",strict:i=!0}={}){if(typeof s!=typeof t||!!s!=!!t)return!1;if(zi.str(s)||zi.num(s)||zi.boo(s))return s===t;const r=zi.obj(s);if(r&&n==="reference")return s===t;const a=zi.arr(s);if(a&&e==="reference")return s===t;if((a||r)&&s===t)return!0;let l;for(l in s)if(!(l in t))return!1;if(r&&e==="shallow"&&n==="shallow"){for(l in i?t:s)if(!zi.equ(s[l],t[l],{strict:i,objects:"reference"}))return!1}else for(l in i?t:s)if(s[l]!==t[l])return!1;if(zi.und(l)){if(a&&s.length===0&&t.length===0||r&&Object.keys(s).length===0&&Object.keys(t).length===0)return!0;if(s!==t)return!1}return!0}};function vY(s){const t={nodes:{},materials:{},meshes:{}};return s&&s.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}function yY(s){s.type!=="Scene"&&(s.dispose==null||s.dispose());for(const t in s){const e=s[t];(e==null?void 0:e.type)!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const kO=["children","key","ref"];function _Y(s){const t={};for(const e in s)kO.includes(e)||(t[e]=s[e]);return t}function i3(s,t,e,n){const i=s;let r=i==null?void 0:i.__r3f;return r||(r={root:t,type:e,parent:null,children:[],props:_Y(n),object:i,eventCount:0,handlers:{},isHidden:!1},i&&(i.__r3f=r)),r}function aA(s,t){let e=s[t];if(!t.includes("-"))return{root:s,key:t,target:e};e=s;for(const i of t.split("-")){var n;t=i,s=e,e=(n=e)==null?void 0:n[t]}return{root:s,key:t,target:e}}const GL=/-\d+$/;function s3(s,t){if(zi.str(t.props.attach)){if(GL.test(t.props.attach)){const i=t.props.attach.replace(GL,""),{root:r,key:a}=aA(s.object,i);Array.isArray(r[a])||(r[a]=[])}const{root:e,key:n}=aA(s.object,t.props.attach);t.previousAttach=e[n],e[n]=t.object}else zi.fun(t.props.attach)&&(t.previousAttach=t.props.attach(s.object,t.object))}function r3(s,t){if(zi.str(t.props.attach)){const{root:e,key:n}=aA(s.object,t.props.attach),i=t.previousAttach;i===void 0?delete e[n]:e[n]=i}else t.previousAttach==null||t.previousAttach(s.object,t.object);delete t.previousAttach}const C8=[...kO,"args","dispose","attach","object","onUpdate","dispose"],kL=new Map;function AY(s){let t=kL.get(s.constructor);try{t||(t=new s.constructor,kL.set(s.constructor,t))}catch{}return t}function xY(s,t){const e={};for(const n in t)if(!C8.includes(n)&&!zi.equ(t[n],s.props[n])){e[n]=t[n];for(const i in t)i.startsWith(`${n}-`)&&(e[i]=t[i])}for(const n in s.props){if(C8.includes(n)||t.hasOwnProperty(n))continue;const{root:i,key:r}=aA(s.object,n);if(i.constructor&&i.constructor.length===0){const a=AY(i);zi.und(a)||(e[r]=a[r])}else e[r]=0}return e}const bY=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],SY=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function vd(s,t){var e;const n=s.__r3f,i=n&&FO(n).getState(),r=n==null?void 0:n.eventCount;for(const l in t){let u=t[l];if(C8.includes(l))continue;if(n&&SY.test(l)){typeof u=="function"?n.handlers[l]=u:delete n.handlers[l],n.eventCount=Object.keys(n.handlers).length;continue}if(u===void 0)continue;let{root:f,key:m,target:g}=aA(s,l);if(g instanceof fy&&u instanceof fy)g.mask=u.mask;else if(g instanceof ae&&dY(u))g.set(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&u!=null&&u.constructor&&g.constructor===u.constructor)g.copy(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(u))typeof g.fromArray=="function"?g.fromArray(u):g.set(...u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof u=="number")typeof g.setScalar=="function"?g.setScalar(u):g.set(u);else{var a;f[m]=u,i&&!i.linear&&bY.includes(m)&&(a=f[m])!=null&&a.isTexture&&f[m].format===na&&f[m].type===Ws&&(f[m].colorSpace=Kn)}}if(n!=null&&n.parent&&i!=null&&i.internal&&(e=n.object)!=null&&e.isObject3D&&r!==n.eventCount){const l=n.object,u=i.internal.interaction.indexOf(l);u>-1&&i.internal.interaction.splice(u,1),n.eventCount&&l.raycast!==null&&i.internal.interaction.push(l)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Ry(n),s}function Ry(s){var t;if(!s.parent)return;s.props.onUpdate==null||s.props.onUpdate(s.object);const e=(t=s.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function EY(s,t){s.manual||(HO(s)?(s.left=t.width/-2,s.right=t.width/2,s.top=t.height/2,s.bottom=t.height/-2):s.aspect=t.width/t.height,s.updateProjectionMatrix())}const Ra=s=>s==null?void 0:s.isObject3D;function fE(s){return(s.eventObject||s.object).uuid+"/"+s.index+s.instanceId}function VO(s,t,e,n){const i=e.get(t);i&&(e.delete(t),e.size===0&&(s.delete(n),i.target.releasePointerCapture(n)))}function MY(s,t){const{internal:e}=s.getState();e.interaction=e.interaction.filter(n=>n!==t),e.initialHits=e.initialHits.filter(n=>n!==t),e.hovered.forEach((n,i)=>{(n.eventObject===t||n.object===t)&&e.hovered.delete(i)}),e.capturedMap.forEach((n,i)=>{VO(e.capturedMap,t,n,i)})}function TY(s){function t(u){const{internal:f}=s.getState(),m=u.offsetX-f.initialClick[0],g=u.offsetY-f.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function e(u){return u.filter(f=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=f.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function n(u,f){const m=s.getState(),g=new Set,v=[],_=f?f(m.internal.interaction):m.internal.interaction;for(let S=0;S<_.length;S++){const R=L1(_[S]);R&&(R.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(u,m);function b(S){const R=L1(S);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var B;R.events.compute==null||R.events.compute(u,R,(B=R.previousRoot)==null?void 0:B.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(S,!0):[]}let C=_.flatMap(b).sort((S,R)=>{const B=L1(S.object),D=L1(R.object);return!B||!D?S.distance-R.distance:D.events.priority-B.events.priority||S.distance-R.distance}).filter(S=>{const R=fE(S);return g.has(R)?!1:(g.add(R),!0)});m.events.filter&&(C=m.events.filter(C,m));for(const S of C){let R=S.object;for(;R;){var T;(T=R.__r3f)!=null&&T.eventCount&&v.push({...S,eventObject:R}),R=R.parent}}if("pointerId"in u&&m.internal.capturedMap.has(u.pointerId))for(let S of m.internal.capturedMap.get(u.pointerId).values())g.has(fE(S.intersection))||v.push(S.intersection);return v}function i(u,f,m,g){if(u.length){const v={stopped:!1};for(const _ of u){let b=L1(_.object);if(b||_.object.traverseAncestors(C=>{const T=L1(C);if(T)return b=T,!1}),b){const{raycaster:C,pointer:T,camera:S,internal:R}=b,B=new nt(T.x,T.y,0).unproject(S),D=U=>{var P,X;return(P=(X=R.capturedMap.get(U))==null?void 0:X.has(_.eventObject))!=null?P:!1},N=U=>{const P={intersection:_,target:f.target};R.capturedMap.has(U)?R.capturedMap.get(U).set(_.eventObject,P):R.capturedMap.set(U,new Map([[_.eventObject,P]])),f.target.setPointerCapture(U)},I=U=>{const P=R.capturedMap.get(U);P&&VO(R.capturedMap,_.eventObject,P,U)};let F={};for(let U in f){let P=f[U];typeof P!="function"&&(F[U]=P)}let z={..._,...F,pointer:T,intersections:u,stopped:v.stopped,delta:m,unprojectedPoint:B,ray:C.ray,camera:S,stopPropagation(){const U="pointerId"in f&&R.capturedMap.get(f.pointerId);if((!U||U.has(_.eventObject))&&(z.stopped=v.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(P=>P.eventObject===_.eventObject))){const P=u.slice(0,u.indexOf(_));r([...P,_])}},target:{hasPointerCapture:D,setPointerCapture:N,releasePointerCapture:I},currentTarget:{hasPointerCapture:D,setPointerCapture:N,releasePointerCapture:I},nativeEvent:f};if(g(z),v.stopped===!0)break}}}return u}function r(u){const{internal:f}=s.getState();for(const m of f.hovered.values())if(!u.length||!u.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const v=m.eventObject.__r3f;if(f.hovered.delete(fE(m)),v!=null&&v.eventCount){const _=v.handlers,b={...m,intersections:u};_.onPointerOut==null||_.onPointerOut(b),_.onPointerLeave==null||_.onPointerLeave(b)}}}function a(u,f){for(let m=0;m<f.length;m++){const g=f[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return f=>{const{internal:m}=s.getState();"pointerId"in f&&m.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(f.pointerId)&&(m.capturedMap.delete(f.pointerId),r([]))})}}return function(m){const{onPointerMissed:g,internal:v}=s.getState();v.lastEvent.current=m;const _=u==="onPointerMove",b=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",T=n(m,_?e:void 0),S=b?t(m):0;u==="onPointerDown"&&(v.initialClick=[m.offsetX,m.offsetY],v.initialHits=T.map(B=>B.eventObject)),b&&!T.length&&S<=2&&(a(m,v.interaction),g&&g(m)),_&&r(T);function R(B){const D=B.eventObject,N=D.__r3f;if(!(N!=null&&N.eventCount))return;const I=N.handlers;if(_){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const F=fE(B),z=v.hovered.get(F);z?z.stopped&&B.stopPropagation():(v.hovered.set(F,B),I.onPointerOver==null||I.onPointerOver(B),I.onPointerEnter==null||I.onPointerEnter(B))}I.onPointerMove==null||I.onPointerMove(B)}else{const F=I[u];F?(!b||v.initialHits.includes(D))&&(a(m,v.interaction.filter(z=>!v.initialHits.includes(z))),F(B)):b&&v.initialHits.includes(D)&&a(m,v.interaction.filter(z=>!v.initialHits.includes(z)))}}i(T,m,S,R)}}return{handlePointer:l}}const VL=s=>!!(s!=null&&s.render),QO=ht.createContext(null),CY=(s,t)=>{const e=Zq((l,u)=>{const f=new nt,m=new nt,g=new nt;function v(S=u().camera,R=m,B=u().size){const{width:D,height:N,top:I,left:F}=B,z=D/N;R.isVector3?g.copy(R):g.set(...R);const U=S.getWorldPosition(f).distanceTo(g);if(HO(S))return{width:D/S.zoom,height:N/S.zoom,top:I,left:F,factor:1,distance:U,aspect:z};{const P=S.fov*Math.PI/180,X=2*Math.tan(P/2)*U,ot=X*(D/N);return{width:ot,height:X,top:I,left:F,factor:D/ot,distance:U,aspect:z}}}let _;const b=S=>l(R=>({performance:{...R.performance,current:S}})),C=new Pt;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(S=1)=>s(u(),S),advance:(S,R)=>t(S,R,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new eR,pointer:C,mouse:C,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=u();_&&clearTimeout(_),S.performance.current!==S.performance.min&&b(S.performance.min),_=setTimeout(()=>b(u().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:S=>l(R=>({...R,events:{...R.events,...S}})),setSize:(S,R,B=0,D=0)=>{const N=u().camera,I={width:S,height:R,top:B,left:D};l(F=>({size:I,viewport:{...F.viewport,...v(N,m,I)}}))},setDpr:S=>l(R=>{const B=GO(S);return{viewport:{...R.viewport,dpr:B,initialDpr:R.viewport.initialDpr||B}}}),setFrameloop:(S="always")=>{const R=u().clock;R.stop(),R.elapsedTime=0,S!=="never"&&(R.start(),R.elapsedTime=0),l(()=>({frameloop:S}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:ht.createRef(),active:!1,frames:0,priority:0,subscribe:(S,R,B)=>{const D=u().internal;return D.priority=D.priority+(R>0?1:0),D.subscribers.push({ref:S,priority:R,store:B}),D.subscribers=D.subscribers.sort((N,I)=>N.priority-I.priority),()=>{const N=u().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(R>0?1:0),N.subscribers=N.subscribers.filter(I=>I.ref!==S))}}}}}),n=e.getState();let i=n.size,r=n.viewport.dpr,a=n.camera;return e.subscribe(()=>{const{camera:l,size:u,viewport:f,gl:m,set:g}=e.getState();if(u.width!==i.width||u.height!==i.height||f.dpr!==r){i=u,r=f.dpr,EY(l,u),f.dpr>0&&m.setPixelRatio(f.dpr);const v=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(u.width,u.height,v)}l!==a&&(a=l,g(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),e.subscribe(l=>s(l)),e};function XO(){const s=ht.useContext(QO);if(!s)throw new Error("R3F: Hooks can only be used within the Canvas component!");return s}function x4(s=e=>e,t){return XO()(s,t)}function lR(s,t=0){const e=XO(),n=e.getState().internal.subscribe,i=zO(s);return Fx(()=>n(i,t,e),[t,n,e]),null}const QL=new WeakMap,wY=s=>{var t;return typeof s=="function"&&(s==null||(t=s.prototype)==null?void 0:t.constructor)===s};function jO(s,t){return function(e,...n){let i;return wY(e)?(i=QL.get(e),i||(i=new e,QL.set(e,i))):i=e,s&&s(i),Promise.all(n.map(r=>new Promise((a,l)=>i.load(r,u=>{Ra(u==null?void 0:u.scene)&&Object.assign(u,vY(u.scene)),a(u)},t,u=>l(new Error(`Could not load ${r}: ${u==null?void 0:u.message}`))))))}}function Hx(s,t,e,n){const i=Array.isArray(t)?t:[t],r=rY(jO(e,n),[s,...i],{equal:zi.equ});return Array.isArray(t)?r:r[0]}Hx.preload=function(s,t,e){const n=Array.isArray(t)?t:[t];return aY(jO(e),[s,...n])};Hx.clear=function(s,t){const e=Array.isArray(t)?t:[t];return oY([s,...e])};function RY(s){const t=iY(s);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ht.version}),t}const qO=0,gy={},LY=/^three(?=[A-Z])/,b4=s=>`${s[0].toUpperCase()}${s.slice(1)}`;let DY=0;const BY=s=>typeof s=="function";function YO(s){if(BY(s)){const t=`${DY++}`;return gy[t]=s,t}else Object.assign(gy,s)}function WO(s,t){const e=b4(s),n=gy[e];if(s!=="primitive"&&!n)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(s==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function OY(s,t,e){var n;return s=b4(s)in gy?s:s.replace(LY,""),WO(s,t),s==="primitive"&&(n=t.object)!=null&&n.__r3f&&delete t.object.__r3f,i3(t.object,e,s,t)}function NY(s){if(!s.isHidden){var t;s.props.attach&&(t=s.parent)!=null&&t.object?r3(s.parent,s):Ra(s.object)&&(s.object.visible=!1),s.isHidden=!0,Ry(s)}}function KO(s){if(s.isHidden){var t;s.props.attach&&(t=s.parent)!=null&&t.object?s3(s.parent,s):Ra(s.object)&&s.props.visible!==!1&&(s.object.visible=!0),s.isHidden=!1,Ry(s)}}function cR(s,t,e){const n=t.root.getState();if(!(!s.parent&&s.object!==n.scene)){if(!t.object){var i,r;const a=gy[b4(t.type)];t.object=(i=t.props.object)!=null?i:new a(...(r=t.props.args)!=null?r:[]),t.object.__r3f=t}if(vd(t.object,t.props),t.props.attach)s3(s,t);else if(Ra(t.object)&&Ra(s.object)){const a=s.object.children.indexOf(e==null?void 0:e.object);if(e&&a!==-1){const l=s.object.children.indexOf(t.object);if(l!==-1){s.object.children.splice(l,1);const u=l<a?a-1:a;s.object.children.splice(u,0,t.object)}else t.object.parent=s.object,s.object.children.splice(a,0,t.object),t.object.dispatchEvent({type:"added"}),s.object.dispatchEvent({type:"childadded",child:t.object})}else s.object.add(t.object)}for(const a of t.children)cR(t,a);Ry(t)}}function BC(s,t){t&&(t.parent=s,s.children.push(t),cR(s,t))}function XL(s,t,e){if(!t||!e)return;t.parent=s;const n=s.children.indexOf(e);n!==-1?s.children.splice(n,0,t):s.children.push(t),cR(s,t,e)}function JO(s){if(typeof s.dispose=="function"){const t=()=>{try{s.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():zL.unstable_scheduleCallback(zL.unstable_IdlePriority,t)}}function w8(s,t,e){if(!t)return;t.parent=null;const n=s.children.indexOf(t);n!==-1&&s.children.splice(n,1),t.props.attach?r3(s,t):Ra(t.object)&&Ra(s.object)&&(s.object.remove(t.object),MY(FO(t),t.object));const i=t.props.dispose!==null&&e!==!1;for(let r=t.children.length-1;r>=0;r--){const a=t.children[r];w8(t,a,i)}t.children.length=0,delete t.object.__r3f,i&&t.type!=="primitive"&&t.object.type!=="Scene"&&JO(t.object),e===void 0&&Ry(t)}function IY(s,t){for(const e of[s,s.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const n=e.ref(t);typeof n=="function"&&(e.refCleanup=n)}else e.ref&&(e.ref.current=t)}const IE=[];function UY(){for(const[e]of IE){const n=e.parent;if(n){e.props.attach?r3(n,e):Ra(e.object)&&Ra(n.object)&&n.object.remove(e.object);for(const i of e.children)i.props.attach?r3(e,i):Ra(i.object)&&Ra(e.object)&&e.object.remove(i.object)}e.isHidden&&KO(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&JO(e.object)}for(const[e,n,i]of IE){e.props=n;const r=e.parent;if(r){var s,t;const a=gy[b4(e.type)];e.object=(s=e.props.object)!=null?s:new a(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,IY(i,e.object),vd(e.object,e.props),e.props.attach?s3(r,e):Ra(e.object)&&Ra(r.object)&&r.object.add(e.object);for(const l of e.children)l.props.attach?s3(e,l):Ra(l.object)&&Ra(e.object)&&e.object.add(l.object);Ry(e)}}IE.length=0}const OC=()=>{},jL={};let dE=qO;const PY=0,FY=4,R8=RY({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:OY,removeChild:w8,appendChild:BC,appendInitialChild:BC,insertBefore:XL,appendChildToContainer(s,t){const e=s.getState().scene.__r3f;!t||!e||BC(e,t)},removeChildFromContainer(s,t){const e=s.getState().scene.__r3f;!t||!e||w8(e,t)},insertInContainerBefore(s,t,e){const n=s.getState().scene.__r3f;!t||!e||!n||XL(n,t,e)},getRootHostContext:()=>jL,getChildHostContext:()=>jL,commitUpdate(s,t,e,n,i){var r,a,l;WO(t,n);let u=!1;if((s.type==="primitive"&&e.object!==n.object||((r=n.args)==null?void 0:r.length)!==((a=e.args)==null?void 0:a.length)||(l=n.args)!=null&&l.some((m,g)=>{var v;return m!==((v=e.args)==null?void 0:v[g])}))&&(u=!0),u)IE.push([s,{...n},i]);else{const m=xY(s,n);Object.keys(m).length&&(Object.assign(s.props,m),vd(s.object,m))}(i.sibling===null||(i.flags&FY)===PY)&&UY()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:s=>s==null?void 0:s.object,prepareForCommit:()=>null,preparePortalMount:s=>i3(s.getState().scene,s,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:NY,unhideInstance:KO,createTextInstance:OC,hideTextInstance:OC,unhideTextInstance:OC,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:ht.createContext(null),setCurrentUpdatePriority(s){dE=s},getCurrentUpdatePriority(){return dE},resolveUpdatePriority(){var s;if(dE!==qO)return dE;switch(typeof window<"u"&&((s=window.event)==null?void 0:s.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return NE.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return NE.ContinuousEventPriority;default:return NE.DefaultEventPriority}},resetFormInstance(){}}),Qg=new Map,D1={objects:"shallow",strict:!1};function HY(s,t){if(!t&&typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&s.parentElement){const{width:e,height:n,top:i,left:r}=s.parentElement.getBoundingClientRect();return{width:e,height:n,top:i,left:r}}else if(!t&&typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas)return{width:s.width,height:s.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function zY(s){const t=Qg.get(s),e=t==null?void 0:t.fiber,n=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,r=n||CY(B8,YL),a=e||R8.createContainer(r,NE.ConcurrentRoot,null,!1,null,"",i,i,i,null);t||Qg.set(s,{fiber:a,store:r});let l,u,f=!1,m=null;return{async configure(g={}){let v;m=new Promise(at=>v=at);let{gl:_,size:b,scene:C,events:T,onCreated:S,shadows:R=!1,linear:B=!1,flat:D=!1,legacy:N=!1,orthographic:I=!1,frameloop:F="always",dpr:z=[1,2],performance:U,raycaster:P,camera:X,onPointerMissed:ot}=g,it=r.getState(),ct=it.gl;if(!it.gl){const at={canvas:s,powerPreference:"high-performance",antialias:!0,alpha:!0},xt=typeof _=="function"?await _(at):_;VL(xt)?ct=xt:ct=new LO({...at,..._}),it.set({gl:ct})}let dt=it.raycaster;dt||it.set({raycaster:dt=new bO});const{params:Q,...tt}=P||{};if(zi.equ(tt,dt,D1)||vd(dt,{...tt}),zi.equ(Q,dt.params,D1)||vd(dt,{params:{...dt.params,...Q}}),!it.camera||it.camera===u&&!zi.equ(u,X,D1)){u=X;const at=X==null?void 0:X.isCamera,xt=at?X:I?new Cy(0,0,0,0,.1,1e3):new Rs(75,0,.1,1e3);at||(xt.position.z=5,X&&(vd(xt,X),xt.manual||("aspect"in X||"left"in X||"right"in X||"bottom"in X||"top"in X)&&(xt.manual=!0,xt.updateProjectionMatrix())),!it.camera&&!(X!=null&&X.rotation)&&xt.lookAt(0,0,0)),it.set({camera:xt}),dt.camera=xt}if(!it.scene){let at;C!=null&&C.isScene?(at=C,i3(at,r,"",{})):(at=new eA,i3(at,r,"",{}),C&&vd(at,C)),it.set({scene:at})}T&&!it.events.handlers&&it.set({events:T(r)});const et=HY(s,b);if(zi.equ(et,it.size,D1)||it.setSize(et.width,et.height,et.top,et.left),z&&it.viewport.dpr!==GO(z)&&it.setDpr(z),it.frameloop!==F&&it.setFrameloop(F),it.onPointerMissed||it.set({onPointerMissed:ot}),U&&!zi.equ(U,it.performance,D1)&&it.set(at=>({performance:{...at.performance,...U}})),!it.xr){var _t;const at=(lt,wt)=>{const Bt=r.getState();Bt.frameloop!=="never"&&YL(lt,!0,Bt,wt)},xt=()=>{const lt=r.getState();lt.gl.xr.enabled=lt.gl.xr.isPresenting,lt.gl.xr.setAnimationLoop(lt.gl.xr.isPresenting?at:null),lt.gl.xr.isPresenting||B8(lt)},Et={connect(){const lt=r.getState().gl;lt.xr.addEventListener("sessionstart",xt),lt.xr.addEventListener("sessionend",xt)},disconnect(){const lt=r.getState().gl;lt.xr.removeEventListener("sessionstart",xt),lt.xr.removeEventListener("sessionend",xt)}};typeof((_t=ct.xr)==null?void 0:_t.addEventListener)=="function"&&Et.connect(),it.set({xr:Et})}if(ct.shadowMap){const at=ct.shadowMap.enabled,xt=ct.shadowMap.type;if(ct.shadowMap.enabled=!!R,zi.boo(R))ct.shadowMap.type=D_;else if(zi.str(R)){var K;const Et={basic:zB,percentage:k3,soft:D_,variance:cc};ct.shadowMap.type=(K=Et[R])!=null?K:D_}else zi.obj(R)&&Object.assign(ct.shadowMap,R);(at!==ct.shadowMap.enabled||xt!==ct.shadowMap.type)&&(ct.shadowMap.needsUpdate=!0)}return Pn.enabled=!N,f||(ct.outputColorSpace=B?zu:Kn,ct.toneMapping=D?Lc:y5),it.legacy!==N&&it.set(()=>({legacy:N})),it.linear!==B&&it.set(()=>({linear:B})),it.flat!==D&&it.set(()=>({flat:D})),_&&!zi.fun(_)&&!VL(_)&&!zi.equ(_,ct,D1)&&vd(ct,_),l=S,f=!0,v(),this},render(g){return!f&&!m&&this.configure(),m.then(()=>{R8.updateContainer(J.jsx(GY,{store:r,children:g,onCreated:l,rootElement:s}),a,null,()=>{})}),r},unmount(){ZO(s)}}}function GY({store:s,children:t,onCreated:e,rootElement:n}){return Fx(()=>{const i=s.getState();i.set(r=>({internal:{...r.internal,active:!0}})),e&&e(i),s.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),J.jsx(QO.Provider,{value:s,children:t})}function ZO(s,t){const e=Qg.get(s),n=e==null?void 0:e.fiber;if(n){const i=e==null?void 0:e.store.getState();i&&(i.internal.active=!1),R8.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var r,a,l,u;i.events.disconnect==null||i.events.disconnect(),(r=i.gl)==null||(a=r.renderLists)==null||a.dispose==null||a.dispose(),(l=i.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=i.gl)!=null&&u.xr&&i.xr.disconnect(),yY(i.scene),Qg.delete(s)}catch{}},500)})}}const kY=new Set,VY=new Set,QY=new Set;function NC(s,t){if(s.size)for(const{callback:e}of s.values())e(t)}function z_(s,t){switch(s){case"before":return NC(kY,t);case"after":return NC(VY,t);case"tail":return NC(QY,t)}}let IC,UC;function L8(s,t,e){let n=t.clock.getDelta();t.frameloop==="never"&&typeof s=="number"&&(n=s-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=s),IC=t.internal.subscribers;for(let i=0;i<IC.length;i++)UC=IC[i],UC.ref.current(UC.store.getState(),n,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let a3=!1,D8=!1,PC,qL,B1;function $O(s){qL=requestAnimationFrame($O),a3=!0,PC=0,z_("before",s),D8=!0;for(const e of Qg.values()){var t;B1=e.store.getState(),B1.internal.active&&(B1.frameloop==="always"||B1.internal.frames>0)&&!((t=B1.gl.xr)!=null&&t.isPresenting)&&(PC+=L8(s,B1))}if(D8=!1,z_("after",s),PC===0)return z_("tail",s),a3=!1,cancelAnimationFrame(qL)}function B8(s,t=1){var e;if(!s)return Qg.forEach(n=>B8(n.store.getState(),t));(e=s.gl.xr)!=null&&e.isPresenting||!s.internal.active||s.frameloop==="never"||(t>1?s.internal.frames=Math.min(60,s.internal.frames+t):D8?s.internal.frames=2:s.internal.frames=1,a3||(a3=!0,requestAnimationFrame($O)))}function YL(s,t=!0,e,n){if(t&&z_("before",s),e)L8(s,e,n);else for(const i of Qg.values())L8(s,i.store.getState());t&&z_("after",s)}const FC={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function XY(s){const{handlePointer:t}=TY(s);return{priority:1,enabled:!0,compute(e,n,i){n.pointer.set(e.offsetX/n.size.width*2-1,-(e.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(FC).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var e;const{events:n,internal:i}=s.getState();(e=i.lastEvent)!=null&&e.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:e=>{const{set:n,events:i}=s.getState();if(i.disconnect==null||i.disconnect(),n(r=>({events:{...r.events,connected:e}})),i.handlers)for(const r in i.handlers){const a=i.handlers[r],[l,u]=FC[r];e.addEventListener(l,a,{passive:u})}},disconnect:()=>{const{set:e,events:n}=s.getState();if(n.connected){if(n.handlers)for(const i in n.handlers){const r=n.handlers[i],[a]=FC[i];n.connected.removeEventListener(a,r)}e(i=>({events:{...i.events,connected:void 0}}))}}}}function WL(s,t){let e;return(...n)=>{window.clearTimeout(e),e=window.setTimeout(()=>s(...n),t)}}function jY({debounce:s,scroll:t,polyfill:e,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,a]=ht.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=ht.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),u=s?typeof s=="number"?s:s.scroll:null,f=s?typeof s=="number"?s:s.resize:null,m=ht.useRef(!1);ht.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,v,_]=ht.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:R,top:B,width:D,height:N,bottom:I,right:F,x:z,y:U}=l.current.element.getBoundingClientRect(),P={left:R,top:B,width:D,height:N,bottom:I,right:F,x:z,y:U};l.current.element instanceof HTMLElement&&n&&(P.height=l.current.element.offsetHeight,P.width=l.current.element.offsetWidth),Object.freeze(P),m.current&&!KY(l.current.lastBounds,P)&&a(l.current.lastBounds=P)};return[S,f?WL(S,f):S,u?WL(S,u):S]},[a,n,u,f]);function b(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",_,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function C(){l.current.element&&(l.current.resizeObserver=new i(_),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",_,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const T=S=>{!S||S===l.current.element||(b(),l.current.element=S,l.current.scrollContainers=tN(S),C())};return YY(_,!!t),qY(v),ht.useEffect(()=>{b(),C()},[t,_,v]),ht.useEffect(()=>b,[]),[T,r,g]}function qY(s){ht.useEffect(()=>{const t=s;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[s])}function YY(s,t){ht.useEffect(()=>{if(t){const e=s;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[s,t])}function tN(s){const t=[];if(!s||s===document.body)return t;const{overflow:e,overflowX:n,overflowY:i}=window.getComputedStyle(s);return[e,n,i].some(r=>r==="auto"||r==="scroll")&&t.push(s),[...t,...tN(s.parentElement)]}const WY=["x","y","top","bottom","left","right","width","height"],KY=(s,t)=>WY.every(e=>s[e]===t[e]);function JY({ref:s,children:t,fallback:e,resize:n,style:i,gl:r,events:a=XY,eventSource:l,eventPrefix:u,shadows:f,linear:m,flat:g,legacy:v,orthographic:_,frameloop:b,dpr:C,performance:T,raycaster:S,camera:R,scene:B,onPointerMissed:D,onCreated:N,...I}){ht.useMemo(()=>YO(zq),[]);const F=pY(),[z,U]=jY({scroll:!0,debounce:{scroll:50,resize:0},...n}),P=ht.useRef(null),X=ht.useRef(null);ht.useImperativeHandle(s,()=>P.current);const ot=zO(D),[it,ct]=ht.useState(!1),[dt,Q]=ht.useState(!1);if(it)throw it;if(dt)throw dt;const tt=ht.useRef(null);Fx(()=>{const _t=P.current;if(U.width>0&&U.height>0&&_t){tt.current||(tt.current=zY(_t));async function K(){await tt.current.configure({gl:r,scene:B,events:a,shadows:f,linear:m,flat:g,legacy:v,orthographic:_,frameloop:b,dpr:C,performance:T,raycaster:S,camera:R,size:U,onPointerMissed:(...at)=>ot.current==null?void 0:ot.current(...at),onCreated:at=>{at.events.connect==null||at.events.connect(l?fY(l)?l.current:l:X.current),u&&at.setEvents({compute:(xt,Et)=>{const lt=xt[u+"X"],wt=xt[u+"Y"];Et.pointer.set(lt/Et.size.width*2-1,-(wt/Et.size.height)*2+1),Et.raycaster.setFromCamera(Et.pointer,Et.camera)}}),N==null||N(at)}}),tt.current.render(J.jsx(F,{children:J.jsx(gY,{set:Q,children:J.jsx(ht.Suspense,{fallback:J.jsx(mY,{set:ct}),children:t??null})})}))}K()}}),ht.useEffect(()=>{const _t=P.current;if(_t)return()=>ZO(_t)},[]);const et=l?"none":"auto";return J.jsx("div",{ref:X,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:et,...i},...I,children:J.jsx("div",{ref:z,style:{width:"100%",height:"100%"},children:J.jsx("canvas",{ref:P,style:{display:"block"},children:e})})})}function ZY(s){return J.jsx(UO,{children:J.jsx(JY,{...s})})}const $Y=s=>s;function tW(s,t=$Y){const e=Oa.useSyncExternalStore(s.subscribe,()=>t(s.getState()),()=>t(s.getInitialState()));return Oa.useDebugValue(e),e}const KL=s=>{const t=DO(s),e=n=>tW(t,n);return Object.assign(e,t),e},eW=s=>s?KL(s):KL;let i_=0;const nW=eW(s=>(j1.onStart=(t,e,n)=>{s({active:!0,item:t,loaded:e,total:n,progress:(e-i_)/(n-i_)*100})},j1.onLoad=()=>{s({active:!1})},j1.onError=t=>s(e=>({errors:[...e.errors,t]})),j1.onProgress=(t,e,n)=>{e===n&&(i_=n),s({active:!0,item:t,loaded:e,total:n,progress:(e-i_)/(n-i_)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),iW=parseInt(e0.replace(/\D+/g,""));function JL(s,t){if(t===v9)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),s;if(t===ZM||t===C5){let e=s.getIndex();if(e===null){const a=[],l=s.getAttribute("position");if(l!==void 0){for(let u=0;u<l.count;u++)a.push(u);s.setIndex(a),e=s.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s}const n=e.count-2,i=[];if(e)if(t===ZM)for(let a=1;a<=n;a++)i.push(e.getX(0)),i.push(e.getX(a)),i.push(e.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(i.push(e.getX(a)),i.push(e.getX(a+1)),i.push(e.getX(a+2))):(i.push(e.getX(a+2)),i.push(e.getX(a+1)),i.push(e.getX(a)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=s.clone();return r.setIndex(i),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),s}function o3(s){if(typeof TextDecoder<"u")return new TextDecoder().decode(s);let t="";for(let e=0,n=s.length;e<n;e++)t+=String.fromCharCode(s[e]);try{return decodeURIComponent(escape(t))}catch{return t}}const Nm="srgb",$h="srgb-linear",ZL=3001,sW=3e3;class uR extends la{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new cW(e)}),this.register(function(e){return new uW(e)}),this.register(function(e){return new _W(e)}),this.register(function(e){return new AW(e)}),this.register(function(e){return new xW(e)}),this.register(function(e){return new fW(e)}),this.register(function(e){return new dW(e)}),this.register(function(e){return new pW(e)}),this.register(function(e){return new mW(e)}),this.register(function(e){return new lW(e)}),this.register(function(e){return new gW(e)}),this.register(function(e){return new hW(e)}),this.register(function(e){return new yW(e)}),this.register(function(e){return new vW(e)}),this.register(function(e){return new aW(e)}),this.register(function(e){return new bW(e)}),this.register(function(e){return new SW(e)})}load(t,e,n,i){const r=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const f=Wd.extractUrlBase(t);a=Wd.resolveURL(f,this.path)}else a=Wd.extractUrlBase(t);this.manager.itemStart(t);const l=function(f){i?i(f):console.error(f),r.manager.itemError(t),r.manager.itemEnd(t)},u=new Xo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(f){try{r.parse(f,a,function(m){e(m),r.manager.itemEnd(t)},l)}catch(m){l(m)}},n,l)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,i){let r;const a={},l={};if(typeof t=="string")r=JSON.parse(t);else if(t instanceof ArrayBuffer)if(o3(new Uint8Array(t.slice(0,4)))===eN){try{a[Rn.KHR_BINARY_GLTF]=new EW(t)}catch(m){i&&i(m);return}r=JSON.parse(a[Rn.KHR_BINARY_GLTF].content)}else r=JSON.parse(o3(new Uint8Array(t)));else r=t;if(r.asset===void 0||r.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new PW(r,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const m=this.pluginCallbacks[f](u);m.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[m.name]=m,a[m.name]=!0}if(r.extensionsUsed)for(let f=0;f<r.extensionsUsed.length;++f){const m=r.extensionsUsed[f],g=r.extensionsRequired||[];switch(m){case Rn.KHR_MATERIALS_UNLIT:a[m]=new oW;break;case Rn.KHR_DRACO_MESH_COMPRESSION:a[m]=new MW(r,this.dracoLoader);break;case Rn.KHR_TEXTURE_TRANSFORM:a[m]=new TW;break;case Rn.KHR_MESH_QUANTIZATION:a[m]=new CW;break;default:g.indexOf(m)>=0&&l[m]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+m+'".')}}u.setExtensions(a),u.setPlugins(l),u.parse(n,i)}parseAsync(t,e){const n=this;return new Promise(function(i,r){n.parse(t,e,i,r)})}}function rW(){let s={};return{get:function(t){return s[t]},add:function(t,e){s[t]=e},remove:function(t){delete s[t]},removeAll:function(){s={}}}}const Rn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class aW{constructor(t){this.parser=t,this.name=Rn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,i=e.length;n<i;n++){const r=e[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let i=e.cache.get(n);if(i)return i;const r=e.json,u=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let f;const m=new ae(16777215);u.color!==void 0&&m.setRGB(u.color[0],u.color[1],u.color[2],$h);const g=u.range!==void 0?u.range:0;switch(u.type){case"directional":f=new $5(m),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new Z5(m),f.distance=g;break;case"spot":f=new J5(m),f.distance=g,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,f.angle=u.spot.outerConeAngle,f.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return f.position.set(0,0,0),f.decay=2,xh(f,u),u.intensity!==void 0&&(f.intensity=u.intensity),f.name=e.createUniqueName(u.name||"light_"+t),i=Promise.resolve(f),e.cache.add(n,i),i}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,r=n.json.nodes[t],l=(r.extensions&&r.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return n._getNodeRef(e.cache,l,u)})}}class oW{constructor(){this.name=Rn.KHR_MATERIALS_UNLIT}getMaterialType(){return Go}extendParams(t,e,n){const i=[];t.color=new ae(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const a=r.baseColorFactor;t.color.setRGB(a[0],a[1],a[2],$h),t.opacity=a[3]}r.baseColorTexture!==void 0&&i.push(n.assignTexture(t,"map",r.baseColorTexture,Nm))}return Promise.all(i)}}class lW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name].emissiveStrength;return r!==void 0&&(e.emissiveIntensity=r),Promise.resolve()}}class cW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];if(a.clearcoatFactor!==void 0&&(e.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&r.push(n.assignTexture(e,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(e,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const l=a.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Pt(l,l)}return Promise.all(r)}}class uW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_DISPERSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return e.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class hW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];return a.iridescenceFactor!==void 0&&(e.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&r.push(n.assignTexture(e,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(e.iridescenceIOR=a.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&r.push(n.assignTexture(e,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(r)}}class fW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new ae(0,0,0),e.sheenRoughness=0,e.sheen=1;const a=i.extensions[this.name];if(a.sheenColorFactor!==void 0){const l=a.sheenColorFactor;e.sheenColor.setRGB(l[0],l[1],l[2],$h)}return a.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&r.push(n.assignTexture(e,"sheenColorMap",a.sheenColorTexture,Nm)),a.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(e,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(r)}}class dW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];return a.transmissionFactor!==void 0&&(e.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&r.push(n.assignTexture(e,"transmissionMap",a.transmissionTexture)),Promise.all(r)}}class pW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];e.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&r.push(n.assignTexture(e,"thicknessMap",a.thicknessTexture)),e.attenuationDistance=a.attenuationDistance||1/0;const l=a.attenuationColor||[1,1,1];return e.attenuationColor=new ae().setRGB(l[0],l[1],l[2],$h),Promise.all(r)}}class mW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return e.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class gW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];e.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&r.push(n.assignTexture(e,"specularIntensityMap",a.specularTexture));const l=a.specularColorFactor||[1,1,1];return e.specularColor=new ae().setRGB(l[0],l[1],l[2],$h),a.specularColorTexture!==void 0&&r.push(n.assignTexture(e,"specularColorMap",a.specularColorTexture,Nm)),Promise.all(r)}}class vW{constructor(t){this.parser=t,this.name=Rn.EXT_MATERIALS_BUMP}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];return e.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&r.push(n.assignTexture(e,"bumpMap",a.bumpTexture)),Promise.all(r)}}class yW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Bl}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];return a.anisotropyStrength!==void 0&&(e.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(e.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&r.push(n.assignTexture(e,"anisotropyMap",a.anisotropyTexture)),Promise.all(r)}}class _W{constructor(t){this.parser=t,this.name=Rn.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,i=n.textures[t];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],a=e.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r.source,a)}}class AW{constructor(t){this.parser=t,this.name=Rn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[e])return null;const a=r.extensions[e],l=i.images[a.source];let u=n.textureLoader;if(l.uri){const f=n.options.manager.getHandler(l.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(t,a.source,u);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class xW{constructor(t){this.parser=t,this.name=Rn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[e])return null;const a=r.extensions[e],l=i.images[a.source];let u=n.textureLoader;if(l.uri){const f=n.options.manager.getHandler(l.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(t,a.source,u);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class bW{constructor(t){this.name=Rn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],r=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(l){const u=i.byteOffset||0,f=i.byteLength||0,m=i.count,g=i.byteStride,v=new Uint8Array(l,u,f);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(m,g,v,i.mode,i.filter).then(function(_){return _.buffer}):a.ready.then(function(){const _=new ArrayBuffer(m*g);return a.decodeGltfBuffer(new Uint8Array(_),m,g,v,i.mode,i.filter),_})})}else return null}}class SW{constructor(t){this.name=Rn.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=e.meshes[n.mesh];for(const f of i.primitives)if(f.mode!==_l.TRIANGLES&&f.mode!==_l.TRIANGLE_STRIP&&f.mode!==_l.TRIANGLE_FAN&&f.mode!==void 0)return null;const a=n.extensions[this.name].attributes,l=[],u={};for(const f in a)l.push(this.parser.getDependency("accessor",a[f]).then(m=>(u[f]=m,u[f])));return l.length<1?null:(l.push(this.parser.createNodeMesh(t)),Promise.all(l).then(f=>{const m=f.pop(),g=m.isGroup?m.children:[m],v=f[0].count,_=[];for(const b of g){const C=new Fe,T=new nt,S=new aa,R=new nt(1,1,1),B=new N5(b.geometry,b.material,v);for(let D=0;D<v;D++)u.TRANSLATION&&T.fromBufferAttribute(u.TRANSLATION,D),u.ROTATION&&S.fromBufferAttribute(u.ROTATION,D),u.SCALE&&R.fromBufferAttribute(u.SCALE,D),B.setMatrixAt(D,C.compose(T,S,R));for(const D in u)if(D==="_COLOR_0"){const N=u[D];B.instanceColor=new Hg(N.array,N.itemSize,N.normalized)}else D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&b.geometry.setAttribute(D,u[D]);Hn.prototype.copy.call(B,b),this.parser.assignFinalMaterial(B),_.push(B)}return m.isGroup?(m.clear(),m.add(..._),m):_[0]}))}}const eN="glTF",s_=12,$L={JSON:1313821514,BIN:5130562};class EW{constructor(t){this.name=Rn.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,s_);if(this.header={magic:o3(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==eN)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-s_,i=new DataView(t,s_);let r=0;for(;r<n;){const a=i.getUint32(r,!0);r+=4;const l=i.getUint32(r,!0);if(r+=4,l===$L.JSON){const u=new Uint8Array(t,s_+r,a);this.content=o3(u)}else if(l===$L.BIN){const u=s_+r;this.body=t.slice(u,u+a)}r+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class MW{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Rn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,i=this.dracoLoader,r=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,l={},u={},f={};for(const m in a){const g=O8[m]||m.toLowerCase();l[g]=a[m]}for(const m in t.attributes){const g=O8[m]||m.toLowerCase();if(a[m]!==void 0){const v=n.accessors[t.attributes[m]],_=J1[v.componentType];f[g]=_.name,u[g]=v.normalized===!0}}return e.getDependency("bufferView",r).then(function(m){return new Promise(function(g,v){i.decodeDracoFile(m,function(_){for(const b in _.attributes){const C=_.attributes[b],T=u[b];T!==void 0&&(C.normalized=T)}g(_)},l,f,$h,v)})})}}class TW{constructor(){this.name=Rn.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class CW{constructor(){this.name=Rn.KHR_MESH_QUANTIZATION}}class nN extends Ty{constructor(t,e,n,i){super(t,e,n,i)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i*3+i;for(let a=0;a!==i;a++)e[a]=n[r+a];return e}interpolate_(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=l*2,f=l*3,m=i-e,g=(n-e)/m,v=g*g,_=v*g,b=t*f,C=b-f,T=-2*_+3*v,S=_-v,R=1-T,B=S-v+g;for(let D=0;D!==l;D++){const N=a[C+D+l],I=a[C+D+u]*m,F=a[b+D+l],z=a[b+D]*m;r[D]=R*N+B*I+T*F+S*z}return r}}const wW=new aa;class RW extends nN{interpolate_(t,e,n,i){const r=super.interpolate_(t,e,n,i);return wW.fromArray(r).normalize().toArray(r),r}}const _l={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},J1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tD={9728:os,9729:Ni,9984:Q3,9985:W1,9986:Rm,9987:Cl},eD={33071:zo,33648:ay,10497:tp},HC={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},O8={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...iW>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ud={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},LW={CUBICSPLINE:void 0,LINEAR:uy,STEP:cy},zC={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function DW(s){return s.DefaultMaterial===void 0&&(s.DefaultMaterial=new Px({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Dc})),s.DefaultMaterial}function gm(s,t,e){for(const n in e.extensions)s[n]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function xh(s,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(s.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function BW(s,t,e){let n=!1,i=!1,r=!1;for(let f=0,m=t.length;f<m;f++){const g=t[f];if(g.POSITION!==void 0&&(n=!0),g.NORMAL!==void 0&&(i=!0),g.COLOR_0!==void 0&&(r=!0),n&&i&&r)break}if(!n&&!i&&!r)return Promise.resolve(s);const a=[],l=[],u=[];for(let f=0,m=t.length;f<m;f++){const g=t[f];if(n){const v=g.POSITION!==void 0?e.getDependency("accessor",g.POSITION):s.attributes.position;a.push(v)}if(i){const v=g.NORMAL!==void 0?e.getDependency("accessor",g.NORMAL):s.attributes.normal;l.push(v)}if(r){const v=g.COLOR_0!==void 0?e.getDependency("accessor",g.COLOR_0):s.attributes.color;u.push(v)}}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(f){const m=f[0],g=f[1],v=f[2];return n&&(s.morphAttributes.position=m),i&&(s.morphAttributes.normal=g),r&&(s.morphAttributes.color=v),s.morphTargetsRelative=!0,s})}function OW(s,t){if(s.updateMorphTargets(),t.weights!==void 0)for(let e=0,n=t.weights.length;e<n;e++)s.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(s.morphTargetInfluences.length===e.length){s.morphTargetDictionary={};for(let n=0,i=e.length;n<i;n++)s.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function NW(s){let t;const e=s.extensions&&s.extensions[Rn.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+GC(e.attributes):t=s.indices+":"+GC(s.attributes)+":"+s.mode,s.targets!==void 0)for(let n=0,i=s.targets.length;n<i;n++)t+=":"+GC(s.targets[n]);return t}function GC(s){let t="";const e=Object.keys(s).sort();for(let n=0,i=e.length;n<i;n++)t+=e[n]+":"+s[e[n]]+";";return t}function N8(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function IW(s){return s.search(/\.jpe?g($|\?)/i)>0||s.search(/^data\:image\/jpeg/)===0?"image/jpeg":s.search(/\.webp($|\?)/i)>0||s.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const UW=new Fe;class PW{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new rW,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,r=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||i&&r<98?this.textureLoader=new cO(this.options.manager):this.textureLoader=new vO(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Xo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const l={scene:a[0][i.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:i.asset,parser:n,userData:{}};return gm(r,l,i),xh(l,i),Promise.all(n._invokeAll(function(u){return u.afterRoot&&u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();t(l)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=e.length;i<r;i++){const a=e[i].joints;for(let l=0,u=a.length;l<u;l++)t[a[l]].isBone=!0}for(let i=0,r=t.length;i<r;i++){const a=t[i];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const i=n.clone(),r=(a,l)=>{const u=this.associations.get(a);u!=null&&this.associations.set(l,u);for(const[f,m]of a.children.entries())r(m,l.children[f])};return r(n,i),i.name+="_instance_"+t.uses[e]++,i}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const i=t(e[n]);if(i)return i}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let i=0;i<e.length;i++){const r=t(e[i]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let i=this.cache.get(n);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this._invokeOne(function(r){return r.loadNode&&r.loadNode(e)});break;case"mesh":i=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(e)});break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(e)});break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(e)});break;case"texture":i=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(e)});break;case"skin":i=this.loadSkin(e);break;case"animation":i=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(e)});break;case"camera":i=this.loadCamera(e);break;default:if(i=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(t,e)}),!i)throw new Error("Unknown type: "+t);break}this.cache.add(n,i)}return i}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,i=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(i.map(function(r,a){return n.getDependency(t,a)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[Rn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(r,a){n.load(Wd.resolveURL(e.uri,i.path),r,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const i=e.byteLength||0,r=e.byteOffset||0;return n.slice(r,r+i)})}loadAccessor(t){const e=this,n=this.json,i=this.json.accessors[t];if(i.bufferView===void 0&&i.sparse===void 0){const a=HC[i.type],l=J1[i.componentType],u=i.normalized===!0,f=new l(i.count*a);return Promise.resolve(new zn(f,a,u))}const r=[];return i.bufferView!==void 0?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),i.sparse!==void 0&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then(function(a){const l=a[0],u=HC[i.type],f=J1[i.componentType],m=f.BYTES_PER_ELEMENT,g=m*u,v=i.byteOffset||0,_=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,b=i.normalized===!0;let C,T;if(_&&_!==g){const S=Math.floor(v/_),R="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+S+":"+i.count;let B=e.cache.get(R);B||(C=new f(l,S*_,i.count*_/m),B=new Lx(C,_/m),e.cache.add(R,B)),T=new ep(B,u,v%_/m,b)}else l===null?C=new f(i.count*u):C=new f(l,v,i.count*u),T=new zn(C,u,b);if(i.sparse!==void 0){const S=HC.SCALAR,R=J1[i.sparse.indices.componentType],B=i.sparse.indices.byteOffset||0,D=i.sparse.values.byteOffset||0,N=new R(a[1],B,i.sparse.count*S),I=new f(a[2],D,i.sparse.count*u);l!==null&&(T=new zn(T.array.slice(),T.itemSize,T.normalized));for(let F=0,z=N.length;F<z;F++){const U=N[F];if(T.setX(U,I[F*u]),u>=2&&T.setY(U,I[F*u+1]),u>=3&&T.setZ(U,I[F*u+2]),u>=4&&T.setW(U,I[F*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return T})}loadTexture(t){const e=this.json,n=this.options,r=e.textures[t].source,a=e.images[r];let l=this.textureLoader;if(a.uri){const u=n.manager.getHandler(a.uri);u!==null&&(l=u)}return this.loadTextureImage(t,r,l)}loadTextureImage(t,e,n){const i=this,r=this.json,a=r.textures[t],l=r.images[e],u=(l.uri||l.bufferView)+":"+a.sampler;if(this.textureCache[u])return this.textureCache[u];const f=this.loadImageSource(e,n).then(function(m){m.flipY=!1,m.name=a.name||l.name||"",m.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(m.name=l.uri);const v=(r.samplers||{})[a.sampler]||{};return m.magFilter=tD[v.magFilter]||Ni,m.minFilter=tD[v.minFilter]||Cl,m.wrapS=eD[v.wrapS]||tp,m.wrapT=eD[v.wrapT]||tp,i.associations.set(m,{textures:t}),m}).catch(function(){return null});return this.textureCache[u]=f,f}loadImageSource(t,e){const n=this,i=this.json,r=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(g=>g.clone());const a=i.images[t],l=self.URL||self.webkitURL;let u=a.uri||"",f=!1;if(a.bufferView!==void 0)u=n.getDependency("bufferView",a.bufferView).then(function(g){f=!0;const v=new Blob([g],{type:a.mimeType});return u=l.createObjectURL(v),u});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const m=Promise.resolve(u).then(function(g){return new Promise(function(v,_){let b=v;e.isImageBitmapLoader===!0&&(b=function(C){const T=new wi(C);T.needsUpdate=!0,v(T)}),e.load(Wd.resolveURL(g,r.path),b,void 0,_)})}).then(function(g){return f===!0&&l.revokeObjectURL(u),xh(g,a),g.userData.mimeType=a.mimeType||IW(a.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),g});return this.sourceCache[t]=m,m}assignTexture(t,e,n,i){const r=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),r.extensions[Rn.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[Rn.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=r.associations.get(a);a=r.extensions[Rn.KHR_TEXTURE_TRANSFORM].extendTexture(a,l),r.associations.set(a,u)}}return i!==void 0&&(typeof i=="number"&&(i=i===ZL?Nm:$h),"colorSpace"in a?a.colorSpace=i:a.encoding=i===Nm?ZL:sW),t[e]=a,a})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const i=e.attributes.tangent===void 0,r=e.attributes.color!==void 0,a=e.attributes.normal===void 0;if(t.isPoints){const l="PointsMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new s4,gs.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(l,u)),n=u}else if(t.isLine){const l="LineBasicMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new oa,gs.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,this.cache.add(l,u)),n=u}if(i||r||a){let l="ClonedMaterial:"+n.uuid+":";i&&(l+="derivative-tangents:"),r&&(l+="vertex-colors:"),a&&(l+="flat-shading:");let u=this.cache.get(l);u||(u=n.clone(),r&&(u.vertexColors=!0),a&&(u.flatShading=!0),i&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(n))),n=u}t.material=n}getMaterialType(){return Px}loadMaterial(t){const e=this,n=this.json,i=this.extensions,r=n.materials[t];let a;const l={},u=r.extensions||{},f=[];if(u[Rn.KHR_MATERIALS_UNLIT]){const g=i[Rn.KHR_MATERIALS_UNLIT];a=g.getMaterialType(),f.push(g.extendParams(l,r,e))}else{const g=r.pbrMetallicRoughness||{};if(l.color=new ae(1,1,1),l.opacity=1,Array.isArray(g.baseColorFactor)){const v=g.baseColorFactor;l.color.setRGB(v[0],v[1],v[2],$h),l.opacity=v[3]}g.baseColorTexture!==void 0&&f.push(e.assignTexture(l,"map",g.baseColorTexture,Nm)),l.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,l.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(f.push(e.assignTexture(l,"metalnessMap",g.metallicRoughnessTexture)),f.push(e.assignTexture(l,"roughnessMap",g.metallicRoughnessTexture))),a=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(t)}),f.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(t,l)})))}r.doubleSided===!0&&(l.side=Da);const m=r.alphaMode||zC.OPAQUE;if(m===zC.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,m===zC.MASK&&(l.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&a!==Go&&(f.push(e.assignTexture(l,"normalMap",r.normalTexture)),l.normalScale=new Pt(1,1),r.normalTexture.scale!==void 0)){const g=r.normalTexture.scale;l.normalScale.set(g,g)}if(r.occlusionTexture!==void 0&&a!==Go&&(f.push(e.assignTexture(l,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&a!==Go){const g=r.emissiveFactor;l.emissive=new ae().setRGB(g[0],g[1],g[2],$h)}return r.emissiveTexture!==void 0&&a!==Go&&f.push(e.assignTexture(l,"emissiveMap",r.emissiveTexture,Nm)),Promise.all(f).then(function(){const g=new a(l);return r.name&&(g.name=r.name),xh(g,r),e.associations.set(g,{materials:t}),r.extensions&&gm(i,g,r),g})}createUniqueName(t){const e=Qn.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,n=this.extensions,i=this.primitiveCache;function r(l){return n[Rn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,e).then(function(u){return nD(u,l,e)})}const a=[];for(let l=0,u=t.length;l<u;l++){const f=t[l],m=NW(f),g=i[m];if(g)a.push(g.promise);else{let v;f.extensions&&f.extensions[Rn.KHR_DRACO_MESH_COMPRESSION]?v=r(f):v=nD(new $e,f,e),i[m]={primitive:f,promise:v},a.push(v)}}return Promise.all(a)}loadMesh(t){const e=this,n=this.json,i=this.extensions,r=n.meshes[t],a=r.primitives,l=[];for(let u=0,f=a.length;u<f;u++){const m=a[u].material===void 0?DW(this.cache):this.getDependency("material",a[u].material);l.push(m)}return l.push(e.loadGeometries(a)),Promise.all(l).then(function(u){const f=u.slice(0,u.length-1),m=u[u.length-1],g=[];for(let _=0,b=m.length;_<b;_++){const C=m[_],T=a[_];let S;const R=f[_];if(T.mode===_l.TRIANGLES||T.mode===_l.TRIANGLE_STRIP||T.mode===_l.TRIANGLE_FAN||T.mode===void 0)S=r.isSkinnedMesh===!0?new O5(C,R):new as(C,R),S.isSkinnedMesh===!0&&S.normalizeSkinWeights(),T.mode===_l.TRIANGLE_STRIP?S.geometry=JL(S.geometry,C5):T.mode===_l.TRIANGLE_FAN&&(S.geometry=JL(S.geometry,ZM));else if(T.mode===_l.LINES)S=new Bc(C,R);else if(T.mode===_l.LINE_STRIP)S=new af(C,R);else if(T.mode===_l.LINE_LOOP)S=new I5(C,R);else if(T.mode===_l.POINTS)S=new U5(C,R);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+T.mode);Object.keys(S.geometry.morphAttributes).length>0&&OW(S,r),S.name=e.createUniqueName(r.name||"mesh_"+t),xh(S,r),T.extensions&&gm(i,S,T),e.assignFinalMaterial(S),g.push(S)}for(let _=0,b=g.length;_<b;_++)e.associations.set(g[_],{meshes:t,primitives:_});if(g.length===1)return r.extensions&&gm(i,g[0],r),g[0];const v=new Kh;r.extensions&&gm(i,v,r),e.associations.set(v,{meshes:t});for(let _=0,b=g.length;_<b;_++)v.add(g[_]);return v})}loadCamera(t){let e;const n=this.json.cameras[t],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?e=new Rs($_.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(e=new Cy(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),xh(e,n),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],n=[];for(let i=0,r=e.joints.length;i<r;i++)n.push(this._loadNodeShallow(e.joints[i]));return e.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const r=i.pop(),a=i,l=[],u=[];for(let f=0,m=a.length;f<m;f++){const g=a[f];if(g){l.push(g);const v=new Fe;r!==null&&v.fromArray(r.array,f*16),u.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[f])}return new Dx(l,u)})}loadAnimation(t){const e=this.json,n=this,i=e.animations[t],r=i.name?i.name:"animation_"+t,a=[],l=[],u=[],f=[],m=[];for(let g=0,v=i.channels.length;g<v;g++){const _=i.channels[g],b=i.samplers[_.sampler],C=_.target,T=C.node,S=i.parameters!==void 0?i.parameters[b.input]:b.input,R=i.parameters!==void 0?i.parameters[b.output]:b.output;C.node!==void 0&&(a.push(this.getDependency("node",T)),l.push(this.getDependency("accessor",S)),u.push(this.getDependency("accessor",R)),f.push(b),m.push(C))}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(f),Promise.all(m)]).then(function(g){const v=g[0],_=g[1],b=g[2],C=g[3],T=g[4],S=[];for(let R=0,B=v.length;R<B;R++){const D=v[R],N=_[R],I=b[R],F=C[R],z=T[R];if(D===void 0)continue;D.updateMatrix&&D.updateMatrix();const U=n._createAnimationTracks(D,N,I,F,z);if(U)for(let P=0;P<U.length;P++)S.push(U[P])}return new my(r,void 0,S)})}createNodeMesh(t){const e=this.json,n=this,i=e.nodes[t];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(r){const a=n._getNodeRef(n.meshCache,i.mesh,r);return i.weights!==void 0&&a.traverse(function(l){if(l.isMesh)for(let u=0,f=i.weights.length;u<f;u++)l.morphTargetInfluences[u]=i.weights[u]}),a})}loadNode(t){const e=this.json,n=this,i=e.nodes[t],r=n._loadNodeShallow(t),a=[],l=i.children||[];for(let f=0,m=l.length;f<m;f++)a.push(n.getDependency("node",l[f]));const u=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([r,Promise.all(a),u]).then(function(f){const m=f[0],g=f[1],v=f[2];v!==null&&m.traverse(function(_){_.isSkinnedMesh&&_.bind(v,UW)});for(let _=0,b=g.length;_<b;_++)m.add(g[_]);return m})}_loadNodeShallow(t){const e=this.json,n=this.extensions,i=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const r=e.nodes[t],a=r.name?i.createUniqueName(r.name):"",l=[],u=i._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(t)});return u&&l.push(u),r.camera!==void 0&&l.push(i.getDependency("camera",r.camera).then(function(f){return i._getNodeRef(i.cameraCache,r.camera,f)})),i._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(t)}).forEach(function(f){l.push(f)}),this.nodeCache[t]=Promise.all(l).then(function(f){let m;if(r.isBone===!0?m=new n4:f.length>1?m=new Kh:f.length===1?m=f[0]:m=new Hn,m!==f[0])for(let g=0,v=f.length;g<v;g++)m.add(f[g]);if(r.name&&(m.userData.name=r.name,m.name=a),xh(m,r),r.extensions&&gm(n,m,r),r.matrix!==void 0){const g=new Fe;g.fromArray(r.matrix),m.applyMatrix4(g)}else r.translation!==void 0&&m.position.fromArray(r.translation),r.rotation!==void 0&&m.quaternion.fromArray(r.rotation),r.scale!==void 0&&m.scale.fromArray(r.scale);return i.associations.has(m)||i.associations.set(m,{}),i.associations.get(m).nodes=t,m}),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],i=this,r=new Kh;n.name&&(r.name=i.createUniqueName(n.name)),xh(r,n),n.extensions&&gm(e,r,n);const a=n.nodes||[],l=[];for(let u=0,f=a.length;u<f;u++)l.push(i.getDependency("node",a[u]));return Promise.all(l).then(function(u){for(let m=0,g=u.length;m<g;m++)r.add(u[m]);const f=m=>{const g=new Map;for(const[v,_]of i.associations)(v instanceof gs||v instanceof wi)&&g.set(v,_);return m.traverse(v=>{const _=i.associations.get(v);_!=null&&g.set(v,_)}),g};return i.associations=f(r),r})}_createAnimationTracks(t,e,n,i,r){const a=[],l=t.name?t.name:t.uuid,u=[];ud[r.path]===ud.weights?t.traverse(function(v){v.morphTargetInfluences&&u.push(v.name?v.name:v.uuid)}):u.push(l);let f;switch(ud[r.path]){case ud.weights:f=Gg;break;case ud.rotation:f=kg;break;case ud.position:case ud.scale:f=Vg;break;default:switch(n.itemSize){case 1:f=Gg;break;case 2:case 3:default:f=Vg;break}break}const m=i.interpolation!==void 0?LW[i.interpolation]:uy,g=this._getArrayFromAccessor(n);for(let v=0,_=u.length;v<_;v++){const b=new f(u[v]+"."+ud[r.path],e.array,g,m);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(b),a.push(b)}return a}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const n=N8(e.constructor),i=new Float32Array(e.length);for(let r=0,a=e.length;r<a;r++)i[r]=e[r]*n;e=i}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(n){const i=this instanceof kg?RW:nN;return new i(this.times,this.values,this.getValueSize()/3,n)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function FW(s,t,e){const n=t.attributes,i=new Br;if(n.POSITION!==void 0){const l=e.json.accessors[n.POSITION],u=l.min,f=l.max;if(u!==void 0&&f!==void 0){if(i.set(new nt(u[0],u[1],u[2]),new nt(f[0],f[1],f[2])),l.normalized){const m=N8(J1[l.componentType]);i.min.multiplyScalar(m),i.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=t.targets;if(r!==void 0){const l=new nt,u=new nt;for(let f=0,m=r.length;f<m;f++){const g=r[f];if(g.POSITION!==void 0){const v=e.json.accessors[g.POSITION],_=v.min,b=v.max;if(_!==void 0&&b!==void 0){if(u.setX(Math.max(Math.abs(_[0]),Math.abs(b[0]))),u.setY(Math.max(Math.abs(_[1]),Math.abs(b[1]))),u.setZ(Math.max(Math.abs(_[2]),Math.abs(b[2]))),v.normalized){const C=N8(J1[v.componentType]);u.multiplyScalar(C)}l.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(l)}s.boundingBox=i;const a=new pr;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,s.boundingSphere=a}function nD(s,t,e){const n=t.attributes,i=[];function r(a,l){return e.getDependency("accessor",a).then(function(u){s.setAttribute(l,u)})}for(const a in n){const l=O8[a]||a.toLowerCase();l in s.attributes||i.push(r(n[a],l))}if(t.indices!==void 0&&!s.index){const a=e.getDependency("accessor",t.indices).then(function(l){s.setIndex(l)});i.push(a)}return xh(s,t),FW(s,t,e),Promise.all(i).then(function(){return t.targets!==void 0?BW(s,t.targets,e):s})}const kC=new WeakMap;class HW extends la{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,i){const r=new Xo(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,a=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,l).then(e).catch(i)},n,i)}decodeDracoFile(t,e,n,i){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(t,r).then(e)}decodeGeometry(t,e){for(const u in e.attributeTypes){const f=e.attributeTypes[u];f.BYTES_PER_ELEMENT!==void 0&&(e.attributeTypes[u]=f.name)}const n=JSON.stringify(e);if(kC.has(t)){const u=kC.get(t);if(u.key===n)return u.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const r=this.workerNextTaskID++,a=t.byteLength,l=this._getWorker(r,a).then(u=>(i=u,new Promise((f,m)=>{i._callbacks[r]={resolve:f,reject:m},i.postMessage({type:"decode",id:r,taskConfig:e,buffer:t},[t])}))).then(u=>this._createGeometry(u.geometry));return l.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),kC.set(t,{key:n,promise:l}),l}_createGeometry(t){const e=new $e;t.index&&e.setIndex(new zn(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const i=t.attributes[n],r=i.name,a=i.array,l=i.itemSize;e.setAttribute(r,new zn(a,l))}return e}_loadLibrary(t,e){const n=new Xo(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((i,r)=>{n.load(t,i,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(n=>{const i=n[0];t||(this.decoderConfig.wasmBinary=n[1]);const r=zW.toString(),a=["/* draco decoder */",i,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(r){const a=r.data;switch(a.type){case"decode":i._callbacks[a.id].resolve(a);break;case"error":i._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,r){return i._taskLoad>r._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function zW(){let s,t;onmessage=function(a){const l=a.data;switch(l.type){case"init":s=l.decoderConfig,t=new Promise(function(m){s.onModuleLoaded=function(g){m({draco:g})},DracoDecoderModule(s)});break;case"decode":const u=l.buffer,f=l.taskConfig;t.then(m=>{const g=m.draco,v=new g.Decoder,_=new g.DecoderBuffer;_.Init(new Int8Array(u),u.byteLength);try{const b=e(g,v,_,f),C=b.attributes.map(T=>T.array.buffer);b.index&&C.push(b.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:b},C)}catch(b){console.error(b),self.postMessage({type:"error",id:l.id,error:b.message})}finally{g.destroy(_),g.destroy(v)}});break}};function e(a,l,u,f){const m=f.attributeIDs,g=f.attributeTypes;let v,_;const b=l.GetEncodedGeometryType(u);if(b===a.TRIANGULAR_MESH)v=new a.Mesh,_=l.DecodeBufferToMesh(u,v);else if(b===a.POINT_CLOUD)v=new a.PointCloud,_=l.DecodeBufferToPointCloud(u,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!_.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+_.error_msg());const C={index:null,attributes:[]};for(const T in m){const S=self[g[T]];let R,B;if(f.useUniqueIDs)B=m[T],R=l.GetAttributeByUniqueId(v,B);else{if(B=l.GetAttributeId(v,a[m[T]]),B===-1)continue;R=l.GetAttribute(v,B)}C.attributes.push(i(a,l,v,T,S,R))}return b===a.TRIANGULAR_MESH&&(C.index=n(a,l,v)),a.destroy(v),C}function n(a,l,u){const m=u.num_faces()*3,g=m*4,v=a._malloc(g);l.GetTrianglesUInt32Array(u,g,v);const _=new Uint32Array(a.HEAPF32.buffer,v,m).slice();return a._free(v),{array:_,itemSize:1}}function i(a,l,u,f,m,g){const v=g.num_components(),b=u.num_points()*v,C=b*m.BYTES_PER_ELEMENT,T=r(a,m),S=a._malloc(C);l.GetAttributeDataArrayForAllPoints(u,g,T,C,S);const R=new m(a.HEAPF32.buffer,S,b).slice();return a._free(S),{name:f,array:R,itemSize:v}}function r(a,l){switch(l){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let pE;const VC=()=>{if(pE)return pE;const s="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=s;WebAssembly.validate(e)&&(i=t);let r;const a=WebAssembly.instantiate(l(i),{}).then(g=>{r=g.instance,r.exports.__wasm_call_ctors()});function l(g){const v=new Uint8Array(g.length);for(let b=0;b<g.length;++b){const C=g.charCodeAt(b);v[b]=C>96?C-71:C>64?C-65:C>47?C+4:C>46?63:62}let _=0;for(let b=0;b<g.length;++b)v[_++]=v[b]<60?n[v[b]]:(v[b]-60)*64+v[++b];return v.buffer.slice(0,_)}function u(g,v,_,b,C,T){const S=r.exports.sbrk,R=_+3&-4,B=S(R*b),D=S(C.length),N=new Uint8Array(r.exports.memory.buffer);N.set(C,D);const I=g(B,_,b,D,C.length);if(I===0&&T&&T(B,R,b),v.set(N.subarray(B,B+_*b)),S(B-S(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},m={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return pE={ready:a,supported:!0,decodeVertexBuffer(g,v,_,b,C){u(r.exports.meshopt_decodeVertexBuffer,g,v,_,b,r.exports[f[C]])},decodeIndexBuffer(g,v,_,b){u(r.exports.meshopt_decodeIndexBuffer,g,v,_,b)},decodeIndexSequence(g,v,_,b){u(r.exports.meshopt_decodeIndexSequence,g,v,_,b)},decodeGltfBuffer(g,v,_,b,C,T){u(r.exports[m[C]],g,v,_,b,r.exports[f[T]])}},pE};let mE=null,iN="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function sN(s=!0,t=!0,e){return n=>{e&&e(n),s&&(mE||(mE=new HW),mE.setDecoderPath(typeof s=="string"?s:iN),n.setDRACOLoader(mE)),t&&n.setMeshoptDecoder(typeof VC=="function"?VC():VC)}}const zx=(s,t,e,n)=>Hx(uR,s,sN(t,e,n));zx.preload=(s,t,e,n)=>Hx.preload(uR,s,sN(t,e,n));zx.clear=s=>Hx.clear(uR,s);zx.setDecoderPath=s=>{iN=s};const GW="modulepreload",kW=function(s){return"/vibefolio/"+s},iD={},gE=function(t,e,n){let i=Promise.resolve();if(e&&e.length>0){let a=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=a(e.map(f=>{if(f=kW(f),f in iD)return;iD[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":GW,m||(v.as="script"),v.crossOrigin="",v.href=f,u&&v.setAttribute("nonce",u),document.head.appendChild(v),m)return new Promise((_,b)=>{v.addEventListener("load",_),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})};zx.preload("models/retro_computer.glb");function VW(s){const t=ht.useRef(null),{nodes:e,materials:n}=zx("models/retro_computer.glb");return J.jsx("group",{ref:t,children:J.jsxs("group",{...s,dispose:null,children:[J.jsx("mesh",{castShadow:!0,geometry:e.Object_5.geometry,material:n.material_0,position:[.063,0,.438]}),J.jsx("mesh",{castShadow:!0,geometry:e.Object_7.geometry,material:n.material_0,position:[.063,.375,.438]}),J.jsx("mesh",{castShadow:!0,geometry:e.Object_9.geometry,material:n.material_0,position:[.063,.5,.438]}),J.jsx("mesh",{castShadow:!0,geometry:e.Object_11.geometry,material:n.material_0,position:[.063,.563,.313]}),J.jsx("mesh",{castShadow:!0,geometry:e.Object_13.geometry,material:n.material_0,position:[.063,1.5,.313]}),J.jsx("mesh",{castShadow:!0,geometry:e.Object_15.geometry,material:n.material_0,position:[.063,1.313,.313]}),J.jsx("mesh",{castShadow:!0,geometry:e.Object_17.geometry,material:n.material_0,position:[-1.031,1.313,.313]}),J.jsx("mesh",{castShadow:!0,geometry:e.Object_19.geometry,material:n.material_0,position:[-.094,1.313,.313]}),J.jsx("mesh",{castShadow:!0,geometry:e.Object_21.geometry,material:n.material_0,position:[-.094,1.313,.5]}),J.jsx("mesh",{castShadow:!0,geometry:e.Object_23.geometry,material:n.material_0,position:[-.094,1.188,.5]}),J.jsx("mesh",{castShadow:!0,geometry:e.Object_25.geometry,material:n.material_0,position:[.188,0,-.75]}),J.jsx("mesh",{castShadow:!0,geometry:e.Object_27.geometry,material:n.material_0,position:[-.75,0,-.625]})]})})}function QW(s){ht.useEffect(()=>{const t=e=>{s({x:e.clientX,y:e.clientY})};return window.addEventListener("pointermove",t),()=>window.removeEventListener("pointermove",t)},[s])}function XW(s,t){const{size:e}=x4(),{enabled:n=!0,initialAngle:i=0}=t,r=4,a=Math.PI/24,l=ht.useRef(i),u=ht.useRef(-a);QW(f=>{const m=f.x/e.width*1-1;u.current=m-a}),lR((f,m)=>{if(!n)return;l.current=$_.damp(l.current,u.current,1,m);const g=r*Math.sin(l.current),v=r*Math.cos(l.current);s&&(s.position.set(g,2,v),s.lookAt(0,0,0))})}const rN=ht.createContext(null),aN=()=>{const s=ht.useContext(rN);if(!s)throw new Error("useCameraContext must be used within CameraProvider");return s};function jW({children:s}){const[t,e]=ht.useState(!1);return J.jsx(rN.Provider,{value:{started:t,start:()=>e(!0)},children:s})}function qW(){const{camera:s}=x4(),{started:t}=aN(),[e,n]=ht.useState(!1),i=ht.useRef(0),r=4,a=new nt(-5,3,5),l=new nt(r*Math.sin(-1),2,r*Math.cos(-1)),u=Math.atan2(l.x,l.z);return lR((f,m)=>{if(!t||e)return;i.current+=m*.5;const g=$_.clamp(i.current,0,1),v=$_.smoothstep(g,0,1),_=a.clone().lerp(l,v);s.position.copy(_),s.lookAt(0,0,0),g>=1&&n(!0)}),XW(s,{initialAngle:u,enabled:e}),null}/**
 * postprocessing v6.37.3 build Sun Apr 27 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var QC=1/1e3,YW=1e3,WW=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(s){typeof document<"u"&&document.hidden!==void 0&&(s?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=s)}get delta(){return this._delta*QC}get fixedDelta(){return this._fixedDelta*QC}set fixedDelta(s){this._fixedDelta=s*YW}get elapsed(){return this._elapsed*QC}update(s){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(s!==void 0?s:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(s){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},KW=(()=>{const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),e=new $e;return e.setAttribute("position",new zn(s,3)),e.setAttribute("uv",new zn(t,2)),e})(),oo=class I8{static get fullscreenGeometry(){return KW}constructor(t="Pass",e=new eA,n=new wx){this.name=t,this.renderer=null,this.scene=e,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;e!==null?e.material=t:(e=new as(I8.fullscreenGeometry,t),e.frustumCulled=!1,this.scene===null&&(this.scene=new eA),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=ap){}render(t,e,n,i,r){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof Ds||e instanceof gs||e instanceof wi||e instanceof I8)&&this[t].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},JW=class extends oo{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(s,t,e,n,i){const r=s.state.buffers.stencil;r.setLocked(!1),r.setTest(!1)}},ZW=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,oN="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",lN=class extends Ks{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new xn(null),opacity:new xn(1)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:ZW,vertexShader:oN})}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.uniforms.inputBuffer.value=s}getOpacity(s){return this.uniforms.opacity.value}setOpacity(s){this.uniforms.opacity.value=s}},$W=class extends oo{constructor(s,t=!0){super("CopyPass"),this.fullscreenMaterial=new lN,this.needsSwap=!1,this.renderTarget=s,s===void 0&&(this.renderTarget=new Ds(1,1,{minFilter:Ni,magFilter:Ni,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(s){this.autoResize=s}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(s){this.autoResize=s}render(s,t,e,n,i){this.fullscreenMaterial.inputBuffer=t.texture,s.setRenderTarget(this.renderToScreen?null:this.renderTarget),s.render(this.scene,this.camera)}setSize(s,t){this.autoResize&&this.renderTarget.setSize(s,t)}initialize(s,t,e){e!==void 0&&(this.renderTarget.texture.type=e,e!==Ws?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":s!==null&&s.outputColorSpace===Kn&&(this.renderTarget.texture.colorSpace=Kn))}},sD=new ae,cN=class extends oo{constructor(s=!0,t=!0,e=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=s,this.depth=t,this.stencil=e,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(s,t,e){this.color=s,this.depth=t,this.stencil=e}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(s){this.overrideClearColor=s}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(s){this.overrideClearAlpha=s}render(s,t,e,n,i){const r=this.overrideClearColor,a=this.overrideClearAlpha,l=s.getClearAlpha(),u=r!==null,f=a>=0;u?(s.getClearColor(sD),s.setClearColor(r,f?a:l)):f&&s.setClearAlpha(a),s.setRenderTarget(this.renderToScreen?null:t),s.clear(this.color,this.depth,this.stencil),u?s.setClearColor(sD,l):f&&s.setClearAlpha(l)}},tK=class extends oo{constructor(s,t){super("MaskPass",s,t),this.needsSwap=!1,this.clearPass=new cN(!1,!1,!0),this.inverse=!1}set mainScene(s){this.scene=s}set mainCamera(s){this.camera=s}get inverted(){return this.inverse}set inverted(s){this.inverse=s}get clear(){return this.clearPass.enabled}set clear(s){this.clearPass.enabled=s}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(s){this.inverted=s}render(s,t,e,n,i){const r=s.getContext(),a=s.state.buffers,l=this.scene,u=this.camera,f=this.clearPass,m=this.inverted?0:1,g=1-m;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),a.stencil.setFunc(r.ALWAYS,m,4294967295),a.stencil.setClear(g),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(s,null):(f.render(s,t),f.render(s,e))),this.renderToScreen?(s.setRenderTarget(null),s.render(l,u)):(s.setRenderTarget(t),s.render(l,u),s.setRenderTarget(e),s.render(l,u)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(r.EQUAL,1,4294967295),a.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),a.stencil.setLocked(!0)}},eK=class{constructor(s=null,{depthBuffer:t=!0,stencilBuffer:e=!1,multisampling:n=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,e,i,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new $W,this.depthTexture=null,this.passes=[],this.timer=new WW,this.autoRenderToScreen=!0,this.setRenderer(s)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(s){const t=this.inputBuffer,e=this.multisampling;e>0&&s>0?(this.inputBuffer.samples=s,this.outputBuffer.samples=s,this.inputBuffer.dispose(),this.outputBuffer.dispose()):e!==s&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,s),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(s){if(this.renderer=s,s!==null){const t=s.getSize(new Pt),e=s.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===Ws&&s.outputColorSpace===Kn&&(this.inputBuffer.texture.colorSpace=Kn,this.outputBuffer.texture.colorSpace=Kn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),s.autoClear=!1,this.setSize(t.width,t.height);for(const i of this.passes)i.initialize(s,e,n)}}replaceRenderer(s,t=!0){const e=this.renderer,n=e.domElement.parentNode;return this.setRenderer(s),t&&n!==null&&(n.removeChild(e.domElement),n.appendChild(s.domElement)),e}createDepthTexture(){const s=this.depthTexture=new Bx;return this.inputBuffer.depthTexture=s,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(s.format=Fg,s.type=Pg):s.type=Hu,s}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const s of this.passes)s.setDepthTexture(null)}}createBuffer(s,t,e,n){const i=this.renderer,r=i===null?new Pt:i.getDrawingBufferSize(new Pt),a={minFilter:Ni,magFilter:Ni,stencilBuffer:t,depthBuffer:s,type:e},l=new Ds(r.width,r.height,a);return n>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=n),e===Ws&&i!==null&&i.outputColorSpace===Kn&&(l.texture.colorSpace=Kn),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(s){for(const t of this.passes)t.mainScene=s}setMainCamera(s){for(const t of this.passes)t.mainCamera=s}addPass(s,t){const e=this.passes,n=this.renderer,i=n.getDrawingBufferSize(new Pt),r=n.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(s.setRenderer(n),s.setSize(i.width,i.height),s.initialize(n,r,a),this.autoRenderToScreen&&(e.length>0&&(e[e.length-1].renderToScreen=!1),s.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?e.splice(t,0,s):e.push(s),this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!0),s.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(s of e)s.setDepthTexture(l)}else s.setDepthTexture(this.depthTexture)}removePass(s){const t=this.passes,e=t.indexOf(s);if(e!==-1&&t.splice(e,1).length>0){if(this.depthTexture!==null){const r=(l,u)=>l||u.needsDepthTexture;t.reduce(r,!1)||(s.getDepthTexture()===this.depthTexture&&s.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&e===t.length&&(s.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const s=this.passes;this.deleteDepthTexture(),s.length>0&&(this.autoRenderToScreen&&(s[s.length-1].renderToScreen=!1),this.passes=[])}render(s){const t=this.renderer,e=this.copyPass;let n=this.inputBuffer,i=this.outputBuffer,r=!1,a,l,u;s===void 0&&(this.timer.update(),s=this.timer.getDelta());for(const f of this.passes)f.enabled&&(f.render(t,n,i,s,r),f.needsSwap&&(r&&(e.renderToScreen=f.renderToScreen,a=t.getContext(),l=t.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),e.render(t,n,i,s,r),l.setFunc(a.EQUAL,1,4294967295)),u=n,n=i,i=u),f instanceof tK?r=!0:f instanceof JW&&(r=!1))}setSize(s,t,e){const n=this.renderer,i=n.getSize(new Pt);(s===void 0||t===void 0)&&(s=i.width,t=i.height),(i.width!==s||i.height!==t)&&n.setSize(s,t,e);const r=n.getDrawingBufferSize(new Pt);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const a of this.passes)a.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const s of this.passes)s.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),oo.fullscreenGeometry.dispose()}},Kd={NONE:0,DEPTH:1,CONVOLUTION:2},Wn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},nK=class{constructor(){this.shaderParts=new Map([[Wn.FRAGMENT_HEAD,null],[Wn.FRAGMENT_MAIN_UV,null],[Wn.FRAGMENT_MAIN_IMAGE,null],[Wn.VERTEX_HEAD,null],[Wn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Kd.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=zu}},XC=!1,rD=class{constructor(s=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(s),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let e;if(t.material.flatShading)switch(t.material.side){case Da:e=this.materialsFlatShadedDoubleSide;break;case qs:e=this.materialsFlatShadedBackSide;break;default:e=this.materialsFlatShaded;break}else switch(t.material.side){case Da:e=this.materialsDoubleSide;break;case qs:e=this.materialsBackSide;break;default:e=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=e[2]:t.isInstancedMesh?t.material=e[1]:t.material=e[0],++this.meshCount}}}cloneMaterial(s){if(!(s instanceof Ks))return s.clone();const t=s.uniforms,e=new Map;for(const i in t){const r=t[i].value;r.isRenderTargetTexture&&(t[i].value=null,e.set(i,r))}const n=s.clone();for(const i of e)t[i[0]].value=i[1],n.uniforms[i[0]].value=i[1];return n}setMaterial(s){if(this.disposeMaterials(),this.material=s,s!==null){const t=this.materials=[this.cloneMaterial(s),this.cloneMaterial(s),this.cloneMaterial(s)];for(const e of t)e.uniforms=Object.assign({},s.uniforms),e.side=Dc;t[2].skinning=!0,this.materialsBackSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},s.uniforms),n.side=qs,n}),this.materialsDoubleSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},s.uniforms),n.side=Da,n}),this.materialsFlatShaded=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},s.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},s.uniforms),n.flatShading=!0,n.side=qs,n}),this.materialsFlatShadedDoubleSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},s.uniforms),n.flatShading=!0,n.side=Da,n})}}render(s,t,e){const n=s.shadowMap.enabled;if(s.shadowMap.enabled=!1,XC){const i=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),s.render(t,e);for(const r of i)r[0].material=r[1];this.meshCount!==i.size&&i.clear()}else{const i=t.overrideMaterial;t.overrideMaterial=this.material,s.render(t,e),t.overrideMaterial=i}s.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){const s=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of s)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return XC}static set workaroundEnabled(s){XC=s}},hd=-1,ia=class extends Yo{constructor(s,t=hd,e=hd,n=1){super(),this.resizable=s,this.baseSize=new Pt(1,1),this.preferredSize=new Pt(t,e),this.target=this.preferredSize,this.s=n,this.effectiveSize=new Pt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const s=this.baseSize,t=this.preferredSize,e=this.effectiveSize,n=this.scale;t.width!==hd?e.width=t.width:t.height!==hd?e.width=Math.round(t.height*(s.width/Math.max(s.height,1))):e.width=Math.round(s.width*n),t.height!==hd?e.height=t.height:t.width!==hd?e.height=Math.round(t.width/Math.max(s.width/Math.max(s.height,1),1)):e.height=Math.round(s.height*n)}get width(){return this.effectiveSize.width}set width(s){this.preferredWidth=s}get height(){return this.effectiveSize.height}set height(s){this.preferredHeight=s}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(s){this.s!==s&&(this.s=s,this.preferredSize.setScalar(hd),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(s){this.scale=s}get baseWidth(){return this.baseSize.width}set baseWidth(s){this.baseSize.width!==s&&(this.baseSize.width=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(s){this.baseWidth=s}get baseHeight(){return this.baseSize.height}set baseHeight(s){this.baseSize.height!==s&&(this.baseSize.height=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(s){this.baseHeight=s}setBaseSize(s,t){(this.baseSize.width!==s||this.baseSize.height!==t)&&(this.baseSize.set(s,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(s){this.preferredSize.width!==s&&(this.preferredSize.width=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(s){this.preferredWidth=s}get preferredHeight(){return this.preferredSize.height}set preferredHeight(s){this.preferredSize.height!==s&&(this.preferredSize.height=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(s){this.preferredHeight=s}setPreferredSize(s,t){(this.preferredSize.width!==s||this.preferredSize.height!==t)&&(this.preferredSize.set(s,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(s){this.s=s.scale,this.baseSize.set(s.baseWidth,s.baseHeight),this.preferredSize.set(s.preferredWidth,s.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return hd}},Tn={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},iK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",sK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",rK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",aK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",oK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",lK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",cK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",uK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",hK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",fK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",dK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",pK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",mK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",gK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",vK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",yK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",_K="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",AK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",xK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",bK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",SK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",EK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",MK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",TK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",CK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",wK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",RK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",LK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",DK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",BK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",OK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",NK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",IK=new Map([[Tn.ADD,iK],[Tn.ALPHA,sK],[Tn.AVERAGE,rK],[Tn.COLOR,aK],[Tn.COLOR_BURN,oK],[Tn.COLOR_DODGE,lK],[Tn.DARKEN,cK],[Tn.DIFFERENCE,uK],[Tn.DIVIDE,hK],[Tn.DST,null],[Tn.EXCLUSION,fK],[Tn.HARD_LIGHT,dK],[Tn.HARD_MIX,pK],[Tn.HUE,mK],[Tn.INVERT,gK],[Tn.INVERT_RGB,vK],[Tn.LIGHTEN,yK],[Tn.LINEAR_BURN,_K],[Tn.LINEAR_DODGE,AK],[Tn.LINEAR_LIGHT,xK],[Tn.LUMINOSITY,bK],[Tn.MULTIPLY,SK],[Tn.NEGATION,EK],[Tn.NORMAL,MK],[Tn.OVERLAY,TK],[Tn.PIN_LIGHT,CK],[Tn.REFLECT,wK],[Tn.SATURATION,RK],[Tn.SCREEN,LK],[Tn.SOFT_LIGHT,DK],[Tn.SRC,BK],[Tn.SUBTRACT,OK],[Tn.VIVID_LIGHT,NK]]),UK=class extends Yo{constructor(s,t=1){super(),this._blendFunction=s,this.opacity=new xn(t)}getOpacity(){return this.opacity.value}setOpacity(s){this.opacity.value=s}get blendFunction(){return this._blendFunction}set blendFunction(s){this._blendFunction=s,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(s){this.blendFunction=s}getShaderCode(){return IK.get(this.blendFunction)}},Xg=class extends Yo{constructor(s,t,{attributes:e=Kd.NONE,blendFunction:n=Tn.NORMAL,defines:i=new Map,uniforms:r=new Map,extensions:a=null,vertexShader:l=null}={}){super(),this.name=s,this.renderer=null,this.attributes=e,this.fragmentShader=t,this.vertexShader=l,this.defines=i,this.uniforms=r,this.extensions=a,this.blendMode=new UK(n),this.blendMode.addEventListener("change",u=>this.setChanged()),this._inputColorSpace=zu,this._outputColorSpace=Mc}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(s){this._inputColorSpace=s,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(s){this._outputColorSpace=s,this.setChanged()}set mainScene(s){}set mainCamera(s){}getName(){return this.name}setRenderer(s){this.renderer=s}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(s){this.attributes=s,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(s){this.fragmentShader=s,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(s){this.vertexShader=s,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(s,t=ap){}update(s,t,e){}setSize(s,t){}initialize(s,t,e){}dispose(){for(const s of Object.keys(this)){const t=this[s];(t instanceof Ds||t instanceof gs||t instanceof wi||t instanceof oo)&&this[s].dispose()}}},hR={MEDIUM:2,LARGE:3},PK=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,FK="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",HK=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],zK=class extends Ks{constructor(s=new Bn){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new xn(null),texelSize:new xn(new Bn),scale:new xn(1),kernel:new xn(0)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:PK,vertexShader:FK}),this.setTexelSize(s.x,s.y),this.kernelSize=hR.MEDIUM}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.inputBuffer=s}get kernelSequence(){return HK[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(s){this.uniforms.scale.value=s}getScale(){return this.uniforms.scale.value}setScale(s){this.uniforms.scale.value=s}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(s){this.uniforms.kernel.value=s}setKernel(s){this.kernel=s}setTexelSize(s,t){this.uniforms.texelSize.value.set(s,t,s*.5,t*.5)}setSize(s,t){const e=1/s,n=1/t;this.uniforms.texelSize.value.set(e,n,e*.5,n*.5)}},GK=class extends oo{constructor({kernelSize:s=hR.MEDIUM,resolutionScale:t=.5,width:e=ia.AUTO_SIZE,height:n=ia.AUTO_SIZE,resolutionX:i=e,resolutionY:r=n}={}){super("KawaseBlurPass"),this.renderTargetA=new Ds(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new ia(this,i,r,t);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new zK,this._blurMaterial.kernelSize=s,this.copyMaterial=new lN}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(s){this._blurMaterial=s}get dithering(){return this.copyMaterial.dithering}set dithering(s){this.copyMaterial.dithering=s}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(s){this.blurMaterial.kernelSize=s}get width(){return this.resolution.width}set width(s){this.resolution.preferredWidth=s}get height(){return this.resolution.height}set height(s){this.resolution.preferredHeight=s}get scale(){return this.blurMaterial.scale}set scale(s){this.blurMaterial.scale=s}getScale(){return this.blurMaterial.scale}setScale(s){this.blurMaterial.scale=s}getKernelSize(){return this.kernelSize}setKernelSize(s){this.kernelSize=s}getResolutionScale(){return this.resolution.scale}setResolutionScale(s){this.resolution.scale=s}render(s,t,e,n,i){const r=this.scene,a=this.camera,l=this.renderTargetA,u=this.renderTargetB,f=this.blurMaterial,m=f.kernelSequence;let g=t;this.fullscreenMaterial=f;for(let v=0,_=m.length;v<_;++v){const b=(v&1)===0?l:u;f.kernel=m[v],f.inputBuffer=g.texture,s.setRenderTarget(b),s.render(r,a),g=b}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=g.texture,s.setRenderTarget(this.renderToScreen?null:e),s.render(r,a)}setSize(s,t){const e=this.resolution;e.setBaseSize(s,t);const n=e.width,i=e.height;this.renderTargetA.setSize(n,i),this.renderTargetB.setSize(n,i),this.blurMaterial.setSize(s,t)}initialize(s,t,e){e!==void 0&&(this.renderTargetA.texture.type=e,this.renderTargetB.texture.type=e,e!==Ws?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):s!==null&&s.outputColorSpace===Kn&&(this.renderTargetA.texture.colorSpace=Kn,this.renderTargetB.texture.colorSpace=Kn))}static get AUTO_SIZE(){return ia.AUTO_SIZE}},kK=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,VK=class extends Ks{constructor(s=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:e0.replace(/\D+/g,"")},uniforms:{inputBuffer:new xn(null),threshold:new xn(0),smoothing:new xn(1),range:new xn(null)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:kK,vertexShader:oN}),this.colorOutput=s,this.luminanceRange=t}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.uniforms.inputBuffer.value=s}get threshold(){return this.uniforms.threshold.value}set threshold(s){this.smoothing>0||s>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=s}getThreshold(){return this.threshold}setThreshold(s){this.threshold=s}get smoothing(){return this.uniforms.smoothing.value}set smoothing(s){this.threshold>0||s>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=s}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(s){this.smoothing=s}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(s){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(s){s?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(s){return this.colorOutput}setColorOutputEnabled(s){this.colorOutput=s}get useRange(){return this.luminanceRange!==null}set useRange(s){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(s){s!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=s,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(s){this.luminanceRange=s}},QK=class extends oo{constructor({renderTarget:s,luminanceRange:t,colorOutput:e,resolutionScale:n=1,width:i=ia.AUTO_SIZE,height:r=ia.AUTO_SIZE,resolutionX:a=i,resolutionY:l=r}={}){super("LuminancePass"),this.fullscreenMaterial=new VK(e,t),this.needsSwap=!1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new Ds(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const u=this.resolution=new ia(this,a,l,n);u.addEventListener("change",f=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(s,t,e,n,i){const r=this.fullscreenMaterial;r.inputBuffer=t.texture,s.setRenderTarget(this.renderToScreen?null:this.renderTarget),s.render(this.scene,this.camera)}setSize(s,t){const e=this.resolution;e.setBaseSize(s,t),this.renderTarget.setSize(e.width,e.height)}initialize(s,t,e){e!==void 0&&e!==Ws&&(this.renderTarget.texture.type=e,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},XK=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,jK="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",qK=class extends Ks{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new xn(null),texelSize:new xn(new Pt)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:XK,vertexShader:jK})}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setSize(s,t){this.uniforms.texelSize.value.set(1/s,1/t)}},YK=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,WK="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",KK=class extends Ks{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new xn(null),supportBuffer:new xn(null),texelSize:new xn(new Pt),radius:new xn(.85)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:YK,vertexShader:WK})}set inputBuffer(s){this.uniforms.inputBuffer.value=s}set supportBuffer(s){this.uniforms.supportBuffer.value=s}get radius(){return this.uniforms.radius.value}set radius(s){this.uniforms.radius.value=s}setSize(s,t){this.uniforms.texelSize.value.set(1/s,1/t)}},JK=class extends oo{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Ds(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new qK,this.upsamplingMaterial=new KK,this.resolution=new Pt}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(s){if(this.levels!==s){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let e=0;e<s;++e){const n=t.clone();n.texture.name="Downsampling.Mipmap"+e,this.downsamplingMipmaps.push(n)}this.upsamplingMipmaps.push(t);for(let e=1,n=s-1;e<n;++e){const i=t.clone();i.texture.name="Upsampling.Mipmap"+e,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(s){this.upsamplingMaterial.radius=s}render(s,t,e,n,i){const{scene:r,camera:a}=this,{downsamplingMaterial:l,upsamplingMaterial:u}=this,{downsamplingMipmaps:f,upsamplingMipmaps:m}=this;let g=t;this.fullscreenMaterial=l;for(let v=0,_=f.length;v<_;++v){const b=f[v];l.setSize(g.width,g.height),l.inputBuffer=g.texture,s.setRenderTarget(b),s.render(r,a),g=b}this.fullscreenMaterial=u;for(let v=m.length-1;v>=0;--v){const _=m[v];u.setSize(g.width,g.height),u.inputBuffer=g.texture,u.supportBuffer=f[v].texture,s.setRenderTarget(_),s.render(r,a),g=_}}setSize(s,t){const e=this.resolution;e.set(s,t);let n=e.width,i=e.height;for(let r=0,a=this.downsamplingMipmaps.length;r<a;++r)n=Math.round(n*.5),i=Math.round(i*.5),this.downsamplingMipmaps[r].setSize(n,i),r<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[r].setSize(n,i)}initialize(s,t,e){if(e!==void 0){const n=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of n)i.texture.type=e;if(e!==Ws)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(s!==null&&s.outputColorSpace===Kn)for(const i of n)i.texture.colorSpace=Kn}}dispose(){super.dispose();for(const s of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))s.dispose()}},ZK=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,$K=class extends Xg{constructor({blendFunction:s=Tn.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:e=.025,mipmapBlur:n=!1,intensity:i=1,radius:r=.85,levels:a=8,kernelSize:l=hR.LARGE,resolutionScale:u=.5,width:f=ia.AUTO_SIZE,height:m=ia.AUTO_SIZE,resolutionX:g=f,resolutionY:v=m}={}){super("BloomEffect",ZK,{blendFunction:s,uniforms:new Map([["map",new xn(null)],["intensity",new xn(i)]])}),this.renderTarget=new Ds(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new GK({kernelSize:l}),this.luminancePass=new QK({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=e,this.mipmapBlurPass=new JK,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=r,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const _=this.resolution=new ia(this,g,v,u);_.addEventListener("change",b=>this.setSize(_.baseWidth,_.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(s){this.resolution.preferredWidth=s}get height(){return this.resolution.height}set height(s){this.resolution.preferredHeight=s}get dithering(){return this.blurPass.dithering}set dithering(s){this.blurPass.dithering=s}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(s){this.blurPass.kernelSize=s}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(s){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(s){this.uniforms.get("intensity").value=s}getIntensity(){return this.intensity}setIntensity(s){this.intensity=s}getResolutionScale(){return this.resolution.scale}setResolutionScale(s){this.resolution.scale=s}update(s,t,e){const n=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(s,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(s,i.renderTarget):this.blurPass.render(s,i.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(s,t):this.blurPass.render(s,t,n)}setSize(s,t){const e=this.resolution;e.setBaseSize(s,t),this.renderTarget.setSize(e.width,e.height),this.blurPass.resolution.copy(e),this.luminancePass.setSize(s,t),this.mipmapBlurPass.setSize(s,t)}initialize(s,t,e){this.blurPass.initialize(s,t,e),this.luminancePass.initialize(s,t,e),this.mipmapBlurPass.initialize(s,t,e),e!==void 0&&(this.renderTarget.texture.type=e,s!==null&&s.outputColorSpace===Kn&&(this.renderTarget.texture.colorSpace=Kn))}},tJ=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,eJ="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",nJ=class extends Xg{constructor({offset:s=new Pt(.001,5e-4),radialModulation:t=!1,modulationOffset:e=.15}={}){super("ChromaticAberrationEffect",tJ,{vertexShader:eJ,attributes:Kd.CONVOLUTION,uniforms:new Map([["offset",new xn(s)],["modulationOffset",new xn(e)]])}),this.radialModulation=t}get offset(){return this.uniforms.get("offset").value}set offset(s){this.uniforms.get("offset").value=s}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(s){s?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(s){this.uniforms.get("modulationOffset").value=s}getOffset(){return this.offset}setOffset(s){this.offset=s}},uN=class extends oo{constructor(s,t,e=null){super("RenderPass",s,t),this.needsSwap=!1,this.clearPass=new cN,this.overrideMaterialManager=e===null?null:new rD(e),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(s){this.scene=s}set mainCamera(s){this.camera=s}get renderToScreen(){return super.renderToScreen}set renderToScreen(s){super.renderToScreen=s,this.clearPass.renderToScreen=s}get overrideMaterial(){const s=this.overrideMaterialManager;return s!==null?s.material:null}set overrideMaterial(s){const t=this.overrideMaterialManager;s!==null?t!==null?t.setMaterial(s):this.overrideMaterialManager=new rD(s):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(s){this.overrideMaterial=s}get clear(){return this.clearPass.enabled}set clear(s){this.clearPass.enabled=s}getSelection(){return this.selection}setSelection(s){this.selection=s}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(s){this.ignoreBackground=s}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(s){this.skipShadowMapUpdate=s}getClearPass(){return this.clearPass}render(s,t,e,n,i){const r=this.scene,a=this.camera,l=this.selection,u=a.layers.mask,f=r.background,m=s.shadowMap.autoUpdate,g=this.renderToScreen?null:t;l!==null&&a.layers.set(l.getLayer()),this.skipShadowMapUpdate&&(s.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(r.background=null),this.clearPass.enabled&&this.clearPass.render(s,t),s.setRenderTarget(g),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(s,r,a):s.render(r,a),a.layers.mask=u,r.background=f,s.shadowMap.autoUpdate=m}},r_={DEFAULT:0,ESKIL:1},iJ=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,sJ=class extends Xg{constructor({blendFunction:s=Tn.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",iJ,{blendFunction:s}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(s){this.premultiply!==s&&(s?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(s){this.premultiply=s}},rJ="uniform bool active;uniform vec4 d;void mainUv(inout vec2 uv){if(active){uv=d.xy*(floor(uv*d.zw)+0.5);}}",aJ=class extends Xg{constructor(s=30){super("PixelationEffect",rJ,{uniforms:new Map([["active",new xn(!1)],["d",new xn(new Bn)]])}),this.resolution=new Pt,this._granularity=0,this.granularity=s}get granularity(){return this._granularity}set granularity(s){let t=Math.floor(s);t%2>0&&(t+=1),this._granularity=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(s){this.granularity=s}setSize(s,t){const e=this.resolution;e.set(s,t);const n=this.granularity,i=n/e.x,r=n/e.y;this.uniforms.get("d").value.set(i,r,1/i,1/r)}},oJ=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,lJ="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",cJ=class extends Ks{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new xn(null),normalBuffer:new xn(null),texelSize:new xn(new Pt)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:oJ,vertexShader:lJ})}set depthBuffer(s){this.uniforms.depthBuffer.value=s}set depthPacking(s){this.defines.DEPTH_PACKING=s.toFixed(0),this.needsUpdate=!0}setDepthBuffer(s,t=ap){this.depthBuffer=s,this.depthPacking=t}set normalBuffer(s){this.uniforms.normalBuffer.value=s,s!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(s){this.normalBuffer=s}setTexelSize(s,t){this.uniforms.texelSize.value.set(s,t)}setSize(s,t){this.uniforms.texelSize.value.set(1/s,1/t)}},uJ=class extends oo{constructor({normalBuffer:s=null,resolutionScale:t=.5,width:e=ia.AUTO_SIZE,height:n=ia.AUTO_SIZE,resolutionX:i=e,resolutionY:r=n}={}){super("DepthDownsamplingPass");const a=new cJ;a.normalBuffer=s,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ds(1,1,{minFilter:os,magFilter:os,depthBuffer:!1,type:Na}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const l=this.resolution=new ia(this,i,r,t);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(s,t=ap){this.fullscreenMaterial.depthBuffer=s,this.fullscreenMaterial.depthPacking=t}render(s,t,e,n,i){s.setRenderTarget(this.renderToScreen?null:this.renderTarget),s.render(this.scene,this.camera)}setSize(s,t){const e=this.resolution;e.setBaseSize(s,t),this.renderTarget.setSize(e.width,e.height),this.fullscreenMaterial.setSize(s,t)}initialize(s,t,e){const n=s.getContext();if(!(n.getExtension("EXT_color_buffer_float")||n.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},hJ=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,fJ=class extends Xg{constructor({blendFunction:s,eskil:t=!1,technique:e=t?r_.ESKIL:r_.DEFAULT,offset:n=.5,darkness:i=.5}={}){super("VignetteEffect",hJ,{blendFunction:s,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new xn(n)],["darkness",new xn(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(s){this.technique!==s&&(this.defines.set("VIGNETTE_TECHNIQUE",s.toFixed(0)),this.setChanged())}get eskil(){return this.technique===r_.ESKIL}set eskil(s){this.technique=s?r_.ESKIL:r_.DEFAULT}getTechnique(){return this.technique}setTechnique(s){this.technique=s}get offset(){return this.uniforms.get("offset").value}set offset(s){this.uniforms.get("offset").value=s}getOffset(){return this.offset}setOffset(s){this.offset=s}get darkness(){return this.uniforms.get("darkness").value}set darkness(s){this.uniforms.get("darkness").value=s}getDarkness(){return this.darkness}setDarkness(s){this.darkness=s}},dJ=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,pJ="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",mJ=class extends Ks{constructor(s,t,e,n,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:e0.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new xn(null),depthBuffer:new xn(null),resolution:new xn(new Pt),texelSize:new xn(new Pt),cameraNear:new xn(.3),cameraFar:new xn(1e3),aspect:new xn(1),time:new xn(0)},blending:ra,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),s&&this.setShaderParts(s),t&&this.setDefines(t),e&&this.setUniforms(e),this.copyCameraSettings(n)}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.uniforms.inputBuffer.value=s}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(s){this.uniforms.depthBuffer.value=s}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(s){this.defines.DEPTH_PACKING=s.toFixed(0),this.needsUpdate=!0}setDepthBuffer(s,t=ap){this.depthBuffer=s,this.depthPacking=t}setShaderData(s){this.setShaderParts(s.shaderParts),this.setDefines(s.defines),this.setUniforms(s.uniforms),this.setExtensions(s.extensions)}setShaderParts(s){return this.fragmentShader=dJ.replace(Wn.FRAGMENT_HEAD,s.get(Wn.FRAGMENT_HEAD)||"").replace(Wn.FRAGMENT_MAIN_UV,s.get(Wn.FRAGMENT_MAIN_UV)||"").replace(Wn.FRAGMENT_MAIN_IMAGE,s.get(Wn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=pJ.replace(Wn.VERTEX_HEAD,s.get(Wn.VERTEX_HEAD)||"").replace(Wn.VERTEX_MAIN_SUPPORT,s.get(Wn.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(s){for(const t of s.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(s){for(const t of s.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(s){this.extensions={};for(const t of s)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(s){this.encodeOutput!==s&&(s?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(s){return this.encodeOutput}setOutputEncodingEnabled(s){this.encodeOutput=s}get time(){return this.uniforms.time.value}set time(s){this.uniforms.time.value=s}setDeltaTime(s){this.uniforms.time.value+=s}adoptCameraSettings(s){this.copyCameraSettings(s)}copyCameraSettings(s){s&&(this.uniforms.cameraNear.value=s.near,this.uniforms.cameraFar.value=s.far,s instanceof Rs?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(s,t){const e=this.uniforms;e.resolution.value.set(s,t),e.texelSize.value.set(1/s,1/t),e.aspect.value=s/t}static get Section(){return Wn}};function aD(s,t,e){for(const n of t){const i="$1"+s+n.charAt(0).toUpperCase()+n.slice(1),r=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const a of e.entries())a[1]!==null&&e.set(a[0],a[1].replace(r,i))}}function gJ(s,t,e){let n=t.getFragmentShader(),i=t.getVertexShader();const r=n!==void 0&&/mainImage/.test(n),a=n!==void 0&&/mainUv/.test(n);if(e.attributes|=t.getAttributes(),n===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(a&&(e.attributes&Kd.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!r&&!a)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const l=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,u=e.shaderParts;let f=u.get(Wn.FRAGMENT_HEAD)||"",m=u.get(Wn.FRAGMENT_MAIN_UV)||"",g=u.get(Wn.FRAGMENT_MAIN_IMAGE)||"",v=u.get(Wn.VERTEX_HEAD)||"",_=u.get(Wn.VERTEX_MAIN_SUPPORT)||"";const b=new Set,C=new Set;if(a&&(m+=`	${s}MainUv(UV);
`,e.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const R=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);_+=`	${s}MainSupport(`,_+=R?`vUv);
`:`);
`;for(const B of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const D of B[1].split(/\s*,\s*/))e.varyings.add(D),b.add(D),C.add(D);for(const B of i.matchAll(l))C.add(B[1])}for(const R of n.matchAll(l))C.add(R[1]);for(const R of t.defines.keys())C.add(R.replace(/\([\w\s,]*\)/g,""));for(const R of t.uniforms.keys())C.add(R);C.delete("while"),C.delete("for"),C.delete("if"),t.uniforms.forEach((R,B)=>e.uniforms.set(s+B.charAt(0).toUpperCase()+B.slice(1),R)),t.defines.forEach((R,B)=>e.defines.set(s+B.charAt(0).toUpperCase()+B.slice(1),R));const T=new Map([["fragment",n],["vertex",i]]);aD(s,C,e.defines),aD(s,C,T),n=T.get("fragment"),i=T.get("vertex");const S=t.blendMode;if(e.blendModes.set(S.blendFunction,S),r){t.inputColorSpace!==null&&t.inputColorSpace!==e.colorSpace&&(g+=t.inputColorSpace===Kn?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==Mc?e.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(e.colorSpace=t.inputColorSpace);const R=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;g+=`${s}MainImage(color0, UV, `,(e.attributes&Kd.DEPTH)!==0&&R.test(n)&&(g+="depth, ",e.readDepth=!0),g+=`color1);
	`;const B=s+"BlendOpacity";e.uniforms.set(B,S.opacity),g+=`color0 = blend${S.blendFunction}(color0, color1, ${B});

	`,f+=`uniform float ${B};

`}if(f+=n+`
`,i!==null&&(v+=i+`
`),u.set(Wn.FRAGMENT_HEAD,f),u.set(Wn.FRAGMENT_MAIN_UV,m),u.set(Wn.FRAGMENT_MAIN_IMAGE,g),u.set(Wn.VERTEX_HEAD,v),u.set(Wn.VERTEX_MAIN_SUPPORT,_),t.extensions!==null)for(const R of t.extensions)e.extensions.add(R)}}var vJ=class extends oo{constructor(s,...t){super("EffectPass"),this.fullscreenMaterial=new mJ(null,null,null,s),this.listener=e=>this.handleEvent(e),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(s){for(const t of this.effects)t.mainScene=s}set mainCamera(s){this.fullscreenMaterial.copyCameraSettings(s);for(const t of this.effects)t.mainCamera=s}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(s){this.fullscreenMaterial.encodeOutput=s}get dithering(){return this.fullscreenMaterial.dithering}set dithering(s){const t=this.fullscreenMaterial;t.dithering=s,t.needsUpdate=!0}setEffects(s){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=s.sort((t,e)=>e.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const s=new nK;let t=0;for(const a of this.effects)if(a.blendMode.blendFunction===Tn.DST)s.attributes|=a.getAttributes()&Kd.DEPTH;else{if((s.attributes&a.getAttributes()&Kd.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${a.name})`);gJ("e"+t++,a,s)}let e=s.shaderParts.get(Wn.FRAGMENT_HEAD),n=s.shaderParts.get(Wn.FRAGMENT_MAIN_IMAGE),i=s.shaderParts.get(Wn.FRAGMENT_MAIN_UV);const r=/\bblend\b/g;for(const a of s.blendModes.values())e+=a.getShaderCode().replace(r,`blend${a.blendFunction}`)+`
`;(s.attributes&Kd.DEPTH)!==0?(s.readDepth&&(n=`float depth = readDepth(UV);

	`+n),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,s.colorSpace===Kn&&(n+=`color0 = sRGBToLinear(color0);
	`),s.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,s.defines.set("UV","transformedUv")):s.defines.set("UV","vUv"),s.shaderParts.set(Wn.FRAGMENT_HEAD,e),s.shaderParts.set(Wn.FRAGMENT_MAIN_IMAGE,n),s.shaderParts.set(Wn.FRAGMENT_MAIN_UV,i);for(const[a,l]of s.shaderParts)l!==null&&s.shaderParts.set(a,l.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(s)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(s,t=ap){this.fullscreenMaterial.depthBuffer=s,this.fullscreenMaterial.depthPacking=t;for(const e of this.effects)e.setDepthTexture(s,t)}render(s,t,e,n,i){for(const r of this.effects)r.update(s,t,n);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=t.texture,r.time+=n*this.timeScale,s.setRenderTarget(this.renderToScreen?null:e),s.render(this.scene,this.camera)}}setSize(s,t){this.fullscreenMaterial.setSize(s,t);for(const e of this.effects)e.setSize(s,t)}initialize(s,t,e){this.renderer=s;for(const n of this.effects)n.initialize(s,t,e);this.updateMaterial(),e!==void 0&&e!==Ws&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const s of this.effects)s.removeEventListener("change",this.listener),s.dispose()}handleEvent(s){switch(s.type){case"change":this.recompile();break}}},yJ=class extends oo{constructor(s,t,{renderTarget:e,resolutionScale:n=1,width:i=ia.AUTO_SIZE,height:r=ia.AUTO_SIZE,resolutionX:a=i,resolutionY:l=r}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new uN(s,t,new V5);const u=this.renderPass;u.ignoreBackground=!0,u.skipShadowMapUpdate=!0;const f=u.getClearPass();f.overrideClearColor=new ae(7829503),f.overrideClearAlpha=1,this.renderTarget=e,this.renderTarget===void 0&&(this.renderTarget=new Ds(1,1,{minFilter:os,magFilter:os}),this.renderTarget.texture.name="NormalPass.Target");const m=this.resolution=new ia(this,a,l,n);m.addEventListener("change",g=>this.setSize(m.baseWidth,m.baseHeight))}set mainScene(s){this.renderPass.mainScene=s}set mainCamera(s){this.renderPass.mainCamera=s}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(s){this.resolution.scale=s}render(s,t,e,n,i){const r=this.renderToScreen?null:this.renderTarget;this.renderPass.render(s,r,r)}setSize(s,t){const e=this.resolution;e.setBaseSize(s,t),this.renderTarget.setSize(e.width,e.height)}};function G_(s,t,e){return t in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}new Pt;new Pt;function hN(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}var vl=function s(t,e,n){var i=this;hN(this,s),G_(this,"dot2",function(r,a){return i.x*r+i.y*a}),G_(this,"dot3",function(r,a,l){return i.x*r+i.y*a+i.z*l}),this.x=t,this.y=e,this.z=n},_J=[new vl(1,1,0),new vl(-1,1,0),new vl(1,-1,0),new vl(-1,-1,0),new vl(1,0,1),new vl(-1,0,1),new vl(1,0,-1),new vl(-1,0,-1),new vl(0,1,1),new vl(0,-1,1),new vl(0,1,-1),new vl(0,-1,-1)],oD=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],lD=new Array(512),cD=new Array(512),AJ=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var e=0;e<256;e++){var n;e&1?n=oD[e]^t&255:n=oD[e]^t>>8&255,lD[e]=lD[e+256]=n,cD[e]=cD[e+256]=_J[n%12]}};AJ(0);function xJ(s){if(typeof s=="number")s=Math.abs(s);else if(typeof s=="string"){var t=s;s=0;for(var e=0;e<t.length;e++)s=(s+(e+1)*(t.charCodeAt(e)%96))%2147483647}return s===0&&(s=311),s}function uD(s){var t=xJ(s);return function(){var e=t*48271%2147483647;return t=e,e/2147483647}}var bJ=function s(t){var e=this;hN(this,s),G_(this,"seed",0),G_(this,"init",function(n){e.seed=n,e.value=uD(n)}),G_(this,"value",uD(this.seed)),this.init(t)};new bJ(Math.random());const SJ=ht.createContext(null),hD=s=>(s.getAttributes()&2)===2,EJ=ht.memo(ht.forwardRef(({children:s,camera:t,scene:e,resolutionScale:n,enabled:i=!0,renderPriority:r=1,autoClear:a=!0,depthBuffer:l,enableNormalPass:u,stencilBuffer:f,multisampling:m=8,frameBufferType:g=n0},v)=>{const{gl:_,scene:b,camera:C,size:T}=x4(),S=e||b,R=t||C,[B,D,N]=ht.useMemo(()=>{const z=new eK(_,{depthBuffer:l,stencilBuffer:f,multisampling:m,frameBufferType:g});z.addPass(new uN(S,R));let U=null,P=null;return u&&(P=new yJ(S,R),P.enabled=!1,z.addPass(P),n!==void 0&&(U=new uJ({normalBuffer:P.texture,resolutionScale:n}),U.enabled=!1,z.addPass(U))),[z,P,U]},[R,_,l,f,m,g,S,u,n]);ht.useEffect(()=>B==null?void 0:B.setSize(T.width,T.height),[B,T]),lR((z,U)=>{if(i){const P=_.autoClear;_.autoClear=a,f&&!a&&_.clearStencil(),B.render(U),_.autoClear=P}},i?r:0);const I=ht.useRef(null);ht.useLayoutEffect(()=>{var P;const z=[],U=I.current.__r3f;if(U&&B){const X=U.children;for(let ot=0;ot<X.length;ot++){const it=X[ot].object;if(it instanceof Xg){const ct=[it];if(!hD(it)){let Q=null;for(;(Q=(P=X[ot+1])==null?void 0:P.object)instanceof Xg&&!hD(Q);)ct.push(Q),ot++}const dt=new vJ(R,...ct);z.push(dt)}else it instanceof oo&&z.push(it)}for(const ot of z)B==null||B.addPass(ot);D&&(D.enabled=!0),N&&(N.enabled=!0)}return()=>{for(const X of z)B==null||B.removePass(X);D&&(D.enabled=!1),N&&(N.enabled=!1)}},[B,s,R,D,N]),ht.useEffect(()=>{const z=_.toneMapping;return _.toneMapping=Lc,()=>{_.toneMapping=z}},[_]);const F=ht.useMemo(()=>({composer:B,normalPass:D,downSamplingPass:N,resolutionScale:n,camera:R,scene:S}),[B,D,N,n,R,S]);return ht.useImperativeHandle(v,()=>B,[B]),J.jsx(SJ.Provider,{value:F,children:J.jsx("group",{ref:I,children:s})})}));let MJ=0;const fD=new WeakMap,S4=(s,t)=>function({blendFunction:e=t==null?void 0:t.blendFunction,opacity:n=t==null?void 0:t.opacity,...i}){let r=fD.get(s);if(!r){const u=`@react-three/postprocessing/${s.name}-${MJ++}`;YO({[u]:s}),fD.set(s,r=u)}const a=x4(u=>u.camera),l=Oa.useMemo(()=>[...(t==null?void 0:t.args)??[],...i.args??[{...t,...i}]],[JSON.stringify(i)]);return J.jsx(r,{camera:a,"blendMode-blendFunction":e,"blendMode-opacity-value":n,...i,args:l})},TJ=S4($K,{blendFunction:0}),CJ=S4(nJ),wJ=S4(sJ,{blendFunction:5}),RJ=ht.forwardRef(function({granularity:s=5},t){const e=ht.useMemo(()=>new aJ(s),[s]);return J.jsx("primitive",{ref:t,object:e,dispose:null})}),LJ=S4(fJ);function DJ(s){const t=m5();return J.jsx("group",{children:J.jsx("directionalLight",{intensity:.5,color:t.pallet.secondColor,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10,...s})})}function BJ(){return J.jsxs(J.Fragment,{children:[J.jsx(wJ,{opacity:.03}),J.jsx(RJ,{granularity:2}),J.jsx(CJ,{offset:[.0015,.0012],blendFunction:Tn.ADD}),J.jsx(TJ,{intensity:.2,luminanceThreshold:.2,luminanceSmoothing:.9}),J.jsx(LJ,{eskil:!1,offset:.2,darkness:.5})]})}function OJ(){return J.jsx(ZY,{shadows:!0,children:J.jsxs(EJ,{enabled:!0,children:[J.jsx(BJ,{}),J.jsx(qW,{}),J.jsx(DJ,{position:[1,2,1]}),J.jsx(ht.Suspense,{fallback:null,children:J.jsx(VW,{rotation:[0,3,0],position:[0,0,1]})}),J.jsxs("mesh",{receiveShadow:!0,rotation:[-Math.PI/2,0,0],children:[J.jsx("planeGeometry",{args:[100,100]}),J.jsx("shadowMaterial",{attach:"material",opacity:.3})]})]})})}const NJ=he.header`
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 2rem;
  padding: 1rem;
  font-weight: 800;

  margin: 1rem 2rem 0.5rem;
  border: 0.15rem solid ${({theme:s})=>s.pallet.textColor};
  border-radius: 10px;
  background-color: ${({theme:s})=>s.pallet.thirdColor};

  svg {
    fill: ${({theme:s})=>s.pallet.textColor};
  }
`,IJ=he.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  font-feature-settings: "tnum";
  font-variant-numeric: tabular-nums;
`,UJ=he.div`
  display: flex;
  align-items: center;
`,PJ=he.div`
  display: flex;
  gap: 0.5rem;
  align-items: center;
`;function FJ(){const[s,t]=ht.useState(new Date),[e,n]=ht.useState(""),i=s.getHours().toString().padStart(2,"0"),r=s.getMinutes().toString().padStart(2,"0"),a=s.getSeconds().toString().padStart(2,"0"),l=(+i%12||12).toString().padStart(2,"0"),u=+i>=12?"PM":"AM";return ht.useEffect(()=>{const f=setInterval(()=>{t(new Date)},1e3);return()=>clearInterval(f)},[]),ht.useEffect(()=>{const f={weekday:"short",day:"numeric",month:"short"};n(s.toLocaleDateString("en-US",f))},[s]),J.jsxs(IJ,{children:[J.jsx("div",{children:e}),J.jsx("div",{children:`${l}:${r}:${a} ${u}`})]})}function Lr(s){return`Minified Redux error #${s}; visit https://redux.js.org/Errors?code=${s} for the full message or use the non-minified dev environment for full errors. `}var HJ=typeof Symbol=="function"&&Symbol.observable||"@@observable",dD=HJ,jC=()=>Math.random().toString(36).substring(7).split("").join("."),zJ={INIT:`@@redux/INIT${jC()}`,REPLACE:`@@redux/REPLACE${jC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${jC()}`},l3=zJ;function fR(s){if(typeof s!="object"||s===null)return!1;let t=s;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(s)===t||Object.getPrototypeOf(s)===null}function fN(s,t,e){if(typeof s!="function")throw new Error(Lr(2));if(typeof t=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(Lr(0));if(typeof t=="function"&&typeof e>"u"&&(e=t,t=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(Lr(1));return e(fN)(s,t)}let n=s,i=t,r=new Map,a=r,l=0,u=!1;function f(){a===r&&(a=new Map,r.forEach((T,S)=>{a.set(S,T)}))}function m(){if(u)throw new Error(Lr(3));return i}function g(T){if(typeof T!="function")throw new Error(Lr(4));if(u)throw new Error(Lr(5));let S=!0;f();const R=l++;return a.set(R,T),function(){if(S){if(u)throw new Error(Lr(6));S=!1,f(),a.delete(R),r=null}}}function v(T){if(!fR(T))throw new Error(Lr(7));if(typeof T.type>"u")throw new Error(Lr(8));if(typeof T.type!="string")throw new Error(Lr(17));if(u)throw new Error(Lr(9));try{u=!0,i=n(i,T)}finally{u=!1}return(r=a).forEach(R=>{R()}),T}function _(T){if(typeof T!="function")throw new Error(Lr(10));n=T,v({type:l3.REPLACE})}function b(){const T=g;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Lr(11));function R(){const D=S;D.next&&D.next(m())}return R(),{unsubscribe:T(R)}},[dD](){return this}}}return v({type:l3.INIT}),{dispatch:v,subscribe:g,getState:m,replaceReducer:_,[dD]:b}}function GJ(s){Object.keys(s).forEach(t=>{const e=s[t];if(typeof e(void 0,{type:l3.INIT})>"u")throw new Error(Lr(12));if(typeof e(void 0,{type:l3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Lr(13))})}function kJ(s){const t=Object.keys(s),e={};for(let r=0;r<t.length;r++){const a=t[r];typeof s[a]=="function"&&(e[a]=s[a])}const n=Object.keys(e);let i;try{GJ(e)}catch(r){i=r}return function(a={},l){if(i)throw i;let u=!1;const f={};for(let m=0;m<n.length;m++){const g=n[m],v=e[g],_=a[g],b=v(_,l);if(typeof b>"u")throw l&&l.type,new Error(Lr(14));f[g]=b,u=u||b!==_}return u=u||n.length!==Object.keys(a).length,u?f:a}}function c3(...s){return s.length===0?t=>t:s.length===1?s[0]:s.reduce((t,e)=>(...n)=>t(e(...n)))}function VJ(...s){return t=>(e,n)=>{const i=t(e,n);let r=()=>{throw new Error(Lr(15))};const a={getState:i.getState,dispatch:(u,...f)=>r(u,...f)},l=s.map(u=>u(a));return r=c3(...l)(i.dispatch),{...i,dispatch:r}}}function QJ(s){return fR(s)&&"type"in s&&typeof s.type=="string"}var dN=Symbol.for("immer-nothing"),pD=Symbol.for("immer-draftable"),jo=Symbol.for("immer-state");function Tc(s,...t){throw new Error(`[Immer] minified error nr: ${s}. Full error at: https://bit.ly/3cXEKWf`)}var vy=Object.getPrototypeOf;function jg(s){return!!s&&!!s[jo]}function of(s){var t;return s?pN(s)||Array.isArray(s)||!!s[pD]||!!((t=s.constructor)!=null&&t[pD])||M4(s)||T4(s):!1}var XJ=Object.prototype.constructor.toString();function pN(s){if(!s||typeof s!="object")return!1;const t=vy(s);if(t===null)return!0;const e=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return e===Object?!0:typeof e=="function"&&Function.toString.call(e)===XJ}function u3(s,t){E4(s)===0?Reflect.ownKeys(s).forEach(e=>{t(e,s[e],s)}):s.forEach((e,n)=>t(n,e,s))}function E4(s){const t=s[jo];return t?t.type_:Array.isArray(s)?1:M4(s)?2:T4(s)?3:0}function U8(s,t){return E4(s)===2?s.has(t):Object.prototype.hasOwnProperty.call(s,t)}function mN(s,t,e){const n=E4(s);n===2?s.set(t,e):n===3?s.add(e):s[t]=e}function jJ(s,t){return s===t?s!==0||1/s===1/t:s!==s&&t!==t}function M4(s){return s instanceof Map}function T4(s){return s instanceof Set}function Am(s){return s.copy_||s.base_}function P8(s,t){if(M4(s))return new Map(s);if(T4(s))return new Set(s);if(Array.isArray(s))return Array.prototype.slice.call(s);const e=pN(s);if(t===!0||t==="class_only"&&!e){const n=Object.getOwnPropertyDescriptors(s);delete n[jo];let i=Reflect.ownKeys(n);for(let r=0;r<i.length;r++){const a=i[r],l=n[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:s[a]})}return Object.create(vy(s),n)}else{const n=vy(s);if(n!==null&&e)return{...s};const i=Object.create(n);return Object.assign(i,s)}}function dR(s,t=!1){return C4(s)||jg(s)||!of(s)||(E4(s)>1&&(s.set=s.add=s.clear=s.delete=qJ),Object.freeze(s),t&&Object.entries(s).forEach(([e,n])=>dR(n,!0))),s}function qJ(){Tc(2)}function C4(s){return Object.isFrozen(s)}var YJ={};function qg(s){const t=YJ[s];return t||Tc(0,s),t}var oA;function gN(){return oA}function WJ(s,t){return{drafts_:[],parent_:s,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function mD(s,t){t&&(qg("Patches"),s.patches_=[],s.inversePatches_=[],s.patchListener_=t)}function F8(s){H8(s),s.drafts_.forEach(KJ),s.drafts_=null}function H8(s){s===oA&&(oA=s.parent_)}function gD(s){return oA=WJ(oA,s)}function KJ(s){const t=s[jo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function vD(s,t){t.unfinalizedDrafts_=t.drafts_.length;const e=t.drafts_[0];return s!==void 0&&s!==e?(e[jo].modified_&&(F8(t),Tc(4)),of(s)&&(s=h3(t,s),t.parent_||f3(t,s)),t.patches_&&qg("Patches").generateReplacementPatches_(e[jo].base_,s,t.patches_,t.inversePatches_)):s=h3(t,e,[]),F8(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),s!==dN?s:void 0}function h3(s,t,e){if(C4(t))return t;const n=t[jo];if(!n)return u3(t,(i,r)=>yD(s,n,t,i,r,e)),t;if(n.scope_!==s)return t;if(!n.modified_)return f3(s,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let r=i,a=!1;n.type_===3&&(r=new Set(i),i.clear(),a=!0),u3(r,(l,u)=>yD(s,n,i,l,u,e,a)),f3(s,i,!1),e&&s.patches_&&qg("Patches").generatePatches_(n,e,s.patches_,s.inversePatches_)}return n.copy_}function yD(s,t,e,n,i,r,a){if(jg(i)){const l=r&&t&&t.type_!==3&&!U8(t.assigned_,n)?r.concat(n):void 0,u=h3(s,i,l);if(mN(e,n,u),jg(u))s.canAutoFreeze_=!1;else return}else a&&e.add(i);if(of(i)&&!C4(i)){if(!s.immer_.autoFreeze_&&s.unfinalizedDrafts_<1)return;h3(s,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(e,n)&&f3(s,i)}}function f3(s,t,e=!1){!s.parent_&&s.immer_.autoFreeze_&&s.canAutoFreeze_&&dR(t,e)}function JJ(s,t){const e=Array.isArray(s),n={type_:e?1:0,scope_:t?t.scope_:gN(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:s,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,r=pR;e&&(i=[n],r=lA);const{revoke:a,proxy:l}=Proxy.revocable(i,r);return n.draft_=l,n.revoke_=a,l}var pR={get(s,t){if(t===jo)return s;const e=Am(s);if(!U8(e,t))return ZJ(s,e,t);const n=e[t];return s.finalized_||!of(n)?n:n===qC(s.base_,t)?(YC(s),s.copy_[t]=G8(n,s)):n},has(s,t){return t in Am(s)},ownKeys(s){return Reflect.ownKeys(Am(s))},set(s,t,e){const n=vN(Am(s),t);if(n!=null&&n.set)return n.set.call(s.draft_,e),!0;if(!s.modified_){const i=qC(Am(s),t),r=i==null?void 0:i[jo];if(r&&r.base_===e)return s.copy_[t]=e,s.assigned_[t]=!1,!0;if(jJ(e,i)&&(e!==void 0||U8(s.base_,t)))return!0;YC(s),z8(s)}return s.copy_[t]===e&&(e!==void 0||t in s.copy_)||Number.isNaN(e)&&Number.isNaN(s.copy_[t])||(s.copy_[t]=e,s.assigned_[t]=!0),!0},deleteProperty(s,t){return qC(s.base_,t)!==void 0||t in s.base_?(s.assigned_[t]=!1,YC(s),z8(s)):delete s.assigned_[t],s.copy_&&delete s.copy_[t],!0},getOwnPropertyDescriptor(s,t){const e=Am(s),n=Reflect.getOwnPropertyDescriptor(e,t);return n&&{writable:!0,configurable:s.type_!==1||t!=="length",enumerable:n.enumerable,value:e[t]}},defineProperty(){Tc(11)},getPrototypeOf(s){return vy(s.base_)},setPrototypeOf(){Tc(12)}},lA={};u3(pR,(s,t)=>{lA[s]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});lA.deleteProperty=function(s,t){return lA.set.call(this,s,t,void 0)};lA.set=function(s,t,e){return pR.set.call(this,s[0],t,e,s[0])};function qC(s,t){const e=s[jo];return(e?Am(e):s)[t]}function ZJ(s,t,e){var i;const n=vN(t,e);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(s.draft_):void 0}function vN(s,t){if(!(t in s))return;let e=vy(s);for(;e;){const n=Object.getOwnPropertyDescriptor(e,t);if(n)return n;e=vy(e)}}function z8(s){s.modified_||(s.modified_=!0,s.parent_&&z8(s.parent_))}function YC(s){s.copy_||(s.copy_=P8(s.base_,s.scope_.immer_.useStrictShallowCopy_))}var $J=class{constructor(s){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,n)=>{if(typeof t=="function"&&typeof e!="function"){const r=e;e=t;const a=this;return function(u=r,...f){return a.produce(u,m=>e.call(this,m,...f))}}typeof e!="function"&&Tc(6),n!==void 0&&typeof n!="function"&&Tc(7);let i;if(of(t)){const r=gD(this),a=G8(t,void 0);let l=!0;try{i=e(a),l=!1}finally{l?F8(r):H8(r)}return mD(r,n),vD(i,r)}else if(!t||typeof t!="object"){if(i=e(t),i===void 0&&(i=t),i===dN&&(i=void 0),this.autoFreeze_&&dR(i,!0),n){const r=[],a=[];qg("Patches").generateReplacementPatches_(t,i,r,a),n(r,a)}return i}else Tc(1,t)},this.produceWithPatches=(t,e)=>{if(typeof t=="function")return(a,...l)=>this.produceWithPatches(a,u=>t(u,...l));let n,i;return[this.produce(t,e,(a,l)=>{n=a,i=l}),n,i]},typeof(s==null?void 0:s.autoFreeze)=="boolean"&&this.setAutoFreeze(s.autoFreeze),typeof(s==null?void 0:s.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(s.useStrictShallowCopy)}createDraft(s){of(s)||Tc(8),jg(s)&&(s=tZ(s));const t=gD(this),e=G8(s,void 0);return e[jo].isManual_=!0,H8(t),e}finishDraft(s,t){const e=s&&s[jo];(!e||!e.isManual_)&&Tc(9);const{scope_:n}=e;return mD(n,t),vD(void 0,n)}setAutoFreeze(s){this.autoFreeze_=s}setUseStrictShallowCopy(s){this.useStrictShallowCopy_=s}applyPatches(s,t){let e;for(e=t.length-1;e>=0;e--){const i=t[e];if(i.path.length===0&&i.op==="replace"){s=i.value;break}}e>-1&&(t=t.slice(e+1));const n=qg("Patches").applyPatches_;return jg(s)?n(s,t):this.produce(s,i=>n(i,t))}};function G8(s,t){const e=M4(s)?qg("MapSet").proxyMap_(s,t):T4(s)?qg("MapSet").proxySet_(s,t):JJ(s,t);return(t?t.scope_:gN()).drafts_.push(e),e}function tZ(s){return jg(s)||Tc(10,s),yN(s)}function yN(s){if(!of(s)||C4(s))return s;const t=s[jo];let e;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,e=P8(s,t.scope_.immer_.useStrictShallowCopy_)}else e=P8(s,!0);return u3(e,(n,i)=>{mN(e,n,yN(i))}),t&&(t.finalized_=!1),e}var qo=new $J,_N=qo.produce;qo.produceWithPatches.bind(qo);qo.setAutoFreeze.bind(qo);qo.setUseStrictShallowCopy.bind(qo);qo.applyPatches.bind(qo);qo.createDraft.bind(qo);qo.finishDraft.bind(qo);function AN(s){return({dispatch:e,getState:n})=>i=>r=>typeof r=="function"?r(e,n,s):i(r)}var eZ=AN(),nZ=AN,iZ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?c3:c3.apply(null,arguments)};function _D(s,t){function e(...n){if(t){let i=t(...n);if(!i)throw new Error(tf(0));return{type:s,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:s,payload:n[0]}}return e.toString=()=>`${s}`,e.type=s,e.match=n=>QJ(n)&&n.type===s,e}var xN=class d_ extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,d_.prototype)}static get[Symbol.species](){return d_}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new d_(...t[0].concat(this)):new d_(...t.concat(this))}};function AD(s){return of(s)?_N(s,()=>{}):s}function vE(s,t,e){return s.has(t)?s.get(t):s.set(t,e(t)).get(t)}function sZ(s){return typeof s=="boolean"}var rZ=()=>function(t){const{thunk:e=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:r=!0}=t??{};let a=new xN;return e&&(sZ(e)?a.push(eZ):a.push(nZ(e.extraArgument))),a},aZ="RTK_autoBatch",xD=s=>t=>{setTimeout(t,s)},oZ=(s={type:"raf"})=>t=>(...e)=>{const n=t(...e);let i=!0,r=!1,a=!1;const l=new Set,u=s.type==="tick"?queueMicrotask:s.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:xD(10):s.type==="callback"?s.queueNotification:xD(s.timeout),f=()=>{a=!1,r&&(r=!1,l.forEach(m=>m()))};return Object.assign({},n,{subscribe(m){const g=()=>i&&m(),v=n.subscribe(g);return l.add(m),()=>{v(),l.delete(m)}},dispatch(m){var g;try{return i=!((g=m==null?void 0:m.meta)!=null&&g[aZ]),r=!i,r&&(a||(a=!0,u(f))),n.dispatch(m)}finally{i=!0}}})},lZ=s=>function(e){const{autoBatch:n=!0}=e??{};let i=new xN(s);return n&&i.push(oZ(typeof n=="object"?n:void 0)),i};function cZ(s){const t=rZ(),{reducer:e=void 0,middleware:n,devTools:i=!0,preloadedState:r=void 0,enhancers:a=void 0}=s||{};let l;if(typeof e=="function")l=e;else if(fR(e))l=kJ(e);else throw new Error(tf(1));let u;typeof n=="function"?u=n(t):u=t();let f=c3;i&&(f=iZ({trace:!1,...typeof i=="object"&&i}));const m=VJ(...u),g=lZ(m);let v=typeof a=="function"?a(g):g();const _=f(...v);return fN(l,r,_)}function bN(s){const t={},e=[];let n;const i={addCase(r,a){const l=typeof r=="string"?r:r.type;if(!l)throw new Error(tf(28));if(l in t)throw new Error(tf(29));return t[l]=a,i},addMatcher(r,a){return e.push({matcher:r,reducer:a}),i},addDefaultCase(r){return n=r,i}};return s(i),[t,e,n]}function uZ(s){return typeof s=="function"}function hZ(s,t){let[e,n,i]=bN(t),r;if(uZ(s))r=()=>AD(s());else{const l=AD(s);r=()=>l}function a(l=r(),u){let f=[e[u.type],...n.filter(({matcher:m})=>m(u)).map(({reducer:m})=>m)];return f.filter(m=>!!m).length===0&&(f=[i]),f.reduce((m,g)=>{if(g)if(jg(m)){const _=g(m,u);return _===void 0?m:_}else{if(of(m))return _N(m,v=>g(v,u));{const v=g(m,u);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return m},l)}return a.getInitialState=r,a}var fZ=Symbol.for("rtk-slice-createasyncthunk");function dZ(s,t){return`${s}/${t}`}function pZ({creators:s}={}){var e;const t=(e=s==null?void 0:s.asyncThunk)==null?void 0:e[fZ];return function(i){const{name:r,reducerPath:a=r}=i;if(!r)throw new Error(tf(11));const l=(typeof i.reducers=="function"?i.reducers(gZ()):i.reducers)||{},u=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(D,N){const I=typeof D=="string"?D:D.type;if(!I)throw new Error(tf(12));if(I in f.sliceCaseReducersByType)throw new Error(tf(13));return f.sliceCaseReducersByType[I]=N,m},addMatcher(D,N){return f.sliceMatchers.push({matcher:D,reducer:N}),m},exposeAction(D,N){return f.actionCreators[D]=N,m},exposeCaseReducer(D,N){return f.sliceCaseReducersByName[D]=N,m}};u.forEach(D=>{const N=l[D],I={reducerName:D,type:dZ(r,D),createNotation:typeof i.reducers=="function"};yZ(N)?AZ(I,N,m,t):vZ(I,N,m)});function g(){const[D={},N=[],I=void 0]=typeof i.extraReducers=="function"?bN(i.extraReducers):[i.extraReducers],F={...D,...f.sliceCaseReducersByType};return hZ(i.initialState,z=>{for(let U in F)z.addCase(U,F[U]);for(let U of f.sliceMatchers)z.addMatcher(U.matcher,U.reducer);for(let U of N)z.addMatcher(U.matcher,U.reducer);I&&z.addDefaultCase(I)})}const v=D=>D,_=new Map,b=new WeakMap;let C;function T(D,N){return C||(C=g()),C(D,N)}function S(){return C||(C=g()),C.getInitialState()}function R(D,N=!1){function I(z){let U=z[D];return typeof U>"u"&&N&&(U=vE(b,I,S)),U}function F(z=v){const U=vE(_,N,()=>new WeakMap);return vE(U,z,()=>{const P={};for(const[X,ot]of Object.entries(i.selectors??{}))P[X]=mZ(ot,z,()=>vE(b,z,S),N);return P})}return{reducerPath:D,getSelectors:F,get selectors(){return F(I)},selectSlice:I}}const B={name:r,reducer:T,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:S,...R(a),injectInto(D,{reducerPath:N,...I}={}){const F=N??a;return D.inject({reducerPath:F,reducer:T},I),{...B,...R(F,!0)}}};return B}}function mZ(s,t,e,n){function i(r,...a){let l=t(r);return typeof l>"u"&&n&&(l=e()),s(l,...a)}return i.unwrapped=s,i}var mR=pZ();function gZ(){function s(t,e){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...e}}return s.withTypes=()=>s,{reducer(t){return Object.assign({[t.name](...e){return t(...e)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,e){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:e}},asyncThunk:s}}function vZ({type:s,reducerName:t,createNotation:e},n,i){let r,a;if("reducer"in n){if(e&&!_Z(n))throw new Error(tf(17));r=n.reducer,a=n.prepare}else r=n;i.addCase(s,r).exposeCaseReducer(t,r).exposeAction(t,a?_D(s,a):_D(s))}function yZ(s){return s._reducerDefinitionType==="asyncThunk"}function _Z(s){return s._reducerDefinitionType==="reducerWithPrepare"}function AZ({type:s,reducerName:t},e,n,i){if(!i)throw new Error(tf(18));const{payloadCreator:r,fulfilled:a,pending:l,rejected:u,settled:f,options:m}=e,g=i(s,r,m);n.exposeAction(t,g),a&&n.addCase(g.fulfilled,a),l&&n.addCase(g.pending,l),u&&n.addCase(g.rejected,u),f&&n.addMatcher(g.settled,f),n.exposeCaseReducer(t,{fulfilled:a||yE,pending:l||yE,rejected:u||yE,settled:f||yE})}function yE(){}function tf(s){return`Minified Redux Toolkit error #${s}; visit https://redux-toolkit.js.org/Errors?code=${s} for the full message or use the non-minified dev environment for full errors. `}let SN=0;const xZ={popups:[]},EN=mR({name:"popup",initialState:xZ,reducers:{openPopup:(s,t)=>{s.popups.push({id:++SN,result:"success",...t.payload})},openThunkPopup:(s,t)=>{s.popups.push({result:"success",...t.payload})},closePopup:(s,t)=>{s.popups=s.popups.filter(e=>e.id!==t.payload)},closeAllPopups:s=>{s.popups=[]}}}),{openPopup:Wst,closePopup:bZ,closeAllPopups:Kst,openThunkPopup:SZ}=EN.actions,k8=(s,t="success")=>e=>{const n=++SN;e(SZ({type:"toast",text:s,id:n,result:t}))},EZ=EN.reducer;function MZ(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 256 0 Q 184.7741935483871 1.032258064516129 126.96774193548387 35.096774193548384 L 126.96774193548387 35.096774193548384 L 126.96774193548387 35.096774193548384 Q 69.16129032258064 69.16129032258064 35.096774193548384 126.96774193548387 L 35.096774193548384 126.96774193548387 L 35.096774193548384 126.96774193548387 Q 1.032258064516129 184.7741935483871 0 256 Q 1.032258064516129 327.2258064516129 35.096774193548384 385.03225806451616 Q 69.16129032258064 442.83870967741933 126.96774193548387 476.9032258064516 Q 184.7741935483871 510.96774193548384 256 512 Q 327.2258064516129 510.96774193548384 385.03225806451616 476.9032258064516 Q 442.83870967741933 442.83870967741933 476.9032258064516 385.03225806451616 Q 510.96774193548384 327.2258064516129 512 256 Q 510.96774193548384 184.7741935483871 476.9032258064516 126.96774193548387 Q 442.83870967741933 69.16129032258064 385.03225806451616 35.096774193548384 Q 327.2258064516129 1.032258064516129 256 0 L 256 0 Z M 374.7096774193548 174.4516129032258 Q 372.64516129032256 195.09677419354838 367.48387096774195 230.19354838709677 L 367.48387096774195 230.19354838709677 L 367.48387096774195 230.19354838709677 Q 362.3225806451613 264.258064516129 356.1290322580645 299.35483870967744 L 356.1290322580645 299.35483870967744 L 356.1290322580645 299.35483870967744 Q 349.93548387096774 334.4516129032258 345.80645161290323 358.19354838709677 Q 339.61290322580646 385.03225806451616 328.258064516129 384 Q 311.741935483871 384 296.258064516129 371.61290322580646 Q 292.1290322580645 368.51612903225805 288 365.4193548387097 Q 270.4516129032258 354.06451612903226 258.06451612903226 344.7741935483871 Q 245.67741935483872 336.51612903225805 230.19354838709677 327.2258064516129 Q 214.70967741935485 315.8709677419355 217.80645161290323 308.64516129032256 Q 219.8709677419355 300.38709677419354 230.19354838709677 292.1290322580645 Q 233.29032258064515 289.03225806451616 236.38709677419354 285.93548387096774 Q 237.41935483870967 283.8709677419355 247.74193548387098 275.61290322580646 Q 264.258064516129 260.1290322580645 283.8709677419355 240.51612903225808 Q 304.51612903225805 221.93548387096774 306.5806451612903 216.7741935483871 Q 307.61290322580646 215.74193548387098 305.5483870967742 212.6451612903226 Q 302.4516129032258 210.58064516129033 300.38709677419354 211.61290322580646 Q 296.258064516129 212.6451612903226 192 283.8709677419355 Q 176.51612903225808 294.19354838709677 164.1290322580645 293.16129032258067 Q 156.90322580645162 293.16129032258067 145.5483870967742 290.06451612903226 Q 134.19354838709677 288 124.90322580645162 283.8709677419355 Q 121.80645161290323 282.83870967741933 118.70967741935483 282.83870967741933 Q 97.03225806451613 277.6774193548387 97.03225806451613 267.35483870967744 Q 98.06451612903226 260.1290322580645 115.61290322580645 252.90322580645162 Q 228.1290322580645 204.38709677419354 265.2903225806452 188.90322580645162 Q 316.9032258064516 167.2258064516129 335.48387096774195 161.03225806451613 Q 355.0967741935484 153.80645161290323 360.258064516129 153.80645161290323 Q 365.4193548387097 153.80645161290323 370.5806451612903 156.90322580645162 Q 373.6774193548387 160 374.7096774193548 164.1290322580645 Q 374.7096774193548 169.29032258064515 374.7096774193548 174.4516129032258 L 374.7096774193548 174.4516129032258 Z"})})}function TZ(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 171.3548387096774 407.741935483871 Q 170.32258064516128 411.8709677419355 166.19354838709677 411.8709677419355 Q 160 411.8709677419355 160 407.741935483871 Q 161.03225806451613 404.64516129032256 165.16129032258064 404.64516129032256 Q 170.32258064516128 404.64516129032256 171.3548387096774 407.741935483871 L 171.3548387096774 407.741935483871 Z M 139.3548387096774 403.61290322580646 Q 138.32258064516128 406.7096774193548 143.48387096774192 408.7741935483871 Q 148.6451612903226 409.80645161290323 149.67741935483872 406.7096774193548 Q 150.70967741935485 402.5806451612903 145.5483870967742 401.5483870967742 Q 140.38709677419354 400.51612903225805 139.3548387096774 403.61290322580646 L 139.3548387096774 403.61290322580646 Z M 184.7741935483871 401.5483870967742 Q 179.61290322580646 402.5806451612903 179.61290322580646 406.7096774193548 Q 180.6451612903226 409.80645161290323 185.80645161290323 409.80645161290323 Q 190.96774193548387 407.741935483871 190.96774193548387 404.64516129032256 Q 189.93548387096774 401.5483870967742 184.7741935483871 401.5483870967742 L 184.7741935483871 401.5483870967742 Z M 252.90322580645162 6.193548387096774 Q 142.4516129032258 8.258064516129032 72.25806451612904 78.45161290322581 L 72.25806451612904 78.45161290322581 L 72.25806451612904 78.45161290322581 Q 2.064516129032258 148.6451612903226 0 258.06451612903226 Q 1.032258064516129 345.80645161290323 48.516129032258064 411.8709677419355 Q 96 477.93548387096774 175.48387096774192 504.7741935483871 Q 194.06451612903226 505.80645161290323 193.03225806451613 492.38709677419354 Q 193.03225806451613 488.258064516129 193.03225806451613 476.9032258064516 Q 193.03225806451613 453.16129032258067 193.03225806451613 429.4193548387097 Q 190.96774193548387 429.4193548387097 173.41935483870967 431.48387096774195 Q 154.83870967741936 432.51612903225805 134.19354838709677 427.35483870967744 Q 113.54838709677419 421.16129032258067 105.29032258064517 398.4516129032258 Q 105.29032258064517 396.38709677419354 97.03225806451613 381.93548387096774 Q 88.7741935483871 368.51612903225805 76.38709677419355 360.258064516129 Q 74.3225806451613 359.2258064516129 68.12903225806451 352 Q 60.903225806451616 345.80645161290323 78.45161290322581 344.7741935483871 Q 79.48387096774194 343.741935483871 92.90322580645162 348.9032258064516 Q 106.3225806451613 353.03225806451616 117.6774193548387 371.61290322580646 Q 136.25806451612902 399.48387096774195 157.93548387096774 399.48387096774195 Q 180.6451612903226 399.48387096774195 193.03225806451613 393.2903225806452 Q 197.16129032258064 368.51612903225805 209.5483870967742 358.19354838709677 Q 164.1290322580645 356.1290322580645 130.06451612903226 335.48387096774195 Q 96 315.8709677419355 93.93548387096774 243.61290322580646 Q 93.93548387096774 222.96774193548387 100.12903225806451 209.5483870967742 Q 105.29032258064517 196.1290322580645 117.6774193548387 183.74193548387098 Q 115.61290322580645 177.5483870967742 113.54838709677419 158.96774193548387 Q 111.48387096774194 140.38709677419354 120.7741935483871 113.54838709677419 Q 139.3548387096774 110.45161290322581 164.1290322580645 124.90322580645162 Q 189.93548387096774 138.32258064516128 192 141.41935483870967 Q 192 141.41935483870967 192 141.41935483870967 Q 222.96774193548387 132.1290322580645 257.03225806451616 132.1290322580645 Q 290.06451612903226 132.1290322580645 322.06451612903226 141.41935483870967 Q 322.06451612903226 140.38709677419354 335.48387096774195 132.1290322580645 Q 347.8709677419355 123.87096774193549 364.38709677419354 117.6774193548387 Q 380.9032258064516 110.45161290322581 393.2903225806452 113.54838709677419 Q 402.5806451612903 140.38709677419354 400.51612903225805 158.96774193548387 Q 398.4516129032258 177.5483870967742 395.35483870967744 183.74193548387098 Q 407.741935483871 196.1290322580645 414.96774193548384 209.5483870967742 Q 422.19354838709677 222.96774193548387 422.19354838709677 243.61290322580646 Q 421.16129032258067 293.16129032258067 404.64516129032256 316.9032258064516 Q 387.0967741935484 339.61290322580646 360.258064516129 347.8709677419355 Q 333.4193548387097 356.1290322580645 303.48387096774195 358.19354838709677 Q 320 369.5483870967742 321.03225806451616 405.6774193548387 Q 321.03225806451616 443.8709677419355 321.03225806451616 473.80645161290323 Q 321.03225806451616 487.2258064516129 321.03225806451616 492.38709677419354 Q 320 505.80645161290323 338.5806451612903 504.7741935483871 Q 417.03225806451616 477.93548387096774 464.51612903225805 411.8709677419355 Q 510.96774193548384 345.80645161290323 512 258.06451612903226 Q 510.96774193548384 185.80645161290323 476.9032258064516 129.03225806451613 Q 441.80645161290323 72.25806451612904 384 39.225806451612904 Q 325.16129032258067 7.225806451612903 252.90322580645162 6.193548387096774 L 252.90322580645162 6.193548387096774 Z M 100.12903225806451 362.3225806451613 Q 98.06451612903226 364.38709677419354 101.16129032258064 367.48387096774195 Q 104.25806451612904 370.5806451612903 106.3225806451613 368.51612903225805 Q 108.38709677419355 366.4516129032258 105.29032258064517 363.35483870967744 Q 103.2258064516129 360.258064516129 100.12903225806451 362.3225806451613 L 100.12903225806451 362.3225806451613 Z M 88.7741935483871 354.06451612903226 Q 88.7741935483871 356.1290322580645 91.87096774193549 358.19354838709677 Q 94.96774193548387 359.2258064516129 96 357.16129032258067 Q 97.03225806451613 355.0967741935484 93.93548387096774 353.03225806451616 Q 90.83870967741936 352 88.7741935483871 354.06451612903226 L 88.7741935483871 354.06451612903226 Z M 122.83870967741936 390.19354838709677 Q 120.7741935483871 393.2903225806452 123.87096774193549 397.4193548387097 Q 128 400.51612903225805 131.09677419354838 398.4516129032258 Q 132.1290322580645 395.35483870967744 129.03225806451613 391.2258064516129 Q 124.90322580645162 388.1290322580645 122.83870967741936 390.19354838709677 L 122.83870967741936 390.19354838709677 Z M 110.45161290322581 375.741935483871 Q 108.38709677419355 377.80645161290323 110.45161290322581 381.93548387096774 Q 113.54838709677419 385.03225806451616 116.64516129032258 384 Q 118.70967741935483 381.93548387096774 116.64516129032258 377.80645161290323 Q 113.54838709677419 373.6774193548387 110.45161290322581 375.741935483871 L 110.45161290322581 375.741935483871 Z"})})}function CZ(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 475.42857142857144 0 L 36.57142857142857 0 L 475.42857142857144 0 L 36.57142857142857 0 Q 20.571428571428573 0 10.285714285714286 10.285714285714286 Q 0 21.714285714285715 0 36.57142857142857 L 0 475.42857142857144 L 0 475.42857142857144 Q 0 490.2857142857143 10.285714285714286 501.7142857142857 Q 20.571428571428573 512 36.57142857142857 512 L 475.42857142857144 512 L 475.42857142857144 512 Q 491.42857142857144 512 501.7142857142857 501.7142857142857 Q 512 490.2857142857143 512 475.42857142857144 L 512 36.57142857142857 L 512 36.57142857142857 Q 512 21.714285714285715 501.7142857142857 10.285714285714286 Q 491.42857142857144 0 475.42857142857144 0 L 475.42857142857144 0 Z M 154.28571428571428 438.85714285714283 L 78.85714285714286 438.85714285714283 L 154.28571428571428 438.85714285714283 L 78.85714285714286 438.85714285714283 L 78.85714285714286 194.28571428571428 L 78.85714285714286 194.28571428571428 L 155.42857142857142 194.28571428571428 L 155.42857142857142 194.28571428571428 L 155.42857142857142 438.85714285714283 L 154.28571428571428 438.85714285714283 Z M 116.57142857142857 161.14285714285714 Q 98.28571428571429 161.14285714285714 85.71428571428571 148.57142857142858 L 85.71428571428571 148.57142857142858 L 85.71428571428571 148.57142857142858 Q 73.14285714285714 136 73.14285714285714 117.71428571428571 Q 73.14285714285714 98.28571428571429 85.71428571428571 85.71428571428571 Q 98.28571428571429 73.14285714285714 116.57142857142857 73.14285714285714 Q 136 73.14285714285714 147.42857142857142 85.71428571428571 Q 160 98.28571428571429 161.14285714285714 117.71428571428571 Q 160 136 147.42857142857142 148.57142857142858 Q 136 161.14285714285714 116.57142857142857 161.14285714285714 L 116.57142857142857 161.14285714285714 Z M 438.85714285714283 438.85714285714283 L 363.42857142857144 438.85714285714283 L 438.85714285714283 438.85714285714283 L 363.42857142857144 438.85714285714283 L 363.42857142857144 320 L 363.42857142857144 320 Q 364.57142857142856 297.14285714285717 357.7142857142857 276.57142857142856 Q 352 257.14285714285717 323.42857142857144 254.85714285714286 Q 294.85714285714283 256 285.7142857142857 274.2857142857143 Q 277.7142857142857 292.57142857142856 278.85714285714283 317.7142857142857 L 278.85714285714283 438.85714285714283 L 278.85714285714283 438.85714285714283 L 202.28571428571428 438.85714285714283 L 202.28571428571428 438.85714285714283 L 202.28571428571428 194.28571428571428 L 202.28571428571428 194.28571428571428 L 275.42857142857144 194.28571428571428 L 275.42857142857144 194.28571428571428 L 275.42857142857144 227.42857142857142 L 275.42857142857144 227.42857142857142 L 276.57142857142856 227.42857142857142 L 276.57142857142856 227.42857142857142 Q 283.42857142857144 212.57142857142858 301.7142857142857 201.14285714285714 Q 320 188.57142857142858 348.57142857142856 188.57142857142858 Q 404.57142857142856 189.71428571428572 422.85714285714283 221.71428571428572 Q 441.14285714285717 254.85714285714286 438.85714285714283 305.14285714285717 L 438.85714285714283 438.85714285714283 L 438.85714285714283 438.85714285714283 Z"})})}function wZ(){return J.jsxs(PJ,{children:[J.jsx("a",{href:"https://t.me/Nik0o_o",target:"_blank",children:J.jsx(MZ,{width:"1.5rem",height:"1.5rem",className:"cursor-pointer"})}),J.jsx("a",{href:"https://github.com/kanedaSh0tar0",target:"_blank",children:J.jsx(TZ,{width:"1.5rem",height:"1.5rem",className:"cursor-pointer"})}),J.jsx("a",{href:"https://www.linkedin.com/in/mykyta-antonov-246736354/",target:"_blank",children:J.jsx(CZ,{width:"1.5rem",height:"1.5rem",className:"cursor-pointer"})})]})}function RZ(){const s=xy(),t=()=>{s(k8("Hello there "))};return J.jsxs(NJ,{children:[J.jsx(UJ,{children:J.jsx("span",{className:"cursor-pointer",onClick:t,children:"Antonov Mykyta"})}),J.jsx(wZ,{}),J.jsx(FJ,{})]})}const LZ=he.div`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.5rem;
  position: relative;
  box-sizing: border-box;

  svg {
    flex-shrink: 0;
    width: 3rem;
    height: 3rem;
    object-fit: contain;
  }

  &::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 6px;
    backdrop-filter: ${({chosen:s})=>s?"blur(6px)":"none"};
    background-color: ${({chosen:s})=>s?"var(--white-color)":"transparent"};
    opacity: 0.25;
    transition: all 0.2s ease;
    z-index: 0;
  }

  &::after {
    content: "";
    position: absolute;
    inset: -2px;
    border: ${({chosen:s,highlightColor:t})=>s?`2px dashed ${t||"var(--white-color)"}`:"none"};
    outline-offset: -4px;
    border-radius: 4px;
    pointer-events: none;
    z-index: 1;
  }

  > * {
    position: relative;
    z-index: 2;
  }
`,DZ=he.span`
  position: relative;
  font-family: "Segoe UI", sans-serif;
  font-size: 0.6rem;
  color: ${({color:s})=>s||"var(--white-color)"};
  text-align: center;
  padding: 0.2rem 0.4rem;
  border-radius: 3px;
  user-select: none;
  margin: auto 0;
  display: inline-block;
  width: 100%;
  word-wrap: break-word;
  overflow-wrap: break-word;

  &::after {
    content: "";
    position: absolute;
    inset: 0;
    background-color: ${({highlightColor:s})=>s||"black"};
    opacity: 0.4;
    pointer-events: none;
    z-index: -1;
    border-radius: 3px;
  }
`;function qd({SvgIcon:s,text:t,onClick:e,textColor:n,highlightColor:i}){const[r,a]=ht.useState(!1),l=ht.useRef(null);return ht.useEffect(()=>{const u=f=>{l.current&&!l.current.contains(f.target)&&a(!1)};return window.addEventListener("click",u),()=>{window.removeEventListener("click",u)}},[]),J.jsxs(LZ,{ref:l,className:"cursor-pointer",chosen:r,highlightColor:i,onClick:()=>{r?(e(),a(!1)):a(!0)},children:[J.jsx(s,{width:"100%",height:"100%"}),J.jsx(DZ,{color:n,children:t})]})}const gR=document.documentElement.clientHeight,vR=document.documentElement.clientWidth,Pu=10,BZ=12,OZ=6,Kr=Math.min(vR/BZ,gR/OZ)-Pu/2,yR=Kr+2*Pu,_R=Kr/1.5,NZ={modals:[{type:"photo",title:"My_photo.jpg",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:2*Kr,height:2*Kr}},{type:"about_me",title:"About_me.txt",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:5*Kr,height:2.5*Kr}},{type:"skills",title:"Skills.exe",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:2.5*Kr,height:4*Kr}},{type:"experience",title:"Work_experience.exe",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:3.5*Kr,height:5*Kr}},{type:"pdf",title:"Resume.pdf",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:6.5*Kr,height:5*Kr}},{type:"contact_me",title:"Email",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:6*Kr,height:5*Kr}},{type:"folder",title:"New Folder",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:6*Kr,height:4*Kr}}],topIndex:0,lastX:yR,lastY:_R},IZ={info:["photo","about_me","skills","experience"]},UZ=s=>(t,e)=>{const n=e(),i=IZ[s],r=n.modals.modals;[...i].map(l=>r.find(u=>u.type===l)).filter(Boolean).sort((l,u)=>{const f=l.dimensions.width*l.dimensions.height;return u.dimensions.width*u.dimensions.height-f}).map(l=>l.type).forEach((l,u)=>{setTimeout(()=>t(AR(l)),200*u)})};function PZ(s,t){return s.position.x<t.position.x+t.dimensions.width+Pu&&s.position.x+s.dimensions.width+Pu>t.position.x&&s.position.y<t.position.y+t.dimensions.height+Pu&&s.position.y+s.dimensions.height+Pu>t.position.y}function FZ(s,t){for(let e=_R;e<=gR-t.dimensions.height;e+=Pu)for(let n=yR;n<=vR-t.dimensions.width;n+=Pu){const i={...t,position:{x:n,y:e}};if(!s.some(a=>PZ(a,i)))return{x:n,y:e}}return null}function HZ(s,t){const e=s.modals.filter(i=>i.isOpen),n=FZ(e,t);n?t.position=n:(s.lastX+=Pu,s.lastY+=Pu,(s.lastX+t.dimensions.width>vR||s.lastY+t.dimensions.height>gR)&&(s.lastX=yR,s.lastY=_R),t.position={x:s.lastX,y:s.lastY}),t.isOpen=!0}const zZ=(s,t)=>{const e=s.modals.findIndex(i=>i.type===t);if(e===-1)return;const n=s.modals[e];s.topIndex+=1,n.index=s.topIndex,n.isOpen||HZ(s,n)},MN=mR({name:"modals",initialState:NZ,reducers:{openModal:(s,t)=>zZ(s,t.payload),closeModal:(s,t)=>{const e=s.modals.findIndex(i=>i.type===t.payload.type);if(e===-1)return;const n=s.modals[e];n.isOpen=!1,n.index=0,t.payload.position&&(n.position=t.payload.position)},closeAllModals:s=>{for(const t of s.modals)t.isOpen=!1;s.topIndex=0},bringToFront:(s,t)=>{const e=s.modals.findIndex(n=>n.type===t.payload);e!==-1&&(s.topIndex+=1,s.modals[e].index=s.topIndex)}}}),{openModal:AR,closeModal:GZ,closeAllModals:Jst,bringToFront:kZ}=MN.actions,VZ=MN.reducer,QZ=he.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`,TN=he.div`
  display: grid;
  gap: 0.5rem;
  padding: 0.5rem;
  height: 100%;
  width: 100%;

  grid-auto-flow: ${({flow:s})=>s||"column"};
  justify-content: start;

  grid-template-columns: repeat(auto-fill, minmax(6rem, 1fr));
  grid-template-rows: repeat(auto-fill, minmax(6rem, 1fr));
  align-items: start;
`;function XZ(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 128 0 Q 101 1 83 19 L 83 19 L 83 19 Q 65 37 64 64 L 64 448 L 64 448 Q 65 475 83 493 Q 101 511 128 512 L 384 512 L 384 512 Q 411 511 429 493 Q 447 475 448 448 L 448 160 L 448 160 L 320 160 L 320 160 Q 306 160 297 151 Q 288 142 288 128 L 288 0 L 288 0 L 128 0 L 128 0 Z M 320 0 L 320 128 L 320 0 L 320 128 L 448 128 L 448 128 L 320 0 L 320 0 Z M 192 256 Q 193 220 224 201 Q 256 183 288 201 Q 319 220 320 256 Q 319 292 288 311 Q 256 329 224 311 Q 193 292 192 256 L 192 256 Z M 144 432 Q 145 398 167 375 L 167 375 L 167 375 Q 190 353 224 352 L 288 352 L 288 352 Q 322 353 345 375 Q 367 398 368 432 Q 367 447 352 448 L 160 448 L 160 448 Q 145 447 144 432 L 144 432 Z"})})}function jZ(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 81.53424657534246 227.94520547945206 L 3.506849315068493 361.2054794520548 L 81.53424657534246 227.94520547945206 L 3.506849315068493 361.2054794520548 L 3.506849315068493 115.72602739726027 L 3.506849315068493 115.72602739726027 Q 4.383561643835616 92.05479452054794 20.164383561643834 76.27397260273973 Q 35.945205479452056 60.49315068493151 59.61643835616438 59.61643835616438 L 163.06849315068493 59.61643835616438 L 163.06849315068493 59.61643835616438 Q 185.86301369863014 59.61643835616438 202.5205479452055 76.27397260273973 L 225.31506849315068 99.06849315068493 L 225.31506849315068 99.06849315068493 Q 241.97260273972603 115.72602739726027 265.64383561643837 115.72602739726027 L 368.2191780821918 115.72602739726027 L 368.2191780821918 115.72602739726027 Q 391.8904109589041 116.6027397260274 407.67123287671234 132.3835616438356 Q 423.45205479452056 148.16438356164383 424.32876712328766 171.83561643835617 L 424.32876712328766 199.8904109589041 L 424.32876712328766 199.8904109589041 L 129.75342465753425 199.8904109589041 L 129.75342465753425 199.8904109589041 Q 98.1917808219178 200.76712328767124 81.53424657534246 227.94520547945206 L 81.53424657534246 227.94520547945206 Z M 105.20547945205479 241.97260273972603 Q 113.97260273972603 228.82191780821918 129.75342465753425 227.94520547945206 L 480.43835616438355 227.94520547945206 L 480.43835616438355 227.94520547945206 Q 496.2191780821918 228.82191780821918 504.986301369863 241.97260273972603 Q 512 256 504.986301369863 270.027397260274 L 406.7945205479452 438.35616438356163 L 406.7945205479452 438.35616438356163 Q 398.027397260274 451.5068493150685 382.24657534246575 452.3835616438356 L 31.561643835616437 452.3835616438356 L 31.561643835616437 452.3835616438356 Q 15.780821917808218 451.5068493150685 7.013698630136986 438.35616438356163 Q 0 424.32876712328766 7.013698630136986 410.3013698630137 L 105.20547945205479 241.97260273972603 L 105.20547945205479 241.97260273972603 Z"})})}function qZ(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 48 64 Q 28 65 14 78 L 14 78 L 14 78 Q 1 92 0 112 Q 1 136 19 150 L 237 314 L 237 314 Q 256 326 275 314 L 493 150 L 493 150 Q 511 136 512 112 Q 511 92 498 78 Q 484 65 464 64 L 48 64 L 48 64 Z M 0 176 L 0 384 L 0 176 L 0 384 Q 1 411 19 429 Q 37 447 64 448 L 448 448 L 448 448 Q 475 447 493 429 Q 511 411 512 384 L 512 176 L 512 176 L 294 339 L 294 339 Q 277 352 256 352 Q 235 352 218 339 L 0 176 L 0 176 Z"})})}function YZ(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 8 64 Q 9 37 27 19 L 27 19 L 27 19 Q 45 1 72 0 L 232 0 L 232 0 L 232 128 L 232 128 Q 232 142 241 151 Q 250 160 264 160 L 392 160 L 392 160 L 392 304 L 392 304 L 184 304 L 184 304 Q 157 305 139 323 Q 121 341 120 368 L 120 512 L 120 512 L 72 512 L 72 512 Q 45 511 27 493 Q 9 475 8 448 L 8 64 L 8 64 Z M 392 128 L 264 128 L 392 128 L 264 128 L 264 0 L 264 0 L 392 128 L 392 128 Z M 184 352 L 216 352 L 184 352 L 216 352 Q 240 353 256 368 Q 271 384 272 408 Q 271 432 256 448 Q 240 463 216 464 L 200 464 L 200 464 L 200 496 L 200 496 Q 199 511 184 512 Q 169 511 168 496 L 168 448 L 168 448 L 168 368 L 168 368 Q 169 353 184 352 L 184 352 Z M 216 432 Q 238 430 240 408 Q 238 386 216 384 L 200 384 L 200 384 L 200 432 L 200 432 L 216 432 L 216 432 Z M 312 352 L 344 352 L 312 352 L 344 352 Q 364 353 378 366 Q 391 380 392 400 L 392 464 L 392 464 Q 391 484 378 498 Q 364 511 344 512 L 312 512 L 312 512 Q 297 511 296 496 L 296 368 L 296 368 Q 297 353 312 352 L 312 352 Z M 344 480 Q 359 479 360 464 L 360 400 L 360 400 Q 359 385 344 384 L 328 384 L 328 384 L 328 480 L 328 480 L 344 480 L 344 480 Z M 424 368 Q 425 353 440 352 L 488 352 L 488 352 Q 503 353 504 368 Q 503 383 488 384 L 456 384 L 456 384 L 456 416 L 456 416 L 488 416 L 488 416 Q 503 417 504 432 Q 503 447 488 448 L 456 448 L 456 448 L 456 496 L 456 496 Q 455 511 440 512 Q 425 511 424 496 L 424 432 L 424 432 L 424 368 L 424 368 Z"})})}function WZ(){const s=xy(),t=n=>{s(AR(n))},e=n=>{s(UZ(n))};return J.jsxs(QZ,{children:[J.jsx(RZ,{}),J.jsxs(TN,{children:[J.jsx(qd,{onClick:()=>e("info"),SvgIcon:XZ,text:"My CV"}),J.jsx(qd,{onClick:()=>t("pdf"),SvgIcon:YZ,text:"Resume.pdf"}),J.jsx(qd,{onClick:()=>t("folder"),SvgIcon:jZ,text:"New Folder"}),J.jsx(qd,{onClick:()=>t("contact_me"),SvgIcon:qZ,text:"Email"})]})]})}var CN=cB();function KZ(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 497.6 88 Q 512 72 512 51.2 L 512 51.2 L 512 51.2 Q 512 30.4 497.6 14.4 Q 481.6 0 460.8 0 Q 440 0 424 14.4 L 256 184 L 256 184 L 88 14.4 L 88 14.4 Q 72 0 51.2 0 Q 30.4 0 14.4 14.4 Q 0 30.4 0 51.2 Q 0 72 14.4 88 L 184 256 L 184 256 L 14.4 424 L 14.4 424 Q 0 440 0 460.8 Q 0 481.6 14.4 497.6 Q 30.4 512 51.2 512 Q 72 512 88 497.6 L 256 328 L 256 328 L 424 497.6 L 424 497.6 Q 440 512 460.8 512 Q 481.6 512 497.6 497.6 Q 512 481.6 512 460.8 Q 512 440 497.6 424 L 328 256 L 328 256 L 497.6 88 L 497.6 88 Z"})})}const JZ=he.button`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 1rem;
  height: 1rem;
  border-radius: 50%;
  border: 0.1rem solid ${({theme:s})=>s.pallet.textColor};
  background-color: ${({theme:s})=>s.pallet.secondColor};
  padding: 0.2rem;

  svg {
    transform: ${({clicked:s})=>s?"scale(0.9)":"scale(1)"};
    color: ${({theme:s})=>s.pallet.textColor};
  }
`,ZZ=he.div`
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 0.2rem 0.5rem;

  border-radius: 10px 10px 0 0;
`,$Z=he.div`
  display: flex;
  align-center: center;
  gap: 0.25rem;
`,t$=he.span`
  font-family: "Segoe UI", sans-serif;
  font-size: 0.8rem;
  font-weight: 600;
  color: ${({theme:s})=>s.pallet.textColor};
  text-align: center;
  user-select: none;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
`,e$=Ay`
  to {
    opacity: 1;
    transform: scale(1);
  }
`,n$=Ay`
  to {
    opacity: 0;
    transform: scale(0);
  }
`,i$=he.div`
  position: absolute;
  display: flex;
  flex-direction: column;
  background-color: ${({theme:s})=>s.pallet.thirdColor};

  width: ${({dimensions:s})=>`${s.width}px`};
  height: ${({dimensions:s})=>`${s.height}px`};
  left: ${({position:s})=>s?s.x:0}px;
  top: ${({position:s})=>s?s.y:0}px;

  z-index: ${({index:s})=>10*(s+1)};

  opacity: ${({isClosing:s})=>s?"1":"0"};
  transform: ${({isClosing:s})=>s?"scale(1)":"scale(0)"};
  animation: ${({isClosing:s})=>s?n$:e$} 0.25s
    cubic-bezier(0.39, 0.575, 0.565, 1) both;

  border-radius: 10px;
  border: 0.15rem solid ${({theme:s})=>s.pallet.textColor};
  box-shadow: 5px 5px 0px 2px rgba(0, 0, 0, 0.75);
`,s$=he.div`
  background-color: ${({theme:s})=>s.pallet.thirdColor};
  flex: 1;
  display: flex;
  overflow: hidden;
  padding: 0.2rem;
  border-radius: 0 0 10px 10px;
`,r$=he.div`
  position: relative;
  width: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  border: 0.15rem solid ${({theme:s})=>s.pallet.textColor};
  background-color: var(--white-color);
  border-radius: 6px;
`,a$=he.div`
  display: flex;
  justify-content: flex-start;
  align-items: center;
  width: 100%;
  height: 2rem;
  padding: 0 0.5rem;
  gap: 0.5rem;
`,o$=he.button`
  box-shadow: ${({clicked:s})=>s?"inset 2px 2px 4px rgba(0, 0, 0, 0.6), inset -2px -2px 4px rgba(255, 255, 255, 0.2)":"2px 2px 0px 1px rgba(0, 0, 0, 0.75)"};
  padding: 0.2rem;
  width: 1.5rem;
  height: 1.5rem;
  border-radius: 4px;
  display: grid;
  place-items: center;

  svg {
    transform: ${({clicked:s})=>s?"scale(0.9)":"scale(1)"};
    color: ${({theme:s})=>s.pallet.textColor};
  }
`;function l$({Icon:s,onClick:t}){const[e,n]=ht.useState(!1);return J.jsx(JZ,{clicked:e,onMouseDown:i=>i.stopPropagation(),onPointerDown:()=>n(!0),onPointerUp:()=>n(!1),onPointerOut:()=>n(!1),className:"cursor-pointer",onClick:t,children:J.jsx(s,{})})}function c$({handleClose:s,handleDrag:t,title:e}){return J.jsxs(ZZ,{className:"cursor-move",onMouseDown:t,children:[J.jsx(t$,{children:e}),J.jsx($Z,{children:J.jsx(l$,{Icon:KZ,onClick:s})})]})}function u$({Icon:s,onClick:t}){const[e,n]=ht.useState(!1);return J.jsx(o$,{className:"cursor-pointer",clicked:e,onMouseDown:i=>i.stopPropagation(),onPointerDown:()=>n(!0),onPointerUp:()=>n(!1),onPointerOut:()=>n(!1),onClick:t,children:s})}function a0({children:s,modal:t,buttons:e}){const[n,i]=ht.useState(!1),[r,a]=ht.useState(t.position),l=ht.useRef(!1),u=ht.useRef({x:0,y:0}),f=xy(),m=()=>{i(!0),setTimeout(()=>{f(GZ({type:t.type,position:r}))},250)},g=b=>{l.current&&a({x:b.clientX-u.current.x,y:b.clientY-u.current.y})},v=()=>{l.current=!1,window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v)},_=b=>{f(kZ(t.type)),l.current=!0,u.current={x:b.clientX-r.x,y:b.clientY-r.y},window.addEventListener("mousemove",g),window.addEventListener("mouseup",v)};return ht.useEffect(()=>()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v)},[]),J.jsxs(i$,{index:t.index||1,isClosing:n,dimensions:{width:t.dimensions.width,height:t.dimensions.height},position:r,className:"cursor",children:[J.jsx(c$,{title:t.title,handleClose:m,handleDrag:_}),e&&J.jsx(a$,{children:e.map(({Icon:b,onClick:C,key:T})=>J.jsx(u$,{Icon:b,onClick:C},T))}),J.jsx(s$,{title:t.title,children:J.jsx(r$,{children:s})})]})}const h$=he.div`
  position: relative;
  overflow: hidden;
  width: 100%;
  height: 100%;
  max-width: ${s=>`${s.width}px`};
  max-height: ${s=>`${s.height}px`};
  display: flex;
  align-items: center;
  justify-content: center;
`,f$=he.img`
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  max-width: 100%;
  display: block;
  transition: opacity 1s;
  position: relative;
  z-index: 100;
`;function d$({src:s,thumb:t,width:e,height:n}){const[i,r]=ht.useState(t),[a,l]=ht.useState(!1);return ht.useEffect(()=>{const u=new Image;u.src=s,u.onload=()=>{r(s),l(!0)}},[s]),J.jsx(f$,{width:e,height:n,src:i,alt:"My photo",loading:"lazy",style:{transition:"filter 0.3s ease",filter:a?"none":"blur(5px)"}})}const p$="/vibefolio/pics/My_photo.webp",m$={MyPhoto:"data:image/webp;base64,UklGRjoEAABXRUJQVlA4IC4EAACQHgCdASpgAGAAPikShkKhoQp10swMAUJZQMkB+AH6gIupgF2U3y23H+53ZbZHv6J+HXfx/R/xA/FzuSPAPq1+KW8q9rl5d+V/85/Y/3T/mX2Z/sB4uP4t5Gf5N+TP5gfmZ4z3PG/0/qvsA9HtLYnZfLw5P3OlUkxc9vc8hiPQOIOL1efvZmcVsx77MlTXzTN8cDW00TQe9/X+a2A+a74Yyn+3wQ39dpOGjIytLgKUE4LowlyHP3ConOwaMa2EVKkYeN8Ovu9q3xQcQyiBoawv+rrmxYzeqt2C/X6gMNe9CTO0E8OdXZqRM1n8cbmBWoDDtp2+xxDeGPAROiUgANiXA4CzCEAaY1oJK8ib5hAAUlPX/MxbJjvf+XTnpshi5ksD9LBieqqficuiJ7ttyF7n8/PDnmgB7P6OdDu65Bet4hw3KOp839rrGMZXNvGOOvQkUKP5m7tvBROccbqSYwHtQwZvpegFd4GXH09heE407//hoMxsTwgP/DZ5D7Un5giR0SZpxdV7fk9+frzsIx3WbExiVsGFyozkIUCT+revLnki/r4FvmPcD0gk+XD6GN4LDde1OKGJcV3JEWvrkST3dJsUeDJacjQ3axC91fF5kcY/OzNf4AxLCDdzKMFJ+bg2iIh3+Pjoka1Zd0PJ0VYlfzAtQvdkJbeIHJRt0q0yd+iG0sYw/U7/HyVe8dzJVFKSLzMJ/+qf4KL3S///07VJBJOngOS4MsFxM8+yOPeFx0wR8XKb+Q+kHTww0PfMKh2Ds+aF9Ca8AhLrLZ9wQRMOTMZDpb+3j/l/JB+j+cU7xL6rutSJZ2MQsK4PM5cgHS6vuV09o3gIs1YvsnDrYwEHCX68IEfeuWMJr5j3Ou1D9b1Mc41BLV31s9WJB+MdpcFeVPkEOfFSeCu7Yw+2egm2xiV5GkkOvgevtSLsfXrecXem4gzm2Sf//hhapqEZVYSthZ3WhQsCi5woln1yHcRhvL5v9ir6FvFRazwpVvk0Ng8U9HKbUZIrBTEHGbH0W+lI8nEaeQUXHl8yhveu1noUrVi5SJaKf5DCPk6Sa9JyT37ofwT3Tk6wOO28PfIkbsUKqPmDYOb5X2dH//6jm0z2TC+rlomV9/lbGQw1TrFp6/O4tzHcXuNkXi7KPJfpmCvAhtHA0nfJGEFuW65swyXU/bsjf7WaEUHE5nDpr0JGus8rfsGHCZfsI/4H/+3mf/7tssgusAbZAFnYHhho22dj1oyvov3YzUnhIbLsf+Pt8UTAe1jAaqoH7hJIKJEPzLZrZaQw6zZgxNKR0yr4Z2LYrXDNIvr3w9euYoflPc3IJbL87zsUo1qlGb7fUSTq76nECJ3O60QyEMNqZJ4mCUJKgPoLtYEf8m2FoT8f8q98NWEoOYpDBsmC4rpUyEZueSBiNEzmCs0Aiu5safKAAA=="};function g$({modal:s}){const{width:t=200,height:e=200}=(s==null?void 0:s.dimensions)||{};return J.jsx(a0,{modal:s,children:J.jsx(h$,{width:t,height:e,children:J.jsx(d$,{width:t,height:e,src:p$,thumb:m$.MyPhoto})})})}const v$=he.div`
  padding: 0.5rem;
`;function y$({modal:s}){return J.jsx(a0,{modal:s,children:J.jsxs(v$,{children:[J.jsx("h2",{children:"Hey there! Im Mykyta."}),J.jsx("p",{children:"Front-end developer with two years of experience in a dynamic environment as a shadow coder. Throughout my career, I have often taken on new projects received tasks outside of my area of expertise, and quickly learned new technologies and frameworks. It will not be a problem for me to switch to working with other technologies."}),J.jsx("p",{children:"I have a great desire to develop in different directions besides the front-end and React environment."})]})})}const _$=he.div`
  position: relative;
  width: clamp(2.5rem, 5vw, 5rem);
  height: clamp(2.5rem, 5vw, 5rem);
`,A$=he.svg`
  width: 100%;
  height: 100%;
`,x$=he.div`
  position: absolute;
  top: ${({strokeWidth:s})=>s}px;
  left: ${({strokeWidth:s})=>s}px;
  right: ${({strokeWidth:s})=>s}px;
  bottom: ${({strokeWidth:s})=>s}px;

  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  overflow: hidden;

  svg {
    width: clamp(1rem, 2.5vw, 2rem);
    height: clamp(1rem, 2.5vw, 2rem);
  }
`,O1=({progress:s,Icon:t})=>{const[e,n]=ht.useState(0),i=m5();ht.useEffect(()=>{let m=null;const g=1500,v=_=>{m===null&&(m=_);const b=_-m,C=Math.min(s,b/g*s);n(C),b<g?requestAnimationFrame(v):n(s)};requestAnimationFrame(v)},[s]);const r=100,a=r*.06,l=(r-a)/2,u=2*Math.PI*l,f=u*(1-e/100);return J.jsxs(_$,{children:[J.jsxs(A$,{viewBox:`0 0 ${r} ${r}`,children:[J.jsx("circle",{stroke:"#e6e6e6",fill:"transparent",strokeWidth:a,r:l,cx:r/2,cy:r/2}),J.jsx("circle",{stroke:i.pallet.secondColor,fill:"transparent",strokeWidth:a,strokeLinecap:"round",r:l,cx:r/2,cy:r/2,strokeDasharray:u,strokeDashoffset:-f,transform:`rotate(-90 ${r/2} ${r/2})`,style:{transition:"stroke-dashoffset 0.3s linear"}})]}),J.jsx(x$,{strokeWidth:a,children:t})]})};function b$(s){return J.jsx("svg",{fill:"#3077C5",viewBox:"0 0 24 24",role:"img",xmlns:"http://www.w3.org/2000/svg",...s,children:J.jsx("path",{d:"M0 12v12h24V0H0zm19.341-.956c.61.152 1.074.423 1.501.865.221.236.549.666.575.77.008.03-1.036.73-1.668 1.123-.023.015-.115-.084-.217-.236-.31-.45-.633-.644-1.128-.678-.728-.05-1.196.331-1.192.967a.88.88 0 0 0 .102.45c.16.331.458.53 1.39.933 1.719.74 2.454 1.227 2.911 1.92.51.773.625 2.008.278 2.926-.38.998-1.325 1.676-2.655 1.9-.411.073-1.386.062-1.828-.018-.964-.172-1.878-.648-2.442-1.273-.221-.243-.652-.88-.625-.925.011-.016.11-.077.22-.141.108-.061.511-.294.892-.515l.69-.4.145.214c.202.308.643.731.91.872.766.404 1.817.347 2.335-.118a.883.883 0 0 0 .313-.72c0-.278-.035-.4-.18-.61-.186-.266-.567-.49-1.649-.96-1.238-.533-1.771-.864-2.259-1.39a3.165 3.165 0 0 1-.659-1.2c-.091-.339-.114-1.189-.042-1.531.255-1.197 1.158-2.03 2.461-2.278.423-.08 1.406-.05 1.821.053zm-5.634 1.002l.008.983H10.59v8.876H8.38v-8.876H5.258v-.964c0-.534.011-.98.026-.99.012-.016 1.913-.024 4.217-.02l4.195.012z"})})}function S$(s){return J.jsx("svg",{fill:"#FBDF02",xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 0 0 L 0 512 L 0 0 L 0 512 L 512 512 L 512 512 L 512 0 L 512 0 L 0 0 L 0 0 Z M 278.85714285714283 398.85714285714283 Q 277.7142857142857 436.57142857142856 258.2857142857143 454.85714285714283 L 258.2857142857143 454.85714285714283 L 258.2857142857143 454.85714285714283 Q 238.85714285714286 472 206.85714285714286 472 Q 178.28571428571428 470.85714285714283 160 459.42857142857144 Q 142.85714285714286 446.85714285714283 134.85714285714286 427.42857142857144 L 173.71428571428572 404.57142857142856 L 173.71428571428572 404.57142857142856 Q 182.85714285714286 426.2857142857143 204.57142857142858 428.57142857142856 Q 229.71428571428572 432 230.85714285714286 398.85714285714283 L 230.85714285714286 235.42857142857142 L 230.85714285714286 235.42857142857142 L 278.85714285714283 235.42857142857142 L 278.85714285714283 235.42857142857142 L 278.85714285714283 398.85714285714283 L 278.85714285714283 398.85714285714283 Z M 392 472 Q 325.7142857142857 468.57142857142856 305.14285714285717 422.85714285714283 L 344 400 L 344 400 Q 357.7142857142857 427.42857142857144 392 429.7142857142857 Q 422.85714285714283 427.42857142857144 424 405.7142857142857 Q 424 393.14285714285717 414.85714285714283 387.42857142857144 Q 405.7142857142857 380.57142857142856 388.57142857142856 373.7142857142857 L 377.14285714285717 368 L 377.14285714285717 368 Q 350.85714285714283 357.7142857142857 334.85714285714283 341.7142857142857 Q 320 324.57142857142856 318.85714285714283 296 Q 320 268.57142857142856 338.2857142857143 250.28571428571428 Q 357.7142857142857 233.14285714285714 389.7142857142857 232 Q 435.42857142857144 230.85714285714286 458.2857142857143 270.85714285714283 L 420.57142857142856 294.85714285714283 L 420.57142857142856 294.85714285714283 Q 409.14285714285717 273.14285714285717 389.7142857142857 274.2857142857143 Q 368 275.42857142857144 366.85714285714283 294.85714285714283 Q 365.7142857142857 313.14285714285717 396.57142857142856 324.57142857142856 L 408 329.14285714285717 L 408 329.14285714285717 Q 438.85714285714283 341.7142857142857 456 358.85714285714283 Q 472 374.85714285714283 472 404.57142857142856 Q 470.85714285714283 437.7142857142857 449.14285714285717 454.85714285714283 Q 427.42857142857144 472 392 472 L 392 472 Z"})})}function bD(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"#00D8FF",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 418 177 Q 410 175 402 172 Q 403 167 404 161 Q 404 161 405 161 Q 414 116 408 83 Q 402 50 381 38 Q 361 27 332 37 Q 302 47 269 76 Q 262 82 256 88 Q 252 84 248 80 Q 213 49 182 38 Q 151 27 130 38 Q 110 50 104 81 Q 98 112 107 155 Q 108 163 110 172 Q 101 175 92 178 Q 51 192 26 212 Q 1 233 0 256 Q 1 279 27 301 Q 54 322 96 337 Q 103 339 110 341 Q 108 350 106 359 Q 98 402 104 432 Q 110 462 130 474 Q 151 485 182 475 Q 213 464 246 435 Q 249 433 252 430 Q 254 428 257 425 Q 264 432 271 438 Q 303 465 332 475 Q 362 485 382 474 Q 402 462 408 430 Q 415 398 406 354 Q 405 347 403 340 Q 408 339 413 337 Q 457 323 484 301 Q 511 280 512 256 Q 511 233 486 212 Q 460 192 418 177 L 418 177 Z M 283 92 Q 311 68 335 59 L 335 59 L 335 59 Q 358 50 371 56 Q 383 64 387 91 Q 391 118 383 157 Q 382 162 381 167 Q 348 159 314 156 Q 294 128 271 103 Q 277 98 283 92 L 283 92 Z M 167 308 Q 175 321 183 333 Q 160 331 137 326 Q 143 304 153 281 Q 160 295 167 308 L 167 308 Z M 137 187 Q 159 182 183 179 Q 175 192 167 205 Q 160 218 153 231 Q 143 208 137 187 L 137 187 Z M 164 256 Q 174 235 186 216 Q 197 196 210 177 Q 233 175 256 175 Q 279 175 302 177 Q 315 196 326 215 Q 338 235 348 256 Q 338 276 326 297 Q 315 316 302 336 Q 280 337 256 337 Q 232 337 210 336 Q 197 317 186 297 Q 174 277 164 256 L 164 256 Z M 345 307 Q 352 294 360 281 Q 369 302 376 325 Q 353 330 329 333 Q 337 320 345 307 L 345 307 Z M 359 231 Q 352 218 345 205 Q 337 192 330 179 Q 354 182 375 187 Q 368 210 359 231 L 359 231 Z M 256 118 Q 272 135 286 154 Q 256 153 226 154 Q 241 135 256 118 L 256 118 Z M 140 57 Q 153 50 178 60 L 178 60 L 178 60 Q 204 70 234 96 Q 236 98 239 101 Q 240 102 241 103 Q 218 128 198 156 Q 164 159 131 167 Q 129 159 128 151 Q 121 114 124 89 Q 128 64 140 57 L 140 57 Z M 116 321 Q 109 319 103 317 Q 69 306 40 286 Q 25 274 21 256 Q 22 241 43 226 Q 64 210 99 198 Q 107 195 116 193 Q 126 225 141 256 Q 126 288 116 321 L 116 321 Z M 232 419 Q 207 441 176 454 Q 158 462 141 455 Q 128 448 125 424 Q 121 399 127 363 Q 129 355 131 346 Q 164 354 199 356 Q 219 384 242 410 Q 237 414 232 419 L 232 419 Z M 257 394 Q 241 378 226 358 Q 241 359 256 359 Q 271 359 286 358 Q 273 377 257 394 L 257 394 Z M 388 424 Q 386 443 371 456 Q 359 462 336 454 Q 313 445 285 421 Q 278 416 272 410 Q 295 385 314 356 Q 349 353 382 346 Q 384 352 385 358 Q 392 391 388 424 L 388 424 Z M 406 317 Q 402 318 397 319 Q 387 287 372 256 Q 386 225 396 193 Q 404 195 411 197 Q 447 210 468 226 Q 490 241 491 255 Q 490 271 467 287 Q 444 304 406 317 L 406 317 Z M 256 302 Q 275 301 288 288 L 288 288 L 288 288 Q 301 275 302 256 Q 301 237 288 224 Q 275 211 256 210 Q 237 211 224 224 Q 211 237 210 256 Q 211 275 224 288 Q 237 301 256 302 L 256 302 Z"})})}function E$(s){return J.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 512 512",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:10},...s,children:J.jsxs("g",{transform:"matrix(2.25096,0,0,2.25096,256.253,256.48)",children:[J.jsx("g",{id:"Three.js_Icon.svg",transform:"matrix(1,0,0,1,-113.385,-113.385)",children:J.jsxs("g",{transform:"matrix(1,0,0,1,8.964,4.2527)",children:[J.jsx("path",{d:"M63.02,200.61L19.807,25.67L193.037,75.544L63.02,200.61Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),J.jsx("path",{d:"M106.39,50.612L127.981,138.108L41.414,113.163L106.39,50.612Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),J.jsx("path",{d:"M84.91,125.03L74.186,81.565L117.194,93.911L84.91,125.03Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),J.jsx("path",{d:"M63.458,38.153L74.182,81.618L31.174,69.272L63.458,38.153Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),J.jsx("path",{d:"M149.47,62.93L160.194,106.395L117.186,94.049L149.47,62.93Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),J.jsx("path",{d:"M84.915,125.06L95.639,168.525L52.631,156.179L84.915,125.06Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}})]})}),J.jsx("g",{id:"Three.js_Icon.svg1"})]})})}function M$(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",fill:"#82BF05",...s,children:J.jsx("path",{d:"M 255.49705304518665 512 Q 245.43811394891944 512 236.385068762279 506.9705304518664 L 174.0196463654224 469.7524557956778 L 174.0196463654224 469.7524557956778 Q 166.97838899803537 465.7288801571709 167.98428290766208 464.7229862475442 Q 168.9901768172888 462.71119842829074 172.00785854616896 461.70530451866404 Q 181.06090373280944 458.6876227897839 186.09037328094303 456.67583497053045 Q 191.11984282907662 454.66404715127703 200.1728880157171 449.63457760314344 Q 202.18467583497053 448.6286836935167 205.20235756385068 449.63457760314344 L 252.47937131630647 477.7996070726916 L 252.47937131630647 477.7996070726916 Q 255.49705304518665 479.811394891945 258.5147347740668 477.7996070726916 L 444.60510805500985 370.16895874263264 L 444.60510805500985 370.16895874263264 Q 446.61689587426326 369.1630648330059 446.61689587426326 365.139489194499 L 446.61689587426326 150.88408644400786 L 446.61689587426326 150.88408644400786 Q 446.61689587426326 147.86640471512771 443.5992141453831 145.85461689587427 L 258.5147347740668 39.22986247544204 L 258.5147347740668 39.22986247544204 Q 255.49705304518665 37.218074656188605 252.47937131630647 39.22986247544204 L 67.39489194499018 145.85461689587427 L 67.39489194499018 145.85461689587427 Q 64.37721021611002 147.86640471512771 64.37721021611002 150.88408644400786 L 64.37721021611002 366.14538310412576 L 64.37721021611002 366.14538310412576 Q 64.37721021611002 369.1630648330059 67.39489194499018 370.16895874263264 L 117.68958742632613 400.3457760314342 L 117.68958742632613 400.3457760314342 Q 138.81335952848724 409.39882121807466 150.88408644400786 402.3575638506876 Q 161.94891944990178 394.3104125736739 162.9548133595285 381.2337917485265 L 162.9548133595285 169.99607072691552 L 162.9548133595285 169.99607072691552 Q 162.9548133595285 164.96660117878193 167.98428290766208 163.9607072691552 L 191.11984282907662 163.9607072691552 L 191.11984282907662 163.9607072691552 Q 196.1493123772102 164.96660117878193 197.15520628683694 169.99607072691552 L 197.15520628683694 381.2337917485265 L 197.15520628683694 381.2337917485265 Q 195.1434184675835 437.5638506876228 141.8310412573674 439.5756385068762 Q 134.78978388998036 439.5756385068762 125.73673870333988 437.5638506876228 Q 116.6836935166994 435.5520628683694 98.57760314341847 427.5049115913556 L 50.29469548133595 399.3398821218075 L 50.29469548133595 399.3398821218075 Q 31.18271119842829 388.27504911591353 31.18271119842829 365.139489194499 L 31.18271119842829 150.88408644400786 L 31.18271119842829 150.88408644400786 Q 31.18271119842829 128.75442043222003 50.29469548133595 117.68958742632613 L 236.385068762279 10.05893909626719 L 236.385068762279 10.05893909626719 Q 255.49705304518665 0 274.6090373280943 10.05893909626719 L 460.69941060903733 117.68958742632613 L 460.69941060903733 117.68958742632613 Q 479.811394891945 128.75442043222003 480.8172888015717 150.88408644400786 L 480.8172888015717 366.14538310412576 L 480.8172888015717 366.14538310412576 Q 479.811394891945 387.2691552062868 460.69941060903733 399.3398821218075 L 274.6090373280943 506.9705304518664 L 274.6090373280943 506.9705304518664 Q 265.5559921414538 512 255.49705304518665 512 L 255.49705304518665 512 Z M 405.3752455795678 300.762278978389 Q 405.3752455795678 271.5913555992141 385.2573673870334 259.52062868369353 L 385.2573673870334 259.52062868369353 L 385.2573673870334 259.52062868369353 Q 364.1335952848723 247.44990176817288 320.8801571709234 242.4204322200393 Q 279.6385068762279 237.3909626719057 267.56777996070724 232.3614931237721 Q 256.50294695481335 227.33202357563852 257.50884086444006 217.2730844793713 Q 256.50294695481335 208.22003929273083 265.5559921414538 200.1728880157171 Q 274.6090373280943 192.12573673870335 305.7917485265226 191.11984282907662 Q 333.95677799607074 191.11984282907662 346.02750491159134 198.16110019646365 Q 359.1041257367387 206.20825147347742 363.1277013752456 225.32023575638507 Q 364.1335952848723 229.34381139489196 369.1630648330059 229.34381139489196 L 393.3045186640471 229.34381139489196 L 393.3045186640471 229.34381139489196 Q 395.3163064833006 229.34381139489196 396.3222003929273 227.33202357563852 Q 398.33398821218077 226.32612966601178 398.33398821218077 223.30844793713163 Q 393.3045186640471 157.9253438113949 305.7917485265226 158.9312377210216 Q 223.30844793713163 159.93713163064834 221.2966601178782 218.27897838899804 Q 221.2966601178782 248.4557956777996 242.4204322200393 260.52652259332024 Q 264.5500982318271 272.5972495088409 302.77406679764243 275.614931237721 Q 347.0333988212181 279.6385068762279 359.1041257367387 286.67976424361495 Q 370.16895874263264 293.72102161100196 369.1630648330059 302.77406679764243 Q 370.16895874263264 332.95088408644403 312.8330058939096 331.94499017681727 Q 276.6208251473477 331.94499017681727 263.5442043222004 322.8919449901768 Q 251.47347740667976 313.8388998035363 249.46168958742632 294.72691552062867 Q 248.4557956777996 290.7033398821218 244.43222003929273 290.7033398821218 L 220.29076620825148 290.7033398821218 L 220.29076620825148 290.7033398821218 Q 215.26129666011786 290.7033398821218 214.25540275049116 295.73280943025543 Q 213.24950884086445 320.8801571709234 233.3673870333988 342.00392927308445 Q 253.4852652259332 363.1277013752456 312.8330058939096 364.1335952848723 Q 403.36345776031436 363.1277013752456 405.3752455795678 300.762278978389 L 405.3752455795678 300.762278978389 Z"})})}const T$=he.div`
  padding: 0.5rem 1rem;
  display: grid;
  gap: 0.5rem;
  grid-template-columns: 1fr 1fr;
`,N1=he.div`
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  align-items: center;
`,I1=he.span`
  font-family: "Segoe UI", sans-serif;
  font-size: 0.8rem;
  color: ${({theme:s})=>s.pallet.textColor};
  text-align: center;
  user-select: none;
`;function C$({modal:s}){return J.jsx(a0,{modal:s,children:J.jsxs(T$,{children:[J.jsxs(N1,{children:[J.jsx(O1,{progress:80,Icon:J.jsx(S$,{})}),J.jsx(I1,{children:"Javascript"})]}),J.jsxs(N1,{children:[J.jsx(O1,{progress:60,Icon:J.jsx(b$,{})}),J.jsx(I1,{children:"Typescript"})]}),J.jsxs(N1,{children:[J.jsx(O1,{progress:70,Icon:J.jsx(bD,{})}),J.jsx(I1,{children:"React"})]}),J.jsxs(N1,{children:[J.jsx(O1,{progress:50,Icon:J.jsx("div",{style:{backgroundColor:"#00D8FF",padding:1},children:J.jsx(bD,{fill:"white"})})}),J.jsx(I1,{children:"React Native"})]}),J.jsxs(N1,{children:[J.jsx(O1,{progress:25,Icon:J.jsx(E$,{})}),J.jsx(I1,{children:"Three js"})]}),J.jsxs(N1,{children:[J.jsx(O1,{progress:25,Icon:J.jsx(M$,{})}),J.jsx(I1,{children:"Node js"})]})]})})}const w$=[{company:"Incora",lengthOfService:"2023  2025",position:"Front-end Developer (Shadow Coder)",projects:[{name:"Hotel Management Platform",technologies:"React, React Native, Firebase",features:["Developed both web and mobile applications simultaneously, ensuring a shared codebase for both platforms.","Built internal utilities to streamline Firebase interactions.","General mobile application performance optimization and implemented offline features"]},{name:"Food Delivery Platform",technologies:"Angular, React",features:["Maintained multiple applications, including a web versions built with Angular (for common users) and React (for staff).","Refactored legacy codebase, migrating to a newer libraries and implementing best practices.","Enhanced test coverage with new unit and end-to-end tests."]},{name:"Sports Betting Platform",technologies:"React",features:["Focused on responsive UI and interactive components for both mobile and desktop.","Collaborated closely with backend developers to facilitate rapid feature implementation.","Contributed to creating reusable component libraries."]}]}];function SD(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 385.7219730941704 236.48430493273543 Q 401.7937219730942 256 385.7219730941704 275.5156950672646 L 165.30941704035874 495.92825112107624 L 165.30941704035874 495.92825112107624 Q 145.79372197309416 512 126.27802690582959 495.92825112107624 Q 110.20627802690584 476.41255605381167 126.27802690582959 456.8968609865471 L 327.17488789237666 256 L 327.17488789237666 256 L 126.27802690582959 55.10313901345292 L 126.27802690582959 55.10313901345292 Q 110.20627802690584 35.587443946188344 126.27802690582959 16.071748878923767 Q 145.79372197309416 0 165.30941704035874 16.071748878923767 L 385.7219730941704 236.48430493273543 L 385.7219730941704 236.48430493273543 Z"})})}const R$=he.div`
  display: flex;
  flex-direction: column;
  gap: 0.25rem 0;
  margin-bottom: 0.5rem;
`,L$=he.a`
  color: blue;
  text-decoration: underline;

  &:link {
    color: blue;
    text-decoration: underline;
  }

  &:visited {
    color: purple;
    text-decoration: underline;
  }

  &:hover {
    color: darkblue;
    text-decoration: underline;
  }

  &:active {
    color: red;
    text-decoration: underline;
  }
`,D$=he.span`
  font-size: 0.8rem;
  font-weight: 600;
`,B$=he.span`
  font-size: 0.8rem;
`,ED=he.button`
  position: relative;
  height: 100%;
  width: auto;
  z-index: 2;

  svg {
    height: 100%;
    width: auto;
  }

  &:hover:not([disabled]) {
    svg {
      fill: ${({theme:s})=>s.pallet.secondColor};
    }
  }
`,O$=he.div`
  width: 100%;
  height: 100%;
`,N$=he.div`
  display: flex;
  justify-content: space-between;
  align-items; center;
  height: 5rem;
`,I$=he.div`
  display: flex;
  align-items: center;
  position: relative;
  overflow: hidden;
`,U$=he.div`
  position: relative;
  display: flex;
  align-items: center;
  transition: linear 0.3s;
  width: 100%;
`,P$=he.div`
  display: flex;
  flex-direction: column;
  padding: 0.25rem;
  min-width: 100%;
`,F$=he.div`
  display: flex;
  flex-direction: column;
`,H$=he.span`
  font-weight: 600;
  font-size: 0.8rem;
`,z$=he.span`
  font-style: italic;
  font-size: 0.7rem;
`,G$=he.div`
  position: relative;
  font-size: 0.8rem;
`,k$=he.ul`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  margin: 0;
  padding-top: 0.8rem;

  opacity: ${({isVisible:s})=>s?1:0};
  visibility: ${({isVisible:s})=>s?"visible":"hidden"};
  transition: opacity 0.4s ease-in-out, visibility 0.3s ease-in-out;
  pointer-events: ${({isVisible:s})=>s?"auto":"none"};
`,V$=he.li`
  margin-bottom: 0.2rem;

  &:last-child {
    margin: 0;
  }

  &::marker {
    color: ${({theme:s})=>s.pallet.secondColor};
  }
`;function Q$({company:s}){const{company:t,lengthOfService:e,position:n,projects:i}=s,[r,a]=ht.useState(0),l=ht.useRef(null),u=ht.useRef(null),[f,m]=ht.useState(0),g=r===0,v=r===i.length-1;ht.useEffect(()=>{const b=l.current;if(b){const C=b.children[0];b.style.left=`-${C.clientWidth*r}px`}u.current&&m(u.current.scrollHeight)},[r]);const _=b=>{b==="next"&&a(C=>i.length-1===C?C:C+1),b==="prev"&&a(C=>C===0?C:C-1)};return J.jsxs(J.Fragment,{children:[J.jsxs(R$,{children:[J.jsxs("span",{children:[J.jsx(L$,{className:"cursor-pointer",target:"_blank",href:"https://incora.software/",children:t})," "," ",J.jsx(D$,{children:e})]}),J.jsx(B$,{children:n})]}),J.jsx(O$,{children:J.jsxs(F$,{children:[J.jsxs(N$,{children:[J.jsx(ED,{onClick:()=>_("prev"),disabled:g,className:g?"not-allowed":"cursor-pointer",children:J.jsx(SD,{style:{transform:"rotate(180deg)"}})}),J.jsx(I$,{children:J.jsx(U$,{ref:l,children:i.map(b=>J.jsxs(P$,{children:[J.jsx(H$,{children:b.name}),J.jsx(z$,{children:b.technologies})]},b.name))})}),J.jsx(ED,{onClick:()=>_("next"),disabled:v,className:v?"not-allowed":"cursor-pointer",children:J.jsx(SD,{})})]}),J.jsx(G$,{style:{height:f},children:i.map((b,C)=>J.jsx(k$,{isVisible:C===r,ref:C===r?u:null,children:b.features.map(T=>J.jsx(V$,{children:T},T))},b.name))})]})})]})}const X$=he.div`
  padding: 0.5rem;
`;function j$({modal:s}){return J.jsx(a0,{modal:s,children:J.jsx(X$,{children:w$.map(t=>J.jsx(Q$,{company:t}))})})}function q$(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 0 64 Q 1 37 19 19 L 19 19 L 19 19 Q 37 1 64 0 L 224 0 L 224 0 L 224 128 L 224 128 Q 224 142 233 151 Q 242 160 256 160 L 384 160 L 384 160 L 384 304 L 384 304 L 176 304 L 176 304 Q 149 305 131 323 Q 113 341 112 368 L 112 512 L 112 512 L 64 512 L 64 512 Q 37 511 19 493 Q 1 475 0 448 L 0 64 L 0 64 Z M 384 128 L 256 128 L 384 128 L 256 128 L 256 0 L 256 0 L 384 128 L 384 128 Z M 208 512 Q 188 511 174 498 L 174 498 L 174 498 Q 161 484 160 464 L 160 448 L 160 448 Q 161 433 176 432 Q 191 433 192 448 L 192 464 L 192 464 Q 193 479 208 480 Q 223 479 224 464 L 224 368 L 224 368 Q 225 353 240 352 Q 255 353 256 368 L 256 464 L 256 464 Q 255 484 242 498 Q 228 511 208 512 L 208 512 Z M 304 352 L 336 352 L 304 352 L 336 352 Q 360 353 376 368 Q 391 384 392 408 Q 391 432 376 448 Q 360 463 336 464 L 320 464 L 320 464 L 320 496 L 320 496 Q 319 511 304 512 Q 289 511 288 496 L 288 448 L 288 448 L 288 368 L 288 368 Q 289 353 304 352 L 304 352 Z M 336 432 Q 358 430 360 408 Q 358 386 336 384 L 320 384 L 320 384 L 320 432 L 320 432 L 336 432 L 336 432 Z M 416 392 Q 416 375 428 364 L 428 364 L 428 364 Q 439 352 456 352 L 472 352 L 472 352 Q 489 352 500 364 Q 512 375 512 392 L 512 400 L 512 400 Q 511 415 496 416 Q 481 415 480 400 L 480 392 L 480 392 Q 479 385 472 384 L 456 384 L 456 384 Q 449 385 448 392 L 448 472 L 448 472 Q 449 479 456 480 L 472 480 L 472 480 Q 479 479 480 472 L 480 464 L 480 464 Q 465 463 464 448 Q 465 433 480 432 L 496 432 L 496 432 Q 511 433 512 448 L 512 472 L 512 472 Q 512 489 500 500 Q 489 512 472 512 L 456 512 L 456 512 Q 439 512 428 500 Q 416 489 416 472 L 416 392 L 416 392 Z"})})}function Y$(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 32 96 Q 33 55 60 28 L 60 28 L 60 28 Q 87 1 128 0 L 224 0 L 224 0 L 224 191 L 224 191 Q 225 201 233 205 Q 241 209 250 203 L 304 160 L 304 160 L 358 203 L 358 203 Q 367 209 375 205 Q 383 201 384 191 L 384 0 L 384 0 L 416 0 L 448 0 Q 462 0 471 9 Q 480 18 480 32 L 480 352 L 480 352 Q 480 366 471 375 Q 462 384 448 384 L 448 448 L 448 448 Q 462 448 471 457 Q 480 466 480 480 Q 480 494 471 503 Q 462 512 448 512 L 416 512 L 128 512 Q 87 511 60 484 Q 33 457 32 416 L 32 96 L 32 96 Z M 96 416 Q 96 430 105 439 L 105 439 L 105 439 Q 114 448 128 448 L 384 448 L 384 448 L 384 384 L 384 384 L 128 384 L 128 384 Q 114 384 105 393 Q 96 402 96 416 L 96 416 Z"})})}function W$(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 235.55271565495207 46.61980830670927 L 130.8626198083067 46.61980830670927 L 235.55271565495207 46.61980830670927 L 104.69009584664536 46.61980830670927 Q 93.23961661341853 46.61980830670927 85.87859424920129 53.980830670926515 Q 78.51757188498402 61.34185303514377 78.51757188498402 72.7923322683706 Q 78.51757188498402 84.24281150159744 85.87859424920129 91.60383386581469 Q 93.23961661341853 98.96485623003196 104.69009584664536 98.96485623003196 L 104.69009584664536 207.7444089456869 L 104.69009584664536 207.7444089456869 Q 104.69009584664536 222.4664536741214 97.32907348242811 234.73482428115017 L 8.178913738019169 378.68370607028754 L 8.178913738019169 378.68370607028754 Q 0 392.5878594249201 0 408.9456869009585 Q 0.8178913738019169 432.6645367412141 16.357827476038338 449.0223642172524 Q 32.715654952076676 464.5623003194888 56.43450479233227 465.3801916932907 L 309.98083067092654 465.3801916932907 L 309.98083067092654 465.3801916932907 Q 323.0670926517572 465.3801916932907 333.6996805111821 459.6549520766773 Q 330.4281150159744 452.29392971246006 330.4281150159744 444.1150159744409 L 330.4281150159744 443.297124600639 L 330.4281150159744 443.297124600639 Q 318.9776357827476 449.0223642172524 306.7092651757188 447.38658146964855 Q 293.62300319488816 446.56869009584665 283.8083067092652 435.93610223642173 Q 272.3578274760383 423.66773162939296 264.17891373801916 408.9456869009585 Q 255.18210862619807 394.22364217252397 250.2747603833866 377.86581469648564 Q 246.18530351437698 364.779552715655 251.0926517571885 353.3290734824281 Q 256 341.0607028753994 266.6325878594249 334.517571884984 L 266.6325878594249 334.517571884984 L 266.6325878594249 334.517571884984 L 97.32907348242811 334.517571884984 L 97.32907348242811 334.517571884984 L 141.49520766773162 262.54313099041536 L 141.49520766773162 262.54313099041536 Q 157.03514376996804 237.18849840255592 157.03514376996804 207.7444089456869 L 157.03514376996804 98.96485623003196 L 157.03514376996804 98.96485623003196 L 209.38019169329073 98.96485623003196 L 209.38019169329073 98.96485623003196 L 209.38019169329073 207.7444089456869 L 209.38019169329073 207.7444089456869 Q 209.38019169329073 237.18849840255592 224.92012779552715 262.54313099041536 L 248.63897763578274 300.9840255591054 L 248.63897763578274 300.9840255591054 Q 248.63897763578274 296.0766773162939 250.2747603833866 291.1693290734824 Q 255.18210862619807 274.8115015974441 263.36102236421726 260.0894568690096 Q 269.08626198083067 251.91054313099042 274.8115015974441 243.73162939297126 L 269.90415335463257 234.73482428115017 L 269.90415335463257 234.73482428115017 Q 261.7252396166134 222.4664536741214 261.7252396166134 207.7444089456869 L 261.7252396166134 98.96485623003196 L 261.7252396166134 98.96485623003196 Q 273.1757188498403 98.96485623003196 280.5367412140575 91.60383386581469 Q 287.89776357827475 84.24281150159744 287.89776357827475 72.7923322683706 Q 287.89776357827475 61.34185303514377 280.5367412140575 53.980830670926515 Q 273.1757188498403 46.61980830670927 261.7252396166134 46.61980830670927 L 235.55271565495207 46.61980830670927 L 235.55271565495207 46.61980830670927 Z M 356.6006389776358 224.92012779552715 L 356.6006389776358 239.64217252396165 L 356.6006389776358 224.92012779552715 L 356.6006389776358 239.64217252396165 Q 355.78274760383385 249.45686900958466 346.7859424920128 254.36421725239617 Q 337.7891373801917 260.0894568690096 328.7923322683706 255.18210862619807 L 318.1597444089457 248.63897763578274 L 318.1597444089457 248.63897763578274 Q 309.1629392971246 244.54952076677316 302.6198083067093 251.0926517571885 Q 293.62300319488816 260.9073482428115 286.26198083067095 273.1757188498403 Q 278.9009584664537 285.444089456869 275.62939297124603 298.53035143769966 Q 273.1757188498403 307.5271565495208 281.35463258785944 312.4345047923323 L 292.80511182108626 318.9776357827476 L 292.80511182108626 318.9776357827476 Q 300.9840255591054 324.702875399361 300.9840255591054 334.517571884984 Q 300.9840255591054 344.33226837060704 292.80511182108626 349.23961661341855 L 281.35463258785944 356.6006389776358 L 281.35463258785944 356.6006389776358 Q 273.1757188498403 361.50798722044726 275.62939297124603 370.5047923322684 Q 279.7188498402556 383.59105431309905 286.26198083067095 395.8594249201278 Q 293.62300319488816 408.12779552715654 302.6198083067093 417.94249201277955 Q 309.98083067092654 424.48562300319486 318.1597444089457 419.5782747603834 L 328.7923322683706 413.85303514376994 L 328.7923322683706 413.85303514376994 Q 337.7891373801917 408.9456869009585 346.7859424920128 413.85303514376994 Q 355.78274760383385 419.5782747603834 356.6006389776358 429.39297124600637 L 356.6006389776358 443.297124600639 L 356.6006389776358 443.297124600639 Q 356.6006389776358 453.11182108626195 365.59744408945687 455.5654952076677 Q 378.68370607028754 458.8370607028754 392.5878594249201 458.8370607028754 Q 406.49201277955274 458.8370607028754 419.5782747603834 455.5654952076677 Q 427.75718849840257 453.11182108626195 428.57507987220447 443.297124600639 L 428.57507987220447 429.39297124600637 L 428.57507987220447 429.39297124600637 Q 429.39297124600637 418.76038338658145 437.5718849840256 413.85303514376994 Q 446.56869009584665 408.9456869009585 455.5654952076677 413.03514376996804 L 467.0159744408946 419.5782747603834 L 467.0159744408946 419.5782747603834 Q 475.19488817891374 423.66773162939296 482.555910543131 417.94249201277955 Q 491.55271565495207 408.12779552715654 498.91373801916933 395.04153354632587 Q 505.45686900958464 382.77316293929715 509.54632587859425 369.6869009584665 Q 512 361.50798722044726 503.82108626198084 355.78274760383385 L 492.37060702875397 349.23961661341855 L 492.37060702875397 349.23961661341855 Q 484.1916932907348 344.33226837060704 484.1916932907348 334.517571884984 Q 484.1916932907348 324.702875399361 492.37060702875397 318.9776357827476 L 503.82108626198084 312.4345047923323 L 503.82108626198084 312.4345047923323 Q 512 307.5271565495208 509.54632587859425 298.53035143769966 Q 505.45686900958464 285.444089456869 498.91373801916933 273.1757188498403 Q 491.55271565495207 260.9073482428115 482.555910543131 250.2747603833866 Q 475.19488817891374 244.54952076677316 467.0159744408946 248.63897763578274 L 455.5654952076677 255.18210862619807 L 455.5654952076677 255.18210862619807 Q 446.56869009584665 260.0894568690096 437.5718849840256 254.36421725239617 Q 429.39297124600637 249.45686900958466 428.57507987220447 239.64217252396165 L 428.57507987220447 224.92012779552715 L 428.57507987220447 224.92012779552715 Q 427.75718849840257 215.92332268370606 419.5782747603834 212.6517571884984 Q 406.49201277955274 210.19808306709265 392.5878594249201 210.19808306709265 Q 378.68370607028754 210.19808306709265 365.59744408945687 212.6517571884984 Q 356.6006389776358 215.92332268370606 356.6006389776358 224.92012779552715 L 356.6006389776358 224.92012779552715 Z M 353.3290734824281 334.517571884984 Q 353.3290734824281 311.61661341853033 372.1405750798722 298.53035143769966 Q 392.5878594249201 287.89776357827475 413.03514376996804 298.53035143769966 Q 431.8466453674121 311.61661341853033 431.8466453674121 334.517571884984 Q 431.8466453674121 357.4185303514377 413.03514376996804 369.6869009584665 Q 392.5878594249201 381.1373801916933 372.1405750798722 369.6869009584665 Q 353.3290734824281 357.4185303514377 353.3290734824281 334.517571884984 L 353.3290734824281 334.517571884984 Z"})})}function K$(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 56.888888888888886 56.888888888888886 Q 32.888888888888886 57.77777777777778 16.88888888888889 73.77777777777777 L 16.88888888888889 73.77777777777777 L 16.88888888888889 73.77777777777777 Q 0.8888888888888888 89.77777777777777 0 113.77777777777777 L 0 398.22222222222223 L 0 398.22222222222223 Q 0.8888888888888888 422.22222222222223 16.88888888888889 438.22222222222223 Q 32.888888888888886 454.22222222222223 56.888888888888886 455.1111111111111 L 455.1111111111111 455.1111111111111 L 455.1111111111111 455.1111111111111 Q 479.1111111111111 454.22222222222223 495.1111111111111 438.22222222222223 Q 511.1111111111111 422.22222222222223 512 398.22222222222223 L 512 113.77777777777777 L 512 113.77777777777777 Q 511.1111111111111 89.77777777777777 495.1111111111111 73.77777777777777 Q 479.1111111111111 57.77777777777778 455.1111111111111 56.888888888888886 L 56.888888888888886 56.888888888888886 L 56.888888888888886 56.888888888888886 Z M 128 284.44444444444446 L 184.88888888888889 284.44444444444446 L 128 284.44444444444446 L 184.88888888888889 284.44444444444446 Q 215.11111111111111 285.3333333333333 235.55555555555554 304.8888888888889 Q 255.11111111111111 325.3333333333333 256 355.55555555555554 Q 255.11111111111111 368.8888888888889 241.77777777777777 369.77777777777777 L 71.11111111111111 369.77777777777777 L 71.11111111111111 369.77777777777777 Q 57.77777777777778 368.8888888888889 56.888888888888886 355.55555555555554 Q 57.77777777777778 325.3333333333333 77.33333333333333 304.8888888888889 Q 97.77777777777777 285.3333333333333 128 284.44444444444446 L 128 284.44444444444446 Z M 99.55555555555556 199.11111111111111 Q 100.44444444444444 167.11111111111111 128 150.22222222222223 Q 156.44444444444446 134.22222222222223 184.88888888888889 150.22222222222223 Q 212.44444444444446 167.11111111111111 213.33333333333334 199.11111111111111 Q 212.44444444444446 231.11111111111111 184.88888888888889 248 Q 156.44444444444446 264 128 248 Q 100.44444444444444 231.11111111111111 99.55555555555556 199.11111111111111 L 99.55555555555556 199.11111111111111 Z M 327.1111111111111 170.66666666666666 L 440.8888888888889 170.66666666666666 L 327.1111111111111 170.66666666666666 L 440.8888888888889 170.66666666666666 Q 454.22222222222223 171.55555555555554 455.1111111111111 184.88888888888889 Q 454.22222222222223 198.22222222222223 440.8888888888889 199.11111111111111 L 327.1111111111111 199.11111111111111 L 327.1111111111111 199.11111111111111 Q 313.77777777777777 198.22222222222223 312.8888888888889 184.88888888888889 Q 313.77777777777777 171.55555555555554 327.1111111111111 170.66666666666666 L 327.1111111111111 170.66666666666666 Z M 327.1111111111111 227.55555555555554 L 440.8888888888889 227.55555555555554 L 327.1111111111111 227.55555555555554 L 440.8888888888889 227.55555555555554 Q 454.22222222222223 228.44444444444446 455.1111111111111 241.77777777777777 Q 454.22222222222223 255.11111111111111 440.8888888888889 256 L 327.1111111111111 256 L 327.1111111111111 256 Q 313.77777777777777 255.11111111111111 312.8888888888889 241.77777777777777 Q 313.77777777777777 228.44444444444446 327.1111111111111 227.55555555555554 L 327.1111111111111 227.55555555555554 Z M 327.1111111111111 284.44444444444446 L 440.8888888888889 284.44444444444446 L 327.1111111111111 284.44444444444446 L 440.8888888888889 284.44444444444446 Q 454.22222222222223 285.3333333333333 455.1111111111111 298.6666666666667 Q 454.22222222222223 312 440.8888888888889 312.8888888888889 L 327.1111111111111 312.8888888888889 L 327.1111111111111 312.8888888888889 Q 313.77777777777777 312 312.8888888888889 298.6666666666667 Q 313.77777777777777 285.3333333333333 327.1111111111111 284.44444444444446 L 327.1111111111111 284.44444444444446 Z"})})}function J$({modal:s}){const t=xy(),e=m5(),n=i=>{t(AR(i))};return J.jsx(a0,{modal:s,children:J.jsxs(TN,{flow:"row",children:[J.jsx(qd,{onClick:()=>n("photo"),SvgIcon:q$,text:"My_photo",highlightColor:e.pallet.textColor}),J.jsx(qd,{onClick:()=>n("experience"),SvgIcon:W$,text:"Experience",highlightColor:e.pallet.textColor}),J.jsx(qd,{onClick:()=>n("about_me"),SvgIcon:K$,text:"About_me",highlightColor:e.pallet.textColor}),J.jsx(qd,{onClick:()=>n("skills"),SvgIcon:Y$,text:"Skills",highlightColor:e.pallet.textColor})]})})}var k_={};k_.d=(s,t)=>{for(var e in t)k_.o(t,e)&&!k_.o(s,e)&&Object.defineProperty(s,e,{enumerable:!0,get:t[e]})};k_.o=(s,t)=>Object.prototype.hasOwnProperty.call(s,t);var sn=globalThis.pdfjsLib={};k_.d(sn,{AbortException:()=>l0,AnnotationEditorLayer:()=>t5,AnnotationEditorParamsType:()=>Ze,AnnotationEditorType:()=>dn,AnnotationEditorUIManager:()=>Wg,AnnotationLayer:()=>Jet,AnnotationMode:()=>yd,ColorPicker:()=>g3,DOMSVGFactory:()=>BR,DrawLayer:()=>s5,FeatureTest:()=>Ia,GlobalWorkerOptions:()=>Wh,ImageKind:()=>UE,InvalidPDFException:()=>RN,MissingPDFException:()=>o0,OPS:()=>uc,OutputScale:()=>q8,PDFDataRangeTransport:()=>MI,PDFDateString:()=>MR,PDFWorker:()=>$1,PasswordResponses:()=>ett,PermissionFlag:()=>ttt,PixelsPerInch:()=>np,RenderingCancelledException:()=>SR,TextLayer:()=>xw,UnexpectedResponseException:()=>D4,Util:()=>Le,VerbosityLevel:()=>w4,XfaLayer:()=>CI,build:()=>Det,createValidAbsoluteUrl:()=>rtt,fetchData:()=>O4,getDocument:()=>xet,getFilenameFromUrl:()=>ptt,getPdfFilenameFromUrl:()=>mtt,getXfaPageViewport:()=>gtt,isDataScheme:()=>N4,isPdfFile:()=>ER,noContextMenu:()=>Dl,normalizeUnicode:()=>htt,setLayerDimensions:()=>Yg,shadow:()=>Fn,version:()=>Let});const sa=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),wN=[1,0,0,1,0,0],V8=[.001,0,0,.001,0,0],Z$=1e7,WC=1.35,Fo={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},yd={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},$$="pdfjs_internal_editor_",dn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ze={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},ttt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Yr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},UE={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ks={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},a_={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},w4={ERRORS:0,WARNINGS:1,INFOS:5},uc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},ett={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let R4=w4.WARNINGS;function ntt(s){Number.isInteger(s)&&(R4=s)}function itt(){return R4}function L4(s){R4>=w4.INFOS&&console.log(`Info: ${s}`)}function An(s){R4>=w4.WARNINGS&&console.log(`Warning: ${s}`)}function Oi(s){throw new Error(s)}function js(s,t){s||Oi(t)}function stt(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function rtt(s,t=null,e=null){if(!s)return null;try{if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const i=s.match(/\./g);(i==null?void 0:i.length)>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=utt(s)}catch{}}const n=t?new URL(s,t):new URL(s);if(stt(n))return n}catch{}return null}function Fn(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const up=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class Q8 extends up{constructor(t,e){super(t,"PasswordException"),this.code=e}}class X8 extends up{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class RN extends up{constructor(t){super(t,"InvalidPDFException")}}class o0 extends up{constructor(t){super(t,"MissingPDFException")}}class D4 extends up{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class att extends up{constructor(t){super(t,"FormatError")}}class l0 extends up{constructor(t){super(t,"AbortException")}}function LN(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&Oi("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),a=s.subarray(i,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function B4(s){typeof s!="string"&&Oi("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function ott(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function xR(s){const t=Object.create(null);for(const[e,n]of s)t[e]=n;return t}function ltt(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function ctt(){try{return new Function(""),!0}catch{return!1}}class Ia{static get isLittleEndian(){return Fn(this,"isLittleEndian",ltt())}static get isEvalSupported(){return Fn(this,"isEvalSupported",ctt())}static get isOffscreenCanvasSupported(){return Fn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Fn(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Fn(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Fn(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const KC=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var nf,PE,j8;class Le{static makeHexColor(t,e,n){return`#${KC[t]}${KC[e]}${KC[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[n,i]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[i,r]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),a=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],r[0],a[0]),Math.min(n[1],i[1],r[1],a[1]),Math.max(n[0],i[0],r[0],a[0]),Math.max(n[1],i[1],r[1],a[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],l=(n+a)/2,u=Math.sqrt((n+a)**2-4*(n*a-r*i))/2,f=l+u||1,m=l-u||1;return[Math.sqrt(f),Math.sqrt(m)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[n,r,i,a]}static bezierBoundingBox(t,e,n,i,r,a,l,u,f){return f?(f[0]=Math.min(f[0],t,l),f[1]=Math.min(f[1],e,u),f[2]=Math.max(f[2],t,l),f[3]=Math.max(f[3],e,u)):f=[Math.min(t,l),Math.min(e,u),Math.max(t,l),Math.max(e,u)],k(this,nf,j8).call(this,t,n,r,l,e,i,a,u,3*(-t+3*(n-r)+l),6*(t-2*n+r),3*(n-t),f),k(this,nf,j8).call(this,t,n,r,l,e,i,a,u,3*(-e+3*(i-a)+u),6*(e-2*i+a),3*(i-e),f),f}}nf=new WeakSet,PE=function(t,e,n,i,r,a,l,u,f,m){if(f<=0||f>=1)return;const g=1-f,v=f*f,_=v*f,b=g*(g*(g*t+3*f*e)+3*v*n)+_*i,C=g*(g*(g*r+3*f*a)+3*v*l)+_*u;m[0]=Math.min(m[0],b),m[1]=Math.min(m[1],C),m[2]=Math.max(m[2],b),m[3]=Math.max(m[3],C)},j8=function(t,e,n,i,r,a,l,u,f,m,g,v){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&k(this,nf,PE).call(this,t,e,n,i,r,a,l,u,-g/m,v);return}const _=m**2-4*g*f;if(_<0)return;const b=Math.sqrt(_),C=2*f;k(this,nf,PE).call(this,t,e,n,i,r,a,l,u,(-m+b)/C,v),k(this,nf,PE).call(this,t,e,n,i,r,a,l,u,(-m-b)/C,v)},Y(Le,nf);function utt(s){return decodeURIComponent(escape(s))}let JC=null,MD=null;function htt(s){return JC||(JC=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,MD=new Map([["","t"]])),s.replaceAll(JC,(t,e,n)=>e?e.normalize("NFKC"):MD.get(n))}function ftt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const s=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(s);else for(let t=0;t<32;t++)s[t]=Math.floor(Math.random()*255);return LN(s)}const bR="pdfjs_internal_id_",vh={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function dtt(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(LN(s))}const _h="http://www.w3.org/2000/svg",Tm=class Tm{};Je(Tm,"CSS",96),Je(Tm,"PDF",72),Je(Tm,"PDF_TO_CSS_UNITS",Tm.CSS/Tm.PDF);let np=Tm;async function O4(s,t="text"){if(p_(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class Gx{constructor({viewBox:t,scale:e,rotation:n,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=i,this.offsetY=r;const l=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let f,m,g,v;switch(n%=360,n<0&&(n+=360),n){case 180:f=-1,m=0,g=0,v=1;break;case 90:f=0,m=1,g=1,v=0;break;case 270:f=0,m=-1,g=-1,v=0;break;case 0:f=1,m=0,g=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(g=-g,v=-v);let _,b,C,T;f===0?(_=Math.abs(u-t[1])*e+i,b=Math.abs(l-t[0])*e+r,C=(t[3]-t[1])*e,T=(t[2]-t[0])*e):(_=Math.abs(l-t[0])*e+i,b=Math.abs(u-t[1])*e+r,C=(t[2]-t[0])*e,T=(t[3]-t[1])*e),this.transform=[f*e,m*e,g*e,v*e,_-f*e*l-g*e*u,b-m*e*l-v*e*u],this.width=C,this.height=T}get rawDims(){const{viewBox:t}=this;return Fn(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new Gx({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){return Le.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Le.applyTransform([t[0],t[1]],this.transform),n=Le.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return Le.applyInverseTransform([t,e],this.transform)}}class SR extends up{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function N4(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function ER(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function ptt(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function mtt(s,t="document.pdf"){if(typeof s!="string")return t;if(N4(s))return An('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(s);let r=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class TD{constructor(){Je(this,"started",Object.create(null));Je(this,"times",[])}time(t){t in this.started&&An(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||An(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-i}ms
`);return t.join("")}}function p_(s,t){try{const{protocol:e}=t?new URL(s,t):new URL(s);return e==="http:"||e==="https:"}catch{return!1}}function Dl(s){s.preventDefault()}function CD(s){console.log("Deprecated API usage: "+s)}var uA;class MR{static toDateObject(t){if(!t||typeof t!="string")return null;x(this,uA)||G(this,uA,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=x(this,uA).exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let u=parseInt(e[6],10);u=u>=0&&u<=59?u:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(a+=m,l+=g):f==="+"&&(a-=m,l-=g),new Date(Date.UTC(n,i,r,a,l,u))}}uA=new WeakMap,Y(MR,uA);function gtt(s,{scale:t=1,rotation:e=0}){const{width:n,height:i}=s.attributes.style,r=[0,0,parseInt(n),parseInt(i)];return new Gx({viewBox:r,scale:t,rotation:e})}function TR(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(An(`Not a valid color format: "${s}"`),[0,0,0])}function vtt(s){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,TR(n))}t.remove()}function Wi(s){const{a:t,b:e,c:n,d:i,e:r,f:a}=s.getTransform();return[t,e,n,i,r,a]}function yh(s){const{a:t,b:e,c:n,d:i,e:r,f:a}=s.getTransform().invertSelf();return[t,e,n,i,r,a]}function Yg(s,t,e=!1,n=!0){if(t instanceof Gx){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:a}=s,l=Ia.isCSSRoundSupported,u=`var(--scale-factor) * ${i}px`,f=`var(--scale-factor) * ${r}px`,m=l?`round(down, ${u}, var(--scale-round-x, 1px))`:`calc(${u})`,g=l?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!e||t.rotation%180===0?(a.width=m,a.height=g):(a.width=g,a.height=m)}n&&s.setAttribute("data-main-rotation",t.rotation)}class q8{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var _d,Im,hc,Um,hA,fA,y3,DN,Ua,BN,ON,FE,NN,W8;const bh=class bh{constructor(t){Y(this,Ua);Y(this,_d,null);Y(this,Im,null);Y(this,hc);Y(this,Um,null);Y(this,hA,null);G(this,hc,t),x(bh,fA)||G(bh,fA,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=G(this,_d,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=x(this,hc)._uiManager._signal;t.addEventListener("contextmenu",Dl,{signal:e}),t.addEventListener("pointerdown",k(bh,y3,DN),{signal:e});const n=G(this,Um,document.createElement("div"));n.className="buttons",t.append(n);const i=x(this,hc).toolbarPosition;if(i){const{style:r}=t,a=x(this,hc)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return k(this,Ua,NN).call(this),t}get div(){return x(this,_d)}hide(){var t;x(this,_d).classList.add("hidden"),(t=x(this,Im))==null||t.hideDropdown()}show(){var t;x(this,_d).classList.remove("hidden"),(t=x(this,hA))==null||t.shown()}async addAltText(t){const e=await t.render();k(this,Ua,FE).call(this,e),x(this,Um).prepend(e,x(this,Ua,W8)),G(this,hA,t)}addColorPicker(t){G(this,Im,t);const e=t.renderButton();k(this,Ua,FE).call(this,e),x(this,Um).prepend(e,x(this,Ua,W8))}remove(){var t;x(this,_d).remove(),(t=x(this,Im))==null||t.destroy(),G(this,Im,null)}};_d=new WeakMap,Im=new WeakMap,hc=new WeakMap,Um=new WeakMap,hA=new WeakMap,fA=new WeakMap,y3=new WeakSet,DN=function(t){t.stopPropagation()},Ua=new WeakSet,BN=function(t){x(this,hc)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},ON=function(t){x(this,hc)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},FE=function(t){const e=x(this,hc)._uiManager._signal;t.addEventListener("focusin",k(this,Ua,BN).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",k(this,Ua,ON).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Dl,{signal:e})},NN=function(){const{editorType:t,_uiManager:e}=x(this,hc),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",x(bh,fA)[t]),k(this,Ua,FE).call(this,n),n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),x(this,Um).append(n)},W8=function(){const t=document.createElement("div");return t.className="divider",t},Y(bh,y3),Y(bh,fA,null);let Y8=bh;var dA,Pm,Fm,sp,IN,UN,PN;class ytt{constructor(t){Y(this,sp);Y(this,dA,null);Y(this,Pm,null);Y(this,Fm);G(this,Fm,t)}show(t,e,n){const[i,r]=k(this,sp,UN).call(this,e,n),{style:a}=x(this,Pm)||G(this,Pm,k(this,sp,IN).call(this));t.append(x(this,Pm)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){x(this,Pm).remove()}}dA=new WeakMap,Pm=new WeakMap,Fm=new WeakMap,sp=new WeakSet,IN=function(){const t=G(this,Pm,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Dl,{signal:x(this,Fm)._signal});const e=G(this,dA,document.createElement("div"));return e.className="buttons",t.append(e),k(this,sp,PN).call(this),t},UN=function(t,e){let n=0,i=0;for(const r of t){const a=r.y+r.height;if(a<n)continue;const l=r.x+(e?r.width:0);if(a>n){i=l,n=a;continue}e?l>i&&(i=l):l<i&&(i=l)}return[e?1-i:i,n]},PN=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=x(this,Fm)._signal;t.addEventListener("contextmenu",Dl,{signal:n}),t.addEventListener("click",()=>{x(this,Fm).highlightSelection("floating_button")},{signal:n}),x(this,dA).append(t)};function d3(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}function _tt(s){return Math.round(Math.min(255,Math.max(1,255*s))).toString(16).padStart(2,"0")}var _3;class Att{constructor(){Y(this,_3,0)}get id(){return`${$$}${Ea(this,_3)._++}`}}_3=new WeakMap;var nv,pA,Jr,iv,HE;const PR=class PR{constructor(){Y(this,iv);Y(this,nv,ftt());Y(this,pA,0);Y(this,Jr,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Fn(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:i,type:r}=t;return k(this,iv,HE).call(this,`${e}_${n}_${i}_${r}`,t)}async getFromUrl(t){return k(this,iv,HE).call(this,t,t)}async getFromBlob(t,e){const n=await e;return k(this,iv,HE).call(this,t,n)}async getFromId(t){x(this,Jr)||G(this,Jr,new Map);const e=x(this,Jr).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){x(this,Jr)||G(this,Jr,new Map);let n=x(this,Jr).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${x(this,nv)}_${Ea(this,pA)._++}`,refCounter:1,isSvg:!1},x(this,Jr).set(t,n),x(this,Jr).set(n.id,n),n}getSvgUrl(t){const e=x(this,Jr).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;x(this,Jr)||G(this,Jr,new Map);const e=x(this,Jr).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(i=n.close)==null||i.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${x(this,nv)}_`)}};nv=new WeakMap,pA=new WeakMap,Jr=new WeakMap,iv=new WeakSet,HE=async function(t,e){x(this,Jr)||G(this,Jr,new Map);let n=x(this,Jr).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${x(this,nv)}_${Ea(this,pA)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(n.url=e,i=await O4(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=PR._isSVGFittingCanvas,a=new FileReader,l=new Image,u=new Promise((f,m)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,f()},a.onload=async()=>{const g=n.svgUrl=a.result;l.src=await r?`${g}#svgView(preserveAspectRatio(none))`:g},l.onerror=a.onerror=m});a.readAsDataURL(i),await u}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){console.error(i),n=null}return x(this,Jr).set(t,n),n&&x(this,Jr).set(n.id,n),n};let K8=PR;var or,Ad,mA,lr;class xtt{constructor(t=128){Y(this,or,[]);Y(this,Ad,!1);Y(this,mA);Y(this,lr,-1);G(this,mA,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(i&&t(),x(this,Ad))return;const u={cmd:t,undo:e,post:n,type:r};if(x(this,lr)===-1){x(this,or).length>0&&(x(this,or).length=0),G(this,lr,0),x(this,or).push(u);return}if(a&&x(this,or)[x(this,lr)].type===r){l&&(u.undo=x(this,or)[x(this,lr)].undo),x(this,or)[x(this,lr)]=u;return}const f=x(this,lr)+1;f===x(this,mA)?x(this,or).splice(0,1):(G(this,lr,f),f<x(this,or).length&&x(this,or).splice(f)),x(this,or).push(u)}undo(){if(x(this,lr)===-1)return;G(this,Ad,!0);const{undo:t,post:e}=x(this,or)[x(this,lr)];t(),e==null||e(),G(this,Ad,!1),G(this,lr,x(this,lr)-1)}redo(){if(x(this,lr)<x(this,or).length-1){G(this,lr,x(this,lr)+1),G(this,Ad,!0);const{cmd:t,post:e}=x(this,or)[x(this,lr)];t(),e==null||e(),G(this,Ad,!1)}}hasSomethingToUndo(){return x(this,lr)!==-1}hasSomethingToRedo(){return x(this,lr)<x(this,or).length-1}destroy(){G(this,or,null)}}or=new WeakMap,Ad=new WeakMap,mA=new WeakMap,lr=new WeakMap;var A3,FN;class kx{constructor(t){Y(this,A3);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ia.platform;for(const[n,i,r={}]of t)for(const a of n){const l=a.startsWith("mac+");e&&l?(this.callbacks.set(a.slice(4),{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1))):!e&&!l&&(this.callbacks.set(a,{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(k(this,A3,FN).call(this,e));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:a=[],checker:l=null}}=n;l&&!l(t,e)||(i.bind(t,...a,e)(),r||(e.stopPropagation(),e.preventDefault()))}}A3=new WeakSet,FN=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const x3=class x3{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return vtt(t),Fn(this,"_colors",t)}convert(t){const e=TR(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((r,a)=>r===e[a]))return x3._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Le.makeHexColor(...e):t}};Je(x3,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let J8=x3;var sv,Lo,Vs,Cr,rv,Eh,av,fc,xd,ov,Hm,yu,dc,zm,gA,vA,lv,yA,_u,bd,cv,Sd,Au,b3,Ed,_A,Md,Gm,AA,xA,cr,ui,Mh,km,bA,SA,Td,xu,Th,EA,Al,me,zE,Z8,HN,zN,GE,GN,kN,VN,$8,QN,tw,ew,XN,Ta,dd,jN,qN,nw,YN,m_,iw;const Y1=class Y1{constructor(t,e,n,i,r,a,l,u,f,m,g){Y(this,me);Y(this,sv,new AbortController);Y(this,Lo,null);Y(this,Vs,new Map);Y(this,Cr,new Map);Y(this,rv,null);Y(this,Eh,null);Y(this,av,null);Y(this,fc,new xtt);Y(this,xd,null);Y(this,ov,0);Y(this,Hm,new Set);Y(this,yu,null);Y(this,dc,null);Y(this,zm,new Set);Y(this,gA,!1);Y(this,vA,!1);Y(this,lv,!1);Y(this,yA,null);Y(this,_u,null);Y(this,bd,null);Y(this,cv,null);Y(this,Sd,!1);Y(this,Au,null);Y(this,b3,new Att);Y(this,Ed,!1);Y(this,_A,!1);Y(this,Md,null);Y(this,Gm,null);Y(this,AA,null);Y(this,xA,null);Y(this,cr,dn.NONE);Y(this,ui,new Set);Y(this,Mh,null);Y(this,km,null);Y(this,bA,null);Y(this,SA,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});Y(this,Td,[0,0]);Y(this,xu,null);Y(this,Th,null);Y(this,EA,null);Y(this,Al,null);const v=this._signal=x(this,sv).signal;G(this,Th,t),G(this,EA,e),G(this,rv,n),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:v}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),i._on("setpreference",this.onSetPreference.bind(this),{signal:v}),i._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:v}),k(this,me,GN).call(this),k(this,me,XN).call(this),k(this,me,$8).call(this),G(this,Eh,r.annotationStorage),G(this,yA,r.filterFactory),G(this,km,a),G(this,cv,l||null),G(this,gA,u),G(this,vA,f),G(this,lv,m),G(this,xA,g||null),this.viewParameters={realScale:np.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=Y1.prototype,e=a=>x(a,Th).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:u}=l;return u!=="text"&&u!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Fn(this,"_keyboardManager",new kx([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&x(a,Th).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&x(a,Th).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,i;(t=x(this,Al))==null||t.resolve(),G(this,Al,null),(e=x(this,sv))==null||e.abort(),G(this,sv,null),this._signal=null;for(const r of x(this,Cr).values())r.destroy();x(this,Cr).clear(),x(this,Vs).clear(),x(this,zm).clear(),G(this,Lo,null),x(this,ui).clear(),x(this,fc).destroy(),(n=x(this,rv))==null||n.destroy(),(i=x(this,Au))==null||i.hide(),G(this,Au,null),x(this,_u)&&(clearTimeout(x(this,_u)),G(this,_u,null)),x(this,xu)&&(clearTimeout(x(this,xu)),G(this,xu,null))}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return x(this,xA)}get useNewAltTextFlow(){return x(this,vA)}get useNewAltTextWhenAddingImage(){return x(this,lv)}get hcmFilter(){return Fn(this,"hcmFilter",x(this,km)?x(this,yA).addHCMFilter(x(this,km).foreground,x(this,km).background):"none")}get direction(){return Fn(this,"direction",getComputedStyle(x(this,Th)).direction)}get highlightColors(){return Fn(this,"highlightColors",x(this,cv)?new Map(x(this,cv).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Fn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){G(this,AA,t)}editAltText(t,e=!1){var n;(n=x(this,rv))==null||n.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":G(this,lv,e);break}}onPageChanging({pageNumber:t}){G(this,ov,t-1)}focusMainContainer(){x(this,Th).focus()}findParent(t,e){for(const n of x(this,Cr).values()){const{x:i,y:r,width:a,height:l}=n.div.getBoundingClientRect();if(t>=i&&t<=i+a&&e>=r&&e<=r+l)return n}return null}disableUserSelect(t=!1){x(this,EA).classList.toggle("noUserSelect",t)}addShouldRescale(t){x(this,zm).add(t)}removeShouldRescale(t){x(this,zm).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*np.PDF_TO_CSS_UNITS;for(const e of x(this,zm))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:a}=e,l=e.toString(),f=k(this,me,zE).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(f);if(!m)return;e.empty();const g=k(this,me,Z8).call(this,f),v=x(this,cr)===dn.NONE,_=()=>{g==null||g.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:a,text:l}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(dn.HIGHLIGHT,_);return}_()}addToAnnotationStorage(t){!t.isEmpty()&&x(this,Eh)&&!x(this,Eh).has(t.id)&&x(this,Eh).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,x(this,Sd)&&(G(this,Sd,!1),k(this,me,GE).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of x(this,ui))if(e.div.contains(t)){G(this,Gm,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!x(this,Gm))return;const[t,e]=x(this,Gm);G(this,Gm,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){k(this,me,$8).call(this),k(this,me,tw).call(this)}removeEditListeners(){k(this,me,QN).call(this),k(this,me,ew).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of x(this,dc))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of x(this,dc))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=x(this,Lo))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of x(this,ui)){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const a of x(this,dc))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){An(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const u of n){const f=await i.deserialize(u);if(!f)return;r.push(f)}const a=()=>{for(const u of r)k(this,me,nw).call(this,u);k(this,me,iw).call(this,r)},l=()=>{for(const u of r)u.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(r){An(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),x(this,cr)!==dn.NONE&&!this.isEditorHandlingKeyboard&&Y1._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,x(this,Sd)&&(G(this,Sd,!1),k(this,me,GE).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(k(this,me,kN).call(this),k(this,me,tw).call(this),k(this,me,Ta).call(this,{isEditing:x(this,cr)!==dn.NONE,isEmpty:k(this,me,m_).call(this),hasSomethingToUndo:x(this,fc).hasSomethingToUndo(),hasSomethingToRedo:x(this,fc).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,me,VN).call(this),k(this,me,ew).call(this),k(this,me,Ta).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!x(this,dc)){G(this,dc,t);for(const e of x(this,dc))k(this,me,dd).call(this,e.defaultPropertiesToUpdate)}}getId(){return x(this,b3).id}get currentLayer(){return x(this,Cr).get(x(this,ov))}getLayer(t){return x(this,Cr).get(t)}get currentPageIndex(){return x(this,ov)}addLayer(t){x(this,Cr).set(t.pageIndex,t),x(this,Ed)?t.enable():t.disable()}removeLayer(t){x(this,Cr).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){if(x(this,cr)!==t&&!(x(this,Al)&&(await x(this,Al).promise,!x(this,Al)))){if(G(this,Al,Promise.withResolvers()),G(this,cr,t),t===dn.NONE){this.setEditingState(!1),k(this,me,qN).call(this),x(this,Al).resolve();return}this.setEditingState(!0),await k(this,me,jN).call(this),this.unselectAll();for(const i of x(this,Cr).values())i.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),x(this,Al).resolve();return}for(const i of x(this,Vs).values())i.annotationElementId===e?(this.setSelected(i),i.enterInEditMode()):i.unselect();x(this,Al).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==x(this,cr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(x(this,dc)){switch(t){case Ze.CREATE:this.currentLayer.addNewEditor();return;case Ze.HIGHLIGHT_DEFAULT_COLOR:(n=x(this,AA))==null||n.updateColor(e);break;case Ze.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(x(this,bA)||G(this,bA,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of x(this,ui))i.updateParams(t,e);for(const i of x(this,dc))i.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const a of x(this,Vs).values())a.editorType===t&&a.show(e);(((r=x(this,bA))==null?void 0:r.get(Ze.HIGHLIGHT_SHOW_ALL))??!0)!==e&&k(this,me,dd).call(this,[[Ze.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(x(this,_A)!==t){G(this,_A,t);for(const e of x(this,Cr).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of x(this,Vs).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return x(this,Vs).get(t)}addEditor(t){x(this,Vs).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(x(this,_u)&&clearTimeout(x(this,_u)),G(this,_u,setTimeout(()=>{this.focusMainContainer(),G(this,_u,null)},0))),x(this,Vs).delete(t.id),this.unselect(t),(!t.annotationElementId||!x(this,Hm).has(t.annotationElementId))&&((e=x(this,Eh))==null||e.remove(t.id))}addDeletedAnnotationElement(t){x(this,Hm).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return x(this,Hm).has(t)}removeDeletedAnnotationElement(t){x(this,Hm).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){x(this,Lo)!==t&&(G(this,Lo,t),t&&k(this,me,dd).call(this,t.propertiesToUpdate))}updateUI(t){x(this,me,YN)===t&&k(this,me,dd).call(this,t.propertiesToUpdate)}toggleSelected(t){if(x(this,ui).has(t)){x(this,ui).delete(t),t.unselect(),k(this,me,Ta).call(this,{hasSelectedEditor:this.hasSelection});return}x(this,ui).add(t),t.select(),k(this,me,dd).call(this,t.propertiesToUpdate),k(this,me,Ta).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of x(this,ui))e!==t&&e.unselect();x(this,ui).clear(),x(this,ui).add(t),t.select(),k(this,me,dd).call(this,t.propertiesToUpdate),k(this,me,Ta).call(this,{hasSelectedEditor:!0})}isSelected(t){return x(this,ui).has(t)}get firstSelectedEditor(){return x(this,ui).values().next().value}unselect(t){t.unselect(),x(this,ui).delete(t),k(this,me,Ta).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return x(this,ui).size!==0}get isEnterHandled(){return x(this,ui).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){x(this,fc).undo(),k(this,me,Ta).call(this,{hasSomethingToUndo:x(this,fc).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,me,m_).call(this)})}redo(){x(this,fc).redo(),k(this,me,Ta).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:x(this,fc).hasSomethingToRedo(),isEmpty:k(this,me,m_).call(this)})}addCommands(t){x(this,fc).add(t),k(this,me,Ta).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,me,m_).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...x(this,ui)],e=()=>{for(const i of t)i.remove()},n=()=>{for(const i of t)k(this,me,nw).call(this,i)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=x(this,Lo))==null||t.commitOrRemove()}hasSomethingToControl(){return x(this,Lo)||this.hasSelection}selectAll(){for(const t of x(this,ui))t.commit();k(this,me,iw).call(this,x(this,Vs).values())}unselectAll(){if(!(x(this,Lo)&&(x(this,Lo).commitOrRemove(),x(this,cr)!==dn.NONE))&&this.hasSelection){for(const t of x(this,ui))t.unselect();x(this,ui).clear(),k(this,me,Ta).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;x(this,Td)[0]+=t,x(this,Td)[1]+=e;const[i,r]=x(this,Td),a=[...x(this,ui)],l=1e3;x(this,xu)&&clearTimeout(x(this,xu)),G(this,xu,setTimeout(()=>{G(this,xu,null),x(this,Td)[0]=x(this,Td)[1]=0,this.addCommands({cmd:()=>{for(const u of a)x(this,Vs).has(u.id)&&u.translateInPage(i,r)},undo:()=>{for(const u of a)x(this,Vs).has(u.id)&&u.translateInPage(-i,-r)},mustExec:!1})},l));for(const u of a)u.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),G(this,yu,new Map);for(const t of x(this,ui))x(this,yu).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!x(this,yu))return!1;this.disableUserSelect(!1);const t=x(this,yu);G(this,yu,null);let e=!1;for(const[{x:i,y:r,pageIndex:a},l]of t)l.newX=i,l.newY=r,l.newPageIndex=a,e||(e=i!==l.savedX||r!==l.savedY||a!==l.savedPageIndex);if(!e)return!1;const n=(i,r,a,l)=>{if(x(this,Vs).has(i.id)){const u=x(this,Cr).get(l);u?i._setParentAndPosition(u,r,a):(i.pageIndex=l,i.x=r,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:a,newPageIndex:l}]of t)n(i,r,a,l)},undo:()=>{for(const[i,{savedX:r,savedY:a,savedPageIndex:l}]of t)n(i,r,a,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(x(this,yu))for(const n of x(this,yu).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||x(this,ui).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return x(this,Lo)===t}getActive(){return x(this,Lo)}getMode(){return x(this,cr)}get imageManager(){return Fn(this,"imageManager",new K8)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:a}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(f,m,g,v)=>({x:(m-i)/a,y:1-(f+g-n)/r,width:v/a,height:g/r});break;case"180":l=(f,m,g,v)=>({x:1-(f+g-n)/r,y:1-(m+v-i)/a,width:g/r,height:v/a});break;case"270":l=(f,m,g,v)=>({x:1-(m+v-i)/a,y:(f-n)/r,width:v/a,height:g/r});break;default:l=(f,m,g,v)=>({x:(f-n)/r,y:(m-i)/a,width:g/r,height:v/a});break}const u=[];for(let f=0,m=e.rangeCount;f<m;f++){const g=e.getRangeAt(f);if(!g.collapsed)for(const{x:v,y:_,width:b,height:C}of g.getClientRects())b===0||C===0||u.push(l(v,_,b,C))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:t,id:e}){(x(this,av)||G(this,av,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=x(this,av))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=x(this,av))==null?void 0:i.get(t.data.id);if(!e)return;const n=x(this,Eh).getRawValue(e);n&&(x(this,cr)===dn.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};sv=new WeakMap,Lo=new WeakMap,Vs=new WeakMap,Cr=new WeakMap,rv=new WeakMap,Eh=new WeakMap,av=new WeakMap,fc=new WeakMap,xd=new WeakMap,ov=new WeakMap,Hm=new WeakMap,yu=new WeakMap,dc=new WeakMap,zm=new WeakMap,gA=new WeakMap,vA=new WeakMap,lv=new WeakMap,yA=new WeakMap,_u=new WeakMap,bd=new WeakMap,cv=new WeakMap,Sd=new WeakMap,Au=new WeakMap,b3=new WeakMap,Ed=new WeakMap,_A=new WeakMap,Md=new WeakMap,Gm=new WeakMap,AA=new WeakMap,xA=new WeakMap,cr=new WeakMap,ui=new WeakMap,Mh=new WeakMap,km=new WeakMap,bA=new WeakMap,SA=new WeakMap,Td=new WeakMap,xu=new WeakMap,Th=new WeakMap,EA=new WeakMap,Al=new WeakMap,me=new WeakSet,zE=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Z8=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of x(this,Cr).values())if(n.hasTextLayer(t))return n;return null},HN=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=k(this,me,zE).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(x(this,Au)||G(this,Au,new ytt(this)),x(this,Au).show(n,i,this.direction==="ltr"))},zN=function(){var r,a,l;const t=document.getSelection();if(!t||t.isCollapsed){x(this,Mh)&&((r=x(this,Au))==null||r.hide(),G(this,Mh,null),k(this,me,Ta).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===x(this,Mh))return;const i=k(this,me,zE).call(this,t).closest(".textLayer");if(!i){x(this,Mh)&&((a=x(this,Au))==null||a.hide(),G(this,Mh,null),k(this,me,Ta).call(this,{hasSelectedText:!1}));return}if((l=x(this,Au))==null||l.hide(),G(this,Mh,e),k(this,me,Ta).call(this,{hasSelectedText:!0}),!(x(this,cr)!==dn.HIGHLIGHT&&x(this,cr)!==dn.NONE)&&(x(this,cr)===dn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),G(this,Sd,this.isShiftKeyDown),!this.isShiftKeyDown)){const u=x(this,cr)===dn.HIGHLIGHT?k(this,me,Z8).call(this,i):null;u==null||u.toggleDrawing();const f=new AbortController,m=this.combinedSignal(f),g=v=>{v.type==="pointerup"&&v.button!==0||(f.abort(),u==null||u.toggleDrawing(!0),v.type==="pointerup"&&k(this,me,GE).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("blur",g,{signal:m})}},GE=function(t=""){x(this,cr)===dn.HIGHLIGHT?this.highlightSelection(t):x(this,gA)&&k(this,me,HN).call(this)},GN=function(){document.addEventListener("selectionchange",k(this,me,zN).bind(this),{signal:this._signal})},kN=function(){if(x(this,bd))return;G(this,bd,new AbortController);const t=this.combinedSignal(x(this,bd));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},VN=function(){var t;(t=x(this,bd))==null||t.abort(),G(this,bd,null)},$8=function(){if(x(this,Md))return;G(this,Md,new AbortController);const t=this.combinedSignal(x(this,Md));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},QN=function(){var t;(t=x(this,Md))==null||t.abort(),G(this,Md,null)},tw=function(){if(x(this,xd))return;G(this,xd,new AbortController);const t=this.combinedSignal(x(this,xd));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},ew=function(){var t;(t=x(this,xd))==null||t.abort(),G(this,xd,null)},XN=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Ta=function(t){Object.entries(t).some(([n,i])=>x(this,SA)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(x(this,SA),t)}),x(this,cr)===dn.HIGHLIGHT&&t.hasSelectedEditor===!1&&k(this,me,dd).call(this,[[Ze.HIGHLIGHT_FREE,!0]]))},dd=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},jN=async function(){if(!x(this,Ed)){G(this,Ed,!0);const t=[];for(const e of x(this,Cr).values())t.push(e.enable());await Promise.all(t);for(const e of x(this,Vs).values())e.enable()}},qN=function(){if(this.unselectAll(),x(this,Ed)){G(this,Ed,!1);for(const t of x(this,Cr).values())t.disable();for(const t of x(this,Vs).values())t.disable()}},nw=function(t){const e=x(this,Cr).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},YN=function(){let t=null;for(t of x(this,ui));return t},m_=function(){if(x(this,Vs).size===0)return!0;if(x(this,Vs).size===1)for(const t of x(this,Vs).values())return t.isEmpty();return!1},iw=function(t){for(const e of x(this,ui))e.unselect();x(this,ui).clear();for(const e of t)e.isEmpty()||(x(this,ui).add(e),e.select());k(this,me,Ta).call(this,{hasSelectedEditor:this.hasSelection})},Je(Y1,"TRANSLATE_SMALL",1),Je(Y1,"TRANSLATE_BIG",10);let Wg=Y1;var ur,bu,pc,uv,Su,Do,hv,Eu,eo,Ch,Vm,Mu,Cd,wc,g_,kE;const wa=class wa{constructor(t){Y(this,wc);Y(this,ur,null);Y(this,bu,!1);Y(this,pc,null);Y(this,uv,null);Y(this,Su,null);Y(this,Do,null);Y(this,hv,!1);Y(this,Eu,null);Y(this,eo,null);Y(this,Ch,null);Y(this,Vm,null);Y(this,Mu,!1);G(this,eo,t),G(this,Mu,t._uiManager.useNewAltTextFlow),x(wa,Cd)||G(wa,Cd,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){wa._l10n??(wa._l10n=t)}async render(){const t=G(this,pc,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=G(this,uv,document.createElement("span"));t.append(e),x(this,Mu)?(t.classList.add("new"),t.setAttribute("data-l10n-id",x(wa,Cd).missing),e.setAttribute("data-l10n-id",x(wa,Cd)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=x(this,eo)._uiManager._signal;t.addEventListener("contextmenu",Dl,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const i=r=>{r.preventDefault(),x(this,eo)._uiManager.editAltText(x(this,eo)),x(this,Mu)&&x(this,eo)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:x(this,wc,g_)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(G(this,hv,!0),i(r))},{signal:n}),await k(this,wc,kE).call(this),t}finish(){x(this,pc)&&(x(this,pc).focus({focusVisible:x(this,hv)}),G(this,hv,!1))}isEmpty(){return x(this,Mu)?x(this,ur)===null:!x(this,ur)&&!x(this,bu)}hasData(){return x(this,Mu)?x(this,ur)!==null||!!x(this,Ch):this.isEmpty()}get guessedText(){return x(this,Ch)}async setGuessedText(t){x(this,ur)===null&&(G(this,Ch,t),G(this,Vm,await wa._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),k(this,wc,kE).call(this))}toggleAltTextBadge(t=!1){var e;if(!x(this,Mu)||x(this,ur)){(e=x(this,Eu))==null||e.remove(),G(this,Eu,null);return}if(!x(this,Eu)){const n=G(this,Eu,document.createElement("div"));n.className="noAltTextBadge",x(this,eo).div.append(n)}x(this,Eu).classList.toggle("hidden",!t)}serialize(t){let e=x(this,ur);return!t&&x(this,Ch)===e&&(e=x(this,Vm)),{altText:e,decorative:x(this,bu),guessedText:x(this,Ch),textWithDisclaimer:x(this,Vm)}}get data(){return{altText:x(this,ur),decorative:x(this,bu)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:r=!1}){n&&(G(this,Ch,n),G(this,Vm,i)),!(x(this,ur)===t&&x(this,bu)===e)&&(r||(G(this,ur,t),G(this,bu,e)),k(this,wc,kE).call(this))}toggle(t=!1){x(this,pc)&&(!t&&x(this,Do)&&(clearTimeout(x(this,Do)),G(this,Do,null)),x(this,pc).disabled=!t)}shown(){x(this,eo)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:x(this,wc,g_)}})}destroy(){var t,e;(t=x(this,pc))==null||t.remove(),G(this,pc,null),G(this,uv,null),G(this,Su,null),(e=x(this,Eu))==null||e.remove(),G(this,Eu,null)}};ur=new WeakMap,bu=new WeakMap,pc=new WeakMap,uv=new WeakMap,Su=new WeakMap,Do=new WeakMap,hv=new WeakMap,Eu=new WeakMap,eo=new WeakMap,Ch=new WeakMap,Vm=new WeakMap,Mu=new WeakMap,Cd=new WeakMap,wc=new WeakSet,g_=function(){return x(this,ur)&&"added"||x(this,ur)===null&&this.guessedText&&"review"||"missing"},kE=async function(){var i,r,a;const t=x(this,pc);if(!t)return;if(x(this,Mu)){if(t.classList.toggle("done",!!x(this,ur)),t.setAttribute("data-l10n-id",x(wa,Cd)[x(this,wc,g_)]),(i=x(this,uv))==null||i.setAttribute("data-l10n-id",x(wa,Cd)[`${x(this,wc,g_)}-label`]),!x(this,ur)){(r=x(this,Su))==null||r.remove();return}}else{if(!x(this,ur)&&!x(this,bu)){t.classList.remove("done"),(a=x(this,Su))==null||a.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=x(this,Su);if(!e){G(this,Su,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${x(this,eo).id}`;const l=100,u=x(this,eo)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(x(this,Do)),G(this,Do,null)},{once:!0}),t.addEventListener("mouseenter",()=>{G(this,Do,setTimeout(()=>{G(this,Do,null),x(this,Su).classList.add("show"),x(this,eo)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:u}),t.addEventListener("mouseleave",()=>{var f;x(this,Do)&&(clearTimeout(x(this,Do)),G(this,Do,null)),(f=x(this,Su))==null||f.classList.remove("show")},{signal:u})}x(this,bu)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=x(this,ur)),e.parentNode||t.append(e);const n=x(this,eo).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},Y(wa,Cd,null),Je(wa,"_l10n",null);let p3=wa;var Qm,mc,qi,fv,Xm,wr,jm,wd,MA,qm,Rd,TA,Ym,wh,Tu,dv,pv,xl,CA,S3,vn,sw,wA,rw,aw,WN,KN,ow,lw,cw,JN,uw,ZN,$N,tI,hw,v_;const si=class si{constructor(t){Y(this,vn);Y(this,Qm,null);Y(this,mc,null);Y(this,qi,null);Y(this,fv,!1);Y(this,Xm,!1);Y(this,wr,null);Y(this,jm,null);Y(this,wd,null);Y(this,MA,"");Y(this,qm,!1);Y(this,Rd,null);Y(this,TA,!1);Y(this,Ym,!1);Y(this,wh,!1);Y(this,Tu,null);Y(this,dv,0);Y(this,pv,0);Y(this,xl,null);Je(this,"_editToolbar",null);Je(this,"_initialOptions",Object.create(null));Je(this,"_initialData",null);Je(this,"_isVisible",!0);Je(this,"_uiManager",null);Je(this,"_focusEventsAllowed",!0);Y(this,CA,!1);Y(this,S3,si._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,a];const[l,u]=this.parentDimensions;this.x=t.x/l,this.y=t.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=si.prototype._resizeWithKeyboard,e=Wg.TRANSLATE_SMALL,n=Wg.TRANSLATE_BIG;return Fn(this,"_resizerKeyboardManager",new kx([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],si.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Fn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new btt({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(si._l10n??(si._l10n=t),si._l10nResizer||(si._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),si._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);si._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Oi("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return x(this,CA)}set _isDraggable(t){var e;G(this,CA,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=x(this,S3)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):k(this,vn,v_).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(x(this,qm)?G(this,qm,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[r,a]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/r,this.y=(e+i)/a,this.fixAndSetPosition()}translate(t,e){k(this,vn,sw).call(this,this.parentDimensions,t,e)}translateInPage(t,e){x(this,Rd)||G(this,Rd,[this.x,this.y]),k(this,vn,sw).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){x(this,Rd)||G(this,Rd,[this.x,this.y]);const[n,i]=this.parentDimensions;if(this.x+=t/n,this.y+=e/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[l,u]=this.getBaseTranslation();r+=l,a+=u,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!x(this,Rd)&&(x(this,Rd)[0]!==this.x||x(this,Rd)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=si,i=n/t,r=n/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:i,y:r,width:a,height:l}=this;if(a*=e,l*=n,i*=e,r*=n,this._mustFixPosition)switch(t){case 0:i=Math.max(0,Math.min(e-a,i)),r=Math.max(0,Math.min(n-l,r));break;case 90:i=Math.max(0,Math.min(e-l,i)),r=Math.min(n,Math.max(a,r));break;case 180:i=Math.min(e,Math.max(a,i)),r=Math.min(n,Math.max(l,r));break;case 270:i=Math.min(e,Math.max(l,i)),r=Math.max(0,Math.min(n-a,r));break}this.x=i/=e,this.y=r/=n;const[u,f]=this.getBaseTranslation();i+=u,r+=f;const{style:m}=this.div;m.left=`${(100*i).toFixed(2)}%`,m.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return k(n=si,wA,rw).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return k(n=si,wA,rw).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,i]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,x(this,Xm)||(this.div.style.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),r=!x(this,Xm)&&e.endsWith("%");if(i&&r)return;const[a,l]=this.parentDimensions;i||(t.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!x(this,Xm)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=x(this,qi))==null||t.finish()}async addEditToolbar(){return this._editToolbar||x(this,Ym)?this._editToolbar:(this._editToolbar=new Y8(this),this.div.append(this._editToolbar.render()),x(this,qi)&&await this._editToolbar.addAltText(x(this,qi)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=x(this,qi))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){x(this,qi)||(p3.initialize(si._l10n),G(this,qi,new p3(this)),x(this,Qm)&&(x(this,qi).data=x(this,Qm),G(this,Qm,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=x(this,qi))==null?void 0:t.data}set altTextData(t){x(this,qi)&&(x(this,qi).data=t)}get guessedAltText(){var t;return(t=x(this,qi))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=x(this,qi))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=x(this,qi))==null?void 0:e.serialize(t)}hasAltText(){return!!x(this,qi)&&!x(this,qi).isEmpty()}hasAltTextData(){var t;return((t=x(this,qi))==null?void 0:t.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=x(this,fv)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),k(this,vn,uw).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),d3(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Ia.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(G(this,qm,!0),this._isDraggable){k(this,vn,JN).call(this,t);return}k(this,vn,cw).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){x(this,Tu)&&clearTimeout(x(this,Tu)),G(this,Tu,setTimeout(()=>{var t;G(this,Tu,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const i=this.parentScale,[r,a]=this.pageDimensions,[l,u]=this.pageTranslation,f=t/i,m=e/i,g=this.x*r,v=this.y*a,_=this.width*r,b=this.height*a;switch(n){case 0:return[g+f+l,a-v-m-b+u,g+f+_+l,a-v-m+u];case 90:return[g+m+l,a-v+f+u,g+m+b+l,a-v+f+_+u];case 180:return[g-f-_+l,a-v+m+u,g-f+l,a-v+m+b+u];case 270:return[g-m-b+l,a-v-f-_+u,g-m+l,a-v-f+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,r,a]=t,l=r-n,u=a-i;switch(this.rotation){case 0:return[n,e-a,l,u];case 90:return[n,e-i,u,l];case 180:return[r,e-i,l,u];case 270:return[r,e-a,u,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){G(this,Ym,!0)}disableEditMode(){G(this,Ym,!1)}isInEditMode(){return x(this,Ym)}shouldGetKeyboardEvents(){return x(this,wh)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){k(this,vn,uw).call(this)}rotate(t){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Oi("An editor must be serializable")}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation,G(i,Qm,t.accessibilityData);const[r,a]=i.pageDimensions,[l,u,f,m]=i.getRectInCurrentCoords(t.rect,a);return i.x=l/r,i.y=u/a,i.width=f/r,i.height=m/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t;if((t=x(this,wd))==null||t.abort(),G(this,wd,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),x(this,Tu)&&(clearTimeout(x(this,Tu)),G(this,Tu,null)),k(this,vn,v_).call(this),this.removeEditToolbar(),x(this,xl)){for(const e of x(this,xl).values())clearTimeout(e);G(this,xl,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,vn,WN).call(this),x(this,wr).classList.remove("hidden"),d3(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),G(this,jm,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=x(this,wr).children;if(!x(this,mc)){G(this,mc,Array.from(e));const a=k(this,vn,ZN).bind(this),l=k(this,vn,$N).bind(this),u=this._uiManager._signal;for(const f of x(this,mc)){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",a,{signal:u}),f.addEventListener("blur",l,{signal:u}),f.addEventListener("focus",k(this,vn,tI).bind(this,m),{signal:u}),f.setAttribute("data-l10n-id",si._l10nResizer[m])}}const n=x(this,mc)[0];let i=0;for(const a of e){if(a===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(x(this,mc).length/4);if(r!==i){if(r<i)for(let l=0;l<i-r;l++)x(this,wr).append(x(this,wr).firstChild);else if(r>i)for(let l=0;l<r-i;l++)x(this,wr).firstChild.before(x(this,wr).lastChild);let a=0;for(const l of e){const f=x(this,mc)[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",si._l10nResizer[f])}}k(this,vn,hw).call(this,0),G(this,wh,!0),x(this,wr).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){x(this,wh)&&k(this,vn,lw).call(this,x(this,MA),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){k(this,vn,v_).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=x(this,qi))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,i,r;(t=x(this,wr))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=x(this,qi))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return x(this,TA)}set isEditing(t){G(this,TA,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){G(this,Xm,!0);const n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){x(this,xl)||G(this,xl,new Map);const{action:n}=t;let i=x(this,xl).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),x(this,xl).delete(n),x(this,xl).size===0&&G(this,xl,null)},si._telemetryTimeout),x(this,xl).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),G(this,fv,!1)}disable(){this.div&&(this.div.tabIndex=-1),G(this,fv,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Qm=new WeakMap,mc=new WeakMap,qi=new WeakMap,fv=new WeakMap,Xm=new WeakMap,wr=new WeakMap,jm=new WeakMap,wd=new WeakMap,MA=new WeakMap,qm=new WeakMap,Rd=new WeakMap,TA=new WeakMap,Ym=new WeakMap,wh=new WeakMap,Tu=new WeakMap,dv=new WeakMap,pv=new WeakMap,xl=new WeakMap,CA=new WeakMap,S3=new WeakMap,vn=new WeakSet,sw=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this.fixAndSetPosition()},wA=new WeakSet,rw=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},aw=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},WN=function(){if(x(this,wr))return;G(this,wr,document.createElement("div")),x(this,wr).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");x(this,wr).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",k(this,vn,KN).bind(this,n),{signal:e}),i.addEventListener("contextmenu",Dl,{signal:e}),i.tabIndex=-1}this.div.prepend(x(this,wr))},KN=function(t,e){var b;e.preventDefault();const{isMac:n}=Ia.platform;if(e.button!==0||e.ctrlKey&&n)return;(b=x(this,qi))==null||b.toggle(!1);const i=this._isDraggable;this._isDraggable=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",k(this,vn,lw).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",Dl,{signal:a});const l=this.x,u=this.y,f=this.width,m=this.height,g=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const _=()=>{var C;r.abort(),this.parent.togglePointerEvents(!0),(C=x(this,qi))==null||C.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=g,this.div.style.cursor=v,k(this,vn,ow).call(this,l,u,f,m)};window.addEventListener("pointerup",_,{signal:a}),window.addEventListener("blur",_,{signal:a})},ow=function(t,e,n,i){const r=this.x,a=this.y,l=this.width,u=this.height;r===t&&a===e&&l===n&&u===i||this.addCommands({cmd:()=>{this.width=l,this.height=u,this.x=r,this.y=a;const[f,m]=this.parentDimensions;this.setDims(f*l,m*u),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=i,this.x=t,this.y=e;const[f,m]=this.parentDimensions;this.setDims(f*n,m*i),this.fixAndSetPosition()},mustExec:!0})},lw=function(t,e){const[n,i]=this.parentDimensions,r=this.x,a=this.y,l=this.width,u=this.height,f=si.MIN_SIZE/n,m=si.MIN_SIZE/i,g=tt=>Math.round(tt*1e4)/1e4,v=k(this,vn,aw).call(this,this.rotation),_=(tt,et)=>[v[0]*tt+v[2]*et,v[1]*tt+v[3]*et],b=k(this,vn,aw).call(this,360-this.rotation),C=(tt,et)=>[b[0]*tt+b[2]*et,b[1]*tt+b[3]*et];let T,S,R=!1,B=!1;switch(t){case"topLeft":R=!0,T=(tt,et)=>[0,0],S=(tt,et)=>[tt,et];break;case"topMiddle":T=(tt,et)=>[tt/2,0],S=(tt,et)=>[tt/2,et];break;case"topRight":R=!0,T=(tt,et)=>[tt,0],S=(tt,et)=>[0,et];break;case"middleRight":B=!0,T=(tt,et)=>[tt,et/2],S=(tt,et)=>[0,et/2];break;case"bottomRight":R=!0,T=(tt,et)=>[tt,et],S=(tt,et)=>[0,0];break;case"bottomMiddle":T=(tt,et)=>[tt/2,et],S=(tt,et)=>[tt/2,0];break;case"bottomLeft":R=!0,T=(tt,et)=>[0,et],S=(tt,et)=>[tt,0];break;case"middleLeft":B=!0,T=(tt,et)=>[0,et/2],S=(tt,et)=>[tt,et/2];break}const D=T(l,u),N=S(l,u);let I=_(...N);const F=g(r+I[0]),z=g(a+I[1]);let U=1,P=1,[X,ot]=this.screenToPageTranslation(e.movementX,e.movementY);if([X,ot]=C(X/n,ot/i),R){const tt=Math.hypot(l,u);U=P=Math.max(Math.min(Math.hypot(N[0]-D[0]-X,N[1]-D[1]-ot)/tt,1/l,1/u),f/l,m/u)}else B?U=Math.max(f,Math.min(1,Math.abs(N[0]-D[0]-X)))/l:P=Math.max(m,Math.min(1,Math.abs(N[1]-D[1]-ot)))/u;const it=g(l*U),ct=g(u*P);I=_(...S(it,ct));const dt=F-I[0],Q=z-I[1];this.width=it,this.height=ct,this.x=dt,this.y=Q,this.setDims(n*it,i*ct),this.fixAndSetPosition()},cw=function(t){const{isMac:e}=Ia.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},JN=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();const n=new AbortController,i=this._uiManager.combinedSignal(n);if(e){this.div.classList.add("moving"),G(this,dv,t.clientX),G(this,pv,t.clientY);const a=l=>{const{clientX:u,clientY:f}=l,[m,g]=this.screenToPageTranslation(u-x(this,dv),f-x(this,pv));G(this,dv,u),G(this,pv,f),this._uiManager.dragSelectedEditors(m,g)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:i})}const r=()=>{n.abort(),e&&this.div.classList.remove("moving"),G(this,qm,!1),this._uiManager.endDragSession()||k(this,vn,cw).call(this,t)};window.addEventListener("pointerup",r,{signal:i}),window.addEventListener("blur",r,{signal:i})},uw=function(){if(x(this,wd)||!this.div)return;G(this,wd,new AbortController);const t=this._uiManager.combinedSignal(x(this,wd));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},ZN=function(t){si._resizerKeyboardManager.exec(this,t)},$N=function(t){var e;x(this,wh)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==x(this,wr)&&k(this,vn,v_).call(this)},tI=function(t){G(this,MA,x(this,wh)?t:"")},hw=function(t){if(x(this,mc))for(const e of x(this,mc))e.tabIndex=t},v_=function(){if(G(this,wh,!1),k(this,vn,hw).call(this,-1),x(this,jm)){const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=x(this,jm);k(this,vn,ow).call(this,t,e,n,i),G(this,jm,null)}},Y(si,wA),Je(si,"_l10n",null),Je(si,"_l10nResizer",null),Je(si,"_borderLineWidth",-1),Je(si,"_colorManager",new J8),Je(si,"_zIndex",1),Je(si,"_telemetryTimeout",1e3);let di=si;class btt extends di{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const wD=3285377520,yl=4294901760,vu=65535;class eI{constructor(t){this.h1=t?t&4294967295:wD,this.h2=t?t&4294967295:wD}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let C=0,T=t.length;C<T;C++){const S=t.charCodeAt(C);S<=255?e[n++]=S:(e[n++]=S>>>8,e[n++]=S&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,r=n-i*4,a=new Uint32Array(e.buffer,0,i);let l=0,u=0,f=this.h1,m=this.h2;const g=3432918353,v=461845907,_=g&vu,b=v&vu;for(let C=0;C<i;C++)C&1?(l=a[C],l=l*g&yl|l*_&vu,l=l<<15|l>>>17,l=l*v&yl|l*b&vu,f^=l,f=f<<13|f>>>19,f=f*5+3864292196):(u=a[C],u=u*g&yl|u*_&vu,u=u<<15|u>>>17,u=u*v&yl|u*b&vu,m^=u,m=m<<13|m>>>19,m=m*5+3864292196);switch(l=0,r){case 3:l^=e[i*4+2]<<16;case 2:l^=e[i*4+1]<<8;case 1:l^=e[i*4],l=l*g&yl|l*_&vu,l=l<<15|l>>>17,l=l*v&yl|l*b&vu,i&1?f^=l:m^=l}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&yl|t*36045&vu,e=e*4283543511&yl|((e<<16|t>>>16)*2950163797&yl)>>>16,t^=e>>>1,t=t*444984403&yl|t*60499&vu,e=e*3301882366&yl|((e<<16|t>>>16)*3120437893&yl)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const fw=Object.freeze({map:null,hash:"",transfer:void 0});var Wm,Km,hr,E3,nI;class CR{constructor(){Y(this,E3);Y(this,Wm,!1);Y(this,Km,null);Y(this,hr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=x(this,hr).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return x(this,hr).get(t)}remove(t){if(x(this,hr).delete(t),x(this,hr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of x(this,hr).values())if(e instanceof di)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=x(this,hr).get(t);let i=!1;if(n!==void 0)for(const[r,a]of Object.entries(e))n[r]!==a&&(i=!0,n[r]=a);else i=!0,x(this,hr).set(t,e);i&&k(this,E3,nI).call(this),e instanceof di&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return x(this,hr).has(t)}getAll(){return x(this,hr).size>0?xR(x(this,hr)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return x(this,hr).size}resetModified(){x(this,Wm)&&(G(this,Wm,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new iI(this)}get serializable(){if(x(this,hr).size===0)return fw;const t=new Map,e=new eI,n=[],i=Object.create(null);let r=!1;for(const[a,l]of x(this,hr)){const u=l instanceof di?l.serialize(!1,i):l;u&&(t.set(a,u),e.update(`${a}:${JSON.stringify(u)}`),r||(r=!!u.bitmap))}if(r)for(const a of t.values())a.bitmap&&n.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:fw}get editorStats(){let t=null;const e=new Map;for(const n of x(this,hr).values()){if(!(n instanceof di))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:r}=i;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const a=t[r]||(t[r]=new Map);for(const[l,u]of Object.entries(i)){if(l==="type")continue;let f=a.get(l);f||(f=new Map,a.set(l,f));const m=f.get(u)??0;f.set(u,m+1)}}for(const[n,i]of e)t[n]=i.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){G(this,Km,null)}get modifiedIds(){if(x(this,Km))return x(this,Km);const t=[];for(const e of x(this,hr).values())!(e instanceof di)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return G(this,Km,{ids:new Set(t),hash:t.join(",")})}}Wm=new WeakMap,Km=new WeakMap,hr=new WeakMap,E3=new WeakSet,nI=function(){x(this,Wm)||(G(this,Wm,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var RA;class iI extends CR{constructor(e){super();Y(this,RA);const{map:n,hash:i,transfer:r}=e.serializable,a=structuredClone(n,r?{transfer:r}:null);G(this,RA,{map:a,hash:i,transfer:r})}get print(){Oi("Should not call PrintAnnotationStorage.print")}get serializable(){return x(this,RA)}get modifiedIds(){return Fn(this,"modifiedIds",{ids:new Set,hash:""})}}RA=new WeakMap;var mv;class Stt{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){Y(this,mv,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),x(this,mv).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||x(this,mv).has(t.loadedName))){if(js(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:i,style:r}=t,a=new FontFace(n,i,r);this.addNativeFontFace(a);try{await a.load(),x(this,mv).add(n),e==null||e(t)}catch{An(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Oi("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw An(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Fn(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(sa||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Fn(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(js(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Fn(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(D,N){return D.charCodeAt(N)<<24|D.charCodeAt(N+1)<<16|D.charCodeAt(N+2)<<8|D.charCodeAt(N+3)&255}function i(D,N,I,F){const z=D.substring(0,N),U=D.substring(N+I);return z+F+U}let r,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const u=l.getContext("2d");let f=0;function m(D,N){if(++f>30){An("Load test font never loaded."),N();return}if(u.font="30px "+D,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(m.bind(null,D,N))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=i(v,976,g.length,g);const b=16,C=1482184792;let T=n(v,b);for(r=0,a=g.length-3;r<a;r+=4)T=T-C+n(g,r)|0;r<g.length&&(T=T-C+n(g+"XXX",r)|0),v=i(v,b,4,ott(T));const S=`url(data:font/opentype;base64,${btoa(v)});`,R=`@font-face {font-family:"${g}";src:${S}}`;this.insertRule(R);const B=this._document.createElement("div");B.style.visibility="hidden",B.style.width=B.style.height="10px",B.style.position="absolute",B.style.top=B.style.left="0px";for(const D of[t.loadedName,g]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=D,B.append(N)}this._document.body.append(B),m(g,()=>{B.remove(),e.complete()})}}mv=new WeakMap;class Ett{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${dtt(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(r){An(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(r,a){};const i=[];for(let r=0,a=n.length;r<a;)switch(n[r++]){case vh.BEZIER_CURVE_TO:{const[l,u,f,m,g,v]=n.slice(r,r+6);i.push(_=>_.bezierCurveTo(l,u,f,m,g,v)),r+=6}break;case vh.MOVE_TO:{const[l,u]=n.slice(r,r+2);i.push(f=>f.moveTo(l,u)),r+=2}break;case vh.LINE_TO:{const[l,u]=n.slice(r,r+2);i.push(f=>f.lineTo(l,u)),r+=2}break;case vh.QUADRATIC_CURVE_TO:{const[l,u,f,m]=n.slice(r,r+4);i.push(g=>g.quadraticCurveTo(l,u,f,m)),r+=4}break;case vh.RESTORE:i.push(l=>l.restore());break;case vh.SAVE:i.push(l=>l.save());break;case vh.SCALE:js(i.length===2,"Scale command is only valid at the third position.");break;case vh.TRANSFORM:{const[l,u,f,m,g,v]=n.slice(r,r+6);i.push(_=>_.transform(l,u,f,m,g,v)),r+=6}break;case vh.TRANSLATE:{const[l,u]=n.slice(r,r+2);i.push(f=>f.translate(l,u)),r+=2}break}return this.compiledGlyphs[e]=function(a,l){i[0](a),i[1](a),a.scale(l,-l);for(let u=2,f=i.length;u<f;u++)i[u](a)}}}var LA;class sI{constructor({enableHWA:t=!1}){Y(this,LA,!1);G(this,LA,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!x(this,LA)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Oi("Abstract method `_createCanvas` called.")}}LA=new WeakMap;class Mtt extends sI{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class rI{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Oi("Abstract method `_fetch` called.")}}class aI extends rI{async _fetch(t){const e=await O4(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):B4(e)}}class oI{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,r){return"none"}destroy(t=!1){}}var Jm,Zm,Cu,Rh,Zr,M3,$m,xe,Wr,U1,P1,VE,F1,lI,dw,H1,y_,__,pw,A_;class Ttt extends oI{constructor({docId:e,ownerDocument:n=globalThis.document}){super();Y(this,xe);Y(this,Jm);Y(this,Zm);Y(this,Cu);Y(this,Rh);Y(this,Zr);Y(this,M3);Y(this,$m,0);G(this,Rh,e),G(this,Zr,n)}addFilter(e){if(!e)return"none";let n=x(this,xe,Wr).get(e);if(n)return n;const[i,r,a]=k(this,xe,VE).call(this,e),l=e.length===1?i:`${i}${r}${a}`;if(n=x(this,xe,Wr).get(l),n)return x(this,xe,Wr).set(e,n),n;const u=`g_${x(this,Rh)}_transfer_map_${Ea(this,$m)._++}`,f=k(this,xe,F1).call(this,u);x(this,xe,Wr).set(e,f),x(this,xe,Wr).set(l,f);const m=k(this,xe,H1).call(this,u);return k(this,xe,__).call(this,i,r,a,m),f}addHCMFilter(e,n){var b;const i=`${e}-${n}`,r="base";let a=x(this,xe,U1).get(r);if((a==null?void 0:a.key)===i||(a?((b=a.filter)==null||b.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},x(this,xe,U1).set(r,a)),!e||!n))return a.url;const l=k(this,xe,A_).call(this,e);e=Le.makeHexColor(...l);const u=k(this,xe,A_).call(this,n);if(n=Le.makeHexColor(...u),x(this,xe,P1).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return a.url;const f=new Array(256);for(let C=0;C<=255;C++){const T=C/255;f[C]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const m=f.join(","),g=`g_${x(this,Rh)}_hcm_filter`,v=a.filter=k(this,xe,H1).call(this,g);k(this,xe,__).call(this,m,m,m,v),k(this,xe,dw).call(this,v);const _=(C,T)=>{const S=l[C]/255,R=u[C]/255,B=new Array(T+1);for(let D=0;D<=T;D++)B[D]=S+D/T*(R-S);return B.join(",")};return k(this,xe,__).call(this,_(0,5),_(1,5),_(2,5),v),a.url=k(this,xe,F1).call(this,g),a.url}addAlphaFilter(e){let n=x(this,xe,Wr).get(e);if(n)return n;const[i]=k(this,xe,VE).call(this,[e]),r=`alpha_${i}`;if(n=x(this,xe,Wr).get(r),n)return x(this,xe,Wr).set(e,n),n;const a=`g_${x(this,Rh)}_alpha_map_${Ea(this,$m)._++}`,l=k(this,xe,F1).call(this,a);x(this,xe,Wr).set(e,l),x(this,xe,Wr).set(r,l);const u=k(this,xe,H1).call(this,a);return k(this,xe,pw).call(this,i,u),l}addLuminosityFilter(e){let n=x(this,xe,Wr).get(e||"luminosity");if(n)return n;let i,r;if(e?([i]=k(this,xe,VE).call(this,[e]),r=`luminosity_${i}`):r="luminosity",n=x(this,xe,Wr).get(r),n)return x(this,xe,Wr).set(e,n),n;const a=`g_${x(this,Rh)}_luminosity_map_${Ea(this,$m)._++}`,l=k(this,xe,F1).call(this,a);x(this,xe,Wr).set(e,l),x(this,xe,Wr).set(r,l);const u=k(this,xe,H1).call(this,a);return k(this,xe,lI).call(this,u),e&&k(this,xe,pw).call(this,i,u),l}addHighlightHCMFilter(e,n,i,r,a){var R;const l=`${n}-${i}-${r}-${a}`;let u=x(this,xe,U1).get(e);if((u==null?void 0:u.key)===l||(u?((R=u.filter)==null||R.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},x(this,xe,U1).set(e,u)),!n||!i))return u.url;const[f,m]=[n,i].map(k(this,xe,A_).bind(this));let g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[_,b]=[r,a].map(k(this,xe,A_).bind(this));v<g&&([g,v,_,b]=[v,g,b,_]),x(this,xe,P1).style.color="";const C=(B,D,N)=>{const I=new Array(256),F=(v-g)/N,z=B/255,U=(D-B)/(255*N);let P=0;for(let X=0;X<=N;X++){const ot=Math.round(g+X*F),it=z+X*U;for(let ct=P;ct<=ot;ct++)I[ct]=it;P=ot+1}for(let X=P;X<256;X++)I[X]=I[P-1];return I.join(",")},T=`g_${x(this,Rh)}_hcm_${e}_filter`,S=u.filter=k(this,xe,H1).call(this,T);return k(this,xe,dw).call(this,S),k(this,xe,__).call(this,C(_[0],b[0],5),C(_[1],b[1],5),C(_[2],b[2],5),S),u.url=k(this,xe,F1).call(this,T),u.url}destroy(e=!1){e&&x(this,xe,U1).size!==0||(x(this,Cu)&&(x(this,Cu).parentNode.parentNode.remove(),G(this,Cu,null)),x(this,Zm)&&(x(this,Zm).clear(),G(this,Zm,null)),G(this,$m,0))}}Jm=new WeakMap,Zm=new WeakMap,Cu=new WeakMap,Rh=new WeakMap,Zr=new WeakMap,M3=new WeakMap,$m=new WeakMap,xe=new WeakSet,Wr=function(){return x(this,Zm)||G(this,Zm,new Map)},U1=function(){return x(this,M3)||G(this,M3,new Map)},P1=function(){if(!x(this,Cu)){const e=x(this,Zr).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=x(this,Zr).createElementNS(_h,"svg");i.setAttribute("width",0),i.setAttribute("height",0),G(this,Cu,x(this,Zr).createElementNS(_h,"defs")),e.append(i),i.append(x(this,Cu)),x(this,Zr).body.append(e)}return x(this,Cu)},VE=function(e){if(e.length===1){const f=e[0],m=new Array(256);for(let v=0;v<256;v++)m[v]=f[v]/255;const g=m.join(",");return[g,g,g]}const[n,i,r]=e,a=new Array(256),l=new Array(256),u=new Array(256);for(let f=0;f<256;f++)a[f]=n[f]/255,l[f]=i[f]/255,u[f]=r[f]/255;return[a.join(","),l.join(","),u.join(",")]},F1=function(e){if(x(this,Jm)===void 0){G(this,Jm,"");const n=x(this,Zr).URL;n!==x(this,Zr).baseURI&&(N4(n)?An('#createUrl: ignore "data:"-URL for performance reasons.'):G(this,Jm,n.split("#",1)[0]))}return`url(${x(this,Jm)}#${e})`},lI=function(e){const n=x(this,Zr).createElementNS(_h,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},dw=function(e){const n=x(this,Zr).createElementNS(_h,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},H1=function(e){const n=x(this,Zr).createElementNS(_h,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),x(this,xe,P1).append(n),n},y_=function(e,n,i){const r=x(this,Zr).createElementNS(_h,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)},__=function(e,n,i,r){const a=x(this,Zr).createElementNS(_h,"feComponentTransfer");r.append(a),k(this,xe,y_).call(this,a,"feFuncR",e),k(this,xe,y_).call(this,a,"feFuncG",n),k(this,xe,y_).call(this,a,"feFuncB",i)},pw=function(e,n){const i=x(this,Zr).createElementNS(_h,"feComponentTransfer");n.append(i),k(this,xe,y_).call(this,i,"feFuncA",e)},A_=function(e){return x(this,xe,P1).style.color=e,TR(getComputedStyle(x(this,xe,P1)).getPropertyValue("color"))};class cI{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Oi("Abstract method `_fetch` called.")}}class uI extends cI{async _fetch(t){const e=await O4(t,"arraybuffer");return new Uint8Array(e)}}if(sa){var mw=Promise.withResolvers(),V_=null;(async()=>{const t=await gE(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await gE(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await gE(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await gE(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,a;return new Map(Object.entries({fs:t,http:e,https:n,url:i,canvas:r,path2d:a}))})().then(t=>{V_=t,mw.resolve()},t=>{An(`loadPackages: ${t}`),V_=new Map,mw.resolve()})}class ip{static get promise(){return mw.promise}static get(t){return V_==null?void 0:V_.get(t)}}async function hI(s){const e=await ip.get("fs").promises.readFile(s);return new Uint8Array(e)}class Ctt extends oI{}class wtt extends sI{_createCanvas(t,e){return ip.get("canvas").createCanvas(t,e)}}class Rtt extends rI{async _fetch(t){return hI(t)}}class Ltt extends cI{async _fetch(t){return hI(t)}}const La={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function gw(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),s.clip(i)}class wR{getPattern(){Oi("Abstract method `getPattern` called.")}}class Dtt extends wR{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let r;if(i===La.STROKE||i===La.FILL){const a=e.current.getClippedPathBoundingBox(i,Wi(t))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,u=Math.ceil(a[3]-a[1])||1,f=e.cachedCanvases.getCanvas("pattern",l,u),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-a[0],-a[1]),n=Le.transform(n,[1,0,0,1,a[0],a[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),gw(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),r=t.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(n);r.setTransform(g)}else gw(t,this._bbox),r=this._createGradient(t);return r}}function ZC(s,t,e,n,i,r,a,l){const u=t.coords,f=t.colors,m=s.data,g=s.width*4;let v;u[e+1]>u[n+1]&&(v=e,e=n,n=v,v=r,r=a,a=v),u[n+1]>u[i+1]&&(v=n,n=i,i=v,v=a,a=l,l=v),u[e+1]>u[n+1]&&(v=e,e=n,n=v,v=r,r=a,a=v);const _=(u[e]+t.offsetX)*t.scaleX,b=(u[e+1]+t.offsetY)*t.scaleY,C=(u[n]+t.offsetX)*t.scaleX,T=(u[n+1]+t.offsetY)*t.scaleY,S=(u[i]+t.offsetX)*t.scaleX,R=(u[i+1]+t.offsetY)*t.scaleY;if(b>=R)return;const B=f[r],D=f[r+1],N=f[r+2],I=f[a],F=f[a+1],z=f[a+2],U=f[l],P=f[l+1],X=f[l+2],ot=Math.round(b),it=Math.round(R);let ct,dt,Q,tt,et,_t,K,at;for(let xt=ot;xt<=it;xt++){if(xt<T){const Ut=xt<b?0:(b-xt)/(b-T);ct=_-(_-C)*Ut,dt=B-(B-I)*Ut,Q=D-(D-F)*Ut,tt=N-(N-z)*Ut}else{let Ut;xt>R?Ut=1:T===R?Ut=0:Ut=(T-xt)/(T-R),ct=C-(C-S)*Ut,dt=I-(I-U)*Ut,Q=F-(F-P)*Ut,tt=z-(z-X)*Ut}let Et;xt<b?Et=0:xt>R?Et=1:Et=(b-xt)/(b-R),et=_-(_-S)*Et,_t=B-(B-U)*Et,K=D-(D-P)*Et,at=N-(N-X)*Et;const lt=Math.round(Math.min(ct,et)),wt=Math.round(Math.max(ct,et));let Bt=g*xt+lt*4;for(let Ut=lt;Ut<=wt;Ut++)Et=(ct-Ut)/(ct-et),Et<0?Et=0:Et>1&&(Et=1),m[Bt++]=dt-(dt-_t)*Et|0,m[Bt++]=Q-(Q-K)*Et|0,m[Bt++]=tt-(tt-at)*Et|0,m[Bt++]=255}}function Btt(s,t,e){const n=t.coords,i=t.colors;let r,a;switch(t.type){case"lattice":const l=t.verticesPerRow,u=Math.floor(n.length/l)-1,f=l-1;for(r=0;r<u;r++){let m=r*l;for(let g=0;g<f;g++,m++)ZC(s,e,n[m],n[m+1],n[m+l],i[m],i[m+1],i[m+l]),ZC(s,e,n[m+l+1],n[m+1],n[m+l],i[m+l+1],i[m+1],i[m+l])}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)ZC(s,e,n[r],n[r+1],n[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class Ott extends wR{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const l=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-l,m=Math.ceil(this._bounds[3])-u,g=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),_=f/g,b=m/v,C={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-u,scaleX:1/_,scaleY:1/b},T=g+2*2,S=v+2*2,R=n.getCanvas("mesh",T,S),B=R.context,D=B.createImageData(g,v);if(e){const I=D.data;for(let F=0,z=I.length;F<z;F+=4)I[F]=e[0],I[F+1]=e[1],I[F+2]=e[2],I[F+3]=255}for(const I of this._figures)Btt(D,I,C);return B.putImageData(D,2,2),{canvas:R.canvas,offsetX:l-2*_,offsetY:u-2*b,scaleX:_,scaleY:b}}getPattern(t,e,n,i){gw(t,this._bbox);let r;if(i===La.SHADING)r=Le.singularValueDecompose2dScale(Wi(t));else if(r=Le.singularValueDecompose2dScale(e.baseTransform),this.matrix){const l=Le.singularValueDecompose2dScale(this.matrix);r=[r[0]*l[0],r[1]*l[1]]}const a=this._createMeshCanvas(r,i===La.SHADING?null:this._background,e.cachedCanvases);return i!==La.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class Ntt extends wR{getPattern(){return"hotpink"}}function Itt(s){switch(s[0]){case"RadialAxial":return new Dtt(s);case"Mesh":return new Ott(s);case"Dummy":return new Ntt}throw new Error(`Unknown IR type: ${s[0]}`)}const RD={COLORED:1,UNCOLORED:2},T3=class T3{constructor(t,e,n,i,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:i,tilingType:r,color:a,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:f}=this;u=Math.abs(u),f=Math.abs(f),L4("TilingType: "+r);const m=e[0],g=e[1],v=e[2],_=e[3],b=v-m,C=_-g,T=Le.singularValueDecompose2dScale(this.matrix),S=Le.singularValueDecompose2dScale(this.baseTransform),R=T[0]*S[0],B=T[1]*S[1];let D=b,N=C,I=!1,F=!1;const z=Math.ceil(u*R),U=Math.ceil(f*B),P=Math.ceil(b*R),X=Math.ceil(C*B);z>=P?D=u:I=!0,U>=X?N=f:F=!0;const ot=this.getSizeAndScale(D,this.ctx.canvas.width,R),it=this.getSizeAndScale(N,this.ctx.canvas.height,B),ct=t.cachedCanvases.getCanvas("pattern",ot.size,it.size),dt=ct.context,Q=l.createCanvasGraphics(dt);if(Q.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Q,i,a),dt.translate(-ot.scale*m,-it.scale*g),Q.transform(ot.scale,0,0,it.scale,0,0),dt.save(),this.clipBbox(Q,m,g,v,_),Q.baseTransform=Wi(Q.ctx),Q.executeOperatorList(n),Q.endDrawing(),dt.restore(),I||F){const tt=ct.canvas;I&&(D=u),F&&(N=f);const et=this.getSizeAndScale(D,this.ctx.canvas.width,R),_t=this.getSizeAndScale(N,this.ctx.canvas.height,B),K=et.size,at=_t.size,xt=t.cachedCanvases.getCanvas("pattern-workaround",K,at),Et=xt.context,lt=I?Math.floor(b/u):0,wt=F?Math.floor(C/f):0;for(let Bt=0;Bt<=lt;Bt++)for(let Ut=0;Ut<=wt;Ut++)Et.drawImage(tt,K*Bt,at*Ut,K,at,0,0,K,at);return{canvas:xt.canvas,scaleX:et.scale,scaleY:_t.scale,offsetX:m,offsetY:g}}return{canvas:ct.canvas,scaleX:ot.scale,scaleY:it.scale,offsetX:m,offsetY:g}}getSizeAndScale(t,e,n){const i=Math.max(T3.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=i?r=i:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,i,r){const a=i-e,l=r-n;t.ctx.rect(e,n,a,l),t.current.updateRectMinMax(Wi(t.ctx),[e,n,i,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,r=t.current;switch(e){case RD.COLORED:const a=this.ctx;i.fillStyle=a.fillStyle,i.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case RD.UNCOLORED:const l=Le.makeHexColor(n[0],n[1],n[2]);i.fillStyle=l,i.strokeStyle=l,r.fillColor=l,r.strokeColor=l;break;default:throw new att(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,i){let r=n;i!==La.SHADING&&(r=Le.transform(r,e.baseTransform),this.matrix&&(r=Le.transform(r,this.matrix)));const a=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const u=t.createPattern(a.canvas,"repeat");return u.setTransform(l),u}};Je(T3,"MAX_PATTERN_SIZE",3e3);let vw=T3;function Utt({src:s,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const l=Ia.isLittleEndian?4278190080:255,[u,f]=a?[r,l]:[l,r],m=n>>3,g=n&7,v=s.length;e=new Uint32Array(e.buffer);let _=0;for(let b=0;b<i;b++){for(const T=t+m;t<T;t++){const S=t<v?s[t]:255;e[_++]=S&128?f:u,e[_++]=S&64?f:u,e[_++]=S&32?f:u,e[_++]=S&16?f:u,e[_++]=S&8?f:u,e[_++]=S&4?f:u,e[_++]=S&2?f:u,e[_++]=S&1?f:u}if(g===0)continue;const C=t<v?s[t++]:255;for(let T=0;T<g;T++)e[_++]=C&1<<7-T?f:u}return{srcPos:t,destPos:_}}const LD=16,DD=100,Ptt=15,BD=10,OD=1e3,so=16;function Ftt(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(n,i){t.translate(n,i),this.__originalTranslate(n,i)},s.scale=function(n,i){t.scale(n,i),this.__originalScale(n,i)},s.transform=function(n,i,r,a,l,u){t.transform(n,i,r,a,l,u),this.__originalTransform(n,i,r,a,l,u)},s.setTransform=function(n,i,r,a,l,u){t.setTransform(n,i,r,a,l,u),this.__originalSetTransform(n,i,r,a,l,u)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(n){t.rotate(n),this.__originalRotate(n)},s.clip=function(n){t.clip(n),this.__originalClip(n)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,i,r,a,l){t.bezierCurveTo(e,n,i,r,a,l),this.__originalBezierCurveTo(e,n,i,r,a,l)},s.rect=function(e,n,i,r){t.rect(e,n,i,r),this.__originalRect(e,n,i,r)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Htt{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function _E(s,t,e,n,i,r,a,l,u,f){const[m,g,v,_,b,C]=Wi(s);if(g===0&&v===0){const R=a*m+b,B=Math.round(R),D=l*_+C,N=Math.round(D),I=(a+u)*m+b,F=Math.abs(Math.round(I)-B)||1,z=(l+f)*_+C,U=Math.abs(Math.round(z)-N)||1;return s.setTransform(Math.sign(m),0,0,Math.sign(_),B,N),s.drawImage(t,e,n,i,r,0,0,F,U),s.setTransform(m,g,v,_,b,C),[F,U]}if(m===0&&_===0){const R=l*v+b,B=Math.round(R),D=a*g+C,N=Math.round(D),I=(l+f)*v+b,F=Math.abs(Math.round(I)-B)||1,z=(a+u)*g+C,U=Math.abs(Math.round(z)-N)||1;return s.setTransform(0,Math.sign(g),Math.sign(v),0,B,N),s.drawImage(t,e,n,i,r,0,0,U,F),s.setTransform(m,g,v,_,b,C),[U,F]}s.drawImage(t,e,n,i,r,a,l,u,f);const T=Math.hypot(m,g),S=Math.hypot(v,_);return[T*u,S*f]}function ztt(s){const{width:t,height:e}=s;if(t>OD||e>OD)return null;const n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let a=new Uint8Array(r*(e+1)),l,u,f;const m=t+7&-8;let g=new Uint8Array(m*e),v=0;for(const S of s.data){let R=128;for(;R>0;)g[v++]=S&R?0:255,R>>=1}let _=0;for(v=0,g[v]!==0&&(a[0]=1,++_),u=1;u<t;u++)g[v]!==g[v+1]&&(a[u]=g[v]?2:1,++_),v++;for(g[v]!==0&&(a[u]=2,++_),l=1;l<e;l++){v=l*m,f=l*r,g[v-m]!==g[v]&&(a[f]=g[v]?1:8,++_);let S=(g[v]?4:0)+(g[v-m]?8:0);for(u=1;u<t;u++)S=(S>>2)+(g[v+1]?4:0)+(g[v-m+1]?8:0),i[S]&&(a[f+u]=i[S],++_),v++;if(g[v-m]!==g[v]&&(a[f+u]=g[v]?2:4,++_),_>n)return null}for(v=m*(e-1),f=l*r,g[v]!==0&&(a[f]=8,++_),u=1;u<t;u++)g[v]!==g[v+1]&&(a[f+u]=g[v]?4:8,++_),v++;if(g[v]!==0&&(a[f+u]=4,++_),_>n)return null;const b=new Int32Array([0,r,-1,0,-r,0,0,0,1]),C=new Path2D;for(l=0;_&&l<=e;l++){let S=l*r;const R=S+t;for(;S<R&&!a[S];)S++;if(S===R)continue;C.moveTo(S%r,l);const B=S;let D=a[S];do{const N=b[D];do S+=N;while(!a[S]);const I=a[S];I!==5&&I!==10?(D=I,a[S]=0):(D=I&51*D>>4,a[S]&=D>>2|D<<2),C.lineTo(S%r,S/r|0),a[S]||--_}while(B!==S);--l}return g=null,a=null,function(S){S.save(),S.scale(1/t,-1/e),S.translate(0,-e),S.fill(C),S.beginPath(),S.restore()}}class ND{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=wN,this.textMatrixScale=1,this.fontMatrix=V8,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Yr.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=Le.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=Le.applyTransform(e,t),i=Le.applyTransform(e.slice(2),t),r=Le.applyTransform([e[0],e[3]],t),a=Le.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],i[0],r[0],a[0]),this.minY=Math.min(this.minY,n[1],i[1],r[1],a[1]),this.maxX=Math.max(this.maxX,n[0],i[0],r[0],a[0]),this.maxY=Math.max(this.maxY,n[1],i[1],r[1],a[1])}updateScalingPathMinMax(t,e){Le.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,i,r,a,l,u,f,m){const g=Le.bezierBoundingBox(e,n,i,r,a,l,u,f,m);m||this.updateRectMinMax(t,g)}getPathBoundingBox(t=La.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===La.STROKE){e||Oi("Stroke bounding box must include transform.");const i=Le.singularValueDecompose2dScale(e),r=i[0]*this.lineWidth/2,a=i[1]*this.lineWidth/2;n[0]-=r,n[1]-=a,n[2]+=r,n[3]+=a}return n}updateClipFromPath(){const t=Le.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=La.FILL,e=null){return Le.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function ID(s,t){if(typeof ImageData<"u"&&t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%so,r=(e-i)/so,a=i===0?r:r+1,l=s.createImageData(n,so);let u=0,f;const m=t.data,g=l.data;let v,_,b,C;if(t.kind===UE.GRAYSCALE_1BPP){const T=m.byteLength,S=new Uint32Array(g.buffer,0,g.byteLength>>2),R=S.length,B=n+7>>3,D=4294967295,N=Ia.isLittleEndian?4278190080:255;for(v=0;v<a;v++){for(b=v<r?so:i,f=0,_=0;_<b;_++){const I=T-u;let F=0;const z=I>B?n:I*8-7,U=z&-8;let P=0,X=0;for(;F<U;F+=8)X=m[u++],S[f++]=X&128?D:N,S[f++]=X&64?D:N,S[f++]=X&32?D:N,S[f++]=X&16?D:N,S[f++]=X&8?D:N,S[f++]=X&4?D:N,S[f++]=X&2?D:N,S[f++]=X&1?D:N;for(;F<z;F++)P===0&&(X=m[u++],P=128),S[f++]=X&P?D:N,P>>=1}for(;f<R;)S[f++]=0;s.putImageData(l,0,v*so)}}else if(t.kind===UE.RGBA_32BPP){for(_=0,C=n*so*4,v=0;v<r;v++)g.set(m.subarray(u,u+C)),u+=C,s.putImageData(l,0,_),_+=so;v<a&&(C=n*i*4,g.set(m.subarray(u,u+C)),s.putImageData(l,0,_))}else if(t.kind===UE.RGB_24BPP)for(b=so,C=n*b,v=0;v<a;v++){for(v>=r&&(b=i,C=n*b),f=0,_=C;_--;)g[f++]=m[u++],g[f++]=m[u++],g[f++]=m[u++],g[f++]=255;s.putImageData(l,0,v*so)}else throw new Error(`bad image kind: ${t.kind}`)}function UD(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%so,r=(e-i)/so,a=i===0?r:r+1,l=s.createImageData(n,so);let u=0;const f=t.data,m=l.data;for(let g=0;g<a;g++){const v=g<r?so:i;({srcPos:u}=Utt({src:f,srcPos:u,dest:m,width:n,height:v,nonBlackColor:0})),s.putImageData(l,0,g*so)}}function o_(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function AE(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!sa){const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}}function PD(s,t){if(t)return!0;const e=Le.singularValueDecompose2dScale(s);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*np.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const Gtt=["butt","round","square"],ktt=["miter","round","bevel"],Vtt={},FD={};var rp,yw,_w;const FR=class FR{constructor(t,e,n,i,r,{optionalContentConfig:a,markedContentStack:l=null},u,f){Y(this,rp);this.ctx=t,this.current=new ND(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new Htt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=l,n){const u=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...Wi(this.compositeCtx))}this.ctx.save(),AE(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Wi(this.ctx)}executeOperatorList(t,e,n,i){const r=t.argsArray,a=t.fnArray;let l=e||0;const u=r.length;if(u===l)return l;const f=u-l>BD&&typeof n=="function",m=f?Date.now()+Ptt:0;let g=0;const v=this.commonObjs,_=this.objs;let b;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,n),l;if(b=a[l],b!==uc.dependency)this[b].apply(this,r[l]);else for(const C of r[l]){const T=C.startsWith("g_")?v:_;if(!T.has(C))return T.get(C,n),l}if(l++,l===u)return l;if(f&&++g>BD){if(Date.now()>m)return n(),l;g=0}}}endDrawing(){k(this,rp,yw).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),k(this,rp,_w).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),l=n,u=i,f="prescale1",m,g;for(;r>2&&l>1||a>2&&u>1;){let v=l,_=u;r>2&&l>1&&(v=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/v),a>2&&u>1&&(_=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,a/=u/_),m=this.cachedCanvases.getCanvas(f,v,_),g=m.context,g.clearRect(0,0,v,_),g.drawImage(t,0,0,l,u,0,0,v,_),t=m.canvas,l=v,u=_,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:u}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:i}=t,r=this.current.fillColor,a=this.current.patternFill,l=Wi(e);let u,f,m,g;if((t.bitmap||t.data)&&t.count>1){const z=t.bitmap||t.data.buffer;f=JSON.stringify(a?l:[l.slice(0,4),r]),u=this._cachedBitmapsMap.get(z),u||(u=new Map,this._cachedBitmapsMap.set(z,u));const U=u.get(f);if(U&&!a){const P=Math.round(Math.min(l[0],l[2])+l[4]),X=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:U,offsetX:P,offsetY:X}}m=U}m||(g=this.cachedCanvases.getCanvas("maskCanvas",n,i),UD(g.context,t));let v=Le.transform(l,[1/n,0,0,-1/i,0,0]);v=Le.transform(v,[1,0,0,1,0,-i]);const[_,b,C,T]=Le.getAxialAlignedBoundingBox([0,0,n,i],v),S=Math.round(C-_)||1,R=Math.round(T-b)||1,B=this.cachedCanvases.getCanvas("fillCanvas",S,R),D=B.context,N=_,I=b;D.translate(-N,-I),D.transform(...v),m||(m=this._scaleImage(g.canvas,yh(D)),m=m.img,u&&a&&u.set(f,m)),D.imageSmoothingEnabled=PD(Wi(D),t.interpolate),_E(D,m,0,0,m.width,m.height,0,0,n,i),D.globalCompositeOperation="source-in";const F=Le.transform(yh(D),[1,0,0,1,-N,-I]);return D.fillStyle=a?r.getPattern(e,this,F,La.FILL):r,D.fillRect(0,0,n,i),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(f,B.canvas)),{canvas:B.canvas,offsetX:Math.round(N),offsetY:Math.round(I)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=Gtt[t]}setLineJoin(t){this.ctx.lineJoin=ktt[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...Wi(this.suspendedCtx)),o_(this.suspendedCtx,r),Ftt(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o_(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const r=i[0],a=i[1],l=i[2]-r,u=i[3]-a;l===0||u===0||(this.genericComposeSMask(e.context,n,l,u,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,r,a,l,u,f,m,g){let v=t.canvas,_=u-m,b=f-g;if(a){const T=Le.makeHexColor(...a);if(_<0||b<0||_+n>v.width||b+i>v.height){const S=this.cachedCanvases.getCanvas("maskExtension",n,i),R=S.context;R.drawImage(v,-_,-b),R.globalCompositeOperation="destination-atop",R.fillStyle=T,R.fillRect(0,0,n,i),R.globalCompositeOperation="source-over",v=S.canvas,_=b=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(_,b,n,i),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=T,t.fillRect(_,b,n,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const C=new Path2D;C.rect(u,f,n,i),e.clip(C),e.globalCompositeOperation="destination-in",e.drawImage(v,_,b,n,i,u,f,n,i),e.restore()}save(){this.inSMaskMode?(o_(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o_(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,i,r,a){this.ctx.transform(t,e,n,i,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const i=this.ctx,r=this.current;let a=r.x,l=r.y,u,f;const m=Wi(i),g=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,v=g?n.slice(0):null;for(let _=0,b=0,C=t.length;_<C;_++)switch(t[_]|0){case uc.rectangle:a=e[b++],l=e[b++];const T=e[b++],S=e[b++],R=a+T,B=l+S;i.moveTo(a,l),T===0||S===0?i.lineTo(R,B):(i.lineTo(R,l),i.lineTo(R,B),i.lineTo(a,B)),g||r.updateRectMinMax(m,[a,l,R,B]),i.closePath();break;case uc.moveTo:a=e[b++],l=e[b++],i.moveTo(a,l),g||r.updatePathMinMax(m,a,l);break;case uc.lineTo:a=e[b++],l=e[b++],i.lineTo(a,l),g||r.updatePathMinMax(m,a,l);break;case uc.curveTo:u=a,f=l,a=e[b+4],l=e[b+5],i.bezierCurveTo(e[b],e[b+1],e[b+2],e[b+3],a,l),r.updateCurvePathMinMax(m,u,f,e[b],e[b+1],e[b+2],e[b+3],a,l,v),b+=6;break;case uc.curveTo2:u=a,f=l,i.bezierCurveTo(a,l,e[b],e[b+1],e[b+2],e[b+3]),r.updateCurvePathMinMax(m,u,f,a,l,e[b],e[b+1],e[b+2],e[b+3],v),a=e[b+2],l=e[b+3],b+=4;break;case uc.curveTo3:u=a,f=l,a=e[b+2],l=e[b+3],i.bezierCurveTo(e[b],e[b+1],a,l,a,l),r.updateCurvePathMinMax(m,u,f,e[b],e[b+1],a,l,a,l,v),b+=4;break;case uc.closePath:i.closePath();break}g&&r.updateScalingPathMinMax(m,v),r.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,yh(e),La.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(e.save(),e.fillStyle=n.getPattern(e,this,yh(e),La.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Vtt}eoClip(){this.pendingClip=FD}beginText(){this.current.textMatrix=wN,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const n=this.commonObjs.get(t),i=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=n.fontMatrix||V8,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&An("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const r=n.loadedName||"sans-serif",a=((m=n.systemFontInfo)==null?void 0:m.css)||`"${r}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const u=n.italic?"italic":"normal";let f=e;e<LD?f=LD:e>DD&&(f=DD),this.current.fontSizeScale=e/f,this.ctx.font=`${u} ${l} ${f}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,i,r,a){this.current.textMatrix=[t,e,n,i,r,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,i){const r=this.ctx,a=this.current,l=a.font,u=a.textRenderingMode,f=a.fontSize/a.fontSizeScale,m=u&Yr.FILL_STROKE_MASK,g=!!(u&Yr.ADD_TO_PATH_FLAG),v=a.patternFill&&!l.missingFile;let _;(l.disableFontFace||g||v)&&(_=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||v?(r.save(),r.translate(e,n),r.beginPath(),_(r,f),i&&r.setTransform(...i),(m===Yr.FILL||m===Yr.FILL_STROKE)&&r.fill(),(m===Yr.STROKE||m===Yr.FILL_STROKE)&&r.stroke(),r.restore()):((m===Yr.FILL||m===Yr.FILL_STROKE)&&r.fillText(t,e,n),(m===Yr.STROKE||m===Yr.FILL_STROKE)&&r.strokeText(t,e,n)),g&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Wi(r),x:e,y:n,fontSize:f,addToPath:_})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Fn(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const r=this.ctx,a=e.fontSizeScale,l=e.charSpacing,u=e.wordSpacing,f=e.fontDirection,m=e.textHScale*f,g=t.length,v=n.vertical,_=v?1:-1,b=n.defaultVMetrics,C=i*e.fontMatrix[0],T=e.textRenderingMode===Yr.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),f>0?r.scale(m,-1):r.scale(m,1);let S;if(e.patternFill){r.save();const I=e.fillColor.getPattern(r,this,yh(r),La.FILL);S=Wi(r),r.restore(),r.fillStyle=I}let R=e.lineWidth;const B=e.textMatrixScale;if(B===0||R===0){const I=e.textRenderingMode&Yr.FILL_STROKE_MASK;(I===Yr.STROKE||I===Yr.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=B;if(a!==1&&(r.scale(a,a),R/=a),r.lineWidth=R,n.isInvalidPDFjsFont){const I=[];let F=0;for(const z of t)I.push(z.unicode),F+=z.width;r.fillText(I.join(""),0,0),e.x+=F*C*m,r.restore(),this.compose();return}let D=0,N;for(N=0;N<g;++N){const I=t[N];if(typeof I=="number"){D+=_*I*i/1e3;continue}let F=!1;const z=(I.isSpace?u:0)+l,U=I.fontChar,P=I.accent;let X,ot,it=I.width;if(v){const dt=I.vmetric||b,Q=-(I.vmetric?dt[1]:it*.5)*C,tt=dt[2]*C;it=dt?-dt[0]:it,X=Q/a,ot=(D+tt)/a}else X=D/a,ot=0;if(n.remeasure&&it>0){const dt=r.measureText(U).width*1e3/i*a;if(it<dt&&this.isFontSubpixelAAEnabled){const Q=it/dt;F=!0,r.save(),r.scale(Q,1),X/=Q}else it!==dt&&(X+=(it-dt)/2e3*i/a)}if(this.contentVisible&&(I.isInFont||n.missingFile)){if(T&&!P)r.fillText(U,X,ot);else if(this.paintChar(U,X,ot,S),P){const dt=X+i*P.offset.x/a,Q=ot-i*P.offset.y/a;this.paintChar(P.fontChar,dt,Q,S)}}const ct=v?it*C-z*f:it*C+z*f;D+=ct,F&&r.restore()}v?e.y-=D:e.x+=D*m,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,i=n.font,r=n.fontSize,a=n.fontDirection,l=i.vertical?1:-1,u=n.charSpacing,f=n.wordSpacing,m=n.textHScale*a,g=n.fontMatrix||V8,v=t.length,_=n.textRenderingMode===Yr.INVISIBLE;let b,C,T,S;if(!(_||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(m,a),b=0;b<v;++b){if(C=t[b],typeof C=="number"){S=l*C*r/1e3,this.ctx.translate(S,0),n.x+=S*m;continue}const R=(C.isSpace?f:0)+u,B=i.charProcOperatorList[C.operatorListId];if(!B){An(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),e.scale(r,r),e.transform(...g),this.executeOperatorList(B),this.restore()),T=Le.applyTransform([C.width,0],g)[0]*r+R,e.translate(T,0),n.x+=T*m}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,r,a){this.ctx.rect(n,i,r-n,a-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],i=this.baseTransform||Wi(this.ctx),r={createCanvasGraphics:a=>new FR(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new vw(t,n,this.ctx,r,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=Le.makeHexColor(t,e,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=Le.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=Itt(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,yh(e),La.SHADING);const i=yh(e);if(i){const{width:r,height:a}=e.canvas,[l,u,f,m]=Le.getAxialAlignedBoundingBox([0,0,r,a],i);this.ctx.fillRect(l,u,f-l,m-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Oi("Should not call beginInlineImage")}beginImageData(){Oi("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Wi(this.ctx),e)){const n=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],n,i),this.current.updateRectMinMax(Wi(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||L4("TODO: Support non-isolated groups."),t.knockout&&An("Knockout groups not supported.");const n=Wi(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Le.getAxialAlignedBoundingBox(t.bbox,Wi(e));const r=[0,0,e.canvas.width,e.canvas.height];i=Le.intersect(i,r)||[0,0,0,0];const a=Math.floor(i[0]),l=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-a,1),f=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,f]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,u,f),v=g.context;v.translate(-a,-l),v.transform(...n),t.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,l),e.save()),o_(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Wi(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=Le.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,i,r){if(k(this,rp,yw).call(this),AE(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=l;const[u,f]=Le.singularValueDecompose2dScale(Wi(this.ctx)),{viewportScale:m}=this,g=Math.ceil(a*this.outputScaleX*m),v=Math.ceil(l*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(g,v);const{canvas:_,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(u,0,0,-f,0,l*f),AE(this.ctx)}else AE(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],a,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new ND(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),k(this,rp,_w).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=ztt(t)),i.compiled)){i.compiled(n);return}const r=this._createMaskCanvas(t),a=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,i=0,r,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const u=Wi(l);l.transform(e,n,i,r,0,0);const f=this._createMaskCanvas(t);l.setTransform(1,0,0,1,f.offsetX-u[4],f.offsetY-u[5]);for(let m=0,g=a.length;m<g;m+=2){const v=Le.transform(u,[e,n,i,r,a[m],a[m+1]]),[_,b]=Le.applyTransform([0,0],v);l.drawImage(f.canvas,_,b)}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const r of t){const{data:a,width:l,height:u,transform:f}=r,m=this.cachedCanvases.getCanvas("maskCanvas",l,u),g=m.context;g.save();const v=this.getObject(a,r);UD(g,v),g.globalCompositeOperation="source-in",g.fillStyle=i?n.getPattern(g,this,yh(e),La.FILL):n,g.fillRect(0,0,l,u),g.restore(),e.save(),e.transform(...f),e.scale(1,-1),_E(e,m.canvas,0,0,l,u,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){An("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){An("Dependent image isn't ready yet");return}const a=r.width,l=r.height,u=[];for(let f=0,m=i.length;f<m;f+=2)u.push({transform:[e,0,0,n,i[f],i[f+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(r,u)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,i),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,i=this.ctx;if(this.save(),!sa){const{filter:l}=i;l!=="none"&&l!==""&&(i.filter="none")}i.scale(1/e,-1/n);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const u=this.cachedCanvases.getCanvas("inlineImage",e,n).context;ID(u,t),r=this.applyTransferMapsToCanvas(u)}const a=this._scaleImage(r,yh(i));i.imageSmoothingEnabled=PD(Wi(i),t.interpolate),_E(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const r=t.width,a=t.height,u=this.cachedCanvases.getCanvas("inlineImage",r,a).context;ID(u,t),i=this.applyTransferMapsToCanvas(u)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),_E(n,i,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===FD?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Wi(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:r}=this.ctx.getTransform();let a,l;if(n===0&&i===0){const u=Math.abs(e),f=Math.abs(r);if(u===f)if(t===0)a=l=1/u;else{const m=u*t;a=l=m<1?1/m:1}else if(t===0)a=1/u,l=1/f;else{const m=u*t,g=f*t;a=m<1?1/m:1,l=g<1?1/g:1}}else{const u=Math.abs(e*r-n*i),f=Math.hypot(e,n),m=Math.hypot(i,r);if(t===0)a=m/u,l=f/u;else{const g=t*u;a=m>g?m/g:1,l=f>g?f/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[i,r]=this.getScaleForStroking();if(e.lineWidth=n||1,i===1&&r===1){e.stroke();return}const a=e.getLineDash();if(t&&e.save(),e.scale(i,r),a.length>0){const l=Math.max(i,r);e.setLineDash(a.map(u=>u/l)),e.lineDashOffset/=l}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};rp=new WeakSet,yw=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},_w=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let Z1=FR;for(const s in uc)Z1.prototype[s]!==void 0&&(Z1.prototype[uc[s]]=Z1.prototype[s]);var DA,BA;class Wh{static get workerPort(){return x(this,DA)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");G(this,DA,t)}static get workerSrc(){return x(this,BA)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");G(this,BA,t)}}DA=new WeakMap,BA=new WeakMap,Y(Wh,DA,null),Y(Wh,BA,"");const xE={DATA:1,ERROR:2},Ts={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wo(s){switch(s instanceof Error||typeof s=="object"&&s!==null||Oi('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new l0(s.message);case"MissingPDFException":return new o0(s.message);case"PasswordException":return new Q8(s.message,s.code);case"UnexpectedResponseException":return new D4(s.message,s.status);case"UnknownErrorException":return new X8(s.message,s.details);default:return new X8(s.message,s.toString())}}var gv,Rl,fI,dI,pI,QE;class x_{constructor(t,e,n){Y(this,Rl);Y(this,gv,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",k(this,Rl,fI).bind(this),{signal:x(this,gv).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(a){r.reject(a)}return r.promise}sendWithStream(t,e,n,i){const r=this.streamId++,a=this.sourceName,l=this.targetName,u=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[r]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:a,targetName:l,action:t,streamId:r,data:e,desiredSize:f.desiredSize},i),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[r].pullCall=m,u.postMessage({sourceName:a,targetName:l,stream:Ts.PULL,streamId:r,desiredSize:f.desiredSize}),m.promise},cancel:f=>{js(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[r].cancelCall=m,this.streamControllers[r].isClosed=!0,u.postMessage({sourceName:a,targetName:l,stream:Ts.CANCEL,streamId:r,reason:wo(f)}),m.promise}},n)}destroy(){var t;(t=x(this,gv))==null||t.abort(),G(this,gv,null)}}gv=new WeakMap,Rl=new WeakSet,fI=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){k(this,Rl,pI).call(this,t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===xE.DATA)i.resolve(t.data);else if(t.callback===xE.ERROR)i.reject(wo(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,r=this.comObj;new Promise(function(a){a(e(t.data))}).then(function(a){r.postMessage({sourceName:n,targetName:i,callback:xE.DATA,callbackId:t.callbackId,data:a})},function(a){r.postMessage({sourceName:n,targetName:i,callback:xE.ERROR,callbackId:t.callbackId,reason:wo(a)})});return}if(t.streamId){k(this,Rl,dI).call(this,t);return}e(t.data)},dI=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,a=this,l=this.actionHandler[t.action],u={enqueue(f,m=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:Ts.ENQUEUE,streamId:e,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Ts.CLOSE,streamId:e}),delete a.streamSinks[e])},error(f){js(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Ts.ERROR,streamId:e,reason:wo(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,new Promise(function(f){f(l(t.data,u))}).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ts.START_COMPLETE,streamId:e,success:!0})},function(f){r.postMessage({sourceName:n,targetName:i,stream:Ts.START_COMPLETE,streamId:e,reason:wo(f)})})},pI=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,a=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case Ts.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(wo(t.reason));break;case Ts.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(wo(t.reason));break;case Ts.PULL:if(!l){r.postMessage({sourceName:n,targetName:i,stream:Ts.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,new Promise(function(u){var f;u((f=l.onPull)==null?void 0:f.call(l))}).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ts.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:Ts.PULL_COMPLETE,streamId:e,reason:wo(u)})});break;case Ts.ENQUEUE:if(js(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case Ts.CLOSE:if(js(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),k(this,Rl,QE).call(this,a,e);break;case Ts.ERROR:js(a,"error should have stream controller"),a.controller.error(wo(t.reason)),k(this,Rl,QE).call(this,a,e);break;case Ts.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(wo(t.reason)),k(this,Rl,QE).call(this,a,e);break;case Ts.CANCEL:if(!l)break;new Promise(function(u){var f;u((f=l.onCancel)==null?void 0:f.call(l,wo(t.reason)))}).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ts.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:Ts.CANCEL_COMPLETE,streamId:e,reason:wo(u)})}),l.sinkCapability.reject(wo(t.reason)),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},QE=async function(t,e){var n,i,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(i=t.pullCall)==null?void 0:i.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var tg,OA;class Qtt{constructor({parsedData:t,rawData:e}){Y(this,tg);Y(this,OA);G(this,tg,t),G(this,OA,e)}getRaw(){return x(this,OA)}get(t){return x(this,tg).get(t)??null}getAll(){return xR(x(this,tg))}has(t){return x(this,tg).has(t)}}tg=new WeakMap,OA=new WeakMap;const z1=Symbol("INTERNAL");var NA,IA,UA,vv;class Xtt{constructor(t,{name:e,intent:n,usage:i,rbGroups:r}){Y(this,NA,!1);Y(this,IA,!1);Y(this,UA,!1);Y(this,vv,!0);G(this,NA,!!(t&Fo.DISPLAY)),G(this,IA,!!(t&Fo.PRINT)),this.name=e,this.intent=n,this.usage=i,this.rbGroups=r}get visible(){if(x(this,UA))return x(this,vv);if(!x(this,vv))return!1;const{print:t,view:e}=this.usage;return x(this,NA)?(e==null?void 0:e.viewState)!=="OFF":x(this,IA)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==z1&&Oi("Internal method `_setVisible` called."),G(this,UA,n),G(this,vv,e)}}NA=new WeakMap,IA=new WeakMap,UA=new WeakMap,vv=new WeakMap;var Ld,hi,yv,_v,PA,Aw;class jtt{constructor(t,e=Fo.DISPLAY){Y(this,PA);Y(this,Ld,null);Y(this,hi,new Map);Y(this,yv,null);Y(this,_v,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,G(this,_v,t.order);for(const n of t.groups)x(this,hi).set(n.id,new Xtt(e,n));if(t.baseState==="OFF")for(const n of x(this,hi).values())n._setVisible(z1,!1);for(const n of t.on)x(this,hi).get(n)._setVisible(z1,!0);for(const n of t.off)x(this,hi).get(n)._setVisible(z1,!1);G(this,yv,this.getHash())}}isVisible(t){if(x(this,hi).size===0)return!0;if(!t)return L4("Optional content group not defined."),!0;if(t.type==="OCG")return x(this,hi).has(t.id)?x(this,hi).get(t.id).visible:(An(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return k(this,PA,Aw).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(x(this,hi).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(!x(this,hi).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(!x(this,hi).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(x(this,hi).get(e).visible)return!1}return!0}return An(`Unknown optional content policy ${t.policy}.`),!0}return An(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const i=x(this,hi).get(t);if(!i){An(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const a of i.rbGroups)for(const l of a)l!==t&&((r=x(this,hi).get(l))==null||r._setVisible(z1,!1,!0));i._setVisible(z1,!!e,!0),G(this,Ld,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const r=x(this,hi).get(i);if(r)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}G(this,Ld,null)}get hasInitialVisibility(){return x(this,yv)===null||this.getHash()===x(this,yv)}getOrder(){return x(this,hi).size?x(this,_v)?x(this,_v).slice():[...x(this,hi).keys()]:null}getGroups(){return x(this,hi).size>0?xR(x(this,hi)):null}getGroup(t){return x(this,hi).get(t)||null}getHash(){if(x(this,Ld)!==null)return x(this,Ld);const t=new eI;for(const[e,n]of x(this,hi))t.update(`${e}:${n.visible}`);return G(this,Ld,t.hexdigest())}}Ld=new WeakMap,hi=new WeakMap,yv=new WeakMap,_v=new WeakMap,PA=new WeakSet,Aw=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const r=t[i];let a;if(Array.isArray(r))a=k(this,PA,Aw).call(this,r);else if(x(this,hi).has(r))a=x(this,hi).get(r).visible;else return An(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class qtt{constructor(t,{disableRange:e=!1,disableStream:n=!1}){js(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:a,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const u=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((u,f)=>{this._onReceiveData({begin:u,chunk:f})}),t.addProgressListener((u,f)=>{this._onProgress({loaded:u,total:f})}),t.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});js(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,i,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){js(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Ytt(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Wtt(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class Ytt{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=ER(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Wtt{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Ktt(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let m=l(e);return m=unescape(m),m=u(m),m=f(m),r(m)}if(e=a(s),e){const m=f(e);return r(m)}if(e=n("filename","i").exec(s),e){e=e[1];let m=l(e);return m=f(m),r(m)}function n(m,g){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(m,g){if(m){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(m,{fatal:!0}),_=B4(g);g=v.decode(_),t=!1}catch{}}return g}function r(m){return t&&/[\x80-\xff]/.test(m)&&(m=i("utf-8",m),t&&(m=i("iso-8859-1",m))),m}function a(m){const g=[];let v;const _=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=_.exec(m))!==null;){let[,C,T,S]=v;if(C=parseInt(C,10),C in g){if(C===0)break;continue}g[C]=[T,S]}const b=[];for(let C=0;C<g.length&&C in g;++C){let[T,S]=g[C];S=l(S),T&&(S=unescape(S),C===0&&(S=u(S))),b.push(S)}return b.join("")}function l(m){if(m.startsWith('"')){const g=m.slice(1).split('\\"');for(let v=0;v<g.length;++v){const _=g[v].indexOf('"');_!==-1&&(g[v]=g[v].slice(0,_),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}m=g.join('"')}return m}function u(m){const g=m.indexOf("'");if(g===-1)return m;const v=m.slice(0,g),b=m.slice(g+1).replace(/^[^']*'/,"");return i(v,b)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,_,b){if(_==="q"||_==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,T){return String.fromCharCode(parseInt(T,16))}),i(v,b);try{b=atob(b)}catch{}return i(v,b)})}return""}function RR(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function LR({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(s.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function DR(s){const t=s.get("Content-Disposition");if(t){let e=Ktt(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(ER(e))return e}return null}function I4(s,t){return s===404||s===0&&t.startsWith("file:")?new o0('Missing PDF "'+t+'".'):new D4(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s)}function mI(s){return s===200||s===206}function gI(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function vI(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(An(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class HD{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=RR(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return js(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Jtt(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Ztt(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Jtt{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,gI(n,this._withCredentials,this._abortController)).then(r=>{if(!mI(r.status))throw I4(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:l,suggestedLength:u}=LR({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=u||this._contentLength,this._filename=DR(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new l0("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:vI(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Ztt{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const a=i.url;fetch(a,gI(r,this._withCredentials,this._abortController)).then(l=>{if(!mI(l.status))throw I4(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:vI(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const $C=200,t8=206;function $tt(s){const t=s.response;return typeof t!="string"?t:B4(t).buffer}class tet{constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=RR(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const i={begin:t,end:e};for(const r in n)i[r]=n[r];return this.request(i)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,a]of this.headers)e.setRequestHeader(r,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=t8):i.expectedStatus=$C,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var i;const n=this.pendingRequests[t];n&&((i=n.onProgress)==null||i.call(n,e))}onStateChange(t,e){var u,f,m;const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){(u=n.onError)==null||u.call(n,i.status);return}const r=i.status||$C;if(!(r===$C&&n.expectedStatus===t8)&&r!==n.expectedStatus){(f=n.onError)==null||f.call(n,i.status);return}const l=$tt(i);if(r===t8){const g=i.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);n.onDone({begin:parseInt(v[1],10),chunk:l})}else l?n.onDone({begin:0,chunk:l}):(m=n.onError)==null||m.call(n,i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class eet{constructor(t){this._source=t,this._manager=new tet(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return js(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new net(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new iet(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class net{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=new Headers(e.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[l,...u]=a.split(": ");return[l,u.join(": ")]})),{allowRangeRequests:i,suggestedLength:r}=LR({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=DR(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=I4(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class iet{constructor(t,e,n){this._manager=t;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=I4(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const set=/^[a-z][a-z0-9\-+.]+:/i;function ret(s){if(set.test(s))return new URL(s);const t=ip.get("url");return new URL(t.pathToFileURL(s))}function yI(s,t,e){return s.protocol==="http:"?ip.get("http").request(s,{headers:t},e):ip.get("https").request(s,{headers:t},e)}class aet{constructor(t){this.source=t,this.url=ret(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=RR(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return js(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new uet(this):new oet(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new het(this,t,e):new cet(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class _I{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new l0("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class AI{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class oet extends _I{constructor(t){super(t);const e=Object.fromEntries(t.headers),n=i=>{if(i.statusCode===404){const u=new o0(`Missing PDF "${this._url}".`);this._storedError=u,this._headersCapability.reject(u);return}this._headersCapability.resolve(),this._setReadableStream(i);const r=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:l}=LR({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=DR(r)};this._request=yI(this._url,e,n),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class cet extends AI{constructor(t,e,n){super(t);const i=Object.fromEntries(t.headers);i.Range=`bytes=${e}-${n-1}`;const r=a=>{if(a.statusCode===404){const l=new o0(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(a)};this._request=yI(this._url,i,r),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class uet extends _I{constructor(t){super(t);const e=ip.get("fs");e.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new o0(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class het extends AI{constructor(t,e,n){super(t);const i=ip.get("fs");this._setReadableStream(i.createReadStream(this._url,{start:e,end:n-1}))}}const fet=1e5,Za=30,det=.8;var oB,Dd,no,FA,HA,eg,Lh,zA,GA,ng,Av,xv,Bd,bv,kA,Sv,ig,VA,QA,rs,sg,rg,XA,Od,Ev,lf,xI,bI,bw,Vo,XE,Sw,SI,EI;let xw=(rs=class{constructor({textContentSource:t,container:e,viewport:n}){Y(this,lf);Y(this,Dd,Promise.withResolvers());Y(this,no,null);Y(this,FA,!1);Y(this,HA,!!((oB=globalThis.FontInspector)!=null&&oB.enabled));Y(this,eg,null);Y(this,Lh,null);Y(this,zA,0);Y(this,GA,0);Y(this,ng,null);Y(this,Av,null);Y(this,xv,0);Y(this,Bd,0);Y(this,bv,Object.create(null));Y(this,kA,[]);Y(this,Sv,null);Y(this,ig,[]);Y(this,VA,new WeakMap);Y(this,QA,null);var u;if(t instanceof ReadableStream)G(this,Sv,t);else if(typeof t=="object")G(this,Sv,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');G(this,no,G(this,Av,e)),G(this,Bd,n.scale*(globalThis.devicePixelRatio||1)),G(this,xv,n.rotation),G(this,Lh,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:a,pageY:l}=n.rawDims;G(this,QA,[1,0,0,-1,-a,l+r]),G(this,GA,i),G(this,zA,r),k(u=rs,Vo,SI).call(u),Yg(e,n),x(this,Dd).promise.finally(()=>{x(rs,Ev).delete(this),G(this,Lh,null),G(this,bv,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ia.platform;return Fn(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{x(this,ng).read().then(({value:e,done:n})=>{if(n){x(this,Dd).resolve();return}x(this,eg)??G(this,eg,e.lang),Object.assign(x(this,bv),e.styles),k(this,lf,xI).call(this,e.items),t()},x(this,Dd).reject)};return G(this,ng,x(this,Sv).getReader()),x(rs,Ev).add(this),t(),x(this,Dd).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*(globalThis.devicePixelRatio||1),i=t.rotation;if(i!==x(this,xv)&&(e==null||e(),G(this,xv,i),Yg(x(this,Av),{rotation:i})),n!==x(this,Bd)){e==null||e(),G(this,Bd,n);const a={div:null,properties:null,ctx:k(r=rs,Vo,XE).call(r,x(this,eg))};for(const l of x(this,ig))a.properties=x(this,VA).get(l),a.div=l,k(this,lf,bw).call(this,a)}}cancel(){var e;const t=new l0("TextLayer task cancelled.");(e=x(this,ng))==null||e.cancel(t).catch(()=>{}),G(this,ng,null),x(this,Dd).reject(t)}get textDivs(){return x(this,ig)}get textContentItemsStr(){return x(this,kA)}static cleanup(){if(!(x(this,Ev).size>0)){x(this,sg).clear();for(const{canvas:t}of x(this,rg).values())t.remove();x(this,rg).clear()}}},Dd=new WeakMap,no=new WeakMap,FA=new WeakMap,HA=new WeakMap,eg=new WeakMap,Lh=new WeakMap,zA=new WeakMap,GA=new WeakMap,ng=new WeakMap,Av=new WeakMap,xv=new WeakMap,Bd=new WeakMap,bv=new WeakMap,kA=new WeakMap,Sv=new WeakMap,ig=new WeakMap,VA=new WeakMap,QA=new WeakMap,sg=new WeakMap,rg=new WeakMap,XA=new WeakMap,Od=new WeakMap,Ev=new WeakMap,lf=new WeakSet,xI=function(t){var i,r;if(x(this,FA))return;(r=x(this,Lh)).ctx??(r.ctx=k(i=rs,Vo,XE).call(i,x(this,eg)));const e=x(this,ig),n=x(this,kA);for(const a of t){if(e.length>fet){An("Ignoring additional textDivs for performance reasons."),G(this,FA,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=x(this,no);G(this,no,document.createElement("span")),x(this,no).classList.add("markedContent"),a.id!==null&&x(this,no).setAttribute("id",`${a.id}`),l.append(x(this,no))}else a.type==="endMarkedContent"&&G(this,no,x(this,no).parentNode);continue}n.push(a.str),k(this,lf,bI).call(this,a)}},bI=function(t){var C;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};x(this,ig).push(e);const i=Le.transform(x(this,QA),t.transform);let r=Math.atan2(i[1],i[0]);const a=x(this,bv)[t.fontName];a.vertical&&(r+=Math.PI/2);let l=x(this,HA)&&a.fontSubstitution||a.fontFamily;l=rs.fontFamilyMap.get(l)||l;const u=Math.hypot(i[2],i[3]),f=u*k(C=rs,Vo,EI).call(C,l,x(this,eg));let m,g;r===0?(m=i[4],g=i[5]-f):(m=i[4]+f*Math.sin(r),g=i[5]-f*Math.cos(r));const v="calc(var(--scale-factor)*",_=e.style;x(this,no)===x(this,Av)?(_.left=`${(100*m/x(this,GA)).toFixed(2)}%`,_.top=`${(100*g/x(this,zA)).toFixed(2)}%`):(_.left=`${v}${m.toFixed(2)}px)`,_.top=`${v}${g.toFixed(2)}px)`),_.fontSize=`${v}${(x(rs,Od)*u).toFixed(2)}px)`,_.fontFamily=l,n.fontSize=u,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,x(this,HA)&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const T=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);T!==S&&Math.max(T,S)/Math.min(T,S)>1.5&&(b=!0)}if(b&&(n.canvasWidth=a.vertical?t.height:t.width),x(this,VA).set(e,n),x(this,Lh).div=e,x(this,Lh).properties=n,k(this,lf,bw).call(this,x(this,Lh)),n.hasText&&x(this,no).append(e),n.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),x(this,no).append(T)}},bw=function(t){var l;const{div:e,properties:n,ctx:i}=t,{style:r}=e;let a="";if(x(rs,Od)>1&&(a=`scale(${1/x(rs,Od)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=r,{canvasWidth:f,fontSize:m}=n;k(l=rs,Vo,Sw).call(l,i,m*x(this,Bd),u);const{width:g}=i.measureText(e.textContent);g>0&&(a=`scaleX(${f*x(this,Bd)/g}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(r.transform=a)},Vo=new WeakSet,XE=function(t=null){let e=x(this,rg).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),x(this,rg).set(t,e),x(this,XA).set(e,{size:0,family:""})}return e},Sw=function(t,e,n){const i=x(this,XA).get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)},SI=function(){if(x(this,Od)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),G(this,Od,t.getBoundingClientRect().height),t.remove()},EI=function(t,e){const n=x(this,sg).get(t);if(n)return n;const i=k(this,Vo,XE).call(this,e);i.canvas.width=i.canvas.height=Za,k(this,Vo,Sw).call(this,i,Za,t);const r=i.measureText("");let a=r.fontBoundingBoxAscent,l=Math.abs(r.fontBoundingBoxDescent);if(a){const m=a/(a+l);return x(this,sg).set(t,m),i.canvas.width=i.canvas.height=0,m}i.strokeStyle="red",i.clearRect(0,0,Za,Za),i.strokeText("g",0,0);let u=i.getImageData(0,0,Za,Za).data;l=0;for(let m=u.length-1-3;m>=0;m-=4)if(u[m]>0){l=Math.ceil(m/4/Za);break}i.clearRect(0,0,Za,Za),i.strokeText("A",0,Za),u=i.getImageData(0,0,Za,Za).data,a=0;for(let m=0,g=u.length;m<g;m+=4)if(u[m]>0){a=Za-Math.floor(m/4/Za);break}i.canvas.width=i.canvas.height=0;const f=a?a/(a+l):det;return x(this,sg).set(t,f),f},Y(rs,Vo),Y(rs,sg,new Map),Y(rs,rg,new Map),Y(rs,XA,new WeakMap),Y(rs,Od,null),Y(rs,Ev,new Set),rs);class cA{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(r){var u;if(!r)return;let a=null;const l=r.name;if(l==="#text")a=r.value;else if(cA.shouldBuildText(l))(u=r==null?void 0:r.attributes)!=null&&u.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&e.push({str:a}),!!r.children)for(const f of r.children)i(f)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const pet=65536,met=100,get=5e3,vet=sa?wtt:Mtt,yet=sa?Rtt:aI,_et=sa?Ctt:Ttt,Aet=sa?Ltt:uI;function xet(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new Ew,{docId:e}=t,n=s.url?bet(s.url):null,i=s.data?Eet(s.data):null,r=s.httpHeaders||null,a=s.withCredentials===!0,l=s.password??null,u=s.range instanceof MI?s.range:null,f=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:pet;let m=s.worker instanceof $1?s.worker:null;const g=s.verbosity,v=typeof s.docBaseUrl=="string"&&!N4(s.docBaseUrl)?s.docBaseUrl:null,_=typeof s.cMapUrl=="string"?s.cMapUrl:null,b=s.cMapPacked!==!1,C=s.CMapReaderFactory||yet,T=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,S=s.StandardFontDataFactory||Aet,R=s.stopAtErrors!==!0,B=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,D=s.isEvalSupported!==!1,N=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!sa,I=typeof s.isChrome=="boolean"?s.isChrome:!Ia.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),F=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,z=typeof s.disableFontFace=="boolean"?s.disableFontFace:sa,U=s.fontExtraProperties===!0,P=s.enableXfa===!0,X=s.ownerDocument||globalThis.document,ot=s.disableRange===!0,it=s.disableStream===!0,ct=s.disableAutoFetch===!0,dt=s.pdfBug===!0,Q=s.CanvasFactory||vet,tt=s.FilterFactory||_et,et=s.enableHWA===!0,_t=u?u.length:s.length??NaN,K=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!sa&&!z,at=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:C===aI&&S===uI&&_&&T&&p_(_,document.baseURI)&&p_(T,document.baseURI);s.canvasFactory&&CD("`canvasFactory`-instance option, please use `CanvasFactory` instead."),s.filterFactory&&CD("`filterFactory`-instance option, please use `FilterFactory` instead.");const xt=null;ntt(g);const Et={canvasFactory:new Q({ownerDocument:X,enableHWA:et}),filterFactory:new tt({docId:e,ownerDocument:X}),cMapReaderFactory:at?null:new C({baseUrl:_,isCompressed:b}),standardFontDataFactory:at?null:new S({baseUrl:T})};if(!m){const Bt={verbosity:g,port:Wh.workerPort};m=Bt.port?$1.fromPort(Bt):new $1(Bt),t._worker=m}const lt={docId:e,apiVersion:"4.8.69",data:i,password:l,disableAutoFetch:ct,rangeChunkSize:f,length:_t,docBaseUrl:v,enableXfa:P,evaluatorOptions:{maxImageSize:B,disableFontFace:z,ignoreErrors:R,isEvalSupported:D,isOffscreenCanvasSupported:N,isChrome:I,canvasMaxAreaInBytes:F,fontExtraProperties:U,useSystemFonts:K,cMapUrl:at?_:null,standardFontDataUrl:at?T:null}},wt={disableFontFace:z,fontExtraProperties:U,ownerDocument:X,pdfBug:dt,styleElement:xt,loadingParams:{disableAutoFetch:ct,enableXfa:P}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Bt=m.messageHandler.sendWithPromise("GetDocRequest",lt,i?[i.buffer]:null);let Ut;if(u)Ut=new qtt(u,{disableRange:ot,disableStream:it});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Wt;sa?Wt=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&p_(n)?HD:aet:Wt=p_(n)?HD:eet,Ut=new Wt({url:n,length:_t,httpHeaders:r,withCredentials:a,rangeChunkSize:f,disableRange:ot,disableStream:it})}return Bt.then(Wt=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ve=new x_(e,Wt,m.port),ee=new wet(ve,t,Ut,wt,Et);t._transport=ee,ve.send("Ready",null)})}).catch(t._capability.reject),t}function bet(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(sa&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Eet(s){if(sa&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return B4(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function zD(s){return typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0}var C3;const w3=class w3{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Ea(w3,C3)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};C3=new WeakMap,Y(w3,C3,0);let Ew=w3,MI=class{constructor(t,e,n=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Oi("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class Met{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Fn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Nd,Dh,Ml,G1,jE;class Tet{constructor(t,e,n,i=!1){Y(this,Ml);Y(this,Nd,null);Y(this,Dh,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new TD:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new TI,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}={}){return new Gx({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Fn(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:i=yd.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:f=null,printAnnotationStorage:m=null,isEditing:g=!1}){var D,N;(D=this._stats)==null||D.time("Overall");const v=this._transport.getRenderingIntent(n,i,m,g),{renderingIntent:_,cacheKey:b}=v;G(this,Dh,!1),k(this,Ml,jE).call(this),l||(l=this._transport.getOptionalContentConfig(_));let C=this._intentStates.get(b);C||(C=Object.create(null),this._intentStates.set(b,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const T=!!(_&Fo.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(N=this._stats)==null||N.time("Page Request"),this._pumpOperatorList(v));const S=I=>{var F;C.renderTasks.delete(R),(this._maybeCleanupAfterRender||T)&&G(this,Dh,!0),k(this,Ml,G1).call(this,!T),I?(R.capability.reject(I),this._abortOperatorList({intentState:C,reason:I instanceof Error?I:new Error(I)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new Tw({callback:S,params:{canvasContext:t,viewport:e,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:f});(C.renderTasks||(C.renderTasks=new Set)).add(R);const B=R.task;return Promise.all([C.displayReadyCapability.promise,l]).then(([I,F])=>{var z;if(this.destroyed){S();return}if((z=this._stats)==null||z.time("Rendering"),!(F.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:I,optionalContentConfig:F}),R.operatorListChanged()}).catch(S),B}getOperatorList({intent:t="display",annotationMode:e=yd.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var f;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(u))}const a=this._transport.getRenderingIntent(t,e,n,i,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let u;return l.opListReadCapability||(u=Object.create(null),u.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(u),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>cA.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function r(){a.read().then(function({value:u,done:f}){if(f){n(l);return}l.lang??(l.lang=u.lang),Object.assign(l.styles,u.styles),l.items.push(...u.items),r()},i)}const a=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),G(this,Dh,!1),k(this,Ml,jE).call(this),Promise.all(t)}cleanup(t=!1){G(this,Dh,!0);const e=k(this,Ml,G1).call(this,!1);return t&&e&&this._stats&&(this._stats=new TD),e}_startRenderPage(t,e){var i,r;const n=this._intentStates.get(e);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&k(this,Ml,G1).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:r,transfer:a}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},a).getReader(),f=this._intentStates.get(e);f.streamReader=u;const m=()=>{u.read().then(({value:g,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),m())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();k(this,Ml,G1).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof SR){let i=met;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new l0(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Nd=new WeakMap,Dh=new WeakMap,Ml=new WeakSet,G1=function(t=!1){if(k(this,Ml,jE).call(this),!x(this,Dh)||this.destroyed)return!1;if(t)return G(this,Nd,setTimeout(()=>{G(this,Nd,null),k(this,Ml,G1).call(this,!1)},get)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),G(this,Dh,!1),!0},jE=function(){x(this,Nd)&&(clearTimeout(x(this,Nd)),G(this,Nd,null))};var Bh,R3;class Cet{constructor(){Y(this,Bh,new Map);Y(this,R3,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};x(this,R3).then(()=>{for(const[i]of x(this,Bh))i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){An("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}x(this,Bh).set(e,i)}removeEventListener(t,e){const n=x(this,Bh).get(e);n==null||n(),x(this,Bh).delete(e)}terminate(){for(const[,t]of x(this,Bh))t==null||t();x(this,Bh).clear()}}Bh=new WeakMap,R3=new WeakMap;var L3,ag,og,Mv,qE,Tv,YE;const Hi=class Hi{constructor({name:t=null,port:e=null,verbosity:n=itt()}={}){Y(this,Mv);var i;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=x(Hi,og))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(x(Hi,og)||G(Hi,og,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return sa?Promise.all([ip.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new x_("main","worker",t),this._messageHandler.on("ready",function(){}),k(this,Mv,qE).call(this)}_initialize(){if(x(Hi,ag)||x(Hi,Tv,YE)){this._setupFakeWorker();return}let{workerSrc:t}=Hi;try{Hi._isSameOrigin(window.location.href,t)||(t=Hi._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new x_("main","worker",e),i=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),n.on("test",l=>{if(r.abort(),this.destroyed||!l){i();return}this._messageHandler=n,this._port=e,this._webWorker=e,k(this,Mv,qE).call(this)}),n.on("ready",l=>{if(r.abort(),this.destroyed){i();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{L4("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){x(Hi,ag)||(An("Setting up fake worker."),G(Hi,ag,!0)),Hi._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new Cet;this._port=e;const n=`fake${Ea(Hi,L3)._++}`,i=new x_(n+"_worker",n,e);t.setup(i,e),this._messageHandler=new x_(n,n+"_worker",e),k(this,Mv,qE).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=x(Hi,og))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=x(this,og))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Hi(t)}static get workerSrc(){if(Wh.workerSrc)return Wh.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Fn(this,"_setupFakeWorkerGlobal",(async()=>x(this,Tv,YE)?x(this,Tv,YE):(await import(this.workerSrc)).WorkerMessageHandler)())}};L3=new WeakMap,ag=new WeakMap,og=new WeakMap,Mv=new WeakSet,qE=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Tv=new WeakSet,YE=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},Y(Hi,Tv),Y(Hi,L3,0),Y(Hi,ag,!1),Y(Hi,og),sa&&(G(Hi,ag,!0),Wh.workerSrc||(Wh.workerSrc="./pdf.worker.mjs")),Hi._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const i=new URL(e,n);return n.origin===i.origin},Hi._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let $1=Hi;var Oh,wu,Cv,wv,Ru,lg,b_;class wet{constructor(t,e,n,i,r){Y(this,lg);Y(this,Oh,new Map);Y(this,wu,new Map);Y(this,Cv,new Map);Y(this,wv,new Map);Y(this,Ru,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new TI,this.fontLoader=new Stt({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Fn(this,"annotationStorage",new CR)}getRenderingIntent(t,e=yd.ENABLE,n=null,i=!1,r=!1){let a=Fo.DISPLAY,l=fw;switch(t){case"any":a=Fo.ANY;break;case"display":break;case"print":a=Fo.PRINT;break;default:An(`getRenderingIntent - invalid intent: ${t}`)}const u=a&Fo.PRINT&&n instanceof iI?n:this.annotationStorage;switch(e){case yd.DISABLE:a+=Fo.ANNOTATIONS_DISABLE;break;case yd.ENABLE:break;case yd.ENABLE_FORMS:a+=Fo.ANNOTATIONS_FORMS;break;case yd.ENABLE_STORAGE:a+=Fo.ANNOTATIONS_STORAGE,l=u.serializable;break;default:An(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(a+=Fo.IS_EDITING),r&&(a+=Fo.OPLIST);const{ids:f,hash:m}=u.modifiedIds,g=[a,l.hash,m];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:l,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=x(this,Ru))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of x(this,wu).values())t.push(i._destroy());x(this,wu).clear(),x(this,Cv).clear(),x(this,wv).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i;this.commonObjs.clear(),this.fontLoader.clear(),x(this,Oh).clear(),this.filterFactory.destroy(),xw.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new l0("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{js(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){i.close();return}js(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:a}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=u=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:u.loaded,total:u.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:a}}),t.on("GetRangeReader",(n,i)=>{js(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:a,done:l}){if(l){i.close();return}js(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{r.cancel(a),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new Met(n,this))}),t.on("DocException",function(n){let i;switch(n.name){case"PasswordException":i=new Q8(n.message,n.code);break;case"InvalidPDFException":i=new RN(n.message);break;case"MissingPDFException":i=new o0(n.message);break;case"UnexpectedResponseException":i=new D4(n.message,n.status);break;case"UnknownErrorException":i=new X8(n.message,n.details);break;default:Oi("DocException - expected a valid Error.")}e._capability.reject(i)}),t.on("PasswordRequest",n=>{if(G(this,Ru,Promise.withResolvers()),e.onPassword){const i=r=>{r instanceof Error?x(this,Ru).reject(r):x(this,Ru).resolve({password:r})};try{e.onPassword(i,n.code)}catch(r){x(this,Ru).reject(r)}}else x(this,Ru).reject(new Q8(n.message,n.code));return x(this,Ru).promise}),t.on("DataLoaded",n=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;x(this,wu).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,r])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":const{disableFontFace:l,fontExtraProperties:u,pdfBug:f}=this._params;if("error"in r){const _=r.error;An(`Error during font loading: ${_}`),this.commonObjs.resolve(n,_);break}const m=f&&((a=globalThis.FontInspector)!=null&&a.enabled)?(_,b)=>globalThis.FontInspector.fontAdded(_,b):null,g=new Ett(r,{disableFontFace:l,inspectFont:m});this.fontLoader.bind(g).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u&&g.data&&(g.data=null),this.commonObjs.resolve(n,g)});break;case"CopyLocalImage":const{imageRef:v}=r;js(v,"The imageRef must be defined.");for(const _ of x(this,wu).values())for(const[,b]of _.objs)if((b==null?void 0:b.ref)===v)return b.dataLen?(this.commonObjs.resolve(n,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,r,a])=>{var u;if(this.destroyed)return;const l=x(this,wu).get(i);if(!l.objs.has(n)){if(l._intentStates.size===0){(u=a==null?void 0:a.bitmap)==null||u.close();return}switch(r){case"Image":l.objs.resolve(n,a),(a==null?void 0:a.dataLen)>Z$&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&An("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=x(this,Cv).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&x(this,wv).set(r.refStr,t);const a=new Tet(e,r,this,this._params.pdfBug);return x(this,wu).set(e,a),a});return x(this,Cv).set(e,i),i}getPageIndex(t){return zD(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return k(this,lg,b_).call(this,"GetFieldObjects")}hasJSActions(){return k(this,lg,b_).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return k(this,lg,b_).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return k(this,lg,b_).call(this,"GetOptionalContentConfig").then(e=>new jtt(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=x(this,Oh).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>{var r,a;return{info:i[0],metadata:i[1]?new Qtt(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return x(this,Oh).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of x(this,wu).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),x(this,Oh).clear(),this.filterFactory.destroy(!0),xw.cleanup()}}cachedPageNumber(t){if(!zD(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return x(this,wv).get(e)??null}}Oh=new WeakMap,wu=new WeakMap,Cv=new WeakMap,wv=new WeakMap,Ru=new WeakMap,lg=new WeakSet,b_=function(t,e=null){const n=x(this,Oh).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return x(this,Oh).set(t,i),i};const bE=Symbol("INITIAL_DATA");var gc,jA,Mw;class TI{constructor(){Y(this,jA);Y(this,gc,Object.create(null))}get(t,e=null){if(e){const i=k(this,jA,Mw).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=x(this,gc)[t];if(!n||n.data===bE)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=x(this,gc)[t];return!!e&&e.data!==bE}resolve(t,e=null){const n=k(this,jA,Mw).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in x(this,gc)){const{data:n}=x(this,gc)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}G(this,gc,Object.create(null))}*[Symbol.iterator](){for(const t in x(this,gc)){const{data:e}=x(this,gc)[t];e!==bE&&(yield[t,e])}}}gc=new WeakMap,jA=new WeakSet,Mw=function(t){var e;return(e=x(this,gc))[t]||(e[t]={...Promise.withResolvers(),data:bE})};var Id;class Ret{constructor(t){Y(this,Id,null);G(this,Id,t),this.onContinue=null}get promise(){return x(this,Id).capability.promise}cancel(t=0){x(this,Id).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=x(this,Id).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=x(this,Id);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Id=new WeakMap;var Ud,cg;const Cm=class Cm{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:r,operatorList:a,pageIndex:l,canvasFactory:u,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:g=!1,pageColors:v=null}){Y(this,Ud,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=u,this.filterFactory=f,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ret(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,u;if(this.cancelled)return;if(this._canvas){if(x(Cm,cg).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");x(Cm,cg).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:r,background:a}=this.params;this.gfx=new Z1(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),x(this,Ud)&&(window.cancelAnimationFrame(x(this,Ud)),G(this,Ud,null)),x(Cm,cg).delete(this._canvas),this.callback(t||new SR(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?G(this,Ud,window.requestAnimationFrame(()=>{G(this,Ud,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),x(Cm,cg).delete(this._canvas),this.callback())))}};Ud=new WeakMap,cg=new WeakMap,Y(Cm,cg,new WeakSet);let Tw=Cm;const Let="4.8.69",Det="3634dab10";function GD(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function l_(s){return Math.max(0,Math.min(255,255*s))}class kD{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=l_(t),[t,t,t]}static G_HTML([t]){const e=GD(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(l_)}static RGB_HTML(t){return`#${t.map(GD).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[l_(1-Math.min(1,t+i)),l_(1-Math.min(1,n+i)),l_(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,r=1-e,a=1-n,l=Math.min(i,r,a);return["CMYK",i,r,a,l]}}class Bet{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Oi("Abstract method `_createSVG` called.")}}class BR extends Bet{_createSVG(t){return document.createElementNS(_h,t)}}class CI{static setupStorage(t,e,n,i,r){const a=i.getValue(e,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),r==="print")break;t.addEventListener("input",l=>{i.setValue(e,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?t.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{i.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),r==="print")break;t.addEventListener("input",l=>{i.setValue(e,{value:l.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const l of n.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const u=l.target.options,f=u.selectedIndex===-1?"":u[u.selectedIndex].value;i.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:r}){const{attributes:a}=e,l=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[u,f]of Object.entries(a))if(f!=null)switch(u){case"class":f.length&&t.setAttribute(u,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!l||u!=="href"&&u!=="newWindow")&&t.setAttribute(u,f)}l&&r.addLinkAttributes(t,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(t,a.dataId,e,n)}static render(t){var g,v;const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,r=t.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:r,linkService:n});const l=r!=="richText",u=t.div;if(u.append(a),t.viewport){const _=`matrix(${t.viewport.transform.join(",")})`;u.style.transform=_}l&&u.setAttribute("class","xfaLayer xfaFont");const f=[];if(i.children.length===0){if(i.value){const _=document.createTextNode(i.value);a.append(_),l&&cA.shouldBuildText(i.name)&&f.push(_)}return{textDivs:f}}const m=[[i,-1,a]];for(;m.length>0;){const[_,b,C]=m.at(-1);if(b+1===_.children.length){m.pop();continue}const T=_.children[++m.at(-1)[1]];if(T===null)continue;const{name:S}=T;if(S==="#text"){const B=document.createTextNode(T.value);f.push(B),C.append(B);continue}const R=(g=T==null?void 0:T.attributes)!=null&&g.xmlns?document.createElementNS(T.attributes.xmlns,S):document.createElement(S);if(C.append(R),T.attributes&&this.setAttributes({html:R,element:T,storage:e,intent:r,linkService:n}),((v=T.children)==null?void 0:v.length)>0)m.push([T,-1,R]);else if(T.value){const B=document.createTextNode(T.value);l&&cA.shouldBuildText(S)&&f.push(B),R.append(B)}}for(const _ of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Vx=1e3,Oet=9,Kg=new WeakSet;function ef(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class Net{static create(t){switch(t.data.annotationType){case ks.LINK:return new wI(t);case ks.TEXT:return new Iet(t);case ks.WIDGET:switch(t.data.fieldType){case"Tx":return new Uet(t);case"Btn":return t.data.radioButton?new DI(t):t.data.checkBox?new Fet(t):new Het(t);case"Ch":return new zet(t);case"Sig":return new Pet(t)}return new c0(t);case ks.POPUP:return new ww(t);case ks.FREETEXT:return new UI(t);case ks.LINE:return new ket(t);case ks.SQUARE:return new Vet(t);case ks.CIRCLE:return new Qet(t);case ks.POLYLINE:return new PI(t);case ks.CARET:return new jet(t);case ks.INK:return new OR(t);case ks.POLYGON:return new Xet(t);case ks.HIGHLIGHT:return new FI(t);case ks.UNDERLINE:return new qet(t);case ks.SQUIGGLY:return new Yet(t);case ks.STRIKEOUT:return new Wet(t);case ks.STAMP:return new HI(t);case ks.FILEATTACHMENT:return new Ket(t);default:return new vs(t)}}}var ug,Rv,Lv,qA,Cw;const HR=class HR{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){Y(this,qA);Y(this,ug,null);Y(this,Rv,!1);Y(this,Lv,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return HR._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;x(this,ug)||G(this,ug,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&k(this,qA,Cw).call(this,e),(n=x(this,Lv))==null||n.popup.updateEdited(t)}resetEdited(){var t;x(this,ug)&&(k(this,qA,Cw).call(this,x(this,ug).rect),(t=x(this,Lv))==null||t.popup.resetEdited(),G(this,ug,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof c0||(r.tabIndex=Vx);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof ww){const{rotation:C}=e;return!e.hasOwnCanvas&&C!==0&&this.setRotation(C,r),r}const{width:l,height:u}=ef(e.rect);if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const C=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(C>0||T>0){const R=`calc(${C}px * var(--scale-factor)) / calc(${T}px * var(--scale-factor))`;a.borderRadius=R}else if(this instanceof DI){const R=`calc(${l}px * var(--scale-factor)) / calc(${u}px * var(--scale-factor))`;a.borderRadius=R}switch(e.borderStyle.style){case a_.SOLID:a.borderStyle="solid";break;case a_.DASHED:a.borderStyle="dashed";break;case a_.BEVELED:An("Unimplemented border style: beveled");break;case a_.INSET:An("Unimplemented border style: inset");break;case a_.UNDERLINE:a.borderBottomStyle="solid";break}const S=e.borderColor||null;S?(G(this,Rv,!0),a.borderColor=Le.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):a.borderWidth=0}const f=Le.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:g,pageX:v,pageY:_}=i.rawDims;a.left=`${100*(f[0]-v)/m}%`,a.top=`${100*(f[1]-_)/g}%`;const{rotation:b}=e;return e.hasOwnCanvas||b===0?(a.width=`${100*l/m}%`,a.height=`${100*u/g}%`):this.setRotation(b,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:a}=ef(this.data.rect);let l,u;t%180===0?(l=100*r/n,u=100*a/i):(l=100*a/n,u=100*r/i),e.style.width=`${l}%`,e.style.height=`${u}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const r=i.detail[e],a=r[0],l=r.slice(1);i.target.style[n]=kD[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:kD[`${a}_rgb`](l)})};return Fn(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||n[i];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,r]of Object.entries(e)){const a=n[i];if(a){const l={detail:{[i]:r},target:t};a(l),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,r]=this.data.rect.map(C=>Math.fround(C));if(t.length===8){const[C,T,S,R]=t.subarray(2,6);if(i===C&&r===T&&e===S&&n===R)return}const{style:a}=this.container;let l;if(x(this,Rv)){const{borderColor:C,borderWidth:T}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const u=i-e,f=r-n,{svgFactory:m}=this,g=m.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0);const v=m.createElement("defs");g.append(v);const _=m.createElement("clipPath"),b=`clippath_${this.data.id}`;_.setAttribute("id",b),_.setAttribute("clipPathUnits","objectBoundingBox"),v.append(_);for(let C=2,T=t.length;C<T;C+=8){const S=t[C],R=t[C+1],B=t[C+2],D=t[C+3],N=m.createElement("rect"),I=(B-e)/u,F=(r-R)/f,z=(S-B)/u,U=(R-D)/f;N.setAttribute("x",I),N.setAttribute("y",F),N.setAttribute("width",z),N.setAttribute("height",U),_.append(N),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${F}" width="${z}" height="${U}"/>`)}x(this,Rv)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(g),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{data:t}=this,e=G(this,Lv,new ww({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Oi("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:a,exportValues:l}of i){if(r===-1||a===e)continue;const u=typeof l=="string"?l:null,f=document.querySelector(`[data-element-id="${a}"]`);if(f&&!Kg.has(f)){An(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:u,domElement:f})}return n}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,a=i.getAttribute("data-element-id");a!==e&&Kg.has(i)&&n.push({id:a,exportValue:r,domElement:i})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};ug=new WeakMap,Rv=new WeakMap,Lv=new WeakMap,qA=new WeakSet,Cw=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:l,pageY:u}}}}=this;n==null||n.splice(0,4,...t);const{width:f,height:m}=ef(t);e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(a-t[3]+u)/a}%`,i===0?(e.width=`${100*f/r}%`,e.height=`${100*m/a}%`):this.setRotation(i)};let vs=HR;var Ho,xm,RI,LI;class wI extends vs{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});Y(this,Ho);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(k(this,Ho,RI).call(this,i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(k(this,Ho,LI).call(this,i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&k(this,Ho,xm).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),k(this,Ho,xm).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const a=i.get(r);a&&(e[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),k(this,Ho,xm).call(this)}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),k(this,Ho,xm).call(this),!this._fieldObjects){An('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var g;i==null||i();const{fields:r,refs:a,include:l}=n,u=[];if(r.length!==0||a.length!==0){const v=new Set(a);for(const _ of r){const b=this._fieldObjects[_]||[];for(const{id:C}of b)v.add(C)}for(const _ of Object.values(this._fieldObjects))for(const b of _)v.has(b.id)===l&&u.push(b)}else for(const v of Object.values(this._fieldObjects))u.push(...v);const f=this.annotationStorage,m=[];for(const v of u){const{id:_}=v;switch(m.push(_),v.type){case"text":{const C=v.defaultValue||"";f.setValue(_,{value:C});break}case"checkbox":case"radiobutton":{const C=v.defaultValue===v.exportValues;f.setValue(_,{value:C});break}case"combobox":case"listbox":{const C=v.defaultValue||"";f.setValue(_,{value:C});break}default:continue}const b=document.querySelector(`[data-element-id="${_}"]`);if(b){if(!Kg.has(b)){An(`_bindResetFormAction - element not allowed: ${_}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Ho=new WeakSet,xm=function(){this.container.setAttribute("data-internal-link","")},RI=function(e,n,i=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,i),!1},k(this,Ho,xm).call(this)},LI=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),k(this,Ho,xm).call(this)};class Iet extends vs{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class c0 extends vs{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ia.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,r){n.includes("mouse")?t.addEventListener(n,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(n,a=>{var l;if(n==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a)}}))})}_setEventListeners(t,e,n,i){var r,a,l;for(const[u,f]of n)(f==="Action"||(r=this.data.actions)!=null&&r[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,u,f,i),f==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Le.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Oet,r=t.style;let a;const l=2,u=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-l),m=Math.round(f/(WC*i))||1,g=f/m;a=Math.min(i,u(g/WC))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(i,u(f/WC))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=Le.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Uet extends c0{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=n),r.setValue(a.id,{[i]:n})}render(){var i,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let l=a.value||"";const u=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;u&&l.length>u&&(l=l.slice(0,u));let f=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const m={userValue:l,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",f??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Kg.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Vx,this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",v=>{t.setValue(e,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",v=>{const _=this.data.defaultFieldValue??"";n.value=m.userValue=_,m.formattedValue=null});let g=v=>{const{formattedValue:_}=m;_!=null&&(v.target.value=_),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",_=>{var C;if(m.focused)return;const{target:b}=_;m.userValue&&(b.value=m.userValue),m.lastCommittedValue=b.value,m.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const b={value(C){m.userValue=C.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),C.target.value=m.userValue},formattedValue(C){const{formattedValue:T}=C.detail;m.formattedValue=T,T!=null&&C.target!==document.activeElement&&(C.target.value=T),t.setValue(e,{formattedValue:T})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var B;const{charLimit:T}=C.detail,{target:S}=C;if(T===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",T);let R=m.userValue;!R||R.length<=T||(R=R.slice(0,T),S.value=m.userValue=R,t.setValue(e,{value:R}),(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(b,_)}),n.addEventListener("keydown",_=>{var T;m.commitKey=1;let b=-1;if(_.key==="Escape"?b=0:_.key==="Enter"&&!this.data.multiLine?b=2:_.key==="Tab"&&(m.commitKey=3),b===-1)return;const{value:C}=_.target;m.lastCommittedValue!==C&&(m.lastCommittedValue=C,m.userValue=C,(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:b,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const v=g;g=null,n.addEventListener("blur",_=>{var C,T;if(!m.focused||!_.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(m.focused=!1);const{value:b}=_.target;m.userValue=b,m.lastCommittedValue!==b&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:m.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}})),v(_)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",_=>{var N;m.lastCommittedValue=null;const{data:b,target:C}=_,{value:T,selectionStart:S,selectionEnd:R}=C;let B=S,D=R;switch(_.inputType){case"deleteWordBackward":{const I=T.substring(0,S).match(/\w*[^\w]*$/);I&&(B-=I[0].length);break}case"deleteWordForward":{const I=T.substring(S).match(/^[^\w]*\w*/);I&&(D+=I[0].length);break}case"deleteContentBackward":S===R&&(B-=1);break;case"deleteContentForward":S===R&&(D+=1);break}_.preventDefault(),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:b||"",willCommit:!1,selStart:B,selEnd:D}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing=`calc(${_}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Pet extends c0{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Fet extends c0{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Kg.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Vx,r.addEventListener("change",a=>{const{name:l,checked:u}=a.target;for(const f of this._getElementsByName(l,n)){const m=u&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(n,{value:u})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue||"Off";a.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const l={value(u){u.target.checked=u.detail.value!=="Off",t.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class DI extends c0{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const a of this._getElementsByName(e.fieldName,n))t.setValue(a.id,{value:!1});const r=document.createElement("input");if(Kg.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=Vx,r.addEventListener("change",a=>{const{name:l,checked:u}=a.target;for(const f of this._getElementsByName(l,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:u})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue;a.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const u={value:f=>{const m=a===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const v=m&&g.id===n;g.domElement&&(g.domElement.checked=v),t.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Het extends wI{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class zet extends c0{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Kg.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=Vx;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",m=>{const g=this.data.defaultFieldValue;for(const v of i.options)v.selected=v.value===g});for(const m of this.data.options){const g=document.createElement("option");g.textContent=m.displayValue,g.value=m.exportValue,n.value.includes(m.exportValue)&&(g.setAttribute("selected",!0),r=!1),i.append(g)}let a=null;if(r){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),i.prepend(m),a=()=>{m.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const l=m=>{const g=m?"value":"textContent",{options:v,multiple:_}=i;return _?Array.prototype.filter.call(v,b=>b.selected).map(b=>b[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let u=l(!1);const f=m=>{const g=m.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",m=>{const g={value(v){a==null||a();const _=v.detail.value,b=new Set(Array.isArray(_)?_:[_]);for(const C of i.options)C.selected=b.has(C.value);t.setValue(e,{value:l(!0)}),u=l(!1)},multipleSelection(v){i.multiple=!0},remove(v){const _=i.options,b=v.detail.remove;_[b].selected=!1,i.remove(b),_.length>0&&Array.prototype.findIndex.call(_,T=>T.selected)===-1&&(_[0].selected=!0),t.setValue(e,{value:l(!0),items:f(v)}),u=l(!1)},clear(v){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),u=l(!1)},insert(v){const{index:_,displayValue:b,exportValue:C}=v.detail.insert,T=i.children[_],S=document.createElement("option");S.textContent=b,S.value=C,T?T.before(S):i.append(S),t.setValue(e,{value:l(!0),items:f(v)}),u=l(!1)},items(v){const{items:_}=v.detail;for(;i.length!==0;)i.remove(0);for(const b of _){const{displayValue:C,exportValue:T}=b,S=document.createElement("option");S.textContent=C,S.value=T,i.append(S)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:l(!0),items:f(v)}),u=l(!1)},indices(v){const _=new Set(v.detail.indices);for(const b of v.target.options)b.selected=_.has(b.index);t.setValue(e,{value:l(!0)}),u=l(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,m)}),i.addEventListener("input",m=>{var _;const g=l(!0),v=l(!1);t.setValue(e,{value:g}),m.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:u,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):i.addEventListener("input",function(m){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class ww extends vs{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:vs._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Get({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${bR}${n}`).join(",")),this.container}}var Dv,D3,B3,Bv,hg,ss,Nh,Ov,YA,WA,Nv,Ih,vc,Uh,KA,Ph,JA,fg,dg,Ai,WE,Rw,BI,OI,NI,II,KE,JE,Lw;class Get{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:r,contentsObj:a,richText:l,parent:u,rect:f,parentRect:m,open:g}){Y(this,Ai);Y(this,Dv,k(this,Ai,NI).bind(this));Y(this,D3,k(this,Ai,Lw).bind(this));Y(this,B3,k(this,Ai,JE).bind(this));Y(this,Bv,k(this,Ai,KE).bind(this));Y(this,hg,null);Y(this,ss,null);Y(this,Nh,null);Y(this,Ov,null);Y(this,YA,null);Y(this,WA,null);Y(this,Nv,null);Y(this,Ih,!1);Y(this,vc,null);Y(this,Uh,null);Y(this,KA,null);Y(this,Ph,null);Y(this,JA,null);Y(this,fg,null);Y(this,dg,!1);var v;G(this,ss,t),G(this,JA,i),G(this,Nh,a),G(this,Ph,l),G(this,WA,u),G(this,hg,e),G(this,KA,f),G(this,Nv,m),G(this,YA,n),G(this,Ov,MR.toDateObject(r)),this.trigger=n.flatMap(_=>_.getElementsToTriggerPopup());for(const _ of this.trigger)_.addEventListener("click",x(this,Bv)),_.addEventListener("mouseenter",x(this,B3)),_.addEventListener("mouseleave",x(this,D3)),_.classList.add("popupTriggerArea");for(const _ of n)(v=_.container)==null||v.addEventListener("keydown",x(this,Dv));x(this,ss).hidden=!0,g&&k(this,Ai,KE).call(this)}render(){if(x(this,vc))return;const t=G(this,vc,document.createElement("div"));if(t.className="popup",x(this,hg)){const r=t.style.outlineColor=Le.makeHexColor(...x(this,hg));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=Le.makeHexColor(...x(this,hg).map(l=>Math.floor(.7*(255-l)+l)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=x(this,JA),t.append(e),x(this,Ov)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:x(this,Ov).valueOf()})),e.append(r)}const i=x(this,Ai,WE);if(i)CI.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(x(this,Nh));t.append(r)}x(this,ss).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,a=i.length;r<a;++r){const l=i[r];n.append(document.createTextNode(l)),r<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;x(this,fg)||G(this,fg,{contentsObj:x(this,Nh),richText:x(this,Ph)}),t&&G(this,Uh,null),e&&(G(this,Ph,k(this,Ai,OI).call(this,e)),G(this,Nh,null)),(n=x(this,vc))==null||n.remove(),G(this,vc,null)}resetEdited(){var t;x(this,fg)&&({contentsObj:Ea(this,Nh)._,richText:Ea(this,Ph)._}=x(this,fg),G(this,fg,null),(t=x(this,vc))==null||t.remove(),G(this,vc,null),G(this,Uh,null))}forceHide(){G(this,dg,this.isVisible),x(this,dg)&&(x(this,ss).hidden=!0)}maybeShow(){x(this,dg)&&(x(this,vc)||k(this,Ai,JE).call(this),G(this,dg,!1),x(this,ss).hidden=!1)}get isVisible(){return x(this,ss).hidden===!1}}Dv=new WeakMap,D3=new WeakMap,B3=new WeakMap,Bv=new WeakMap,hg=new WeakMap,ss=new WeakMap,Nh=new WeakMap,Ov=new WeakMap,YA=new WeakMap,WA=new WeakMap,Nv=new WeakMap,Ih=new WeakMap,vc=new WeakMap,Uh=new WeakMap,KA=new WeakMap,Ph=new WeakMap,JA=new WeakMap,fg=new WeakMap,dg=new WeakMap,Ai=new WeakSet,WE=function(){const t=x(this,Ph),e=x(this,Nh);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&x(this,Ph).html||null},Rw=function(){var t,e,n;return((n=(e=(t=x(this,Ai,WE))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},BI=function(){var t,e,n;return((n=(e=(t=x(this,Ai,WE))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},OI=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:x(this,Ai,BI),fontSize:x(this,Ai,Rw)?`calc(${x(this,Ai,Rw)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return n},NI=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&x(this,Ih))&&k(this,Ai,KE).call(this)},II=function(){if(x(this,Uh)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:r}}}=x(this,WA);let a=!!x(this,Nv),l=a?x(this,Nv):x(this,KA);for(const b of x(this,YA))if(!l||Le.intersect(b.data.rect,l)!==null){l=b.data.rect,a=!0;break}const u=Le.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),m=a?l[2]-l[0]+5:0,g=u[0]+m,v=u[1];G(this,Uh,[100*(g-i)/e,100*(v-r)/n]);const{style:_}=x(this,ss);_.left=`${x(this,Uh)[0]}%`,_.top=`${x(this,Uh)[1]}%`},KE=function(){G(this,Ih,!x(this,Ih)),x(this,Ih)?(k(this,Ai,JE).call(this),x(this,ss).addEventListener("click",x(this,Bv)),x(this,ss).addEventListener("keydown",x(this,Dv))):(k(this,Ai,Lw).call(this),x(this,ss).removeEventListener("click",x(this,Bv)),x(this,ss).removeEventListener("keydown",x(this,Dv)))},JE=function(){x(this,vc)||this.render(),this.isVisible?x(this,Ih)&&x(this,ss).classList.add("focused"):(k(this,Ai,II).call(this),x(this,ss).hidden=!1,x(this,ss).style.zIndex=parseInt(x(this,ss).style.zIndex)+1e3)},Lw=function(){x(this,ss).classList.remove("focused"),!(x(this,Ih)||!this.isVisible)&&(x(this,ss).hidden=!0,x(this,ss).style.zIndex=parseInt(x(this,ss).style.zIndex)-1e3)};class UI extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=dn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ZA;class ket extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});Y(this,ZA,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:i}=ef(e.rect),r=this.svgFactory.create(n,i,!0),a=G(this,ZA,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,ZA)}addHighlightArea(){this.container.classList.add("highlightArea")}}ZA=new WeakMap;var $A;class Vet extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});Y(this,$A,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:i}=ef(e.rect),r=this.svgFactory.create(n,i,!0),a=e.borderStyle.width,l=G(this,$A,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",n-a),l.setAttribute("height",i-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,$A)}addHighlightArea(){this.container.classList.add("highlightArea")}}$A=new WeakMap;var tx;class Qet extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});Y(this,tx,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:i}=ef(e.rect),r=this.svgFactory.create(n,i,!0),a=e.borderStyle.width,l=G(this,tx,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",i/2),l.setAttribute("rx",n/2-a/2),l.setAttribute("ry",i/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,tx)}addHighlightArea(){this.container.classList.add("highlightArea")}}tx=new WeakMap;var ex;class PI extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});Y(this,ex,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:r}}=this;if(!n)return this.container;const{width:a,height:l}=ef(e),u=this.svgFactory.create(a,l,!0);let f=[];for(let g=0,v=n.length;g<v;g+=2){const _=n[g]-e[0],b=e[3]-n[g+1];f.push(`${_},${b}`)}f=f.join(" ");const m=G(this,ex,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",f),m.setAttribute("stroke-width",i.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),u.append(m),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,ex)}addHighlightArea(){this.container.classList.add("highlightArea")}}ex=new WeakMap;class Xet extends PI{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class jet extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var nx;class OR extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});Y(this,nx,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?dn.HIGHLIGHT:dn.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:n,borderStyle:i,popupRef:r}}=this,{width:a,height:l}=ef(e),u=this.svgFactory.create(a,l,!0);for(const f of n){let m=[];for(let v=0,_=f.length;v<_;v+=2){const b=f[v]-e[0],C=e[3]-f[v+1];m.push(`${b},${C}`)}m=m.join(" ");const g=this.svgFactory.createElement(this.svgElementName);x(this,nx).push(g),g.setAttribute("points",m),g.setAttribute("stroke-width",i.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),u.append(g)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return x(this,nx)}addHighlightArea(){this.container.classList.add("highlightArea")}}nx=new WeakMap;class FI extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=dn.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class qet extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Yet extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Wet extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class HI extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=dn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ix,sx,Dw;class Ket extends vs{constructor(e){var i;super(e,{isRenderable:!0});Y(this,sx);Y(this,ix,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",k(this,sx,Dw).bind(this)),G(this,ix,i);const{isMac:r}=Ia.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&k(this,sx,Dw).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return x(this,ix)}addHighlightArea(){this.container.classList.add("highlightArea")}}ix=new WeakMap,sx=new WeakSet,Dw=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var rx,pg,mg,ax,Zg,zI,Bw,lB;let Jet=(lB=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:r,viewport:a,structTreeLayer:l}){Y(this,Zg);Y(this,rx,null);Y(this,pg,null);Y(this,mg,new Map);Y(this,ax,null);this.div=t,G(this,rx,e),G(this,pg,n),G(this,ax,l||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return x(this,mg).size>0}async render(t){var a;const{annotations:e}=t,n=this.div;Yg(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new BR,annotationStorage:t.annotationStorage||new CR,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const u=l.annotationType===ks.POPUP;if(u){const g=i.get(l.id);if(!g)continue;r.elements=g}else{const{width:g,height:v}=ef(l.rect);if(g<=0||v<=0)continue}r.data=l;const f=Net.create(r);if(!f.isRenderable)continue;if(!u&&l.popupRef){const g=i.get(l.popupRef);g?g.push(f):i.set(l.popupRef,[f])}const m=f.render();l.hidden&&(m.style.visibility="hidden"),await k(this,Zg,zI).call(this,m,l.id),f._isEditable&&(x(this,mg).set(f.data.id,f),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(f))}k(this,Zg,Bw).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Yg(e,{rotation:t.rotation}),k(this,Zg,Bw).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(x(this,mg).values())}getEditableAnnotation(t){return x(this,mg).get(t)}},rx=new WeakMap,pg=new WeakMap,mg=new WeakMap,ax=new WeakMap,Zg=new WeakSet,zI=async function(t,e){var a,l;const n=t.firstChild||t,i=n.id=`${bR}${e}`,r=await((a=x(this,ax))==null?void 0:a.getAriaAttributes(i));if(r)for(const[u,f]of r)n.setAttribute(u,f);this.div.append(t),(l=x(this,rx))==null||l.moveElementInDOM(this.div,t,n,!1)},Bw=function(){if(!x(this,pg))return;const t=this.div;for(const[e,n]of x(this,pg)){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):i.append(n)}x(this,pg).clear()},lB);const SE=/\r\n?|\n/g;var yc,Bo,ox,gg,Oo,Ls,GI,kI,VI,ZE,sf,$E,tM,QI,Nw,XI;const Ci=class Ci extends di{constructor(e){super({...e,name:"freeTextEditor"});Y(this,Ls);Y(this,yc);Y(this,Bo,"");Y(this,ox,`${this.id}-editor`);Y(this,gg,null);Y(this,Oo);G(this,yc,e.color||Ci._defaultColor||di._defaultLineColor),G(this,Oo,e.fontSize||Ci._defaultFontSize)}static get _keyboardManager(){const e=Ci.prototype,n=a=>a.isEmpty(),i=Wg.TRANSLATE_SMALL,r=Wg.TRANSLATE_BIG;return Fn(this,"_keyboardManager",new kx([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){di.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Ze.FREETEXT_SIZE:Ci._defaultFontSize=n;break;case Ze.FREETEXT_COLOR:Ci._defaultColor=n;break}}updateParams(e,n){switch(e){case Ze.FREETEXT_SIZE:k(this,Ls,GI).call(this,n);break;case Ze.FREETEXT_COLOR:k(this,Ls,kI).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ze.FREETEXT_SIZE,Ci._defaultFontSize],[Ze.FREETEXT_COLOR,Ci._defaultColor||di._defaultLineColor]]}get propertiesToUpdate(){return[[Ze.FREETEXT_SIZE,x(this,Oo)],[Ze.FREETEXT_COLOR,x(this,yc)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ci._internalPadding*e,-(Ci._internalPadding+x(this,Oo))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(dn.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),G(this,gg,new AbortController);const e=this._uiManager.combinedSignal(x(this,gg));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",x(this,ox)),this._isDraggable=!0,(e=x(this,gg))==null||e.abort(),G(this,gg,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=x(this,Bo),n=G(this,Bo,k(this,Ls,VI).call(this).trimEnd());if(e===n)return;const i=r=>{if(G(this,Bo,r),!r){this.remove();return}k(this,Ls,tM).call(this),this._uiManager.rebuild(this),k(this,Ls,ZE).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),k(this,Ls,ZE).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ci._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",x(this,ox)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${x(this,Oo)}px * var(--scale-factor))`,i.color=x(this,yc),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),d3(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,f]=this.getInitialTranslation();[u,f]=this.pageTranslationToScreen(u,f);const[m,g]=this.pageDimensions,[v,_]=this.pageTranslation;let b,C;switch(this.rotation){case 0:b=e+(l[0]-v)/m,C=n+this.height-(l[1]-_)/g;break;case 90:b=e+(l[0]-v)/m,C=n-(l[1]-_)/g,[u,f]=[f,-u];break;case 180:b=e-this.width+(l[0]-v)/m,C=n-(l[1]-_)/g,[u,f]=[-u,-f];break;case 270:b=e+(l[0]-v-this.height*g)/m,C=n+(l[1]-_-this.width*m)/g,[u,f]=[-f,u];break}this.setAt(b*r,C*a,u,f)}else this.setAt(e*r,n*a,this.width*r,this.height*a);k(this,Ls,tM).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var b,C,T;const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=k(b=Ci,sf,Nw).call(b,n.getData("text")||"").replaceAll(SE,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:u,startOffset:f}=l,m=[],g=[];if(u.nodeType===Node.TEXT_NODE){const S=u.parentElement;if(g.push(u.nodeValue.slice(f).replaceAll(SE,"")),S!==this.editorDiv){let R=m;for(const B of this.editorDiv.childNodes){if(B===S){R=g;continue}R.push(k(C=Ci,sf,$E).call(C,B))}}m.push(u.nodeValue.slice(0,f).replaceAll(SE,""))}else if(u===this.editorDiv){let S=m,R=0;for(const B of this.editorDiv.childNodes)R++===f&&(S=g),S.push(k(T=Ci,sf,$E).call(T,B))}G(this,Bo,`${m.join(`
`)}${r}${g.join(`
`)}`),k(this,Ls,tM).call(this);const v=new Range;let _=m.reduce((S,R)=>S+R.length,0);for(const{firstChild:S}of this.editorDiv.childNodes)if(S.nodeType===Node.TEXT_NODE){const R=S.nodeValue.length;if(_<=R){v.setStart(S,_),v.setEnd(S,_);break}_-=R}a.removeAllRanges(),a.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,i){var l;let r=null;if(e instanceof UI){const{data:{defaultAppearanceData:{fontSize:u,fontColor:f},rect:m,rotation:g,id:v,popupRef:_},textContent:b,textPosition:C,parent:{page:{pageNumber:T}}}=e;if(!b||b.length===0)return null;r=e={annotationType:dn.FREETEXT,color:Array.from(f),fontSize:u,value:b.join(`
`),position:C,pageIndex:T-1,rect:m.slice(0),rotation:g,id:v,deleted:!1,popupRef:_}}const a=await super.deserialize(e,n,i);return G(a,Oo,e.fontSize),G(a,yc,Le.makeHexColor(...e.color)),G(a,Bo,k(l=Ci,sf,Nw).call(l,e.value)),a.annotationElementId=e.id||null,a._initialData=r,a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ci._internalPadding*this.parentScale,i=this.getRect(n,n),r=di._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:x(this,yc)),a={annotationType:dn.FREETEXT,color:r,fontSize:x(this,Oo),value:k(this,Ls,QI).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?a:this.annotationElementId&&!k(this,Ls,XI).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:i}=n;i.fontSize=`calc(${x(this,Oo)}px * var(--scale-factor))`,i.color=x(this,yc),n.replaceChildren();for(const a of x(this,Bo).split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),n.append(l)}const r=Ci._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:x(this,Bo)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};yc=new WeakMap,Bo=new WeakMap,ox=new WeakMap,gg=new WeakMap,Oo=new WeakMap,Ls=new WeakSet,GI=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-x(this,Oo))*this.parentScale),G(this,Oo,r),k(this,Ls,ZE).call(this)},i=x(this,Oo);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},kI=function(e){const n=r=>{G(this,yc,this.editorDiv.style.color=r)},i=x(this,yc);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},VI=function(){var i;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(k(i=Ci,sf,$E).call(i,r)),n=r);return e.join(`
`)},ZE=function(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,l=a.style.display,u=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()},sf=new WeakSet,$E=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(SE,"")},tM=function(){if(this.editorDiv.replaceChildren(),!!x(this,Bo))for(const e of x(this,Bo).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},QI=function(){return x(this,Bo).replaceAll(""," ")},Nw=function(e){return e.replaceAll(" ","")},XI=function(e){const{value:n,fontSize:i,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((l,u)=>l!==r[u])||e.pageIndex!==a},Y(Ci,sf),Je(Ci,"_freeTextDefaultContent",""),Je(Ci,"_internalPadding",0),Je(Ci,"_defaultColor",null),Je(Ci,"_defaultFontSize",10),Je(Ci,"_type","freetext"),Je(Ci,"_editorType",dn.FREETEXT);let Ow=Ci;class jI{toSVGPath(){Oi("Abstract method `toSVGPath` must be implemented.")}get box(){Oi("Abstract getter `box` must be implemented.")}serialize(t,e){Oi("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Oi("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Oi("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var No,_c,Iv,Uv,Lu,Mn,vg,yg,lx,cx,Pv,Fv,Pd,ux,O3,N3,Ys,S_,qI,YI,WI,KI,JI,ZI;const Sh=class Sh{constructor({x:t,y:e},n,i,r,a,l=0){Y(this,Ys);Y(this,No);Y(this,_c,[]);Y(this,Iv);Y(this,Uv);Y(this,Lu,[]);Y(this,Mn,new Float64Array(18));Y(this,vg);Y(this,yg);Y(this,lx);Y(this,cx);Y(this,Pv);Y(this,Fv);Y(this,Pd,[]);G(this,No,n),G(this,Fv,r*i),G(this,Uv,a),x(this,Mn).set([NaN,NaN,NaN,NaN,t,e],6),G(this,Iv,l),G(this,cx,x(Sh,ux)*i),G(this,lx,x(Sh,N3)*i),G(this,Pv,i),x(this,Pd).push(t,e)}isEmpty(){return isNaN(x(this,Mn)[8])}add({x:t,y:e}){var U;G(this,vg,t),G(this,yg,e);const[n,i,r,a]=x(this,No);let[l,u,f,m]=x(this,Mn).subarray(8,12);const g=t-f,v=e-m,_=Math.hypot(g,v);if(_<x(this,lx))return!1;const b=_-x(this,cx),C=b/_,T=C*g,S=C*v;let R=l,B=u;l=f,u=m,f+=T,m+=S,(U=x(this,Pd))==null||U.push(t,e);const D=-S/b,N=T/b,I=D*x(this,Fv),F=N*x(this,Fv);return x(this,Mn).set(x(this,Mn).subarray(2,8),0),x(this,Mn).set([f+I,m+F],4),x(this,Mn).set(x(this,Mn).subarray(14,18),12),x(this,Mn).set([f-I,m-F],16),isNaN(x(this,Mn)[6])?(x(this,Lu).length===0&&(x(this,Mn).set([l+I,u+F],2),x(this,Lu).push(NaN,NaN,NaN,NaN,(l+I-n)/r,(u+F-i)/a),x(this,Mn).set([l-I,u-F],14),x(this,_c).push(NaN,NaN,NaN,NaN,(l-I-n)/r,(u-F-i)/a)),x(this,Mn).set([R,B,l,u,f,m],6),!this.isEmpty()):(x(this,Mn).set([R,B,l,u,f,m],6),Math.abs(Math.atan2(B-u,R-l)-Math.atan2(S,T))<Math.PI/2?([l,u,f,m]=x(this,Mn).subarray(2,6),x(this,Lu).push(NaN,NaN,NaN,NaN,((l+f)/2-n)/r,((u+m)/2-i)/a),[l,u,R,B]=x(this,Mn).subarray(14,18),x(this,_c).push(NaN,NaN,NaN,NaN,((R+l)/2-n)/r,((B+u)/2-i)/a),!0):([R,B,l,u,f,m]=x(this,Mn).subarray(0,6),x(this,Lu).push(((R+5*l)/6-n)/r,((B+5*u)/6-i)/a,((5*l+f)/6-n)/r,((5*u+m)/6-i)/a,((l+f)/2-n)/r,((u+m)/2-i)/a),[f,m,l,u,R,B]=x(this,Mn).subarray(12,18),x(this,_c).push(((R+5*l)/6-n)/r,((B+5*u)/6-i)/a,((5*l+f)/6-n)/r,((5*u+m)/6-i)/a,((l+f)/2-n)/r,((u+m)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=x(this,Lu),e=x(this,_c);if(isNaN(x(this,Mn)[6])&&!this.isEmpty())return k(this,Ys,qI).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);k(this,Ys,WI).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return k(this,Ys,YI).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,r,a){return new $I(t,e,n,i,r,a)}getOutlines(){var g;const t=x(this,Lu),e=x(this,_c),n=x(this,Mn),[i,r,a,l]=x(this,No),u=new Float64Array((((g=x(this,Pd))==null?void 0:g.length)??0)+2);for(let v=0,_=u.length-2;v<_;v+=2)u[v]=(x(this,Pd)[v]-i)/a,u[v+1]=(x(this,Pd)[v+1]-r)/l;if(u[u.length-2]=(x(this,vg)-i)/a,u[u.length-1]=(x(this,yg)-r)/l,isNaN(n[6])&&!this.isEmpty())return k(this,Ys,KI).call(this,u);const f=new Float64Array(x(this,Lu).length+24+x(this,_c).length);let m=t.length;for(let v=0;v<m;v+=2){if(isNaN(t[v])){f[v]=f[v+1]=NaN;continue}f[v]=t[v],f[v+1]=t[v+1]}m=k(this,Ys,ZI).call(this,f,m);for(let v=e.length-6;v>=6;v-=6)for(let _=0;_<6;_+=2){if(isNaN(e[v+_])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[v+_],f[m+1]=e[v+_+1],m+=2}return k(this,Ys,JI).call(this,f,m),this.newFreeDrawOutline(f,u,x(this,No),x(this,Pv),x(this,Iv),x(this,Uv))}};No=new WeakMap,_c=new WeakMap,Iv=new WeakMap,Uv=new WeakMap,Lu=new WeakMap,Mn=new WeakMap,vg=new WeakMap,yg=new WeakMap,lx=new WeakMap,cx=new WeakMap,Pv=new WeakMap,Fv=new WeakMap,Pd=new WeakMap,ux=new WeakMap,O3=new WeakMap,N3=new WeakMap,Ys=new WeakSet,S_=function(){const t=x(this,Mn).subarray(4,6),e=x(this,Mn).subarray(16,18),[n,i,r,a]=x(this,No);return[(x(this,vg)+(t[0]-e[0])/2-n)/r,(x(this,yg)+(t[1]-e[1])/2-i)/a,(x(this,vg)+(e[0]-t[0])/2-n)/r,(x(this,yg)+(e[1]-t[1])/2-i)/a]},qI=function(){const[t,e,n,i]=x(this,No),[r,a,l,u]=k(this,Ys,S_).call(this);return`M${(x(this,Mn)[2]-t)/n} ${(x(this,Mn)[3]-e)/i} L${(x(this,Mn)[4]-t)/n} ${(x(this,Mn)[5]-e)/i} L${r} ${a} L${l} ${u} L${(x(this,Mn)[16]-t)/n} ${(x(this,Mn)[17]-e)/i} L${(x(this,Mn)[14]-t)/n} ${(x(this,Mn)[15]-e)/i} Z`},YI=function(t){const e=x(this,_c);t.push(`L${e[4]} ${e[5]} Z`)},WI=function(t){const[e,n,i,r]=x(this,No),a=x(this,Mn).subarray(4,6),l=x(this,Mn).subarray(16,18),[u,f,m,g]=k(this,Ys,S_).call(this);t.push(`L${(a[0]-e)/i} ${(a[1]-n)/r} L${u} ${f} L${m} ${g} L${(l[0]-e)/i} ${(l[1]-n)/r}`)},KI=function(t){const e=x(this,Mn),[n,i,r,a]=x(this,No),[l,u,f,m]=k(this,Ys,S_).call(this),g=new Float64Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-i)/a,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-i)/a,NaN,NaN,NaN,NaN,l,u,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-i)/a,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-i)/a],0),this.newFreeDrawOutline(g,t,x(this,No),x(this,Pv),x(this,Iv),x(this,Uv))},JI=function(t,e){const n=x(this,_c);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},ZI=function(t,e){const n=x(this,Mn).subarray(4,6),i=x(this,Mn).subarray(16,18),[r,a,l,u]=x(this,No),[f,m,g,v]=k(this,Ys,S_).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/l,(n[1]-a)/u,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(i[0]-r)/l,(i[1]-a)/u],e),e+=24},Y(Sh,ux,8),Y(Sh,O3,2),Y(Sh,N3,x(Sh,ux)+x(Sh,O3));let m3=Sh;var Hv,_g,Fh,hx,Io,fx,ms,ao,E_,M_,tU;class $I extends jI{constructor(e,n,i,r,a,l){super();Y(this,ao);Y(this,Hv);Y(this,_g,null);Y(this,Fh);Y(this,hx);Y(this,Io);Y(this,fx);Y(this,ms);G(this,ms,e),G(this,Io,n),G(this,Hv,i),G(this,fx,r),G(this,Fh,a),G(this,hx,l),k(this,ao,tU).call(this,l);const{x:u,y:f,width:m,height:g}=x(this,_g);for(let v=0,_=e.length;v<_;v+=2)e[v]=(e[v]-u)/m,e[v+1]=(e[v+1]-f)/g;for(let v=0,_=n.length;v<_;v+=2)n[v]=(n[v]-u)/m,n[v+1]=(n[v+1]-f)/g}toSVGPath(){const e=[`M${x(this,ms)[4]} ${x(this,ms)[5]}`];for(let n=6,i=x(this,ms).length;n<i;n+=6){if(isNaN(x(this,ms)[n])){e.push(`L${x(this,ms)[n+4]} ${x(this,ms)[n+5]}`);continue}e.push(`C${x(this,ms)[n]} ${x(this,ms)[n+1]} ${x(this,ms)[n+2]} ${x(this,ms)[n+3]} ${x(this,ms)[n+4]} ${x(this,ms)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,r],a){const l=i-e,u=r-n;let f,m;switch(a){case 0:f=k(this,ao,E_).call(this,x(this,ms),e,r,l,-u),m=k(this,ao,E_).call(this,x(this,Io),e,r,l,-u);break;case 90:f=k(this,ao,M_).call(this,x(this,ms),e,n,l,u),m=k(this,ao,M_).call(this,x(this,Io),e,n,l,u);break;case 180:f=k(this,ao,E_).call(this,x(this,ms),i,n,-l,u),m=k(this,ao,E_).call(this,x(this,Io),i,n,-l,u);break;case 270:f=k(this,ao,M_).call(this,x(this,ms),i,r,-l,-u),m=k(this,ao,M_).call(this,x(this,Io),i,r,-l,-u);break}return{outline:Array.from(f),points:[Array.from(m)]}}get box(){return x(this,_g)}newOutliner(e,n,i,r,a,l=0){return new m3(e,n,i,r,a,l)}getNewOutline(e,n){const{x:i,y:r,width:a,height:l}=x(this,_g),[u,f,m,g]=x(this,Hv),v=a*m,_=l*g,b=i*m+u,C=r*g+f,T=this.newOutliner({x:x(this,Io)[0]*v+b,y:x(this,Io)[1]*_+C},x(this,Hv),x(this,fx),e,x(this,hx),n??x(this,Fh));for(let S=2;S<x(this,Io).length;S+=2)T.add({x:x(this,Io)[S]*v+b,y:x(this,Io)[S+1]*_+C});return T.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Hv=new WeakMap,_g=new WeakMap,Fh=new WeakMap,hx=new WeakMap,Io=new WeakMap,fx=new WeakMap,ms=new WeakMap,ao=new WeakSet,E_=function(e,n,i,r,a){const l=new Float64Array(e.length);for(let u=0,f=e.length;u<f;u+=2)l[u]=n+e[u]*r,l[u+1]=i+e[u+1]*a;return l},M_=function(e,n,i,r,a){const l=new Float64Array(e.length);for(let u=0,f=e.length;u<f;u+=2)l[u]=n+e[u+1]*r,l[u+1]=i+e[u]*a;return l},tU=function(e){const n=x(this,ms);let i=n[4],r=n[5],a=i,l=r,u=i,f=r,m=i,g=r;const v=e?Math.max:Math.min;for(let S=6,R=n.length;S<R;S+=6){if(isNaN(n[S]))a=Math.min(a,n[S+4]),l=Math.min(l,n[S+5]),u=Math.max(u,n[S+4]),f=Math.max(f,n[S+5]),g<n[S+5]?(m=n[S+4],g=n[S+5]):g===n[S+5]&&(m=v(m,n[S+4]));else{const B=Le.bezierBoundingBox(i,r,...n.slice(S,S+6));a=Math.min(a,B[0]),l=Math.min(l,B[1]),u=Math.max(u,B[2]),f=Math.max(f,B[3]),g<B[3]?(m=B[2],g=B[3]):g===B[3]&&(m=v(m,B[2]))}i=n[S+4],r=n[S+5]}const _=a-x(this,Fh),b=l-x(this,Fh),C=u-a+2*x(this,Fh),T=f-l+2*x(this,Fh);G(this,_g,{x:_,y:b,width:C,height:T,lastPoint:[m,g]})};var dx,Fd,Ac,Pa,eU,eM,nU,iU,Iw;class VD{constructor(t,e=0,n=0,i=!0){Y(this,Pa);Y(this,dx);Y(this,Fd,[]);Y(this,Ac,[]);let r=1/0,a=-1/0,l=1/0,u=-1/0;const f=10**-4;for(const{x:T,y:S,width:R,height:B}of t){const D=Math.floor((T-e)/f)*f,N=Math.ceil((T+R+e)/f)*f,I=Math.floor((S-e)/f)*f,F=Math.ceil((S+B+e)/f)*f,z=[D,I,F,!0],U=[N,I,F,!1];x(this,Fd).push(z,U),r=Math.min(r,D),a=Math.max(a,N),l=Math.min(l,I),u=Math.max(u,F)}const m=a-r+2*n,g=u-l+2*n,v=r-n,_=l-n,b=x(this,Fd).at(i?-1:-2),C=[b[0],b[2]];for(const T of x(this,Fd)){const[S,R,B]=T;T[0]=(S-v)/m,T[1]=(R-_)/g,T[2]=(B-_)/g}G(this,dx,{x:v,y:_,width:m,height:g,lastPoint:C})}getOutlines(){x(this,Fd).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of x(this,Fd))e[3]?(t.push(...k(this,Pa,Iw).call(this,e)),k(this,Pa,nU).call(this,e)):(k(this,Pa,iU).call(this,e),t.push(...k(this,Pa,Iw).call(this,e)));return k(this,Pa,eU).call(this,t)}}dx=new WeakMap,Fd=new WeakMap,Ac=new WeakMap,Pa=new WeakSet,eU=function(t){const e=[],n=new Set;for(const a of t){const[l,u,f]=a;e.push([l,u,a],[l,f,a])}e.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=e.length;a<l;a+=2){const u=e[a][2],f=e[a+1][2];u.push(f),f.push(u),n.add(u),n.add(f)}const i=[];let r;for(;n.size>0;){const a=n.values().next().value;let[l,u,f,m,g]=a;n.delete(a);let v=l,_=u;for(r=[l,f],i.push(r);;){let b;if(n.has(m))b=m;else if(n.has(g))b=g;else break;n.delete(b),[l,u,f,m,g]=b,v!==l&&(r.push(v,_,l,_===u?u:f),v=l),_=_===u?f:u}r.push(v,_)}return new Zet(i,x(this,dx))},eM=function(t){const e=x(this,Ac);let n=0,i=e.length-1;for(;n<=i;){const r=n+i>>1,a=e[r][0];if(a===t)return r;a<t?n=r+1:i=r-1}return i+1},nU=function([,t,e]){const n=k(this,Pa,eM).call(this,t);x(this,Ac).splice(n,0,[t,e])},iU=function([,t,e]){const n=k(this,Pa,eM).call(this,t);for(let i=n;i<x(this,Ac).length;i++){const[r,a]=x(this,Ac)[i];if(r!==t)break;if(r===t&&a===e){x(this,Ac).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[r,a]=x(this,Ac)[i];if(r!==t)break;if(r===t&&a===e){x(this,Ac).splice(i,1);return}}},Iw=function(t){const[e,n,i]=t,r=[[e,n,i]],a=k(this,Pa,eM).call(this,i);for(let l=0;l<a;l++){const[u,f]=x(this,Ac)[l];for(let m=0,g=r.length;m<g;m++){const[,v,_]=r[m];if(!(f<=v||_<=u)){if(v>=u){if(_>f)r[m][1]=f;else{if(g===1)return[];r.splice(m,1),m--,g--}continue}r[m][2]=u,_>f&&r.push([e,f,_])}}}return r};var px,zv;class Zet extends jI{constructor(e,n){super();Y(this,px);Y(this,zv);G(this,zv,e),G(this,px,n)}toSVGPath(){const e=[];for(const n of x(this,zv)){let[i,r]=n;e.push(`M${i} ${r}`);for(let a=2;a<n.length;a+=2){const l=n[a],u=n[a+1];l===i?(e.push(`V${u}`),r=u):u===r&&(e.push(`H${l}`),i=l)}e.push("Z")}return e.join(" ")}serialize([e,n,i,r],a){const l=[],u=i-e,f=r-n;for(const m of x(this,zv)){const g=new Array(m.length);for(let v=0;v<m.length;v+=2)g[v]=e+m[v]*u,g[v+1]=r-m[v+1]*f;l.push(g)}return l}get box(){return x(this,px)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}px=new WeakMap,zv=new WeakMap;class Uw extends m3{newFreeDrawOutline(t,e,n,i,r,a){return new $et(t,e,n,i,r,a)}get classNamesForDrawing(){return["highlight","free"]}}class $et extends $I{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,e,n,i,r,a=0){return new Uw(t,e,n,i,r,a)}}var xc,Ag,Gv,Qs,mx,kv,gx,vx,Hd,bc,Vv,yx,_i,Pw,Fw,Hw,bm,sU,pd;const to=class to{constructor({editor:t=null,uiManager:e=null}){Y(this,_i);Y(this,xc,null);Y(this,Ag,null);Y(this,Gv);Y(this,Qs,null);Y(this,mx,!1);Y(this,kv,!1);Y(this,gx,null);Y(this,vx);Y(this,Hd,null);Y(this,bc,null);Y(this,Vv);var n;t?(G(this,kv,!1),G(this,Vv,Ze.HIGHLIGHT_COLOR),G(this,gx,t)):(G(this,kv,!0),G(this,Vv,Ze.HIGHLIGHT_DEFAULT_COLOR)),G(this,bc,(t==null?void 0:t._uiManager)||e),G(this,vx,x(this,bc)._eventBus),G(this,Gv,(t==null?void 0:t.color)||((n=x(this,bc))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),x(to,yx)||G(to,yx,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Fn(this,"_keyboardManager",new kx([[["Escape","mac+Escape"],to.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],to.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],to.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],to.prototype._moveToPrevious],[["Home","mac+Home"],to.prototype._moveToBeginning],[["End","mac+End"],to.prototype._moveToEnd]]))}renderButton(){const t=G(this,xc,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=x(this,bc)._signal;t.addEventListener("click",k(this,_i,bm).bind(this),{signal:e}),t.addEventListener("keydown",k(this,_i,Hw).bind(this),{signal:e});const n=G(this,Ag,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=x(this,Gv),t.append(n),t}renderMainDropdown(){const t=G(this,Qs,k(this,_i,Pw).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===x(this,xc)){k(this,_i,bm).call(this,t);return}const e=t.target.getAttribute("data-color");e&&k(this,_i,Fw).call(this,e,t)}_moveToNext(t){var e,n;if(!x(this,_i,pd)){k(this,_i,bm).call(this,t);return}if(t.target===x(this,xc)){(e=x(this,Qs).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=x(this,Qs))==null?void 0:e.firstChild)||t.target===x(this,xc)){x(this,_i,pd)&&this._hideDropdownFromKeyboard();return}x(this,_i,pd)||k(this,_i,bm).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!x(this,_i,pd)){k(this,_i,bm).call(this,t);return}(e=x(this,Qs).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!x(this,_i,pd)){k(this,_i,bm).call(this,t);return}(e=x(this,Qs).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=x(this,Qs))==null||t.classList.add("hidden"),(e=x(this,Hd))==null||e.abort(),G(this,Hd,null)}_hideDropdownFromKeyboard(){var t;if(!x(this,kv)){if(!x(this,_i,pd)){(t=x(this,gx))==null||t.unselect();return}this.hideDropdown(),x(this,xc).focus({preventScroll:!0,focusVisible:x(this,mx)})}}updateColor(t){if(x(this,Ag)&&(x(this,Ag).style.backgroundColor=t),!x(this,Qs))return;const e=x(this,bc).highlightColors.values();for(const n of x(this,Qs).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=x(this,xc))==null||t.remove(),G(this,xc,null),G(this,Ag,null),(e=x(this,Qs))==null||e.remove(),G(this,Qs,null)}};xc=new WeakMap,Ag=new WeakMap,Gv=new WeakMap,Qs=new WeakMap,mx=new WeakMap,kv=new WeakMap,gx=new WeakMap,vx=new WeakMap,Hd=new WeakMap,bc=new WeakMap,Vv=new WeakMap,yx=new WeakMap,_i=new WeakSet,Pw=function(){const t=document.createElement("div"),e=x(this,bc)._signal;t.addEventListener("contextmenu",Dl,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of x(this,bc).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",x(to,yx)[n]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=i,r.setAttribute("aria-selected",i===x(this,Gv)),r.addEventListener("click",k(this,_i,Fw).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",k(this,_i,Hw).bind(this),{signal:e}),t},Fw=function(t,e){e.stopPropagation(),x(this,vx).dispatch("switchannotationeditorparams",{source:this,type:x(this,Vv),value:t})},Hw=function(t){to._keyboardManager.exec(this,t)},bm=function(t){if(x(this,_i,pd)){this.hideDropdown();return}if(G(this,mx,t.detail===0),x(this,Hd)||(G(this,Hd,new AbortController),window.addEventListener("pointerdown",k(this,_i,sU).bind(this),{signal:x(this,bc).combinedSignal(x(this,Hd))})),x(this,Qs)){x(this,Qs).classList.remove("hidden");return}const e=G(this,Qs,k(this,_i,Pw).call(this));x(this,xc).append(e)},sU=function(t){var e;(e=x(this,Qs))!=null&&e.contains(t.target)||this.hideDropdown()},pd=function(){return x(this,Qs)&&!x(this,Qs).classList.contains("hidden")},Y(to,yx,null);let g3=to;var Qv,_x,Hh,xg,Xv,bl,Ax,xx,bg,Sc,$r,io,jv,zh,Xs,qv,Sl,bx,un,zw,nM,rU,aU,oU,Gw,Sm,Tl,k1,lU,iM,T_,cU,uU,hU,fU,dU;const $n=class $n extends di{constructor(e){super({...e,name:"highlightEditor"});Y(this,un);Y(this,Qv,null);Y(this,_x,0);Y(this,Hh);Y(this,xg,null);Y(this,Xv,null);Y(this,bl,null);Y(this,Ax,null);Y(this,xx,0);Y(this,bg,null);Y(this,Sc,null);Y(this,$r,null);Y(this,io,!1);Y(this,jv,null);Y(this,zh);Y(this,Xs,null);Y(this,qv,"");Y(this,Sl);Y(this,bx,"");this.color=e.color||$n._defaultColor,G(this,Sl,e.thickness||$n._defaultThickness),G(this,zh,e.opacity||$n._defaultOpacity),G(this,Hh,e.boxes||null),G(this,bx,e.methodOfCreation||""),G(this,qv,e.text||""),this._isDraggable=!1,e.highlightId>-1?(G(this,io,!0),k(this,un,nM).call(this,e),k(this,un,Sm).call(this)):x(this,Hh)&&(G(this,Qv,e.anchorNode),G(this,_x,e.anchorOffset),G(this,Ax,e.focusNode),G(this,xx,e.focusOffset),k(this,un,zw).call(this),k(this,un,Sm).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=$n.prototype;return Fn(this,"_keyboardManager",new kx([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:x(this,io)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:x(this,Sl),methodOfCreation:x(this,bx)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var i;di.initialize(e,n),$n._defaultColor||($n._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Ze.HIGHLIGHT_DEFAULT_COLOR:$n._defaultColor=n;break;case Ze.HIGHLIGHT_THICKNESS:$n._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return x(this,jv)}updateParams(e,n){switch(e){case Ze.HIGHLIGHT_COLOR:k(this,un,rU).call(this,n);break;case Ze.HIGHLIGHT_THICKNESS:k(this,un,aU).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ze.HIGHLIGHT_DEFAULT_COLOR,$n._defaultColor],[Ze.HIGHLIGHT_THICKNESS,$n._defaultThickness]]}get propertiesToUpdate(){return[[Ze.HIGHLIGHT_COLOR,this.color||$n._defaultColor],[Ze.HIGHLIGHT_THICKNESS,x(this,Sl)||$n._defaultThickness],[Ze.HIGHLIGHT_FREE,x(this,io)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(G(this,Xv,new g3({editor:this})),e.addColorPicker(x(this,Xv))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,un,T_).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,k(this,un,T_).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){k(this,un,Gw).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,un,Sm).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?k(this,un,Gw).call(this):e&&(k(this,un,Sm).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,a,l;const{drawLayer:n}=this.parent;let i;x(this,io)?(e=(e-this.rotation+360)%360,i=k(r=$n,Tl,k1).call(r,x(this,Sc).box,e)):i=k(a=$n,Tl,k1).call(a,this,e),n.rotate(x(this,$r),e),n.rotate(x(this,Xs),e),n.updateBox(x(this,$r),i),n.updateBox(x(this,Xs),k(l=$n,Tl,k1).call(l,x(this,bl).box,e))}render(){if(this.div)return this.div;const e=super.render();x(this,qv)&&(e.setAttribute("aria-label",x(this,qv)),e.setAttribute("role","mark")),x(this,io)?e.classList.add("free"):this.div.addEventListener("keydown",k(this,un,lU).bind(this),{signal:this._uiManager._signal});const n=G(this,bg,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=x(this,xg);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),d3(this,x(this,bg),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(x(this,Xs),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(x(this,Xs),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:k(this,un,iM).call(this,!0);break;case 1:case 3:k(this,un,iM).call(this,!1);break}}select(){var e,n;super.select(),x(this,Xs)&&((e=this.parent)==null||e.drawLayer.removeClass(x(this,Xs),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(x(this,Xs),"selected"))}unselect(){var e;super.unselect(),x(this,Xs)&&((e=this.parent)==null||e.drawLayer.removeClass(x(this,Xs),"selected"),x(this,io)||k(this,un,iM).call(this,!1))}get _mustFixPosition(){return!x(this,io)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(x(this,$r),e),this.parent.drawLayer.show(x(this,Xs),e))}static startHighlighting(e,n,{target:i,x:r,y:a}){const{x:l,y:u,width:f,height:m}=i.getBoundingClientRect(),g=new AbortController,v=e.combinedSignal(g),_=C=>{C.preventDefault(),C.stopPropagation()},b=C=>{g.abort(),k(this,Tl,fU).call(this,e,C)};window.addEventListener("blur",b,{signal:v}),window.addEventListener("pointerup",b,{signal:v}),window.addEventListener("pointerdown",_,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Dl,{signal:v}),i.addEventListener("pointermove",k(this,Tl,hU).bind(this,e),{signal:v}),this._freeHighlight=new Uw({x:r,y:a},[l,u,f,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(e,n,i){var C,T,S,R;let r=null;if(e instanceof FI){const{data:{quadPoints:B,rect:D,rotation:N,id:I,color:F,opacity:z,popupRef:U},parent:{page:{pageNumber:P}}}=e;r=e={annotationType:dn.HIGHLIGHT,color:Array.from(F),opacity:z,quadPoints:B,boxes:null,pageIndex:P-1,rect:D.slice(0),rotation:N,id:I,deleted:!1,popupRef:U}}else if(e instanceof OR){const{data:{inkLists:B,rect:D,rotation:N,id:I,color:F,borderStyle:{rawWidth:z},popupRef:U},parent:{page:{pageNumber:P}}}=e;r=e={annotationType:dn.HIGHLIGHT,color:Array.from(F),thickness:z,inkLists:B,boxes:null,pageIndex:P-1,rect:D.slice(0),rotation:N,id:I,deleted:!1,popupRef:U}}const{color:a,quadPoints:l,inkLists:u,opacity:f}=e,m=await super.deserialize(e,n,i);m.color=Le.makeHexColor(...a),G(m,zh,f||1),u&&G(m,Sl,e.thickness),m.annotationElementId=e.id||null,m._initialData=r;const[g,v]=m.pageDimensions,[_,b]=m.pageTranslation;if(l){const B=G(m,Hh,[]);for(let D=0;D<l.length;D+=8)B.push({x:(l[D]-_)/g,y:1-(l[D+1]-b)/v,width:(l[D+2]-l[D])/g,height:(l[D+1]-l[D+5])/v});k(C=m,un,zw).call(C),k(T=m,un,Sm).call(T),m.rotate(m.rotation)}else if(u){G(m,io,!0);const B=u[0],D={x:B[0]-_,y:v-(B[1]-b)},N=new Uw(D,[0,0,g,v],1,x(m,Sl)/2,!0,.001);for(let z=0,U=B.length;z<U;z+=2)D.x=B[z]-_,D.y=v-(B[z+1]-b),N.add(D);const{id:I,clipPathId:F}=n.drawLayer.draw(N,m.color,m._defaultOpacity,!0);k(S=m,un,nM).call(S,{highlightOutlines:N.getOutlines(),highlightId:I,clipPathId:F}),k(R=m,un,Sm).call(R)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),i=di._colorManager.convert(this.color),r={annotationType:dn.HIGHLIGHT,color:i,opacity:x(this,zh),thickness:x(this,Sl),quadPoints:k(this,un,cU).call(this),outlines:k(this,un,uU).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:k(this,un,T_).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!k(this,un,dU).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Qv=new WeakMap,_x=new WeakMap,Hh=new WeakMap,xg=new WeakMap,Xv=new WeakMap,bl=new WeakMap,Ax=new WeakMap,xx=new WeakMap,bg=new WeakMap,Sc=new WeakMap,$r=new WeakMap,io=new WeakMap,jv=new WeakMap,zh=new WeakMap,Xs=new WeakMap,qv=new WeakMap,Sl=new WeakMap,bx=new WeakMap,un=new WeakSet,zw=function(){const e=new VD(x(this,Hh),.001);G(this,Sc,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=x(this,Sc).box;const n=new VD(x(this,Hh),.0025,.001,this._uiManager.direction==="ltr");G(this,bl,n.getOutlines());const{lastPoint:i}=x(this,bl).box;G(this,jv,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},nM=function({highlightOutlines:e,highlightId:n,clipPathId:i}){var g,v;if(G(this,Sc,e),G(this,bl,e.getNewOutline(x(this,Sl)/2+1.5,.0025)),n>=0)G(this,$r,n),G(this,xg,i),this.parent.drawLayer.finalizeLine(n,e),G(this,Xs,this.parent.drawLayer.drawOutline(x(this,bl)));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(x(this,$r),e),this.parent.drawLayer.updateBox(x(this,$r),k(g=$n,Tl,k1).call(g,x(this,Sc).box,(_-this.rotation+360)%360)),this.parent.drawLayer.updateLine(x(this,Xs),x(this,bl)),this.parent.drawLayer.updateBox(x(this,Xs),k(v=$n,Tl,k1).call(v,x(this,bl).box,_))}const{x:a,y:l,width:u,height:f}=e.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=u,this.height=f;break;case 90:{const[_,b]=this.parentDimensions;this.x=l,this.y=1-a,this.width=u*b/_,this.height=f*_/b;break}case 180:this.x=1-a,this.y=1-l,this.width=u,this.height=f;break;case 270:{const[_,b]=this.parentDimensions;this.x=1-l,this.y=a,this.width=u*b/_,this.height=f*_/b;break}}const{lastPoint:m}=x(this,bl).box;G(this,jv,[(m[0]-a)/u,(m[1]-l)/f])},rU=function(e){const n=(a,l)=>{var u,f,m;this.color=a,(u=this.parent)==null||u.drawLayer.changeColor(x(this,$r),a),(f=x(this,Xv))==null||f.updateColor(a),G(this,zh,l),(m=this.parent)==null||m.drawLayer.changeOpacity(x(this,$r),l)},i=this.color,r=x(this,zh);this.addCommands({cmd:n.bind(this,e,$n._defaultOpacity),undo:n.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},aU=function(e){const n=x(this,Sl),i=r=>{G(this,Sl,r),k(this,un,oU).call(this,r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},oU=function(e){if(!x(this,io))return;k(this,un,nM).call(this,{highlightOutlines:x(this,Sc).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},Gw=function(){x(this,$r)===null||!this.parent||(this.parent.drawLayer.remove(x(this,$r)),G(this,$r,null),this.parent.drawLayer.remove(x(this,Xs)),G(this,Xs,null))},Sm=function(e=this.parent){x(this,$r)===null&&({id:Ea(this,$r)._,clipPathId:Ea(this,xg)._}=e.drawLayer.draw(x(this,Sc),this.color,x(this,zh)),G(this,Xs,e.drawLayer.drawOutline(x(this,bl))),x(this,bg)&&(x(this,bg).style.clipPath=x(this,xg)))},Tl=new WeakSet,k1=function({x:e,y:n,width:i,height:r},a){switch(a){case 90:return{x:1-n-r,y:e,width:r,height:i};case 180:return{x:1-e-i,y:1-n-r,width:i,height:r};case 270:return{x:n,y:1-e-i,width:r,height:i}}return{x:e,y:n,width:i,height:r}},lU=function(e){$n._keyboardManager.exec(this,e)},iM=function(e){if(!x(this,Qv))return;const n=window.getSelection();e?n.setPosition(x(this,Qv),x(this,_x)):n.setPosition(x(this,Ax),x(this,xx))},T_=function(){return x(this,io)?this.rotation:0},cU=function(){if(x(this,io))return null;const[e,n]=this.pageDimensions,[i,r]=this.pageTranslation,a=x(this,Hh),l=new Float32Array(a.length*8);let u=0;for(const{x:f,y:m,width:g,height:v}of a){const _=f*e+i,b=(1-m-v)*n+r;l[u]=l[u+4]=_,l[u+1]=l[u+3]=b,l[u+2]=l[u+6]=_+g*e,l[u+5]=l[u+7]=b+v*n,u+=8}return l},uU=function(e){return x(this,Sc).serialize(e,k(this,un,T_).call(this))},hU=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},fU=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},dU=function(e){const{color:n}=this._initialData;return e.color.some((i,r)=>i!==n[r])},Y($n,Tl),Je($n,"_defaultColor",null),Je($n,"_defaultOpacity",1),Je($n,"_defaultThickness",12),Je($n,"_type","highlight"),Je($n,"_editorType",dn.HIGHLIGHT),Je($n,"_freeHighlightId",-1),Je($n,"_freeHighlight",null),Je($n,"_freeHighlightClipId","");let v3=$n;var Sg,Eg,Du,Gh,El,Mg,Tg,Cg,kh,Yv,wg,Rg,zd,oe,pU,mU,gU,vU,Vw,yU,Qw,_U,AU,xU,bU,SU,Em,Xw,jw,qw,sM,rM,V1,Yw,aM,cf,EU,Ww,MU,TU,Kw,oM,C_;const ji=class ji extends di{constructor(e){super({...e,name:"inkEditor"});Y(this,oe);Y(this,Sg,0);Y(this,Eg,0);Y(this,Du,null);Y(this,Gh,new Path2D);Y(this,El,!1);Y(this,Mg,null);Y(this,Tg,!1);Y(this,Cg,!1);Y(this,kh,null);Y(this,Yv,null);Y(this,wg,0);Y(this,Rg,0);Y(this,zd,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,n){di.initialize(e,n)}static updateDefaultParams(e,n){switch(e){case Ze.INK_THICKNESS:ji._defaultThickness=n;break;case Ze.INK_COLOR:ji._defaultColor=n;break;case Ze.INK_OPACITY:ji._defaultOpacity=n/100;break}}updateParams(e,n){switch(e){case Ze.INK_THICKNESS:k(this,oe,pU).call(this,n);break;case Ze.INK_COLOR:k(this,oe,mU).call(this,n);break;case Ze.INK_OPACITY:k(this,oe,gU).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ze.INK_THICKNESS,ji._defaultThickness],[Ze.INK_COLOR,ji._defaultColor||di._defaultLineColor],[Ze.INK_OPACITY,Math.round(ji._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Ze.INK_THICKNESS,this.thickness||ji._defaultThickness],[Ze.INK_COLOR,this.color||ji._defaultColor||di._defaultLineColor],[Ze.INK_OPACITY,Math.round(100*(this.opacity??ji._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(k(this,oe,sM).call(this),k(this,oe,rM).call(this)),this.isAttachedToDOM||(this.parent.add(this),k(this,oe,V1).call(this)),k(this,oe,C_).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,x(this,Du)&&(clearTimeout(x(this,Du)),G(this,Du,null)),(e=x(this,kh))==null||e.disconnect(),G(this,kh,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,n]=this.parentDimensions,i=this.width*e,r=this.height*n;this.setDimensions(i,r)}enableEditMode(){x(this,El)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,k(this,oe,Xw).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),k(this,oe,jw).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){x(this,El)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),G(this,El,!0),this.div.classList.add("disabled"),k(this,oe,C_).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||x(this,El)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),k(this,oe,yU).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),k(this,oe,Qw).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),k(this,oe,qw).call(this,e)}canvasPointerleave(e){k(this,oe,qw).call(this,e)}get isResizable(){return!this.isEmpty()&&x(this,El)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,r,a,l]=k(this,oe,vU).call(this);if(this.setAt(i,r,0,0),this.setDims(a,l),k(this,oe,sM).call(this),this.width){const[u,f]=this.parentDimensions;this.setAspectRatio(this.width*u,this.height*f),this.setAt(e*u,n*f,this.width*u,this.height*f),G(this,Cg,!0),k(this,oe,V1).call(this),this.setDims(this.width*u,this.height*f),k(this,oe,Em).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return k(this,oe,rM).call(this),this.div}setDimensions(e,n){const i=Math.round(e),r=Math.round(n);if(x(this,wg)===i&&x(this,Rg)===r)return;G(this,wg,i),G(this,Rg,r),this.canvas.style.visibility="hidden";const[a,l]=this.parentDimensions;this.width=e/a,this.height=n/l,this.fixAndSetPosition(),x(this,El)&&k(this,oe,Yw).call(this,e,n),k(this,oe,V1).call(this),k(this,oe,Em).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(e,n,i){var T,S,R;if(e instanceof OR)return null;const r=await super.deserialize(e,n,i);r.thickness=e.thickness,r.color=Le.makeHexColor(...e.color),r.opacity=e.opacity;const[a,l]=r.pageDimensions,u=r.width*a,f=r.height*l,m=r.parentScale,g=e.thickness/2;G(r,El,!0),G(r,wg,Math.round(u)),G(r,Rg,Math.round(f));const{paths:v,rect:_,rotation:b}=e;for(let{bezier:B}of v){B=k(T=ji,cf,MU).call(T,B,_,b);const D=[];r.paths.push(D);let N=m*(B[0]-g),I=m*(B[1]-g);for(let z=2,U=B.length;z<U;z+=6){const P=m*(B[z]-g),X=m*(B[z+1]-g),ot=m*(B[z+2]-g),it=m*(B[z+3]-g),ct=m*(B[z+4]-g),dt=m*(B[z+5]-g);D.push([[N,I],[P,X],[ot,it],[ct,dt]]),N=ct,I=dt}const F=k(this,cf,EU).call(this,D);r.bezierPath2D.push(F)}const C=k(S=r,oe,Kw).call(S);return G(r,Eg,Math.max(di.MIN_SIZE,C[2]-C[0])),G(r,Sg,Math.max(di.MIN_SIZE,C[3]-C[1])),k(R=r,oe,Yw).call(R,u,f),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),n=di._colorManager.convert(this.ctx.strokeStyle);return{annotationType:dn.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:k(this,oe,TU).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Sg=new WeakMap,Eg=new WeakMap,Du=new WeakMap,Gh=new WeakMap,El=new WeakMap,Mg=new WeakMap,Tg=new WeakMap,Cg=new WeakMap,kh=new WeakMap,Yv=new WeakMap,wg=new WeakMap,Rg=new WeakMap,zd=new WeakMap,oe=new WeakSet,pU=function(e){const n=r=>{this.thickness=r,k(this,oe,C_).call(this)},i=this.thickness;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},mU=function(e){const n=r=>{this.color=r,k(this,oe,Em).call(this)},i=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},gU=function(e){const n=r=>{this.opacity=r,k(this,oe,Em).call(this)};e/=100;const i=this.opacity;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},vU=function(){const{parentRotation:e,parentDimensions:[n,i]}=this;switch(e){case 90:return[0,i,i,n];case 180:return[n,i,n,i];case 270:return[n,0,i,n];default:return[0,0,n,i]}},Vw=function(){const{ctx:e,color:n,opacity:i,thickness:r,parentScale:a,scaleFactor:l}=this;e.lineWidth=r*a/l,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${n}${_tt(i)}`},yU=function(e,n){this.canvas.addEventListener("contextmenu",Dl,{signal:this._uiManager._signal}),k(this,oe,jw).call(this),G(this,Mg,new AbortController);const i=this._uiManager.combinedSignal(x(this,Mg));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:i}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:i}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:i}),this.isEditing=!0,x(this,Cg)||(G(this,Cg,!0),k(this,oe,V1).call(this),this.thickness||(this.thickness=ji._defaultThickness),this.color||(this.color=ji._defaultColor||di._defaultLineColor),this.opacity??(this.opacity=ji._defaultOpacity)),this.currentPath.push([e,n]),G(this,Tg,!1),k(this,oe,Vw).call(this),G(this,zd,()=>{k(this,oe,xU).call(this),x(this,zd)&&window.requestAnimationFrame(x(this,zd))}),window.requestAnimationFrame(x(this,zd))},Qw=function(e,n){const[i,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===i&&n===r)return;const a=this.currentPath;let l=x(this,Gh);if(a.push([e,n]),G(this,Tg,!0),a.length<=2){l.moveTo(...a[0]),l.lineTo(e,n);return}a.length===3&&(G(this,Gh,l=new Path2D),l.moveTo(...a[0])),k(this,oe,bU).call(this,l,...a.at(-3),...a.at(-2),e,n)},_U=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);x(this,Gh).lineTo(...e)},AU=function(e,n){G(this,zd,null),e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),k(this,oe,Qw).call(this,e,n),k(this,oe,_U).call(this);let i;if(this.currentPath.length!==1)i=k(this,oe,SU).call(this);else{const f=[e,n];i=[[f,f.slice(),f.slice(),f]]}const r=x(this,Gh),a=this.currentPath;this.currentPath=[],G(this,Gh,new Path2D);const l=()=>{this.allRawPaths.push(a),this.paths.push(i),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},u=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(k(this,oe,sM).call(this),k(this,oe,rM).call(this)),k(this,oe,C_).call(this))};this.addCommands({cmd:l,undo:u,mustExec:!0})},xU=function(){if(!x(this,Tg))return;G(this,Tg,!1);const e=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),i=n.map(l=>l[0]),r=n.map(l=>l[1]);Math.min(...i)-e,Math.max(...i)+e,Math.min(...r)-e,Math.max(...r)+e;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const l of this.bezierPath2D)a.stroke(l);a.stroke(x(this,Gh)),a.restore()},bU=function(e,n,i,r,a,l,u){const f=(n+r)/2,m=(i+a)/2,g=(r+l)/2,v=(a+u)/2;e.bezierCurveTo(f+2*(r-f)/3,m+2*(a-m)/3,g+2*(r-g)/3,v+2*(a-v)/3,g,v)},SU=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const n=[];let i,[r,a]=e[0];for(i=1;i<e.length-2;i++){const[_,b]=e[i],[C,T]=e[i+1],S=(_+C)/2,R=(b+T)/2,B=[r+2*(_-r)/3,a+2*(b-a)/3],D=[S+2*(_-S)/3,R+2*(b-R)/3];n.push([[r,a],B,D,[S,R]]),[r,a]=[S,R]}const[l,u]=e[i],[f,m]=e[i+1],g=[r+2*(l-r)/3,a+2*(u-a)/3],v=[f+2*(l-f)/3,m+2*(u-m)/3];return n.push([[r,a],g,v,[f,m]]),n},Em=function(){if(this.isEmpty()){k(this,oe,aM).call(this);return}k(this,oe,Vw).call(this);const{canvas:e,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),k(this,oe,aM).call(this);for(const i of this.bezierPath2D)n.stroke(i)},Xw=function(){if(x(this,Yv))return;G(this,Yv,new AbortController);const e=this._uiManager.combinedSignal(x(this,Yv));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})},jw=function(){var e;(e=this.pointerdownAC)==null||e.abort(),this.pointerdownAC=null},qw=function(e){var n;(n=x(this,Mg))==null||n.abort(),G(this,Mg,null),k(this,oe,Xw).call(this),x(this,Du)&&clearTimeout(x(this,Du)),G(this,Du,setTimeout(()=>{G(this,Du,null),this.canvas.removeEventListener("contextmenu",Dl)},10)),k(this,oe,AU).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},sM=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},rM=function(){G(this,kh,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),x(this,kh).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=x(this,kh))==null||e.disconnect(),G(this,kh,null)},{once:!0})},V1=function(){if(!x(this,Cg))return;const[e,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),k(this,oe,aM).call(this)},Yw=function(e,n){const i=k(this,oe,oM).call(this),r=(e-i)/x(this,Eg),a=(n-i)/x(this,Sg);this.scaleFactor=Math.min(r,a)},aM=function(){const e=k(this,oe,oM).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},cf=new WeakSet,EU=function(e){const n=new Path2D;for(let i=0,r=e.length;i<r;i++){const[a,l,u,f]=e[i];i===0&&n.moveTo(...a),n.bezierCurveTo(l[0],l[1],u[0],u[1],f[0],f[1])}return n},Ww=function(e,n,i){const[r,a,l,u]=n;switch(i){case 0:for(let f=0,m=e.length;f<m;f+=2)e[f]+=r,e[f+1]=u-e[f+1];break;case 90:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=e[f+1]+r,e[f+1]=g+a}break;case 180:for(let f=0,m=e.length;f<m;f+=2)e[f]=l-e[f],e[f+1]+=a;break;case 270:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=l-e[f+1],e[f+1]=u-g}break;default:throw new Error("Invalid rotation")}return e},MU=function(e,n,i){const[r,a,l,u]=n;switch(i){case 0:for(let f=0,m=e.length;f<m;f+=2)e[f]-=r,e[f+1]=u-e[f+1];break;case 90:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=e[f+1]-a,e[f+1]=g-r}break;case 180:for(let f=0,m=e.length;f<m;f+=2)e[f]=l-e[f],e[f+1]-=a;break;case 270:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=u-e[f+1],e[f+1]=l-g}break;default:throw new Error("Invalid rotation")}return e},TU=function(e,n,i,r){var m,g;const a=[],l=this.thickness/2,u=e*n+l,f=e*i+l;for(const v of this.paths){const _=[],b=[];for(let C=0,T=v.length;C<T;C++){const[S,R,B,D]=v[C];if(S[0]===D[0]&&S[1]===D[1]&&T===1){const it=e*S[0]+u,ct=e*S[1]+f;_.push(it,ct),b.push(it,ct);break}const N=e*S[0]+u,I=e*S[1]+f,F=e*R[0]+u,z=e*R[1]+f,U=e*B[0]+u,P=e*B[1]+f,X=e*D[0]+u,ot=e*D[1]+f;C===0&&(_.push(N,I),b.push(N,I)),_.push(F,z,U,P,X,ot),b.push(F,z),C===T-1&&b.push(X,ot)}a.push({bezier:k(m=ji,cf,Ww).call(m,_,r,this.rotation),points:k(g=ji,cf,Ww).call(g,b,r,this.rotation)})}return a},Kw=function(){let e=1/0,n=-1/0,i=1/0,r=-1/0;for(const a of this.paths)for(const[l,u,f,m]of a){const g=Le.bezierBoundingBox(...l,...u,...f,...m);e=Math.min(e,g[0]),i=Math.min(i,g[1]),n=Math.max(n,g[2]),r=Math.max(r,g[3])}return[e,i,n,r]},oM=function(){return x(this,El)?Math.ceil(this.thickness*this.parentScale):0},C_=function(e=!1){if(this.isEmpty())return;if(!x(this,El)){k(this,oe,Em).call(this);return}const n=k(this,oe,Kw).call(this),i=k(this,oe,oM).call(this);G(this,Eg,Math.max(di.MIN_SIZE,n[2]-n[0])),G(this,Sg,Math.max(di.MIN_SIZE,n[3]-n[1]));const r=Math.ceil(i+x(this,Eg)*this.scaleFactor),a=Math.ceil(i+x(this,Sg)*this.scaleFactor),[l,u]=this.parentDimensions;this.width=r/l,this.height=a/u,this.setAspectRatio(r,a);const f=this.translationX,m=this.translationY;this.translationX=-n[0],this.translationY=-n[1],k(this,oe,V1).call(this),k(this,oe,Em).call(this),G(this,wg,r),G(this,Rg,a),this.setDims(r,a);const g=e?i/this.scaleFactor/2:0;this.translate(f-this.translationX-g,m-this.translationY-g)},Y(ji,cf),Je(ji,"_defaultColor",null),Je(ji,"_defaultOpacity",1),Je(ji,"_defaultThickness",1),Je(ji,"_type","ink"),Je(ji,"_editorType",dn.INK);let kw=ji;var Yi,Rr,Gd,Vh,kd,Wv,Bu,Qh,Ou,Uo,Kv,On,w_,R_,lM,Zw,CU,cM,$w,uM,wU,RU;const Q_=class Q_ extends di{constructor(e){super({...e,name:"stampEditor"});Y(this,On);Y(this,Yi,null);Y(this,Rr,null);Y(this,Gd,null);Y(this,Vh,null);Y(this,kd,null);Y(this,Wv,"");Y(this,Bu,null);Y(this,Qh,null);Y(this,Ou,null);Y(this,Uo,!1);Y(this,Kv,!1);G(this,Vh,e.bitmapUrl),G(this,kd,e.bitmapFile)}static initialize(e,n){di.initialize(e,n)}static get supportedTypes(){return Fn(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Fn(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(dn.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:l}=e||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:r,width:a,height:l,channels:r.length/(a*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const f=u.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e,n;x(this,Rr)&&(G(this,Yi,null),this._uiManager.imageManager.deleteId(x(this,Rr)),(e=x(this,Bu))==null||e.remove(),G(this,Bu,null),(n=x(this,Qh))==null||n.disconnect(),G(this,Qh,null),x(this,Ou)&&(clearTimeout(x(this,Ou)),G(this,Ou,null))),super.remove()}rebuild(){if(!this.parent){x(this,Rr)&&k(this,On,lM).call(this);return}super.rebuild(),this.div!==null&&(x(this,Rr)&&x(this,Bu)===null&&k(this,On,lM).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(x(this,Gd)||x(this,Yi)||x(this,Vh)||x(this,kd)||x(this,Rr))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),x(this,Yi)?k(this,On,Zw).call(this):k(this,On,lM).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(e*i,n*r,this.width*i,this.height*r)}return this.div}copyCanvas(e,n,i=!1){var _;e||(e=224);const{width:r,height:a}=x(this,Yi),l=new q8;let u=x(this,Yi),f=r,m=a,g=null;if(n){if(r>n||a>n){const z=Math.min(n/r,n/a);f=Math.floor(r*z),m=Math.floor(a*z)}g=document.createElement("canvas");const b=g.width=Math.ceil(f*l.sx),C=g.height=Math.ceil(m*l.sy);x(this,Uo)||(u=k(this,On,cM).call(this,b,C));const T=g.getContext("2d");T.filter=this._uiManager.hcmFilter;let S="white",R="#cfcfd8";this._uiManager.hcmFilter!=="none"?R="black":(_=window.matchMedia)!=null&&_.call(window,"(prefers-color-scheme: dark)").matches&&(S="#8f8f9d",R="#42414d");const B=15,D=B*l.sx,N=B*l.sy,I=new OffscreenCanvas(D*2,N*2),F=I.getContext("2d");F.fillStyle=S,F.fillRect(0,0,D*2,N*2),F.fillStyle=R,F.fillRect(0,0,D,N),F.fillRect(D,N,D,N),T.fillStyle=T.createPattern(I,"repeat"),T.fillRect(0,0,b,C),T.drawImage(u,0,0,u.width,u.height,0,0,b,C)}let v=null;if(i){let b,C;if(l.symmetric&&u.width<e&&u.height<e)b=u.width,C=u.height;else if(u=x(this,Yi),r>e||a>e){const R=Math.min(e/r,e/a);b=Math.floor(r*R),C=Math.floor(a*R),x(this,Uo)||(u=k(this,On,cM).call(this,b,C))}const S=new OffscreenCanvas(b,C).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,C),v={width:b,height:C,data:S.getImageData(0,0,b,C).data}}return{canvas:g,width:f,height:m,imageData:v}}getImageForAltText(){return x(this,Bu)}static async deserialize(e,n,i){var C;let r=null;if(e instanceof HI){const{data:{rect:T,rotation:S,id:R,structParent:B,popupRef:D},container:N,parent:{page:{pageNumber:I}}}=e,F=N.querySelector("canvas"),z=i.imageManager.getFromCanvas(N.id,F);F.remove();const U=((C=await n._structTree.getAriaAttributes(`${bR}${R}`))==null?void 0:C.get("aria-label"))||"";r=e={annotationType:dn.STAMP,bitmapId:z.id,bitmap:z.bitmap,pageIndex:I-1,rect:T.slice(0),rotation:S,id:R,deleted:!1,accessibilityData:{decorative:!1,altText:U},isSvg:!1,structParent:B,popupRef:D}}const a=await super.deserialize(e,n,i),{rect:l,bitmap:u,bitmapUrl:f,bitmapId:m,isSvg:g,accessibilityData:v}=e;m&&i.imageManager.isValidId(m)?(G(a,Rr,m),u&&G(a,Yi,u)):G(a,Vh,f),G(a,Uo,g);const[_,b]=a.pageDimensions;return a.width=(l[2]-l[0])/_,a.height=(l[3]-l[1])/b,a.annotationElementId=e.id||null,v&&(a.altTextData=v),a._initialData=r,G(a,Kv,!!r),a}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:dn.STAMP,bitmapId:x(this,Rr),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:x(this,Uo),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=k(this,On,uM).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const u=k(this,On,RU).call(this,i);if(u.isSame)return null;u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||(n.stamps=new Map);const l=x(this,Uo)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(x(this,Rr)))n.stamps.set(x(this,Rr),{area:l,serialized:i}),i.bitmap=k(this,On,uM).call(this,!1);else if(x(this,Uo)){const u=n.stamps.get(x(this,Rr));l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=k(this,On,uM).call(this,!1))}return i}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};Yi=new WeakMap,Rr=new WeakMap,Gd=new WeakMap,Vh=new WeakMap,kd=new WeakMap,Wv=new WeakMap,Bu=new WeakMap,Qh=new WeakMap,Ou=new WeakMap,Uo=new WeakMap,Kv=new WeakMap,On=new WeakSet,w_=function(e,n=!1){if(!e){this.remove();return}G(this,Yi,e.bitmap),n||(G(this,Rr,e.id),G(this,Uo,e.isSvg)),e.file&&G(this,Wv,e.file.name),k(this,On,Zw).call(this)},R_=function(){if(G(this,Gd,null),this._uiManager.enableWaiting(!1),!!x(this,Bu)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&x(this,Yi)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&x(this,Yi)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},lM=function(){if(x(this,Rr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(x(this,Rr)).then(i=>k(this,On,w_).call(this,i,!0)).finally(()=>k(this,On,R_).call(this));return}if(x(this,Vh)){const i=x(this,Vh);G(this,Vh,null),this._uiManager.enableWaiting(!0),G(this,Gd,this._uiManager.imageManager.getFromUrl(i).then(r=>k(this,On,w_).call(this,r)).finally(()=>k(this,On,R_).call(this)));return}if(x(this,kd)){const i=x(this,kd);G(this,kd,null),this._uiManager.enableWaiting(!0),G(this,Gd,this._uiManager.imageManager.getFromFile(i).then(r=>k(this,On,w_).call(this,r)).finally(()=>k(this,On,R_).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Q_.supportedTypesStr;const n=this._uiManager._signal;G(this,Gd,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),k(this,On,w_).call(this,r)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>k(this,On,R_).call(this))),e.click()},Zw=function(){const{div:e}=this;let{width:n,height:i}=x(this,Yi);const[r,a]=this.pageDimensions,l=.75;if(this.width)n=this.width*r,i=this.height*a;else if(n>l*r||i>l*a){const g=Math.min(l*r/n,l*a/i);n*=g,i*=g}const[u,f]=this.parentDimensions;this.setDims(n*u/r,i*f/a),this._uiManager.enableWaiting(!1);const m=G(this,Bu,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),k(this,On,$w).call(this,n,i),k(this,On,wU).call(this),x(this,Kv)||(this.parent.addUndoableEditor(this),G(this,Kv,!0)),this._reportTelemetry({action:"inserted_image"}),x(this,Wv)&&m.setAttribute("aria-label",x(this,Wv))},CU=function(e,n){var l;const[i,r]=this.parentDimensions;this.width=e/i,this.height=n/r,(l=this._initialOptions)!=null&&l.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,x(this,Ou)!==null&&clearTimeout(x(this,Ou)),G(this,Ou,setTimeout(()=>{G(this,Ou,null),k(this,On,$w).call(this,e,n)},200))},cM=function(e,n){const{width:i,height:r}=x(this,Yi);let a=i,l=r,u=x(this,Yi);for(;a>2*e||l>2*n;){const f=a,m=l;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(a,l);g.getContext("2d").drawImage(u,0,0,f,m,0,0,a,l),u=g.transferToImageBitmap()}return u},$w=function(e,n){const i=new q8,r=Math.ceil(e*i.sx),a=Math.ceil(n*i.sy),l=x(this,Bu);if(!l||l.width===r&&l.height===a)return;l.width=r,l.height=a;const u=x(this,Uo)?x(this,Yi):k(this,On,cM).call(this,r,a),f=l.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(u,0,0,u.width,u.height,0,0,r,a)},uM=function(e){if(e){if(x(this,Uo)){const r=this._uiManager.imageManager.getSvgUrl(x(this,Rr));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=x(this,Yi),n.getContext("2d").drawImage(x(this,Yi),0,0),n.toDataURL()}if(x(this,Uo)){const[n,i]=this.pageDimensions,r=Math.round(this.width*n*np.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*np.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,a);return l.getContext("2d").drawImage(x(this,Yi),0,0,x(this,Yi).width,x(this,Yi).height,0,0,r,a),l.transferToImageBitmap()}return structuredClone(x(this,Yi))},wU=function(){this._uiManager._signal&&(G(this,Qh,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&k(this,On,CU).call(this,n.width,n.height)})),x(this,Qh).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=x(this,Qh))==null||e.disconnect(),G(this,Qh,null)},{once:!0}))},RU=function(e){var f;const{rect:n,pageIndex:i,accessibilityData:{altText:r}}=this._initialData,a=e.rect.every((m,g)=>Math.abs(m-n[g])<1),l=e.pageIndex===i,u=(((f=e.accessibilityData)==null?void 0:f.alt)||"")===r;return{isSame:a&&l&&u,isSameAltText:u}},Je(Q_,"_type","stamp"),Je(Q_,"_editorType",dn.STAMP);let Jw=Q_;var Lg,Jv,Nu,Vd,Xh,Po,Qd,Zv,$v,ta,jh,Ue,Xd,Or,LU,e5,n5,i5,hM;const lc=class lc{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:r,annotationLayer:a,drawLayer:l,textLayer:u,viewport:f,l10n:m}){Y(this,Or);Y(this,Lg);Y(this,Jv,!1);Y(this,Nu,null);Y(this,Vd,null);Y(this,Xh,null);Y(this,Po,new Map);Y(this,Qd,!1);Y(this,Zv,!1);Y(this,$v,!1);Y(this,ta,null);Y(this,jh,null);Y(this,Ue);const g=[...x(lc,Xd).values()];if(!lc._initialized){lc._initialized=!0;for(const v of g)v.initialize(m,t)}t.registerEditorTypes(g),G(this,Ue,t),this.pageIndex=e,this.div=n,G(this,Lg,r),G(this,Nu,a),this.viewport=f,G(this,ta,u),this.drawLayer=l,this._structTree=i,x(this,Ue).addLayer(this)}get isEmpty(){return x(this,Po).size===0}get isInvisible(){return this.isEmpty&&x(this,Ue).getMode()===dn.NONE}updateToolbar(t){x(this,Ue).updateToolbar(t)}updateMode(t=x(this,Ue).getMode()){switch(k(this,Or,hM).call(this),t){case dn.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case dn.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case dn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of x(lc,Xd).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=x(this,ta))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(x(this,Ue).getMode()!==dn.INK)return;if(!t){for(const n of x(this,Po).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){x(this,Ue).setEditingState(t)}addCommands(t){x(this,Ue).addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=x(this,Nu))==null||e.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of x(this,Po).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(x(this,Ue).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!x(this,Nu))return;const e=x(this,Nu).getEditableAnnotations();for(const n of e){if(n.hide(),x(this,Ue).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}}disable(){var i;G(this,$v,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of x(this,Po).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(x(this,Nu)){const r=x(this,Nu).getEditableAnnotations();for(const a of r){const{id:l}=a.data;if(x(this,Ue).isDeletedAnnotationElement(l))continue;let u=e.get(l);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=t.get(l),u&&(x(this,Ue).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}k(this,Or,hM).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of x(lc,Xd).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),G(this,$v,!1)}getEditableAnnotation(t){var e;return((e=x(this,Nu))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){x(this,Ue).getActive()!==t&&x(this,Ue).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=x(this,ta))!=null&&t.div&&!x(this,jh)){G(this,jh,new AbortController);const e=x(this,Ue).combinedSignal(x(this,jh));x(this,ta).div.addEventListener("pointerdown",k(this,Or,LU).bind(this),{signal:e}),x(this,ta).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=x(this,ta))!=null&&t.div&&x(this,jh)&&(x(this,jh).abort(),G(this,jh,null),x(this,ta).div.classList.remove("highlighting"))}enableClick(){if(x(this,Vd))return;G(this,Vd,new AbortController);const t=x(this,Ue).combinedSignal(x(this,Vd));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){var t;(t=x(this,Vd))==null||t.abort(),G(this,Vd,null)}attach(t){x(this,Po).set(t.id,t);const{annotationElementId:e}=t;e&&x(this,Ue).isDeletedAnnotationElement(e)&&x(this,Ue).removeDeletedAnnotationElement(t)}detach(t){var e;x(this,Po).delete(t.id),(e=x(this,Lg))==null||e.removePointerInTextLayer(t.contentDiv),!x(this,$v)&&t.annotationElementId&&x(this,Ue).addDeletedAnnotationElement(t)}remove(t){this.detach(t),x(this,Ue).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,x(this,Zv)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(x(this,Ue).addDeletedAnnotationElement(t.annotationElementId),di.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),x(this,Ue).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),x(this,Ue).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!x(this,Xh)&&(t._focusEventsAllowed=!1,G(this,Xh,setTimeout(()=>{G(this,Xh,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:x(this,Ue)._signal}),e.focus())},0))),t._structTreeParentId=(n=x(this,Lg))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return x(this,Ue).getId()}combinedSignal(t){return x(this,Ue).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=x(this,Or,e5))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){x(this,Ue).updateToolbar(t),x(this,Ue).updateMode(t);const{offsetX:n,offsetY:i}=k(this,Or,i5).call(this),r=this.getNextId(),a=k(this,Or,n5).call(this,{parent:this,id:r,x:n,y:i,uiManager:x(this,Ue),isCentered:!0,...e});a&&this.add(a)}async deserialize(t){var e;return await((e=x(lc,Xd).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,x(this,Ue)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),r=k(this,Or,n5).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:x(this,Ue),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(k(this,Or,i5).call(this),!0)}setSelected(t){x(this,Ue).setSelected(t)}toggleSelected(t){x(this,Ue).toggleSelected(t)}unselect(t){x(this,Ue).unselect(t)}pointerup(t){const{isMac:e}=Ia.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&x(this,Qd)){if(G(this,Qd,!1),!x(this,Jv)){G(this,Jv,!0);return}if(x(this,Ue).getMode()===dn.STAMP){x(this,Ue).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(x(this,Ue).getMode()===dn.HIGHLIGHT&&this.enableTextSelection(),x(this,Qd)){G(this,Qd,!1);return}const{isMac:e}=Ia.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;G(this,Qd,!0);const n=x(this,Ue).getActive();G(this,Jv,!n||n.isEmpty())}findNewParent(t,e,n){const i=x(this,Ue).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}destroy(){var t,e;((t=x(this,Ue).getActive())==null?void 0:t.parent)===this&&(x(this,Ue).commitOrRemove(),x(this,Ue).setActiveEditor(null)),x(this,Xh)&&(clearTimeout(x(this,Xh)),G(this,Xh,null));for(const n of x(this,Po).values())(e=x(this,Lg))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,x(this,Po).clear(),x(this,Ue).removeLayer(this)}render({viewport:t}){this.viewport=t,Yg(this.div,t);for(const e of x(this,Ue).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){x(this,Ue).commitOrRemove(),k(this,Or,hM).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Yg(this.div,{rotation:n}),e!==n)for(const i of x(this,Po).values())i.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return x(this,Ue).viewParameters.realScale}};Lg=new WeakMap,Jv=new WeakMap,Nu=new WeakMap,Vd=new WeakMap,Xh=new WeakMap,Po=new WeakMap,Qd=new WeakMap,Zv=new WeakMap,$v=new WeakMap,ta=new WeakMap,jh=new WeakMap,Ue=new WeakMap,Xd=new WeakMap,Or=new WeakSet,LU=function(t){x(this,Ue).unselectAll();const{target:e}=t;if(e===x(this,ta).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&x(this,ta).div.contains(e)){const{isMac:n}=Ia.platform;if(t.button!==0||t.ctrlKey&&n)return;x(this,Ue).showAllEditors("highlight",!0,!0),x(this,ta).div.classList.add("free"),this.toggleDrawing(),v3.startHighlighting(this,x(this,Ue).direction==="ltr",{target:x(this,ta).div,x:t.x,y:t.y}),x(this,ta).div.addEventListener("pointerup",()=>{x(this,ta).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:x(this,Ue)._signal}),t.preventDefault()}},e5=function(){return x(lc,Xd).get(x(this,Ue).getMode())},n5=function(t){const e=x(this,Or,e5);return e?new e.prototype.constructor(t):null},i5=function(){const{x:t,y:e,width:n,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),a=Math.max(0,e),l=Math.min(window.innerWidth,t+n),u=Math.min(window.innerHeight,e+i),f=(r+l)/2-t,m=(a+u)/2-e,[g,v]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:g,offsetY:v}},hM=function(){G(this,Zv,!0);for(const t of x(this,Po).values())t.isEmpty()&&t.remove();G(this,Zv,!1)},Je(lc,"_initialized",!1),Y(lc,Xd,new Map([Ow,kw,Jw,v3].map(t=>[t._editorType,t])));let t5=lc;var Iu,Sx,Cs,qh,Ex,r5,$g,a5,DU;const Tr=class Tr{constructor({pageIndex:t}){Y(this,$g);Y(this,Iu,null);Y(this,Sx,0);Y(this,Cs,new Map);Y(this,qh,new Map);this.pageIndex=t}setParent(t){if(!x(this,Iu)){G(this,Iu,t);return}if(x(this,Iu)!==t){if(x(this,Cs).size>0)for(const e of x(this,Cs).values())e.remove(),t.append(e);G(this,Iu,t)}}static get _svgFactory(){return Fn(this,"_svgFactory",new BR)}draw(t,e,n,i=!1){const r=Ea(this,Sx)._++,a=k(this,$g,a5).call(this,t.box);a.classList.add(...t.classNamesForDrawing);const l=Tr._svgFactory.createElement("defs");a.append(l);const u=Tr._svgFactory.createElement("path");l.append(u);const f=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",f),u.setAttribute("d",t.toSVGPath()),i&&x(this,qh).set(r,u);const m=k(this,$g,DU).call(this,l,f),g=Tr._svgFactory.createElement("use");return a.append(g),a.setAttribute("fill",e),a.setAttribute("fill-opacity",n),g.setAttribute("href",`#${f}`),x(this,Cs).set(r,a),{id:r,clipPathId:`url(#${m})`}}drawOutline(t){const e=Ea(this,Sx)._++,n=k(this,$g,a5).call(this,t.box);n.classList.add(...t.classNamesForOutlining);const i=Tr._svgFactory.createElement("defs");n.append(i);const r=Tr._svgFactory.createElement("path");i.append(r);const a=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",a),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let l;if(t.mustRemoveSelfIntersections){const m=Tr._svgFactory.createElement("mask");i.append(m),l=`mask_p${this.pageIndex}_${e}`,m.setAttribute("id",l),m.setAttribute("maskUnits","objectBoundingBox");const g=Tr._svgFactory.createElement("rect");m.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const v=Tr._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${a}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const u=Tr._svgFactory.createElement("use");n.append(u),u.setAttribute("href",`#${a}`),l&&u.setAttribute("mask",`url(#${l})`);const f=u.cloneNode();return n.append(f),u.classList.add("mainOutline"),f.classList.add("secondaryOutline"),x(this,Cs).set(e,n),e}finalizeLine(t,e){const n=x(this,qh).get(t);x(this,qh).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){x(this,Cs).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}updatePath(t,e){x(this,qh).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var n;k(n=Tr,Ex,r5).call(n,x(this,Cs).get(t),e)}show(t,e){x(this,Cs).get(t).classList.toggle("hidden",!e)}rotate(t,e){x(this,Cs).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){x(this,Cs).get(t).setAttribute("fill",e)}changeOpacity(t,e){x(this,Cs).get(t).setAttribute("fill-opacity",e)}addClass(t,e){x(this,Cs).get(t).classList.add(e)}removeClass(t,e){x(this,Cs).get(t).classList.remove(e)}getSVGRoot(t){return x(this,Cs).get(t)}remove(t){x(this,qh).delete(t),x(this,Iu)!==null&&(x(this,Cs).get(t).remove(),x(this,Cs).delete(t))}destroy(){G(this,Iu,null);for(const t of x(this,Cs).values())t.remove();x(this,Cs).clear(),x(this,qh).clear()}};Iu=new WeakMap,Sx=new WeakMap,Cs=new WeakMap,qh=new WeakMap,Ex=new WeakSet,r5=function(t,{x:e=0,y:n=0,width:i=1,height:r=1}={}){const{style:a}=t;a.top=`${100*n}%`,a.left=`${100*e}%`,a.width=`${100*i}%`,a.height=`${100*r}%`},$g=new WeakSet,a5=function(t){var n;const e=Tr._svgFactory.create(1,1,!0);return x(this,Iu).append(e),e.setAttribute("aria-hidden",!0),k(n=Tr,Ex,r5).call(n,e,t),e},DU=function(t,e){const n=Tr._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Tr._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i},Y(Tr,Ex);let s5=Tr;var tnt=sn.AbortException,ent=sn.AnnotationEditorLayer,nnt=sn.AnnotationEditorParamsType,int=sn.AnnotationEditorType,snt=sn.AnnotationEditorUIManager,BU=sn.AnnotationLayer,OU=sn.AnnotationMode,rnt=sn.ColorPicker,ant=sn.DOMSVGFactory,ont=sn.DrawLayer,lnt=sn.FeatureTest,NR=sn.GlobalWorkerOptions,cnt=sn.ImageKind,unt=sn.InvalidPDFException,hnt=sn.MissingPDFException,fnt=sn.OPS,dnt=sn.OutputScale,pnt=sn.PDFDataRangeTransport,mnt=sn.PDFDateString,gnt=sn.PDFWorker,vnt=sn.PasswordResponses,ynt=sn.PermissionFlag,_nt=sn.PixelsPerInch,Ant=sn.RenderingCancelledException,NU=sn.TextLayer,xnt=sn.UnexpectedResponseException,bnt=sn.Util,Snt=sn.VerbosityLevel,Ent=sn.XfaLayer,Mnt=sn.build,Tnt=sn.createValidAbsoluteUrl,Cnt=sn.fetchData,IU=sn.getDocument,wnt=sn.getFilenameFromUrl,Rnt=sn.getPdfFilenameFromUrl,Lnt=sn.getXfaPageViewport,Dnt=sn.isDataScheme,Bnt=sn.isPdfFile,Ont=sn.noContextMenu,Nnt=sn.normalizeUnicode,Int=sn.setLayerDimensions,Unt=sn.shadow,Pnt=sn.version;const Fnt=Object.freeze(Object.defineProperty({__proto__:null,AbortException:tnt,AnnotationEditorLayer:ent,AnnotationEditorParamsType:nnt,AnnotationEditorType:int,AnnotationEditorUIManager:snt,AnnotationLayer:BU,AnnotationMode:OU,ColorPicker:rnt,DOMSVGFactory:ant,DrawLayer:ont,FeatureTest:lnt,GlobalWorkerOptions:NR,ImageKind:cnt,InvalidPDFException:unt,MissingPDFException:hnt,OPS:fnt,OutputScale:dnt,PDFDataRangeTransport:pnt,PDFDateString:mnt,PDFWorker:gnt,PasswordResponses:vnt,PermissionFlag:ynt,PixelsPerInch:_nt,RenderingCancelledException:Ant,TextLayer:NU,UnexpectedResponseException:xnt,Util:bnt,VerbosityLevel:Snt,XfaLayer:Ent,build:Mnt,createValidAbsoluteUrl:Tnt,fetchData:Cnt,getDocument:IU,getFilenameFromUrl:wnt,getPdfFilenameFromUrl:Rnt,getXfaPageViewport:Lnt,isDataScheme:Dnt,isPdfFile:Bnt,noContextMenu:Ont,normalizeUnicode:Nnt,setLayerDimensions:Int,shadow:Unt,version:Pnt},Symbol.toStringTag,{value:"Module"}));var ar=function(s,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,r;n<i;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return s.concat(r||Array.prototype.slice.call(t))},Hnt=["onCopy","onCut","onPaste"],znt=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Gnt=["onFocus","onBlur"],knt=["onInput","onInvalid","onReset","onSubmit"],Vnt=["onLoad","onError"],Qnt=["onKeyDown","onKeyPress","onKeyUp"],Xnt=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],jnt=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],qnt=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Ynt=["onSelect"],Wnt=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Knt=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Jnt=["onScroll"],Znt=["onWheel"],$nt=["onAnimationStart","onAnimationEnd","onAnimationIteration"],tit=["onTransitionEnd"],eit=["onToggle"],nit=["onChange"],iit=ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar([],Hnt,!0),znt,!0),Gnt,!0),knt,!0),Vnt,!0),Qnt,!0),Xnt,!0),jnt,!0),qnt,!0),Ynt,!0),Wnt,!0),Knt,!0),Jnt,!0),Znt,!0),$nt,!0),tit,!0),nit,!0),eit,!0);function UU(s,t){var e={};return iit.forEach(function(n){var i=s[n];i&&(t?e[n]=function(r){return i(r,t(n))}:e[n]=i)}),e}function Qx(s){var t=!1,e=new Promise(function(n,i){s.then(function(r){return!t&&n(r)}).catch(function(r){return!t&&i(r)})});return{promise:e,cancel:function(){t=!0}}}function PU(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(t=0;t<i;t++)s[t]&&(e=PU(s[t]))&&(n&&(n+=" "),n+=e)}else for(e in s)s[e]&&(n&&(n+=" "),n+=e);return n}function U4(){for(var s,t,e=0,n="",i=arguments.length;e<i;e++)(s=arguments[e])&&(t=PU(s))&&(n&&(n+=" "),n+=t);return n}var sit="Invariant failed";function Si(s,t){if(!s)throw new Error(sit)}var e8,QD;function rit(){if(QD)return e8;QD=1;var s=function(){};return e8=s,e8}var ait=rit();const ea=I3(ait);var XD=Object.prototype.hasOwnProperty;function jD(s,t,e){for(e of s.keys())if(tv(e,t))return e}function tv(s,t){var e,n,i;if(s===t)return!0;if(s&&t&&(e=s.constructor)===t.constructor){if(e===Date)return s.getTime()===t.getTime();if(e===RegExp)return s.toString()===t.toString();if(e===Array){if((n=s.length)===t.length)for(;n--&&tv(s[n],t[n]););return n===-1}if(e===Set){if(s.size!==t.size)return!1;for(n of s)if(i=n,i&&typeof i=="object"&&(i=jD(t,i),!i)||!t.has(i))return!1;return!0}if(e===Map){if(s.size!==t.size)return!1;for(n of s)if(i=n[0],i&&typeof i=="object"&&(i=jD(t,i),!i)||!tv(n[1],t.get(i)))return!1;return!0}if(e===ArrayBuffer)s=new Uint8Array(s),t=new Uint8Array(t);else if(e===DataView){if((n=s.byteLength)===t.byteLength)for(;n--&&s.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===t.byteLength)for(;n--&&s[n]===t[n];);return n===-1}if(!e||typeof s=="object"){n=0;for(e in s)if(XD.call(s,e)&&++n&&!XD.call(t,e)||!(e in t)||!tv(s[e],t[e]))return!1;return Object.keys(t).length===n}}return s!==s&&t!==t}const FU=ht.createContext(null);function ev({children:s,type:t}){return J.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:s})}const oit="noopener noreferrer nofollow";class lit{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Si(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Si(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{Si(this.pdfDocument),Si(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Si(Array.isArray(e));const n=e[0];new Promise(i=>{Si(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{i(r)}).catch(()=>{Si(!1)}):typeof n=="number"?i(n):Si(!1)}).then(i=>{const r=i+1;Si(this.pdfViewer),Si(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:i,pageNumber:r})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;Si(this.pdfViewer),Si(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||oit,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const qD={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},P4=typeof window<"u",HU=P4&&window.location.protocol==="file:";function cit(s){return typeof s<"u"}function vm(s){return cit(s)&&s!==null}function uit(s){return typeof s=="string"}function hit(s){return s instanceof ArrayBuffer}function fit(s){return Si(P4),s instanceof Blob}function o5(s){return uit(s)&&/^data:/.test(s)}function YD(s){Si(o5(s));const[t="",e=""]=s.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function dit(){return P4&&window.devicePixelRatio||1}const zU="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function WD(){ea(!HU,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${zU}`)}function pit(){ea(!HU,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${zU}`)}function Jg(s){s!=null&&s.cancel&&s.cancel()}function l5(s,t){return Object.defineProperty(s,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.view[3]},configurable:!0}),s}function mit(s){return s.name==="RenderingCancelledException"}function git(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=i=>{if(!i.target)return e(new Error("Error while reading a file."));const{error:r}=i.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}function vit(s,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function yy(){return ht.useReducer(vit,{value:void 0,error:void 0})}var yit=function(s,t,e,n){function i(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function l(m){try{f(n.next(m))}catch(g){a(g)}}function u(m){try{f(n.throw(m))}catch(g){a(g)}}function f(m){m.done?r(m.value):i(m.value).then(l,u)}f((n=n.apply(s,t||[])).next())})},KD=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]]);return e};const{PDFDataRangeTransport:_it}=Fnt,Ait=(s,t)=>{switch(t){case qD.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");s(e);break}case qD.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");s(e);break}}};function JD(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const xit=ht.forwardRef(function(t,e){var{children:n,className:i,error:r="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:l,file:u,inputRef:f,imageResourcesPath:m,loading:g="Loading PDF",noData:v="No PDF file specified.",onItemClick:_,onLoadError:b,onLoadProgress:C,onLoadSuccess:T,onPassword:S=Ait,onSourceError:R,onSourceSuccess:B,options:D,renderMode:N,rotate:I}=t,F=KD(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[z,U]=yy(),{value:P,error:X}=z,[ot,it]=yy(),{value:ct,error:dt}=ot,Q=ht.useRef(new lit),tt=ht.useRef([]),et=ht.useRef(void 0),_t=ht.useRef(void 0);u&&u!==et.current&&JD(u)&&(ea(!tv(u,et.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),et.current=u),D&&D!==_t.current&&(ea(!tv(D,_t.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),_t.current=D);const K=ht.useRef({scrollPageIntoView:se=>{const{dest:Z,pageNumber:Kt,pageIndex:Ft=Kt-1}=se;if(_){_({dest:Z,pageIndex:Ft,pageNumber:Kt});return}const Vt=tt.current[Ft];if(Vt){Vt.scrollIntoView();return}ea(!1,`An internal link leading to page ${Kt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});ht.useImperativeHandle(e,()=>({linkService:Q,pages:tt,viewer:K}),[]);function at(){B&&B()}function xt(){X&&(ea(!1,X.toString()),R&&R(X))}function Et(){U({type:"RESET"})}ht.useEffect(Et,[u,U]);const lt=ht.useCallback(()=>yit(this,void 0,void 0,function*(){if(!u)return null;if(typeof u=="string")return o5(u)?{data:YD(u)}:(WD(),{url:u});if(u instanceof _it)return{range:u};if(hit(u))return{data:u};if(P4&&fit(u))return{data:yield git(u)};if(Si(typeof u=="object"),Si(JD(u)),"url"in u&&typeof u.url=="string"){if(o5(u.url)){const{url:se}=u,Z=KD(u,["url"]),Kt=YD(se);return Object.assign({data:Kt},Z)}WD()}return u}),[u]);ht.useEffect(()=>{const se=Qx(lt());return se.promise.then(Z=>{U({type:"RESOLVE",value:Z})}).catch(Z=>{U({type:"REJECT",error:Z})}),()=>{Jg(se)}},[lt,U]),ht.useEffect(()=>{if(!(typeof P>"u")){if(P===!1){xt();return}at()}},[P]);function wt(){ct&&(T&&T(ct),tt.current=new Array(ct.numPages),Q.current.setDocument(ct))}function Bt(){dt&&(ea(!1,dt.toString()),b&&b(dt))}ht.useEffect(function(){it({type:"RESET"})},[it,P]),ht.useEffect(function(){if(!P)return;const Z=D?Object.assign(Object.assign({},P),D):P,Kt=IU(Z);C&&(Kt.onProgress=C),S&&(Kt.onPassword=S);const Ft=Kt,Vt=Ft.promise.then(Gt=>{it({type:"RESOLVE",value:Gt})}).catch(Gt=>{Ft.destroyed||it({type:"REJECT",error:Gt})});return()=>{Vt.finally(()=>Ft.destroy())}},[D,it,P]),ht.useEffect(()=>{if(!(typeof ct>"u")){if(ct===!1){Bt();return}wt()}},[ct]),ht.useEffect(function(){Q.current.setViewer(K.current),Q.current.setExternalLinkRel(a),Q.current.setExternalLinkTarget(l)},[a,l]);const Ut=ht.useCallback((se,Z)=>{tt.current[se]=Z},[]),Wt=ht.useCallback(se=>{delete tt.current[se]},[]),ve=ht.useMemo(()=>({imageResourcesPath:m,linkService:Q.current,onItemClick:_,pdf:ct,registerPage:Ut,renderMode:N,rotate:I,unregisterPage:Wt}),[m,_,ct,Ut,N,I,Wt]),ee=ht.useMemo(()=>UU(F,()=>ct),[F,ct]);function Ye(){return J.jsx(FU.Provider,{value:ve,children:n})}function we(){return u?ct==null?J.jsx(ev,{type:"loading",children:typeof g=="function"?g():g}):ct===!1?J.jsx(ev,{type:"error",children:typeof r=="function"?r():r}):Ye():J.jsx(ev,{type:"no-data",children:typeof v=="function"?v():v})}return J.jsx("div",Object.assign({className:U4("react-pdf__Document",i),ref:f,style:{"--scale-factor":"1"}},ee,{children:we()}))});function GU(){return ht.useContext(FU)}function kU(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=s.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(r){e.forEach(function(a){typeof a=="function"?a(r):a&&(a.current=r)})}}const VU=ht.createContext(null),QU={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},bit=/^H(\d+)$/;function Sit(s){return s in QU}function F4(s){return"children"in s}function XU(s){return F4(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function Eit(s){const t={};if(F4(s)){const{role:e}=s,n=e.match(bit);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(Sit(e)){const i=QU[e];i&&(t.role=i)}}return t}function jU(s){const t={};if(F4(s)){if(s.alt!==void 0&&(t["aria-label"]=s.alt),s.lang!==void 0&&(t.lang=s.lang),XU(s)){const[e]=s.children;if(e){const n=jU(e);return Object.assign(Object.assign({},t),n)}}}else"id"in s&&(t["aria-owns"]=s.id);return t}function Mit(s){return s?Object.assign(Object.assign({},Eit(s)),jU(s)):null}function qU({className:s,node:t}){const e=ht.useMemo(()=>Mit(t),[t]),n=ht.useMemo(()=>!F4(t)||XU(t)?null:t.children.map((i,r)=>J.jsx(qU,{node:i},r)),[t]);return J.jsx("span",Object.assign({className:s},e,{children:n}))}function H4(){return ht.useContext(VU)}function Tit(){const s=H4();Si(s);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=s,[n,i]=yy(),{value:r,error:a}=n,{customTextRenderer:l,page:u}=s;function f(){r&&e&&e(r)}function m(){a&&(ea(!1,a.toString()),t&&t(a))}return ht.useEffect(function(){i({type:"RESET"})},[i,u]),ht.useEffect(function(){if(l||!u)return;const v=Qx(u.getStructTree()),_=v;return v.promise.then(b=>{i({type:"RESOLVE",value:b})}).catch(b=>{i({type:"REJECT",error:b})}),()=>Jg(_)},[l,u,i]),ht.useEffect(()=>{if(r!==void 0){if(r===!1){m();return}f()}},[r]),r?J.jsx(qU,{className:"react-pdf__Page__structTree structTree",node:r}):null}const ZD=OU;function Cit(s){const t=H4();Si(t);const e=Object.assign(Object.assign({},t),s),{_className:n,canvasBackground:i,devicePixelRatio:r=dit(),onRenderError:a,onRenderSuccess:l,page:u,renderForms:f,renderTextLayer:m,rotate:g,scale:v}=e,{canvasRef:_}=s;Si(u);const b=ht.useRef(null);function C(){u&&l&&l(l5(u,v))}function T(D){mit(D)||(ea(!1,D.toString()),a&&a(D))}const S=ht.useMemo(()=>u.getViewport({scale:v*r,rotation:g}),[r,u,g,v]),R=ht.useMemo(()=>u.getViewport({scale:v,rotation:g}),[u,g,v]);ht.useEffect(function(){if(!u)return;u.cleanup();const{current:N}=b;if(!N)return;N.width=S.width,N.height=S.height,N.style.width=`${Math.floor(R.width)}px`,N.style.height=`${Math.floor(R.height)}px`,N.style.visibility="hidden";const I={annotationMode:f?ZD.ENABLE_FORMS:ZD.ENABLE,canvasContext:N.getContext("2d",{alpha:!1}),viewport:S};i&&(I.background=i);const F=u.render(I),z=F;return F.promise.then(()=>{N.style.visibility="",C()}).catch(T),()=>Jg(z)},[i,u,f,S,R]);const B=ht.useCallback(()=>{const{current:D}=b;D&&(D.width=0,D.height=0)},[]);return ht.useEffect(()=>B,[B]),J.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:kU(_,b),style:{display:"block",userSelect:"none"},children:m?J.jsx(Tit,{}):null})}function wit(s){return"str"in s}function Rit(){const s=H4();Si(s);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:i,onRenderTextLayerSuccess:r,page:a,pageIndex:l,pageNumber:u,rotate:f,scale:m}=s;Si(a);const[g,v]=yy(),{value:_,error:b}=g,C=ht.useRef(null);ea(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function T(){_&&n&&n(_)}function S(){b&&(ea(!1,b.toString()),e&&e(b))}ht.useEffect(function(){v({type:"RESET"})},[a,v]),ht.useEffect(function(){if(!a)return;const z=Qx(a.getTextContent()),U=z;return z.promise.then(P=>{v({type:"RESOLVE",value:P})}).catch(P=>{v({type:"REJECT",error:P})}),()=>Jg(U)},[a,v]),ht.useEffect(()=>{if(_!==void 0){if(_===!1){S();return}T()}},[_]);const R=ht.useCallback(()=>{r&&r()},[r]),B=ht.useCallback(F=>{ea(!1,F.toString()),i&&i(F)},[i]);function D(){const F=C.current;F&&F.classList.add("selecting")}function N(){const F=C.current;F&&F.classList.remove("selecting")}const I=ht.useMemo(()=>a.getViewport({scale:m,rotation:f}),[a,f,m]);return ht.useLayoutEffect(function(){if(!a||!_)return;const{current:z}=C;if(!z)return;z.innerHTML="";const U=a.streamTextContent({includeMarkedContent:!0}),P={container:z,textContentSource:U,viewport:I},X=new NU(P),ot=X;return X.render().then(()=>{const it=document.createElement("div");it.className="endOfContent",z.append(it);const ct=z.querySelectorAll('[role="presentation"]');if(t){let dt=0;_.items.forEach((Q,tt)=>{if(!wit(Q))return;const et=ct[dt];if(!et)return;const _t=t(Object.assign({pageIndex:l,pageNumber:u,itemIndex:tt},Q));et.innerHTML=_t,dt+=Q.str&&Q.hasEOL?2:1})}R()}).catch(B),()=>Jg(ot)},[t,B,R,a,l,u,_,I]),J.jsx("div",{className:U4("react-pdf__Page__textContent","textLayer"),onMouseUp:N,onMouseDown:D,ref:C})}function Lit(){const s=GU(),t=H4();Si(t);const e=Object.assign(Object.assign({},s),t),{imageResourcesPath:n,linkService:i,onGetAnnotationsError:r,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:u,page:f,pdf:m,renderForms:g,rotate:v,scale:_=1}=e;Si(m),Si(f),Si(i);const[b,C]=yy(),{value:T,error:S}=b,R=ht.useRef(null);ea(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function B(){T&&a&&a(T)}function D(){S&&(ea(!1,S.toString()),r&&r(S))}ht.useEffect(function(){C({type:"RESET"})},[C,f]),ht.useEffect(function(){if(!f)return;const U=Qx(f.getAnnotations()),P=U;return U.promise.then(X=>{C({type:"RESOLVE",value:X})}).catch(X=>{C({type:"REJECT",error:X})}),()=>{Jg(P)}},[C,f]),ht.useEffect(()=>{if(T!==void 0){if(T===!1){D();return}B()}},[T]);function N(){u&&u()}function I(z){ea(!1,`${z}`),l&&l(z)}const F=ht.useMemo(()=>f.getViewport({scale:_,rotation:v}),[f,v,_]);return ht.useEffect(function(){if(!m||!f||!i||!T)return;const{current:U}=R;if(!U)return;const P=F.clone({dontFlip:!0}),X={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:U,l10n:null,page:f,structTreeLayer:null,viewport:P},ot={annotations:T,annotationStorage:m.annotationStorage,div:U,imageResourcesPath:n,linkService:i,page:f,renderForms:g,viewport:P};U.innerHTML="";try{new BU(X).render(ot),N()}catch(it){I(it)}return()=>{}},[T,n,i,f,m,g,F]),J.jsx("div",{className:U4("react-pdf__Page__annotations","annotationLayer"),ref:R})}var Dit=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]]);return e};const $D=1;function Bit(s){const t=GU(),e=Object.assign(Object.assign({},t),s),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:r,canvasRef:a,children:l,className:u,customRenderer:f,customTextRenderer:m,devicePixelRatio:g,error:v="Failed to load the page.",height:_,inputRef:b,loading:C="Loading page",noData:T="No page specified.",onGetAnnotationsError:S,onGetAnnotationsSuccess:R,onGetStructTreeError:B,onGetStructTreeSuccess:D,onGetTextError:N,onGetTextSuccess:I,onLoadError:F,onLoadSuccess:z,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:P,onRenderError:X,onRenderSuccess:ot,onRenderTextLayerError:it,onRenderTextLayerSuccess:ct,pageIndex:dt,pageNumber:Q,pdf:tt,registerPage:et,renderAnnotationLayer:_t=!0,renderForms:K=!1,renderMode:at="canvas",renderTextLayer:xt=!0,rotate:Et,scale:lt=$D,unregisterPage:wt,width:Bt}=e,Ut=Dit(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Wt,ve]=yy(),{value:ee,error:Ye}=Wt,we=ht.useRef(null);Si(tt);const se=vm(Q)?Q-1:dt??null,Z=Q??(vm(dt)?dt+1:null),Kt=Et??(ee?ee.rotate:null),Ft=ht.useMemo(()=>{if(!ee)return null;let ne=1;const te=lt??$D;if(Bt||_){const ge=ee.getViewport({scale:1,rotation:Kt});Bt?ne=Bt/ge.width:_&&(ne=_/ge.height)}return te*ne},[_,ee,Kt,lt,Bt]);ht.useEffect(function(){return()=>{vm(se)&&i&&wt&&wt(se)}},[i,tt,se,wt]);function Vt(){if(z){if(!ee||!Ft)return;z(l5(ee,Ft))}if(i&&et){if(!vm(se)||!we.current)return;et(se,we.current)}}function Gt(){Ye&&(ea(!1,Ye.toString()),F&&F(Ye))}ht.useEffect(function(){ve({type:"RESET"})},[ve,tt,se]),ht.useEffect(function(){if(!tt||!Z)return;const te=Qx(tt.getPage(Z)),ge=te;return te.promise.then(De=>{ve({type:"RESOLVE",value:De})}).catch(De=>{ve({type:"REJECT",error:De})}),()=>Jg(ge)},[ve,tt,Z]),ht.useEffect(()=>{if(ee!==void 0){if(ee===!1){Gt();return}Vt()}},[ee,Ft]);const be=ht.useMemo(()=>ee&&vm(se)&&Z&&vm(Kt)&&vm(Ft)?{_className:n,canvasBackground:r,customTextRenderer:m,devicePixelRatio:g,onGetAnnotationsError:S,onGetAnnotationsSuccess:R,onGetStructTreeError:B,onGetStructTreeSuccess:D,onGetTextError:N,onGetTextSuccess:I,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:P,onRenderError:X,onRenderSuccess:ot,onRenderTextLayerError:it,onRenderTextLayerSuccess:ct,page:ee,pageIndex:se,pageNumber:Z,renderForms:K,renderTextLayer:xt,rotate:Kt,scale:Ft}:null,[n,r,m,g,S,R,B,D,N,I,U,P,X,ot,it,ct,ee,se,Z,K,xt,Kt,Ft]),qt=ht.useMemo(()=>UU(Ut,()=>ee&&(Ft?l5(ee,Ft):void 0)),[Ut,ee,Ft]),$=`${se}@${Ft}/${Kt}`;function V(){switch(at){case"custom":return Si(f),J.jsx(f,{},`${$}_custom`);case"none":return null;case"canvas":default:return J.jsx(Cit,{canvasRef:a},`${$}_canvas`)}}function vt(){return xt?J.jsx(Rit,{},`${$}_text`):null}function It(){return _t?J.jsx(Lit,{},`${$}_annotations`):null}function Xt(){return J.jsxs(VU.Provider,{value:be,children:[V(),vt(),It(),l]})}function Ot(){return Z?tt===null||ee===void 0||ee===null?J.jsx(ev,{type:"loading",children:typeof C=="function"?C():C}):tt===!1||ee===!1?J.jsx(ev,{type:"error",children:typeof v=="function"?v():v}):Xt():J.jsx(ev,{type:"no-data",children:typeof T=="function"?T():T})}return J.jsx("div",Object.assign({className:U4(n,u),"data-page-number":Z,ref:kU(b,we),style:{"--scale-factor":`${Ft}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},qt,{children:Ot()}))}pit();NR.workerSrc="pdf.worker.mjs";function Oit(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 36.57142857142857 0 Q 20.571428571428573 0 10.285714285714286 10.285714285714286 L 10.285714285714286 10.285714285714286 L 10.285714285714286 10.285714285714286 Q 0 20.571428571428573 0 36.57142857142857 L 0 146.28571428571428 L 0 146.28571428571428 Q 0 162.28571428571428 10.285714285714286 172.57142857142858 Q 20.571428571428573 182.85714285714286 36.57142857142857 182.85714285714286 Q 52.57142857142857 182.85714285714286 62.857142857142854 172.57142857142858 Q 73.14285714285714 162.28571428571428 73.14285714285714 146.28571428571428 L 73.14285714285714 73.14285714285714 L 73.14285714285714 73.14285714285714 L 146.28571428571428 73.14285714285714 L 146.28571428571428 73.14285714285714 Q 162.28571428571428 73.14285714285714 172.57142857142858 62.857142857142854 Q 182.85714285714286 52.57142857142857 182.85714285714286 36.57142857142857 Q 182.85714285714286 20.571428571428573 172.57142857142858 10.285714285714286 Q 162.28571428571428 0 146.28571428571428 0 L 36.57142857142857 0 L 36.57142857142857 0 Z M 73.14285714285714 365.7142857142857 Q 73.14285714285714 349.7142857142857 62.857142857142854 339.42857142857144 L 62.857142857142854 339.42857142857144 L 62.857142857142854 339.42857142857144 Q 52.57142857142857 329.14285714285717 36.57142857142857 329.14285714285717 Q 20.571428571428573 329.14285714285717 10.285714285714286 339.42857142857144 Q 0 349.7142857142857 0 365.7142857142857 L 0 475.42857142857144 L 0 475.42857142857144 Q 0 491.42857142857144 10.285714285714286 501.7142857142857 Q 20.571428571428573 512 36.57142857142857 512 L 146.28571428571428 512 L 146.28571428571428 512 Q 162.28571428571428 512 172.57142857142858 501.7142857142857 Q 182.85714285714286 491.42857142857144 182.85714285714286 475.42857142857144 Q 182.85714285714286 459.42857142857144 172.57142857142858 449.14285714285717 Q 162.28571428571428 438.85714285714283 146.28571428571428 438.85714285714283 L 73.14285714285714 438.85714285714283 L 73.14285714285714 438.85714285714283 L 73.14285714285714 365.7142857142857 L 73.14285714285714 365.7142857142857 Z M 365.7142857142857 0 Q 349.7142857142857 0 339.42857142857144 10.285714285714286 L 339.42857142857144 10.285714285714286 L 339.42857142857144 10.285714285714286 Q 329.14285714285717 20.571428571428573 329.14285714285717 36.57142857142857 Q 329.14285714285717 52.57142857142857 339.42857142857144 62.857142857142854 Q 349.7142857142857 73.14285714285714 365.7142857142857 73.14285714285714 L 438.85714285714283 73.14285714285714 L 438.85714285714283 73.14285714285714 L 438.85714285714283 146.28571428571428 L 438.85714285714283 146.28571428571428 Q 438.85714285714283 162.28571428571428 449.14285714285717 172.57142857142858 Q 459.42857142857144 182.85714285714286 475.42857142857144 182.85714285714286 Q 491.42857142857144 182.85714285714286 501.7142857142857 172.57142857142858 Q 512 162.28571428571428 512 146.28571428571428 L 512 36.57142857142857 L 512 36.57142857142857 Q 512 20.571428571428573 501.7142857142857 10.285714285714286 Q 491.42857142857144 0 475.42857142857144 0 L 365.7142857142857 0 L 365.7142857142857 0 Z M 512 365.7142857142857 Q 512 349.7142857142857 501.7142857142857 339.42857142857144 L 501.7142857142857 339.42857142857144 L 501.7142857142857 339.42857142857144 Q 491.42857142857144 329.14285714285717 475.42857142857144 329.14285714285717 Q 459.42857142857144 329.14285714285717 449.14285714285717 339.42857142857144 Q 438.85714285714283 349.7142857142857 438.85714285714283 365.7142857142857 L 438.85714285714283 438.85714285714283 L 438.85714285714283 438.85714285714283 L 365.7142857142857 438.85714285714283 L 365.7142857142857 438.85714285714283 Q 349.7142857142857 438.85714285714283 339.42857142857144 449.14285714285717 Q 329.14285714285717 459.42857142857144 329.14285714285717 475.42857142857144 Q 329.14285714285717 491.42857142857144 339.42857142857144 501.7142857142857 Q 349.7142857142857 512 365.7142857142857 512 L 475.42857142857144 512 L 475.42857142857144 512 Q 491.42857142857144 512 501.7142857142857 501.7142857142857 Q 512 491.42857142857144 512 475.42857142857144 L 512 365.7142857142857 L 512 365.7142857142857 Z"})})}function Nit(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 128 0 Q 101 1 83 19 L 83 19 L 83 19 Q 65 37 64 64 L 64 448 L 64 448 Q 65 475 83 493 Q 101 511 128 512 L 384 512 L 384 512 Q 411 511 429 493 Q 447 475 448 448 L 448 160 L 448 160 L 320 160 L 320 160 Q 306 160 297 151 Q 288 142 288 128 L 288 0 L 288 0 L 128 0 L 128 0 Z M 320 0 L 320 128 L 320 0 L 320 128 L 448 128 L 448 128 L 320 0 L 320 0 Z M 280 232 L 280 334 L 280 232 L 280 334 L 311 303 L 311 303 Q 328 289 345 303 Q 359 320 345 337 L 273 409 L 273 409 Q 256 423 239 409 L 167 337 L 167 337 Q 153 320 167 303 Q 184 289 201 303 L 232 334 L 232 334 L 232 232 L 232 232 Q 234 210 256 208 Q 278 210 280 232 L 280 232 Z"})})}const Iit=he.div`
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  width: 100%;
  z-index: 100;
  background-color: rgba(255, 255, 255, 0.5);
`,Uit=he.img`
  width: 8rem;
`,Pit="/vibefolio/loader/Loading1.png",Fit="/vibefolio/loader/Loading2.png",Hit="/vibefolio/loader/Loading3.png",zit="/vibefolio/loader/Loading4.png",Git="/vibefolio/loader/Loading5.png",kit="/vibefolio/loader/Loading6.png",tB=[Pit,Fit,Hit,zit,Git,kit],eB=["cursor-loading-start","cursor-loading-mid","cursor-loading-end"],nB=300;function YU(){const[s,t]=ht.useState(0),[e,n]=ht.useState(0),i=ht.useRef(performance.now()),r=ht.useRef(performance.now()),a=ht.useRef(0);return ht.useEffect(()=>{const l=u=>{const f=u-i.current,m=u-r.current;f>=nB&&(t(g=>(g+1)%tB.length),i.current=u),m>=nB*2&&(n(g=>(g+1)%eB.length),r.current=u),a.current=requestAnimationFrame(l)};return a.current=requestAnimationFrame(l),()=>{a.current&&cancelAnimationFrame(a.current)}},[]),J.jsx(Iit,{className:eB[e],children:J.jsx(Uit,{src:tB[s],alt:"Loading frame"})})}NR.workerSrc="pdfjs/pdf.worker.min.mjs";const n8="pdf/cv_antonov_mykyta.pdf";function Vit({modal:s}){const[t,e]=ht.useState(!0),n=()=>{window.open(n8,"_blank","noopener noreferrer")},i=async()=>{fetch(n8).then(r=>{r.blob().then(a=>{const l=window.URL.createObjectURL(a),u=document.createElement("a");u.href=l,u.download="cv_antonov_mykyta.pdf",u.click()})})};return J.jsxs(a0,{modal:s,buttons:[{Icon:J.jsx(Oit,{}),onClick:n,key:"expand"},{Icon:J.jsx(Nit,{}),onClick:()=>setTimeout(i,0),key:"download"}],children:[t&&J.jsx(YU,{}),J.jsx(xit,{onLoadSuccess:()=>e(!1),onLoadError:()=>e(!1),file:n8,children:J.jsx(Bit,{width:s.dimensions.width,renderTextLayer:!1,renderAnnotationLayer:!1,pageNumber:1})})]})}const Qit=he.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  padding: 0.5rem;
`;he.div`
  display: flex;
  width: 100%;
  // padding-left: 50px;
  // padding-top: 10px;
  // height: 50px;
`;he.button`
  position: relative;
  // width: 120px;
  height: 100%;
  background-color: ${({backgroundColor:s})=>s};

  border: 2px solid ${({theme:s})=>s.pallet.textColor};
  border-bottom: ${({backgroundColor:s})=>`0.15rem solid ${s}`};
  border-top-left-radius: 4px;
  border-top-right-radius: 50%;
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;

  // margin-right: -32px;
  // transform: translateY(2px);

  z-index: ${({zIndex:s,isActive:t})=>t?10:s};

  color: ${({isActive:s})=>s?"var(--white-color)":"inherit"};

  &:hover {
    color: var(--white-color);
  }
`;const Xit=he.div`
  display: flex;
  width: 100%;
  height: 100%;
  background-color: ${({backgroundColor:s})=>s||"var(--white-color)"};
  z-index: 100;
  border: 2px solid ${({theme:s})=>s.pallet.textColor};
  // border-top-left-radius: 10px;
  // border-top-right-radius: 10px;
  // border-bottom-left-radius: 0;
  // border-bottom-right-radius: 0;
  border-radius: 10px;
  padding: 0.5rem;
`,jit=he.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  gap: 1rem;
`,EE=he.input`
  width: 100%;
  height: 1.5rem;
  background-color: var(--white-color);
  border-radius: 4px;
  font-weight: 600;
  border: 0.15rem solid ${({theme:s})=>s.pallet.textColor};
  outline: none;
  padding: 1rem 0.5rem;

  &:disabled {
    color: gray;
    cursor: url("/vibefolio/cursor/Win95Stop.cur"), not-allowed;
  }
`,i8=he.label`
  display: flex;
  align-items: center;
  color: var(--white-color);

  span {
    display: inline-block;
    width: 5rem;
  }
`,iB=he.div`
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  width: 100%;
  height: fit-content;
`,qit=he.textarea`
  width: 100%;
  height: 100%;
  border-radius: 4px;
  resize: none;
  outline: none;
  border: 0.15rem solid ${({theme:s})=>s.pallet.textColor};
`,Yit=he.div`
  display: flex;
  justify-content: flex-end;
  align-items: center;
`,Wit=he.button`
  width: fit-content;
  padding: 0.25rem;
  font-weight: 600;
  border-radius: 4px;
  color: var(--white-color);
  box-shadow: 2px 2px 0px 1px rgba(0, 0, 0, 0.75);
`;he.div`
  display: grid;
  // grid-template-columns: 150px 1fr;
  width: 100%;
  background-color: ${({theme:s})=>s.pallet.thirdColor};
  border-radius: 4px;
`;he.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  border-right: 0.15rem solid ${({theme:s})=>s.pallet.textColor};
`;he.button`
  display: flex;
  flex-direction: column;
  align-items: self-start;
  width: 100%;
  height: min-content;
  line-height: 1.2;
  // padding: 4px 2px;
`;he.span`
  display: inline-block;
  font-weight: 900;

  max-width: 98%;
  white-space: nowrap;
  overflow: hidden !important;
  text-overflow: ellipsis;
`;he.span`
  display: inline-block;
  font-weight: 600;
  font-family: "monospace";

  max-width: 98%;
  white-space: nowrap;
  overflow: hidden !important;
  text-overflow: ellipsis;
`;he.span`
  display: inline-block;
  opacity: 0.7;

  max-width: 98%;
  white-space: nowrap;
  overflow: hidden !important;
  text-overflow: ellipsis;
`;he.div`
  display: flex;
  flex-direction: column;
  width: 100%;
`;class Xx{constructor(t=0,e="Network Error"){this.status=t,this.text=e}}const Kit=()=>{if(!(typeof localStorage>"u"))return{get:s=>Promise.resolve(localStorage.getItem(s)),set:(s,t)=>Promise.resolve(localStorage.setItem(s,t)),remove:s=>Promise.resolve(localStorage.removeItem(s))}},Dr={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Kit()},IR=s=>s?typeof s=="string"?{publicKey:s}:s.toString()==="[object Object]"?s:{}:{},Jit=(s,t="https://api.emailjs.com")=>{if(!s)return;const e=IR(s);Dr.publicKey=e.publicKey,Dr.blockHeadless=e.blockHeadless,Dr.storageProvider=e.storageProvider,Dr.blockList=e.blockList,Dr.limitRate=e.limitRate,Dr.origin=e.origin||t},WU=async(s,t,e={})=>{const n=await fetch(Dr.origin+s,{method:"POST",headers:e,body:t}),i=await n.text(),r=new Xx(n.status,i);if(n.ok)return r;throw r},KU=(s,t,e)=>{if(!s||typeof s!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e||typeof e!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Zit=s=>{if(s&&s.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},JU=s=>s.webdriver||!s.languages||s.languages.length===0,ZU=()=>new Xx(451,"Unavailable For Headless Browser"),$it=(s,t)=>{if(!Array.isArray(s))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},tst=s=>{var t;return!((t=s.list)!=null&&t.length)||!s.watchVariable},est=(s,t)=>s instanceof FormData?s.get(t):s[t],$U=(s,t)=>{if(tst(s))return!1;$it(s.list,s.watchVariable);const e=est(t,s.watchVariable);return typeof e!="string"?!1:s.list.includes(e)},tP=()=>new Xx(403,"Forbidden"),nst=(s,t)=>{if(typeof s!="number"||s<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},ist=async(s,t,e)=>{const n=Number(await e.get(s)||0);return t-Date.now()+n},eP=async(s,t,e)=>{if(!t.throttle||!e)return!1;nst(t.throttle,t.id);const n=t.id||s;return await ist(n,t.throttle,e)>0?!0:(await e.set(n,Date.now().toString()),!1)},nP=()=>new Xx(429,"Too Many Requests"),sst=async(s,t,e,n)=>{const i=IR(n),r=i.publicKey||Dr.publicKey,a=i.blockHeadless||Dr.blockHeadless,l=i.storageProvider||Dr.storageProvider,u={...Dr.blockList,...i.blockList},f={...Dr.limitRate,...i.limitRate};return a&&JU(navigator)?Promise.reject(ZU()):(KU(r,s,t),Zit(e),e&&$U(u,e)?Promise.reject(tP()):await eP(location.pathname,f,l)?Promise.reject(nP()):WU("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:r,service_id:s,template_id:t,template_params:e}),{"Content-type":"application/json"}))},rst=s=>{if(!s||s.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},ast=s=>typeof s=="string"?document.querySelector(s):s,ost=async(s,t,e,n)=>{const i=IR(n),r=i.publicKey||Dr.publicKey,a=i.blockHeadless||Dr.blockHeadless,l=Dr.storageProvider||i.storageProvider,u={...Dr.blockList,...i.blockList},f={...Dr.limitRate,...i.limitRate};if(a&&JU(navigator))return Promise.reject(ZU());const m=ast(e);KU(r,s,t),rst(m);const g=new FormData(m);return $U(u,g)?Promise.reject(tP()):await eP(location.pathname,f,l)?Promise.reject(nP()):(g.append("lib_version","4.4.1"),g.append("service_id",s),g.append("template_id",t),g.append("user_id",r),WU("/api/v1.0/email/send-form",g))},lst={init:Jit,send:sst,sendForm:ost,EmailJSResponseStatus:Xx};function cst(){const[s,t]=ht.useState(!1),e=ht.useRef(null),n=xy(),i=async r=>{if(r.preventDefault(),!!e.current){t(!0);try{await lst.sendForm("service_lm3u50h","template_7vobhdn",e.current,{publicKey:"omhAz0lvyswze0XoT"}),n(k8(`The letter has been sent. 
I will contact you soon `))}catch(a){console.error(a),n(k8("I apologize, something went wrong ","fail"))}finally{t(!1)}}};return J.jsxs(jit,{ref:e,onSubmit:i,children:[s&&J.jsx(YU,{}),J.jsxs(iB,{children:[J.jsxs(i8,{children:[J.jsx("span",{children:"From:"}),J.jsx(EE,{type:"email",name:"email",required:!0})]}),J.jsxs(i8,{children:[J.jsx("span",{children:"To:"}),J.jsx(EE,{disabled:!0,type:"email",name:"fake_to",value:"Me"})]}),J.jsxs(i8,{children:[J.jsx("span",{children:"Name:"}),J.jsx(EE,{type:"text",name:"name",required:!0})]})]}),J.jsxs(iB,{style:{flexGrow:1},children:[J.jsx(EE,{placeholder:"Title",type:"text",name:"title",required:!0}),J.jsx(qit,{placeholder:"Message",name:"message",required:!0})]}),J.jsx(Yit,{children:J.jsx(Wit,{className:"cursor-pointer",type:"submit",children:"Send"})})]})}function ust({modal:s}){return J.jsx(a0,{modal:s,children:J.jsx(Qit,{children:J.jsx(Xit,{backgroundColor:"#345995",children:J.jsx(cst,{})})})})}const sB=document.getElementById("modal-root");function hst(){const s=v5(t=>t.modals);return!sB||s.modals.length===0?null:CN.createPortal(J.jsx(J.Fragment,{children:s.modals.filter(({isOpen:t})=>t).map(t=>{switch(t.type){case"photo":return J.jsx(g$,{modal:t},t.type);case"about_me":return J.jsx(y$,{modal:t},t.type);case"skills":return J.jsx(C$,{modal:t},t.type);case"experience":return J.jsx(j$,{modal:t},t.type);case"folder":return J.jsx(J$,{modal:t},t.type);case"pdf":return J.jsx(Vit,{modal:t},t.type);case"contact_me":return J.jsx(ust,{modal:t},t.type);default:return null}})}),sB)}const fst=Ay`
  0%{
    animation-timing-function:$ease-in-quint;
    transform:scale(0.000,0.0001) translate3d(0,0,0);
    -webkit-filter:brightness(50);
    filter:brightness(50);
  }

  60%{
    transform:scale(1.3,0.001) translate3d(0,0,0);
    -webkit-filter:brightness(10);
    filter:brightness(10);
  }

  100%{
    transform:scale(1,1.3) translate3d(0,0,0);
    -webkit-filter:brightness(1);
    filter:brightness(1);
    opacity:1;
  }
`,dst=he.div`
  position: absolute;
  inset: 0;
  z-index: 9999;
  background-color: black;
`,pst=he.div`
  width: 100%;
  height: 100%;
  animation: ${fst} 1s linear forwards;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: black;
`,mst=he.pre`
  font-family: monospace;
  color: #00ffcc;
`,gst=he.span`
  color: #ff6347;
`,rB=he.span`
  color: #ffa500;
`,vst={clickDown:"sounds/click-down.mp3",clickUp:"sounds/click-up.mp3",intro:"sounds/intro-sound.mp3",notification:"sounds/pop.wav"},iP=ht.createContext(null),UR=()=>{const s=ht.useContext(iP);if(!s)throw new Error("useSounds must be used within SoundProvider");return s};function yst({children:s}){const[t,e]=ht.useState(!1),[n,i]=ht.useState(!1),[r,a]=ht.useState(0),l=ht.useRef(null),u=ht.useRef(new Map);ht.useEffect(()=>{l.current=new AudioContext;const C=async(S,R)=>{const D=await(await fetch(R)).arrayBuffer(),N=await l.current.decodeAudioData(D);u.current.set(S,N),a(I=>I+1)};(async()=>{const S=Object.entries(vst);await Promise.all(S.map(([R,B])=>C(R,B))),i(!0)})()},[]);const f=ht.useCallback(C=>{if(t||!n)return;const T=l.current,S=u.current.get(C);if(!T||!S)return;const R=T.createBufferSource();R.buffer=S,R.connect(T.destination),R.start(0)},[t,n]),m=ht.useCallback(()=>f("clickDown"),[f]),g=ht.useCallback(()=>f("clickUp"),[f]),v=ht.useCallback(()=>f("intro"),[f]),_=ht.useCallback(()=>f("notification"),[f]),b=ht.useMemo(()=>({playClickDown:m,playClickUp:g,playIntro:v,playNotification:_,mute:()=>e(!0),unmute:()=>e(!1),isLoaded:n,loadProgress:r,isMuted:t}),[m,g,v,_,n,r,t]);return J.jsx(iP.Provider,{value:b,children:s})}function _st({onFinish:s}){const{progress:t}=nW(),{start:e}=aN(),[n,i]=ht.useState(!1),{playIntro:r,isLoaded:a,loadProgress:l}=UR(),u=t===100&&n&&a,[f,m]=ht.useState("");ht.useEffect(()=>{const _=setInterval(()=>{m(b=>b==="..."?"":b+".")},300);return()=>clearInterval(_)},[]);const g=ht.useCallback(()=>{s(),r(),e()},[s,r,e]),v=ht.useCallback(_=>{_.key==="Enter"&&u&&g()},[u,g]);return ht.useEffect(()=>{document.fonts.ready.then(()=>i(!0))},[]),ht.useEffect(()=>(window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)),[v]),J.jsx(dst,{children:J.jsx(pst,{children:J.jsxs(mst,{children:[["> Booting PortfolioOS v1.0",`> Loading 3D assets.... ${Math.round(t).toString().padEnd(3," ")}%`,`> Fonts system......... ${n?"OK":"LOADING"}`,`> Audio system......... ${a?"OK":`${Math.round(l)}%`}`,"> CRT Display.......... ONLINE"].join(`
`),J.jsxs(J.Fragment,{children:[`
> Employment status.... `,J.jsx(gst,{children:"UNEMPLOYED"})]}),J.jsxs(J.Fragment,{children:[`
> Job seek subsystem... `,J.jsxs(rB,{children:["SCANNING NETWORK",f]})]}),J.jsxs(J.Fragment,{children:[`
> Floppy drive......... `,J.jsx(rB,{children:"NOT FOUND  SKIPPING"})]}),u&&J.jsxs(J.Fragment,{children:[`
> Boot sequence complete. Press `,J.jsx("span",{onClick:g,className:"cursor-pointer",style:{textDecoration:"underline"},children:"ENTER"})," to continue..."]})]})})})}const Ast=Ay`
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
`,xst=Ay`
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(100%);
  }
`,bst=he.div`
  position: fixed;
  bottom: 0;
  right: 0;
  padding: 0 0.5rem 0.5rem 0;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  align-items: flex-end;
  z-index: 1000;
  pointer-events: none;
`,Sst=he.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  border: 0.15rem solid ${({theme:s})=>s.pallet.textColor};
  background-color: ${({theme:s})=>s.pallet.thirdColor};
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  min-width: 12rem;
  min-height: 4rem;
  pointer-events: auto;
  transition: transform 0.3s ease;

  animation: ${({isVisible:s})=>s?j_`
          ${Ast} 0.4s ease-out forwards
        `:j_`
          ${xst} 0.4s ease-in forwards
        `};
`,Est=he.div`
  min-width: 2rem;
  min-height: 2rem;
  max-width: 2rem;
  max-height: 2rem;
`,Mst=he.div`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
`,Tst=he.span`
  font-weight: 900;
`,Cst=he.span`
  font-size: 0.8rem;
  white-space: pre-line;
`;function wst(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 256 512 Q 326 511 384 478 L 384 478 L 384 478 Q 442 444 478 384 Q 512 323 512 256 Q 512 189 478 128 Q 442 68 384 34 Q 326 1 256 0 Q 186 1 128 34 Q 70 68 34 128 Q 0 189 0 256 Q 0 323 34 384 Q 70 444 128 478 Q 186 511 256 512 L 256 512 Z M 369 209 L 241 337 L 369 209 L 241 337 Q 224 351 207 337 L 143 273 L 143 273 Q 129 256 143 239 Q 160 225 177 239 L 224 286 L 224 286 L 335 175 L 335 175 Q 352 161 369 175 Q 383 192 369 209 L 369 209 Z"})})}function Rst(s){return J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...s,children:J.jsx("path",{d:"M 256 512 Q 326 511 384 478 L 384 478 L 384 478 Q 442 444 478 384 Q 512 323 512 256 Q 512 189 478 128 Q 442 68 384 34 Q 326 1 256 0 Q 186 1 128 34 Q 70 68 34 128 Q 0 189 0 256 Q 0 323 34 384 Q 70 444 128 478 Q 186 511 256 512 L 256 512 Z M 175 175 Q 192 161 209 175 L 256 222 L 256 222 L 303 175 L 303 175 Q 320 161 337 175 Q 351 192 337 209 L 290 256 L 290 256 L 337 303 L 337 303 Q 351 320 337 337 Q 320 351 303 337 L 256 290 L 256 290 L 209 337 L 209 337 Q 192 351 175 337 Q 161 320 175 303 L 222 256 L 222 256 L 175 209 L 175 209 Q 161 192 175 175 L 175 175 Z"})})}const Lst={success:wst,fail:Rst};function Dst({text:s,id:t,result:e="success",sound:n}){const i=xy(),[r,a]=ht.useState(!0);ht.useEffect(()=>{n&&n()},[]);const l=ht.useCallback(()=>{a(!1),setTimeout(()=>i(bZ(t)),400)},[i,t]);ht.useEffect(()=>{const f=setTimeout(l,5e3);return()=>clearTimeout(f)},[i,l,t]);const u=Lst[e];return J.jsxs(Sst,{className:"cursor-pointer",onClick:l,isVisible:r,children:[J.jsx(Est,{children:J.jsx(u,{fill:e==="success"?"green":"red"})}),J.jsxs(Mst,{children:[J.jsx(Tst,{children:e.charAt(0).toUpperCase()+e.slice(1)}),J.jsx(Cst,{children:s})]})]})}const aB=document.getElementById("popup-root"),Bst={confirm:()=>J.jsx("div",{}),toast:Dst};function Ost(){const{playNotification:s}=UR(),t=v5(e=>e.popups.popups.filter(n=>n.type==="toast"));return!aB||t.length===0?null:CN.createPortal(J.jsx(bst,{children:t.map(e=>{const{type:n,id:i,text:r,result:a}=e,l=Bst[n];return l?J.jsx(l,{sound:s,result:a,text:r,id:i},i):null})}),aB)}const Nst=1024,Ist=600;function Ust(){const[s,t]=ht.useState(!0),[e,n]=ht.useState(!1),i=v5(l=>l.themes),{playClickDown:r,playClickUp:a}=UR();return ht.useEffect(()=>(window.addEventListener("mousedown",r),window.addEventListener("mouseup",a),()=>{window.removeEventListener("mousedown",r),window.removeEventListener("mouseup",a)}),[r,a]),ht.useEffect(()=>{const l=()=>{const{innerWidth:u,innerHeight:f}=window;t(u>=Nst&&f>=Ist)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),s?J.jsxs($F,{theme:i,children:[J.jsx(rH,{}),J.jsx(sH,{}),!e&&J.jsx(_st,{onFinish:()=>n(!0)}),J.jsxs(aH,{bootDone:e,children:[J.jsx(OJ,{}),J.jsx(WZ,{}),J.jsx(hst,{}),J.jsx(Ost,{})]})]}):J.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[J.jsx("h1",{children:"The screen is too small"}),J.jsx("span",{children:"Desktop only"}),J.jsx("br",{}),J.jsx("a",{href:"pdf/cv_antonov_mykyta.pdf",children:"PDF"})]})}const sP={mainColor:"#BFECFF",secondColor:"#FFCCEA",thirdColor:"#FFF6E3",textColor:"#1D1C1A "},Pst={mainColor:"#000000",secondColor:"#CD1715",thirdColor:"#19260A",textColor:"#7DBB02"},Fst={name:"pastel",fontFamily:"'Manrope', sans-serif",pallet:sP},rP=mR({name:"themes",initialState:Fst,reducers:{changeTheme:(s,t)=>{switch(t.payload){case"pastel":return{name:"pastel",fontFamily:"'Manrope', sans-serif",pallet:sP};case"code":return{name:"code",fontFamily:"'VT323', monospace;",pallet:Pst}}}}}),{changeTheme:trt}=rP.actions,Hst=rP.reducer,zst=cZ({reducer:{modals:VZ,themes:Hst,popups:EZ}});eF.createRoot(document.getElementById("root")).render(J.jsx(ht.StrictMode,{children:J.jsx(xH,{store:zst,children:J.jsx(yst,{children:J.jsx(jW,{children:J.jsx(Ust,{})})})})}));
