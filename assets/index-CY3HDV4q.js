var KP=Object.defineProperty;var MR=i=>{throw TypeError(i)};var JP=(i,t,e)=>t in i?KP(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Je=(i,t,e)=>JP(i,typeof t!="symbol"?t+"":t,e),CT=(i,t,e)=>t.has(i)||MR("Cannot "+e);var x=(i,t,e)=>(CT(i,t,"read from private field"),e?e.call(i):t.get(i)),W=(i,t,e)=>t.has(i)?MR("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),G=(i,t,e,n)=>(CT(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),k=(i,t,e)=>(CT(i,t,"access private method"),e);var Sa=(i,t,e,n)=>({set _(s){G(i,t,s,e)},get _(){return x(i,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function FE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var wT={exports:{}},V2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TR;function ZP(){if(TR)return V2;TR=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,r){var a=null;if(r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),"key"in s){r={};for(var l in s)l!=="key"&&(r[l]=s[l])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:a,ref:s!==void 0?s:null,props:r}}return V2.Fragment=t,V2.jsx=e,V2.jsxs=e,V2}var CR;function $P(){return CR||(CR=1,wT.exports=ZP()),wT.exports}var Y=$P(),RT={exports:{}},hn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wR;function tF(){if(wR)return hn;wR=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(J){return J===null||typeof J!="object"?null:(J=g&&J[g]||J["@@iterator"],typeof J=="function"?J:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function T(J,at,xt){this.props=J,this.context=at,this.refs=C,this.updater=xt||_}T.prototype.isReactComponent={},T.prototype.setState=function(J,at){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,at,"setState")},T.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function S(){}S.prototype=T.prototype;function R(J,at,xt){this.props=J,this.context=at,this.refs=C,this.updater=xt||_}var B=R.prototype=new S;B.constructor=R,b(B,T.prototype),B.isPureReactComponent=!0;var D=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function F(J,at,xt,Et,lt,wt){return xt=wt.ref,{$$typeof:i,type:J,key:at,ref:xt!==void 0?xt:null,props:wt}}function z(J,at){return F(J.type,at,void 0,void 0,void 0,J.props)}function U(J){return typeof J=="object"&&J!==null&&J.$$typeof===i}function P(J){var at={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(xt){return at[xt]})}var X=/\/+/g;function ot(J,at){return typeof J=="object"&&J!==null&&J.key!=null?P(""+J.key):at.toString(36)}function it(){}function ct(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(it,it):(J.status="pending",J.then(function(at){J.status==="pending"&&(J.status="fulfilled",J.value=at)},function(at){J.status==="pending"&&(J.status="rejected",J.reason=at)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function dt(J,at,xt,Et,lt){var wt=typeof J;(wt==="undefined"||wt==="boolean")&&(J=null);var Bt=!1;if(J===null)Bt=!0;else switch(wt){case"bigint":case"string":case"number":Bt=!0;break;case"object":switch(J.$$typeof){case i:case t:Bt=!0;break;case m:return Bt=J._init,dt(Bt(J._payload),at,xt,Et,lt)}}if(Bt)return lt=lt(J),Bt=Et===""?"."+ot(J,0):Et,D(lt)?(xt="",Bt!=null&&(xt=Bt.replace(X,"$&/")+"/"),dt(lt,at,xt,"",function(ve){return ve})):lt!=null&&(U(lt)&&(lt=z(lt,xt+(lt.key==null||J&&J.key===lt.key?"":(""+lt.key).replace(X,"$&/")+"/")+Bt)),at.push(lt)),1;Bt=0;var Ut=Et===""?".":Et+":";if(D(J))for(var Wt=0;Wt<J.length;Wt++)Et=J[Wt],wt=Ut+ot(Et,Wt),Bt+=dt(Et,at,xt,wt,lt);else if(Wt=v(J),typeof Wt=="function")for(J=Wt.call(J),Wt=0;!(Et=J.next()).done;)Et=Et.value,wt=Ut+ot(Et,Wt++),Bt+=dt(Et,at,xt,wt,lt);else if(wt==="object"){if(typeof J.then=="function")return dt(ct(J),at,xt,Et,lt);throw at=String(J),Error("Objects are not valid as a React child (found: "+(at==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":at)+"). If you meant to render a collection of children, use an array instead.")}return Bt}function Q(J,at,xt){if(J==null)return J;var Et=[],lt=0;return dt(J,Et,"","",function(wt){return at.call(xt,wt,lt++)}),Et}function tt(J){if(J._status===-1){var at=J._result;at=at(),at.then(function(xt){(J._status===0||J._status===-1)&&(J._status=1,J._result=xt)},function(xt){(J._status===0||J._status===-1)&&(J._status=2,J._result=xt)}),J._status===-1&&(J._status=0,J._result=at)}if(J._status===1)return J._result.default;throw J._result}var et=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var at=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(at))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)};function _t(){}return hn.Children={map:Q,forEach:function(J,at,xt){Q(J,function(){at.apply(this,arguments)},xt)},count:function(J){var at=0;return Q(J,function(){at++}),at},toArray:function(J){return Q(J,function(at){return at})||[]},only:function(J){if(!U(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},hn.Component=T,hn.Fragment=e,hn.Profiler=s,hn.PureComponent=R,hn.StrictMode=n,hn.Suspense=u,hn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,hn.__COMPILER_RUNTIME={__proto__:null,c:function(J){return N.H.useMemoCache(J)}},hn.cache=function(J){return function(){return J.apply(null,arguments)}},hn.cloneElement=function(J,at,xt){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var Et=b({},J.props),lt=J.key,wt=void 0;if(at!=null)for(Bt in at.ref!==void 0&&(wt=void 0),at.key!==void 0&&(lt=""+at.key),at)!I.call(at,Bt)||Bt==="key"||Bt==="__self"||Bt==="__source"||Bt==="ref"&&at.ref===void 0||(Et[Bt]=at[Bt]);var Bt=arguments.length-2;if(Bt===1)Et.children=xt;else if(1<Bt){for(var Ut=Array(Bt),Wt=0;Wt<Bt;Wt++)Ut[Wt]=arguments[Wt+2];Et.children=Ut}return F(J.type,lt,void 0,void 0,wt,Et)},hn.createContext=function(J){return J={$$typeof:a,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:r,_context:J},J},hn.createElement=function(J,at,xt){var Et,lt={},wt=null;if(at!=null)for(Et in at.key!==void 0&&(wt=""+at.key),at)I.call(at,Et)&&Et!=="key"&&Et!=="__self"&&Et!=="__source"&&(lt[Et]=at[Et]);var Bt=arguments.length-2;if(Bt===1)lt.children=xt;else if(1<Bt){for(var Ut=Array(Bt),Wt=0;Wt<Bt;Wt++)Ut[Wt]=arguments[Wt+2];lt.children=Ut}if(J&&J.defaultProps)for(Et in Bt=J.defaultProps,Bt)lt[Et]===void 0&&(lt[Et]=Bt[Et]);return F(J,wt,void 0,void 0,null,lt)},hn.createRef=function(){return{current:null}},hn.forwardRef=function(J){return{$$typeof:l,render:J}},hn.isValidElement=U,hn.lazy=function(J){return{$$typeof:m,_payload:{_status:-1,_result:J},_init:tt}},hn.memo=function(J,at){return{$$typeof:f,type:J,compare:at===void 0?null:at}},hn.startTransition=function(J){var at=N.T,xt={};N.T=xt;try{var Et=J(),lt=N.S;lt!==null&&lt(xt,Et),typeof Et=="object"&&Et!==null&&typeof Et.then=="function"&&Et.then(_t,et)}catch(wt){et(wt)}finally{N.T=at}},hn.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},hn.use=function(J){return N.H.use(J)},hn.useActionState=function(J,at,xt){return N.H.useActionState(J,at,xt)},hn.useCallback=function(J,at){return N.H.useCallback(J,at)},hn.useContext=function(J){return N.H.useContext(J)},hn.useDebugValue=function(){},hn.useDeferredValue=function(J,at){return N.H.useDeferredValue(J,at)},hn.useEffect=function(J,at,xt){var Et=N.H;if(typeof xt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Et.useEffect(J,at)},hn.useId=function(){return N.H.useId()},hn.useImperativeHandle=function(J,at,xt){return N.H.useImperativeHandle(J,at,xt)},hn.useInsertionEffect=function(J,at){return N.H.useInsertionEffect(J,at)},hn.useLayoutEffect=function(J,at){return N.H.useLayoutEffect(J,at)},hn.useMemo=function(J,at){return N.H.useMemo(J,at)},hn.useOptimistic=function(J,at){return N.H.useOptimistic(J,at)},hn.useReducer=function(J,at,xt){return N.H.useReducer(J,at,xt)},hn.useRef=function(J){return N.H.useRef(J)},hn.useState=function(J){return N.H.useState(J)},hn.useSyncExternalStore=function(J,at,xt){return N.H.useSyncExternalStore(J,at,xt)},hn.useTransition=function(){return N.H.useTransition()},hn.version="19.1.0",hn}var RR;function e0(){return RR||(RR=1,RT.exports=tF()),RT.exports}var ut=e0();const Ba=FE(ut);var LT={exports:{}},Q2={},DT={exports:{}},BT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LR;function eF(){return LR||(LR=1,function(i){function t(Q,tt){var et=Q.length;Q.push(tt);t:for(;0<et;){var _t=et-1>>>1,J=Q[_t];if(0<s(J,tt))Q[_t]=tt,Q[et]=J,et=_t;else break t}}function e(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var tt=Q[0],et=Q.pop();if(et!==tt){Q[0]=et;t:for(var _t=0,J=Q.length,at=J>>>1;_t<at;){var xt=2*(_t+1)-1,Et=Q[xt],lt=xt+1,wt=Q[lt];if(0>s(Et,et))lt<J&&0>s(wt,Et)?(Q[_t]=wt,Q[lt]=et,_t=lt):(Q[_t]=Et,Q[xt]=et,_t=xt);else if(lt<J&&0>s(wt,et))Q[_t]=wt,Q[lt]=et,_t=lt;else break t}}return tt}function s(Q,tt){var et=Q.sortIndex-tt.sortIndex;return et!==0?et:Q.id-tt.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();i.unstable_now=function(){return a.now()-l}}var u=[],f=[],m=1,g=null,v=3,_=!1,b=!1,C=!1,T=!1,S=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function D(Q){for(var tt=e(f);tt!==null;){if(tt.callback===null)n(f);else if(tt.startTime<=Q)n(f),tt.sortIndex=tt.expirationTime,t(u,tt);else break;tt=e(f)}}function N(Q){if(C=!1,D(Q),!b)if(e(u)!==null)b=!0,I||(I=!0,ot());else{var tt=e(f);tt!==null&&dt(N,tt.startTime-Q)}}var I=!1,F=-1,z=5,U=-1;function P(){return T?!0:!(i.unstable_now()-U<z)}function X(){if(T=!1,I){var Q=i.unstable_now();U=Q;var tt=!0;try{t:{b=!1,C&&(C=!1,R(F),F=-1),_=!0;var et=v;try{e:{for(D(Q),g=e(u);g!==null&&!(g.expirationTime>Q&&P());){var _t=g.callback;if(typeof _t=="function"){g.callback=null,v=g.priorityLevel;var J=_t(g.expirationTime<=Q);if(Q=i.unstable_now(),typeof J=="function"){g.callback=J,D(Q),tt=!0;break e}g===e(u)&&n(u),D(Q)}else n(u);g=e(u)}if(g!==null)tt=!0;else{var at=e(f);at!==null&&dt(N,at.startTime-Q),tt=!1}}break t}finally{g=null,v=et,_=!1}tt=void 0}}finally{tt?ot():I=!1}}}var ot;if(typeof B=="function")ot=function(){B(X)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,ct=it.port2;it.port1.onmessage=X,ot=function(){ct.postMessage(null)}}else ot=function(){S(X,0)};function dt(Q,tt){F=S(function(){Q(i.unstable_now())},tt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var tt=3;break;default:tt=v}var et=v;v=tt;try{return Q()}finally{v=et}},i.unstable_requestPaint=function(){T=!0},i.unstable_runWithPriority=function(Q,tt){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var et=v;v=Q;try{return tt()}finally{v=et}},i.unstable_scheduleCallback=function(Q,tt,et){var _t=i.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?_t+et:_t):et=_t,Q){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=et+J,Q={id:m++,callback:tt,priorityLevel:Q,startTime:et,expirationTime:J,sortIndex:-1},et>_t?(Q.sortIndex=et,t(f,Q),e(u)===null&&Q===e(f)&&(C?(R(F),F=-1):C=!0,dt(N,et-_t))):(Q.sortIndex=J,t(u,Q),b||_||(b=!0,I||(I=!0,ot()))),Q},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(Q){var tt=v;return function(){var et=v;v=tt;try{return Q.apply(this,arguments)}finally{v=et}}}}(BT)),BT}var DR;function nF(){return DR||(DR=1,DT.exports=eF()),DT.exports}var OT={exports:{}},Qr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BR;function iF(){if(BR)return Qr;BR=1;var i=e0();function t(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(u,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:u,containerInfo:f,implementation:m}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Qr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Qr.createPortal=function(u,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return r(u,f,null,m)},Qr.flushSync=function(u){var f=a.T,m=n.p;try{if(a.T=null,n.p=2,u)return u()}finally{a.T=f,n.p=m,n.d.f()}},Qr.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(u,f))},Qr.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},Qr.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var m=f.as,g=l(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:_}):m==="script"&&n.d.X(u,{crossOrigin:g,integrity:v,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Qr.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=l(f.as,f.crossOrigin);n.d.M(u,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(u)},Qr.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=l(m,f.crossOrigin);n.d.L(u,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Qr.preloadModule=function(u,f){if(typeof u=="string")if(f){var m=l(f.as,f.crossOrigin);n.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(u)},Qr.requestFormReset=function(u){n.d.r(u)},Qr.unstable_batchedUpdates=function(u,f){return u(f)},Qr.useFormState=function(u,f,m){return a.H.useFormState(u,f,m)},Qr.useFormStatus=function(){return a.H.useHostTransitionStatus()},Qr.version="19.1.0",Qr}var OR;function f9(){if(OR)return OT.exports;OR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),OT.exports=iF(),OT.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NR;function sF(){if(NR)return Q2;NR=1;var i=nF(),t=e0(),e=f9();function n(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function r(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function a(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(r(o)!==o)throw Error(n(188))}function u(o){var c=o.alternate;if(!c){if(c=r(o),c===null)throw Error(n(188));return c!==o?null:o}for(var p=o,y=c;;){var E=p.return;if(E===null)break;var w=E.alternate;if(w===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===w.child){for(w=E.child;w;){if(w===p)return l(E),o;if(w===y)return l(E),c;w=w.sibling}throw Error(n(188))}if(p.return!==y.return)p=E,y=w;else{for(var H=!1,j=E.child;j;){if(j===p){H=!0,p=E,y=w;break}if(j===y){H=!0,y=E,p=w;break}j=j.sibling}if(!H){for(j=w.child;j;){if(j===p){H=!0,p=w,y=E;break}if(j===y){H=!0,y=w,p=E;break}j=j.sibling}if(!H)throw Error(n(189))}}if(p.alternate!==y)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?o:c}function f(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=f(o),c!==null)return c;o=o.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),B=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function ot(o){return o===null||typeof o!="object"?null:(o=X&&o[X]||o["@@iterator"],typeof o=="function"?o:null)}var it=Symbol.for("react.client.reference");function ct(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===it?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case T:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case I:return"SuspenseList";case U:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case _:return"Portal";case B:return(o.displayName||"Context")+".Provider";case R:return(o._context.displayName||"Context")+".Consumer";case D:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case F:return c=o.displayName||null,c!==null?c:ct(o.type)||"Memo";case z:c=o._payload,o=o._init;try{return ct(o(c))}catch{}}return null}var dt=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},_t=[],J=-1;function at(o){return{current:o}}function xt(o){0>J||(o.current=_t[J],_t[J]=null,J--)}function Et(o,c){J++,_t[J]=o.current,o.current=c}var lt=at(null),wt=at(null),Bt=at(null),Ut=at(null);function Wt(o,c){switch(Et(Bt,c),Et(wt,o),Et(lt,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?$7(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=$7(c),o=tR(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}xt(lt),Et(lt,o)}function ve(){xt(lt),xt(wt),xt(Bt)}function ee(o){o.memoizedState!==null&&Et(Ut,o);var c=lt.current,p=tR(c,o.type);c!==p&&(Et(wt,o),Et(lt,p))}function Ye(o){wt.current===o&&(xt(lt),xt(wt)),Ut.current===o&&(xt(Ut),F2._currentValue=et)}var we=Object.prototype.hasOwnProperty,se=i.unstable_scheduleCallback,Z=i.unstable_cancelCallback,Kt=i.unstable_shouldYield,Ft=i.unstable_requestPaint,Vt=i.unstable_now,Gt=i.unstable_getCurrentPriorityLevel,be=i.unstable_ImmediatePriority,qt=i.unstable_UserBlockingPriority,$=i.unstable_NormalPriority,V=i.unstable_LowPriority,vt=i.unstable_IdlePriority,It=i.log,Xt=i.unstable_setDisableYieldValue,Ot=null,ne=null;function te(o){if(typeof It=="function"&&Xt(o),ne&&typeof ne.setStrictMode=="function")try{ne.setStrictMode(Ot,o)}catch{}}var ge=Math.clz32?Math.clz32:_e,De=Math.log,Jt=Math.LN2;function _e(o){return o>>>=0,o===0?32:31-(De(o)/Jt|0)|0}var Se=256,Te=4194304;function le(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function rn(o,c,p){var y=o.pendingLanes;if(y===0)return 0;var E=0,w=o.suspendedLanes,H=o.pingedLanes;o=o.warmLanes;var j=y&134217727;return j!==0?(y=j&~w,y!==0?E=le(y):(H&=j,H!==0?E=le(H):p||(p=j&~o,p!==0&&(E=le(p))))):(j=y&~w,j!==0?E=le(j):H!==0?E=le(H):p||(p=y&~o,p!==0&&(E=le(p)))),E===0?0:c!==0&&c!==E&&(c&w)===0&&(w=E&-E,p=c&-c,w>=p||w===32&&(p&4194048)!==0)?c:E}function He(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Gn(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var o=Se;return Se<<=1,(Se&4194048)===0&&(Se=256),o}function ce(){var o=Te;return Te<<=1,(Te&62914560)===0&&(Te=4194304),o}function Nt(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function Qt(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function he(o,c,p,y,E,w){var H=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var j=o.entanglements,st=o.expirationTimes,St=o.hiddenUpdates;for(p=H&~p;0<p;){var zt=31-ge(p),jt=1<<zt;j[zt]=0,st[zt]=-1;var Tt=St[zt];if(Tt!==null)for(St[zt]=null,zt=0;zt<Tt.length;zt++){var Lt=Tt[zt];Lt!==null&&(Lt.lane&=-536870913)}p&=~jt}y!==0&&ue(o,y,0),w!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=w&~(H&~c))}function ue(o,c,p){o.pendingLanes|=c,o.suspendedLanes&=~c;var y=31-ge(c);o.entangledLanes|=c,o.entanglements[y]=o.entanglements[y]|1073741824|p&4194090}function qe(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var y=31-ge(p),E=1<<y;E&c|o[y]&c&&(o[y]|=c),p&=~E}}function Jn(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ei(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Cn(){var o=tt.p;return o!==0?o:(o=window.event,o===void 0?32:_R(o.type))}function Nr(o,c){var p=tt.p;try{return tt.p=o,c()}finally{tt.p=p}}var ls=Math.random().toString(36).slice(2),Ji="__reactFiber$"+ls,cs="__reactProps$"+ls,$s="__reactContainer$"+ls,Ir="__reactEvents$"+ls,hp="__reactListeners$"+ls,oo="__reactHandles$"+ls,mr="__reactResources$"+ls,lo="__reactMarker$"+ls;function ti(o){delete o[Ji],delete o[cs],delete o[Ir],delete o[hp],delete o[oo]}function co(o){var c=o[Ji];if(c)return c;for(var p=o.parentNode;p;){if(c=p[$s]||p[Ji]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=sR(o);o!==null;){if(p=o[Ji])return p;o=sR(o)}return c}o=p,p=o.parentNode}return null}function uo(o){if(o=o[Ji]||o[$s]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Oc(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(n(33))}function Ol(o){var c=o[mr];return c||(c=o[mr]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Zi(o){o[lo]=!0}var cf=new Set,uf={};function ho(o,c){q(o,c),q(o+"Capture",c)}function q(o,c){for(uf[o]=c,o=0;o<c.length;o++)cf.add(c[o])}var pt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ct={},Rt={};function yt(o){return we.call(Rt,o)?!0:we.call(Ct,o)?!1:pt.test(o)?Rt[o]=!0:(Ct[o]=!0,!1)}function Yt(o,c,p){if(yt(c))if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+p)}}function ie(o,c,p){if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+p)}}function re(o,c,p,y){if(y===null)o.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(p);return}o.setAttributeNS(c,p,""+y)}}var Ae,Ge;function Oe(o){if(Ae===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);Ae=c&&c[1]||"",Ge=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ae+o+Ge}var Ce=!1;function pn(o,c){if(!o||Ce)return"";Ce=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var jt=function(){throw Error()};if(Object.defineProperty(jt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(jt,[])}catch(Lt){var Tt=Lt}Reflect.construct(o,[],jt)}else{try{jt.call()}catch(Lt){Tt=Lt}o.call(jt.prototype)}}else{try{throw Error()}catch(Lt){Tt=Lt}(jt=o())&&typeof jt.catch=="function"&&jt.catch(function(){})}}catch(Lt){if(Lt&&Tt&&typeof Lt.stack=="string")return[Lt.stack,Tt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=y.DetermineComponentFrameRoot(),H=w[0],j=w[1];if(H&&j){var st=H.split(`
`),St=j.split(`
`);for(E=y=0;y<st.length&&!st[y].includes("DetermineComponentFrameRoot");)y++;for(;E<St.length&&!St[E].includes("DetermineComponentFrameRoot");)E++;if(y===st.length||E===St.length)for(y=st.length-1,E=St.length-1;1<=y&&0<=E&&st[y]!==St[E];)E--;for(;1<=y&&0<=E;y--,E--)if(st[y]!==St[E]){if(y!==1||E!==1)do if(y--,E--,0>E||st[y]!==St[E]){var zt=`
`+st[y].replace(" at new "," at ");return o.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",o.displayName)),zt}while(1<=y&&0<=E);break}}}finally{Ce=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?Oe(p):""}function Nn(o){switch(o.tag){case 26:case 27:case 5:return Oe(o.type);case 16:return Oe("Lazy");case 13:return Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return pn(o.type,!1);case 11:return pn(o.type.render,!1);case 1:return pn(o.type,!0);case 31:return Oe("Activity");default:return""}}function Mi(o){try{var c="";do c+=Nn(o),o=o.return;while(o);return c}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function yn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function bn(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ne(o){var c=bn(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),y=""+o[c];if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var E=p.get,w=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return E.call(this)},set:function(H){y=""+H,w.call(this,H)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(H){y=""+H},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Ri(o){o._valueTracker||(o._valueTracker=Ne(o))}function Ln(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return o&&(y=bn(o)?o.checked?"true":"false":o.value),o=y,o!==p?(c.setValue(o),!0):!1}function Bs(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Yo=/[\n"\\]/g;function ri(o){return o.replace(Yo,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Wo(o,c,p,y,E,w,H,j){o.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.type=H:o.removeAttribute("type"),c!=null?H==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+yn(c)):o.value!==""+yn(c)&&(o.value=""+yn(c)):H!=="submit"&&H!=="reset"||o.removeAttribute("value"),c!=null?Os(o,H,yn(c)):p!=null?Os(o,H,yn(p)):y!=null&&o.removeAttribute("value"),E==null&&w!=null&&(o.defaultChecked=!!w),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?o.name=""+yn(j):o.removeAttribute("name")}function ei(o,c,p,y,E,w,H,j){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.type=w),c!=null||p!=null){if(!(w!=="submit"&&w!=="reset"||c!=null))return;p=p!=null?""+yn(p):"",c=c!=null?""+yn(c):p,j||c===o.value||(o.value=c),o.defaultValue=c}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=j?o.checked:!!y,o.defaultChecked=!!y,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(o.name=H)}function Os(o,c,p){c==="number"&&Bs(o.ownerDocument)===o||o.defaultValue===""+p||(o.defaultValue=""+p)}function $i(o,c,p,y){if(o=o.options,c){c={};for(var E=0;E<p.length;E++)c["$"+p[E]]=!0;for(p=0;p<o.length;p++)E=c.hasOwnProperty("$"+o[p].value),o[p].selected!==E&&(o[p].selected=E),E&&y&&(o[p].defaultSelected=!0)}else{for(p=""+yn(p),c=null,E=0;E<o.length;E++){if(o[E].value===p){o[E].selected=!0,y&&(o[E].defaultSelected=!0);return}c!==null||o[E].disabled||(c=o[E])}c!==null&&(c.selected=!0)}}function ys(o,c,p){if(c!=null&&(c=""+yn(c),c!==o.value&&(o.value=c),p==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=p!=null?""+yn(p):""}function _s(o,c,p,y){if(c==null){if(y!=null){if(p!=null)throw Error(n(92));if(dt(y)){if(1<y.length)throw Error(n(93));y=y[0]}p=y}p==null&&(p=""),c=p}p=yn(c),o.defaultValue=p,y=o.textContent,y===p&&y!==""&&y!==null&&(o.value=y)}function gr(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var Ko=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fp(o,c,p){var y=c.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":y?o.setProperty(c,p):typeof p!="number"||p===0||Ko.has(c)?c==="float"?o.cssFloat=p:o[c]=(""+p).trim():o[c]=p+"px"}function dp(o,c,p){if(c!=null&&typeof c!="object")throw Error(n(62));if(o=o.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var E in c)y=c[E],c.hasOwnProperty(E)&&p[E]!==y&&fp(o,E,y)}else for(var w in c)c.hasOwnProperty(w)&&fp(o,w,c[w])}function h0(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ly=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pp(o){return qx.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var f0=null;function d0(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Nc=null,zu=null;function Dy(o){var c=uo(o);if(c&&(o=c.stateNode)){var p=o[cs]||null;t:switch(o=c.stateNode,c.type){case"input":if(Wo(o,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+ri(""+c)+'"][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==o&&y.form===o.form){var E=y[cs]||null;if(!E)throw Error(n(90));Wo(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(c=0;c<p.length;c++)y=p[c],y.form===o.form&&Ln(y)}break t;case"textarea":ys(o,p.value,p.defaultValue);break t;case"select":c=p.value,c!=null&&$i(o,!!p.multiple,c,!1)}}}var mp=!1;function By(o,c,p){if(mp)return o(c,p);mp=!0;try{var y=o(c);return y}finally{if(mp=!1,(Nc!==null||zu!==null)&&(fl(),Nc&&(c=Nc,o=zu,zu=Nc=null,Dy(c),o)))for(c=0;c<o.length;c++)Dy(o[c])}}function hf(o,c){var p=o.stateNode;if(p===null)return null;var y=p[cs]||null;if(y===null)return null;p=y[c];t:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break t;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(n(231,c,typeof p));return p}var Jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gp=!1;if(Jo)try{var ff={};Object.defineProperty(ff,"passive",{get:function(){gp=!0}}),window.addEventListener("test",ff,ff),window.removeEventListener("test",ff,ff)}catch{gp=!1}var Nl=null,Oy=null,p0=null;function Ny(){if(p0)return p0;var o,c=Oy,p=c.length,y,E="value"in Nl?Nl.value:Nl.textContent,w=E.length;for(o=0;o<p&&c[o]===E[o];o++);var H=p-o;for(y=1;y<=H&&c[p-y]===E[w-y];y++);return p0=E.slice(o,1<y?1-y:void 0)}function Ic(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function df(){return!0}function vp(){return!1}function vr(o){function c(p,y,E,w,H){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=w,this.target=H,this.currentTarget=null;for(var j in o)o.hasOwnProperty(j)&&(p=o[j],this[j]=p?p(w):w[j]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?df:vp,this.isPropagationStopped=vp,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=df)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=df)},persist:function(){},isPersistent:df}),c}var Uc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pf=vr(Uc),mf=m({},Uc,{view:0,detail:0}),Yx=vr(mf),Il,gf,vf,yf=m({},mf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_p,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==vf&&(vf&&o.type==="mousemove"?(Il=o.screenX-vf.screenX,gf=o.screenY-vf.screenY):gf=Il=0,vf=o),Il)},movementY:function(o){return"movementY"in o?o.movementY:gf}}),Iy=vr(yf),Wx=m({},yf,{dataTransfer:0}),XM=vr(Wx),Ns=m({},mf,{relatedTarget:0}),m0=vr(Ns),Kx=m({},Uc,{animationName:0,elapsedTime:0,pseudoElement:0}),Jx=vr(Kx),Zx=m({},Uc,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),$x=vr(Zx),yp=m({},Uc,{data:0}),g0=vr(yp),tb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uy(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=nb[o])?!!c[o]:!1}function _p(){return Uy}var ib=m({},mf,{key:function(o){if(o.key){var c=tb[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Ic(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?eb[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_p,charCode:function(o){return o.type==="keypress"?Ic(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ic(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Py=vr(ib),Fy=m({},yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v0=vr(Fy),sb=m({},mf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_p}),Hy=vr(sb),rb=m({},Uc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ul=vr(rb),zy=m({},yf,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),jM=vr(zy),ab=m({},Uc,{newState:0,oldState:0}),Pc=vr(ab),Pl=[9,13,27,32],Ap=Jo&&"CompositionEvent"in window,Gu=null;Jo&&"documentMode"in document&&(Gu=document.documentMode);var xp=Jo&&"TextEvent"in window&&!Gu,bp=Jo&&(!Ap||Gu&&8<Gu&&11>=Gu),Fc=" ",Is=!1;function Sp(o,c){switch(o){case"keyup":return Pl.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gy(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Hc=!1;function Ep(o,c){switch(o){case"compositionend":return Gy(c);case"keypress":return c.which!==32?null:(Is=!0,Fc);case"textInput":return o=c.data,o===Fc&&Is?null:o;default:return null}}function ky(o,c){if(Hc)return o==="compositionend"||!Ap&&Sp(o,c)?(o=Ny(),p0=Oy=Nl=null,Hc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return bp&&c.locale!=="ko"?null:c.data;default:return null}}var y0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vy(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!y0[o.type]:c==="textarea"}function Ur(o,c,p,y){Nc?zu?zu.push(y):zu=[y]:Nc=y,c=rS(c,"onChange"),0<c.length&&(p=new pf("onChange","change",null,p,y),o.push({event:p,listeners:c}))}var _f=null,ku=null;function ob(o){Y7(o,0)}function Mp(o){var c=Oc(o);if(Ln(c))return o}function _0(o,c){if(o==="change")return c}var A0=!1;if(Jo){var x0;if(Jo){var Af="oninput"in document;if(!Af){var xf=document.createElement("div");xf.setAttribute("oninput","return;"),Af=typeof xf.oninput=="function"}x0=Af}else x0=!1;A0=x0&&(!document.documentMode||9<document.documentMode)}function Ti(){_f&&(_f.detachEvent("onpropertychange",lb),ku=_f=null)}function lb(o){if(o.propertyName==="value"&&Mp(ku)){var c=[];Ur(c,ku,o,d0(o)),By(ob,c)}}function qM(o,c,p){o==="focusin"?(Ti(),_f=c,ku=p,_f.attachEvent("onpropertychange",lb)):o==="focusout"&&Ti()}function cb(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Mp(ku)}function Tp(o,c){if(o==="click")return Mp(c)}function zc(o,c){if(o==="input"||o==="change")return Mp(c)}function ub(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Pr=typeof Object.is=="function"?Object.is:ub;function fo(o,c){if(Pr(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!we.call(c,E)||!Pr(o[E],c[E]))return!1}return!0}function Fr(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Qy(o,c){var p=Fr(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=c&&y>=c)return{node:p,offset:c-o};o=y}t:{for(;p;){if(p.nextSibling){p=p.nextSibling;break t}p=p.parentNode}p=void 0}p=Fr(p)}}function Xy(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Xy(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function jy(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Bs(o.document);c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)o=c.contentWindow;else break;c=Bs(o.document)}return c}function Cp(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var qy=Jo&&"documentMode"in document&&11>=document.documentMode,Fl=null,b0=null,wp=null,S0=!1;function Yy(o,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;S0||Fl==null||Fl!==Bs(y)||(y=Fl,"selectionStart"in y&&Cp(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),wp&&fo(wp,y)||(wp=y,y=rS(b0,"onSelect"),0<y.length&&(c=new pf("onSelect","select",null,c,p),o.push({event:c,listeners:y}),c.target=Fl)))}function Us(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var Gc={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},E0={},hb={};Jo&&(hb=document.createElement("div").style,"AnimationEvent"in window||(delete Gc.animationend.animation,delete Gc.animationiteration.animation,delete Gc.animationstart.animation),"TransitionEvent"in window||delete Gc.transitionend.transition);function Hl(o){if(E0[o])return E0[o];if(!Gc[o])return o;var c=Gc[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in hb)return E0[o]=c[p];return o}var yr=Hl("animationend"),Wy=Hl("animationiteration"),Hr=Hl("animationstart"),fb=Hl("transitionrun"),zl=Hl("transitionstart"),bf=Hl("transitioncancel"),Gl=Hl("transitionend"),M0=new Map,Rp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rp.push("scrollEnd");function As(o,c){M0.set(o,c),ho(c,[o])}var Ky=new WeakMap;function Ps(o,c){if(typeof o=="object"&&o!==null){var p=Ky.get(o);return p!==void 0?p:(c={value:o,source:c,stack:Mi(c)},Ky.set(o,c),c)}return{value:o,source:c,stack:Mi(c)}}var tr=[],Pa=0,T0=0;function Lp(){for(var o=Pa,c=T0=Pa=0;c<o;){var p=tr[c];tr[c++]=null;var y=tr[c];tr[c++]=null;var E=tr[c];tr[c++]=null;var w=tr[c];if(tr[c++]=null,y!==null&&E!==null){var H=y.pending;H===null?E.next=E:(E.next=H.next,H.next=E),y.pending=E}w!==0&&Jy(p,E,w)}}function kc(o,c,p,y){tr[Pa++]=o,tr[Pa++]=c,tr[Pa++]=p,tr[Pa++]=y,T0|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function C0(o,c,p,y){return kc(o,c,p,y),Sf(o)}function kl(o,c){return kc(o,null,null,c),Sf(o)}function Jy(o,c,p){o.lanes|=p;var y=o.alternate;y!==null&&(y.lanes|=p);for(var E=!1,w=o.return;w!==null;)w.childLanes|=p,y=w.alternate,y!==null&&(y.childLanes|=p),w.tag===22&&(o=w.stateNode,o===null||o._visibility&1||(E=!0)),o=w,w=w.return;return o.tag===3?(w=o.stateNode,E&&c!==null&&(E=31-ge(p),o=w.hiddenUpdates,y=o[E],y===null?o[E]=[c]:y.push(c),c.lane=p|536870912),w):null}function Sf(o){if(50<hl)throw hl=0,ah=null,Error(n(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Vc={};function Zy(o,c,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(o,c,p,y){return new Zy(o,c,p,y)}function Dp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Gi(o,c){var p=o.alternate;return p===null?(p=zr(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function $y(o,c){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,c=p.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function xs(o,c,p,y,E,w){var H=0;if(y=o,typeof o=="function")Dp(o)&&(H=1);else if(typeof o=="string")H=PP(o,p,lt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case U:return o=zr(31,p,c,E),o.elementType=U,o.lanes=w,o;case b:return Qc(p.children,E,w,c);case C:H=8,E|=24;break;case T:return o=zr(12,p,c,E|2),o.elementType=T,o.lanes=w,o;case N:return o=zr(13,p,c,E),o.elementType=N,o.lanes=w,o;case I:return o=zr(19,p,c,E),o.elementType=I,o.lanes=w,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case S:case B:H=10;break t;case R:H=9;break t;case D:H=11;break t;case F:H=14;break t;case z:H=16,y=null;break t}H=29,p=Error(n(130,o===null?"null":typeof o,"")),y=null}return c=zr(H,p,c,E),c.elementType=o,c.type=y,c.lanes=w,c}function Qc(o,c,p,y){return o=zr(7,o,y,c),o.lanes=p,o}function Bp(o,c,p){return o=zr(6,o,null,c),o.lanes=p,o}function w0(o,c,p){return c=zr(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var Ef=[],Gr=0,Op=null,Mf=0,Fs=[],la=0,Xc=null,Zo=1,$o="";function Vl(o,c){Ef[Gr++]=Mf,Ef[Gr++]=Op,Op=o,Mf=c}function R0(o,c,p){Fs[la++]=Zo,Fs[la++]=$o,Fs[la++]=Xc,Xc=o;var y=Zo;o=$o;var E=32-ge(y)-1;y&=~(1<<E),p+=1;var w=32-ge(c)+E;if(30<w){var H=E-E%5;w=(y&(1<<H)-1).toString(32),y>>=H,E-=H,Zo=1<<32-ge(c)+E|p<<E|y,$o=w+o}else Zo=1<<w|p<<E|y,$o=o}function t2(o){o.return!==null&&(Vl(o,1),R0(o,1,0))}function e2(o){for(;o===Op;)Op=Ef[--Gr],Ef[Gr]=null,Mf=Ef[--Gr],Ef[Gr]=null;for(;o===Xc;)Xc=Fs[--la],Fs[la]=null,$o=Fs[--la],Fs[la]=null,Zo=Fs[--la],Fs[la]=null}var _r=null,Li=null,kn=!1,Fa=null,ca=!1,L0=Error(n(519));function jc(o){var c=Error(n(418,""));throw Vu(Ps(c,o)),L0}function db(o){var c=o.stateNode,p=o.type,y=o.memoizedProps;switch(c[Ji]=o,c[cs]=y,p){case"dialog":wn("cancel",c),wn("close",c);break;case"iframe":case"object":case"embed":wn("load",c);break;case"video":case"audio":for(p=0;p<B2.length;p++)wn(B2[p],c);break;case"source":wn("error",c);break;case"img":case"image":case"link":wn("error",c),wn("load",c);break;case"details":wn("toggle",c);break;case"input":wn("invalid",c),ei(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Ri(c);break;case"select":wn("invalid",c);break;case"textarea":wn("invalid",c),_s(c,y.value,y.defaultValue,y.children),Ri(c)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||c.textContent===""+p||y.suppressHydrationWarning===!0||Z7(c.textContent,p)?(y.popover!=null&&(wn("beforetoggle",c),wn("toggle",c)),y.onScroll!=null&&wn("scroll",c),y.onScrollEnd!=null&&wn("scrollend",c),y.onClick!=null&&(c.onclick=aS),c=!0):c=!1,c||jc(o)}function n2(o){for(_r=o.return;_r;)switch(_r.tag){case 5:case 13:ca=!1;return;case 27:case 3:ca=!0;return;default:_r=_r.return}}function po(o){if(o!==_r)return!1;if(!kn)return n2(o),kn=!0,!1;var c=o.tag,p;if((p=c!==3&&c!==27)&&((p=c===5)&&(p=o.type,p=!(p!=="form"&&p!=="button")||dT(o.type,o.memoizedProps)),p=!p),p&&Li&&jc(o),n2(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));t:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(p=o.data,p==="/$"){if(c===0){Li=ic(o.nextSibling);break t}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++;o=o.nextSibling}Li=null}}else c===27?(c=Li,Kf(o.type)?(o=vT,vT=null,Li=o):Li=c):Li=_r?ic(o.stateNode.nextSibling):null;return!0}function Tf(){Li=_r=null,kn=!1}function Xn(){var o=Fa;return o!==null&&(ze===null?ze=o:ze.push.apply(ze,o),Fa=null),o}function Vu(o){Fa===null?Fa=[o]:Fa.push(o)}var i2=at(null),qc=null,Ql=null;function Yc(o,c,p){Et(i2,c._currentValue),c._currentValue=p}function Xl(o){o._currentValue=i2.current,xt(i2)}function s2(o,c,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===p)break;o=o.return}}function Np(o,c,p,y){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var w=E.dependencies;if(w!==null){var H=E.child;w=w.firstContext;t:for(;w!==null;){var j=w;w=E;for(var st=0;st<c.length;st++)if(j.context===c[st]){w.lanes|=p,j=w.alternate,j!==null&&(j.lanes|=p),s2(w.return,p,o),y||(H=null);break t}w=j.next}}else if(E.tag===18){if(H=E.return,H===null)throw Error(n(341));H.lanes|=p,w=H.alternate,w!==null&&(w.lanes|=p),s2(H,p,o),H=null}else H=E.child;if(H!==null)H.return=E;else for(H=E;H!==null;){if(H===o){H=null;break}if(E=H.sibling,E!==null){E.return=H.return,H=E;break}H=H.return}E=H}}function Ha(o,c,p,y){o=null;for(var E=c,w=!1;E!==null;){if(!w){if((E.flags&524288)!==0)w=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var H=E.alternate;if(H===null)throw Error(n(387));if(H=H.memoizedProps,H!==null){var j=E.type;Pr(E.pendingProps.value,H.value)||(o!==null?o.push(j):o=[j])}}else if(E===Ut.current){if(H=E.alternate,H===null)throw Error(n(387));H.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(F2):o=[F2])}E=E.return}o!==null&&Np(c,o,p,y),c.flags|=262144}function Ip(o){for(o=o.firstContext;o!==null;){if(!Pr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function tl(o){qc=o,Ql=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ii(o){return D0(qc,o)}function Up(o,c){return qc===null&&tl(o),D0(o,c)}function D0(o,c){var p=c._currentValue;if(c={context:c,memoizedValue:p,next:null},Ql===null){if(o===null)throw Error(n(308));Ql=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Ql=Ql.next=c;return p}var r2=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(p,y){o.push(y)}};this.abort=function(){c.aborted=!0,o.forEach(function(p){return p()})}},YM=i.unstable_scheduleCallback,pb=i.unstable_NormalPriority,ts={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function B0(){return{controller:new r2,data:new Map,refCount:0}}function Cf(o){o.refCount--,o.refCount===0&&YM(pb,function(){o.controller.abort()})}var wf=null,Pp=0,tn=0,Rf=null;function ua(o,c){if(wf===null){var p=wf=[];Pp=0,tn=sT(),Rf={status:"pending",value:void 0,then:function(y){p.push(y)}}}return Pp++,c.then(O0,O0),c}function O0(){if(--Pp===0&&wf!==null){Rf!==null&&(Rf.status="fulfilled");var o=wf;wf=null,tn=0,Rf=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function WM(o,c){var p=[],y={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return o.then(function(){y.status="fulfilled",y.value=c;for(var E=0;E<p.length;E++)(0,p[E])(c)},function(E){for(y.status="rejected",y.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),y}var Fp=Q.S;Q.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&ua(o,c),Fp!==null&&Fp(o,c)};var za=at(null);function Wc(){var o=za.current;return o!==null?o:We.pooledCache}function Hp(o,c){c===null?Et(za,za.current):Et(za,c.pool)}function N0(){var o=Wc();return o===null?null:{parent:ts._currentValue,pool:o}}var zp=Error(n(460)),a2=Error(n(474)),mo=Error(n(542)),Gp={then:function(){}};function I0(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Lf(){}function U0(o,c,p){switch(p=o[p],p===void 0?o.push(c):p!==c&&(c.then(Lf,Lf),c=p),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,mb(o),o;default:if(typeof c.status=="string")c.then(Lf,Lf);else{if(o=We,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=c,o.status="pending",o.then(function(y){if(c.status==="pending"){var E=c;E.status="fulfilled",E.value=y}},function(y){if(c.status==="pending"){var E=c;E.status="rejected",E.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,mb(o),o}throw Ga=c,zp}}var Ga=null;function o2(){if(Ga===null)throw Error(n(459));var o=Ga;return Ga=null,o}function mb(o){if(o===zp||o===mo)throw Error(n(483))}var jl=!1;function l2(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qe(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function el(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ql(o,c,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(jn&2)!==0){var E=y.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),y.pending=c,c=Sf(o),Jy(o,null,p),c}return kc(o,y,c,p),Sf(o)}function Qu(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194048)!==0)){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,qe(o,p)}}function Df(o,c){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var H={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};w===null?E=w=H:w=w.next=H,p=p.next}while(p!==null);w===null?E=w=c:w=w.next=c}else E=w=c;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:w,shared:y.shared,callbacks:y.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}var c2=!1;function kp(){if(c2){var o=Rf;if(o!==null)throw o}}function Bf(o,c,p,y){c2=!1;var E=o.updateQueue;jl=!1;var w=E.firstBaseUpdate,H=E.lastBaseUpdate,j=E.shared.pending;if(j!==null){E.shared.pending=null;var st=j,St=st.next;st.next=null,H===null?w=St:H.next=St,H=st;var zt=o.alternate;zt!==null&&(zt=zt.updateQueue,j=zt.lastBaseUpdate,j!==H&&(j===null?zt.firstBaseUpdate=St:j.next=St,zt.lastBaseUpdate=st))}if(w!==null){var jt=E.baseState;H=0,zt=St=st=null,j=w;do{var Tt=j.lane&-536870913,Lt=Tt!==j.lane;if(Lt?(Ie&Tt)===Tt:(y&Tt)===Tt){Tt!==0&&Tt===tn&&(c2=!0),zt!==null&&(zt=zt.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});t:{var je=o,ke=j;Tt=c;var yi=p;switch(ke.tag){case 1:if(je=ke.payload,typeof je=="function"){jt=je.call(yi,jt,Tt);break t}jt=je;break t;case 3:je.flags=je.flags&-65537|128;case 0:if(je=ke.payload,Tt=typeof je=="function"?je.call(yi,jt,Tt):je,Tt==null)break t;jt=m({},jt,Tt);break t;case 2:jl=!0}}Tt=j.callback,Tt!==null&&(o.flags|=64,Lt&&(o.flags|=8192),Lt=E.callbacks,Lt===null?E.callbacks=[Tt]:Lt.push(Tt))}else Lt={lane:Tt,tag:j.tag,payload:j.payload,callback:j.callback,next:null},zt===null?(St=zt=Lt,st=jt):zt=zt.next=Lt,H|=Tt;if(j=j.next,j===null){if(j=E.shared.pending,j===null)break;Lt=j,j=Lt.next,Lt.next=null,E.lastBaseUpdate=Lt,E.shared.pending=null}}while(!0);zt===null&&(st=jt),E.baseState=st,E.firstBaseUpdate=St,E.lastBaseUpdate=zt,w===null&&(E.shared.lanes=0),So|=H,o.lanes=H,o.memoizedState=jt}}function Of(o,c){if(typeof o!="function")throw Error(n(191,o));o.call(c)}function gb(o,c){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)Of(p[o],c)}var Nf=at(null),P0=at(0);function vb(o,c){o=qa,Et(P0,o),Et(Nf,c),qa=o|c.baseLanes}function u2(){Et(P0,qa),Et(Nf,Nf.current)}function Vp(){qa=P0.current,xt(Nf),xt(P0)}var Yl=0,en=null,Zn=null,es=null,F0=!1,Kc=!1,Ar=!1,us=0,ka=0,Hs=null,yb=0;function ki(){throw Error(n(321))}function er(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!Pr(o[p],c[p]))return!1;return!0}function Wl(o,c,p,y,E,w){return Yl=w,en=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Q.H=o===null||o.memoizedState===null?q0:T2,Ar=!1,w=p(y,E),Ar=!1,Kc&&(w=Ab(c,p,y,E)),_b(o),w}function _b(o){Q.H=jp;var c=Zn!==null&&Zn.next!==null;if(Yl=0,es=Zn=en=null,F0=!1,ka=0,Hs=null,c)throw Error(n(300));o===null||bs||(o=o.dependencies,o!==null&&Ip(o)&&(bs=!0))}function Ab(o,c,p,y){en=o;var E=0;do{if(Kc&&(Hs=null),ka=0,Kc=!1,25<=E)throw Error(n(301));if(E+=1,es=Zn=null,o.updateQueue!=null){var w=o.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Q.H=jb,w=c(p,y)}while(Kc);return w}function KM(){var o=Q.H,c=o.useState()[0];return c=typeof c.then=="function"?go(c):c,o=o.useState()[0],(Zn!==null?Zn.memoizedState:null)!==o&&(en.flags|=1024),c}function h2(){var o=us!==0;return us=0,o}function H0(o,c,p){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~p}function f2(o){if(F0){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}F0=!1}Yl=0,es=Zn=en=null,Kc=!1,ka=us=0,Hs=null}function xr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return es===null?en.memoizedState=es=o:es=es.next=o,es}function ns(){if(Zn===null){var o=en.alternate;o=o!==null?o.memoizedState:null}else o=Zn.next;var c=es===null?en.memoizedState:es.next;if(c!==null)es=c,Zn=o;else{if(o===null)throw en.alternate===null?Error(n(467)):Error(n(310));Zn=o,o={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},es===null?en.memoizedState=es=o:es=es.next=o}return es}function Jc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function go(o){var c=ka;return ka+=1,Hs===null&&(Hs=[]),o=U0(Hs,o,c),c=en,(es===null?c.memoizedState:es.next)===null&&(c=c.alternate,Q.H=c===null||c.memoizedState===null?q0:T2),o}function z0(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return go(o);if(o.$$typeof===B)return Ii(o)}throw Error(n(438,String(o)))}function d2(o){var c=null,p=en.updateQueue;if(p!==null&&(c=p.memoCache),c==null){var y=en.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(E){return E.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),p===null&&(p=Jc(),en.updateQueue=p),p.memoCache=c,p=c.data[c.index],p===void 0)for(p=c.data[c.index]=Array(o),y=0;y<o;y++)p[y]=P;return c.index++,p}function Kl(o,c){return typeof c=="function"?c(o):c}function Zc(o){var c=ns();return p2(c,Zn,o)}function p2(o,c,p){var y=o.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=p;var E=o.baseQueue,w=y.pending;if(w!==null){if(E!==null){var H=E.next;E.next=w.next,w.next=H}c.baseQueue=E=w,y.pending=null}if(w=o.baseState,E===null)o.memoizedState=w;else{c=E.next;var j=H=null,st=null,St=c,zt=!1;do{var jt=St.lane&-536870913;if(jt!==St.lane?(Ie&jt)===jt:(Yl&jt)===jt){var Tt=St.revertLane;if(Tt===0)st!==null&&(st=st.next={lane:0,revertLane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),jt===tn&&(zt=!0);else if((Yl&Tt)===Tt){St=St.next,Tt===tn&&(zt=!0);continue}else jt={lane:0,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},st===null?(j=st=jt,H=w):st=st.next=jt,en.lanes|=Tt,So|=Tt;jt=St.action,Ar&&p(w,jt),w=St.hasEagerState?St.eagerState:p(w,jt)}else Tt={lane:jt,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},st===null?(j=st=Tt,H=w):st=st.next=Tt,en.lanes|=jt,So|=jt;St=St.next}while(St!==null&&St!==c);if(st===null?H=w:st.next=j,!Pr(w,o.memoizedState)&&(bs=!0,zt&&(p=Rf,p!==null)))throw p;o.memoizedState=w,o.baseState=H,o.baseQueue=st,y.lastRenderedState=w}return E===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function m2(o){var c=ns(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=o;var y=p.dispatch,E=p.pending,w=c.memoizedState;if(E!==null){p.pending=null;var H=E=E.next;do w=o(w,H.action),H=H.next;while(H!==E);Pr(w,c.memoizedState)||(bs=!0),c.memoizedState=w,c.baseQueue===null&&(c.baseState=w),p.lastRenderedState=w}return[w,y]}function xb(o,c,p){var y=en,E=ns(),w=kn;if(w){if(p===void 0)throw Error(n(407));p=p()}else p=c();var H=!Pr((Zn||E).memoizedState,p);H&&(E.memoizedState=p,bs=!0),E=E.queue;var j=Sb.bind(null,y,E,o);if(Pf(2048,8,j,[o]),E.getSnapshot!==c||H||es!==null&&es.memoizedState.tag&1){if(y.flags|=2048,Uf(9,Qp(),bb.bind(null,y,E,p,c),null),We===null)throw Error(n(349));w||(Yl&124)!==0||If(y,c,p)}return p}function If(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=en.updateQueue,c===null?(c=Jc(),en.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function bb(o,c,p,y){c.value=p,c.getSnapshot=y,Eb(c)&&Mb(o)}function Sb(o,c,p){return p(function(){Eb(c)&&Mb(o)})}function Eb(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!Pr(o,p)}catch{return!0}}function Mb(o){var c=kl(o,2);c!==null&&Er(c,o,2)}function g2(o){var c=xr();if(typeof o=="function"){var p=o;if(o=p(),Ar){te(!0);try{p()}finally{te(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:o},c}function Tb(o,c,p,y){return o.baseState=p,p2(o,Zn,typeof y=="function"?y:Kl)}function JM(o,c,p,y,E){if(j0(o))throw Error(n(485));if(o=c.action,o!==null){var w={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){w.listeners.push(H)}};Q.T!==null?p(!0):w.isTransition=!1,y(w),p=c.pending,p===null?(w.next=c.pending=w,Cb(c,w)):(w.next=p.next,c.pending=p.next=w)}}function Cb(o,c){var p=c.action,y=c.payload,E=o.state;if(c.isTransition){var w=Q.T,H={};Q.T=H;try{var j=p(E,y),st=Q.S;st!==null&&st(H,j),wb(o,c,j)}catch(St){v2(o,c,St)}finally{Q.T=w}}else try{w=p(E,y),wb(o,c,w)}catch(St){v2(o,c,St)}}function wb(o,c,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Rb(o,c,y)},function(y){return v2(o,c,y)}):Rb(o,c,p)}function Rb(o,c,p){c.status="fulfilled",c.value=p,Lb(c),o.state=p,c=o.pending,c!==null&&(p=c.next,p===c?o.pending=null:(p=p.next,c.next=p,Cb(o,p)))}function v2(o,c,p){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=p,Lb(c),c=c.next;while(c!==y)}o.action=null}function Lb(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function y2(o,c){return c}function Db(o,c){if(kn){var p=We.formState;if(p!==null){t:{var y=en;if(kn){if(Li){e:{for(var E=Li,w=ca;E.nodeType!==8;){if(!w){E=null;break e}if(E=ic(E.nextSibling),E===null){E=null;break e}}w=E.data,E=w==="F!"||w==="F"?E:null}if(E){Li=ic(E.nextSibling),y=E.data==="F!";break t}}jc(y)}y=!1}y&&(c=p[0])}}return p=xr(),p.memoizedState=p.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y2,lastRenderedState:c},p.queue=y,p=Qb.bind(null,en,y),y.dispatch=p,y=g2(!1),w=X0.bind(null,en,!1,y.queue),y=xr(),E={state:c,dispatch:null,action:o,pending:null},y.queue=E,p=JM.bind(null,en,E,w,p),E.dispatch=p,y.memoizedState=o,[c,p,!1]}function Bb(o){var c=ns();return Ob(c,Zn,o)}function Ob(o,c,p){if(c=p2(o,c,y2)[0],o=Zc(Kl)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=go(c)}catch(H){throw H===zp?mo:H}else y=c;c=ns();var E=c.queue,w=E.dispatch;return p!==c.memoizedState&&(en.flags|=2048,Uf(9,Qp(),ZM.bind(null,E,p),null)),[y,w,o]}function ZM(o,c){o.action=c}function Nb(o){var c=ns(),p=Zn;if(p!==null)return Ob(c,p,o);ns(),c=c.memoizedState,p=ns();var y=p.queue.dispatch;return p.memoizedState=o,[c,y,!1]}function Uf(o,c,p,y){return o={tag:o,create:p,deps:y,inst:c,next:null},c=en.updateQueue,c===null&&(c=Jc(),en.updateQueue=c),p=c.lastEffect,p===null?c.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,c.lastEffect=o),o}function Qp(){return{destroy:void 0,resource:void 0}}function _2(){return ns().memoizedState}function G0(o,c,p,y){var E=xr();y=y===void 0?null:y,en.flags|=o,E.memoizedState=Uf(1|c,Qp(),p,y)}function Pf(o,c,p,y){var E=ns();y=y===void 0?null:y;var w=E.memoizedState.inst;Zn!==null&&y!==null&&er(y,Zn.memoizedState.deps)?E.memoizedState=Uf(c,w,p,y):(en.flags|=o,E.memoizedState=Uf(1|c,w,p,y))}function A2(o,c){G0(8390656,8,o,c)}function x2(o,c){Pf(2048,8,o,c)}function k0(o,c){return Pf(4,2,o,c)}function V0(o,c){return Pf(4,4,o,c)}function Ib(o,c){if(typeof c=="function"){o=o();var p=c(o);return function(){typeof p=="function"?p():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Ub(o,c,p){p=p!=null?p.concat([o]):null,Pf(4,4,Ib.bind(null,c,o),p)}function b2(){}function Pb(o,c){var p=ns();c=c===void 0?null:c;var y=p.memoizedState;return c!==null&&er(c,y[1])?y[0]:(p.memoizedState=[o,c],o)}function S2(o,c){var p=ns();c=c===void 0?null:c;var y=p.memoizedState;if(c!==null&&er(c,y[1]))return y[0];if(y=o(),Ar){te(!0);try{o()}finally{te(!1)}}return p.memoizedState=[y,c],y}function Q0(o,c,p){return p===void 0||(Yl&1073741824)!==0?o.memoizedState=c:(o.memoizedState=p,o=s1(),en.lanes|=o,So|=o,p)}function Fb(o,c,p,y){return Pr(p,c)?p:Nf.current!==null?(o=Q0(o,p,y),Pr(o,c)||(bs=!0),o):(Yl&42)===0?(bs=!0,o.memoizedState=p):(o=s1(),en.lanes|=o,So|=o,c)}function Hb(o,c,p,y,E){var w=tt.p;tt.p=w!==0&&8>w?w:8;var H=Q.T,j={};Q.T=j,X0(o,!1,c,p);try{var st=E(),St=Q.S;if(St!==null&&St(j,st),st!==null&&typeof st=="object"&&typeof st.then=="function"){var zt=WM(st,y);Xp(o,c,zt,Fi(o))}else Xp(o,c,y,Fi(o))}catch(jt){Xp(o,c,{then:function(){},status:"rejected",reason:jt},Fi())}finally{tt.p=w,Q.T=H}}function $M(){}function E2(o,c,p,y){if(o.tag!==5)throw Error(n(476));var E=zb(o).queue;Hb(o,E,c,et,p===null?$M:function(){return Gb(o),p(y)})}function zb(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:et},next:null};var p={};return c.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:p},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function Gb(o){var c=zb(o).next.queue;Xp(o,c,{},Fi())}function M2(){return Ii(F2)}function kb(){return ns().memoizedState}function Vb(){return ns().memoizedState}function tT(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var p=Fi();o=el(p);var y=ql(c,o,p);y!==null&&(Er(y,c,p),Qu(y,c,p)),c={cache:B0()},o.payload=c;return}c=c.return}}function eT(o,c,p){var y=Fi();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},j0(o)?Xb(c,p):(p=C0(o,c,p,y),p!==null&&(Er(p,o,y),ha(p,c,y)))}function Qb(o,c,p){var y=Fi();Xp(o,c,p,y)}function Xp(o,c,p,y){var E={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(j0(o))Xb(c,E);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=c.lastRenderedReducer,w!==null))try{var H=c.lastRenderedState,j=w(H,p);if(E.hasEagerState=!0,E.eagerState=j,Pr(j,H))return kc(o,c,E,0),We===null&&Lp(),!1}catch{}finally{}if(p=C0(o,c,E,y),p!==null)return Er(p,o,y),ha(p,c,y),!0}return!1}function X0(o,c,p,y){if(y={lane:2,revertLane:sT(),action:y,hasEagerState:!1,eagerState:null,next:null},j0(o)){if(c)throw Error(n(479))}else c=C0(o,p,y,2),c!==null&&Er(c,o,2)}function j0(o){var c=o.alternate;return o===en||c!==null&&c===en}function Xb(o,c){Kc=F0=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function ha(o,c,p){if((p&4194048)!==0){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,qe(o,p)}}var jp={readContext:Ii,use:z0,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useLayoutEffect:ki,useInsertionEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useSyncExternalStore:ki,useId:ki,useHostTransitionStatus:ki,useFormState:ki,useActionState:ki,useOptimistic:ki,useMemoCache:ki,useCacheRefresh:ki},q0={readContext:Ii,use:z0,useCallback:function(o,c){return xr().memoizedState=[o,c===void 0?null:c],o},useContext:Ii,useEffect:A2,useImperativeHandle:function(o,c,p){p=p!=null?p.concat([o]):null,G0(4194308,4,Ib.bind(null,c,o),p)},useLayoutEffect:function(o,c){return G0(4194308,4,o,c)},useInsertionEffect:function(o,c){G0(4,2,o,c)},useMemo:function(o,c){var p=xr();c=c===void 0?null:c;var y=o();if(Ar){te(!0);try{o()}finally{te(!1)}}return p.memoizedState=[y,c],y},useReducer:function(o,c,p){var y=xr();if(p!==void 0){var E=p(c);if(Ar){te(!0);try{p(c)}finally{te(!1)}}}else E=c;return y.memoizedState=y.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},y.queue=o,o=o.dispatch=eT.bind(null,en,o),[y.memoizedState,o]},useRef:function(o){var c=xr();return o={current:o},c.memoizedState=o},useState:function(o){o=g2(o);var c=o.queue,p=Qb.bind(null,en,c);return c.dispatch=p,[o.memoizedState,p]},useDebugValue:b2,useDeferredValue:function(o,c){var p=xr();return Q0(p,o,c)},useTransition:function(){var o=g2(!1);return o=Hb.bind(null,en,o.queue,!0,!1),xr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,p){var y=en,E=xr();if(kn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=c(),We===null)throw Error(n(349));(Ie&124)!==0||If(y,c,p)}E.memoizedState=p;var w={value:p,getSnapshot:c};return E.queue=w,A2(Sb.bind(null,y,w,o),[o]),y.flags|=2048,Uf(9,Qp(),bb.bind(null,y,w,p,c),null),p},useId:function(){var o=xr(),c=We.identifierPrefix;if(kn){var p=$o,y=Zo;p=(y&~(1<<32-ge(y)-1)).toString(32)+p,c=""+c+"R"+p,p=us++,0<p&&(c+="H"+p.toString(32)),c+=""}else p=yb++,c=""+c+"r"+p.toString(32)+"";return o.memoizedState=c},useHostTransitionStatus:M2,useFormState:Db,useActionState:Db,useOptimistic:function(o){var c=xr();c.memoizedState=c.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=p,c=X0.bind(null,en,!0,p),p.dispatch=c,[o,c]},useMemoCache:d2,useCacheRefresh:function(){return xr().memoizedState=tT.bind(null,en)}},T2={readContext:Ii,use:z0,useCallback:Pb,useContext:Ii,useEffect:x2,useImperativeHandle:Ub,useInsertionEffect:k0,useLayoutEffect:V0,useMemo:S2,useReducer:Zc,useRef:_2,useState:function(){return Zc(Kl)},useDebugValue:b2,useDeferredValue:function(o,c){var p=ns();return Fb(p,Zn.memoizedState,o,c)},useTransition:function(){var o=Zc(Kl)[0],c=ns().memoizedState;return[typeof o=="boolean"?o:go(o),c]},useSyncExternalStore:xb,useId:kb,useHostTransitionStatus:M2,useFormState:Bb,useActionState:Bb,useOptimistic:function(o,c){var p=ns();return Tb(p,Zn,o,c)},useMemoCache:d2,useCacheRefresh:Vb},jb={readContext:Ii,use:z0,useCallback:Pb,useContext:Ii,useEffect:x2,useImperativeHandle:Ub,useInsertionEffect:k0,useLayoutEffect:V0,useMemo:S2,useReducer:m2,useRef:_2,useState:function(){return m2(Kl)},useDebugValue:b2,useDeferredValue:function(o,c){var p=ns();return Zn===null?Q0(p,o,c):Fb(p,Zn.memoizedState,o,c)},useTransition:function(){var o=m2(Kl)[0],c=ns().memoizedState;return[typeof o=="boolean"?o:go(o),c]},useSyncExternalStore:xb,useId:kb,useHostTransitionStatus:M2,useFormState:Nb,useActionState:Nb,useOptimistic:function(o,c){var p=ns();return Zn!==null?Tb(p,Zn,o,c):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:d2,useCacheRefresh:Vb},Xu=null,qp=0;function Yp(o){var c=qp;return qp+=1,Xu===null&&(Xu=[]),U0(Xu,o,c)}function Ff(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Y0(o,c){throw c.$$typeof===g?Error(n(525)):(o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function qb(o){var c=o._init;return c(o._payload)}function Yb(o){function c(gt,ft){if(o){var bt=gt.deletions;bt===null?(gt.deletions=[ft],gt.flags|=16):bt.push(ft)}}function p(gt,ft){if(!o)return null;for(;ft!==null;)c(gt,ft),ft=ft.sibling;return null}function y(gt){for(var ft=new Map;gt!==null;)gt.key!==null?ft.set(gt.key,gt):ft.set(gt.index,gt),gt=gt.sibling;return ft}function E(gt,ft){return gt=Gi(gt,ft),gt.index=0,gt.sibling=null,gt}function w(gt,ft,bt){return gt.index=bt,o?(bt=gt.alternate,bt!==null?(bt=bt.index,bt<ft?(gt.flags|=67108866,ft):bt):(gt.flags|=67108866,ft)):(gt.flags|=1048576,ft)}function H(gt){return o&&gt.alternate===null&&(gt.flags|=67108866),gt}function j(gt,ft,bt,kt){return ft===null||ft.tag!==6?(ft=Bp(bt,gt.mode,kt),ft.return=gt,ft):(ft=E(ft,bt),ft.return=gt,ft)}function st(gt,ft,bt,kt){var Ee=bt.type;return Ee===b?zt(gt,ft,bt.props.children,kt,bt.key):ft!==null&&(ft.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===z&&qb(Ee)===ft.type)?(ft=E(ft,bt.props),Ff(ft,bt),ft.return=gt,ft):(ft=xs(bt.type,bt.key,bt.props,null,gt.mode,kt),Ff(ft,bt),ft.return=gt,ft)}function St(gt,ft,bt,kt){return ft===null||ft.tag!==4||ft.stateNode.containerInfo!==bt.containerInfo||ft.stateNode.implementation!==bt.implementation?(ft=w0(bt,gt.mode,kt),ft.return=gt,ft):(ft=E(ft,bt.children||[]),ft.return=gt,ft)}function zt(gt,ft,bt,kt,Ee){return ft===null||ft.tag!==7?(ft=Qc(bt,gt.mode,kt,Ee),ft.return=gt,ft):(ft=E(ft,bt),ft.return=gt,ft)}function jt(gt,ft,bt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return ft=Bp(""+ft,gt.mode,bt),ft.return=gt,ft;if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case v:return bt=xs(ft.type,ft.key,ft.props,null,gt.mode,bt),Ff(bt,ft),bt.return=gt,bt;case _:return ft=w0(ft,gt.mode,bt),ft.return=gt,ft;case z:var kt=ft._init;return ft=kt(ft._payload),jt(gt,ft,bt)}if(dt(ft)||ot(ft))return ft=Qc(ft,gt.mode,bt,null),ft.return=gt,ft;if(typeof ft.then=="function")return jt(gt,Yp(ft),bt);if(ft.$$typeof===B)return jt(gt,Up(gt,ft),bt);Y0(gt,ft)}return null}function Tt(gt,ft,bt,kt){var Ee=ft!==null?ft.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return Ee!==null?null:j(gt,ft,""+bt,kt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case v:return bt.key===Ee?st(gt,ft,bt,kt):null;case _:return bt.key===Ee?St(gt,ft,bt,kt):null;case z:return Ee=bt._init,bt=Ee(bt._payload),Tt(gt,ft,bt,kt)}if(dt(bt)||ot(bt))return Ee!==null?null:zt(gt,ft,bt,kt,null);if(typeof bt.then=="function")return Tt(gt,ft,Yp(bt),kt);if(bt.$$typeof===B)return Tt(gt,ft,Up(gt,bt),kt);Y0(gt,bt)}return null}function Lt(gt,ft,bt,kt,Ee){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return gt=gt.get(bt)||null,j(ft,gt,""+kt,Ee);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case v:return gt=gt.get(kt.key===null?bt:kt.key)||null,st(ft,gt,kt,Ee);case _:return gt=gt.get(kt.key===null?bt:kt.key)||null,St(ft,gt,kt,Ee);case z:var En=kt._init;return kt=En(kt._payload),Lt(gt,ft,bt,kt,Ee)}if(dt(kt)||ot(kt))return gt=gt.get(bt)||null,zt(ft,gt,kt,Ee,null);if(typeof kt.then=="function")return Lt(gt,ft,bt,Yp(kt),Ee);if(kt.$$typeof===B)return Lt(gt,ft,bt,Up(ft,kt),Ee);Y0(ft,kt)}return null}function je(gt,ft,bt,kt){for(var Ee=null,En=null,Be=ft,Ve=ft=0,sr=null;Be!==null&&Ve<bt.length;Ve++){Be.index>Ve?(sr=Be,Be=null):sr=Be.sibling;var Yn=Tt(gt,Be,bt[Ve],kt);if(Yn===null){Be===null&&(Be=sr);break}o&&Be&&Yn.alternate===null&&c(gt,Be),ft=w(Yn,ft,Ve),En===null?Ee=Yn:En.sibling=Yn,En=Yn,Be=sr}if(Ve===bt.length)return p(gt,Be),kn&&Vl(gt,Ve),Ee;if(Be===null){for(;Ve<bt.length;Ve++)Be=jt(gt,bt[Ve],kt),Be!==null&&(ft=w(Be,ft,Ve),En===null?Ee=Be:En.sibling=Be,En=Be);return kn&&Vl(gt,Ve),Ee}for(Be=y(Be);Ve<bt.length;Ve++)sr=Lt(Be,gt,Ve,bt[Ve],kt),sr!==null&&(o&&sr.alternate!==null&&Be.delete(sr.key===null?Ve:sr.key),ft=w(sr,ft,Ve),En===null?Ee=sr:En.sibling=sr,En=sr);return o&&Be.forEach(function(ed){return c(gt,ed)}),kn&&Vl(gt,Ve),Ee}function ke(gt,ft,bt,kt){if(bt==null)throw Error(n(151));for(var Ee=null,En=null,Be=ft,Ve=ft=0,sr=null,Yn=bt.next();Be!==null&&!Yn.done;Ve++,Yn=bt.next()){Be.index>Ve?(sr=Be,Be=null):sr=Be.sibling;var ed=Tt(gt,Be,Yn.value,kt);if(ed===null){Be===null&&(Be=sr);break}o&&Be&&ed.alternate===null&&c(gt,Be),ft=w(ed,ft,Ve),En===null?Ee=ed:En.sibling=ed,En=ed,Be=sr}if(Yn.done)return p(gt,Be),kn&&Vl(gt,Ve),Ee;if(Be===null){for(;!Yn.done;Ve++,Yn=bt.next())Yn=jt(gt,Yn.value,kt),Yn!==null&&(ft=w(Yn,ft,Ve),En===null?Ee=Yn:En.sibling=Yn,En=Yn);return kn&&Vl(gt,Ve),Ee}for(Be=y(Be);!Yn.done;Ve++,Yn=bt.next())Yn=Lt(Be,gt,Ve,Yn.value,kt),Yn!==null&&(o&&Yn.alternate!==null&&Be.delete(Yn.key===null?Ve:Yn.key),ft=w(Yn,ft,Ve),En===null?Ee=Yn:En.sibling=Yn,En=Yn);return o&&Be.forEach(function(WP){return c(gt,WP)}),kn&&Vl(gt,Ve),Ee}function yi(gt,ft,bt,kt){if(typeof bt=="object"&&bt!==null&&bt.type===b&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case v:t:{for(var Ee=bt.key;ft!==null;){if(ft.key===Ee){if(Ee=bt.type,Ee===b){if(ft.tag===7){p(gt,ft.sibling),kt=E(ft,bt.props.children),kt.return=gt,gt=kt;break t}}else if(ft.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===z&&qb(Ee)===ft.type){p(gt,ft.sibling),kt=E(ft,bt.props),Ff(kt,bt),kt.return=gt,gt=kt;break t}p(gt,ft);break}else c(gt,ft);ft=ft.sibling}bt.type===b?(kt=Qc(bt.props.children,gt.mode,kt,bt.key),kt.return=gt,gt=kt):(kt=xs(bt.type,bt.key,bt.props,null,gt.mode,kt),Ff(kt,bt),kt.return=gt,gt=kt)}return H(gt);case _:t:{for(Ee=bt.key;ft!==null;){if(ft.key===Ee)if(ft.tag===4&&ft.stateNode.containerInfo===bt.containerInfo&&ft.stateNode.implementation===bt.implementation){p(gt,ft.sibling),kt=E(ft,bt.children||[]),kt.return=gt,gt=kt;break t}else{p(gt,ft);break}else c(gt,ft);ft=ft.sibling}kt=w0(bt,gt.mode,kt),kt.return=gt,gt=kt}return H(gt);case z:return Ee=bt._init,bt=Ee(bt._payload),yi(gt,ft,bt,kt)}if(dt(bt))return je(gt,ft,bt,kt);if(ot(bt)){if(Ee=ot(bt),typeof Ee!="function")throw Error(n(150));return bt=Ee.call(bt),ke(gt,ft,bt,kt)}if(typeof bt.then=="function")return yi(gt,ft,Yp(bt),kt);if(bt.$$typeof===B)return yi(gt,ft,Up(gt,bt),kt);Y0(gt,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint"?(bt=""+bt,ft!==null&&ft.tag===6?(p(gt,ft.sibling),kt=E(ft,bt),kt.return=gt,gt=kt):(p(gt,ft),kt=Bp(bt,gt.mode,kt),kt.return=gt,gt=kt),H(gt)):p(gt,ft)}return function(gt,ft,bt,kt){try{qp=0;var Ee=yi(gt,ft,bt,kt);return Xu=null,Ee}catch(Be){if(Be===zp||Be===mo)throw Be;var En=zr(29,Be,null,gt.mode);return En.lanes=kt,En.return=gt,En}finally{}}}var ju=Yb(!0),Wb=Yb(!1),ai=at(null),vo=null;function $c(o){var c=o.alternate;Et(Vi,Vi.current&1),Et(ai,o),vo===null&&(c===null||Nf.current!==null||c.memoizedState!==null)&&(vo=o)}function Kb(o){if(o.tag===22){if(Et(Vi,Vi.current),Et(ai,o),vo===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(vo=o)}}else tu()}function tu(){Et(Vi,Vi.current),Et(ai,ai.current)}function nl(o){xt(ai),vo===o&&(vo=null),xt(Vi)}var Vi=at(0);function Jl(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||gT(p)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function eu(o,c,p,y){c=o.memoizedState,p=p(y,c),p=p==null?c:m({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var br={enqueueSetState:function(o,c,p){o=o._reactInternals;var y=Fi(),E=el(y);E.payload=c,p!=null&&(E.callback=p),c=ql(o,E,y),c!==null&&(Er(c,o,y),Qu(c,o,y))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var y=Fi(),E=el(y);E.tag=1,E.payload=c,p!=null&&(E.callback=p),c=ql(o,E,y),c!==null&&(Er(c,o,y),Qu(c,o,y))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=Fi(),y=el(p);y.tag=2,c!=null&&(y.callback=c),c=ql(o,y,p),c!==null&&(Er(c,o,p),Qu(c,o,p))}};function Jb(o,c,p,y,E,w,H){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,w,H):c.prototype&&c.prototype.isPureReactComponent?!fo(p,y)||!fo(E,w):!0}function Zb(o,c,p,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==o&&br.enqueueReplaceState(c,c.state,null)}function il(o,c){var p=c;if("ref"in c){p={};for(var y in c)y!=="ref"&&(p[y]=c[y])}if(o=o.defaultProps){p===c&&(p=m({},p));for(var E in o)p[E]===void 0&&(p[E]=o[E])}return p}var qu=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Wp(o){qu(o)}function W0(o){console.error(o)}function $b(o){qu(o)}function K0(o,c){try{var p=o.onUncaughtError;p(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function Va(o,c,p){try{var y=o.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function J0(o,c,p){return p=el(p),p.tag=3,p.payload={element:null},p.callback=function(){K0(o,c)},p}function tS(o){return o=el(o),o.tag=3,o}function Z0(o,c,p,y){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var w=y.value;o.payload=function(){return E(w)},o.callback=function(){Va(c,p,y)}}var H=p.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(o.callback=function(){Va(c,p,y),typeof E!="function"&&(_a===null?_a=new Set([this]):_a.add(this));var j=y.stack;this.componentDidCatch(y.value,{componentStack:j!==null?j:""})})}function nT(o,c,p,y,E){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=p.alternate,c!==null&&Ha(c,p,E,!0),p=ai.current,p!==null){switch(p.tag){case 13:return vo===null?h():p.alternate===null&&xi===0&&(xi=3),p.flags&=-257,p.flags|=65536,p.lanes=E,y===Gp?p.flags|=16384:(c=p.updateQueue,c===null?p.updateQueue=new Set([y]):c.add(y),Dt(o,y,E)),!1;case 22:return p.flags|=65536,y===Gp?p.flags|=16384:(c=p.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=c):(p=c.retryQueue,p===null?c.retryQueue=new Set([y]):p.add(y)),Dt(o,y,E)),!1}throw Error(n(435,p.tag))}return Dt(o,y,E),h(),!1}if(kn)return c=ai.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=E,y!==L0&&(o=Error(n(422),{cause:y}),Vu(Ps(o,p)))):(y!==L0&&(c=Error(n(423),{cause:y}),Vu(Ps(c,p))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,y=Ps(y,p),E=J0(o.stateNode,y,E),Df(o,E),xi!==4&&(xi=2)),!1;var w=Error(n(520),{cause:y});if(w=Ps(w,p),qn===null?qn=[w]:qn.push(w),xi!==4&&(xi=2),c===null)return!0;y=Ps(y,p),p=c;do{switch(p.tag){case 3:return p.flags|=65536,o=E&-E,p.lanes|=o,o=J0(p.stateNode,y,o),Df(p,o),!1;case 1:if(c=p.type,w=p.stateNode,(p.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(_a===null||!_a.has(w))))return p.flags|=65536,E&=-E,p.lanes|=E,E=tS(E),Z0(E,o,p,y),Df(p,E),!1}p=p.return}while(p!==null);return!1}var eS=Error(n(461)),bs=!1;function Qi(o,c,p,y){c.child=o===null?Wb(c,null,p,y):ju(c,o.child,p,y)}function kr(o,c,p,y,E){p=p.render;var w=c.ref;if("ref"in y){var H={};for(var j in y)j!=="ref"&&(H[j]=y[j])}else H=y;return tl(c),y=Wl(o,c,p,H,w,E),j=h2(),o!==null&&!bs?(H0(o,c,E),Ss(o,c,E)):(kn&&j&&t2(c),c.flags|=1,Qi(o,c,y,E),c.child)}function Vr(o,c,p,y,E){if(o===null){var w=p.type;return typeof w=="function"&&!Dp(w)&&w.defaultProps===void 0&&p.compare===null?(c.tag=15,c.type=w,C2(o,c,w,y,E)):(o=xs(p.type,null,y,c,c.mode,E),o.ref=c.ref,o.return=c,c.child=o)}if(w=o.child,!Kp(o,E)){var H=w.memoizedProps;if(p=p.compare,p=p!==null?p:fo,p(H,y)&&o.ref===c.ref)return Ss(o,c,E)}return c.flags|=1,o=Gi(w,y),o.ref=c.ref,o.return=c,c.child=o}function C2(o,c,p,y,E){if(o!==null){var w=o.memoizedProps;if(fo(w,y)&&o.ref===c.ref)if(bs=!1,c.pendingProps=y=w,Kp(o,E))(o.flags&131072)!==0&&(bs=!0);else return c.lanes=o.lanes,Ss(o,c,E)}return Hf(o,c,p,y,E)}function Yu(o,c,p){var y=c.pendingProps,E=y.children,w=o!==null?o.memoizedState:null;if(y.mode==="hidden"){if((c.flags&128)!==0){if(y=w!==null?w.baseLanes|p:p,o!==null){for(E=c.child=o.child,w=0;E!==null;)w=w|E.lanes|E.childLanes,E=E.sibling;c.childLanes=w&~y}else c.childLanes=0,c.child=null;return Wu(o,c,y,p)}if((p&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Hp(c,w!==null?w.cachePool:null),w!==null?vb(c,w):u2(),Kb(c);else return c.lanes=c.childLanes=536870912,Wu(o,c,w!==null?w.baseLanes|p:p,p)}else w!==null?(Hp(c,w.cachePool),vb(c,w),tu(),c.memoizedState=null):(o!==null&&Hp(c,null),u2(),tu());return Qi(o,c,E,p),c.child}function Wu(o,c,p,y){var E=Wc();return E=E===null?null:{parent:ts._currentValue,pool:E},c.memoizedState={baseLanes:p,cachePool:E},o!==null&&Hp(c,null),u2(),Kb(c),o!==null&&Ha(o,c,y,!0),null}function Ku(o,c){var p=c.ref;if(p===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(o===null||o.ref!==p)&&(c.flags|=4194816)}}function Hf(o,c,p,y,E){return tl(c),p=Wl(o,c,p,y,void 0,E),y=h2(),o!==null&&!bs?(H0(o,c,E),Ss(o,c,E)):(kn&&y&&t2(c),c.flags|=1,Qi(o,c,p,E),c.child)}function fa(o,c,p,y,E,w){return tl(c),c.updateQueue=null,p=Ab(c,y,p,E),_b(o),y=h2(),o!==null&&!bs?(H0(o,c,w),Ss(o,c,w)):(kn&&y&&t2(c),c.flags|=1,Qi(o,c,p,w),c.child)}function da(o,c,p,y,E){if(tl(c),c.stateNode===null){var w=Vc,H=p.contextType;typeof H=="object"&&H!==null&&(w=Ii(H)),w=new p(y,w),c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=br,c.stateNode=w,w._reactInternals=c,w=c.stateNode,w.props=y,w.state=c.memoizedState,w.refs={},l2(c),H=p.contextType,w.context=typeof H=="object"&&H!==null?Ii(H):Vc,w.state=c.memoizedState,H=p.getDerivedStateFromProps,typeof H=="function"&&(eu(c,p,H,y),w.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(H=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),H!==w.state&&br.enqueueReplaceState(w,w.state,null),Bf(c,y,w,E),kp(),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(o===null){w=c.stateNode;var j=c.memoizedProps,st=il(p,j);w.props=st;var St=w.context,zt=p.contextType;H=Vc,typeof zt=="object"&&zt!==null&&(H=Ii(zt));var jt=p.getDerivedStateFromProps;zt=typeof jt=="function"||typeof w.getSnapshotBeforeUpdate=="function",j=c.pendingProps!==j,zt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(j||St!==H)&&Zb(c,w,y,H),jl=!1;var Tt=c.memoizedState;w.state=Tt,Bf(c,y,w,E),kp(),St=c.memoizedState,j||Tt!==St||jl?(typeof jt=="function"&&(eu(c,p,jt,y),St=c.memoizedState),(st=jl||Jb(c,p,st,y,Tt,St,H))?(zt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(c.flags|=4194308)):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=St),w.props=y,w.state=St,w.context=H,y=st):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{w=c.stateNode,Qe(o,c),H=c.memoizedProps,zt=il(p,H),w.props=zt,jt=c.pendingProps,Tt=w.context,St=p.contextType,st=Vc,typeof St=="object"&&St!==null&&(st=Ii(St)),j=p.getDerivedStateFromProps,(St=typeof j=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(H!==jt||Tt!==st)&&Zb(c,w,y,st),jl=!1,Tt=c.memoizedState,w.state=Tt,Bf(c,y,w,E),kp();var Lt=c.memoizedState;H!==jt||Tt!==Lt||jl||o!==null&&o.dependencies!==null&&Ip(o.dependencies)?(typeof j=="function"&&(eu(c,p,j,y),Lt=c.memoizedState),(zt=jl||Jb(c,p,zt,y,Tt,Lt,st)||o!==null&&o.dependencies!==null&&Ip(o.dependencies))?(St||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(y,Lt,st),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(y,Lt,st)),typeof w.componentDidUpdate=="function"&&(c.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof w.componentDidUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Lt),w.props=y,w.state=Lt,w.context=st,y=zt):(typeof w.componentDidUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Tt===o.memoizedState||(c.flags|=1024),y=!1)}return w=y,Ku(o,c),y=(c.flags&128)!==0,w||y?(w=c.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:w.render(),c.flags|=1,o!==null&&y?(c.child=ju(c,o.child,null,E),c.child=ju(c,null,p,E)):Qi(o,c,p,E),c.memoizedState=w.state,o=c.child):o=Ss(o,c,E),o}function nu(o,c,p,y){return Tf(),c.flags|=256,Qi(o,c,p,y),c.child}var yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _o(o){return{baseLanes:o,cachePool:N0()}}function hs(o,c,p){return o=o!==null?o.childLanes&~p:0,c&&(o|=Ya),o}function zf(o,c,p){var y=c.pendingProps,E=!1,w=(c.flags&128)!==0,H;if((H=w)||(H=o!==null&&o.memoizedState===null?!1:(Vi.current&2)!==0),H&&(E=!0,c.flags&=-129),H=(c.flags&32)!==0,c.flags&=-33,o===null){if(kn){if(E?$c(c):tu(),kn){var j=Li,st;if(st=j){t:{for(st=j,j=ca;st.nodeType!==8;){if(!j){j=null;break t}if(st=ic(st.nextSibling),st===null){j=null;break t}}j=st}j!==null?(c.memoizedState={dehydrated:j,treeContext:Xc!==null?{id:Zo,overflow:$o}:null,retryLane:536870912,hydrationErrors:null},st=zr(18,null,null,0),st.stateNode=j,st.return=c,c.child=st,_r=c,Li=null,st=!0):st=!1}st||jc(c)}if(j=c.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return gT(j)?c.lanes=32:c.lanes=536870912,null;nl(c)}return j=y.children,y=y.fallback,E?(tu(),E=c.mode,j=Ju({mode:"hidden",children:j},E),y=Qc(y,E,p,null),j.return=c,y.return=c,j.sibling=y,c.child=j,E=c.child,E.memoizedState=_o(p),E.childLanes=hs(o,H,p),c.memoizedState=yo,y):($c(c),sl(c,j))}if(st=o.memoizedState,st!==null&&(j=st.dehydrated,j!==null)){if(w)c.flags&256?($c(c),c.flags&=-257,c=zs(o,c,p)):c.memoizedState!==null?(tu(),c.child=o.child,c.flags|=128,c=null):(tu(),E=y.fallback,j=c.mode,y=Ju({mode:"visible",children:y.children},j),E=Qc(E,j,p,null),E.flags|=2,y.return=c,E.return=c,y.sibling=E,c.child=y,ju(c,o.child,null,p),y=c.child,y.memoizedState=_o(p),y.childLanes=hs(o,H,p),c.memoizedState=yo,c=E);else if($c(c),gT(j)){if(H=j.nextSibling&&j.nextSibling.dataset,H)var St=H.dgst;H=St,y=Error(n(419)),y.stack="",y.digest=H,Vu({value:y,source:null,stack:null}),c=zs(o,c,p)}else if(bs||Ha(o,c,p,!1),H=(p&o.childLanes)!==0,bs||H){if(H=We,H!==null&&(y=p&-p,y=(y&42)!==0?1:Jn(y),y=(y&(H.suspendedLanes|p))!==0?0:y,y!==0&&y!==st.retryLane))throw st.retryLane=y,kl(o,y),Er(H,o,y),eS;j.data==="$?"||h(),c=zs(o,c,p)}else j.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=st.treeContext,Li=ic(j.nextSibling),_r=c,kn=!0,Fa=null,ca=!1,o!==null&&(Fs[la++]=Zo,Fs[la++]=$o,Fs[la++]=Xc,Zo=o.id,$o=o.overflow,Xc=c),c=sl(c,y.children),c.flags|=4096);return c}return E?(tu(),E=y.fallback,j=c.mode,st=o.child,St=st.sibling,y=Gi(st,{mode:"hidden",children:y.children}),y.subtreeFlags=st.subtreeFlags&65011712,St!==null?E=Gi(St,E):(E=Qc(E,j,p,null),E.flags|=2),E.return=c,y.return=c,y.sibling=E,c.child=y,y=E,E=c.child,j=o.child.memoizedState,j===null?j=_o(p):(st=j.cachePool,st!==null?(St=ts._currentValue,st=st.parent!==St?{parent:St,pool:St}:st):st=N0(),j={baseLanes:j.baseLanes|p,cachePool:st}),E.memoizedState=j,E.childLanes=hs(o,H,p),c.memoizedState=yo,y):($c(c),p=o.child,o=p.sibling,p=Gi(p,{mode:"visible",children:y.children}),p.return=c,p.sibling=null,o!==null&&(H=c.deletions,H===null?(c.deletions=[o],c.flags|=16):H.push(o)),c.child=p,c.memoizedState=null,p)}function sl(o,c){return c=Ju({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Ju(o,c){return o=zr(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function zs(o,c,p){return ju(c,o.child,null,p),o=sl(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function Gs(o,c,p){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),s2(o.return,c,p)}function Dn(o,c,p,y,E){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E}:(w.isBackwards=c,w.rendering=null,w.renderingStartTime=0,w.last=y,w.tail=p,w.tailMode=E)}function Qa(o,c,p){var y=c.pendingProps,E=y.revealOrder,w=y.tail;if(Qi(o,c,y.children,p),y=Vi.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Gs(o,p,c);else if(o.tag===19)Gs(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break t;for(;o.sibling===null;){if(o.return===null||o.return===c)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}switch(Et(Vi,y),E){case"forwards":for(p=c.child,E=null;p!==null;)o=p.alternate,o!==null&&Jl(o)===null&&(E=p),p=p.sibling;p=E,p===null?(E=c.child,c.child=null):(E=p.sibling,p.sibling=null),Dn(c,!1,E,p,w);break;case"backwards":for(p=null,E=c.child,c.child=null;E!==null;){if(o=E.alternate,o!==null&&Jl(o)===null){c.child=E;break}o=E.sibling,E.sibling=p,p=E,E=o}Dn(c,!0,p,null,w);break;case"together":Dn(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ss(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),So|=c.lanes,(p&c.childLanes)===0)if(o!==null){if(Ha(o,c,p,!1),(p&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,p=Gi(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=Gi(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function Kp(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Ip(o)))}function Xa(o,c,p){switch(c.tag){case 3:Wt(c,c.stateNode.containerInfo),Yc(c,ts,o.memoizedState.cache),Tf();break;case 27:case 5:ee(c);break;case 4:Wt(c,c.stateNode.containerInfo);break;case 10:Yc(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?($c(c),c.flags|=128,null):(p&c.child.childLanes)!==0?zf(o,c,p):($c(c),o=Ss(o,c,p),o!==null?o.sibling:null);$c(c);break;case 19:var E=(o.flags&128)!==0;if(y=(p&c.childLanes)!==0,y||(Ha(o,c,p,!1),y=(p&c.childLanes)!==0),E){if(y)return Qa(o,c,p);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Et(Vi,Vi.current),y)break;return null;case 22:case 23:return c.lanes=0,Yu(o,c,p);case 24:Yc(c,ts,o.memoizedState.cache)}return Ss(o,c,p)}function Zu(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps)bs=!0;else{if(!Kp(o,p)&&(c.flags&128)===0)return bs=!1,Xa(o,c,p);bs=(o.flags&131072)!==0}else bs=!1,kn&&(c.flags&1048576)!==0&&R0(c,Mf,c.index);switch(c.lanes=0,c.tag){case 16:t:{o=c.pendingProps;var y=c.elementType,E=y._init;if(y=E(y._payload),c.type=y,typeof y=="function")Dp(y)?(o=il(y,o),c.tag=1,c=da(null,c,y,o,p)):(c.tag=0,c=Hf(null,c,y,o,p));else{if(y!=null){if(E=y.$$typeof,E===D){c.tag=11,c=kr(null,c,y,o,p);break t}else if(E===F){c.tag=14,c=Vr(null,c,y,o,p);break t}}throw c=ct(y)||y,Error(n(306,c,""))}}return c;case 0:return Hf(o,c,c.type,c.pendingProps,p);case 1:return y=c.type,E=il(y,c.pendingProps),da(o,c,y,E,p);case 3:t:{if(Wt(c,c.stateNode.containerInfo),o===null)throw Error(n(387));y=c.pendingProps;var w=c.memoizedState;E=w.element,Qe(o,c),Bf(c,y,null,p);var H=c.memoizedState;if(y=H.cache,Yc(c,ts,y),y!==w.cache&&Np(c,[ts],p,!0),kp(),y=H.element,w.isDehydrated)if(w={element:y,isDehydrated:!1,cache:H.cache},c.updateQueue.baseState=w,c.memoizedState=w,c.flags&256){c=nu(o,c,y,p);break t}else if(y!==E){E=Ps(Error(n(424)),c),Vu(E),c=nu(o,c,y,p);break t}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Li=ic(o.firstChild),_r=c,kn=!0,Fa=null,ca=!0,p=Wb(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Tf(),y===E){c=Ss(o,c,p);break t}Qi(o,c,y,p)}c=c.child}return c;case 26:return Ku(o,c),o===null?(p=lR(c.type,null,c.pendingProps,null))?c.memoizedState=p:kn||(p=c.type,o=c.pendingProps,y=oS(Bt.current).createElement(p),y[Ji]=c,y[cs]=o,Mr(y,p,o),Zi(y),c.stateNode=y):c.memoizedState=lR(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return ee(c),o===null&&kn&&(y=c.stateNode=rR(c.type,c.pendingProps,Bt.current),_r=c,ca=!0,E=Li,Kf(c.type)?(vT=E,Li=ic(y.firstChild)):Li=E),Qi(o,c,c.pendingProps.children,p),Ku(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&kn&&((E=y=Li)&&(y=EP(y,c.type,c.pendingProps,ca),y!==null?(c.stateNode=y,_r=c,Li=ic(y.firstChild),ca=!1,E=!0):E=!1),E||jc(c)),ee(c),E=c.type,w=c.pendingProps,H=o!==null?o.memoizedProps:null,y=w.children,dT(E,w)?y=null:H!==null&&dT(E,H)&&(c.flags|=32),c.memoizedState!==null&&(E=Wl(o,c,KM,null,null,p),F2._currentValue=E),Ku(o,c),Qi(o,c,y,p),c.child;case 6:return o===null&&kn&&((o=p=Li)&&(p=MP(p,c.pendingProps,ca),p!==null?(c.stateNode=p,_r=c,Li=null,o=!0):o=!1),o||jc(c)),null;case 13:return zf(o,c,p);case 4:return Wt(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=ju(c,null,y,p):Qi(o,c,y,p),c.child;case 11:return kr(o,c,c.type,c.pendingProps,p);case 7:return Qi(o,c,c.pendingProps,p),c.child;case 8:return Qi(o,c,c.pendingProps.children,p),c.child;case 12:return Qi(o,c,c.pendingProps.children,p),c.child;case 10:return y=c.pendingProps,Yc(c,c.type,y.value),Qi(o,c,y.children,p),c.child;case 9:return E=c.type._context,y=c.pendingProps.children,tl(c),E=Ii(E),y=y(E),c.flags|=1,Qi(o,c,y,p),c.child;case 14:return Vr(o,c,c.type,c.pendingProps,p);case 15:return C2(o,c,c.type,c.pendingProps,p);case 19:return Qa(o,c,p);case 31:return y=c.pendingProps,p=c.mode,y={mode:y.mode,children:y.children},o===null?(p=Ju(y,p),p.ref=c.ref,c.child=p,p.return=c,c=p):(p=Gi(o.child,y),p.ref=c.ref,c.child=p,p.return=c,c=p),c;case 22:return Yu(o,c,p);case 24:return tl(c),y=Ii(ts),o===null?(E=Wc(),E===null&&(E=We,w=B0(),E.pooledCache=w,w.refCount++,w!==null&&(E.pooledCacheLanes|=p),E=w),c.memoizedState={parent:y,cache:E},l2(c),Yc(c,ts,E)):((o.lanes&p)!==0&&(Qe(o,c),Bf(c,null,null,p),kp()),E=o.memoizedState,w=c.memoizedState,E.parent!==y?(E={parent:y,cache:y},c.memoizedState=E,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=E),Yc(c,ts,y)):(y=w.cache,Yc(c,ts,y),y!==E.cache&&Np(c,[ts],p,!0))),Qi(o,c,c.pendingProps.children,p),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function Ao(o){o.flags|=4}function Jp(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!dR(c)){if(c=ai.current,c!==null&&((Ie&4194048)===Ie?vo!==null:(Ie&62914560)!==Ie&&(Ie&536870912)===0||c!==vo))throw Ga=Gp,a2;o.flags|=8192}}function Zl(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?ce():536870912,o.lanes|=c,Un|=c)}function $u(o,c){if(!kn)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function pi(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(c)for(var E=o.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=y,o.childLanes=p,c}function w2(o,c,p){var y=c.pendingProps;switch(e2(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(c),null;case 1:return pi(c),null;case 3:return p=c.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),Xl(ts),ve(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(po(c)?Ao(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Xn())),pi(c),null;case 26:return p=c.memoizedState,o===null?(Ao(c),p!==null?(pi(c),Jp(c,p)):(pi(c),c.flags&=-16777217)):p?p!==o.memoizedState?(Ao(c),pi(c),Jp(c,p)):(pi(c),c.flags&=-16777217):(o.memoizedProps!==y&&Ao(c),pi(c),c.flags&=-16777217),null;case 27:Ye(c),p=Bt.current;var E=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==y&&Ao(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return pi(c),null}o=lt.current,po(c)?db(c):(o=rR(E,y,p),c.stateNode=o,Ao(c))}return pi(c),null;case 5:if(Ye(c),p=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==y&&Ao(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return pi(c),null}if(o=lt.current,po(c))db(c);else{switch(E=oS(Bt.current),o){case 1:o=E.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:o=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":o=E.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":o=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":o=E.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof y.is=="string"?E.createElement("select",{is:y.is}):E.createElement("select"),y.multiple?o.multiple=!0:y.size&&(o.size=y.size);break;default:o=typeof y.is=="string"?E.createElement(p,{is:y.is}):E.createElement(p)}}o[Ji]=c,o[cs]=y;t:for(E=c.child;E!==null;){if(E.tag===5||E.tag===6)o.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===c)break t;for(;E.sibling===null;){if(E.return===null||E.return===c)break t;E=E.return}E.sibling.return=E.return,E=E.sibling}c.stateNode=o;t:switch(Mr(o,p,y),p){case"button":case"input":case"select":case"textarea":o=!!y.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&Ao(c)}}return pi(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==y&&Ao(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(n(166));if(o=Bt.current,po(c)){if(o=c.stateNode,p=c.memoizedProps,y=null,E=_r,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}o[Ji]=c,o=!!(o.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||Z7(o.nodeValue,p)),o||jc(c)}else o=oS(o).createTextNode(y),o[Ji]=c,c.stateNode=o}return pi(c),null;case 13:if(y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=po(c),y!==null&&y.dehydrated!==null){if(o===null){if(!E)throw Error(n(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[Ji]=c}else Tf(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;pi(c),E=!1}else E=Xn(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return c.flags&256?(nl(c),c):(nl(c),null)}if(nl(c),(c.flags&128)!==0)return c.lanes=p,c;if(p=y!==null,o=o!==null&&o.memoizedState!==null,p){y=c.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool);var w=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(w=y.memoizedState.cachePool.pool),w!==E&&(y.flags|=2048)}return p!==o&&p&&(c.child.flags|=8192),Zl(c,c.updateQueue),pi(c),null;case 4:return ve(),o===null&&lT(c.stateNode.containerInfo),pi(c),null;case 10:return Xl(c.type),pi(c),null;case 19:if(xt(Vi),E=c.memoizedState,E===null)return pi(c),null;if(y=(c.flags&128)!==0,w=E.rendering,w===null)if(y)$u(E,!1);else{if(xi!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(w=Jl(o),w!==null){for(c.flags|=128,$u(E,!1),o=w.updateQueue,c.updateQueue=o,Zl(c,o),c.subtreeFlags=0,o=p,p=c.child;p!==null;)$y(p,o),p=p.sibling;return Et(Vi,Vi.current&1|2),c.child}o=o.sibling}E.tail!==null&&Vt()>nr&&(c.flags|=128,y=!0,$u(E,!1),c.lanes=4194304)}else{if(!y)if(o=Jl(w),o!==null){if(c.flags|=128,y=!0,o=o.updateQueue,c.updateQueue=o,Zl(c,o),$u(E,!0),E.tail===null&&E.tailMode==="hidden"&&!w.alternate&&!kn)return pi(c),null}else 2*Vt()-E.renderingStartTime>nr&&p!==536870912&&(c.flags|=128,y=!0,$u(E,!1),c.lanes=4194304);E.isBackwards?(w.sibling=c.child,c.child=w):(o=E.last,o!==null?o.sibling=w:c.child=w,E.last=w)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=Vt(),c.sibling=null,o=Vi.current,Et(Vi,y?o&1|2:o&1),c):(pi(c),null);case 22:case 23:return nl(c),Vp(),y=c.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(p&536870912)!==0&&(c.flags&128)===0&&(pi(c),c.subtreeFlags&6&&(c.flags|=8192)):pi(c),p=c.updateQueue,p!==null&&Zl(c,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048),o!==null&&xt(za),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),Xl(ts),pi(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function Gf(o,c){switch(e2(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Xl(ts),ve(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Ye(c),null;case 13:if(nl(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Tf()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return xt(Vi),null;case 4:return ve(),null;case 10:return Xl(c.type),null;case 22:case 23:return nl(c),Vp(),o!==null&&xt(za),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Xl(ts),null;case 25:return null;default:return null}}function kf(o,c){switch(e2(c),c.tag){case 3:Xl(ts),ve();break;case 26:case 27:case 5:Ye(c);break;case 4:ve();break;case 13:nl(c);break;case 19:xt(Vi);break;case 10:Xl(c.type);break;case 22:case 23:nl(c),Vp(),o!==null&&xt(za);break;case 24:Xl(ts)}}function th(o,c){try{var p=c.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var E=y.next;p=E;do{if((p.tag&o)===o){y=void 0;var w=p.create,H=p.inst;y=w(),H.destroy=y}p=p.next}while(p!==E)}}catch(j){ht(c,c.return,j)}}function pa(o,c,p){try{var y=c.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var w=E.next;y=w;do{if((y.tag&o)===o){var H=y.inst,j=H.destroy;if(j!==void 0){H.destroy=void 0,E=c;var st=p,St=j;try{St()}catch(zt){ht(E,st,zt)}}}y=y.next}while(y!==w)}}catch(zt){ht(c,c.return,zt)}}function eh(o){var c=o.updateQueue;if(c!==null){var p=o.stateNode;try{gb(c,p)}catch(y){ht(o,o.return,y)}}}function $l(o,c,p){p.props=il(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(y){ht(o,c,y)}}function nh(o,c){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof p=="function"?o.refCleanup=p(y):p.current=y}}catch(E){ht(o,c,E)}}function rl(o,c){var p=o.ref,y=o.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(E){ht(o,c,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){ht(o,c,E)}else p.current=null}function Vf(o){var c=o.type,p=o.memoizedProps,y=o.stateNode;try{t:switch(c){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break t;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(E){ht(o,o.return,E)}}function Zp(o,c,p){try{var y=o.stateNode;_P(y,o.type,p,c),y[cs]=c}catch(E){ht(o,o.return,E)}}function $p(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Kf(o.type)||o.tag===4}function iu(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||$p(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Kf(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function su(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(o,c):(c=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,c.appendChild(o),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=aS));else if(y!==4&&(y===27&&Kf(o.type)&&(p=o.stateNode,c=null),o=o.child,o!==null))for(su(o,c,p),o=o.sibling;o!==null;)su(o,c,p),o=o.sibling}function ru(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(y!==4&&(y===27&&Kf(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(ru(o,c,p),o=o.sibling;o!==null;)ru(o,c,p),o=o.sibling}function au(o){var c=o.stateNode,p=o.memoizedProps;try{for(var y=o.type,E=c.attributes;E.length;)c.removeAttributeNode(E[0]);Mr(c,y,p),c[Ji]=o,c[cs]=p}catch(w){ht(o,o.return,w)}}var al=!1,mi=!1,Qf=!1,ma=typeof WeakSet=="function"?WeakSet:Set,oi=null;function fs(o,c){if(o=o.containerInfo,hT=dS,o=jy(o),Cp(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else t:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,w=y.focusNode;y=y.focusOffset;try{p.nodeType,w.nodeType}catch{p=null;break t}var H=0,j=-1,st=-1,St=0,zt=0,jt=o,Tt=null;e:for(;;){for(var Lt;jt!==p||E!==0&&jt.nodeType!==3||(j=H+E),jt!==w||y!==0&&jt.nodeType!==3||(st=H+y),jt.nodeType===3&&(H+=jt.nodeValue.length),(Lt=jt.firstChild)!==null;)Tt=jt,jt=Lt;for(;;){if(jt===o)break e;if(Tt===p&&++St===E&&(j=H),Tt===w&&++zt===y&&(st=H),(Lt=jt.nextSibling)!==null)break;jt=Tt,Tt=jt.parentNode}jt=Lt}p=j===-1||st===-1?null:{start:j,end:st}}else p=null}p=p||{start:0,end:0}}else p=null;for(fT={focusedElem:o,selectionRange:p},dS=!1,oi=c;oi!==null;)if(c=oi,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,oi=o;else for(;oi!==null;){switch(c=oi,w=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&w!==null){o=void 0,p=c,E=w.memoizedProps,w=w.memoizedState,y=p.stateNode;try{var je=il(p.type,E,p.elementType===p.type);o=y.getSnapshotBeforeUpdate(je,w),y.__reactInternalSnapshotBeforeUpdate=o}catch(ke){ht(p,p.return,ke)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,p=o.nodeType,p===9)mT(o);else if(p===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":mT(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=c.sibling,o!==null){o.return=c.return,oi=o;break}oi=c.return}}function tc(o,c,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Sr(o,p),y&4&&th(5,p);break;case 1:if(Sr(o,p),y&4)if(o=p.stateNode,c===null)try{o.componentDidMount()}catch(H){ht(p,p.return,H)}else{var E=il(p.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(E,c,o.__reactInternalSnapshotBeforeUpdate)}catch(H){ht(p,p.return,H)}}y&64&&eh(p),y&512&&nh(p,p.return);break;case 3:if(Sr(o,p),y&64&&(o=p.updateQueue,o!==null)){if(c=null,p.child!==null)switch(p.child.tag){case 27:case 5:c=p.child.stateNode;break;case 1:c=p.child.stateNode}try{gb(o,c)}catch(H){ht(p,p.return,H)}}break;case 27:c===null&&y&4&&au(p);case 26:case 5:Sr(o,p),c===null&&y&4&&Vf(p),y&512&&nh(p,p.return);break;case 12:Sr(o,p);break;case 13:Sr(o,p),y&4&&ou(o,p),y&64&&(o=p.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(p=bi.bind(null,p),TP(o,p))));break;case 22:if(y=p.memoizedState!==null||al,!y){c=c!==null&&c.memoizedState!==null||mi,E=al;var w=mi;al=y,(mi=c)&&!w?ol(o,p,(p.subtreeFlags&8772)!==0):Sr(o,p),al=E,mi=w}break;case 30:break;default:Sr(o,p)}}function ln(o){var c=o.alternate;c!==null&&(o.alternate=null,ln(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&ti(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Pe=null,In=!1;function ja(o,c,p){for(p=p.child;p!==null;)ih(o,c,p),p=p.sibling}function ih(o,c,p){if(ne&&typeof ne.onCommitFiberUnmount=="function")try{ne.onCommitFiberUnmount(Ot,p)}catch{}switch(p.tag){case 26:mi||rl(p,c),ja(o,c,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:mi||rl(p,c);var y=Pe,E=In;Kf(p.type)&&(Pe=p.stateNode,In=!1),ja(o,c,p),N2(p.stateNode),Pe=y,In=E;break;case 5:mi||rl(p,c);case 6:if(y=Pe,E=In,Pe=null,ja(o,c,p),Pe=y,In=E,Pe!==null)if(In)try{(Pe.nodeType===9?Pe.body:Pe.nodeName==="HTML"?Pe.ownerDocument.body:Pe).removeChild(p.stateNode)}catch(w){ht(p,c,w)}else try{Pe.removeChild(p.stateNode)}catch(w){ht(p,c,w)}break;case 18:Pe!==null&&(In?(o=Pe,iR(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,p.stateNode),k2(o)):iR(Pe,p.stateNode));break;case 4:y=Pe,E=In,Pe=p.stateNode.containerInfo,In=!0,ja(o,c,p),Pe=y,In=E;break;case 0:case 11:case 14:case 15:mi||pa(2,p,c),mi||pa(4,p,c),ja(o,c,p);break;case 1:mi||(rl(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"&&$l(p,c,y)),ja(o,c,p);break;case 21:ja(o,c,p);break;case 22:mi=(y=mi)||p.memoizedState!==null,ja(o,c,p),mi=y;break;default:ja(o,c,p)}}function ou(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{k2(o)}catch(p){ht(c,c.return,p)}}function $0(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new ma),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new ma),c;default:throw Error(n(435,o.tag))}}function sh(o,c){var p=$0(o);c.forEach(function(y){var E=Xe.bind(null,o,y);p.has(y)||(p.add(y),y.then(E,E))})}function Es(o,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y],w=o,H=c,j=H;t:for(;j!==null;){switch(j.tag){case 27:if(Kf(j.type)){Pe=j.stateNode,In=!1;break t}break;case 5:Pe=j.stateNode,In=!1;break t;case 3:case 4:Pe=j.stateNode.containerInfo,In=!0;break t}j=j.return}if(Pe===null)throw Error(n(160));ih(w,H,E),Pe=null,In=!1,w=E.alternate,w!==null&&(w.return=null),E.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)t1(c,o),c=c.sibling}var xo=null;function t1(o,c){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Es(c,o),Ui(o),y&4&&(pa(3,o,o.return),th(3,o),pa(5,o,o.return));break;case 1:Es(c,o),Ui(o),y&512&&(mi||p===null||rl(p,p.return)),y&64&&al&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var E=xo;if(Es(c,o),Ui(o),y&512&&(mi||p===null||rl(p,p.return)),y&4){var w=p!==null?p.memoizedState:null;if(y=o.memoizedState,p===null)if(y===null)if(o.stateNode===null){t:{y=o.type,p=o.memoizedProps,E=E.ownerDocument||E;e:switch(y){case"title":w=E.getElementsByTagName("title")[0],(!w||w[lo]||w[Ji]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=E.createElement(y),E.head.insertBefore(w,E.querySelector("head > title"))),Mr(w,y,p),w[Ji]=o,Zi(w),y=w;break t;case"link":var H=hR("link","href",E).get(y+(p.href||""));if(H){for(var j=0;j<H.length;j++)if(w=H[j],w.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&w.getAttribute("rel")===(p.rel==null?null:p.rel)&&w.getAttribute("title")===(p.title==null?null:p.title)&&w.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){H.splice(j,1);break e}}w=E.createElement(y),Mr(w,y,p),E.head.appendChild(w);break;case"meta":if(H=hR("meta","content",E).get(y+(p.content||""))){for(j=0;j<H.length;j++)if(w=H[j],w.getAttribute("content")===(p.content==null?null:""+p.content)&&w.getAttribute("name")===(p.name==null?null:p.name)&&w.getAttribute("property")===(p.property==null?null:p.property)&&w.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&w.getAttribute("charset")===(p.charSet==null?null:p.charSet)){H.splice(j,1);break e}}w=E.createElement(y),Mr(w,y,p),E.head.appendChild(w);break;default:throw Error(n(468,y))}w[Ji]=o,Zi(w),y=w}o.stateNode=y}else fR(E,o.type,o.stateNode);else o.stateNode=uR(E,y,o.memoizedProps);else w!==y?(w===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):w.count--,y===null?fR(E,o.type,o.stateNode):uR(E,y,o.memoizedProps)):y===null&&o.stateNode!==null&&Zp(o,o.memoizedProps,p.memoizedProps)}break;case 27:Es(c,o),Ui(o),y&512&&(mi||p===null||rl(p,p.return)),p!==null&&y&4&&Zp(o,o.memoizedProps,p.memoizedProps);break;case 5:if(Es(c,o),Ui(o),y&512&&(mi||p===null||rl(p,p.return)),o.flags&32){E=o.stateNode;try{gr(E,"")}catch(Lt){ht(o,o.return,Lt)}}y&4&&o.stateNode!=null&&(E=o.memoizedProps,Zp(o,E,p!==null?p.memoizedProps:E)),y&1024&&(Qf=!0);break;case 6:if(Es(c,o),Ui(o),y&4){if(o.stateNode===null)throw Error(n(162));y=o.memoizedProps,p=o.stateNode;try{p.nodeValue=y}catch(Lt){ht(o,o.return,Lt)}}break;case 3:if(uS=null,E=xo,xo=lS(c.containerInfo),Es(c,o),xo=E,Ui(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{k2(c.containerInfo)}catch(Lt){ht(o,o.return,Lt)}Qf&&(Qf=!1,lu(o));break;case 4:y=xo,xo=lS(o.stateNode.containerInfo),Es(c,o),Ui(o),xo=y;break;case 12:Es(c,o),Ui(o);break;case 13:Es(c,o),Ui(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(ni=Vt()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,sh(o,y)));break;case 22:E=o.memoizedState!==null;var st=p!==null&&p.memoizedState!==null,St=al,zt=mi;if(al=St||E,mi=zt||st,Es(c,o),mi=zt,al=St,Ui(o),y&8192)t:for(c=o.stateNode,c._visibility=E?c._visibility&-2:c._visibility|1,E&&(p===null||st||al||mi||ga(o)),p=null,c=o;;){if(c.tag===5||c.tag===26){if(p===null){st=p=c;try{if(w=st.stateNode,E)H=w.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{j=st.stateNode;var jt=st.memoizedProps.style,Tt=jt!=null&&jt.hasOwnProperty("display")?jt.display:null;j.style.display=Tt==null||typeof Tt=="boolean"?"":(""+Tt).trim()}}catch(Lt){ht(st,st.return,Lt)}}}else if(c.tag===6){if(p===null){st=c;try{st.stateNode.nodeValue=E?"":st.memoizedProps}catch(Lt){ht(st,st.return,Lt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break t;for(;c.sibling===null;){if(c.return===null||c.return===o)break t;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=o.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,sh(o,p))));break;case 19:Es(c,o),Ui(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,sh(o,y)));break;case 30:break;case 21:break;default:Es(c,o),Ui(o)}}function Ui(o){var c=o.flags;if(c&2){try{for(var p,y=o.return;y!==null;){if($p(y)){p=y;break}y=y.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var E=p.stateNode,w=iu(o);ru(o,w,E);break;case 5:var H=p.stateNode;p.flags&32&&(gr(H,""),p.flags&=-33);var j=iu(o);ru(o,j,H);break;case 3:case 4:var st=p.stateNode.containerInfo,St=iu(o);su(o,St,st);break;default:throw Error(n(161))}}catch(zt){ht(o,o.return,zt)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function lu(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;lu(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function Sr(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)tc(o,c.alternate,c),c=c.sibling}function ga(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:pa(4,c,c.return),ga(c);break;case 1:rl(c,c.return);var p=c.stateNode;typeof p.componentWillUnmount=="function"&&$l(c,c.return,p),ga(c);break;case 27:N2(c.stateNode);case 26:case 5:rl(c,c.return),ga(c);break;case 22:c.memoizedState===null&&ga(c);break;case 30:ga(c);break;default:ga(c)}o=o.sibling}}function ol(o,c,p){for(p=p&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,E=o,w=c,H=w.flags;switch(w.tag){case 0:case 11:case 15:ol(E,w,p),th(4,w);break;case 1:if(ol(E,w,p),y=w,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(St){ht(y,y.return,St)}if(y=w,E=y.updateQueue,E!==null){var j=y.stateNode;try{var st=E.shared.hiddenCallbacks;if(st!==null)for(E.shared.hiddenCallbacks=null,E=0;E<st.length;E++)Of(st[E],j)}catch(St){ht(y,y.return,St)}}p&&H&64&&eh(w),nh(w,w.return);break;case 27:au(w);case 26:case 5:ol(E,w,p),p&&y===null&&H&4&&Vf(w),nh(w,w.return);break;case 12:ol(E,w,p);break;case 13:ol(E,w,p),p&&H&4&&ou(E,w);break;case 22:w.memoizedState===null&&ol(E,w,p),nh(w,w.return);break;case 30:break;default:ol(E,w,p)}c=c.sibling}}function e1(o,c){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&Cf(p))}function n1(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Cf(o))}function li(o,c,p,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)i1(o,c,p,y),c=c.sibling}function i1(o,c,p,y){var E=c.flags;switch(c.tag){case 0:case 11:case 15:li(o,c,p,y),E&2048&&th(9,c);break;case 1:li(o,c,p,y);break;case 3:li(o,c,p,y),E&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Cf(o)));break;case 12:if(E&2048){li(o,c,p,y),o=c.stateNode;try{var w=c.memoizedProps,H=w.id,j=w.onPostCommit;typeof j=="function"&&j(H,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(st){ht(c,c.return,st)}}else li(o,c,p,y);break;case 13:li(o,c,p,y);break;case 23:break;case 22:w=c.stateNode,H=c.alternate,c.memoizedState!==null?w._visibility&2?li(o,c,p,y):bo(o,c):w._visibility&2?li(o,c,p,y):(w._visibility|=2,ec(o,c,p,y,(c.subtreeFlags&10256)!==0)),E&2048&&e1(H,c);break;case 24:li(o,c,p,y),E&2048&&n1(c.alternate,c);break;default:li(o,c,p,y)}}function ec(o,c,p,y,E){for(E=E&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var w=o,H=c,j=p,st=y,St=H.flags;switch(H.tag){case 0:case 11:case 15:ec(w,H,j,st,E),th(8,H);break;case 23:break;case 22:var zt=H.stateNode;H.memoizedState!==null?zt._visibility&2?ec(w,H,j,st,E):bo(w,H):(zt._visibility|=2,ec(w,H,j,st,E)),E&&St&2048&&e1(H.alternate,H);break;case 24:ec(w,H,j,st,E),E&&St&2048&&n1(H.alternate,H);break;default:ec(w,H,j,st,E)}c=c.sibling}}function bo(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var p=o,y=c,E=y.flags;switch(y.tag){case 22:bo(p,y),E&2048&&e1(y.alternate,y);break;case 24:bo(p,y),E&2048&&n1(y.alternate,y);break;default:bo(p,y)}c=c.sibling}}var va=8192;function Xf(o){if(o.subtreeFlags&va)for(o=o.child;o!==null;)nS(o),o=o.sibling}function nS(o){switch(o.tag){case 26:Xf(o),o.flags&va&&o.memoizedState!==null&&HP(xo,o.memoizedState,o.memoizedProps);break;case 5:Xf(o);break;case 3:case 4:var c=xo;xo=lS(o.stateNode.containerInfo),Xf(o),xo=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=va,va=16777216,Xf(o),va=c):Xf(o));break;default:Xf(o)}}function iS(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function gi(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];oi=y,cl(y,o)}iS(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)R2(o),o=o.sibling}function R2(o){switch(o.tag){case 0:case 11:case 15:gi(o),o.flags&2048&&pa(9,o,o.return);break;case 3:gi(o);break;case 12:gi(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,ll(o)):gi(o);break;default:gi(o)}}function ll(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];oi=y,cl(y,o)}iS(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:pa(8,c,c.return),ll(c);break;case 22:p=c.stateNode,p._visibility&2&&(p._visibility&=-3,ll(c));break;default:ll(c)}o=o.sibling}}function cl(o,c){for(;oi!==null;){var p=oi;switch(p.tag){case 0:case 11:case 15:pa(8,p,c);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Cf(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,oi=y;else t:for(p=o;oi!==null;){y=oi;var E=y.sibling,w=y.return;if(ln(y),y===p){oi=null;break t}if(E!==null){E.return=w,oi=E;break t}oi=w}}}var Pi={getCacheForType:function(o){var c=Ii(ts),p=c.data.get(o);return p===void 0&&(p=o(),c.data.set(o,p)),p}},L2=typeof WeakMap=="function"?WeakMap:Map,jn=0,We=null,mn=null,Ie=0,an=0,Di=null,ya=!1,jf=!1,qf=!1,qa=0,xi=0,So=0,ul=0,rh=0,Ya=0,Un=0,qn=null,ze=null,Sn=!1,ni=0,nr=1/0,Wa=null,_a=null,ds=0,ir=null,ci=null,Aa=0,nc=0,tm=null,xa=null,hl=0,ah=null;function Fi(){if((jn&2)!==0&&Ie!==0)return Ie&-Ie;if(Q.T!==null){var o=tn;return o!==0?o:sT()}return Cn()}function s1(){Ya===0&&(Ya=(Ie&536870912)===0||kn?mt():536870912);var o=ai.current;return o!==null&&(o.flags|=32),Ya}function Er(o,c,p){(o===We&&(an===2||an===9)||o.cancelPendingCommit!==null)&&(uu(o,0),Eo(o,Ie,Ya,!1)),Qt(o,p),((jn&2)===0||o!==We)&&(o===We&&((jn&2)===0&&(ul|=p),xi===4&&Eo(o,Ie,Ya,!1)),du(o))}function Yf(o,c,p){if((jn&6)!==0)throw Error(n(327));var y=!p&&(c&124)===0&&(c&o.expiredLanes)===0||He(o,c),E=y?M(o,c):d(o,c,!0),w=y;do{if(E===0){jf&&!y&&Eo(o,c,0,!1);break}else{if(p=o.current.alternate,w&&!cu(p)){E=d(o,c,!1),w=!1;continue}if(E===2){if(w=c,o.errorRecoveryDisabledLanes&w)var H=0;else H=o.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){c=H;t:{var j=o;E=qn;var st=j.current.memoizedState.isDehydrated;if(st&&(uu(j,H).flags|=256),H=d(j,H,!1),H!==2){if(qf&&!st){j.errorRecoveryDisabledLanes|=w,ul|=w,E=4;break t}w=ze,ze=E,w!==null&&(ze===null?ze=w:ze.push.apply(ze,w))}E=H}if(w=!1,E!==2)continue}}if(E===1){uu(o,0),Eo(o,c,0,!0);break}t:{switch(y=o,w=E,w){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:Eo(y,c,Ya,!ya);break t;case 2:ze=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(E=ni+300-Vt(),10<E)){if(Eo(y,c,Ya,!ya),rn(y,0,!0)!==0)break t;y.timeoutHandle=eR(em.bind(null,y,p,ze,Wa,Sn,c,Ya,ul,Un,ya,w,2,-0,0),E);break t}em(y,p,ze,Wa,Sn,c,Ya,ul,Un,ya,w,0,-0,0)}}break}while(!0);du(o)}function em(o,c,p,y,E,w,H,j,st,St,zt,jt,Tt,Lt){if(o.timeoutHandle=-1,jt=c.subtreeFlags,(jt&8192||(jt&16785408)===16785408)&&(P2={stylesheets:null,count:0,unsuspend:FP},nS(c),jt=zP(),jt!==null)){o.cancelPendingCommit=jt($t.bind(null,o,c,w,p,y,E,H,j,st,zt,1,Tt,Lt)),Eo(o,w,H,!St);return}$t(o,c,w,p,y,E,H,j,st)}function cu(o){for(var c=o;;){var p=c.tag;if((p===0||p===11||p===15)&&c.flags&16384&&(p=c.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var E=p[y],w=E.getSnapshot;E=E.value;try{if(!Pr(w(),E))return!1}catch{return!1}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Eo(o,c,p,y){c&=~rh,c&=~ul,o.suspendedLanes|=c,o.pingedLanes&=~c,y&&(o.warmLanes|=c),y=o.expirationTimes;for(var E=c;0<E;){var w=31-ge(E),H=1<<w;y[w]=-1,E&=~H}p!==0&&ue(o,p,c)}function fl(){return(jn&6)===0?(D2(0),!1):!0}function oh(){if(mn!==null){if(an===0)var o=mn.return;else o=mn,Ql=qc=null,f2(o),Xu=null,qp=0,o=mn;for(;o!==null;)kf(o.alternate,o),o=o.return;mn=null}}function uu(o,c){var p=o.timeoutHandle;p!==-1&&(o.timeoutHandle=-1,xP(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),oh(),We=o,mn=p=Gi(o.current,null),Ie=c,an=0,Di=null,ya=!1,jf=He(o,c),qf=!1,Un=Ya=rh=ul=So=xi=0,ze=qn=null,Sn=!1,(c&8)!==0&&(c|=c&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=c;0<y;){var E=31-ge(y),w=1<<E;c|=o[E],y&=~w}return qa=c,Lp(),p}function r1(o,c){en=null,Q.H=jp,c===zp||c===mo?(c=o2(),an=3):c===a2?(c=o2(),an=4):an=c===eS?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Di=c,mn===null&&(xi=1,K0(o,Ps(c,o.current)))}function Wf(){var o=Q.H;return Q.H=jp,o===null?jp:o}function a1(){var o=Q.A;return Q.A=Pi,o}function h(){xi=4,ya||(Ie&4194048)!==Ie&&ai.current!==null||(jf=!0),(So&134217727)===0&&(ul&134217727)===0||We===null||Eo(We,Ie,Ya,!1)}function d(o,c,p){var y=jn;jn|=2;var E=Wf(),w=a1();(We!==o||Ie!==c)&&(Wa=null,uu(o,c)),c=!1;var H=xi;t:do try{if(an!==0&&mn!==null){var j=mn,st=Di;switch(an){case 8:oh(),H=6;break t;case 3:case 2:case 9:case 6:ai.current===null&&(c=!0);var St=an;if(an=0,Di=null,rt(o,j,st,St),p&&jf){H=0;break t}break;default:St=an,an=0,Di=null,rt(o,j,st,St)}}A(),H=xi;break}catch(zt){r1(o,zt)}while(!0);return c&&o.shellSuspendCounter++,Ql=qc=null,jn=y,Q.H=E,Q.A=w,mn===null&&(We=null,Ie=0,Lp()),H}function A(){for(;mn!==null;)O(mn)}function M(o,c){var p=jn;jn|=2;var y=Wf(),E=a1();We!==o||Ie!==c?(Wa=null,nr=Vt()+500,uu(o,c)):jf=He(o,c);t:do try{if(an!==0&&mn!==null){c=mn;var w=Di;e:switch(an){case 1:an=0,Di=null,rt(o,c,w,1);break;case 2:case 9:if(I0(w)){an=0,Di=null,K(c);break}c=function(){an!==2&&an!==9||We!==o||(an=7),du(o)},w.then(c,c);break t;case 3:an=7;break t;case 4:an=5;break t;case 7:I0(w)?(an=0,Di=null,K(c)):(an=0,Di=null,rt(o,c,w,7));break;case 5:var H=null;switch(mn.tag){case 26:H=mn.memoizedState;case 5:case 27:var j=mn;if(!H||dR(H)){an=0,Di=null;var st=j.sibling;if(st!==null)mn=st;else{var St=j.return;St!==null?(mn=St,At(St)):mn=null}break e}}an=0,Di=null,rt(o,c,w,5);break;case 6:an=0,Di=null,rt(o,c,w,6);break;case 8:oh(),xi=6;break t;default:throw Error(n(462))}}L();break}catch(zt){r1(o,zt)}while(!0);return Ql=qc=null,Q.H=y,Q.A=E,jn=p,mn!==null?0:(We=null,Ie=0,Lp(),xi)}function L(){for(;mn!==null&&!Kt();)O(mn)}function O(o){var c=Zu(o.alternate,o,qa);o.memoizedProps=o.pendingProps,c===null?At(o):mn=c}function K(o){var c=o,p=c.alternate;switch(c.tag){case 15:case 0:c=fa(p,c,c.pendingProps,c.type,void 0,Ie);break;case 11:c=fa(p,c,c.pendingProps,c.type.render,c.ref,Ie);break;case 5:f2(c);default:kf(p,c),c=mn=$y(c,qa),c=Zu(p,c,qa)}o.memoizedProps=o.pendingProps,c===null?At(o):mn=c}function rt(o,c,p,y){Ql=qc=null,f2(c),Xu=null,qp=0;var E=c.return;try{if(nT(o,E,c,p,Ie)){xi=1,K0(o,Ps(p,o.current)),mn=null;return}}catch(w){if(E!==null)throw mn=E,w;xi=1,K0(o,Ps(p,o.current)),mn=null;return}c.flags&32768?(kn||y===1?o=!0:jf||(Ie&536870912)!==0?o=!1:(ya=o=!0,(y===2||y===9||y===3||y===6)&&(y=ai.current,y!==null&&y.tag===13&&(y.flags|=16384))),Ht(c,o)):At(c)}function At(o){var c=o;do{if((c.flags&32768)!==0){Ht(c,ya);return}o=c.return;var p=w2(c.alternate,c,qa);if(p!==null){mn=p;return}if(c=c.sibling,c!==null){mn=c;return}mn=c=o}while(c!==null);xi===0&&(xi=5)}function Ht(o,c){do{var p=Gf(o.alternate,o);if(p!==null){p.flags&=32767,mn=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!c&&(o=o.sibling,o!==null)){mn=o;return}mn=o=p}while(o!==null);xi=6,mn=null}function $t(o,c,p,y,E,w,H,j,st){o.cancelPendingCommit=null;do hu();while(ds!==0);if((jn&6)!==0)throw Error(n(327));if(c!==null){if(c===o.current)throw Error(n(177));if(w=c.lanes|c.childLanes,w|=T0,he(o,p,w,H,j,st),o===We&&(mn=We=null,Ie=0),ci=c,ir=o,Aa=p,nc=w,tm=E,xa=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Vn($,function(){return fu(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=Q.T,Q.T=null,E=tt.p,tt.p=2,H=jn,jn|=4;try{fs(o,c,p)}finally{jn=H,tt.p=E,Q.T=y}}ds=1,fe(),ye(),Ke()}}function fe(){if(ds===1){ds=0;var o=ir,c=ci,p=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||p){p=Q.T,Q.T=null;var y=tt.p;tt.p=2;var E=jn;jn|=4;try{t1(c,o);var w=fT,H=jy(o.containerInfo),j=w.focusedElem,st=w.selectionRange;if(H!==j&&j&&j.ownerDocument&&Xy(j.ownerDocument.documentElement,j)){if(st!==null&&Cp(j)){var St=st.start,zt=st.end;if(zt===void 0&&(zt=St),"selectionStart"in j)j.selectionStart=St,j.selectionEnd=Math.min(zt,j.value.length);else{var jt=j.ownerDocument||document,Tt=jt&&jt.defaultView||window;if(Tt.getSelection){var Lt=Tt.getSelection(),je=j.textContent.length,ke=Math.min(st.start,je),yi=st.end===void 0?ke:Math.min(st.end,je);!Lt.extend&&ke>yi&&(H=yi,yi=ke,ke=H);var gt=Qy(j,ke),ft=Qy(j,yi);if(gt&&ft&&(Lt.rangeCount!==1||Lt.anchorNode!==gt.node||Lt.anchorOffset!==gt.offset||Lt.focusNode!==ft.node||Lt.focusOffset!==ft.offset)){var bt=jt.createRange();bt.setStart(gt.node,gt.offset),Lt.removeAllRanges(),ke>yi?(Lt.addRange(bt),Lt.extend(ft.node,ft.offset)):(bt.setEnd(ft.node,ft.offset),Lt.addRange(bt))}}}}for(jt=[],Lt=j;Lt=Lt.parentNode;)Lt.nodeType===1&&jt.push({element:Lt,left:Lt.scrollLeft,top:Lt.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<jt.length;j++){var kt=jt[j];kt.element.scrollLeft=kt.left,kt.element.scrollTop=kt.top}}dS=!!hT,fT=hT=null}finally{jn=E,tt.p=y,Q.T=p}}o.current=c,ds=2}}function ye(){if(ds===2){ds=0;var o=ir,c=ci,p=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||p){p=Q.T,Q.T=null;var y=tt.p;tt.p=2;var E=jn;jn|=4;try{tc(o,c.alternate,c)}finally{jn=E,tt.p=y,Q.T=p}}ds=3}}function Ke(){if(ds===4||ds===3){ds=0,Ft();var o=ir,c=ci,p=Aa,y=xa;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ds=5:(ds=0,ci=ir=null,ba(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(_a=null),Ei(p),c=c.stateNode,ne&&typeof ne.onCommitFiberRoot=="function")try{ne.onCommitFiberRoot(Ot,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=Q.T,E=tt.p,tt.p=2,Q.T=null;try{for(var w=o.onRecoverableError,H=0;H<y.length;H++){var j=y[H];w(j.value,{componentStack:j.stack})}}finally{Q.T=c,tt.p=E}}(Aa&3)!==0&&hu(),du(o),E=o.pendingLanes,(p&4194090)!==0&&(E&42)!==0?o===ah?hl++:(hl=0,ah=o):hl=0,D2(0)}}function ba(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Cf(c)))}function hu(o){return fe(),ye(),Ke(),fu()}function fu(){if(ds!==5)return!1;var o=ir,c=nc;nc=0;var p=Ei(Aa),y=Q.T,E=tt.p;try{tt.p=32>p?32:p,Q.T=null,p=tm,tm=null;var w=ir,H=Aa;if(ds=0,ci=ir=null,Aa=0,(jn&6)!==0)throw Error(n(331));var j=jn;if(jn|=4,R2(w.current),i1(w,w.current,H,p),jn=j,D2(0,!1),ne&&typeof ne.onPostCommitFiberRoot=="function")try{ne.onPostCommitFiberRoot(Ot,w)}catch{}return!0}finally{tt.p=E,Q.T=y,ba(o,c)}}function Mt(o,c,p){c=Ps(p,c),c=J0(o.stateNode,c,2),o=ql(o,c,2),o!==null&&(Qt(o,2),du(o))}function ht(o,c,p){if(o.tag===3)Mt(o,o,p);else for(;c!==null;){if(c.tag===3){Mt(c,o,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(_a===null||!_a.has(y))){o=Ps(p,o),p=tS(2),y=ql(c,p,2),y!==null&&(Z0(p,y,c,o),Qt(y,2),du(y));break}}c=c.return}}function Dt(o,c,p){var y=o.pingCache;if(y===null){y=o.pingCache=new L2;var E=new Set;y.set(c,E)}else E=y.get(c),E===void 0&&(E=new Set,y.set(c,E));E.has(p)||(qf=!0,E.add(p),o=Zt.bind(null,o,c,p),c.then(o,o))}function Zt(o,c,p){var y=o.pingCache;y!==null&&y.delete(c),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,We===o&&(Ie&p)===p&&(xi===4||xi===3&&(Ie&62914560)===Ie&&300>Vt()-ni?(jn&2)===0&&uu(o,0):rh|=p,Un===Ie&&(Un=0)),du(o)}function Re(o,c){c===0&&(c=ce()),o=kl(o,c),o!==null&&(Qt(o,c),du(o))}function bi(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),Re(o,p)}function Xe(o,c){var p=0;switch(o.tag){case 13:var y=o.stateNode,E=o.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(n(314))}y!==null&&y.delete(c),Re(o,p)}function Vn(o,c){return se(o,c)}var Xi=null,_n=null,dl=!1,o1=!1,iT=!1,nm=0;function du(o){o!==_n&&o.next===null&&(_n===null?Xi=_n=o:_n=_n.next=o),o1=!0,dl||(dl=!0,fP())}function D2(o,c){if(!iT&&o1){iT=!0;do for(var p=!1,y=Xi;y!==null;){if(o!==0){var E=y.pendingLanes;if(E===0)var w=0;else{var H=y.suspendedLanes,j=y.pingedLanes;w=(1<<31-ge(42|o)+1)-1,w&=E&~(H&~j),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(p=!0,X7(y,w))}else w=Ie,w=rn(y,y===We?w:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(w&3)===0||He(y,w)||(p=!0,X7(y,w));y=y.next}while(p);iT=!1}}function hP(){k7()}function k7(){o1=dl=!1;var o=0;nm!==0&&(AP()&&(o=nm),nm=0);for(var c=Vt(),p=null,y=Xi;y!==null;){var E=y.next,w=V7(y,c);w===0?(y.next=null,p===null?Xi=E:p.next=E,E===null&&(_n=p)):(p=y,(o!==0||(w&3)!==0)&&(o1=!0)),y=E}D2(o)}function V7(o,c){for(var p=o.suspendedLanes,y=o.pingedLanes,E=o.expirationTimes,w=o.pendingLanes&-62914561;0<w;){var H=31-ge(w),j=1<<H,st=E[H];st===-1?((j&p)===0||(j&y)!==0)&&(E[H]=Gn(j,c)):st<=c&&(o.expiredLanes|=j),w&=~j}if(c=We,p=Ie,p=rn(o,o===c?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,p===0||o===c&&(an===2||an===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&Z(y),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||He(o,p)){if(c=p&-p,c===o.callbackPriority)return c;switch(y!==null&&Z(y),Ei(p)){case 2:case 8:p=qt;break;case 32:p=$;break;case 268435456:p=vt;break;default:p=$}return y=Q7.bind(null,o),p=se(p,y),o.callbackPriority=c,o.callbackNode=p,c}return y!==null&&y!==null&&Z(y),o.callbackPriority=2,o.callbackNode=null,2}function Q7(o,c){if(ds!==0&&ds!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if(hu()&&o.callbackNode!==p)return null;var y=Ie;return y=rn(o,o===We?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(Yf(o,y,c),V7(o,Vt()),o.callbackNode!=null&&o.callbackNode===p?Q7.bind(null,o):null)}function X7(o,c){if(hu())return null;Yf(o,c,!0)}function fP(){bP(function(){(jn&6)!==0?se(be,hP):k7()})}function sT(){return nm===0&&(nm=mt()),nm}function j7(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:pp(""+o)}function q7(o,c){var p=c.ownerDocument.createElement("input");return p.name=c.name,p.value=c.value,o.id&&p.setAttribute("form",o.id),c.parentNode.insertBefore(p,c),o=new FormData(o),p.parentNode.removeChild(p),o}function dP(o,c,p,y,E){if(c==="submit"&&p&&p.stateNode===E){var w=j7((E[cs]||null).action),H=y.submitter;H&&(c=(c=H[cs]||null)?j7(c.formAction):H.getAttribute("formAction"),c!==null&&(w=c,H=null));var j=new pf("action","action",null,y,E);o.push({event:j,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(nm!==0){var st=H?q7(E,H):new FormData(E);E2(p,{pending:!0,data:st,method:E.method,action:w},null,st)}}else typeof w=="function"&&(j.preventDefault(),st=H?q7(E,H):new FormData(E),E2(p,{pending:!0,data:st,method:E.method,action:w},w,st))},currentTarget:E}]})}}for(var rT=0;rT<Rp.length;rT++){var aT=Rp[rT],pP=aT.toLowerCase(),mP=aT[0].toUpperCase()+aT.slice(1);As(pP,"on"+mP)}As(yr,"onAnimationEnd"),As(Wy,"onAnimationIteration"),As(Hr,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(fb,"onTransitionRun"),As(zl,"onTransitionStart"),As(bf,"onTransitionCancel"),As(Gl,"onTransitionEnd"),q("onMouseEnter",["mouseout","mouseover"]),q("onMouseLeave",["mouseout","mouseover"]),q("onPointerEnter",["pointerout","pointerover"]),q("onPointerLeave",["pointerout","pointerover"]),ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ho("onBeforeInput",["compositionend","keypress","textInput","paste"]),ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var B2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(B2));function Y7(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],E=y.event;y=y.listeners;t:{var w=void 0;if(c)for(var H=y.length-1;0<=H;H--){var j=y[H],st=j.instance,St=j.currentTarget;if(j=j.listener,st!==w&&E.isPropagationStopped())break t;w=j,E.currentTarget=St;try{w(E)}catch(zt){qu(zt)}E.currentTarget=null,w=st}else for(H=0;H<y.length;H++){if(j=y[H],st=j.instance,St=j.currentTarget,j=j.listener,st!==w&&E.isPropagationStopped())break t;w=j,E.currentTarget=St;try{w(E)}catch(zt){qu(zt)}E.currentTarget=null,w=st}}}}function wn(o,c){var p=c[Ir];p===void 0&&(p=c[Ir]=new Set);var y=o+"__bubble";p.has(y)||(W7(c,o,2,!1),p.add(y))}function oT(o,c,p){var y=0;c&&(y|=4),W7(p,o,y,c)}var sS="_reactListening"+Math.random().toString(36).slice(2);function lT(o){if(!o[sS]){o[sS]=!0,cf.forEach(function(p){p!=="selectionchange"&&(gP.has(p)||oT(p,!1,o),oT(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[sS]||(c[sS]=!0,oT("selectionchange",!1,c))}}function W7(o,c,p,y){switch(_R(c)){case 2:var E=VP;break;case 8:E=QP;break;default:E=bT}p=E.bind(null,c,p,o),E=void 0,!gp||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),y?E!==void 0?o.addEventListener(c,p,{capture:!0,passive:E}):o.addEventListener(c,p,!0):E!==void 0?o.addEventListener(c,p,{passive:E}):o.addEventListener(c,p,!1)}function cT(o,c,p,y,E){var w=y;if((c&1)===0&&(c&2)===0&&y!==null)t:for(;;){if(y===null)return;var H=y.tag;if(H===3||H===4){var j=y.stateNode.containerInfo;if(j===E)break;if(H===4)for(H=y.return;H!==null;){var st=H.tag;if((st===3||st===4)&&H.stateNode.containerInfo===E)return;H=H.return}for(;j!==null;){if(H=co(j),H===null)return;if(st=H.tag,st===5||st===6||st===26||st===27){y=w=H;continue t}j=j.parentNode}}y=y.return}By(function(){var St=w,zt=d0(p),jt=[];t:{var Tt=M0.get(o);if(Tt!==void 0){var Lt=pf,je=o;switch(o){case"keypress":if(Ic(p)===0)break t;case"keydown":case"keyup":Lt=Py;break;case"focusin":je="focus",Lt=m0;break;case"focusout":je="blur",Lt=m0;break;case"beforeblur":case"afterblur":Lt=m0;break;case"click":if(p.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Lt=Iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Lt=XM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Lt=Hy;break;case yr:case Wy:case Hr:Lt=Jx;break;case Gl:Lt=Ul;break;case"scroll":case"scrollend":Lt=Yx;break;case"wheel":Lt=jM;break;case"copy":case"cut":case"paste":Lt=$x;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Lt=v0;break;case"toggle":case"beforetoggle":Lt=Pc}var ke=(c&4)!==0,yi=!ke&&(o==="scroll"||o==="scrollend"),gt=ke?Tt!==null?Tt+"Capture":null:Tt;ke=[];for(var ft=St,bt;ft!==null;){var kt=ft;if(bt=kt.stateNode,kt=kt.tag,kt!==5&&kt!==26&&kt!==27||bt===null||gt===null||(kt=hf(ft,gt),kt!=null&&ke.push(O2(ft,kt,bt))),yi)break;ft=ft.return}0<ke.length&&(Tt=new Lt(Tt,je,null,p,zt),jt.push({event:Tt,listeners:ke}))}}if((c&7)===0){t:{if(Tt=o==="mouseover"||o==="pointerover",Lt=o==="mouseout"||o==="pointerout",Tt&&p!==f0&&(je=p.relatedTarget||p.fromElement)&&(co(je)||je[$s]))break t;if((Lt||Tt)&&(Tt=zt.window===zt?zt:(Tt=zt.ownerDocument)?Tt.defaultView||Tt.parentWindow:window,Lt?(je=p.relatedTarget||p.toElement,Lt=St,je=je?co(je):null,je!==null&&(yi=r(je),ke=je.tag,je!==yi||ke!==5&&ke!==27&&ke!==6)&&(je=null)):(Lt=null,je=St),Lt!==je)){if(ke=Iy,kt="onMouseLeave",gt="onMouseEnter",ft="mouse",(o==="pointerout"||o==="pointerover")&&(ke=v0,kt="onPointerLeave",gt="onPointerEnter",ft="pointer"),yi=Lt==null?Tt:Oc(Lt),bt=je==null?Tt:Oc(je),Tt=new ke(kt,ft+"leave",Lt,p,zt),Tt.target=yi,Tt.relatedTarget=bt,kt=null,co(zt)===St&&(ke=new ke(gt,ft+"enter",je,p,zt),ke.target=bt,ke.relatedTarget=yi,kt=ke),yi=kt,Lt&&je)e:{for(ke=Lt,gt=je,ft=0,bt=ke;bt;bt=l1(bt))ft++;for(bt=0,kt=gt;kt;kt=l1(kt))bt++;for(;0<ft-bt;)ke=l1(ke),ft--;for(;0<bt-ft;)gt=l1(gt),bt--;for(;ft--;){if(ke===gt||gt!==null&&ke===gt.alternate)break e;ke=l1(ke),gt=l1(gt)}ke=null}else ke=null;Lt!==null&&K7(jt,Tt,Lt,ke,!1),je!==null&&yi!==null&&K7(jt,yi,je,ke,!0)}}t:{if(Tt=St?Oc(St):window,Lt=Tt.nodeName&&Tt.nodeName.toLowerCase(),Lt==="select"||Lt==="input"&&Tt.type==="file")var Ee=_0;else if(Vy(Tt))if(A0)Ee=zc;else{Ee=cb;var En=qM}else Lt=Tt.nodeName,!Lt||Lt.toLowerCase()!=="input"||Tt.type!=="checkbox"&&Tt.type!=="radio"?St&&h0(St.elementType)&&(Ee=_0):Ee=Tp;if(Ee&&(Ee=Ee(o,St))){Ur(jt,Ee,p,zt);break t}En&&En(o,Tt,St),o==="focusout"&&St&&Tt.type==="number"&&St.memoizedProps.value!=null&&Os(Tt,"number",Tt.value)}switch(En=St?Oc(St):window,o){case"focusin":(Vy(En)||En.contentEditable==="true")&&(Fl=En,b0=St,wp=null);break;case"focusout":wp=b0=Fl=null;break;case"mousedown":S0=!0;break;case"contextmenu":case"mouseup":case"dragend":S0=!1,Yy(jt,p,zt);break;case"selectionchange":if(qy)break;case"keydown":case"keyup":Yy(jt,p,zt)}var Be;if(Ap)t:{switch(o){case"compositionstart":var Ve="onCompositionStart";break t;case"compositionend":Ve="onCompositionEnd";break t;case"compositionupdate":Ve="onCompositionUpdate";break t}Ve=void 0}else Hc?Sp(o,p)&&(Ve="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Ve="onCompositionStart");Ve&&(bp&&p.locale!=="ko"&&(Hc||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Hc&&(Be=Ny()):(Nl=zt,Oy="value"in Nl?Nl.value:Nl.textContent,Hc=!0)),En=rS(St,Ve),0<En.length&&(Ve=new g0(Ve,o,null,p,zt),jt.push({event:Ve,listeners:En}),Be?Ve.data=Be:(Be=Gy(p),Be!==null&&(Ve.data=Be)))),(Be=xp?Ep(o,p):ky(o,p))&&(Ve=rS(St,"onBeforeInput"),0<Ve.length&&(En=new g0("onBeforeInput","beforeinput",null,p,zt),jt.push({event:En,listeners:Ve}),En.data=Be)),dP(jt,o,St,p,zt)}Y7(jt,c)})}function O2(o,c,p){return{instance:o,listener:c,currentTarget:p}}function rS(o,c){for(var p=c+"Capture",y=[];o!==null;){var E=o,w=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||w===null||(E=hf(o,p),E!=null&&y.unshift(O2(o,E,w)),E=hf(o,c),E!=null&&y.push(O2(o,E,w))),o.tag===3)return y;o=o.return}return[]}function l1(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function K7(o,c,p,y,E){for(var w=c._reactName,H=[];p!==null&&p!==y;){var j=p,st=j.alternate,St=j.stateNode;if(j=j.tag,st!==null&&st===y)break;j!==5&&j!==26&&j!==27||St===null||(st=St,E?(St=hf(p,w),St!=null&&H.unshift(O2(p,St,st))):E||(St=hf(p,w),St!=null&&H.push(O2(p,St,st)))),p=p.return}H.length!==0&&o.push({event:c,listeners:H})}var vP=/\r\n?/g,yP=/\u0000|\uFFFD/g;function J7(o){return(typeof o=="string"?o:""+o).replace(vP,`
`).replace(yP,"")}function Z7(o,c){return c=J7(c),J7(o)===c}function aS(){}function vi(o,c,p,y,E,w){switch(p){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||gr(o,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&gr(o,""+y);break;case"className":ie(o,"class",y);break;case"tabIndex":ie(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":ie(o,p,y);break;case"style":dp(o,y,w);break;case"data":if(c!=="object"){ie(o,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||p!=="href")){o.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=pp(""+y),o.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(p==="formAction"?(c!=="input"&&vi(o,c,"name",E.name,E,null),vi(o,c,"formEncType",E.formEncType,E,null),vi(o,c,"formMethod",E.formMethod,E,null),vi(o,c,"formTarget",E.formTarget,E,null)):(vi(o,c,"encType",E.encType,E,null),vi(o,c,"method",E.method,E,null),vi(o,c,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=pp(""+y),o.setAttribute(p,y);break;case"onClick":y!=null&&(o.onclick=aS);break;case"onScroll":y!=null&&wn("scroll",o);break;case"onScrollEnd":y!=null&&wn("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(n(60));o.innerHTML=p}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}p=pp(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""+y):o.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""):o.removeAttribute(p);break;case"capture":case"download":y===!0?o.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,y):o.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(p,y):o.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(p):o.setAttribute(p,y);break;case"popover":wn("beforetoggle",o),wn("toggle",o),Yt(o,"popover",y);break;case"xlinkActuate":re(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":re(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":re(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":re(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":re(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":re(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":re(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":re(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":re(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Yt(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Ly.get(p)||p,Yt(o,p,y))}}function uT(o,c,p,y,E,w){switch(p){case"style":dp(o,y,w);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(n(60));o.innerHTML=p}}break;case"children":typeof y=="string"?gr(o,y):(typeof y=="number"||typeof y=="bigint")&&gr(o,""+y);break;case"onScroll":y!=null&&wn("scroll",o);break;case"onScrollEnd":y!=null&&wn("scrollend",o);break;case"onClick":y!=null&&(o.onclick=aS);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uf.hasOwnProperty(p))t:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),c=p.slice(2,E?p.length-7:void 0),w=o[cs]||null,w=w!=null?w[p]:null,typeof w=="function"&&o.removeEventListener(c,w,E),typeof y=="function")){typeof w!="function"&&w!==null&&(p in o?o[p]=null:o.hasAttribute(p)&&o.removeAttribute(p)),o.addEventListener(c,y,E);break t}p in o?o[p]=y:y===!0?o.setAttribute(p,""):Yt(o,p,y)}}}function Mr(o,c,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wn("error",o),wn("load",o);var y=!1,E=!1,w;for(w in p)if(p.hasOwnProperty(w)){var H=p[w];if(H!=null)switch(w){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:vi(o,c,w,H,p,null)}}E&&vi(o,c,"srcSet",p.srcSet,p,null),y&&vi(o,c,"src",p.src,p,null);return;case"input":wn("invalid",o);var j=w=H=E=null,st=null,St=null;for(y in p)if(p.hasOwnProperty(y)){var zt=p[y];if(zt!=null)switch(y){case"name":E=zt;break;case"type":H=zt;break;case"checked":st=zt;break;case"defaultChecked":St=zt;break;case"value":w=zt;break;case"defaultValue":j=zt;break;case"children":case"dangerouslySetInnerHTML":if(zt!=null)throw Error(n(137,c));break;default:vi(o,c,y,zt,p,null)}}ei(o,w,j,st,St,H,E,!1),Ri(o);return;case"select":wn("invalid",o),y=H=w=null;for(E in p)if(p.hasOwnProperty(E)&&(j=p[E],j!=null))switch(E){case"value":w=j;break;case"defaultValue":H=j;break;case"multiple":y=j;default:vi(o,c,E,j,p,null)}c=w,p=H,o.multiple=!!y,c!=null?$i(o,!!y,c,!1):p!=null&&$i(o,!!y,p,!0);return;case"textarea":wn("invalid",o),w=E=y=null;for(H in p)if(p.hasOwnProperty(H)&&(j=p[H],j!=null))switch(H){case"value":y=j;break;case"defaultValue":E=j;break;case"children":w=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(n(91));break;default:vi(o,c,H,j,p,null)}_s(o,y,E,w),Ri(o);return;case"option":for(st in p)if(p.hasOwnProperty(st)&&(y=p[st],y!=null))switch(st){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:vi(o,c,st,y,p,null)}return;case"dialog":wn("beforetoggle",o),wn("toggle",o),wn("cancel",o),wn("close",o);break;case"iframe":case"object":wn("load",o);break;case"video":case"audio":for(y=0;y<B2.length;y++)wn(B2[y],o);break;case"image":wn("error",o),wn("load",o);break;case"details":wn("toggle",o);break;case"embed":case"source":case"link":wn("error",o),wn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(St in p)if(p.hasOwnProperty(St)&&(y=p[St],y!=null))switch(St){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:vi(o,c,St,y,p,null)}return;default:if(h0(c)){for(zt in p)p.hasOwnProperty(zt)&&(y=p[zt],y!==void 0&&uT(o,c,zt,y,p,void 0));return}}for(j in p)p.hasOwnProperty(j)&&(y=p[j],y!=null&&vi(o,c,j,y,p,null))}function _P(o,c,p,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,w=null,H=null,j=null,st=null,St=null,zt=null;for(Lt in p){var jt=p[Lt];if(p.hasOwnProperty(Lt)&&jt!=null)switch(Lt){case"checked":break;case"value":break;case"defaultValue":st=jt;default:y.hasOwnProperty(Lt)||vi(o,c,Lt,null,y,jt)}}for(var Tt in y){var Lt=y[Tt];if(jt=p[Tt],y.hasOwnProperty(Tt)&&(Lt!=null||jt!=null))switch(Tt){case"type":w=Lt;break;case"name":E=Lt;break;case"checked":St=Lt;break;case"defaultChecked":zt=Lt;break;case"value":H=Lt;break;case"defaultValue":j=Lt;break;case"children":case"dangerouslySetInnerHTML":if(Lt!=null)throw Error(n(137,c));break;default:Lt!==jt&&vi(o,c,Tt,Lt,y,jt)}}Wo(o,H,j,st,St,zt,w,E);return;case"select":Lt=H=j=Tt=null;for(w in p)if(st=p[w],p.hasOwnProperty(w)&&st!=null)switch(w){case"value":break;case"multiple":Lt=st;default:y.hasOwnProperty(w)||vi(o,c,w,null,y,st)}for(E in y)if(w=y[E],st=p[E],y.hasOwnProperty(E)&&(w!=null||st!=null))switch(E){case"value":Tt=w;break;case"defaultValue":j=w;break;case"multiple":H=w;default:w!==st&&vi(o,c,E,w,y,st)}c=j,p=H,y=Lt,Tt!=null?$i(o,!!p,Tt,!1):!!y!=!!p&&(c!=null?$i(o,!!p,c,!0):$i(o,!!p,p?[]:"",!1));return;case"textarea":Lt=Tt=null;for(j in p)if(E=p[j],p.hasOwnProperty(j)&&E!=null&&!y.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:vi(o,c,j,null,y,E)}for(H in y)if(E=y[H],w=p[H],y.hasOwnProperty(H)&&(E!=null||w!=null))switch(H){case"value":Tt=E;break;case"defaultValue":Lt=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(n(91));break;default:E!==w&&vi(o,c,H,E,y,w)}ys(o,Tt,Lt);return;case"option":for(var je in p)if(Tt=p[je],p.hasOwnProperty(je)&&Tt!=null&&!y.hasOwnProperty(je))switch(je){case"selected":o.selected=!1;break;default:vi(o,c,je,null,y,Tt)}for(st in y)if(Tt=y[st],Lt=p[st],y.hasOwnProperty(st)&&Tt!==Lt&&(Tt!=null||Lt!=null))switch(st){case"selected":o.selected=Tt&&typeof Tt!="function"&&typeof Tt!="symbol";break;default:vi(o,c,st,Tt,y,Lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in p)Tt=p[ke],p.hasOwnProperty(ke)&&Tt!=null&&!y.hasOwnProperty(ke)&&vi(o,c,ke,null,y,Tt);for(St in y)if(Tt=y[St],Lt=p[St],y.hasOwnProperty(St)&&Tt!==Lt&&(Tt!=null||Lt!=null))switch(St){case"children":case"dangerouslySetInnerHTML":if(Tt!=null)throw Error(n(137,c));break;default:vi(o,c,St,Tt,y,Lt)}return;default:if(h0(c)){for(var yi in p)Tt=p[yi],p.hasOwnProperty(yi)&&Tt!==void 0&&!y.hasOwnProperty(yi)&&uT(o,c,yi,void 0,y,Tt);for(zt in y)Tt=y[zt],Lt=p[zt],!y.hasOwnProperty(zt)||Tt===Lt||Tt===void 0&&Lt===void 0||uT(o,c,zt,Tt,y,Lt);return}}for(var gt in p)Tt=p[gt],p.hasOwnProperty(gt)&&Tt!=null&&!y.hasOwnProperty(gt)&&vi(o,c,gt,null,y,Tt);for(jt in y)Tt=y[jt],Lt=p[jt],!y.hasOwnProperty(jt)||Tt===Lt||Tt==null&&Lt==null||vi(o,c,jt,Tt,y,Lt)}var hT=null,fT=null;function oS(o){return o.nodeType===9?o:o.ownerDocument}function $7(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tR(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function dT(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var pT=null;function AP(){var o=window.event;return o&&o.type==="popstate"?o===pT?!1:(pT=o,!0):(pT=null,!1)}var eR=typeof setTimeout=="function"?setTimeout:void 0,xP=typeof clearTimeout=="function"?clearTimeout:void 0,nR=typeof Promise=="function"?Promise:void 0,bP=typeof queueMicrotask=="function"?queueMicrotask:typeof nR<"u"?function(o){return nR.resolve(null).then(o).catch(SP)}:eR;function SP(o){setTimeout(function(){throw o})}function Kf(o){return o==="head"}function iR(o,c){var p=c,y=0,E=0;do{var w=p.nextSibling;if(o.removeChild(p),w&&w.nodeType===8)if(p=w.data,p==="/$"){if(0<y&&8>y){p=y;var H=o.ownerDocument;if(p&1&&N2(H.documentElement),p&2&&N2(H.body),p&4)for(p=H.head,N2(p),H=p.firstChild;H;){var j=H.nextSibling,st=H.nodeName;H[lo]||st==="SCRIPT"||st==="STYLE"||st==="LINK"&&H.rel.toLowerCase()==="stylesheet"||p.removeChild(H),H=j}}if(E===0){o.removeChild(w),k2(c);return}E--}else p==="$"||p==="$?"||p==="$!"?E++:y=p.charCodeAt(0)-48;else y=0;p=w}while(p);k2(c)}function mT(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var p=c;switch(c=c.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":mT(p),ti(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}o.removeChild(p)}}function EP(o,c,p,y){for(;o.nodeType===1;){var E=p;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[lo])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(w=o.getAttribute("rel"),w==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(w!==E.rel||o.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(w=o.getAttribute("src"),(w!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&w&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var w=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===w)return o}else return o;if(o=ic(o.nextSibling),o===null)break}return null}function MP(o,c,p){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!p||(o=ic(o.nextSibling),o===null))return null;return o}function gT(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function TP(o,c){var p=o.ownerDocument;if(o.data!=="$?"||p.readyState==="complete")c();else{var y=function(){c(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function ic(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var vT=null;function sR(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}function rR(o,c,p){switch(c=oS(p),o){case"html":if(o=c.documentElement,!o)throw Error(n(452));return o;case"head":if(o=c.head,!o)throw Error(n(453));return o;case"body":if(o=c.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function N2(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);ti(o)}var pl=new Map,aR=new Set;function lS(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var lh=tt.d;tt.d={f:CP,r:wP,D:RP,C:LP,L:DP,m:BP,X:NP,S:OP,M:IP};function CP(){var o=lh.f(),c=fl();return o||c}function wP(o){var c=uo(o);c!==null&&c.tag===5&&c.type==="form"?Gb(c):lh.r(o)}var c1=typeof document>"u"?null:document;function oR(o,c,p){var y=c1;if(y&&typeof c=="string"&&c){var E=ri(c);E='link[rel="'+o+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),aR.has(E)||(aR.add(E),o={rel:o,crossOrigin:p,href:c},y.querySelector(E)===null&&(c=y.createElement("link"),Mr(c,"link",o),Zi(c),y.head.appendChild(c)))}}function RP(o){lh.D(o),oR("dns-prefetch",o,null)}function LP(o,c){lh.C(o,c),oR("preconnect",o,c)}function DP(o,c,p){lh.L(o,c,p);var y=c1;if(y&&o&&c){var E='link[rel="preload"][as="'+ri(c)+'"]';c==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+ri(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+ri(p.imageSizes)+'"]')):E+='[href="'+ri(o)+'"]';var w=E;switch(c){case"style":w=u1(o);break;case"script":w=h1(o)}pl.has(w)||(o=m({rel:"preload",href:c==="image"&&p&&p.imageSrcSet?void 0:o,as:c},p),pl.set(w,o),y.querySelector(E)!==null||c==="style"&&y.querySelector(I2(w))||c==="script"&&y.querySelector(U2(w))||(c=y.createElement("link"),Mr(c,"link",o),Zi(c),y.head.appendChild(c)))}}function BP(o,c){lh.m(o,c);var p=c1;if(p&&o){var y=c&&typeof c.as=="string"?c.as:"script",E='link[rel="modulepreload"][as="'+ri(y)+'"][href="'+ri(o)+'"]',w=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=h1(o)}if(!pl.has(w)&&(o=m({rel:"modulepreload",href:o},c),pl.set(w,o),p.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(U2(w)))return}y=p.createElement("link"),Mr(y,"link",o),Zi(y),p.head.appendChild(y)}}}function OP(o,c,p){lh.S(o,c,p);var y=c1;if(y&&o){var E=Ol(y).hoistableStyles,w=u1(o);c=c||"default";var H=E.get(w);if(!H){var j={loading:0,preload:null};if(H=y.querySelector(I2(w)))j.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":c},p),(p=pl.get(w))&&yT(o,p);var st=H=y.createElement("link");Zi(st),Mr(st,"link",o),st._p=new Promise(function(St,zt){st.onload=St,st.onerror=zt}),st.addEventListener("load",function(){j.loading|=1}),st.addEventListener("error",function(){j.loading|=2}),j.loading|=4,cS(H,c,y)}H={type:"stylesheet",instance:H,count:1,state:j},E.set(w,H)}}}function NP(o,c){lh.X(o,c);var p=c1;if(p&&o){var y=Ol(p).hoistableScripts,E=h1(o),w=y.get(E);w||(w=p.querySelector(U2(E)),w||(o=m({src:o,async:!0},c),(c=pl.get(E))&&_T(o,c),w=p.createElement("script"),Zi(w),Mr(w,"link",o),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(E,w))}}function IP(o,c){lh.M(o,c);var p=c1;if(p&&o){var y=Ol(p).hoistableScripts,E=h1(o),w=y.get(E);w||(w=p.querySelector(U2(E)),w||(o=m({src:o,async:!0,type:"module"},c),(c=pl.get(E))&&_T(o,c),w=p.createElement("script"),Zi(w),Mr(w,"link",o),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(E,w))}}function lR(o,c,p,y){var E=(E=Bt.current)?lS(E):null;if(!E)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(c=u1(p.href),p=Ol(E).hoistableStyles,y=p.get(c),y||(y={type:"style",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){o=u1(p.href);var w=Ol(E).hoistableStyles,H=w.get(o);if(H||(E=E.ownerDocument||E,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(o,H),(w=E.querySelector(I2(o)))&&!w._p&&(H.instance=w,H.state.loading=5),pl.has(o)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},pl.set(o,p),w||UP(E,o,p,H.state))),c&&y===null)throw Error(n(528,""));return H}if(c&&y!==null)throw Error(n(529,""));return null;case"script":return c=p.async,p=p.src,typeof p=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=h1(p),p=Ol(E).hoistableScripts,y=p.get(c),y||(y={type:"script",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function u1(o){return'href="'+ri(o)+'"'}function I2(o){return'link[rel="stylesheet"]['+o+"]"}function cR(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function UP(o,c,p,y){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=o.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),Mr(c,"link",p),Zi(c),o.head.appendChild(c))}function h1(o){return'[src="'+ri(o)+'"]'}function U2(o){return"script[async]"+o}function uR(o,c,p){if(c.count++,c.instance===null)switch(c.type){case"style":var y=o.querySelector('style[data-href~="'+ri(p.href)+'"]');if(y)return c.instance=y,Zi(y),y;var E=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),Zi(y),Mr(y,"style",E),cS(y,p.precedence,o),c.instance=y;case"stylesheet":E=u1(p.href);var w=o.querySelector(I2(E));if(w)return c.state.loading|=4,c.instance=w,Zi(w),w;y=cR(p),(E=pl.get(E))&&yT(y,E),w=(o.ownerDocument||o).createElement("link"),Zi(w);var H=w;return H._p=new Promise(function(j,st){H.onload=j,H.onerror=st}),Mr(w,"link",y),c.state.loading|=4,cS(w,p.precedence,o),c.instance=w;case"script":return w=h1(p.src),(E=o.querySelector(U2(w)))?(c.instance=E,Zi(E),E):(y=p,(E=pl.get(w))&&(y=m({},p),_T(y,E)),o=o.ownerDocument||o,E=o.createElement("script"),Zi(E),Mr(E,"link",y),o.head.appendChild(E),c.instance=E);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,cS(y,p.precedence,o));return c.instance}function cS(o,c,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,w=E,H=0;H<y.length;H++){var j=y[H];if(j.dataset.precedence===c)w=j;else if(w!==E)break}w?w.parentNode.insertBefore(o,w.nextSibling):(c=p.nodeType===9?p.head:p,c.insertBefore(o,c.firstChild))}function yT(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function _T(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var uS=null;function hR(o,c,p){if(uS===null){var y=new Map,E=uS=new Map;E.set(p,y)}else E=uS,y=E.get(p),y||(y=new Map,E.set(p,y));if(y.has(o))return y;for(y.set(o,null),p=p.getElementsByTagName(o),E=0;E<p.length;E++){var w=p[E];if(!(w[lo]||w[Ji]||o==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var H=w.getAttribute(c)||"";H=o+H;var j=y.get(H);j?j.push(w):y.set(H,[w])}}return y}function fR(o,c,p){o=o.ownerDocument||o,o.head.insertBefore(p,c==="title"?o.querySelector("head > title"):null)}function PP(o,c,p){if(p===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function dR(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var P2=null;function FP(){}function HP(o,c,p){if(P2===null)throw Error(n(475));var y=P2;if(c.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=u1(p.href),w=o.querySelector(I2(E));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(y.count++,y=hS.bind(y),o.then(y,y)),c.state.loading|=4,c.instance=w,Zi(w);return}w=o.ownerDocument||o,p=cR(p),(E=pl.get(E))&&yT(p,E),w=w.createElement("link"),Zi(w);var H=w;H._p=new Promise(function(j,st){H.onload=j,H.onerror=st}),Mr(w,"link",p),c.instance=w}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(y.count++,c=hS.bind(y),o.addEventListener("load",c),o.addEventListener("error",c))}}function zP(){if(P2===null)throw Error(n(475));var o=P2;return o.stylesheets&&o.count===0&&AT(o,o.stylesheets),0<o.count?function(c){var p=setTimeout(function(){if(o.stylesheets&&AT(o,o.stylesheets),o.unsuspend){var y=o.unsuspend;o.unsuspend=null,y()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(p)}}:null}function hS(){if(this.count--,this.count===0){if(this.stylesheets)AT(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var fS=null;function AT(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,fS=new Map,c.forEach(GP,o),fS=null,hS.call(o))}function GP(o,c){if(!(c.state.loading&4)){var p=fS.get(o);if(p)var y=p.get(null);else{p=new Map,fS.set(o,p);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<E.length;w++){var H=E[w];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(p.set(H.dataset.precedence,H),y=H)}y&&p.set(null,y)}E=c.instance,H=E.getAttribute("data-precedence"),w=p.get(H)||y,w===y&&p.set(null,E),p.set(H,E),this.count++,y=hS.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),w?w.parentNode.insertBefore(E,w.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),c.state.loading|=4}}var F2={$$typeof:B,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function kP(o,c,p,y,E,w,H,j){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=w,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function pR(o,c,p,y,E,w,H,j,st,St,zt,jt){return o=new kP(o,c,p,H,j,st,St,jt),c=1,w===!0&&(c|=24),w=zr(3,null,null,c),o.current=w,w.stateNode=o,c=B0(),c.refCount++,o.pooledCache=c,c.refCount++,w.memoizedState={element:y,isDehydrated:p,cache:c},l2(w),o}function mR(o){return o?(o=Vc,o):Vc}function gR(o,c,p,y,E,w){E=mR(E),y.context===null?y.context=E:y.pendingContext=E,y=el(c),y.payload={element:p},w=w===void 0?null:w,w!==null&&(y.callback=w),p=ql(o,y,c),p!==null&&(Er(p,o,c),Qu(p,o,c))}function vR(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function xT(o,c){vR(o,c),(o=o.alternate)&&vR(o,c)}function yR(o){if(o.tag===13){var c=kl(o,67108864);c!==null&&Er(c,o,67108864),xT(o,67108864)}}var dS=!0;function VP(o,c,p,y){var E=Q.T;Q.T=null;var w=tt.p;try{tt.p=2,bT(o,c,p,y)}finally{tt.p=w,Q.T=E}}function QP(o,c,p,y){var E=Q.T;Q.T=null;var w=tt.p;try{tt.p=8,bT(o,c,p,y)}finally{tt.p=w,Q.T=E}}function bT(o,c,p,y){if(dS){var E=ST(y);if(E===null)cT(o,c,y,pS,p),AR(o,y);else if(jP(E,o,c,p,y))y.stopPropagation();else if(AR(o,y),c&4&&-1<XP.indexOf(o)){for(;E!==null;){var w=uo(E);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var H=le(w.pendingLanes);if(H!==0){var j=w;for(j.pendingLanes|=2,j.entangledLanes|=2;H;){var st=1<<31-ge(H);j.entanglements[1]|=st,H&=~st}du(w),(jn&6)===0&&(nr=Vt()+500,D2(0))}}break;case 13:j=kl(w,2),j!==null&&Er(j,w,2),fl(),xT(w,2)}if(w=ST(y),w===null&&cT(o,c,y,pS,p),w===E)break;E=w}E!==null&&y.stopPropagation()}else cT(o,c,y,null,p)}}function ST(o){return o=d0(o),ET(o)}var pS=null;function ET(o){if(pS=null,o=co(o),o!==null){var c=r(o);if(c===null)o=null;else{var p=c.tag;if(p===13){if(o=a(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return pS=o,null}function _R(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gt()){case be:return 2;case qt:return 8;case $:case V:return 32;case vt:return 268435456;default:return 32}default:return 32}}var MT=!1,Jf=null,Zf=null,$f=null,H2=new Map,z2=new Map,td=[],XP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AR(o,c){switch(o){case"focusin":case"focusout":Jf=null;break;case"dragenter":case"dragleave":Zf=null;break;case"mouseover":case"mouseout":$f=null;break;case"pointerover":case"pointerout":H2.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":z2.delete(c.pointerId)}}function G2(o,c,p,y,E,w){return o===null||o.nativeEvent!==w?(o={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:w,targetContainers:[E]},c!==null&&(c=uo(c),c!==null&&yR(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),o)}function jP(o,c,p,y,E){switch(c){case"focusin":return Jf=G2(Jf,o,c,p,y,E),!0;case"dragenter":return Zf=G2(Zf,o,c,p,y,E),!0;case"mouseover":return $f=G2($f,o,c,p,y,E),!0;case"pointerover":var w=E.pointerId;return H2.set(w,G2(H2.get(w)||null,o,c,p,y,E)),!0;case"gotpointercapture":return w=E.pointerId,z2.set(w,G2(z2.get(w)||null,o,c,p,y,E)),!0}return!1}function xR(o){var c=co(o.target);if(c!==null){var p=r(c);if(p!==null){if(c=p.tag,c===13){if(c=a(p),c!==null){o.blockedOn=c,Nr(o.priority,function(){if(p.tag===13){var y=Fi();y=Jn(y);var E=kl(p,y);E!==null&&Er(E,p,y),xT(p,y)}});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function mS(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=ST(o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);f0=y,p.target.dispatchEvent(y),f0=null}else return c=uo(p),c!==null&&yR(c),o.blockedOn=p,!1;c.shift()}return!0}function bR(o,c,p){mS(o)&&p.delete(c)}function qP(){MT=!1,Jf!==null&&mS(Jf)&&(Jf=null),Zf!==null&&mS(Zf)&&(Zf=null),$f!==null&&mS($f)&&($f=null),H2.forEach(bR),z2.forEach(bR)}function gS(o,c){o.blockedOn===c&&(o.blockedOn=null,MT||(MT=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,qP)))}var vS=null;function SR(o){vS!==o&&(vS=o,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){vS===o&&(vS=null);for(var c=0;c<o.length;c+=3){var p=o[c],y=o[c+1],E=o[c+2];if(typeof y!="function"){if(ET(y||p)===null)continue;break}var w=uo(p);w!==null&&(o.splice(c,3),c-=3,E2(w,{pending:!0,data:E,method:p.method,action:y},y,E))}}))}function k2(o){function c(st){return gS(st,o)}Jf!==null&&gS(Jf,o),Zf!==null&&gS(Zf,o),$f!==null&&gS($f,o),H2.forEach(c),z2.forEach(c);for(var p=0;p<td.length;p++){var y=td[p];y.blockedOn===o&&(y.blockedOn=null)}for(;0<td.length&&(p=td[0],p.blockedOn===null);)xR(p),p.blockedOn===null&&td.shift();if(p=(o.ownerDocument||o).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var E=p[y],w=p[y+1],H=E[cs]||null;if(typeof w=="function")H||SR(p);else if(H){var j=null;if(w&&w.hasAttribute("formAction")){if(E=w,H=w[cs]||null)j=H.formAction;else if(ET(E)!==null)continue}else j=H.action;typeof j=="function"?p[y+1]=j:(p.splice(y,3),y-=3),SR(p)}}}function TT(o){this._internalRoot=o}yS.prototype.render=TT.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));var p=c.current,y=Fi();gR(p,y,o,c,null,null)},yS.prototype.unmount=TT.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;gR(o.current,2,null,o,null,null),fl(),c[$s]=null}};function yS(o){this._internalRoot=o}yS.prototype.unstable_scheduleHydration=function(o){if(o){var c=Cn();o={blockedOn:null,target:o,priority:c};for(var p=0;p<td.length&&c!==0&&c<td[p].priority;p++);td.splice(p,0,o),p===0&&xR(o)}};var ER=t.version;if(ER!=="19.1.0")throw Error(n(527,ER,"19.1.0"));tt.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=u(c),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var YP={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_S.isDisabled&&_S.supportsFiber)try{Ot=_S.inject(YP),ne=_S}catch{}}return Q2.createRoot=function(o,c){if(!s(o))throw Error(n(299));var p=!1,y="",E=Wp,w=W0,H=$b,j=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(E=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(H=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(j=c.unstable_transitionCallbacks)),c=pR(o,1,!1,null,null,p,y,E,w,H,j,null),o[$s]=c.current,lT(o),new TT(c)},Q2.hydrateRoot=function(o,c,p){if(!s(o))throw Error(n(299));var y=!1,E="",w=Wp,H=W0,j=$b,st=null,St=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(w=p.onUncaughtError),p.onCaughtError!==void 0&&(H=p.onCaughtError),p.onRecoverableError!==void 0&&(j=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(st=p.unstable_transitionCallbacks),p.formState!==void 0&&(St=p.formState)),c=pR(o,1,!0,c,p??null,y,E,w,H,j,st,St),c.context=mR(null),p=c.current,y=Fi(),y=Jn(y),E=el(y),E.callback=null,ql(p,E,y),p=y,c.current.lanes=p,Qt(c,p),du(c),o[$s]=c.current,lT(o),new yS(c)},Q2.version="19.1.0",Q2}var IR;function rF(){if(IR)return LT.exports;IR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),LT.exports=sF(),LT.exports}var aF=rF(),dr=function(){return dr=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},dr.apply(this,arguments)};function ty(i,t,e){if(e||arguments.length===2)for(var n=0,s=t.length,r;n<s;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return i.concat(r||Array.prototype.slice.call(t))}var Bi="-ms-",L_="-moz-",ii="-webkit-",d9="comm",HE="rule",gw="decl",oF="@import",p9="@keyframes",lF="@layer",m9=Math.abs,vw=String.fromCharCode,u5=Object.assign;function cF(i,t){return fr(i,0)^45?(((t<<2^fr(i,0))<<2^fr(i,1))<<2^fr(i,2))<<2^fr(i,3):0}function g9(i){return i.trim()}function _h(i,t){return(i=t.exec(i))?i[0]:i}function gn(i,t,e){return i.replace(t,e)}function C4(i,t,e){return i.indexOf(t,e)}function fr(i,t){return i.charCodeAt(t)|0}function ey(i,t,e){return i.slice(t,e)}function Uu(i){return i.length}function v9(i){return i.length}function c_(i,t){return t.push(i),i}function uF(i,t){return i.map(t).join("")}function UR(i,t){return i.filter(function(e){return!_h(e,t)})}var zE=1,ny=1,y9=0,Rl=0,ws=0,_y="";function GE(i,t,e,n,s,r,a,l){return{value:i,root:t,parent:e,type:n,props:s,children:r,line:zE,column:ny,length:a,return:"",siblings:l}}function hd(i,t){return u5(GE("",null,null,"",null,null,0,i.siblings),i,{length:-i.length},t)}function f1(i){for(;i.root;)i=hd(i.root,{children:[i]});c_(i,i.siblings)}function hF(){return ws}function fF(){return ws=Rl>0?fr(_y,--Rl):0,ny--,ws===10&&(ny=1,zE--),ws}function wc(){return ws=Rl<y9?fr(_y,Rl++):0,ny++,ws===10&&(ny=1,zE++),ws}function Bg(){return fr(_y,Rl)}function w4(){return Rl}function kE(i,t){return ey(_y,i,t)}function h5(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function dF(i){return zE=ny=1,y9=Uu(_y=i),Rl=0,[]}function pF(i){return _y="",i}function NT(i){return g9(kE(Rl-1,f5(i===91?i+2:i===40?i+1:i)))}function mF(i){for(;(ws=Bg())&&ws<33;)wc();return h5(i)>2||h5(ws)>3?"":" "}function gF(i,t){for(;--t&&wc()&&!(ws<48||ws>102||ws>57&&ws<65||ws>70&&ws<97););return kE(i,w4()+(t<6&&Bg()==32&&wc()==32))}function f5(i){for(;wc();)switch(ws){case i:return Rl;case 34:case 39:i!==34&&i!==39&&f5(ws);break;case 40:i===41&&f5(i);break;case 92:wc();break}return Rl}function vF(i,t){for(;wc()&&i+ws!==57;)if(i+ws===84&&Bg()===47)break;return"/*"+kE(t,Rl-1)+"*"+vw(i===47?i:wc())}function yF(i){for(;!h5(Bg());)wc();return kE(i,Rl)}function _F(i){return pF(R4("",null,null,null,[""],i=dF(i),0,[0],i))}function R4(i,t,e,n,s,r,a,l,u){for(var f=0,m=0,g=a,v=0,_=0,b=0,C=1,T=1,S=1,R=0,B="",D=s,N=r,I=n,F=B;T;)switch(b=R,R=wc()){case 40:if(b!=108&&fr(F,g-1)==58){C4(F+=gn(NT(R),"&","&\f"),"&\f",m9(f?l[f-1]:0))!=-1&&(S=-1);break}case 34:case 39:case 91:F+=NT(R);break;case 9:case 10:case 13:case 32:F+=mF(b);break;case 92:F+=gF(w4()-1,7);continue;case 47:switch(Bg()){case 42:case 47:c_(AF(vF(wc(),w4()),t,e,u),u);break;default:F+="/"}break;case 123*C:l[f++]=Uu(F)*S;case 125*C:case 59:case 0:switch(R){case 0:case 125:T=0;case 59+m:S==-1&&(F=gn(F,/\f/g,"")),_>0&&Uu(F)-g&&c_(_>32?FR(F+";",n,e,g-1,u):FR(gn(F," ","")+";",n,e,g-2,u),u);break;case 59:F+=";";default:if(c_(I=PR(F,t,e,f,m,s,l,B,D=[],N=[],g,r),r),R===123)if(m===0)R4(F,t,I,I,D,r,g,l,N);else switch(v===99&&fr(F,3)===110?100:v){case 100:case 108:case 109:case 115:R4(i,I,I,n&&c_(PR(i,I,I,0,0,s,l,B,s,D=[],g,N),N),s,N,g,l,n?D:N);break;default:R4(F,I,I,I,[""],N,0,l,N)}}f=m=_=0,C=S=1,B=F="",g=a;break;case 58:g=1+Uu(F),_=b;default:if(C<1){if(R==123)--C;else if(R==125&&C++==0&&fF()==125)continue}switch(F+=vw(R),R*C){case 38:S=m>0?1:(F+="\f",-1);break;case 44:l[f++]=(Uu(F)-1)*S,S=1;break;case 64:Bg()===45&&(F+=NT(wc())),v=Bg(),m=g=Uu(B=F+=yF(w4())),R++;break;case 45:b===45&&Uu(F)==2&&(C=0)}}return r}function PR(i,t,e,n,s,r,a,l,u,f,m,g){for(var v=s-1,_=s===0?r:[""],b=v9(_),C=0,T=0,S=0;C<n;++C)for(var R=0,B=ey(i,v+1,v=m9(T=a[C])),D=i;R<b;++R)(D=g9(T>0?_[R]+" "+B:gn(B,/&\f/g,_[R])))&&(u[S++]=D);return GE(i,t,e,s===0?HE:l,u,f,m,g)}function AF(i,t,e,n){return GE(i,t,e,d9,vw(hF()),ey(i,2,-2),0,n)}function FR(i,t,e,n,s){return GE(i,t,e,gw,ey(i,0,n),ey(i,n+1,-1),n,s)}function _9(i,t,e){switch(cF(i,t)){case 5103:return ii+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ii+i+i;case 4789:return L_+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return ii+i+L_+i+Bi+i+i;case 5936:switch(fr(i,t+11)){case 114:return ii+i+Bi+gn(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return ii+i+Bi+gn(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return ii+i+Bi+gn(i,/[svh]\w+-[tblr]{2}/,"lr")+i}case 6828:case 4268:case 2903:return ii+i+Bi+i+i;case 6165:return ii+i+Bi+"flex-"+i+i;case 5187:return ii+i+gn(i,/(\w+).+(:[^]+)/,ii+"box-$1$2"+Bi+"flex-$1$2")+i;case 5443:return ii+i+Bi+"flex-item-"+gn(i,/flex-|-self/g,"")+(_h(i,/flex-|baseline/)?"":Bi+"grid-row-"+gn(i,/flex-|-self/g,""))+i;case 4675:return ii+i+Bi+"flex-line-pack"+gn(i,/align-content|flex-|-self/g,"")+i;case 5548:return ii+i+Bi+gn(i,"shrink","negative")+i;case 5292:return ii+i+Bi+gn(i,"basis","preferred-size")+i;case 6060:return ii+"box-"+gn(i,"-grow","")+ii+i+Bi+gn(i,"grow","positive")+i;case 4554:return ii+gn(i,/([^-])(transform)/g,"$1"+ii+"$2")+i;case 6187:return gn(gn(gn(i,/(zoom-|grab)/,ii+"$1"),/(image-set)/,ii+"$1"),i,"")+i;case 5495:case 3959:return gn(i,/(image-set\([^]*)/,ii+"$1$`$1");case 4968:return gn(gn(i,/(.+:)(flex-)?(.*)/,ii+"box-pack:$3"+Bi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ii+i+i;case 4200:if(!_h(i,/flex-|baseline/))return Bi+"grid-column-align"+ey(i,t)+i;break;case 2592:case 3360:return Bi+gn(i,"template-","")+i;case 4384:case 3616:return e&&e.some(function(n,s){return t=s,_h(n.props,/grid-\w+-end/)})?~C4(i+(e=e[t].value),"span",0)?i:Bi+gn(i,"-start","")+i+Bi+"grid-row-span:"+(~C4(e,"span",0)?_h(e,/\d+/):+_h(e,/\d+/)-+_h(i,/\d+/))+";":Bi+gn(i,"-start","")+i;case 4896:case 4128:return e&&e.some(function(n){return _h(n.props,/grid-\w+-start/)})?i:Bi+gn(gn(i,"-end","-span"),"span ","")+i;case 4095:case 3583:case 4068:case 2532:return gn(i,/(.+)-inline(.+)/,ii+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Uu(i)-1-t>6)switch(fr(i,t+1)){case 109:if(fr(i,t+4)!==45)break;case 102:return gn(i,/(.+:)(.+)-([^]+)/,"$1"+ii+"$2-$3$1"+L_+(fr(i,t+3)==108?"$3":"$2-$3"))+i;case 115:return~C4(i,"stretch",0)?_9(gn(i,"stretch","fill-available"),t,e)+i:i}break;case 5152:case 5920:return gn(i,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,s,r,a,l,u,f){return Bi+s+":"+r+f+(a?Bi+s+"-span:"+(l?u:+u-+r)+f:"")+i});case 4949:if(fr(i,t+6)===121)return gn(i,":",":"+ii)+i;break;case 6444:switch(fr(i,fr(i,14)===45?18:11)){case 120:return gn(i,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ii+(fr(i,14)===45?"inline-":"")+"box$3$1"+ii+"$2$3$1"+Bi+"$2box$3")+i;case 100:return gn(i,":",":"+Bi)+i}break;case 5719:case 2647:case 2135:case 3927:case 2391:return gn(i,"scroll-","scroll-snap-")+i}return i}function m3(i,t){for(var e="",n=0;n<i.length;n++)e+=t(i[n],n,i,t)||"";return e}function xF(i,t,e,n){switch(i.type){case lF:if(i.children.length)break;case oF:case gw:return i.return=i.return||i.value;case d9:return"";case p9:return i.return=i.value+"{"+m3(i.children,n)+"}";case HE:if(!Uu(i.value=i.props.join(",")))return""}return Uu(e=m3(i.children,n))?i.return=i.value+"{"+e+"}":""}function bF(i){var t=v9(i);return function(e,n,s,r){for(var a="",l=0;l<t;l++)a+=i[l](e,n,s,r)||"";return a}}function SF(i){return function(t){t.root||(t=t.return)&&i(t)}}function EF(i,t,e,n){if(i.length>-1&&!i.return)switch(i.type){case gw:i.return=_9(i.value,i.length,e);return;case p9:return m3([hd(i,{value:gn(i.value,"@","@"+ii)})],n);case HE:if(i.length)return uF(e=i.props,function(s){switch(_h(s,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":f1(hd(i,{props:[gn(s,/:(read-\w+)/,":"+L_+"$1")]})),f1(hd(i,{props:[s]})),u5(i,{props:UR(e,n)});break;case"::placeholder":f1(hd(i,{props:[gn(s,/:(plac\w+)/,":"+ii+"input-$1")]})),f1(hd(i,{props:[gn(s,/:(plac\w+)/,":"+L_+"$1")]})),f1(hd(i,{props:[gn(s,/:(plac\w+)/,Bi+"input-$1")]})),f1(hd(i,{props:[s]})),u5(i,{props:UR(e,n)});break}return""})}}var MF={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},wo={},iy=typeof process<"u"&&wo!==void 0&&(wo.REACT_APP_SC_ATTR||wo.SC_ATTR)||"data-styled",A9="active",x9="data-styled-version",VE="6.1.17",yw=`/*!sc*/
`,g3=typeof window<"u"&&"HTMLElement"in window,TF=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&wo!==void 0&&wo.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&wo.REACT_APP_SC_DISABLE_SPEEDY!==""?wo.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&wo.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&wo!==void 0&&wo.SC_DISABLE_SPEEDY!==void 0&&wo.SC_DISABLE_SPEEDY!==""&&wo.SC_DISABLE_SPEEDY!=="false"&&wo.SC_DISABLE_SPEEDY),CF={},QE=Object.freeze([]),sy=Object.freeze({});function b9(i,t,e){return e===void 0&&(e=sy),i.theme!==e.theme&&i.theme||t||e.theme}var S9=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),wF=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,RF=/(^-|-$)/g;function HR(i){return i.replace(wF,"-").replace(RF,"")}var LF=/(a)(d)/gi,AS=52,zR=function(i){return String.fromCharCode(i+(i>25?39:97))};function d5(i){var t,e="";for(t=Math.abs(i);t>AS;t=t/AS|0)e=zR(t%AS)+e;return(zR(t%AS)+e).replace(LF,"$1-$2")}var IT,E9=5381,Q1=function(i,t){for(var e=t.length;e;)i=33*i^t.charCodeAt(--e);return i},M9=function(i){return Q1(E9,i)};function _w(i){return d5(M9(i)>>>0)}function DF(i){return i.displayName||i.name||"Component"}function UT(i){return typeof i=="string"&&!0}var T9=typeof Symbol=="function"&&Symbol.for,C9=T9?Symbol.for("react.memo"):60115,BF=T9?Symbol.for("react.forward_ref"):60112,OF={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},NF={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},w9={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},IF=((IT={})[BF]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},IT[C9]=w9,IT);function GR(i){return("type"in(t=i)&&t.type.$$typeof)===C9?w9:"$$typeof"in i?IF[i.$$typeof]:OF;var t}var UF=Object.defineProperty,PF=Object.getOwnPropertyNames,kR=Object.getOwnPropertySymbols,FF=Object.getOwnPropertyDescriptor,HF=Object.getPrototypeOf,VR=Object.prototype;function R9(i,t,e){if(typeof t!="string"){if(VR){var n=HF(t);n&&n!==VR&&R9(i,n,e)}var s=PF(t);kR&&(s=s.concat(kR(t)));for(var r=GR(i),a=GR(t),l=0;l<s.length;++l){var u=s[l];if(!(u in NF||e&&e[u]||a&&u in a||r&&u in r)){var f=FF(t,u);try{UF(i,u,f)}catch{}}}}return i}function Ug(i){return typeof i=="function"}function Aw(i){return typeof i=="object"&&"styledComponentId"in i}function Rm(i,t){return i&&t?"".concat(i," ").concat(t):i||t||""}function v3(i,t){if(i.length===0)return"";for(var e=i[0],n=1;n<i.length;n++)e+=i[n];return e}function X_(i){return i!==null&&typeof i=="object"&&i.constructor.name===Object.name&&!("props"in i&&i.$$typeof)}function p5(i,t,e){if(e===void 0&&(e=!1),!e&&!X_(i)&&!Array.isArray(i))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)i[n]=p5(i[n],t[n]);else if(X_(t))for(var n in t)i[n]=p5(i[n],t[n]);return i}function xw(i,t){Object.defineProperty(i,"toString",{value:t})}function Jd(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(i," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var zF=function(){function i(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return i.prototype.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},i.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,s=n.length,r=s;t>=r;)if((r<<=1)<0)throw Jd(16,"".concat(t));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var a=s;a<r;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(t+1),u=(a=0,e.length);a<u;a++)this.tag.insertRule(l,e[a])&&(this.groupSizes[t]++,l++)},i.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),s=n+e;this.groupSizes[t]=0;for(var r=n;r<s;r++)this.tag.deleteRule(n)}},i.prototype.getGroup=function(t){var e="";if(t>=this.length||this.groupSizes[t]===0)return e;for(var n=this.groupSizes[t],s=this.indexOfGroup(t),r=s+n,a=s;a<r;a++)e+="".concat(this.tag.getRule(a)).concat(yw);return e},i}(),L4=new Map,y3=new Map,D4=1,xS=function(i){if(L4.has(i))return L4.get(i);for(;y3.has(D4);)D4++;var t=D4++;return L4.set(i,t),y3.set(t,i),t},GF=function(i,t){D4=t+1,L4.set(i,t),y3.set(t,i)},kF="style[".concat(iy,"][").concat(x9,'="').concat(VE,'"]'),VF=new RegExp("^".concat(iy,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),QF=function(i,t,e){for(var n,s=e.split(","),r=0,a=s.length;r<a;r++)(n=s[r])&&i.registerName(t,n)},XF=function(i,t){for(var e,n=((e=t.textContent)!==null&&e!==void 0?e:"").split(yw),s=[],r=0,a=n.length;r<a;r++){var l=n[r].trim();if(l){var u=l.match(VF);if(u){var f=0|parseInt(u[1],10),m=u[2];f!==0&&(GF(m,f),QF(i,m,u[3]),i.getTag().insertRules(f,s)),s.length=0}else s.push(l)}}},QR=function(i){for(var t=document.querySelectorAll(kF),e=0,n=t.length;e<n;e++){var s=t[e];s&&s.getAttribute(iy)!==A9&&(XF(i,s),s.parentNode&&s.parentNode.removeChild(s))}};function jF(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var L9=function(i){var t=document.head,e=i||t,n=document.createElement("style"),s=function(l){var u=Array.from(l.querySelectorAll("style[".concat(iy,"]")));return u[u.length-1]}(e),r=s!==void 0?s.nextSibling:null;n.setAttribute(iy,A9),n.setAttribute(x9,VE);var a=jF();return a&&n.setAttribute("nonce",a),e.insertBefore(n,r),n},qF=function(){function i(t){this.element=L9(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,s=0,r=n.length;s<r;s++){var a=n[s];if(a.ownerNode===e)return a}throw Jd(17)}(this.element),this.length=0}return i.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch{return!1}},i.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},i.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},i}(),YF=function(){function i(t){this.element=L9(t),this.nodes=this.element.childNodes,this.length=0}return i.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},i.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},i.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},i}(),WF=function(){function i(t){this.rules=[],this.length=0}return i.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},i.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},i.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},i}(),XR=g3,KF={isServer:!g3,useCSSOMInjection:!TF},_3=function(){function i(t,e,n){t===void 0&&(t=sy),e===void 0&&(e={});var s=this;this.options=dr(dr({},KF),t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&g3&&XR&&(XR=!1,QR(this)),xw(this,function(){return function(r){for(var a=r.getTag(),l=a.length,u="",f=function(g){var v=function(S){return y3.get(S)}(g);if(v===void 0)return"continue";var _=r.names.get(v),b=a.getGroup(g);if(_===void 0||!_.size||b.length===0)return"continue";var C="".concat(iy,".g").concat(g,'[id="').concat(v,'"]'),T="";_!==void 0&&_.forEach(function(S){S.length>0&&(T+="".concat(S,","))}),u+="".concat(b).concat(C,'{content:"').concat(T,'"}').concat(yw)},m=0;m<l;m++)f(m);return u}(s)})}return i.registerId=function(t){return xS(t)},i.prototype.rehydrate=function(){!this.server&&g3&&QR(this)},i.prototype.reconstructWithOptions=function(t,e){return e===void 0&&(e=!0),new i(dr(dr({},this.options),t),this.gs,e&&this.names||void 0)},i.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},i.prototype.getTag=function(){return this.tag||(this.tag=(t=function(e){var n=e.useCSSOMInjection,s=e.target;return e.isServer?new WF(s):n?new qF(s):new YF(s)}(this.options),new zF(t)));var t},i.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},i.prototype.registerName=function(t,e){if(xS(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},i.prototype.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(xS(t),n)},i.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},i.prototype.clearRules=function(t){this.getTag().clearGroup(xS(t)),this.clearNames(t)},i.prototype.clearTag=function(){this.tag=void 0},i}(),JF=/&/g,ZF=/^\s*\/\/.*$/gm;function D9(i,t){return i.map(function(e){return e.type==="rule"&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(e.children)&&e.type!=="@keyframes"&&(e.children=D9(e.children,t)),e})}function $F(i){var t,e,n,s=sy,r=s.options,a=r===void 0?sy:r,l=s.plugins,u=l===void 0?QE:l,f=function(v,_,b){return b.startsWith(e)&&b.endsWith(e)&&b.replaceAll(e,"").length>0?".".concat(t):v},m=u.slice();m.push(function(v){v.type===HE&&v.value.includes("&")&&(v.props[0]=v.props[0].replace(JF,e).replace(n,f))}),a.prefix&&m.push(EF),m.push(xF);var g=function(v,_,b,C){_===void 0&&(_=""),b===void 0&&(b=""),C===void 0&&(C="&"),t=C,e=_,n=new RegExp("\\".concat(e,"\\b"),"g");var T=v.replace(ZF,""),S=_F(b||_?"".concat(b," ").concat(_," { ").concat(T," }"):T);a.namespace&&(S=D9(S,a.namespace));var R=[];return m3(S,bF(m.concat(SF(function(B){return R.push(B)})))),R};return g.hash=u.length?u.reduce(function(v,_){return _.name||Jd(15),Q1(v,_.name)},E9).toString():"",g}var tH=new _3,m5=$F(),B9=Ba.createContext({shouldForwardProp:void 0,styleSheet:tH,stylis:m5});B9.Consumer;Ba.createContext(void 0);function g5(){return ut.useContext(B9)}var O9=function(){function i(t,e){var n=this;this.inject=function(s,r){r===void 0&&(r=m5);var a=n.name+r.hash;s.hasNameForId(n.id,a)||s.insertRules(n.id,a,r(n.rules,a,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,xw(this,function(){throw Jd(12,String(n.name))})}return i.prototype.getName=function(t){return t===void 0&&(t=m5),this.name+t.hash},i}(),eH=function(i){return i>="A"&&i<="Z"};function jR(i){for(var t="",e=0;e<i.length;e++){var n=i[e];if(e===1&&n==="-"&&i[0]==="-")return i;eH(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var N9=function(i){return i==null||i===!1||i===""},I9=function(i){var t,e,n=[];for(var s in i){var r=i[s];i.hasOwnProperty(s)&&!N9(r)&&(Array.isArray(r)&&r.isCss||Ug(r)?n.push("".concat(jR(s),":"),r,";"):X_(r)?n.push.apply(n,ty(ty(["".concat(s," {")],I9(r),!1),["}"],!1)):n.push("".concat(jR(s),": ").concat((t=s,(e=r)==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||t in MF||t.startsWith("--")?String(e).trim():"".concat(e,"px")),";")))}return n};function Yd(i,t,e,n){if(N9(i))return[];if(Aw(i))return[".".concat(i.styledComponentId)];if(Ug(i)){if(!Ug(r=i)||r.prototype&&r.prototype.isReactComponent||!t)return[i];var s=i(t);return Yd(s,t,e,n)}var r;return i instanceof O9?e?(i.inject(e,n),[i.getName(n)]):[i]:X_(i)?I9(i):Array.isArray(i)?Array.prototype.concat.apply(QE,i.map(function(a){return Yd(a,t,e,n)})):[i.toString()]}function U9(i){for(var t=0;t<i.length;t+=1){var e=i[t];if(Ug(e)&&!Aw(e))return!1}return!0}var nH=M9(VE),iH=function(){function i(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&U9(t),this.componentId=e,this.baseHash=Q1(nH,e),this.baseStyle=n,_3.registerId(e)}return i.prototype.generateAndInjectStyles=function(t,e,n){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))s=Rm(s,this.staticRulesId);else{var r=v3(Yd(this.rules,t,e,n)),a=d5(Q1(this.baseHash,r)>>>0);if(!e.hasNameForId(this.componentId,a)){var l=n(r,".".concat(a),void 0,this.componentId);e.insertRules(this.componentId,a,l)}s=Rm(s,a),this.staticRulesId=a}else{for(var u=Q1(this.baseHash,n.hash),f="",m=0;m<this.rules.length;m++){var g=this.rules[m];if(typeof g=="string")f+=g;else if(g){var v=v3(Yd(g,t,e,n));u=Q1(u,v+m),f+=v}}if(f){var _=d5(u>>>0);e.hasNameForId(this.componentId,_)||e.insertRules(this.componentId,_,n(f,".".concat(_),void 0,this.componentId)),s=Rm(s,_)}}return s},i}(),ry=Ba.createContext(void 0);ry.Consumer;function Mx(){var i=ut.useContext(ry);if(!i)throw Jd(18);return i}function sH(i){var t=Ba.useContext(ry),e=ut.useMemo(function(){return function(n,s){if(!n)throw Jd(14);if(Ug(n)){var r=n(s);return r}if(Array.isArray(n)||typeof n!="object")throw Jd(8);return s?dr(dr({},s),n):n}(i.theme,t)},[i.theme,t]);return i.children?Ba.createElement(ry.Provider,{value:e},i.children):null}var PT={};function rH(i,t,e){var n=Aw(i),s=i,r=!UT(i),a=t.attrs,l=a===void 0?QE:a,u=t.componentId,f=u===void 0?function(D,N){var I=typeof D!="string"?"sc":HR(D);PT[I]=(PT[I]||0)+1;var F="".concat(I,"-").concat(_w(VE+I+PT[I]));return N?"".concat(N,"-").concat(F):F}(t.displayName,t.parentComponentId):u,m=t.displayName,g=m===void 0?function(D){return UT(D)?"styled.".concat(D):"Styled(".concat(DF(D),")")}(i):m,v=t.displayName&&t.componentId?"".concat(HR(t.displayName),"-").concat(t.componentId):t.componentId||f,_=n&&s.attrs?s.attrs.concat(l).filter(Boolean):l,b=t.shouldForwardProp;if(n&&s.shouldForwardProp){var C=s.shouldForwardProp;if(t.shouldForwardProp){var T=t.shouldForwardProp;b=function(D,N){return C(D,N)&&T(D,N)}}else b=C}var S=new iH(e,v,n?s.componentStyle:void 0);function R(D,N){return function(I,F,z){var U=I.attrs,P=I.componentStyle,X=I.defaultProps,ot=I.foldedComponentIds,it=I.styledComponentId,ct=I.target,dt=Ba.useContext(ry),Q=g5(),tt=I.shouldForwardProp||Q.shouldForwardProp,et=b9(F,dt,X)||sy,_t=function(wt,Bt,Ut){for(var Wt,ve=dr(dr({},Bt),{className:void 0,theme:Ut}),ee=0;ee<wt.length;ee+=1){var Ye=Ug(Wt=wt[ee])?Wt(ve):Wt;for(var we in Ye)ve[we]=we==="className"?Rm(ve[we],Ye[we]):we==="style"?dr(dr({},ve[we]),Ye[we]):Ye[we]}return Bt.className&&(ve.className=Rm(ve.className,Bt.className)),ve}(U,F,et),J=_t.as||ct,at={};for(var xt in _t)_t[xt]===void 0||xt[0]==="$"||xt==="as"||xt==="theme"&&_t.theme===et||(xt==="forwardedAs"?at.as=_t.forwardedAs:tt&&!tt(xt,J)||(at[xt]=_t[xt]));var Et=function(wt,Bt){var Ut=g5(),Wt=wt.generateAndInjectStyles(Bt,Ut.styleSheet,Ut.stylis);return Wt}(P,_t),lt=Rm(ot,it);return Et&&(lt+=" "+Et),_t.className&&(lt+=" "+_t.className),at[UT(J)&&!S9.has(J)?"class":"className"]=lt,z&&(at.ref=z),ut.createElement(J,at)}(B,D,N)}R.displayName=g;var B=Ba.forwardRef(R);return B.attrs=_,B.componentStyle=S,B.displayName=g,B.shouldForwardProp=b,B.foldedComponentIds=n?Rm(s.foldedComponentIds,s.styledComponentId):"",B.styledComponentId=v,B.target=n?s.target:i,Object.defineProperty(B,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(D){this._foldedDefaultProps=n?function(N){for(var I=[],F=1;F<arguments.length;F++)I[F-1]=arguments[F];for(var z=0,U=I;z<U.length;z++)p5(N,U[z],!0);return N}({},s.defaultProps,D):D}}),xw(B,function(){return".".concat(B.styledComponentId)}),r&&R9(B,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),B}function qR(i,t){for(var e=[i[0]],n=0,s=t.length;n<s;n+=1)e.push(t[n],i[n+1]);return e}var YR=function(i){return Object.assign(i,{isCss:!0})};function j_(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Ug(i)||X_(i))return YR(Yd(qR(QE,ty([i],t,!0))));var n=i;return t.length===0&&n.length===1&&typeof n[0]=="string"?Yd(n):YR(Yd(qR(n,t)))}function v5(i,t,e){if(e===void 0&&(e=sy),!t)throw Jd(1,t);var n=function(s){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return i(t,e,j_.apply(void 0,ty([s],r,!1)))};return n.attrs=function(s){return v5(i,t,dr(dr({},e),{attrs:Array.prototype.concat(e.attrs,s).filter(Boolean)}))},n.withConfig=function(s){return v5(i,t,dr(dr({},e),s))},n}var P9=function(i){return v5(rH,i)},me=P9;S9.forEach(function(i){me[i]=P9(i)});var aH=function(){function i(t,e){this.rules=t,this.componentId=e,this.isStatic=U9(t),_3.registerId(this.componentId+1)}return i.prototype.createStyles=function(t,e,n,s){var r=s(v3(Yd(this.rules,e,n,s)),""),a=this.componentId+t;n.insertRules(a,a,r)},i.prototype.removeStyles=function(t,e){e.clearRules(this.componentId+t)},i.prototype.renderStyles=function(t,e,n,s){t>2&&_3.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,s)},i}();function oH(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=j_.apply(void 0,ty([i],t,!1)),s="sc-global-".concat(_w(JSON.stringify(n))),r=new aH(n,s),a=function(u){var f=g5(),m=Ba.useContext(ry),g=Ba.useRef(f.styleSheet.allocateGSInstance(s)).current;return f.styleSheet.server&&l(g,u,f.styleSheet,m,f.stylis),Ba.useLayoutEffect(function(){if(!f.styleSheet.server)return l(g,u,f.styleSheet,m,f.stylis),function(){return r.removeStyles(g,f.styleSheet)}},[g,u,f.styleSheet,m,f.stylis]),null};function l(u,f,m,g,v){if(r.isStatic)r.renderStyles(u,CF,m,v);else{var _=dr(dr({},f),{theme:b9(f,g,a.defaultProps)});r.renderStyles(u,_,m,v)}}return Ba.memo(a)}function Ay(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=v3(j_.apply(void 0,ty([i],t,!1))),s=_w(n);return new O9(s,n)}const lH=Ay`
    from {
      text-shadow: 0.5px 0 0 #ea36af, -1px 0 0 #75fa69;
    }
    to {
      text-shadow: 1px 0.5px 1px #ea36af, -0.5px -0.5px 1px #75fa69;
    }
`,cH=oH`
  :root {
    --white-color: #F8F8FF;
  }

  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    animation-duration: 0.01s;
    animation-name: ${lH};
    animation-iteration-count: infinite;
    animation-direction: alternate;
  }

  html {
    cursor: url("cursor/Arrow1.cur"), auto;
  }

  html, body {
    user-select: none; 
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: ${({theme:i})=>i.fontFamily};
    letter-spacing: 0.1em;
    font-size: 16px;
    line-height: 1.5;
    color: ${({theme:i})=>i.pallet.textColor};
    background-color: ${({theme:i})=>i.pallet.mainColor};
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    letter-spacing: -0.5px;
  }

  img, picture, video, svg {
    display: block;
    max-width: 100%;
  }

  canvas {4
    min-width: 100vw;
    min-height: 100vh;
  }

  input, button, textarea, select {
    font: inherit;
  }

  input:hover, textarea:hover {
    caret-color: ${({theme:i})=>i.pallet.textColor};
    cursor: url("cursor/Win95ZBlinkCur.cur"), auto;
  }

  button {
    background: none;
    border: none;
  }

  a {
    text-decoration: none;
    color: inherit;
  }
`,uH=me.div`
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;

  &::before {
    content: "";
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.1),
      rgba(0, 0, 0, 0.1) 1px,
      transparent 2px,
      transparent 4px
    );
    pointer-events: none;
    mix-blend-mode: overlay;
  }

  &::after {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
      ellipse at center,
      rgba(0, 0, 0, 0) 60%,
      rgba(0, 0, 0, 0.4) 100%
    );
    pointer-events: none;
    mix-blend-mode: multiply;
  }
`,hH=me.div`
  opacity: ${({bootDone:i})=>i?1:0};
  transition: opacity 2s ease-in-out;
  pointerevents: ${({bootDone:i})=>i?"auto":"none"};
`;var FT={exports:{}},HT={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WR;function fH(){if(WR)return HT;WR=1;var i=e0();function t(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var e=typeof Object.is=="function"?Object.is:t,n=i.useSyncExternalStore,s=i.useRef,r=i.useEffect,a=i.useMemo,l=i.useDebugValue;return HT.useSyncExternalStoreWithSelector=function(u,f,m,g,v){var _=s(null);if(_.current===null){var b={hasValue:!1,value:null};_.current=b}else b=_.current;_=a(function(){function T(N){if(!S){if(S=!0,R=N,N=g(N),v!==void 0&&b.hasValue){var I=b.value;if(v(I,N))return B=I}return B=N}if(I=B,e(R,N))return I;var F=g(N);return v!==void 0&&v(I,F)?(R=N,I):(R=N,B=F)}var S=!1,R,B,D=m===void 0?null:m;return[function(){return T(f())},D===null?void 0:function(){return T(D())}]},[f,m,g,v]);var C=n(u,_[0],_[1]);return r(function(){b.hasValue=!0,b.value=C},[C]),l(C),C},HT}var KR;function dH(){return KR||(KR=1,FT.exports=fH()),FT.exports}var pH=dH();function mH(i){i()}function gH(){let i=null,t=null;return{clear(){i=null,t=null},notify(){mH(()=>{let e=i;for(;e;)e.callback(),e=e.next})},get(){const e=[];let n=i;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let n=!0;const s=t={callback:e,next:null,prev:t};return s.prev?s.prev.next=s:i=s,function(){!n||i===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:i=s.next)}}}}var JR={notify(){},get:()=>[]};function vH(i,t){let e,n=JR,s=0,r=!1;function a(C){m();const T=n.subscribe(C);let S=!1;return()=>{S||(S=!0,T(),g())}}function l(){n.notify()}function u(){b.onStateChange&&b.onStateChange()}function f(){return r}function m(){s++,e||(e=i.subscribe(u),n=gH())}function g(){s--,e&&s===0&&(e(),e=void 0,n.clear(),n=JR)}function v(){r||(r=!0,m())}function _(){r&&(r=!1,g())}const b={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:f,trySubscribe:v,tryUnsubscribe:_,getListeners:()=>n};return b}var yH=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_H=yH(),AH=()=>typeof navigator<"u"&&navigator.product==="ReactNative",xH=AH(),bH=()=>_H||xH?ut.useLayoutEffect:ut.useEffect,SH=bH(),zT=Symbol.for("react-redux-context"),GT=typeof globalThis<"u"?globalThis:{};function EH(){if(!ut.createContext)return{};const i=GT[zT]??(GT[zT]=new Map);let t=i.get(ut.createContext);return t||(t=ut.createContext(null),i.set(ut.createContext,t)),t}var Zd=EH();function MH(i){const{children:t,context:e,serverState:n,store:s}=i,r=ut.useMemo(()=>{const u=vH(s);return{store:s,subscription:u,getServerState:n?()=>n:void 0}},[s,n]),a=ut.useMemo(()=>s.getState(),[s]);SH(()=>{const{subscription:u}=r;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==s.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[r,a]);const l=e||Zd;return ut.createElement(l.Provider,{value:r},t)}var TH=MH;function bw(i=Zd){return function(){return ut.useContext(i)}}var F9=bw();function H9(i=Zd){const t=i===Zd?F9:bw(i),e=()=>{const{store:n}=t();return n};return Object.assign(e,{withTypes:()=>e}),e}var z9=H9();function CH(i=Zd){const t=i===Zd?z9:H9(i),e=()=>t().dispatch;return Object.assign(e,{withTypes:()=>e}),e}var wH=CH(),RH=(i,t)=>i===t;function LH(i=Zd){const t=i===Zd?F9:bw(i),e=(n,s={})=>{const{equalityFn:r=RH}=typeof s=="function"?{equalityFn:s}:s,a=t(),{store:l,subscription:u,getServerState:f}=a;ut.useRef(!0);const m=ut.useCallback({[n.name](v){return n(v)}}[n.name],[n]),g=pH.useSyncExternalStoreWithSelector(u.addNestedSub,l.getState,f||l.getState,m,r);return ut.useDebugValue(g),g};return Object.assign(e,{withTypes:()=>e}),e}var DH=LH();const xy=wH.withTypes(),XE=DH.withTypes();z9.withTypes();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const n0="176",BH={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},OH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},G9=0,y5=1,k9=2,NH=3,V9=0,jE=1,D_=2,lc=3,Lc=0,qs=1,La=2,sa=0,Og=1,_5=2,A5=3,x5=4,Q9=5,md=100,X9=101,j9=102,q9=103,Y9=104,W9=200,K9=201,J9=202,Z9=203,A3=204,x3=205,$9=206,tB=207,eB=208,nB=209,iB=210,sB=211,rB=212,aB=213,oB=214,b3=0,S3=1,E3=2,Pg=3,M3=4,T3=5,C3=6,w3=7,Tx=0,lB=1,cB=2,Rc=0,uB=1,hB=2,fB=3,Sw=4,dB=5,pB=6,mB=7,b5="attached",gB="detached",qE=300,sf=301,$d=302,q_=303,Y_=304,by=306,tp=1e3,Ho=1001,ay=1002,os=1003,YE=1004,IH=1004,Lm=1005,UH=1005,Ni=1006,W1=1007,PH=1007,Tl=1008,FH=1008,Ws=1009,Ew=1010,Mw=1011,oy=1012,WE=1013,Fu=1014,Oa=1015,i0=1016,KE=1017,JE=1018,Fg=1020,Tw=35902,Cw=1021,ww=1022,ea=1023,ly=1026,Hg=1027,ZE=1028,Cx=1029,Rw=1030,$E=1031,HH=1032,tM=1033,B_=33776,O_=33777,N_=33778,I_=33779,R3=35840,L3=35841,D3=35842,B3=35843,O3=36196,N3=37492,I3=37496,U3=37808,P3=37809,F3=37810,H3=37811,z3=37812,G3=37813,k3=37814,V3=37815,Q3=37816,X3=37817,j3=37818,q3=37819,Y3=37820,W3=37821,U_=36492,K3=36494,J3=36495,Lw=36283,Z3=36284,$3=36285,tE=36286,vB=2200,yB=2201,_B=2202,cy=2300,uy=2301,B4=2302,Dm=2400,Bm=2401,W_=2402,eM=2500,Dw=2501,AB=0,Bw=1,eE=2,ap=3200,xB=3201,zH=3202,GH=3203,op=0,bB=1,Ec="",Kn="srgb",Hu="srgb-linear",K_="linear",fi="srgb",kH=0,ym=7680,VH=7681,QH=7682,XH=7683,jH=34055,qH=34056,YH=5386,WH=512,KH=513,JH=514,ZH=515,$H=516,tz=517,ez=518,S5=519,SB=512,EB=513,MB=514,Ow=515,TB=516,CB=517,wB=518,RB=519,J_=35044,nz=35048,iz=35040,sz=35045,rz=35049,az=35041,oz=35046,lz=35050,cz=35042,uz="100",E5="300 es",Cl=2e3,Z_=2001,hz={COMPUTE:"compute",RENDER:"render"},fz={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},dz={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};class qo{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){const n=this._listeners;if(n===void 0)return;const s=n[t];if(s!==void 0){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const n=e[t.type];if(n!==void 0){t.target=this;const s=n.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,t);t.target=null}}}const Xr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ZR=1234567;const Ng=Math.PI/180,hy=180/Math.PI;function Go(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Xr[i&255]+Xr[i>>8&255]+Xr[i>>16&255]+Xr[i>>24&255]+"-"+Xr[t&255]+Xr[t>>8&255]+"-"+Xr[t>>16&15|64]+Xr[t>>24&255]+"-"+Xr[e&63|128]+Xr[e>>8&255]+"-"+Xr[e>>16&255]+Xr[e>>24&255]+Xr[n&255]+Xr[n>>8&255]+Xr[n>>16&255]+Xr[n>>24&255]).toLowerCase()}function nn(i,t,e){return Math.max(t,Math.min(e,i))}function Nw(i,t){return(i%t+t)%t}function pz(i,t,e,n,s){return n+(i-t)*(s-n)/(e-t)}function mz(i,t,e){return i!==t?(e-i)/(t-i):0}function P_(i,t,e){return(1-e)*i+e*t}function gz(i,t,e,n){return P_(i,t,1-Math.exp(-e*n))}function vz(i,t=1){return t-Math.abs(Nw(i,t*2)-t)}function yz(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*(3-2*i))}function _z(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*i*(i*(i*6-15)+10))}function Az(i,t){return i+Math.floor(Math.random()*(t-i+1))}function xz(i,t){return i+Math.random()*(t-i)}function bz(i){return i*(.5-Math.random())}function Sz(i){i!==void 0&&(ZR=i);let t=ZR+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Ez(i){return i*Ng}function Mz(i){return i*hy}function Tz(i){return(i&i-1)===0&&i!==0}function Cz(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function wz(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Rz(i,t,e,n,s){const r=Math.cos,a=Math.sin,l=r(e/2),u=a(e/2),f=r((t+n)/2),m=a((t+n)/2),g=r((t-n)/2),v=a((t-n)/2),_=r((n-t)/2),b=a((n-t)/2);switch(s){case"XYX":i.set(l*m,u*g,u*v,l*f);break;case"YZY":i.set(u*v,l*m,u*g,l*f);break;case"ZXZ":i.set(u*g,u*v,l*m,l*f);break;case"XZX":i.set(l*m,u*b,u*_,l*f);break;case"YXY":i.set(u*_,l*m,u*b,l*f);break;case"ZYZ":i.set(u*b,u*_,l*m,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Da(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function cn(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const $_={DEG2RAD:Ng,RAD2DEG:hy,generateUUID:Go,clamp:nn,euclideanModulo:Nw,mapLinear:pz,inverseLerp:mz,lerp:P_,damp:gz,pingpong:vz,smoothstep:yz,smootherstep:_z,randInt:Az,randFloat:xz,randFloatSpread:bz,seededRandom:Sz,degToRad:Ez,radToDeg:Mz,isPowerOfTwo:Tz,ceilPowerOfTwo:Cz,floorPowerOfTwo:wz,setQuaternionFromProperEuler:Rz,normalize:cn,denormalize:Da};class Pt{constructor(t=0,e=0){Pt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6],this.y=s[1]*e+s[4]*n+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=nn(this.x,t.x,e.x),this.y=nn(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=nn(this.x,t,e),this.y=nn(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(nn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),s=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*s+t.x,this.y=r*s+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class on{constructor(t,e,n,s,r,a,l,u,f){on.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,s,r,a,l,u,f)}set(t,e,n,s,r,a,l,u,f){const m=this.elements;return m[0]=t,m[1]=s,m[2]=l,m[3]=e,m[4]=r,m[5]=u,m[6]=n,m[7]=a,m[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,r=this.elements,a=n[0],l=n[3],u=n[6],f=n[1],m=n[4],g=n[7],v=n[2],_=n[5],b=n[8],C=s[0],T=s[3],S=s[6],R=s[1],B=s[4],D=s[7],N=s[2],I=s[5],F=s[8];return r[0]=a*C+l*R+u*N,r[3]=a*T+l*B+u*I,r[6]=a*S+l*D+u*F,r[1]=f*C+m*R+g*N,r[4]=f*T+m*B+g*I,r[7]=f*S+m*D+g*F,r[2]=v*C+_*R+b*N,r[5]=v*T+_*B+b*I,r[8]=v*S+_*D+b*F,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],l=t[5],u=t[6],f=t[7],m=t[8];return e*a*m-e*l*f-n*r*m+n*l*u+s*r*f-s*a*u}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],l=t[5],u=t[6],f=t[7],m=t[8],g=m*a-l*f,v=l*u-m*r,_=f*r-a*u,b=e*g+n*v+s*_;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const C=1/b;return t[0]=g*C,t[1]=(s*f-m*n)*C,t[2]=(l*n-s*a)*C,t[3]=v*C,t[4]=(m*e-s*u)*C,t[5]=(s*r-l*e)*C,t[6]=_*C,t[7]=(n*u-f*e)*C,t[8]=(a*e-n*r)*C,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,s,r,a,l){const u=Math.cos(r),f=Math.sin(r);return this.set(n*u,n*f,-n*(u*a+f*l)+a+t,-s*f,s*u,-s*(-f*a+u*l)+l+e,0,0,1),this}scale(t,e){return this.premultiply(kT.makeScale(t,e)),this}rotate(t){return this.premultiply(kT.makeRotation(-t)),this}translate(t,e){return this.premultiply(kT.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<9;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const kT=new on;function LB(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}const Lz={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function X1(i,t){return new Lz[i](t)}function tA(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function DB(){const i=tA("canvas");return i.style.display="block",i}const $R={};function O4(i){i in $R||($R[i]=!0,console.warn(i))}function Dz(i,t,e){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,e);break;default:n()}}setTimeout(r,e)})}function Bz(i){const t=i.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function Oz(i){const t=i.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const t6=new on().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),e6=new on().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Nz(){const i={enabled:!0,workingColorSpace:Hu,spaces:{},convert:function(s,r,a){return this.enabled===!1||r===a||!r||!a||(this.spaces[r].transfer===fi&&(s.r=Jh(s.r),s.g=Jh(s.g),s.b=Jh(s.b)),this.spaces[r].primaries!==this.spaces[a].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===fi&&(s.r=K1(s.r),s.g=K1(s.g),s.b=K1(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Ec?K_:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,a){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Hu]:{primaries:t,whitePoint:n,transfer:K_,toXYZ:t6,fromXYZ:e6,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Kn},outputColorSpaceConfig:{drawingBufferColorSpace:Kn}},[Kn]:{primaries:t,whitePoint:n,transfer:fi,toXYZ:t6,fromXYZ:e6,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Kn}}}),i}const Pn=Nz();function Jh(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function K1(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let d1;class BB{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{d1===void 0&&(d1=tA("canvas")),d1.width=t.width,d1.height=t.height;const s=d1.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),n=d1}return n.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=tA("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const s=n.getImageData(0,0,t.width,t.height),r=s.data;for(let a=0;a<r.length;a++)r[a]=Jh(r[a]/255)*255;return n.putImageData(s,0,0),e}else if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(Jh(e[n]/255)*255):e[n]=Jh(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Iz=0;class Xd{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Iz++}),this.uuid=Go(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let a=0,l=s.length;a<l;a++)s[a].isDataTexture?r.push(VT(s[a].image)):r.push(VT(s[a]))}else r=VT(s);n.url=r}return e||(t.images[this.uuid]=n),n}}function VT(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?BB.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Uz=0;class wi extends qo{constructor(t=wi.DEFAULT_IMAGE,e=wi.DEFAULT_MAPPING,n=Ho,s=Ho,r=Ni,a=Tl,l=ea,u=Ws,f=wi.DEFAULT_ANISOTROPY,m=Ec){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Uz++}),this.uuid=Go(),this.name="",this.source=new Xd(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Pt(0,0),this.repeat=new Pt(1,1),this.center=new Pt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new on,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isTextureArray=t.isTextureArray,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==qE)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case tp:t.x=t.x-Math.floor(t.x);break;case Ho:t.x=t.x<0?0:1;break;case ay:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case tp:t.y=t.y-Math.floor(t.y);break;case Ho:t.y=t.y<0?0:1;break;case ay:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}wi.DEFAULT_IMAGE=null;wi.DEFAULT_MAPPING=qE;wi.DEFAULT_ANISOTROPY=1;class Bn{constructor(t=0,e=0,n=0,s=1){Bn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,s){return this.x=t,this.y=e,this.z=n,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,s=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*s+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*s+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*s+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*s+a[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,s,r;const u=t.elements,f=u[0],m=u[4],g=u[8],v=u[1],_=u[5],b=u[9],C=u[2],T=u[6],S=u[10];if(Math.abs(m-v)<.01&&Math.abs(g-C)<.01&&Math.abs(b-T)<.01){if(Math.abs(m+v)<.1&&Math.abs(g+C)<.1&&Math.abs(b+T)<.1&&Math.abs(f+_+S-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const B=(f+1)/2,D=(_+1)/2,N=(S+1)/2,I=(m+v)/4,F=(g+C)/4,z=(b+T)/4;return B>D&&B>N?B<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(B),s=I/n,r=F/n):D>N?D<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(D),n=I/s,r=z/s):N<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(N),n=F/r,s=z/r),this.set(n,s,r,e),this}let R=Math.sqrt((T-b)*(T-b)+(g-C)*(g-C)+(v-m)*(v-m));return Math.abs(R)<.001&&(R=1),this.x=(T-b)/R,this.y=(g-C)/R,this.z=(v-m)/R,this.w=Math.acos((f+_+S-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=nn(this.x,t.x,e.x),this.y=nn(this.y,t.y,e.y),this.z=nn(this.z,t.z,e.z),this.w=nn(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=nn(this.x,t,e),this.y=nn(this.y,t,e),this.z=nn(this.z,t,e),this.w=nn(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class nM extends qo{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=n.depth?n.depth:1,this.scissor=new Bn(0,0,t,e),this.scissorTest=!1,this.viewport=new Bn(0,0,t,e);const s={width:t,height:e,depth:this.depth};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ni,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},n);const r=new wi(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let l=0;l<a;l++)this.textures[l]=r.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=t,this.textures[s].image.height=e,this.textures[s].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const s=Object.assign({},t.textures[e].image);this.textures[e].source=new Xd(s)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ds extends nM{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class wx extends wi{constructor(t=null,e=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:s},this.magFilter=os,this.minFilter=os,this.wrapR=Ho,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Pz extends Ds{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new wx(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class iM extends wi{constructor(t=null,e=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:s},this.magFilter=os,this.minFilter=os,this.wrapR=Ho,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Fz extends Ds{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new iM(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class ra{constructor(t=0,e=0,n=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=s}static slerpFlat(t,e,n,s,r,a,l){let u=n[s+0],f=n[s+1],m=n[s+2],g=n[s+3];const v=r[a+0],_=r[a+1],b=r[a+2],C=r[a+3];if(l===0){t[e+0]=u,t[e+1]=f,t[e+2]=m,t[e+3]=g;return}if(l===1){t[e+0]=v,t[e+1]=_,t[e+2]=b,t[e+3]=C;return}if(g!==C||u!==v||f!==_||m!==b){let T=1-l;const S=u*v+f*_+m*b+g*C,R=S>=0?1:-1,B=1-S*S;if(B>Number.EPSILON){const N=Math.sqrt(B),I=Math.atan2(N,S*R);T=Math.sin(T*I)/N,l=Math.sin(l*I)/N}const D=l*R;if(u=u*T+v*D,f=f*T+_*D,m=m*T+b*D,g=g*T+C*D,T===1-l){const N=1/Math.sqrt(u*u+f*f+m*m+g*g);u*=N,f*=N,m*=N,g*=N}}t[e]=u,t[e+1]=f,t[e+2]=m,t[e+3]=g}static multiplyQuaternionsFlat(t,e,n,s,r,a){const l=n[s],u=n[s+1],f=n[s+2],m=n[s+3],g=r[a],v=r[a+1],_=r[a+2],b=r[a+3];return t[e]=l*b+m*g+u*_-f*v,t[e+1]=u*b+m*v+f*g-l*_,t[e+2]=f*b+m*_+l*v-u*g,t[e+3]=m*b-l*g-u*v-f*_,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,s){return this._x=t,this._y=e,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,s=t._y,r=t._z,a=t._order,l=Math.cos,u=Math.sin,f=l(n/2),m=l(s/2),g=l(r/2),v=u(n/2),_=u(s/2),b=u(r/2);switch(a){case"XYZ":this._x=v*m*g+f*_*b,this._y=f*_*g-v*m*b,this._z=f*m*b+v*_*g,this._w=f*m*g-v*_*b;break;case"YXZ":this._x=v*m*g+f*_*b,this._y=f*_*g-v*m*b,this._z=f*m*b-v*_*g,this._w=f*m*g+v*_*b;break;case"ZXY":this._x=v*m*g-f*_*b,this._y=f*_*g+v*m*b,this._z=f*m*b+v*_*g,this._w=f*m*g-v*_*b;break;case"ZYX":this._x=v*m*g-f*_*b,this._y=f*_*g+v*m*b,this._z=f*m*b-v*_*g,this._w=f*m*g+v*_*b;break;case"YZX":this._x=v*m*g+f*_*b,this._y=f*_*g+v*m*b,this._z=f*m*b-v*_*g,this._w=f*m*g-v*_*b;break;case"XZY":this._x=v*m*g-f*_*b,this._y=f*_*g-v*m*b,this._z=f*m*b+v*_*g,this._w=f*m*g+v*_*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,s=Math.sin(n);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],s=e[4],r=e[8],a=e[1],l=e[5],u=e[9],f=e[2],m=e[6],g=e[10],v=n+l+g;if(v>0){const _=.5/Math.sqrt(v+1);this._w=.25/_,this._x=(m-u)*_,this._y=(r-f)*_,this._z=(a-s)*_}else if(n>l&&n>g){const _=2*Math.sqrt(1+n-l-g);this._w=(m-u)/_,this._x=.25*_,this._y=(s+a)/_,this._z=(r+f)/_}else if(l>g){const _=2*Math.sqrt(1+l-n-g);this._w=(r-f)/_,this._x=(s+a)/_,this._y=.25*_,this._z=(u+m)/_}else{const _=2*Math.sqrt(1+g-n-l);this._w=(a-s)/_,this._x=(r+f)/_,this._y=(u+m)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(nn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const s=Math.min(1,e/n);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,s=t._y,r=t._z,a=t._w,l=e._x,u=e._y,f=e._z,m=e._w;return this._x=n*m+a*l+s*f-r*u,this._y=s*m+a*u+r*l-n*f,this._z=r*m+a*f+n*u-s*l,this._w=a*m-n*l-s*u-r*f,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,s=this._y,r=this._z,a=this._w;let l=a*t._w+n*t._x+s*t._y+r*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=a,this._x=n,this._y=s,this._z=r,this;const u=1-l*l;if(u<=Number.EPSILON){const _=1-e;return this._w=_*a+e*this._w,this._x=_*n+e*this._x,this._y=_*s+e*this._y,this._z=_*r+e*this._z,this.normalize(),this}const f=Math.sqrt(u),m=Math.atan2(f,l),g=Math.sin((1-e)*m)/f,v=Math.sin(e*m)/f;return this._w=a*g+this._w*v,this._x=n*g+this._x*v,this._y=s*g+this._y*v,this._z=r*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(t),s*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class nt{constructor(t=0,e=0,n=0){nt.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(n6.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(n6.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*s,this.y=r[1]*e+r[4]*n+r[7]*s,this.z=r[2]*e+r[5]*n+r[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,s=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*s+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*s+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*s+r[14])*a,this}applyQuaternion(t){const e=this.x,n=this.y,s=this.z,r=t.x,a=t.y,l=t.z,u=t.w,f=2*(a*s-l*n),m=2*(l*e-r*s),g=2*(r*n-a*e);return this.x=e+u*f+a*g-l*m,this.y=n+u*m+l*f-r*g,this.z=s+u*g+r*m-a*f,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*s,this.y=r[1]*e+r[5]*n+r[9]*s,this.z=r[2]*e+r[6]*n+r[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=nn(this.x,t.x,e.x),this.y=nn(this.y,t.y,e.y),this.z=nn(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=nn(this.x,t,e),this.y=nn(this.y,t,e),this.z=nn(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,s=t.y,r=t.z,a=e.x,l=e.y,u=e.z;return this.x=s*u-r*l,this.y=r*a-n*u,this.z=n*l-s*a,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return QT.copy(this).projectOnVector(t),this.sub(QT)}reflect(t){return this.sub(QT.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(nn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,s=this.z-t.z;return e*e+n*n+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const s=Math.sin(e)*t;return this.x=s*Math.sin(n),this.y=Math.cos(e)*t,this.z=s*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const QT=new nt,n6=new ra;class Br{constructor(t=new nt(1/0,1/0,1/0),e=new nt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(sc.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(sc.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=sc.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const r=n.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let a=0,l=r.count;a<l;a++)t.isMesh===!0?t.getVertexPosition(a,sc):sc.fromBufferAttribute(r,a),sc.applyMatrix4(t.matrixWorld),this.expandByPoint(sc);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),bS.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),bS.copy(n.boundingBox)),bS.applyMatrix4(t.matrixWorld),this.union(bS)}const s=t.children;for(let r=0,a=s.length;r<a;r++)this.expandByObject(s[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,sc),sc.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(X2),SS.subVectors(this.max,X2),p1.subVectors(t.a,X2),m1.subVectors(t.b,X2),g1.subVectors(t.c,X2),nd.subVectors(m1,p1),id.subVectors(g1,m1),im.subVectors(p1,g1);let e=[0,-nd.z,nd.y,0,-id.z,id.y,0,-im.z,im.y,nd.z,0,-nd.x,id.z,0,-id.x,im.z,0,-im.x,-nd.y,nd.x,0,-id.y,id.x,0,-im.y,im.x,0];return!XT(e,p1,m1,g1,SS)||(e=[1,0,0,0,1,0,0,0,1],!XT(e,p1,m1,g1,SS))?!1:(ES.crossVectors(nd,id),e=[ES.x,ES.y,ES.z],XT(e,p1,m1,g1,SS))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,sc).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(sc).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(ch[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ch[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ch[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ch[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ch[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ch[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ch[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ch[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ch),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const ch=[new nt,new nt,new nt,new nt,new nt,new nt,new nt,new nt],sc=new nt,bS=new Br,p1=new nt,m1=new nt,g1=new nt,nd=new nt,id=new nt,im=new nt,X2=new nt,SS=new nt,ES=new nt,sm=new nt;function XT(i,t,e,n,s){for(let r=0,a=i.length-3;r<=a;r+=3){sm.fromArray(i,r);const l=s.x*Math.abs(sm.x)+s.y*Math.abs(sm.y)+s.z*Math.abs(sm.z),u=t.dot(sm),f=e.dot(sm),m=n.dot(sm);if(Math.max(-Math.max(u,f,m),Math.min(u,f,m))>l)return!1}return!0}const Hz=new Br,j2=new nt,jT=new nt;class pr{constructor(t=new nt,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):Hz.setFromPoints(t).getCenter(n);let s=0;for(let r=0,a=t.length;r<a;r++)s=Math.max(s,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;j2.subVectors(t,this.center);const e=j2.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),s=(n-this.radius)*.5;this.center.addScaledVector(j2,s/n),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(jT.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(j2.copy(t.center).add(jT)),this.expandByPoint(j2.copy(t.center).sub(jT))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const uh=new nt,qT=new nt,MS=new nt,sd=new nt,YT=new nt,TS=new nt,WT=new nt;class Sy{constructor(t=new nt,e=new nt(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,uh)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=uh.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(uh.copy(this.origin).addScaledVector(this.direction,e),uh.distanceToSquared(t))}distanceSqToSegment(t,e,n,s){qT.copy(t).add(e).multiplyScalar(.5),MS.copy(e).sub(t).normalize(),sd.copy(this.origin).sub(qT);const r=t.distanceTo(e)*.5,a=-this.direction.dot(MS),l=sd.dot(this.direction),u=-sd.dot(MS),f=sd.lengthSq(),m=Math.abs(1-a*a);let g,v,_,b;if(m>0)if(g=a*u-l,v=a*l-u,b=r*m,g>=0)if(v>=-b)if(v<=b){const C=1/m;g*=C,v*=C,_=g*(g+a*v+2*l)+v*(a*g+v+2*u)+f}else v=r,g=Math.max(0,-(a*v+l)),_=-g*g+v*(v+2*u)+f;else v=-r,g=Math.max(0,-(a*v+l)),_=-g*g+v*(v+2*u)+f;else v<=-b?(g=Math.max(0,-(-a*r+l)),v=g>0?-r:Math.min(Math.max(-r,-u),r),_=-g*g+v*(v+2*u)+f):v<=b?(g=0,v=Math.min(Math.max(-r,-u),r),_=v*(v+2*u)+f):(g=Math.max(0,-(a*r+l)),v=g>0?r:Math.min(Math.max(-r,-u),r),_=-g*g+v*(v+2*u)+f);else v=a>0?-r:r,g=Math.max(0,-(a*v+l)),_=-g*g+v*(v+2*u)+f;return n&&n.copy(this.origin).addScaledVector(this.direction,g),s&&s.copy(qT).addScaledVector(MS,v),_}intersectSphere(t,e){uh.subVectors(t.center,this.origin);const n=uh.dot(this.direction),s=uh.dot(uh)-n*n,r=t.radius*t.radius;if(s>r)return null;const a=Math.sqrt(r-s),l=n-a,u=n+a;return u<0?null:l<0?this.at(u,e):this.at(l,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,s,r,a,l,u;const f=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,v=this.origin;return f>=0?(n=(t.min.x-v.x)*f,s=(t.max.x-v.x)*f):(n=(t.max.x-v.x)*f,s=(t.min.x-v.x)*f),m>=0?(r=(t.min.y-v.y)*m,a=(t.max.y-v.y)*m):(r=(t.max.y-v.y)*m,a=(t.min.y-v.y)*m),n>a||r>s||((r>n||isNaN(n))&&(n=r),(a<s||isNaN(s))&&(s=a),g>=0?(l=(t.min.z-v.z)*g,u=(t.max.z-v.z)*g):(l=(t.max.z-v.z)*g,u=(t.min.z-v.z)*g),n>u||l>s)||((l>n||n!==n)&&(n=l),(u<s||s!==s)&&(s=u),s<0)?null:this.at(n>=0?n:s,e)}intersectsBox(t){return this.intersectBox(t,uh)!==null}intersectTriangle(t,e,n,s,r){YT.subVectors(e,t),TS.subVectors(n,t),WT.crossVectors(YT,TS);let a=this.direction.dot(WT),l;if(a>0){if(s)return null;l=1}else if(a<0)l=-1,a=-a;else return null;sd.subVectors(this.origin,t);const u=l*this.direction.dot(TS.crossVectors(sd,TS));if(u<0)return null;const f=l*this.direction.dot(YT.cross(sd));if(f<0||u+f>a)return null;const m=-l*sd.dot(WT);return m<0?null:this.at(m/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Fe{constructor(t,e,n,s,r,a,l,u,f,m,g,v,_,b,C,T){Fe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,s,r,a,l,u,f,m,g,v,_,b,C,T)}set(t,e,n,s,r,a,l,u,f,m,g,v,_,b,C,T){const S=this.elements;return S[0]=t,S[4]=e,S[8]=n,S[12]=s,S[1]=r,S[5]=a,S[9]=l,S[13]=u,S[2]=f,S[6]=m,S[10]=g,S[14]=v,S[3]=_,S[7]=b,S[11]=C,S[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Fe().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,s=1/v1.setFromMatrixColumn(t,0).length(),r=1/v1.setFromMatrixColumn(t,1).length(),a=1/v1.setFromMatrixColumn(t,2).length();return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,s=t.y,r=t.z,a=Math.cos(n),l=Math.sin(n),u=Math.cos(s),f=Math.sin(s),m=Math.cos(r),g=Math.sin(r);if(t.order==="XYZ"){const v=a*m,_=a*g,b=l*m,C=l*g;e[0]=u*m,e[4]=-u*g,e[8]=f,e[1]=_+b*f,e[5]=v-C*f,e[9]=-l*u,e[2]=C-v*f,e[6]=b+_*f,e[10]=a*u}else if(t.order==="YXZ"){const v=u*m,_=u*g,b=f*m,C=f*g;e[0]=v+C*l,e[4]=b*l-_,e[8]=a*f,e[1]=a*g,e[5]=a*m,e[9]=-l,e[2]=_*l-b,e[6]=C+v*l,e[10]=a*u}else if(t.order==="ZXY"){const v=u*m,_=u*g,b=f*m,C=f*g;e[0]=v-C*l,e[4]=-a*g,e[8]=b+_*l,e[1]=_+b*l,e[5]=a*m,e[9]=C-v*l,e[2]=-a*f,e[6]=l,e[10]=a*u}else if(t.order==="ZYX"){const v=a*m,_=a*g,b=l*m,C=l*g;e[0]=u*m,e[4]=b*f-_,e[8]=v*f+C,e[1]=u*g,e[5]=C*f+v,e[9]=_*f-b,e[2]=-f,e[6]=l*u,e[10]=a*u}else if(t.order==="YZX"){const v=a*u,_=a*f,b=l*u,C=l*f;e[0]=u*m,e[4]=C-v*g,e[8]=b*g+_,e[1]=g,e[5]=a*m,e[9]=-l*m,e[2]=-f*m,e[6]=_*g+b,e[10]=v-C*g}else if(t.order==="XZY"){const v=a*u,_=a*f,b=l*u,C=l*f;e[0]=u*m,e[4]=-g,e[8]=f*m,e[1]=v*g+C,e[5]=a*m,e[9]=_*g-b,e[2]=b*g-_,e[6]=l*m,e[10]=C*g+v}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(zz,t,Gz)}lookAt(t,e,n){const s=this.elements;return Mo.subVectors(t,e),Mo.lengthSq()===0&&(Mo.z=1),Mo.normalize(),rd.crossVectors(n,Mo),rd.lengthSq()===0&&(Math.abs(n.z)===1?Mo.x+=1e-4:Mo.z+=1e-4,Mo.normalize(),rd.crossVectors(n,Mo)),rd.normalize(),CS.crossVectors(Mo,rd),s[0]=rd.x,s[4]=CS.x,s[8]=Mo.x,s[1]=rd.y,s[5]=CS.y,s[9]=Mo.y,s[2]=rd.z,s[6]=CS.z,s[10]=Mo.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,r=this.elements,a=n[0],l=n[4],u=n[8],f=n[12],m=n[1],g=n[5],v=n[9],_=n[13],b=n[2],C=n[6],T=n[10],S=n[14],R=n[3],B=n[7],D=n[11],N=n[15],I=s[0],F=s[4],z=s[8],U=s[12],P=s[1],X=s[5],ot=s[9],it=s[13],ct=s[2],dt=s[6],Q=s[10],tt=s[14],et=s[3],_t=s[7],J=s[11],at=s[15];return r[0]=a*I+l*P+u*ct+f*et,r[4]=a*F+l*X+u*dt+f*_t,r[8]=a*z+l*ot+u*Q+f*J,r[12]=a*U+l*it+u*tt+f*at,r[1]=m*I+g*P+v*ct+_*et,r[5]=m*F+g*X+v*dt+_*_t,r[9]=m*z+g*ot+v*Q+_*J,r[13]=m*U+g*it+v*tt+_*at,r[2]=b*I+C*P+T*ct+S*et,r[6]=b*F+C*X+T*dt+S*_t,r[10]=b*z+C*ot+T*Q+S*J,r[14]=b*U+C*it+T*tt+S*at,r[3]=R*I+B*P+D*ct+N*et,r[7]=R*F+B*X+D*dt+N*_t,r[11]=R*z+B*ot+D*Q+N*J,r[15]=R*U+B*it+D*tt+N*at,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],s=t[8],r=t[12],a=t[1],l=t[5],u=t[9],f=t[13],m=t[2],g=t[6],v=t[10],_=t[14],b=t[3],C=t[7],T=t[11],S=t[15];return b*(+r*u*g-s*f*g-r*l*v+n*f*v+s*l*_-n*u*_)+C*(+e*u*_-e*f*v+r*a*v-s*a*_+s*f*m-r*u*m)+T*(+e*f*g-e*l*_-r*a*g+n*a*_+r*l*m-n*f*m)+S*(-s*l*m-e*u*g+e*l*v+s*a*g-n*a*v+n*u*m)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],l=t[5],u=t[6],f=t[7],m=t[8],g=t[9],v=t[10],_=t[11],b=t[12],C=t[13],T=t[14],S=t[15],R=g*T*f-C*v*f+C*u*_-l*T*_-g*u*S+l*v*S,B=b*v*f-m*T*f-b*u*_+a*T*_+m*u*S-a*v*S,D=m*C*f-b*g*f+b*l*_-a*C*_-m*l*S+a*g*S,N=b*g*u-m*C*u-b*l*v+a*C*v+m*l*T-a*g*T,I=e*R+n*B+s*D+r*N;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/I;return t[0]=R*F,t[1]=(C*v*r-g*T*r-C*s*_+n*T*_+g*s*S-n*v*S)*F,t[2]=(l*T*r-C*u*r+C*s*f-n*T*f-l*s*S+n*u*S)*F,t[3]=(g*u*r-l*v*r-g*s*f+n*v*f+l*s*_-n*u*_)*F,t[4]=B*F,t[5]=(m*T*r-b*v*r+b*s*_-e*T*_-m*s*S+e*v*S)*F,t[6]=(b*u*r-a*T*r-b*s*f+e*T*f+a*s*S-e*u*S)*F,t[7]=(a*v*r-m*u*r+m*s*f-e*v*f-a*s*_+e*u*_)*F,t[8]=D*F,t[9]=(b*g*r-m*C*r-b*n*_+e*C*_+m*n*S-e*g*S)*F,t[10]=(a*C*r-b*l*r+b*n*f-e*C*f-a*n*S+e*l*S)*F,t[11]=(m*l*r-a*g*r-m*n*f+e*g*f+a*n*_-e*l*_)*F,t[12]=N*F,t[13]=(m*C*s-b*g*s+b*n*v-e*C*v-m*n*T+e*g*T)*F,t[14]=(b*l*s-a*C*s-b*n*u+e*C*u+a*n*T-e*l*T)*F,t[15]=(a*g*s-m*l*s+m*n*u-e*g*u-a*n*v+e*l*v)*F,this}scale(t){const e=this.elements,n=t.x,s=t.y,r=t.z;return e[0]*=n,e[4]*=s,e[8]*=r,e[1]*=n,e[5]*=s,e[9]*=r,e[2]*=n,e[6]*=s,e[10]*=r,e[3]*=n,e[7]*=s,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,s))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),s=Math.sin(e),r=1-n,a=t.x,l=t.y,u=t.z,f=r*a,m=r*l;return this.set(f*a+n,f*l-s*u,f*u+s*l,0,f*l+s*u,m*l+n,m*u-s*a,0,f*u-s*l,m*u+s*a,r*u*u+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,s,r,a){return this.set(1,n,r,0,t,1,a,0,e,s,1,0,0,0,0,1),this}compose(t,e,n){const s=this.elements,r=e._x,a=e._y,l=e._z,u=e._w,f=r+r,m=a+a,g=l+l,v=r*f,_=r*m,b=r*g,C=a*m,T=a*g,S=l*g,R=u*f,B=u*m,D=u*g,N=n.x,I=n.y,F=n.z;return s[0]=(1-(C+S))*N,s[1]=(_+D)*N,s[2]=(b-B)*N,s[3]=0,s[4]=(_-D)*I,s[5]=(1-(v+S))*I,s[6]=(T+R)*I,s[7]=0,s[8]=(b+B)*F,s[9]=(T-R)*F,s[10]=(1-(v+C))*F,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,n){const s=this.elements;let r=v1.set(s[0],s[1],s[2]).length();const a=v1.set(s[4],s[5],s[6]).length(),l=v1.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),t.x=s[12],t.y=s[13],t.z=s[14],rc.copy(this);const f=1/r,m=1/a,g=1/l;return rc.elements[0]*=f,rc.elements[1]*=f,rc.elements[2]*=f,rc.elements[4]*=m,rc.elements[5]*=m,rc.elements[6]*=m,rc.elements[8]*=g,rc.elements[9]*=g,rc.elements[10]*=g,e.setFromRotationMatrix(rc),n.x=r,n.y=a,n.z=l,this}makePerspective(t,e,n,s,r,a,l=Cl){const u=this.elements,f=2*r/(e-t),m=2*r/(n-s),g=(e+t)/(e-t),v=(n+s)/(n-s);let _,b;if(l===Cl)_=-(a+r)/(a-r),b=-2*a*r/(a-r);else if(l===Z_)_=-a/(a-r),b=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=f,u[4]=0,u[8]=g,u[12]=0,u[1]=0,u[5]=m,u[9]=v,u[13]=0,u[2]=0,u[6]=0,u[10]=_,u[14]=b,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(t,e,n,s,r,a,l=Cl){const u=this.elements,f=1/(e-t),m=1/(n-s),g=1/(a-r),v=(e+t)*f,_=(n+s)*m;let b,C;if(l===Cl)b=(a+r)*g,C=-2*g;else if(l===Z_)b=r*g,C=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*f,u[4]=0,u[8]=0,u[12]=-v,u[1]=0,u[5]=2*m,u[9]=0,u[13]=-_,u[2]=0,u[6]=0,u[10]=C,u[14]=-b,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<16;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const v1=new nt,rc=new Fe,zz=new nt(0,0,0),Gz=new nt(1,1,1),rd=new nt,CS=new nt,Mo=new nt,i6=new Fe,s6=new ra;class Vo{constructor(t=0,e=0,n=0,s=Vo.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,s=this._order){return this._x=t,this._y=e,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const s=t.elements,r=s[0],a=s[4],l=s[8],u=s[1],f=s[5],m=s[9],g=s[2],v=s[6],_=s[10];switch(e){case"XYZ":this._y=Math.asin(nn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-m,_),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-nn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-g,r),this._z=0);break;case"ZXY":this._x=Math.asin(nn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(u,r));break;case"ZYX":this._y=Math.asin(-nn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,_),this._z=Math.atan2(u,r)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(nn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,f),this._y=Math.atan2(-g,r)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-nn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(l,r)):(this._x=Math.atan2(-m,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return i6.makeRotationFromQuaternion(t),this.setFromRotationMatrix(i6,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return s6.setFromEuler(this),this.setFromQuaternion(s6,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Vo.DEFAULT_ORDER="XYZ";class fy{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let kz=0;const r6=new nt,y1=new ra,hh=new Fe,wS=new nt,q2=new nt,Vz=new nt,Qz=new ra,a6=new nt(1,0,0),o6=new nt(0,1,0),l6=new nt(0,0,1),c6={type:"added"},Xz={type:"removed"},_1={type:"childadded",child:null},KT={type:"childremoved",child:null};class Hn extends qo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:kz++}),this.uuid=Go(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Hn.DEFAULT_UP.clone();const t=new nt,e=new Vo,n=new ra,s=new nt(1,1,1);function r(){n.setFromEuler(e,!1)}function a(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Fe},normalMatrix:{value:new on}}),this.matrix=new Fe,this.matrixWorld=new Fe,this.matrixAutoUpdate=Hn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new fy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return y1.setFromAxisAngle(t,e),this.quaternion.multiply(y1),this}rotateOnWorldAxis(t,e){return y1.setFromAxisAngle(t,e),this.quaternion.premultiply(y1),this}rotateX(t){return this.rotateOnAxis(a6,t)}rotateY(t){return this.rotateOnAxis(o6,t)}rotateZ(t){return this.rotateOnAxis(l6,t)}translateOnAxis(t,e){return r6.copy(t).applyQuaternion(this.quaternion),this.position.add(r6.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(a6,t)}translateY(t){return this.translateOnAxis(o6,t)}translateZ(t){return this.translateOnAxis(l6,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(hh.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?wS.copy(t):wS.set(t,e,n);const s=this.parent;this.updateWorldMatrix(!0,!1),q2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?hh.lookAt(q2,wS,this.up):hh.lookAt(wS,q2,this.up),this.quaternion.setFromRotationMatrix(hh),s&&(hh.extractRotation(s.matrixWorld),y1.setFromRotationMatrix(hh),this.quaternion.premultiply(y1.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(c6),_1.child=t,this.dispatchEvent(_1),_1.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Xz),KT.child=t,this.dispatchEvent(KT),KT.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),hh.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),hh.multiply(t.parent.matrixWorld)),t.applyMatrix4(hh),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(c6),_1.child=t,this.dispatchEvent(_1),_1.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,s=this.children.length;n<s;n++){const a=this.children[n].getObjectByProperty(t,e);if(a!==void 0)return a}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(q2,t,Vz),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(q2,Qz,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),s.instanceInfo=this._instanceInfo.map(l=>({...l})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(t),s.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function r(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(t)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(t.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let f=0,m=u.length;f<m;f++){const g=u[f];r(t.shapes,g)}else r(t.shapes,u)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(r(t.materials,this.material[u]));s.material=l}else s.material=r(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];s.animations.push(r(t.animations,u))}}if(e){const l=a(t.geometries),u=a(t.materials),f=a(t.textures),m=a(t.images),g=a(t.shapes),v=a(t.skeletons),_=a(t.animations),b=a(t.nodes);l.length>0&&(n.geometries=l),u.length>0&&(n.materials=u),f.length>0&&(n.textures=f),m.length>0&&(n.images=m),g.length>0&&(n.shapes=g),v.length>0&&(n.skeletons=v),_.length>0&&(n.animations=_),b.length>0&&(n.nodes=b)}return n.object=s,n;function a(l){const u=[];for(const f in l){const m=l[f];delete m.metadata,u.push(m)}return u}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const s=t.children[n];this.add(s.clone())}return this}}Hn.DEFAULT_UP=new nt(0,1,0);Hn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ac=new nt,fh=new nt,JT=new nt,dh=new nt,A1=new nt,x1=new nt,u6=new nt,ZT=new nt,$T=new nt,t8=new nt,e8=new Bn,n8=new Bn,i8=new Bn;class so{constructor(t=new nt,e=new nt,n=new nt){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,s){s.subVectors(n,e),ac.subVectors(t,e),s.cross(ac);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(t,e,n,s,r){ac.subVectors(s,e),fh.subVectors(n,e),JT.subVectors(t,e);const a=ac.dot(ac),l=ac.dot(fh),u=ac.dot(JT),f=fh.dot(fh),m=fh.dot(JT),g=a*f-l*l;if(g===0)return r.set(0,0,0),null;const v=1/g,_=(f*u-l*m)*v,b=(a*m-l*u)*v;return r.set(1-_-b,b,_)}static containsPoint(t,e,n,s){return this.getBarycoord(t,e,n,s,dh)===null?!1:dh.x>=0&&dh.y>=0&&dh.x+dh.y<=1}static getInterpolation(t,e,n,s,r,a,l,u){return this.getBarycoord(t,e,n,s,dh)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(r,dh.x),u.addScaledVector(a,dh.y),u.addScaledVector(l,dh.z),u)}static getInterpolatedAttribute(t,e,n,s,r,a){return e8.setScalar(0),n8.setScalar(0),i8.setScalar(0),e8.fromBufferAttribute(t,e),n8.fromBufferAttribute(t,n),i8.fromBufferAttribute(t,s),a.setScalar(0),a.addScaledVector(e8,r.x),a.addScaledVector(n8,r.y),a.addScaledVector(i8,r.z),a}static isFrontFacing(t,e,n,s){return ac.subVectors(n,e),fh.subVectors(t,e),ac.cross(fh).dot(s)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,s){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,e,n,s){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ac.subVectors(this.c,this.b),fh.subVectors(this.a,this.b),ac.cross(fh).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return so.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return so.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,s,r){return so.getInterpolation(t,this.a,this.b,this.c,e,n,s,r)}containsPoint(t){return so.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return so.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,s=this.b,r=this.c;let a,l;A1.subVectors(s,n),x1.subVectors(r,n),ZT.subVectors(t,n);const u=A1.dot(ZT),f=x1.dot(ZT);if(u<=0&&f<=0)return e.copy(n);$T.subVectors(t,s);const m=A1.dot($T),g=x1.dot($T);if(m>=0&&g<=m)return e.copy(s);const v=u*g-m*f;if(v<=0&&u>=0&&m<=0)return a=u/(u-m),e.copy(n).addScaledVector(A1,a);t8.subVectors(t,r);const _=A1.dot(t8),b=x1.dot(t8);if(b>=0&&_<=b)return e.copy(r);const C=_*f-u*b;if(C<=0&&f>=0&&b<=0)return l=f/(f-b),e.copy(n).addScaledVector(x1,l);const T=m*b-_*g;if(T<=0&&g-m>=0&&_-b>=0)return u6.subVectors(r,s),l=(g-m)/(g-m+(_-b)),e.copy(s).addScaledVector(u6,l);const S=1/(T+C+v);return a=C*S,l=v*S,e.copy(n).addScaledVector(A1,a).addScaledVector(x1,l)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const OB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ad={h:0,s:0,l:0},RS={h:0,s:0,l:0};function s8(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*6*(2/3-e):i}class ae{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){const s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Kn){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Pn.toWorkingColorSpace(this,e),this}setRGB(t,e,n,s=Pn.workingColorSpace){return this.r=t,this.g=e,this.b=n,Pn.toWorkingColorSpace(this,s),this}setHSL(t,e,n,s=Pn.workingColorSpace){if(t=Nw(t,1),e=nn(e,0,1),n=nn(n,0,1),e===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,a=2*n-r;this.r=s8(a,r,t+1/3),this.g=s8(a,r,t),this.b=s8(a,r,t-1/3)}return Pn.toWorkingColorSpace(this,s),this}setStyle(t,e=Kn){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const a=s[1],l=s[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=s[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(a===6)return this.setHex(parseInt(r,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Kn){const n=OB[t.toLowerCase()];return n!==void 0?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Jh(t.r),this.g=Jh(t.g),this.b=Jh(t.b),this}copyLinearToSRGB(t){return this.r=K1(t.r),this.g=K1(t.g),this.b=K1(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Kn){return Pn.fromWorkingColorSpace(jr.copy(this),t),Math.round(nn(jr.r*255,0,255))*65536+Math.round(nn(jr.g*255,0,255))*256+Math.round(nn(jr.b*255,0,255))}getHexString(t=Kn){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Pn.workingColorSpace){Pn.fromWorkingColorSpace(jr.copy(this),e);const n=jr.r,s=jr.g,r=jr.b,a=Math.max(n,s,r),l=Math.min(n,s,r);let u,f;const m=(l+a)/2;if(l===a)u=0,f=0;else{const g=a-l;switch(f=m<=.5?g/(a+l):g/(2-a-l),a){case n:u=(s-r)/g+(s<r?6:0);break;case s:u=(r-n)/g+2;break;case r:u=(n-s)/g+4;break}u/=6}return t.h=u,t.s=f,t.l=m,t}getRGB(t,e=Pn.workingColorSpace){return Pn.fromWorkingColorSpace(jr.copy(this),e),t.r=jr.r,t.g=jr.g,t.b=jr.b,t}getStyle(t=Kn){Pn.fromWorkingColorSpace(jr.copy(this),t);const e=jr.r,n=jr.g,s=jr.b;return t!==Kn?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(t,e,n){return this.getHSL(ad),this.setHSL(ad.h+t,ad.s+e,ad.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(ad),t.getHSL(RS);const n=P_(ad.h,RS.h,e),s=P_(ad.s,RS.s,e),r=P_(ad.l,RS.l,e);return this.setHSL(n,s,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,s=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*s,this.g=r[1]*e+r[4]*n+r[7]*s,this.b=r[2]*e+r[5]*n+r[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const jr=new ae;ae.NAMES=OB;let jz=0;class gs extends qo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jz++}),this.uuid=Go(),this.name="",this.type="Material",this.blending=Og,this.side=Lc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=A3,this.blendDst=x3,this.blendEquation=md,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ae(0,0,0),this.blendAlpha=0,this.depthFunc=Pg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=S5,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ym,this.stencilZFail=ym,this.stencilZPass=ym,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const s=this[e];if(s===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Og&&(n.blending=this.blending),this.side!==Lc&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==A3&&(n.blendSrc=this.blendSrc),this.blendDst!==x3&&(n.blendDst=this.blendDst),this.blendEquation!==md&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Pg&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==S5&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ym&&(n.stencilFail=this.stencilFail),this.stencilZFail!==ym&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==ym&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const a=[];for(const l in r){const u=r[l];delete u.metadata,a.push(u)}return a}if(e){const r=s(t.textures),a=s(t.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const s=e.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class zo extends gs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=Tx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const qh=qz();function qz(){const i=new ArrayBuffer(4),t=new Float32Array(i),e=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let u=0;u<256;++u){const f=u-127;f<-27?(n[u]=0,n[u|256]=32768,s[u]=24,s[u|256]=24):f<-14?(n[u]=1024>>-f-14,n[u|256]=1024>>-f-14|32768,s[u]=-f-1,s[u|256]=-f-1):f<=15?(n[u]=f+15<<10,n[u|256]=f+15<<10|32768,s[u]=13,s[u|256]=13):f<128?(n[u]=31744,n[u|256]=64512,s[u]=24,s[u|256]=24):(n[u]=31744,n[u|256]=64512,s[u]=13,s[u|256]=13)}const r=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let f=u<<13,m=0;for(;(f&8388608)===0;)f<<=1,m-=8388608;f&=-8388609,m+=947912704,r[u]=f|m}for(let u=1024;u<2048;++u)r[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)a[u]=u<<23;a[31]=1199570944,a[32]=2147483648;for(let u=33;u<63;++u)a[u]=2147483648+(u-32<<23);a[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:t,uint32View:e,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:a,offsetTable:l}}function Za(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=nn(i,-65504,65504),qh.floatView[0]=i;const t=qh.uint32View[0],e=t>>23&511;return qh.baseTable[e]+((t&8388607)>>qh.shiftTable[e])}function u_(i){const t=i>>10;return qh.uint32View[0]=qh.mantissaTable[qh.offsetTable[t]+(i&1023)]+qh.exponentTable[t],qh.floatView[0]}class Yz{static toHalfFloat(t){return Za(t)}static fromHalfFloat(t){return u_(t)}}const Ms=new nt,LS=new Pt;let Wz=0;class zn{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Wz++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=J_,this.updateRanges=[],this.gpuType=Oa,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[t+s]=e.array[n+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)LS.fromBufferAttribute(this,e),LS.applyMatrix3(t),this.setXY(e,LS.x,LS.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.applyMatrix3(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.applyMatrix4(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.applyNormalMatrix(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ms.fromBufferAttribute(this,e),Ms.transformDirection(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=Da(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=cn(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Da(e,this.array)),e}setX(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Da(e,this.array)),e}setY(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Da(e,this.array)),e}setZ(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Da(e,this.array)),e}setW(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,s){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=s,this}setXYZW(t,e,n,s,r){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array),r=cn(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=s,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==J_&&(t.usage=this.usage),t}}class Kz extends zn{constructor(t,e,n){super(new Int8Array(t),e,n)}}class Jz extends zn{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class Zz extends zn{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class $z extends zn{constructor(t,e,n){super(new Int16Array(t),e,n)}}class Iw extends zn{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class tG extends zn{constructor(t,e,n){super(new Int32Array(t),e,n)}}class Uw extends zn{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class eG extends zn{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=u_(this.array[t*this.itemSize]);return this.normalized&&(e=Da(e,this.array)),e}setX(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize]=Za(e),this}getY(t){let e=u_(this.array[t*this.itemSize+1]);return this.normalized&&(e=Da(e,this.array)),e}setY(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+1]=Za(e),this}getZ(t){let e=u_(this.array[t*this.itemSize+2]);return this.normalized&&(e=Da(e,this.array)),e}setZ(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+2]=Za(e),this}getW(t){let e=u_(this.array[t*this.itemSize+3]);return this.normalized&&(e=Da(e,this.array)),e}setW(t,e){return this.normalized&&(e=cn(e,this.array)),this.array[t*this.itemSize+3]=Za(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array)),this.array[t+0]=Za(e),this.array[t+1]=Za(n),this}setXYZ(t,e,n,s){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array)),this.array[t+0]=Za(e),this.array[t+1]=Za(n),this.array[t+2]=Za(s),this}setXYZW(t,e,n,s,r){return t*=this.itemSize,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array),r=cn(r,this.array)),this.array[t+0]=Za(e),this.array[t+1]=Za(n),this.array[t+2]=Za(s),this.array[t+3]=Za(r),this}}class Me extends zn{constructor(t,e,n){super(new Float32Array(t),e,n)}}let nG=0;const ml=new Fe,r8=new Hn,b1=new nt,To=new Br,Y2=new Br,rr=new nt;class $e extends qo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:nG++}),this.uuid=Go(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(LB(t)?Uw:Iw)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new on().getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return ml.makeRotationFromQuaternion(t),this.applyMatrix4(ml),this}rotateX(t){return ml.makeRotationX(t),this.applyMatrix4(ml),this}rotateY(t){return ml.makeRotationY(t),this.applyMatrix4(ml),this}rotateZ(t){return ml.makeRotationZ(t),this.applyMatrix4(ml),this}translate(t,e,n){return ml.makeTranslation(t,e,n),this.applyMatrix4(ml),this}scale(t,e,n){return ml.makeScale(t,e,n),this.applyMatrix4(ml),this}lookAt(t){return r8.lookAt(t),r8.updateMatrix(),this.applyMatrix4(r8.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(b1).negate(),this.translate(b1.x,b1.y,b1.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Me(n,3))}else{const n=Math.min(t.length,e.count);for(let s=0;s<n;s++){const r=t[s];e.setXYZ(s,r.x,r.y,r.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Br);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new nt(-1/0,-1/0,-1/0),new nt(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,s=e.length;n<s;n++){const r=e[n];To.setFromBufferAttribute(r),this.morphTargetsRelative?(rr.addVectors(this.boundingBox.min,To.min),this.boundingBox.expandByPoint(rr),rr.addVectors(this.boundingBox.max,To.max),this.boundingBox.expandByPoint(rr)):(this.boundingBox.expandByPoint(To.min),this.boundingBox.expandByPoint(To.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new pr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new nt,1/0);return}if(t){const n=this.boundingSphere.center;if(To.setFromBufferAttribute(t),e)for(let r=0,a=e.length;r<a;r++){const l=e[r];Y2.setFromBufferAttribute(l),this.morphTargetsRelative?(rr.addVectors(To.min,Y2.min),To.expandByPoint(rr),rr.addVectors(To.max,Y2.max),To.expandByPoint(rr)):(To.expandByPoint(Y2.min),To.expandByPoint(Y2.max))}To.getCenter(n);let s=0;for(let r=0,a=t.count;r<a;r++)rr.fromBufferAttribute(t,r),s=Math.max(s,n.distanceToSquared(rr));if(e)for(let r=0,a=e.length;r<a;r++){const l=e[r],u=this.morphTargetsRelative;for(let f=0,m=l.count;f<m;f++)rr.fromBufferAttribute(l,f),u&&(b1.fromBufferAttribute(t,f),rr.add(b1)),s=Math.max(s,n.distanceToSquared(rr))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.position,s=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zn(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),l=[],u=[];for(let z=0;z<n.count;z++)l[z]=new nt,u[z]=new nt;const f=new nt,m=new nt,g=new nt,v=new Pt,_=new Pt,b=new Pt,C=new nt,T=new nt;function S(z,U,P){f.fromBufferAttribute(n,z),m.fromBufferAttribute(n,U),g.fromBufferAttribute(n,P),v.fromBufferAttribute(r,z),_.fromBufferAttribute(r,U),b.fromBufferAttribute(r,P),m.sub(f),g.sub(f),_.sub(v),b.sub(v);const X=1/(_.x*b.y-b.x*_.y);isFinite(X)&&(C.copy(m).multiplyScalar(b.y).addScaledVector(g,-_.y).multiplyScalar(X),T.copy(g).multiplyScalar(_.x).addScaledVector(m,-b.x).multiplyScalar(X),l[z].add(C),l[U].add(C),l[P].add(C),u[z].add(T),u[U].add(T),u[P].add(T))}let R=this.groups;R.length===0&&(R=[{start:0,count:t.count}]);for(let z=0,U=R.length;z<U;++z){const P=R[z],X=P.start,ot=P.count;for(let it=X,ct=X+ot;it<ct;it+=3)S(t.getX(it+0),t.getX(it+1),t.getX(it+2))}const B=new nt,D=new nt,N=new nt,I=new nt;function F(z){N.fromBufferAttribute(s,z),I.copy(N);const U=l[z];B.copy(U),B.sub(N.multiplyScalar(N.dot(U))).normalize(),D.crossVectors(I,U);const X=D.dot(u[z])<0?-1:1;a.setXYZW(z,B.x,B.y,B.z,X)}for(let z=0,U=R.length;z<U;++z){const P=R[z],X=P.start,ot=P.count;for(let it=X,ct=X+ot;it<ct;it+=3)F(t.getX(it+0)),F(t.getX(it+1)),F(t.getX(it+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new zn(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let v=0,_=n.count;v<_;v++)n.setXYZ(v,0,0,0);const s=new nt,r=new nt,a=new nt,l=new nt,u=new nt,f=new nt,m=new nt,g=new nt;if(t)for(let v=0,_=t.count;v<_;v+=3){const b=t.getX(v+0),C=t.getX(v+1),T=t.getX(v+2);s.fromBufferAttribute(e,b),r.fromBufferAttribute(e,C),a.fromBufferAttribute(e,T),m.subVectors(a,r),g.subVectors(s,r),m.cross(g),l.fromBufferAttribute(n,b),u.fromBufferAttribute(n,C),f.fromBufferAttribute(n,T),l.add(m),u.add(m),f.add(m),n.setXYZ(b,l.x,l.y,l.z),n.setXYZ(C,u.x,u.y,u.z),n.setXYZ(T,f.x,f.y,f.z)}else for(let v=0,_=e.count;v<_;v+=3)s.fromBufferAttribute(e,v+0),r.fromBufferAttribute(e,v+1),a.fromBufferAttribute(e,v+2),m.subVectors(a,r),g.subVectors(s,r),m.cross(g),n.setXYZ(v+0,m.x,m.y,m.z),n.setXYZ(v+1,m.x,m.y,m.z),n.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)rr.fromBufferAttribute(t,e),rr.normalize(),t.setXYZ(e,rr.x,rr.y,rr.z)}toNonIndexed(){function t(l,u){const f=l.array,m=l.itemSize,g=l.normalized,v=new f.constructor(u.length*m);let _=0,b=0;for(let C=0,T=u.length;C<T;C++){l.isInterleavedBufferAttribute?_=u[C]*l.data.stride+l.offset:_=u[C]*m;for(let S=0;S<m;S++)v[b++]=f[_++]}return new zn(v,m,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new $e,n=this.index.array,s=this.attributes;for(const l in s){const u=s[l],f=t(u,n);e.setAttribute(l,f)}const r=this.morphAttributes;for(const l in r){const u=[],f=r[l];for(let m=0,g=f.length;m<g;m++){const v=f[m],_=t(v,n);u.push(_)}e.morphAttributes[l]=u}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,u=a.length;l<u;l++){const f=a[l];e.addGroup(f.start,f.count,f.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(t[f]=u[f]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const u in n){const f=n[u];t.data.attributes[u]=f.toJSON(t.data)}const s={};let r=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],m=[];for(let g=0,v=f.length;g<v;g++){const _=f[g];m.push(_.toJSON(t.data))}m.length>0&&(s[u]=m,r=!0)}r&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone());const s=t.attributes;for(const f in s){const m=s[f];this.setAttribute(f,m.clone(e))}const r=t.morphAttributes;for(const f in r){const m=[],g=r[f];for(let v=0,_=g.length;v<_;v++)m.push(g[v].clone(e));this.morphAttributes[f]=m}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let f=0,m=a.length;f<m;f++){const g=a[f];this.addGroup(g.start,g.count,g.materialIndex)}const l=t.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=t.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const h6=new Fe,rm=new Sy,DS=new pr,f6=new nt,BS=new nt,OS=new nt,NS=new nt,a8=new nt,IS=new nt,d6=new nt,US=new nt;class as extends Hn{constructor(t=new $e,e=new zo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}getVertexPosition(t,e){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;e.fromBufferAttribute(s,t);const l=this.morphTargetInfluences;if(r&&l){IS.set(0,0,0);for(let u=0,f=r.length;u<f;u++){const m=l[u],g=r[u];m!==0&&(a8.fromBufferAttribute(g,t),a?IS.addScaledVector(a8,m):IS.addScaledVector(a8.sub(e),m))}e.add(IS)}return e}raycast(t,e){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),DS.copy(n.boundingSphere),DS.applyMatrix4(r),rm.copy(t.ray).recast(t.near),!(DS.containsPoint(rm.origin)===!1&&(rm.intersectSphere(DS,f6)===null||rm.origin.distanceToSquared(f6)>(t.far-t.near)**2))&&(h6.copy(r).invert(),rm.copy(t.ray).applyMatrix4(h6),!(n.boundingBox!==null&&rm.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,rm)))}_computeIntersections(t,e,n){let s;const r=this.geometry,a=this.material,l=r.index,u=r.attributes.position,f=r.attributes.uv,m=r.attributes.uv1,g=r.attributes.normal,v=r.groups,_=r.drawRange;if(l!==null)if(Array.isArray(a))for(let b=0,C=v.length;b<C;b++){const T=v[b],S=a[T.materialIndex],R=Math.max(T.start,_.start),B=Math.min(l.count,Math.min(T.start+T.count,_.start+_.count));for(let D=R,N=B;D<N;D+=3){const I=l.getX(D),F=l.getX(D+1),z=l.getX(D+2);s=PS(this,S,t,n,f,m,g,I,F,z),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=T.materialIndex,e.push(s))}}else{const b=Math.max(0,_.start),C=Math.min(l.count,_.start+_.count);for(let T=b,S=C;T<S;T+=3){const R=l.getX(T),B=l.getX(T+1),D=l.getX(T+2);s=PS(this,a,t,n,f,m,g,R,B,D),s&&(s.faceIndex=Math.floor(T/3),e.push(s))}}else if(u!==void 0)if(Array.isArray(a))for(let b=0,C=v.length;b<C;b++){const T=v[b],S=a[T.materialIndex],R=Math.max(T.start,_.start),B=Math.min(u.count,Math.min(T.start+T.count,_.start+_.count));for(let D=R,N=B;D<N;D+=3){const I=D,F=D+1,z=D+2;s=PS(this,S,t,n,f,m,g,I,F,z),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=T.materialIndex,e.push(s))}}else{const b=Math.max(0,_.start),C=Math.min(u.count,_.start+_.count);for(let T=b,S=C;T<S;T+=3){const R=T,B=T+1,D=T+2;s=PS(this,a,t,n,f,m,g,R,B,D),s&&(s.faceIndex=Math.floor(T/3),e.push(s))}}}}function iG(i,t,e,n,s,r,a,l){let u;if(t.side===qs?u=n.intersectTriangle(a,r,s,!0,l):u=n.intersectTriangle(s,r,a,t.side===Lc,l),u===null)return null;US.copy(l),US.applyMatrix4(i.matrixWorld);const f=e.ray.origin.distanceTo(US);return f<e.near||f>e.far?null:{distance:f,point:US.clone(),object:i}}function PS(i,t,e,n,s,r,a,l,u,f){i.getVertexPosition(l,BS),i.getVertexPosition(u,OS),i.getVertexPosition(f,NS);const m=iG(i,t,e,n,BS,OS,NS,d6);if(m){const g=new nt;so.getBarycoord(d6,BS,OS,NS,g),s&&(m.uv=so.getInterpolatedAttribute(s,l,u,f,g,new Pt)),r&&(m.uv1=so.getInterpolatedAttribute(r,l,u,f,g,new Pt)),a&&(m.normal=so.getInterpolatedAttribute(a,l,u,f,g,new nt),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const v={a:l,b:u,c:f,normal:new nt,materialIndex:0};so.getNormal(BS,OS,NS,v.normal),m.face=v,m.barycoord=g}return m}class s0 extends $e{constructor(t=1,e=1,n=1,s=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:s,heightSegments:r,depthSegments:a};const l=this;s=Math.floor(s),r=Math.floor(r),a=Math.floor(a);const u=[],f=[],m=[],g=[];let v=0,_=0;b("z","y","x",-1,-1,n,e,t,a,r,0),b("z","y","x",1,-1,n,e,-t,a,r,1),b("x","z","y",1,1,t,n,e,s,a,2),b("x","z","y",1,-1,t,n,-e,s,a,3),b("x","y","z",1,-1,t,e,n,s,r,4),b("x","y","z",-1,-1,t,e,-n,s,r,5),this.setIndex(u),this.setAttribute("position",new Me(f,3)),this.setAttribute("normal",new Me(m,3)),this.setAttribute("uv",new Me(g,2));function b(C,T,S,R,B,D,N,I,F,z,U){const P=D/F,X=N/z,ot=D/2,it=N/2,ct=I/2,dt=F+1,Q=z+1;let tt=0,et=0;const _t=new nt;for(let J=0;J<Q;J++){const at=J*X-it;for(let xt=0;xt<dt;xt++){const Et=xt*P-ot;_t[C]=Et*R,_t[T]=at*B,_t[S]=ct,f.push(_t.x,_t.y,_t.z),_t[C]=0,_t[T]=0,_t[S]=I>0?1:-1,m.push(_t.x,_t.y,_t.z),g.push(xt/F),g.push(1-J/z),tt+=1}}for(let J=0;J<z;J++)for(let at=0;at<F;at++){const xt=v+at+dt*J,Et=v+at+dt*(J+1),lt=v+(at+1)+dt*(J+1),wt=v+(at+1)+dt*J;u.push(xt,Et,wt),u.push(Et,lt,wt),et+=6}l.addGroup(_,et,U),_+=et,v+=tt}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new s0(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function dy(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const s=i[e][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=s.clone():Array.isArray(s)?t[e][n]=s.slice():t[e][n]=s}}return t}function Ta(i){const t={};for(let e=0;e<i.length;e++){const n=dy(i[e]);for(const s in n)t[s]=n[s]}return t}function sG(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}function NB(i){const t=i.getRenderTarget();return t===null?i.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Pn.workingColorSpace}const IB={clone:dy,merge:Ta};var rG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,aG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ks extends gs{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=rG,this.fragmentShader=aG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=dy(t.uniforms),this.uniformsGroups=sG(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?e.uniforms[s]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?e.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?e.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?e.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?e.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?e.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?e.uniforms[s]={type:"m4",value:a.toArray()}:e.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}let Rx=class extends Hn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Fe,this.projectionMatrix=new Fe,this.projectionMatrixInverse=new Fe,this.coordinateSystem=Cl}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const od=new nt,p6=new Pt,m6=new Pt;class Rs extends Rx{constructor(t=50,e=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=hy*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Ng*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return hy*2*Math.atan(Math.tan(Ng*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){od.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(od.x,od.y).multiplyScalar(-t/od.z),od.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(od.x,od.y).multiplyScalar(-t/od.z)}getViewSize(t,e){return this.getViewBounds(t,p6,m6),e.subVectors(m6,p6)}setViewOffset(t,e,n,s,r,a){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(Ng*.5*this.fov)/this.zoom,n=2*e,s=this.aspect*n,r=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const u=a.fullWidth,f=a.fullHeight;r+=a.offsetX*s/u,e-=a.offsetY*n/f,s*=a.width/u,n*=a.height/f}const l=this.filmOffset;l!==0&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const S1=-90,E1=1;class UB extends Hn{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Rs(S1,E1,t,e);s.layers=this.layers,this.add(s);const r=new Rs(S1,E1,t,e);r.layers=this.layers,this.add(r);const a=new Rs(S1,E1,t,e);a.layers=this.layers,this.add(a);const l=new Rs(S1,E1,t,e);l.layers=this.layers,this.add(l);const u=new Rs(S1,E1,t,e);u.layers=this.layers,this.add(u);const f=new Rs(S1,E1,t,e);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,s,r,a,l,u]=e;for(const f of e)this.remove(f);if(t===Cl)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(t===Z_)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const f of e)this.add(f),f.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,a,l,u,f,m]=this.children,g=t.getRenderTarget(),v=t.getActiveCubeFace(),_=t.getActiveMipmapLevel(),b=t.xr.enabled;t.xr.enabled=!1;const C=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,s),t.render(e,r),t.setRenderTarget(n,1,s),t.render(e,a),t.setRenderTarget(n,2,s),t.render(e,l),t.setRenderTarget(n,3,s),t.render(e,u),t.setRenderTarget(n,4,s),t.render(e,f),n.texture.generateMipmaps=C,t.setRenderTarget(n,5,s),t.render(e,m),t.setRenderTarget(g,v,_),t.xr.enabled=b,n.texture.needsPMREMUpdate=!0}}class Lx extends wi{constructor(t=[],e=sf,n,s,r,a,l,u,f,m){super(t,e,n,s,r,a,l,u,f,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class PB extends Ds{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},s=[n,n,n,n,n,n];this.texture=new Lx(s,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Ni}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new s0(5,5,5),r=new Ks({name:"CubemapFromEquirect",uniforms:dy(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:qs,blending:sa});r.uniforms.tEquirect.value=e;const a=new as(s,r),l=e.minFilter;return e.minFilter===Tl&&(e.minFilter=Ni),new UB(1,10,this).update(t,a),e.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(t,e=!0,n=!0,s=!0){const r=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,n,s);t.setRenderTarget(r)}}class Wh extends Hn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const oG={type:"move"};class N4{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Wh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Wh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new nt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new nt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Wh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new nt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new nt),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let s=null,r=null,a=null;const l=this._targetRay,u=this._grip,f=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(f&&t.hand){a=!0;for(const C of t.hand.values()){const T=e.getJointPose(C,n),S=this._getHandJoint(f,C);T!==null&&(S.matrix.fromArray(T.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=T.radius),S.visible=T!==null}const m=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],v=m.position.distanceTo(g.position),_=.02,b=.005;f.inputState.pinching&&v>_+b?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!f.inputState.pinching&&v<=_-b&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else u!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),r!==null&&(u.matrix.fromArray(r.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,r.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(r.linearVelocity)):u.hasLinearVelocity=!1,r.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(r.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(s=e.getPose(t.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(oG)))}return l!==null&&(l.visible=s!==null),u!==null&&(u.visible=r!==null),f!==null&&(f.visible=a!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const n=new Wh;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class sM{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new ae(t),this.density=e}clone(){return new sM(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class rM{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new ae(t),this.near=e,this.far=n}clone(){return new rM(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let eA=class extends Hn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Vo,this.environmentIntensity=1,this.environmentRotation=new Vo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}};class Dx{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=J_,this.updateRanges=[],this.version=0,this.uuid=Go()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let s=0,r=this.stride;s<r;s++)this.array[t+s]=e.array[n+s];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Go()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Go()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ea=new nt;class ep{constructor(t,e,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Ea.fromBufferAttribute(this,e),Ea.applyMatrix4(t),this.setXYZ(e,Ea.x,Ea.y,Ea.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ea.fromBufferAttribute(this,e),Ea.applyNormalMatrix(t),this.setXYZ(e,Ea.x,Ea.y,Ea.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ea.fromBufferAttribute(this,e),Ea.transformDirection(t),this.setXYZ(e,Ea.x,Ea.y,Ea.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=Da(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=cn(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Da(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Da(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Da(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Da(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=s,this}setXYZW(t,e,n,s,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=cn(e,this.array),n=cn(n,this.array),s=cn(s,this.array),r=cn(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=s,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return new zn(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ep(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Pw extends gs{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ae(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let M1;const W2=new nt,T1=new nt,C1=new nt,w1=new Pt,K2=new Pt,FB=new Fe,FS=new nt,J2=new nt,HS=new nt,g6=new Pt,o8=new Pt,v6=new Pt;class HB extends Hn{constructor(t=new Pw){if(super(),this.isSprite=!0,this.type="Sprite",M1===void 0){M1=new $e;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Dx(e,5);M1.setIndex([0,1,2,0,2,3]),M1.setAttribute("position",new ep(n,3,0,!1)),M1.setAttribute("uv",new ep(n,2,3,!1))}this.geometry=M1,this.material=t,this.center=new Pt(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),T1.setFromMatrixScale(this.matrixWorld),FB.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),C1.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&T1.multiplyScalar(-C1.z);const n=this.material.rotation;let s,r;n!==0&&(r=Math.cos(n),s=Math.sin(n));const a=this.center;zS(FS.set(-.5,-.5,0),C1,a,T1,s,r),zS(J2.set(.5,-.5,0),C1,a,T1,s,r),zS(HS.set(.5,.5,0),C1,a,T1,s,r),g6.set(0,0),o8.set(1,0),v6.set(1,1);let l=t.ray.intersectTriangle(FS,J2,HS,!1,W2);if(l===null&&(zS(J2.set(-.5,.5,0),C1,a,T1,s,r),o8.set(0,1),l=t.ray.intersectTriangle(FS,HS,J2,!1,W2),l===null))return;const u=t.ray.origin.distanceTo(W2);u<t.near||u>t.far||e.push({distance:u,point:W2.clone(),uv:so.getInterpolation(W2,FS,J2,HS,g6,o8,v6,new Pt),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function zS(i,t,e,n,s,r){w1.subVectors(i,e).addScalar(.5).multiply(n),s!==void 0?(K2.x=r*w1.x-s*w1.y,K2.y=s*w1.x+r*w1.y):K2.copy(w1),i.copy(t),i.x+=K2.x,i.y+=K2.y,i.applyMatrix4(FB)}const GS=new nt,y6=new nt;class zB extends Hn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,s=e.length;n<s;n++){const r=e[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const s=this.levels;let r;for(r=0;r<s.length&&!(e<s[r].distance);r++);return s.splice(r,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let n=0;n<e.length;n++)if(e[n].distance===t){const s=e.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,s;for(n=1,s=e.length;n<s;n++){let r=e[n].distance;if(e[n].object.visible&&(r-=r*e[n].hysteresis),t<r)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){GS.setFromMatrixPosition(this.matrixWorld);const s=t.ray.origin.distanceTo(GS);this.getObjectForDistance(s).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){GS.setFromMatrixPosition(t.matrixWorld),y6.setFromMatrixPosition(this.matrixWorld);const n=GS.distanceTo(y6)/t.zoom;e[0].object.visible=!0;let s,r;for(s=1,r=e.length;s<r;s++){let a=e[s].distance;if(e[s].object.visible&&(a-=a*e[s].hysteresis),n>=a)e[s-1].object.visible=!1,e[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)e[s].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let s=0,r=n.length;s<r;s++){const a=n[s];e.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return e}}const _6=new nt,A6=new Bn,x6=new Bn,lG=new nt,b6=new Fe,kS=new nt,l8=new pr,S6=new Fe,c8=new Sy;class Fw extends as{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=b5,this.bindMatrix=new Fe,this.bindMatrixInverse=new Fe,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Br),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,kS),this.boundingBox.expandByPoint(kS)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new pr),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,kS),this.boundingSphere.expandByPoint(kS)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),l8.copy(this.boundingSphere),l8.applyMatrix4(s),t.ray.intersectsSphere(l8)!==!1&&(S6.copy(s).invert(),c8.copy(t.ray).applyMatrix4(S6),!(this.boundingBox!==null&&c8.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,c8)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Bn,e=this.geometry.attributes.skinWeight;for(let n=0,s=e.count;n<s;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===b5?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===gB?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,s=this.geometry;A6.fromBufferAttribute(s.attributes.skinIndex,t),x6.fromBufferAttribute(s.attributes.skinWeight,t),_6.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const a=x6.getComponent(r);if(a!==0){const l=A6.getComponent(r);b6.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),e.addScaledVector(lG.copy(_6).applyMatrix4(b6),a)}}return e.applyMatrix4(this.bindMatrixInverse)}}class aM extends Hn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Pu extends wi{constructor(t=null,e=1,n=1,s,r,a,l,u,f=os,m=os,g,v){super(null,a,l,u,f,m,s,r,g,v),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const E6=new Fe,cG=new Fe;class Bx{constructor(t=[],e=[]){this.uuid=Go(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new Fe)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new Fe;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let r=0,a=t.length;r<a;r++){const l=t[r]?t[r].matrixWorld:cG;E6.multiplyMatrices(l,e[r]),E6.toArray(n,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Bx(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Pu(e,t,t,ea,Oa);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const s=this.bones[e];if(s.name===t)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,s=t.bones.length;n<s;n++){const r=t.bones[n];let a=e[r];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new aM),this.bones.push(a),this.boneInverses.push(new Fe().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let s=0,r=e.length;s<r;s++){const a=e[s];t.bones.push(a.uuid);const l=n[s];t.boneInverses.push(l.toArray())}return t}}class zg extends zn{constructor(t,e,n,s=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const R1=new Fe,M6=new Fe,VS=[],T6=new Br,uG=new Fe,Z2=new as,$2=new pr;class Hw extends as{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new zg(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,uG)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Br),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,R1),T6.copy(t.boundingBox).applyMatrix4(R1),this.boundingBox.union(T6)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new pr),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,R1),$2.copy(t.boundingSphere).applyMatrix4(R1),this.boundingSphere.union($2)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const n=e.morphTargetInfluences,s=this.morphTexture.source.data.data,r=n.length+1,a=t*r+1;for(let l=0;l<n.length;l++)n[l]=s[a+l]}raycast(t,e){const n=this.matrixWorld,s=this.count;if(Z2.geometry=this.geometry,Z2.material=this.material,Z2.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),$2.copy(this.boundingSphere),$2.applyMatrix4(n),t.ray.intersectsSphere($2)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,R1),M6.multiplyMatrices(n,R1),Z2.matrixWorld=M6,Z2.raycast(t,VS);for(let a=0,l=VS.length;a<l;a++){const u=VS[a];u.instanceId=r,u.object=this,e.push(u)}VS.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new zg(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const n=e.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new Pu(new Float32Array(s*this.count),s,this.count,ZE,Oa));const r=this.morphTexture.source.data.data;let a=0;for(let f=0;f<n.length;f++)a+=n[f];const l=this.geometry.morphTargetsRelative?1:1-a,u=s*t;r[u]=l,r.set(n,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const u8=new nt,hG=new nt,fG=new on;class pd{constructor(t=new nt(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,s){return this.normal.set(t,e,n),this.constant=s,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const s=u8.subVectors(n,e).cross(hG.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(u8),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||fG.getNormalMatrix(t),s=this.coplanarPoint(u8).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const am=new pr,QS=new nt;class Ey{constructor(t=new pd,e=new pd,n=new pd,s=new pd,r=new pd,a=new pd){this.planes=[t,e,n,s,r,a]}set(t,e,n,s,r,a){const l=this.planes;return l[0].copy(t),l[1].copy(e),l[2].copy(n),l[3].copy(s),l[4].copy(r),l[5].copy(a),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=Cl){const n=this.planes,s=t.elements,r=s[0],a=s[1],l=s[2],u=s[3],f=s[4],m=s[5],g=s[6],v=s[7],_=s[8],b=s[9],C=s[10],T=s[11],S=s[12],R=s[13],B=s[14],D=s[15];if(n[0].setComponents(u-r,v-f,T-_,D-S).normalize(),n[1].setComponents(u+r,v+f,T+_,D+S).normalize(),n[2].setComponents(u+a,v+m,T+b,D+R).normalize(),n[3].setComponents(u-a,v-m,T-b,D-R).normalize(),n[4].setComponents(u-l,v-g,T-C,D-B).normalize(),e===Cl)n[5].setComponents(u+l,v+g,T+C,D+B).normalize();else if(e===Z_)n[5].setComponents(l,g,C,B).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),am.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),am.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(am)}intersectsSprite(t){return am.center.set(0,0,0),am.radius=.7071067811865476,am.applyMatrix4(t.matrixWorld),this.intersectsSphere(am)}intersectsSphere(t){const e=this.planes,n=t.center,s=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const s=e[n];if(QS.x=s.normal.x>0?t.max.x:t.min.x,QS.y=s.normal.y>0?t.max.y:t.min.y,QS.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(QS)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const pu=new Fe,mu=new Ey;class oM{constructor(){this.coordinateSystem=Cl}intersectsObject(t,e){if(!e.isArrayCamera||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(pu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),mu.setFromProjectionMatrix(pu,this.coordinateSystem),mu.intersectsObject(t))return!0}return!1}intersectsSprite(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(pu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),mu.setFromProjectionMatrix(pu,this.coordinateSystem),mu.intersectsSprite(t))return!0}return!1}intersectsSphere(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(pu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),mu.setFromProjectionMatrix(pu,this.coordinateSystem),mu.intersectsSphere(t))return!0}return!1}intersectsBox(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(pu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),mu.setFromProjectionMatrix(pu,this.coordinateSystem),mu.intersectsBox(t))return!0}return!1}containsPoint(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(pu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),mu.setFromProjectionMatrix(pu,this.coordinateSystem),mu.containsPoint(t))return!0}return!1}clone(){return new oM}}function h8(i,t){return i-t}function dG(i,t){return i.z-t.z}function pG(i,t){return t.z-i.z}class mG{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,n,s){const r=this.pool,a=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const l=r[this.index];a.push(l),this.index++,l.start=t,l.count=e,l.z=n,l.index=s}reset(){this.list.length=0,this.index=0}}const Ka=new Fe,gG=new ae(1,1,1),C6=new Ey,vG=new oM,XS=new Br,om=new pr,t_=new nt,w6=new nt,yG=new nt,f8=new mG,qr=new as,jS=[];function _G(i,t,e=0){const n=t.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==t.array.constructor){const s=i.count;for(let r=0;r<s;r++)for(let a=0;a<n;a++)t.setComponent(r+e,a,i.getComponent(r,a))}else t.array.set(i.array,e*n);t.needsUpdate=!0}function lm(i,t){if(i.constructor!==t.constructor){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++)t[n]=i[n]}else{const e=Math.min(i.length,t.length);t.set(new i.constructor(i.buffer,0,e))}}class GB extends as{constructor(t,e,n=e*2,s){super(new $e,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new Pu(e,t,t,ea,Oa);this._matricesTexture=n}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),n=new Pu(e,t,t,Cx,Fu);this._indirectTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new Pu(e,t,t,ea,Oa);n.colorSpace=Pn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in t.attributes){const a=t.getAttribute(r),{array:l,itemSize:u,normalized:f}=a,m=new l.constructor(n*u),g=new zn(m,u,f);e.setAttribute(r,g)}if(t.getIndex()!==null){const r=n>65535?new Uint32Array(s):new Uint16Array(s);e.setIndex(new zn(r,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(!t.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=t.getAttribute(n),r=e.getAttribute(n);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Br);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let n=0,s=e.length;n<s;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,Ka),this.getBoundingBoxAt(r,XS).applyMatrix4(Ka),t.union(XS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new pr);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let n=0,s=e.length;n<s;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,Ka),this.getBoundingSphereAt(r,om).applyMatrix4(Ka),t.union(om)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:t};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(h8),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;Ka.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const a=this._colorsTexture;return a&&(gG.toArray(a.image.data,s*4),a.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(t,e=-1,n=-1){this._initializeGeometry(t),this._validateGeometry(t);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const a=t.getIndex();if(a!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?a.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(h8),u=this._availableGeometryIds.shift(),r[u]=s):(u=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(u,t),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,u}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,s=n.getIndex()!==null,r=n.getIndex(),a=e.getIndex(),l=this._geometryInfo[t];if(s&&a.count>l.reservedIndexCount||e.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=e.getAttribute("position").count;for(const m in n.attributes){const g=e.getAttribute(m),v=n.getAttribute(m);_G(g,v,u);const _=g.itemSize;for(let b=g.count,C=f;b<C;b++){const T=u+b;for(let S=0;S<_;S++)v.setComponent(T,S,0)}v.needsUpdate=!0,v.addUpdateRange(u*_,f*_)}if(s){const m=l.indexStart,g=l.reservedIndexCount;l.indexCount=e.getIndex().count;for(let v=0;v<a.count;v++)r.setX(m+v,u+a.getX(v));for(let v=a.count,_=g;v<_;v++)r.setX(m+v,u);r.needsUpdate=!0,r.addUpdateRange(m,l.reservedIndexCount)}return l.start=s?l.indexStart:l.vertexStart,l.count=s?l.indexCount:l.vertexCount,l.boundingBox=null,e.boundingBox!==null&&(l.boundingBox=e.boundingBox.clone()),l.boundingSphere=null,e.boundingSphere!==null&&(l.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const n=this._instanceInfo;for(let s=0,r=n.length;s<r;s++)n[s].active&&n[s].geometryIndex===t&&this.deleteInstance(s);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const n=this._geometryInfo,s=n.map((a,l)=>l).sort((a,l)=>n[a].vertexStart-n[l].vertexStart),r=this.geometry;for(let a=0,l=n.length;a<l;a++){const u=s[a],f=n[u];if(f.active!==!1){if(r.index!==null){if(f.indexStart!==e){const{indexStart:m,vertexStart:g,reservedIndexCount:v}=f,_=r.index,b=_.array,C=t-g;for(let T=m;T<m+v;T++)b[T]=b[T]+C;_.array.copyWithin(e,m,m+v),_.addUpdateRange(e,v),f.indexStart=e}e+=f.reservedIndexCount}if(f.vertexStart!==t){const{vertexStart:m,reservedVertexCount:g}=f,v=r.attributes;for(const _ in v){const b=v[_],{array:C,itemSize:T}=b;C.copyWithin(t*T,m*T,(m+g)*T),b.addUpdateRange(t*T,g*T)}f.vertexStart=t}t+=f.reservedVertexCount,f.start=r.index?f.indexStart:f.vertexStart,this._nextIndexStart=r.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[t];if(s.boundingBox===null){const r=new Br,a=n.index,l=n.attributes.position;for(let u=s.start,f=s.start+s.count;u<f;u++){let m=u;a&&(m=a.getX(m)),r.expandByPoint(t_.fromBufferAttribute(l,m))}s.boundingBox=r}return e.copy(s.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[t];if(s.boundingSphere===null){const r=new pr;this.getBoundingBoxAt(t,XS),XS.getCenter(r.center);const a=n.index,l=n.attributes.position;let u=0;for(let f=s.start,m=s.start+s.count;f<m;f++){let g=f;a&&(g=a.getX(g)),t_.fromBufferAttribute(l,g),u=Math.max(u,r.center.distanceToSquared(t_))}r.radius=Math.sqrt(u),s.boundingSphere=r}return e.copy(s.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const n=this._matricesTexture,s=this._matricesTexture.image.data;return e.toArray(s,t*16),n.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}setInstanceCount(t){const e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(h8);e[e.length-1]===n.length;)n.pop(),e.pop();if(t<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const s=new Int32Array(t),r=new Int32Array(t);lm(this._multiDrawCounts,s),lm(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=t;const a=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;a.dispose(),this._initIndirectTexture(),lm(a.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),lm(l.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),lm(u.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const n=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...n.map(l=>l.vertexStart+l.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(u=>u.indexStart+u.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new $e,this._initializeGeometry(r));const a=this.geometry;r.index&&lm(r.index.array,a.index.array);for(const l in r.attributes)lm(r.attributes[l].array,a.attributes[l].array)}raycast(t,e){const n=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,a=this.geometry;qr.material=this.material,qr.geometry.index=a.index,qr.geometry.attributes=a.attributes,qr.geometry.boundingBox===null&&(qr.geometry.boundingBox=new Br),qr.geometry.boundingSphere===null&&(qr.geometry.boundingSphere=new pr);for(let l=0,u=n.length;l<u;l++){if(!n[l].visible||!n[l].active)continue;const f=n[l].geometryIndex,m=s[f];qr.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(l,qr.matrixWorld).premultiply(r),this.getBoundingBoxAt(f,qr.geometry.boundingBox),this.getBoundingSphereAt(f,qr.geometry.boundingSphere),qr.raycast(t,jS);for(let g=0,v=jS.length;g<v;g++){const _=jS[g];_.object=this,_.batchId=l,e.push(_)}jS.length=0}qr.material=null,qr.geometry.index=null,qr.geometry.attributes={},qr.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._availableInstanceIds=t._availableInstanceIds.slice(),this._availableGeometryIds=t._availableGeometryIds.slice(),this._nextIndexStart=t._nextIndexStart,this._nextVertexStart=t._nextVertexStart,this._geometryCount=t._geometryCount,this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._indirectTexture=t._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,n,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=s.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,u=this._instanceInfo,f=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,_=this._indirectTexture,b=_.image.data,C=n.isArrayCamera?vG:C6;v&&!n.isArrayCamera&&(Ka.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),C6.setFromProjectionMatrix(Ka,t.coordinateSystem));let T=0;if(this.sortObjects){Ka.copy(this.matrixWorld).invert(),t_.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Ka),w6.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Ka);for(let B=0,D=u.length;B<D;B++)if(u[B].visible&&u[B].active){const N=u[B].geometryIndex;this.getMatrixAt(B,Ka),this.getBoundingSphereAt(N,om).applyMatrix4(Ka);let I=!1;if(v&&(I=!C.intersectsSphere(om,n)),!I){const F=g[N],z=yG.subVectors(om.center,t_).dot(w6);f8.push(F.start,F.count,z,B)}}const S=f8.list,R=this.customSort;R===null?S.sort(r.transparent?pG:dG):R.call(this,S,n);for(let B=0,D=S.length;B<D;B++){const N=S[B];f[T]=N.start*l,m[T]=N.count,b[T]=N.index,T++}f8.reset()}else for(let S=0,R=u.length;S<R;S++)if(u[S].visible&&u[S].active){const B=u[S].geometryIndex;let D=!1;if(v&&(this.getMatrixAt(S,Ka),this.getBoundingSphereAt(B,om).applyMatrix4(Ka),D=!C.intersectsSphere(om,n)),!D){const N=g[B];f[T]=N.start*l,m[T]=N.count,b[T]=S,T++}}_.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(t,e,n,s,r,a){this.onBeforeRender(t,null,s,r,a)}}class aa extends gs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ae(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const nE=new nt,iE=new nt,R6=new Fe,e_=new Sy,qS=new pr,d8=new nt,L6=new nt;class rf extends Hn{constructor(t=new $e,e=new aa){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[0];for(let s=1,r=e.count;s<r;s++)nE.fromBufferAttribute(e,s-1),iE.fromBufferAttribute(e,s),n[s]=n[s-1],n[s]+=nE.distanceTo(iE);t.setAttribute("lineDistance",new Me(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,s=this.matrixWorld,r=t.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),qS.copy(n.boundingSphere),qS.applyMatrix4(s),qS.radius+=r,t.ray.intersectsSphere(qS)===!1)return;R6.copy(s).invert(),e_.copy(t.ray).applyMatrix4(R6);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=this.isLineSegments?2:1,m=n.index,v=n.attributes.position;if(m!==null){const _=Math.max(0,a.start),b=Math.min(m.count,a.start+a.count);for(let C=_,T=b-1;C<T;C+=f){const S=m.getX(C),R=m.getX(C+1),B=YS(this,t,e_,u,S,R,C);B&&e.push(B)}if(this.isLineLoop){const C=m.getX(b-1),T=m.getX(_),S=YS(this,t,e_,u,C,T,b-1);S&&e.push(S)}}else{const _=Math.max(0,a.start),b=Math.min(v.count,a.start+a.count);for(let C=_,T=b-1;C<T;C+=f){const S=YS(this,t,e_,u,C,C+1,C);S&&e.push(S)}if(this.isLineLoop){const C=YS(this,t,e_,u,b-1,_,b-1);C&&e.push(C)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function YS(i,t,e,n,s,r,a){const l=i.geometry.attributes.position;if(nE.fromBufferAttribute(l,s),iE.fromBufferAttribute(l,r),e.distanceSqToSegment(nE,iE,d8,L6)>n)return;d8.applyMatrix4(i.matrixWorld);const f=t.ray.origin.distanceTo(d8);if(!(f<t.near||f>t.far))return{distance:f,point:L6.clone().applyMatrix4(i.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:i}}const D6=new nt,B6=new nt;class Dc extends rf{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[];for(let s=0,r=e.count;s<r;s+=2)D6.fromBufferAttribute(e,s),B6.fromBufferAttribute(e,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+D6.distanceTo(B6);t.setAttribute("lineDistance",new Me(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class zw extends rf{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class lM extends gs{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ae(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const O6=new Fe,M5=new Sy,WS=new pr,KS=new nt;class Gw extends Hn{constructor(t=new $e,e=new lM){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,s=this.matrixWorld,r=t.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),WS.copy(n.boundingSphere),WS.applyMatrix4(s),WS.radius+=r,t.ray.intersectsSphere(WS)===!1)return;O6.copy(s).invert(),M5.copy(t.ray).applyMatrix4(O6);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=n.index,g=n.attributes.position;if(f!==null){const v=Math.max(0,a.start),_=Math.min(f.count,a.start+a.count);for(let b=v,C=_;b<C;b++){const T=f.getX(b);KS.fromBufferAttribute(g,T),N6(KS,T,u,s,t,e,this)}}else{const v=Math.max(0,a.start),_=Math.min(g.count,a.start+a.count);for(let b=v,C=_;b<C;b++)KS.fromBufferAttribute(g,b),N6(KS,b,u,s,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function N6(i,t,e,n,s,r,a){const l=M5.distanceSqToPoint(i);if(l<e){const u=new nt;M5.closestPointToPoint(i,u),u.applyMatrix4(n);const f=s.ray.origin.distanceTo(u);if(f<s.near||f>s.far)return;r.push({distance:f,distanceToRay:Math.sqrt(l),point:u,index:t,face:null,faceIndex:null,barycoord:null,object:a})}}class kB extends wi{constructor(t,e,n,s,r=Ni,a=Ni,l,u,f){super(t,e,n,s,r,a,l,u,f),this.isVideoTexture=!0,this.generateMipmaps=!1;const m=this;function g(){m.needsUpdate=!0,t.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class AG extends kB{constructor(t,e,n,s,r,a,l,u){super({},t,e,n,s,r,a,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class xG extends wi{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=os,this.minFilter=os,this.generateMipmaps=!1,this.needsUpdate=!0}}class cM extends wi{constructor(t,e,n,s,r,a,l,u,f,m,g,v){super(null,a,l,u,f,m,s,r,g,v),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class bG extends cM{constructor(t,e,n,s,r,a){super(t,e,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Ho,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class SG extends cM{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,sf),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class EG extends wi{constructor(t,e,n,s,r,a,l,u,f){super(t,e,n,s,r,a,l,u,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ox extends wi{constructor(t,e,n=Fu,s,r,a,l=os,u=os,f,m=ly){if(m!==ly&&m!==Hg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,s,r,a,l,u,m,n,f),this.isDepthTexture=!0,this.image={width:t,height:e},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Xd(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class MG extends Ox{constructor(t=1,e=1,n=1){super(t,e),this.isDepthArrayTexture=!0,this.image={width:t,height:e,depth:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class uM extends $e{constructor(t=1,e=1,n=4,s=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:s,heightSegments:r},e=Math.max(0,e),n=Math.max(1,Math.floor(n)),s=Math.max(3,Math.floor(s)),r=Math.max(1,Math.floor(r));const a=[],l=[],u=[],f=[],m=e/2,g=Math.PI/2*t,v=e,_=2*g+v,b=n*2+r,C=s+1,T=new nt,S=new nt;for(let R=0;R<=b;R++){let B=0,D=0,N=0,I=0;if(R<=n){const U=R/n,P=U*Math.PI/2;D=-m-t*Math.cos(P),N=t*Math.sin(P),I=-t*Math.cos(P),B=U*g}else if(R<=n+r){const U=(R-n)/r;D=-m+U*e,N=t,I=0,B=g+U*v}else{const U=(R-n-r)/n,P=U*Math.PI/2;D=m+t*Math.sin(P),N=t*Math.cos(P),I=t*Math.sin(P),B=g+v+U*g}const F=Math.max(0,Math.min(1,B/_));let z=0;R===0?z=.5/s:R===b&&(z=-.5/s);for(let U=0;U<=s;U++){const P=U/s,X=P*Math.PI*2,ot=Math.sin(X),it=Math.cos(X);S.x=-N*it,S.y=D,S.z=N*ot,l.push(S.x,S.y,S.z),T.set(-N*it,I,N*ot),T.normalize(),u.push(T.x,T.y,T.z),f.push(P+z,F)}if(R>0){const U=(R-1)*C;for(let P=0;P<s;P++){const X=U+P,ot=U+P+1,it=R*C+P,ct=R*C+P+1;a.push(X,ot,it),a.push(ot,ct,it)}}}this.setIndex(a),this.setAttribute("position",new Me(l,3)),this.setAttribute("normal",new Me(u,3)),this.setAttribute("uv",new Me(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new uM(t.radius,t.height,t.capSegments,t.radialSegments,t.heightSegments)}}class hM extends $e{constructor(t=1,e=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:s},e=Math.max(3,e);const r=[],a=[],l=[],u=[],f=new nt,m=new Pt;a.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let g=0,v=3;g<=e;g++,v+=3){const _=n+g/e*s;f.x=t*Math.cos(_),f.y=t*Math.sin(_),a.push(f.x,f.y,f.z),l.push(0,0,1),m.x=(a[v]/t+1)/2,m.y=(a[v+1]/t+1)/2,u.push(m.x,m.y)}for(let g=1;g<=e;g++)r.push(g,g+1,0);this.setIndex(r),this.setAttribute("position",new Me(a,3)),this.setAttribute("normal",new Me(l,3)),this.setAttribute("uv",new Me(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new hM(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Nx extends $e{constructor(t=1,e=1,n=1,s=32,r=1,a=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:s,heightSegments:r,openEnded:a,thetaStart:l,thetaLength:u};const f=this;s=Math.floor(s),r=Math.floor(r);const m=[],g=[],v=[],_=[];let b=0;const C=[],T=n/2;let S=0;R(),a===!1&&(t>0&&B(!0),e>0&&B(!1)),this.setIndex(m),this.setAttribute("position",new Me(g,3)),this.setAttribute("normal",new Me(v,3)),this.setAttribute("uv",new Me(_,2));function R(){const D=new nt,N=new nt;let I=0;const F=(e-t)/n;for(let z=0;z<=r;z++){const U=[],P=z/r,X=P*(e-t)+t;for(let ot=0;ot<=s;ot++){const it=ot/s,ct=it*u+l,dt=Math.sin(ct),Q=Math.cos(ct);N.x=X*dt,N.y=-P*n+T,N.z=X*Q,g.push(N.x,N.y,N.z),D.set(dt,F,Q).normalize(),v.push(D.x,D.y,D.z),_.push(it,1-P),U.push(b++)}C.push(U)}for(let z=0;z<s;z++)for(let U=0;U<r;U++){const P=C[U][z],X=C[U+1][z],ot=C[U+1][z+1],it=C[U][z+1];(t>0||U!==0)&&(m.push(P,X,it),I+=3),(e>0||U!==r-1)&&(m.push(X,ot,it),I+=3)}f.addGroup(S,I,0),S+=I}function B(D){const N=b,I=new Pt,F=new nt;let z=0;const U=D===!0?t:e,P=D===!0?1:-1;for(let ot=1;ot<=s;ot++)g.push(0,T*P,0),v.push(0,P,0),_.push(.5,.5),b++;const X=b;for(let ot=0;ot<=s;ot++){const ct=ot/s*u+l,dt=Math.cos(ct),Q=Math.sin(ct);F.x=U*Q,F.y=T*P,F.z=U*dt,g.push(F.x,F.y,F.z),v.push(0,P,0),I.x=dt*.5+.5,I.y=Q*.5*P+.5,_.push(I.x,I.y),b++}for(let ot=0;ot<s;ot++){const it=N+ot,ct=X+ot;D===!0?m.push(ct,ct+1,it):m.push(ct+1,ct,it),z+=3}f.addGroup(S,z,D===!0?1:2),S+=z}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Nx(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Ix extends Nx{constructor(t=1,e=1,n=32,s=1,r=!1,a=0,l=Math.PI*2){super(0,t,e,n,s,r,a,l),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:a,thetaLength:l}}static fromJSON(t){return new Ix(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class lp extends $e{constructor(t=[],e=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:s};const r=[],a=[];l(s),f(n),m(),this.setAttribute("position",new Me(r,3)),this.setAttribute("normal",new Me(r.slice(),3)),this.setAttribute("uv",new Me(a,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function l(R){const B=new nt,D=new nt,N=new nt;for(let I=0;I<e.length;I+=3)_(e[I+0],B),_(e[I+1],D),_(e[I+2],N),u(B,D,N,R)}function u(R,B,D,N){const I=N+1,F=[];for(let z=0;z<=I;z++){F[z]=[];const U=R.clone().lerp(D,z/I),P=B.clone().lerp(D,z/I),X=I-z;for(let ot=0;ot<=X;ot++)ot===0&&z===I?F[z][ot]=U:F[z][ot]=U.clone().lerp(P,ot/X)}for(let z=0;z<I;z++)for(let U=0;U<2*(I-z)-1;U++){const P=Math.floor(U/2);U%2===0?(v(F[z][P+1]),v(F[z+1][P]),v(F[z][P])):(v(F[z][P+1]),v(F[z+1][P+1]),v(F[z+1][P]))}}function f(R){const B=new nt;for(let D=0;D<r.length;D+=3)B.x=r[D+0],B.y=r[D+1],B.z=r[D+2],B.normalize().multiplyScalar(R),r[D+0]=B.x,r[D+1]=B.y,r[D+2]=B.z}function m(){const R=new nt;for(let B=0;B<r.length;B+=3){R.x=r[B+0],R.y=r[B+1],R.z=r[B+2];const D=T(R)/2/Math.PI+.5,N=S(R)/Math.PI+.5;a.push(D,1-N)}b(),g()}function g(){for(let R=0;R<a.length;R+=6){const B=a[R+0],D=a[R+2],N=a[R+4],I=Math.max(B,D,N),F=Math.min(B,D,N);I>.9&&F<.1&&(B<.2&&(a[R+0]+=1),D<.2&&(a[R+2]+=1),N<.2&&(a[R+4]+=1))}}function v(R){r.push(R.x,R.y,R.z)}function _(R,B){const D=R*3;B.x=t[D+0],B.y=t[D+1],B.z=t[D+2]}function b(){const R=new nt,B=new nt,D=new nt,N=new nt,I=new Pt,F=new Pt,z=new Pt;for(let U=0,P=0;U<r.length;U+=9,P+=6){R.set(r[U+0],r[U+1],r[U+2]),B.set(r[U+3],r[U+4],r[U+5]),D.set(r[U+6],r[U+7],r[U+8]),I.set(a[P+0],a[P+1]),F.set(a[P+2],a[P+3]),z.set(a[P+4],a[P+5]),N.copy(R).add(B).add(D).divideScalar(3);const X=T(N);C(I,P+0,R,X),C(F,P+2,B,X),C(z,P+4,D,X)}}function C(R,B,D,N){N<0&&R.x===1&&(a[B]=R.x-1),D.x===0&&D.z===0&&(a[B]=N/2/Math.PI+.5)}function T(R){return Math.atan2(R.z,-R.x)}function S(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new lp(t.vertices,t.indices,t.radius,t.details)}}class fM extends lp{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,s=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,a,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new fM(t.radius,t.detail)}}const JS=new nt,ZS=new nt,p8=new nt,$S=new so;class VB extends $e{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const s=Math.pow(10,4),r=Math.cos(Ng*e),a=t.getIndex(),l=t.getAttribute("position"),u=a?a.count:l.count,f=[0,0,0],m=["a","b","c"],g=new Array(3),v={},_=[];for(let b=0;b<u;b+=3){a?(f[0]=a.getX(b),f[1]=a.getX(b+1),f[2]=a.getX(b+2)):(f[0]=b,f[1]=b+1,f[2]=b+2);const{a:C,b:T,c:S}=$S;if(C.fromBufferAttribute(l,f[0]),T.fromBufferAttribute(l,f[1]),S.fromBufferAttribute(l,f[2]),$S.getNormal(p8),g[0]=`${Math.round(C.x*s)},${Math.round(C.y*s)},${Math.round(C.z*s)}`,g[1]=`${Math.round(T.x*s)},${Math.round(T.y*s)},${Math.round(T.z*s)}`,g[2]=`${Math.round(S.x*s)},${Math.round(S.y*s)},${Math.round(S.z*s)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let R=0;R<3;R++){const B=(R+1)%3,D=g[R],N=g[B],I=$S[m[R]],F=$S[m[B]],z=`${D}_${N}`,U=`${N}_${D}`;U in v&&v[U]?(p8.dot(v[U].normal)<=r&&(_.push(I.x,I.y,I.z),_.push(F.x,F.y,F.z)),v[U]=null):z in v||(v[z]={index0:f[R],index1:f[B],normal:p8.clone()})}}for(const b in v)if(v[b]){const{index0:C,index1:T}=v[b];JS.fromBufferAttribute(l,C),ZS.fromBufferAttribute(l,T),_.push(JS.x,JS.y,JS.z),_.push(ZS.x,ZS.y,ZS.z)}this.setAttribute("position",new Me(_,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Bc{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,s=this.getPoint(0),r=0;e.push(0);for(let a=1;a<=t;a++)n=this.getPoint(a/t),r+=n.distanceTo(s),e.push(r),s=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const n=this.getLengths();let s=0;const r=n.length;let a;e?a=e:a=t*n[r-1];let l=0,u=r-1,f;for(;l<=u;)if(s=Math.floor(l+(u-l)/2),f=n[s]-a,f<0)l=s+1;else if(f>0)u=s-1;else{u=s;break}if(s=u,n[s]===a)return s/(r-1);const m=n[s],v=n[s+1]-m,_=(a-m)/v;return(s+_)/(r-1)}getTangent(t,e){let s=t-1e-4,r=t+1e-4;s<0&&(s=0),r>1&&(r=1);const a=this.getPoint(s),l=this.getPoint(r),u=e||(a.isVector2?new Pt:new nt);return u.copy(l).sub(a).normalize(),u}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e=!1){const n=new nt,s=[],r=[],a=[],l=new nt,u=new Fe;for(let _=0;_<=t;_++){const b=_/t;s[_]=this.getTangentAt(b,new nt)}r[0]=new nt,a[0]=new nt;let f=Number.MAX_VALUE;const m=Math.abs(s[0].x),g=Math.abs(s[0].y),v=Math.abs(s[0].z);m<=f&&(f=m,n.set(1,0,0)),g<=f&&(f=g,n.set(0,1,0)),v<=f&&n.set(0,0,1),l.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],l),a[0].crossVectors(s[0],r[0]);for(let _=1;_<=t;_++){if(r[_]=r[_-1].clone(),a[_]=a[_-1].clone(),l.crossVectors(s[_-1],s[_]),l.length()>Number.EPSILON){l.normalize();const b=Math.acos(nn(s[_-1].dot(s[_]),-1,1));r[_].applyMatrix4(u.makeRotationAxis(l,b))}a[_].crossVectors(s[_],r[_])}if(e===!0){let _=Math.acos(nn(r[0].dot(r[t]),-1,1));_/=t,s[0].dot(l.crossVectors(r[0],r[t]))>0&&(_=-_);for(let b=1;b<=t;b++)r[b].applyMatrix4(u.makeRotationAxis(s[b],_*b)),a[b].crossVectors(s[b],r[b])}return{tangents:s,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class dM extends Bc{constructor(t=0,e=0,n=1,s=1,r=0,a=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=l,this.aRotation=u}getPoint(t,e=new Pt){const n=e,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(a?r=0:r=s),this.aClockwise===!0&&!a&&(r===s?r=-s:r=r-s);const l=this.aStartAngle+t*r;let u=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=u-this.aX,_=f-this.aY;u=v*m-_*g+this.aX,f=v*g+_*m+this.aY}return n.set(u,f)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class QB extends dM{constructor(t,e,n,s,r,a){super(t,e,n,n,s,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function kw(){let i=0,t=0,e=0,n=0;function s(r,a,l,u){i=r,t=l,e=-3*r+3*a-2*l-u,n=2*r-2*a+l+u}return{initCatmullRom:function(r,a,l,u,f){s(a,l,f*(l-r),f*(u-a))},initNonuniformCatmullRom:function(r,a,l,u,f,m,g){let v=(a-r)/f-(l-r)/(f+m)+(l-a)/m,_=(l-a)/m-(u-a)/(m+g)+(u-l)/g;v*=m,_*=m,s(a,l,v,_)},calc:function(r){const a=r*r,l=a*r;return i+t*r+e*a+n*l}}}const t4=new nt,m8=new kw,g8=new kw,v8=new kw;class XB extends Bc{constructor(t=[],e=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=s}getPoint(t,e=new nt){const n=e,s=this.points,r=s.length,a=(r-(this.closed?0:1))*t;let l=Math.floor(a),u=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:u===0&&l===r-1&&(l=r-2,u=1);let f,m;this.closed||l>0?f=s[(l-1)%r]:(t4.subVectors(s[0],s[1]).add(s[0]),f=t4);const g=s[l%r],v=s[(l+1)%r];if(this.closed||l+2<r?m=s[(l+2)%r]:(t4.subVectors(s[r-1],s[r-2]).add(s[r-1]),m=t4),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let b=Math.pow(f.distanceToSquared(g),_),C=Math.pow(g.distanceToSquared(v),_),T=Math.pow(v.distanceToSquared(m),_);C<1e-4&&(C=1),b<1e-4&&(b=C),T<1e-4&&(T=C),m8.initNonuniformCatmullRom(f.x,g.x,v.x,m.x,b,C,T),g8.initNonuniformCatmullRom(f.y,g.y,v.y,m.y,b,C,T),v8.initNonuniformCatmullRom(f.z,g.z,v.z,m.z,b,C,T)}else this.curveType==="catmullrom"&&(m8.initCatmullRom(f.x,g.x,v.x,m.x,this.tension),g8.initCatmullRom(f.y,g.y,v.y,m.y,this.tension),v8.initCatmullRom(f.z,g.z,v.z,m.z,this.tension));return n.set(m8.calc(u),g8.calc(u),v8.calc(u)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(s.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const s=this.points[e];t.points.push(s.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(new nt().fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function I6(i,t,e,n,s){const r=(n-t)*.5,a=(s-e)*.5,l=i*i,u=i*l;return(2*e-2*n+r+a)*u+(-3*e+3*n-2*r-a)*l+r*i+e}function TG(i,t){const e=1-i;return e*e*t}function CG(i,t){return 2*(1-i)*i*t}function wG(i,t){return i*i*t}function F_(i,t,e,n){return TG(i,t)+CG(i,e)+wG(i,n)}function RG(i,t){const e=1-i;return e*e*e*t}function LG(i,t){const e=1-i;return 3*e*e*i*t}function DG(i,t){return 3*(1-i)*i*i*t}function BG(i,t){return i*i*i*t}function H_(i,t,e,n,s){return RG(i,t)+LG(i,e)+DG(i,n)+BG(i,s)}class Vw extends Bc{constructor(t=new Pt,e=new Pt,n=new Pt,s=new Pt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=s}getPoint(t,e=new Pt){const n=e,s=this.v0,r=this.v1,a=this.v2,l=this.v3;return n.set(H_(t,s.x,r.x,a.x,l.x),H_(t,s.y,r.y,a.y,l.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class jB extends Bc{constructor(t=new nt,e=new nt,n=new nt,s=new nt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=s}getPoint(t,e=new nt){const n=e,s=this.v0,r=this.v1,a=this.v2,l=this.v3;return n.set(H_(t,s.x,r.x,a.x,l.x),H_(t,s.y,r.y,a.y,l.y),H_(t,s.z,r.z,a.z,l.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Qw extends Bc{constructor(t=new Pt,e=new Pt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Pt){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Pt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class qB extends Bc{constructor(t=new nt,e=new nt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new nt){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new nt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Xw extends Bc{constructor(t=new Pt,e=new Pt,n=new Pt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Pt){const n=e,s=this.v0,r=this.v1,a=this.v2;return n.set(F_(t,s.x,r.x,a.x),F_(t,s.y,r.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class jw extends Bc{constructor(t=new nt,e=new nt,n=new nt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new nt){const n=e,s=this.v0,r=this.v1,a=this.v2;return n.set(F_(t,s.x,r.x,a.x),F_(t,s.y,r.y,a.y),F_(t,s.z,r.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class qw extends Bc{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Pt){const n=e,s=this.points,r=(s.length-1)*t,a=Math.floor(r),l=r-a,u=s[a===0?a:a-1],f=s[a],m=s[a>s.length-2?s.length-1:a+1],g=s[a>s.length-3?s.length-1:a+2];return n.set(I6(l,u.x,f.x,m.x,g.x),I6(l,u.y,f.y,m.y,g.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const s=this.points[e];t.points.push(s.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(new Pt().fromArray(s))}return this}}var sE=Object.freeze({__proto__:null,ArcCurve:QB,CatmullRomCurve3:XB,CubicBezierCurve:Vw,CubicBezierCurve3:jB,EllipseCurve:dM,LineCurve:Qw,LineCurve3:qB,QuadraticBezierCurve:Xw,QuadraticBezierCurve3:jw,SplineCurve:qw});class YB extends Bc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new sE[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=n){const a=s[r]-n,l=this.curves[r],u=l.getLength(),f=u===0?0:1-a/u;return l.getPointAt(f,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,s=this.curves.length;n<s;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let s=0,r=this.curves;s<r.length;s++){const a=r[s],l=a.isEllipseCurve?t*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,u=a.getPoints(l);for(let f=0;f<u.length;f++){const m=u[f];n&&n.equals(m)||(e.push(m),n=m)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const s=t.curves[e];this.curves.push(s.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const s=this.curves[e];t.curves.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const s=t.curves[e];this.curves.push(new sE[s.type]().fromJSON(s))}return this}}class rE extends YB{constructor(t){super(),this.type="Path",this.currentPoint=new Pt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Qw(this.currentPoint.clone(),new Pt(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,s){const r=new Xw(this.currentPoint.clone(),new Pt(t,e),new Pt(n,s));return this.curves.push(r),this.currentPoint.set(n,s),this}bezierCurveTo(t,e,n,s,r,a){const l=new Vw(this.currentPoint.clone(),new Pt(t,e),new Pt(n,s),new Pt(r,a));return this.curves.push(l),this.currentPoint.set(r,a),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new qw(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,s,r,a){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(t+l,e+u,n,s,r,a),this}absarc(t,e,n,s,r,a){return this.absellipse(t,e,n,n,s,r,a),this}ellipse(t,e,n,s,r,a,l,u){const f=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(t+f,e+m,n,s,r,a,l,u),this}absellipse(t,e,n,s,r,a,l,u){const f=new dM(t,e,n,s,r,a,l,u);if(this.curves.length>0){const g=f.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(f);const m=f.getPoint(1);return this.currentPoint.copy(m),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Ig extends rE{constructor(t){super(t),this.uuid=Go(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,s=this.holes.length;n<s;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const s=t.holes[e];this.holes.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const s=this.holes[e];t.holes.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const s=t.holes[e];this.holes.push(new rE().fromJSON(s))}return this}}function OG(i,t,e=2){const n=t&&t.length,s=n?t[0]*e:i.length;let r=WB(i,0,s,e,!0);const a=[];if(!r||r.next===r.prev)return a;let l,u,f;if(n&&(r=FG(i,t,r,e)),i.length>80*e){l=1/0,u=1/0;let m=-1/0,g=-1/0;for(let v=e;v<s;v+=e){const _=i[v],b=i[v+1];_<l&&(l=_),b<u&&(u=b),_>m&&(m=_),b>g&&(g=b)}f=Math.max(m-l,g-u),f=f!==0?32767/f:0}return nA(r,a,e,l,u,f,0),a}function WB(i,t,e,n,s){let r;if(s===WG(i,t,e,n)>0)for(let a=t;a<e;a+=n)r=U6(a/n|0,i[a],i[a+1],r);else for(let a=e-n;a>=t;a-=n)r=U6(a/n|0,i[a],i[a+1],r);return r&&py(r,r.next)&&(sA(r),r=r.next),r}function Gg(i,t){if(!i)return i;t||(t=i);let e=i,n;do if(n=!1,!e.steiner&&(py(e,e.next)||Ki(e.prev,e,e.next)===0)){if(sA(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function nA(i,t,e,n,s,r,a){if(!i)return;!a&&r&&VG(i,n,s,r);let l=i;for(;i.prev!==i.next;){const u=i.prev,f=i.next;if(r?IG(i,n,s,r):NG(i)){t.push(u.i,i.i,f.i),sA(i),i=f.next,l=f.next;continue}if(i=f,i===l){a?a===1?(i=UG(Gg(i),t),nA(i,t,e,n,s,r,2)):a===2&&PG(i,t,e,n,s,r):nA(Gg(i),t,e,n,s,r,1);break}}}function NG(i){const t=i.prev,e=i,n=i.next;if(Ki(t,e,n)>=0)return!1;const s=t.x,r=e.x,a=n.x,l=t.y,u=e.y,f=n.y,m=Math.min(s,r,a),g=Math.min(l,u,f),v=Math.max(s,r,a),_=Math.max(l,u,f);let b=n.next;for(;b!==t;){if(b.x>=m&&b.x<=v&&b.y>=g&&b.y<=_&&h_(s,l,r,u,a,f,b.x,b.y)&&Ki(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function IG(i,t,e,n){const s=i.prev,r=i,a=i.next;if(Ki(s,r,a)>=0)return!1;const l=s.x,u=r.x,f=a.x,m=s.y,g=r.y,v=a.y,_=Math.min(l,u,f),b=Math.min(m,g,v),C=Math.max(l,u,f),T=Math.max(m,g,v),S=T5(_,b,t,e,n),R=T5(C,T,t,e,n);let B=i.prevZ,D=i.nextZ;for(;B&&B.z>=S&&D&&D.z<=R;){if(B.x>=_&&B.x<=C&&B.y>=b&&B.y<=T&&B!==s&&B!==a&&h_(l,m,u,g,f,v,B.x,B.y)&&Ki(B.prev,B,B.next)>=0||(B=B.prevZ,D.x>=_&&D.x<=C&&D.y>=b&&D.y<=T&&D!==s&&D!==a&&h_(l,m,u,g,f,v,D.x,D.y)&&Ki(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;B&&B.z>=S;){if(B.x>=_&&B.x<=C&&B.y>=b&&B.y<=T&&B!==s&&B!==a&&h_(l,m,u,g,f,v,B.x,B.y)&&Ki(B.prev,B,B.next)>=0)return!1;B=B.prevZ}for(;D&&D.z<=R;){if(D.x>=_&&D.x<=C&&D.y>=b&&D.y<=T&&D!==s&&D!==a&&h_(l,m,u,g,f,v,D.x,D.y)&&Ki(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function UG(i,t){let e=i;do{const n=e.prev,s=e.next.next;!py(n,s)&&JB(n,e,e.next,s)&&iA(n,s)&&iA(s,n)&&(t.push(n.i,e.i,s.i),sA(e),sA(e.next),e=i=s),e=e.next}while(e!==i);return Gg(e)}function PG(i,t,e,n,s,r){let a=i;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&jG(a,l)){let u=ZB(a,l);a=Gg(a,a.next),u=Gg(u,u.next),nA(a,t,e,n,s,r,0),nA(u,t,e,n,s,r,0);return}l=l.next}a=a.next}while(a!==i)}function FG(i,t,e,n){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r]*n,u=r<a-1?t[r+1]*n:i.length,f=WB(i,l,u,n,!1);f===f.next&&(f.steiner=!0),s.push(XG(f))}s.sort(HG);for(let r=0;r<s.length;r++)e=zG(s[r],e);return e}function HG(i,t){let e=i.x-t.x;if(e===0&&(e=i.y-t.y,e===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(t.next.y-t.y)/(t.next.x-t.x);e=n-s}return e}function zG(i,t){const e=GG(i,t);if(!e)return t;const n=ZB(e,i);return Gg(n,n.next),Gg(e,e.next)}function GG(i,t){let e=t;const n=i.x,s=i.y;let r=-1/0,a;if(py(i,e))return e;do{if(py(i,e.next))return e.next;if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){const g=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(g<=n&&g>r&&(r=g,a=e.x<e.next.x?e:e.next,g===n))return a}e=e.next}while(e!==t);if(!a)return null;const l=a,u=a.x,f=a.y;let m=1/0;e=a;do{if(n>=e.x&&e.x>=u&&n!==e.x&&KB(s<f?n:r,s,u,f,s<f?r:n,s,e.x,e.y)){const g=Math.abs(s-e.y)/(n-e.x);iA(e,i)&&(g<m||g===m&&(e.x>a.x||e.x===a.x&&kG(a,e)))&&(a=e,m=g)}e=e.next}while(e!==l);return a}function kG(i,t){return Ki(i.prev,i,t.prev)<0&&Ki(t.next,i,i.next)<0}function VG(i,t,e,n){let s=i;do s.z===0&&(s.z=T5(s.x,s.y,t,e,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,QG(s)}function QG(i){let t,e=1;do{let n=i,s;i=null;let r=null;for(t=0;n;){t++;let a=n,l=0;for(let f=0;f<e&&(l++,a=a.nextZ,!!a);f++);let u=e;for(;l>0||u>0&&a;)l!==0&&(u===0||!a||n.z<=a.z)?(s=n,n=n.nextZ,l--):(s=a,a=a.nextZ,u--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;n=a}r.nextZ=null,e*=2}while(t>1);return i}function T5(i,t,e,n,s){return i=(i-e)*s|0,t=(t-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function XG(i){let t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function KB(i,t,e,n,s,r,a,l){return(s-a)*(t-l)>=(i-a)*(r-l)&&(i-a)*(n-l)>=(e-a)*(t-l)&&(e-a)*(r-l)>=(s-a)*(n-l)}function h_(i,t,e,n,s,r,a,l){return!(i===a&&t===l)&&KB(i,t,e,n,s,r,a,l)}function jG(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!qG(i,t)&&(iA(i,t)&&iA(t,i)&&YG(i,t)&&(Ki(i.prev,i,t.prev)||Ki(i,t.prev,t))||py(i,t)&&Ki(i.prev,i,i.next)>0&&Ki(t.prev,t,t.next)>0)}function Ki(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function py(i,t){return i.x===t.x&&i.y===t.y}function JB(i,t,e,n){const s=n4(Ki(i,t,e)),r=n4(Ki(i,t,n)),a=n4(Ki(e,n,i)),l=n4(Ki(e,n,t));return!!(s!==r&&a!==l||s===0&&e4(i,e,t)||r===0&&e4(i,n,t)||a===0&&e4(e,i,n)||l===0&&e4(e,t,n))}function e4(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function n4(i){return i>0?1:i<0?-1:0}function qG(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&JB(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function iA(i,t){return Ki(i.prev,i,i.next)<0?Ki(i,t,i.next)>=0&&Ki(i,i.prev,t)>=0:Ki(i,t,i.prev)<0||Ki(i,i.next,t)<0}function YG(i,t){let e=i,n=!1;const s=(i.x+t.x)/2,r=(i.y+t.y)/2;do e.y>r!=e.next.y>r&&e.next.y!==e.y&&s<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==i);return n}function ZB(i,t){const e=C5(i.i,i.x,i.y),n=C5(t.i,t.x,t.y),s=i.next,r=t.prev;return i.next=t,t.prev=i,e.next=s,s.prev=e,n.next=e,e.prev=n,r.next=n,n.prev=r,n}function U6(i,t,e,n){const s=C5(i,t,e);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function sA(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function C5(i,t,e){return{i,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function WG(i,t,e,n){let s=0;for(let r=t,a=e-n;r<e;r+=n)s+=(i[a]-i[r])*(i[r+1]+i[a+1]),a=r;return s}class KG{static triangulate(t,e,n=2){return OG(t,e,n)}}class Tc{static area(t){const e=t.length;let n=0;for(let s=e-1,r=0;r<e;s=r++)n+=t[s].x*t[r].y-t[r].x*t[s].y;return n*.5}static isClockWise(t){return Tc.area(t)<0}static triangulateShape(t,e){const n=[],s=[],r=[];P6(t),F6(n,t);let a=t.length;e.forEach(P6);for(let u=0;u<e.length;u++)s.push(a),a+=e[u].length,F6(n,e[u]);const l=KG.triangulate(n,s);for(let u=0;u<l.length;u+=3)r.push(l.slice(u,u+3));return r}}function P6(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function F6(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class pM extends $e{constructor(t=new Ig([new Pt(.5,.5),new Pt(-.5,.5),new Pt(-.5,-.5),new Pt(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,s=[],r=[];for(let l=0,u=t.length;l<u;l++){const f=t[l];a(f)}this.setAttribute("position",new Me(s,3)),this.setAttribute("uv",new Me(r,2)),this.computeVertexNormals();function a(l){const u=[],f=e.curveSegments!==void 0?e.curveSegments:12,m=e.steps!==void 0?e.steps:1,g=e.depth!==void 0?e.depth:1;let v=e.bevelEnabled!==void 0?e.bevelEnabled:!0,_=e.bevelThickness!==void 0?e.bevelThickness:.2,b=e.bevelSize!==void 0?e.bevelSize:_-.1,C=e.bevelOffset!==void 0?e.bevelOffset:0,T=e.bevelSegments!==void 0?e.bevelSegments:3;const S=e.extrudePath,R=e.UVGenerator!==void 0?e.UVGenerator:JG;let B,D=!1,N,I,F,z;S&&(B=S.getSpacedPoints(m),D=!0,v=!1,N=S.computeFrenetFrames(m,!1),I=new nt,F=new nt,z=new nt),v||(T=0,_=0,b=0,C=0);const U=l.extractPoints(f);let P=U.shape;const X=U.holes;if(!Tc.isClockWise(P)){P=P.reverse();for(let Z=0,Kt=X.length;Z<Kt;Z++){const Ft=X[Z];Tc.isClockWise(Ft)&&(X[Z]=Ft.reverse())}}function it(Z){const Ft=10000000000000001e-36;let Vt=Z[0];for(let Gt=1;Gt<=Z.length;Gt++){const be=Gt%Z.length,qt=Z[be],$=qt.x-Vt.x,V=qt.y-Vt.y,vt=$*$+V*V,It=Math.max(Math.abs(qt.x),Math.abs(qt.y),Math.abs(Vt.x),Math.abs(Vt.y)),Xt=Ft*It*It;if(vt<=Xt){Z.splice(be,1),Gt--;continue}Vt=qt}}it(P),X.forEach(it);const ct=X.length,dt=P;for(let Z=0;Z<ct;Z++){const Kt=X[Z];P=P.concat(Kt)}function Q(Z,Kt,Ft){return Kt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(Kt,Ft)}const tt=P.length;function et(Z,Kt,Ft){let Vt,Gt,be;const qt=Z.x-Kt.x,$=Z.y-Kt.y,V=Ft.x-Z.x,vt=Ft.y-Z.y,It=qt*qt+$*$,Xt=qt*vt-$*V;if(Math.abs(Xt)>Number.EPSILON){const Ot=Math.sqrt(It),ne=Math.sqrt(V*V+vt*vt),te=Kt.x-$/Ot,ge=Kt.y+qt/Ot,De=Ft.x-vt/ne,Jt=Ft.y+V/ne,_e=((De-te)*vt-(Jt-ge)*V)/(qt*vt-$*V);Vt=te+qt*_e-Z.x,Gt=ge+$*_e-Z.y;const Se=Vt*Vt+Gt*Gt;if(Se<=2)return new Pt(Vt,Gt);be=Math.sqrt(Se/2)}else{let Ot=!1;qt>Number.EPSILON?V>Number.EPSILON&&(Ot=!0):qt<-Number.EPSILON?V<-Number.EPSILON&&(Ot=!0):Math.sign($)===Math.sign(vt)&&(Ot=!0),Ot?(Vt=-$,Gt=qt,be=Math.sqrt(It)):(Vt=qt,Gt=$,be=Math.sqrt(It/2))}return new Pt(Vt/be,Gt/be)}const _t=[];for(let Z=0,Kt=dt.length,Ft=Kt-1,Vt=Z+1;Z<Kt;Z++,Ft++,Vt++)Ft===Kt&&(Ft=0),Vt===Kt&&(Vt=0),_t[Z]=et(dt[Z],dt[Ft],dt[Vt]);const J=[];let at,xt=_t.concat();for(let Z=0,Kt=ct;Z<Kt;Z++){const Ft=X[Z];at=[];for(let Vt=0,Gt=Ft.length,be=Gt-1,qt=Vt+1;Vt<Gt;Vt++,be++,qt++)be===Gt&&(be=0),qt===Gt&&(qt=0),at[Vt]=et(Ft[Vt],Ft[be],Ft[qt]);J.push(at),xt=xt.concat(at)}let Et;if(T===0)Et=Tc.triangulateShape(dt,X);else{const Z=[],Kt=[];for(let Ft=0;Ft<T;Ft++){const Vt=Ft/T,Gt=_*Math.cos(Vt*Math.PI/2),be=b*Math.sin(Vt*Math.PI/2)+C;for(let qt=0,$=dt.length;qt<$;qt++){const V=Q(dt[qt],_t[qt],be);ve(V.x,V.y,-Gt),Vt===0&&Z.push(V)}for(let qt=0,$=ct;qt<$;qt++){const V=X[qt];at=J[qt];const vt=[];for(let It=0,Xt=V.length;It<Xt;It++){const Ot=Q(V[It],at[It],be);ve(Ot.x,Ot.y,-Gt),Vt===0&&vt.push(Ot)}Vt===0&&Kt.push(vt)}}Et=Tc.triangulateShape(Z,Kt)}const lt=Et.length,wt=b+C;for(let Z=0;Z<tt;Z++){const Kt=v?Q(P[Z],xt[Z],wt):P[Z];D?(F.copy(N.normals[0]).multiplyScalar(Kt.x),I.copy(N.binormals[0]).multiplyScalar(Kt.y),z.copy(B[0]).add(F).add(I),ve(z.x,z.y,z.z)):ve(Kt.x,Kt.y,0)}for(let Z=1;Z<=m;Z++)for(let Kt=0;Kt<tt;Kt++){const Ft=v?Q(P[Kt],xt[Kt],wt):P[Kt];D?(F.copy(N.normals[Z]).multiplyScalar(Ft.x),I.copy(N.binormals[Z]).multiplyScalar(Ft.y),z.copy(B[Z]).add(F).add(I),ve(z.x,z.y,z.z)):ve(Ft.x,Ft.y,g/m*Z)}for(let Z=T-1;Z>=0;Z--){const Kt=Z/T,Ft=_*Math.cos(Kt*Math.PI/2),Vt=b*Math.sin(Kt*Math.PI/2)+C;for(let Gt=0,be=dt.length;Gt<be;Gt++){const qt=Q(dt[Gt],_t[Gt],Vt);ve(qt.x,qt.y,g+Ft)}for(let Gt=0,be=X.length;Gt<be;Gt++){const qt=X[Gt];at=J[Gt];for(let $=0,V=qt.length;$<V;$++){const vt=Q(qt[$],at[$],Vt);D?ve(vt.x,vt.y+B[m-1].y,B[m-1].x+Ft):ve(vt.x,vt.y,g+Ft)}}}Bt(),Ut();function Bt(){const Z=s.length/3;if(v){let Kt=0,Ft=tt*Kt;for(let Vt=0;Vt<lt;Vt++){const Gt=Et[Vt];ee(Gt[2]+Ft,Gt[1]+Ft,Gt[0]+Ft)}Kt=m+T*2,Ft=tt*Kt;for(let Vt=0;Vt<lt;Vt++){const Gt=Et[Vt];ee(Gt[0]+Ft,Gt[1]+Ft,Gt[2]+Ft)}}else{for(let Kt=0;Kt<lt;Kt++){const Ft=Et[Kt];ee(Ft[2],Ft[1],Ft[0])}for(let Kt=0;Kt<lt;Kt++){const Ft=Et[Kt];ee(Ft[0]+tt*m,Ft[1]+tt*m,Ft[2]+tt*m)}}n.addGroup(Z,s.length/3-Z,0)}function Ut(){const Z=s.length/3;let Kt=0;Wt(dt,Kt),Kt+=dt.length;for(let Ft=0,Vt=X.length;Ft<Vt;Ft++){const Gt=X[Ft];Wt(Gt,Kt),Kt+=Gt.length}n.addGroup(Z,s.length/3-Z,1)}function Wt(Z,Kt){let Ft=Z.length;for(;--Ft>=0;){const Vt=Ft;let Gt=Ft-1;Gt<0&&(Gt=Z.length-1);for(let be=0,qt=m+T*2;be<qt;be++){const $=tt*be,V=tt*(be+1),vt=Kt+Vt+$,It=Kt+Gt+$,Xt=Kt+Gt+V,Ot=Kt+Vt+V;Ye(vt,It,Xt,Ot)}}}function ve(Z,Kt,Ft){u.push(Z),u.push(Kt),u.push(Ft)}function ee(Z,Kt,Ft){we(Z),we(Kt),we(Ft);const Vt=s.length/3,Gt=R.generateTopUV(n,s,Vt-3,Vt-2,Vt-1);se(Gt[0]),se(Gt[1]),se(Gt[2])}function Ye(Z,Kt,Ft,Vt){we(Z),we(Kt),we(Vt),we(Kt),we(Ft),we(Vt);const Gt=s.length/3,be=R.generateSideWallUV(n,s,Gt-6,Gt-3,Gt-2,Gt-1);se(be[0]),se(be[1]),se(be[3]),se(be[1]),se(be[2]),se(be[3])}function we(Z){s.push(u[Z*3+0]),s.push(u[Z*3+1]),s.push(u[Z*3+2])}function se(Z){r.push(Z.x),r.push(Z.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return ZG(e,n,t)}static fromJSON(t,e){const n=[];for(let r=0,a=t.shapes.length;r<a;r++){const l=e[t.shapes[r]];n.push(l)}const s=t.options.extrudePath;return s!==void 0&&(t.options.extrudePath=new sE[s.type]().fromJSON(s)),new pM(n,t.options)}}const JG={generateTopUV:function(i,t,e,n,s){const r=t[e*3],a=t[e*3+1],l=t[n*3],u=t[n*3+1],f=t[s*3],m=t[s*3+1];return[new Pt(r,a),new Pt(l,u),new Pt(f,m)]},generateSideWallUV:function(i,t,e,n,s,r){const a=t[e*3],l=t[e*3+1],u=t[e*3+2],f=t[n*3],m=t[n*3+1],g=t[n*3+2],v=t[s*3],_=t[s*3+1],b=t[s*3+2],C=t[r*3],T=t[r*3+1],S=t[r*3+2];return Math.abs(l-m)<Math.abs(a-f)?[new Pt(a,1-u),new Pt(f,1-g),new Pt(v,1-b),new Pt(C,1-S)]:[new Pt(l,1-u),new Pt(m,1-g),new Pt(_,1-b),new Pt(T,1-S)]}};function ZG(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class mM extends lp{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new mM(t.radius,t.detail)}}class gM extends $e{constructor(t=[new Pt(0,-.5),new Pt(.5,0),new Pt(0,.5)],e=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:s},e=Math.floor(e),s=nn(s,0,Math.PI*2);const r=[],a=[],l=[],u=[],f=[],m=1/e,g=new nt,v=new Pt,_=new nt,b=new nt,C=new nt;let T=0,S=0;for(let R=0;R<=t.length-1;R++)switch(R){case 0:T=t[R+1].x-t[R].x,S=t[R+1].y-t[R].y,_.x=S*1,_.y=-T,_.z=S*0,C.copy(_),_.normalize(),u.push(_.x,_.y,_.z);break;case t.length-1:u.push(C.x,C.y,C.z);break;default:T=t[R+1].x-t[R].x,S=t[R+1].y-t[R].y,_.x=S*1,_.y=-T,_.z=S*0,b.copy(_),_.x+=C.x,_.y+=C.y,_.z+=C.z,_.normalize(),u.push(_.x,_.y,_.z),C.copy(b)}for(let R=0;R<=e;R++){const B=n+R*m*s,D=Math.sin(B),N=Math.cos(B);for(let I=0;I<=t.length-1;I++){g.x=t[I].x*D,g.y=t[I].y,g.z=t[I].x*N,a.push(g.x,g.y,g.z),v.x=R/e,v.y=I/(t.length-1),l.push(v.x,v.y);const F=u[3*I+0]*D,z=u[3*I+1],U=u[3*I+0]*N;f.push(F,z,U)}}for(let R=0;R<e;R++)for(let B=0;B<t.length-1;B++){const D=B+R*t.length,N=D,I=D+t.length,F=D+t.length+1,z=D+1;r.push(N,I,z),r.push(F,z,I)}this.setIndex(r),this.setAttribute("position",new Me(a,3)),this.setAttribute("uv",new Me(l,2)),this.setAttribute("normal",new Me(f,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new gM(t.points,t.segments,t.phiStart,t.phiLength)}}class Ux extends lp{constructor(t=1,e=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Ux(t.radius,t.detail)}}class My extends $e{constructor(t=1,e=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:s};const r=t/2,a=e/2,l=Math.floor(n),u=Math.floor(s),f=l+1,m=u+1,g=t/l,v=e/u,_=[],b=[],C=[],T=[];for(let S=0;S<m;S++){const R=S*v-a;for(let B=0;B<f;B++){const D=B*g-r;b.push(D,-R,0),C.push(0,0,1),T.push(B/l),T.push(1-S/u)}}for(let S=0;S<u;S++)for(let R=0;R<l;R++){const B=R+f*S,D=R+f*(S+1),N=R+1+f*(S+1),I=R+1+f*S;_.push(B,D,I),_.push(D,N,I)}this.setIndex(_),this.setAttribute("position",new Me(b,3)),this.setAttribute("normal",new Me(C,3)),this.setAttribute("uv",new Me(T,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new My(t.width,t.height,t.widthSegments,t.heightSegments)}}class vM extends $e{constructor(t=.5,e=1,n=32,s=1,r=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:s,thetaStart:r,thetaLength:a},n=Math.max(3,n),s=Math.max(1,s);const l=[],u=[],f=[],m=[];let g=t;const v=(e-t)/s,_=new nt,b=new Pt;for(let C=0;C<=s;C++){for(let T=0;T<=n;T++){const S=r+T/n*a;_.x=g*Math.cos(S),_.y=g*Math.sin(S),u.push(_.x,_.y,_.z),f.push(0,0,1),b.x=(_.x/e+1)/2,b.y=(_.y/e+1)/2,m.push(b.x,b.y)}g+=v}for(let C=0;C<s;C++){const T=C*(n+1);for(let S=0;S<n;S++){const R=S+T,B=R,D=R+n+1,N=R+n+2,I=R+1;l.push(B,D,I),l.push(D,N,I)}}this.setIndex(l),this.setAttribute("position",new Me(u,3)),this.setAttribute("normal",new Me(f,3)),this.setAttribute("uv",new Me(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new vM(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class yM extends $e{constructor(t=new Ig([new Pt(0,.5),new Pt(-.5,-.5),new Pt(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],s=[],r=[],a=[];let l=0,u=0;if(Array.isArray(t)===!1)f(t);else for(let m=0;m<t.length;m++)f(t[m]),this.addGroup(l,u,m),l+=u,u=0;this.setIndex(n),this.setAttribute("position",new Me(s,3)),this.setAttribute("normal",new Me(r,3)),this.setAttribute("uv",new Me(a,2));function f(m){const g=s.length/3,v=m.extractPoints(e);let _=v.shape;const b=v.holes;Tc.isClockWise(_)===!1&&(_=_.reverse());for(let T=0,S=b.length;T<S;T++){const R=b[T];Tc.isClockWise(R)===!0&&(b[T]=R.reverse())}const C=Tc.triangulateShape(_,b);for(let T=0,S=b.length;T<S;T++){const R=b[T];_=_.concat(R)}for(let T=0,S=_.length;T<S;T++){const R=_[T];s.push(R.x,R.y,0),r.push(0,0,1),a.push(R.x,R.y)}for(let T=0,S=C.length;T<S;T++){const R=C[T],B=R[0]+g,D=R[1]+g,N=R[2]+g;n.push(B,D,N),u+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return $G(e,t)}static fromJSON(t,e){const n=[];for(let s=0,r=t.shapes.length;s<r;s++){const a=e[t.shapes[s]];n.push(a)}return new yM(n,t.curveSegments)}}function $G(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const s=i[e];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t}class Px extends $e{constructor(t=1,e=32,n=16,s=0,r=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:s,phiLength:r,thetaStart:a,thetaLength:l},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const u=Math.min(a+l,Math.PI);let f=0;const m=[],g=new nt,v=new nt,_=[],b=[],C=[],T=[];for(let S=0;S<=n;S++){const R=[],B=S/n;let D=0;S===0&&a===0?D=.5/e:S===n&&u===Math.PI&&(D=-.5/e);for(let N=0;N<=e;N++){const I=N/e;g.x=-t*Math.cos(s+I*r)*Math.sin(a+B*l),g.y=t*Math.cos(a+B*l),g.z=t*Math.sin(s+I*r)*Math.sin(a+B*l),b.push(g.x,g.y,g.z),v.copy(g).normalize(),C.push(v.x,v.y,v.z),T.push(I+D,1-B),R.push(f++)}m.push(R)}for(let S=0;S<n;S++)for(let R=0;R<e;R++){const B=m[S][R+1],D=m[S][R],N=m[S+1][R],I=m[S+1][R+1];(S!==0||a>0)&&_.push(B,D,I),(S!==n-1||u<Math.PI)&&_.push(D,N,I)}this.setIndex(_),this.setAttribute("position",new Me(b,3)),this.setAttribute("normal",new Me(C,3)),this.setAttribute("uv",new Me(T,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Px(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class _M extends lp{constructor(t=1,e=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new _M(t.radius,t.detail)}}class AM extends $e{constructor(t=1,e=.4,n=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:s,arc:r},n=Math.floor(n),s=Math.floor(s);const a=[],l=[],u=[],f=[],m=new nt,g=new nt,v=new nt;for(let _=0;_<=n;_++)for(let b=0;b<=s;b++){const C=b/s*r,T=_/n*Math.PI*2;g.x=(t+e*Math.cos(T))*Math.cos(C),g.y=(t+e*Math.cos(T))*Math.sin(C),g.z=e*Math.sin(T),l.push(g.x,g.y,g.z),m.x=t*Math.cos(C),m.y=t*Math.sin(C),v.subVectors(g,m).normalize(),u.push(v.x,v.y,v.z),f.push(b/s),f.push(_/n)}for(let _=1;_<=n;_++)for(let b=1;b<=s;b++){const C=(s+1)*_+b-1,T=(s+1)*(_-1)+b-1,S=(s+1)*(_-1)+b,R=(s+1)*_+b;a.push(C,T,R),a.push(T,S,R)}this.setIndex(a),this.setAttribute("position",new Me(l,3)),this.setAttribute("normal",new Me(u,3)),this.setAttribute("uv",new Me(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new AM(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class xM extends $e{constructor(t=1,e=.4,n=64,s=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:s,p:r,q:a},n=Math.floor(n),s=Math.floor(s);const l=[],u=[],f=[],m=[],g=new nt,v=new nt,_=new nt,b=new nt,C=new nt,T=new nt,S=new nt;for(let B=0;B<=n;++B){const D=B/n*r*Math.PI*2;R(D,r,a,t,_),R(D+.01,r,a,t,b),T.subVectors(b,_),S.addVectors(b,_),C.crossVectors(T,S),S.crossVectors(C,T),C.normalize(),S.normalize();for(let N=0;N<=s;++N){const I=N/s*Math.PI*2,F=-e*Math.cos(I),z=e*Math.sin(I);g.x=_.x+(F*S.x+z*C.x),g.y=_.y+(F*S.y+z*C.y),g.z=_.z+(F*S.z+z*C.z),u.push(g.x,g.y,g.z),v.subVectors(g,_).normalize(),f.push(v.x,v.y,v.z),m.push(B/n),m.push(N/s)}}for(let B=1;B<=n;B++)for(let D=1;D<=s;D++){const N=(s+1)*(B-1)+(D-1),I=(s+1)*B+(D-1),F=(s+1)*B+D,z=(s+1)*(B-1)+D;l.push(N,I,z),l.push(I,F,z)}this.setIndex(l),this.setAttribute("position",new Me(u,3)),this.setAttribute("normal",new Me(f,3)),this.setAttribute("uv",new Me(m,2));function R(B,D,N,I,F){const z=Math.cos(B),U=Math.sin(B),P=N/D*B,X=Math.cos(P);F.x=I*(2+X)*.5*z,F.y=I*(2+X)*U*.5,F.z=I*Math.sin(P)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new xM(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class bM extends $e{constructor(t=new jw(new nt(-1,-1,0),new nt(-1,1,0),new nt(1,1,0)),e=64,n=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:s,closed:r};const a=t.computeFrenetFrames(e,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new nt,u=new nt,f=new Pt;let m=new nt;const g=[],v=[],_=[],b=[];C(),this.setIndex(b),this.setAttribute("position",new Me(g,3)),this.setAttribute("normal",new Me(v,3)),this.setAttribute("uv",new Me(_,2));function C(){for(let B=0;B<e;B++)T(B);T(r===!1?e:0),R(),S()}function T(B){m=t.getPointAt(B/e,m);const D=a.normals[B],N=a.binormals[B];for(let I=0;I<=s;I++){const F=I/s*Math.PI*2,z=Math.sin(F),U=-Math.cos(F);u.x=U*D.x+z*N.x,u.y=U*D.y+z*N.y,u.z=U*D.z+z*N.z,u.normalize(),v.push(u.x,u.y,u.z),l.x=m.x+n*u.x,l.y=m.y+n*u.y,l.z=m.z+n*u.z,g.push(l.x,l.y,l.z)}}function S(){for(let B=1;B<=e;B++)for(let D=1;D<=s;D++){const N=(s+1)*(B-1)+(D-1),I=(s+1)*B+(D-1),F=(s+1)*B+D,z=(s+1)*(B-1)+D;b.push(N,I,z),b.push(I,F,z)}}function R(){for(let B=0;B<=e;B++)for(let D=0;D<=s;D++)f.x=B/e,f.y=D/s,_.push(f.x,f.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new bM(new sE[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class $B extends $e{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],n=new Set,s=new nt,r=new nt;if(t.index!==null){const a=t.attributes.position,l=t.index;let u=t.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,m=u.length;f<m;++f){const g=u[f],v=g.start,_=g.count;for(let b=v,C=v+_;b<C;b+=3)for(let T=0;T<3;T++){const S=l.getX(b+T),R=l.getX(b+(T+1)%3);s.fromBufferAttribute(a,S),r.fromBufferAttribute(a,R),H6(s,r,n)===!0&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}}else{const a=t.attributes.position;for(let l=0,u=a.count/3;l<u;l++)for(let f=0;f<3;f++){const m=3*l+f,g=3*l+(f+1)%3;s.fromBufferAttribute(a,m),r.fromBufferAttribute(a,g),H6(s,r,n)===!0&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new Me(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function H6(i,t,e){const n=`${i.x},${i.y},${i.z}-${t.x},${t.y},${t.z}`,s=`${t.x},${t.y},${t.z}-${i.x},${i.y},${i.z}`;return e.has(n)===!0||e.has(s)===!0?!1:(e.add(n),e.add(s),!0)}var z6=Object.freeze({__proto__:null,BoxGeometry:s0,CapsuleGeometry:uM,CircleGeometry:hM,ConeGeometry:Ix,CylinderGeometry:Nx,DodecahedronGeometry:fM,EdgesGeometry:VB,ExtrudeGeometry:pM,IcosahedronGeometry:mM,LatheGeometry:gM,OctahedronGeometry:Ux,PlaneGeometry:My,PolyhedronGeometry:lp,RingGeometry:vM,ShapeGeometry:yM,SphereGeometry:Px,TetrahedronGeometry:_M,TorusGeometry:AM,TorusKnotGeometry:xM,TubeGeometry:bM,WireframeGeometry:$B});class tO extends gs{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ae(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class eO extends Ks{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Fx extends gs{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ae(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Dl extends Fx{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Pt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return nn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ae(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ae(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ae(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class nO extends gs{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ae(16777215),this.specular=new ae(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=Tx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class iO extends gs{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ae(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class Yw extends gs{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class sO extends gs{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=Tx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Ww extends gs{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ap,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Kw extends gs{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class rO extends gs{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ae(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class aO extends aa{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Om(i,t){return!i||i.constructor===t?i:typeof t.BYTES_PER_ELEMENT=="number"?new t(i):Array.prototype.slice.call(i)}function oO(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function lO(i){function t(s,r){return i[s]-i[r]}const e=i.length,n=new Array(e);for(let s=0;s!==e;++s)n[s]=s;return n.sort(t),n}function w5(i,t,e){const n=i.length,s=new i.constructor(n);for(let r=0,a=0;a!==n;++r){const l=e[r]*t;for(let u=0;u!==t;++u)s[a++]=i[l+u]}return s}function Jw(i,t,e,n){let s=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[s++];if(r===void 0)return;let a=r[n];if(a!==void 0)if(Array.isArray(a))do a=r[n],a!==void 0&&(t.push(r.time),e.push(...a)),r=i[s++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[n],a!==void 0&&(t.push(r.time),a.toArray(e,e.length)),r=i[s++];while(r!==void 0);else do a=r[n],a!==void 0&&(t.push(r.time),e.push(a)),r=i[s++];while(r!==void 0)}function tk(i,t,e,n,s=30){const r=i.clone();r.name=t;const a=[];for(let u=0;u<r.tracks.length;++u){const f=r.tracks[u],m=f.getValueSize(),g=[],v=[];for(let _=0;_<f.times.length;++_){const b=f.times[_]*s;if(!(b<e||b>=n)){g.push(f.times[_]);for(let C=0;C<m;++C)v.push(f.values[_*m+C])}}g.length!==0&&(f.times=Om(g,f.times.constructor),f.values=Om(v,f.values.constructor),a.push(f))}r.tracks=a;let l=1/0;for(let u=0;u<r.tracks.length;++u)l>r.tracks[u].times[0]&&(l=r.tracks[u].times[0]);for(let u=0;u<r.tracks.length;++u)r.tracks[u].shift(-1*l);return r.resetDuration(),r}function ek(i,t=0,e=i,n=30){n<=0&&(n=30);const s=e.tracks.length,r=t/n;for(let a=0;a<s;++a){const l=e.tracks[a],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const f=i.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===u});if(f===void 0)continue;let m=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let v=0;const _=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=_/3);const b=l.times.length-1;let C;if(r<=l.times[0]){const S=m,R=g-m;C=l.values.slice(S,R)}else if(r>=l.times[b]){const S=b*g+m,R=S+g-m;C=l.values.slice(S,R)}else{const S=l.createInterpolant(),R=m,B=g-m;S.evaluate(r),C=S.resultBuffer.slice(R,B)}u==="quaternion"&&new ra().fromArray(C).normalize().conjugate().toArray(C);const T=f.times.length;for(let S=0;S<T;++S){const R=S*_+v;if(u==="quaternion")ra.multiplyQuaternionsFlat(f.values,R,C,0,f.values,R);else{const B=_-v*2;for(let D=0;D<B;++D)f.values[R+D]-=C[D]}}}return i.blendMode=Dw,i}class nk{static convertArray(t,e){return Om(t,e)}static isTypedArray(t){return oO(t)}static getKeyframeOrder(t){return lO(t)}static sortedArray(t,e,n){return w5(t,e,n)}static flattenJSON(t,e,n,s){Jw(t,e,n,s)}static subclip(t,e,n,s,r=30){return tk(t,e,n,s,r)}static makeClipAdditive(t,e=0,n=t,s=30){return ek(t,e,n,s)}}class Ty{constructor(t,e,n,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,s=e[n],r=e[n-1];t:{e:{let a;n:{i:if(!(t<s)){for(let l=n+2;;){if(s===void 0){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(r=s,s=e[++n],t<s)break e}a=e.length;break n}if(!(t>=r)){const l=e[1];t<l&&(n=2,r=l);for(let u=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(s=r,r=e[--n-1],t>=r)break e}a=n,n=0;break n}break t}for(;n<a;){const l=n+a>>>1;t<e[l]?a=l:n=l+1}if(s=e[n],r=e[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,s)}return this.interpolate_(n,r,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=t*s;for(let a=0;a!==s;++a)e[a]=n[r+a];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class cO extends Ty{constructor(t,e,n,s){super(t,e,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Dm,endingEnd:Dm}}intervalChanged_(t,e,n){const s=this.parameterPositions;let r=t-2,a=t+1,l=s[r],u=s[a];if(l===void 0)switch(this.getSettings_().endingStart){case Bm:r=t,l=2*e-n;break;case W_:r=s.length-2,l=e+s[r]-s[r+1];break;default:r=t,l=n}if(u===void 0)switch(this.getSettings_().endingEnd){case Bm:a=t,u=2*n-e;break;case W_:a=1,u=n+s[1]-s[0];break;default:a=t-1,u=e}const f=(n-e)*.5,m=this.valueSize;this._weightPrev=f/(e-l),this._weightNext=f/(u-n),this._offsetPrev=r*m,this._offsetNext=a*m}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=t*l,f=u-l,m=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,_=this._weightNext,b=(n-e)/(s-e),C=b*b,T=C*b,S=-v*T+2*v*C-v*b,R=(1+v)*T+(-1.5-2*v)*C+(-.5+v)*b+1,B=(-1-_)*T+(1.5+_)*C+.5*b,D=_*T-_*C;for(let N=0;N!==l;++N)r[N]=S*a[m+N]+R*a[f+N]+B*a[u+N]+D*a[g+N];return r}}class Zw extends Ty{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=t*l,f=u-l,m=(n-e)/(s-e),g=1-m;for(let v=0;v!==l;++v)r[v]=a[f+v]*g+a[u+v]*m;return r}}class uO extends Ty{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t){return this.copySampleValue_(t-1)}}class Bl{constructor(t,e,n,s){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Om(e,this.TimeBufferType),this.values=Om(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Om(t.times,Array),values:Om(t.values,Array)};const s=t.getInterpolation();s!==t.DefaultInterpolation&&(n.interpolation=s)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new uO(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Zw(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new cO(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case cy:e=this.InterpolantFactoryMethodDiscrete;break;case uy:e=this.InterpolantFactoryMethodLinear;break;case B4:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return cy;case this.InterpolantFactoryMethodLinear:return uy;case this.InterpolantFactoryMethodSmooth:return B4}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,s=e.length;n!==s;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,s=e.length;n!==s;++n)e[n]*=t}return this}trim(t,e){const n=this.times,s=n.length;let r=0,a=s-1;for(;r!==s&&n[r]<t;)++r;for(;a!==-1&&n[a]>e;)--a;if(++a,r!==0||a!==s){r>=a&&(a=Math.max(a,1),r=a-1);const l=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*l,a*l)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,s=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let l=0;l!==r;l++){const u=n[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),t=!1;break}if(a!==null&&a>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,a),t=!1;break}a=u}if(s!==void 0&&oO(s))for(let l=0,u=s.length;l!==u;++l){const f=s[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===B4,r=t.length-1;let a=1;for(let l=1;l<r;++l){let u=!1;const f=t[l],m=t[l+1];if(f!==m&&(l!==1||f!==t[0]))if(s)u=!0;else{const g=l*n,v=g-n,_=g+n;for(let b=0;b!==n;++b){const C=e[g+b];if(C!==e[v+b]||C!==e[_+b]){u=!0;break}}}if(u){if(l!==a){t[a]=t[l];const g=l*n,v=a*n;for(let _=0;_!==n;++_)e[v+_]=e[g+_]}++a}}if(r>0){t[a]=t[r];for(let l=r*n,u=a*n,f=0;f!==n;++f)e[u+f]=e[l+f];++a}return a!==t.length?(this.times=t.slice(0,a),this.values=e.slice(0,a*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=this.constructor,s=new n(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}}Bl.prototype.ValueTypeName="";Bl.prototype.TimeBufferType=Float32Array;Bl.prototype.ValueBufferType=Float32Array;Bl.prototype.DefaultInterpolation=uy;class r0 extends Bl{constructor(t,e,n){super(t,e,n)}}r0.prototype.ValueTypeName="bool";r0.prototype.ValueBufferType=Array;r0.prototype.DefaultInterpolation=cy;r0.prototype.InterpolantFactoryMethodLinear=void 0;r0.prototype.InterpolantFactoryMethodSmooth=void 0;class $w extends Bl{constructor(t,e,n,s){super(t,e,n,s)}}$w.prototype.ValueTypeName="color";class kg extends Bl{constructor(t,e,n,s){super(t,e,n,s)}}kg.prototype.ValueTypeName="number";class hO extends Ty{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=(n-e)/(s-e);let f=t*l;for(let m=f+l;f!==m;f+=4)ra.slerpFlat(r,0,a,f-l,a,f,u);return r}}class Vg extends Bl{constructor(t,e,n,s){super(t,e,n,s)}InterpolantFactoryMethodLinear(t){return new hO(this.times,this.values,this.getValueSize(),t)}}Vg.prototype.ValueTypeName="quaternion";Vg.prototype.InterpolantFactoryMethodSmooth=void 0;class a0 extends Bl{constructor(t,e,n){super(t,e,n)}}a0.prototype.ValueTypeName="string";a0.prototype.ValueBufferType=Array;a0.prototype.DefaultInterpolation=cy;a0.prototype.InterpolantFactoryMethodLinear=void 0;a0.prototype.InterpolantFactoryMethodSmooth=void 0;class Qg extends Bl{constructor(t,e,n,s){super(t,e,n,s)}}Qg.prototype.ValueTypeName="vector";class my{constructor(t="",e=-1,n=[],s=eM){this.name=t,this.tracks=n,this.duration=e,this.blendMode=s,this.uuid=Go(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,s=1/(t.fps||1);for(let a=0,l=n.length;a!==l;++a)e.push(sk(n[a]).scale(s));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,s={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,a=n.length;r!==a;++r)e.push(Bl.toJSON(n[r]));return s}static CreateFromMorphTargetSequence(t,e,n,s){const r=e.length,a=[];for(let l=0;l<r;l++){let u=[],f=[];u.push((l+r-1)%r,l,(l+1)%r),f.push(0,1,0);const m=lO(u);u=w5(u,1,m),f=w5(f,1,m),!s&&u[0]===0&&(u.push(r),f.push(f[0])),a.push(new kg(".morphTargetInfluences["+e[l].name+"]",u,f).scale(1/n))}return new this(t,-1,a)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const s=t;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===e)return n[s];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const s={},r=/^([\w-]*?)([\d]+)$/;for(let l=0,u=t.length;l<u;l++){const f=t[l],m=f.name.match(r);if(m&&m.length>1){const g=m[1];let v=s[g];v||(s[g]=v=[]),v.push(f)}}const a=[];for(const l in s)a.push(this.CreateFromMorphTargetSequence(l,s[l],e,n));return a}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(g,v,_,b,C){if(_.length!==0){const T=[],S=[];Jw(_,T,S,b),T.length!==0&&C.push(new g(v,T,S))}},s=[],r=t.name||"default",a=t.fps||30,l=t.blendMode;let u=t.length||-1;const f=t.hierarchy||[];for(let g=0;g<f.length;g++){const v=f[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const _={};let b;for(b=0;b<v.length;b++)if(v[b].morphTargets)for(let C=0;C<v[b].morphTargets.length;C++)_[v[b].morphTargets[C]]=-1;for(const C in _){const T=[],S=[];for(let R=0;R!==v[b].morphTargets.length;++R){const B=v[b];T.push(B.time),S.push(B.morphTarget===C?1:0)}s.push(new kg(".morphTargetInfluence["+C+"]",T,S))}u=_.length*a}else{const _=".bones["+e[g].name+"]";n(Qg,_+".position",v,"pos",s),n(Vg,_+".quaternion",v,"rot",s),n(Qg,_+".scale",v,"scl",s)}}return s.length===0?null:new this(r,u,s,l)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,s=t.length;n!==s;++n){const r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ik(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return kg;case"vector":case"vector2":case"vector3":case"vector4":return Qg;case"color":return $w;case"quaternion":return Vg;case"bool":case"boolean":return r0;case"string":return a0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function sk(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=ik(i.type);if(i.times===void 0){const e=[],n=[];Jw(i.keys,e,n,"value"),i.times=e,i.values=n}return t.parse!==void 0?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const Kh={enabled:!1,files:{},add:function(i,t){this.enabled!==!1&&(this.files[i]=t)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class t7{constructor(t,e,n){const s=this;let r=!1,a=0,l=0,u;const f=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(m){l++,r===!1&&s.onStart!==void 0&&s.onStart(m,a,l),r=!0},this.itemEnd=function(m){a++,s.onProgress!==void 0&&s.onProgress(m,a,l),a===l&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(m){s.onError!==void 0&&s.onError(m)},this.resolveURL=function(m){return u?u(m):m},this.setURLModifier=function(m){return u=m,this},this.addHandler=function(m,g){return f.push(m,g),this},this.removeHandler=function(m){const g=f.indexOf(m);return g!==-1&&f.splice(g,2),this},this.getHandler=function(m){for(let g=0,v=f.length;g<v;g+=2){const _=f[g],b=f[g+1];if(_.global&&(_.lastIndex=0),_.test(m))return b}return null}}}const j1=new t7;let oa=class{constructor(t){this.manager=t!==void 0?t:j1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(s,r){n.load(t,s,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}};oa.DEFAULT_MATERIAL_NAME="__DEFAULT";const ph={};class rk extends Error{constructor(t,e){super(t),this.response=e}}class Qo extends oa{constructor(t){super(t),this.mimeType="",this.responseType=""}load(t,e,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Kh.get(t);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(ph[t]!==void 0){ph[t].push({onLoad:e,onProgress:n,onError:s});return}ph[t]=[],ph[t].push({onLoad:e,onProgress:n,onError:s});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(a).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const m=ph[t],g=f.body.getReader(),v=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),_=v?parseInt(v):0,b=_!==0;let C=0;const T=new ReadableStream({start(S){R();function R(){g.read().then(({done:B,value:D})=>{if(B)S.close();else{C+=D.byteLength;const N=new ProgressEvent("progress",{lengthComputable:b,loaded:C,total:_});for(let I=0,F=m.length;I<F;I++){const z=m[I];z.onProgress&&z.onProgress(N)}S.enqueue(D),R()}},B=>{S.error(B)})}}});return new Response(T)}else throw new rk(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(m=>new DOMParser().parseFromString(m,l));case"json":return f.json();default:if(l==="")return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,_=new TextDecoder(v);return f.arrayBuffer().then(b=>_.decode(b))}}}).then(f=>{Kh.add(t,f);const m=ph[t];delete ph[t];for(let g=0,v=m.length;g<v;g++){const _=m[g];_.onLoad&&_.onLoad(f)}}).catch(f=>{const m=ph[t];if(m===void 0)throw this.manager.itemError(t),f;delete ph[t];for(let g=0,v=m.length;g<v;g++){const _=m[g];_.onError&&_.onError(f)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class ak extends oa{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new Qo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(u){s?s(u):console.error(u),r.manager.itemError(t)}},n,s)}parse(t){const e=[];for(let n=0;n<t.length;n++){const s=my.parse(t[n]);e.push(s)}return e}}class ok extends oa{constructor(t){super(t)}load(t,e,n,s){const r=this,a=[],l=new cM,u=new Qo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(r.withCredentials);let f=0;function m(g){u.load(t[g],function(v){const _=r.parse(v,!0);a[g]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},f+=1,f===6&&(_.mipmapCount===1&&(l.minFilter=Ni),l.image=a,l.format=_.format,l.needsUpdate=!0,e&&e(l))},n,s)}if(Array.isArray(t))for(let g=0,v=t.length;g<v;++g)m(g);else u.load(t,function(g){const v=r.parse(g,!0);if(v.isCubemap){const _=v.mipmaps.length/v.mipmapCount;for(let b=0;b<_;b++){a[b]={mipmaps:[]};for(let C=0;C<v.mipmapCount;C++)a[b].mipmaps.push(v.mipmaps[b*v.mipmapCount+C]),a[b].format=v.format,a[b].width=v.width,a[b].height=v.height}l.image=a}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=Ni),l.format=v.format,l.needsUpdate=!0,e&&e(l)},n,s);return l}}class rA extends oa{constructor(t){super(t)}load(t,e,n,s){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=Kh.get(t);if(a!==void 0)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;const l=tA("img");function u(){m(),Kh.add(t,this),e&&e(this),r.manager.itemEnd(t)}function f(g){m(),s&&s(g),r.manager.itemError(t),r.manager.itemEnd(t)}function m(){l.removeEventListener("load",u,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",f,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),r.manager.itemStart(t),l.src=t,l}}class lk extends oa{constructor(t){super(t)}load(t,e,n,s){const r=new Lx;r.colorSpace=Kn;const a=new rA(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function u(f){a.load(t[f],function(m){r.images[f]=m,l++,l===6&&(r.needsUpdate=!0,e&&e(r))},void 0,s)}for(let f=0;f<t.length;++f)u(f);return r}}class ck extends oa{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new Pu,l=new Qo(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(r.withCredentials),l.load(t,function(u){let f;try{f=r.parse(u)}catch(m){if(s!==void 0)s(m);else{console.error(m);return}}f.image!==void 0?a.image=f.image:f.data!==void 0&&(a.image.width=f.width,a.image.height=f.height,a.image.data=f.data),a.wrapS=f.wrapS!==void 0?f.wrapS:Ho,a.wrapT=f.wrapT!==void 0?f.wrapT:Ho,a.magFilter=f.magFilter!==void 0?f.magFilter:Ni,a.minFilter=f.minFilter!==void 0?f.minFilter:Ni,a.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(a.colorSpace=f.colorSpace),f.flipY!==void 0&&(a.flipY=f.flipY),f.format!==void 0&&(a.format=f.format),f.type!==void 0&&(a.type=f.type),f.mipmaps!==void 0&&(a.mipmaps=f.mipmaps,a.minFilter=Tl),f.mipmapCount===1&&(a.minFilter=Ni),f.generateMipmaps!==void 0&&(a.generateMipmaps=f.generateMipmaps),a.needsUpdate=!0,e&&e(a,f)},n,s),a}}class fO extends oa{constructor(t){super(t)}load(t,e,n,s){const r=new wi,a=new rA(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(l){r.image=l,r.needsUpdate=!0,e!==void 0&&e(r)},n,s),r}}let cp=class extends Hn{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new ae(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}};class dO extends cp{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ae(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const y8=new Fe,G6=new nt,k6=new nt;class e7{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Pt(512,512),this.mapType=Ws,this.map=null,this.mapPass=null,this.matrix=new Fe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ey,this._frameExtents=new Pt(1,1),this._viewportCount=1,this._viewports=[new Bn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;G6.setFromMatrixPosition(t.matrixWorld),e.position.copy(G6),k6.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(k6),e.updateMatrixWorld(),y8.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(y8),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(y8)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class uk extends e7{constructor(){super(new Rs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=hy*2*t.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;(n!==e.fov||s!==e.aspect||r!==e.far)&&(e.fov=n,e.aspect=s,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class n7 extends cp{constructor(t,e,n=0,s=Math.PI/3,r=0,a=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.target=new Hn,this.distance=n,this.angle=s,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new uk}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const V6=new Fe,n_=new nt,_8=new nt;class hk extends e7{constructor(){super(new Rs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Pt(4,2),this._viewportCount=6,this._viewports=[new Bn(2,1,1,1),new Bn(0,1,1,1),new Bn(3,1,1,1),new Bn(1,1,1,1),new Bn(3,0,1,1),new Bn(1,0,1,1)],this._cubeDirections=[new nt(1,0,0),new nt(-1,0,0),new nt(0,0,1),new nt(0,0,-1),new nt(0,1,0),new nt(0,-1,0)],this._cubeUps=[new nt(0,1,0),new nt(0,1,0),new nt(0,1,0),new nt(0,1,0),new nt(0,0,1),new nt(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,s=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),n_.setFromMatrixPosition(t.matrixWorld),n.position.copy(n_),_8.copy(n.position),_8.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(_8),n.updateMatrixWorld(),s.makeTranslation(-n_.x,-n_.y,-n_.z),V6.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(V6)}}class i7 extends cp{constructor(t,e,n=0,s=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new hk}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Cy extends Rx{constructor(t=-1,e=1,n=1,s=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=s,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,s,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-t,a=n+t,l=s+e,u=s-e;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=f*this.view.offsetX,a=r+f*this.view.width,l-=m*this.view.offsetY,u=l-m*this.view.height}this.projectionMatrix.makeOrthographic(r,a,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class fk extends e7{constructor(){super(new Cy(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class s7 extends cp{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.target=new Hn,this.shadow=new fk}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class pO extends cp{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class mO extends cp{constructor(t,e,n=10,s=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class gO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new nt)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,s=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*s),e.addScaledVector(a[2],.488603*r),e.addScaledVector(a[3],.488603*n),e.addScaledVector(a[4],1.092548*(n*s)),e.addScaledVector(a[5],1.092548*(s*r)),e.addScaledVector(a[6],.315392*(3*r*r-1)),e.addScaledVector(a[7],1.092548*(n*r)),e.addScaledVector(a[8],.546274*(n*n-s*s)),e}getIrradianceAt(t,e){const n=t.x,s=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],2*.511664*s),e.addScaledVector(a[2],2*.511664*r),e.addScaledVector(a[3],2*.511664*n),e.addScaledVector(a[4],2*.429043*n*s),e.addScaledVector(a[5],2*.429043*s*r),e.addScaledVector(a[6],.743125*r*r-.247708),e.addScaledVector(a[7],2*.429043*n*r),e.addScaledVector(a[8],.429043*(n*n-s*s)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(t,e+s*3);return this}toArray(t=[],e=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(t,e+s*3);return t}static getBasisAt(t,e){const n=t.x,s=t.y,r=t.z;e[0]=.282095,e[1]=.488603*s,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*s,e[5]=1.092548*s*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-s*s)}}class vO extends cp{constructor(t=new gO,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class SM extends oa{constructor(t){super(t),this.textures={}}load(t,e,n,s){const r=this,a=new Qo(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(u){s?s(u):console.error(u),r.manager.itemError(t)}},n,s)}parse(t){const e=this.textures;function n(r){return e[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),e[r]}const s=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(s.uuid=t.uuid),t.name!==void 0&&(s.name=t.name),t.color!==void 0&&s.color!==void 0&&s.color.setHex(t.color),t.roughness!==void 0&&(s.roughness=t.roughness),t.metalness!==void 0&&(s.metalness=t.metalness),t.sheen!==void 0&&(s.sheen=t.sheen),t.sheenColor!==void 0&&(s.sheenColor=new ae().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(s.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(t.emissive),t.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(t.specular),t.specularIntensity!==void 0&&(s.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(s.shininess=t.shininess),t.clearcoat!==void 0&&(s.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(s.dispersion=t.dispersion),t.iridescence!==void 0&&(s.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(s.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(s.transmission=t.transmission),t.thickness!==void 0&&(s.thickness=t.thickness),t.attenuationDistance!==void 0&&(s.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(s.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(s.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(s.fog=t.fog),t.flatShading!==void 0&&(s.flatShading=t.flatShading),t.blending!==void 0&&(s.blending=t.blending),t.combine!==void 0&&(s.combine=t.combine),t.side!==void 0&&(s.side=t.side),t.shadowSide!==void 0&&(s.shadowSide=t.shadowSide),t.opacity!==void 0&&(s.opacity=t.opacity),t.transparent!==void 0&&(s.transparent=t.transparent),t.alphaTest!==void 0&&(s.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(s.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(s.depthFunc=t.depthFunc),t.depthTest!==void 0&&(s.depthTest=t.depthTest),t.depthWrite!==void 0&&(s.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(s.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(s.blendSrc=t.blendSrc),t.blendDst!==void 0&&(s.blendDst=t.blendDst),t.blendEquation!==void 0&&(s.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(s.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(s.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(s.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(s.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(s.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(s.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(s.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(s.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(s.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(s.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(s.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(s.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(s.rotation=t.rotation),t.linewidth!==void 0&&(s.linewidth=t.linewidth),t.dashSize!==void 0&&(s.dashSize=t.dashSize),t.gapSize!==void 0&&(s.gapSize=t.gapSize),t.scale!==void 0&&(s.scale=t.scale),t.polygonOffset!==void 0&&(s.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(s.dithering=t.dithering),t.alphaToCoverage!==void 0&&(s.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(s.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(s.visible=t.visible),t.toneMapped!==void 0&&(s.toneMapped=t.toneMapped),t.userData!==void 0&&(s.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?s.vertexColors=t.vertexColors>0:s.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const r in t.uniforms){const a=t.uniforms[r];switch(s.uniforms[r]={},a.type){case"t":s.uniforms[r].value=n(a.value);break;case"c":s.uniforms[r].value=new ae().setHex(a.value);break;case"v2":s.uniforms[r].value=new Pt().fromArray(a.value);break;case"v3":s.uniforms[r].value=new nt().fromArray(a.value);break;case"v4":s.uniforms[r].value=new Bn().fromArray(a.value);break;case"m3":s.uniforms[r].value=new on().fromArray(a.value);break;case"m4":s.uniforms[r].value=new Fe().fromArray(a.value);break;default:s.uniforms[r].value=a.value}}if(t.defines!==void 0&&(s.defines=t.defines),t.vertexShader!==void 0&&(s.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(s.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(s.glslVersion=t.glslVersion),t.extensions!==void 0)for(const r in t.extensions)s.extensions[r]=t.extensions[r];if(t.lights!==void 0&&(s.lights=t.lights),t.clipping!==void 0&&(s.clipping=t.clipping),t.size!==void 0&&(s.size=t.size),t.sizeAttenuation!==void 0&&(s.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(s.map=n(t.map)),t.matcap!==void 0&&(s.matcap=n(t.matcap)),t.alphaMap!==void 0&&(s.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(s.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(s.bumpScale=t.bumpScale),t.normalMap!==void 0&&(s.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(s.normalMapType=t.normalMapType),t.normalScale!==void 0){let r=t.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new Pt().fromArray(r)}return t.displacementMap!==void 0&&(s.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(s.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(s.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(s.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(s.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(s.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(s.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(s.specularMap=n(t.specularMap)),t.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(t.specularIntensityMap)),t.specularColorMap!==void 0&&(s.specularColorMap=n(t.specularColorMap)),t.envMap!==void 0&&(s.envMap=n(t.envMap)),t.envMapRotation!==void 0&&s.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(s.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(s.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(s.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(s.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(s.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(s.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(s.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(s.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(s.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Pt().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(s.iridescenceMap=n(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(s.transmissionMap=n(t.transmissionMap)),t.thicknessMap!==void 0&&(s.thicknessMap=n(t.thicknessMap)),t.anisotropyMap!==void 0&&(s.anisotropyMap=n(t.anisotropyMap)),t.sheenColorMap!==void 0&&(s.sheenColorMap=n(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(t.sheenRoughnessMap)),s}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return SM.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:tO,SpriteMaterial:Pw,RawShaderMaterial:eO,ShaderMaterial:Ks,PointsMaterial:lM,MeshPhysicalMaterial:Dl,MeshStandardMaterial:Fx,MeshPhongMaterial:nO,MeshToonMaterial:iO,MeshNormalMaterial:Yw,MeshLambertMaterial:sO,MeshDepthMaterial:Ww,MeshDistanceMaterial:Kw,MeshBasicMaterial:zo,MeshMatcapMaterial:rO,LineDashedMaterial:aO,LineBasicMaterial:aa,Material:gs};return new e[t]}}class Wd{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class yO extends $e{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class _O extends oa{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new Qo(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(u){s?s(u):console.error(u),r.manager.itemError(t)}},n,s)}parse(t){const e={},n={};function s(_,b){if(e[b]!==void 0)return e[b];const T=_.interleavedBuffers[b],S=r(_,T.buffer),R=X1(T.type,S),B=new Dx(R,T.stride);return B.uuid=T.uuid,e[b]=B,B}function r(_,b){if(n[b]!==void 0)return n[b];const T=_.arrayBuffers[b],S=new Uint32Array(T).buffer;return n[b]=S,S}const a=t.isInstancedBufferGeometry?new yO:new $e,l=t.data.index;if(l!==void 0){const _=X1(l.type,l.array);a.setIndex(new zn(_,1))}const u=t.data.attributes;for(const _ in u){const b=u[_];let C;if(b.isInterleavedBufferAttribute){const T=s(t.data,b.data);C=new ep(T,b.itemSize,b.offset,b.normalized)}else{const T=X1(b.type,b.array),S=b.isInstancedBufferAttribute?zg:zn;C=new S(T,b.itemSize,b.normalized)}b.name!==void 0&&(C.name=b.name),b.usage!==void 0&&C.setUsage(b.usage),a.setAttribute(_,C)}const f=t.data.morphAttributes;if(f)for(const _ in f){const b=f[_],C=[];for(let T=0,S=b.length;T<S;T++){const R=b[T];let B;if(R.isInterleavedBufferAttribute){const D=s(t.data,R.data);B=new ep(D,R.itemSize,R.offset,R.normalized)}else{const D=X1(R.type,R.array);B=new zn(D,R.itemSize,R.normalized)}R.name!==void 0&&(B.name=R.name),C.push(B)}a.morphAttributes[_]=C}t.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=t.data.groups||t.data.drawcalls||t.data.offsets;if(g!==void 0)for(let _=0,b=g.length;_!==b;++_){const C=g[_];a.addGroup(C.start,C.count,C.materialIndex)}const v=t.data.boundingSphere;if(v!==void 0){const _=new nt;v.center!==void 0&&_.fromArray(v.center),a.boundingSphere=new pr(_,v.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}}class dk extends oa{constructor(t){super(t)}load(t,e,n,s){const r=this,a=this.path===""?Wd.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const l=new Qo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(u){let f=null;try{f=JSON.parse(u)}catch(g){s!==void 0&&s(g),console.error("THREE:ObjectLoader: Can't parse "+t+".",g.message);return}const m=f.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}r.parse(f,e)},n,s)}async loadAsync(t,e){const n=this,s=this.path===""?Wd.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const r=new Qo(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const a=await r.loadAsync(t,e),l=JSON.parse(a),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await n.parseAsync(l)}parse(t,e){const n=this.parseAnimations(t.animations),s=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,s),a=this.parseImages(t.images,function(){e!==void 0&&e(f)}),l=this.parseTextures(t.textures,a),u=this.parseMaterials(t.materials,l),f=this.parseObject(t.object,r,u,l,n),m=this.parseSkeletons(t.skeletons,f);if(this.bindSkeletons(f,m),this.bindLightTargets(f),e!==void 0){let g=!1;for(const v in a)if(a[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&e(f)}return f}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),a=this.parseTextures(t.textures,r),l=this.parseMaterials(t.materials,a),u=this.parseObject(t.object,s,l,a,e),f=this.parseSkeletons(t.skeletons,u);return this.bindSkeletons(u,f),this.bindLightTargets(u),u}parseShapes(t){const e={};if(t!==void 0)for(let n=0,s=t.length;n<s;n++){const r=new Ig().fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},s={};if(e.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),t!==void 0)for(let r=0,a=t.length;r<a;r++){const l=new Bx().fromJSON(t[r],s);n[l.uuid]=l}return n}parseGeometries(t,e){const n={};if(t!==void 0){const s=new _O;for(let r=0,a=t.length;r<a;r++){let l;const u=t[r];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=s.parse(u);break;default:u.type in z6?l=z6[u.type].fromJSON(u,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),n[u.uuid]=l}}return n}parseMaterials(t,e){const n={},s={};if(t!==void 0){const r=new SM;r.setTextures(e);for(let a=0,l=t.length;a<l;a++){const u=t[a];n[u.uuid]===void 0&&(n[u.uuid]=r.parse(u)),s[u.uuid]=n[u.uuid]}}return s}parseAnimations(t){const e={};if(t!==void 0)for(let n=0;n<t.length;n++){const s=t[n],r=my.parse(s);e[r.uuid]=r}return e}parseImages(t,e){const n=this,s={};let r;function a(u){return n.manager.itemStart(u),r.load(u,function(){n.manager.itemEnd(u)},void 0,function(){n.manager.itemError(u),n.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const f=u,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;return a(m)}else return u.data?{data:X1(u.type,u.data),width:u.width,height:u.height}:null}if(t!==void 0&&t.length>0){const u=new t7(e);r=new rA(u),r.setCrossOrigin(this.crossOrigin);for(let f=0,m=t.length;f<m;f++){const g=t[f],v=g.url;if(Array.isArray(v)){const _=[];for(let b=0,C=v.length;b<C;b++){const T=v[b],S=l(T);S!==null&&(S instanceof HTMLImageElement?_.push(S):_.push(new Pu(S.data,S.width,S.height)))}s[g.uuid]=new Xd(_)}else{const _=l(g.url);s[g.uuid]=new Xd(_)}}}return s}async parseImagesAsync(t){const e=this,n={};let s;async function r(a){if(typeof a=="string"){const l=a,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:e.resourcePath+l;return await s.loadAsync(u)}else return a.data?{data:X1(a.type,a.data),width:a.width,height:a.height}:null}if(t!==void 0&&t.length>0){s=new rA(this.manager),s.setCrossOrigin(this.crossOrigin);for(let a=0,l=t.length;a<l;a++){const u=t[a],f=u.url;if(Array.isArray(f)){const m=[];for(let g=0,v=f.length;g<v;g++){const _=f[g],b=await r(_);b!==null&&(b instanceof HTMLImageElement?m.push(b):m.push(new Pu(b.data,b.width,b.height)))}n[u.uuid]=new Xd(m)}else{const m=await r(u.url);n[u.uuid]=new Xd(m)}}}return n}parseTextures(t,e){function n(r,a){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),a[r])}const s={};if(t!==void 0)for(let r=0,a=t.length;r<a;r++){const l=t[r];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),e[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=e[l.image],f=u.data;let m;Array.isArray(f)?(m=new Lx,f.length===6&&(m.needsUpdate=!0)):(f&&f.data?m=new Pu:m=new wi,f&&(m.needsUpdate=!0)),m.source=u,m.uuid=l.uuid,l.name!==void 0&&(m.name=l.name),l.mapping!==void 0&&(m.mapping=n(l.mapping,pk)),l.channel!==void 0&&(m.channel=l.channel),l.offset!==void 0&&m.offset.fromArray(l.offset),l.repeat!==void 0&&m.repeat.fromArray(l.repeat),l.center!==void 0&&m.center.fromArray(l.center),l.rotation!==void 0&&(m.rotation=l.rotation),l.wrap!==void 0&&(m.wrapS=n(l.wrap[0],Q6),m.wrapT=n(l.wrap[1],Q6)),l.format!==void 0&&(m.format=l.format),l.internalFormat!==void 0&&(m.internalFormat=l.internalFormat),l.type!==void 0&&(m.type=l.type),l.colorSpace!==void 0&&(m.colorSpace=l.colorSpace),l.minFilter!==void 0&&(m.minFilter=n(l.minFilter,X6)),l.magFilter!==void 0&&(m.magFilter=n(l.magFilter,X6)),l.anisotropy!==void 0&&(m.anisotropy=l.anisotropy),l.flipY!==void 0&&(m.flipY=l.flipY),l.generateMipmaps!==void 0&&(m.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(m.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(m.compareFunction=l.compareFunction),l.userData!==void 0&&(m.userData=l.userData),s[l.uuid]=m}return s}parseObject(t,e,n,s,r){let a;function l(v){return e[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),e[v]}function u(v){if(v!==void 0){if(Array.isArray(v)){const _=[];for(let b=0,C=v.length;b<C;b++){const T=v[b];n[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",T),_.push(n[T])}return _}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function f(v){return s[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),s[v]}let m,g;switch(t.type){case"Scene":a=new eA,t.background!==void 0&&(Number.isInteger(t.background)?a.background=new ae(t.background):a.background=f(t.background)),t.environment!==void 0&&(a.environment=f(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?a.fog=new rM(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(a.fog=new sM(t.fog.color,t.fog.density)),t.fog.name!==""&&(a.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(a.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(a.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&a.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":a=new Rs(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(a.focus=t.focus),t.zoom!==void 0&&(a.zoom=t.zoom),t.filmGauge!==void 0&&(a.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(a.filmOffset=t.filmOffset),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new Cy(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(a.zoom=t.zoom),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new pO(t.color,t.intensity);break;case"DirectionalLight":a=new s7(t.color,t.intensity),a.target=t.target||"";break;case"PointLight":a=new i7(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new mO(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new n7(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),a.target=t.target||"";break;case"HemisphereLight":a=new dO(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=new vO().fromJSON(t);break;case"SkinnedMesh":m=l(t.geometry),g=u(t.material),a=new Fw(m,g),t.bindMode!==void 0&&(a.bindMode=t.bindMode),t.bindMatrix!==void 0&&a.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(a.skeleton=t.skeleton);break;case"Mesh":m=l(t.geometry),g=u(t.material),a=new as(m,g);break;case"InstancedMesh":m=l(t.geometry),g=u(t.material);const v=t.count,_=t.instanceMatrix,b=t.instanceColor;a=new Hw(m,g,v),a.instanceMatrix=new zg(new Float32Array(_.array),16),b!==void 0&&(a.instanceColor=new zg(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":m=l(t.geometry),g=u(t.material),a=new GB(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,g),a.geometry=m,a.perObjectFrustumCulled=t.perObjectFrustumCulled,a.sortObjects=t.sortObjects,a._drawRanges=t.drawRanges,a._reservedRanges=t.reservedRanges,a._geometryInfo=t.geometryInfo.map(C=>{let T=null,S=null;return C.boundingBox!==void 0&&(T=new Br,T.min.fromArray(C.boundingBox.min),T.max.fromArray(C.boundingBox.max)),C.boundingSphere!==void 0&&(S=new pr,S.radius=C.boundingSphere.radius,S.center.fromArray(C.boundingSphere.center)),{...C,boundingBox:T,boundingSphere:S}}),a._instanceInfo=t.instanceInfo,a._availableInstanceIds=t._availableInstanceIds,a._availableGeometryIds=t._availableGeometryIds,a._nextIndexStart=t.nextIndexStart,a._nextVertexStart=t.nextVertexStart,a._geometryCount=t.geometryCount,a._maxInstanceCount=t.maxInstanceCount,a._maxVertexCount=t.maxVertexCount,a._maxIndexCount=t.maxIndexCount,a._geometryInitialized=t.geometryInitialized,a._matricesTexture=f(t.matricesTexture.uuid),a._indirectTexture=f(t.indirectTexture.uuid),t.colorsTexture!==void 0&&(a._colorsTexture=f(t.colorsTexture.uuid)),t.boundingSphere!==void 0&&(a.boundingSphere=new pr,a.boundingSphere.center.fromArray(t.boundingSphere.center),a.boundingSphere.radius=t.boundingSphere.radius),t.boundingBox!==void 0&&(a.boundingBox=new Br,a.boundingBox.min.fromArray(t.boundingBox.min),a.boundingBox.max.fromArray(t.boundingBox.max));break;case"LOD":a=new zB;break;case"Line":a=new rf(l(t.geometry),u(t.material));break;case"LineLoop":a=new zw(l(t.geometry),u(t.material));break;case"LineSegments":a=new Dc(l(t.geometry),u(t.material));break;case"PointCloud":case"Points":a=new Gw(l(t.geometry),u(t.material));break;case"Sprite":a=new HB(u(t.material));break;case"Group":a=new Wh;break;case"Bone":a=new aM;break;default:a=new Hn}if(a.uuid=t.uuid,t.name!==void 0&&(a.name=t.name),t.matrix!==void 0?(a.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(t.position!==void 0&&a.position.fromArray(t.position),t.rotation!==void 0&&a.rotation.fromArray(t.rotation),t.quaternion!==void 0&&a.quaternion.fromArray(t.quaternion),t.scale!==void 0&&a.scale.fromArray(t.scale)),t.up!==void 0&&a.up.fromArray(t.up),t.castShadow!==void 0&&(a.castShadow=t.castShadow),t.receiveShadow!==void 0&&(a.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(a.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(a.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(a.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(a.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(a.visible=t.visible),t.frustumCulled!==void 0&&(a.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(a.renderOrder=t.renderOrder),t.userData!==void 0&&(a.userData=t.userData),t.layers!==void 0&&(a.layers.mask=t.layers),t.children!==void 0){const v=t.children;for(let _=0;_<v.length;_++)a.add(this.parseObject(v[_],e,n,s,r))}if(t.animations!==void 0){const v=t.animations;for(let _=0;_<v.length;_++){const b=v[_];a.animations.push(r[b])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(a.autoUpdate=t.autoUpdate);const v=t.levels;for(let _=0;_<v.length;_++){const b=v[_],C=a.getObjectByProperty("uuid",b.object);C!==void 0&&a.addLevel(C,b.distance,b.hysteresis)}}return a}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=e[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const n=e.target,s=t.getObjectByProperty("uuid",n);s!==void 0?e.target=s:e.target=new Hn}})}}const pk={UVMapping:qE,CubeReflectionMapping:sf,CubeRefractionMapping:$d,EquirectangularReflectionMapping:q_,EquirectangularRefractionMapping:Y_,CubeUVReflectionMapping:by},Q6={RepeatWrapping:tp,ClampToEdgeWrapping:Ho,MirroredRepeatWrapping:ay},X6={NearestFilter:os,NearestMipmapNearestFilter:YE,NearestMipmapLinearFilter:Lm,LinearFilter:Ni,LinearMipmapNearestFilter:W1,LinearMipmapLinearFilter:Tl};class AO extends oa{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=Kh.get(t);if(a!==void 0){if(r.manager.itemStart(t),a.then){a.then(f=>{e&&e(f),r.manager.itemEnd(t)}).catch(f=>{s&&s(f)});return}return setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const u=fetch(t,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(f){return Kh.add(t,f),e&&e(f),r.manager.itemEnd(t),f}).catch(function(f){s&&s(f),Kh.remove(t),r.manager.itemError(t),r.manager.itemEnd(t)});Kh.add(t,u),r.manager.itemStart(t)}}let i4,r7=class{static getContext(){return i4===void 0&&(i4=new(window.AudioContext||window.webkitAudioContext)),i4}static setContext(t){i4=t}};class mk extends oa{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new Qo(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(u){try{const f=u.slice(0);r7.getContext().decodeAudioData(f,function(g){e(g)}).catch(l)}catch(f){l(f)}},n,s);function l(u){s?s(u):console.error(u),r.manager.itemError(t)}}}const j6=new Fe,q6=new Fe,cm=new Fe;class gk{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Rs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Rs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,cm.copy(t.projectionMatrix);const s=e.eyeSep/2,r=s*e.near/e.focus,a=e.near*Math.tan(Ng*e.fov*.5)/e.zoom;let l,u;q6.elements[12]=-s,j6.elements[12]=s,l=-a*e.aspect+r,u=a*e.aspect+r,cm.elements[0]=2*e.near/(u-l),cm.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(cm),l=-a*e.aspect-r,u=a*e.aspect-r,cm.elements[0]=2*e.near/(u-l),cm.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(cm)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(q6),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(j6)}}class xO extends Rs{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}let a7=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Y6(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Y6();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};function Y6(){return performance.now()}const um=new nt,W6=new ra,vk=new nt,hm=new nt;class yk extends Hn{constructor(){super(),this.type="AudioListener",this.context=r7.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new a7}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(um,W6,vk),hm.set(0,0,-1).applyQuaternion(W6),e.positionX){const s=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(um.x,s),e.positionY.linearRampToValueAtTime(um.y,s),e.positionZ.linearRampToValueAtTime(um.z,s),e.forwardX.linearRampToValueAtTime(hm.x,s),e.forwardY.linearRampToValueAtTime(hm.y,s),e.forwardZ.linearRampToValueAtTime(hm.z,s),e.upX.linearRampToValueAtTime(n.x,s),e.upY.linearRampToValueAtTime(n.y,s),e.upZ.linearRampToValueAtTime(n.z,s)}else e.setPosition(um.x,um.y,um.z),e.setOrientation(hm.x,hm.y,hm.z,n.x,n.y,n.z)}}class bO extends Hn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const fm=new nt,K6=new ra,_k=new nt,dm=new nt;class Ak extends bO{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(fm,K6,_k),dm.set(0,0,1).applyQuaternion(K6);const e=this.panner;if(e.positionX){const n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(fm.x,n),e.positionY.linearRampToValueAtTime(fm.y,n),e.positionZ.linearRampToValueAtTime(fm.z,n),e.orientationX.linearRampToValueAtTime(dm.x,n),e.orientationY.linearRampToValueAtTime(dm.y,n),e.orientationZ.linearRampToValueAtTime(dm.z,n)}else e.setPosition(fm.x,fm.y,fm.z),e.setOrientation(dm.x,dm.y,dm.z)}}class xk{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class SO{constructor(t,e,n){this.binding=t,this.valueSize=n;let s,r,a;switch(e){case"quaternion":s=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,s=this.valueSize,r=t*s+s;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==s;++l)n[r+l]=n[l];a=e}else{a+=e;const l=e/a;this._mixBufferRegion(n,r,0,l,s)}this.cumulativeWeight=a}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,s,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,s=t*e+e,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const u=e*this._origIndex;this._mixBufferRegion(n,s,u,1-r,e)}a>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*e,1,e);for(let u=e,f=e+e;u!==f;++u)if(n[u]!==n[u+e]){l.setValue(n,s);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,s=n*this._origIndex;t.getValue(e,s);for(let r=n,a=s;r!==a;++r)e[r]=e[s+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,s,r){if(s>=.5)for(let a=0;a!==r;++a)t[e+a]=t[n+a]}_slerp(t,e,n,s){ra.slerpFlat(t,e,t,e,t,n,s)}_slerpAdditive(t,e,n,s,r){const a=this._workIndex*r;ra.multiplyQuaternionsFlat(t,a,t,e,t,n),ra.slerpFlat(t,e,t,e,t,a,s)}_lerp(t,e,n,s,r){const a=1-s;for(let l=0;l!==r;++l){const u=e+l;t[u]=t[u]*a+t[n+l]*s}}_lerpAdditive(t,e,n,s,r){for(let a=0;a!==r;++a){const l=e+a;t[l]=t[l]+t[n+a]*s}}}const o7="\\[\\]\\.:\\/",bk=new RegExp("["+o7+"]","g"),l7="[^"+o7+"]",Sk="[^"+o7.replace("\\.","")+"]",Ek=/((?:WC+[\/:])*)/.source.replace("WC",l7),Mk=/(WCOD+)?/.source.replace("WCOD",Sk),Tk=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",l7),Ck=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",l7),wk=new RegExp("^"+Ek+Mk+Tk+Ck+"$"),Rk=["material","materials","bones","map"];class Lk{constructor(t,e,n){const s=n||Qn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,s)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=n.length;s!==r;++s)n[s].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class Qn{constructor(t,e,n){this.path=e,this.parsedPath=n||Qn.parseTrackName(e),this.node=Qn.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Qn.Composite(t,e,n):new Qn(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(bk,"")}static parseTrackName(t){const e=wk.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=n.nodeName.substring(s+1);Rk.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(r){for(let a=0;a<r.length;a++){const l=r[a];if(l.name===e||l.uuid===e)return l;const u=n(l.children);if(u)return u}return null},s=n(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)t[e++]=n[s]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,s=e.propertyName;let r=e.propertyIndex;if(t||(t=Qn.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let f=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let m=0;m<t.length;m++)if(t[m].name===f){f=m;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(f!==void 0){if(t[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[f]}}const a=t[s];if(a===void 0){const f=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+s+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?l=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[r]!==void 0&&(r=t.morphTargetDictionary[r])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Qn.Composite=Lk;Qn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Qn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Qn.prototype.GetterByBindingType=[Qn.prototype._getValue_direct,Qn.prototype._getValue_array,Qn.prototype._getValue_arrayElement,Qn.prototype._getValue_toArray];Qn.prototype.SetterByBindingTypeAndVersioning=[[Qn.prototype._setValue_direct,Qn.prototype._setValue_direct_setNeedsUpdate,Qn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_array,Qn.prototype._setValue_array_setNeedsUpdate,Qn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_arrayElement,Qn.prototype._setValue_arrayElement_setNeedsUpdate,Qn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_fromArray,Qn.prototype._setValue_fromArray_setNeedsUpdate,Qn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Dk{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Go(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,s=arguments.length;n!==s;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,s=this._parsedPaths,r=this._bindings,a=r.length;let l,u=t.length,f=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const v=arguments[m],_=v.uuid;let b=e[_];if(b===void 0){b=u++,e[_]=b,t.push(v);for(let C=0,T=a;C!==T;++C)r[C].push(new Qn(v,n[C],s[C]))}else if(b<f){l=t[b];const C=--f,T=t[C];e[T.uuid]=b,t[b]=T,e[_]=C,t[C]=v;for(let S=0,R=a;S!==R;++S){const B=r[S],D=B[C];let N=B[b];B[b]=D,N===void 0&&(N=new Qn(v,n[S],s[S])),B[C]=N}}else t[b]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],f=u.uuid,m=e[f];if(m!==void 0&&m>=r){const g=r++,v=t[g];e[v.uuid]=m,t[m]=v,e[f]=g,t[g]=u;for(let _=0,b=s;_!==b;++_){const C=n[_],T=C[g],S=C[m];C[m]=T,C[g]=S}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_,a=t.length;for(let l=0,u=arguments.length;l!==u;++l){const f=arguments[l],m=f.uuid,g=e[m];if(g!==void 0)if(delete e[m],g<r){const v=--r,_=t[v],b=--a,C=t[b];e[_.uuid]=g,t[g]=_,e[C.uuid]=v,t[v]=C,t.pop();for(let T=0,S=s;T!==S;++T){const R=n[T],B=R[v],D=R[b];R[g]=B,R[v]=D,R.pop()}}else{const v=--a,_=t[v];v>0&&(e[_.uuid]=g),t[g]=_,t.pop();for(let b=0,C=s;b!==C;++b){const T=n[b];T[g]=T[v],T.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let s=n[t];const r=this._bindings;if(s!==void 0)return r[s];const a=this._paths,l=this._parsedPaths,u=this._objects,f=u.length,m=this.nCachedObjects_,g=new Array(f);s=r.length,n[t]=s,a.push(t),l.push(e),r.push(g);for(let v=m,_=u.length;v!==_;++v){const b=u[v];g[v]=new Qn(b,t,e)}return g}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const s=this._paths,r=this._parsedPaths,a=this._bindings,l=a.length-1,u=a[l],f=t[l];e[f]=n,a[n]=u,a.pop(),r[n]=r[l],r.pop(),s[n]=s[l],s.pop()}}}class EO{constructor(t,e,n=null,s=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=s;const r=e.tracks,a=r.length,l=new Array(a),u={endingStart:Dm,endingEnd:Dm};for(let f=0;f!==a;++f){const m=r[f].createInterpolant(null);l[f]=m,m.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=yB,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n=!1){if(t.fadeOut(e),this.fadeIn(e),n===!0){const s=this._clip.duration,r=t._clip.duration,a=r/s,l=s/r;t.warp(1,a,e),this.warp(l,1,e)}return this}crossFadeTo(t,e,n=!1){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const s=this._mixer,r=s.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=s._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,f=l.sampleValues;return u[0]=r,u[1]=r+n,f[0]=t/a,f[1]=e/a,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,s){if(!this.enabled){this._updateWeight(t);return}const r=this._startTime;if(r!==null){const u=(t-r)*n;u<0||n===0?e=0:(this._startTime=null,e=n*u)}e*=this._updateTimeScale(t);const a=this._updateTime(e),l=this._updateWeight(t);if(l>0){const u=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case Dw:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(a),f[m].accumulateAdditive(l);break;case eM:default:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(a),f[m].accumulate(s,l)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(t)[0];e*=s,t>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(t)[0];e*=s,t>n.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let s=this.time+t,r=this._loopCount;const a=n===_B;if(t===0)return r===-1?s:a&&(r&1)===1?e-s:s;if(n===vB){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(s>=e)s=e;else if(s<0)s=0;else{this.time=s;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(r===-1&&(t>=0?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),s>=e||s<0){const l=Math.floor(s/e);s-=e*l,r+=Math.abs(l);const u=this.repetitions-r;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=t>0?e:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(u===1){const f=t<0;this._setEndings(f,!f,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=s;if(a&&(r&1)===1)return e-s}return s}_setEndings(t,e,n){const s=this._interpolantSettings;n?(s.endingStart=Bm,s.endingEnd=Bm):(t?s.endingStart=this.zeroSlopeAtStart?Bm:Dm:s.endingStart=W_,e?s.endingEnd=this.zeroSlopeAtEnd?Bm:Dm:s.endingEnd=W_)}_scheduleFading(t,e,n){const s=this._mixer,r=s.time;let a=this._weightInterpolant;a===null&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=r,u[0]=e,l[1]=r+t,u[1]=n,this}}const Bk=new Float32Array(1);class Ok extends qo{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,s=t._clip.tracks,r=s.length,a=t._propertyBindings,l=t._interpolants,u=n.uuid,f=this._bindingsByRootAndName;let m=f[u];m===void 0&&(m={},f[u]=m);for(let g=0;g!==r;++g){const v=s[g],_=v.name;let b=m[_];if(b!==void 0)++b.referenceCount,a[g]=b;else{if(b=a[g],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,u,_));continue}const C=e&&e._propertyBindings[g].binding.parsedPath;b=new SO(Qn.create(n,_,C),v.ValueTypeName,v.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,u,_),a[g]=b}l[g].resultBuffer=b.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,s=t._clip.uuid,r=this._actionsByClip[s];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,s,n)}const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,n){const s=this._actions,r=this._actionsByClip;let a=r[e];if(a===void 0)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{const l=a.knownActions;t._byClipCacheIndex=l.length,l.push(t)}t._cacheIndex=s.length,s.push(t),a.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],s=t._cacheIndex;n._cacheIndex=s,e[s]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,a=this._actionsByClip,l=a[r],u=l.knownActions,f=u[u.length-1],m=t._byClipCacheIndex;f._byClipCacheIndex=m,u[m]=f,u.pop(),t._byClipCacheIndex=null;const g=l.actionByRoot,v=(t._localRoot||this._root).uuid;delete g[v],u.length===0&&delete a[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,s=this._nActiveActions++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,s=--this._nActiveActions,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const s=this._bindingsByRootAndName,r=this._bindings;let a=s[e];a===void 0&&(a={},s[e]=a),a[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,s=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,l=a[s],u=e[e.length-1],f=t._cacheIndex;u._cacheIndex=f,e[f]=u,e.pop(),delete l[r],Object.keys(l).length===0&&delete a[s]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,s=this._nActiveBindings++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,s=--this._nActiveBindings,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new Zw(new Float32Array(2),new Float32Array(2),1,Bk),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,s=--this._nActiveControlInterpolants,r=e[s];t.__cacheIndex=s,e[s]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const s=e||this._root,r=s.uuid;let a=typeof t=="string"?my.findByName(s,t):t;const l=a!==null?a.uuid:t,u=this._actionsByClip[l];let f=null;if(n===void 0&&(a!==null?n=a.blendMode:n=eM),u!==void 0){const g=u.actionByRoot[r];if(g!==void 0&&g.blendMode===n)return g;f=u.knownActions[0],a===null&&(a=f._clip)}if(a===null)return null;const m=new EO(this,a,e,n);return this._bindAction(m,f),this._addInactiveAction(m,l,r),m}existingAction(t,e){const n=e||this._root,s=n.uuid,r=typeof t=="string"?my.findByName(n,t):t,a=r?r.uuid:t,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[s]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,s=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1;for(let f=0;f!==n;++f)e[f]._update(s,t,r,a);const l=this._bindings,u=this._nActiveBindings;for(let f=0;f!==u;++f)l[f].apply(a);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,s=this._actionsByClip,r=s[n];if(r!==void 0){const a=r.knownActions;for(let l=0,u=a.length;l!==u;++l){const f=a[l];this._deactivateAction(f);const m=f._cacheIndex,g=e[e.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,g._cacheIndex=m,e[m]=g,e.pop(),this._removeInactiveBindingsForAction(f)}delete s[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const a in n){const l=n[a].actionByRoot,u=l[e];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const s=this._bindingsByRootAndName,r=s[e];if(r!==void 0)for(const a in r){const l=r[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Nk extends nM{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new iM(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class Ik extends nM{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isRenderTargetArray=!0,this.depth=n,this.texture=new wx(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class xn{constructor(t){this.value=t}clone(){return new xn(this.value.clone===void 0?this.value:this.value.clone())}}let Uk=0;class Pk extends qo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Uk++}),this.name="",this.usage=J_,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,s=e.length;n<s;n++){const r=Array.isArray(e[n])?e[n]:[e[n]];for(let a=0;a<r.length;a++)this.uniforms.push(r[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class Fk extends Dx{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class Hk{constructor(t,e,n,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const J6=new Fe;class MO{constructor(t,e,n=0,s=1/0){this.ray=new Sy(t,e),this.near=n,this.far=s,this.camera=null,this.layers=new fy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return J6.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(J6),this}intersectObject(t,e=!0,n=[]){return R5(t,this,n,e),n.sort(Z6),n}intersectObjects(t,e=!0,n=[]){for(let s=0,r=t.length;s<r;s++)R5(t[s],this,n,e);return n.sort(Z6),n}}function Z6(i,t){return i.distance-t.distance}function R5(i,t,e,n){let s=!0;if(i.layers.test(t.layers)&&i.raycast(t,e)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let a=0,l=r.length;a<l;a++)R5(r[a],t,e,!0)}}class zk{constructor(t=1,e=0,n=0){this.radius=t,this.phi=e,this.theta=n}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=nn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(nn(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Gk{constructor(t=1,e=0,n=0){this.radius=t,this.theta=e,this.y=n}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return new this.constructor().copy(this)}}class c7{constructor(t,e,n,s){c7.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let n=0;n<4;n++)this.elements[n]=t[n+e];return this}set(t,e,n,s){const r=this.elements;return r[0]=t,r[2]=e,r[1]=n,r[3]=s,this}}const $6=new Pt;class kk{constructor(t=new Pt(1/0,1/0),e=new Pt(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=$6.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,$6).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const tL=new nt,s4=new nt;class Vk{constructor(t=new nt,e=new nt){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){tL.subVectors(t,this.start),s4.subVectors(this.end,this.start);const n=s4.dot(s4);let r=s4.dot(tL)/n;return e&&(r=nn(r,0,1)),r}closestPointToPoint(t,e,n){const s=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(s).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const eL=new nt;class Qk extends Hn{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new $e,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,u=32;a<u;a++,l++){const f=a/u*Math.PI*2,m=l/u*Math.PI*2;s.push(Math.cos(f),Math.sin(f),1,Math.cos(m),Math.sin(m),1)}n.setAttribute("position",new Me(s,3));const r=new aa({fog:!1,toneMapped:!1});this.cone=new Dc(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),eL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(eL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ld=new nt,r4=new Fe,A8=new Fe;class Xk extends Dc{constructor(t){const e=TO(t),n=new $e,s=[],r=[],a=new ae(0,0,1),l=new ae(0,1,0);for(let f=0;f<e.length;f++){const m=e[f];m.parent&&m.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(a.r,a.g,a.b),r.push(l.r,l.g,l.b))}n.setAttribute("position",new Me(s,3)),n.setAttribute("color",new Me(r,3));const u=new aa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,s=n.getAttribute("position");A8.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<e.length;r++){const l=e[r];l.parent&&l.parent.isBone&&(r4.multiplyMatrices(A8,l.matrixWorld),ld.setFromMatrixPosition(r4),s.setXYZ(a,ld.x,ld.y,ld.z),r4.multiplyMatrices(A8,l.parent.matrixWorld),ld.setFromMatrixPosition(r4),s.setXYZ(a+1,ld.x,ld.y,ld.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function TO(i){const t=[];i.isBone===!0&&t.push(i);for(let e=0;e<i.children.length;e++)t.push(...TO(i.children[e]));return t}class jk extends as{constructor(t,e,n){const s=new Px(e,4,2),r=new zo({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const qk=new nt,nL=new ae,iL=new ae;class Yk extends Hn{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new Ux(e);s.rotateY(Math.PI*.5),this.material=new zo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),a=new Float32Array(r.count*3);s.setAttribute("color",new zn(a,3)),this.add(new as(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");nL.copy(this.light.color),iL.copy(this.light.groundColor);for(let n=0,s=e.count;n<s;n++){const r=n<s/2?nL:iL;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(qk.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Wk extends Dc{constructor(t=10,e=10,n=4473924,s=8947848){n=new ae(n),s=new ae(s);const r=e/2,a=t/e,l=t/2,u=[],f=[];for(let v=0,_=0,b=-l;v<=e;v++,b+=a){u.push(-l,0,b,l,0,b),u.push(b,0,-l,b,0,l);const C=v===r?n:s;C.toArray(f,_),_+=3,C.toArray(f,_),_+=3,C.toArray(f,_),_+=3,C.toArray(f,_),_+=3}const m=new $e;m.setAttribute("position",new Me(u,3)),m.setAttribute("color",new Me(f,3));const g=new aa({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Kk extends Dc{constructor(t=10,e=16,n=8,s=64,r=4473924,a=8947848){r=new ae(r),a=new ae(a);const l=[],u=[];if(e>1)for(let g=0;g<e;g++){const v=g/e*(Math.PI*2),_=Math.sin(v)*t,b=Math.cos(v)*t;l.push(0,0,0),l.push(_,0,b);const C=g&1?r:a;u.push(C.r,C.g,C.b),u.push(C.r,C.g,C.b)}for(let g=0;g<n;g++){const v=g&1?r:a,_=t-t/n*g;for(let b=0;b<s;b++){let C=b/s*(Math.PI*2),T=Math.sin(C)*_,S=Math.cos(C)*_;l.push(T,0,S),u.push(v.r,v.g,v.b),C=(b+1)/s*(Math.PI*2),T=Math.sin(C)*_,S=Math.cos(C)*_,l.push(T,0,S),u.push(v.r,v.g,v.b)}}const f=new $e;f.setAttribute("position",new Me(l,3)),f.setAttribute("color",new Me(u,3));const m=new aa({vertexColors:!0,toneMapped:!1});super(f,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const sL=new nt,a4=new nt,rL=new nt;class Jk extends Hn{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let s=new $e;s.setAttribute("position",new Me([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new aa({fog:!1,toneMapped:!1});this.lightPlane=new rf(s,r),this.add(this.lightPlane),s=new $e,s.setAttribute("position",new Me([0,0,0,0,0,1],3)),this.targetLine=new rf(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),sL.setFromMatrixPosition(this.light.matrixWorld),a4.setFromMatrixPosition(this.light.target.matrixWorld),rL.subVectors(a4,sL),this.lightPlane.lookAt(a4),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(a4),this.targetLine.scale.z=rL.length()}}const o4=new nt,is=new Rx;class Zk extends Dc{constructor(t){const e=new $e,n=new aa({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(b,C){u(b),u(C)}function u(b){s.push(0,0,0),r.push(0,0,0),a[b]===void 0&&(a[b]=[]),a[b].push(s.length/3-1)}e.setAttribute("position",new Me(s,3)),e.setAttribute("color",new Me(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const f=new ae(16755200),m=new ae(16711680),g=new ae(43775),v=new ae(16777215),_=new ae(3355443);this.setColors(f,m,g,v,_)}setColors(t,e,n,s,r){const l=this.geometry.getAttribute("color");l.setXYZ(0,t.r,t.g,t.b),l.setXYZ(1,t.r,t.g,t.b),l.setXYZ(2,t.r,t.g,t.b),l.setXYZ(3,t.r,t.g,t.b),l.setXYZ(4,t.r,t.g,t.b),l.setXYZ(5,t.r,t.g,t.b),l.setXYZ(6,t.r,t.g,t.b),l.setXYZ(7,t.r,t.g,t.b),l.setXYZ(8,t.r,t.g,t.b),l.setXYZ(9,t.r,t.g,t.b),l.setXYZ(10,t.r,t.g,t.b),l.setXYZ(11,t.r,t.g,t.b),l.setXYZ(12,t.r,t.g,t.b),l.setXYZ(13,t.r,t.g,t.b),l.setXYZ(14,t.r,t.g,t.b),l.setXYZ(15,t.r,t.g,t.b),l.setXYZ(16,t.r,t.g,t.b),l.setXYZ(17,t.r,t.g,t.b),l.setXYZ(18,t.r,t.g,t.b),l.setXYZ(19,t.r,t.g,t.b),l.setXYZ(20,t.r,t.g,t.b),l.setXYZ(21,t.r,t.g,t.b),l.setXYZ(22,t.r,t.g,t.b),l.setXYZ(23,t.r,t.g,t.b),l.setXYZ(24,e.r,e.g,e.b),l.setXYZ(25,e.r,e.g,e.b),l.setXYZ(26,e.r,e.g,e.b),l.setXYZ(27,e.r,e.g,e.b),l.setXYZ(28,e.r,e.g,e.b),l.setXYZ(29,e.r,e.g,e.b),l.setXYZ(30,e.r,e.g,e.b),l.setXYZ(31,e.r,e.g,e.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,r.r,r.g,r.b),l.setXYZ(41,r.r,r.g,r.b),l.setXYZ(42,r.r,r.g,r.b),l.setXYZ(43,r.r,r.g,r.b),l.setXYZ(44,r.r,r.g,r.b),l.setXYZ(45,r.r,r.g,r.b),l.setXYZ(46,r.r,r.g,r.b),l.setXYZ(47,r.r,r.g,r.b),l.setXYZ(48,r.r,r.g,r.b),l.setXYZ(49,r.r,r.g,r.b),l.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap,n=1,s=1;is.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===Cl?-1:0;ps("c",e,t,is,0,0,r),ps("t",e,t,is,0,0,1),ps("n1",e,t,is,-1,-1,r),ps("n2",e,t,is,n,-1,r),ps("n3",e,t,is,-1,s,r),ps("n4",e,t,is,n,s,r),ps("f1",e,t,is,-1,-1,1),ps("f2",e,t,is,n,-1,1),ps("f3",e,t,is,-1,s,1),ps("f4",e,t,is,n,s,1),ps("u1",e,t,is,n*.7,s*1.1,r),ps("u2",e,t,is,-1*.7,s*1.1,r),ps("u3",e,t,is,0,s*2,r),ps("cf1",e,t,is,-1,0,1),ps("cf2",e,t,is,n,0,1),ps("cf3",e,t,is,0,-1,1),ps("cf4",e,t,is,0,s,1),ps("cn1",e,t,is,-1,0,r),ps("cn2",e,t,is,n,0,r),ps("cn3",e,t,is,0,-1,r),ps("cn4",e,t,is,0,s,r),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ps(i,t,e,n,s,r,a){o4.set(s,r,a).unproject(n);const l=t[i];if(l!==void 0){const u=e.getAttribute("position");for(let f=0,m=l.length;f<m;f++)u.setXYZ(l[f],o4.x,o4.y,o4.z)}}const l4=new Br;class $k extends Dc{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),r=new $e;r.setIndex(new zn(n,1)),r.setAttribute("position",new zn(s,3)),super(r,new aa({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&l4.setFromObject(this.object),l4.isEmpty())return;const t=l4.min,e=l4.max,n=this.geometry.attributes.position,s=n.array;s[0]=e.x,s[1]=e.y,s[2]=e.z,s[3]=t.x,s[4]=e.y,s[5]=e.z,s[6]=t.x,s[7]=t.y,s[8]=e.z,s[9]=e.x,s[10]=t.y,s[11]=e.z,s[12]=e.x,s[13]=e.y,s[14]=t.z,s[15]=t.x,s[16]=e.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=e.x,s[22]=t.y,s[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tV extends Dc{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new $e;r.setIndex(new zn(n,1)),r.setAttribute("position",new Me(s,3)),super(r,new aa({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class eV extends rf{constructor(t,e=1,n=16776960){const s=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new $e;a.setAttribute("position",new Me(r,3)),a.computeBoundingSphere(),super(a,new aa({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new $e;u.setAttribute("position",new Me(l,3)),u.computeBoundingSphere(),this.add(new as(u,new zo({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const aL=new nt;let c4,x8;class nV extends Hn{constructor(t=new nt(0,0,1),e=new nt(0,0,0),n=1,s=16776960,r=n*.2,a=r*.2){super(),this.type="ArrowHelper",c4===void 0&&(c4=new $e,c4.setAttribute("position",new Me([0,0,0,0,1,0],3)),x8=new Ix(.5,1,5,1),x8.translate(0,-.5,0)),this.position.copy(e),this.line=new rf(c4,new aa({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new as(x8,new zo({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{aL.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(aL,e)}}setLength(t,e=t*.2,n=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class iV extends Dc{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new $e;s.setAttribute("position",new Me(e,3)),s.setAttribute("color",new Me(n,3));const r=new aa({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(t,e,n){const s=new ae,r=this.geometry.attributes.color.array;return s.set(t),s.toArray(r,0),s.toArray(r,3),s.set(e),s.toArray(r,6),s.toArray(r,9),s.set(n),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class sV{constructor(){this.type="ShapePath",this.color=new ae,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new rE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,s){return this.currentPath.quadraticCurveTo(t,e,n,s),this}bezierCurveTo(t,e,n,s,r,a){return this.currentPath.bezierCurveTo(t,e,n,s,r,a),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(S){const R=[];for(let B=0,D=S.length;B<D;B++){const N=S[B],I=new Ig;I.curves=N.curves,R.push(I)}return R}function n(S,R){const B=R.length;let D=!1;for(let N=B-1,I=0;I<B;N=I++){let F=R[N],z=R[I],U=z.x-F.x,P=z.y-F.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(F=R[I],U=-U,z=R[N],P=-P),S.y<F.y||S.y>z.y)continue;if(S.y===F.y){if(S.x===F.x)return!0}else{const X=P*(S.x-F.x)-U*(S.y-F.y);if(X===0)return!0;if(X<0)continue;D=!D}}else{if(S.y!==F.y)continue;if(z.x<=S.x&&S.x<=F.x||F.x<=S.x&&S.x<=z.x)return!0}}return D}const s=Tc.isClockWise,r=this.subPaths;if(r.length===0)return[];let a,l,u;const f=[];if(r.length===1)return l=r[0],u=new Ig,u.curves=l.curves,f.push(u),f;let m=!s(r[0].getPoints());m=t?!m:m;const g=[],v=[];let _=[],b=0,C;v[b]=void 0,_[b]=[];for(let S=0,R=r.length;S<R;S++)l=r[S],C=l.getPoints(),a=s(C),a=t?!a:a,a?(!m&&v[b]&&b++,v[b]={s:new Ig,p:C},v[b].s.curves=l.curves,m&&b++,_[b]=[]):_[b].push({h:l,p:C[0]});if(!v[0])return e(r);if(v.length>1){let S=!1,R=0;for(let B=0,D=v.length;B<D;B++)g[B]=[];for(let B=0,D=v.length;B<D;B++){const N=_[B];for(let I=0;I<N.length;I++){const F=N[I];let z=!0;for(let U=0;U<v.length;U++)n(F.p,v[U].p)&&(B!==U&&R++,z?(z=!1,g[U].push(F)):S=!0);z&&g[B].push(F)}}R>0&&S===!1&&(_=g)}let T;for(let S=0,R=v.length;S<R;S++){u=v[S].s,f.push(u),T=_[S];for(let B=0,D=T.length;B<D;B++)u.holes.push(T[B].h)}return f}}class rV extends qo{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function aV(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function oV(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function lV(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function L5(i,t,e,n){const s=cV(n);switch(e){case Cw:return i*t;case ZE:return i*t/s.components*s.byteLength;case Cx:return i*t/s.components*s.byteLength;case Rw:return i*t*2/s.components*s.byteLength;case $E:return i*t*2/s.components*s.byteLength;case ww:return i*t*3/s.components*s.byteLength;case ea:return i*t*4/s.components*s.byteLength;case tM:return i*t*4/s.components*s.byteLength;case B_:case O_:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case N_:case I_:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case L3:case B3:return Math.max(i,16)*Math.max(t,8)/4;case R3:case D3:return Math.max(i,8)*Math.max(t,8)/2;case O3:case N3:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case I3:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case U3:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case P3:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case F3:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case H3:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case z3:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case G3:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case k3:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case V3:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case Q3:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case X3:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case j3:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case q3:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case Y3:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case W3:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case U_:case K3:case J3:return Math.ceil(i/4)*Math.ceil(t/4)*16;case Lw:case Z3:return Math.ceil(i/4)*Math.ceil(t/4)*8;case $3:case tE:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function cV(i){switch(i){case Ws:case Ew:return{byteLength:1,components:1};case oy:case Mw:case i0:return{byteLength:2,components:1};case KE:case JE:return{byteLength:2,components:4};case Fu:case WE:case Oa:return{byteLength:4,components:1};case Tw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class uV{static contain(t,e){return aV(t,e)}static cover(t,e){return oV(t,e)}static fill(t){return lV(t)}static getByteLength(t,e,n,s){return L5(t,e,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:n0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=n0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function CO(){let i=null,t=!1,e=null,n=null;function s(r,a){e(r,a),n=i.requestAnimationFrame(s)}return{start:function(){t!==!0&&e!==null&&(n=i.requestAnimationFrame(s),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(r){e=r},setContext:function(r){i=r}}}function hV(i){const t=new WeakMap;function e(l,u){const f=l.array,m=l.usage,g=f.byteLength,v=i.createBuffer();i.bindBuffer(u,v),i.bufferData(u,f,m),l.onUploadCallback();let _;if(f instanceof Float32Array)_=i.FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?_=i.HALF_FLOAT:_=i.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=i.SHORT;else if(f instanceof Uint32Array)_=i.UNSIGNED_INT;else if(f instanceof Int32Array)_=i.INT;else if(f instanceof Int8Array)_=i.BYTE;else if(f instanceof Uint8Array)_=i.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:g}}function n(l,u,f){const m=u.array,g=u.updateRanges;if(i.bindBuffer(f,l),g.length===0)i.bufferSubData(f,0,m);else{g.sort((_,b)=>_.start-b.start);let v=0;for(let _=1;_<g.length;_++){const b=g[v],C=g[_];C.start<=b.start+b.count+1?b.count=Math.max(b.count,C.start+C.count-b.start):(++v,g[v]=C)}g.length=v+1;for(let _=0,b=g.length;_<b;_++){const C=g[_];i.bufferSubData(f,C.start*m.BYTES_PER_ELEMENT,m,C.start,C.count)}u.clearUpdateRanges()}u.onUploadCallback()}function s(l){return l.isInterleavedBufferAttribute&&(l=l.data),t.get(l)}function r(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=t.get(l);u&&(i.deleteBuffer(u.buffer),t.delete(l))}function a(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const m=t.get(l);(!m||m.version<l.version)&&t.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=t.get(l);if(f===void 0)t.set(l,e(l,u));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(f.buffer,l,u),f.version=l.version}}return{get:s,remove:r,update:a}}var fV=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,dV=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,pV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,mV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,gV=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,vV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,yV=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,_V=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,AV=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,xV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,bV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,SV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,EV=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,MV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,TV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,CV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,wV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,RV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,LV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,DV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,BV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,OV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,NV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,IV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,UV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,PV=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,FV=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,HV=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,zV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,GV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,kV="gl_FragColor = linearToOutputTexel( gl_FragColor );",VV=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,QV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,XV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,jV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,qV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,YV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,WV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,KV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,JV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ZV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,$V=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,tQ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,eQ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,nQ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,iQ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,sQ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,rQ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,aQ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,oQ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lQ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,cQ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,uQ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,hQ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,fQ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,dQ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,pQ=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,mQ=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,gQ=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vQ=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,yQ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,_Q=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,AQ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,xQ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bQ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,SQ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,EQ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,MQ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,TQ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,CQ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,wQ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,RQ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,LQ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,DQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,BQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,OQ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,NQ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,IQ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,UQ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,PQ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,FQ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,HQ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,zQ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,GQ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,kQ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,VQ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,QQ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,XQ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,jQ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,qQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,YQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,WQ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,KQ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,JQ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ZQ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,$Q=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,tX=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,eX=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,nX=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,iX=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,sX=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,rX=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,aX=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,oX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,lX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,uX=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const hX=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fX=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pX=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,gX=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,yX=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,_X=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,AX=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,xX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,bX=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,SX=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,EX=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,MX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,TX=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CX=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wX=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RX=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,LX=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DX=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,BX=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,OX=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,NX=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IX=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,UX=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PX=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FX=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HX=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,zX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,GX=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kX=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,VX=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,QX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fn={alphahash_fragment:fV,alphahash_pars_fragment:dV,alphamap_fragment:pV,alphamap_pars_fragment:mV,alphatest_fragment:gV,alphatest_pars_fragment:vV,aomap_fragment:yV,aomap_pars_fragment:_V,batching_pars_vertex:AV,batching_vertex:xV,begin_vertex:bV,beginnormal_vertex:SV,bsdfs:EV,iridescence_fragment:MV,bumpmap_pars_fragment:TV,clipping_planes_fragment:CV,clipping_planes_pars_fragment:wV,clipping_planes_pars_vertex:RV,clipping_planes_vertex:LV,color_fragment:DV,color_pars_fragment:BV,color_pars_vertex:OV,color_vertex:NV,common:IV,cube_uv_reflection_fragment:UV,defaultnormal_vertex:PV,displacementmap_pars_vertex:FV,displacementmap_vertex:HV,emissivemap_fragment:zV,emissivemap_pars_fragment:GV,colorspace_fragment:kV,colorspace_pars_fragment:VV,envmap_fragment:QV,envmap_common_pars_fragment:XV,envmap_pars_fragment:jV,envmap_pars_vertex:qV,envmap_physical_pars_fragment:sQ,envmap_vertex:YV,fog_vertex:WV,fog_pars_vertex:KV,fog_fragment:JV,fog_pars_fragment:ZV,gradientmap_pars_fragment:$V,lightmap_pars_fragment:tQ,lights_lambert_fragment:eQ,lights_lambert_pars_fragment:nQ,lights_pars_begin:iQ,lights_toon_fragment:rQ,lights_toon_pars_fragment:aQ,lights_phong_fragment:oQ,lights_phong_pars_fragment:lQ,lights_physical_fragment:cQ,lights_physical_pars_fragment:uQ,lights_fragment_begin:hQ,lights_fragment_maps:fQ,lights_fragment_end:dQ,logdepthbuf_fragment:pQ,logdepthbuf_pars_fragment:mQ,logdepthbuf_pars_vertex:gQ,logdepthbuf_vertex:vQ,map_fragment:yQ,map_pars_fragment:_Q,map_particle_fragment:AQ,map_particle_pars_fragment:xQ,metalnessmap_fragment:bQ,metalnessmap_pars_fragment:SQ,morphinstance_vertex:EQ,morphcolor_vertex:MQ,morphnormal_vertex:TQ,morphtarget_pars_vertex:CQ,morphtarget_vertex:wQ,normal_fragment_begin:RQ,normal_fragment_maps:LQ,normal_pars_fragment:DQ,normal_pars_vertex:BQ,normal_vertex:OQ,normalmap_pars_fragment:NQ,clearcoat_normal_fragment_begin:IQ,clearcoat_normal_fragment_maps:UQ,clearcoat_pars_fragment:PQ,iridescence_pars_fragment:FQ,opaque_fragment:HQ,packing:zQ,premultiplied_alpha_fragment:GQ,project_vertex:kQ,dithering_fragment:VQ,dithering_pars_fragment:QQ,roughnessmap_fragment:XQ,roughnessmap_pars_fragment:jQ,shadowmap_pars_fragment:qQ,shadowmap_pars_vertex:YQ,shadowmap_vertex:WQ,shadowmask_pars_fragment:KQ,skinbase_vertex:JQ,skinning_pars_vertex:ZQ,skinning_vertex:$Q,skinnormal_vertex:tX,specularmap_fragment:eX,specularmap_pars_fragment:nX,tonemapping_fragment:iX,tonemapping_pars_fragment:sX,transmission_fragment:rX,transmission_pars_fragment:aX,uv_pars_fragment:oX,uv_pars_vertex:lX,uv_vertex:cX,worldpos_vertex:uX,background_vert:hX,background_frag:fX,backgroundCube_vert:dX,backgroundCube_frag:pX,cube_vert:mX,cube_frag:gX,depth_vert:vX,depth_frag:yX,distanceRGBA_vert:_X,distanceRGBA_frag:AX,equirect_vert:xX,equirect_frag:bX,linedashed_vert:SX,linedashed_frag:EX,meshbasic_vert:MX,meshbasic_frag:TX,meshlambert_vert:CX,meshlambert_frag:wX,meshmatcap_vert:RX,meshmatcap_frag:LX,meshnormal_vert:DX,meshnormal_frag:BX,meshphong_vert:OX,meshphong_frag:NX,meshphysical_vert:IX,meshphysical_frag:UX,meshtoon_vert:PX,meshtoon_frag:FX,points_vert:HX,points_frag:zX,shadow_vert:GX,shadow_frag:kX,sprite_vert:VX,sprite_frag:QX},de={common:{diffuse:{value:new ae(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new on}},envmap:{envMap:{value:null},envMapRotation:{value:new on},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new on}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new on}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new on},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new on},normalScale:{value:new Pt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new on},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new on}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new on}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new on}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ae(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ae(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0},uvTransform:{value:new on}},sprite:{diffuse:{value:new ae(16777215)},opacity:{value:1},center:{value:new Pt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}}},Sc={basic:{uniforms:Ta([de.common,de.specularmap,de.envmap,de.aomap,de.lightmap,de.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:Ta([de.common,de.specularmap,de.envmap,de.aomap,de.lightmap,de.emissivemap,de.bumpmap,de.normalmap,de.displacementmap,de.fog,de.lights,{emissive:{value:new ae(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:Ta([de.common,de.specularmap,de.envmap,de.aomap,de.lightmap,de.emissivemap,de.bumpmap,de.normalmap,de.displacementmap,de.fog,de.lights,{emissive:{value:new ae(0)},specular:{value:new ae(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:Ta([de.common,de.envmap,de.aomap,de.lightmap,de.emissivemap,de.bumpmap,de.normalmap,de.displacementmap,de.roughnessmap,de.metalnessmap,de.fog,de.lights,{emissive:{value:new ae(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},toon:{uniforms:Ta([de.common,de.aomap,de.lightmap,de.emissivemap,de.bumpmap,de.normalmap,de.displacementmap,de.gradientmap,de.fog,de.lights,{emissive:{value:new ae(0)}}]),vertexShader:fn.meshtoon_vert,fragmentShader:fn.meshtoon_frag},matcap:{uniforms:Ta([de.common,de.bumpmap,de.normalmap,de.displacementmap,de.fog,{matcap:{value:null}}]),vertexShader:fn.meshmatcap_vert,fragmentShader:fn.meshmatcap_frag},points:{uniforms:Ta([de.points,de.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:Ta([de.common,de.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:Ta([de.common,de.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:Ta([de.common,de.bumpmap,de.normalmap,de.displacementmap,{opacity:{value:1}}]),vertexShader:fn.meshnormal_vert,fragmentShader:fn.meshnormal_frag},sprite:{uniforms:Ta([de.sprite,de.fog]),vertexShader:fn.sprite_vert,fragmentShader:fn.sprite_frag},background:{uniforms:{uvTransform:{value:new on},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fn.background_vert,fragmentShader:fn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new on}},vertexShader:fn.backgroundCube_vert,fragmentShader:fn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:Ta([de.common,de.displacementmap,{referencePosition:{value:new nt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:Ta([de.lights,de.fog,{color:{value:new ae(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};Sc.physical={uniforms:Ta([Sc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new on},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new on},clearcoatNormalScale:{value:new Pt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new on},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new on},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new on},sheen:{value:0},sheenColor:{value:new ae(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new on},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new on},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new on},transmissionSamplerSize:{value:new Pt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new on},attenuationDistance:{value:0},attenuationColor:{value:new ae(0)},specularColor:{value:new ae(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new on},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new on},anisotropyVector:{value:new Pt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new on}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag};const u4={r:0,b:0,g:0},pm=new Vo,XX=new Fe;function jX(i,t,e,n,s,r,a){const l=new ae(0);let u=r===!0?0:1,f,m,g=null,v=0,_=null;function b(B){let D=B.isScene===!0?B.background:null;return D&&D.isTexture&&(D=(B.backgroundBlurriness>0?e:t).get(D)),D}function C(B){let D=!1;const N=b(B);N===null?S(l,u):N&&N.isColor&&(S(N,1),D=!0);const I=i.xr.getEnvironmentBlendMode();I==="additive"?n.buffers.color.setClear(0,0,0,1,a):I==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(i.autoClear||D)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function T(B,D){const N=b(D);N&&(N.isCubeTexture||N.mapping===by)?(m===void 0&&(m=new as(new s0(1,1,1),new Ks({name:"BackgroundCubeMaterial",uniforms:dy(Sc.backgroundCube.uniforms),vertexShader:Sc.backgroundCube.vertexShader,fragmentShader:Sc.backgroundCube.fragmentShader,side:qs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(I,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(m)),pm.copy(D.backgroundRotation),pm.x*=-1,pm.y*=-1,pm.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(pm.y*=-1,pm.z*=-1),m.material.uniforms.envMap.value=N,m.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(XX.makeRotationFromEuler(pm)),m.material.toneMapped=Pn.getTransfer(N.colorSpace)!==fi,(g!==N||v!==N.version||_!==i.toneMapping)&&(m.material.needsUpdate=!0,g=N,v=N.version,_=i.toneMapping),m.layers.enableAll(),B.unshift(m,m.geometry,m.material,0,0,null)):N&&N.isTexture&&(f===void 0&&(f=new as(new My(2,2),new Ks({name:"BackgroundMaterial",uniforms:dy(Sc.background.uniforms),vertexShader:Sc.background.vertexShader,fragmentShader:Sc.background.fragmentShader,side:Lc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(f)),f.material.uniforms.t2D.value=N,f.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,f.material.toneMapped=Pn.getTransfer(N.colorSpace)!==fi,N.matrixAutoUpdate===!0&&N.updateMatrix(),f.material.uniforms.uvTransform.value.copy(N.matrix),(g!==N||v!==N.version||_!==i.toneMapping)&&(f.material.needsUpdate=!0,g=N,v=N.version,_=i.toneMapping),f.layers.enableAll(),B.unshift(f,f.geometry,f.material,0,0,null))}function S(B,D){B.getRGB(u4,NB(i)),n.buffers.color.setClear(u4.r,u4.g,u4.b,D,a)}function R(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(B,D=1){l.set(B),u=D,S(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(B){u=B,S(l,u)},render:C,addToRenderList:T,dispose:R}}function qX(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=v(null);let r=s,a=!1;function l(P,X,ot,it,ct){let dt=!1;const Q=g(it,ot,X);r!==Q&&(r=Q,f(r.object)),dt=_(P,it,ot,ct),dt&&b(P,it,ot,ct),ct!==null&&t.update(ct,i.ELEMENT_ARRAY_BUFFER),(dt||a)&&(a=!1,D(P,X,ot,it),ct!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(ct).buffer))}function u(){return i.createVertexArray()}function f(P){return i.bindVertexArray(P)}function m(P){return i.deleteVertexArray(P)}function g(P,X,ot){const it=ot.wireframe===!0;let ct=n[P.id];ct===void 0&&(ct={},n[P.id]=ct);let dt=ct[X.id];dt===void 0&&(dt={},ct[X.id]=dt);let Q=dt[it];return Q===void 0&&(Q=v(u()),dt[it]=Q),Q}function v(P){const X=[],ot=[],it=[];for(let ct=0;ct<e;ct++)X[ct]=0,ot[ct]=0,it[ct]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:ot,attributeDivisors:it,object:P,attributes:{},index:null}}function _(P,X,ot,it){const ct=r.attributes,dt=X.attributes;let Q=0;const tt=ot.getAttributes();for(const et in tt)if(tt[et].location>=0){const J=ct[et];let at=dt[et];if(at===void 0&&(et==="instanceMatrix"&&P.instanceMatrix&&(at=P.instanceMatrix),et==="instanceColor"&&P.instanceColor&&(at=P.instanceColor)),J===void 0||J.attribute!==at||at&&J.data!==at.data)return!0;Q++}return r.attributesNum!==Q||r.index!==it}function b(P,X,ot,it){const ct={},dt=X.attributes;let Q=0;const tt=ot.getAttributes();for(const et in tt)if(tt[et].location>=0){let J=dt[et];J===void 0&&(et==="instanceMatrix"&&P.instanceMatrix&&(J=P.instanceMatrix),et==="instanceColor"&&P.instanceColor&&(J=P.instanceColor));const at={};at.attribute=J,J&&J.data&&(at.data=J.data),ct[et]=at,Q++}r.attributes=ct,r.attributesNum=Q,r.index=it}function C(){const P=r.newAttributes;for(let X=0,ot=P.length;X<ot;X++)P[X]=0}function T(P){S(P,0)}function S(P,X){const ot=r.newAttributes,it=r.enabledAttributes,ct=r.attributeDivisors;ot[P]=1,it[P]===0&&(i.enableVertexAttribArray(P),it[P]=1),ct[P]!==X&&(i.vertexAttribDivisor(P,X),ct[P]=X)}function R(){const P=r.newAttributes,X=r.enabledAttributes;for(let ot=0,it=X.length;ot<it;ot++)X[ot]!==P[ot]&&(i.disableVertexAttribArray(ot),X[ot]=0)}function B(P,X,ot,it,ct,dt,Q){Q===!0?i.vertexAttribIPointer(P,X,ot,ct,dt):i.vertexAttribPointer(P,X,ot,it,ct,dt)}function D(P,X,ot,it){C();const ct=it.attributes,dt=ot.getAttributes(),Q=X.defaultAttributeValues;for(const tt in dt){const et=dt[tt];if(et.location>=0){let _t=ct[tt];if(_t===void 0&&(tt==="instanceMatrix"&&P.instanceMatrix&&(_t=P.instanceMatrix),tt==="instanceColor"&&P.instanceColor&&(_t=P.instanceColor)),_t!==void 0){const J=_t.normalized,at=_t.itemSize,xt=t.get(_t);if(xt===void 0)continue;const Et=xt.buffer,lt=xt.type,wt=xt.bytesPerElement,Bt=lt===i.INT||lt===i.UNSIGNED_INT||_t.gpuType===WE;if(_t.isInterleavedBufferAttribute){const Ut=_t.data,Wt=Ut.stride,ve=_t.offset;if(Ut.isInstancedInterleavedBuffer){for(let ee=0;ee<et.locationSize;ee++)S(et.location+ee,Ut.meshPerAttribute);P.isInstancedMesh!==!0&&it._maxInstanceCount===void 0&&(it._maxInstanceCount=Ut.meshPerAttribute*Ut.count)}else for(let ee=0;ee<et.locationSize;ee++)T(et.location+ee);i.bindBuffer(i.ARRAY_BUFFER,Et);for(let ee=0;ee<et.locationSize;ee++)B(et.location+ee,at/et.locationSize,lt,J,Wt*wt,(ve+at/et.locationSize*ee)*wt,Bt)}else{if(_t.isInstancedBufferAttribute){for(let Ut=0;Ut<et.locationSize;Ut++)S(et.location+Ut,_t.meshPerAttribute);P.isInstancedMesh!==!0&&it._maxInstanceCount===void 0&&(it._maxInstanceCount=_t.meshPerAttribute*_t.count)}else for(let Ut=0;Ut<et.locationSize;Ut++)T(et.location+Ut);i.bindBuffer(i.ARRAY_BUFFER,Et);for(let Ut=0;Ut<et.locationSize;Ut++)B(et.location+Ut,at/et.locationSize,lt,J,at*wt,at/et.locationSize*Ut*wt,Bt)}}else if(Q!==void 0){const J=Q[tt];if(J!==void 0)switch(J.length){case 2:i.vertexAttrib2fv(et.location,J);break;case 3:i.vertexAttrib3fv(et.location,J);break;case 4:i.vertexAttrib4fv(et.location,J);break;default:i.vertexAttrib1fv(et.location,J)}}}}R()}function N(){z();for(const P in n){const X=n[P];for(const ot in X){const it=X[ot];for(const ct in it)m(it[ct].object),delete it[ct];delete X[ot]}delete n[P]}}function I(P){if(n[P.id]===void 0)return;const X=n[P.id];for(const ot in X){const it=X[ot];for(const ct in it)m(it[ct].object),delete it[ct];delete X[ot]}delete n[P.id]}function F(P){for(const X in n){const ot=n[X];if(ot[P.id]===void 0)continue;const it=ot[P.id];for(const ct in it)m(it[ct].object),delete it[ct];delete ot[P.id]}}function z(){U(),a=!0,r!==s&&(r=s,f(r.object))}function U(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:l,reset:z,resetDefaultState:U,dispose:N,releaseStatesOfGeometry:I,releaseStatesOfProgram:F,initAttributes:C,enableAttribute:T,disableUnusedAttributes:R}}function YX(i,t,e){let n;function s(f){n=f}function r(f,m){i.drawArrays(n,f,m),e.update(m,n,1)}function a(f,m,g){g!==0&&(i.drawArraysInstanced(n,f,m,g),e.update(m,n,g))}function l(f,m,g){if(g===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,f,0,m,0,g);let _=0;for(let b=0;b<g;b++)_+=m[b];e.update(_,n,1)}function u(f,m,g,v){if(g===0)return;const _=t.get("WEBGL_multi_draw");if(_===null)for(let b=0;b<f.length;b++)a(f[b],m[b],v[b]);else{_.multiDrawArraysInstancedWEBGL(n,f,0,m,0,v,0,g);let b=0;for(let C=0;C<g;C++)b+=m[C]*v[C];e.update(b,n,1)}}this.setMode=s,this.render=r,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function WX(i,t,e,n){let s;function r(){if(s!==void 0)return s;if(t.has("EXT_texture_filter_anisotropic")===!0){const F=t.get("EXT_texture_filter_anisotropic");s=i.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(F){return!(F!==ea&&n.convert(F)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(F){const z=F===i0&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(F!==Ws&&n.convert(F)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==Oa&&!z)}function u(F){if(F==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=e.precision!==void 0?e.precision:"highp";const m=u(f);m!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",m,"instead."),f=m);const g=e.logarithmicDepthBuffer===!0,v=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),_=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),b=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C=i.getParameter(i.MAX_TEXTURE_SIZE),T=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),S=i.getParameter(i.MAX_VERTEX_ATTRIBS),R=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),B=i.getParameter(i.MAX_VARYING_VECTORS),D=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),N=b>0,I=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:u,textureFormatReadable:a,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:g,reverseDepthBuffer:v,maxTextures:_,maxVertexTextures:b,maxTextureSize:C,maxCubemapSize:T,maxAttributes:S,maxVertexUniforms:R,maxVaryings:B,maxFragmentUniforms:D,vertexTextures:N,maxSamples:I}}function KX(i){const t=this;let e=null,n=0,s=!1,r=!1;const a=new pd,l=new on,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const _=g.length!==0||v||n!==0||s;return s=v,n=g.length,_},this.beginShadows=function(){r=!0,m(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(g,v){e=m(g,v,0)},this.setState=function(g,v,_){const b=g.clippingPlanes,C=g.clipIntersection,T=g.clipShadows,S=i.get(g);if(!s||b===null||b.length===0||r&&!T)r?m(null):f();else{const R=r?0:n,B=R*4;let D=S.clippingState||null;u.value=D,D=m(b,v,B,_);for(let N=0;N!==B;++N)D[N]=e[N];S.clippingState=D,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=R}};function f(){u.value!==e&&(u.value=e,u.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function m(g,v,_,b){const C=g!==null?g.length:0;let T=null;if(C!==0){if(T=u.value,b!==!0||T===null){const S=_+C*4,R=v.matrixWorldInverse;l.getNormalMatrix(R),(T===null||T.length<S)&&(T=new Float32Array(S));for(let B=0,D=_;B!==C;++B,D+=4)a.copy(g[B]).applyMatrix4(R,l),a.normal.toArray(T,D),T[D+3]=a.constant}u.value=T,u.needsUpdate=!0}return t.numPlanes=C,t.numIntersection=0,T}}function JX(i){let t=new WeakMap;function e(a,l){return l===q_?a.mapping=sf:l===Y_&&(a.mapping=$d),a}function n(a){if(a&&a.isTexture){const l=a.mapping;if(l===q_||l===Y_)if(t.has(a)){const u=t.get(a).texture;return e(u,a.mapping)}else{const u=a.image;if(u&&u.height>0){const f=new PB(u.height);return f.fromEquirectangularTexture(i,a),t.set(a,f),a.addEventListener("dispose",s),e(f.texture,a.mapping)}else return null}}return a}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function r(){t=new WeakMap}return{get:n,dispose:r}}const q1=4,oL=[.125,.215,.35,.446,.526,.582],Tm=20,b8=new Cy,lL=new ae;let S8=null,E8=0,M8=0,T8=!1;const _m=(1+Math.sqrt(5))/2,L1=1/_m,cL=[new nt(-_m,L1,0),new nt(_m,L1,0),new nt(-L1,0,_m),new nt(L1,0,_m),new nt(0,_m,-L1),new nt(0,_m,L1),new nt(-1,1,-1),new nt(1,1,-1),new nt(-1,1,1),new nt(1,1,1)],ZX=new nt;class D5{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,s=100,r={}){const{size:a=256,position:l=ZX}=r;S8=this._renderer.getRenderTarget(),E8=this._renderer.getActiveCubeFace(),M8=this._renderer.getActiveMipmapLevel(),T8=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(t,n,s,u,l),e>0&&this._blur(u,0,0,e),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=fL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=hL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(S8,E8,M8),this._renderer.xr.enabled=T8,t.scissorTest=!1,h4(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===sf||t.mapping===$d?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),S8=this._renderer.getRenderTarget(),E8=this._renderer.getActiveCubeFace(),M8=this._renderer.getActiveMipmapLevel(),T8=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Ni,minFilter:Ni,generateMipmaps:!1,type:i0,format:ea,colorSpace:Hu,depthBuffer:!1},s=uL(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=uL(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=$X(r)),this._blurMaterial=tj(r,t,e)}return s}_compileMaterial(t){const e=new as(this._lodPlanes[0],t);this._renderer.compile(e,b8)}_sceneToCubeUV(t,e,n,s,r){const u=new Rs(90,1,e,n),f=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],g=this._renderer,v=g.autoClear,_=g.toneMapping;g.getClearColor(lL),g.toneMapping=Rc,g.autoClear=!1;const b=new zo({name:"PMREM.Background",side:qs,depthWrite:!1,depthTest:!1}),C=new as(new s0,b);let T=!1;const S=t.background;S?S.isColor&&(b.color.copy(S),t.background=null,T=!0):(b.color.copy(lL),T=!0);for(let R=0;R<6;R++){const B=R%3;B===0?(u.up.set(0,f[R],0),u.position.set(r.x,r.y,r.z),u.lookAt(r.x+m[R],r.y,r.z)):B===1?(u.up.set(0,0,f[R]),u.position.set(r.x,r.y,r.z),u.lookAt(r.x,r.y+m[R],r.z)):(u.up.set(0,f[R],0),u.position.set(r.x,r.y,r.z),u.lookAt(r.x,r.y,r.z+m[R]));const D=this._cubeSize;h4(s,B*D,R>2?D:0,D,D),g.setRenderTarget(s),T&&g.render(C,u),g.render(t,u)}C.geometry.dispose(),C.material.dispose(),g.toneMapping=_,g.autoClear=v,t.background=S}_textureToCubeUV(t,e){const n=this._renderer,s=t.mapping===sf||t.mapping===$d;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=fL()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=hL());const r=s?this._cubemapMaterial:this._equirectMaterial,a=new as(this._lodPlanes[0],r),l=r.uniforms;l.envMap.value=t;const u=this._cubeSize;h4(e,0,0,3*u,2*u),n.setRenderTarget(e),n.render(a,b8)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),l=cL[(s-r-1)%cL.length];this._blur(t,r-1,r,a,l)}e.autoClear=n}_blur(t,e,n,s,r){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,s,"latitudinal",r),this._halfBlur(a,t,n,n,s,"longitudinal",r)}_halfBlur(t,e,n,s,r,a,l){const u=this._renderer,f=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,g=new as(this._lodPlanes[s],f),v=f.uniforms,_=this._sizeLods[n]-1,b=isFinite(r)?Math.PI/(2*_):2*Math.PI/(2*Tm-1),C=r/b,T=isFinite(r)?1+Math.floor(m*C):Tm;T>Tm&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${Tm}`);const S=[];let R=0;for(let F=0;F<Tm;++F){const z=F/C,U=Math.exp(-z*z/2);S.push(U),F===0?R+=U:F<T&&(R+=2*U)}for(let F=0;F<S.length;F++)S[F]=S[F]/R;v.envMap.value=t.texture,v.samples.value=T,v.weights.value=S,v.latitudinal.value=a==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:B}=this;v.dTheta.value=b,v.mipInt.value=B-n;const D=this._sizeLods[s],N=3*D*(s>B-q1?s-B+q1:0),I=4*(this._cubeSize-D);h4(e,N,I,3*D,2*D),u.setRenderTarget(e),u.render(g,b8)}}function $X(i){const t=[],e=[],n=[];let s=i;const r=i-q1+1+oL.length;for(let a=0;a<r;a++){const l=Math.pow(2,s);e.push(l);let u=1/l;a>i-q1?u=oL[a-i+q1-1]:a===0&&(u=0),n.push(u);const f=1/(l-2),m=-f,g=1+f,v=[m,m,g,m,g,g,m,m,g,g,m,g],_=6,b=6,C=3,T=2,S=1,R=new Float32Array(C*b*_),B=new Float32Array(T*b*_),D=new Float32Array(S*b*_);for(let I=0;I<_;I++){const F=I%3*2/3-1,z=I>2?0:-1,U=[F,z,0,F+2/3,z,0,F+2/3,z+1,0,F,z,0,F+2/3,z+1,0,F,z+1,0];R.set(U,C*b*I),B.set(v,T*b*I);const P=[I,I,I,I,I,I];D.set(P,S*b*I)}const N=new $e;N.setAttribute("position",new zn(R,C)),N.setAttribute("uv",new zn(B,T)),N.setAttribute("faceIndex",new zn(D,S)),t.push(N),s>q1&&s--}return{lodPlanes:t,sizeLods:e,sigmas:n}}function uL(i,t,e){const n=new Ds(i,t,e);return n.texture.mapping=by,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function h4(i,t,e,n,s){i.viewport.set(t,e,n,s),i.scissor.set(t,e,n,s)}function tj(i,t,e){const n=new Float32Array(Tm),s=new nt(0,1,0);return new Ks({name:"SphericalGaussianBlur",defines:{n:Tm,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:u7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:sa,depthTest:!1,depthWrite:!1})}function hL(){return new Ks({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:u7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:sa,depthTest:!1,depthWrite:!1})}function fL(){return new Ks({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:u7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:sa,depthTest:!1,depthWrite:!1})}function u7(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ej(i){let t=new WeakMap,e=null;function n(l){if(l&&l.isTexture){const u=l.mapping,f=u===q_||u===Y_,m=u===sf||u===$d;if(f||m){let g=t.get(l);const v=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return e===null&&(e=new D5(i)),g=f?e.fromEquirectangular(l,g):e.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,t.set(l,g),g.texture;if(g!==void 0)return g.texture;{const _=l.image;return f&&_&&_.height>0||m&&_&&s(_)?(e===null&&(e=new D5(i)),g=f?e.fromEquirectangular(l):e.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,t.set(l,g),l.addEventListener("dispose",r),g.texture):null}}}return l}function s(l){let u=0;const f=6;for(let m=0;m<f;m++)l[m]!==void 0&&u++;return u===f}function r(l){const u=l.target;u.removeEventListener("dispose",r);const f=t.get(u);f!==void 0&&(t.delete(u),f.dispose())}function a(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:a}}function nj(i){const t={};function e(n){if(t[n]!==void 0)return t[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return t[n]=s,s}return{has:function(n){return e(n)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const s=e(n);return s===null&&O4("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function ij(i,t,e,n){const s={},r=new WeakMap;function a(g){const v=g.target;v.index!==null&&t.remove(v.index);for(const b in v.attributes)t.remove(v.attributes[b]);v.removeEventListener("dispose",a),delete s[v.id];const _=r.get(v);_&&(t.remove(_),r.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,e.memory.geometries--}function l(g,v){return s[v.id]===!0||(v.addEventListener("dispose",a),s[v.id]=!0,e.memory.geometries++),v}function u(g){const v=g.attributes;for(const _ in v)t.update(v[_],i.ARRAY_BUFFER)}function f(g){const v=[],_=g.index,b=g.attributes.position;let C=0;if(_!==null){const R=_.array;C=_.version;for(let B=0,D=R.length;B<D;B+=3){const N=R[B+0],I=R[B+1],F=R[B+2];v.push(N,I,I,F,F,N)}}else if(b!==void 0){const R=b.array;C=b.version;for(let B=0,D=R.length/3-1;B<D;B+=3){const N=B+0,I=B+1,F=B+2;v.push(N,I,I,F,F,N)}}else return;const T=new(LB(v)?Uw:Iw)(v,1);T.version=C;const S=r.get(g);S&&t.remove(S),r.set(g,T)}function m(g){const v=r.get(g);if(v){const _=g.index;_!==null&&v.version<_.version&&f(g)}else f(g);return r.get(g)}return{get:l,update:u,getWireframeAttribute:m}}function sj(i,t,e){let n;function s(v){n=v}let r,a;function l(v){r=v.type,a=v.bytesPerElement}function u(v,_){i.drawElements(n,_,r,v*a),e.update(_,n,1)}function f(v,_,b){b!==0&&(i.drawElementsInstanced(n,_,r,v*a,b),e.update(_,n,b))}function m(v,_,b){if(b===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,_,0,r,v,0,b);let T=0;for(let S=0;S<b;S++)T+=_[S];e.update(T,n,1)}function g(v,_,b,C){if(b===0)return;const T=t.get("WEBGL_multi_draw");if(T===null)for(let S=0;S<v.length;S++)f(v[S]/a,_[S],C[S]);else{T.multiDrawElementsInstancedWEBGL(n,_,0,r,v,0,C,0,b);let S=0;for(let R=0;R<b;R++)S+=_[R]*C[R];e.update(S,n,1)}}this.setMode=s,this.setIndex=l,this.render=u,this.renderInstances=f,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function rj(i){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,a,l){switch(e.calls++,a){case i.TRIANGLES:e.triangles+=l*(r/3);break;case i.LINES:e.lines+=l*(r/2);break;case i.LINE_STRIP:e.lines+=l*(r-1);break;case i.LINE_LOOP:e.lines+=l*r;break;case i.POINTS:e.points+=l*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:s,update:n}}function aj(i,t,e){const n=new WeakMap,s=new Bn;function r(a,l,u){const f=a.morphTargetInfluences,m=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=m!==void 0?m.length:0;let v=n.get(l);if(v===void 0||v.count!==g){let P=function(){z.dispose(),n.delete(l),l.removeEventListener("dispose",P)};var _=P;v!==void 0&&v.texture.dispose();const b=l.morphAttributes.position!==void 0,C=l.morphAttributes.normal!==void 0,T=l.morphAttributes.color!==void 0,S=l.morphAttributes.position||[],R=l.morphAttributes.normal||[],B=l.morphAttributes.color||[];let D=0;b===!0&&(D=1),C===!0&&(D=2),T===!0&&(D=3);let N=l.attributes.position.count*D,I=1;N>t.maxTextureSize&&(I=Math.ceil(N/t.maxTextureSize),N=t.maxTextureSize);const F=new Float32Array(N*I*4*g),z=new wx(F,N,I,g);z.type=Oa,z.needsUpdate=!0;const U=D*4;for(let X=0;X<g;X++){const ot=S[X],it=R[X],ct=B[X],dt=N*I*4*X;for(let Q=0;Q<ot.count;Q++){const tt=Q*U;b===!0&&(s.fromBufferAttribute(ot,Q),F[dt+tt+0]=s.x,F[dt+tt+1]=s.y,F[dt+tt+2]=s.z,F[dt+tt+3]=0),C===!0&&(s.fromBufferAttribute(it,Q),F[dt+tt+4]=s.x,F[dt+tt+5]=s.y,F[dt+tt+6]=s.z,F[dt+tt+7]=0),T===!0&&(s.fromBufferAttribute(ct,Q),F[dt+tt+8]=s.x,F[dt+tt+9]=s.y,F[dt+tt+10]=s.z,F[dt+tt+11]=ct.itemSize===4?s.w:1)}}v={count:g,texture:z,size:new Pt(N,I)},n.set(l,v),l.addEventListener("dispose",P)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)u.getUniforms().setValue(i,"morphTexture",a.morphTexture,e);else{let b=0;for(let T=0;T<f.length;T++)b+=f[T];const C=l.morphTargetsRelative?1:1-b;u.getUniforms().setValue(i,"morphTargetBaseInfluence",C),u.getUniforms().setValue(i,"morphTargetInfluences",f)}u.getUniforms().setValue(i,"morphTargetsTexture",v.texture,e),u.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}return{update:r}}function oj(i,t,e,n){let s=new WeakMap;function r(u){const f=n.render.frame,m=u.geometry,g=t.get(u,m);if(s.get(g)!==f&&(t.update(g),s.set(g,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),s.get(u)!==f&&(e.update(u.instanceMatrix,i.ARRAY_BUFFER),u.instanceColor!==null&&e.update(u.instanceColor,i.ARRAY_BUFFER),s.set(u,f))),u.isSkinnedMesh){const v=u.skeleton;s.get(v)!==f&&(v.update(),s.set(v,f))}return g}function a(){s=new WeakMap}function l(u){const f=u.target;f.removeEventListener("dispose",l),e.remove(f.instanceMatrix),f.instanceColor!==null&&e.remove(f.instanceColor)}return{update:r,dispose:a}}const wO=new wi,dL=new Ox(1,1),RO=new wx,LO=new iM,DO=new Lx,pL=[],mL=[],gL=new Float32Array(16),vL=new Float32Array(9),yL=new Float32Array(4);function wy(i,t,e){const n=i[0];if(n<=0||n>0)return i;const s=t*e;let r=pL[s];if(r===void 0&&(r=new Float32Array(s),pL[s]=r),t!==0){n.toArray(r,0);for(let a=1,l=0;a!==t;++a)l+=e,i[a].toArray(r,l)}return r}function Js(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function Zs(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function EM(i,t){let e=mL[t];e===void 0&&(e=new Int32Array(t),mL[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function lj(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function cj(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Js(e,t))return;i.uniform2fv(this.addr,t),Zs(e,t)}}function uj(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Js(e,t))return;i.uniform3fv(this.addr,t),Zs(e,t)}}function hj(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Js(e,t))return;i.uniform4fv(this.addr,t),Zs(e,t)}}function fj(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Js(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),Zs(e,t)}else{if(Js(e,n))return;yL.set(n),i.uniformMatrix2fv(this.addr,!1,yL),Zs(e,n)}}function dj(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Js(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),Zs(e,t)}else{if(Js(e,n))return;vL.set(n),i.uniformMatrix3fv(this.addr,!1,vL),Zs(e,n)}}function pj(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Js(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),Zs(e,t)}else{if(Js(e,n))return;gL.set(n),i.uniformMatrix4fv(this.addr,!1,gL),Zs(e,n)}}function mj(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function gj(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Js(e,t))return;i.uniform2iv(this.addr,t),Zs(e,t)}}function vj(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Js(e,t))return;i.uniform3iv(this.addr,t),Zs(e,t)}}function yj(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Js(e,t))return;i.uniform4iv(this.addr,t),Zs(e,t)}}function _j(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function Aj(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Js(e,t))return;i.uniform2uiv(this.addr,t),Zs(e,t)}}function xj(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Js(e,t))return;i.uniform3uiv(this.addr,t),Zs(e,t)}}function bj(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Js(e,t))return;i.uniform4uiv(this.addr,t),Zs(e,t)}}function Sj(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(dL.compareFunction=Ow,r=dL):r=wO,e.setTexture2D(t||r,s)}function Ej(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTexture3D(t||LO,s)}function Mj(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTextureCube(t||DO,s)}function Tj(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTexture2DArray(t||RO,s)}function Cj(i){switch(i){case 5126:return lj;case 35664:return cj;case 35665:return uj;case 35666:return hj;case 35674:return fj;case 35675:return dj;case 35676:return pj;case 5124:case 35670:return mj;case 35667:case 35671:return gj;case 35668:case 35672:return vj;case 35669:case 35673:return yj;case 5125:return _j;case 36294:return Aj;case 36295:return xj;case 36296:return bj;case 35678:case 36198:case 36298:case 36306:case 35682:return Sj;case 35679:case 36299:case 36307:return Ej;case 35680:case 36300:case 36308:case 36293:return Mj;case 36289:case 36303:case 36311:case 36292:return Tj}}function wj(i,t){i.uniform1fv(this.addr,t)}function Rj(i,t){const e=wy(t,this.size,2);i.uniform2fv(this.addr,e)}function Lj(i,t){const e=wy(t,this.size,3);i.uniform3fv(this.addr,e)}function Dj(i,t){const e=wy(t,this.size,4);i.uniform4fv(this.addr,e)}function Bj(i,t){const e=wy(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function Oj(i,t){const e=wy(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function Nj(i,t){const e=wy(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function Ij(i,t){i.uniform1iv(this.addr,t)}function Uj(i,t){i.uniform2iv(this.addr,t)}function Pj(i,t){i.uniform3iv(this.addr,t)}function Fj(i,t){i.uniform4iv(this.addr,t)}function Hj(i,t){i.uniform1uiv(this.addr,t)}function zj(i,t){i.uniform2uiv(this.addr,t)}function Gj(i,t){i.uniform3uiv(this.addr,t)}function kj(i,t){i.uniform4uiv(this.addr,t)}function Vj(i,t,e){const n=this.cache,s=t.length,r=EM(e,s);Js(n,r)||(i.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==s;++a)e.setTexture2D(t[a]||wO,r[a])}function Qj(i,t,e){const n=this.cache,s=t.length,r=EM(e,s);Js(n,r)||(i.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==s;++a)e.setTexture3D(t[a]||LO,r[a])}function Xj(i,t,e){const n=this.cache,s=t.length,r=EM(e,s);Js(n,r)||(i.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==s;++a)e.setTextureCube(t[a]||DO,r[a])}function jj(i,t,e){const n=this.cache,s=t.length,r=EM(e,s);Js(n,r)||(i.uniform1iv(this.addr,r),Zs(n,r));for(let a=0;a!==s;++a)e.setTexture2DArray(t[a]||RO,r[a])}function qj(i){switch(i){case 5126:return wj;case 35664:return Rj;case 35665:return Lj;case 35666:return Dj;case 35674:return Bj;case 35675:return Oj;case 35676:return Nj;case 5124:case 35670:return Ij;case 35667:case 35671:return Uj;case 35668:case 35672:return Pj;case 35669:case 35673:return Fj;case 5125:return Hj;case 36294:return zj;case 36295:return Gj;case 36296:return kj;case 35678:case 36198:case 36298:case 36306:case 35682:return Vj;case 35679:case 36299:case 36307:return Qj;case 35680:case 36300:case 36308:case 36293:return Xj;case 36289:case 36303:case 36311:case 36292:return jj}}class Yj{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=Cj(e.type)}}class Wj{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=qj(e.type)}}class Kj{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const s=this.seq;for(let r=0,a=s.length;r!==a;++r){const l=s[r];l.setValue(t,e[l.id],n)}}}const C8=/(\w+)(\])?(\[|\.)?/g;function _L(i,t){i.seq.push(t),i.map[t.id]=t}function Jj(i,t,e){const n=i.name,s=n.length;for(C8.lastIndex=0;;){const r=C8.exec(n),a=C8.lastIndex;let l=r[1];const u=r[2]==="]",f=r[3];if(u&&(l=l|0),f===void 0||f==="["&&a+2===s){_L(e,f===void 0?new Yj(l,i,t):new Wj(l,i,t));break}else{let g=e.map[l];g===void 0&&(g=new Kj(l),_L(e,g)),e=g}}}class I4{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=t.getActiveUniform(e,s),a=t.getUniformLocation(e,r.name);Jj(r,a,this)}}setValue(t,e,n,s){const r=this.map[e];r!==void 0&&r.setValue(t,n,s)}setOptional(t,e,n){const s=e[n];s!==void 0&&this.setValue(t,n,s)}static upload(t,e,n,s){for(let r=0,a=e.length;r!==a;++r){const l=e[r],u=n[l.id];u.needsUpdate!==!1&&l.setValue(t,u.value,s)}}static seqWithValue(t,e){const n=[];for(let s=0,r=t.length;s!==r;++s){const a=t[s];a.id in e&&n.push(a)}return n}}function AL(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const Zj=37297;let $j=0;function tq(i,t){const e=i.split(`
`),n=[],s=Math.max(t-6,0),r=Math.min(t+6,e.length);for(let a=s;a<r;a++){const l=a+1;n.push(`${l===t?">":" "} ${l}: ${e[a]}`)}return n.join(`
`)}const xL=new on;function eq(i){Pn._getMatrix(xL,Pn.workingColorSpace,i);const t=`mat3( ${xL.elements.map(e=>e.toFixed(4))} )`;switch(Pn.getTransfer(i)){case K_:return[t,"LinearTransferOETF"];case fi:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[t,"LinearTransferOETF"]}}function bL(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),s=i.getShaderInfoLog(t).trim();if(n&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const a=parseInt(r[1]);return e.toUpperCase()+`

`+s+`

`+tq(i.getShaderSource(t),a)}else return s}function nq(i,t){const e=eq(t);return[`vec4 ${i}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function iq(i,t){let e;switch(t){case uB:e="Linear";break;case hB:e="Reinhard";break;case fB:e="Cineon";break;case Sw:e="ACESFilmic";break;case pB:e="AgX";break;case mB:e="Neutral";break;case dB:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const f4=new nt;function sq(){Pn.getLuminanceCoefficients(f4);const i=f4.x.toFixed(4),t=f4.y.toFixed(4),e=f4.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function rq(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(f_).join(`
`)}function aq(i){const t=[];for(const e in i){const n=i[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function oq(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(t,s),a=r.name;let l=1;r.type===i.FLOAT_MAT2&&(l=2),r.type===i.FLOAT_MAT3&&(l=3),r.type===i.FLOAT_MAT4&&(l=4),e[a]={type:r.type,location:i.getAttribLocation(t,a),locationSize:l}}return e}function f_(i){return i!==""}function SL(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function EL(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const lq=/^[ \t]*#include +<([\w\d./]+)>/gm;function B5(i){return i.replace(lq,uq)}const cq=new Map;function uq(i,t){let e=fn[t];if(e===void 0){const n=cq.get(t);if(n!==void 0)e=fn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return B5(e)}const hq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ML(i){return i.replace(hq,fq)}function fq(i,t,e,n){let s="";for(let r=parseInt(t);r<parseInt(e);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function TL(i){let t=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?t+=`
#define HIGH_PRECISION`:i.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function dq(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===jE?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===D_?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===lc&&(t="SHADOWMAP_TYPE_VSM"),t}function pq(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case sf:case $d:t="ENVMAP_TYPE_CUBE";break;case by:t="ENVMAP_TYPE_CUBE_UV";break}return t}function mq(i){let t="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case $d:t="ENVMAP_MODE_REFRACTION";break}return t}function gq(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Tx:t="ENVMAP_BLENDING_MULTIPLY";break;case lB:t="ENVMAP_BLENDING_MIX";break;case cB:t="ENVMAP_BLENDING_ADD";break}return t}function vq(i){const t=i.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:n,maxMip:e}}function yq(i,t,e,n){const s=i.getContext(),r=e.defines;let a=e.vertexShader,l=e.fragmentShader;const u=dq(e),f=pq(e),m=mq(e),g=gq(e),v=vq(e),_=rq(e),b=aq(r),C=s.createProgram();let T,S,R=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(T=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(f_).join(`
`),T.length>0&&(T+=`
`),S=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(f_).join(`
`),S.length>0&&(S+=`
`)):(T=[TL(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+m:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(f_).join(`
`),S=[TL(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.envMap?"#define "+m:"",e.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Rc?"#define TONE_MAPPING":"",e.toneMapping!==Rc?fn.tonemapping_pars_fragment:"",e.toneMapping!==Rc?iq("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",fn.colorspace_pars_fragment,nq("linearToOutputTexel",e.outputColorSpace),sq(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(f_).join(`
`)),a=B5(a),a=SL(a,e),a=EL(a,e),l=B5(l),l=SL(l,e),l=EL(l,e),a=ML(a),l=ML(l),e.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,T=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,S=["#define varying in",e.glslVersion===E5?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===E5?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const B=R+T+a,D=R+S+l,N=AL(s,s.VERTEX_SHADER,B),I=AL(s,s.FRAGMENT_SHADER,D);s.attachShader(C,N),s.attachShader(C,I),e.index0AttributeName!==void 0?s.bindAttribLocation(C,0,e.index0AttributeName):e.morphTargets===!0&&s.bindAttribLocation(C,0,"position"),s.linkProgram(C);function F(X){if(i.debug.checkShaderErrors){const ot=s.getProgramInfoLog(C).trim(),it=s.getShaderInfoLog(N).trim(),ct=s.getShaderInfoLog(I).trim();let dt=!0,Q=!0;if(s.getProgramParameter(C,s.LINK_STATUS)===!1)if(dt=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,C,N,I);else{const tt=bL(s,N,"vertex"),et=bL(s,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(C,s.VALIDATE_STATUS)+`

Material Name: `+X.name+`
Material Type: `+X.type+`

Program Info Log: `+ot+`
`+tt+`
`+et)}else ot!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ot):(it===""||ct==="")&&(Q=!1);Q&&(X.diagnostics={runnable:dt,programLog:ot,vertexShader:{log:it,prefix:T},fragmentShader:{log:ct,prefix:S}})}s.deleteShader(N),s.deleteShader(I),z=new I4(s,C),U=oq(s,C)}let z;this.getUniforms=function(){return z===void 0&&F(this),z};let U;this.getAttributes=function(){return U===void 0&&F(this),U};let P=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=s.getProgramParameter(C,Zj)),P},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(C),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=$j++,this.cacheKey=t,this.usedTimes=1,this.program=C,this.vertexShader=N,this.fragmentShader=I,this}let _q=0;class Aq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,s=this._getShaderStage(e),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return n===void 0&&(n=new xq(t),e.set(t,n)),n}}class xq{constructor(t){this.id=_q++,this.code=t,this.usedTimes=0}}function bq(i,t,e,n,s,r,a){const l=new fy,u=new Aq,f=new Set,m=[],g=s.logarithmicDepthBuffer,v=s.vertexTextures;let _=s.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function C(U){return f.add(U),U===0?"uv":`uv${U}`}function T(U,P,X,ot,it){const ct=ot.fog,dt=it.geometry,Q=U.isMeshStandardMaterial?ot.environment:null,tt=(U.isMeshStandardMaterial?e:t).get(U.envMap||Q),et=tt&&tt.mapping===by?tt.image.height:null,_t=b[U.type];U.precision!==null&&(_=s.getMaxPrecision(U.precision),_!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",_,"instead."));const J=dt.morphAttributes.position||dt.morphAttributes.normal||dt.morphAttributes.color,at=J!==void 0?J.length:0;let xt=0;dt.morphAttributes.position!==void 0&&(xt=1),dt.morphAttributes.normal!==void 0&&(xt=2),dt.morphAttributes.color!==void 0&&(xt=3);let Et,lt,wt,Bt;if(_t){const Cn=Sc[_t];Et=Cn.vertexShader,lt=Cn.fragmentShader}else Et=U.vertexShader,lt=U.fragmentShader,u.update(U),wt=u.getVertexShaderID(U),Bt=u.getFragmentShaderID(U);const Ut=i.getRenderTarget(),Wt=i.state.buffers.depth.getReversed(),ve=it.isInstancedMesh===!0,ee=it.isBatchedMesh===!0,Ye=!!U.map,we=!!U.matcap,se=!!tt,Z=!!U.aoMap,Kt=!!U.lightMap,Ft=!!U.bumpMap,Vt=!!U.normalMap,Gt=!!U.displacementMap,be=!!U.emissiveMap,qt=!!U.metalnessMap,$=!!U.roughnessMap,V=U.anisotropy>0,vt=U.clearcoat>0,It=U.dispersion>0,Xt=U.iridescence>0,Ot=U.sheen>0,ne=U.transmission>0,te=V&&!!U.anisotropyMap,ge=vt&&!!U.clearcoatMap,De=vt&&!!U.clearcoatNormalMap,Jt=vt&&!!U.clearcoatRoughnessMap,_e=Xt&&!!U.iridescenceMap,Se=Xt&&!!U.iridescenceThicknessMap,Te=Ot&&!!U.sheenColorMap,le=Ot&&!!U.sheenRoughnessMap,rn=!!U.specularMap,He=!!U.specularColorMap,Gn=!!U.specularIntensityMap,mt=ne&&!!U.transmissionMap,ce=ne&&!!U.thicknessMap,Nt=!!U.gradientMap,Qt=!!U.alphaMap,he=U.alphaTest>0,ue=!!U.alphaHash,qe=!!U.extensions;let Jn=Rc;U.toneMapped&&(Ut===null||Ut.isXRRenderTarget===!0)&&(Jn=i.toneMapping);const Ei={shaderID:_t,shaderType:U.type,shaderName:U.name,vertexShader:Et,fragmentShader:lt,defines:U.defines,customVertexShaderID:wt,customFragmentShaderID:Bt,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:_,batching:ee,batchingColor:ee&&it._colorsTexture!==null,instancing:ve,instancingColor:ve&&it.instanceColor!==null,instancingMorph:ve&&it.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:Ut===null?i.outputColorSpace:Ut.isXRRenderTarget===!0?Ut.texture.colorSpace:Hu,alphaToCoverage:!!U.alphaToCoverage,map:Ye,matcap:we,envMap:se,envMapMode:se&&tt.mapping,envMapCubeUVHeight:et,aoMap:Z,lightMap:Kt,bumpMap:Ft,normalMap:Vt,displacementMap:v&&Gt,emissiveMap:be,normalMapObjectSpace:Vt&&U.normalMapType===bB,normalMapTangentSpace:Vt&&U.normalMapType===op,metalnessMap:qt,roughnessMap:$,anisotropy:V,anisotropyMap:te,clearcoat:vt,clearcoatMap:ge,clearcoatNormalMap:De,clearcoatRoughnessMap:Jt,dispersion:It,iridescence:Xt,iridescenceMap:_e,iridescenceThicknessMap:Se,sheen:Ot,sheenColorMap:Te,sheenRoughnessMap:le,specularMap:rn,specularColorMap:He,specularIntensityMap:Gn,transmission:ne,transmissionMap:mt,thicknessMap:ce,gradientMap:Nt,opaque:U.transparent===!1&&U.blending===Og&&U.alphaToCoverage===!1,alphaMap:Qt,alphaTest:he,alphaHash:ue,combine:U.combine,mapUv:Ye&&C(U.map.channel),aoMapUv:Z&&C(U.aoMap.channel),lightMapUv:Kt&&C(U.lightMap.channel),bumpMapUv:Ft&&C(U.bumpMap.channel),normalMapUv:Vt&&C(U.normalMap.channel),displacementMapUv:Gt&&C(U.displacementMap.channel),emissiveMapUv:be&&C(U.emissiveMap.channel),metalnessMapUv:qt&&C(U.metalnessMap.channel),roughnessMapUv:$&&C(U.roughnessMap.channel),anisotropyMapUv:te&&C(U.anisotropyMap.channel),clearcoatMapUv:ge&&C(U.clearcoatMap.channel),clearcoatNormalMapUv:De&&C(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Jt&&C(U.clearcoatRoughnessMap.channel),iridescenceMapUv:_e&&C(U.iridescenceMap.channel),iridescenceThicknessMapUv:Se&&C(U.iridescenceThicknessMap.channel),sheenColorMapUv:Te&&C(U.sheenColorMap.channel),sheenRoughnessMapUv:le&&C(U.sheenRoughnessMap.channel),specularMapUv:rn&&C(U.specularMap.channel),specularColorMapUv:He&&C(U.specularColorMap.channel),specularIntensityMapUv:Gn&&C(U.specularIntensityMap.channel),transmissionMapUv:mt&&C(U.transmissionMap.channel),thicknessMapUv:ce&&C(U.thicknessMap.channel),alphaMapUv:Qt&&C(U.alphaMap.channel),vertexTangents:!!dt.attributes.tangent&&(Vt||V),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!dt.attributes.color&&dt.attributes.color.itemSize===4,pointsUvs:it.isPoints===!0&&!!dt.attributes.uv&&(Ye||Qt),fog:!!ct,useFog:U.fog===!0,fogExp2:!!ct&&ct.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:Wt,skinning:it.isSkinnedMesh===!0,morphTargets:dt.morphAttributes.position!==void 0,morphNormals:dt.morphAttributes.normal!==void 0,morphColors:dt.morphAttributes.color!==void 0,morphTargetsCount:at,morphTextureStride:xt,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:U.dithering,shadowMapEnabled:i.shadowMap.enabled&&X.length>0,shadowMapType:i.shadowMap.type,toneMapping:Jn,decodeVideoTexture:Ye&&U.map.isVideoTexture===!0&&Pn.getTransfer(U.map.colorSpace)===fi,decodeVideoTextureEmissive:be&&U.emissiveMap.isVideoTexture===!0&&Pn.getTransfer(U.emissiveMap.colorSpace)===fi,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===La,flipSided:U.side===qs,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:qe&&U.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(qe&&U.extensions.multiDraw===!0||ee)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return Ei.vertexUv1s=f.has(1),Ei.vertexUv2s=f.has(2),Ei.vertexUv3s=f.has(3),f.clear(),Ei}function S(U){const P=[];if(U.shaderID?P.push(U.shaderID):(P.push(U.customVertexShaderID),P.push(U.customFragmentShaderID)),U.defines!==void 0)for(const X in U.defines)P.push(X),P.push(U.defines[X]);return U.isRawShaderMaterial===!1&&(R(P,U),B(P,U),P.push(i.outputColorSpace)),P.push(U.customProgramCacheKey),P.join()}function R(U,P){U.push(P.precision),U.push(P.outputColorSpace),U.push(P.envMapMode),U.push(P.envMapCubeUVHeight),U.push(P.mapUv),U.push(P.alphaMapUv),U.push(P.lightMapUv),U.push(P.aoMapUv),U.push(P.bumpMapUv),U.push(P.normalMapUv),U.push(P.displacementMapUv),U.push(P.emissiveMapUv),U.push(P.metalnessMapUv),U.push(P.roughnessMapUv),U.push(P.anisotropyMapUv),U.push(P.clearcoatMapUv),U.push(P.clearcoatNormalMapUv),U.push(P.clearcoatRoughnessMapUv),U.push(P.iridescenceMapUv),U.push(P.iridescenceThicknessMapUv),U.push(P.sheenColorMapUv),U.push(P.sheenRoughnessMapUv),U.push(P.specularMapUv),U.push(P.specularColorMapUv),U.push(P.specularIntensityMapUv),U.push(P.transmissionMapUv),U.push(P.thicknessMapUv),U.push(P.combine),U.push(P.fogExp2),U.push(P.sizeAttenuation),U.push(P.morphTargetsCount),U.push(P.morphAttributeCount),U.push(P.numDirLights),U.push(P.numPointLights),U.push(P.numSpotLights),U.push(P.numSpotLightMaps),U.push(P.numHemiLights),U.push(P.numRectAreaLights),U.push(P.numDirLightShadows),U.push(P.numPointLightShadows),U.push(P.numSpotLightShadows),U.push(P.numSpotLightShadowsWithMaps),U.push(P.numLightProbes),U.push(P.shadowMapType),U.push(P.toneMapping),U.push(P.numClippingPlanes),U.push(P.numClipIntersection),U.push(P.depthPacking)}function B(U,P){l.disableAll(),P.supportsVertexTextures&&l.enable(0),P.instancing&&l.enable(1),P.instancingColor&&l.enable(2),P.instancingMorph&&l.enable(3),P.matcap&&l.enable(4),P.envMap&&l.enable(5),P.normalMapObjectSpace&&l.enable(6),P.normalMapTangentSpace&&l.enable(7),P.clearcoat&&l.enable(8),P.iridescence&&l.enable(9),P.alphaTest&&l.enable(10),P.vertexColors&&l.enable(11),P.vertexAlphas&&l.enable(12),P.vertexUv1s&&l.enable(13),P.vertexUv2s&&l.enable(14),P.vertexUv3s&&l.enable(15),P.vertexTangents&&l.enable(16),P.anisotropy&&l.enable(17),P.alphaHash&&l.enable(18),P.batching&&l.enable(19),P.dispersion&&l.enable(20),P.batchingColor&&l.enable(21),U.push(l.mask),l.disableAll(),P.fog&&l.enable(0),P.useFog&&l.enable(1),P.flatShading&&l.enable(2),P.logarithmicDepthBuffer&&l.enable(3),P.reverseDepthBuffer&&l.enable(4),P.skinning&&l.enable(5),P.morphTargets&&l.enable(6),P.morphNormals&&l.enable(7),P.morphColors&&l.enable(8),P.premultipliedAlpha&&l.enable(9),P.shadowMapEnabled&&l.enable(10),P.doubleSided&&l.enable(11),P.flipSided&&l.enable(12),P.useDepthPacking&&l.enable(13),P.dithering&&l.enable(14),P.transmission&&l.enable(15),P.sheen&&l.enable(16),P.opaque&&l.enable(17),P.pointsUvs&&l.enable(18),P.decodeVideoTexture&&l.enable(19),P.decodeVideoTextureEmissive&&l.enable(20),P.alphaToCoverage&&l.enable(21),U.push(l.mask)}function D(U){const P=b[U.type];let X;if(P){const ot=Sc[P];X=IB.clone(ot.uniforms)}else X=U.uniforms;return X}function N(U,P){let X;for(let ot=0,it=m.length;ot<it;ot++){const ct=m[ot];if(ct.cacheKey===P){X=ct,++X.usedTimes;break}}return X===void 0&&(X=new yq(i,P,U,r),m.push(X)),X}function I(U){if(--U.usedTimes===0){const P=m.indexOf(U);m[P]=m[m.length-1],m.pop(),U.destroy()}}function F(U){u.remove(U)}function z(){u.dispose()}return{getParameters:T,getProgramCacheKey:S,getUniforms:D,acquireProgram:N,releaseProgram:I,releaseShaderCache:F,programs:m,dispose:z}}function Sq(){let i=new WeakMap;function t(a){return i.has(a)}function e(a){let l=i.get(a);return l===void 0&&(l={},i.set(a,l)),l}function n(a){i.delete(a)}function s(a,l,u){i.get(a)[l]=u}function r(){i=new WeakMap}return{has:t,get:e,remove:n,update:s,dispose:r}}function Eq(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function CL(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function wL(){const i=[];let t=0;const e=[],n=[],s=[];function r(){t=0,e.length=0,n.length=0,s.length=0}function a(g,v,_,b,C,T){let S=i[t];return S===void 0?(S={id:g.id,object:g,geometry:v,material:_,groupOrder:b,renderOrder:g.renderOrder,z:C,group:T},i[t]=S):(S.id=g.id,S.object=g,S.geometry=v,S.material=_,S.groupOrder=b,S.renderOrder=g.renderOrder,S.z=C,S.group=T),t++,S}function l(g,v,_,b,C,T){const S=a(g,v,_,b,C,T);_.transmission>0?n.push(S):_.transparent===!0?s.push(S):e.push(S)}function u(g,v,_,b,C,T){const S=a(g,v,_,b,C,T);_.transmission>0?n.unshift(S):_.transparent===!0?s.unshift(S):e.unshift(S)}function f(g,v){e.length>1&&e.sort(g||Eq),n.length>1&&n.sort(v||CL),s.length>1&&s.sort(v||CL)}function m(){for(let g=t,v=i.length;g<v;g++){const _=i[g];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:e,transmissive:n,transparent:s,init:r,push:l,unshift:u,finish:m,sort:f}}function Mq(){let i=new WeakMap;function t(n,s){const r=i.get(n);let a;return r===void 0?(a=new wL,i.set(n,[a])):s>=r.length?(a=new wL,r.push(a)):a=r[s],a}function e(){i=new WeakMap}return{get:t,dispose:e}}function Tq(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new nt,color:new ae};break;case"SpotLight":e={position:new nt,direction:new nt,color:new ae,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new nt,color:new ae,distance:0,decay:0};break;case"HemisphereLight":e={direction:new nt,skyColor:new ae,groundColor:new ae};break;case"RectAreaLight":e={color:new ae,position:new nt,halfWidth:new nt,halfHeight:new nt};break}return i[t.id]=e,e}}}function Cq(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[t.id]=e,e}}}let wq=0;function Rq(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function Lq(i){const t=new Tq,e=Cq(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)n.probe.push(new nt);const s=new nt,r=new Fe,a=new Fe;function l(f){let m=0,g=0,v=0;for(let U=0;U<9;U++)n.probe[U].set(0,0,0);let _=0,b=0,C=0,T=0,S=0,R=0,B=0,D=0,N=0,I=0,F=0;f.sort(Rq);for(let U=0,P=f.length;U<P;U++){const X=f[U],ot=X.color,it=X.intensity,ct=X.distance,dt=X.shadow&&X.shadow.map?X.shadow.map.texture:null;if(X.isAmbientLight)m+=ot.r*it,g+=ot.g*it,v+=ot.b*it;else if(X.isLightProbe){for(let Q=0;Q<9;Q++)n.probe[Q].addScaledVector(X.sh.coefficients[Q],it);F++}else if(X.isDirectionalLight){const Q=t.get(X);if(Q.color.copy(X.color).multiplyScalar(X.intensity),X.castShadow){const tt=X.shadow,et=e.get(X);et.shadowIntensity=tt.intensity,et.shadowBias=tt.bias,et.shadowNormalBias=tt.normalBias,et.shadowRadius=tt.radius,et.shadowMapSize=tt.mapSize,n.directionalShadow[_]=et,n.directionalShadowMap[_]=dt,n.directionalShadowMatrix[_]=X.shadow.matrix,R++}n.directional[_]=Q,_++}else if(X.isSpotLight){const Q=t.get(X);Q.position.setFromMatrixPosition(X.matrixWorld),Q.color.copy(ot).multiplyScalar(it),Q.distance=ct,Q.coneCos=Math.cos(X.angle),Q.penumbraCos=Math.cos(X.angle*(1-X.penumbra)),Q.decay=X.decay,n.spot[C]=Q;const tt=X.shadow;if(X.map&&(n.spotLightMap[N]=X.map,N++,tt.updateMatrices(X),X.castShadow&&I++),n.spotLightMatrix[C]=tt.matrix,X.castShadow){const et=e.get(X);et.shadowIntensity=tt.intensity,et.shadowBias=tt.bias,et.shadowNormalBias=tt.normalBias,et.shadowRadius=tt.radius,et.shadowMapSize=tt.mapSize,n.spotShadow[C]=et,n.spotShadowMap[C]=dt,D++}C++}else if(X.isRectAreaLight){const Q=t.get(X);Q.color.copy(ot).multiplyScalar(it),Q.halfWidth.set(X.width*.5,0,0),Q.halfHeight.set(0,X.height*.5,0),n.rectArea[T]=Q,T++}else if(X.isPointLight){const Q=t.get(X);if(Q.color.copy(X.color).multiplyScalar(X.intensity),Q.distance=X.distance,Q.decay=X.decay,X.castShadow){const tt=X.shadow,et=e.get(X);et.shadowIntensity=tt.intensity,et.shadowBias=tt.bias,et.shadowNormalBias=tt.normalBias,et.shadowRadius=tt.radius,et.shadowMapSize=tt.mapSize,et.shadowCameraNear=tt.camera.near,et.shadowCameraFar=tt.camera.far,n.pointShadow[b]=et,n.pointShadowMap[b]=dt,n.pointShadowMatrix[b]=X.shadow.matrix,B++}n.point[b]=Q,b++}else if(X.isHemisphereLight){const Q=t.get(X);Q.skyColor.copy(X.color).multiplyScalar(it),Q.groundColor.copy(X.groundColor).multiplyScalar(it),n.hemi[S]=Q,S++}}T>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=de.LTC_FLOAT_1,n.rectAreaLTC2=de.LTC_FLOAT_2):(n.rectAreaLTC1=de.LTC_HALF_1,n.rectAreaLTC2=de.LTC_HALF_2)),n.ambient[0]=m,n.ambient[1]=g,n.ambient[2]=v;const z=n.hash;(z.directionalLength!==_||z.pointLength!==b||z.spotLength!==C||z.rectAreaLength!==T||z.hemiLength!==S||z.numDirectionalShadows!==R||z.numPointShadows!==B||z.numSpotShadows!==D||z.numSpotMaps!==N||z.numLightProbes!==F)&&(n.directional.length=_,n.spot.length=C,n.rectArea.length=T,n.point.length=b,n.hemi.length=S,n.directionalShadow.length=R,n.directionalShadowMap.length=R,n.pointShadow.length=B,n.pointShadowMap.length=B,n.spotShadow.length=D,n.spotShadowMap.length=D,n.directionalShadowMatrix.length=R,n.pointShadowMatrix.length=B,n.spotLightMatrix.length=D+N-I,n.spotLightMap.length=N,n.numSpotLightShadowsWithMaps=I,n.numLightProbes=F,z.directionalLength=_,z.pointLength=b,z.spotLength=C,z.rectAreaLength=T,z.hemiLength=S,z.numDirectionalShadows=R,z.numPointShadows=B,z.numSpotShadows=D,z.numSpotMaps=N,z.numLightProbes=F,n.version=wq++)}function u(f,m){let g=0,v=0,_=0,b=0,C=0;const T=m.matrixWorldInverse;for(let S=0,R=f.length;S<R;S++){const B=f[S];if(B.isDirectionalLight){const D=n.directional[g];D.direction.setFromMatrixPosition(B.matrixWorld),s.setFromMatrixPosition(B.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(T),g++}else if(B.isSpotLight){const D=n.spot[_];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(T),D.direction.setFromMatrixPosition(B.matrixWorld),s.setFromMatrixPosition(B.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(T),_++}else if(B.isRectAreaLight){const D=n.rectArea[b];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(T),a.identity(),r.copy(B.matrixWorld),r.premultiply(T),a.extractRotation(r),D.halfWidth.set(B.width*.5,0,0),D.halfHeight.set(0,B.height*.5,0),D.halfWidth.applyMatrix4(a),D.halfHeight.applyMatrix4(a),b++}else if(B.isPointLight){const D=n.point[v];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(T),v++}else if(B.isHemisphereLight){const D=n.hemi[C];D.direction.setFromMatrixPosition(B.matrixWorld),D.direction.transformDirection(T),C++}}}return{setup:l,setupView:u,state:n}}function RL(i){const t=new Lq(i),e=[],n=[];function s(m){f.camera=m,e.length=0,n.length=0}function r(m){e.push(m)}function a(m){n.push(m)}function l(){t.setup(e)}function u(m){t.setupView(e,m)}const f={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:s,state:f,setupLights:l,setupLightsView:u,pushLight:r,pushShadow:a}}function Dq(i){let t=new WeakMap;function e(s,r=0){const a=t.get(s);let l;return a===void 0?(l=new RL(i),t.set(s,[l])):r>=a.length?(l=new RL(i),a.push(l)):l=a[r],l}function n(){t=new WeakMap}return{get:e,dispose:n}}const Bq=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Oq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Nq(i,t,e){let n=new Ey;const s=new Pt,r=new Pt,a=new Bn,l=new Ww({depthPacking:xB}),u=new Kw,f={},m=e.maxTextureSize,g={[Lc]:qs,[qs]:Lc,[La]:La},v=new Ks({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Pt},radius:{value:4}},vertexShader:Bq,fragmentShader:Oq}),_=v.clone();_.defines.HORIZONTAL_PASS=1;const b=new $e;b.setAttribute("position",new zn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new as(b,v),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=jE;let S=this.type;this.render=function(I,F,z){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||I.length===0)return;const U=i.getRenderTarget(),P=i.getActiveCubeFace(),X=i.getActiveMipmapLevel(),ot=i.state;ot.setBlending(sa),ot.buffers.color.setClear(1,1,1,1),ot.buffers.depth.setTest(!0),ot.setScissorTest(!1);const it=S!==lc&&this.type===lc,ct=S===lc&&this.type!==lc;for(let dt=0,Q=I.length;dt<Q;dt++){const tt=I[dt],et=tt.shadow;if(et===void 0){console.warn("THREE.WebGLShadowMap:",tt,"has no shadow.");continue}if(et.autoUpdate===!1&&et.needsUpdate===!1)continue;s.copy(et.mapSize);const _t=et.getFrameExtents();if(s.multiply(_t),r.copy(et.mapSize),(s.x>m||s.y>m)&&(s.x>m&&(r.x=Math.floor(m/_t.x),s.x=r.x*_t.x,et.mapSize.x=r.x),s.y>m&&(r.y=Math.floor(m/_t.y),s.y=r.y*_t.y,et.mapSize.y=r.y)),et.map===null||it===!0||ct===!0){const at=this.type!==lc?{minFilter:os,magFilter:os}:{};et.map!==null&&et.map.dispose(),et.map=new Ds(s.x,s.y,at),et.map.texture.name=tt.name+".shadowMap",et.camera.updateProjectionMatrix()}i.setRenderTarget(et.map),i.clear();const J=et.getViewportCount();for(let at=0;at<J;at++){const xt=et.getViewport(at);a.set(r.x*xt.x,r.y*xt.y,r.x*xt.z,r.y*xt.w),ot.viewport(a),et.updateMatrices(tt,at),n=et.getFrustum(),D(F,z,et.camera,tt,this.type)}et.isPointLightShadow!==!0&&this.type===lc&&R(et,z),et.needsUpdate=!1}S=this.type,T.needsUpdate=!1,i.setRenderTarget(U,P,X)};function R(I,F){const z=t.update(C);v.defines.VSM_SAMPLES!==I.blurSamples&&(v.defines.VSM_SAMPLES=I.blurSamples,_.defines.VSM_SAMPLES=I.blurSamples,v.needsUpdate=!0,_.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Ds(s.x,s.y)),v.uniforms.shadow_pass.value=I.map.texture,v.uniforms.resolution.value=I.mapSize,v.uniforms.radius.value=I.radius,i.setRenderTarget(I.mapPass),i.clear(),i.renderBufferDirect(F,null,z,v,C,null),_.uniforms.shadow_pass.value=I.mapPass.texture,_.uniforms.resolution.value=I.mapSize,_.uniforms.radius.value=I.radius,i.setRenderTarget(I.map),i.clear(),i.renderBufferDirect(F,null,z,_,C,null)}function B(I,F,z,U){let P=null;const X=z.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(X!==void 0)P=X;else if(P=z.isPointLight===!0?u:l,i.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0||F.alphaToCoverage===!0){const ot=P.uuid,it=F.uuid;let ct=f[ot];ct===void 0&&(ct={},f[ot]=ct);let dt=ct[it];dt===void 0&&(dt=P.clone(),ct[it]=dt,F.addEventListener("dispose",N)),P=dt}if(P.visible=F.visible,P.wireframe=F.wireframe,U===lc?P.side=F.shadowSide!==null?F.shadowSide:F.side:P.side=F.shadowSide!==null?F.shadowSide:g[F.side],P.alphaMap=F.alphaMap,P.alphaTest=F.alphaToCoverage===!0?.5:F.alphaTest,P.map=F.map,P.clipShadows=F.clipShadows,P.clippingPlanes=F.clippingPlanes,P.clipIntersection=F.clipIntersection,P.displacementMap=F.displacementMap,P.displacementScale=F.displacementScale,P.displacementBias=F.displacementBias,P.wireframeLinewidth=F.wireframeLinewidth,P.linewidth=F.linewidth,z.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const ot=i.properties.get(P);ot.light=z}return P}function D(I,F,z,U,P){if(I.visible===!1)return;if(I.layers.test(F.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&P===lc)&&(!I.frustumCulled||n.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,I.matrixWorld);const it=t.update(I),ct=I.material;if(Array.isArray(ct)){const dt=it.groups;for(let Q=0,tt=dt.length;Q<tt;Q++){const et=dt[Q],_t=ct[et.materialIndex];if(_t&&_t.visible){const J=B(I,_t,U,P);I.onBeforeShadow(i,I,F,z,it,J,et),i.renderBufferDirect(z,null,it,J,I,et),I.onAfterShadow(i,I,F,z,it,J,et)}}}else if(ct.visible){const dt=B(I,ct,U,P);I.onBeforeShadow(i,I,F,z,it,dt,null),i.renderBufferDirect(z,null,it,dt,I,null),I.onAfterShadow(i,I,F,z,it,dt,null)}}const ot=I.children;for(let it=0,ct=ot.length;it<ct;it++)D(ot[it],F,z,U,P)}function N(I){I.target.removeEventListener("dispose",N);for(const z in f){const U=f[z],P=I.target.uuid;P in U&&(U[P].dispose(),delete U[P])}}}const Iq={[b3]:S3,[E3]:C3,[M3]:w3,[Pg]:T3,[S3]:b3,[C3]:E3,[w3]:M3,[T3]:Pg};function Uq(i,t){function e(){let mt=!1;const ce=new Bn;let Nt=null;const Qt=new Bn(0,0,0,0);return{setMask:function(he){Nt!==he&&!mt&&(i.colorMask(he,he,he,he),Nt=he)},setLocked:function(he){mt=he},setClear:function(he,ue,qe,Jn,Ei){Ei===!0&&(he*=Jn,ue*=Jn,qe*=Jn),ce.set(he,ue,qe,Jn),Qt.equals(ce)===!1&&(i.clearColor(he,ue,qe,Jn),Qt.copy(ce))},reset:function(){mt=!1,Nt=null,Qt.set(-1,0,0,0)}}}function n(){let mt=!1,ce=!1,Nt=null,Qt=null,he=null;return{setReversed:function(ue){if(ce!==ue){const qe=t.get("EXT_clip_control");ue?qe.clipControlEXT(qe.LOWER_LEFT_EXT,qe.ZERO_TO_ONE_EXT):qe.clipControlEXT(qe.LOWER_LEFT_EXT,qe.NEGATIVE_ONE_TO_ONE_EXT),ce=ue;const Jn=he;he=null,this.setClear(Jn)}},getReversed:function(){return ce},setTest:function(ue){ue?Ut(i.DEPTH_TEST):Wt(i.DEPTH_TEST)},setMask:function(ue){Nt!==ue&&!mt&&(i.depthMask(ue),Nt=ue)},setFunc:function(ue){if(ce&&(ue=Iq[ue]),Qt!==ue){switch(ue){case b3:i.depthFunc(i.NEVER);break;case S3:i.depthFunc(i.ALWAYS);break;case E3:i.depthFunc(i.LESS);break;case Pg:i.depthFunc(i.LEQUAL);break;case M3:i.depthFunc(i.EQUAL);break;case T3:i.depthFunc(i.GEQUAL);break;case C3:i.depthFunc(i.GREATER);break;case w3:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Qt=ue}},setLocked:function(ue){mt=ue},setClear:function(ue){he!==ue&&(ce&&(ue=1-ue),i.clearDepth(ue),he=ue)},reset:function(){mt=!1,Nt=null,Qt=null,he=null,ce=!1}}}function s(){let mt=!1,ce=null,Nt=null,Qt=null,he=null,ue=null,qe=null,Jn=null,Ei=null;return{setTest:function(Cn){mt||(Cn?Ut(i.STENCIL_TEST):Wt(i.STENCIL_TEST))},setMask:function(Cn){ce!==Cn&&!mt&&(i.stencilMask(Cn),ce=Cn)},setFunc:function(Cn,Nr,ls){(Nt!==Cn||Qt!==Nr||he!==ls)&&(i.stencilFunc(Cn,Nr,ls),Nt=Cn,Qt=Nr,he=ls)},setOp:function(Cn,Nr,ls){(ue!==Cn||qe!==Nr||Jn!==ls)&&(i.stencilOp(Cn,Nr,ls),ue=Cn,qe=Nr,Jn=ls)},setLocked:function(Cn){mt=Cn},setClear:function(Cn){Ei!==Cn&&(i.clearStencil(Cn),Ei=Cn)},reset:function(){mt=!1,ce=null,Nt=null,Qt=null,he=null,ue=null,qe=null,Jn=null,Ei=null}}}const r=new e,a=new n,l=new s,u=new WeakMap,f=new WeakMap;let m={},g={},v=new WeakMap,_=[],b=null,C=!1,T=null,S=null,R=null,B=null,D=null,N=null,I=null,F=new ae(0,0,0),z=0,U=!1,P=null,X=null,ot=null,it=null,ct=null;const dt=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,tt=0;const et=i.getParameter(i.VERSION);et.indexOf("WebGL")!==-1?(tt=parseFloat(/^WebGL (\d)/.exec(et)[1]),Q=tt>=1):et.indexOf("OpenGL ES")!==-1&&(tt=parseFloat(/^OpenGL ES (\d)/.exec(et)[1]),Q=tt>=2);let _t=null,J={};const at=i.getParameter(i.SCISSOR_BOX),xt=i.getParameter(i.VIEWPORT),Et=new Bn().fromArray(at),lt=new Bn().fromArray(xt);function wt(mt,ce,Nt,Qt){const he=new Uint8Array(4),ue=i.createTexture();i.bindTexture(mt,ue),i.texParameteri(mt,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(mt,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let qe=0;qe<Nt;qe++)mt===i.TEXTURE_3D||mt===i.TEXTURE_2D_ARRAY?i.texImage3D(ce,0,i.RGBA,1,1,Qt,0,i.RGBA,i.UNSIGNED_BYTE,he):i.texImage2D(ce+qe,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,he);return ue}const Bt={};Bt[i.TEXTURE_2D]=wt(i.TEXTURE_2D,i.TEXTURE_2D,1),Bt[i.TEXTURE_CUBE_MAP]=wt(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Bt[i.TEXTURE_2D_ARRAY]=wt(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Bt[i.TEXTURE_3D]=wt(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),a.setClear(1),l.setClear(0),Ut(i.DEPTH_TEST),a.setFunc(Pg),Ft(!1),Vt(y5),Ut(i.CULL_FACE),Z(sa);function Ut(mt){m[mt]!==!0&&(i.enable(mt),m[mt]=!0)}function Wt(mt){m[mt]!==!1&&(i.disable(mt),m[mt]=!1)}function ve(mt,ce){return g[mt]!==ce?(i.bindFramebuffer(mt,ce),g[mt]=ce,mt===i.DRAW_FRAMEBUFFER&&(g[i.FRAMEBUFFER]=ce),mt===i.FRAMEBUFFER&&(g[i.DRAW_FRAMEBUFFER]=ce),!0):!1}function ee(mt,ce){let Nt=_,Qt=!1;if(mt){Nt=v.get(ce),Nt===void 0&&(Nt=[],v.set(ce,Nt));const he=mt.textures;if(Nt.length!==he.length||Nt[0]!==i.COLOR_ATTACHMENT0){for(let ue=0,qe=he.length;ue<qe;ue++)Nt[ue]=i.COLOR_ATTACHMENT0+ue;Nt.length=he.length,Qt=!0}}else Nt[0]!==i.BACK&&(Nt[0]=i.BACK,Qt=!0);Qt&&i.drawBuffers(Nt)}function Ye(mt){return b!==mt?(i.useProgram(mt),b=mt,!0):!1}const we={[md]:i.FUNC_ADD,[X9]:i.FUNC_SUBTRACT,[j9]:i.FUNC_REVERSE_SUBTRACT};we[q9]=i.MIN,we[Y9]=i.MAX;const se={[W9]:i.ZERO,[K9]:i.ONE,[J9]:i.SRC_COLOR,[A3]:i.SRC_ALPHA,[iB]:i.SRC_ALPHA_SATURATE,[eB]:i.DST_COLOR,[$9]:i.DST_ALPHA,[Z9]:i.ONE_MINUS_SRC_COLOR,[x3]:i.ONE_MINUS_SRC_ALPHA,[nB]:i.ONE_MINUS_DST_COLOR,[tB]:i.ONE_MINUS_DST_ALPHA,[sB]:i.CONSTANT_COLOR,[rB]:i.ONE_MINUS_CONSTANT_COLOR,[aB]:i.CONSTANT_ALPHA,[oB]:i.ONE_MINUS_CONSTANT_ALPHA};function Z(mt,ce,Nt,Qt,he,ue,qe,Jn,Ei,Cn){if(mt===sa){C===!0&&(Wt(i.BLEND),C=!1);return}if(C===!1&&(Ut(i.BLEND),C=!0),mt!==Q9){if(mt!==T||Cn!==U){if((S!==md||D!==md)&&(i.blendEquation(i.FUNC_ADD),S=md,D=md),Cn)switch(mt){case Og:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case _5:i.blendFunc(i.ONE,i.ONE);break;case A5:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case x5:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",mt);break}else switch(mt){case Og:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case _5:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case A5:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case x5:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",mt);break}R=null,B=null,N=null,I=null,F.set(0,0,0),z=0,T=mt,U=Cn}return}he=he||ce,ue=ue||Nt,qe=qe||Qt,(ce!==S||he!==D)&&(i.blendEquationSeparate(we[ce],we[he]),S=ce,D=he),(Nt!==R||Qt!==B||ue!==N||qe!==I)&&(i.blendFuncSeparate(se[Nt],se[Qt],se[ue],se[qe]),R=Nt,B=Qt,N=ue,I=qe),(Jn.equals(F)===!1||Ei!==z)&&(i.blendColor(Jn.r,Jn.g,Jn.b,Ei),F.copy(Jn),z=Ei),T=mt,U=!1}function Kt(mt,ce){mt.side===La?Wt(i.CULL_FACE):Ut(i.CULL_FACE);let Nt=mt.side===qs;ce&&(Nt=!Nt),Ft(Nt),mt.blending===Og&&mt.transparent===!1?Z(sa):Z(mt.blending,mt.blendEquation,mt.blendSrc,mt.blendDst,mt.blendEquationAlpha,mt.blendSrcAlpha,mt.blendDstAlpha,mt.blendColor,mt.blendAlpha,mt.premultipliedAlpha),a.setFunc(mt.depthFunc),a.setTest(mt.depthTest),a.setMask(mt.depthWrite),r.setMask(mt.colorWrite);const Qt=mt.stencilWrite;l.setTest(Qt),Qt&&(l.setMask(mt.stencilWriteMask),l.setFunc(mt.stencilFunc,mt.stencilRef,mt.stencilFuncMask),l.setOp(mt.stencilFail,mt.stencilZFail,mt.stencilZPass)),be(mt.polygonOffset,mt.polygonOffsetFactor,mt.polygonOffsetUnits),mt.alphaToCoverage===!0?Ut(i.SAMPLE_ALPHA_TO_COVERAGE):Wt(i.SAMPLE_ALPHA_TO_COVERAGE)}function Ft(mt){P!==mt&&(mt?i.frontFace(i.CW):i.frontFace(i.CCW),P=mt)}function Vt(mt){mt!==G9?(Ut(i.CULL_FACE),mt!==X&&(mt===y5?i.cullFace(i.BACK):mt===k9?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Wt(i.CULL_FACE),X=mt}function Gt(mt){mt!==ot&&(Q&&i.lineWidth(mt),ot=mt)}function be(mt,ce,Nt){mt?(Ut(i.POLYGON_OFFSET_FILL),(it!==ce||ct!==Nt)&&(i.polygonOffset(ce,Nt),it=ce,ct=Nt)):Wt(i.POLYGON_OFFSET_FILL)}function qt(mt){mt?Ut(i.SCISSOR_TEST):Wt(i.SCISSOR_TEST)}function $(mt){mt===void 0&&(mt=i.TEXTURE0+dt-1),_t!==mt&&(i.activeTexture(mt),_t=mt)}function V(mt,ce,Nt){Nt===void 0&&(_t===null?Nt=i.TEXTURE0+dt-1:Nt=_t);let Qt=J[Nt];Qt===void 0&&(Qt={type:void 0,texture:void 0},J[Nt]=Qt),(Qt.type!==mt||Qt.texture!==ce)&&(_t!==Nt&&(i.activeTexture(Nt),_t=Nt),i.bindTexture(mt,ce||Bt[mt]),Qt.type=mt,Qt.texture=ce)}function vt(){const mt=J[_t];mt!==void 0&&mt.type!==void 0&&(i.bindTexture(mt.type,null),mt.type=void 0,mt.texture=void 0)}function It(){try{i.compressedTexImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Xt(){try{i.compressedTexImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Ot(){try{i.texSubImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function ne(){try{i.texSubImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function te(){try{i.compressedTexSubImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function ge(){try{i.compressedTexSubImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function De(){try{i.texStorage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Jt(){try{i.texStorage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function _e(){try{i.texImage2D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Se(){try{i.texImage3D(...arguments)}catch(mt){console.error("THREE.WebGLState:",mt)}}function Te(mt){Et.equals(mt)===!1&&(i.scissor(mt.x,mt.y,mt.z,mt.w),Et.copy(mt))}function le(mt){lt.equals(mt)===!1&&(i.viewport(mt.x,mt.y,mt.z,mt.w),lt.copy(mt))}function rn(mt,ce){let Nt=f.get(ce);Nt===void 0&&(Nt=new WeakMap,f.set(ce,Nt));let Qt=Nt.get(mt);Qt===void 0&&(Qt=i.getUniformBlockIndex(ce,mt.name),Nt.set(mt,Qt))}function He(mt,ce){const Qt=f.get(ce).get(mt);u.get(ce)!==Qt&&(i.uniformBlockBinding(ce,Qt,mt.__bindingPointIndex),u.set(ce,Qt))}function Gn(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),a.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),m={},_t=null,J={},g={},v=new WeakMap,_=[],b=null,C=!1,T=null,S=null,R=null,B=null,D=null,N=null,I=null,F=new ae(0,0,0),z=0,U=!1,P=null,X=null,ot=null,it=null,ct=null,Et.set(0,0,i.canvas.width,i.canvas.height),lt.set(0,0,i.canvas.width,i.canvas.height),r.reset(),a.reset(),l.reset()}return{buffers:{color:r,depth:a,stencil:l},enable:Ut,disable:Wt,bindFramebuffer:ve,drawBuffers:ee,useProgram:Ye,setBlending:Z,setMaterial:Kt,setFlipSided:Ft,setCullFace:Vt,setLineWidth:Gt,setPolygonOffset:be,setScissorTest:qt,activeTexture:$,bindTexture:V,unbindTexture:vt,compressedTexImage2D:It,compressedTexImage3D:Xt,texImage2D:_e,texImage3D:Se,updateUBOMapping:rn,uniformBlockBinding:He,texStorage2D:De,texStorage3D:Jt,texSubImage2D:Ot,texSubImage3D:ne,compressedTexSubImage2D:te,compressedTexSubImage3D:ge,scissor:Te,viewport:le,reset:Gn}}function Pq(i,t,e,n,s,r,a){const l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new Pt,m=new WeakMap;let g;const v=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b($,V){return _?new OffscreenCanvas($,V):tA("canvas")}function C($,V,vt){let It=1;const Xt=qt($);if((Xt.width>vt||Xt.height>vt)&&(It=vt/Math.max(Xt.width,Xt.height)),It<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const Ot=Math.floor(It*Xt.width),ne=Math.floor(It*Xt.height);g===void 0&&(g=b(Ot,ne));const te=V?b(Ot,ne):g;return te.width=Ot,te.height=ne,te.getContext("2d").drawImage($,0,0,Ot,ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Xt.width+"x"+Xt.height+") to ("+Ot+"x"+ne+")."),te}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Xt.width+"x"+Xt.height+")."),$;return $}function T($){return $.generateMipmaps}function S($){i.generateMipmap($)}function R($){return $.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?i.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function B($,V,vt,It,Xt=!1){if($!==null){if(i[$]!==void 0)return i[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Ot=V;if(V===i.RED&&(vt===i.FLOAT&&(Ot=i.R32F),vt===i.HALF_FLOAT&&(Ot=i.R16F),vt===i.UNSIGNED_BYTE&&(Ot=i.R8)),V===i.RED_INTEGER&&(vt===i.UNSIGNED_BYTE&&(Ot=i.R8UI),vt===i.UNSIGNED_SHORT&&(Ot=i.R16UI),vt===i.UNSIGNED_INT&&(Ot=i.R32UI),vt===i.BYTE&&(Ot=i.R8I),vt===i.SHORT&&(Ot=i.R16I),vt===i.INT&&(Ot=i.R32I)),V===i.RG&&(vt===i.FLOAT&&(Ot=i.RG32F),vt===i.HALF_FLOAT&&(Ot=i.RG16F),vt===i.UNSIGNED_BYTE&&(Ot=i.RG8)),V===i.RG_INTEGER&&(vt===i.UNSIGNED_BYTE&&(Ot=i.RG8UI),vt===i.UNSIGNED_SHORT&&(Ot=i.RG16UI),vt===i.UNSIGNED_INT&&(Ot=i.RG32UI),vt===i.BYTE&&(Ot=i.RG8I),vt===i.SHORT&&(Ot=i.RG16I),vt===i.INT&&(Ot=i.RG32I)),V===i.RGB_INTEGER&&(vt===i.UNSIGNED_BYTE&&(Ot=i.RGB8UI),vt===i.UNSIGNED_SHORT&&(Ot=i.RGB16UI),vt===i.UNSIGNED_INT&&(Ot=i.RGB32UI),vt===i.BYTE&&(Ot=i.RGB8I),vt===i.SHORT&&(Ot=i.RGB16I),vt===i.INT&&(Ot=i.RGB32I)),V===i.RGBA_INTEGER&&(vt===i.UNSIGNED_BYTE&&(Ot=i.RGBA8UI),vt===i.UNSIGNED_SHORT&&(Ot=i.RGBA16UI),vt===i.UNSIGNED_INT&&(Ot=i.RGBA32UI),vt===i.BYTE&&(Ot=i.RGBA8I),vt===i.SHORT&&(Ot=i.RGBA16I),vt===i.INT&&(Ot=i.RGBA32I)),V===i.RGB&&vt===i.UNSIGNED_INT_5_9_9_9_REV&&(Ot=i.RGB9_E5),V===i.RGBA){const ne=Xt?K_:Pn.getTransfer(It);vt===i.FLOAT&&(Ot=i.RGBA32F),vt===i.HALF_FLOAT&&(Ot=i.RGBA16F),vt===i.UNSIGNED_BYTE&&(Ot=ne===fi?i.SRGB8_ALPHA8:i.RGBA8),vt===i.UNSIGNED_SHORT_4_4_4_4&&(Ot=i.RGBA4),vt===i.UNSIGNED_SHORT_5_5_5_1&&(Ot=i.RGB5_A1)}return(Ot===i.R16F||Ot===i.R32F||Ot===i.RG16F||Ot===i.RG32F||Ot===i.RGBA16F||Ot===i.RGBA32F)&&t.get("EXT_color_buffer_float"),Ot}function D($,V){let vt;return $?V===null||V===Fu||V===Fg?vt=i.DEPTH24_STENCIL8:V===Oa?vt=i.DEPTH32F_STENCIL8:V===oy&&(vt=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===Fu||V===Fg?vt=i.DEPTH_COMPONENT24:V===Oa?vt=i.DEPTH_COMPONENT32F:V===oy&&(vt=i.DEPTH_COMPONENT16),vt}function N($,V){return T($)===!0||$.isFramebufferTexture&&$.minFilter!==os&&$.minFilter!==Ni?Math.log2(Math.max(V.width,V.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?V.mipmaps.length:1}function I($){const V=$.target;V.removeEventListener("dispose",I),z(V),V.isVideoTexture&&m.delete(V)}function F($){const V=$.target;V.removeEventListener("dispose",F),P(V)}function z($){const V=n.get($);if(V.__webglInit===void 0)return;const vt=$.source,It=v.get(vt);if(It){const Xt=It[V.__cacheKey];Xt.usedTimes--,Xt.usedTimes===0&&U($),Object.keys(It).length===0&&v.delete(vt)}n.remove($)}function U($){const V=n.get($);i.deleteTexture(V.__webglTexture);const vt=$.source,It=v.get(vt);delete It[V.__cacheKey],a.memory.textures--}function P($){const V=n.get($);if($.depthTexture&&($.depthTexture.dispose(),n.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let It=0;It<6;It++){if(Array.isArray(V.__webglFramebuffer[It]))for(let Xt=0;Xt<V.__webglFramebuffer[It].length;Xt++)i.deleteFramebuffer(V.__webglFramebuffer[It][Xt]);else i.deleteFramebuffer(V.__webglFramebuffer[It]);V.__webglDepthbuffer&&i.deleteRenderbuffer(V.__webglDepthbuffer[It])}else{if(Array.isArray(V.__webglFramebuffer))for(let It=0;It<V.__webglFramebuffer.length;It++)i.deleteFramebuffer(V.__webglFramebuffer[It]);else i.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&i.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&i.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let It=0;It<V.__webglColorRenderbuffer.length;It++)V.__webglColorRenderbuffer[It]&&i.deleteRenderbuffer(V.__webglColorRenderbuffer[It]);V.__webglDepthRenderbuffer&&i.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const vt=$.textures;for(let It=0,Xt=vt.length;It<Xt;It++){const Ot=n.get(vt[It]);Ot.__webglTexture&&(i.deleteTexture(Ot.__webglTexture),a.memory.textures--),n.remove(vt[It])}n.remove($)}let X=0;function ot(){X=0}function it(){const $=X;return $>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+s.maxTextures),X+=1,$}function ct($){const V=[];return V.push($.wrapS),V.push($.wrapT),V.push($.wrapR||0),V.push($.magFilter),V.push($.minFilter),V.push($.anisotropy),V.push($.internalFormat),V.push($.format),V.push($.type),V.push($.generateMipmaps),V.push($.premultiplyAlpha),V.push($.flipY),V.push($.unpackAlignment),V.push($.colorSpace),V.join()}function dt($,V){const vt=n.get($);if($.isVideoTexture&&Gt($),$.isRenderTargetTexture===!1&&$.version>0&&vt.__version!==$.version){const It=$.image;if(It===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(It.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{lt(vt,$,V);return}}e.bindTexture(i.TEXTURE_2D,vt.__webglTexture,i.TEXTURE0+V)}function Q($,V){const vt=n.get($);if($.version>0&&vt.__version!==$.version){lt(vt,$,V);return}e.bindTexture(i.TEXTURE_2D_ARRAY,vt.__webglTexture,i.TEXTURE0+V)}function tt($,V){const vt=n.get($);if($.version>0&&vt.__version!==$.version){lt(vt,$,V);return}e.bindTexture(i.TEXTURE_3D,vt.__webglTexture,i.TEXTURE0+V)}function et($,V){const vt=n.get($);if($.version>0&&vt.__version!==$.version){wt(vt,$,V);return}e.bindTexture(i.TEXTURE_CUBE_MAP,vt.__webglTexture,i.TEXTURE0+V)}const _t={[tp]:i.REPEAT,[Ho]:i.CLAMP_TO_EDGE,[ay]:i.MIRRORED_REPEAT},J={[os]:i.NEAREST,[YE]:i.NEAREST_MIPMAP_NEAREST,[Lm]:i.NEAREST_MIPMAP_LINEAR,[Ni]:i.LINEAR,[W1]:i.LINEAR_MIPMAP_NEAREST,[Tl]:i.LINEAR_MIPMAP_LINEAR},at={[SB]:i.NEVER,[RB]:i.ALWAYS,[EB]:i.LESS,[Ow]:i.LEQUAL,[MB]:i.EQUAL,[wB]:i.GEQUAL,[TB]:i.GREATER,[CB]:i.NOTEQUAL};function xt($,V){if(V.type===Oa&&t.has("OES_texture_float_linear")===!1&&(V.magFilter===Ni||V.magFilter===W1||V.magFilter===Lm||V.magFilter===Tl||V.minFilter===Ni||V.minFilter===W1||V.minFilter===Lm||V.minFilter===Tl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri($,i.TEXTURE_WRAP_S,_t[V.wrapS]),i.texParameteri($,i.TEXTURE_WRAP_T,_t[V.wrapT]),($===i.TEXTURE_3D||$===i.TEXTURE_2D_ARRAY)&&i.texParameteri($,i.TEXTURE_WRAP_R,_t[V.wrapR]),i.texParameteri($,i.TEXTURE_MAG_FILTER,J[V.magFilter]),i.texParameteri($,i.TEXTURE_MIN_FILTER,J[V.minFilter]),V.compareFunction&&(i.texParameteri($,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri($,i.TEXTURE_COMPARE_FUNC,at[V.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===os||V.minFilter!==Lm&&V.minFilter!==Tl||V.type===Oa&&t.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||n.get(V).__currentAnisotropy){const vt=t.get("EXT_texture_filter_anisotropic");i.texParameterf($,vt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,s.getMaxAnisotropy())),n.get(V).__currentAnisotropy=V.anisotropy}}}function Et($,V){let vt=!1;$.__webglInit===void 0&&($.__webglInit=!0,V.addEventListener("dispose",I));const It=V.source;let Xt=v.get(It);Xt===void 0&&(Xt={},v.set(It,Xt));const Ot=ct(V);if(Ot!==$.__cacheKey){Xt[Ot]===void 0&&(Xt[Ot]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,vt=!0),Xt[Ot].usedTimes++;const ne=Xt[$.__cacheKey];ne!==void 0&&(Xt[$.__cacheKey].usedTimes--,ne.usedTimes===0&&U(V)),$.__cacheKey=Ot,$.__webglTexture=Xt[Ot].texture}return vt}function lt($,V,vt){let It=i.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(It=i.TEXTURE_2D_ARRAY),V.isData3DTexture&&(It=i.TEXTURE_3D);const Xt=Et($,V),Ot=V.source;e.bindTexture(It,$.__webglTexture,i.TEXTURE0+vt);const ne=n.get(Ot);if(Ot.version!==ne.__version||Xt===!0){e.activeTexture(i.TEXTURE0+vt);const te=Pn.getPrimaries(Pn.workingColorSpace),ge=V.colorSpace===Ec?null:Pn.getPrimaries(V.colorSpace),De=V.colorSpace===Ec||te===ge?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,V.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,V.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,De);let Jt=C(V.image,!1,s.maxTextureSize);Jt=be(V,Jt);const _e=r.convert(V.format,V.colorSpace),Se=r.convert(V.type);let Te=B(V.internalFormat,_e,Se,V.colorSpace,V.isVideoTexture);xt(It,V);let le;const rn=V.mipmaps,He=V.isVideoTexture!==!0,Gn=ne.__version===void 0||Xt===!0,mt=Ot.dataReady,ce=N(V,Jt);if(V.isDepthTexture)Te=D(V.format===Hg,V.type),Gn&&(He?e.texStorage2D(i.TEXTURE_2D,1,Te,Jt.width,Jt.height):e.texImage2D(i.TEXTURE_2D,0,Te,Jt.width,Jt.height,0,_e,Se,null));else if(V.isDataTexture)if(rn.length>0){He&&Gn&&e.texStorage2D(i.TEXTURE_2D,ce,Te,rn[0].width,rn[0].height);for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)le=rn[Nt],He?mt&&e.texSubImage2D(i.TEXTURE_2D,Nt,0,0,le.width,le.height,_e,Se,le.data):e.texImage2D(i.TEXTURE_2D,Nt,Te,le.width,le.height,0,_e,Se,le.data);V.generateMipmaps=!1}else He?(Gn&&e.texStorage2D(i.TEXTURE_2D,ce,Te,Jt.width,Jt.height),mt&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,Jt.width,Jt.height,_e,Se,Jt.data)):e.texImage2D(i.TEXTURE_2D,0,Te,Jt.width,Jt.height,0,_e,Se,Jt.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){He&&Gn&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ce,Te,rn[0].width,rn[0].height,Jt.depth);for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)if(le=rn[Nt],V.format!==ea)if(_e!==null)if(He){if(mt)if(V.layerUpdates.size>0){const he=L5(le.width,le.height,V.format,V.type);for(const ue of V.layerUpdates){const qe=le.data.subarray(ue*he/le.data.BYTES_PER_ELEMENT,(ue+1)*he/le.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Nt,0,0,ue,le.width,le.height,1,_e,qe)}V.clearLayerUpdates()}else e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Nt,0,0,0,le.width,le.height,Jt.depth,_e,le.data)}else e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Nt,Te,le.width,le.height,Jt.depth,0,le.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else He?mt&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,Nt,0,0,0,le.width,le.height,Jt.depth,_e,Se,le.data):e.texImage3D(i.TEXTURE_2D_ARRAY,Nt,Te,le.width,le.height,Jt.depth,0,_e,Se,le.data)}else{He&&Gn&&e.texStorage2D(i.TEXTURE_2D,ce,Te,rn[0].width,rn[0].height);for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)le=rn[Nt],V.format!==ea?_e!==null?He?mt&&e.compressedTexSubImage2D(i.TEXTURE_2D,Nt,0,0,le.width,le.height,_e,le.data):e.compressedTexImage2D(i.TEXTURE_2D,Nt,Te,le.width,le.height,0,le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?mt&&e.texSubImage2D(i.TEXTURE_2D,Nt,0,0,le.width,le.height,_e,Se,le.data):e.texImage2D(i.TEXTURE_2D,Nt,Te,le.width,le.height,0,_e,Se,le.data)}else if(V.isDataArrayTexture)if(He){if(Gn&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ce,Te,Jt.width,Jt.height,Jt.depth),mt)if(V.layerUpdates.size>0){const Nt=L5(Jt.width,Jt.height,V.format,V.type);for(const Qt of V.layerUpdates){const he=Jt.data.subarray(Qt*Nt/Jt.data.BYTES_PER_ELEMENT,(Qt+1)*Nt/Jt.data.BYTES_PER_ELEMENT);e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Qt,Jt.width,Jt.height,1,_e,Se,he)}V.clearLayerUpdates()}else e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Jt.width,Jt.height,Jt.depth,_e,Se,Jt.data)}else e.texImage3D(i.TEXTURE_2D_ARRAY,0,Te,Jt.width,Jt.height,Jt.depth,0,_e,Se,Jt.data);else if(V.isData3DTexture)He?(Gn&&e.texStorage3D(i.TEXTURE_3D,ce,Te,Jt.width,Jt.height,Jt.depth),mt&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Jt.width,Jt.height,Jt.depth,_e,Se,Jt.data)):e.texImage3D(i.TEXTURE_3D,0,Te,Jt.width,Jt.height,Jt.depth,0,_e,Se,Jt.data);else if(V.isFramebufferTexture){if(Gn)if(He)e.texStorage2D(i.TEXTURE_2D,ce,Te,Jt.width,Jt.height);else{let Nt=Jt.width,Qt=Jt.height;for(let he=0;he<ce;he++)e.texImage2D(i.TEXTURE_2D,he,Te,Nt,Qt,0,_e,Se,null),Nt>>=1,Qt>>=1}}else if(rn.length>0){if(He&&Gn){const Nt=qt(rn[0]);e.texStorage2D(i.TEXTURE_2D,ce,Te,Nt.width,Nt.height)}for(let Nt=0,Qt=rn.length;Nt<Qt;Nt++)le=rn[Nt],He?mt&&e.texSubImage2D(i.TEXTURE_2D,Nt,0,0,_e,Se,le):e.texImage2D(i.TEXTURE_2D,Nt,Te,_e,Se,le);V.generateMipmaps=!1}else if(He){if(Gn){const Nt=qt(Jt);e.texStorage2D(i.TEXTURE_2D,ce,Te,Nt.width,Nt.height)}mt&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,_e,Se,Jt)}else e.texImage2D(i.TEXTURE_2D,0,Te,_e,Se,Jt);T(V)&&S(It),ne.__version=Ot.version,V.onUpdate&&V.onUpdate(V)}$.__version=V.version}function wt($,V,vt){if(V.image.length!==6)return;const It=Et($,V),Xt=V.source;e.bindTexture(i.TEXTURE_CUBE_MAP,$.__webglTexture,i.TEXTURE0+vt);const Ot=n.get(Xt);if(Xt.version!==Ot.__version||It===!0){e.activeTexture(i.TEXTURE0+vt);const ne=Pn.getPrimaries(Pn.workingColorSpace),te=V.colorSpace===Ec?null:Pn.getPrimaries(V.colorSpace),ge=V.colorSpace===Ec||ne===te?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,V.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,V.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ge);const De=V.isCompressedTexture||V.image[0].isCompressedTexture,Jt=V.image[0]&&V.image[0].isDataTexture,_e=[];for(let Qt=0;Qt<6;Qt++)!De&&!Jt?_e[Qt]=C(V.image[Qt],!0,s.maxCubemapSize):_e[Qt]=Jt?V.image[Qt].image:V.image[Qt],_e[Qt]=be(V,_e[Qt]);const Se=_e[0],Te=r.convert(V.format,V.colorSpace),le=r.convert(V.type),rn=B(V.internalFormat,Te,le,V.colorSpace),He=V.isVideoTexture!==!0,Gn=Ot.__version===void 0||It===!0,mt=Xt.dataReady;let ce=N(V,Se);xt(i.TEXTURE_CUBE_MAP,V);let Nt;if(De){He&&Gn&&e.texStorage2D(i.TEXTURE_CUBE_MAP,ce,rn,Se.width,Se.height);for(let Qt=0;Qt<6;Qt++){Nt=_e[Qt].mipmaps;for(let he=0;he<Nt.length;he++){const ue=Nt[he];V.format!==ea?Te!==null?He?mt&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,he,0,0,ue.width,ue.height,Te,ue.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,he,rn,ue.width,ue.height,0,ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,he,0,0,ue.width,ue.height,Te,le,ue.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,he,rn,ue.width,ue.height,0,Te,le,ue.data)}}}else{if(Nt=V.mipmaps,He&&Gn){Nt.length>0&&ce++;const Qt=qt(_e[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,ce,rn,Qt.width,Qt.height)}for(let Qt=0;Qt<6;Qt++)if(Jt){He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,0,0,_e[Qt].width,_e[Qt].height,Te,le,_e[Qt].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,rn,_e[Qt].width,_e[Qt].height,0,Te,le,_e[Qt].data);for(let he=0;he<Nt.length;he++){const qe=Nt[he].image[Qt].image;He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,he+1,0,0,qe.width,qe.height,Te,le,qe.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,he+1,rn,qe.width,qe.height,0,Te,le,qe.data)}}else{He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,0,0,Te,le,_e[Qt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,rn,Te,le,_e[Qt]);for(let he=0;he<Nt.length;he++){const ue=Nt[he];He?mt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,he+1,0,0,Te,le,ue.image[Qt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,he+1,rn,Te,le,ue.image[Qt])}}}T(V)&&S(i.TEXTURE_CUBE_MAP),Ot.__version=Xt.version,V.onUpdate&&V.onUpdate(V)}$.__version=V.version}function Bt($,V,vt,It,Xt,Ot){const ne=r.convert(vt.format,vt.colorSpace),te=r.convert(vt.type),ge=B(vt.internalFormat,ne,te,vt.colorSpace),De=n.get(V),Jt=n.get(vt);if(Jt.__renderTarget=V,!De.__hasExternalTextures){const _e=Math.max(1,V.width>>Ot),Se=Math.max(1,V.height>>Ot);Xt===i.TEXTURE_3D||Xt===i.TEXTURE_2D_ARRAY?e.texImage3D(Xt,Ot,ge,_e,Se,V.depth,0,ne,te,null):e.texImage2D(Xt,Ot,ge,_e,Se,0,ne,te,null)}e.bindFramebuffer(i.FRAMEBUFFER,$),Vt(V)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,It,Xt,Jt.__webglTexture,0,Ft(V)):(Xt===i.TEXTURE_2D||Xt>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Xt<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,It,Xt,Jt.__webglTexture,Ot),e.bindFramebuffer(i.FRAMEBUFFER,null)}function Ut($,V,vt){if(i.bindRenderbuffer(i.RENDERBUFFER,$),V.depthBuffer){const It=V.depthTexture,Xt=It&&It.isDepthTexture?It.type:null,Ot=D(V.stencilBuffer,Xt),ne=V.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,te=Ft(V);Vt(V)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,te,Ot,V.width,V.height):vt?i.renderbufferStorageMultisample(i.RENDERBUFFER,te,Ot,V.width,V.height):i.renderbufferStorage(i.RENDERBUFFER,Ot,V.width,V.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,ne,i.RENDERBUFFER,$)}else{const It=V.textures;for(let Xt=0;Xt<It.length;Xt++){const Ot=It[Xt],ne=r.convert(Ot.format,Ot.colorSpace),te=r.convert(Ot.type),ge=B(Ot.internalFormat,ne,te,Ot.colorSpace),De=Ft(V);vt&&Vt(V)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,De,ge,V.width,V.height):Vt(V)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,De,ge,V.width,V.height):i.renderbufferStorage(i.RENDERBUFFER,ge,V.width,V.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Wt($,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(i.FRAMEBUFFER,$),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const It=n.get(V.depthTexture);It.__renderTarget=V,(!It.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),dt(V.depthTexture,0);const Xt=It.__webglTexture,Ot=Ft(V);if(V.depthTexture.format===ly)Vt(V)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Xt,0,Ot):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Xt,0);else if(V.depthTexture.format===Hg)Vt(V)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Xt,0,Ot):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Xt,0);else throw new Error("Unknown depthTexture format")}function ve($){const V=n.get($),vt=$.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==$.depthTexture){const It=$.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),It){const Xt=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,It.removeEventListener("dispose",Xt)};It.addEventListener("dispose",Xt),V.__depthDisposeCallback=Xt}V.__boundDepthTexture=It}if($.depthTexture&&!V.__autoAllocateDepthBuffer){if(vt)throw new Error("target.depthTexture not supported in Cube render targets");const It=$.texture.mipmaps;It&&It.length>0?Wt(V.__webglFramebuffer[0],$):Wt(V.__webglFramebuffer,$)}else if(vt){V.__webglDepthbuffer=[];for(let It=0;It<6;It++)if(e.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer[It]),V.__webglDepthbuffer[It]===void 0)V.__webglDepthbuffer[It]=i.createRenderbuffer(),Ut(V.__webglDepthbuffer[It],$,!1);else{const Xt=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ot=V.__webglDepthbuffer[It];i.bindRenderbuffer(i.RENDERBUFFER,Ot),i.framebufferRenderbuffer(i.FRAMEBUFFER,Xt,i.RENDERBUFFER,Ot)}}else{const It=$.texture.mipmaps;if(It&&It.length>0?e.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer[0]):e.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=i.createRenderbuffer(),Ut(V.__webglDepthbuffer,$,!1);else{const Xt=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ot=V.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Ot),i.framebufferRenderbuffer(i.FRAMEBUFFER,Xt,i.RENDERBUFFER,Ot)}}e.bindFramebuffer(i.FRAMEBUFFER,null)}function ee($,V,vt){const It=n.get($);V!==void 0&&Bt(It.__webglFramebuffer,$,$.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),vt!==void 0&&ve($)}function Ye($){const V=$.texture,vt=n.get($),It=n.get(V);$.addEventListener("dispose",F);const Xt=$.textures,Ot=$.isWebGLCubeRenderTarget===!0,ne=Xt.length>1;if(ne||(It.__webglTexture===void 0&&(It.__webglTexture=i.createTexture()),It.__version=V.version,a.memory.textures++),Ot){vt.__webglFramebuffer=[];for(let te=0;te<6;te++)if(V.mipmaps&&V.mipmaps.length>0){vt.__webglFramebuffer[te]=[];for(let ge=0;ge<V.mipmaps.length;ge++)vt.__webglFramebuffer[te][ge]=i.createFramebuffer()}else vt.__webglFramebuffer[te]=i.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){vt.__webglFramebuffer=[];for(let te=0;te<V.mipmaps.length;te++)vt.__webglFramebuffer[te]=i.createFramebuffer()}else vt.__webglFramebuffer=i.createFramebuffer();if(ne)for(let te=0,ge=Xt.length;te<ge;te++){const De=n.get(Xt[te]);De.__webglTexture===void 0&&(De.__webglTexture=i.createTexture(),a.memory.textures++)}if($.samples>0&&Vt($)===!1){vt.__webglMultisampledFramebuffer=i.createFramebuffer(),vt.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,vt.__webglMultisampledFramebuffer);for(let te=0;te<Xt.length;te++){const ge=Xt[te];vt.__webglColorRenderbuffer[te]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,vt.__webglColorRenderbuffer[te]);const De=r.convert(ge.format,ge.colorSpace),Jt=r.convert(ge.type),_e=B(ge.internalFormat,De,Jt,ge.colorSpace,$.isXRRenderTarget===!0),Se=Ft($);i.renderbufferStorageMultisample(i.RENDERBUFFER,Se,_e,$.width,$.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+te,i.RENDERBUFFER,vt.__webglColorRenderbuffer[te])}i.bindRenderbuffer(i.RENDERBUFFER,null),$.depthBuffer&&(vt.__webglDepthRenderbuffer=i.createRenderbuffer(),Ut(vt.__webglDepthRenderbuffer,$,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Ot){e.bindTexture(i.TEXTURE_CUBE_MAP,It.__webglTexture),xt(i.TEXTURE_CUBE_MAP,V);for(let te=0;te<6;te++)if(V.mipmaps&&V.mipmaps.length>0)for(let ge=0;ge<V.mipmaps.length;ge++)Bt(vt.__webglFramebuffer[te][ge],$,V,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+te,ge);else Bt(vt.__webglFramebuffer[te],$,V,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+te,0);T(V)&&S(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(ne){for(let te=0,ge=Xt.length;te<ge;te++){const De=Xt[te],Jt=n.get(De);e.bindTexture(i.TEXTURE_2D,Jt.__webglTexture),xt(i.TEXTURE_2D,De),Bt(vt.__webglFramebuffer,$,De,i.COLOR_ATTACHMENT0+te,i.TEXTURE_2D,0),T(De)&&S(i.TEXTURE_2D)}e.unbindTexture()}else{let te=i.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(te=$.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(te,It.__webglTexture),xt(te,V),V.mipmaps&&V.mipmaps.length>0)for(let ge=0;ge<V.mipmaps.length;ge++)Bt(vt.__webglFramebuffer[ge],$,V,i.COLOR_ATTACHMENT0,te,ge);else Bt(vt.__webglFramebuffer,$,V,i.COLOR_ATTACHMENT0,te,0);T(V)&&S(te),e.unbindTexture()}$.depthBuffer&&ve($)}function we($){const V=$.textures;for(let vt=0,It=V.length;vt<It;vt++){const Xt=V[vt];if(T(Xt)){const Ot=R($),ne=n.get(Xt).__webglTexture;e.bindTexture(Ot,ne),S(Ot),e.unbindTexture()}}}const se=[],Z=[];function Kt($){if($.samples>0){if(Vt($)===!1){const V=$.textures,vt=$.width,It=$.height;let Xt=i.COLOR_BUFFER_BIT;const Ot=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ne=n.get($),te=V.length>1;if(te)for(let De=0;De<V.length;De++)e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,ne.__webglMultisampledFramebuffer);const ge=$.texture.mipmaps;ge&&ge.length>0?e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ne.__webglFramebuffer[0]):e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ne.__webglFramebuffer);for(let De=0;De<V.length;De++){if($.resolveDepthBuffer&&($.depthBuffer&&(Xt|=i.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(Xt|=i.STENCIL_BUFFER_BIT)),te){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,ne.__webglColorRenderbuffer[De]);const Jt=n.get(V[De]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Jt,0)}i.blitFramebuffer(0,0,vt,It,0,0,vt,It,Xt,i.NEAREST),u===!0&&(se.length=0,Z.length=0,se.push(i.COLOR_ATTACHMENT0+De),$.depthBuffer&&$.resolveDepthBuffer===!1&&(se.push(Ot),Z.push(Ot),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Z)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,se))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),te)for(let De=0;De<V.length;De++){e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.RENDERBUFFER,ne.__webglColorRenderbuffer[De]);const Jt=n.get(V[De]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.TEXTURE_2D,Jt,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ne.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&u){const V=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[V])}}}function Ft($){return Math.min(s.maxSamples,$.samples)}function Vt($){const V=n.get($);return $.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function Gt($){const V=a.render.frame;m.get($)!==V&&(m.set($,V),$.update())}function be($,V){const vt=$.colorSpace,It=$.format,Xt=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||vt!==Hu&&vt!==Ec&&(Pn.getTransfer(vt)===fi?(It!==ea||Xt!==Ws)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",vt)),V}function qt($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(f.width=$.naturalWidth||$.width,f.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(f.width=$.displayWidth,f.height=$.displayHeight):(f.width=$.width,f.height=$.height),f}this.allocateTextureUnit=it,this.resetTextureUnits=ot,this.setTexture2D=dt,this.setTexture2DArray=Q,this.setTexture3D=tt,this.setTextureCube=et,this.rebindTextures=ee,this.setupRenderTarget=Ye,this.updateRenderTargetMipmap=we,this.updateMultisampleRenderTarget=Kt,this.setupDepthRenderbuffer=ve,this.setupFrameBufferTexture=Bt,this.useMultisampledRTT=Vt}function BO(i,t){function e(n,s=Ec){let r;const a=Pn.getTransfer(s);if(n===Ws)return i.UNSIGNED_BYTE;if(n===KE)return i.UNSIGNED_SHORT_4_4_4_4;if(n===JE)return i.UNSIGNED_SHORT_5_5_5_1;if(n===Tw)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===Ew)return i.BYTE;if(n===Mw)return i.SHORT;if(n===oy)return i.UNSIGNED_SHORT;if(n===WE)return i.INT;if(n===Fu)return i.UNSIGNED_INT;if(n===Oa)return i.FLOAT;if(n===i0)return i.HALF_FLOAT;if(n===Cw)return i.ALPHA;if(n===ww)return i.RGB;if(n===ea)return i.RGBA;if(n===ly)return i.DEPTH_COMPONENT;if(n===Hg)return i.DEPTH_STENCIL;if(n===ZE)return i.RED;if(n===Cx)return i.RED_INTEGER;if(n===Rw)return i.RG;if(n===$E)return i.RG_INTEGER;if(n===tM)return i.RGBA_INTEGER;if(n===B_||n===O_||n===N_||n===I_)if(a===fi)if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===B_)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===O_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===N_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===I_)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=t.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===B_)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===O_)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===N_)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===I_)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===R3||n===L3||n===D3||n===B3)if(r=t.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===R3)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===L3)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===D3)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===B3)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===O3||n===N3||n===I3)if(r=t.get("WEBGL_compressed_texture_etc"),r!==null){if(n===O3||n===N3)return a===fi?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===I3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===U3||n===P3||n===F3||n===H3||n===z3||n===G3||n===k3||n===V3||n===Q3||n===X3||n===j3||n===q3||n===Y3||n===W3)if(r=t.get("WEBGL_compressed_texture_astc"),r!==null){if(n===U3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===P3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===F3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===H3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===z3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===G3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===k3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===V3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Q3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===X3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===j3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===q3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Y3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===W3)return a===fi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===U_||n===K3||n===J3)if(r=t.get("EXT_texture_compression_bptc"),r!==null){if(n===U_)return a===fi?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===K3)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===J3)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Lw||n===Z3||n===$3||n===tE)if(r=t.get("EXT_texture_compression_rgtc"),r!==null){if(n===U_)return r.COMPRESSED_RED_RGTC1_EXT;if(n===Z3)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===$3)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===tE)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Fg?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:e}}const Fq=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Hq=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class zq{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(this.texture===null){const s=new wi,r=t.properties.get(s);r.__webglTexture=e.texture,(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=s}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,n=new Ks({vertexShader:Fq,fragmentShader:Hq,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new as(new My(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Gq extends qo{constructor(t,e){super();const n=this;let s=null,r=1,a=null,l="local-floor",u=1,f=null,m=null,g=null,v=null,_=null,b=null;const C=new zq,T=e.getContextAttributes();let S=null,R=null;const B=[],D=[],N=new Pt;let I=null;const F=new Rs;F.viewport=new Bn;const z=new Rs;z.viewport=new Bn;const U=[F,z],P=new xO;let X=null,ot=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(lt){let wt=B[lt];return wt===void 0&&(wt=new N4,B[lt]=wt),wt.getTargetRaySpace()},this.getControllerGrip=function(lt){let wt=B[lt];return wt===void 0&&(wt=new N4,B[lt]=wt),wt.getGripSpace()},this.getHand=function(lt){let wt=B[lt];return wt===void 0&&(wt=new N4,B[lt]=wt),wt.getHandSpace()};function it(lt){const wt=D.indexOf(lt.inputSource);if(wt===-1)return;const Bt=B[wt];Bt!==void 0&&(Bt.update(lt.inputSource,lt.frame,f||a),Bt.dispatchEvent({type:lt.type,data:lt.inputSource}))}function ct(){s.removeEventListener("select",it),s.removeEventListener("selectstart",it),s.removeEventListener("selectend",it),s.removeEventListener("squeeze",it),s.removeEventListener("squeezestart",it),s.removeEventListener("squeezeend",it),s.removeEventListener("end",ct),s.removeEventListener("inputsourceschange",dt);for(let lt=0;lt<B.length;lt++){const wt=D[lt];wt!==null&&(D[lt]=null,B[lt].disconnect(wt))}X=null,ot=null,C.reset(),t.setRenderTarget(S),_=null,v=null,g=null,s=null,R=null,Et.stop(),n.isPresenting=!1,t.setPixelRatio(I),t.setSize(N.width,N.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(lt){r=lt,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(lt){l=lt,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||a},this.setReferenceSpace=function(lt){f=lt},this.getBaseLayer=function(){return v!==null?v:_},this.getBinding=function(){return g},this.getFrame=function(){return b},this.getSession=function(){return s},this.setSession=async function(lt){if(s=lt,s!==null){if(S=t.getRenderTarget(),s.addEventListener("select",it),s.addEventListener("selectstart",it),s.addEventListener("selectend",it),s.addEventListener("squeeze",it),s.addEventListener("squeezestart",it),s.addEventListener("squeezeend",it),s.addEventListener("end",ct),s.addEventListener("inputsourceschange",dt),T.xrCompatible!==!0&&await e.makeXRCompatible(),I=t.getPixelRatio(),t.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Bt=null,Ut=null,Wt=null;T.depth&&(Wt=T.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Bt=T.stencil?Hg:ly,Ut=T.stencil?Fg:Fu);const ve={colorFormat:e.RGBA8,depthFormat:Wt,scaleFactor:r};g=new XRWebGLBinding(s,e),v=g.createProjectionLayer(ve),s.updateRenderState({layers:[v]}),t.setPixelRatio(1),t.setSize(v.textureWidth,v.textureHeight,!1),R=new Ds(v.textureWidth,v.textureHeight,{format:ea,type:Ws,depthTexture:new Ox(v.textureWidth,v.textureHeight,Ut,void 0,void 0,void 0,void 0,void 0,void 0,Bt),stencilBuffer:T.stencil,colorSpace:t.outputColorSpace,samples:T.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const Bt={antialias:T.antialias,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:r};_=new XRWebGLLayer(s,e,Bt),s.updateRenderState({baseLayer:_}),t.setPixelRatio(1),t.setSize(_.framebufferWidth,_.framebufferHeight,!1),R=new Ds(_.framebufferWidth,_.framebufferHeight,{format:ea,type:Ws,colorSpace:t.outputColorSpace,stencilBuffer:T.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}R.isXRRenderTarget=!0,this.setFoveation(u),f=null,a=await s.requestReferenceSpace(l),Et.setContext(s),Et.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return C.getDepthTexture()};function dt(lt){for(let wt=0;wt<lt.removed.length;wt++){const Bt=lt.removed[wt],Ut=D.indexOf(Bt);Ut>=0&&(D[Ut]=null,B[Ut].disconnect(Bt))}for(let wt=0;wt<lt.added.length;wt++){const Bt=lt.added[wt];let Ut=D.indexOf(Bt);if(Ut===-1){for(let ve=0;ve<B.length;ve++)if(ve>=D.length){D.push(Bt),Ut=ve;break}else if(D[ve]===null){D[ve]=Bt,Ut=ve;break}if(Ut===-1)break}const Wt=B[Ut];Wt&&Wt.connect(Bt)}}const Q=new nt,tt=new nt;function et(lt,wt,Bt){Q.setFromMatrixPosition(wt.matrixWorld),tt.setFromMatrixPosition(Bt.matrixWorld);const Ut=Q.distanceTo(tt),Wt=wt.projectionMatrix.elements,ve=Bt.projectionMatrix.elements,ee=Wt[14]/(Wt[10]-1),Ye=Wt[14]/(Wt[10]+1),we=(Wt[9]+1)/Wt[5],se=(Wt[9]-1)/Wt[5],Z=(Wt[8]-1)/Wt[0],Kt=(ve[8]+1)/ve[0],Ft=ee*Z,Vt=ee*Kt,Gt=Ut/(-Z+Kt),be=Gt*-Z;if(wt.matrixWorld.decompose(lt.position,lt.quaternion,lt.scale),lt.translateX(be),lt.translateZ(Gt),lt.matrixWorld.compose(lt.position,lt.quaternion,lt.scale),lt.matrixWorldInverse.copy(lt.matrixWorld).invert(),Wt[10]===-1)lt.projectionMatrix.copy(wt.projectionMatrix),lt.projectionMatrixInverse.copy(wt.projectionMatrixInverse);else{const qt=ee+Gt,$=Ye+Gt,V=Ft-be,vt=Vt+(Ut-be),It=we*Ye/$*qt,Xt=se*Ye/$*qt;lt.projectionMatrix.makePerspective(V,vt,It,Xt,qt,$),lt.projectionMatrixInverse.copy(lt.projectionMatrix).invert()}}function _t(lt,wt){wt===null?lt.matrixWorld.copy(lt.matrix):lt.matrixWorld.multiplyMatrices(wt.matrixWorld,lt.matrix),lt.matrixWorldInverse.copy(lt.matrixWorld).invert()}this.updateCamera=function(lt){if(s===null)return;let wt=lt.near,Bt=lt.far;C.texture!==null&&(C.depthNear>0&&(wt=C.depthNear),C.depthFar>0&&(Bt=C.depthFar)),P.near=z.near=F.near=wt,P.far=z.far=F.far=Bt,(X!==P.near||ot!==P.far)&&(s.updateRenderState({depthNear:P.near,depthFar:P.far}),X=P.near,ot=P.far),F.layers.mask=lt.layers.mask|2,z.layers.mask=lt.layers.mask|4,P.layers.mask=F.layers.mask|z.layers.mask;const Ut=lt.parent,Wt=P.cameras;_t(P,Ut);for(let ve=0;ve<Wt.length;ve++)_t(Wt[ve],Ut);Wt.length===2?et(P,F,z):P.projectionMatrix.copy(F.projectionMatrix),J(lt,P,Ut)};function J(lt,wt,Bt){Bt===null?lt.matrix.copy(wt.matrixWorld):(lt.matrix.copy(Bt.matrixWorld),lt.matrix.invert(),lt.matrix.multiply(wt.matrixWorld)),lt.matrix.decompose(lt.position,lt.quaternion,lt.scale),lt.updateMatrixWorld(!0),lt.projectionMatrix.copy(wt.projectionMatrix),lt.projectionMatrixInverse.copy(wt.projectionMatrixInverse),lt.isPerspectiveCamera&&(lt.fov=hy*2*Math.atan(1/lt.projectionMatrix.elements[5]),lt.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(v===null&&_===null))return u},this.setFoveation=function(lt){u=lt,v!==null&&(v.fixedFoveation=lt),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=lt)},this.hasDepthSensing=function(){return C.texture!==null},this.getDepthSensingMesh=function(){return C.getMesh(P)};let at=null;function xt(lt,wt){if(m=wt.getViewerPose(f||a),b=wt,m!==null){const Bt=m.views;_!==null&&(t.setRenderTargetFramebuffer(R,_.framebuffer),t.setRenderTarget(R));let Ut=!1;Bt.length!==P.cameras.length&&(P.cameras.length=0,Ut=!0);for(let ee=0;ee<Bt.length;ee++){const Ye=Bt[ee];let we=null;if(_!==null)we=_.getViewport(Ye);else{const Z=g.getViewSubImage(v,Ye);we=Z.viewport,ee===0&&(t.setRenderTargetTextures(R,Z.colorTexture,Z.depthStencilTexture),t.setRenderTarget(R))}let se=U[ee];se===void 0&&(se=new Rs,se.layers.enable(ee),se.viewport=new Bn,U[ee]=se),se.matrix.fromArray(Ye.transform.matrix),se.matrix.decompose(se.position,se.quaternion,se.scale),se.projectionMatrix.fromArray(Ye.projectionMatrix),se.projectionMatrixInverse.copy(se.projectionMatrix).invert(),se.viewport.set(we.x,we.y,we.width,we.height),ee===0&&(P.matrix.copy(se.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),Ut===!0&&P.cameras.push(se)}const Wt=s.enabledFeatures;if(Wt&&Wt.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&g){const ee=g.getDepthInformation(Bt[0]);ee&&ee.isValid&&ee.texture&&C.init(t,ee,s.renderState)}}for(let Bt=0;Bt<B.length;Bt++){const Ut=D[Bt],Wt=B[Bt];Ut!==null&&Wt!==void 0&&Wt.update(Ut,wt,f||a)}at&&at(lt,wt),wt.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:wt}),b=null}const Et=new CO;Et.setAnimationLoop(xt),this.setAnimationLoop=function(lt){at=lt},this.dispose=function(){}}}const mm=new Vo,kq=new Fe;function Vq(i,t){function e(T,S){T.matrixAutoUpdate===!0&&T.updateMatrix(),S.value.copy(T.matrix)}function n(T,S){S.color.getRGB(T.fogColor.value,NB(i)),S.isFog?(T.fogNear.value=S.near,T.fogFar.value=S.far):S.isFogExp2&&(T.fogDensity.value=S.density)}function s(T,S,R,B,D){S.isMeshBasicMaterial||S.isMeshLambertMaterial?r(T,S):S.isMeshToonMaterial?(r(T,S),g(T,S)):S.isMeshPhongMaterial?(r(T,S),m(T,S)):S.isMeshStandardMaterial?(r(T,S),v(T,S),S.isMeshPhysicalMaterial&&_(T,S,D)):S.isMeshMatcapMaterial?(r(T,S),b(T,S)):S.isMeshDepthMaterial?r(T,S):S.isMeshDistanceMaterial?(r(T,S),C(T,S)):S.isMeshNormalMaterial?r(T,S):S.isLineBasicMaterial?(a(T,S),S.isLineDashedMaterial&&l(T,S)):S.isPointsMaterial?u(T,S,R,B):S.isSpriteMaterial?f(T,S):S.isShadowMaterial?(T.color.value.copy(S.color),T.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function r(T,S){T.opacity.value=S.opacity,S.color&&T.diffuse.value.copy(S.color),S.emissive&&T.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(T.map.value=S.map,e(S.map,T.mapTransform)),S.alphaMap&&(T.alphaMap.value=S.alphaMap,e(S.alphaMap,T.alphaMapTransform)),S.bumpMap&&(T.bumpMap.value=S.bumpMap,e(S.bumpMap,T.bumpMapTransform),T.bumpScale.value=S.bumpScale,S.side===qs&&(T.bumpScale.value*=-1)),S.normalMap&&(T.normalMap.value=S.normalMap,e(S.normalMap,T.normalMapTransform),T.normalScale.value.copy(S.normalScale),S.side===qs&&T.normalScale.value.negate()),S.displacementMap&&(T.displacementMap.value=S.displacementMap,e(S.displacementMap,T.displacementMapTransform),T.displacementScale.value=S.displacementScale,T.displacementBias.value=S.displacementBias),S.emissiveMap&&(T.emissiveMap.value=S.emissiveMap,e(S.emissiveMap,T.emissiveMapTransform)),S.specularMap&&(T.specularMap.value=S.specularMap,e(S.specularMap,T.specularMapTransform)),S.alphaTest>0&&(T.alphaTest.value=S.alphaTest);const R=t.get(S),B=R.envMap,D=R.envMapRotation;B&&(T.envMap.value=B,mm.copy(D),mm.x*=-1,mm.y*=-1,mm.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(mm.y*=-1,mm.z*=-1),T.envMapRotation.value.setFromMatrix4(kq.makeRotationFromEuler(mm)),T.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=S.reflectivity,T.ior.value=S.ior,T.refractionRatio.value=S.refractionRatio),S.lightMap&&(T.lightMap.value=S.lightMap,T.lightMapIntensity.value=S.lightMapIntensity,e(S.lightMap,T.lightMapTransform)),S.aoMap&&(T.aoMap.value=S.aoMap,T.aoMapIntensity.value=S.aoMapIntensity,e(S.aoMap,T.aoMapTransform))}function a(T,S){T.diffuse.value.copy(S.color),T.opacity.value=S.opacity,S.map&&(T.map.value=S.map,e(S.map,T.mapTransform))}function l(T,S){T.dashSize.value=S.dashSize,T.totalSize.value=S.dashSize+S.gapSize,T.scale.value=S.scale}function u(T,S,R,B){T.diffuse.value.copy(S.color),T.opacity.value=S.opacity,T.size.value=S.size*R,T.scale.value=B*.5,S.map&&(T.map.value=S.map,e(S.map,T.uvTransform)),S.alphaMap&&(T.alphaMap.value=S.alphaMap,e(S.alphaMap,T.alphaMapTransform)),S.alphaTest>0&&(T.alphaTest.value=S.alphaTest)}function f(T,S){T.diffuse.value.copy(S.color),T.opacity.value=S.opacity,T.rotation.value=S.rotation,S.map&&(T.map.value=S.map,e(S.map,T.mapTransform)),S.alphaMap&&(T.alphaMap.value=S.alphaMap,e(S.alphaMap,T.alphaMapTransform)),S.alphaTest>0&&(T.alphaTest.value=S.alphaTest)}function m(T,S){T.specular.value.copy(S.specular),T.shininess.value=Math.max(S.shininess,1e-4)}function g(T,S){S.gradientMap&&(T.gradientMap.value=S.gradientMap)}function v(T,S){T.metalness.value=S.metalness,S.metalnessMap&&(T.metalnessMap.value=S.metalnessMap,e(S.metalnessMap,T.metalnessMapTransform)),T.roughness.value=S.roughness,S.roughnessMap&&(T.roughnessMap.value=S.roughnessMap,e(S.roughnessMap,T.roughnessMapTransform)),S.envMap&&(T.envMapIntensity.value=S.envMapIntensity)}function _(T,S,R){T.ior.value=S.ior,S.sheen>0&&(T.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),T.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(T.sheenColorMap.value=S.sheenColorMap,e(S.sheenColorMap,T.sheenColorMapTransform)),S.sheenRoughnessMap&&(T.sheenRoughnessMap.value=S.sheenRoughnessMap,e(S.sheenRoughnessMap,T.sheenRoughnessMapTransform))),S.clearcoat>0&&(T.clearcoat.value=S.clearcoat,T.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(T.clearcoatMap.value=S.clearcoatMap,e(S.clearcoatMap,T.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,e(S.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(T.clearcoatNormalMap.value=S.clearcoatNormalMap,e(S.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===qs&&T.clearcoatNormalScale.value.negate())),S.dispersion>0&&(T.dispersion.value=S.dispersion),S.iridescence>0&&(T.iridescence.value=S.iridescence,T.iridescenceIOR.value=S.iridescenceIOR,T.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(T.iridescenceMap.value=S.iridescenceMap,e(S.iridescenceMap,T.iridescenceMapTransform)),S.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=S.iridescenceThicknessMap,e(S.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),S.transmission>0&&(T.transmission.value=S.transmission,T.transmissionSamplerMap.value=R.texture,T.transmissionSamplerSize.value.set(R.width,R.height),S.transmissionMap&&(T.transmissionMap.value=S.transmissionMap,e(S.transmissionMap,T.transmissionMapTransform)),T.thickness.value=S.thickness,S.thicknessMap&&(T.thicknessMap.value=S.thicknessMap,e(S.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=S.attenuationDistance,T.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(T.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(T.anisotropyMap.value=S.anisotropyMap,e(S.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=S.specularIntensity,T.specularColor.value.copy(S.specularColor),S.specularColorMap&&(T.specularColorMap.value=S.specularColorMap,e(S.specularColorMap,T.specularColorMapTransform)),S.specularIntensityMap&&(T.specularIntensityMap.value=S.specularIntensityMap,e(S.specularIntensityMap,T.specularIntensityMapTransform))}function b(T,S){S.matcap&&(T.matcap.value=S.matcap)}function C(T,S){const R=t.get(S).light;T.referencePosition.value.setFromMatrixPosition(R.matrixWorld),T.nearDistance.value=R.shadow.camera.near,T.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function Qq(i,t,e,n){let s={},r={},a=[];const l=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function u(R,B){const D=B.program;n.uniformBlockBinding(R,D)}function f(R,B){let D=s[R.id];D===void 0&&(b(R),D=m(R),s[R.id]=D,R.addEventListener("dispose",T));const N=B.program;n.updateUBOMapping(R,N);const I=t.render.frame;r[R.id]!==I&&(v(R),r[R.id]=I)}function m(R){const B=g();R.__bindingPointIndex=B;const D=i.createBuffer(),N=R.__size,I=R.usage;return i.bindBuffer(i.UNIFORM_BUFFER,D),i.bufferData(i.UNIFORM_BUFFER,N,I),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,B,D),D}function g(){for(let R=0;R<l;R++)if(a.indexOf(R)===-1)return a.push(R),R;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(R){const B=s[R.id],D=R.uniforms,N=R.__cache;i.bindBuffer(i.UNIFORM_BUFFER,B);for(let I=0,F=D.length;I<F;I++){const z=Array.isArray(D[I])?D[I]:[D[I]];for(let U=0,P=z.length;U<P;U++){const X=z[U];if(_(X,I,U,N)===!0){const ot=X.__offset,it=Array.isArray(X.value)?X.value:[X.value];let ct=0;for(let dt=0;dt<it.length;dt++){const Q=it[dt],tt=C(Q);typeof Q=="number"||typeof Q=="boolean"?(X.__data[0]=Q,i.bufferSubData(i.UNIFORM_BUFFER,ot+ct,X.__data)):Q.isMatrix3?(X.__data[0]=Q.elements[0],X.__data[1]=Q.elements[1],X.__data[2]=Q.elements[2],X.__data[3]=0,X.__data[4]=Q.elements[3],X.__data[5]=Q.elements[4],X.__data[6]=Q.elements[5],X.__data[7]=0,X.__data[8]=Q.elements[6],X.__data[9]=Q.elements[7],X.__data[10]=Q.elements[8],X.__data[11]=0):(Q.toArray(X.__data,ct),ct+=tt.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,ot,X.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function _(R,B,D,N){const I=R.value,F=B+"_"+D;if(N[F]===void 0)return typeof I=="number"||typeof I=="boolean"?N[F]=I:N[F]=I.clone(),!0;{const z=N[F];if(typeof I=="number"||typeof I=="boolean"){if(z!==I)return N[F]=I,!0}else if(z.equals(I)===!1)return z.copy(I),!0}return!1}function b(R){const B=R.uniforms;let D=0;const N=16;for(let F=0,z=B.length;F<z;F++){const U=Array.isArray(B[F])?B[F]:[B[F]];for(let P=0,X=U.length;P<X;P++){const ot=U[P],it=Array.isArray(ot.value)?ot.value:[ot.value];for(let ct=0,dt=it.length;ct<dt;ct++){const Q=it[ct],tt=C(Q),et=D%N,_t=et%tt.boundary,J=et+_t;D+=_t,J!==0&&N-J<tt.storage&&(D+=N-J),ot.__data=new Float32Array(tt.storage/Float32Array.BYTES_PER_ELEMENT),ot.__offset=D,D+=tt.storage}}}const I=D%N;return I>0&&(D+=N-I),R.__size=D,R.__cache={},this}function C(R){const B={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(B.boundary=4,B.storage=4):R.isVector2?(B.boundary=8,B.storage=8):R.isVector3||R.isColor?(B.boundary=16,B.storage=12):R.isVector4?(B.boundary=16,B.storage=16):R.isMatrix3?(B.boundary=48,B.storage=48):R.isMatrix4?(B.boundary=64,B.storage=64):R.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",R),B}function T(R){const B=R.target;B.removeEventListener("dispose",T);const D=a.indexOf(B.__bindingPointIndex);a.splice(D,1),i.deleteBuffer(s[B.id]),delete s[B.id],delete r[B.id]}function S(){for(const R in s)i.deleteBuffer(s[R]);a=[],s={},r={}}return{bind:u,update:f,dispose:S}}class OO{constructor(t={}){const{canvas:e=DB(),context:n=null,depth:s=!0,stencil:r=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:f=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:v=!1}=t;this.isWebGLRenderer=!0;let _;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=a;const b=new Uint32Array(4),C=new Int32Array(4);let T=null,S=null;const R=[],B=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Rc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const D=this;let N=!1;this._outputColorSpace=Kn;let I=0,F=0,z=null,U=-1,P=null;const X=new Bn,ot=new Bn;let it=null;const ct=new ae(0);let dt=0,Q=e.width,tt=e.height,et=1,_t=null,J=null;const at=new Bn(0,0,Q,tt),xt=new Bn(0,0,Q,tt);let Et=!1;const lt=new Ey;let wt=!1,Bt=!1;const Ut=new Fe,Wt=new Fe,ve=new nt,ee=new Bn,Ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let we=!1;function se(){return z===null?et:1}let Z=n;function Kt(q,pt){return e.getContext(q,pt)}try{const q={alpha:!0,depth:s,stencil:r,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:f,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${n0}`),e.addEventListener("webglcontextlost",Qt,!1),e.addEventListener("webglcontextrestored",he,!1),e.addEventListener("webglcontextcreationerror",ue,!1),Z===null){const pt="webgl2";if(Z=Kt(pt,q),Z===null)throw Kt(pt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(q){throw console.error("THREE.WebGLRenderer: "+q.message),q}let Ft,Vt,Gt,be,qt,$,V,vt,It,Xt,Ot,ne,te,ge,De,Jt,_e,Se,Te,le,rn,He,Gn,mt;function ce(){Ft=new nj(Z),Ft.init(),He=new BO(Z,Ft),Vt=new WX(Z,Ft,t,He),Gt=new Uq(Z,Ft),Vt.reverseDepthBuffer&&v&&Gt.buffers.depth.setReversed(!0),be=new rj(Z),qt=new Sq,$=new Pq(Z,Ft,Gt,qt,Vt,He,be),V=new JX(D),vt=new ej(D),It=new hV(Z),Gn=new qX(Z,It),Xt=new ij(Z,It,be,Gn),Ot=new oj(Z,Xt,It,be),Te=new aj(Z,Vt,$),Jt=new KX(qt),ne=new bq(D,V,vt,Ft,Vt,Gn,Jt),te=new Vq(D,qt),ge=new Mq,De=new Dq(Ft),Se=new jX(D,V,vt,Gt,Ot,_,u),_e=new Nq(D,Ot,Vt),mt=new Qq(Z,be,Vt,Gt),le=new YX(Z,Ft,be),rn=new sj(Z,Ft,be),be.programs=ne.programs,D.capabilities=Vt,D.extensions=Ft,D.properties=qt,D.renderLists=ge,D.shadowMap=_e,D.state=Gt,D.info=be}ce();const Nt=new Gq(D,Z);this.xr=Nt,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const q=Ft.get("WEBGL_lose_context");q&&q.loseContext()},this.forceContextRestore=function(){const q=Ft.get("WEBGL_lose_context");q&&q.restoreContext()},this.getPixelRatio=function(){return et},this.setPixelRatio=function(q){q!==void 0&&(et=q,this.setSize(Q,tt,!1))},this.getSize=function(q){return q.set(Q,tt)},this.setSize=function(q,pt,Ct=!0){if(Nt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Q=q,tt=pt,e.width=Math.floor(q*et),e.height=Math.floor(pt*et),Ct===!0&&(e.style.width=q+"px",e.style.height=pt+"px"),this.setViewport(0,0,q,pt)},this.getDrawingBufferSize=function(q){return q.set(Q*et,tt*et).floor()},this.setDrawingBufferSize=function(q,pt,Ct){Q=q,tt=pt,et=Ct,e.width=Math.floor(q*Ct),e.height=Math.floor(pt*Ct),this.setViewport(0,0,q,pt)},this.getCurrentViewport=function(q){return q.copy(X)},this.getViewport=function(q){return q.copy(at)},this.setViewport=function(q,pt,Ct,Rt){q.isVector4?at.set(q.x,q.y,q.z,q.w):at.set(q,pt,Ct,Rt),Gt.viewport(X.copy(at).multiplyScalar(et).round())},this.getScissor=function(q){return q.copy(xt)},this.setScissor=function(q,pt,Ct,Rt){q.isVector4?xt.set(q.x,q.y,q.z,q.w):xt.set(q,pt,Ct,Rt),Gt.scissor(ot.copy(xt).multiplyScalar(et).round())},this.getScissorTest=function(){return Et},this.setScissorTest=function(q){Gt.setScissorTest(Et=q)},this.setOpaqueSort=function(q){_t=q},this.setTransparentSort=function(q){J=q},this.getClearColor=function(q){return q.copy(Se.getClearColor())},this.setClearColor=function(){Se.setClearColor(...arguments)},this.getClearAlpha=function(){return Se.getClearAlpha()},this.setClearAlpha=function(){Se.setClearAlpha(...arguments)},this.clear=function(q=!0,pt=!0,Ct=!0){let Rt=0;if(q){let yt=!1;if(z!==null){const Yt=z.texture.format;yt=Yt===tM||Yt===$E||Yt===Cx}if(yt){const Yt=z.texture.type,ie=Yt===Ws||Yt===Fu||Yt===oy||Yt===Fg||Yt===KE||Yt===JE,re=Se.getClearColor(),Ae=Se.getClearAlpha(),Ge=re.r,Oe=re.g,Ce=re.b;ie?(b[0]=Ge,b[1]=Oe,b[2]=Ce,b[3]=Ae,Z.clearBufferuiv(Z.COLOR,0,b)):(C[0]=Ge,C[1]=Oe,C[2]=Ce,C[3]=Ae,Z.clearBufferiv(Z.COLOR,0,C))}else Rt|=Z.COLOR_BUFFER_BIT}pt&&(Rt|=Z.DEPTH_BUFFER_BIT),Ct&&(Rt|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear(Rt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Qt,!1),e.removeEventListener("webglcontextrestored",he,!1),e.removeEventListener("webglcontextcreationerror",ue,!1),Se.dispose(),ge.dispose(),De.dispose(),qt.dispose(),V.dispose(),vt.dispose(),Ot.dispose(),Gn.dispose(),mt.dispose(),ne.dispose(),Nt.dispose(),Nt.removeEventListener("sessionstart",Ji),Nt.removeEventListener("sessionend",cs),$s.stop()};function Qt(q){q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function he(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const q=be.autoReset,pt=_e.enabled,Ct=_e.autoUpdate,Rt=_e.needsUpdate,yt=_e.type;ce(),be.autoReset=q,_e.enabled=pt,_e.autoUpdate=Ct,_e.needsUpdate=Rt,_e.type=yt}function ue(q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",q.statusMessage)}function qe(q){const pt=q.target;pt.removeEventListener("dispose",qe),Jn(pt)}function Jn(q){Ei(q),qt.remove(q)}function Ei(q){const pt=qt.get(q).programs;pt!==void 0&&(pt.forEach(function(Ct){ne.releaseProgram(Ct)}),q.isShaderMaterial&&ne.releaseShaderCache(q))}this.renderBufferDirect=function(q,pt,Ct,Rt,yt,Yt){pt===null&&(pt=Ye);const ie=yt.isMesh&&yt.matrixWorld.determinant()<0,re=Oc(q,pt,Ct,Rt,yt);Gt.setMaterial(Rt,ie);let Ae=Ct.index,Ge=1;if(Rt.wireframe===!0){if(Ae=Xt.getWireframeAttribute(Ct),Ae===void 0)return;Ge=2}const Oe=Ct.drawRange,Ce=Ct.attributes.position;let pn=Oe.start*Ge,Nn=(Oe.start+Oe.count)*Ge;Yt!==null&&(pn=Math.max(pn,Yt.start*Ge),Nn=Math.min(Nn,(Yt.start+Yt.count)*Ge)),Ae!==null?(pn=Math.max(pn,0),Nn=Math.min(Nn,Ae.count)):Ce!=null&&(pn=Math.max(pn,0),Nn=Math.min(Nn,Ce.count));const Mi=Nn-pn;if(Mi<0||Mi===1/0)return;Gn.setup(yt,Rt,re,Ct,Ae);let yn,bn=le;if(Ae!==null&&(yn=It.get(Ae),bn=rn,bn.setIndex(yn)),yt.isMesh)Rt.wireframe===!0?(Gt.setLineWidth(Rt.wireframeLinewidth*se()),bn.setMode(Z.LINES)):bn.setMode(Z.TRIANGLES);else if(yt.isLine){let Ne=Rt.linewidth;Ne===void 0&&(Ne=1),Gt.setLineWidth(Ne*se()),yt.isLineSegments?bn.setMode(Z.LINES):yt.isLineLoop?bn.setMode(Z.LINE_LOOP):bn.setMode(Z.LINE_STRIP)}else yt.isPoints?bn.setMode(Z.POINTS):yt.isSprite&&bn.setMode(Z.TRIANGLES);if(yt.isBatchedMesh)if(yt._multiDrawInstances!==null)O4("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),bn.renderMultiDrawInstances(yt._multiDrawStarts,yt._multiDrawCounts,yt._multiDrawCount,yt._multiDrawInstances);else if(Ft.get("WEBGL_multi_draw"))bn.renderMultiDraw(yt._multiDrawStarts,yt._multiDrawCounts,yt._multiDrawCount);else{const Ne=yt._multiDrawStarts,Ri=yt._multiDrawCounts,Ln=yt._multiDrawCount,Bs=Ae?It.get(Ae).bytesPerElement:1,Yo=qt.get(Rt).currentProgram.getUniforms();for(let ri=0;ri<Ln;ri++)Yo.setValue(Z,"_gl_DrawID",ri),bn.render(Ne[ri]/Bs,Ri[ri])}else if(yt.isInstancedMesh)bn.renderInstances(pn,Mi,yt.count);else if(Ct.isInstancedBufferGeometry){const Ne=Ct._maxInstanceCount!==void 0?Ct._maxInstanceCount:1/0,Ri=Math.min(Ct.instanceCount,Ne);bn.renderInstances(pn,Mi,Ri)}else bn.render(pn,Mi)};function Cn(q,pt,Ct){q.transparent===!0&&q.side===La&&q.forceSinglePass===!1?(q.side=qs,q.needsUpdate=!0,ti(q,pt,Ct),q.side=Lc,q.needsUpdate=!0,ti(q,pt,Ct),q.side=La):ti(q,pt,Ct)}this.compile=function(q,pt,Ct=null){Ct===null&&(Ct=q),S=De.get(Ct),S.init(pt),B.push(S),Ct.traverseVisible(function(yt){yt.isLight&&yt.layers.test(pt.layers)&&(S.pushLight(yt),yt.castShadow&&S.pushShadow(yt))}),q!==Ct&&q.traverseVisible(function(yt){yt.isLight&&yt.layers.test(pt.layers)&&(S.pushLight(yt),yt.castShadow&&S.pushShadow(yt))}),S.setupLights();const Rt=new Set;return q.traverse(function(yt){if(!(yt.isMesh||yt.isPoints||yt.isLine||yt.isSprite))return;const Yt=yt.material;if(Yt)if(Array.isArray(Yt))for(let ie=0;ie<Yt.length;ie++){const re=Yt[ie];Cn(re,Ct,yt),Rt.add(re)}else Cn(Yt,Ct,yt),Rt.add(Yt)}),S=B.pop(),Rt},this.compileAsync=function(q,pt,Ct=null){const Rt=this.compile(q,pt,Ct);return new Promise(yt=>{function Yt(){if(Rt.forEach(function(ie){qt.get(ie).currentProgram.isReady()&&Rt.delete(ie)}),Rt.size===0){yt(q);return}setTimeout(Yt,10)}Ft.get("KHR_parallel_shader_compile")!==null?Yt():setTimeout(Yt,10)})};let Nr=null;function ls(q){Nr&&Nr(q)}function Ji(){$s.stop()}function cs(){$s.start()}const $s=new CO;$s.setAnimationLoop(ls),typeof self<"u"&&$s.setContext(self),this.setAnimationLoop=function(q){Nr=q,Nt.setAnimationLoop(q),q===null?$s.stop():$s.start()},Nt.addEventListener("sessionstart",Ji),Nt.addEventListener("sessionend",cs),this.render=function(q,pt){if(pt!==void 0&&pt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),pt.parent===null&&pt.matrixWorldAutoUpdate===!0&&pt.updateMatrixWorld(),Nt.enabled===!0&&Nt.isPresenting===!0&&(Nt.cameraAutoUpdate===!0&&Nt.updateCamera(pt),pt=Nt.getCamera()),q.isScene===!0&&q.onBeforeRender(D,q,pt,z),S=De.get(q,B.length),S.init(pt),B.push(S),Wt.multiplyMatrices(pt.projectionMatrix,pt.matrixWorldInverse),lt.setFromProjectionMatrix(Wt),Bt=this.localClippingEnabled,wt=Jt.init(this.clippingPlanes,Bt),T=ge.get(q,R.length),T.init(),R.push(T),Nt.enabled===!0&&Nt.isPresenting===!0){const Yt=D.xr.getDepthSensingMesh();Yt!==null&&Ir(Yt,pt,-1/0,D.sortObjects)}Ir(q,pt,0,D.sortObjects),T.finish(),D.sortObjects===!0&&T.sort(_t,J),we=Nt.enabled===!1||Nt.isPresenting===!1||Nt.hasDepthSensing()===!1,we&&Se.addToRenderList(T,q),this.info.render.frame++,wt===!0&&Jt.beginShadows();const Ct=S.state.shadowsArray;_e.render(Ct,q,pt),wt===!0&&Jt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Rt=T.opaque,yt=T.transmissive;if(S.setupLights(),pt.isArrayCamera){const Yt=pt.cameras;if(yt.length>0)for(let ie=0,re=Yt.length;ie<re;ie++){const Ae=Yt[ie];oo(Rt,yt,q,Ae)}we&&Se.render(q);for(let ie=0,re=Yt.length;ie<re;ie++){const Ae=Yt[ie];hp(T,q,Ae,Ae.viewport)}}else yt.length>0&&oo(Rt,yt,q,pt),we&&Se.render(q),hp(T,q,pt);z!==null&&F===0&&($.updateMultisampleRenderTarget(z),$.updateRenderTargetMipmap(z)),q.isScene===!0&&q.onAfterRender(D,q,pt),Gn.resetDefaultState(),U=-1,P=null,B.pop(),B.length>0?(S=B[B.length-1],wt===!0&&Jt.setGlobalState(D.clippingPlanes,S.state.camera)):S=null,R.pop(),R.length>0?T=R[R.length-1]:T=null};function Ir(q,pt,Ct,Rt){if(q.visible===!1)return;if(q.layers.test(pt.layers)){if(q.isGroup)Ct=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&&q.update(pt);else if(q.isLight)S.pushLight(q),q.castShadow&&S.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||lt.intersectsSprite(q)){Rt&&ee.setFromMatrixPosition(q.matrixWorld).applyMatrix4(Wt);const ie=Ot.update(q),re=q.material;re.visible&&T.push(q,ie,re,Ct,ee.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&&(!q.frustumCulled||lt.intersectsObject(q))){const ie=Ot.update(q),re=q.material;if(Rt&&(q.boundingSphere!==void 0?(q.boundingSphere===null&&q.computeBoundingSphere(),ee.copy(q.boundingSphere.center)):(ie.boundingSphere===null&&ie.computeBoundingSphere(),ee.copy(ie.boundingSphere.center)),ee.applyMatrix4(q.matrixWorld).applyMatrix4(Wt)),Array.isArray(re)){const Ae=ie.groups;for(let Ge=0,Oe=Ae.length;Ge<Oe;Ge++){const Ce=Ae[Ge],pn=re[Ce.materialIndex];pn&&pn.visible&&T.push(q,ie,pn,Ct,ee.z,Ce)}}else re.visible&&T.push(q,ie,re,Ct,ee.z,null)}}const Yt=q.children;for(let ie=0,re=Yt.length;ie<re;ie++)Ir(Yt[ie],pt,Ct,Rt)}function hp(q,pt,Ct,Rt){const yt=q.opaque,Yt=q.transmissive,ie=q.transparent;S.setupLightsView(Ct),wt===!0&&Jt.setGlobalState(D.clippingPlanes,Ct),Rt&&Gt.viewport(X.copy(Rt)),yt.length>0&&mr(yt,pt,Ct),Yt.length>0&&mr(Yt,pt,Ct),ie.length>0&&mr(ie,pt,Ct),Gt.buffers.depth.setTest(!0),Gt.buffers.depth.setMask(!0),Gt.buffers.color.setMask(!0),Gt.setPolygonOffset(!1)}function oo(q,pt,Ct,Rt){if((Ct.isScene===!0?Ct.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[Rt.id]===void 0&&(S.state.transmissionRenderTarget[Rt.id]=new Ds(1,1,{generateMipmaps:!0,type:Ft.has("EXT_color_buffer_half_float")||Ft.has("EXT_color_buffer_float")?i0:Ws,minFilter:Tl,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Pn.workingColorSpace}));const Yt=S.state.transmissionRenderTarget[Rt.id],ie=Rt.viewport||X;Yt.setSize(ie.z*D.transmissionResolutionScale,ie.w*D.transmissionResolutionScale);const re=D.getRenderTarget();D.setRenderTarget(Yt),D.getClearColor(ct),dt=D.getClearAlpha(),dt<1&&D.setClearColor(16777215,.5),D.clear(),we&&Se.render(Ct);const Ae=D.toneMapping;D.toneMapping=Rc;const Ge=Rt.viewport;if(Rt.viewport!==void 0&&(Rt.viewport=void 0),S.setupLightsView(Rt),wt===!0&&Jt.setGlobalState(D.clippingPlanes,Rt),mr(q,Ct,Rt),$.updateMultisampleRenderTarget(Yt),$.updateRenderTargetMipmap(Yt),Ft.has("WEBGL_multisampled_render_to_texture")===!1){let Oe=!1;for(let Ce=0,pn=pt.length;Ce<pn;Ce++){const Nn=pt[Ce],Mi=Nn.object,yn=Nn.geometry,bn=Nn.material,Ne=Nn.group;if(bn.side===La&&Mi.layers.test(Rt.layers)){const Ri=bn.side;bn.side=qs,bn.needsUpdate=!0,lo(Mi,Ct,Rt,yn,bn,Ne),bn.side=Ri,bn.needsUpdate=!0,Oe=!0}}Oe===!0&&($.updateMultisampleRenderTarget(Yt),$.updateRenderTargetMipmap(Yt))}D.setRenderTarget(re),D.setClearColor(ct,dt),Ge!==void 0&&(Rt.viewport=Ge),D.toneMapping=Ae}function mr(q,pt,Ct){const Rt=pt.isScene===!0?pt.overrideMaterial:null;for(let yt=0,Yt=q.length;yt<Yt;yt++){const ie=q[yt],re=ie.object,Ae=ie.geometry,Ge=ie.group;let Oe=ie.material;Oe.allowOverride===!0&&Rt!==null&&(Oe=Rt),re.layers.test(Ct.layers)&&lo(re,pt,Ct,Ae,Oe,Ge)}}function lo(q,pt,Ct,Rt,yt,Yt){q.onBeforeRender(D,pt,Ct,Rt,yt,Yt),q.modelViewMatrix.multiplyMatrices(Ct.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),yt.onBeforeRender(D,pt,Ct,Rt,q,Yt),yt.transparent===!0&&yt.side===La&&yt.forceSinglePass===!1?(yt.side=qs,yt.needsUpdate=!0,D.renderBufferDirect(Ct,pt,Rt,yt,q,Yt),yt.side=Lc,yt.needsUpdate=!0,D.renderBufferDirect(Ct,pt,Rt,yt,q,Yt),yt.side=La):D.renderBufferDirect(Ct,pt,Rt,yt,q,Yt),q.onAfterRender(D,pt,Ct,Rt,yt,Yt)}function ti(q,pt,Ct){pt.isScene!==!0&&(pt=Ye);const Rt=qt.get(q),yt=S.state.lights,Yt=S.state.shadowsArray,ie=yt.state.version,re=ne.getParameters(q,yt.state,Yt,pt,Ct),Ae=ne.getProgramCacheKey(re);let Ge=Rt.programs;Rt.environment=q.isMeshStandardMaterial?pt.environment:null,Rt.fog=pt.fog,Rt.envMap=(q.isMeshStandardMaterial?vt:V).get(q.envMap||Rt.environment),Rt.envMapRotation=Rt.environment!==null&&q.envMap===null?pt.environmentRotation:q.envMapRotation,Ge===void 0&&(q.addEventListener("dispose",qe),Ge=new Map,Rt.programs=Ge);let Oe=Ge.get(Ae);if(Oe!==void 0){if(Rt.currentProgram===Oe&&Rt.lightsStateVersion===ie)return uo(q,re),Oe}else re.uniforms=ne.getUniforms(q),q.onBeforeCompile(re,D),Oe=ne.acquireProgram(re,Ae),Ge.set(Ae,Oe),Rt.uniforms=re.uniforms;const Ce=Rt.uniforms;return(!q.isShaderMaterial&&!q.isRawShaderMaterial||q.clipping===!0)&&(Ce.clippingPlanes=Jt.uniform),uo(q,re),Rt.needsLights=Zi(q),Rt.lightsStateVersion=ie,Rt.needsLights&&(Ce.ambientLightColor.value=yt.state.ambient,Ce.lightProbe.value=yt.state.probe,Ce.directionalLights.value=yt.state.directional,Ce.directionalLightShadows.value=yt.state.directionalShadow,Ce.spotLights.value=yt.state.spot,Ce.spotLightShadows.value=yt.state.spotShadow,Ce.rectAreaLights.value=yt.state.rectArea,Ce.ltc_1.value=yt.state.rectAreaLTC1,Ce.ltc_2.value=yt.state.rectAreaLTC2,Ce.pointLights.value=yt.state.point,Ce.pointLightShadows.value=yt.state.pointShadow,Ce.hemisphereLights.value=yt.state.hemi,Ce.directionalShadowMap.value=yt.state.directionalShadowMap,Ce.directionalShadowMatrix.value=yt.state.directionalShadowMatrix,Ce.spotShadowMap.value=yt.state.spotShadowMap,Ce.spotLightMatrix.value=yt.state.spotLightMatrix,Ce.spotLightMap.value=yt.state.spotLightMap,Ce.pointShadowMap.value=yt.state.pointShadowMap,Ce.pointShadowMatrix.value=yt.state.pointShadowMatrix),Rt.currentProgram=Oe,Rt.uniformsList=null,Oe}function co(q){if(q.uniformsList===null){const pt=q.currentProgram.getUniforms();q.uniformsList=I4.seqWithValue(pt.seq,q.uniforms)}return q.uniformsList}function uo(q,pt){const Ct=qt.get(q);Ct.outputColorSpace=pt.outputColorSpace,Ct.batching=pt.batching,Ct.batchingColor=pt.batchingColor,Ct.instancing=pt.instancing,Ct.instancingColor=pt.instancingColor,Ct.instancingMorph=pt.instancingMorph,Ct.skinning=pt.skinning,Ct.morphTargets=pt.morphTargets,Ct.morphNormals=pt.morphNormals,Ct.morphColors=pt.morphColors,Ct.morphTargetsCount=pt.morphTargetsCount,Ct.numClippingPlanes=pt.numClippingPlanes,Ct.numIntersection=pt.numClipIntersection,Ct.vertexAlphas=pt.vertexAlphas,Ct.vertexTangents=pt.vertexTangents,Ct.toneMapping=pt.toneMapping}function Oc(q,pt,Ct,Rt,yt){pt.isScene!==!0&&(pt=Ye),$.resetTextureUnits();const Yt=pt.fog,ie=Rt.isMeshStandardMaterial?pt.environment:null,re=z===null?D.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:Hu,Ae=(Rt.isMeshStandardMaterial?vt:V).get(Rt.envMap||ie),Ge=Rt.vertexColors===!0&&!!Ct.attributes.color&&Ct.attributes.color.itemSize===4,Oe=!!Ct.attributes.tangent&&(!!Rt.normalMap||Rt.anisotropy>0),Ce=!!Ct.morphAttributes.position,pn=!!Ct.morphAttributes.normal,Nn=!!Ct.morphAttributes.color;let Mi=Rc;Rt.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&(Mi=D.toneMapping);const yn=Ct.morphAttributes.position||Ct.morphAttributes.normal||Ct.morphAttributes.color,bn=yn!==void 0?yn.length:0,Ne=qt.get(Rt),Ri=S.state.lights;if(wt===!0&&(Bt===!0||q!==P)){const ys=q===P&&Rt.id===U;Jt.setState(Rt,q,ys)}let Ln=!1;Rt.version===Ne.__version?(Ne.needsLights&&Ne.lightsStateVersion!==Ri.state.version||Ne.outputColorSpace!==re||yt.isBatchedMesh&&Ne.batching===!1||!yt.isBatchedMesh&&Ne.batching===!0||yt.isBatchedMesh&&Ne.batchingColor===!0&&yt.colorTexture===null||yt.isBatchedMesh&&Ne.batchingColor===!1&&yt.colorTexture!==null||yt.isInstancedMesh&&Ne.instancing===!1||!yt.isInstancedMesh&&Ne.instancing===!0||yt.isSkinnedMesh&&Ne.skinning===!1||!yt.isSkinnedMesh&&Ne.skinning===!0||yt.isInstancedMesh&&Ne.instancingColor===!0&&yt.instanceColor===null||yt.isInstancedMesh&&Ne.instancingColor===!1&&yt.instanceColor!==null||yt.isInstancedMesh&&Ne.instancingMorph===!0&&yt.morphTexture===null||yt.isInstancedMesh&&Ne.instancingMorph===!1&&yt.morphTexture!==null||Ne.envMap!==Ae||Rt.fog===!0&&Ne.fog!==Yt||Ne.numClippingPlanes!==void 0&&(Ne.numClippingPlanes!==Jt.numPlanes||Ne.numIntersection!==Jt.numIntersection)||Ne.vertexAlphas!==Ge||Ne.vertexTangents!==Oe||Ne.morphTargets!==Ce||Ne.morphNormals!==pn||Ne.morphColors!==Nn||Ne.toneMapping!==Mi||Ne.morphTargetsCount!==bn)&&(Ln=!0):(Ln=!0,Ne.__version=Rt.version);let Bs=Ne.currentProgram;Ln===!0&&(Bs=ti(Rt,pt,yt));let Yo=!1,ri=!1,Wo=!1;const ei=Bs.getUniforms(),Os=Ne.uniforms;if(Gt.useProgram(Bs.program)&&(Yo=!0,ri=!0,Wo=!0),Rt.id!==U&&(U=Rt.id,ri=!0),Yo||P!==q){Gt.buffers.depth.getReversed()?(Ut.copy(q.projectionMatrix),Bz(Ut),Oz(Ut),ei.setValue(Z,"projectionMatrix",Ut)):ei.setValue(Z,"projectionMatrix",q.projectionMatrix),ei.setValue(Z,"viewMatrix",q.matrixWorldInverse);const _s=ei.map.cameraPosition;_s!==void 0&&_s.setValue(Z,ve.setFromMatrixPosition(q.matrixWorld)),Vt.logarithmicDepthBuffer&&ei.setValue(Z,"logDepthBufFC",2/(Math.log(q.far+1)/Math.LN2)),(Rt.isMeshPhongMaterial||Rt.isMeshToonMaterial||Rt.isMeshLambertMaterial||Rt.isMeshBasicMaterial||Rt.isMeshStandardMaterial||Rt.isShaderMaterial)&&ei.setValue(Z,"isOrthographic",q.isOrthographicCamera===!0),P!==q&&(P=q,ri=!0,Wo=!0)}if(yt.isSkinnedMesh){ei.setOptional(Z,yt,"bindMatrix"),ei.setOptional(Z,yt,"bindMatrixInverse");const ys=yt.skeleton;ys&&(ys.boneTexture===null&&ys.computeBoneTexture(),ei.setValue(Z,"boneTexture",ys.boneTexture,$))}yt.isBatchedMesh&&(ei.setOptional(Z,yt,"batchingTexture"),ei.setValue(Z,"batchingTexture",yt._matricesTexture,$),ei.setOptional(Z,yt,"batchingIdTexture"),ei.setValue(Z,"batchingIdTexture",yt._indirectTexture,$),ei.setOptional(Z,yt,"batchingColorTexture"),yt._colorsTexture!==null&&ei.setValue(Z,"batchingColorTexture",yt._colorsTexture,$));const $i=Ct.morphAttributes;if(($i.position!==void 0||$i.normal!==void 0||$i.color!==void 0)&&Te.update(yt,Ct,Bs),(ri||Ne.receiveShadow!==yt.receiveShadow)&&(Ne.receiveShadow=yt.receiveShadow,ei.setValue(Z,"receiveShadow",yt.receiveShadow)),Rt.isMeshGouraudMaterial&&Rt.envMap!==null&&(Os.envMap.value=Ae,Os.flipEnvMap.value=Ae.isCubeTexture&&Ae.isRenderTargetTexture===!1?-1:1),Rt.isMeshStandardMaterial&&Rt.envMap===null&&pt.environment!==null&&(Os.envMapIntensity.value=pt.environmentIntensity),ri&&(ei.setValue(Z,"toneMappingExposure",D.toneMappingExposure),Ne.needsLights&&Ol(Os,Wo),Yt&&Rt.fog===!0&&te.refreshFogUniforms(Os,Yt),te.refreshMaterialUniforms(Os,Rt,et,tt,S.state.transmissionRenderTarget[q.id]),I4.upload(Z,co(Ne),Os,$)),Rt.isShaderMaterial&&Rt.uniformsNeedUpdate===!0&&(I4.upload(Z,co(Ne),Os,$),Rt.uniformsNeedUpdate=!1),Rt.isSpriteMaterial&&ei.setValue(Z,"center",yt.center),ei.setValue(Z,"modelViewMatrix",yt.modelViewMatrix),ei.setValue(Z,"normalMatrix",yt.normalMatrix),ei.setValue(Z,"modelMatrix",yt.matrixWorld),Rt.isShaderMaterial||Rt.isRawShaderMaterial){const ys=Rt.uniformsGroups;for(let _s=0,gr=ys.length;_s<gr;_s++){const Ko=ys[_s];mt.update(Ko,Bs),mt.bind(Ko,Bs)}}return Bs}function Ol(q,pt){q.ambientLightColor.needsUpdate=pt,q.lightProbe.needsUpdate=pt,q.directionalLights.needsUpdate=pt,q.directionalLightShadows.needsUpdate=pt,q.pointLights.needsUpdate=pt,q.pointLightShadows.needsUpdate=pt,q.spotLights.needsUpdate=pt,q.spotLightShadows.needsUpdate=pt,q.rectAreaLights.needsUpdate=pt,q.hemisphereLights.needsUpdate=pt}function Zi(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&&q.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(q,pt,Ct){const Rt=qt.get(q);Rt.__autoAllocateDepthBuffer=q.resolveDepthBuffer===!1,Rt.__autoAllocateDepthBuffer===!1&&(Rt.__useRenderToTexture=!1),qt.get(q.texture).__webglTexture=pt,qt.get(q.depthTexture).__webglTexture=Rt.__autoAllocateDepthBuffer?void 0:Ct,Rt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(q,pt){const Ct=qt.get(q);Ct.__webglFramebuffer=pt,Ct.__useDefaultFramebuffer=pt===void 0};const cf=Z.createFramebuffer();this.setRenderTarget=function(q,pt=0,Ct=0){z=q,I=pt,F=Ct;let Rt=!0,yt=null,Yt=!1,ie=!1;if(q){const Ae=qt.get(q);if(Ae.__useDefaultFramebuffer!==void 0)Gt.bindFramebuffer(Z.FRAMEBUFFER,null),Rt=!1;else if(Ae.__webglFramebuffer===void 0)$.setupRenderTarget(q);else if(Ae.__hasExternalTextures)$.rebindTextures(q,qt.get(q.texture).__webglTexture,qt.get(q.depthTexture).__webglTexture);else if(q.depthBuffer){const Ce=q.depthTexture;if(Ae.__boundDepthTexture!==Ce){if(Ce!==null&&qt.has(Ce)&&(q.width!==Ce.image.width||q.height!==Ce.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$.setupDepthRenderbuffer(q)}}const Ge=q.texture;(Ge.isData3DTexture||Ge.isDataArrayTexture||Ge.isCompressedArrayTexture)&&(ie=!0);const Oe=qt.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(Array.isArray(Oe[pt])?yt=Oe[pt][Ct]:yt=Oe[pt],Yt=!0):q.samples>0&&$.useMultisampledRTT(q)===!1?yt=qt.get(q).__webglMultisampledFramebuffer:Array.isArray(Oe)?yt=Oe[Ct]:yt=Oe,X.copy(q.viewport),ot.copy(q.scissor),it=q.scissorTest}else X.copy(at).multiplyScalar(et).floor(),ot.copy(xt).multiplyScalar(et).floor(),it=Et;if(Ct!==0&&(yt=cf),Gt.bindFramebuffer(Z.FRAMEBUFFER,yt)&&Rt&&Gt.drawBuffers(q,yt),Gt.viewport(X),Gt.scissor(ot),Gt.setScissorTest(it),Yt){const Ae=qt.get(q.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Ae.__webglTexture,Ct)}else if(ie){const Ae=qt.get(q.texture),Ge=pt;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Ae.__webglTexture,Ct,Ge)}else if(q!==null&&Ct!==0){const Ae=qt.get(q.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,Ae.__webglTexture,Ct)}U=-1},this.readRenderTargetPixels=function(q,pt,Ct,Rt,yt,Yt,ie){if(!(q&&q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let re=qt.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&ie!==void 0&&(re=re[ie]),re){Gt.bindFramebuffer(Z.FRAMEBUFFER,re);try{const Ae=q.texture,Ge=Ae.format,Oe=Ae.type;if(!Vt.textureFormatReadable(Ge)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Vt.textureTypeReadable(Oe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pt>=0&&pt<=q.width-Rt&&Ct>=0&&Ct<=q.height-yt&&Z.readPixels(pt,Ct,Rt,yt,He.convert(Ge),He.convert(Oe),Yt)}finally{const Ae=z!==null?qt.get(z).__webglFramebuffer:null;Gt.bindFramebuffer(Z.FRAMEBUFFER,Ae)}}},this.readRenderTargetPixelsAsync=async function(q,pt,Ct,Rt,yt,Yt,ie){if(!(q&&q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let re=qt.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&ie!==void 0&&(re=re[ie]),re)if(pt>=0&&pt<=q.width-Rt&&Ct>=0&&Ct<=q.height-yt){Gt.bindFramebuffer(Z.FRAMEBUFFER,re);const Ae=q.texture,Ge=Ae.format,Oe=Ae.type;if(!Vt.textureFormatReadable(Ge))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Vt.textureTypeReadable(Oe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ce=Z.createBuffer();Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Ce),Z.bufferData(Z.PIXEL_PACK_BUFFER,Yt.byteLength,Z.STREAM_READ),Z.readPixels(pt,Ct,Rt,yt,He.convert(Ge),He.convert(Oe),0);const pn=z!==null?qt.get(z).__webglFramebuffer:null;Gt.bindFramebuffer(Z.FRAMEBUFFER,pn);const Nn=Z.fenceSync(Z.SYNC_GPU_COMMANDS_COMPLETE,0);return Z.flush(),await Dz(Z,Nn,4),Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Ce),Z.getBufferSubData(Z.PIXEL_PACK_BUFFER,0,Yt),Z.deleteBuffer(Ce),Z.deleteSync(Nn),Yt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(q,pt=null,Ct=0){const Rt=Math.pow(2,-Ct),yt=Math.floor(q.image.width*Rt),Yt=Math.floor(q.image.height*Rt),ie=pt!==null?pt.x:0,re=pt!==null?pt.y:0;$.setTexture2D(q,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,Ct,0,0,ie,re,yt,Yt),Gt.unbindTexture()};const uf=Z.createFramebuffer(),ho=Z.createFramebuffer();this.copyTextureToTexture=function(q,pt,Ct=null,Rt=null,yt=0,Yt=null){Yt===null&&(yt!==0?(O4("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Yt=yt,yt=0):Yt=0);let ie,re,Ae,Ge,Oe,Ce,pn,Nn,Mi;const yn=q.isCompressedTexture?q.mipmaps[Yt]:q.image;if(Ct!==null)ie=Ct.max.x-Ct.min.x,re=Ct.max.y-Ct.min.y,Ae=Ct.isBox3?Ct.max.z-Ct.min.z:1,Ge=Ct.min.x,Oe=Ct.min.y,Ce=Ct.isBox3?Ct.min.z:0;else{const $i=Math.pow(2,-yt);ie=Math.floor(yn.width*$i),re=Math.floor(yn.height*$i),q.isDataArrayTexture?Ae=yn.depth:q.isData3DTexture?Ae=Math.floor(yn.depth*$i):Ae=1,Ge=0,Oe=0,Ce=0}Rt!==null?(pn=Rt.x,Nn=Rt.y,Mi=Rt.z):(pn=0,Nn=0,Mi=0);const bn=He.convert(pt.format),Ne=He.convert(pt.type);let Ri;pt.isData3DTexture?($.setTexture3D(pt,0),Ri=Z.TEXTURE_3D):pt.isDataArrayTexture||pt.isCompressedArrayTexture?($.setTexture2DArray(pt,0),Ri=Z.TEXTURE_2D_ARRAY):($.setTexture2D(pt,0),Ri=Z.TEXTURE_2D),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,pt.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pt.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,pt.unpackAlignment);const Ln=Z.getParameter(Z.UNPACK_ROW_LENGTH),Bs=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),Yo=Z.getParameter(Z.UNPACK_SKIP_PIXELS),ri=Z.getParameter(Z.UNPACK_SKIP_ROWS),Wo=Z.getParameter(Z.UNPACK_SKIP_IMAGES);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,yn.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,yn.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Ge),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Oe),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Ce);const ei=q.isDataArrayTexture||q.isData3DTexture,Os=pt.isDataArrayTexture||pt.isData3DTexture;if(q.isDepthTexture){const $i=qt.get(q),ys=qt.get(pt),_s=qt.get($i.__renderTarget),gr=qt.get(ys.__renderTarget);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,_s.__webglFramebuffer),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,gr.__webglFramebuffer);for(let Ko=0;Ko<Ae;Ko++)ei&&(Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,qt.get(q).__webglTexture,yt,Ce+Ko),Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,qt.get(pt).__webglTexture,Yt,Mi+Ko)),Z.blitFramebuffer(Ge,Oe,ie,re,pn,Nn,ie,re,Z.DEPTH_BUFFER_BIT,Z.NEAREST);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,null),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else if(yt!==0||q.isRenderTargetTexture||qt.has(q)){const $i=qt.get(q),ys=qt.get(pt);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,uf),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,ho);for(let _s=0;_s<Ae;_s++)ei?Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,$i.__webglTexture,yt,Ce+_s):Z.framebufferTexture2D(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,$i.__webglTexture,yt),Os?Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,ys.__webglTexture,Yt,Mi+_s):Z.framebufferTexture2D(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,ys.__webglTexture,Yt),yt!==0?Z.blitFramebuffer(Ge,Oe,ie,re,pn,Nn,ie,re,Z.COLOR_BUFFER_BIT,Z.NEAREST):Os?Z.copyTexSubImage3D(Ri,Yt,pn,Nn,Mi+_s,Ge,Oe,ie,re):Z.copyTexSubImage2D(Ri,Yt,pn,Nn,Ge,Oe,ie,re);Gt.bindFramebuffer(Z.READ_FRAMEBUFFER,null),Gt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else Os?q.isDataTexture||q.isData3DTexture?Z.texSubImage3D(Ri,Yt,pn,Nn,Mi,ie,re,Ae,bn,Ne,yn.data):pt.isCompressedArrayTexture?Z.compressedTexSubImage3D(Ri,Yt,pn,Nn,Mi,ie,re,Ae,bn,yn.data):Z.texSubImage3D(Ri,Yt,pn,Nn,Mi,ie,re,Ae,bn,Ne,yn):q.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,Yt,pn,Nn,ie,re,bn,Ne,yn.data):q.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,Yt,pn,Nn,yn.width,yn.height,bn,yn.data):Z.texSubImage2D(Z.TEXTURE_2D,Yt,pn,Nn,ie,re,bn,Ne,yn);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,Ln),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,Bs),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Yo),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,ri),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Wo),Yt===0&&pt.generateMipmaps&&Z.generateMipmap(Ri),Gt.unbindTexture()},this.copyTextureToTexture3D=function(q,pt,Ct=null,Rt=null,yt=0){return O4('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(q,pt,Ct,Rt,yt)},this.initRenderTarget=function(q){qt.get(q).__webglFramebuffer===void 0&&$.setupRenderTarget(q)},this.initTexture=function(q){q.isCubeTexture?$.setTextureCube(q,0):q.isData3DTexture?$.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?$.setTexture2DArray(q,0):$.setTexture2D(q,0),Gt.unbindTexture()},this.resetState=function(){I=0,F=0,z=null,Gt.reset(),Gn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Cl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=Pn._getDrawingBufferColorSpace(t),e.unpackColorSpace=Pn._getUnpackColorSpace()}}const Xq=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Sw,AddEquation:md,AddOperation:cB,AdditiveAnimationBlendMode:Dw,AdditiveBlending:_5,AgXToneMapping:pB,AlphaFormat:Cw,AlwaysCompare:RB,AlwaysDepth:S3,AlwaysStencilFunc:S5,AmbientLight:pO,AnimationAction:EO,AnimationClip:my,AnimationLoader:ak,AnimationMixer:Ok,AnimationObjectGroup:Dk,AnimationUtils:nk,ArcCurve:QB,ArrayCamera:xO,ArrowHelper:nV,AttachedBindMode:b5,Audio:bO,AudioAnalyser:xk,AudioContext:r7,AudioListener:yk,AudioLoader:mk,AxesHelper:iV,BackSide:qs,BasicDepthPacking:ap,BasicShadowMap:V9,BatchedMesh:GB,Bone:aM,BooleanKeyframeTrack:r0,Box2:kk,Box3:Br,Box3Helper:tV,BoxGeometry:s0,BoxHelper:$k,BufferAttribute:zn,BufferGeometry:$e,BufferGeometryLoader:_O,ByteType:Ew,Cache:Kh,Camera:Rx,CameraHelper:Zk,CanvasTexture:EG,CapsuleGeometry:uM,CatmullRomCurve3:XB,CineonToneMapping:fB,CircleGeometry:hM,ClampToEdgeWrapping:Ho,Clock:a7,Color:ae,ColorKeyframeTrack:$w,ColorManagement:Pn,CompressedArrayTexture:bG,CompressedCubeTexture:SG,CompressedTexture:cM,CompressedTextureLoader:ok,ConeGeometry:Ix,ConstantAlphaFactor:aB,ConstantColorFactor:sB,Controls:rV,CubeCamera:UB,CubeReflectionMapping:sf,CubeRefractionMapping:$d,CubeTexture:Lx,CubeTextureLoader:lk,CubeUVReflectionMapping:by,CubicBezierCurve:Vw,CubicBezierCurve3:jB,CubicInterpolant:cO,CullFaceBack:y5,CullFaceFront:k9,CullFaceFrontBack:NH,CullFaceNone:G9,Curve:Bc,CurvePath:YB,CustomBlending:Q9,CustomToneMapping:dB,CylinderGeometry:Nx,Cylindrical:Gk,Data3DTexture:iM,DataArrayTexture:wx,DataTexture:Pu,DataTextureLoader:ck,DataUtils:Yz,DecrementStencilOp:XH,DecrementWrapStencilOp:qH,DefaultLoadingManager:j1,DepthArrayTexture:MG,DepthFormat:ly,DepthStencilFormat:Hg,DepthTexture:Ox,DetachedBindMode:gB,DirectionalLight:s7,DirectionalLightHelper:Jk,DiscreteInterpolant:uO,DodecahedronGeometry:fM,DoubleSide:La,DstAlphaFactor:$9,DstColorFactor:eB,DynamicCopyUsage:lz,DynamicDrawUsage:nz,DynamicReadUsage:rz,EdgesGeometry:VB,EllipseCurve:dM,EqualCompare:MB,EqualDepth:M3,EqualStencilFunc:JH,EquirectangularReflectionMapping:q_,EquirectangularRefractionMapping:Y_,Euler:Vo,EventDispatcher:qo,ExtrudeGeometry:pM,FileLoader:Qo,Float16BufferAttribute:eG,Float32BufferAttribute:Me,FloatType:Oa,Fog:rM,FogExp2:sM,FramebufferTexture:xG,FrontSide:Lc,Frustum:Ey,FrustumArray:oM,GLBufferAttribute:Hk,GLSL1:uz,GLSL3:E5,GreaterCompare:TB,GreaterDepth:C3,GreaterEqualCompare:wB,GreaterEqualDepth:T3,GreaterEqualStencilFunc:ez,GreaterStencilFunc:$H,GridHelper:Wk,Group:Wh,HalfFloatType:i0,HemisphereLight:dO,HemisphereLightHelper:Yk,IcosahedronGeometry:mM,ImageBitmapLoader:AO,ImageLoader:rA,ImageUtils:BB,IncrementStencilOp:QH,IncrementWrapStencilOp:jH,InstancedBufferAttribute:zg,InstancedBufferGeometry:yO,InstancedInterleavedBuffer:Fk,InstancedMesh:Hw,Int16BufferAttribute:$z,Int32BufferAttribute:tG,Int8BufferAttribute:Kz,IntType:WE,InterleavedBuffer:Dx,InterleavedBufferAttribute:ep,Interpolant:Ty,InterpolateDiscrete:cy,InterpolateLinear:uy,InterpolateSmooth:B4,InterpolationSamplingMode:dz,InterpolationSamplingType:fz,InvertStencilOp:YH,KeepStencilOp:ym,KeyframeTrack:Bl,LOD:zB,LatheGeometry:gM,Layers:fy,LessCompare:EB,LessDepth:E3,LessEqualCompare:Ow,LessEqualDepth:Pg,LessEqualStencilFunc:ZH,LessStencilFunc:KH,Light:cp,LightProbe:vO,Line:rf,Line3:Vk,LineBasicMaterial:aa,LineCurve:Qw,LineCurve3:qB,LineDashedMaterial:aO,LineLoop:zw,LineSegments:Dc,LinearFilter:Ni,LinearInterpolant:Zw,LinearMipMapLinearFilter:FH,LinearMipMapNearestFilter:PH,LinearMipmapLinearFilter:Tl,LinearMipmapNearestFilter:W1,LinearSRGBColorSpace:Hu,LinearToneMapping:uB,LinearTransfer:K_,Loader:oa,LoaderUtils:Wd,LoadingManager:t7,LoopOnce:vB,LoopPingPong:_B,LoopRepeat:yB,MOUSE:BH,Material:gs,MaterialLoader:SM,MathUtils:$_,Matrix2:c7,Matrix3:on,Matrix4:Fe,MaxEquation:Y9,Mesh:as,MeshBasicMaterial:zo,MeshDepthMaterial:Ww,MeshDistanceMaterial:Kw,MeshLambertMaterial:sO,MeshMatcapMaterial:rO,MeshNormalMaterial:Yw,MeshPhongMaterial:nO,MeshPhysicalMaterial:Dl,MeshStandardMaterial:Fx,MeshToonMaterial:iO,MinEquation:q9,MirroredRepeatWrapping:ay,MixOperation:lB,MultiplyBlending:x5,MultiplyOperation:Tx,NearestFilter:os,NearestMipMapLinearFilter:UH,NearestMipMapNearestFilter:IH,NearestMipmapLinearFilter:Lm,NearestMipmapNearestFilter:YE,NeutralToneMapping:mB,NeverCompare:SB,NeverDepth:b3,NeverStencilFunc:WH,NoBlending:sa,NoColorSpace:Ec,NoToneMapping:Rc,NormalAnimationBlendMode:eM,NormalBlending:Og,NotEqualCompare:CB,NotEqualDepth:w3,NotEqualStencilFunc:tz,NumberKeyframeTrack:kg,Object3D:Hn,ObjectLoader:dk,ObjectSpaceNormalMap:bB,OctahedronGeometry:Ux,OneFactor:K9,OneMinusConstantAlphaFactor:oB,OneMinusConstantColorFactor:rB,OneMinusDstAlphaFactor:tB,OneMinusDstColorFactor:nB,OneMinusSrcAlphaFactor:x3,OneMinusSrcColorFactor:Z9,OrthographicCamera:Cy,PCFShadowMap:jE,PCFSoftShadowMap:D_,PMREMGenerator:D5,Path:rE,PerspectiveCamera:Rs,Plane:pd,PlaneGeometry:My,PlaneHelper:eV,PointLight:i7,PointLightHelper:jk,Points:Gw,PointsMaterial:lM,PolarGridHelper:Kk,PolyhedronGeometry:lp,PositionalAudio:Ak,PropertyBinding:Qn,PropertyMixer:SO,QuadraticBezierCurve:Xw,QuadraticBezierCurve3:jw,Quaternion:ra,QuaternionKeyframeTrack:Vg,QuaternionLinearInterpolant:hO,RED_GREEN_RGTC2_Format:$3,RED_RGTC1_Format:Lw,REVISION:n0,RGBADepthPacking:xB,RGBAFormat:ea,RGBAIntegerFormat:tM,RGBA_ASTC_10x10_Format:q3,RGBA_ASTC_10x5_Format:Q3,RGBA_ASTC_10x6_Format:X3,RGBA_ASTC_10x8_Format:j3,RGBA_ASTC_12x10_Format:Y3,RGBA_ASTC_12x12_Format:W3,RGBA_ASTC_4x4_Format:U3,RGBA_ASTC_5x4_Format:P3,RGBA_ASTC_5x5_Format:F3,RGBA_ASTC_6x5_Format:H3,RGBA_ASTC_6x6_Format:z3,RGBA_ASTC_8x5_Format:G3,RGBA_ASTC_8x6_Format:k3,RGBA_ASTC_8x8_Format:V3,RGBA_BPTC_Format:U_,RGBA_ETC2_EAC_Format:I3,RGBA_PVRTC_2BPPV1_Format:B3,RGBA_PVRTC_4BPPV1_Format:D3,RGBA_S3TC_DXT1_Format:O_,RGBA_S3TC_DXT3_Format:N_,RGBA_S3TC_DXT5_Format:I_,RGBDepthPacking:zH,RGBFormat:ww,RGBIntegerFormat:HH,RGB_BPTC_SIGNED_Format:K3,RGB_BPTC_UNSIGNED_Format:J3,RGB_ETC1_Format:O3,RGB_ETC2_Format:N3,RGB_PVRTC_2BPPV1_Format:L3,RGB_PVRTC_4BPPV1_Format:R3,RGB_S3TC_DXT1_Format:B_,RGDepthPacking:GH,RGFormat:Rw,RGIntegerFormat:$E,RawShaderMaterial:eO,Ray:Sy,Raycaster:MO,RectAreaLight:mO,RedFormat:ZE,RedIntegerFormat:Cx,ReinhardToneMapping:hB,RenderTarget:nM,RenderTarget3D:Nk,RenderTargetArray:Ik,RepeatWrapping:tp,ReplaceStencilOp:VH,ReverseSubtractEquation:j9,RingGeometry:vM,SIGNED_RED_GREEN_RGTC2_Format:tE,SIGNED_RED_RGTC1_Format:Z3,SRGBColorSpace:Kn,SRGBTransfer:fi,Scene:eA,ShaderChunk:fn,ShaderLib:Sc,ShaderMaterial:Ks,ShadowMaterial:tO,Shape:Ig,ShapeGeometry:yM,ShapePath:sV,ShapeUtils:Tc,ShortType:Mw,Skeleton:Bx,SkeletonHelper:Xk,SkinnedMesh:Fw,Source:Xd,Sphere:pr,SphereGeometry:Px,Spherical:zk,SphericalHarmonics3:gO,SplineCurve:qw,SpotLight:n7,SpotLightHelper:Qk,Sprite:HB,SpriteMaterial:Pw,SrcAlphaFactor:A3,SrcAlphaSaturateFactor:iB,SrcColorFactor:J9,StaticCopyUsage:oz,StaticDrawUsage:J_,StaticReadUsage:sz,StereoCamera:gk,StreamCopyUsage:cz,StreamDrawUsage:iz,StreamReadUsage:az,StringKeyframeTrack:a0,SubtractEquation:X9,SubtractiveBlending:A5,TOUCH:OH,TangentSpaceNormalMap:op,TetrahedronGeometry:_M,Texture:wi,TextureLoader:fO,TextureUtils:uV,TimestampQuery:hz,TorusGeometry:AM,TorusKnotGeometry:xM,Triangle:so,TriangleFanDrawMode:eE,TriangleStripDrawMode:Bw,TrianglesDrawMode:AB,TubeGeometry:bM,UVMapping:qE,Uint16BufferAttribute:Iw,Uint32BufferAttribute:Uw,Uint8BufferAttribute:Jz,Uint8ClampedBufferAttribute:Zz,Uniform:xn,UniformsGroup:Pk,UniformsLib:de,UniformsUtils:IB,UnsignedByteType:Ws,UnsignedInt248Type:Fg,UnsignedInt5999Type:Tw,UnsignedIntType:Fu,UnsignedShort4444Type:KE,UnsignedShort5551Type:JE,UnsignedShortType:oy,VSMShadowMap:lc,Vector2:Pt,Vector3:nt,Vector4:Bn,VectorKeyframeTrack:Qg,VideoFrameTexture:AG,VideoTexture:kB,WebGL3DRenderTarget:Fz,WebGLArrayRenderTarget:Pz,WebGLCoordinateSystem:Cl,WebGLCubeRenderTarget:PB,WebGLRenderTarget:Ds,WebGLRenderer:OO,WebGLUtils:BO,WebGPUCoordinateSystem:Z_,WebXRController:N4,WireframeGeometry:$B,WrapAroundEnding:W_,ZeroCurvatureEnding:Dm,ZeroFactor:W9,ZeroSlopeEnding:Bm,ZeroStencilOp:kH,createCanvasElement:DB},Symbol.toStringTag,{value:"Module"}));var w8={exports:{}},mh={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LL;function jq(){return LL||(LL=1,mh.ConcurrentRoot=1,mh.ContinuousEventPriority=8,mh.DefaultEventPriority=32,mh.DiscreteEventPriority=2,mh.IdleEventPriority=268435456,mh.LegacyRoot=0,mh.NoEventPriority=0),mh}var DL;function qq(){return DL||(DL=1,w8.exports=jq()),w8.exports}var U4=qq(),R8={exports:{}},L8={},D8={exports:{}},B8={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BL;function Yq(){if(BL)return B8;BL=1;var i=e0();function t(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var e=typeof Object.is=="function"?Object.is:t,n=i.useState,s=i.useEffect,r=i.useLayoutEffect,a=i.useDebugValue;function l(g,v){var _=v(),b=n({inst:{value:_,getSnapshot:v}}),C=b[0].inst,T=b[1];return r(function(){C.value=_,C.getSnapshot=v,u(C)&&T({inst:C})},[g,_,v]),s(function(){return u(C)&&T({inst:C}),g(function(){u(C)&&T({inst:C})})},[g]),a(_),_}function u(g){var v=g.getSnapshot;g=g.value;try{var _=v();return!e(g,_)}catch{return!0}}function f(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return B8.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:m,B8}var OL;function Wq(){return OL||(OL=1,D8.exports=Yq()),D8.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NL;function Kq(){if(NL)return L8;NL=1;var i=e0(),t=Wq();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var n=typeof Object.is=="function"?Object.is:e,s=t.useSyncExternalStore,r=i.useRef,a=i.useEffect,l=i.useMemo,u=i.useDebugValue;return L8.useSyncExternalStoreWithSelector=function(f,m,g,v,_){var b=r(null);if(b.current===null){var C={hasValue:!1,value:null};b.current=C}else C=b.current;b=l(function(){function S(I){if(!R){if(R=!0,B=I,I=v(I),_!==void 0&&C.hasValue){var F=C.value;if(_(F,I))return D=F}return D=I}if(F=D,n(B,I))return F;var z=v(I);return _!==void 0&&_(F,z)?(B=I,F):(B=I,D=z)}var R=!1,B,D,N=g===void 0?null:g;return[function(){return S(m())},N===null?void 0:function(){return S(N())}]},[m,g,v,_]);var T=s(f,b[0],b[1]);return a(function(){C.hasValue=!0,C.value=T},[T]),u(T),T},L8}var IL;function Jq(){return IL||(IL=1,R8.exports=Kq()),R8.exports}var Zq=Jq();const $q=FE(Zq),UL=i=>{let t;const e=new Set,n=(f,m)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const v=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),e.forEach(_=>_(t,v))}},s=()=>t,l={setState:n,getState:s,getInitialState:()=>u,subscribe:f=>(e.add(f),()=>e.delete(f))},u=t=i(n,s,l);return l},NO=i=>i?UL(i):UL,{useSyncExternalStoreWithSelector:tY}=$q,eY=i=>i;function nY(i,t=eY,e){const n=tY(i.subscribe,i.getState,i.getInitialState,t,e);return Ba.useDebugValue(n),n}const PL=(i,t)=>{const e=NO(i),n=(s,r=t)=>nY(e,s,r);return Object.assign(n,e),n},iY=(i,t)=>i?PL(i,t):PL;var O8={exports:{}},N8={exports:{}},I8={exports:{}},U8={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FL;function sY(){return FL||(FL=1,function(i){function t(Q,tt){var et=Q.length;Q.push(tt);t:for(;0<et;){var _t=et-1>>>1,J=Q[_t];if(0<s(J,tt))Q[_t]=tt,Q[et]=J,et=_t;else break t}}function e(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var tt=Q[0],et=Q.pop();if(et!==tt){Q[0]=et;t:for(var _t=0,J=Q.length,at=J>>>1;_t<at;){var xt=2*(_t+1)-1,Et=Q[xt],lt=xt+1,wt=Q[lt];if(0>s(Et,et))lt<J&&0>s(wt,Et)?(Q[_t]=wt,Q[lt]=et,_t=lt):(Q[_t]=Et,Q[xt]=et,_t=xt);else if(lt<J&&0>s(wt,et))Q[_t]=wt,Q[lt]=et,_t=lt;else break t}}return tt}function s(Q,tt){var et=Q.sortIndex-tt.sortIndex;return et!==0?et:Q.id-tt.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();i.unstable_now=function(){return a.now()-l}}var u=[],f=[],m=1,g=null,v=3,_=!1,b=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function B(Q){for(var tt=e(f);tt!==null;){if(tt.callback===null)n(f);else if(tt.startTime<=Q)n(f),tt.sortIndex=tt.expirationTime,t(u,tt);else break;tt=e(f)}}function D(Q){if(C=!1,B(Q),!b)if(e(u)!==null)b=!0,ct();else{var tt=e(f);tt!==null&&dt(D,tt.startTime-Q)}}var N=!1,I=-1,F=5,z=-1;function U(){return!(i.unstable_now()-z<F)}function P(){if(N){var Q=i.unstable_now();z=Q;var tt=!0;try{t:{b=!1,C&&(C=!1,S(I),I=-1),_=!0;var et=v;try{e:{for(B(Q),g=e(u);g!==null&&!(g.expirationTime>Q&&U());){var _t=g.callback;if(typeof _t=="function"){g.callback=null,v=g.priorityLevel;var J=_t(g.expirationTime<=Q);if(Q=i.unstable_now(),typeof J=="function"){g.callback=J,B(Q),tt=!0;break e}g===e(u)&&n(u),B(Q)}else n(u);g=e(u)}if(g!==null)tt=!0;else{var at=e(f);at!==null&&dt(D,at.startTime-Q),tt=!1}}break t}finally{g=null,v=et,_=!1}tt=void 0}}finally{tt?X():N=!1}}}var X;if(typeof R=="function")X=function(){R(P)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,it=ot.port2;ot.port1.onmessage=P,X=function(){it.postMessage(null)}}else X=function(){T(P,0)};function ct(){N||(N=!0,X())}function dt(Q,tt){I=T(function(){Q(i.unstable_now())},tt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_continueExecution=function(){b||_||(b=!0,ct())},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return e(u)},i.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var tt=3;break;default:tt=v}var et=v;v=tt;try{return Q()}finally{v=et}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Q,tt){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var et=v;v=Q;try{return tt()}finally{v=et}},i.unstable_scheduleCallback=function(Q,tt,et){var _t=i.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?_t+et:_t):et=_t,Q){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=et+J,Q={id:m++,callback:tt,priorityLevel:Q,startTime:et,expirationTime:J,sortIndex:-1},et>_t?(Q.sortIndex=et,t(f,Q),e(u)===null&&Q===e(f)&&(C?(S(I),I=-1):C=!0,dt(D,et-_t))):(Q.sortIndex=J,t(u,Q),b||_||(b=!0,ct())),Q},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(Q){var tt=v;return function(){var et=v;v=tt;try{return Q.apply(this,arguments)}finally{v=et}}}}(U8)),U8}var HL;function IO(){return HL||(HL=1,I8.exports=sY()),I8.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zL;function rY(){return zL||(zL=1,function(i){i.exports=function(t){function e(h,d,A,M){return new s2(h,d,A,M)}function n(){}function s(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)d+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(h){return h===null||typeof h!="object"?null:(h=jl&&h[jl]||h["@@iterator"],typeof h=="function"?h:null)}function a(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===l2?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case Wc:return"Fragment";case za:return"Portal";case N0:return"Profiler";case Hp:return"StrictMode";case I0:return"Suspense";case Lf:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case mo:return(h.displayName||"Context")+".Provider";case a2:return(h._context.displayName||"Context")+".Consumer";case Gp:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case U0:return d=h.displayName||null,d!==null?d:a(h.type)||"Memo";case Ga:d=h._payload,h=h._init;try{return a(h(d))}catch{}}return null}function l(h){if(el===void 0)try{throw Error()}catch(A){var d=A.stack.trim().match(/\n( *(at )?)/);el=d&&d[1]||"",ql=-1<A.stack.indexOf(`
    at`)?" (<anonymous>)":-1<A.stack.indexOf("@")?"@unknown:0:0":""}return`
`+el+h+ql}function u(h,d){if(!h||Qu)return"";Qu=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var M={DetermineComponentFrameRoot:function(){try{if(d){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(Ke){var ye=Ke}Reflect.construct(h,[],fe)}else{try{fe.call()}catch(Ke){ye=Ke}h.call(fe.prototype)}}else{try{throw Error()}catch(Ke){ye=Ke}(fe=h())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(Ke){if(Ke&&ye&&typeof Ke.stack=="string")return[Ke.stack,ye.stack]}return[null,null]}};M.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(M.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(M.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=M.DetermineComponentFrameRoot(),K=O[0],rt=O[1];if(K&&rt){var At=K.split(`
`),Ht=rt.split(`
`);for(L=M=0;M<At.length&&!At[M].includes("DetermineComponentFrameRoot");)M++;for(;L<Ht.length&&!Ht[L].includes("DetermineComponentFrameRoot");)L++;if(M===At.length||L===Ht.length)for(M=At.length-1,L=Ht.length-1;1<=M&&0<=L&&At[M]!==Ht[L];)L--;for(;1<=M&&0<=L;M--,L--)if(At[M]!==Ht[L]){if(M!==1||L!==1)do if(M--,L--,0>L||At[M]!==Ht[L]){var $t=`
`+At[M].replace(" at new "," at ");return h.displayName&&$t.includes("<anonymous>")&&($t=$t.replace("<anonymous>",h.displayName)),$t}while(1<=M&&0<=L);break}}}finally{Qu=!1,Error.prepareStackTrace=A}return(A=h?h.displayName||h.name:"")?l(A):""}function f(h){switch(h.tag){case 26:case 27:case 5:return l(h.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return h=u(h.type,!1),h;case 11:return h=u(h.type.render,!1),h;case 1:return h=u(h.type,!0),h;default:return""}}function m(h){try{var d="";do d+=f(h),h=h.return;while(h);return d}catch(A){return`
Error generating stack: `+A.message+`
`+A.stack}}function g(h){var d=h,A=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,(d.flags&4098)!==0&&(A=d.return),h=d.return;while(h)}return d.tag===3?A:null}function v(h){if(g(h)!==h)throw Error(s(188))}function _(h){var d=h.alternate;if(!d){if(d=g(h),d===null)throw Error(s(188));return d!==h?null:h}for(var A=h,M=d;;){var L=A.return;if(L===null)break;var O=L.alternate;if(O===null){if(M=L.return,M!==null){A=M;continue}break}if(L.child===O.child){for(O=L.child;O;){if(O===A)return v(L),h;if(O===M)return v(L),d;O=O.sibling}throw Error(s(188))}if(A.return!==M.return)A=L,M=O;else{for(var K=!1,rt=L.child;rt;){if(rt===A){K=!0,A=L,M=O;break}if(rt===M){K=!0,M=L,A=O;break}rt=rt.sibling}if(!K){for(rt=O.child;rt;){if(rt===A){K=!0,A=O,M=L;break}if(rt===M){K=!0,M=O,A=L;break}rt=rt.sibling}if(!K)throw Error(s(189))}}if(A.alternate!==M)throw Error(s(190))}if(A.tag!==3)throw Error(s(188));return A.stateNode.current===A?h:d}function b(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(d=b(h),d!==null)return d;h=h.sibling}return null}function C(h){var d=h.tag;if(d===5||d===26||d===27||d===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(d=C(h),d!==null))return d;h=h.sibling}return null}function T(h){return{current:h}}function S(h){0>Jl||(h.current=Vi[Jl],Vi[Jl]=null,Jl--)}function R(h,d){Jl++,Vi[Jl]=h.current,h.current=d}function B(h){return h>>>=0,h===0?32:31-(Jb(h)/Zb|0)|0}function D(h){var d=h&42;if(d!==0)return d;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function N(h,d){var A=h.pendingLanes;if(A===0)return 0;var M=0,L=h.suspendedLanes,O=h.pingedLanes,K=h.warmLanes;h=h.finishedLanes!==0;var rt=A&134217727;return rt!==0?(A=rt&~L,A!==0?M=D(A):(O&=rt,O!==0?M=D(O):h||(K=rt&~K,K!==0&&(M=D(K))))):(rt=A&~L,rt!==0?M=D(rt):O!==0?M=D(O):h||(K=A&~K,K!==0&&(M=D(K)))),M===0?0:d!==0&&d!==M&&(d&L)===0&&(L=M&-M,K=d&-d,L>=K||L===32&&(K&4194176)!==0)?d:M}function I(h,d){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&d)===0}function F(h,d){switch(h){case 1:case 2:case 4:case 8:return d+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z(){var h=il;return il<<=1,(il&4194176)===0&&(il=128),h}function U(){var h=qu;return qu<<=1,(qu&62914560)===0&&(qu=4194304),h}function P(h){for(var d=[],A=0;31>A;A++)d.push(h);return d}function X(h,d){h.pendingLanes|=d,d!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function ot(h,d,A,M,L,O){var K=h.pendingLanes;h.pendingLanes=A,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=A,h.entangledLanes&=A,h.errorRecoveryDisabledLanes&=A,h.shellSuspendCounter=0;var rt=h.entanglements,At=h.expirationTimes,Ht=h.hiddenUpdates;for(A=K&~A;0<A;){var $t=31-br(A),fe=1<<$t;rt[$t]=0,At[$t]=-1;var ye=Ht[$t];if(ye!==null)for(Ht[$t]=null,$t=0;$t<ye.length;$t++){var Ke=ye[$t];Ke!==null&&(Ke.lane&=-536870913)}A&=~fe}M!==0&&it(h,M,0),O!==0&&L===0&&h.tag!==0&&(h.suspendedLanes|=O&~(K&~d))}function it(h,d,A){h.pendingLanes|=d,h.suspendedLanes&=~d;var M=31-br(d);h.entangledLanes|=d,h.entanglements[M]=h.entanglements[M]|1073741824|A&4194218}function ct(h,d){var A=h.entangledLanes|=d;for(h=h.entanglements;A;){var M=31-br(A),L=1<<M;L&d|h[M]&d&&(h[M]|=d),A&=~L}}function dt(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Q(h){if(kr&&typeof kr.onCommitFiberRoot=="function")try{kr.onCommitFiberRoot(Qi,h,void 0,(h.current.flags&128)===128)}catch{}}function tt(h){if(typeof eS=="function"&&bs(h),kr&&typeof kr.setStrictMode=="function")try{kr.setStrictMode(Qi,h)}catch{}}function et(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}function _t(h,d){if(typeof h=="object"&&h!==null){var A=C2.get(h);return A!==void 0?A:(d={value:h,source:d,stack:m(d)},C2.set(h,d),d)}return{value:h,source:d,stack:m(d)}}function J(h,d){Yu[Wu++]=Hf,Yu[Wu++]=Ku,Ku=h,Hf=d}function at(h,d,A){fa[da++]=yo,fa[da++]=_o,fa[da++]=nu,nu=h;var M=yo;h=_o;var L=32-br(M)-1;M&=~(1<<L),A+=1;var O=32-br(d)+L;if(30<O){var K=L-L%5;O=(M&(1<<K)-1).toString(32),M>>=K,L-=K,yo=1<<32-br(d)+L|A<<L|M,_o=O+h}else yo=1<<O|A<<L|M,_o=h}function xt(h){h.return!==null&&(J(h,1),at(h,1,0))}function Et(h){for(;h===Ku;)Ku=Yu[--Wu],Yu[Wu]=null,Hf=Yu[--Wu],Yu[Wu]=null;for(;h===nu;)nu=fa[--da],fa[da]=null,_o=fa[--da],fa[da]=null,yo=fa[--da],fa[da]=null}function lt(h,d){R(sl,d),R(zf,h),R(hs,null),h=gb(d),S(hs),R(hs,h)}function wt(){S(hs),S(zf),S(sl)}function Bt(h){h.memoizedState!==null&&R(Ju,h);var d=hs.current,A=Nf(d,h.type);d!==A&&(R(zf,h),R(hs,A))}function Ut(h){zf.current===h&&(S(hs),S(zf)),Ju.current===h&&(S(Ju),Ar?go._currentValue=Jc:go._currentValue2=Jc)}function Wt(h){var d=Error(s(418,""));throw se(_t(d,h)),Kp}function ve(h,d){if(!Hs)throw Error(s(175));Gb(h.stateNode,h.type,h.memoizedProps,d,h)||Wt(h)}function ee(h){for(zs=h.return;zs;)switch(zs.tag){case 3:case 27:Ss=!0;return;case 5:case 13:Ss=!1;return;default:zs=zs.return}}function Ye(h){if(!Hs||h!==zs)return!1;if(!Dn)return ee(h),Dn=!0,!1;var d=!1;if(ai?h.tag!==3&&h.tag!==27&&(h.tag!==5||X0(h.type)&&!en(h.type,h.memoizedProps))&&(d=!0):h.tag!==3&&(h.tag!==5||X0(h.type)&&!en(h.type,h.memoizedProps))&&(d=!0),d&&Gs&&Wt(h),ee(h),h.tag===13){if(!Hs)throw Error(s(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));Gs=Vb(h)}else Gs=zs?S2(h.stateNode):null;return!0}function we(){Hs&&(Gs=zs=null,Dn=!1)}function se(h){Qa===null?Qa=[h]:Qa.push(h)}function Z(){for(var h=Zu,d=Ao=Zu=0;d<h;){var A=Xa[d];Xa[d++]=null;var M=Xa[d];Xa[d++]=null;var L=Xa[d];Xa[d++]=null;var O=Xa[d];if(Xa[d++]=null,M!==null&&L!==null){var K=M.pending;K===null?L.next=L:(L.next=K.next,K.next=L),M.pending=L}O!==0&&Gt(A,L,O)}}function Kt(h,d,A,M){Xa[Zu++]=h,Xa[Zu++]=d,Xa[Zu++]=A,Xa[Zu++]=M,Ao|=M,h.lanes|=M,h=h.alternate,h!==null&&(h.lanes|=M)}function Ft(h,d,A,M){return Kt(h,d,A,M),be(h)}function Vt(h,d){return Kt(h,null,null,d),be(h)}function Gt(h,d,A){h.lanes|=A;var M=h.alternate;M!==null&&(M.lanes|=A);for(var L=!1,O=h.return;O!==null;)O.childLanes|=A,M=O.alternate,M!==null&&(M.childLanes|=A),O.tag===22&&(h=O.stateNode,h===null||h._visibility&1||(L=!0)),h=O,O=O.return;L&&d!==null&&h.tag===3&&(O=h.stateNode,L=31-br(A),O=O.hiddenUpdates,h=O[L],h===null?O[L]=[d]:h.push(d),d.lane=A|536870912)}function be(h){if(50<Wf)throw Wf=0,a1=null,Error(s(185));for(var d=h.return;d!==null;)h=d,d=h.return;return h.tag===3?h.stateNode:null}function qt(h){h!==Zl&&h.next===null&&(Zl===null?Jp=Zl=h:Zl=Zl.next=h),pi=!0,$u||($u=!0,Ot(V))}function $(h,d){if(!w2&&pi){w2=!0;do for(var A=!1,M=Jp;M!==null;){if(h!==0){var L=M.pendingLanes;if(L===0)var O=0;else{var K=M.suspendedLanes,rt=M.pingedLanes;O=(1<<31-br(42|h)+1)-1,O&=L&~(K&~rt),O=O&201326677?O&201326677|1:O?O|2:0}O!==0&&(A=!0,Xt(M,O))}else O=Sn,O=N(M,M===qn?O:0),(O&3)===0||I(M,O)||(A=!0,Xt(M,O));M=M.next}while(A);w2=!1}}function V(){pi=$u=!1;var h=0;Gf!==0&&(Ab()&&(h=Gf),Gf=0);for(var d=Va(),A=null,M=Jp;M!==null;){var L=M.next,O=vt(M,d);O===0?(M.next=null,A===null?Jp=L:A.next=L,L===null&&(Zl=A)):(A=M,(h!==0||(O&3)!==0)&&(pi=!0)),M=L}$(h)}function vt(h,d){for(var A=h.suspendedLanes,M=h.pingedLanes,L=h.expirationTimes,O=h.pendingLanes&-62914561;0<O;){var K=31-br(O),rt=1<<K,At=L[K];At===-1?((rt&A)===0||(rt&M)!==0)&&(L[K]=F(rt,d)):At<=d&&(h.expiredLanes|=rt),O&=~rt}if(d=qn,A=Sn,A=N(h,h===d?A:0),M=h.callbackNode,A===0||h===d&&ni===2||h.cancelPendingCommit!==null)return M!==null&&M!==null&&W0(M),h.callbackNode=null,h.callbackPriority=0;if((A&3)===0||I(h,A)){if(d=A&-A,d===h.callbackPriority)return d;switch(M!==null&&W0(M),dt(A)){case 2:case 8:A=tS;break;case 32:A=Z0;break;case 268435456:A=nT;break;default:A=Z0}return M=It.bind(null,h),A=Wp(A,M),h.callbackPriority=d,h.callbackNode=A,d}return M!==null&&M!==null&&W0(M),h.callbackPriority=2,h.callbackNode=null,2}function It(h,d){var A=h.callbackNode;if(po()&&h.callbackNode!==A)return null;var M=Sn;return M=N(h,h===qn?M:0),M===0?null:(Qc(h,M,d),vt(h,Va()),h.callbackNode!=null&&h.callbackNode===A?It.bind(null,h):null)}function Xt(h,d){if(po())return null;Qc(h,d,!0)}function Ot(h){d2?Kl(function(){(Un&6)!==0?Wp(J0,h):h()}):Wp(J0,h)}function ne(){return Gf===0&&(Gf=z()),Gf}function te(h,d){if(kf===null){var A=kf=[];th=0,pa=ne(),eh={status:"pending",value:void 0,then:function(M){A.push(M)}}}return th++,d.then(ge,ge),d}function ge(){if(--th===0&&kf!==null){eh!==null&&(eh.status="fulfilled");var h=kf;kf=null,pa=0,eh=null;for(var d=0;d<h.length;d++)(0,h[d])()}}function De(h,d){var A=[],M={status:"pending",value:null,reason:null,then:function(L){A.push(L)}};return h.then(function(){M.status="fulfilled",M.value=d;for(var L=0;L<A.length;L++)(0,A[L])(d)},function(L){for(M.status="rejected",M.reason=L,L=0;L<A.length;L++)(0,A[L])(void 0)}),M}function Jt(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _e(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Se(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Te(h,d,A){var M=h.updateQueue;if(M===null)return null;if(M=M.shared,(Un&2)!==0){var L=M.pending;return L===null?d.next=d:(d.next=L.next,L.next=d),M.pending=d,d=be(h),Gt(h,null,A),d}return Kt(h,M,d,A),be(h)}function le(h,d,A){if(d=d.updateQueue,d!==null&&(d=d.shared,(A&4194176)!==0)){var M=d.lanes;M&=h.pendingLanes,A|=M,d.lanes=A,ct(h,A)}}function rn(h,d){var A=h.updateQueue,M=h.alternate;if(M!==null&&(M=M.updateQueue,A===M)){var L=null,O=null;if(A=A.firstBaseUpdate,A!==null){do{var K={lane:A.lane,tag:A.tag,payload:A.payload,callback:null,next:null};O===null?L=O=K:O=O.next=K,A=A.next}while(A!==null);O===null?L=O=d:O=O.next=d}else L=O=d;A={baseState:M.baseState,firstBaseUpdate:L,lastBaseUpdate:O,shared:M.shared,callbacks:M.callbacks},h.updateQueue=A;return}h=A.lastBaseUpdate,h===null?A.firstBaseUpdate=d:h.next=d,A.lastBaseUpdate=d}function He(){if(nh){var h=eh;if(h!==null)throw h}}function Gn(h,d,A,M){nh=!1;var L=h.updateQueue;$l=!1;var O=L.firstBaseUpdate,K=L.lastBaseUpdate,rt=L.shared.pending;if(rt!==null){L.shared.pending=null;var At=rt,Ht=At.next;At.next=null,K===null?O=Ht:K.next=Ht,K=At;var $t=h.alternate;$t!==null&&($t=$t.updateQueue,rt=$t.lastBaseUpdate,rt!==K&&(rt===null?$t.firstBaseUpdate=Ht:rt.next=Ht,$t.lastBaseUpdate=At))}if(O!==null){var fe=L.baseState;K=0,$t=Ht=At=null,rt=O;do{var ye=rt.lane&-536870913,Ke=ye!==rt.lane;if(Ke?(Sn&ye)===ye:(M&ye)===ye){ye!==0&&ye===pa&&(nh=!0),$t!==null&&($t=$t.next={lane:0,tag:rt.tag,payload:rt.payload,callback:null,next:null});t:{var ba=h,hu=rt;ye=d;var fu=A;switch(hu.tag){case 1:if(ba=hu.payload,typeof ba=="function"){fe=ba.call(fu,fe,ye);break t}fe=ba;break t;case 3:ba.flags=ba.flags&-65537|128;case 0:if(ba=hu.payload,ye=typeof ba=="function"?ba.call(fu,fe,ye):ba,ye==null)break t;fe=O0({},fe,ye);break t;case 2:$l=!0}}ye=rt.callback,ye!==null&&(h.flags|=64,Ke&&(h.flags|=8192),Ke=L.callbacks,Ke===null?L.callbacks=[ye]:Ke.push(ye))}else Ke={lane:ye,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null},$t===null?(Ht=$t=Ke,At=fe):$t=$t.next=Ke,K|=ye;if(rt=rt.next,rt===null){if(rt=L.shared.pending,rt===null)break;Ke=rt,rt=Ke.next,Ke.next=null,L.lastBaseUpdate=Ke,L.shared.pending=null}}while(!0);$t===null&&(At=fe),L.baseState=At,L.firstBaseUpdate=Ht,L.lastBaseUpdate=$t,O===null&&(L.shared.lanes=0),Aa|=K,h.lanes=K,h.memoizedState=fe}}function mt(h,d){if(typeof h!="function")throw Error(s(191,h));h.call(d)}function ce(h,d){var A=h.callbacks;if(A!==null)for(h.callbacks=null,h=0;h<A.length;h++)mt(A[h],d)}function Nt(h,d){if(Vr(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var A=Object.keys(h),M=Object.keys(d);if(A.length!==M.length)return!1;for(M=0;M<A.length;M++){var L=A[M];if(!rl.call(d,L)||!Vr(h[L],d[L]))return!1}return!0}function Qt(h){return h=h.status,h==="fulfilled"||h==="rejected"}function he(){}function ue(h,d,A){switch(A=h[A],A===void 0?h.push(d):A!==d&&(d.then(he,he),d=A),d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===Vf?Error(s(483)):h;default:if(typeof d.status=="string")d.then(he,he);else{if(h=qn,h!==null&&100<h.shellSuspendCounter)throw Error(s(482));h=d,h.status="pending",h.then(function(M){if(d.status==="pending"){var L=d;L.status="fulfilled",L.value=M}},function(M){if(d.status==="pending"){var L=d;L.status="rejected",L.reason=M}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw h=d.reason,h===Vf?Error(s(483)):h}throw iu=d,Vf}}function qe(){if(iu===null)throw Error(s(459));var h=iu;return iu=null,h}function Jn(h){var d=ru;return ru+=1,su===null&&(su=[]),ue(su,h,d)}function Ei(h,d){d=d.props.ref,h.ref=d!==void 0?d:null}function Cn(h,d){throw d.$$typeof===WM?Error(s(525)):(h=Object.prototype.toString.call(d),Error(s(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h)))}function Nr(h){var d=h._init;return d(h._payload)}function ls(h){function d(Mt,ht){if(h){var Dt=Mt.deletions;Dt===null?(Mt.deletions=[ht],Mt.flags|=16):Dt.push(ht)}}function A(Mt,ht){if(!h)return null;for(;ht!==null;)d(Mt,ht),ht=ht.sibling;return null}function M(Mt){for(var ht=new Map;Mt!==null;)Mt.key!==null?ht.set(Mt.key,Mt):ht.set(Mt.index,Mt),Mt=Mt.sibling;return ht}function L(Mt,ht){return Mt=Ha(Mt,ht),Mt.index=0,Mt.sibling=null,Mt}function O(Mt,ht,Dt){return Mt.index=Dt,h?(Dt=Mt.alternate,Dt!==null?(Dt=Dt.index,Dt<ht?(Mt.flags|=33554434,ht):Dt):(Mt.flags|=33554434,ht)):(Mt.flags|=1048576,ht)}function K(Mt){return h&&Mt.alternate===null&&(Mt.flags|=33554434),Mt}function rt(Mt,ht,Dt,Zt){return ht===null||ht.tag!==6?(ht=D0(Dt,Mt.mode,Zt),ht.return=Mt,ht):(ht=L(ht,Dt),ht.return=Mt,ht)}function At(Mt,ht,Dt,Zt){var Re=Dt.type;return Re===Wc?$t(Mt,ht,Dt.props.children,Zt,Dt.key):ht!==null&&(ht.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ga&&Nr(Re)===ht.type)?(ht=L(ht,Dt.props),Ei(ht,Dt),ht.return=Mt,ht):(ht=tl(Dt.type,Dt.key,Dt.props,null,Mt.mode,Zt),Ei(ht,Dt),ht.return=Mt,ht)}function Ht(Mt,ht,Dt,Zt){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==Dt.containerInfo||ht.stateNode.implementation!==Dt.implementation?(ht=r2(Dt,Mt.mode,Zt),ht.return=Mt,ht):(ht=L(ht,Dt.children||[]),ht.return=Mt,ht)}function $t(Mt,ht,Dt,Zt,Re){return ht===null||ht.tag!==7?(ht=Ii(Dt,Mt.mode,Zt,Re),ht.return=Mt,ht):(ht=L(ht,Dt),ht.return=Mt,ht)}function fe(Mt,ht,Dt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return ht=D0(""+ht,Mt.mode,Dt),ht.return=Mt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case Fp:return Dt=tl(ht.type,ht.key,ht.props,null,Mt.mode,Dt),Ei(Dt,ht),Dt.return=Mt,Dt;case za:return ht=r2(ht,Mt.mode,Dt),ht.return=Mt,ht;case Ga:var Zt=ht._init;return ht=Zt(ht._payload),fe(Mt,ht,Dt)}if(Df(ht)||r(ht))return ht=Ii(ht,Mt.mode,Dt,null),ht.return=Mt,ht;if(typeof ht.then=="function")return fe(Mt,Jn(ht),Dt);if(ht.$$typeof===mo)return fe(Mt,Sp(Mt,ht),Dt);Cn(Mt,ht)}return null}function ye(Mt,ht,Dt,Zt){var Re=ht!==null?ht.key:null;if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return Re!==null?null:rt(Mt,ht,""+Dt,Zt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case Fp:return Dt.key===Re?At(Mt,ht,Dt,Zt):null;case za:return Dt.key===Re?Ht(Mt,ht,Dt,Zt):null;case Ga:return Re=Dt._init,Dt=Re(Dt._payload),ye(Mt,ht,Dt,Zt)}if(Df(Dt)||r(Dt))return Re!==null?null:$t(Mt,ht,Dt,Zt,null);if(typeof Dt.then=="function")return ye(Mt,ht,Jn(Dt),Zt);if(Dt.$$typeof===mo)return ye(Mt,ht,Sp(Mt,Dt),Zt);Cn(Mt,Dt)}return null}function Ke(Mt,ht,Dt,Zt,Re){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint")return Mt=Mt.get(Dt)||null,rt(ht,Mt,""+Zt,Re);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case Fp:return Mt=Mt.get(Zt.key===null?Dt:Zt.key)||null,At(ht,Mt,Zt,Re);case za:return Mt=Mt.get(Zt.key===null?Dt:Zt.key)||null,Ht(ht,Mt,Zt,Re);case Ga:var bi=Zt._init;return Zt=bi(Zt._payload),Ke(Mt,ht,Dt,Zt,Re)}if(Df(Zt)||r(Zt))return Mt=Mt.get(Dt)||null,$t(ht,Mt,Zt,Re,null);if(typeof Zt.then=="function")return Ke(Mt,ht,Dt,Jn(Zt),Re);if(Zt.$$typeof===mo)return Ke(Mt,ht,Dt,Sp(ht,Zt),Re);Cn(ht,Zt)}return null}function ba(Mt,ht,Dt,Zt){for(var Re=null,bi=null,Xe=ht,Vn=ht=0,Xi=null;Xe!==null&&Vn<Dt.length;Vn++){Xe.index>Vn?(Xi=Xe,Xe=null):Xi=Xe.sibling;var _n=ye(Mt,Xe,Dt[Vn],Zt);if(_n===null){Xe===null&&(Xe=Xi);break}h&&Xe&&_n.alternate===null&&d(Mt,Xe),ht=O(_n,ht,Vn),bi===null?Re=_n:bi.sibling=_n,bi=_n,Xe=Xi}if(Vn===Dt.length)return A(Mt,Xe),Dn&&J(Mt,Vn),Re;if(Xe===null){for(;Vn<Dt.length;Vn++)Xe=fe(Mt,Dt[Vn],Zt),Xe!==null&&(ht=O(Xe,ht,Vn),bi===null?Re=Xe:bi.sibling=Xe,bi=Xe);return Dn&&J(Mt,Vn),Re}for(Xe=M(Xe);Vn<Dt.length;Vn++)Xi=Ke(Xe,Mt,Vn,Dt[Vn],Zt),Xi!==null&&(h&&Xi.alternate!==null&&Xe.delete(Xi.key===null?Vn:Xi.key),ht=O(Xi,ht,Vn),bi===null?Re=Xi:bi.sibling=Xi,bi=Xi);return h&&Xe.forEach(function(dl){return d(Mt,dl)}),Dn&&J(Mt,Vn),Re}function hu(Mt,ht,Dt,Zt){if(Dt==null)throw Error(s(151));for(var Re=null,bi=null,Xe=ht,Vn=ht=0,Xi=null,_n=Dt.next();Xe!==null&&!_n.done;Vn++,_n=Dt.next()){Xe.index>Vn?(Xi=Xe,Xe=null):Xi=Xe.sibling;var dl=ye(Mt,Xe,_n.value,Zt);if(dl===null){Xe===null&&(Xe=Xi);break}h&&Xe&&dl.alternate===null&&d(Mt,Xe),ht=O(dl,ht,Vn),bi===null?Re=dl:bi.sibling=dl,bi=dl,Xe=Xi}if(_n.done)return A(Mt,Xe),Dn&&J(Mt,Vn),Re;if(Xe===null){for(;!_n.done;Vn++,_n=Dt.next())_n=fe(Mt,_n.value,Zt),_n!==null&&(ht=O(_n,ht,Vn),bi===null?Re=_n:bi.sibling=_n,bi=_n);return Dn&&J(Mt,Vn),Re}for(Xe=M(Xe);!_n.done;Vn++,_n=Dt.next())_n=Ke(Xe,Mt,Vn,_n.value,Zt),_n!==null&&(h&&_n.alternate!==null&&Xe.delete(_n.key===null?Vn:_n.key),ht=O(_n,ht,Vn),bi===null?Re=_n:bi.sibling=_n,bi=_n);return h&&Xe.forEach(function(o1){return d(Mt,o1)}),Dn&&J(Mt,Vn),Re}function fu(Mt,ht,Dt,Zt){if(typeof Dt=="object"&&Dt!==null&&Dt.type===Wc&&Dt.key===null&&(Dt=Dt.props.children),typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case Fp:t:{for(var Re=Dt.key;ht!==null;){if(ht.key===Re){if(Re=Dt.type,Re===Wc){if(ht.tag===7){A(Mt,ht.sibling),Zt=L(ht,Dt.props.children),Zt.return=Mt,Mt=Zt;break t}}else if(ht.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ga&&Nr(Re)===ht.type){A(Mt,ht.sibling),Zt=L(ht,Dt.props),Ei(Zt,Dt),Zt.return=Mt,Mt=Zt;break t}A(Mt,ht);break}else d(Mt,ht);ht=ht.sibling}Dt.type===Wc?(Zt=Ii(Dt.props.children,Mt.mode,Zt,Dt.key),Zt.return=Mt,Mt=Zt):(Zt=tl(Dt.type,Dt.key,Dt.props,null,Mt.mode,Zt),Ei(Zt,Dt),Zt.return=Mt,Mt=Zt)}return K(Mt);case za:t:{for(Re=Dt.key;ht!==null;){if(ht.key===Re)if(ht.tag===4&&ht.stateNode.containerInfo===Dt.containerInfo&&ht.stateNode.implementation===Dt.implementation){A(Mt,ht.sibling),Zt=L(ht,Dt.children||[]),Zt.return=Mt,Mt=Zt;break t}else{A(Mt,ht);break}else d(Mt,ht);ht=ht.sibling}Zt=r2(Dt,Mt.mode,Zt),Zt.return=Mt,Mt=Zt}return K(Mt);case Ga:return Re=Dt._init,Dt=Re(Dt._payload),fu(Mt,ht,Dt,Zt)}if(Df(Dt))return ba(Mt,ht,Dt,Zt);if(r(Dt)){if(Re=r(Dt),typeof Re!="function")throw Error(s(150));return Dt=Re.call(Dt),hu(Mt,ht,Dt,Zt)}if(typeof Dt.then=="function")return fu(Mt,ht,Jn(Dt),Zt);if(Dt.$$typeof===mo)return fu(Mt,ht,Sp(Mt,Dt),Zt);Cn(Mt,Dt)}return typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint"?(Dt=""+Dt,ht!==null&&ht.tag===6?(A(Mt,ht.sibling),Zt=L(ht,Dt),Zt.return=Mt,Mt=Zt):(A(Mt,ht),Zt=D0(Dt,Mt.mode,Zt),Zt.return=Mt,Mt=Zt),K(Mt)):A(Mt,ht)}return function(Mt,ht,Dt,Zt){try{ru=0;var Re=fu(Mt,ht,Dt,Zt);return su=null,Re}catch(Xe){if(Xe===Vf)throw Xe;var bi=e(29,Xe,null,Mt.mode);return bi.lanes=Zt,bi.return=Mt,bi}finally{}}}function Ji(h,d){h=ir,R(Qf,h),R(mi,d),ir=h|d.baseLanes}function cs(){R(Qf,ir),R(mi,mi.current)}function $s(){ir=Qf.current,S(mi),S(Qf)}function Ir(h){var d=h.alternate;R(fs,fs.current&1),R(ma,h),oi===null&&(d===null||mi.current!==null||d.memoizedState!==null)&&(oi=h)}function hp(h){if(h.tag===22){if(R(fs,fs.current),R(ma,h),oi===null){var d=h.alternate;d!==null&&d.memoizedState!==null&&(oi=h)}}else oo()}function oo(){R(fs,fs.current),R(ma,ma.current)}function mr(h){S(ma),oi===h&&(oi=null),S(fs)}function lo(h){for(var d=h;d!==null;){if(d.tag===13){var A=d.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||k0(A)||V0(A)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function ti(){throw Error(s(321))}function co(h,d){if(d===null)return!1;for(var A=0;A<d.length&&A<h.length;A++)if(!Vr(h[A],d[A]))return!1;return!0}function uo(h,d,A,M,L,O){return tc=O,ln=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Qe.H=h===null||h.memoizedState===null?lu:Sr,ou=!1,O=A(M,L),ou=!1,ih&&(O=Ol(d,A,M,L)),Oc(h),O}function Oc(h){Qe.H=Ui;var d=Pe!==null&&Pe.next!==null;if(tc=0,In=Pe=ln=null,ja=!1,sh=0,Es=null,d)throw Error(s(300));h===null||li||(h=h.dependencies,h!==null&&bp(h)&&(li=!0))}function Ol(h,d,A,M){ln=h;var L=0;do{if(ih&&(Es=null),sh=0,ih=!1,25<=L)throw Error(s(301));if(L+=1,In=Pe=null,h.updateQueue!=null){var O=h.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Qe.H=ga,O=d(A,M)}while(ih);return O}function Zi(){var h=Qe.H,d=h.useState()[0];return d=typeof d.then=="function"?Ct(d):d,h=h.useState()[0],(Pe!==null?Pe.memoizedState:null)!==h&&(ln.flags|=1024),d}function cf(){var h=$0!==0;return $0=0,h}function uf(h,d,A){d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~A}function ho(h){if(ja){for(h=h.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}ja=!1}tc=0,In=Pe=ln=null,ih=!1,sh=$0=0,Es=null}function q(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?ln.memoizedState=In=h:In=In.next=h,In}function pt(){if(Pe===null){var h=ln.alternate;h=h!==null?h.memoizedState:null}else h=Pe.next;var d=In===null?ln.memoizedState:In.next;if(d!==null)In=d,Pe=h;else{if(h===null)throw ln.alternate===null?Error(s(467)):Error(s(310));Pe=h,h={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},In===null?ln.memoizedState=In=h:In=In.next=h}return In}function Ct(h){var d=sh;return sh+=1,Es===null&&(Es=[]),h=ue(Es,h,d),d=ln,(In===null?d.memoizedState:In.next)===null&&(d=d.alternate,Qe.H=d===null||d.memoizedState===null?lu:Sr),h}function Rt(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Ct(h);if(h.$$typeof===mo)return Is(h)}throw Error(s(438,String(h)))}function yt(h){var d=null,A=ln.updateQueue;if(A!==null&&(d=A.memoCache),d==null){var M=ln.alternate;M!==null&&(M=M.updateQueue,M!==null&&(M=M.memoCache,M!=null&&(d={data:M.data.map(function(L){return L.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),A===null&&(A=t1(),ln.updateQueue=A),A.memoCache=d,A=d.data[d.index],A===void 0)for(A=d.data[d.index]=Array(h),M=0;M<h;M++)A[M]=mb;return d.index++,A}function Yt(h,d){return typeof d=="function"?d(h):d}function ie(h){var d=pt();return re(d,Pe,h)}function re(h,d,A){var M=h.queue;if(M===null)throw Error(s(311));M.lastRenderedReducer=A;var L=h.baseQueue,O=M.pending;if(O!==null){if(L!==null){var K=L.next;L.next=O.next,O.next=K}d.baseQueue=L=O,M.pending=null}if(O=h.baseState,L===null)h.memoizedState=O;else{d=L.next;var rt=K=null,At=null,Ht=d,$t=!1;do{var fe=Ht.lane&-536870913;if(fe!==Ht.lane?(Sn&fe)===fe:(tc&fe)===fe){var ye=Ht.revertLane;if(ye===0)At!==null&&(At=At.next={lane:0,revertLane:0,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null}),fe===pa&&($t=!0);else if((tc&ye)===ye){Ht=Ht.next,ye===pa&&($t=!0);continue}else fe={lane:0,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},At===null?(rt=At=fe,K=O):At=At.next=fe,ln.lanes|=ye,Aa|=ye;fe=Ht.action,ou&&A(O,fe),O=Ht.hasEagerState?Ht.eagerState:A(O,fe)}else ye={lane:fe,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},At===null?(rt=At=ye,K=O):At=At.next=ye,ln.lanes|=fe,Aa|=fe;Ht=Ht.next}while(Ht!==null&&Ht!==d);if(At===null?K=O:At.next=rt,!Vr(O,h.memoizedState)&&(li=!0,$t&&(A=eh,A!==null)))throw A;h.memoizedState=O,h.baseState=K,h.baseQueue=At,M.lastRenderedState=O}return L===null&&(M.lanes=0),[h.memoizedState,M.dispatch]}function Ae(h){var d=pt(),A=d.queue;if(A===null)throw Error(s(311));A.lastRenderedReducer=h;var M=A.dispatch,L=A.pending,O=d.memoizedState;if(L!==null){A.pending=null;var K=L=L.next;do O=h(O,K.action),K=K.next;while(K!==L);Vr(O,d.memoizedState)||(li=!0),d.memoizedState=O,d.baseQueue===null&&(d.baseState=O),A.lastRenderedState=O}return[O,M]}function Ge(h,d,A){var M=ln,L=pt(),O=Dn;if(O){if(A===void 0)throw Error(s(407));A=A()}else A=d();var K=!Vr((Pe||L).memoizedState,A);if(K&&(L.memoizedState=A,li=!0),L=L.queue,Ly(pn.bind(null,M,L,h),[h]),L.getSnapshot!==d||K||In!==null&&In.memoizedState.tag&1){if(M.flags|=2048,gr(9,Ce.bind(null,M,L,A,d),{destroy:void 0},null),qn===null)throw Error(s(349));O||(tc&60)!==0||Oe(M,d,A)}return A}function Oe(h,d,A){h.flags|=16384,h={getSnapshot:d,value:A},d=ln.updateQueue,d===null?(d=t1(),ln.updateQueue=d,d.stores=[h]):(A=d.stores,A===null?d.stores=[h]:A.push(h))}function Ce(h,d,A,M){d.value=A,d.getSnapshot=M,Nn(d)&&Mi(h)}function pn(h,d,A){return A(function(){Nn(d)&&Mi(h)})}function Nn(h){var d=h.getSnapshot;h=h.value;try{var A=d();return!Vr(h,A)}catch{return!0}}function Mi(h){var d=Vt(h,2);d!==null&&xs(d,h,2)}function yn(h){var d=q();if(typeof h=="function"){var A=h;if(h=A(),ou){tt(!0);try{A()}finally{tt(!1)}}}return d.memoizedState=d.baseState=h,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:h},d}function bn(h,d,A,M){return h.baseState=A,re(h,Pe,typeof M=="function"?M:Yt)}function Ne(h,d,A,M,L){if(vp(h))throw Error(s(485));if(h=d.action,h!==null){var O={payload:L,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){O.listeners.push(K)}};Qe.T!==null?A(!0):O.isTransition=!1,M(O),A=d.pending,A===null?(O.next=d.pending=O,Ri(d,O)):(O.next=A.next,d.pending=A.next=O)}}function Ri(h,d){var A=d.action,M=d.payload,L=h.state;if(d.isTransition){var O=Qe.T,K={};Qe.T=K;try{var rt=A(L,M),At=Qe.S;At!==null&&At(K,rt),Ln(h,d,rt)}catch(Ht){Yo(h,d,Ht)}finally{Qe.T=O}}else try{O=A(L,M),Ln(h,d,O)}catch(Ht){Yo(h,d,Ht)}}function Ln(h,d,A){A!==null&&typeof A=="object"&&typeof A.then=="function"?A.then(function(M){Bs(h,d,M)},function(M){return Yo(h,d,M)}):Bs(h,d,A)}function Bs(h,d,A){d.status="fulfilled",d.value=A,ri(d),h.state=A,d=h.pending,d!==null&&(A=d.next,A===d?h.pending=null:(A=A.next,d.next=A,Ri(h,A)))}function Yo(h,d,A){var M=h.pending;if(h.pending=null,M!==null){M=M.next;do d.status="rejected",d.reason=A,ri(d),d=d.next;while(d!==M)}h.action=null}function ri(h){h=h.listeners;for(var d=0;d<h.length;d++)(0,h[d])()}function Wo(h,d){return d}function ei(h,d){if(Dn){var A=qn.formState;if(A!==null){t:{var M=ln;if(Dn){if(Gs){var L=b2(Gs,Ss);if(L){Gs=S2(L),M=Pb(L);break t}}Wt(M)}M=!1}M&&(d=A[0])}}A=q(),A.memoizedState=A.baseState=d,M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:d},A.queue=M,A=Ny.bind(null,ln,M),M.dispatch=A,M=yn(!1);var O=df.bind(null,ln,!1,M.queue);return M=q(),L={state:d,dispatch:null,action:h,pending:null},M.queue=L,A=Ne.bind(null,ln,L,O,A),L.dispatch=A,M.memoizedState=h,[d,A,!1]}function Os(h){var d=pt();return $i(d,Pe,h)}function $i(h,d,A){d=re(h,d,Wo)[0],h=ie(Yt)[0],d=typeof d=="object"&&d!==null&&typeof d.then=="function"?Ct(d):d;var M=pt(),L=M.queue,O=L.dispatch;return A!==M.memoizedState&&(ln.flags|=2048,gr(9,ys.bind(null,L,A),{destroy:void 0},null)),[d,O,h]}function ys(h,d){h.action=d}function _s(h){var d=pt(),A=Pe;if(A!==null)return $i(d,A,h);pt(),d=d.memoizedState,A=pt();var M=A.queue.dispatch;return A.memoizedState=h,[d,M,!1]}function gr(h,d,A,M){return h={tag:h,create:d,inst:A,deps:M,next:null},d=ln.updateQueue,d===null&&(d=t1(),ln.updateQueue=d),A=d.lastEffect,A===null?d.lastEffect=h.next=h:(M=A.next,A.next=h,h.next=M,d.lastEffect=h),h}function Ko(){return pt().memoizedState}function fp(h,d,A,M){var L=q();ln.flags|=h,L.memoizedState=gr(1|d,A,{destroy:void 0},M===void 0?null:M)}function dp(h,d,A,M){var L=pt();M=M===void 0?null:M;var O=L.memoizedState.inst;Pe!==null&&M!==null&&co(M,Pe.memoizedState.deps)?L.memoizedState=gr(d,A,O,M):(ln.flags|=h,L.memoizedState=gr(1|d,A,O,M))}function h0(h,d){fp(8390656,8,h,d)}function Ly(h,d){dp(2048,8,h,d)}function qx(h,d){return dp(4,2,h,d)}function pp(h,d){return dp(4,4,h,d)}function f0(h,d){if(typeof d=="function"){h=h();var A=d(h);return function(){typeof A=="function"?A():d(null)}}if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function d0(h,d,A){A=A!=null?A.concat([h]):null,dp(4,4,f0.bind(null,d,h),A)}function Nc(){}function zu(h,d){var A=pt();d=d===void 0?null:d;var M=A.memoizedState;return d!==null&&co(d,M[1])?M[0]:(A.memoizedState=[h,d],h)}function Dy(h,d){var A=pt();d=d===void 0?null:d;var M=A.memoizedState;if(d!==null&&co(d,M[1]))return M[0];if(M=h(),ou){tt(!0);try{h()}finally{tt(!1)}}return A.memoizedState=[M,d],M}function mp(h,d,A){return A===void 0||(tc&1073741824)!==0?h.memoizedState=d:(h.memoizedState=A,h=$y(),ln.lanes|=h,Aa|=h,A)}function By(h,d,A,M){return Vr(A,d)?A:mi.current!==null?(h=mp(h,A,M),Vr(h,d)||(li=!0),h):(tc&42)===0?(li=!0,h.memoizedState=A):(h=$y(),ln.lanes|=h,Aa|=h,d)}function hf(h,d,A,M,L){var O=Wl();er(O!==0&&8>O?O:8);var K=Qe.T,rt={};Qe.T=rt,df(h,!1,d,A);try{var At=L(),Ht=Qe.S;if(Ht!==null&&Ht(rt,At),At!==null&&typeof At=="object"&&typeof At.then=="function"){var $t=De(At,M);Ic(h,d,$t,Gi(h))}else Ic(h,d,M,Gi(h))}catch(fe){Ic(h,d,{then:function(){},status:"rejected",reason:fe},Gi())}finally{er(O),Qe.T=K}}function Jo(h){var d=h.memoizedState;if(d!==null)return d;d={memoizedState:Jc,baseState:Jc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:Jc},next:null};var A={};return d.next={memoizedState:A,baseState:A,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:A},next:null},h.memoizedState=d,h=h.alternate,h!==null&&(h.memoizedState=d),d}function gp(){return Is(go)}function ff(){return pt().memoizedState}function Nl(){return pt().memoizedState}function Oy(h){for(var d=h.return;d!==null;){switch(d.tag){case 24:case 3:var A=Gi();h=Se(A);var M=Te(d,h,A);M!==null&&(xs(M,d,A),le(M,d,A)),d={cache:Hc()},h.payload=d;return}d=d.return}}function p0(h,d,A){var M=Gi();A={lane:M,revertLane:0,action:A,hasEagerState:!1,eagerState:null,next:null},vp(h)?vr(d,A):(A=Ft(h,d,A,M),A!==null&&(xs(A,h,M),Uc(A,d,M)))}function Ny(h,d,A){var M=Gi();Ic(h,d,A,M)}function Ic(h,d,A,M){var L={lane:M,revertLane:0,action:A,hasEagerState:!1,eagerState:null,next:null};if(vp(h))vr(d,L);else{var O=h.alternate;if(h.lanes===0&&(O===null||O.lanes===0)&&(O=d.lastRenderedReducer,O!==null))try{var K=d.lastRenderedState,rt=O(K,A);if(L.hasEagerState=!0,L.eagerState=rt,Vr(rt,K))return Kt(h,d,L,0),qn===null&&Z(),!1}catch{}finally{}if(A=Ft(h,d,L,M),A!==null)return xs(A,h,M),Uc(A,d,M),!0}return!1}function df(h,d,A,M){if(M={lane:2,revertLane:ne(),action:M,hasEagerState:!1,eagerState:null,next:null},vp(h)){if(d)throw Error(s(479))}else d=Ft(h,A,M,2),d!==null&&xs(d,h,2)}function vp(h){var d=h.alternate;return h===ln||d!==null&&d===ln}function vr(h,d){ih=ja=!0;var A=h.pending;A===null?d.next=d:(d.next=A.next,A.next=d),h.pending=d}function Uc(h,d,A){if((A&4194176)!==0){var M=d.lanes;M&=h.pendingLanes,A|=M,d.lanes=A,ct(h,A)}}function pf(h,d,A,M){d=h.memoizedState,A=A(M,d),A=A==null?d:O0({},d,A),h.memoizedState=A,h.lanes===0&&(h.updateQueue.baseState=A)}function mf(h,d,A,M,L,O,K){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(M,O,K):d.prototype&&d.prototype.isPureReactComponent?!Nt(A,M)||!Nt(L,O):!0}function Yx(h,d,A,M){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(A,M),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(A,M),d.state!==h&&ol.enqueueReplaceState(d,d.state,null)}function Il(h,d){var A=d;if("ref"in d){A={};for(var M in d)M!=="ref"&&(A[M]=d[M])}if(h=h.defaultProps){A===d&&(A=O0({},A));for(var L in h)A[L]===void 0&&(A[L]=h[L])}return A}function gf(h,d){try{var A=h.onUncaughtError;A(d.value,{componentStack:d.stack})}catch(M){setTimeout(function(){throw M})}}function vf(h,d,A){try{var M=h.onCaughtError;M(A.value,{componentStack:A.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function yf(h,d,A){return A=Se(A),A.tag=3,A.payload={element:null},A.callback=function(){gf(h,d)},A}function Iy(h){return h=Se(h),h.tag=3,h}function Wx(h,d,A,M){var L=A.type.getDerivedStateFromError;if(typeof L=="function"){var O=M.value;h.payload=function(){return L(O)},h.callback=function(){vf(d,A,M)}}var K=A.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(h.callback=function(){vf(d,A,M),typeof L!="function"&&(cu===null?cu=new Set([this]):cu.add(this));var rt=M.stack;this.componentDidCatch(M.value,{componentStack:rt!==null?rt:""})})}function XM(h,d,A,M,L){if(A.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){if(d=A.alternate,d!==null&&xp(d,A,L,!0),A=ma.current,A!==null){switch(A.tag){case 13:return oi===null?Vl():A.alternate===null&&ci===0&&(ci=3),A.flags&=-257,A.flags|=65536,A.lanes=L,M===$p?A.flags|=16384:(d=A.updateQueue,d===null?A.updateQueue=new Set([M]):d.add(M),Vu(h,M,L)),!1;case 22:return A.flags|=65536,M===$p?A.flags|=16384:(d=A.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([M])},A.updateQueue=d):(A=d.retryQueue,A===null?d.retryQueue=new Set([M]):A.add(M)),Vu(h,M,L)),!1}throw Error(s(435,A.tag))}return Vu(h,M,L),Vl(),!1}if(Dn)return d=ma.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=L,M!==Kp&&(h=Error(s(422),{cause:M}),se(_t(h,A)))):(M!==Kp&&(d=Error(s(423),{cause:M}),se(_t(d,A))),h=h.current.alternate,h.flags|=65536,L&=-L,h.lanes|=L,M=_t(M,A),L=yf(h.stateNode,M,L),rn(h,L),ci!==4&&(ci=2)),!1;var O=Error(s(520),{cause:M});if(O=_t(O,A),ah===null?ah=[O]:ah.push(O),ci!==4&&(ci=2),d===null)return!0;M=_t(M,A),A=d;do{switch(A.tag){case 3:return A.flags|=65536,h=L&-L,A.lanes|=h,h=yf(A.stateNode,M,h),rn(A,h),!1;case 1:if(d=A.type,O=A.stateNode,(A.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(cu===null||!cu.has(O))))return A.flags|=65536,L&=-L,A.lanes|=L,L=Iy(L),Wx(L,h,A,M),rn(A,L),!1}A=A.return}while(A!==null);return!1}function Ns(h,d,A,M){d.child=h===null?al(d,null,A,M):au(d,h.child,A,M)}function m0(h,d,A,M,L){A=A.render;var O=d.ref;if("ref"in M){var K={};for(var rt in M)rt!=="ref"&&(K[rt]=M[rt])}else K=M;return Fc(d),M=uo(h,d,A,K,O,L),rt=cf(),h!==null&&!li?(uf(h,d,L),Ul(h,d,L)):(Dn&&rt&&xt(d),d.flags|=1,Ns(h,d,M,L),d.child)}function Kx(h,d,A,M,L){if(h===null){var O=A.type;return typeof O=="function"&&!Np(O)&&O.defaultProps===void 0&&A.compare===null?(d.tag=15,d.type=O,Jx(h,d,O,M,L)):(h=tl(A.type,null,M,d,d.mode,L),h.ref=d.ref,h.return=d,d.child=h)}if(O=h.child,!zy(h,L)){var K=O.memoizedProps;if(A=A.compare,A=A!==null?A:Nt,A(K,M)&&h.ref===d.ref)return Ul(h,d,L)}return d.flags|=1,h=Ha(O,M),h.ref=d.ref,h.return=d,d.child=h}function Jx(h,d,A,M,L){if(h!==null){var O=h.memoizedProps;if(Nt(O,M)&&h.ref===d.ref)if(li=!1,d.pendingProps=M=O,zy(h,L))(h.flags&131072)!==0&&(li=!0);else return d.lanes=h.lanes,Ul(h,d,L)}return g0(h,d,A,M,L)}function Zx(h,d,A){var M=d.pendingProps,L=M.children,O=(d.stateNode._pendingVisibility&2)!==0,K=h!==null?h.memoizedState:null;if(yp(h,d),M.mode==="hidden"||O){if((d.flags&128)!==0){if(M=K!==null?K.baseLanes|A:A,h!==null){for(L=d.child=h.child,O=0;L!==null;)O=O|L.lanes|L.childLanes,L=L.sibling;d.childLanes=O&~M}else d.childLanes=0,d.child=null;return $x(h,d,M,A)}if((A&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},h!==null&&y0(d,K!==null?K.cachePool:null),K!==null?Ji(d,K):cs(),hp(d);else return d.lanes=d.childLanes=536870912,$x(h,d,K!==null?K.baseLanes|A:A,A)}else K!==null?(y0(d,K.cachePool),Ji(d,K),oo(),d.memoizedState=null):(h!==null&&y0(d,null),cs(),oo());return Ns(h,d,L,A),d.child}function $x(h,d,A,M){var L=ky();return L=L===null?null:{parent:Ar?gi._currentValue:gi._currentValue2,pool:L},d.memoizedState={baseLanes:A,cachePool:L},h!==null&&y0(d,null),cs(),hp(d),h!==null&&xp(h,d,M,!0),null}function yp(h,d){var A=d.ref;if(A===null)h!==null&&h.ref!==null&&(d.flags|=2097664);else{if(typeof A!="function"&&typeof A!="object")throw Error(s(284));(h===null||h.ref!==A)&&(d.flags|=2097664)}}function g0(h,d,A,M,L){return Fc(d),A=uo(h,d,A,M,void 0,L),M=cf(),h!==null&&!li?(uf(h,d,L),Ul(h,d,L)):(Dn&&M&&xt(d),d.flags|=1,Ns(h,d,A,L),d.child)}function tb(h,d,A,M,L,O){return Fc(d),d.updateQueue=null,A=Ol(d,M,A,L),Oc(h),M=cf(),h!==null&&!li?(uf(h,d,O),Ul(h,d,O)):(Dn&&M&&xt(d),d.flags|=1,Ns(h,d,A,O),d.child)}function eb(h,d,A,M,L){if(Fc(d),d.stateNode===null){var O=eu,K=A.contextType;typeof K=="object"&&K!==null&&(O=Is(K)),O=new A(M,O),d.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=ol,d.stateNode=O,O._reactInternals=d,O=d.stateNode,O.props=M,O.state=d.memoizedState,O.refs={},Jt(d),K=A.contextType,O.context=typeof K=="object"&&K!==null?Is(K):eu,O.state=d.memoizedState,K=A.getDerivedStateFromProps,typeof K=="function"&&(pf(d,A,K,M),O.state=d.memoizedState),typeof A.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(K=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),K!==O.state&&ol.enqueueReplaceState(O,O.state,null),Gn(d,M,O,L),He(),O.state=d.memoizedState),typeof O.componentDidMount=="function"&&(d.flags|=4194308),M=!0}else if(h===null){O=d.stateNode;var rt=d.memoizedProps,At=Il(A,rt);O.props=At;var Ht=O.context,$t=A.contextType;K=eu,typeof $t=="object"&&$t!==null&&(K=Is($t));var fe=A.getDerivedStateFromProps;$t=typeof fe=="function"||typeof O.getSnapshotBeforeUpdate=="function",rt=d.pendingProps!==rt,$t||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(rt||Ht!==K)&&Yx(d,O,M,K),$l=!1;var ye=d.memoizedState;O.state=ye,Gn(d,M,O,L),He(),Ht=d.memoizedState,rt||ye!==Ht||$l?(typeof fe=="function"&&(pf(d,A,fe,M),Ht=d.memoizedState),(At=$l||mf(d,A,At,M,ye,Ht,K))?($t||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(d.flags|=4194308)):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=M,d.memoizedState=Ht),O.props=M,O.state=Ht,O.context=K,M=At):(typeof O.componentDidMount=="function"&&(d.flags|=4194308),M=!1)}else{O=d.stateNode,_e(h,d),K=d.memoizedProps,$t=Il(A,K),O.props=$t,fe=d.pendingProps,ye=O.context,Ht=A.contextType,At=eu,typeof Ht=="object"&&Ht!==null&&(At=Is(Ht)),rt=A.getDerivedStateFromProps,(Ht=typeof rt=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(K!==fe||ye!==At)&&Yx(d,O,M,At),$l=!1,ye=d.memoizedState,O.state=ye,Gn(d,M,O,L),He();var Ke=d.memoizedState;K!==fe||ye!==Ke||$l||h!==null&&h.dependencies!==null&&bp(h.dependencies)?(typeof rt=="function"&&(pf(d,A,rt,M),Ke=d.memoizedState),($t=$l||mf(d,A,$t,M,ye,Ke,At)||h!==null&&h.dependencies!==null&&bp(h.dependencies))?(Ht||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(M,Ke,At),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(M,Ke,At)),typeof O.componentDidUpdate=="function"&&(d.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof O.componentDidUpdate!="function"||K===h.memoizedProps&&ye===h.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||K===h.memoizedProps&&ye===h.memoizedState||(d.flags|=1024),d.memoizedProps=M,d.memoizedState=Ke),O.props=M,O.state=Ke,O.context=At,M=$t):(typeof O.componentDidUpdate!="function"||K===h.memoizedProps&&ye===h.memoizedState||(d.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||K===h.memoizedProps&&ye===h.memoizedState||(d.flags|=1024),M=!1)}return O=M,yp(h,d),M=(d.flags&128)!==0,O||M?(O=d.stateNode,A=M&&typeof A.getDerivedStateFromError!="function"?null:O.render(),d.flags|=1,h!==null&&M?(d.child=au(d,h.child,null,L),d.child=au(d,null,A,L)):Ns(h,d,A,L),d.memoizedState=O.state,h=d.child):h=Ul(h,d,L),h}function nb(h,d,A,M){return we(),d.flags|=256,Ns(h,d,A,M),d.child}function Uy(h){return{baseLanes:h,cachePool:Vy()}}function _p(h,d,A){return h=h!==null?h.childLanes&~A:0,d&&(h|=xa),h}function ib(h,d,A){var M=d.pendingProps,L=!1,O=(d.flags&128)!==0,K;if((K=O)||(K=h!==null&&h.memoizedState===null?!1:(fs.current&2)!==0),K&&(L=!0,d.flags&=-129),K=(d.flags&32)!==0,d.flags&=-33,h===null){if(Dn){if(L?Ir(d):oo(),Dn){var rt=Gs,At;(At=rt)&&(rt=zb(rt,Ss),rt!==null?(d.memoizedState={dehydrated:rt,treeContext:nu!==null?{id:yo,overflow:_o}:null,retryLane:536870912},At=e(18,null,null,0),At.stateNode=rt,At.return=d,d.child=At,zs=d,Gs=null,At=!0):At=!1),At||Wt(d)}if(rt=d.memoizedState,rt!==null&&(rt=rt.dehydrated,rt!==null))return V0(rt)?d.lanes=16:d.lanes=536870912,null;mr(d)}return rt=M.children,M=M.fallback,L?(oo(),L=d.mode,rt=Fy({mode:"hidden",children:rt},L),M=Ii(M,L,A,null),rt.return=d,M.return=d,rt.sibling=M,d.child=rt,L=d.child,L.memoizedState=Uy(A),L.childLanes=_p(h,K,A),d.memoizedState=i1,M):(Ir(d),Py(d,rt))}if(At=h.memoizedState,At!==null&&(rt=At.dehydrated,rt!==null)){if(O)d.flags&256?(Ir(d),d.flags&=-257,d=v0(h,d,A)):d.memoizedState!==null?(oo(),d.child=h.child,d.flags|=128,d=null):(oo(),L=M.fallback,rt=d.mode,M=Fy({mode:"visible",children:M.children},rt),L=Ii(L,rt,A,null),L.flags|=2,M.return=d,L.return=d,M.sibling=L,d.child=M,au(d,h.child,null,A),M=d.child,M.memoizedState=Uy(A),M.childLanes=_p(h,K,A),d.memoizedState=i1,d=L);else if(Ir(d),V0(rt))K=Ib(rt).digest,M=Error(s(419)),M.stack="",M.digest=K,se({value:M,source:null,stack:null}),d=v0(h,d,A);else if(li||xp(h,d,A,!1),K=(A&h.childLanes)!==0,li||K){if(K=qn,K!==null){if(M=A&-A,(M&42)!==0)M=1;else switch(M){case 2:M=1;break;case 8:M=4;break;case 32:M=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:M=64;break;case 268435456:M=134217728;break;default:M=0}if(M=(M&(K.suspendedLanes|A))!==0?0:M,M!==0&&M!==At.retryLane)throw At.retryLane=M,Vt(h,M),xs(K,h,M),n1}k0(rt)||Vl(),d=v0(h,d,A)}else k0(rt)?(d.flags|=128,d.child=h.child,d=Ql.bind(null,h),Ub(rt,d),d=null):(h=At.treeContext,Hs&&(Gs=Hb(rt),zs=d,Dn=!0,Qa=null,Ss=!1,h!==null&&(fa[da++]=yo,fa[da++]=_o,fa[da++]=nu,yo=h.id,_o=h.overflow,nu=d)),d=Py(d,M.children),d.flags|=4096);return d}return L?(oo(),L=M.fallback,rt=d.mode,At=h.child,O=At.sibling,M=Ha(At,{mode:"hidden",children:M.children}),M.subtreeFlags=At.subtreeFlags&31457280,O!==null?L=Ha(O,L):(L=Ii(L,rt,A,null),L.flags|=2),L.return=d,M.return=d,M.sibling=L,d.child=M,M=L,L=d.child,rt=h.child.memoizedState,rt===null?rt=Uy(A):(At=rt.cachePool,At!==null?(O=Ar?gi._currentValue:gi._currentValue2,At=At.parent!==O?{parent:O,pool:O}:At):At=Vy(),rt={baseLanes:rt.baseLanes|A,cachePool:At}),L.memoizedState=rt,L.childLanes=_p(h,K,A),d.memoizedState=i1,M):(Ir(d),A=h.child,h=A.sibling,A=Ha(A,{mode:"visible",children:M.children}),A.return=d,A.sibling=null,h!==null&&(K=d.deletions,K===null?(d.deletions=[h],d.flags|=16):K.push(h)),d.child=A,d.memoizedState=null,A)}function Py(h,d){return d=Fy({mode:"visible",children:d},h.mode),d.return=h,h.child=d}function Fy(h,d){return Up(h,d,0,null)}function v0(h,d,A){return au(d,h.child,null,A),h=Py(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function sb(h,d,A){h.lanes|=d;var M=h.alternate;M!==null&&(M.lanes|=d),Ap(h.return,d,A)}function Hy(h,d,A,M,L){var O=h.memoizedState;O===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:M,tail:A,tailMode:L}:(O.isBackwards=d,O.rendering=null,O.renderingStartTime=0,O.last=M,O.tail=A,O.tailMode=L)}function rb(h,d,A){var M=d.pendingProps,L=M.revealOrder,O=M.tail;if(Ns(h,d,M.children,A),M=fs.current,(M&2)!==0)M=M&1|2,d.flags|=128;else{if(h!==null&&(h.flags&128)!==0)t:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&sb(h,A,d);else if(h.tag===19)sb(h,A,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break t;for(;h.sibling===null;){if(h.return===null||h.return===d)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}M&=1}switch(R(fs,M),L){case"forwards":for(A=d.child,L=null;A!==null;)h=A.alternate,h!==null&&lo(h)===null&&(L=A),A=A.sibling;A=L,A===null?(L=d.child,d.child=null):(L=A.sibling,A.sibling=null),Hy(d,!1,L,A,O);break;case"backwards":for(A=null,L=d.child,d.child=null;L!==null;){if(h=L.alternate,h!==null&&lo(h)===null){d.child=L;break}h=L.sibling,L.sibling=A,A=L,L=h}Hy(d,!0,A,null,O);break;case"together":Hy(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Ul(h,d,A){if(h!==null&&(d.dependencies=h.dependencies),Aa|=d.lanes,(A&d.childLanes)===0)if(h!==null){if(xp(h,d,A,!1),(A&d.childLanes)===0)return null}else return null;if(h!==null&&d.child!==h.child)throw Error(s(153));if(d.child!==null){for(h=d.child,A=Ha(h,h.pendingProps),d.child=A,A.return=d;h.sibling!==null;)h=h.sibling,A=A.sibling=Ha(h,h.pendingProps),A.return=d;A.sibling=null}return d.child}function zy(h,d){return(h.lanes&d)!==0?!0:(h=h.dependencies,!!(h!==null&&bp(h)))}function jM(h,d,A){switch(d.tag){case 3:lt(d,d.stateNode.containerInfo),Pc(d,gi,h.memoizedState.cache),we();break;case 27:case 5:Bt(d);break;case 4:lt(d,d.stateNode.containerInfo);break;case 10:Pc(d,d.type,d.memoizedProps.value);break;case 13:var M=d.memoizedState;if(M!==null)return M.dehydrated!==null?(Ir(d),d.flags|=128,null):(A&d.child.childLanes)!==0?ib(h,d,A):(Ir(d),h=Ul(h,d,A),h!==null?h.sibling:null);Ir(d);break;case 19:var L=(h.flags&128)!==0;if(M=(A&d.childLanes)!==0,M||(xp(h,d,A,!1),M=(A&d.childLanes)!==0),L){if(M)return rb(h,d,A);d.flags|=128}if(L=d.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),R(fs,fs.current),M)break;return null;case 22:case 23:return d.lanes=0,Zx(h,d,A);case 24:Pc(d,gi,h.memoizedState.cache)}return Ul(h,d,A)}function ab(h,d,A){if(h!==null)if(h.memoizedProps!==d.pendingProps)li=!0;else{if(!zy(h,A)&&(d.flags&128)===0)return li=!1,jM(h,d,A);li=(h.flags&131072)!==0}else li=!1,Dn&&(d.flags&1048576)!==0&&at(d,Hf,d.index);switch(d.lanes=0,d.tag){case 16:t:{h=d.pendingProps;var M=d.elementType,L=M._init;if(M=L(M._payload),d.type=M,typeof M=="function")Np(M)?(h=Il(M,h),d.tag=1,d=eb(null,d,M,h,A)):(d.tag=0,d=g0(null,d,M,h,A));else{if(M!=null){if(L=M.$$typeof,L===Gp){d.tag=11,d=m0(null,d,M,h,A);break t}else if(L===U0){d.tag=14,d=Kx(null,d,M,h,A);break t}}throw d=a(M)||M,Error(s(306,d,""))}}return d;case 0:return g0(h,d,d.type,d.pendingProps,A);case 1:return M=d.type,L=Il(M,d.pendingProps),eb(h,d,M,L,A);case 3:t:{if(lt(d,d.stateNode.containerInfo),h===null)throw Error(s(387));var O=d.pendingProps;L=d.memoizedState,M=L.element,_e(h,d),Gn(d,O,null,A);var K=d.memoizedState;if(O=K.cache,Pc(d,gi,O),O!==L.cache&&Gu(d,[gi],A,!0),He(),O=K.element,Hs&&L.isDehydrated)if(L={element:O,isDehydrated:!1,cache:K.cache},d.updateQueue.baseState=L,d.memoizedState=L,d.flags&256){d=nb(h,d,O,A);break t}else if(O!==M){M=_t(Error(s(424)),d),se(M),d=nb(h,d,O,A);break t}else for(Hs&&(Gs=Fb(d.stateNode.containerInfo),zs=d,Dn=!0,Qa=null,Ss=!0),A=al(d,null,O,A),d.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(we(),O===M){d=Ul(h,d,A);break t}Ns(h,d,O,A)}d=d.child}return d;case 26:if(ha)return yp(h,d),h===null?(A=T2(d.type,null,d.pendingProps,null))?d.memoizedState=A:Dn||(d.stateNode=Y0(d.type,d.pendingProps,sl.current,d)):d.memoizedState=T2(d.type,h.memoizedProps,d.pendingProps,h.memoizedState),null;case 27:if(ai)return Bt(d),h===null&&ai&&Dn&&(M=d.stateNode=vo(d.type,d.pendingProps,sl.current,hs.current,!1),zs=d,Ss=!0,Gs=Q0(M)),M=d.pendingProps.children,h!==null||Dn?Ns(h,d,M,A):d.child=au(d,null,M,A),yp(h,d),d.child;case 5:return h===null&&Dn&&(j0(d.type,d.pendingProps,hs.current),(L=M=Gs)&&(M=$M(M,d.type,d.pendingProps,Ss),M!==null?(d.stateNode=M,zs=d,Gs=Q0(M),Ss=!1,L=!0):L=!1),L||Wt(d)),Bt(d),L=d.type,O=d.pendingProps,K=h!==null?h.memoizedProps:null,M=O.children,en(L,O)?M=null:K!==null&&en(L,K)&&(d.flags|=32),d.memoizedState!==null&&(L=uo(h,d,Zi,null,null,A),Ar?go._currentValue=L:go._currentValue2=L),yp(h,d),Ns(h,d,M,A),d.child;case 6:return h===null&&Dn&&(Xb(d.pendingProps,hs.current),(h=A=Gs)&&(A=E2(A,d.pendingProps,Ss),A!==null?(d.stateNode=A,zs=d,Gs=null,h=!0):h=!1),h||Wt(d)),null;case 13:return ib(h,d,A);case 4:return lt(d,d.stateNode.containerInfo),M=d.pendingProps,h===null?d.child=au(d,null,M,A):Ns(h,d,M,A),d.child;case 11:return m0(h,d,d.type,d.pendingProps,A);case 7:return Ns(h,d,d.pendingProps,A),d.child;case 8:return Ns(h,d,d.pendingProps.children,A),d.child;case 12:return Ns(h,d,d.pendingProps.children,A),d.child;case 10:return M=d.pendingProps,Pc(d,d.type,M.value),Ns(h,d,M.children,A),d.child;case 9:return L=d.type._context,M=d.pendingProps.children,Fc(d),L=Is(L),M=M(L),d.flags|=1,Ns(h,d,M,A),d.child;case 14:return Kx(h,d,d.type,d.pendingProps,A);case 15:return Jx(h,d,d.type,d.pendingProps,A);case 19:return rb(h,d,A);case 22:return Zx(h,d,A);case 24:return Fc(d),M=Is(gi),h===null?(L=ky(),L===null&&(L=qn,O=Hc(),L.pooledCache=O,O.refCount++,O!==null&&(L.pooledCacheLanes|=A),L=O),d.memoizedState={parent:M,cache:L},Jt(d),Pc(d,gi,L)):((h.lanes&A)!==0&&(_e(h,d),Gn(d,null,null,A),He()),L=h.memoizedState,O=d.memoizedState,L.parent!==M?(L={parent:M,cache:M},d.memoizedState=L,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=L),Pc(d,gi,M)):(M=O.cache,Pc(d,gi,M),M!==L.cache&&Gu(d,[gi],A,!0))),Ns(h,d,d.pendingProps.children,A),d.child;case 29:throw d.pendingProps}throw Error(s(156,d.tag))}function Pc(h,d,A){Ar?(R(ec,d._currentValue),d._currentValue=A):(R(ec,d._currentValue2),d._currentValue2=A)}function Pl(h){var d=ec.current;Ar?h._currentValue=d:h._currentValue2=d,S(ec)}function Ap(h,d,A){for(;h!==null;){var M=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,M!==null&&(M.childLanes|=d)):M!==null&&(M.childLanes&d)!==d&&(M.childLanes|=d),h===A)break;h=h.return}}function Gu(h,d,A,M){var L=h.child;for(L!==null&&(L.return=h);L!==null;){var O=L.dependencies;if(O!==null){var K=L.child;O=O.firstContext;t:for(;O!==null;){var rt=O;O=L;for(var At=0;At<d.length;At++)if(rt.context===d[At]){O.lanes|=A,rt=O.alternate,rt!==null&&(rt.lanes|=A),Ap(O.return,A,h),M||(K=null);break t}O=rt.next}}else if(L.tag===18){if(K=L.return,K===null)throw Error(s(341));K.lanes|=A,O=K.alternate,O!==null&&(O.lanes|=A),Ap(K,A,h),K=null}else K=L.child;if(K!==null)K.return=L;else for(K=L;K!==null;){if(K===h){K=null;break}if(L=K.sibling,L!==null){L.return=K.return,K=L;break}K=K.return}L=K}}function xp(h,d,A,M){h=null;for(var L=d,O=!1;L!==null;){if(!O){if((L.flags&524288)!==0)O=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var K=L.alternate;if(K===null)throw Error(s(387));if(K=K.memoizedProps,K!==null){var rt=L.type;Vr(L.pendingProps.value,K.value)||(h!==null?h.push(rt):h=[rt])}}else if(L===Ju.current){if(K=L.alternate,K===null)throw Error(s(387));K.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(h!==null?h.push(go):h=[go])}L=L.return}h!==null&&Gu(d,h,A,M),d.flags|=262144}function bp(h){for(h=h.firstContext;h!==null;){var d=h.context;if(!Vr(Ar?d._currentValue:d._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function Fc(h){bo=h,va=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Is(h){return Gy(bo,h)}function Sp(h,d){return bo===null&&Fc(h),Gy(h,d)}function Gy(h,d){var A=Ar?d._currentValue:d._currentValue2;if(d={context:d,memoizedValue:A,next:null},va===null){if(h===null)throw Error(s(308));va=d,h.dependencies={lanes:0,firstContext:d},h.flags|=524288}else va=va.next=d;return A}function Hc(){return{controller:new Xf,data:new Map,refCount:0}}function Ep(h){h.refCount--,h.refCount===0&&nS(iS,function(){h.controller.abort()})}function ky(){var h=ll.current;return h!==null?h:qn.pooledCache}function y0(h,d){d===null?R(ll,ll.current):R(ll,d.pool)}function Vy(){var h=ky();return h===null?null:{parent:Ar?gi._currentValue:gi._currentValue2,pool:h}}function Ur(h){h.flags|=4}function _f(h,d){if(h!==null&&h.child===d.child)return!1;if((d.flags&16)!==0)return!0;for(h=d.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function ku(h,d,A,M){if(us)for(A=d.child;A!==null;){if(A.tag===5||A.tag===6)Vp(h,A.stateNode);else if(!(A.tag===4||ai&&A.tag===27)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===d)break;for(;A.sibling===null;){if(A.return===null||A.return===d)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else if(ka)for(var L=d.child;L!==null;){if(L.tag===5){var O=L.stateNode;A&&M&&(O=A2(O,L.type,L.memoizedProps)),Vp(h,O)}else if(L.tag===6)O=L.stateNode,A&&M&&(O=x2(O,L.memoizedProps)),Vp(h,O);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)O=L.child,O!==null&&(O.return=L),ku(h,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===d)break;for(;L.sibling===null;){if(L.return===null||L.return===d)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function ob(h,d,A,M){if(ka)for(var L=d.child;L!==null;){if(L.tag===5){var O=L.stateNode;A&&M&&(O=A2(O,L.type,L.memoizedProps)),_2(h,O)}else if(L.tag===6)O=L.stateNode,A&&M&&(O=x2(O,L.memoizedProps)),_2(h,O);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)O=L.child,O!==null&&(O.return=L),ob(h,L,!(L.memoizedProps!==null&&L.memoizedProps.mode==="manual"),!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===d)break;for(;L.sibling===null;){if(L.return===null||L.return===d)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function Mp(h,d){if(ka&&_f(h,d)){h=d.stateNode;var A=h.containerInfo,M=Qp();ob(M,d,!1,!1),h.pendingChildren=M,Ur(d),G0(A,M)}}function _0(h,d,A,M){if(us)h.memoizedProps!==M&&Ur(d);else if(ka){var L=h.stateNode,O=h.memoizedProps;if((h=_f(h,d))||O!==M){var K=hs.current;O=Uf(L,A,O,M,!h,null),O===L?d.stateNode=L:(Yl(O,A,M,K)&&Ur(d),d.stateNode=O,h?ku(O,d,!1,!1):Ur(d))}else d.stateNode=L}}function A0(h,d,A){if(h2(d,A)){if(h.flags|=16777216,!H0(d,A))if(Xc())h.flags|=8192;else throw iu=$p,Zp}else h.flags&=-16777217}function x0(h,d){if(Yb(d)){if(h.flags|=16777216,!ju(d))if(Xc())h.flags|=8192;else throw iu=$p,Zp}else h.flags&=-16777217}function Af(h,d){d!==null&&(h.flags|=4),h.flags&16384&&(d=h.tag!==22?U():536870912,h.lanes|=d,hl|=d)}function xf(h,d){if(!Dn)switch(h.tailMode){case"hidden":d=h.tail;for(var A=null;d!==null;)d.alternate!==null&&(A=d),d=d.sibling;A===null?h.tail=null:A.sibling=null;break;case"collapsed":A=h.tail;for(var M=null;A!==null;)A.alternate!==null&&(M=A),A=A.sibling;M===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:M.sibling=null}}function Ti(h){var d=h.alternate!==null&&h.alternate.child===h.child,A=0,M=0;if(d)for(var L=h.child;L!==null;)A|=L.lanes|L.childLanes,M|=L.subtreeFlags&31457280,M|=L.flags&31457280,L.return=h,L=L.sibling;else for(L=h.child;L!==null;)A|=L.lanes|L.childLanes,M|=L.subtreeFlags,M|=L.flags,L.return=h,L=L.sibling;return h.subtreeFlags|=M,h.childLanes=A,d}function lb(h,d,A){var M=d.pendingProps;switch(Et(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(d),null;case 1:return Ti(d),null;case 3:return A=d.stateNode,M=null,h!==null&&(M=h.memoizedState.cache),d.memoizedState.cache!==M&&(d.flags|=2048),Pl(gi),wt(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(h===null||h.child===null)&&(Ye(d)?Ur(d):h===null||h.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Qa!==null&&(Bp(Qa),Qa=null))),Mp(h,d),Ti(d),null;case 26:if(ha){A=d.type;var L=d.memoizedState;return h===null?(Ur(d),L!==null?(Ti(d),x0(d,L)):(Ti(d),A0(d,A,M))):L?L!==h.memoizedState?(Ur(d),Ti(d),x0(d,L)):(Ti(d),d.flags&=-16777217):(us?h.memoizedProps!==M&&Ur(d):_0(h,d,A,M),Ti(d),A0(d,A,M)),null}case 27:if(ai){if(Ut(d),A=sl.current,L=d.type,h!==null&&d.stateNode!=null)us?h.memoizedProps!==M&&Ur(d):_0(h,d,L,M);else{if(!M){if(d.stateNode===null)throw Error(s(166));return Ti(d),null}h=hs.current,Ye(d)?ve(d,h):(h=vo(L,M,A,h,!0),d.stateNode=h,Ur(d))}return Ti(d),null}case 5:if(Ut(d),A=d.type,h!==null&&d.stateNode!=null)_0(h,d,A,M);else{if(!M){if(d.stateNode===null)throw Error(s(166));return Ti(d),null}h=hs.current,Ye(d)?ve(d,h):(L=u2(A,M,sl.current,h,d),ku(L,d,!1,!1),d.stateNode=L,Yl(L,A,M,h)&&Ur(d))}return Ti(d),A0(d,d.type,d.pendingProps),null;case 6:if(h&&d.stateNode!=null)A=h.memoizedProps,us?A!==M&&Ur(d):ka&&(A!==M?(d.stateNode=Zn(M,sl.current,hs.current,d),Ur(d)):d.stateNode=h.stateNode);else{if(typeof M!="string"&&d.stateNode===null)throw Error(s(166));if(h=sl.current,A=hs.current,Ye(d)){if(!Hs)throw Error(s(176));if(h=d.stateNode,A=d.memoizedProps,M=null,L=zs,L!==null)switch(L.tag){case 27:case 5:M=L.memoizedProps}M2(h,A,d,M)||Wt(d)}else d.stateNode=Zn(M,h,A,d)}return Ti(d),null;case 13:if(M=d.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(L=Ye(d),M!==null&&M.dehydrated!==null){if(h===null){if(!L)throw Error(s(318));if(!Hs)throw Error(s(344));if(L=d.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(s(317));kb(L,d)}else we(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ti(d),L=!1}else Qa!==null&&(Bp(Qa),Qa=null),L=!0;if(!L)return d.flags&256?(mr(d),d):(mr(d),null)}if(mr(d),(d.flags&128)!==0)return d.lanes=A,d;if(A=M!==null,h=h!==null&&h.memoizedState!==null,A){M=d.child,L=null,M.alternate!==null&&M.alternate.memoizedState!==null&&M.alternate.memoizedState.cachePool!==null&&(L=M.alternate.memoizedState.cachePool.pool);var O=null;M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(O=M.memoizedState.cachePool.pool),O!==L&&(M.flags|=2048)}return A!==h&&A&&(d.child.flags|=8192),Af(d,d.updateQueue),Ti(d),null;case 4:return wt(),Mp(h,d),h===null&&ki(d.stateNode.containerInfo),Ti(d),null;case 10:return Pl(d.type),Ti(d),null;case 19:if(S(fs),L=d.memoizedState,L===null)return Ti(d),null;if(M=(d.flags&128)!==0,O=L.rendering,O===null)if(M)xf(L,!1);else{if(ci!==0||h!==null&&(h.flags&128)!==0)for(h=d.child;h!==null;){if(O=lo(h),O!==null){for(d.flags|=128,xf(L,!1),h=O.updateQueue,d.updateQueue=h,Af(d,h),d.subtreeFlags=0,h=A,A=d.child;A!==null;)Ip(A,h),A=A.sibling;return R(fs,fs.current&1|2),d.child}h=h.sibling}L.tail!==null&&Va()>Yf&&(d.flags|=128,M=!0,xf(L,!1),d.lanes=4194304)}else{if(!M)if(h=lo(O),h!==null){if(d.flags|=128,M=!0,h=h.updateQueue,d.updateQueue=h,Af(d,h),xf(L,!0),L.tail===null&&L.tailMode==="hidden"&&!O.alternate&&!Dn)return Ti(d),null}else 2*Va()-L.renderingStartTime>Yf&&A!==536870912&&(d.flags|=128,M=!0,xf(L,!1),d.lanes=4194304);L.isBackwards?(O.sibling=d.child,d.child=O):(h=L.last,h!==null?h.sibling=O:d.child=O,L.last=O)}return L.tail!==null?(d=L.tail,L.rendering=d,L.tail=d.sibling,L.renderingStartTime=Va(),d.sibling=null,h=fs.current,R(fs,M?h&1|2:h&1),d):(Ti(d),null);case 22:case 23:return mr(d),$s(),M=d.memoizedState!==null,h!==null?h.memoizedState!==null!==M&&(d.flags|=8192):M&&(d.flags|=8192),M?(A&536870912)!==0&&(d.flags&128)===0&&(Ti(d),d.subtreeFlags&6&&(d.flags|=8192)):Ti(d),A=d.updateQueue,A!==null&&Af(d,A.retryQueue),A=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(A=h.memoizedState.cachePool.pool),M=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(M=d.memoizedState.cachePool.pool),M!==A&&(d.flags|=2048),h!==null&&S(ll),null;case 24:return A=null,h!==null&&(A=h.memoizedState.cache),d.memoizedState.cache!==A&&(d.flags|=2048),Pl(gi),Ti(d),null;case 25:return null}throw Error(s(156,d.tag))}function qM(h,d){switch(Et(d),d.tag){case 1:return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return Pl(gi),wt(),h=d.flags,(h&65536)!==0&&(h&128)===0?(d.flags=h&-65537|128,d):null;case 26:case 27:case 5:return Ut(d),null;case 13:if(mr(d),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(s(340));we()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return S(fs),null;case 4:return wt(),null;case 10:return Pl(d.type),null;case 22:case 23:return mr(d),$s(),h!==null&&S(ll),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 24:return Pl(gi),null;case 25:return null;default:return null}}function cb(h,d){switch(Et(d),d.tag){case 3:Pl(gi),wt();break;case 26:case 27:case 5:Ut(d);break;case 4:wt();break;case 13:mr(d);break;case 19:S(fs);break;case 10:Pl(d.type);break;case 22:case 23:mr(d),$s(),h!==null&&S(ll);break;case 24:Pl(gi)}}function Tp(h,d){try{var A=d.updateQueue,M=A!==null?A.lastEffect:null;if(M!==null){var L=M.next;A=L;do{if((A.tag&h)===h){M=void 0;var O=A.create,K=A.inst;M=O(),K.destroy=M}A=A.next}while(A!==L)}}catch(rt){Xn(d,d.return,rt)}}function zc(h,d,A){try{var M=d.updateQueue,L=M!==null?M.lastEffect:null;if(L!==null){var O=L.next;M=O;do{if((M.tag&h)===h){var K=M.inst,rt=K.destroy;if(rt!==void 0){K.destroy=void 0,L=d;var At=A;try{rt()}catch(Ht){Xn(L,At,Ht)}}}M=M.next}while(M!==O)}}catch(Ht){Xn(d,d.return,Ht)}}function ub(h){var d=h.updateQueue;if(d!==null){var A=h.stateNode;try{ce(d,A)}catch(M){Xn(h,h.return,M)}}}function Pr(h,d,A){A.props=Il(h.type,h.memoizedProps),A.state=h.memoizedState;try{A.componentWillUnmount()}catch(M){Xn(h,d,M)}}function fo(h,d){try{var A=h.ref;if(A!==null){var M=h.stateNode;switch(h.tag){case 26:case 27:case 5:var L=Of(M);break;default:L=M}typeof A=="function"?h.refCleanup=A(L):A.current=L}}catch(O){Xn(h,d,O)}}function Fr(h,d){var A=h.ref,M=h.refCleanup;if(A!==null)if(typeof M=="function")try{M()}catch(L){Xn(h,d,L)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof A=="function")try{A(null)}catch(L){Xn(h,d,L)}else A.current=null}function Qy(h){var d=h.type,A=h.memoizedProps,M=h.stateNode;try{JM(M,d,A,h)}catch(L){Xn(h,h.return,L)}}function Xy(h,d,A){try{Cb(h.stateNode,h.type,A,d,h)}catch(M){Xn(h,h.return,M)}}function jy(h){return h.tag===5||h.tag===3||(ha?h.tag===26:!1)||(ai?h.tag===27:!1)||h.tag===4}function Cp(h){t:for(;;){for(;h.sibling===null;){if(h.return===null||jy(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&(!ai||h.tag!==27)&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue t;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function qy(h,d,A){var M=h.tag;if(M===5||M===6)h=h.stateNode,d?Rb(A,h,d):g2(A,h);else if(!(M===4||ai&&M===27)&&(h=h.child,h!==null))for(qy(h,d,A),h=h.sibling;h!==null;)qy(h,d,A),h=h.sibling}function Fl(h,d,A){var M=h.tag;if(M===5||M===6)h=h.stateNode,d?wb(A,h,d):Mb(A,h);else if(!(M===4||ai&&M===27)&&(h=h.child,h!==null))for(Fl(h,d,A),h=h.sibling;h!==null;)Fl(h,d,A),h=h.sibling}function b0(h,d,A){h=h.containerInfo;try{Pf(h,A)}catch(M){Xn(d,d.return,M)}}function wp(h,d){for(P0(h.containerInfo),We=d;We!==null;)if(h=We,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,We=d;else for(;We!==null;){h=We;var A=h.alternate;switch(d=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&A!==null){d=void 0;var M=h,L=A.memoizedProps;A=A.memoizedState;var O=M.stateNode;try{var K=Il(M.type,L,M.elementType===M.type);d=O.getSnapshotBeforeUpdate(K,A),O.__reactInternalSnapshotBeforeUpdate=d}catch(rt){Xn(M,M.return,rt)}}break;case 3:(d&1024)!==0&&us&&Nb(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(s(163))}if(d=h.sibling,d!==null){d.return=h.return,We=d;break}We=h.return}return K=mn,mn=!1,K}function S0(h,d,A){var M=A.flags;switch(A.tag){case 0:case 11:case 15:zl(h,A),M&4&&Tp(5,A);break;case 1:if(zl(h,A),M&4)if(h=A.stateNode,d===null)try{h.componentDidMount()}catch(rt){Xn(A,A.return,rt)}else{var L=Il(A.type,d.memoizedProps);d=d.memoizedState;try{h.componentDidUpdate(L,d,h.__reactInternalSnapshotBeforeUpdate)}catch(rt){Xn(A,A.return,rt)}}M&64&&ub(A),M&512&&fo(A,A.return);break;case 3:if(zl(h,A),M&64&&(M=A.updateQueue,M!==null)){if(h=null,A.child!==null)switch(A.child.tag){case 27:case 5:h=Of(A.child.stateNode);break;case 1:h=A.child.stateNode}try{ce(M,h)}catch(rt){Xn(A,A.return,rt)}}break;case 26:if(ha){zl(h,A),M&512&&fo(A,A.return);break}case 27:case 5:zl(h,A),d===null&&M&4&&Qy(A),M&512&&fo(A,A.return);break;case 12:zl(h,A);break;case 13:zl(h,A),M&4&&E0(h,A);break;case 22:if(L=A.memoizedState!==null||cl,!L){d=d!==null&&d.memoizedState!==null||Pi;var O=cl,K=Pi;cl=L,(Pi=d)&&!K?Gl(h,A,(A.subtreeFlags&8772)!==0):zl(h,A),cl=O,Pi=K}M&512&&(A.memoizedProps.mode==="manual"?fo(A,A.return):Fr(A,A.return));break;default:zl(h,A)}}function Yy(h){var d=h.alternate;d!==null&&(h.alternate=null,Yy(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&KM(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Us(h,d,A){for(A=A.child;A!==null;)Gc(h,d,A),A=A.sibling}function Gc(h,d,A){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(Qi,A)}catch{}switch(A.tag){case 26:if(ha){Pi||Fr(A,d),Us(h,d,A),A.memoizedState?Xu(A.memoizedState):A.stateNode&&Ff(A.stateNode);break}case 27:if(ai){Pi||Fr(A,d);var M=Ie,L=an;Ie=A.stateNode,Us(h,d,A),tu(A.stateNode),Ie=M,an=L;break}case 5:Pi||Fr(A,d);case 6:if(us){if(M=Ie,L=an,Ie=null,Us(h,d,A),Ie=M,an=L,Ie!==null)if(an)try{Lb(Ie,A.stateNode)}catch(O){Xn(A,d,O)}else try{v2(Ie,A.stateNode)}catch(O){Xn(A,d,O)}}else Us(h,d,A);break;case 18:us&&Ie!==null&&(an?Xp(Ie,A.stateNode):Qb(Ie,A.stateNode));break;case 4:us?(M=Ie,L=an,Ie=A.stateNode.containerInfo,an=!0,Us(h,d,A),Ie=M,an=L):(ka&&b0(A.stateNode,A,Qp()),Us(h,d,A));break;case 0:case 11:case 14:case 15:Pi||zc(2,A,d),Pi||zc(4,A,d),Us(h,d,A);break;case 1:Pi||(Fr(A,d),M=A.stateNode,typeof M.componentWillUnmount=="function"&&Pr(A,d,M)),Us(h,d,A);break;case 21:Us(h,d,A);break;case 22:Pi||Fr(A,d),Pi=(M=Pi)||A.memoizedState!==null,Us(h,d,A),Pi=M;break;default:Us(h,d,A)}}function E0(h,d){if(Hs&&d.memoizedState===null&&(h=d.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{eT(h)}catch(A){Xn(d,d.return,A)}}function hb(h){switch(h.tag){case 13:case 19:var d=h.stateNode;return d===null&&(d=h.stateNode=new jn),d;case 22:return h=h.stateNode,d=h._retryCache,d===null&&(d=h._retryCache=new jn),d;default:throw Error(s(435,h.tag))}}function Hl(h,d){var A=hb(h);d.forEach(function(M){var L=Yc.bind(null,h,M);A.has(M)||(A.add(M),M.then(L,L))})}function yr(h,d){var A=d.deletions;if(A!==null)for(var M=0;M<A.length;M++){var L=A[M],O=h,K=d;if(us){var rt=K;t:for(;rt!==null;){switch(rt.tag){case 27:case 5:Ie=rt.stateNode,an=!1;break t;case 3:Ie=rt.stateNode.containerInfo,an=!0;break t;case 4:Ie=rt.stateNode.containerInfo,an=!0;break t}rt=rt.return}if(Ie===null)throw Error(s(160));Gc(O,K,L),Ie=null,an=!1}else Gc(O,K,L);O=L.alternate,O!==null&&(O.return=null),L.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)Wy(d,h),d=d.sibling}function Wy(h,d){var A=h.alternate,M=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:yr(d,h),Hr(h),M&4&&(zc(3,h,h.return),Tp(3,h),zc(5,h,h.return));break;case 1:yr(d,h),Hr(h),M&512&&(Pi||A===null||Fr(A,A.return)),M&64&&cl&&(h=h.updateQueue,h!==null&&(M=h.callbacks,M!==null&&(A=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=A===null?M:A.concat(M))));break;case 26:if(ha){var L=Di;yr(d,h),Hr(h),M&512&&(Pi||A===null||Fr(A,A.return)),M&4&&(M=A!==null?A.memoizedState:null,d=h.memoizedState,A===null?d===null?h.stateNode===null?h.stateNode=qp(L,h.type,h.memoizedProps,h):Yp(L,h.type,h.stateNode):h.stateNode=jb(L,d,h.memoizedProps):M!==d?(M===null?A.stateNode!==null&&Ff(A.stateNode):Xu(M),d===null?Yp(L,h.type,h.stateNode):jb(L,d,h.memoizedProps)):d===null&&h.stateNode!==null&&Xy(h,h.memoizedProps,A.memoizedProps));break}case 27:if(ai&&M&4&&h.alternate===null){L=h.stateNode;var O=h.memoizedProps;try{$c(L),Kb(h.type,O,L,h)}catch($t){Xn(h,h.return,$t)}}case 5:if(yr(d,h),Hr(h),M&512&&(Pi||A===null||Fr(A,A.return)),us){if(h.flags&32){d=h.stateNode;try{y2(d)}catch($t){Xn(h,h.return,$t)}}M&4&&h.stateNode!=null&&(d=h.memoizedProps,Xy(h,d,A!==null?A.memoizedProps:d)),M&1024&&(L2=!0)}break;case 6:if(yr(d,h),Hr(h),M&4&&us){if(h.stateNode===null)throw Error(s(162));M=h.memoizedProps,A=A!==null?A.memoizedProps:M,d=h.stateNode;try{Tb(d,A,M)}catch($t){Xn(h,h.return,$t)}}break;case 3:if(ha?(qb(),L=Di,Di=q0(d.containerInfo),yr(d,h),Di=L):yr(d,h),Hr(h),M&4){if(us&&Hs&&A!==null&&A.memoizedState.isDehydrated)try{tT(d.containerInfo)}catch($t){Xn(h,h.return,$t)}if(ka){M=d.containerInfo,A=d.pendingChildren;try{Pf(M,A)}catch($t){Xn(h,h.return,$t)}}}L2&&(L2=!1,fb(h));break;case 4:ha?(A=Di,Di=q0(h.stateNode.containerInfo),yr(d,h),Hr(h),Di=A):(yr(d,h),Hr(h)),M&4&&ka&&b0(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:yr(d,h),Hr(h);break;case 13:yr(d,h),Hr(h),h.child.flags&8192&&h.memoizedState!==null!=(A!==null&&A.memoizedState!==null)&&(Er=Va()),M&4&&(M=h.updateQueue,M!==null&&(h.updateQueue=null,Hl(h,M)));break;case 22:M&512&&(Pi||A===null||Fr(A,A.return)),L=h.memoizedState!==null;var K=A!==null&&A.memoizedState!==null,rt=cl,At=Pi;if(cl=rt||L,Pi=At||K,yr(d,h),Pi=At,cl=rt,Hr(h),d=h.stateNode,d._current=h,d._visibility&=-3,d._visibility|=d._pendingVisibility&2,M&8192&&(d._visibility=L?d._visibility&-2:d._visibility|1,L&&(d=cl||Pi,A===null||K||d||bf(h)),us&&(h.memoizedProps===null||h.memoizedProps.mode!=="manual"))){t:if(A=null,us)for(d=h;;){if(d.tag===5||ha&&d.tag===26||ai&&d.tag===27){if(A===null){K=A=d;try{O=K.stateNode,L?Db(O):Ob(K.stateNode,K.memoizedProps)}catch($t){Xn(K,K.return,$t)}}}else if(d.tag===6){if(A===null){K=d;try{var Ht=K.stateNode;L?Bb(Ht):ZM(Ht,K.memoizedProps)}catch($t){Xn(K,K.return,$t)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===h)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break t;for(;d.sibling===null;){if(d.return===null||d.return===h)break t;A===d&&(A=null),d=d.return}A===d&&(A=null),d.sibling.return=d.return,d=d.sibling}}M&4&&(M=h.updateQueue,M!==null&&(A=M.retryQueue,A!==null&&(M.retryQueue=null,Hl(h,A))));break;case 19:yr(d,h),Hr(h),M&4&&(M=h.updateQueue,M!==null&&(h.updateQueue=null,Hl(h,M)));break;case 21:break;default:yr(d,h),Hr(h)}}function Hr(h){var d=h.flags;if(d&2){try{if(us&&(!ai||h.tag!==27)){t:{for(var A=h.return;A!==null;){if(jy(A)){var M=A;break t}A=A.return}throw Error(s(160))}switch(M.tag){case 27:if(ai){var L=M.stateNode,O=Cp(h);Fl(h,O,L);break}case 5:var K=M.stateNode;M.flags&32&&(y2(K),M.flags&=-33);var rt=Cp(h);Fl(h,rt,K);break;case 3:case 4:var At=M.stateNode.containerInfo,Ht=Cp(h);qy(h,Ht,At);break;default:throw Error(s(161))}}}catch($t){Xn(h,h.return,$t)}h.flags&=-3}d&4096&&(h.flags&=-4097)}function fb(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var d=h;fb(d),d.tag===5&&d.flags&1024&&z0(d.stateNode),h=h.sibling}}function zl(h,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)S0(h,d.alternate,d),d=d.sibling}function bf(h){for(h=h.child;h!==null;){var d=h;switch(d.tag){case 0:case 11:case 14:case 15:zc(4,d,d.return),bf(d);break;case 1:Fr(d,d.return);var A=d.stateNode;typeof A.componentWillUnmount=="function"&&Pr(d,d.return,A),bf(d);break;case 26:case 27:case 5:Fr(d,d.return),bf(d);break;case 22:Fr(d,d.return),d.memoizedState===null&&bf(d);break;default:bf(d)}h=h.sibling}}function Gl(h,d,A){for(A=A&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var M=d.alternate,L=h,O=d,K=O.flags;switch(O.tag){case 0:case 11:case 15:Gl(L,O,A),Tp(4,O);break;case 1:if(Gl(L,O,A),M=O,L=M.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(Ht){Xn(M,M.return,Ht)}if(M=O,L=M.updateQueue,L!==null){var rt=M.stateNode;try{var At=L.shared.hiddenCallbacks;if(At!==null)for(L.shared.hiddenCallbacks=null,L=0;L<At.length;L++)mt(At[L],rt)}catch(Ht){Xn(M,M.return,Ht)}}A&&K&64&&ub(O),fo(O,O.return);break;case 26:case 27:case 5:Gl(L,O,A),A&&M===null&&K&4&&Qy(O),fo(O,O.return);break;case 12:Gl(L,O,A);break;case 13:Gl(L,O,A),A&&K&4&&E0(L,O);break;case 22:O.memoizedState===null&&Gl(L,O,A),fo(O,O.return);break;default:Gl(L,O,A)}d=d.sibling}}function M0(h,d){var A=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(A=h.memoizedState.cachePool.pool),h=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(h=d.memoizedState.cachePool.pool),h!==A&&(h!=null&&h.refCount++,A!=null&&Ep(A))}function Rp(h,d){h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Ep(h))}function As(h,d,A,M){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Ky(h,d,A,M),d=d.sibling}function Ky(h,d,A,M){var L=d.flags;switch(d.tag){case 0:case 11:case 15:As(h,d,A,M),L&2048&&Tp(9,d);break;case 3:As(h,d,A,M),L&2048&&(h=null,d.alternate!==null&&(h=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==h&&(d.refCount++,h!=null&&Ep(h)));break;case 12:if(L&2048){As(h,d,A,M),h=d.stateNode;try{var O=d.memoizedProps,K=O.id,rt=O.onPostCommit;typeof rt=="function"&&rt(K,d.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(At){Xn(d,d.return,At)}}else As(h,d,A,M);break;case 23:break;case 22:O=d.stateNode,d.memoizedState!==null?O._visibility&4?As(h,d,A,M):tr(h,d):O._visibility&4?As(h,d,A,M):(O._visibility|=4,Ps(h,d,A,M,(d.subtreeFlags&10256)!==0)),L&2048&&M0(d.alternate,d);break;case 24:As(h,d,A,M),L&2048&&Rp(d.alternate,d);break;default:As(h,d,A,M)}}function Ps(h,d,A,M,L){for(L=L&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var O=h,K=d,rt=A,At=M,Ht=K.flags;switch(K.tag){case 0:case 11:case 15:Ps(O,K,rt,At,L),Tp(8,K);break;case 23:break;case 22:var $t=K.stateNode;K.memoizedState!==null?$t._visibility&4?Ps(O,K,rt,At,L):tr(O,K):($t._visibility|=4,Ps(O,K,rt,At,L)),L&&Ht&2048&&M0(K.alternate,K);break;case 24:Ps(O,K,rt,At,L),L&&Ht&2048&&Rp(K.alternate,K);break;default:Ps(O,K,rt,At,L)}d=d.sibling}}function tr(h,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var A=h,M=d,L=M.flags;switch(M.tag){case 22:tr(A,M),L&2048&&M0(M.alternate,M);break;case 24:tr(A,M),L&2048&&Rp(M.alternate,M);break;default:tr(A,M)}d=d.sibling}}function Pa(h){if(h.subtreeFlags&ya)for(h=h.child;h!==null;)T0(h),h=h.sibling}function T0(h){switch(h.tag){case 26:Pa(h),h.flags&ya&&(h.memoizedState!==null?Wb(Di,h.memoizedState,h.memoizedProps):xr(h.type,h.memoizedProps));break;case 5:Pa(h),h.flags&ya&&xr(h.type,h.memoizedProps);break;case 3:case 4:if(ha){var d=Di;Di=q0(h.stateNode.containerInfo),Pa(h),Di=d}else Pa(h);break;case 22:h.memoizedState===null&&(d=h.alternate,d!==null&&d.memoizedState!==null?(d=ya,ya=16777216,Pa(h),ya=d):Pa(h));break;default:Pa(h)}}function Lp(h){var d=h.alternate;if(d!==null&&(h=d.child,h!==null)){d.child=null;do d=h.sibling,h.sibling=null,h=d;while(h!==null)}}function kc(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var A=0;A<d.length;A++){var M=d[A];We=M,Jy(M,h)}Lp(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)C0(h),h=h.sibling}function C0(h){switch(h.tag){case 0:case 11:case 15:kc(h),h.flags&2048&&zc(9,h,h.return);break;case 3:kc(h);break;case 12:kc(h);break;case 22:var d=h.stateNode;h.memoizedState!==null&&d._visibility&4&&(h.return===null||h.return.tag!==13)?(d._visibility&=-5,kl(h)):kc(h);break;default:kc(h)}}function kl(h){var d=h.deletions;if((h.flags&16)!==0){if(d!==null)for(var A=0;A<d.length;A++){var M=d[A];We=M,Jy(M,h)}Lp(h)}for(h=h.child;h!==null;){switch(d=h,d.tag){case 0:case 11:case 15:zc(8,d,d.return),kl(d);break;case 22:A=d.stateNode,A._visibility&4&&(A._visibility&=-5,kl(d));break;default:kl(d)}h=h.sibling}}function Jy(h,d){for(;We!==null;){var A=We;switch(A.tag){case 0:case 11:case 15:zc(8,A,d);break;case 23:case 22:if(A.memoizedState!==null&&A.memoizedState.cachePool!==null){var M=A.memoizedState.cachePool.pool;M!=null&&M.refCount++}break;case 24:Ep(A.memoizedState.cache)}if(M=A.child,M!==null)M.return=A,We=M;else t:for(A=h;We!==null;){M=We;var L=M.sibling,O=M.return;if(Yy(M),M===A){We=null;break t}if(L!==null){L.return=O,We=L;break t}We=O}}}function Sf(h){var d=yb(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(s(364));return d}if(h=p2(h),h===null)throw Error(s(362));return h.stateNode.current}function Vc(h,d){var A=h.tag;switch(d.$$typeof){case qf:if(h.type===d.value)return!0;break;case qa:t:{for(d=d.value,h=[h,0],A=0;A<h.length;){var M=h[A++],L=M.tag,O=h[A++],K=d[O];if(L!==5&&L!==26&&L!==27||!If(M)){for(;K!=null&&Vc(M,K);)O++,K=d[O];if(O===d.length){d=!0;break t}else for(M=M.child;M!==null;)h.push(M,O),M=M.sibling}}d=!1}return d;case xi:if((A===5||A===26||A===27)&&bb(h.stateNode,d.value))return!0;break;case ul:if((A===5||A===6||A===26||A===27)&&(h=xb(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case So:if((A===5||A===26||A===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Zy(h){switch(h.$$typeof){case qf:return"<"+(a(h.value)||"Unknown")+">";case qa:return":has("+(Zy(h)||"")+")";case xi:return'[role="'+h.value+'"]';case ul:return'"'+h.value+'"';case So:return'[data-testname="'+h.value+'"]';default:throw Error(s(365))}}function zr(h,d){var A=[];h=[h,0];for(var M=0;M<h.length;){var L=h[M++],O=L.tag,K=h[M++],rt=d[K];if(O!==5&&O!==26&&O!==27||!If(L)){for(;rt!=null&&Vc(L,rt);)K++,rt=d[K];if(K===d.length)A.push(L);else for(L=L.child;L!==null;)h.push(L,K),L=L.sibling}}return A}function Dp(h,d){if(!Zc)throw Error(s(363));h=Sf(h),h=zr(h,d),d=[],h=Array.from(h);for(var A=0;A<h.length;){var M=h[A++],L=M.tag;if(L===5||L===26||L===27)If(M)||d.push(M.stateNode);else for(M=M.child;M!==null;)h.push(M),M=M.sibling}return d}function Gi(){if((Un&2)!==0&&Sn!==0)return Sn&-Sn;if(Qe.T!==null){var h=pa;return h!==0?h:ne()}return _b()}function $y(){xa===0&&(xa=(Sn&536870912)===0||Dn?z():536870912);var h=ma.current;return h!==null&&(h.flags|=32),xa}function xs(h,d,A){(h===qn&&ni===2||h.cancelPendingCommit!==null)&&(Fs(h,0),Gr(h,Sn,xa,!1)),X(h,A),((Un&2)===0||h!==qn)&&(h===qn&&((Un&2)===0&&(nc|=A),ci===4&&Gr(h,Sn,xa,!1)),qt(h))}function Qc(h,d,A){if((Un&6)!==0)throw Error(s(327));var M=!A&&(d&60)===0&&(d&h.expiredLanes)===0||I(h,d),L=M?e2(h,d):R0(h,d,!0),O=M;do{if(L===0){_a&&!M&&Gr(h,d,0,!1);break}else if(L===6)Gr(h,d,0,!Wa);else{if(A=h.current.alternate,O&&!Ef(A)){L=R0(h,d,!1),O=!1;continue}if(L===2){if(O=d,h.errorRecoveryDisabledLanes&O)var K=0;else K=h.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){d=K;t:{var rt=h;L=ah;var At=Hs&&rt.current.memoizedState.isDehydrated;if(At&&(Fs(rt,K).flags|=256),K=R0(rt,K,!1),K!==2){if(ds&&!At){rt.errorRecoveryDisabledLanes|=O,nc|=O,L=4;break t}O=Fi,Fi=L,O!==null&&Bp(O)}L=K}if(O=!1,L!==2)continue}}if(L===1){Fs(h,0),Gr(h,d,0,!0);break}t:{switch(M=h,L){case 0:case 1:throw Error(s(345));case 4:if((d&4194176)===d){Gr(M,d,xa,!Wa);break t}break;case 2:Fi=null;break;case 3:case 5:break;default:throw Error(s(329))}if(M.finishedWork=A,M.finishedLanes=d,(d&62914560)===d&&(O=Er+300-Va(),10<O)){if(Gr(M,d,xa,!Wa),N(M,0)!==0)break t;M.timeoutHandle=es(w0.bind(null,M,A,Fi,em,s1,d,xa,nc,hl,Wa,2,-0,0),O);break t}w0(M,A,Fi,em,s1,d,xa,nc,hl,Wa,0,-0,0)}}break}while(!0);qt(h)}function Bp(h){Fi===null?Fi=h:Fi.push.apply(Fi,h)}function w0(h,d,A,M,L,O,K,rt,At,Ht,$t,fe,ye){var Ke=d.subtreeFlags;if((Ke&8192||(Ke&16785408)===16785408)&&(f2(),T0(d),d=ns(),d!==null)){h.cancelPendingCommit=d(jc.bind(null,h,A,M,L,K,rt,At,1,fe,ye)),Gr(h,O,K,!Ht);return}jc(h,A,M,L,K,rt,At,$t,fe,ye)}function Ef(h){for(var d=h;;){var A=d.tag;if((A===0||A===11||A===15)&&d.flags&16384&&(A=d.updateQueue,A!==null&&(A=A.stores,A!==null)))for(var M=0;M<A.length;M++){var L=A[M],O=L.getSnapshot;L=L.value;try{if(!Vr(O(),L))return!1}catch{return!1}}if(A=d.child,d.subtreeFlags&16384&&A!==null)A.return=d,d=A;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Gr(h,d,A,M){d&=~tm,d&=~nc,h.suspendedLanes|=d,h.pingedLanes&=~d,M&&(h.warmLanes|=d),M=h.expirationTimes;for(var L=d;0<L;){var O=31-br(L),K=1<<O;M[O]=-1,L&=~K}A!==0&&it(h,A,d)}function Op(){return(Un&6)===0?($(0),!1):!0}function Mf(){if(ze!==null){if(ni===0)var h=ze.return;else h=ze,va=bo=null,ho(h),su=null,ru=0,h=ze;for(;h!==null;)cb(h.alternate,h),h=h.return;ze=null}}function Fs(h,d){h.finishedWork=null,h.finishedLanes=0;var A=h.timeoutHandle;A!==Kc&&(h.timeoutHandle=Kc,F0(A)),A=h.cancelPendingCommit,A!==null&&(h.cancelPendingCommit=null,A()),Mf(),qn=h,ze=A=Ha(h.current,null),Sn=d,ni=0,nr=null,Wa=!1,_a=I(h,d),ds=!1,hl=xa=tm=nc=Aa=ci=0,Fi=ah=null,s1=!1,(d&8)!==0&&(d|=d&32);var M=h.entangledLanes;if(M!==0)for(h=h.entanglements,M&=d;0<M;){var L=31-br(M),O=1<<L;d|=h[L],M&=~O}return ir=d,Z(),A}function la(h,d){ln=null,Qe.H=Ui,d===Vf?(d=qe(),ni=3):d===Zp?(d=qe(),ni=4):ni=d===n1?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,nr=d,ze===null&&(ci=1,gf(h,_t(d,h.current)))}function Xc(){var h=ma.current;return h===null?!0:(Sn&4194176)===Sn?oi===null:(Sn&62914560)===Sn||(Sn&536870912)!==0?h===oi:!1}function Zo(){var h=Qe.H;return Qe.H=Ui,h===null?Ui:h}function $o(){var h=Qe.A;return Qe.A=jf,h}function Vl(){ci=4,Wa||(Sn&4194176)!==Sn&&ma.current!==null||(_a=!0),(Aa&134217727)===0&&(nc&134217727)===0||qn===null||Gr(qn,Sn,xa,!1)}function R0(h,d,A){var M=Un;Un|=2;var L=Zo(),O=$o();(qn!==h||Sn!==d)&&(em=null,Fs(h,d)),d=!1;var K=ci;t:do try{if(ni!==0&&ze!==null){var rt=ze,At=nr;switch(ni){case 8:Mf(),K=6;break t;case 3:case 2:case 6:ma.current===null&&(d=!0);var Ht=ni;if(ni=0,nr=null,Fa(h,rt,At,Ht),A&&_a){K=0;break t}break;default:Ht=ni,ni=0,nr=null,Fa(h,rt,At,Ht)}}t2(),K=ci;break}catch($t){la(h,$t)}while(!0);return d&&h.shellSuspendCounter++,va=bo=null,Un=M,Qe.H=L,Qe.A=O,ze===null&&(qn=null,Sn=0,Z()),K}function t2(){for(;ze!==null;)Li(ze)}function e2(h,d){var A=Un;Un|=2;var M=Zo(),L=$o();qn!==h||Sn!==d?(em=null,Yf=Va()+500,Fs(h,d)):_a=I(h,d);t:do try{if(ni!==0&&ze!==null){d=ze;var O=nr;e:switch(ni){case 1:ni=0,nr=null,Fa(h,d,O,1);break;case 2:if(Qt(O)){ni=0,nr=null,kn(d);break}d=function(){ni===2&&qn===h&&(ni=7),qt(h)},O.then(d,d);break t;case 3:ni=7;break t;case 4:ni=5;break t;case 7:Qt(O)?(ni=0,nr=null,kn(d)):(ni=0,nr=null,Fa(h,d,O,7));break;case 5:var K=null;switch(ze.tag){case 26:K=ze.memoizedState;case 5:case 27:var rt=ze,At=rt.type,Ht=rt.pendingProps;if(K?ju(K):H0(At,Ht)){ni=0,nr=null;var $t=rt.sibling;if($t!==null)ze=$t;else{var fe=rt.return;fe!==null?(ze=fe,ca(fe)):ze=null}break e}}ni=0,nr=null,Fa(h,d,O,5);break;case 6:ni=0,nr=null,Fa(h,d,O,6);break;case 8:Mf(),ci=6;break t;default:throw Error(s(462))}}_r();break}catch(ye){la(h,ye)}while(!0);return va=bo=null,Qe.H=M,Qe.A=L,Un=A,ze!==null?0:(qn=null,Sn=0,Z(),ci)}function _r(){for(;ze!==null&&!$b();)Li(ze)}function Li(h){var d=ab(h.alternate,h,ir);h.memoizedProps=h.pendingProps,d===null?ca(h):ze=d}function kn(h){var d=h,A=d.alternate;switch(d.tag){case 15:case 0:d=tb(A,d,d.pendingProps,d.type,void 0,Sn);break;case 11:d=tb(A,d,d.pendingProps,d.type.render,d.ref,Sn);break;case 5:ho(d);default:cb(A,d),d=ze=Ip(d,ir),d=ab(A,d,ir)}h.memoizedProps=h.pendingProps,d===null?ca(h):ze=d}function Fa(h,d,A,M){va=bo=null,ho(d),su=null,ru=0;var L=d.return;try{if(XM(h,L,d,A,Sn)){ci=1,gf(h,_t(A,h.current)),ze=null;return}}catch(O){if(L!==null)throw ze=L,O;ci=1,gf(h,_t(A,h.current)),ze=null;return}d.flags&32768?(Dn||M===1?h=!0:_a||(Sn&536870912)!==0?h=!1:(Wa=h=!0,(M===2||M===3||M===6)&&(M=ma.current,M!==null&&M.tag===13&&(M.flags|=16384))),L0(d,h)):ca(d)}function ca(h){var d=h;do{if((d.flags&32768)!==0){L0(d,Wa);return}h=d.return;var A=lb(d.alternate,d,ir);if(A!==null){ze=A;return}if(d=d.sibling,d!==null){ze=d;return}ze=d=h}while(d!==null);ci===0&&(ci=5)}function L0(h,d){do{var A=qM(h.alternate,h);if(A!==null){A.flags&=32767,ze=A;return}if(A=h.return,A!==null&&(A.flags|=32768,A.subtreeFlags=0,A.deletions=null),!d&&(h=h.sibling,h!==null)){ze=h;return}ze=h=A}while(h!==null);ci=6,ze=null}function jc(h,d,A,M,L,O,K,rt,At,Ht){var $t=Qe.T,fe=Wl();try{er(2),Qe.T=null,db(h,d,A,M,fe,L,O,K,rt,At,Ht)}finally{Qe.T=$t,er(fe)}}function db(h,d,A,M,L,O,K,rt){do po();while(fl!==null);if((Un&6)!==0)throw Error(s(327));var At=h.finishedWork;if(M=h.finishedLanes,At===null)return null;if(h.finishedWork=null,h.finishedLanes=0,At===h.current)throw Error(s(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var Ht=At.lanes|At.childLanes;if(Ht|=Ao,ot(h,M,Ht,O,K,rt),h===qn&&(ze=qn=null,Sn=0),(At.subtreeFlags&10256)===0&&(At.flags&10256)===0||Eo||(Eo=!0,uu=Ht,r1=A,Xl(Z0,function(){return po(),null})),A=(At.flags&15990)!==0,(At.subtreeFlags&15990)!==0||A?(A=Qe.T,Qe.T=null,O=Wl(),er(2),K=Un,Un|=4,wp(h,At),Wy(At,h),vb(h.containerInfo),h.current=At,S0(h,At.alternate,At),K0(),Un=K,er(O),Qe.T=A):h.current=At,Eo?(Eo=!1,fl=h,oh=M):n2(h,Ht),Ht=h.pendingLanes,Ht===0&&(cu=null),Q(At.stateNode),qt(h),d!==null)for(L=h.onRecoverableError,At=0;At<d.length;At++)Ht=d[At],L(Ht.value,{componentStack:Ht.stack});return(oh&3)!==0&&po(),Ht=h.pendingLanes,(M&4194218)!==0&&(Ht&42)!==0?h===a1?Wf++:(Wf=0,a1=h):Wf=0,$(0),null}function n2(h,d){(h.pooledCacheLanes&=d)===0&&(d=h.pooledCache,d!=null&&(h.pooledCache=null,Ep(d)))}function po(){if(fl!==null){var h=fl,d=uu;uu=0;var A=dt(oh),M=32>A?32:A;A=Qe.T;var L=Wl();try{if(er(M),Qe.T=null,fl===null)var O=!1;else{M=r1,r1=null;var K=fl,rt=oh;if(fl=null,oh=0,(Un&6)!==0)throw Error(s(331));var At=Un;if(Un|=4,C0(K.current),Ky(K,K.current,rt,M),Un=At,$(0,!1),kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(Qi,K)}catch{}O=!0}return O}finally{er(L),Qe.T=A,n2(h,d)}}return!1}function Tf(h,d,A){d=_t(A,d),d=yf(h.stateNode,d,2),h=Te(h,d,2),h!==null&&(X(h,2),qt(h))}function Xn(h,d,A){if(h.tag===3)Tf(h,h,A);else for(;d!==null;){if(d.tag===3){Tf(d,h,A);break}else if(d.tag===1){var M=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(cu===null||!cu.has(M))){h=_t(A,h),A=Iy(2),M=Te(d,A,2),M!==null&&(Wx(A,M,d,h),X(M,2),qt(M));break}}d=d.return}}function Vu(h,d,A){var M=h.pingCache;if(M===null){M=h.pingCache=new Ya;var L=new Set;M.set(d,L)}else L=M.get(d),L===void 0&&(L=new Set,M.set(d,L));L.has(A)||(ds=!0,L.add(A),h=i2.bind(null,h,d,A),d.then(h,h))}function i2(h,d,A){var M=h.pingCache;M!==null&&M.delete(d),h.pingedLanes|=h.suspendedLanes&A,h.warmLanes&=~A,qn===h&&(Sn&A)===A&&(ci===4||ci===3&&(Sn&62914560)===Sn&&300>Va()-Er?(Un&2)===0&&Fs(h,0):tm|=A,hl===Sn&&(hl=0)),qt(h)}function qc(h,d){d===0&&(d=U()),h=Vt(h,d),h!==null&&(X(h,d),qt(h))}function Ql(h){var d=h.memoizedState,A=0;d!==null&&(A=d.retryLane),qc(h,A)}function Yc(h,d){var A=0;switch(h.tag){case 13:var M=h.stateNode,L=h.memoizedState;L!==null&&(A=L.retryLane);break;case 19:M=h.stateNode;break;case 22:M=h.stateNode._retryCache;break;default:throw Error(s(314))}M!==null&&M.delete(d),qc(h,A)}function Xl(h,d){return Wp(h,d)}function s2(h,d,A,M){this.tag=h,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Np(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Ha(h,d){var A=h.alternate;return A===null?(A=e(h.tag,d,h.key,h.mode),A.elementType=h.elementType,A.type=h.type,A.stateNode=h.stateNode,A.alternate=h,h.alternate=A):(A.pendingProps=d,A.type=h.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=h.flags&31457280,A.childLanes=h.childLanes,A.lanes=h.lanes,A.child=h.child,A.memoizedProps=h.memoizedProps,A.memoizedState=h.memoizedState,A.updateQueue=h.updateQueue,d=h.dependencies,A.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},A.sibling=h.sibling,A.index=h.index,A.ref=h.ref,A.refCleanup=h.refCleanup,A}function Ip(h,d){h.flags&=31457282;var A=h.alternate;return A===null?(h.childLanes=0,h.lanes=d,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=A.childLanes,h.lanes=A.lanes,h.child=A.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=A.memoizedProps,h.memoizedState=A.memoizedState,h.updateQueue=A.updateQueue,h.type=A.type,d=A.dependencies,h.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),h}function tl(h,d,A,M,L,O){var K=0;if(M=h,typeof h=="function")Np(h)&&(K=1);else if(typeof h=="string")K=ha&&ai?jp(h,A,hs.current)?26:nl(h)?27:5:ha?jp(h,A,hs.current)?26:5:ai&&nl(h)?27:5;else t:switch(h){case Wc:return Ii(A.children,L,O,d);case Hp:K=8,L|=24;break;case N0:return h=e(12,A,d,L|2),h.elementType=N0,h.lanes=O,h;case I0:return h=e(13,A,d,L),h.elementType=I0,h.lanes=O,h;case Lf:return h=e(19,A,d,L),h.elementType=Lf,h.lanes=O,h;case o2:return Up(A,L,O,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case zp:case mo:K=10;break t;case a2:K=9;break t;case Gp:K=11;break t;case U0:K=14;break t;case Ga:K=16,M=null;break t}K=29,A=Error(s(130,h===null?"null":typeof h,"")),M=null}return d=e(K,A,d,L),d.elementType=h,d.type=M,d.lanes=O,d}function Ii(h,d,A,M){return h=e(7,h,M,d),h.lanes=A,h}function Up(h,d,A,M){h=e(22,h,M,d),h.elementType=o2,h.lanes=A;var L={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var O=L._current;if(O===null)throw Error(s(456));if((L._pendingVisibility&2)===0){var K=Vt(O,2);K!==null&&(L._pendingVisibility|=2,xs(K,O,2))}},attach:function(){var O=L._current;if(O===null)throw Error(s(456));if((L._pendingVisibility&2)!==0){var K=Vt(O,2);K!==null&&(L._pendingVisibility&=-3,xs(K,O,2))}}};return h.stateNode=L,h}function D0(h,d,A){return h=e(6,h,null,d),h.lanes=A,h}function r2(h,d,A){return d=e(4,h.children!==null?h.children:[],h.key,d),d.lanes=A,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function YM(h,d,A,M,L,O,K,rt){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Kc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=P(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P(0),this.hiddenUpdates=P(null),this.identifierPrefix=M,this.onUncaughtError=L,this.onCaughtError=O,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=rt,this.incompleteTransitions=new Map}function pb(h,d,A,M,L,O,K,rt,At,Ht,$t,fe){return h=new YM(h,d,A,K,rt,At,Ht,fe),d=1,O===!0&&(d|=24),O=e(3,null,null,d),h.current=O,O.stateNode=h,d=Hc(),d.refCount++,h.pooledCache=d,d.refCount++,O.memoizedState={element:M,isDehydrated:A,cache:d},Jt(O),h}function ts(h){return h?(h=eu,h):eu}function B0(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(s(188)):(h=Object.keys(h).join(","),Error(s(268,h)));return h=_(d),h=h!==null?b(h):null,h===null?null:Of(h.stateNode)}function Cf(h,d,A,M,L,O){L=ts(L),M.context===null?M.context=L:M.pendingContext=L,M=Se(d),M.payload={element:A},O=O===void 0?null:O,O!==null&&(M.callback=O),A=Te(h,M,d),A!==null&&(xs(A,h,d),le(A,h,d))}function wf(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var A=h.retryLane;h.retryLane=A!==0&&A<d?A:d}}function Pp(h,d){wf(h,d),(h=h.alternate)&&wf(h,d)}var tn={},Rf=e0(),ua=IO(),O0=Object.assign,WM=Symbol.for("react.element"),Fp=Symbol.for("react.transitional.element"),za=Symbol.for("react.portal"),Wc=Symbol.for("react.fragment"),Hp=Symbol.for("react.strict_mode"),N0=Symbol.for("react.profiler"),zp=Symbol.for("react.provider"),a2=Symbol.for("react.consumer"),mo=Symbol.for("react.context"),Gp=Symbol.for("react.forward_ref"),I0=Symbol.for("react.suspense"),Lf=Symbol.for("react.suspense_list"),U0=Symbol.for("react.memo"),Ga=Symbol.for("react.lazy"),o2=Symbol.for("react.offscreen"),mb=Symbol.for("react.memo_cache_sentinel"),jl=Symbol.iterator,l2=Symbol.for("react.client.reference"),Qe=Rf.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,el,ql,Qu=!1,Df=Array.isArray,c2=t.rendererVersion,kp=t.rendererPackageName,Bf=t.extraDevToolsConfig,Of=t.getPublicInstance,gb=t.getRootHostContext,Nf=t.getChildHostContext,P0=t.prepareForCommit,vb=t.resetAfterCommit,u2=t.createInstance,Vp=t.appendInitialChild,Yl=t.finalizeInitialChildren,en=t.shouldSetTextContent,Zn=t.createTextInstance,es=t.scheduleTimeout,F0=t.cancelTimeout,Kc=t.noTimeout,Ar=t.isPrimaryRenderer;t.warnsIfNotActing;var us=t.supportsMutation,ka=t.supportsPersistence,Hs=t.supportsHydration,yb=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var ki=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var er=t.setCurrentUpdatePriority,Wl=t.getCurrentUpdatePriority,_b=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var Ab=t.shouldAttemptEagerTransition,KM=t.detachDeletedInstance;t.requestPostPaintCallback;var h2=t.maySuspendCommit,H0=t.preloadInstance,f2=t.startSuspendingCommit,xr=t.suspendInstance,ns=t.waitForCommitToBeReady,Jc=t.NotPendingTransition,go=t.HostTransitionContext,z0=t.resetFormInstance;t.bindToConsole;var d2=t.supportsMicrotasks,Kl=t.scheduleMicrotask,Zc=t.supportsTestSelectors,p2=t.findFiberRoot,m2=t.getBoundingRect,xb=t.getTextContent,If=t.isHiddenSubtree,bb=t.matchAccessibilityRole,Sb=t.setFocusIfFocusable,Eb=t.setupIntersectionObserver,Mb=t.appendChild,g2=t.appendChildToContainer,Tb=t.commitTextUpdate,JM=t.commitMount,Cb=t.commitUpdate,wb=t.insertBefore,Rb=t.insertInContainerBefore,v2=t.removeChild,Lb=t.removeChildFromContainer,y2=t.resetTextContent,Db=t.hideInstance,Bb=t.hideTextInstance,Ob=t.unhideInstance,ZM=t.unhideTextInstance,Nb=t.clearContainer,Uf=t.cloneInstance,Qp=t.createContainerChildSet,_2=t.appendChildToContainerChildSet,G0=t.finalizeContainerChildren,Pf=t.replaceContainerChildren,A2=t.cloneHiddenInstance,x2=t.cloneHiddenTextInstance,k0=t.isSuspenseInstancePending,V0=t.isSuspenseInstanceFallback,Ib=t.getSuspenseInstanceFallbackErrorDetails,Ub=t.registerSuspenseInstanceRetry,b2=t.canHydrateFormStateMarker,Pb=t.isFormStateMarkerMatching,S2=t.getNextHydratableSibling,Q0=t.getFirstHydratableChild,Fb=t.getFirstHydratableChildWithinContainer,Hb=t.getFirstHydratableChildWithinSuspenseInstance,$M=t.canHydrateInstance,E2=t.canHydrateTextInstance,zb=t.canHydrateSuspenseInstance,Gb=t.hydrateInstance,M2=t.hydrateTextInstance,kb=t.hydrateSuspenseInstance,Vb=t.getNextHydratableInstanceAfterSuspenseInstance,tT=t.commitHydratedContainer,eT=t.commitHydratedSuspenseInstance,Qb=t.clearSuspenseBoundary,Xp=t.clearSuspenseBoundaryFromContainer,X0=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var j0=t.validateHydratableInstance,Xb=t.validateHydratableTextInstance,ha=t.supportsResources,jp=t.isHostHoistableType,q0=t.getHoistableRoot,T2=t.getResource,jb=t.acquireResource,Xu=t.releaseResource,qp=t.hydrateHoistable,Yp=t.mountHoistable,Ff=t.unmountHoistable,Y0=t.createHoistableInstance,qb=t.prepareToCommitHoistables,Yb=t.mayResourceSuspendCommit,ju=t.preloadResource,Wb=t.suspendResource,ai=t.supportsSingletons,vo=t.resolveSingletonInstance,$c=t.clearSingleton,Kb=t.acquireSingletonInstance,tu=t.releaseSingletonInstance,nl=t.isHostSingletonType,Vi=[],Jl=-1,eu={},br=Math.clz32?Math.clz32:B,Jb=Math.log,Zb=Math.LN2,il=128,qu=4194304,Wp=ua.unstable_scheduleCallback,W0=ua.unstable_cancelCallback,$b=ua.unstable_shouldYield,K0=ua.unstable_requestPaint,Va=ua.unstable_now,J0=ua.unstable_ImmediatePriority,tS=ua.unstable_UserBlockingPriority,Z0=ua.unstable_NormalPriority,nT=ua.unstable_IdlePriority,eS=ua.log,bs=ua.unstable_setDisableYieldValue,Qi=null,kr=null,Vr=typeof Object.is=="function"?Object.is:et,C2=new WeakMap,Yu=[],Wu=0,Ku=null,Hf=0,fa=[],da=0,nu=null,yo=1,_o="",hs=T(null),zf=T(null),sl=T(null),Ju=T(null),zs=null,Gs=null,Dn=!1,Qa=null,Ss=!1,Kp=Error(s(519)),Xa=[],Zu=0,Ao=0,Jp=null,Zl=null,$u=!1,pi=!1,w2=!1,Gf=0,kf=null,th=0,pa=0,eh=null,$l=!1,nh=!1,rl=Object.prototype.hasOwnProperty,Vf=Error(s(460)),Zp=Error(s(474)),$p={then:function(){}},iu=null,su=null,ru=0,au=ls(!0),al=ls(!1),mi=T(null),Qf=T(0),ma=T(null),oi=null,fs=T(0),tc=0,ln=null,Pe=null,In=null,ja=!1,ih=!1,ou=!1,$0=0,sh=0,Es=null,xo=0,t1=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Ui={readContext:Is,use:Rt,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useLayoutEffect:ti,useInsertionEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useSyncExternalStore:ti,useId:ti};Ui.useCacheRefresh=ti,Ui.useMemoCache=ti,Ui.useHostTransitionStatus=ti,Ui.useFormState=ti,Ui.useActionState=ti,Ui.useOptimistic=ti;var lu={readContext:Is,use:Rt,useCallback:function(h,d){return q().memoizedState=[h,d===void 0?null:d],h},useContext:Is,useEffect:h0,useImperativeHandle:function(h,d,A){A=A!=null?A.concat([h]):null,fp(4194308,4,f0.bind(null,d,h),A)},useLayoutEffect:function(h,d){return fp(4194308,4,h,d)},useInsertionEffect:function(h,d){fp(4,2,h,d)},useMemo:function(h,d){var A=q();d=d===void 0?null:d;var M=h();if(ou){tt(!0);try{h()}finally{tt(!1)}}return A.memoizedState=[M,d],M},useReducer:function(h,d,A){var M=q();if(A!==void 0){var L=A(d);if(ou){tt(!0);try{A(d)}finally{tt(!1)}}}else L=d;return M.memoizedState=M.baseState=L,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:L},M.queue=h,h=h.dispatch=p0.bind(null,ln,h),[M.memoizedState,h]},useRef:function(h){var d=q();return h={current:h},d.memoizedState=h},useState:function(h){h=yn(h);var d=h.queue,A=Ny.bind(null,ln,d);return d.dispatch=A,[h.memoizedState,A]},useDebugValue:Nc,useDeferredValue:function(h,d){var A=q();return mp(A,h,d)},useTransition:function(){var h=yn(!1);return h=hf.bind(null,ln,h.queue,!0,!1),q().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,d,A){var M=ln,L=q();if(Dn){if(A===void 0)throw Error(s(407));A=A()}else{if(A=d(),qn===null)throw Error(s(349));(Sn&60)!==0||Oe(M,d,A)}L.memoizedState=A;var O={value:A,getSnapshot:d};return L.queue=O,h0(pn.bind(null,M,O,h),[h]),M.flags|=2048,gr(9,Ce.bind(null,M,O,A,d),{destroy:void 0},null),A},useId:function(){var h=q(),d=qn.identifierPrefix;if(Dn){var A=_o,M=yo;A=(M&~(1<<32-br(M)-1)).toString(32)+A,d=":"+d+"R"+A,A=$0++,0<A&&(d+="H"+A.toString(32)),d+=":"}else A=xo++,d=":"+d+"r"+A.toString(32)+":";return h.memoizedState=d},useCacheRefresh:function(){return q().memoizedState=Oy.bind(null,ln)}};lu.useMemoCache=yt,lu.useHostTransitionStatus=gp,lu.useFormState=ei,lu.useActionState=ei,lu.useOptimistic=function(h){var d=q();d.memoizedState=d.baseState=h;var A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=A,d=df.bind(null,ln,!0,A),A.dispatch=d,[h,d]};var Sr={readContext:Is,use:Rt,useCallback:zu,useContext:Is,useEffect:Ly,useImperativeHandle:d0,useInsertionEffect:qx,useLayoutEffect:pp,useMemo:Dy,useReducer:ie,useRef:Ko,useState:function(){return ie(Yt)},useDebugValue:Nc,useDeferredValue:function(h,d){var A=pt();return By(A,Pe.memoizedState,h,d)},useTransition:function(){var h=ie(Yt)[0],d=pt().memoizedState;return[typeof h=="boolean"?h:Ct(h),d]},useSyncExternalStore:Ge,useId:ff};Sr.useCacheRefresh=Nl,Sr.useMemoCache=yt,Sr.useHostTransitionStatus=gp,Sr.useFormState=Os,Sr.useActionState=Os,Sr.useOptimistic=function(h,d){var A=pt();return bn(A,Pe,h,d)};var ga={readContext:Is,use:Rt,useCallback:zu,useContext:Is,useEffect:Ly,useImperativeHandle:d0,useInsertionEffect:qx,useLayoutEffect:pp,useMemo:Dy,useReducer:Ae,useRef:Ko,useState:function(){return Ae(Yt)},useDebugValue:Nc,useDeferredValue:function(h,d){var A=pt();return Pe===null?mp(A,h,d):By(A,Pe.memoizedState,h,d)},useTransition:function(){var h=Ae(Yt)[0],d=pt().memoizedState;return[typeof h=="boolean"?h:Ct(h),d]},useSyncExternalStore:Ge,useId:ff};ga.useCacheRefresh=Nl,ga.useMemoCache=yt,ga.useHostTransitionStatus=gp,ga.useFormState=_s,ga.useActionState=_s,ga.useOptimistic=function(h,d){var A=pt();return Pe!==null?bn(A,Pe,h,d):(A.baseState=h,[h,A.queue.dispatch])};var ol={isMounted:function(h){return(h=h._reactInternals)?g(h)===h:!1},enqueueSetState:function(h,d,A){h=h._reactInternals;var M=Gi(),L=Se(M);L.payload=d,A!=null&&(L.callback=A),d=Te(h,L,M),d!==null&&(xs(d,h,M),le(d,h,M))},enqueueReplaceState:function(h,d,A){h=h._reactInternals;var M=Gi(),L=Se(M);L.tag=1,L.payload=d,A!=null&&(L.callback=A),d=Te(h,L,M),d!==null&&(xs(d,h,M),le(d,h,M))},enqueueForceUpdate:function(h,d){h=h._reactInternals;var A=Gi(),M=Se(A);M.tag=2,d!=null&&(M.callback=d),d=Te(h,M,A),d!==null&&(xs(d,h,A),le(d,h,A))}},e1=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},n1=Error(s(461)),li=!1,i1={dehydrated:null,treeContext:null,retryLane:0},ec=T(null),bo=null,va=null,Xf=typeof AbortController<"u"?AbortController:function(){var h=[],d=this.signal={aborted:!1,addEventListener:function(A,M){h.push(M)}};this.abort=function(){d.aborted=!0,h.forEach(function(A){return A()})}},nS=ua.unstable_scheduleCallback,iS=ua.unstable_NormalPriority,gi={$$typeof:mo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},R2=Qe.S;Qe.S=function(h,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&te(h,d),R2!==null&&R2(h,d)};var ll=T(null),cl=!1,Pi=!1,L2=!1,jn=typeof WeakSet=="function"?WeakSet:Set,We=null,mn=!1,Ie=null,an=!1,Di=null,ya=8192,jf={getCacheForType:function(h){var d=Is(gi),A=d.data.get(h);return A===void 0&&(A=h(),d.data.set(h,A)),A}},qf=0,qa=1,xi=2,So=3,ul=4;if(typeof Symbol=="function"&&Symbol.for){var rh=Symbol.for;qf=rh("selector.component"),qa=rh("selector.has_pseudo_class"),xi=rh("selector.role"),So=rh("selector.test_id"),ul=rh("selector.text")}var Ya=typeof WeakMap=="function"?WeakMap:Map,Un=0,qn=null,ze=null,Sn=0,ni=0,nr=null,Wa=!1,_a=!1,ds=!1,ir=0,ci=0,Aa=0,nc=0,tm=0,xa=0,hl=0,ah=null,Fi=null,s1=!1,Er=0,Yf=1/0,em=null,cu=null,Eo=!1,fl=null,oh=0,uu=0,r1=null,Wf=0,a1=null;return tn.attemptContinuousHydration=function(h){if(h.tag===13){var d=Vt(h,67108864);d!==null&&xs(d,h,67108864),Pp(h,67108864)}},tn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=Gi(),A=Vt(h,d);A!==null&&xs(A,h,d),Pp(h,d)}},tn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var d=D(h.pendingLanes);if(d!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;d;){var A=1<<31-br(d);h.entanglements[1]|=A,d&=~A}qt(h),(Un&6)===0&&(Yf=Va()+500,$(0))}}break;case 13:d=Vt(h,2),d!==null&&xs(d,h,2),Op(),Pp(h,2)}},tn.batchedUpdates=function(h,d){return h(d)},tn.createComponentSelector=function(h){return{$$typeof:qf,value:h}},tn.createContainer=function(h,d,A,M,L,O,K,rt,At,Ht){return pb(h,d,!1,null,A,M,O,K,rt,At,Ht,null)},tn.createHasPseudoClassSelector=function(h){return{$$typeof:qa,value:h}},tn.createHydrationContainer=function(h,d,A,M,L,O,K,rt,At,Ht,$t,fe,ye){return h=pb(A,M,!0,h,L,O,rt,At,Ht,$t,fe,ye),h.context=ts(null),A=h.current,M=Gi(),L=Se(M),L.callback=d??null,Te(A,L,M),h.current.lanes=M,X(h,M),qt(h),h},tn.createPortal=function(h,d,A){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:za,key:M==null?null:""+M,children:h,containerInfo:d,implementation:A}},tn.createRoleSelector=function(h){return{$$typeof:xi,value:h}},tn.createTestNameSelector=function(h){return{$$typeof:So,value:h}},tn.createTextSelector=function(h){return{$$typeof:ul,value:h}},tn.defaultOnCaughtError=function(h){console.error(h)},tn.defaultOnRecoverableError=function(h){e1(h)},tn.defaultOnUncaughtError=function(h){e1(h)},tn.deferredUpdates=function(h){var d=Qe.T,A=Wl();try{return er(32),Qe.T=null,h()}finally{er(A),Qe.T=d}},tn.discreteUpdates=function(h,d,A,M,L){var O=Qe.T,K=Wl();try{return er(2),Qe.T=null,h(d,A,M,L)}finally{er(K),Qe.T=O,Un===0&&(Yf=Va()+500)}},tn.findAllNodes=Dp,tn.findBoundingRects=function(h,d){if(!Zc)throw Error(s(363));d=Dp(h,d),h=[];for(var A=0;A<d.length;A++)h.push(m2(d[A]));for(d=h.length-1;0<d;d--){A=h[d];for(var M=A.x,L=M+A.width,O=A.y,K=O+A.height,rt=d-1;0<=rt;rt--)if(d!==rt){var At=h[rt],Ht=At.x,$t=Ht+At.width,fe=At.y,ye=fe+At.height;if(M>=Ht&&O>=fe&&L<=$t&&K<=ye){h.splice(d,1);break}else if(M!==Ht||A.width!==At.width||ye<O||fe>K){if(!(O!==fe||A.height!==At.height||$t<M||Ht>L)){Ht>M&&(At.width+=Ht-M,At.x=M),$t<L&&(At.width=L-Ht),h.splice(d,1);break}}else{fe>O&&(At.height+=fe-O,At.y=O),ye<K&&(At.height=K-fe),h.splice(d,1);break}}}return h},tn.findHostInstance=B0,tn.findHostInstanceWithNoPortals=function(h){return h=_(h),h=h!==null?C(h):null,h===null?null:Of(h.stateNode)},tn.findHostInstanceWithWarning=function(h){return B0(h)},tn.flushPassiveEffects=po,tn.flushSyncFromReconciler=function(h){var d=Un;Un|=1;var A=Qe.T,M=Wl();try{if(er(2),Qe.T=null,h)return h()}finally{er(M),Qe.T=A,Un=d,(Un&6)===0&&$(0)}},tn.flushSyncWork=Op,tn.focusWithin=function(h,d){if(!Zc)throw Error(s(363));for(h=Sf(h),d=zr(h,d),d=Array.from(d),h=0;h<d.length;){var A=d[h++],M=A.tag;if(!If(A)){if((M===5||M===26||M===27)&&Sb(A.stateNode))return!0;for(A=A.child;A!==null;)d.push(A),A=A.sibling}}return!1},tn.getFindAllNodesFailureDescription=function(h,d){if(!Zc)throw Error(s(363));var A=0,M=[];h=[Sf(h),0];for(var L=0;L<h.length;){var O=h[L++],K=O.tag,rt=h[L++],At=d[rt];if((K!==5&&K!==26&&K!==27||!If(O))&&(Vc(O,At)&&(M.push(Zy(At)),rt++,rt>A&&(A=rt)),rt<d.length))for(O=O.child;O!==null;)h.push(O,rt),O=O.sibling}if(A<d.length){for(h=[];A<d.length;A++)h.push(Zy(d[A]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},tn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return Of(h.child.stateNode);default:return h.child.stateNode}},tn.injectIntoDevTools=function(){var h={bundleType:0,version:c2,rendererPackageName:kp,currentDispatcherRef:Qe,findFiberByHostInstance:yb,reconcilerVersion:"19.0.0"};if(Bf!==null&&(h.rendererConfig=Bf),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{Qi=d.inject(h),kr=d}catch{}h=!!d.checkDCE}}return h},tn.isAlreadyRendering=function(){return!1},tn.observeVisibleRects=function(h,d,A,M){if(!Zc)throw Error(s(363));h=Dp(h,d);var L=Eb(h,A,M).disconnect;return{disconnect:function(){L()}}},tn.shouldError=function(){return null},tn.shouldSuspend=function(){return!1},tn.startHostTransition=function(h,d,A,M){if(h.tag!==5)throw Error(s(476));var L=Jo(h).queue;hf(h,L,d,Jc,A===null?n:function(){var O=Jo(h).next.queue;return Ic(h,O,{},Gi()),A(M)})},tn.updateContainer=function(h,d,A,M){var L=d.current,O=Gi();return Cf(L,O,h,d,A,M),O},tn.updateContainerSync=function(h,d,A,M){return d.tag===0&&po(),Cf(d.current,2,h,d,A,M),2},tn},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(N8)),N8.exports}var GL;function aY(){return GL||(GL=1,O8.exports=rY()),O8.exports}var oY=aY();const lY=FE(oY);var kL=IO();const cY=i=>typeof i=="object"&&typeof i.then=="function",Nm=[];function UO(i,t,e=(n,s)=>n===s){if(i===t)return!0;if(!i||!t)return!1;const n=i.length;if(t.length!==n)return!1;for(let s=0;s<n;s++)if(!e(i[s],t[s]))return!1;return!0}function PO(i,t=null,e=!1,n={}){t===null&&(t=[i]);for(const r of Nm)if(UO(t,r.keys,r.equal)){if(e)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!e)throw r.promise}const s={keys:t,equal:n.equal,remove:()=>{const r=Nm.indexOf(s);r!==-1&&Nm.splice(r,1)},promise:(cY(i)?i:i(...t)).then(r=>{s.response=r,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(r=>s.error=r)};if(Nm.push(s),!e)throw s.promise}const uY=(i,t,e)=>PO(i,t,!1,e),hY=(i,t,e)=>void PO(i,t,!0,e),fY=i=>{if(i===void 0||i.length===0)Nm.splice(0,Nm.length);else{const t=Nm.find(e=>UO(i,e.keys,e.equal));t&&t.remove()}};function h7(i,t,e){if(!i)return;if(e(i)===!0)return i;let n=t?i.return:i.child;for(;n;){const s=h7(n,t,e);if(s)return s;n=t?null:n.sibling}}function FO(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const f7=FO(ut.createContext(null));class HO extends ut.Component{render(){return ut.createElement(f7.Provider,{value:this._reactInternals},this.props.children)}}function zO(){const i=ut.useContext(f7);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=ut.useId();return ut.useMemo(()=>{for(const e of[i,i==null?void 0:i.alternate]){if(!e)continue;const n=h7(e,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(n)return n}},[i,t])}const dY=Symbol.for("react.context"),pY=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===dY;function mY(){const i=zO(),[t]=ut.useState(()=>new Map);t.clear();let e=i;for(;e;){const n=e.type;pY(n)&&n!==f7&&!t.has(n)&&t.set(n,ut.use(FO(n))),e=e.return}return t}function gY(){const i=mY();return ut.useMemo(()=>Array.from(i.keys()).reduce((t,e)=>n=>ut.createElement(t,null,ut.createElement(e.Provider,{...n,value:i.get(e)})),t=>ut.createElement(HO,{...t})),[i])}function GO(i){let t=i.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const kO=i=>i&&i.isOrthographicCamera,vY=i=>i&&i.hasOwnProperty("current"),yY=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),Hx=((i,t)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?ut.useLayoutEffect:ut.useEffect;function VO(i){const t=ut.useRef(i);return Hx(()=>void(t.current=i),[i]),t}function _Y(){const i=zO(),t=gY();return ut.useMemo(()=>({children:e})=>{const s=!!h7(i,!0,r=>r.type===ut.StrictMode)?ut.StrictMode:ut.Fragment;return Y.jsx(s,{children:Y.jsx(t,{children:e})})},[i,t])}function AY({set:i}){return Hx(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const xY=(i=>(i=class extends ut.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function QO(i){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],e),i[1]):i}function D1(i){var t;return(t=i.__r3f)==null?void 0:t.root.getState()}const zi={obj:i=>i===Object(i)&&!zi.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,t,{arrays:e="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof t||!!i!=!!t)return!1;if(zi.str(i)||zi.num(i)||zi.boo(i))return i===t;const r=zi.obj(i);if(r&&n==="reference")return i===t;const a=zi.arr(i);if(a&&e==="reference")return i===t;if((a||r)&&i===t)return!0;let l;for(l in i)if(!(l in t))return!1;if(r&&e==="shallow"&&n==="shallow"){for(l in s?t:i)if(!zi.equ(i[l],t[l],{strict:s,objects:"reference"}))return!1}else for(l in s?t:i)if(i[l]!==t[l])return!1;if(zi.und(l)){if(a&&i.length===0&&t.length===0||r&&Object.keys(i).length===0&&Object.keys(t).length===0)return!0;if(i!==t)return!1}return!0}};function bY(i){const t={nodes:{},materials:{},meshes:{}};return i&&i.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}function SY(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const t in i){const e=i[t];(e==null?void 0:e.type)!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const XO=["children","key","ref"];function EY(i){const t={};for(const e in i)XO.includes(e)||(t[e]=i[e]);return t}function aE(i,t,e,n){const s=i;let r=s==null?void 0:s.__r3f;return r||(r={root:t,type:e,parent:null,children:[],props:EY(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function aA(i,t){let e=i[t];if(!t.includes("-"))return{root:i,key:t,target:e};e=i;for(const s of t.split("-")){var n;t=s,i=e,e=(n=e)==null?void 0:n[t]}return{root:i,key:t,target:e}}const VL=/-\d+$/;function oE(i,t){if(zi.str(t.props.attach)){if(VL.test(t.props.attach)){const s=t.props.attach.replace(VL,""),{root:r,key:a}=aA(i.object,s);Array.isArray(r[a])||(r[a]=[])}const{root:e,key:n}=aA(i.object,t.props.attach);t.previousAttach=e[n],e[n]=t.object}else zi.fun(t.props.attach)&&(t.previousAttach=t.props.attach(i.object,t.object))}function lE(i,t){if(zi.str(t.props.attach)){const{root:e,key:n}=aA(i.object,t.props.attach),s=t.previousAttach;s===void 0?delete e[n]:e[n]=s}else t.previousAttach==null||t.previousAttach(i.object,t.object);delete t.previousAttach}const O5=[...XO,"args","dispose","attach","object","onUpdate","dispose"],QL=new Map;function MY(i){let t=QL.get(i.constructor);try{t||(t=new i.constructor,QL.set(i.constructor,t))}catch{}return t}function TY(i,t){const e={};for(const n in t)if(!O5.includes(n)&&!zi.equ(t[n],i.props[n])){e[n]=t[n];for(const s in t)s.startsWith(`${n}-`)&&(e[s]=t[s])}for(const n in i.props){if(O5.includes(n)||t.hasOwnProperty(n))continue;const{root:s,key:r}=aA(i.object,n);if(s.constructor&&s.constructor.length===0){const a=MY(s);zi.und(a)||(e[r]=a[r])}else e[r]=0}return e}const CY=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],wY=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function gd(i,t){var e;const n=i.__r3f,s=n&&GO(n).getState(),r=n==null?void 0:n.eventCount;for(const l in t){let u=t[l];if(O5.includes(l))continue;if(n&&wY.test(l)){typeof u=="function"?n.handlers[l]=u:delete n.handlers[l],n.eventCount=Object.keys(n.handlers).length;continue}if(u===void 0)continue;let{root:f,key:m,target:g}=aA(i,l);if(g instanceof fy&&u instanceof fy)g.mask=u.mask;else if(g instanceof ae&&yY(u))g.set(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&u!=null&&u.constructor&&g.constructor===u.constructor)g.copy(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(u))typeof g.fromArray=="function"?g.fromArray(u):g.set(...u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof u=="number")typeof g.setScalar=="function"?g.setScalar(u):g.set(u);else{var a;f[m]=u,s&&!s.linear&&CY.includes(m)&&(a=f[m])!=null&&a.isTexture&&f[m].format===ea&&f[m].type===Ws&&(f[m].colorSpace=Kn)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(e=n.object)!=null&&e.isObject3D&&r!==n.eventCount){const l=n.object,u=s.internal.interaction.indexOf(l);u>-1&&s.internal.interaction.splice(u,1),n.eventCount&&l.raycast!==null&&s.internal.interaction.push(l)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Ry(n),i}function Ry(i){var t;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const e=(t=i.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function RY(i,t){i.manual||(kO(i)?(i.left=t.width/-2,i.right=t.width/2,i.top=t.height/2,i.bottom=t.height/-2):i.aspect=t.width/t.height,i.updateProjectionMatrix())}const wa=i=>i==null?void 0:i.isObject3D;function d4(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function jO(i,t,e,n){const s=e.get(t);s&&(e.delete(t),e.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function LY(i,t){const{internal:e}=i.getState();e.interaction=e.interaction.filter(n=>n!==t),e.initialHits=e.initialHits.filter(n=>n!==t),e.hovered.forEach((n,s)=>{(n.eventObject===t||n.object===t)&&e.hovered.delete(s)}),e.capturedMap.forEach((n,s)=>{jO(e.capturedMap,t,n,s)})}function DY(i){function t(u){const{internal:f}=i.getState(),m=u.offsetX-f.initialClick[0],g=u.offsetY-f.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function e(u){return u.filter(f=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=f.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function n(u,f){const m=i.getState(),g=new Set,v=[],_=f?f(m.internal.interaction):m.internal.interaction;for(let S=0;S<_.length;S++){const R=D1(_[S]);R&&(R.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(u,m);function b(S){const R=D1(S);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var B;R.events.compute==null||R.events.compute(u,R,(B=R.previousRoot)==null?void 0:B.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(S,!0):[]}let C=_.flatMap(b).sort((S,R)=>{const B=D1(S.object),D=D1(R.object);return!B||!D?S.distance-R.distance:D.events.priority-B.events.priority||S.distance-R.distance}).filter(S=>{const R=d4(S);return g.has(R)?!1:(g.add(R),!0)});m.events.filter&&(C=m.events.filter(C,m));for(const S of C){let R=S.object;for(;R;){var T;(T=R.__r3f)!=null&&T.eventCount&&v.push({...S,eventObject:R}),R=R.parent}}if("pointerId"in u&&m.internal.capturedMap.has(u.pointerId))for(let S of m.internal.capturedMap.get(u.pointerId).values())g.has(d4(S.intersection))||v.push(S.intersection);return v}function s(u,f,m,g){if(u.length){const v={stopped:!1};for(const _ of u){let b=D1(_.object);if(b||_.object.traverseAncestors(C=>{const T=D1(C);if(T)return b=T,!1}),b){const{raycaster:C,pointer:T,camera:S,internal:R}=b,B=new nt(T.x,T.y,0).unproject(S),D=U=>{var P,X;return(P=(X=R.capturedMap.get(U))==null?void 0:X.has(_.eventObject))!=null?P:!1},N=U=>{const P={intersection:_,target:f.target};R.capturedMap.has(U)?R.capturedMap.get(U).set(_.eventObject,P):R.capturedMap.set(U,new Map([[_.eventObject,P]])),f.target.setPointerCapture(U)},I=U=>{const P=R.capturedMap.get(U);P&&jO(R.capturedMap,_.eventObject,P,U)};let F={};for(let U in f){let P=f[U];typeof P!="function"&&(F[U]=P)}let z={..._,...F,pointer:T,intersections:u,stopped:v.stopped,delta:m,unprojectedPoint:B,ray:C.ray,camera:S,stopPropagation(){const U="pointerId"in f&&R.capturedMap.get(f.pointerId);if((!U||U.has(_.eventObject))&&(z.stopped=v.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(P=>P.eventObject===_.eventObject))){const P=u.slice(0,u.indexOf(_));r([...P,_])}},target:{hasPointerCapture:D,setPointerCapture:N,releasePointerCapture:I},currentTarget:{hasPointerCapture:D,setPointerCapture:N,releasePointerCapture:I},nativeEvent:f};if(g(z),v.stopped===!0)break}}}return u}function r(u){const{internal:f}=i.getState();for(const m of f.hovered.values())if(!u.length||!u.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const v=m.eventObject.__r3f;if(f.hovered.delete(d4(m)),v!=null&&v.eventCount){const _=v.handlers,b={...m,intersections:u};_.onPointerOut==null||_.onPointerOut(b),_.onPointerLeave==null||_.onPointerLeave(b)}}}function a(u,f){for(let m=0;m<f.length;m++){const g=f[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return f=>{const{internal:m}=i.getState();"pointerId"in f&&m.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(f.pointerId)&&(m.capturedMap.delete(f.pointerId),r([]))})}}return function(m){const{onPointerMissed:g,internal:v}=i.getState();v.lastEvent.current=m;const _=u==="onPointerMove",b=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",T=n(m,_?e:void 0),S=b?t(m):0;u==="onPointerDown"&&(v.initialClick=[m.offsetX,m.offsetY],v.initialHits=T.map(B=>B.eventObject)),b&&!T.length&&S<=2&&(a(m,v.interaction),g&&g(m)),_&&r(T);function R(B){const D=B.eventObject,N=D.__r3f;if(!(N!=null&&N.eventCount))return;const I=N.handlers;if(_){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const F=d4(B),z=v.hovered.get(F);z?z.stopped&&B.stopPropagation():(v.hovered.set(F,B),I.onPointerOver==null||I.onPointerOver(B),I.onPointerEnter==null||I.onPointerEnter(B))}I.onPointerMove==null||I.onPointerMove(B)}else{const F=I[u];F?(!b||v.initialHits.includes(D))&&(a(m,v.interaction.filter(z=>!v.initialHits.includes(z))),F(B)):b&&v.initialHits.includes(D)&&a(m,v.interaction.filter(z=>!v.initialHits.includes(z)))}}s(T,m,S,R)}}return{handlePointer:l}}const XL=i=>!!(i!=null&&i.render),qO=ut.createContext(null),BY=(i,t)=>{const e=iY((l,u)=>{const f=new nt,m=new nt,g=new nt;function v(S=u().camera,R=m,B=u().size){const{width:D,height:N,top:I,left:F}=B,z=D/N;R.isVector3?g.copy(R):g.set(...R);const U=S.getWorldPosition(f).distanceTo(g);if(kO(S))return{width:D/S.zoom,height:N/S.zoom,top:I,left:F,factor:1,distance:U,aspect:z};{const P=S.fov*Math.PI/180,X=2*Math.tan(P/2)*U,ot=X*(D/N);return{width:ot,height:X,top:I,left:F,factor:D/ot,distance:U,aspect:z}}}let _;const b=S=>l(R=>({performance:{...R.performance,current:S}})),C=new Pt;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(S=1)=>i(u(),S),advance:(S,R)=>t(S,R,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new a7,pointer:C,mouse:C,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=u();_&&clearTimeout(_),S.performance.current!==S.performance.min&&b(S.performance.min),_=setTimeout(()=>b(u().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:S=>l(R=>({...R,events:{...R.events,...S}})),setSize:(S,R,B=0,D=0)=>{const N=u().camera,I={width:S,height:R,top:B,left:D};l(F=>({size:I,viewport:{...F.viewport,...v(N,m,I)}}))},setDpr:S=>l(R=>{const B=QO(S);return{viewport:{...R.viewport,dpr:B,initialDpr:R.viewport.initialDpr||B}}}),setFrameloop:(S="always")=>{const R=u().clock;R.stop(),R.elapsedTime=0,S!=="never"&&(R.start(),R.elapsedTime=0),l(()=>({frameloop:S}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:ut.createRef(),active:!1,frames:0,priority:0,subscribe:(S,R,B)=>{const D=u().internal;return D.priority=D.priority+(R>0?1:0),D.subscribers.push({ref:S,priority:R,store:B}),D.subscribers=D.subscribers.sort((N,I)=>N.priority-I.priority),()=>{const N=u().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(R>0?1:0),N.subscribers=N.subscribers.filter(I=>I.ref!==S))}}}}}),n=e.getState();let s=n.size,r=n.viewport.dpr,a=n.camera;return e.subscribe(()=>{const{camera:l,size:u,viewport:f,gl:m,set:g}=e.getState();if(u.width!==s.width||u.height!==s.height||f.dpr!==r){s=u,r=f.dpr,RY(l,u),f.dpr>0&&m.setPixelRatio(f.dpr);const v=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(u.width,u.height,v)}l!==a&&(a=l,g(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),e.subscribe(l=>i(l)),e};function YO(){const i=ut.useContext(qO);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function MM(i=e=>e,t){return YO()(i,t)}function d7(i,t=0){const e=YO(),n=e.getState().internal.subscribe,s=VO(i);return Hx(()=>n(s,t,e),[t,n,e]),null}const jL=new WeakMap,OY=i=>{var t;return typeof i=="function"&&(i==null||(t=i.prototype)==null?void 0:t.constructor)===i};function WO(i,t){return function(e,...n){let s;return OY(e)?(s=jL.get(e),s||(s=new e,jL.set(e,s))):s=e,i&&i(s),Promise.all(n.map(r=>new Promise((a,l)=>s.load(r,u=>{wa(u==null?void 0:u.scene)&&Object.assign(u,bY(u.scene)),a(u)},t,u=>l(new Error(`Could not load ${r}: ${u==null?void 0:u.message}`))))))}}function zx(i,t,e,n){const s=Array.isArray(t)?t:[t],r=uY(WO(e,n),[i,...s],{equal:zi.equ});return Array.isArray(t)?r:r[0]}zx.preload=function(i,t,e){const n=Array.isArray(t)?t:[t];return hY(WO(e),[i,...n])};zx.clear=function(i,t){const e=Array.isArray(t)?t:[t];return fY([i,...e])};function NY(i){const t=lY(i);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ut.version}),t}const KO=0,gy={},IY=/^three(?=[A-Z])/,TM=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let UY=0;const PY=i=>typeof i=="function";function JO(i){if(PY(i)){const t=`${UY++}`;return gy[t]=i,t}else Object.assign(gy,i)}function ZO(i,t){const e=TM(i),n=gy[e];if(i!=="primitive"&&!n)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function FY(i,t,e){var n;return i=TM(i)in gy?i:i.replace(IY,""),ZO(i,t),i==="primitive"&&(n=t.object)!=null&&n.__r3f&&delete t.object.__r3f,aE(t.object,e,i,t)}function HY(i){if(!i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?lE(i.parent,i):wa(i.object)&&(i.object.visible=!1),i.isHidden=!0,Ry(i)}}function $O(i){if(i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?oE(i.parent,i):wa(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,Ry(i)}}function p7(i,t,e){const n=t.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!t.object){var s,r;const a=gy[TM(t.type)];t.object=(s=t.props.object)!=null?s:new a(...(r=t.props.args)!=null?r:[]),t.object.__r3f=t}if(gd(t.object,t.props),t.props.attach)oE(i,t);else if(wa(t.object)&&wa(i.object)){const a=i.object.children.indexOf(e==null?void 0:e.object);if(e&&a!==-1){const l=i.object.children.indexOf(t.object);if(l!==-1){i.object.children.splice(l,1);const u=l<a?a-1:a;i.object.children.splice(u,0,t.object)}else t.object.parent=i.object,i.object.children.splice(a,0,t.object),t.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:t.object})}else i.object.add(t.object)}for(const a of t.children)p7(t,a);Ry(t)}}function P8(i,t){t&&(t.parent=i,i.children.push(t),p7(i,t))}function qL(i,t,e){if(!t||!e)return;t.parent=i;const n=i.children.indexOf(e);n!==-1?i.children.splice(n,0,t):i.children.push(t),p7(i,t,e)}function tN(i){if(typeof i.dispose=="function"){const t=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():kL.unstable_scheduleCallback(kL.unstable_IdlePriority,t)}}function N5(i,t,e){if(!t)return;t.parent=null;const n=i.children.indexOf(t);n!==-1&&i.children.splice(n,1),t.props.attach?lE(i,t):wa(t.object)&&wa(i.object)&&(i.object.remove(t.object),LY(GO(t),t.object));const s=t.props.dispose!==null&&e!==!1;for(let r=t.children.length-1;r>=0;r--){const a=t.children[r];N5(t,a,s)}t.children.length=0,delete t.object.__r3f,s&&t.type!=="primitive"&&t.object.type!=="Scene"&&tN(t.object),e===void 0&&Ry(t)}function zY(i,t){for(const e of[i,i.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const n=e.ref(t);typeof n=="function"&&(e.refCleanup=n)}else e.ref&&(e.ref.current=t)}const P4=[];function GY(){for(const[e]of P4){const n=e.parent;if(n){e.props.attach?lE(n,e):wa(e.object)&&wa(n.object)&&n.object.remove(e.object);for(const s of e.children)s.props.attach?lE(e,s):wa(s.object)&&wa(e.object)&&e.object.remove(s.object)}e.isHidden&&$O(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&tN(e.object)}for(const[e,n,s]of P4){e.props=n;const r=e.parent;if(r){var i,t;const a=gy[TM(e.type)];e.object=(i=e.props.object)!=null?i:new a(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,zY(s,e.object),gd(e.object,e.props),e.props.attach?oE(r,e):wa(e.object)&&wa(r.object)&&r.object.add(e.object);for(const l of e.children)l.props.attach?oE(e,l):wa(l.object)&&wa(e.object)&&e.object.add(l.object);Ry(e)}}P4.length=0}const F8=()=>{},YL={};let p4=KO;const kY=0,VY=4,I5=NY({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:FY,removeChild:N5,appendChild:P8,appendInitialChild:P8,insertBefore:qL,appendChildToContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||P8(e,t)},removeChildFromContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||N5(e,t)},insertInContainerBefore(i,t,e){const n=i.getState().scene.__r3f;!t||!e||!n||qL(n,t,e)},getRootHostContext:()=>YL,getChildHostContext:()=>YL,commitUpdate(i,t,e,n,s){var r,a,l;ZO(t,n);let u=!1;if((i.type==="primitive"&&e.object!==n.object||((r=n.args)==null?void 0:r.length)!==((a=e.args)==null?void 0:a.length)||(l=n.args)!=null&&l.some((m,g)=>{var v;return m!==((v=e.args)==null?void 0:v[g])}))&&(u=!0),u)P4.push([i,{...n},s]);else{const m=TY(i,n);Object.keys(m).length&&(Object.assign(i.props,m),gd(i.object,m))}(s.sibling===null||(s.flags&VY)===kY)&&GY()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>aE(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:HY,unhideInstance:$O,createTextInstance:F8,hideTextInstance:F8,unhideTextInstance:F8,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:ut.createContext(null),setCurrentUpdatePriority(i){p4=i},getCurrentUpdatePriority(){return p4},resolveUpdatePriority(){var i;if(p4!==KO)return p4;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return U4.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return U4.ContinuousEventPriority;default:return U4.DefaultEventPriority}},resetFormInstance(){}}),Xg=new Map,B1={objects:"shallow",strict:!1};function QY(i,t){if(!t&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:e,height:n,top:s,left:r}=i.parentElement.getBoundingClientRect();return{width:e,height:n,top:s,left:r}}else if(!t&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function XY(i){const t=Xg.get(i),e=t==null?void 0:t.fiber,n=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=n||BY(F5,KL),a=e||I5.createContainer(r,U4.ConcurrentRoot,null,!1,null,"",s,s,s,null);t||Xg.set(i,{fiber:a,store:r});let l,u,f=!1,m=null;return{async configure(g={}){let v;m=new Promise(at=>v=at);let{gl:_,size:b,scene:C,events:T,onCreated:S,shadows:R=!1,linear:B=!1,flat:D=!1,legacy:N=!1,orthographic:I=!1,frameloop:F="always",dpr:z=[1,2],performance:U,raycaster:P,camera:X,onPointerMissed:ot}=g,it=r.getState(),ct=it.gl;if(!it.gl){const at={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},xt=typeof _=="function"?await _(at):_;XL(xt)?ct=xt:ct=new OO({...at,..._}),it.set({gl:ct})}let dt=it.raycaster;dt||it.set({raycaster:dt=new MO});const{params:Q,...tt}=P||{};if(zi.equ(tt,dt,B1)||gd(dt,{...tt}),zi.equ(Q,dt.params,B1)||gd(dt,{params:{...dt.params,...Q}}),!it.camera||it.camera===u&&!zi.equ(u,X,B1)){u=X;const at=X==null?void 0:X.isCamera,xt=at?X:I?new Cy(0,0,0,0,.1,1e3):new Rs(75,0,.1,1e3);at||(xt.position.z=5,X&&(gd(xt,X),xt.manual||("aspect"in X||"left"in X||"right"in X||"bottom"in X||"top"in X)&&(xt.manual=!0,xt.updateProjectionMatrix())),!it.camera&&!(X!=null&&X.rotation)&&xt.lookAt(0,0,0)),it.set({camera:xt}),dt.camera=xt}if(!it.scene){let at;C!=null&&C.isScene?(at=C,aE(at,r,"",{})):(at=new eA,aE(at,r,"",{}),C&&gd(at,C)),it.set({scene:at})}T&&!it.events.handlers&&it.set({events:T(r)});const et=QY(i,b);if(zi.equ(et,it.size,B1)||it.setSize(et.width,et.height,et.top,et.left),z&&it.viewport.dpr!==QO(z)&&it.setDpr(z),it.frameloop!==F&&it.setFrameloop(F),it.onPointerMissed||it.set({onPointerMissed:ot}),U&&!zi.equ(U,it.performance,B1)&&it.set(at=>({performance:{...at.performance,...U}})),!it.xr){var _t;const at=(lt,wt)=>{const Bt=r.getState();Bt.frameloop!=="never"&&KL(lt,!0,Bt,wt)},xt=()=>{const lt=r.getState();lt.gl.xr.enabled=lt.gl.xr.isPresenting,lt.gl.xr.setAnimationLoop(lt.gl.xr.isPresenting?at:null),lt.gl.xr.isPresenting||F5(lt)},Et={connect(){const lt=r.getState().gl;lt.xr.addEventListener("sessionstart",xt),lt.xr.addEventListener("sessionend",xt)},disconnect(){const lt=r.getState().gl;lt.xr.removeEventListener("sessionstart",xt),lt.xr.removeEventListener("sessionend",xt)}};typeof((_t=ct.xr)==null?void 0:_t.addEventListener)=="function"&&Et.connect(),it.set({xr:Et})}if(ct.shadowMap){const at=ct.shadowMap.enabled,xt=ct.shadowMap.type;if(ct.shadowMap.enabled=!!R,zi.boo(R))ct.shadowMap.type=D_;else if(zi.str(R)){var J;const Et={basic:V9,percentage:jE,soft:D_,variance:lc};ct.shadowMap.type=(J=Et[R])!=null?J:D_}else zi.obj(R)&&Object.assign(ct.shadowMap,R);(at!==ct.shadowMap.enabled||xt!==ct.shadowMap.type)&&(ct.shadowMap.needsUpdate=!0)}return Pn.enabled=!N,f||(ct.outputColorSpace=B?Hu:Kn,ct.toneMapping=D?Rc:Sw),it.legacy!==N&&it.set(()=>({legacy:N})),it.linear!==B&&it.set(()=>({linear:B})),it.flat!==D&&it.set(()=>({flat:D})),_&&!zi.fun(_)&&!XL(_)&&!zi.equ(_,ct,B1)&&gd(ct,_),l=S,f=!0,v(),this},render(g){return!f&&!m&&this.configure(),m.then(()=>{I5.updateContainer(Y.jsx(jY,{store:r,children:g,onCreated:l,rootElement:i}),a,null,()=>{})}),r},unmount(){eN(i)}}}function jY({store:i,children:t,onCreated:e,rootElement:n}){return Hx(()=>{const s=i.getState();s.set(r=>({internal:{...r.internal,active:!0}})),e&&e(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),Y.jsx(qO.Provider,{value:i,children:t})}function eN(i,t){const e=Xg.get(i),n=e==null?void 0:e.fiber;if(n){const s=e==null?void 0:e.store.getState();s&&(s.internal.active=!1),I5.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var r,a,l,u;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(a=r.renderLists)==null||a.dispose==null||a.dispose(),(l=s.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=s.gl)!=null&&u.xr&&s.xr.disconnect(),SY(s.scene),Xg.delete(i)}catch{}},500)})}}const qY=new Set,YY=new Set,WY=new Set;function H8(i,t){if(i.size)for(const{callback:e}of i.values())e(t)}function z_(i,t){switch(i){case"before":return H8(qY,t);case"after":return H8(YY,t);case"tail":return H8(WY,t)}}let z8,G8;function U5(i,t,e){let n=t.clock.getDelta();t.frameloop==="never"&&typeof i=="number"&&(n=i-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=i),z8=t.internal.subscribers;for(let s=0;s<z8.length;s++)G8=z8[s],G8.ref.current(G8.store.getState(),n,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let cE=!1,P5=!1,k8,WL,O1;function nN(i){WL=requestAnimationFrame(nN),cE=!0,k8=0,z_("before",i),P5=!0;for(const e of Xg.values()){var t;O1=e.store.getState(),O1.internal.active&&(O1.frameloop==="always"||O1.internal.frames>0)&&!((t=O1.gl.xr)!=null&&t.isPresenting)&&(k8+=U5(i,O1))}if(P5=!1,z_("after",i),k8===0)return z_("tail",i),cE=!1,cancelAnimationFrame(WL)}function F5(i,t=1){var e;if(!i)return Xg.forEach(n=>F5(n.store.getState(),t));(e=i.gl.xr)!=null&&e.isPresenting||!i.internal.active||i.frameloop==="never"||(t>1?i.internal.frames=Math.min(60,i.internal.frames+t):P5?i.internal.frames=2:i.internal.frames=1,cE||(cE=!0,requestAnimationFrame(nN)))}function KL(i,t=!0,e,n){if(t&&z_("before",i),e)U5(i,e,n);else for(const s of Xg.values())U5(i,s.store.getState());t&&z_("after",i)}const V8={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function KY(i){const{handlePointer:t}=DY(i);return{priority:1,enabled:!0,compute(e,n,s){n.pointer.set(e.offsetX/n.size.width*2-1,-(e.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(V8).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var e;const{events:n,internal:s}=i.getState();(e=s.lastEvent)!=null&&e.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:e=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(r=>({events:{...r.events,connected:e}})),s.handlers)for(const r in s.handlers){const a=s.handlers[r],[l,u]=V8[r];e.addEventListener(l,a,{passive:u})}},disconnect:()=>{const{set:e,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const r=n.handlers[s],[a]=V8[s];n.connected.removeEventListener(a,r)}e(s=>({events:{...s.events,connected:void 0}}))}}}}function JL(i,t){let e;return(...n)=>{window.clearTimeout(e),e=window.setTimeout(()=>i(...n),t)}}function JY({debounce:i,scroll:t,polyfill:e,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,a]=ut.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=ut.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),u=i?typeof i=="number"?i:i.scroll:null,f=i?typeof i=="number"?i:i.resize:null,m=ut.useRef(!1);ut.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,v,_]=ut.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:R,top:B,width:D,height:N,bottom:I,right:F,x:z,y:U}=l.current.element.getBoundingClientRect(),P={left:R,top:B,width:D,height:N,bottom:I,right:F,x:z,y:U};l.current.element instanceof HTMLElement&&n&&(P.height=l.current.element.offsetHeight,P.width=l.current.element.offsetWidth),Object.freeze(P),m.current&&!eW(l.current.lastBounds,P)&&a(l.current.lastBounds=P)};return[S,f?JL(S,f):S,u?JL(S,u):S]},[a,n,u,f]);function b(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",_,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function C(){l.current.element&&(l.current.resizeObserver=new s(_),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",_,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const T=S=>{!S||S===l.current.element||(b(),l.current.element=S,l.current.scrollContainers=iN(S),C())};return $Y(_,!!t),ZY(v),ut.useEffect(()=>{b(),C()},[t,_,v]),ut.useEffect(()=>b,[]),[T,r,g]}function ZY(i){ut.useEffect(()=>{const t=i;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[i])}function $Y(i,t){ut.useEffect(()=>{if(t){const e=i;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[i,t])}function iN(i){const t=[];if(!i||i===document.body)return t;const{overflow:e,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[e,n,s].some(r=>r==="auto"||r==="scroll")&&t.push(i),[...t,...iN(i.parentElement)]}const tW=["x","y","top","bottom","left","right","width","height"],eW=(i,t)=>tW.every(e=>i[e]===t[e]);function nW({ref:i,children:t,fallback:e,resize:n,style:s,gl:r,events:a=KY,eventSource:l,eventPrefix:u,shadows:f,linear:m,flat:g,legacy:v,orthographic:_,frameloop:b,dpr:C,performance:T,raycaster:S,camera:R,scene:B,onPointerMissed:D,onCreated:N,...I}){ut.useMemo(()=>JO(Xq),[]);const F=_Y(),[z,U]=JY({scroll:!0,debounce:{scroll:50,resize:0},...n}),P=ut.useRef(null),X=ut.useRef(null);ut.useImperativeHandle(i,()=>P.current);const ot=VO(D),[it,ct]=ut.useState(!1),[dt,Q]=ut.useState(!1);if(it)throw it;if(dt)throw dt;const tt=ut.useRef(null);Hx(()=>{const _t=P.current;if(U.width>0&&U.height>0&&_t){tt.current||(tt.current=XY(_t));async function J(){await tt.current.configure({gl:r,scene:B,events:a,shadows:f,linear:m,flat:g,legacy:v,orthographic:_,frameloop:b,dpr:C,performance:T,raycaster:S,camera:R,size:U,onPointerMissed:(...at)=>ot.current==null?void 0:ot.current(...at),onCreated:at=>{at.events.connect==null||at.events.connect(l?vY(l)?l.current:l:X.current),u&&at.setEvents({compute:(xt,Et)=>{const lt=xt[u+"X"],wt=xt[u+"Y"];Et.pointer.set(lt/Et.size.width*2-1,-(wt/Et.size.height)*2+1),Et.raycaster.setFromCamera(Et.pointer,Et.camera)}}),N==null||N(at)}}),tt.current.render(Y.jsx(F,{children:Y.jsx(xY,{set:Q,children:Y.jsx(ut.Suspense,{fallback:Y.jsx(AY,{set:ct}),children:t??null})})}))}J()}}),ut.useEffect(()=>{const _t=P.current;if(_t)return()=>eN(_t)},[]);const et=l?"none":"auto";return Y.jsx("div",{ref:X,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:et,...s},...I,children:Y.jsx("div",{ref:z,style:{width:"100%",height:"100%"},children:Y.jsx("canvas",{ref:P,style:{display:"block"},children:e})})})}function iW(i){return Y.jsx(HO,{children:Y.jsx(nW,{...i})})}const sW=i=>i;function rW(i,t=sW){const e=Ba.useSyncExternalStore(i.subscribe,()=>t(i.getState()),()=>t(i.getInitialState()));return Ba.useDebugValue(e),e}const ZL=i=>{const t=NO(i),e=n=>rW(t,n);return Object.assign(e,t),e},aW=i=>i?ZL(i):ZL;let i_=0;const oW=aW(i=>(j1.onStart=(t,e,n)=>{i({active:!0,item:t,loaded:e,total:n,progress:(e-i_)/(n-i_)*100})},j1.onLoad=()=>{i({active:!1})},j1.onError=t=>i(e=>({errors:[...e.errors,t]})),j1.onProgress=(t,e,n)=>{e===n&&(i_=n),i({active:!0,item:t,loaded:e,total:n,progress:(e-i_)/(n-i_)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),lW=parseInt(n0.replace(/\D+/g,""));function $L(i,t){if(t===AB)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===eE||t===Bw){let e=i.getIndex();if(e===null){const a=[],l=i.getAttribute("position");if(l!==void 0){for(let u=0;u<l.count;u++)a.push(u);i.setIndex(a),e=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=e.count-2,s=[];if(e)if(t===eE)for(let a=1;a<=n;a++)s.push(e.getX(0)),s.push(e.getX(a)),s.push(e.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(s.push(e.getX(a)),s.push(e.getX(a+1)),s.push(e.getX(a+2))):(s.push(e.getX(a+2)),s.push(e.getX(a+1)),s.push(e.getX(a)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=i.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}function uE(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let t="";for(let e=0,n=i.length;e<n;e++)t+=String.fromCharCode(i[e]);try{return decodeURIComponent(escape(t))}catch{return t}}const Im="srgb",Zh="srgb-linear",tD=3001,cW=3e3;class m7 extends oa{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new pW(e)}),this.register(function(e){return new mW(e)}),this.register(function(e){return new EW(e)}),this.register(function(e){return new MW(e)}),this.register(function(e){return new TW(e)}),this.register(function(e){return new vW(e)}),this.register(function(e){return new yW(e)}),this.register(function(e){return new _W(e)}),this.register(function(e){return new AW(e)}),this.register(function(e){return new dW(e)}),this.register(function(e){return new xW(e)}),this.register(function(e){return new gW(e)}),this.register(function(e){return new SW(e)}),this.register(function(e){return new bW(e)}),this.register(function(e){return new hW(e)}),this.register(function(e){return new CW(e)}),this.register(function(e){return new wW(e)})}load(t,e,n,s){const r=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const f=Wd.extractUrlBase(t);a=Wd.resolveURL(f,this.path)}else a=Wd.extractUrlBase(t);this.manager.itemStart(t);const l=function(f){s?s(f):console.error(f),r.manager.itemError(t),r.manager.itemEnd(t)},u=new Qo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(f){try{r.parse(f,a,function(m){e(m),r.manager.itemEnd(t)},l)}catch(m){l(m)}},n,l)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,s){let r;const a={},l={};if(typeof t=="string")r=JSON.parse(t);else if(t instanceof ArrayBuffer)if(uE(new Uint8Array(t.slice(0,4)))===sN){try{a[Rn.KHR_BINARY_GLTF]=new RW(t)}catch(m){s&&s(m);return}r=JSON.parse(a[Rn.KHR_BINARY_GLTF].content)}else r=JSON.parse(uE(new Uint8Array(t)));else r=t;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new kW(r,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const m=this.pluginCallbacks[f](u);m.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[m.name]=m,a[m.name]=!0}if(r.extensionsUsed)for(let f=0;f<r.extensionsUsed.length;++f){const m=r.extensionsUsed[f],g=r.extensionsRequired||[];switch(m){case Rn.KHR_MATERIALS_UNLIT:a[m]=new fW;break;case Rn.KHR_DRACO_MESH_COMPRESSION:a[m]=new LW(r,this.dracoLoader);break;case Rn.KHR_TEXTURE_TRANSFORM:a[m]=new DW;break;case Rn.KHR_MESH_QUANTIZATION:a[m]=new BW;break;default:g.indexOf(m)>=0&&l[m]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+m+'".')}}u.setExtensions(a),u.setPlugins(l),u.parse(n,s)}parseAsync(t,e){const n=this;return new Promise(function(s,r){n.parse(t,e,s,r)})}}function uW(){let i={};return{get:function(t){return i[t]},add:function(t,e){i[t]=e},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const Rn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class hW{constructor(t){this.parser=t,this.name=Rn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,s=e.length;n<s;n++){const r=e[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let s=e.cache.get(n);if(s)return s;const r=e.json,u=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let f;const m=new ae(16777215);u.color!==void 0&&m.setRGB(u.color[0],u.color[1],u.color[2],Zh);const g=u.range!==void 0?u.range:0;switch(u.type){case"directional":f=new s7(m),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new i7(m),f.distance=g;break;case"spot":f=new n7(m),f.distance=g,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,f.angle=u.spot.outerConeAngle,f.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return f.position.set(0,0,0),f.decay=2,Ah(f,u),u.intensity!==void 0&&(f.intensity=u.intensity),f.name=e.createUniqueName(u.name||"light_"+t),s=Promise.resolve(f),e.cache.add(n,s),s}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,r=n.json.nodes[t],l=(r.extensions&&r.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return n._getNodeRef(e.cache,l,u)})}}class fW{constructor(){this.name=Rn.KHR_MATERIALS_UNLIT}getMaterialType(){return zo}extendParams(t,e,n){const s=[];t.color=new ae(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const a=r.baseColorFactor;t.color.setRGB(a[0],a[1],a[2],Zh),t.opacity=a[3]}r.baseColorTexture!==void 0&&s.push(n.assignTexture(t,"map",r.baseColorTexture,Im))}return Promise.all(s)}}class dW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(e.emissiveIntensity=r),Promise.resolve()}}class pW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];if(a.clearcoatFactor!==void 0&&(e.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&r.push(n.assignTexture(e,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(e,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const l=a.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Pt(l,l)}return Promise.all(r)}}class mW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_DISPERSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return e.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class gW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.iridescenceFactor!==void 0&&(e.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&r.push(n.assignTexture(e,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(e.iridescenceIOR=a.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&r.push(n.assignTexture(e,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(r)}}class vW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new ae(0,0,0),e.sheenRoughness=0,e.sheen=1;const a=s.extensions[this.name];if(a.sheenColorFactor!==void 0){const l=a.sheenColorFactor;e.sheenColor.setRGB(l[0],l[1],l[2],Zh)}return a.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&r.push(n.assignTexture(e,"sheenColorMap",a.sheenColorTexture,Im)),a.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(e,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(r)}}class yW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.transmissionFactor!==void 0&&(e.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&r.push(n.assignTexture(e,"transmissionMap",a.transmissionTexture)),Promise.all(r)}}class _W{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];e.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&r.push(n.assignTexture(e,"thicknessMap",a.thicknessTexture)),e.attenuationDistance=a.attenuationDistance||1/0;const l=a.attenuationColor||[1,1,1];return e.attenuationColor=new ae().setRGB(l[0],l[1],l[2],Zh),Promise.all(r)}}class AW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return e.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class xW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];e.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&r.push(n.assignTexture(e,"specularIntensityMap",a.specularTexture));const l=a.specularColorFactor||[1,1,1];return e.specularColor=new ae().setRGB(l[0],l[1],l[2],Zh),a.specularColorTexture!==void 0&&r.push(n.assignTexture(e,"specularColorMap",a.specularColorTexture,Im)),Promise.all(r)}}class bW{constructor(t){this.parser=t,this.name=Rn.EXT_MATERIALS_BUMP}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return e.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&r.push(n.assignTexture(e,"bumpMap",a.bumpTexture)),Promise.all(r)}}class SW{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:Dl}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.anisotropyStrength!==void 0&&(e.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(e.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&r.push(n.assignTexture(e,"anisotropyMap",a.anisotropyTexture)),Promise.all(r)}}class EW{constructor(t){this.parser=t,this.name=Rn.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,s=n.textures[t];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],a=e.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r.source,a)}}class MW{constructor(t){this.parser=t,this.name=Rn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,s=n.json,r=s.textures[t];if(!r.extensions||!r.extensions[e])return null;const a=r.extensions[e],l=s.images[a.source];let u=n.textureLoader;if(l.uri){const f=n.options.manager.getHandler(l.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(t,a.source,u);if(s.extensionsRequired&&s.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class TW{constructor(t){this.parser=t,this.name=Rn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,s=n.json,r=s.textures[t];if(!r.extensions||!r.extensions[e])return null;const a=r.extensions[e],l=s.images[a.source];let u=n.textureLoader;if(l.uri){const f=n.options.manager.getHandler(l.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(t,a.source,u);if(s.extensionsRequired&&s.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class CW{constructor(t){this.name=Rn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(l){const u=s.byteOffset||0,f=s.byteLength||0,m=s.count,g=s.byteStride,v=new Uint8Array(l,u,f);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(m,g,v,s.mode,s.filter).then(function(_){return _.buffer}):a.ready.then(function(){const _=new ArrayBuffer(m*g);return a.decodeGltfBuffer(new Uint8Array(_),m,g,v,s.mode,s.filter),_})})}else return null}}class wW{constructor(t){this.name=Rn.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const s=e.meshes[n.mesh];for(const f of s.primitives)if(f.mode!==yl.TRIANGLES&&f.mode!==yl.TRIANGLE_STRIP&&f.mode!==yl.TRIANGLE_FAN&&f.mode!==void 0)return null;const a=n.extensions[this.name].attributes,l=[],u={};for(const f in a)l.push(this.parser.getDependency("accessor",a[f]).then(m=>(u[f]=m,u[f])));return l.length<1?null:(l.push(this.parser.createNodeMesh(t)),Promise.all(l).then(f=>{const m=f.pop(),g=m.isGroup?m.children:[m],v=f[0].count,_=[];for(const b of g){const C=new Fe,T=new nt,S=new ra,R=new nt(1,1,1),B=new Hw(b.geometry,b.material,v);for(let D=0;D<v;D++)u.TRANSLATION&&T.fromBufferAttribute(u.TRANSLATION,D),u.ROTATION&&S.fromBufferAttribute(u.ROTATION,D),u.SCALE&&R.fromBufferAttribute(u.SCALE,D),B.setMatrixAt(D,C.compose(T,S,R));for(const D in u)if(D==="_COLOR_0"){const N=u[D];B.instanceColor=new zg(N.array,N.itemSize,N.normalized)}else D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&b.geometry.setAttribute(D,u[D]);Hn.prototype.copy.call(B,b),this.parser.assignFinalMaterial(B),_.push(B)}return m.isGroup?(m.clear(),m.add(..._),m):_[0]}))}}const sN="glTF",s_=12,eD={JSON:1313821514,BIN:5130562};class RW{constructor(t){this.name=Rn.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,s_);if(this.header={magic:uE(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==sN)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-s_,s=new DataView(t,s_);let r=0;for(;r<n;){const a=s.getUint32(r,!0);r+=4;const l=s.getUint32(r,!0);if(r+=4,l===eD.JSON){const u=new Uint8Array(t,s_+r,a);this.content=uE(u)}else if(l===eD.BIN){const u=s_+r;this.body=t.slice(u,u+a)}r+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class LW{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Rn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,s=this.dracoLoader,r=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,l={},u={},f={};for(const m in a){const g=H5[m]||m.toLowerCase();l[g]=a[m]}for(const m in t.attributes){const g=H5[m]||m.toLowerCase();if(a[m]!==void 0){const v=n.accessors[t.attributes[m]],_=J1[v.componentType];f[g]=_.name,u[g]=v.normalized===!0}}return e.getDependency("bufferView",r).then(function(m){return new Promise(function(g,v){s.decodeDracoFile(m,function(_){for(const b in _.attributes){const C=_.attributes[b],T=u[b];T!==void 0&&(C.normalized=T)}g(_)},l,f,Zh,v)})})}}class DW{constructor(){this.name=Rn.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class BW{constructor(){this.name=Rn.KHR_MESH_QUANTIZATION}}class rN extends Ty{constructor(t,e,n,s){super(t,e,n,s)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=t*s*3+s;for(let a=0;a!==s;a++)e[a]=n[r+a];return e}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=l*2,f=l*3,m=s-e,g=(n-e)/m,v=g*g,_=v*g,b=t*f,C=b-f,T=-2*_+3*v,S=_-v,R=1-T,B=S-v+g;for(let D=0;D!==l;D++){const N=a[C+D+l],I=a[C+D+u]*m,F=a[b+D+l],z=a[b+D]*m;r[D]=R*N+B*I+T*F+S*z}return r}}const OW=new ra;class NW extends rN{interpolate_(t,e,n,s){const r=super.interpolate_(t,e,n,s);return OW.fromArray(r).normalize().toArray(r),r}}const yl={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},J1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},nD={9728:os,9729:Ni,9984:YE,9985:W1,9986:Lm,9987:Tl},iD={33071:Ho,33648:ay,10497:tp},Q8={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},H5={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...lW>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},cd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},IW={CUBICSPLINE:void 0,LINEAR:uy,STEP:cy},X8={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function UW(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Fx({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Lc})),i.DefaultMaterial}function gm(i,t,e){for(const n in e.extensions)i[n]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function Ah(i,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(i.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function PW(i,t,e){let n=!1,s=!1,r=!1;for(let f=0,m=t.length;f<m;f++){const g=t[f];if(g.POSITION!==void 0&&(n=!0),g.NORMAL!==void 0&&(s=!0),g.COLOR_0!==void 0&&(r=!0),n&&s&&r)break}if(!n&&!s&&!r)return Promise.resolve(i);const a=[],l=[],u=[];for(let f=0,m=t.length;f<m;f++){const g=t[f];if(n){const v=g.POSITION!==void 0?e.getDependency("accessor",g.POSITION):i.attributes.position;a.push(v)}if(s){const v=g.NORMAL!==void 0?e.getDependency("accessor",g.NORMAL):i.attributes.normal;l.push(v)}if(r){const v=g.COLOR_0!==void 0?e.getDependency("accessor",g.COLOR_0):i.attributes.color;u.push(v)}}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(f){const m=f[0],g=f[1],v=f[2];return n&&(i.morphAttributes.position=m),s&&(i.morphAttributes.normal=g),r&&(i.morphAttributes.color=v),i.morphTargetsRelative=!0,i})}function FW(i,t){if(i.updateMorphTargets(),t.weights!==void 0)for(let e=0,n=t.weights.length;e<n;e++)i.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(i.morphTargetInfluences.length===e.length){i.morphTargetDictionary={};for(let n=0,s=e.length;n<s;n++)i.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function HW(i){let t;const e=i.extensions&&i.extensions[Rn.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+j8(e.attributes):t=i.indices+":"+j8(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,s=i.targets.length;n<s;n++)t+=":"+j8(i.targets[n]);return t}function j8(i){let t="";const e=Object.keys(i).sort();for(let n=0,s=e.length;n<s;n++)t+=e[n]+":"+i[e[n]]+";";return t}function z5(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function zW(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const GW=new Fe;class kW{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new uW,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||s&&r<98?this.textureLoader=new fO(this.options.manager):this.textureLoader=new AO(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Qo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const l={scene:a[0][s.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:s.asset,parser:n,userData:{}};return gm(r,l,s),Ah(l,s),Promise.all(n._invokeAll(function(u){return u.afterRoot&&u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();t(l)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let s=0,r=e.length;s<r;s++){const a=e[s].joints;for(let l=0,u=a.length;l<u;l++)t[a[l]].isBone=!0}for(let s=0,r=t.length;s<r;s++){const a=t[s];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const s=n.clone(),r=(a,l)=>{const u=this.associations.get(a);u!=null&&this.associations.set(l,u);for(const[f,m]of a.children.entries())r(m,l.children[f])};return r(n,s),s.name+="_instance_"+t.uses[e]++,s}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const s=t(e[n]);if(s)return s}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let s=0;s<e.length;s++){const r=t(e[s]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let s=this.cache.get(n);if(!s){switch(t){case"scene":s=this.loadScene(e);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(e)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(e)});break;case"accessor":s=this.loadAccessor(e);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(e)});break;case"buffer":s=this.loadBuffer(e);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(e)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(e)});break;case"skin":s=this.loadSkin(e);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(e)});break;case"camera":s=this.loadCamera(e);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(t,e)}),!s)throw new Error("Unknown type: "+t);break}this.cache.add(n,s)}return s}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,s=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(s.map(function(r,a){return n.getDependency(t,a)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[Rn.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,a){n.load(Wd.resolveURL(e.uri,s.path),r,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const s=e.byteLength||0,r=e.byteOffset||0;return n.slice(r,r+s)})}loadAccessor(t){const e=this,n=this.json,s=this.json.accessors[t];if(s.bufferView===void 0&&s.sparse===void 0){const a=Q8[s.type],l=J1[s.componentType],u=s.normalized===!0,f=new l(s.count*a);return Promise.resolve(new zn(f,a,u))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(a){const l=a[0],u=Q8[s.type],f=J1[s.componentType],m=f.BYTES_PER_ELEMENT,g=m*u,v=s.byteOffset||0,_=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,b=s.normalized===!0;let C,T;if(_&&_!==g){const S=Math.floor(v/_),R="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+S+":"+s.count;let B=e.cache.get(R);B||(C=new f(l,S*_,s.count*_/m),B=new Dx(C,_/m),e.cache.add(R,B)),T=new ep(B,u,v%_/m,b)}else l===null?C=new f(s.count*u):C=new f(l,v,s.count*u),T=new zn(C,u,b);if(s.sparse!==void 0){const S=Q8.SCALAR,R=J1[s.sparse.indices.componentType],B=s.sparse.indices.byteOffset||0,D=s.sparse.values.byteOffset||0,N=new R(a[1],B,s.sparse.count*S),I=new f(a[2],D,s.sparse.count*u);l!==null&&(T=new zn(T.array.slice(),T.itemSize,T.normalized));for(let F=0,z=N.length;F<z;F++){const U=N[F];if(T.setX(U,I[F*u]),u>=2&&T.setY(U,I[F*u+1]),u>=3&&T.setZ(U,I[F*u+2]),u>=4&&T.setW(U,I[F*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return T})}loadTexture(t){const e=this.json,n=this.options,r=e.textures[t].source,a=e.images[r];let l=this.textureLoader;if(a.uri){const u=n.manager.getHandler(a.uri);u!==null&&(l=u)}return this.loadTextureImage(t,r,l)}loadTextureImage(t,e,n){const s=this,r=this.json,a=r.textures[t],l=r.images[e],u=(l.uri||l.bufferView)+":"+a.sampler;if(this.textureCache[u])return this.textureCache[u];const f=this.loadImageSource(e,n).then(function(m){m.flipY=!1,m.name=a.name||l.name||"",m.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(m.name=l.uri);const v=(r.samplers||{})[a.sampler]||{};return m.magFilter=nD[v.magFilter]||Ni,m.minFilter=nD[v.minFilter]||Tl,m.wrapS=iD[v.wrapS]||tp,m.wrapT=iD[v.wrapT]||tp,s.associations.set(m,{textures:t}),m}).catch(function(){return null});return this.textureCache[u]=f,f}loadImageSource(t,e){const n=this,s=this.json,r=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(g=>g.clone());const a=s.images[t],l=self.URL||self.webkitURL;let u=a.uri||"",f=!1;if(a.bufferView!==void 0)u=n.getDependency("bufferView",a.bufferView).then(function(g){f=!0;const v=new Blob([g],{type:a.mimeType});return u=l.createObjectURL(v),u});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const m=Promise.resolve(u).then(function(g){return new Promise(function(v,_){let b=v;e.isImageBitmapLoader===!0&&(b=function(C){const T=new wi(C);T.needsUpdate=!0,v(T)}),e.load(Wd.resolveURL(g,r.path),b,void 0,_)})}).then(function(g){return f===!0&&l.revokeObjectURL(u),Ah(g,a),g.userData.mimeType=a.mimeType||zW(a.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),g});return this.sourceCache[t]=m,m}assignTexture(t,e,n,s){const r=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),r.extensions[Rn.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[Rn.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=r.associations.get(a);a=r.extensions[Rn.KHR_TEXTURE_TRANSFORM].extendTexture(a,l),r.associations.set(a,u)}}return s!==void 0&&(typeof s=="number"&&(s=s===tD?Im:Zh),"colorSpace"in a?a.colorSpace=s:a.encoding=s===Im?tD:cW),t[e]=a,a})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const s=e.attributes.tangent===void 0,r=e.attributes.color!==void 0,a=e.attributes.normal===void 0;if(t.isPoints){const l="PointsMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new lM,gs.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(l,u)),n=u}else if(t.isLine){const l="LineBasicMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new aa,gs.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,this.cache.add(l,u)),n=u}if(s||r||a){let l="ClonedMaterial:"+n.uuid+":";s&&(l+="derivative-tangents:"),r&&(l+="vertex-colors:"),a&&(l+="flat-shading:");let u=this.cache.get(l);u||(u=n.clone(),r&&(u.vertexColors=!0),a&&(u.flatShading=!0),s&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(n))),n=u}t.material=n}getMaterialType(){return Fx}loadMaterial(t){const e=this,n=this.json,s=this.extensions,r=n.materials[t];let a;const l={},u=r.extensions||{},f=[];if(u[Rn.KHR_MATERIALS_UNLIT]){const g=s[Rn.KHR_MATERIALS_UNLIT];a=g.getMaterialType(),f.push(g.extendParams(l,r,e))}else{const g=r.pbrMetallicRoughness||{};if(l.color=new ae(1,1,1),l.opacity=1,Array.isArray(g.baseColorFactor)){const v=g.baseColorFactor;l.color.setRGB(v[0],v[1],v[2],Zh),l.opacity=v[3]}g.baseColorTexture!==void 0&&f.push(e.assignTexture(l,"map",g.baseColorTexture,Im)),l.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,l.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(f.push(e.assignTexture(l,"metalnessMap",g.metallicRoughnessTexture)),f.push(e.assignTexture(l,"roughnessMap",g.metallicRoughnessTexture))),a=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(t)}),f.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(t,l)})))}r.doubleSided===!0&&(l.side=La);const m=r.alphaMode||X8.OPAQUE;if(m===X8.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,m===X8.MASK&&(l.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&a!==zo&&(f.push(e.assignTexture(l,"normalMap",r.normalTexture)),l.normalScale=new Pt(1,1),r.normalTexture.scale!==void 0)){const g=r.normalTexture.scale;l.normalScale.set(g,g)}if(r.occlusionTexture!==void 0&&a!==zo&&(f.push(e.assignTexture(l,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&a!==zo){const g=r.emissiveFactor;l.emissive=new ae().setRGB(g[0],g[1],g[2],Zh)}return r.emissiveTexture!==void 0&&a!==zo&&f.push(e.assignTexture(l,"emissiveMap",r.emissiveTexture,Im)),Promise.all(f).then(function(){const g=new a(l);return r.name&&(g.name=r.name),Ah(g,r),e.associations.set(g,{materials:t}),r.extensions&&gm(s,g,r),g})}createUniqueName(t){const e=Qn.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,n=this.extensions,s=this.primitiveCache;function r(l){return n[Rn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,e).then(function(u){return sD(u,l,e)})}const a=[];for(let l=0,u=t.length;l<u;l++){const f=t[l],m=HW(f),g=s[m];if(g)a.push(g.promise);else{let v;f.extensions&&f.extensions[Rn.KHR_DRACO_MESH_COMPRESSION]?v=r(f):v=sD(new $e,f,e),s[m]={primitive:f,promise:v},a.push(v)}}return Promise.all(a)}loadMesh(t){const e=this,n=this.json,s=this.extensions,r=n.meshes[t],a=r.primitives,l=[];for(let u=0,f=a.length;u<f;u++){const m=a[u].material===void 0?UW(this.cache):this.getDependency("material",a[u].material);l.push(m)}return l.push(e.loadGeometries(a)),Promise.all(l).then(function(u){const f=u.slice(0,u.length-1),m=u[u.length-1],g=[];for(let _=0,b=m.length;_<b;_++){const C=m[_],T=a[_];let S;const R=f[_];if(T.mode===yl.TRIANGLES||T.mode===yl.TRIANGLE_STRIP||T.mode===yl.TRIANGLE_FAN||T.mode===void 0)S=r.isSkinnedMesh===!0?new Fw(C,R):new as(C,R),S.isSkinnedMesh===!0&&S.normalizeSkinWeights(),T.mode===yl.TRIANGLE_STRIP?S.geometry=$L(S.geometry,Bw):T.mode===yl.TRIANGLE_FAN&&(S.geometry=$L(S.geometry,eE));else if(T.mode===yl.LINES)S=new Dc(C,R);else if(T.mode===yl.LINE_STRIP)S=new rf(C,R);else if(T.mode===yl.LINE_LOOP)S=new zw(C,R);else if(T.mode===yl.POINTS)S=new Gw(C,R);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+T.mode);Object.keys(S.geometry.morphAttributes).length>0&&FW(S,r),S.name=e.createUniqueName(r.name||"mesh_"+t),Ah(S,r),T.extensions&&gm(s,S,T),e.assignFinalMaterial(S),g.push(S)}for(let _=0,b=g.length;_<b;_++)e.associations.set(g[_],{meshes:t,primitives:_});if(g.length===1)return r.extensions&&gm(s,g[0],r),g[0];const v=new Wh;r.extensions&&gm(s,v,r),e.associations.set(v,{meshes:t});for(let _=0,b=g.length;_<b;_++)v.add(g[_]);return v})}loadCamera(t){let e;const n=this.json.cameras[t],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?e=new Rs($_.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(e=new Cy(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),Ah(e,n),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],n=[];for(let s=0,r=e.joints.length;s<r;s++)n.push(this._loadNodeShallow(e.joints[s]));return e.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(s){const r=s.pop(),a=s,l=[],u=[];for(let f=0,m=a.length;f<m;f++){const g=a[f];if(g){l.push(g);const v=new Fe;r!==null&&v.fromArray(r.array,f*16),u.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[f])}return new Bx(l,u)})}loadAnimation(t){const e=this.json,n=this,s=e.animations[t],r=s.name?s.name:"animation_"+t,a=[],l=[],u=[],f=[],m=[];for(let g=0,v=s.channels.length;g<v;g++){const _=s.channels[g],b=s.samplers[_.sampler],C=_.target,T=C.node,S=s.parameters!==void 0?s.parameters[b.input]:b.input,R=s.parameters!==void 0?s.parameters[b.output]:b.output;C.node!==void 0&&(a.push(this.getDependency("node",T)),l.push(this.getDependency("accessor",S)),u.push(this.getDependency("accessor",R)),f.push(b),m.push(C))}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(f),Promise.all(m)]).then(function(g){const v=g[0],_=g[1],b=g[2],C=g[3],T=g[4],S=[];for(let R=0,B=v.length;R<B;R++){const D=v[R],N=_[R],I=b[R],F=C[R],z=T[R];if(D===void 0)continue;D.updateMatrix&&D.updateMatrix();const U=n._createAnimationTracks(D,N,I,F,z);if(U)for(let P=0;P<U.length;P++)S.push(U[P])}return new my(r,void 0,S)})}createNodeMesh(t){const e=this.json,n=this,s=e.nodes[t];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(r){const a=n._getNodeRef(n.meshCache,s.mesh,r);return s.weights!==void 0&&a.traverse(function(l){if(l.isMesh)for(let u=0,f=s.weights.length;u<f;u++)l.morphTargetInfluences[u]=s.weights[u]}),a})}loadNode(t){const e=this.json,n=this,s=e.nodes[t],r=n._loadNodeShallow(t),a=[],l=s.children||[];for(let f=0,m=l.length;f<m;f++)a.push(n.getDependency("node",l[f]));const u=s.skin===void 0?Promise.resolve(null):n.getDependency("skin",s.skin);return Promise.all([r,Promise.all(a),u]).then(function(f){const m=f[0],g=f[1],v=f[2];v!==null&&m.traverse(function(_){_.isSkinnedMesh&&_.bind(v,GW)});for(let _=0,b=g.length;_<b;_++)m.add(g[_]);return m})}_loadNodeShallow(t){const e=this.json,n=this.extensions,s=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const r=e.nodes[t],a=r.name?s.createUniqueName(r.name):"",l=[],u=s._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(t)});return u&&l.push(u),r.camera!==void 0&&l.push(s.getDependency("camera",r.camera).then(function(f){return s._getNodeRef(s.cameraCache,r.camera,f)})),s._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(t)}).forEach(function(f){l.push(f)}),this.nodeCache[t]=Promise.all(l).then(function(f){let m;if(r.isBone===!0?m=new aM:f.length>1?m=new Wh:f.length===1?m=f[0]:m=new Hn,m!==f[0])for(let g=0,v=f.length;g<v;g++)m.add(f[g]);if(r.name&&(m.userData.name=r.name,m.name=a),Ah(m,r),r.extensions&&gm(n,m,r),r.matrix!==void 0){const g=new Fe;g.fromArray(r.matrix),m.applyMatrix4(g)}else r.translation!==void 0&&m.position.fromArray(r.translation),r.rotation!==void 0&&m.quaternion.fromArray(r.rotation),r.scale!==void 0&&m.scale.fromArray(r.scale);return s.associations.has(m)||s.associations.set(m,{}),s.associations.get(m).nodes=t,m}),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],s=this,r=new Wh;n.name&&(r.name=s.createUniqueName(n.name)),Ah(r,n),n.extensions&&gm(e,r,n);const a=n.nodes||[],l=[];for(let u=0,f=a.length;u<f;u++)l.push(s.getDependency("node",a[u]));return Promise.all(l).then(function(u){for(let m=0,g=u.length;m<g;m++)r.add(u[m]);const f=m=>{const g=new Map;for(const[v,_]of s.associations)(v instanceof gs||v instanceof wi)&&g.set(v,_);return m.traverse(v=>{const _=s.associations.get(v);_!=null&&g.set(v,_)}),g};return s.associations=f(r),r})}_createAnimationTracks(t,e,n,s,r){const a=[],l=t.name?t.name:t.uuid,u=[];cd[r.path]===cd.weights?t.traverse(function(v){v.morphTargetInfluences&&u.push(v.name?v.name:v.uuid)}):u.push(l);let f;switch(cd[r.path]){case cd.weights:f=kg;break;case cd.rotation:f=Vg;break;case cd.position:case cd.scale:f=Qg;break;default:switch(n.itemSize){case 1:f=kg;break;case 2:case 3:default:f=Qg;break}break}const m=s.interpolation!==void 0?IW[s.interpolation]:uy,g=this._getArrayFromAccessor(n);for(let v=0,_=u.length;v<_;v++){const b=new f(u[v]+"."+cd[r.path],e.array,g,m);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(b),a.push(b)}return a}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const n=z5(e.constructor),s=new Float32Array(e.length);for(let r=0,a=e.length;r<a;r++)s[r]=e[r]*n;e=s}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(n){const s=this instanceof Vg?NW:rN;return new s(this.times,this.values,this.getValueSize()/3,n)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function VW(i,t,e){const n=t.attributes,s=new Br;if(n.POSITION!==void 0){const l=e.json.accessors[n.POSITION],u=l.min,f=l.max;if(u!==void 0&&f!==void 0){if(s.set(new nt(u[0],u[1],u[2]),new nt(f[0],f[1],f[2])),l.normalized){const m=z5(J1[l.componentType]);s.min.multiplyScalar(m),s.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=t.targets;if(r!==void 0){const l=new nt,u=new nt;for(let f=0,m=r.length;f<m;f++){const g=r[f];if(g.POSITION!==void 0){const v=e.json.accessors[g.POSITION],_=v.min,b=v.max;if(_!==void 0&&b!==void 0){if(u.setX(Math.max(Math.abs(_[0]),Math.abs(b[0]))),u.setY(Math.max(Math.abs(_[1]),Math.abs(b[1]))),u.setZ(Math.max(Math.abs(_[2]),Math.abs(b[2]))),v.normalized){const C=z5(J1[v.componentType]);u.multiplyScalar(C)}l.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(l)}i.boundingBox=s;const a=new pr;s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=a}function sD(i,t,e){const n=t.attributes,s=[];function r(a,l){return e.getDependency("accessor",a).then(function(u){i.setAttribute(l,u)})}for(const a in n){const l=H5[a]||a.toLowerCase();l in i.attributes||s.push(r(n[a],l))}if(t.indices!==void 0&&!i.index){const a=e.getDependency("accessor",t.indices).then(function(l){i.setIndex(l)});s.push(a)}return Ah(i,t),VW(i,t,e),Promise.all(s).then(function(){return t.targets!==void 0?PW(i,t.targets,e):i})}const q8=new WeakMap;class QW extends oa{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,s){const r=new Qo(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,a=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,l).then(e).catch(s)},n,s)}decodeDracoFile(t,e,n,s){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(t,r).then(e)}decodeGeometry(t,e){for(const u in e.attributeTypes){const f=e.attributeTypes[u];f.BYTES_PER_ELEMENT!==void 0&&(e.attributeTypes[u]=f.name)}const n=JSON.stringify(e);if(q8.has(t)){const u=q8.get(t);if(u.key===n)return u.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,a=t.byteLength,l=this._getWorker(r,a).then(u=>(s=u,new Promise((f,m)=>{s._callbacks[r]={resolve:f,reject:m},s.postMessage({type:"decode",id:r,taskConfig:e,buffer:t},[t])}))).then(u=>this._createGeometry(u.geometry));return l.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),q8.set(t,{key:n,promise:l}),l}_createGeometry(t){const e=new $e;t.index&&e.setIndex(new zn(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const s=t.attributes[n],r=s.name,a=s.array,l=s.itemSize;e.setAttribute(r,new zn(a,l))}return e}_loadLibrary(t,e){const n=new Qo(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((s,r)=>{n.load(t,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(n=>{const s=n[0];t||(this.decoderConfig.wasmBinary=n[1]);const r=XW.toString(),a=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const a=r.data;switch(a.type){case"decode":s._callbacks[a.id].resolve(a);break;case"error":s._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function XW(){let i,t;onmessage=function(a){const l=a.data;switch(l.type){case"init":i=l.decoderConfig,t=new Promise(function(m){i.onModuleLoaded=function(g){m({draco:g})},DracoDecoderModule(i)});break;case"decode":const u=l.buffer,f=l.taskConfig;t.then(m=>{const g=m.draco,v=new g.Decoder,_=new g.DecoderBuffer;_.Init(new Int8Array(u),u.byteLength);try{const b=e(g,v,_,f),C=b.attributes.map(T=>T.array.buffer);b.index&&C.push(b.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:b},C)}catch(b){console.error(b),self.postMessage({type:"error",id:l.id,error:b.message})}finally{g.destroy(_),g.destroy(v)}});break}};function e(a,l,u,f){const m=f.attributeIDs,g=f.attributeTypes;let v,_;const b=l.GetEncodedGeometryType(u);if(b===a.TRIANGULAR_MESH)v=new a.Mesh,_=l.DecodeBufferToMesh(u,v);else if(b===a.POINT_CLOUD)v=new a.PointCloud,_=l.DecodeBufferToPointCloud(u,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!_.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+_.error_msg());const C={index:null,attributes:[]};for(const T in m){const S=self[g[T]];let R,B;if(f.useUniqueIDs)B=m[T],R=l.GetAttributeByUniqueId(v,B);else{if(B=l.GetAttributeId(v,a[m[T]]),B===-1)continue;R=l.GetAttribute(v,B)}C.attributes.push(s(a,l,v,T,S,R))}return b===a.TRIANGULAR_MESH&&(C.index=n(a,l,v)),a.destroy(v),C}function n(a,l,u){const m=u.num_faces()*3,g=m*4,v=a._malloc(g);l.GetTrianglesUInt32Array(u,g,v);const _=new Uint32Array(a.HEAPF32.buffer,v,m).slice();return a._free(v),{array:_,itemSize:1}}function s(a,l,u,f,m,g){const v=g.num_components(),b=u.num_points()*v,C=b*m.BYTES_PER_ELEMENT,T=r(a,m),S=a._malloc(C);l.GetAttributeDataArrayForAllPoints(u,g,T,C,S);const R=new m(a.HEAPF32.buffer,S,b).slice();return a._free(S),{name:f,array:R,itemSize:v}}function r(a,l){switch(l){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let m4;const Y8=()=>{if(m4)return m4;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=i;WebAssembly.validate(e)&&(s=t);let r;const a=WebAssembly.instantiate(l(s),{}).then(g=>{r=g.instance,r.exports.__wasm_call_ctors()});function l(g){const v=new Uint8Array(g.length);for(let b=0;b<g.length;++b){const C=g.charCodeAt(b);v[b]=C>96?C-71:C>64?C-65:C>47?C+4:C>46?63:62}let _=0;for(let b=0;b<g.length;++b)v[_++]=v[b]<60?n[v[b]]:(v[b]-60)*64+v[++b];return v.buffer.slice(0,_)}function u(g,v,_,b,C,T){const S=r.exports.sbrk,R=_+3&-4,B=S(R*b),D=S(C.length),N=new Uint8Array(r.exports.memory.buffer);N.set(C,D);const I=g(B,_,b,D,C.length);if(I===0&&T&&T(B,R,b),v.set(N.subarray(B,B+_*b)),S(B-S(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},m={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return m4={ready:a,supported:!0,decodeVertexBuffer(g,v,_,b,C){u(r.exports.meshopt_decodeVertexBuffer,g,v,_,b,r.exports[f[C]])},decodeIndexBuffer(g,v,_,b){u(r.exports.meshopt_decodeIndexBuffer,g,v,_,b)},decodeIndexSequence(g,v,_,b){u(r.exports.meshopt_decodeIndexSequence,g,v,_,b)},decodeGltfBuffer(g,v,_,b,C,T){u(r.exports[m[C]],g,v,_,b,r.exports[f[T]])}},m4};let g4=null,aN="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function oN(i=!0,t=!0,e){return n=>{e&&e(n),i&&(g4||(g4=new QW),g4.setDecoderPath(typeof i=="string"?i:aN),n.setDRACOLoader(g4)),t&&n.setMeshoptDecoder(typeof Y8=="function"?Y8():Y8)}}const Gx=(i,t,e,n)=>zx(m7,i,oN(t,e,n));Gx.preload=(i,t,e,n)=>zx.preload(m7,i,oN(t,e,n));Gx.clear=i=>zx.clear(m7,i);Gx.setDecoderPath=i=>{aN=i};const jW="modulepreload",qW=function(i){return"/vibefolio/"+i},rD={},v4=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let a=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=a(e.map(f=>{if(f=qW(f),f in rD)return;rD[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":jW,m||(v.as="script"),v.crossOrigin="",v.href=f,u&&v.setAttribute("nonce",u),document.head.appendChild(v),m)return new Promise((_,b)=>{v.addEventListener("load",_),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})};Gx.preload("models/retro_computer.glb");function YW(i){const t=ut.useRef(null),{nodes:e,materials:n}=Gx("models/retro_computer.glb");return Y.jsx("group",{ref:t,children:Y.jsxs("group",{...i,dispose:null,children:[Y.jsx("mesh",{castShadow:!0,geometry:e.Object_5.geometry,material:n.material_0,position:[.063,0,.438]}),Y.jsx("mesh",{castShadow:!0,geometry:e.Object_7.geometry,material:n.material_0,position:[.063,.375,.438]}),Y.jsx("mesh",{castShadow:!0,geometry:e.Object_9.geometry,material:n.material_0,position:[.063,.5,.438]}),Y.jsx("mesh",{castShadow:!0,geometry:e.Object_11.geometry,material:n.material_0,position:[.063,.563,.313]}),Y.jsx("mesh",{castShadow:!0,geometry:e.Object_13.geometry,material:n.material_0,position:[.063,1.5,.313]}),Y.jsx("mesh",{castShadow:!0,geometry:e.Object_15.geometry,material:n.material_0,position:[.063,1.313,.313]}),Y.jsx("mesh",{castShadow:!0,geometry:e.Object_17.geometry,material:n.material_0,position:[-1.031,1.313,.313]}),Y.jsx("mesh",{castShadow:!0,geometry:e.Object_19.geometry,material:n.material_0,position:[-.094,1.313,.313]}),Y.jsx("mesh",{castShadow:!0,geometry:e.Object_21.geometry,material:n.material_0,position:[-.094,1.313,.5]}),Y.jsx("mesh",{castShadow:!0,geometry:e.Object_23.geometry,material:n.material_0,position:[-.094,1.188,.5]}),Y.jsx("mesh",{castShadow:!0,geometry:e.Object_25.geometry,material:n.material_0,position:[.188,0,-.75]}),Y.jsx("mesh",{castShadow:!0,geometry:e.Object_27.geometry,material:n.material_0,position:[-.75,0,-.625]})]})})}function WW(i){ut.useEffect(()=>{const t=e=>{i({x:e.clientX,y:e.clientY})};return window.addEventListener("pointermove",t),()=>window.removeEventListener("pointermove",t)},[i])}function KW(i,t){const{size:e}=MM(),{enabled:n=!0,initialAngle:s=0}=t,r=4,a=Math.PI/24,l=ut.useRef(s),u=ut.useRef(-a);WW(f=>{const m=f.x/e.width*1-1;u.current=m-a}),d7((f,m)=>{if(!n)return;l.current=$_.damp(l.current,u.current,1,m);const g=r*Math.sin(l.current),v=r*Math.cos(l.current);i&&(i.position.set(g,2,v),i.lookAt(0,0,0))})}const lN=ut.createContext(null),cN=()=>{const i=ut.useContext(lN);if(!i)throw new Error("useCameraContext must be used within CameraProvider");return i};function JW({children:i}){const[t,e]=ut.useState(!1);return Y.jsx(lN.Provider,{value:{started:t,start:()=>e(!0)},children:i})}function ZW(){const{camera:i}=MM(),{started:t}=cN(),[e,n]=ut.useState(!1),s=ut.useRef(0),r=4,a=new nt(-5,3,5),l=new nt(r*Math.sin(-1),2,r*Math.cos(-1)),u=Math.atan2(l.x,l.z);return d7((f,m)=>{if(!t||e)return;s.current+=m*.5;const g=$_.clamp(s.current,0,1),v=$_.smoothstep(g,0,1),_=a.clone().lerp(l,v);i.position.copy(_),i.lookAt(0,0,0),g>=1&&n(!0)}),KW(i,{initialAngle:u,enabled:e}),null}/**
 * postprocessing v6.37.3 build Sun Apr 27 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var W8=1/1e3,$W=1e3,tK=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(i){typeof document<"u"&&document.hidden!==void 0&&(i?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=i)}get delta(){return this._delta*W8}get fixedDelta(){return this._fixedDelta*W8}set fixedDelta(i){this._fixedDelta=i*$W}get elapsed(){return this._elapsed*W8}update(i){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(i!==void 0?i:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(i){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},eK=(()=>{const i=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),e=new $e;return e.setAttribute("position",new zn(i,3)),e.setAttribute("uv",new zn(t,2)),e})(),ao=class G5{static get fullscreenGeometry(){return eK}constructor(t="Pass",e=new eA,n=new Rx){this.name=t,this.renderer=null,this.scene=e,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;e!==null?e.material=t:(e=new as(G5.fullscreenGeometry,t),e.frustumCulled=!1,this.scene===null&&(this.scene=new eA),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=ap){}render(t,e,n,s,r){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof Ds||e instanceof gs||e instanceof wi||e instanceof G5)&&this[t].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},nK=class extends ao{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(i,t,e,n,s){const r=i.state.buffers.stencil;r.setLocked(!1),r.setTest(!1)}},iK=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,uN="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",hN=class extends Ks{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new xn(null),opacity:new xn(1)},blending:sa,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:iK,vertexShader:uN})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}getOpacity(i){return this.uniforms.opacity.value}setOpacity(i){this.uniforms.opacity.value=i}},sK=class extends ao{constructor(i,t=!0){super("CopyPass"),this.fullscreenMaterial=new hN,this.needsSwap=!1,this.renderTarget=i,i===void 0&&(this.renderTarget=new Ds(1,1,{minFilter:Ni,magFilter:Ni,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(i){this.autoResize=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(i){this.autoResize=i}render(i,t,e,n,s){this.fullscreenMaterial.inputBuffer=t.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,t){this.autoResize&&this.renderTarget.setSize(i,t)}initialize(i,t,e){e!==void 0&&(this.renderTarget.texture.type=e,e!==Ws?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":i!==null&&i.outputColorSpace===Kn&&(this.renderTarget.texture.colorSpace=Kn))}},aD=new ae,fN=class extends ao{constructor(i=!0,t=!0,e=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=i,this.depth=t,this.stencil=e,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(i,t,e){this.color=i,this.depth=t,this.stencil=e}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(i){this.overrideClearColor=i}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(i){this.overrideClearAlpha=i}render(i,t,e,n,s){const r=this.overrideClearColor,a=this.overrideClearAlpha,l=i.getClearAlpha(),u=r!==null,f=a>=0;u?(i.getClearColor(aD),i.setClearColor(r,f?a:l)):f&&i.setClearAlpha(a),i.setRenderTarget(this.renderToScreen?null:t),i.clear(this.color,this.depth,this.stencil),u?i.setClearColor(aD,l):f&&i.setClearAlpha(l)}},rK=class extends ao{constructor(i,t){super("MaskPass",i,t),this.needsSwap=!1,this.clearPass=new fN(!1,!1,!0),this.inverse=!1}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get inverted(){return this.inverse}set inverted(i){this.inverse=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(i){this.inverted=i}render(i,t,e,n,s){const r=i.getContext(),a=i.state.buffers,l=this.scene,u=this.camera,f=this.clearPass,m=this.inverted?0:1,g=1-m;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),a.stencil.setFunc(r.ALWAYS,m,4294967295),a.stencil.setClear(g),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(i,null):(f.render(i,t),f.render(i,e))),this.renderToScreen?(i.setRenderTarget(null),i.render(l,u)):(i.setRenderTarget(t),i.render(l,u),i.setRenderTarget(e),i.render(l,u)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(r.EQUAL,1,4294967295),a.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),a.stencil.setLocked(!0)}},aK=class{constructor(i=null,{depthBuffer:t=!0,stencilBuffer:e=!1,multisampling:n=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,e,s,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new sK,this.depthTexture=null,this.passes=[],this.timer=new tK,this.autoRenderToScreen=!0,this.setRenderer(i)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(i){const t=this.inputBuffer,e=this.multisampling;e>0&&i>0?(this.inputBuffer.samples=i,this.outputBuffer.samples=i,this.inputBuffer.dispose(),this.outputBuffer.dispose()):e!==i&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,i),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(i){if(this.renderer=i,i!==null){const t=i.getSize(new Pt),e=i.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===Ws&&i.outputColorSpace===Kn&&(this.inputBuffer.texture.colorSpace=Kn,this.outputBuffer.texture.colorSpace=Kn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),i.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(i,e,n)}}replaceRenderer(i,t=!0){const e=this.renderer,n=e.domElement.parentNode;return this.setRenderer(i),t&&n!==null&&(n.removeChild(e.domElement),n.appendChild(i.domElement)),e}createDepthTexture(){const i=this.depthTexture=new Ox;return this.inputBuffer.depthTexture=i,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(i.format=Hg,i.type=Fg):i.type=Fu,i}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const i of this.passes)i.setDepthTexture(null)}}createBuffer(i,t,e,n){const s=this.renderer,r=s===null?new Pt:s.getDrawingBufferSize(new Pt),a={minFilter:Ni,magFilter:Ni,stencilBuffer:t,depthBuffer:i,type:e},l=new Ds(r.width,r.height,a);return n>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=n),e===Ws&&s!==null&&s.outputColorSpace===Kn&&(l.texture.colorSpace=Kn),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(i){for(const t of this.passes)t.mainScene=i}setMainCamera(i){for(const t of this.passes)t.mainCamera=i}addPass(i,t){const e=this.passes,n=this.renderer,s=n.getDrawingBufferSize(new Pt),r=n.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(i.setRenderer(n),i.setSize(s.width,s.height),i.initialize(n,r,a),this.autoRenderToScreen&&(e.length>0&&(e[e.length-1].renderToScreen=!1),i.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?e.splice(t,0,i):e.push(i),this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!0),i.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(i of e)i.setDepthTexture(l)}else i.setDepthTexture(this.depthTexture)}removePass(i){const t=this.passes,e=t.indexOf(i);if(e!==-1&&t.splice(e,1).length>0){if(this.depthTexture!==null){const r=(l,u)=>l||u.needsDepthTexture;t.reduce(r,!1)||(i.getDepthTexture()===this.depthTexture&&i.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&e===t.length&&(i.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const i=this.passes;this.deleteDepthTexture(),i.length>0&&(this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!1),this.passes=[])}render(i){const t=this.renderer,e=this.copyPass;let n=this.inputBuffer,s=this.outputBuffer,r=!1,a,l,u;i===void 0&&(this.timer.update(),i=this.timer.getDelta());for(const f of this.passes)f.enabled&&(f.render(t,n,s,i,r),f.needsSwap&&(r&&(e.renderToScreen=f.renderToScreen,a=t.getContext(),l=t.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),e.render(t,n,s,i,r),l.setFunc(a.EQUAL,1,4294967295)),u=n,n=s,s=u),f instanceof rK?r=!0:f instanceof nK&&(r=!1))}setSize(i,t,e){const n=this.renderer,s=n.getSize(new Pt);(i===void 0||t===void 0)&&(i=s.width,t=s.height),(s.width!==i||s.height!==t)&&n.setSize(i,t,e);const r=n.getDrawingBufferSize(new Pt);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const a of this.passes)a.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const i of this.passes)i.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),ao.fullscreenGeometry.dispose()}},Kd={NONE:0,DEPTH:1,CONVOLUTION:2},Wn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},oK=class{constructor(){this.shaderParts=new Map([[Wn.FRAGMENT_HEAD,null],[Wn.FRAGMENT_MAIN_UV,null],[Wn.FRAGMENT_MAIN_IMAGE,null],[Wn.VERTEX_HEAD,null],[Wn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Kd.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Hu}},K8=!1,oD=class{constructor(i=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(i),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let e;if(t.material.flatShading)switch(t.material.side){case La:e=this.materialsFlatShadedDoubleSide;break;case qs:e=this.materialsFlatShadedBackSide;break;default:e=this.materialsFlatShaded;break}else switch(t.material.side){case La:e=this.materialsDoubleSide;break;case qs:e=this.materialsBackSide;break;default:e=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=e[2]:t.isInstancedMesh?t.material=e[1]:t.material=e[0],++this.meshCount}}}cloneMaterial(i){if(!(i instanceof Ks))return i.clone();const t=i.uniforms,e=new Map;for(const s in t){const r=t[s].value;r.isRenderTargetTexture&&(t[s].value=null,e.set(s,r))}const n=i.clone();for(const s of e)t[s[0]].value=s[1],n.uniforms[s[0]].value=s[1];return n}setMaterial(i){if(this.disposeMaterials(),this.material=i,i!==null){const t=this.materials=[this.cloneMaterial(i),this.cloneMaterial(i),this.cloneMaterial(i)];for(const e of t)e.uniforms=Object.assign({},i.uniforms),e.side=Lc;t[2].skinning=!0,this.materialsBackSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.side=qs,n}),this.materialsDoubleSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.side=La,n}),this.materialsFlatShaded=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=qs,n}),this.materialsFlatShadedDoubleSide=t.map(e=>{const n=this.cloneMaterial(e);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=La,n})}}render(i,t,e){const n=i.shadowMap.enabled;if(i.shadowMap.enabled=!1,K8){const s=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),i.render(t,e);for(const r of s)r[0].material=r[1];this.meshCount!==s.size&&s.clear()}else{const s=t.overrideMaterial;t.overrideMaterial=this.material,i.render(t,e),t.overrideMaterial=s}i.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){const i=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of i)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return K8}static set workaroundEnabled(i){K8=i}},ud=-1,na=class extends qo{constructor(i,t=ud,e=ud,n=1){super(),this.resizable=i,this.baseSize=new Pt(1,1),this.preferredSize=new Pt(t,e),this.target=this.preferredSize,this.s=n,this.effectiveSize=new Pt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const i=this.baseSize,t=this.preferredSize,e=this.effectiveSize,n=this.scale;t.width!==ud?e.width=t.width:t.height!==ud?e.width=Math.round(t.height*(i.width/Math.max(i.height,1))):e.width=Math.round(i.width*n),t.height!==ud?e.height=t.height:t.width!==ud?e.height=Math.round(t.width/Math.max(i.width/Math.max(i.height,1),1)):e.height=Math.round(i.height*n)}get width(){return this.effectiveSize.width}set width(i){this.preferredWidth=i}get height(){return this.effectiveSize.height}set height(i){this.preferredHeight=i}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(i){this.s!==i&&(this.s=i,this.preferredSize.setScalar(ud),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(i){this.scale=i}get baseWidth(){return this.baseSize.width}set baseWidth(i){this.baseSize.width!==i&&(this.baseSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(i){this.baseWidth=i}get baseHeight(){return this.baseSize.height}set baseHeight(i){this.baseSize.height!==i&&(this.baseSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(i){this.baseHeight=i}setBaseSize(i,t){(this.baseSize.width!==i||this.baseSize.height!==t)&&(this.baseSize.set(i,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(i){this.preferredSize.width!==i&&(this.preferredSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(i){this.preferredWidth=i}get preferredHeight(){return this.preferredSize.height}set preferredHeight(i){this.preferredSize.height!==i&&(this.preferredSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(i){this.preferredHeight=i}setPreferredSize(i,t){(this.preferredSize.width!==i||this.preferredSize.height!==t)&&(this.preferredSize.set(i,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(i){this.s=i.scale,this.baseSize.set(i.baseWidth,i.baseHeight),this.preferredSize.set(i.preferredWidth,i.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return ud}},Tn={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},lK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",cK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",uK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",hK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",fK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",dK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",pK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",mK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",gK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",vK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",yK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",_K="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",AK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",xK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",bK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",SK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",EK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",MK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",TK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",CK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",wK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",RK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",LK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",DK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",BK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",OK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",NK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",IK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",UK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",PK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",FK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",HK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",zK=new Map([[Tn.ADD,lK],[Tn.ALPHA,cK],[Tn.AVERAGE,uK],[Tn.COLOR,hK],[Tn.COLOR_BURN,fK],[Tn.COLOR_DODGE,dK],[Tn.DARKEN,pK],[Tn.DIFFERENCE,mK],[Tn.DIVIDE,gK],[Tn.DST,null],[Tn.EXCLUSION,vK],[Tn.HARD_LIGHT,yK],[Tn.HARD_MIX,_K],[Tn.HUE,AK],[Tn.INVERT,xK],[Tn.INVERT_RGB,bK],[Tn.LIGHTEN,SK],[Tn.LINEAR_BURN,EK],[Tn.LINEAR_DODGE,MK],[Tn.LINEAR_LIGHT,TK],[Tn.LUMINOSITY,CK],[Tn.MULTIPLY,wK],[Tn.NEGATION,RK],[Tn.NORMAL,LK],[Tn.OVERLAY,DK],[Tn.PIN_LIGHT,BK],[Tn.REFLECT,OK],[Tn.SATURATION,NK],[Tn.SCREEN,IK],[Tn.SOFT_LIGHT,UK],[Tn.SRC,PK],[Tn.SUBTRACT,FK],[Tn.VIVID_LIGHT,HK]]),GK=class extends qo{constructor(i,t=1){super(),this._blendFunction=i,this.opacity=new xn(t)}getOpacity(){return this.opacity.value}setOpacity(i){this.opacity.value=i}get blendFunction(){return this._blendFunction}set blendFunction(i){this._blendFunction=i,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(i){this.blendFunction=i}getShaderCode(){return zK.get(this.blendFunction)}},jg=class extends qo{constructor(i,t,{attributes:e=Kd.NONE,blendFunction:n=Tn.NORMAL,defines:s=new Map,uniforms:r=new Map,extensions:a=null,vertexShader:l=null}={}){super(),this.name=i,this.renderer=null,this.attributes=e,this.fragmentShader=t,this.vertexShader=l,this.defines=s,this.uniforms=r,this.extensions=a,this.blendMode=new GK(n),this.blendMode.addEventListener("change",u=>this.setChanged()),this._inputColorSpace=Hu,this._outputColorSpace=Ec}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(i){this._inputColorSpace=i,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(i){this._outputColorSpace=i,this.setChanged()}set mainScene(i){}set mainCamera(i){}getName(){return this.name}setRenderer(i){this.renderer=i}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(i){this.attributes=i,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(i){this.fragmentShader=i,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(i){this.vertexShader=i,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(i,t=ap){}update(i,t,e){}setSize(i,t){}initialize(i,t,e){}dispose(){for(const i of Object.keys(this)){const t=this[i];(t instanceof Ds||t instanceof gs||t instanceof wi||t instanceof ao)&&this[i].dispose()}}},g7={MEDIUM:2,LARGE:3},kK=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,VK="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",QK=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],XK=class extends Ks{constructor(i=new Bn){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new xn(null),texelSize:new xn(new Bn),scale:new xn(1),kernel:new xn(0)},blending:sa,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:kK,vertexShader:VK}),this.setTexelSize(i.x,i.y),this.kernelSize=g7.MEDIUM}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.inputBuffer=i}get kernelSequence(){return QK[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(i){this.uniforms.scale.value=i}getScale(){return this.uniforms.scale.value}setScale(i){this.uniforms.scale.value=i}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(i){this.uniforms.kernel.value=i}setKernel(i){this.kernel=i}setTexelSize(i,t){this.uniforms.texelSize.value.set(i,t,i*.5,t*.5)}setSize(i,t){const e=1/i,n=1/t;this.uniforms.texelSize.value.set(e,n,e*.5,n*.5)}},jK=class extends ao{constructor({kernelSize:i=g7.MEDIUM,resolutionScale:t=.5,width:e=na.AUTO_SIZE,height:n=na.AUTO_SIZE,resolutionX:s=e,resolutionY:r=n}={}){super("KawaseBlurPass"),this.renderTargetA=new Ds(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new na(this,s,r,t);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new XK,this._blurMaterial.kernelSize=i,this.copyMaterial=new hN}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(i){this._blurMaterial=i}get dithering(){return this.copyMaterial.dithering}set dithering(i){this.copyMaterial.dithering=i}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(i){this.blurMaterial.kernelSize=i}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get scale(){return this.blurMaterial.scale}set scale(i){this.blurMaterial.scale=i}getScale(){return this.blurMaterial.scale}setScale(i){this.blurMaterial.scale=i}getKernelSize(){return this.kernelSize}setKernelSize(i){this.kernelSize=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,t,e,n,s){const r=this.scene,a=this.camera,l=this.renderTargetA,u=this.renderTargetB,f=this.blurMaterial,m=f.kernelSequence;let g=t;this.fullscreenMaterial=f;for(let v=0,_=m.length;v<_;++v){const b=(v&1)===0?l:u;f.kernel=m[v],f.inputBuffer=g.texture,i.setRenderTarget(b),i.render(r,a),g=b}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=g.texture,i.setRenderTarget(this.renderToScreen?null:e),i.render(r,a)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t);const n=e.width,s=e.height;this.renderTargetA.setSize(n,s),this.renderTargetB.setSize(n,s),this.blurMaterial.setSize(i,t)}initialize(i,t,e){e!==void 0&&(this.renderTargetA.texture.type=e,this.renderTargetB.texture.type=e,e!==Ws?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):i!==null&&i.outputColorSpace===Kn&&(this.renderTargetA.texture.colorSpace=Kn,this.renderTargetB.texture.colorSpace=Kn))}static get AUTO_SIZE(){return na.AUTO_SIZE}},qK=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,YK=class extends Ks{constructor(i=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:n0.replace(/\D+/g,"")},uniforms:{inputBuffer:new xn(null),threshold:new xn(0),smoothing:new xn(1),range:new xn(null)},blending:sa,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:qK,vertexShader:uN}),this.colorOutput=i,this.luminanceRange=t}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get threshold(){return this.uniforms.threshold.value}set threshold(i){this.smoothing>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=i}getThreshold(){return this.threshold}setThreshold(i){this.threshold=i}get smoothing(){return this.uniforms.smoothing.value}set smoothing(i){this.threshold>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=i}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(i){this.smoothing=i}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(i){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(i){i?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(i){return this.colorOutput}setColorOutputEnabled(i){this.colorOutput=i}get useRange(){return this.luminanceRange!==null}set useRange(i){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(i){i!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=i,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(i){this.luminanceRange=i}},WK=class extends ao{constructor({renderTarget:i,luminanceRange:t,colorOutput:e,resolutionScale:n=1,width:s=na.AUTO_SIZE,height:r=na.AUTO_SIZE,resolutionX:a=s,resolutionY:l=r}={}){super("LuminancePass"),this.fullscreenMaterial=new YK(e,t),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new Ds(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const u=this.resolution=new na(this,a,l,n);u.addEventListener("change",f=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(i,t,e,n,s){const r=this.fullscreenMaterial;r.inputBuffer=t.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t),this.renderTarget.setSize(e.width,e.height)}initialize(i,t,e){e!==void 0&&e!==Ws&&(this.renderTarget.texture.type=e,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},KK=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,JK="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",ZK=class extends Ks{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new xn(null),texelSize:new xn(new Pt)},blending:sa,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:KK,vertexShader:JK})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setSize(i,t){this.uniforms.texelSize.value.set(1/i,1/t)}},$K=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,tJ="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",eJ=class extends Ks{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new xn(null),supportBuffer:new xn(null),texelSize:new xn(new Pt),radius:new xn(.85)},blending:sa,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:$K,vertexShader:tJ})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}set supportBuffer(i){this.uniforms.supportBuffer.value=i}get radius(){return this.uniforms.radius.value}set radius(i){this.uniforms.radius.value=i}setSize(i,t){this.uniforms.texelSize.value.set(1/i,1/t)}},nJ=class extends ao{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Ds(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new ZK,this.upsamplingMaterial=new eJ,this.resolution=new Pt}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(i){if(this.levels!==i){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let e=0;e<i;++e){const n=t.clone();n.texture.name="Downsampling.Mipmap"+e,this.downsamplingMipmaps.push(n)}this.upsamplingMipmaps.push(t);for(let e=1,n=i-1;e<n;++e){const s=t.clone();s.texture.name="Upsampling.Mipmap"+e,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(i){this.upsamplingMaterial.radius=i}render(i,t,e,n,s){const{scene:r,camera:a}=this,{downsamplingMaterial:l,upsamplingMaterial:u}=this,{downsamplingMipmaps:f,upsamplingMipmaps:m}=this;let g=t;this.fullscreenMaterial=l;for(let v=0,_=f.length;v<_;++v){const b=f[v];l.setSize(g.width,g.height),l.inputBuffer=g.texture,i.setRenderTarget(b),i.render(r,a),g=b}this.fullscreenMaterial=u;for(let v=m.length-1;v>=0;--v){const _=m[v];u.setSize(g.width,g.height),u.inputBuffer=g.texture,u.supportBuffer=f[v].texture,i.setRenderTarget(_),i.render(r,a),g=_}}setSize(i,t){const e=this.resolution;e.set(i,t);let n=e.width,s=e.height;for(let r=0,a=this.downsamplingMipmaps.length;r<a;++r)n=Math.round(n*.5),s=Math.round(s*.5),this.downsamplingMipmaps[r].setSize(n,s),r<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[r].setSize(n,s)}initialize(i,t,e){if(e!==void 0){const n=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of n)s.texture.type=e;if(e!==Ws)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(i!==null&&i.outputColorSpace===Kn)for(const s of n)s.texture.colorSpace=Kn}}dispose(){super.dispose();for(const i of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))i.dispose()}},iJ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,sJ=class extends jg{constructor({blendFunction:i=Tn.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:e=.025,mipmapBlur:n=!1,intensity:s=1,radius:r=.85,levels:a=8,kernelSize:l=g7.LARGE,resolutionScale:u=.5,width:f=na.AUTO_SIZE,height:m=na.AUTO_SIZE,resolutionX:g=f,resolutionY:v=m}={}){super("BloomEffect",iJ,{blendFunction:i,uniforms:new Map([["map",new xn(null)],["intensity",new xn(s)]])}),this.renderTarget=new Ds(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new jK({kernelSize:l}),this.luminancePass=new WK({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=e,this.mipmapBlurPass=new nJ,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=r,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const _=this.resolution=new na(this,g,v,u);_.addEventListener("change",b=>this.setSize(_.baseWidth,_.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get dithering(){return this.blurPass.dithering}set dithering(i){this.blurPass.dithering=i}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(i){this.blurPass.kernelSize=i}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(i){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(i){this.uniforms.get("intensity").value=i}getIntensity(){return this.intensity}setIntensity(i){this.intensity=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}update(i,t,e){const n=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(i,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,s.renderTarget):this.blurPass.render(i,s.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,t):this.blurPass.render(i,t,n)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t),this.renderTarget.setSize(e.width,e.height),this.blurPass.resolution.copy(e),this.luminancePass.setSize(i,t),this.mipmapBlurPass.setSize(i,t)}initialize(i,t,e){this.blurPass.initialize(i,t,e),this.luminancePass.initialize(i,t,e),this.mipmapBlurPass.initialize(i,t,e),e!==void 0&&(this.renderTarget.texture.type=e,i!==null&&i.outputColorSpace===Kn&&(this.renderTarget.texture.colorSpace=Kn))}},rJ=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,aJ="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",oJ=class extends jg{constructor({offset:i=new Pt(.001,5e-4),radialModulation:t=!1,modulationOffset:e=.15}={}){super("ChromaticAberrationEffect",rJ,{vertexShader:aJ,attributes:Kd.CONVOLUTION,uniforms:new Map([["offset",new xn(i)],["modulationOffset",new xn(e)]])}),this.radialModulation=t}get offset(){return this.uniforms.get("offset").value}set offset(i){this.uniforms.get("offset").value=i}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(i){i?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(i){this.uniforms.get("modulationOffset").value=i}getOffset(){return this.offset}setOffset(i){this.offset=i}},dN=class extends ao{constructor(i,t,e=null){super("RenderPass",i,t),this.needsSwap=!1,this.clearPass=new fN,this.overrideMaterialManager=e===null?null:new oD(e),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get renderToScreen(){return super.renderToScreen}set renderToScreen(i){super.renderToScreen=i,this.clearPass.renderToScreen=i}get overrideMaterial(){const i=this.overrideMaterialManager;return i!==null?i.material:null}set overrideMaterial(i){const t=this.overrideMaterialManager;i!==null?t!==null?t.setMaterial(i):this.overrideMaterialManager=new oD(i):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(i){this.overrideMaterial=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getSelection(){return this.selection}setSelection(i){this.selection=i}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(i){this.ignoreBackground=i}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(i){this.skipShadowMapUpdate=i}getClearPass(){return this.clearPass}render(i,t,e,n,s){const r=this.scene,a=this.camera,l=this.selection,u=a.layers.mask,f=r.background,m=i.shadowMap.autoUpdate,g=this.renderToScreen?null:t;l!==null&&a.layers.set(l.getLayer()),this.skipShadowMapUpdate&&(i.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(r.background=null),this.clearPass.enabled&&this.clearPass.render(i,t),i.setRenderTarget(g),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(i,r,a):i.render(r,a),a.layers.mask=u,r.background=f,i.shadowMap.autoUpdate=m}},r_={DEFAULT:0,ESKIL:1},lJ=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,cJ=class extends jg{constructor({blendFunction:i=Tn.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",lJ,{blendFunction:i}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(i){this.premultiply!==i&&(i?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(i){this.premultiply=i}},uJ="uniform bool active;uniform vec4 d;void mainUv(inout vec2 uv){if(active){uv=d.xy*(floor(uv*d.zw)+0.5);}}",hJ=class extends jg{constructor(i=30){super("PixelationEffect",uJ,{uniforms:new Map([["active",new xn(!1)],["d",new xn(new Bn)]])}),this.resolution=new Pt,this._granularity=0,this.granularity=i}get granularity(){return this._granularity}set granularity(i){let t=Math.floor(i);t%2>0&&(t+=1),this._granularity=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(i){this.granularity=i}setSize(i,t){const e=this.resolution;e.set(i,t);const n=this.granularity,s=n/e.x,r=n/e.y;this.uniforms.get("d").value.set(s,r,1/s,1/r)}},fJ=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,dJ="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",pJ=class extends Ks{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new xn(null),normalBuffer:new xn(null),texelSize:new xn(new Pt)},blending:sa,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:fJ,vertexShader:dJ})}set depthBuffer(i){this.uniforms.depthBuffer.value=i}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,t=ap){this.depthBuffer=i,this.depthPacking=t}set normalBuffer(i){this.uniforms.normalBuffer.value=i,i!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(i){this.normalBuffer=i}setTexelSize(i,t){this.uniforms.texelSize.value.set(i,t)}setSize(i,t){this.uniforms.texelSize.value.set(1/i,1/t)}},mJ=class extends ao{constructor({normalBuffer:i=null,resolutionScale:t=.5,width:e=na.AUTO_SIZE,height:n=na.AUTO_SIZE,resolutionX:s=e,resolutionY:r=n}={}){super("DepthDownsamplingPass");const a=new pJ;a.normalBuffer=i,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ds(1,1,{minFilter:os,magFilter:os,depthBuffer:!1,type:Oa}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const l=this.resolution=new na(this,s,r,t);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(i,t=ap){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=t}render(i,t,e,n,s){i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t),this.renderTarget.setSize(e.width,e.height),this.fullscreenMaterial.setSize(i,t)}initialize(i,t,e){const n=i.getContext();if(!(n.getExtension("EXT_color_buffer_float")||n.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},gJ=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,vJ=class extends jg{constructor({blendFunction:i,eskil:t=!1,technique:e=t?r_.ESKIL:r_.DEFAULT,offset:n=.5,darkness:s=.5}={}){super("VignetteEffect",gJ,{blendFunction:i,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new xn(n)],["darkness",new xn(s)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(i){this.technique!==i&&(this.defines.set("VIGNETTE_TECHNIQUE",i.toFixed(0)),this.setChanged())}get eskil(){return this.technique===r_.ESKIL}set eskil(i){this.technique=i?r_.ESKIL:r_.DEFAULT}getTechnique(){return this.technique}setTechnique(i){this.technique=i}get offset(){return this.uniforms.get("offset").value}set offset(i){this.uniforms.get("offset").value=i}getOffset(){return this.offset}setOffset(i){this.offset=i}get darkness(){return this.uniforms.get("darkness").value}set darkness(i){this.uniforms.get("darkness").value=i}getDarkness(){return this.darkness}setDarkness(i){this.darkness=i}},yJ=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,_J="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",AJ=class extends Ks{constructor(i,t,e,n,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:n0.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new xn(null),depthBuffer:new xn(null),resolution:new xn(new Pt),texelSize:new xn(new Pt),cameraNear:new xn(.3),cameraFar:new xn(1e3),aspect:new xn(1),time:new xn(0)},blending:sa,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),i&&this.setShaderParts(i),t&&this.setDefines(t),e&&this.setUniforms(e),this.copyCameraSettings(n)}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(i){this.uniforms.depthBuffer.value=i}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,t=ap){this.depthBuffer=i,this.depthPacking=t}setShaderData(i){this.setShaderParts(i.shaderParts),this.setDefines(i.defines),this.setUniforms(i.uniforms),this.setExtensions(i.extensions)}setShaderParts(i){return this.fragmentShader=yJ.replace(Wn.FRAGMENT_HEAD,i.get(Wn.FRAGMENT_HEAD)||"").replace(Wn.FRAGMENT_MAIN_UV,i.get(Wn.FRAGMENT_MAIN_UV)||"").replace(Wn.FRAGMENT_MAIN_IMAGE,i.get(Wn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=_J.replace(Wn.VERTEX_HEAD,i.get(Wn.VERTEX_HEAD)||"").replace(Wn.VERTEX_MAIN_SUPPORT,i.get(Wn.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(i){for(const t of i.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(i){for(const t of i.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(i){this.extensions={};for(const t of i)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(i){this.encodeOutput!==i&&(i?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(i){return this.encodeOutput}setOutputEncodingEnabled(i){this.encodeOutput=i}get time(){return this.uniforms.time.value}set time(i){this.uniforms.time.value=i}setDeltaTime(i){this.uniforms.time.value+=i}adoptCameraSettings(i){this.copyCameraSettings(i)}copyCameraSettings(i){i&&(this.uniforms.cameraNear.value=i.near,this.uniforms.cameraFar.value=i.far,i instanceof Rs?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(i,t){const e=this.uniforms;e.resolution.value.set(i,t),e.texelSize.value.set(1/i,1/t),e.aspect.value=i/t}static get Section(){return Wn}};function lD(i,t,e){for(const n of t){const s="$1"+i+n.charAt(0).toUpperCase()+n.slice(1),r=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const a of e.entries())a[1]!==null&&e.set(a[0],a[1].replace(r,s))}}function xJ(i,t,e){let n=t.getFragmentShader(),s=t.getVertexShader();const r=n!==void 0&&/mainImage/.test(n),a=n!==void 0&&/mainUv/.test(n);if(e.attributes|=t.getAttributes(),n===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(a&&(e.attributes&Kd.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!r&&!a)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const l=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,u=e.shaderParts;let f=u.get(Wn.FRAGMENT_HEAD)||"",m=u.get(Wn.FRAGMENT_MAIN_UV)||"",g=u.get(Wn.FRAGMENT_MAIN_IMAGE)||"",v=u.get(Wn.VERTEX_HEAD)||"",_=u.get(Wn.VERTEX_MAIN_SUPPORT)||"";const b=new Set,C=new Set;if(a&&(m+=`	${i}MainUv(UV);
`,e.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const R=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);_+=`	${i}MainSupport(`,_+=R?`vUv);
`:`);
`;for(const B of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const D of B[1].split(/\s*,\s*/))e.varyings.add(D),b.add(D),C.add(D);for(const B of s.matchAll(l))C.add(B[1])}for(const R of n.matchAll(l))C.add(R[1]);for(const R of t.defines.keys())C.add(R.replace(/\([\w\s,]*\)/g,""));for(const R of t.uniforms.keys())C.add(R);C.delete("while"),C.delete("for"),C.delete("if"),t.uniforms.forEach((R,B)=>e.uniforms.set(i+B.charAt(0).toUpperCase()+B.slice(1),R)),t.defines.forEach((R,B)=>e.defines.set(i+B.charAt(0).toUpperCase()+B.slice(1),R));const T=new Map([["fragment",n],["vertex",s]]);lD(i,C,e.defines),lD(i,C,T),n=T.get("fragment"),s=T.get("vertex");const S=t.blendMode;if(e.blendModes.set(S.blendFunction,S),r){t.inputColorSpace!==null&&t.inputColorSpace!==e.colorSpace&&(g+=t.inputColorSpace===Kn?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==Ec?e.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(e.colorSpace=t.inputColorSpace);const R=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;g+=`${i}MainImage(color0, UV, `,(e.attributes&Kd.DEPTH)!==0&&R.test(n)&&(g+="depth, ",e.readDepth=!0),g+=`color1);
	`;const B=i+"BlendOpacity";e.uniforms.set(B,S.opacity),g+=`color0 = blend${S.blendFunction}(color0, color1, ${B});

	`,f+=`uniform float ${B};

`}if(f+=n+`
`,s!==null&&(v+=s+`
`),u.set(Wn.FRAGMENT_HEAD,f),u.set(Wn.FRAGMENT_MAIN_UV,m),u.set(Wn.FRAGMENT_MAIN_IMAGE,g),u.set(Wn.VERTEX_HEAD,v),u.set(Wn.VERTEX_MAIN_SUPPORT,_),t.extensions!==null)for(const R of t.extensions)e.extensions.add(R)}}var bJ=class extends ao{constructor(i,...t){super("EffectPass"),this.fullscreenMaterial=new AJ(null,null,null,i),this.listener=e=>this.handleEvent(e),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(i){for(const t of this.effects)t.mainScene=i}set mainCamera(i){this.fullscreenMaterial.copyCameraSettings(i);for(const t of this.effects)t.mainCamera=i}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(i){this.fullscreenMaterial.encodeOutput=i}get dithering(){return this.fullscreenMaterial.dithering}set dithering(i){const t=this.fullscreenMaterial;t.dithering=i,t.needsUpdate=!0}setEffects(i){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=i.sort((t,e)=>e.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const i=new oK;let t=0;for(const a of this.effects)if(a.blendMode.blendFunction===Tn.DST)i.attributes|=a.getAttributes()&Kd.DEPTH;else{if((i.attributes&a.getAttributes()&Kd.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${a.name})`);xJ("e"+t++,a,i)}let e=i.shaderParts.get(Wn.FRAGMENT_HEAD),n=i.shaderParts.get(Wn.FRAGMENT_MAIN_IMAGE),s=i.shaderParts.get(Wn.FRAGMENT_MAIN_UV);const r=/\bblend\b/g;for(const a of i.blendModes.values())e+=a.getShaderCode().replace(r,`blend${a.blendFunction}`)+`
`;(i.attributes&Kd.DEPTH)!==0?(i.readDepth&&(n=`float depth = readDepth(UV);

	`+n),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,i.colorSpace===Kn&&(n+=`color0 = sRGBToLinear(color0);
	`),i.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,i.defines.set("UV","transformedUv")):i.defines.set("UV","vUv"),i.shaderParts.set(Wn.FRAGMENT_HEAD,e),i.shaderParts.set(Wn.FRAGMENT_MAIN_IMAGE,n),i.shaderParts.set(Wn.FRAGMENT_MAIN_UV,s);for(const[a,l]of i.shaderParts)l!==null&&i.shaderParts.set(a,l.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(i)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(i,t=ap){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=t;for(const e of this.effects)e.setDepthTexture(i,t)}render(i,t,e,n,s){for(const r of this.effects)r.update(i,t,n);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=t.texture,r.time+=n*this.timeScale,i.setRenderTarget(this.renderToScreen?null:e),i.render(this.scene,this.camera)}}setSize(i,t){this.fullscreenMaterial.setSize(i,t);for(const e of this.effects)e.setSize(i,t)}initialize(i,t,e){this.renderer=i;for(const n of this.effects)n.initialize(i,t,e);this.updateMaterial(),e!==void 0&&e!==Ws&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const i of this.effects)i.removeEventListener("change",this.listener),i.dispose()}handleEvent(i){switch(i.type){case"change":this.recompile();break}}},SJ=class extends ao{constructor(i,t,{renderTarget:e,resolutionScale:n=1,width:s=na.AUTO_SIZE,height:r=na.AUTO_SIZE,resolutionX:a=s,resolutionY:l=r}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new dN(i,t,new Yw);const u=this.renderPass;u.ignoreBackground=!0,u.skipShadowMapUpdate=!0;const f=u.getClearPass();f.overrideClearColor=new ae(7829503),f.overrideClearAlpha=1,this.renderTarget=e,this.renderTarget===void 0&&(this.renderTarget=new Ds(1,1,{minFilter:os,magFilter:os}),this.renderTarget.texture.name="NormalPass.Target");const m=this.resolution=new na(this,a,l,n);m.addEventListener("change",g=>this.setSize(m.baseWidth,m.baseHeight))}set mainScene(i){this.renderPass.mainScene=i}set mainCamera(i){this.renderPass.mainCamera=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,t,e,n,s){const r=this.renderToScreen?null:this.renderTarget;this.renderPass.render(i,r,r)}setSize(i,t){const e=this.resolution;e.setBaseSize(i,t),this.renderTarget.setSize(e.width,e.height)}};function G_(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}new Pt;new Pt;function pN(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var gl=function i(t,e,n){var s=this;pN(this,i),G_(this,"dot2",function(r,a){return s.x*r+s.y*a}),G_(this,"dot3",function(r,a,l){return s.x*r+s.y*a+s.z*l}),this.x=t,this.y=e,this.z=n},EJ=[new gl(1,1,0),new gl(-1,1,0),new gl(1,-1,0),new gl(-1,-1,0),new gl(1,0,1),new gl(-1,0,1),new gl(1,0,-1),new gl(-1,0,-1),new gl(0,1,1),new gl(0,-1,1),new gl(0,1,-1),new gl(0,-1,-1)],cD=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],uD=new Array(512),hD=new Array(512),MJ=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var e=0;e<256;e++){var n;e&1?n=cD[e]^t&255:n=cD[e]^t>>8&255,uD[e]=uD[e+256]=n,hD[e]=hD[e+256]=EJ[n%12]}};MJ(0);function TJ(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var t=i;i=0;for(var e=0;e<t.length;e++)i=(i+(e+1)*(t.charCodeAt(e)%96))%2147483647}return i===0&&(i=311),i}function fD(i){var t=TJ(i);return function(){var e=t*48271%2147483647;return t=e,e/2147483647}}var CJ=function i(t){var e=this;pN(this,i),G_(this,"seed",0),G_(this,"init",function(n){e.seed=n,e.value=fD(n)}),G_(this,"value",fD(this.seed)),this.init(t)};new CJ(Math.random());const wJ=ut.createContext(null),dD=i=>(i.getAttributes()&2)===2,RJ=ut.memo(ut.forwardRef(({children:i,camera:t,scene:e,resolutionScale:n,enabled:s=!0,renderPriority:r=1,autoClear:a=!0,depthBuffer:l,enableNormalPass:u,stencilBuffer:f,multisampling:m=8,frameBufferType:g=i0},v)=>{const{gl:_,scene:b,camera:C,size:T}=MM(),S=e||b,R=t||C,[B,D,N]=ut.useMemo(()=>{const z=new aK(_,{depthBuffer:l,stencilBuffer:f,multisampling:m,frameBufferType:g});z.addPass(new dN(S,R));let U=null,P=null;return u&&(P=new SJ(S,R),P.enabled=!1,z.addPass(P),n!==void 0&&(U=new mJ({normalBuffer:P.texture,resolutionScale:n}),U.enabled=!1,z.addPass(U))),[z,P,U]},[R,_,l,f,m,g,S,u,n]);ut.useEffect(()=>B==null?void 0:B.setSize(T.width,T.height),[B,T]),d7((z,U)=>{if(s){const P=_.autoClear;_.autoClear=a,f&&!a&&_.clearStencil(),B.render(U),_.autoClear=P}},s?r:0);const I=ut.useRef(null);ut.useLayoutEffect(()=>{var P;const z=[],U=I.current.__r3f;if(U&&B){const X=U.children;for(let ot=0;ot<X.length;ot++){const it=X[ot].object;if(it instanceof jg){const ct=[it];if(!dD(it)){let Q=null;for(;(Q=(P=X[ot+1])==null?void 0:P.object)instanceof jg&&!dD(Q);)ct.push(Q),ot++}const dt=new bJ(R,...ct);z.push(dt)}else it instanceof ao&&z.push(it)}for(const ot of z)B==null||B.addPass(ot);D&&(D.enabled=!0),N&&(N.enabled=!0)}return()=>{for(const X of z)B==null||B.removePass(X);D&&(D.enabled=!1),N&&(N.enabled=!1)}},[B,i,R,D,N]),ut.useEffect(()=>{const z=_.toneMapping;return _.toneMapping=Rc,()=>{_.toneMapping=z}},[_]);const F=ut.useMemo(()=>({composer:B,normalPass:D,downSamplingPass:N,resolutionScale:n,camera:R,scene:S}),[B,D,N,n,R,S]);return ut.useImperativeHandle(v,()=>B,[B]),Y.jsx(wJ.Provider,{value:F,children:Y.jsx("group",{ref:I,children:i})})}));let LJ=0;const pD=new WeakMap,CM=(i,t)=>function({blendFunction:e=t==null?void 0:t.blendFunction,opacity:n=t==null?void 0:t.opacity,...s}){let r=pD.get(i);if(!r){const u=`@react-three/postprocessing/${i.name}-${LJ++}`;JO({[u]:i}),pD.set(i,r=u)}const a=MM(u=>u.camera),l=Ba.useMemo(()=>[...(t==null?void 0:t.args)??[],...s.args??[{...t,...s}]],[JSON.stringify(s)]);return Y.jsx(r,{camera:a,"blendMode-blendFunction":e,"blendMode-opacity-value":n,...s,args:l})},DJ=CM(sJ,{blendFunction:0}),BJ=CM(oJ),OJ=CM(cJ,{blendFunction:5}),NJ=ut.forwardRef(function({granularity:i=5},t){const e=ut.useMemo(()=>new hJ(i),[i]);return Y.jsx("primitive",{ref:t,object:e,dispose:null})}),IJ=CM(vJ);function UJ(i){const t=Mx();return Y.jsx("group",{children:Y.jsx("directionalLight",{intensity:.5,color:t.pallet.secondColor,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10,...i})})}function PJ(){return Y.jsxs(Y.Fragment,{children:[Y.jsx(OJ,{opacity:.03}),Y.jsx(NJ,{granularity:2}),Y.jsx(BJ,{offset:[.0015,.0012],blendFunction:Tn.ADD}),Y.jsx(DJ,{intensity:.2,luminanceThreshold:.2,luminanceSmoothing:.9}),Y.jsx(IJ,{eskil:!1,offset:.2,darkness:.5})]})}function FJ(){return Y.jsx(iW,{shadows:!0,children:Y.jsxs(RJ,{enabled:!0,children:[Y.jsx(PJ,{}),Y.jsx(ZW,{}),Y.jsx(UJ,{position:[1,2,1]}),Y.jsx(ut.Suspense,{fallback:null,children:Y.jsx(YW,{rotation:[0,3,0],position:[0,0,1]})}),Y.jsxs("mesh",{receiveShadow:!0,rotation:[-Math.PI/2,0,0],children:[Y.jsx("planeGeometry",{args:[100,100]}),Y.jsx("shadowMaterial",{attach:"material",opacity:.3})]})]})})}function Lr(i){return`Minified Redux error #${i}; visit https://redux.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}var HJ=typeof Symbol=="function"&&Symbol.observable||"@@observable",mD=HJ,J8=()=>Math.random().toString(36).substring(7).split("").join("."),zJ={INIT:`@@redux/INIT${J8()}`,REPLACE:`@@redux/REPLACE${J8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${J8()}`},hE=zJ;function v7(i){if(typeof i!="object"||i===null)return!1;let t=i;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(i)===t||Object.getPrototypeOf(i)===null}function mN(i,t,e){if(typeof i!="function")throw new Error(Lr(2));if(typeof t=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(Lr(0));if(typeof t=="function"&&typeof e>"u"&&(e=t,t=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(Lr(1));return e(mN)(i,t)}let n=i,s=t,r=new Map,a=r,l=0,u=!1;function f(){a===r&&(a=new Map,r.forEach((T,S)=>{a.set(S,T)}))}function m(){if(u)throw new Error(Lr(3));return s}function g(T){if(typeof T!="function")throw new Error(Lr(4));if(u)throw new Error(Lr(5));let S=!0;f();const R=l++;return a.set(R,T),function(){if(S){if(u)throw new Error(Lr(6));S=!1,f(),a.delete(R),r=null}}}function v(T){if(!v7(T))throw new Error(Lr(7));if(typeof T.type>"u")throw new Error(Lr(8));if(typeof T.type!="string")throw new Error(Lr(17));if(u)throw new Error(Lr(9));try{u=!0,s=n(s,T)}finally{u=!1}return(r=a).forEach(R=>{R()}),T}function _(T){if(typeof T!="function")throw new Error(Lr(10));n=T,v({type:hE.REPLACE})}function b(){const T=g;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Lr(11));function R(){const D=S;D.next&&D.next(m())}return R(),{unsubscribe:T(R)}},[mD](){return this}}}return v({type:hE.INIT}),{dispatch:v,subscribe:g,getState:m,replaceReducer:_,[mD]:b}}function GJ(i){Object.keys(i).forEach(t=>{const e=i[t];if(typeof e(void 0,{type:hE.INIT})>"u")throw new Error(Lr(12));if(typeof e(void 0,{type:hE.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Lr(13))})}function kJ(i){const t=Object.keys(i),e={};for(let r=0;r<t.length;r++){const a=t[r];typeof i[a]=="function"&&(e[a]=i[a])}const n=Object.keys(e);let s;try{GJ(e)}catch(r){s=r}return function(a={},l){if(s)throw s;let u=!1;const f={};for(let m=0;m<n.length;m++){const g=n[m],v=e[g],_=a[g],b=v(_,l);if(typeof b>"u")throw l&&l.type,new Error(Lr(14));f[g]=b,u=u||b!==_}return u=u||n.length!==Object.keys(a).length,u?f:a}}function fE(...i){return i.length===0?t=>t:i.length===1?i[0]:i.reduce((t,e)=>(...n)=>t(e(...n)))}function VJ(...i){return t=>(e,n)=>{const s=t(e,n);let r=()=>{throw new Error(Lr(15))};const a={getState:s.getState,dispatch:(u,...f)=>r(u,...f)},l=i.map(u=>u(a));return r=fE(...l)(s.dispatch),{...s,dispatch:r}}}function QJ(i){return v7(i)&&"type"in i&&typeof i.type=="string"}var gN=Symbol.for("immer-nothing"),gD=Symbol.for("immer-draftable"),Xo=Symbol.for("immer-state");function Mc(i,...t){throw new Error(`[Immer] minified error nr: ${i}. Full error at: https://bit.ly/3cXEKWf`)}var vy=Object.getPrototypeOf;function qg(i){return!!i&&!!i[Xo]}function af(i){var t;return i?vN(i)||Array.isArray(i)||!!i[gD]||!!((t=i.constructor)!=null&&t[gD])||RM(i)||LM(i):!1}var XJ=Object.prototype.constructor.toString();function vN(i){if(!i||typeof i!="object")return!1;const t=vy(i);if(t===null)return!0;const e=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return e===Object?!0:typeof e=="function"&&Function.toString.call(e)===XJ}function dE(i,t){wM(i)===0?Reflect.ownKeys(i).forEach(e=>{t(e,i[e],i)}):i.forEach((e,n)=>t(n,e,i))}function wM(i){const t=i[Xo];return t?t.type_:Array.isArray(i)?1:RM(i)?2:LM(i)?3:0}function k5(i,t){return wM(i)===2?i.has(t):Object.prototype.hasOwnProperty.call(i,t)}function yN(i,t,e){const n=wM(i);n===2?i.set(t,e):n===3?i.add(e):i[t]=e}function jJ(i,t){return i===t?i!==0||1/i===1/t:i!==i&&t!==t}function RM(i){return i instanceof Map}function LM(i){return i instanceof Set}function Am(i){return i.copy_||i.base_}function V5(i,t){if(RM(i))return new Map(i);if(LM(i))return new Set(i);if(Array.isArray(i))return Array.prototype.slice.call(i);const e=vN(i);if(t===!0||t==="class_only"&&!e){const n=Object.getOwnPropertyDescriptors(i);delete n[Xo];let s=Reflect.ownKeys(n);for(let r=0;r<s.length;r++){const a=s[r],l=n[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:i[a]})}return Object.create(vy(i),n)}else{const n=vy(i);if(n!==null&&e)return{...i};const s=Object.create(n);return Object.assign(s,i)}}function y7(i,t=!1){return DM(i)||qg(i)||!af(i)||(wM(i)>1&&(i.set=i.add=i.clear=i.delete=qJ),Object.freeze(i),t&&Object.entries(i).forEach(([e,n])=>y7(n,!0))),i}function qJ(){Mc(2)}function DM(i){return Object.isFrozen(i)}var YJ={};function Yg(i){const t=YJ[i];return t||Mc(0,i),t}var oA;function _N(){return oA}function WJ(i,t){return{drafts_:[],parent_:i,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function vD(i,t){t&&(Yg("Patches"),i.patches_=[],i.inversePatches_=[],i.patchListener_=t)}function Q5(i){X5(i),i.drafts_.forEach(KJ),i.drafts_=null}function X5(i){i===oA&&(oA=i.parent_)}function yD(i){return oA=WJ(oA,i)}function KJ(i){const t=i[Xo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function _D(i,t){t.unfinalizedDrafts_=t.drafts_.length;const e=t.drafts_[0];return i!==void 0&&i!==e?(e[Xo].modified_&&(Q5(t),Mc(4)),af(i)&&(i=pE(t,i),t.parent_||mE(t,i)),t.patches_&&Yg("Patches").generateReplacementPatches_(e[Xo].base_,i,t.patches_,t.inversePatches_)):i=pE(t,e,[]),Q5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),i!==gN?i:void 0}function pE(i,t,e){if(DM(t))return t;const n=t[Xo];if(!n)return dE(t,(s,r)=>AD(i,n,t,s,r,e)),t;if(n.scope_!==i)return t;if(!n.modified_)return mE(i,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let r=s,a=!1;n.type_===3&&(r=new Set(s),s.clear(),a=!0),dE(r,(l,u)=>AD(i,n,s,l,u,e,a)),mE(i,s,!1),e&&i.patches_&&Yg("Patches").generatePatches_(n,e,i.patches_,i.inversePatches_)}return n.copy_}function AD(i,t,e,n,s,r,a){if(qg(s)){const l=r&&t&&t.type_!==3&&!k5(t.assigned_,n)?r.concat(n):void 0,u=pE(i,s,l);if(yN(e,n,u),qg(u))i.canAutoFreeze_=!1;else return}else a&&e.add(s);if(af(s)&&!DM(s)){if(!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1)return;pE(i,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(e,n)&&mE(i,s)}}function mE(i,t,e=!1){!i.parent_&&i.immer_.autoFreeze_&&i.canAutoFreeze_&&y7(t,e)}function JJ(i,t){const e=Array.isArray(i),n={type_:e?1:0,scope_:t?t.scope_:_N(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:i,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,r=_7;e&&(s=[n],r=lA);const{revoke:a,proxy:l}=Proxy.revocable(s,r);return n.draft_=l,n.revoke_=a,l}var _7={get(i,t){if(t===Xo)return i;const e=Am(i);if(!k5(e,t))return ZJ(i,e,t);const n=e[t];return i.finalized_||!af(n)?n:n===Z8(i.base_,t)?($8(i),i.copy_[t]=q5(n,i)):n},has(i,t){return t in Am(i)},ownKeys(i){return Reflect.ownKeys(Am(i))},set(i,t,e){const n=AN(Am(i),t);if(n!=null&&n.set)return n.set.call(i.draft_,e),!0;if(!i.modified_){const s=Z8(Am(i),t),r=s==null?void 0:s[Xo];if(r&&r.base_===e)return i.copy_[t]=e,i.assigned_[t]=!1,!0;if(jJ(e,s)&&(e!==void 0||k5(i.base_,t)))return!0;$8(i),j5(i)}return i.copy_[t]===e&&(e!==void 0||t in i.copy_)||Number.isNaN(e)&&Number.isNaN(i.copy_[t])||(i.copy_[t]=e,i.assigned_[t]=!0),!0},deleteProperty(i,t){return Z8(i.base_,t)!==void 0||t in i.base_?(i.assigned_[t]=!1,$8(i),j5(i)):delete i.assigned_[t],i.copy_&&delete i.copy_[t],!0},getOwnPropertyDescriptor(i,t){const e=Am(i),n=Reflect.getOwnPropertyDescriptor(e,t);return n&&{writable:!0,configurable:i.type_!==1||t!=="length",enumerable:n.enumerable,value:e[t]}},defineProperty(){Mc(11)},getPrototypeOf(i){return vy(i.base_)},setPrototypeOf(){Mc(12)}},lA={};dE(_7,(i,t)=>{lA[i]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});lA.deleteProperty=function(i,t){return lA.set.call(this,i,t,void 0)};lA.set=function(i,t,e){return _7.set.call(this,i[0],t,e,i[0])};function Z8(i,t){const e=i[Xo];return(e?Am(e):i)[t]}function ZJ(i,t,e){var s;const n=AN(t,e);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(i.draft_):void 0}function AN(i,t){if(!(t in i))return;let e=vy(i);for(;e;){const n=Object.getOwnPropertyDescriptor(e,t);if(n)return n;e=vy(e)}}function j5(i){i.modified_||(i.modified_=!0,i.parent_&&j5(i.parent_))}function $8(i){i.copy_||(i.copy_=V5(i.base_,i.scope_.immer_.useStrictShallowCopy_))}var $J=class{constructor(i){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,n)=>{if(typeof t=="function"&&typeof e!="function"){const r=e;e=t;const a=this;return function(u=r,...f){return a.produce(u,m=>e.call(this,m,...f))}}typeof e!="function"&&Mc(6),n!==void 0&&typeof n!="function"&&Mc(7);let s;if(af(t)){const r=yD(this),a=q5(t,void 0);let l=!0;try{s=e(a),l=!1}finally{l?Q5(r):X5(r)}return vD(r,n),_D(s,r)}else if(!t||typeof t!="object"){if(s=e(t),s===void 0&&(s=t),s===gN&&(s=void 0),this.autoFreeze_&&y7(s,!0),n){const r=[],a=[];Yg("Patches").generateReplacementPatches_(t,s,r,a),n(r,a)}return s}else Mc(1,t)},this.produceWithPatches=(t,e)=>{if(typeof t=="function")return(a,...l)=>this.produceWithPatches(a,u=>t(u,...l));let n,s;return[this.produce(t,e,(a,l)=>{n=a,s=l}),n,s]},typeof(i==null?void 0:i.autoFreeze)=="boolean"&&this.setAutoFreeze(i.autoFreeze),typeof(i==null?void 0:i.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(i.useStrictShallowCopy)}createDraft(i){af(i)||Mc(8),qg(i)&&(i=tZ(i));const t=yD(this),e=q5(i,void 0);return e[Xo].isManual_=!0,X5(t),e}finishDraft(i,t){const e=i&&i[Xo];(!e||!e.isManual_)&&Mc(9);const{scope_:n}=e;return vD(n,t),_D(void 0,n)}setAutoFreeze(i){this.autoFreeze_=i}setUseStrictShallowCopy(i){this.useStrictShallowCopy_=i}applyPatches(i,t){let e;for(e=t.length-1;e>=0;e--){const s=t[e];if(s.path.length===0&&s.op==="replace"){i=s.value;break}}e>-1&&(t=t.slice(e+1));const n=Yg("Patches").applyPatches_;return qg(i)?n(i,t):this.produce(i,s=>n(s,t))}};function q5(i,t){const e=RM(i)?Yg("MapSet").proxyMap_(i,t):LM(i)?Yg("MapSet").proxySet_(i,t):JJ(i,t);return(t?t.scope_:_N()).drafts_.push(e),e}function tZ(i){return qg(i)||Mc(10,i),xN(i)}function xN(i){if(!af(i)||DM(i))return i;const t=i[Xo];let e;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,e=V5(i,t.scope_.immer_.useStrictShallowCopy_)}else e=V5(i,!0);return dE(e,(n,s)=>{yN(e,n,xN(s))}),t&&(t.finalized_=!1),e}var jo=new $J,bN=jo.produce;jo.produceWithPatches.bind(jo);jo.setAutoFreeze.bind(jo);jo.setUseStrictShallowCopy.bind(jo);jo.applyPatches.bind(jo);jo.createDraft.bind(jo);jo.finishDraft.bind(jo);function SN(i){return({dispatch:e,getState:n})=>s=>r=>typeof r=="function"?r(e,n,i):s(r)}var eZ=SN(),nZ=SN,iZ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fE:fE.apply(null,arguments)};function xD(i,t){function e(...n){if(t){let s=t(...n);if(!s)throw new Error($h(0));return{type:i,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:i,payload:n[0]}}return e.toString=()=>`${i}`,e.type=i,e.match=n=>QJ(n)&&n.type===i,e}var EN=class d_ extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,d_.prototype)}static get[Symbol.species](){return d_}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new d_(...t[0].concat(this)):new d_(...t.concat(this))}};function bD(i){return af(i)?bN(i,()=>{}):i}function y4(i,t,e){return i.has(t)?i.get(t):i.set(t,e(t)).get(t)}function sZ(i){return typeof i=="boolean"}var rZ=()=>function(t){const{thunk:e=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:r=!0}=t??{};let a=new EN;return e&&(sZ(e)?a.push(eZ):a.push(nZ(e.extraArgument))),a},aZ="RTK_autoBatch",SD=i=>t=>{setTimeout(t,i)},oZ=(i={type:"raf"})=>t=>(...e)=>{const n=t(...e);let s=!0,r=!1,a=!1;const l=new Set,u=i.type==="tick"?queueMicrotask:i.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:SD(10):i.type==="callback"?i.queueNotification:SD(i.timeout),f=()=>{a=!1,r&&(r=!1,l.forEach(m=>m()))};return Object.assign({},n,{subscribe(m){const g=()=>s&&m(),v=n.subscribe(g);return l.add(m),()=>{v(),l.delete(m)}},dispatch(m){var g;try{return s=!((g=m==null?void 0:m.meta)!=null&&g[aZ]),r=!s,r&&(a||(a=!0,u(f))),n.dispatch(m)}finally{s=!0}}})},lZ=i=>function(e){const{autoBatch:n=!0}=e??{};let s=new EN(i);return n&&s.push(oZ(typeof n=="object"?n:void 0)),s};function cZ(i){const t=rZ(),{reducer:e=void 0,middleware:n,devTools:s=!0,preloadedState:r=void 0,enhancers:a=void 0}=i||{};let l;if(typeof e=="function")l=e;else if(v7(e))l=kJ(e);else throw new Error($h(1));let u;typeof n=="function"?u=n(t):u=t();let f=fE;s&&(f=iZ({trace:!1,...typeof s=="object"&&s}));const m=VJ(...u),g=lZ(m);let v=typeof a=="function"?a(g):g();const _=f(...v);return mN(l,r,_)}function MN(i){const t={},e=[];let n;const s={addCase(r,a){const l=typeof r=="string"?r:r.type;if(!l)throw new Error($h(28));if(l in t)throw new Error($h(29));return t[l]=a,s},addMatcher(r,a){return e.push({matcher:r,reducer:a}),s},addDefaultCase(r){return n=r,s}};return i(s),[t,e,n]}function uZ(i){return typeof i=="function"}function hZ(i,t){let[e,n,s]=MN(t),r;if(uZ(i))r=()=>bD(i());else{const l=bD(i);r=()=>l}function a(l=r(),u){let f=[e[u.type],...n.filter(({matcher:m})=>m(u)).map(({reducer:m})=>m)];return f.filter(m=>!!m).length===0&&(f=[s]),f.reduce((m,g)=>{if(g)if(qg(m)){const _=g(m,u);return _===void 0?m:_}else{if(af(m))return bN(m,v=>g(v,u));{const v=g(m,u);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return m},l)}return a.getInitialState=r,a}var fZ=Symbol.for("rtk-slice-createasyncthunk");function dZ(i,t){return`${i}/${t}`}function pZ({creators:i}={}){var e;const t=(e=i==null?void 0:i.asyncThunk)==null?void 0:e[fZ];return function(s){const{name:r,reducerPath:a=r}=s;if(!r)throw new Error($h(11));const l=(typeof s.reducers=="function"?s.reducers(gZ()):s.reducers)||{},u=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(D,N){const I=typeof D=="string"?D:D.type;if(!I)throw new Error($h(12));if(I in f.sliceCaseReducersByType)throw new Error($h(13));return f.sliceCaseReducersByType[I]=N,m},addMatcher(D,N){return f.sliceMatchers.push({matcher:D,reducer:N}),m},exposeAction(D,N){return f.actionCreators[D]=N,m},exposeCaseReducer(D,N){return f.sliceCaseReducersByName[D]=N,m}};u.forEach(D=>{const N=l[D],I={reducerName:D,type:dZ(r,D),createNotation:typeof s.reducers=="function"};yZ(N)?AZ(I,N,m,t):vZ(I,N,m)});function g(){const[D={},N=[],I=void 0]=typeof s.extraReducers=="function"?MN(s.extraReducers):[s.extraReducers],F={...D,...f.sliceCaseReducersByType};return hZ(s.initialState,z=>{for(let U in F)z.addCase(U,F[U]);for(let U of f.sliceMatchers)z.addMatcher(U.matcher,U.reducer);for(let U of N)z.addMatcher(U.matcher,U.reducer);I&&z.addDefaultCase(I)})}const v=D=>D,_=new Map,b=new WeakMap;let C;function T(D,N){return C||(C=g()),C(D,N)}function S(){return C||(C=g()),C.getInitialState()}function R(D,N=!1){function I(z){let U=z[D];return typeof U>"u"&&N&&(U=y4(b,I,S)),U}function F(z=v){const U=y4(_,N,()=>new WeakMap);return y4(U,z,()=>{const P={};for(const[X,ot]of Object.entries(s.selectors??{}))P[X]=mZ(ot,z,()=>y4(b,z,S),N);return P})}return{reducerPath:D,getSelectors:F,get selectors(){return F(I)},selectSlice:I}}const B={name:r,reducer:T,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:S,...R(a),injectInto(D,{reducerPath:N,...I}={}){const F=N??a;return D.inject({reducerPath:F,reducer:T},I),{...B,...R(F,!0)}}};return B}}function mZ(i,t,e,n){function s(r,...a){let l=t(r);return typeof l>"u"&&n&&(l=e()),i(l,...a)}return s.unwrapped=i,s}var A7=pZ();function gZ(){function i(t,e){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...e}}return i.withTypes=()=>i,{reducer(t){return Object.assign({[t.name](...e){return t(...e)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,e){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:e}},asyncThunk:i}}function vZ({type:i,reducerName:t,createNotation:e},n,s){let r,a;if("reducer"in n){if(e&&!_Z(n))throw new Error($h(17));r=n.reducer,a=n.prepare}else r=n;s.addCase(i,r).exposeCaseReducer(t,r).exposeAction(t,a?xD(i,a):xD(i))}function yZ(i){return i._reducerDefinitionType==="asyncThunk"}function _Z(i){return i._reducerDefinitionType==="reducerWithPrepare"}function AZ({type:i,reducerName:t},e,n,s){if(!s)throw new Error($h(18));const{payloadCreator:r,fulfilled:a,pending:l,rejected:u,settled:f,options:m}=e,g=s(i,r,m);n.exposeAction(t,g),a&&n.addCase(g.fulfilled,a),l&&n.addCase(g.pending,l),u&&n.addCase(g.rejected,u),f&&n.addMatcher(g.settled,f),n.exposeCaseReducer(t,{fulfilled:a||_4,pending:l||_4,rejected:u||_4,settled:f||_4})}function _4(){}function $h(i){return`Minified Redux Toolkit error #${i}; visit https://redux-toolkit.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}const TN=document.documentElement.clientHeight,CN=document.documentElement.clientWidth,x7=100,b7=60,jd=15,xZ={modals:[{type:"photo",title:"My_photo.jpg",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:200,height:200}},{type:"about_me",title:"About_me.txt",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:600,height:250}},{type:"skills",title:"Skills.exe",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:300,height:450}},{type:"experience",title:"Work_experience.exe",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:400,height:300}},{type:"pdf",title:"Resume.pdf",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:650,height:500}},{type:"contact_me",title:"Email",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:600,height:500}},{type:"folder",title:"New Folder",isOpen:!1,index:0,position:{x:0,y:0},dimensions:{width:600,height:400}}],topIndex:0,lastX:x7,lastY:b7},bZ={info:["photo","about_me","skills","experience"]},SZ=i=>(t,e)=>{const n=e(),s=bZ[i],r=n.modals.modals;[...s].map(l=>r.find(u=>u.type===l)).filter(Boolean).sort((l,u)=>{const f=l.dimensions.width*l.dimensions.height;return u.dimensions.width*u.dimensions.height-f}).map(l=>l.type).forEach((l,u)=>{setTimeout(()=>t(S7(l)),200*u)})};function EZ(i,t){return i.position.x<t.position.x+t.dimensions.width+jd&&i.position.x+i.dimensions.width+jd>t.position.x&&i.position.y<t.position.y+t.dimensions.height+jd&&i.position.y+i.dimensions.height+jd>t.position.y}function MZ(i,t){for(let e=b7;e<=TN-t.dimensions.height;e+=jd)for(let n=x7;n<=CN-t.dimensions.width;n+=jd){const s={...t,position:{x:n,y:e}};if(!i.some(a=>EZ(a,s)))return{x:n,y:e}}return null}function TZ(i,t){const e=i.modals.filter(s=>s.isOpen),n=MZ(e,t);n?t.position=n:(i.lastX+=jd,i.lastY+=jd,(i.lastX+t.dimensions.width>CN||i.lastY+t.dimensions.height>TN)&&(i.lastX=x7,i.lastY=b7),t.position={x:i.lastX,y:i.lastY}),t.isOpen=!0}const CZ=(i,t)=>{const e=i.modals.findIndex(s=>s.type===t);if(e===-1)return;const n=i.modals[e];i.topIndex+=1,n.index=i.topIndex,n.isOpen||TZ(i,n)},wN=A7({name:"modals",initialState:xZ,reducers:{openModal:(i,t)=>CZ(i,t.payload),closeModal:(i,t)=>{const e=i.modals.findIndex(s=>s.type===t.payload.type);if(e===-1)return;const n=i.modals[e];n.isOpen=!1,n.index=0,t.payload.position&&(n.position=t.payload.position)},closeAllModals:i=>{for(const t of i.modals)t.isOpen=!1;i.topIndex=0},bringToFront:(i,t)=>{const e=i.modals.findIndex(n=>n.type===t.payload);e!==-1&&(i.topIndex+=1,i.modals[e].index=i.topIndex)}}}),{openModal:S7,closeModal:wZ,closeAllModals:RZ,bringToFront:LZ}=wN.actions,DZ=wN.reducer;function BZ(i){return Y.jsxs("svg",{width:"800px",height:"800px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"#000000",...i,children:[Y.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.621 8.086l-.707-.707L6.5 8.793 5.086 7.379l-.707.707L5.793 9.5l-1.414 1.414.707.707L6.5 10.207l1.414 1.414.707-.707L7.207 9.5l1.414-1.414z"}),Y.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 3l1-1h7l1 1v7l-1 1h-2v2l-1 1H3l-1-1V6l1-1h2V3zm1 2h4l1 1v4h2V3H6v2zm4 1H3v7h7V6z"})]})}const OZ=me.header`
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 40px;
  padding: 0 10px;

  font-size: 18px;
  font-weight: 800;

  svg {
    fill: ${({theme:i})=>i.pallet.textColor};
  }

  ${({themeName:i,theme:t})=>{if(i==="pastel")return`
        margin: 10px 20px;
        border: 2px solid ${t.pallet.textColor};
        border-radius: 10px;
        background-color: ${t.pallet.thirdColor};
      `;if(i==="code")return`
        background-color: ${t.pallet.thirdColor};
      `}}
`,NZ=me.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;
  font-feature-settings: "tnum";
  font-variant-numeric: tabular-nums;
`,IZ=me.div`
  display: flex;
  align-items: center;
  gap: 20px;
`,UZ=me.div`
  display: flex;
  align-items: center;
  gap: 10px;
`,PZ=me.div`
  display: flex;
  gap: 10px;
  align-items: center;
`;function FZ(){const[i,t]=ut.useState(new Date),[e,n]=ut.useState(""),s=i.getHours().toString().padStart(2,"0"),r=i.getMinutes().toString().padStart(2,"0"),a=i.getSeconds().toString().padStart(2,"0"),l=(+s%12||12).toString().padStart(2,"0"),u=+s>=12?"PM":"AM";return ut.useEffect(()=>{const f=setInterval(()=>{t(new Date)},1e3);return()=>clearInterval(f)},[]),ut.useEffect(()=>{const f={weekday:"short",day:"numeric",month:"short"};n(i.toLocaleDateString("en-US",f))},[i]),Y.jsxs(NZ,{children:[Y.jsx("div",{children:e}),Y.jsx("div",{children:`${l}:${r}:${a} ${u}`})]})}const HZ={clickDown:"sounds/click-down.mp3",clickUp:"sounds/click-up.mp3",intro:"sounds/intro-sound.mp3",notification:"sounds/pop.wav"},RN=ut.createContext(null),BM=()=>{const i=ut.useContext(RN);if(!i)throw new Error("useSounds must be used within SoundProvider");return i};function zZ({children:i}){const[t,e]=ut.useState(!1),[n,s]=ut.useState(!1),[r,a]=ut.useState(0),l=ut.useRef(null),u=ut.useRef(new Map);ut.useEffect(()=>{l.current=new AudioContext;const C=async(S,R)=>{const D=await(await fetch(R)).arrayBuffer(),N=await l.current.decodeAudioData(D);u.current.set(S,N),a(I=>I+1)};(async()=>{const S=Object.entries(HZ);await Promise.all(S.map(([R,B])=>C(R,B))),s(!0)})()},[]);const f=ut.useCallback(C=>{if(t||!n)return;const T=l.current,S=u.current.get(C);if(!T||!S)return;const R=T.createBufferSource();R.buffer=S,R.connect(T.destination),R.start(0)},[t,n]),m=ut.useCallback(()=>f("clickDown"),[f]),g=ut.useCallback(()=>f("clickUp"),[f]),v=ut.useCallback(()=>f("intro"),[f]),_=ut.useCallback(()=>f("notification"),[f]),b=ut.useMemo(()=>({playClickDown:m,playClickUp:g,playIntro:v,playNotification:_,mute:()=>e(!0),unmute:()=>e(!1),isLoaded:n,loadProgress:r,isMuted:t}),[m,g,v,_,n,r,t]);return Y.jsx(RN.Provider,{value:b,children:i})}function GZ(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 283.29411764705884 48 Q 300.2352941176471 56.470588235294116 301.1764705882353 75.29411764705883 L 301.1764705882353 436.70588235294116 L 301.1764705882353 436.70588235294116 Q 300.2352941176471 455.52941176470586 283.29411764705884 464 Q 265.4117647058824 471.52941176470586 251.2941176470588 459.29411764705884 L 124.23529411764706 346.3529411764706 L 124.23529411764706 346.3529411764706 L 60.23529411764706 346.3529411764706 L 60.23529411764706 346.3529411764706 Q 34.8235294117647 345.4117647058824 17.88235294117647 328.47058823529414 Q 0.9411764705882353 311.52941176470586 0 286.11764705882354 L 0 225.88235294117646 L 0 225.88235294117646 Q 0.9411764705882353 200.47058823529412 17.88235294117647 183.52941176470588 Q 34.8235294117647 166.58823529411765 60.23529411764706 165.64705882352942 L 124.23529411764706 165.64705882352942 L 124.23529411764706 165.64705882352942 L 251.2941176470588 52.705882352941174 L 251.2941176470588 52.705882352941174 Q 265.4117647058824 40.470588235294116 283.29411764705884 48 L 283.29411764705884 48 Z M 445.1764705882353 115.76470588235294 Q 476.2352941176471 141.1764705882353 494.11764705882354 176.94117647058823 L 494.11764705882354 176.94117647058823 L 494.11764705882354 176.94117647058823 Q 512 213.64705882352942 512 256 Q 512 298.3529411764706 494.11764705882354 335.05882352941177 Q 476.2352941176471 370.8235294117647 445.1764705882353 396.2352941176471 Q 428.2352941176471 407.52941176470586 413.1764705882353 393.4117647058824 Q 401.88235294117646 375.52941176470586 416.94117647058823 361.4117647058824 Q 464.94117647058823 321.88235294117646 466.8235294117647 256 Q 464.94117647058823 190.11764705882354 416.94117647058823 150.58823529411765 Q 401.88235294117646 136.47058823529412 413.1764705882353 118.58823529411765 Q 428.2352941176471 104.47058823529412 445.1764705882353 115.76470588235294 L 445.1764705882353 115.76470588235294 Z M 388.70588235294116 186.35294117647058 Q 419.7647058823529 211.76470588235293 421.6470588235294 256 Q 419.7647058823529 300.2352941176471 388.70588235294116 326.5882352941176 Q 370.8235294117647 337.88235294117646 356.70588235294116 322.8235294117647 Q 345.4117647058824 305.88235294117646 359.52941176470586 290.8235294117647 Q 375.52941176470586 277.6470588235294 376.47058823529414 256 Q 375.52941176470586 234.35294117647058 359.52941176470586 221.1764705882353 Q 345.4117647058824 206.11764705882354 356.70588235294116 189.1764705882353 Q 370.8235294117647 174.11764705882354 388.70588235294116 185.41176470588235 L 388.70588235294116 186.35294117647058 Z"})})}function kZ(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 264.34305317324186 61.914236706689536 Q 280.1509433962264 69.81818181818181 281.02915951972557 87.38250428816467 L 281.02915951972557 424.6174957118353 L 281.02915951972557 424.6174957118353 Q 280.1509433962264 442.1818181818182 264.34305317324186 450.08576329331044 Q 247.65694682675814 457.1114922813036 234.483704974271 445.69468267581476 L 115.9245283018868 340.30874785591766 L 115.9245283018868 340.30874785591766 L 56.20583190394511 340.30874785591766 L 56.20583190394511 340.30874785591766 Q 32.493996569468266 339.4305317324185 16.686106346483704 323.62264150943395 Q 0.8782161234991424 307.8147512864494 0 284.10291595197253 L 0 227.89708404802744 L 0 227.89708404802744 Q 0.8782161234991424 204.1852487135506 16.686106346483704 188.37735849056602 Q 32.493996569468266 172.56946826758147 56.20583190394511 171.69125214408234 L 115.9245283018868 171.69125214408234 L 115.9245283018868 171.69125214408234 L 234.483704974271 66.30531732418525 L 234.483704974271 66.30531732418525 Q 247.65694682675814 54.888507718696395 264.34305317324186 61.914236706689536 L 264.34305317324186 61.914236706689536 Z M 373.24185248713553 177.83876500857633 L 421.54373927958835 226.14065180102915 L 373.24185248713553 177.83876500857633 L 421.54373927958835 226.14065180102915 L 469.84562607204117 177.83876500857633 L 469.84562607204117 177.83876500857633 Q 484.77530017152657 165.54373927958832 499.704974271012 177.83876500857633 Q 512 192.76843910806176 499.704974271012 207.69811320754718 L 451.4030874785592 256 L 451.4030874785592 256 L 499.704974271012 304.3018867924528 L 499.704974271012 304.3018867924528 Q 512 319.2315608919383 499.704974271012 334.16123499142367 Q 484.77530017152657 346.45626072041165 469.84562607204117 334.16123499142367 L 421.54373927958835 285.85934819897085 L 421.54373927958835 285.85934819897085 L 373.24185248713553 334.16123499142367 L 373.24185248713553 334.16123499142367 Q 358.3121783876501 346.45626072041165 343.3825042881647 334.16123499142367 Q 331.08747855917665 319.2315608919383 343.3825042881647 304.3018867924528 L 391.6843910806175 256 L 391.6843910806175 256 L 343.3825042881647 207.69811320754718 L 343.3825042881647 207.69811320754718 Q 331.08747855917665 192.76843910806176 343.3825042881647 177.83876500857633 Q 358.3121783876501 165.54373927958832 373.24185248713553 177.83876500857633 L 373.24185248713553 177.83876500857633 Z"})})}function VZ(i){const{isMuted:t,mute:e,unmute:n}=BM();return Y.jsx(Y.Fragment,{children:t?Y.jsx(kZ,{onClick:n,...i}):Y.jsx(GZ,{onClick:e,...i})})}let LN=0;const QZ={popups:[]},DN=A7({name:"popup",initialState:QZ,reducers:{openPopup:(i,t)=>{i.popups.push({id:++LN,result:"success",...t.payload})},openThunkPopup:(i,t)=>{i.popups.push({result:"success",...t.payload})},closePopup:(i,t)=>{i.popups=i.popups.filter(e=>e.id!==t.payload)},closeAllPopups:i=>{i.popups=[]}}}),{openPopup:srt,closePopup:XZ,closeAllPopups:rrt,openThunkPopup:jZ}=DN.actions,Y5=(i,t="success")=>e=>{const n=++LN;e(jZ({type:"toast",text:i,id:n,result:t}))},qZ=DN.reducer;function YZ(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 256 0 Q 184.7741935483871 1.032258064516129 126.96774193548387 35.096774193548384 L 126.96774193548387 35.096774193548384 L 126.96774193548387 35.096774193548384 Q 69.16129032258064 69.16129032258064 35.096774193548384 126.96774193548387 L 35.096774193548384 126.96774193548387 L 35.096774193548384 126.96774193548387 Q 1.032258064516129 184.7741935483871 0 256 Q 1.032258064516129 327.2258064516129 35.096774193548384 385.03225806451616 Q 69.16129032258064 442.83870967741933 126.96774193548387 476.9032258064516 Q 184.7741935483871 510.96774193548384 256 512 Q 327.2258064516129 510.96774193548384 385.03225806451616 476.9032258064516 Q 442.83870967741933 442.83870967741933 476.9032258064516 385.03225806451616 Q 510.96774193548384 327.2258064516129 512 256 Q 510.96774193548384 184.7741935483871 476.9032258064516 126.96774193548387 Q 442.83870967741933 69.16129032258064 385.03225806451616 35.096774193548384 Q 327.2258064516129 1.032258064516129 256 0 L 256 0 Z M 374.7096774193548 174.4516129032258 Q 372.64516129032256 195.09677419354838 367.48387096774195 230.19354838709677 L 367.48387096774195 230.19354838709677 L 367.48387096774195 230.19354838709677 Q 362.3225806451613 264.258064516129 356.1290322580645 299.35483870967744 L 356.1290322580645 299.35483870967744 L 356.1290322580645 299.35483870967744 Q 349.93548387096774 334.4516129032258 345.80645161290323 358.19354838709677 Q 339.61290322580646 385.03225806451616 328.258064516129 384 Q 311.741935483871 384 296.258064516129 371.61290322580646 Q 292.1290322580645 368.51612903225805 288 365.4193548387097 Q 270.4516129032258 354.06451612903226 258.06451612903226 344.7741935483871 Q 245.67741935483872 336.51612903225805 230.19354838709677 327.2258064516129 Q 214.70967741935485 315.8709677419355 217.80645161290323 308.64516129032256 Q 219.8709677419355 300.38709677419354 230.19354838709677 292.1290322580645 Q 233.29032258064515 289.03225806451616 236.38709677419354 285.93548387096774 Q 237.41935483870967 283.8709677419355 247.74193548387098 275.61290322580646 Q 264.258064516129 260.1290322580645 283.8709677419355 240.51612903225808 Q 304.51612903225805 221.93548387096774 306.5806451612903 216.7741935483871 Q 307.61290322580646 215.74193548387098 305.5483870967742 212.6451612903226 Q 302.4516129032258 210.58064516129033 300.38709677419354 211.61290322580646 Q 296.258064516129 212.6451612903226 192 283.8709677419355 Q 176.51612903225808 294.19354838709677 164.1290322580645 293.16129032258067 Q 156.90322580645162 293.16129032258067 145.5483870967742 290.06451612903226 Q 134.19354838709677 288 124.90322580645162 283.8709677419355 Q 121.80645161290323 282.83870967741933 118.70967741935483 282.83870967741933 Q 97.03225806451613 277.6774193548387 97.03225806451613 267.35483870967744 Q 98.06451612903226 260.1290322580645 115.61290322580645 252.90322580645162 Q 228.1290322580645 204.38709677419354 265.2903225806452 188.90322580645162 Q 316.9032258064516 167.2258064516129 335.48387096774195 161.03225806451613 Q 355.0967741935484 153.80645161290323 360.258064516129 153.80645161290323 Q 365.4193548387097 153.80645161290323 370.5806451612903 156.90322580645162 Q 373.6774193548387 160 374.7096774193548 164.1290322580645 Q 374.7096774193548 169.29032258064515 374.7096774193548 174.4516129032258 L 374.7096774193548 174.4516129032258 Z"})})}function WZ(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 171.3548387096774 407.741935483871 Q 170.32258064516128 411.8709677419355 166.19354838709677 411.8709677419355 Q 160 411.8709677419355 160 407.741935483871 Q 161.03225806451613 404.64516129032256 165.16129032258064 404.64516129032256 Q 170.32258064516128 404.64516129032256 171.3548387096774 407.741935483871 L 171.3548387096774 407.741935483871 Z M 139.3548387096774 403.61290322580646 Q 138.32258064516128 406.7096774193548 143.48387096774192 408.7741935483871 Q 148.6451612903226 409.80645161290323 149.67741935483872 406.7096774193548 Q 150.70967741935485 402.5806451612903 145.5483870967742 401.5483870967742 Q 140.38709677419354 400.51612903225805 139.3548387096774 403.61290322580646 L 139.3548387096774 403.61290322580646 Z M 184.7741935483871 401.5483870967742 Q 179.61290322580646 402.5806451612903 179.61290322580646 406.7096774193548 Q 180.6451612903226 409.80645161290323 185.80645161290323 409.80645161290323 Q 190.96774193548387 407.741935483871 190.96774193548387 404.64516129032256 Q 189.93548387096774 401.5483870967742 184.7741935483871 401.5483870967742 L 184.7741935483871 401.5483870967742 Z M 252.90322580645162 6.193548387096774 Q 142.4516129032258 8.258064516129032 72.25806451612904 78.45161290322581 L 72.25806451612904 78.45161290322581 L 72.25806451612904 78.45161290322581 Q 2.064516129032258 148.6451612903226 0 258.06451612903226 Q 1.032258064516129 345.80645161290323 48.516129032258064 411.8709677419355 Q 96 477.93548387096774 175.48387096774192 504.7741935483871 Q 194.06451612903226 505.80645161290323 193.03225806451613 492.38709677419354 Q 193.03225806451613 488.258064516129 193.03225806451613 476.9032258064516 Q 193.03225806451613 453.16129032258067 193.03225806451613 429.4193548387097 Q 190.96774193548387 429.4193548387097 173.41935483870967 431.48387096774195 Q 154.83870967741936 432.51612903225805 134.19354838709677 427.35483870967744 Q 113.54838709677419 421.16129032258067 105.29032258064517 398.4516129032258 Q 105.29032258064517 396.38709677419354 97.03225806451613 381.93548387096774 Q 88.7741935483871 368.51612903225805 76.38709677419355 360.258064516129 Q 74.3225806451613 359.2258064516129 68.12903225806451 352 Q 60.903225806451616 345.80645161290323 78.45161290322581 344.7741935483871 Q 79.48387096774194 343.741935483871 92.90322580645162 348.9032258064516 Q 106.3225806451613 353.03225806451616 117.6774193548387 371.61290322580646 Q 136.25806451612902 399.48387096774195 157.93548387096774 399.48387096774195 Q 180.6451612903226 399.48387096774195 193.03225806451613 393.2903225806452 Q 197.16129032258064 368.51612903225805 209.5483870967742 358.19354838709677 Q 164.1290322580645 356.1290322580645 130.06451612903226 335.48387096774195 Q 96 315.8709677419355 93.93548387096774 243.61290322580646 Q 93.93548387096774 222.96774193548387 100.12903225806451 209.5483870967742 Q 105.29032258064517 196.1290322580645 117.6774193548387 183.74193548387098 Q 115.61290322580645 177.5483870967742 113.54838709677419 158.96774193548387 Q 111.48387096774194 140.38709677419354 120.7741935483871 113.54838709677419 Q 139.3548387096774 110.45161290322581 164.1290322580645 124.90322580645162 Q 189.93548387096774 138.32258064516128 192 141.41935483870967 Q 192 141.41935483870967 192 141.41935483870967 Q 222.96774193548387 132.1290322580645 257.03225806451616 132.1290322580645 Q 290.06451612903226 132.1290322580645 322.06451612903226 141.41935483870967 Q 322.06451612903226 140.38709677419354 335.48387096774195 132.1290322580645 Q 347.8709677419355 123.87096774193549 364.38709677419354 117.6774193548387 Q 380.9032258064516 110.45161290322581 393.2903225806452 113.54838709677419 Q 402.5806451612903 140.38709677419354 400.51612903225805 158.96774193548387 Q 398.4516129032258 177.5483870967742 395.35483870967744 183.74193548387098 Q 407.741935483871 196.1290322580645 414.96774193548384 209.5483870967742 Q 422.19354838709677 222.96774193548387 422.19354838709677 243.61290322580646 Q 421.16129032258067 293.16129032258067 404.64516129032256 316.9032258064516 Q 387.0967741935484 339.61290322580646 360.258064516129 347.8709677419355 Q 333.4193548387097 356.1290322580645 303.48387096774195 358.19354838709677 Q 320 369.5483870967742 321.03225806451616 405.6774193548387 Q 321.03225806451616 443.8709677419355 321.03225806451616 473.80645161290323 Q 321.03225806451616 487.2258064516129 321.03225806451616 492.38709677419354 Q 320 505.80645161290323 338.5806451612903 504.7741935483871 Q 417.03225806451616 477.93548387096774 464.51612903225805 411.8709677419355 Q 510.96774193548384 345.80645161290323 512 258.06451612903226 Q 510.96774193548384 185.80645161290323 476.9032258064516 129.03225806451613 Q 441.80645161290323 72.25806451612904 384 39.225806451612904 Q 325.16129032258067 7.225806451612903 252.90322580645162 6.193548387096774 L 252.90322580645162 6.193548387096774 Z M 100.12903225806451 362.3225806451613 Q 98.06451612903226 364.38709677419354 101.16129032258064 367.48387096774195 Q 104.25806451612904 370.5806451612903 106.3225806451613 368.51612903225805 Q 108.38709677419355 366.4516129032258 105.29032258064517 363.35483870967744 Q 103.2258064516129 360.258064516129 100.12903225806451 362.3225806451613 L 100.12903225806451 362.3225806451613 Z M 88.7741935483871 354.06451612903226 Q 88.7741935483871 356.1290322580645 91.87096774193549 358.19354838709677 Q 94.96774193548387 359.2258064516129 96 357.16129032258067 Q 97.03225806451613 355.0967741935484 93.93548387096774 353.03225806451616 Q 90.83870967741936 352 88.7741935483871 354.06451612903226 L 88.7741935483871 354.06451612903226 Z M 122.83870967741936 390.19354838709677 Q 120.7741935483871 393.2903225806452 123.87096774193549 397.4193548387097 Q 128 400.51612903225805 131.09677419354838 398.4516129032258 Q 132.1290322580645 395.35483870967744 129.03225806451613 391.2258064516129 Q 124.90322580645162 388.1290322580645 122.83870967741936 390.19354838709677 L 122.83870967741936 390.19354838709677 Z M 110.45161290322581 375.741935483871 Q 108.38709677419355 377.80645161290323 110.45161290322581 381.93548387096774 Q 113.54838709677419 385.03225806451616 116.64516129032258 384 Q 118.70967741935483 381.93548387096774 116.64516129032258 377.80645161290323 Q 113.54838709677419 373.6774193548387 110.45161290322581 375.741935483871 L 110.45161290322581 375.741935483871 Z"})})}function KZ(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 475.42857142857144 0 L 36.57142857142857 0 L 475.42857142857144 0 L 36.57142857142857 0 Q 20.571428571428573 0 10.285714285714286 10.285714285714286 Q 0 21.714285714285715 0 36.57142857142857 L 0 475.42857142857144 L 0 475.42857142857144 Q 0 490.2857142857143 10.285714285714286 501.7142857142857 Q 20.571428571428573 512 36.57142857142857 512 L 475.42857142857144 512 L 475.42857142857144 512 Q 491.42857142857144 512 501.7142857142857 501.7142857142857 Q 512 490.2857142857143 512 475.42857142857144 L 512 36.57142857142857 L 512 36.57142857142857 Q 512 21.714285714285715 501.7142857142857 10.285714285714286 Q 491.42857142857144 0 475.42857142857144 0 L 475.42857142857144 0 Z M 154.28571428571428 438.85714285714283 L 78.85714285714286 438.85714285714283 L 154.28571428571428 438.85714285714283 L 78.85714285714286 438.85714285714283 L 78.85714285714286 194.28571428571428 L 78.85714285714286 194.28571428571428 L 155.42857142857142 194.28571428571428 L 155.42857142857142 194.28571428571428 L 155.42857142857142 438.85714285714283 L 154.28571428571428 438.85714285714283 Z M 116.57142857142857 161.14285714285714 Q 98.28571428571429 161.14285714285714 85.71428571428571 148.57142857142858 L 85.71428571428571 148.57142857142858 L 85.71428571428571 148.57142857142858 Q 73.14285714285714 136 73.14285714285714 117.71428571428571 Q 73.14285714285714 98.28571428571429 85.71428571428571 85.71428571428571 Q 98.28571428571429 73.14285714285714 116.57142857142857 73.14285714285714 Q 136 73.14285714285714 147.42857142857142 85.71428571428571 Q 160 98.28571428571429 161.14285714285714 117.71428571428571 Q 160 136 147.42857142857142 148.57142857142858 Q 136 161.14285714285714 116.57142857142857 161.14285714285714 L 116.57142857142857 161.14285714285714 Z M 438.85714285714283 438.85714285714283 L 363.42857142857144 438.85714285714283 L 438.85714285714283 438.85714285714283 L 363.42857142857144 438.85714285714283 L 363.42857142857144 320 L 363.42857142857144 320 Q 364.57142857142856 297.14285714285717 357.7142857142857 276.57142857142856 Q 352 257.14285714285717 323.42857142857144 254.85714285714286 Q 294.85714285714283 256 285.7142857142857 274.2857142857143 Q 277.7142857142857 292.57142857142856 278.85714285714283 317.7142857142857 L 278.85714285714283 438.85714285714283 L 278.85714285714283 438.85714285714283 L 202.28571428571428 438.85714285714283 L 202.28571428571428 438.85714285714283 L 202.28571428571428 194.28571428571428 L 202.28571428571428 194.28571428571428 L 275.42857142857144 194.28571428571428 L 275.42857142857144 194.28571428571428 L 275.42857142857144 227.42857142857142 L 275.42857142857144 227.42857142857142 L 276.57142857142856 227.42857142857142 L 276.57142857142856 227.42857142857142 Q 283.42857142857144 212.57142857142858 301.7142857142857 201.14285714285714 Q 320 188.57142857142858 348.57142857142856 188.57142857142858 Q 404.57142857142856 189.71428571428572 422.85714285714283 221.71428571428572 Q 441.14285714285717 254.85714285714286 438.85714285714283 305.14285714285717 L 438.85714285714283 438.85714285714283 L 438.85714285714283 438.85714285714283 Z"})})}function JZ(){return Y.jsxs(PZ,{children:[Y.jsx("a",{href:"https://t.me/Nik0o_o",target:"_blank",children:Y.jsx(YZ,{width:25,height:25,className:"cursor-pointer"})}),Y.jsx("a",{href:"https://github.com/kanedaSh0tar0",target:"_blank",children:Y.jsx(WZ,{width:25,height:25,className:"cursor-pointer"})}),Y.jsx("a",{href:"https://www.linkedin.com/in/mykyta-antonov-246736354/",target:"_blank",children:Y.jsx(KZ,{width:25,height:25,className:"cursor-pointer"})})]})}function ZZ(){const i=XE(s=>s.themes.name),t=xy(),e=()=>t(RZ()),n=()=>{t(Y5("Hello there "))};return Y.jsxs(OZ,{themeName:i,children:[Y.jsxs(IZ,{children:[Y.jsx("span",{className:"cursor-pointer",onClick:n,children:"Antonov Mykyta"}),Y.jsxs(UZ,{children:[Y.jsx(BZ,{className:"cursor-pointer",onClick:e,width:25,height:25}),Y.jsx(VZ,{className:"cursor-pointer",width:25,height:25})]})]}),Y.jsx(JZ,{}),Y.jsx(FZ,{})]})}const $Z=me.span`
  font-family: "Segoe UI", sans-serif;
  font-size: ${({textSize:i})=>`${i}px`};
  color: ${({color:i})=>i||"var(--white-color)"};
  text-align: center;
  user-select: none;
`;function xm({text:i,color:t,size:e}){let n;switch(e){case"small":n=12;break;case"medium":n=18;break;default:n=12;break}return Y.jsx($Z,{color:t,textSize:n,children:i})}const t$=me.div`
  width: 80px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 5px;
  position: relative;

  &::after {
    content: "";
    position: absolute;
    inset: -2px;
    border: ${({chosen:i,borderColor:t})=>i?`2px dashed ${t||"var(--white-color)"}`:"none"};
    pointer-events: none;
    border-radius: 4px;
  }
`;function qd({SvgIcon:i,text:t,onClick:e,textColor:n}){const[s,r]=ut.useState(!1),a=ut.useRef(null);return ut.useEffect(()=>{const l=u=>{a.current&&!a.current.contains(u.target)&&r(!1)};return window.addEventListener("click",l),()=>{window.removeEventListener("click",l)}},[]),Y.jsxs(t$,{ref:a,className:"cursor-pointer",chosen:s,borderColor:n,onClick:()=>{s?(e(),r(!1)):r(!0)},children:[Y.jsx(i,{width:"100%",height:"100%"}),Y.jsx(xm,{color:n,text:t})]})}const e$=me.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: 40px;
`,BN=me.div`
  display: grid;
  gap: 20px;
  padding: 20px;
  height: 100%;

  grid-auto-flow: ${({flow:i})=>i||"column"};

  ${({flow:i})=>i==="row"?`
    grid-template-columns: repeat(auto-fill, 80px);
    grid-template-rows: repeat(auto-fill, 120px);
  `:`
    grid-template-columns: repeat(auto-fill, 120px);
    grid-template-rows: repeat(auto-fill, 80px);
  `}
`;function n$(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 128 0 Q 101 1 83 19 L 83 19 L 83 19 Q 65 37 64 64 L 64 448 L 64 448 Q 65 475 83 493 Q 101 511 128 512 L 384 512 L 384 512 Q 411 511 429 493 Q 447 475 448 448 L 448 160 L 448 160 L 320 160 L 320 160 Q 306 160 297 151 Q 288 142 288 128 L 288 0 L 288 0 L 128 0 L 128 0 Z M 320 0 L 320 128 L 320 0 L 320 128 L 448 128 L 448 128 L 320 0 L 320 0 Z M 192 256 Q 193 220 224 201 Q 256 183 288 201 Q 319 220 320 256 Q 319 292 288 311 Q 256 329 224 311 Q 193 292 192 256 L 192 256 Z M 144 432 Q 145 398 167 375 L 167 375 L 167 375 Q 190 353 224 352 L 288 352 L 288 352 Q 322 353 345 375 Q 367 398 368 432 Q 367 447 352 448 L 160 448 L 160 448 Q 145 447 144 432 L 144 432 Z"})})}function i$(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 81.53424657534246 227.94520547945206 L 3.506849315068493 361.2054794520548 L 81.53424657534246 227.94520547945206 L 3.506849315068493 361.2054794520548 L 3.506849315068493 115.72602739726027 L 3.506849315068493 115.72602739726027 Q 4.383561643835616 92.05479452054794 20.164383561643834 76.27397260273973 Q 35.945205479452056 60.49315068493151 59.61643835616438 59.61643835616438 L 163.06849315068493 59.61643835616438 L 163.06849315068493 59.61643835616438 Q 185.86301369863014 59.61643835616438 202.5205479452055 76.27397260273973 L 225.31506849315068 99.06849315068493 L 225.31506849315068 99.06849315068493 Q 241.97260273972603 115.72602739726027 265.64383561643837 115.72602739726027 L 368.2191780821918 115.72602739726027 L 368.2191780821918 115.72602739726027 Q 391.8904109589041 116.6027397260274 407.67123287671234 132.3835616438356 Q 423.45205479452056 148.16438356164383 424.32876712328766 171.83561643835617 L 424.32876712328766 199.8904109589041 L 424.32876712328766 199.8904109589041 L 129.75342465753425 199.8904109589041 L 129.75342465753425 199.8904109589041 Q 98.1917808219178 200.76712328767124 81.53424657534246 227.94520547945206 L 81.53424657534246 227.94520547945206 Z M 105.20547945205479 241.97260273972603 Q 113.97260273972603 228.82191780821918 129.75342465753425 227.94520547945206 L 480.43835616438355 227.94520547945206 L 480.43835616438355 227.94520547945206 Q 496.2191780821918 228.82191780821918 504.986301369863 241.97260273972603 Q 512 256 504.986301369863 270.027397260274 L 406.7945205479452 438.35616438356163 L 406.7945205479452 438.35616438356163 Q 398.027397260274 451.5068493150685 382.24657534246575 452.3835616438356 L 31.561643835616437 452.3835616438356 L 31.561643835616437 452.3835616438356 Q 15.780821917808218 451.5068493150685 7.013698630136986 438.35616438356163 Q 0 424.32876712328766 7.013698630136986 410.3013698630137 L 105.20547945205479 241.97260273972603 L 105.20547945205479 241.97260273972603 Z"})})}function s$(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 48 64 Q 28 65 14 78 L 14 78 L 14 78 Q 1 92 0 112 Q 1 136 19 150 L 237 314 L 237 314 Q 256 326 275 314 L 493 150 L 493 150 Q 511 136 512 112 Q 511 92 498 78 Q 484 65 464 64 L 48 64 L 48 64 Z M 0 176 L 0 384 L 0 176 L 0 384 Q 1 411 19 429 Q 37 447 64 448 L 448 448 L 448 448 Q 475 447 493 429 Q 511 411 512 384 L 512 176 L 512 176 L 294 339 L 294 339 Q 277 352 256 352 Q 235 352 218 339 L 0 176 L 0 176 Z"})})}function r$(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 8 64 Q 9 37 27 19 L 27 19 L 27 19 Q 45 1 72 0 L 232 0 L 232 0 L 232 128 L 232 128 Q 232 142 241 151 Q 250 160 264 160 L 392 160 L 392 160 L 392 304 L 392 304 L 184 304 L 184 304 Q 157 305 139 323 Q 121 341 120 368 L 120 512 L 120 512 L 72 512 L 72 512 Q 45 511 27 493 Q 9 475 8 448 L 8 64 L 8 64 Z M 392 128 L 264 128 L 392 128 L 264 128 L 264 0 L 264 0 L 392 128 L 392 128 Z M 184 352 L 216 352 L 184 352 L 216 352 Q 240 353 256 368 Q 271 384 272 408 Q 271 432 256 448 Q 240 463 216 464 L 200 464 L 200 464 L 200 496 L 200 496 Q 199 511 184 512 Q 169 511 168 496 L 168 448 L 168 448 L 168 368 L 168 368 Q 169 353 184 352 L 184 352 Z M 216 432 Q 238 430 240 408 Q 238 386 216 384 L 200 384 L 200 384 L 200 432 L 200 432 L 216 432 L 216 432 Z M 312 352 L 344 352 L 312 352 L 344 352 Q 364 353 378 366 Q 391 380 392 400 L 392 464 L 392 464 Q 391 484 378 498 Q 364 511 344 512 L 312 512 L 312 512 Q 297 511 296 496 L 296 368 L 296 368 Q 297 353 312 352 L 312 352 Z M 344 480 Q 359 479 360 464 L 360 400 L 360 400 Q 359 385 344 384 L 328 384 L 328 384 L 328 480 L 328 480 L 344 480 L 344 480 Z M 424 368 Q 425 353 440 352 L 488 352 L 488 352 Q 503 353 504 368 Q 503 383 488 384 L 456 384 L 456 384 L 456 416 L 456 416 L 488 416 L 488 416 Q 503 417 504 432 Q 503 447 488 448 L 456 448 L 456 448 L 456 496 L 456 496 Q 455 511 440 512 Q 425 511 424 496 L 424 432 L 424 432 L 424 368 L 424 368 Z"})})}function a$(){const i=xy(),t=n=>{i(S7(n))},e=n=>{i(SZ(n))};return Y.jsxs(e$,{children:[Y.jsx(ZZ,{}),Y.jsxs(BN,{children:[Y.jsx(qd,{onClick:()=>e("info"),SvgIcon:n$,text:"My CV"}),Y.jsx(qd,{onClick:()=>t("pdf"),SvgIcon:r$,text:"Resume.pdf"}),Y.jsx(qd,{onClick:()=>t("folder"),SvgIcon:i$,text:"New Folder"}),Y.jsx(qd,{onClick:()=>t("contact_me"),SvgIcon:s$,text:"Email"})]})]})}var ON=f9();function o$(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 497.6 88 Q 512 72 512 51.2 L 512 51.2 L 512 51.2 Q 512 30.4 497.6 14.4 Q 481.6 0 460.8 0 Q 440 0 424 14.4 L 256 184 L 256 184 L 88 14.4 L 88 14.4 Q 72 0 51.2 0 Q 30.4 0 14.4 14.4 Q 0 30.4 0 51.2 Q 0 72 14.4 88 L 184 256 L 184 256 L 14.4 424 L 14.4 424 Q 0 440 0 460.8 Q 0 481.6 14.4 497.6 Q 30.4 512 51.2 512 Q 72 512 88 497.6 L 256 328 L 256 328 L 424 497.6 L 424 497.6 Q 440 512 460.8 512 Q 481.6 512 497.6 497.6 Q 512 481.6 512 460.8 Q 512 440 497.6 424 L 328 256 L 328 256 L 497.6 88 L 497.6 88 Z"})})}const l$=me.button`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 2px solid ${({theme:i})=>i.pallet.textColor};
  background-color: ${({theme:i})=>i.pallet.secondColor};
  padding: 4px;

  svg {
    transform: ${({clicked:i})=>i?"scale(0.9)":"scale(1)"};
    color: ${({theme:i})=>i.pallet.textColor};
  }
`,c$=me.div`
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 30px;
  width: 100%;
  padding: 0 10px;

  ${({theme:i})=>{if(i.name==="pastel")return`
        border-radius: 10px 10px 0 0;

      `;if(i.name==="code")return`
        height: 0px;
        padding-top: 30px;
        overflow: hidden;
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
      `}}
`,u$=me.div`
  display: flex;
  align-center: center;
  gap: 5px;
`,h$=me.span`
  font-family: "Segoe UI", sans-serif;
  font-size: 12px;
  font-weight: 600;
  color: ${({theme:i})=>i.pallet.textColor};
  text-align: center;
  user-select: none;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
`,f$=Ay`
  to {
    opacity: 1;
    transform: scale(1);
  }
`,d$=Ay`
  to {
    opacity: 0;
    transform: scale(0);
  }
`,p$=me.div`
  position: absolute;
  display: flex;
  flex-direction: column;
  background-color: ${({theme:i})=>i.pallet.thirdColor};

  width: ${({dimensions:i})=>`${i.width}px`};
  height: ${({dimensions:i})=>`${i.height}px`};
  left: ${({position:i})=>i?i.x:0}px;
  top: ${({position:i})=>i?i.y:0}px;

  z-index: ${({index:i})=>10*(i+1)};

  opacity: ${({isClosing:i})=>i?"1":"0"};
  transform: ${({isClosing:i})=>i?"scale(1)":"scale(0)"};
  animation: ${({isClosing:i})=>i?d$:f$} 0.25s
    cubic-bezier(0.39, 0.575, 0.565, 1) both;

  ${({theme:i})=>{if(i.name==="pastel")return`
        border-radius: 10px;
        border: 2px solid ${i.pallet.textColor};
        box-shadow: 5px 5px 0px 2px rgba(0, 0, 0, 0.75);
      `;if(i.name==="code")return`
        
      `}}
`,m$=me.div`
  background-color: ${({theme:i})=>i.pallet.thirdColor};
  flex: 1;
  display: flex;
  overflow: hidden;

  ${({theme:i,title:t})=>{if(i.name==="pastel")return`
        border-radius: 0 0 10px 10px;
        padding: 4px;
      `;if(i.name==="code")return`
        padding: 10px;

        &:after {
          content: ${(n=>`"${(n||"").replace(/"/g,'\\"')}"`)(t)};
          background-color: ${i.pallet.thirdColor};
          position: absolute;
          left: 25px;
          top: 0;
          padding: 0 5px;
        }
      `}}
`,g$=me.div`
  position: relative;
  width: 100%;
  overflow: auto;

  border: 2px solid ${({theme:i})=>i.pallet.textColor};

  ${({theme:i})=>{if(i.name==="pastel")return`
        background-color: var(--white-color);
        border-radius: 6px;
      `;if(i.name==="code")return`
        padding: 10px;
      `}}
`,v$=me.div`
  display: flex;
  justify-content: flex-start;
  align-items: center;
  width: 100%;
  height: 50px;
  padding: 0 10px;
  gap: 10px;
`,y$=me.button`
  box-shadow: ${({clicked:i})=>i?"inset 2px 2px 4px rgba(0, 0, 0, 0.6), inset -2px -2px 4px rgba(255, 255, 255, 0.2)":"2px 2px 0px 1px rgba(0, 0, 0, 0.75)"};
  padding: 4px;
  width: 28px;
  height: 28px;
  border-radius: 4px;
  display: grid;
  place-items: center;

  svg {
    transform: ${({clicked:i})=>i?"scale(0.9)":"scale(1)"};
    color: ${({theme:i})=>i.pallet.textColor};
  }
`;function _$({Icon:i,onClick:t}){const[e,n]=ut.useState(!1);return Y.jsx(l$,{clicked:e,onMouseDown:s=>s.stopPropagation(),onPointerDown:()=>n(!0),onPointerUp:()=>n(!1),onPointerOut:()=>n(!1),className:"cursor-pointer",onClick:t,children:Y.jsx(i,{})})}function A$({handleClose:i,handleDrag:t,title:e}){const n=Mx();return Y.jsx(c$,{className:"cursor-move",onMouseDown:t,children:n.name!=="code"&&Y.jsxs(Y.Fragment,{children:[Y.jsx(h$,{children:e}),Y.jsx(u$,{children:Y.jsx(_$,{Icon:o$,onClick:i})})]})})}function x$({Icon:i,onClick:t}){const[e,n]=ut.useState(!1);return Y.jsx(y$,{className:"cursor-pointer",clicked:e,onMouseDown:s=>s.stopPropagation(),onPointerDown:()=>n(!0),onPointerUp:()=>n(!1),onPointerOut:()=>n(!1),onClick:t,children:i})}function o0({children:i,modal:t,buttons:e}){const[n,s]=ut.useState(!1),[r,a]=ut.useState(t.position),l=ut.useRef(!1),u=ut.useRef({x:0,y:0}),f=xy(),m=()=>{s(!0),setTimeout(()=>{f(wZ({type:t.type,position:r}))},250)},g=b=>{l.current&&a({x:b.clientX-u.current.x,y:b.clientY-u.current.y})},v=()=>{l.current=!1,window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v)},_=b=>{f(LZ(t.type)),l.current=!0,u.current={x:b.clientX-r.x,y:b.clientY-r.y},window.addEventListener("mousemove",g),window.addEventListener("mouseup",v)};return ut.useEffect(()=>()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v)},[]),Y.jsxs(p$,{index:t.index||1,isClosing:n,dimensions:{width:t.dimensions.width,height:t.dimensions.height},position:r,className:"cursor",children:[Y.jsx(A$,{title:t.title,handleClose:m,handleDrag:_}),e&&Y.jsx(v$,{children:e.map(({Icon:b,onClick:C,key:T})=>Y.jsx(x$,{Icon:b,onClick:C},T))}),Y.jsx(m$,{title:t.title,children:Y.jsx(g$,{children:i})})]})}const b$=me.div`
  position: relative;
  overflow: hidden;
  width: 100%;
  height: 100%;
  max-width: ${i=>`${i.width}px`};
  max-height: ${i=>`${i.height}px`};
  display: flex;
  align-items: center;
  justify-content: center;
`,S$=me.img`
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  max-width: 100%;
  display: block;
  transition: opacity 1s;
  position: relative;
  z-index: 100;
`,E$="/vibefolio/pics/My_photo_thumb.webp",M$="/vibefolio/pics/My_photo.webp";function T$({src:i,thumb:t,width:e,height:n}){const[s,r]=ut.useState(t),[a,l]=ut.useState(!1);return ut.useEffect(()=>{const u=new Image;u.src=i,u.onload=()=>{r(i),l(!0)}},[i]),Y.jsx(S$,{width:e,height:n,src:s,alt:"My photo",loading:"lazy",style:{transition:"filter 0.3s ease",filter:a?"none":"blur(5px)"}})}function C$({modal:i}){const{width:t=200,height:e=200}=(i==null?void 0:i.dimensions)||{};return Y.jsx(o0,{modal:i,children:Y.jsx(b$,{width:t,height:e,children:Y.jsx(T$,{width:t,height:e,src:M$,thumb:E$})})})}const w$=me.div`
  padding: 10px;
`;function R$({modal:i}){return Y.jsx(o0,{modal:i,children:Y.jsxs(w$,{children:[Y.jsx("h2",{children:"Hey there! Im Mykyta."}),Y.jsx("p",{children:"Front-end developer with two years of experience in a dynamic environment as a shadow coder. Throughout my career, I have often taken on new projects received tasks outside of my area of expertise, and quickly learned new technologies and frameworks. It will not be a problem for me to switch to working with other technologies."}),Y.jsx("p",{children:"I have a great desire to develop in different directions besides the front-end and React environment."})]})})}const L$=me.div`
  position: relative;
  width: 50px;
  height: 50px;
`,D$=me.svg`
  width: ${i=>`${i.width}px`};
  height: ${i=>`${i.height}px`};
`,B$=me.div`
  position: absolute;
  top: ${({strokeWidth:i})=>i}px;
  left: ${({strokeWidth:i})=>i}px;
  width: ${({strokeWidth:i,size:t})=>t-i*2}px;
  height: ${({strokeWidth:i,size:t})=>t-i*2}px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  overflow: hidden;

  svg {
    width: 25px;
    height: 25px;
  }
`,vu=50,F4=4,W5=(vu-F4)/2,ED=2*Math.PI*W5,N1=({progress:i,Icon:t})=>{const[e,n]=ut.useState(0),s=Mx();ut.useEffect(()=>{n(i);let a=null;const l=1e3,u=f=>{a===null&&(a=f);const m=f-a,g=Math.min(i,m/l*i);n(g),m<l?requestAnimationFrame(u):n(i)};requestAnimationFrame(u)},[i]);const r=ED*(1-e/100);return Y.jsxs(L$,{children:[Y.jsxs(D$,{width:vu,height:vu,children:[Y.jsx("circle",{stroke:"#e6e6e6",fill:"transparent",strokeWidth:F4,r:W5,cx:vu/2,cy:vu/2}),Y.jsx("circle",{stroke:s.pallet.secondColor,fill:"transparent",strokeWidth:F4,strokeLinecap:"round",r:W5,cx:vu/2,cy:vu/2,strokeDasharray:ED,strokeDashoffset:-r,transform:`rotate(-90 ${vu/2} ${vu/2})`,style:{transition:"linear 0.3s ease"}})]}),Y.jsx(B$,{strokeWidth:F4,size:vu,children:t})]})};function O$(i){return Y.jsx("svg",{fill:"#3077C5",width:"800px",height:"800px",viewBox:"0 0 24 24",role:"img",xmlns:"http://www.w3.org/2000/svg",...i,children:Y.jsx("path",{d:"M0 12v12h24V0H0zm19.341-.956c.61.152 1.074.423 1.501.865.221.236.549.666.575.77.008.03-1.036.73-1.668 1.123-.023.015-.115-.084-.217-.236-.31-.45-.633-.644-1.128-.678-.728-.05-1.196.331-1.192.967a.88.88 0 0 0 .102.45c.16.331.458.53 1.39.933 1.719.74 2.454 1.227 2.911 1.92.51.773.625 2.008.278 2.926-.38.998-1.325 1.676-2.655 1.9-.411.073-1.386.062-1.828-.018-.964-.172-1.878-.648-2.442-1.273-.221-.243-.652-.88-.625-.925.011-.016.11-.077.22-.141.108-.061.511-.294.892-.515l.69-.4.145.214c.202.308.643.731.91.872.766.404 1.817.347 2.335-.118a.883.883 0 0 0 .313-.72c0-.278-.035-.4-.18-.61-.186-.266-.567-.49-1.649-.96-1.238-.533-1.771-.864-2.259-1.39a3.165 3.165 0 0 1-.659-1.2c-.091-.339-.114-1.189-.042-1.531.255-1.197 1.158-2.03 2.461-2.278.423-.08 1.406-.05 1.821.053zm-5.634 1.002l.008.983H10.59v8.876H8.38v-8.876H5.258v-.964c0-.534.011-.98.026-.99.012-.016 1.913-.024 4.217-.02l4.195.012z"})})}function N$(i){return Y.jsx("svg",{fill:"#FBDF02",xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 0 0 L 0 512 L 0 0 L 0 512 L 512 512 L 512 512 L 512 0 L 512 0 L 0 0 L 0 0 Z M 278.85714285714283 398.85714285714283 Q 277.7142857142857 436.57142857142856 258.2857142857143 454.85714285714283 L 258.2857142857143 454.85714285714283 L 258.2857142857143 454.85714285714283 Q 238.85714285714286 472 206.85714285714286 472 Q 178.28571428571428 470.85714285714283 160 459.42857142857144 Q 142.85714285714286 446.85714285714283 134.85714285714286 427.42857142857144 L 173.71428571428572 404.57142857142856 L 173.71428571428572 404.57142857142856 Q 182.85714285714286 426.2857142857143 204.57142857142858 428.57142857142856 Q 229.71428571428572 432 230.85714285714286 398.85714285714283 L 230.85714285714286 235.42857142857142 L 230.85714285714286 235.42857142857142 L 278.85714285714283 235.42857142857142 L 278.85714285714283 235.42857142857142 L 278.85714285714283 398.85714285714283 L 278.85714285714283 398.85714285714283 Z M 392 472 Q 325.7142857142857 468.57142857142856 305.14285714285717 422.85714285714283 L 344 400 L 344 400 Q 357.7142857142857 427.42857142857144 392 429.7142857142857 Q 422.85714285714283 427.42857142857144 424 405.7142857142857 Q 424 393.14285714285717 414.85714285714283 387.42857142857144 Q 405.7142857142857 380.57142857142856 388.57142857142856 373.7142857142857 L 377.14285714285717 368 L 377.14285714285717 368 Q 350.85714285714283 357.7142857142857 334.85714285714283 341.7142857142857 Q 320 324.57142857142856 318.85714285714283 296 Q 320 268.57142857142856 338.2857142857143 250.28571428571428 Q 357.7142857142857 233.14285714285714 389.7142857142857 232 Q 435.42857142857144 230.85714285714286 458.2857142857143 270.85714285714283 L 420.57142857142856 294.85714285714283 L 420.57142857142856 294.85714285714283 Q 409.14285714285717 273.14285714285717 389.7142857142857 274.2857142857143 Q 368 275.42857142857144 366.85714285714283 294.85714285714283 Q 365.7142857142857 313.14285714285717 396.57142857142856 324.57142857142856 L 408 329.14285714285717 L 408 329.14285714285717 Q 438.85714285714283 341.7142857142857 456 358.85714285714283 Q 472 374.85714285714283 472 404.57142857142856 Q 470.85714285714283 437.7142857142857 449.14285714285717 454.85714285714283 Q 427.42857142857144 472 392 472 L 392 472 Z"})})}function MD(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"#00D8FF",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 418 177 Q 410 175 402 172 Q 403 167 404 161 Q 404 161 405 161 Q 414 116 408 83 Q 402 50 381 38 Q 361 27 332 37 Q 302 47 269 76 Q 262 82 256 88 Q 252 84 248 80 Q 213 49 182 38 Q 151 27 130 38 Q 110 50 104 81 Q 98 112 107 155 Q 108 163 110 172 Q 101 175 92 178 Q 51 192 26 212 Q 1 233 0 256 Q 1 279 27 301 Q 54 322 96 337 Q 103 339 110 341 Q 108 350 106 359 Q 98 402 104 432 Q 110 462 130 474 Q 151 485 182 475 Q 213 464 246 435 Q 249 433 252 430 Q 254 428 257 425 Q 264 432 271 438 Q 303 465 332 475 Q 362 485 382 474 Q 402 462 408 430 Q 415 398 406 354 Q 405 347 403 340 Q 408 339 413 337 Q 457 323 484 301 Q 511 280 512 256 Q 511 233 486 212 Q 460 192 418 177 L 418 177 Z M 283 92 Q 311 68 335 59 L 335 59 L 335 59 Q 358 50 371 56 Q 383 64 387 91 Q 391 118 383 157 Q 382 162 381 167 Q 348 159 314 156 Q 294 128 271 103 Q 277 98 283 92 L 283 92 Z M 167 308 Q 175 321 183 333 Q 160 331 137 326 Q 143 304 153 281 Q 160 295 167 308 L 167 308 Z M 137 187 Q 159 182 183 179 Q 175 192 167 205 Q 160 218 153 231 Q 143 208 137 187 L 137 187 Z M 164 256 Q 174 235 186 216 Q 197 196 210 177 Q 233 175 256 175 Q 279 175 302 177 Q 315 196 326 215 Q 338 235 348 256 Q 338 276 326 297 Q 315 316 302 336 Q 280 337 256 337 Q 232 337 210 336 Q 197 317 186 297 Q 174 277 164 256 L 164 256 Z M 345 307 Q 352 294 360 281 Q 369 302 376 325 Q 353 330 329 333 Q 337 320 345 307 L 345 307 Z M 359 231 Q 352 218 345 205 Q 337 192 330 179 Q 354 182 375 187 Q 368 210 359 231 L 359 231 Z M 256 118 Q 272 135 286 154 Q 256 153 226 154 Q 241 135 256 118 L 256 118 Z M 140 57 Q 153 50 178 60 L 178 60 L 178 60 Q 204 70 234 96 Q 236 98 239 101 Q 240 102 241 103 Q 218 128 198 156 Q 164 159 131 167 Q 129 159 128 151 Q 121 114 124 89 Q 128 64 140 57 L 140 57 Z M 116 321 Q 109 319 103 317 Q 69 306 40 286 Q 25 274 21 256 Q 22 241 43 226 Q 64 210 99 198 Q 107 195 116 193 Q 126 225 141 256 Q 126 288 116 321 L 116 321 Z M 232 419 Q 207 441 176 454 Q 158 462 141 455 Q 128 448 125 424 Q 121 399 127 363 Q 129 355 131 346 Q 164 354 199 356 Q 219 384 242 410 Q 237 414 232 419 L 232 419 Z M 257 394 Q 241 378 226 358 Q 241 359 256 359 Q 271 359 286 358 Q 273 377 257 394 L 257 394 Z M 388 424 Q 386 443 371 456 Q 359 462 336 454 Q 313 445 285 421 Q 278 416 272 410 Q 295 385 314 356 Q 349 353 382 346 Q 384 352 385 358 Q 392 391 388 424 L 388 424 Z M 406 317 Q 402 318 397 319 Q 387 287 372 256 Q 386 225 396 193 Q 404 195 411 197 Q 447 210 468 226 Q 490 241 491 255 Q 490 271 467 287 Q 444 304 406 317 L 406 317 Z M 256 302 Q 275 301 288 288 L 288 288 L 288 288 Q 301 275 302 256 Q 301 237 288 224 Q 275 211 256 210 Q 237 211 224 224 Q 211 237 210 256 Q 211 275 224 288 Q 237 301 256 302 L 256 302 Z"})})}function I$(i){return Y.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 512 512",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:10},...i,children:Y.jsxs("g",{transform:"matrix(2.25096,0,0,2.25096,256.253,256.48)",children:[Y.jsx("g",{id:"Three.js_Icon.svg",transform:"matrix(1,0,0,1,-113.385,-113.385)",children:Y.jsxs("g",{transform:"matrix(1,0,0,1,8.964,4.2527)",children:[Y.jsx("path",{d:"M63.02,200.61L19.807,25.67L193.037,75.544L63.02,200.61Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),Y.jsx("path",{d:"M106.39,50.612L127.981,138.108L41.414,113.163L106.39,50.612Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),Y.jsx("path",{d:"M84.91,125.03L74.186,81.565L117.194,93.911L84.91,125.03Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),Y.jsx("path",{d:"M63.458,38.153L74.182,81.618L31.174,69.272L63.458,38.153Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),Y.jsx("path",{d:"M149.47,62.93L160.194,106.395L117.186,94.049L149.47,62.93Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}}),Y.jsx("path",{d:"M84.915,125.06L95.639,168.525L52.631,156.179L84.915,125.06Z",style:{fill:"white",stroke:"black",strokeWidth:"4px"}})]})}),Y.jsx("g",{id:"Three.js_Icon.svg1"})]})})}function U$(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",fill:"#82BF05",...i,children:Y.jsx("path",{d:"M 255.49705304518665 512 Q 245.43811394891944 512 236.385068762279 506.9705304518664 L 174.0196463654224 469.7524557956778 L 174.0196463654224 469.7524557956778 Q 166.97838899803537 465.7288801571709 167.98428290766208 464.7229862475442 Q 168.9901768172888 462.71119842829074 172.00785854616896 461.70530451866404 Q 181.06090373280944 458.6876227897839 186.09037328094303 456.67583497053045 Q 191.11984282907662 454.66404715127703 200.1728880157171 449.63457760314344 Q 202.18467583497053 448.6286836935167 205.20235756385068 449.63457760314344 L 252.47937131630647 477.7996070726916 L 252.47937131630647 477.7996070726916 Q 255.49705304518665 479.811394891945 258.5147347740668 477.7996070726916 L 444.60510805500985 370.16895874263264 L 444.60510805500985 370.16895874263264 Q 446.61689587426326 369.1630648330059 446.61689587426326 365.139489194499 L 446.61689587426326 150.88408644400786 L 446.61689587426326 150.88408644400786 Q 446.61689587426326 147.86640471512771 443.5992141453831 145.85461689587427 L 258.5147347740668 39.22986247544204 L 258.5147347740668 39.22986247544204 Q 255.49705304518665 37.218074656188605 252.47937131630647 39.22986247544204 L 67.39489194499018 145.85461689587427 L 67.39489194499018 145.85461689587427 Q 64.37721021611002 147.86640471512771 64.37721021611002 150.88408644400786 L 64.37721021611002 366.14538310412576 L 64.37721021611002 366.14538310412576 Q 64.37721021611002 369.1630648330059 67.39489194499018 370.16895874263264 L 117.68958742632613 400.3457760314342 L 117.68958742632613 400.3457760314342 Q 138.81335952848724 409.39882121807466 150.88408644400786 402.3575638506876 Q 161.94891944990178 394.3104125736739 162.9548133595285 381.2337917485265 L 162.9548133595285 169.99607072691552 L 162.9548133595285 169.99607072691552 Q 162.9548133595285 164.96660117878193 167.98428290766208 163.9607072691552 L 191.11984282907662 163.9607072691552 L 191.11984282907662 163.9607072691552 Q 196.1493123772102 164.96660117878193 197.15520628683694 169.99607072691552 L 197.15520628683694 381.2337917485265 L 197.15520628683694 381.2337917485265 Q 195.1434184675835 437.5638506876228 141.8310412573674 439.5756385068762 Q 134.78978388998036 439.5756385068762 125.73673870333988 437.5638506876228 Q 116.6836935166994 435.5520628683694 98.57760314341847 427.5049115913556 L 50.29469548133595 399.3398821218075 L 50.29469548133595 399.3398821218075 Q 31.18271119842829 388.27504911591353 31.18271119842829 365.139489194499 L 31.18271119842829 150.88408644400786 L 31.18271119842829 150.88408644400786 Q 31.18271119842829 128.75442043222003 50.29469548133595 117.68958742632613 L 236.385068762279 10.05893909626719 L 236.385068762279 10.05893909626719 Q 255.49705304518665 0 274.6090373280943 10.05893909626719 L 460.69941060903733 117.68958742632613 L 460.69941060903733 117.68958742632613 Q 479.811394891945 128.75442043222003 480.8172888015717 150.88408644400786 L 480.8172888015717 366.14538310412576 L 480.8172888015717 366.14538310412576 Q 479.811394891945 387.2691552062868 460.69941060903733 399.3398821218075 L 274.6090373280943 506.9705304518664 L 274.6090373280943 506.9705304518664 Q 265.5559921414538 512 255.49705304518665 512 L 255.49705304518665 512 Z M 405.3752455795678 300.762278978389 Q 405.3752455795678 271.5913555992141 385.2573673870334 259.52062868369353 L 385.2573673870334 259.52062868369353 L 385.2573673870334 259.52062868369353 Q 364.1335952848723 247.44990176817288 320.8801571709234 242.4204322200393 Q 279.6385068762279 237.3909626719057 267.56777996070724 232.3614931237721 Q 256.50294695481335 227.33202357563852 257.50884086444006 217.2730844793713 Q 256.50294695481335 208.22003929273083 265.5559921414538 200.1728880157171 Q 274.6090373280943 192.12573673870335 305.7917485265226 191.11984282907662 Q 333.95677799607074 191.11984282907662 346.02750491159134 198.16110019646365 Q 359.1041257367387 206.20825147347742 363.1277013752456 225.32023575638507 Q 364.1335952848723 229.34381139489196 369.1630648330059 229.34381139489196 L 393.3045186640471 229.34381139489196 L 393.3045186640471 229.34381139489196 Q 395.3163064833006 229.34381139489196 396.3222003929273 227.33202357563852 Q 398.33398821218077 226.32612966601178 398.33398821218077 223.30844793713163 Q 393.3045186640471 157.9253438113949 305.7917485265226 158.9312377210216 Q 223.30844793713163 159.93713163064834 221.2966601178782 218.27897838899804 Q 221.2966601178782 248.4557956777996 242.4204322200393 260.52652259332024 Q 264.5500982318271 272.5972495088409 302.77406679764243 275.614931237721 Q 347.0333988212181 279.6385068762279 359.1041257367387 286.67976424361495 Q 370.16895874263264 293.72102161100196 369.1630648330059 302.77406679764243 Q 370.16895874263264 332.95088408644403 312.8330058939096 331.94499017681727 Q 276.6208251473477 331.94499017681727 263.5442043222004 322.8919449901768 Q 251.47347740667976 313.8388998035363 249.46168958742632 294.72691552062867 Q 248.4557956777996 290.7033398821218 244.43222003929273 290.7033398821218 L 220.29076620825148 290.7033398821218 L 220.29076620825148 290.7033398821218 Q 215.26129666011786 290.7033398821218 214.25540275049116 295.73280943025543 Q 213.24950884086445 320.8801571709234 233.3673870333988 342.00392927308445 Q 253.4852652259332 363.1277013752456 312.8330058939096 364.1335952848723 Q 403.36345776031436 363.1277013752456 405.3752455795678 300.762278978389 L 405.3752455795678 300.762278978389 Z"})})}const P$=me.div`
  padding: 10px 20px;
  display: grid;
  gap: 10px;
  grid-template-columns: 1fr 1fr;
`,I1=me.div`
  display: flex;
  flex-direction: column;
  gap: 5px;
  align-items: center;
`;function F$({modal:i}){const t=Mx();return Y.jsx(o0,{modal:i,children:Y.jsxs(P$,{children:[Y.jsxs(I1,{children:[Y.jsx(N1,{progress:80,Icon:Y.jsx(N$,{})}),Y.jsx(xm,{color:t.pallet.textColor,size:"medium",text:"Javascript"})]}),Y.jsxs(I1,{children:[Y.jsx(N1,{progress:60,Icon:Y.jsx(O$,{})}),Y.jsx(xm,{color:t.pallet.textColor,size:"medium",text:"Typescript"})]}),Y.jsxs(I1,{children:[Y.jsx(N1,{progress:70,Icon:Y.jsx(MD,{})}),Y.jsx(xm,{color:t.pallet.textColor,size:"medium",text:"React"})]}),Y.jsxs(I1,{children:[Y.jsx(N1,{progress:50,Icon:Y.jsx("div",{style:{backgroundColor:"#00D8FF",padding:1},children:Y.jsx(MD,{fill:"white"})})}),Y.jsx(xm,{color:t.pallet.textColor,size:"medium",text:"React Native"})]}),Y.jsxs(I1,{children:[Y.jsx(N1,{progress:25,Icon:Y.jsx(I$,{})}),Y.jsx(xm,{color:t.pallet.textColor,size:"medium",text:"Three js"})]}),Y.jsxs(I1,{children:[Y.jsx(N1,{progress:25,Icon:Y.jsx(U$,{})}),Y.jsx(xm,{color:t.pallet.textColor,size:"medium",text:"Node js"})]})]})})}const H$=[{company:"Incora",lengthOfService:"2023  2025",position:"Front-end Developer (Shadow Coder)",projects:[{name:"Hotel Management Platform",technologies:"React, React Native, Firebase",features:["Developed cross-platform features using a shared codebase for both web and mobile.","Built internal utilities to simplify Firebase usage and improve performance.","Contributed to booking workflows, user dashboards, and offline support."]},{name:"Food Delivery Platform",technologies:"Angular, React, React Native",features:["Implemented components and pages for separate apps tailored to different user roles.","Ensured consistent design language across platforms.","Helped debug state management issues and asynchronous flows."]},{name:"Sports Betting Platform",technologies:"React",features:["Focused on responsive UI and interactive components for both mobile and desktop.","Worked on live odds rendering and optimized performance for high-traffic scenarios.","Contributed to reusable component libraries."]}]}];function TD(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 385.7219730941704 236.48430493273543 Q 401.7937219730942 256 385.7219730941704 275.5156950672646 L 165.30941704035874 495.92825112107624 L 165.30941704035874 495.92825112107624 Q 145.79372197309416 512 126.27802690582959 495.92825112107624 Q 110.20627802690584 476.41255605381167 126.27802690582959 456.8968609865471 L 327.17488789237666 256 L 327.17488789237666 256 L 126.27802690582959 55.10313901345292 L 126.27802690582959 55.10313901345292 Q 110.20627802690584 35.587443946188344 126.27802690582959 16.071748878923767 Q 145.79372197309416 0 165.30941704035874 16.071748878923767 L 385.7219730941704 236.48430493273543 L 385.7219730941704 236.48430493273543 Z"})})}const z$=me.div`
  display: flex;
  flex-direction: column;
  gap-y: 5px;

  margin-bottom: 10px;
`,G$=me.a`
  color: blue;
  text-decoration: underline;
  font-size: 18px;

  &:link {
    color: blue;
    text-decoration: underline;
  }

  &:visited {
    color: purple;
    text-decoration: underline;
  }

  &:hover {
    color: darkblue;
    text-decoration: underline;
  }

  &:active {
    color: red;
    text-decoration: underline;
  }
`,CD=me.button`
  position: relative;
  min-width: 24px;
  min-height: 48px;
  height: 100%;
  width: auto;
  z-index: 2;
  transition: linear 0.1s;

  svg {
    height: 100%;
    width: auto;
    transition: linear 0.1s;
  }

  &:hover:not([disabled]) {
    svg {
      fill: ${({theme:i})=>i.pallet.secondColor};
    }
  }
`,k$=me.div`
  width: 100%;
  height: 100%;
`,V$=me.div`
  display: flex;
  justify-content: space-between;
  align-items; center;
  height: 80px;
`,Q$=me.div`
  display: flex;
  align-items: center;
  position: relative;
  overflow: hidden;
`,X$=me.div`
  position: relative;
  display: flex;
  transition: linear 0.3s;
`,j$=me.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 10px;
  min-width: 100%;
`,q$=me.div`
  display: flex;
  flex-direction: column;
`,Y$=me.span`
  font-weight: 600;
`,W$=me.span`
  font-style: italic;
`,K$=me.div`
  position: relative;
`,J$=me.ul`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  margin: 0;
  padding-top: 16px;

  opacity: ${({isVisible:i})=>i?1:0};
  visibility: ${({isVisible:i})=>i?"visible":"hidden"};
  transition: opacity 0.4s ease-in-out, visibility 0.3s ease-in-out;
  pointer-events: ${({isVisible:i})=>i?"auto":"none"};
`,Z$=me.li`
  margin-bottom: 4px;

  &:last-child {
    margin: 0;
  }

  &::marker {
    color: ${({theme:i})=>i.pallet.secondColor};
  }
`;function $$({company:i}){const{company:t,lengthOfService:e,position:n,projects:s}=i,[r,a]=ut.useState(0),l=ut.useRef(null),u=ut.useRef(null),[f,m]=ut.useState(0),g=r===0,v=r===s.length-1;ut.useEffect(()=>{const b=l.current;if(b){const C=b.children[0];b.style.left=`-${C.clientWidth*r}px`}u.current&&m(u.current.scrollHeight)},[r]);const _=b=>{b==="next"&&a(C=>s.length-1===C?C:C+1),b==="prev"&&a(C=>C===0?C:C-1)};return Y.jsxs(Y.Fragment,{children:[Y.jsxs(z$,{children:[Y.jsxs("span",{children:[Y.jsx(G$,{className:"cursor-pointer",target:"_blank",href:"https://incora.software/",children:t})," "," ",e]}),Y.jsx("span",{children:n})]}),Y.jsx(k$,{children:Y.jsxs(q$,{children:[Y.jsxs(V$,{children:[Y.jsx(CD,{onClick:()=>_("prev"),disabled:g,className:g?"not-allowed":"cursor-pointer",children:Y.jsx(TD,{style:{transform:"rotate(180deg)"}})}),Y.jsx(Q$,{children:Y.jsx(X$,{ref:l,children:s.map(b=>Y.jsxs(j$,{children:[Y.jsx(Y$,{children:b.name}),Y.jsx(W$,{children:b.technologies})]},b.name))})}),Y.jsx(CD,{onClick:()=>_("next"),disabled:v,className:v?"not-allowed":"cursor-pointer",children:Y.jsx(TD,{})})]}),Y.jsx(K$,{style:{height:f},children:s.map((b,C)=>Y.jsx(J$,{isVisible:C===r,ref:C===r?u:null,children:b.features.map(T=>Y.jsx(Z$,{children:T},T))},b.name))})]})})]})}const ttt=me.div`
  padding: 10px;
`;function ett({modal:i}){return Y.jsx(o0,{modal:i,children:Y.jsx(ttt,{children:H$.map(t=>Y.jsx($$,{company:t}))})})}function ntt(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 0 64 Q 1 37 19 19 L 19 19 L 19 19 Q 37 1 64 0 L 224 0 L 224 0 L 224 128 L 224 128 Q 224 142 233 151 Q 242 160 256 160 L 384 160 L 384 160 L 384 304 L 384 304 L 176 304 L 176 304 Q 149 305 131 323 Q 113 341 112 368 L 112 512 L 112 512 L 64 512 L 64 512 Q 37 511 19 493 Q 1 475 0 448 L 0 64 L 0 64 Z M 384 128 L 256 128 L 384 128 L 256 128 L 256 0 L 256 0 L 384 128 L 384 128 Z M 208 512 Q 188 511 174 498 L 174 498 L 174 498 Q 161 484 160 464 L 160 448 L 160 448 Q 161 433 176 432 Q 191 433 192 448 L 192 464 L 192 464 Q 193 479 208 480 Q 223 479 224 464 L 224 368 L 224 368 Q 225 353 240 352 Q 255 353 256 368 L 256 464 L 256 464 Q 255 484 242 498 Q 228 511 208 512 L 208 512 Z M 304 352 L 336 352 L 304 352 L 336 352 Q 360 353 376 368 Q 391 384 392 408 Q 391 432 376 448 Q 360 463 336 464 L 320 464 L 320 464 L 320 496 L 320 496 Q 319 511 304 512 Q 289 511 288 496 L 288 448 L 288 448 L 288 368 L 288 368 Q 289 353 304 352 L 304 352 Z M 336 432 Q 358 430 360 408 Q 358 386 336 384 L 320 384 L 320 384 L 320 432 L 320 432 L 336 432 L 336 432 Z M 416 392 Q 416 375 428 364 L 428 364 L 428 364 Q 439 352 456 352 L 472 352 L 472 352 Q 489 352 500 364 Q 512 375 512 392 L 512 400 L 512 400 Q 511 415 496 416 Q 481 415 480 400 L 480 392 L 480 392 Q 479 385 472 384 L 456 384 L 456 384 Q 449 385 448 392 L 448 472 L 448 472 Q 449 479 456 480 L 472 480 L 472 480 Q 479 479 480 472 L 480 464 L 480 464 Q 465 463 464 448 Q 465 433 480 432 L 496 432 L 496 432 Q 511 433 512 448 L 512 472 L 512 472 Q 512 489 500 500 Q 489 512 472 512 L 456 512 L 456 512 Q 439 512 428 500 Q 416 489 416 472 L 416 392 L 416 392 Z"})})}function itt(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 32 96 Q 33 55 60 28 L 60 28 L 60 28 Q 87 1 128 0 L 224 0 L 224 0 L 224 191 L 224 191 Q 225 201 233 205 Q 241 209 250 203 L 304 160 L 304 160 L 358 203 L 358 203 Q 367 209 375 205 Q 383 201 384 191 L 384 0 L 384 0 L 416 0 L 448 0 Q 462 0 471 9 Q 480 18 480 32 L 480 352 L 480 352 Q 480 366 471 375 Q 462 384 448 384 L 448 448 L 448 448 Q 462 448 471 457 Q 480 466 480 480 Q 480 494 471 503 Q 462 512 448 512 L 416 512 L 128 512 Q 87 511 60 484 Q 33 457 32 416 L 32 96 L 32 96 Z M 96 416 Q 96 430 105 439 L 105 439 L 105 439 Q 114 448 128 448 L 384 448 L 384 448 L 384 384 L 384 384 L 128 384 L 128 384 Q 114 384 105 393 Q 96 402 96 416 L 96 416 Z"})})}function stt(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 235.55271565495207 46.61980830670927 L 130.8626198083067 46.61980830670927 L 235.55271565495207 46.61980830670927 L 104.69009584664536 46.61980830670927 Q 93.23961661341853 46.61980830670927 85.87859424920129 53.980830670926515 Q 78.51757188498402 61.34185303514377 78.51757188498402 72.7923322683706 Q 78.51757188498402 84.24281150159744 85.87859424920129 91.60383386581469 Q 93.23961661341853 98.96485623003196 104.69009584664536 98.96485623003196 L 104.69009584664536 207.7444089456869 L 104.69009584664536 207.7444089456869 Q 104.69009584664536 222.4664536741214 97.32907348242811 234.73482428115017 L 8.178913738019169 378.68370607028754 L 8.178913738019169 378.68370607028754 Q 0 392.5878594249201 0 408.9456869009585 Q 0.8178913738019169 432.6645367412141 16.357827476038338 449.0223642172524 Q 32.715654952076676 464.5623003194888 56.43450479233227 465.3801916932907 L 309.98083067092654 465.3801916932907 L 309.98083067092654 465.3801916932907 Q 323.0670926517572 465.3801916932907 333.6996805111821 459.6549520766773 Q 330.4281150159744 452.29392971246006 330.4281150159744 444.1150159744409 L 330.4281150159744 443.297124600639 L 330.4281150159744 443.297124600639 Q 318.9776357827476 449.0223642172524 306.7092651757188 447.38658146964855 Q 293.62300319488816 446.56869009584665 283.8083067092652 435.93610223642173 Q 272.3578274760383 423.66773162939296 264.17891373801916 408.9456869009585 Q 255.18210862619807 394.22364217252397 250.2747603833866 377.86581469648564 Q 246.18530351437698 364.779552715655 251.0926517571885 353.3290734824281 Q 256 341.0607028753994 266.6325878594249 334.517571884984 L 266.6325878594249 334.517571884984 L 266.6325878594249 334.517571884984 L 97.32907348242811 334.517571884984 L 97.32907348242811 334.517571884984 L 141.49520766773162 262.54313099041536 L 141.49520766773162 262.54313099041536 Q 157.03514376996804 237.18849840255592 157.03514376996804 207.7444089456869 L 157.03514376996804 98.96485623003196 L 157.03514376996804 98.96485623003196 L 209.38019169329073 98.96485623003196 L 209.38019169329073 98.96485623003196 L 209.38019169329073 207.7444089456869 L 209.38019169329073 207.7444089456869 Q 209.38019169329073 237.18849840255592 224.92012779552715 262.54313099041536 L 248.63897763578274 300.9840255591054 L 248.63897763578274 300.9840255591054 Q 248.63897763578274 296.0766773162939 250.2747603833866 291.1693290734824 Q 255.18210862619807 274.8115015974441 263.36102236421726 260.0894568690096 Q 269.08626198083067 251.91054313099042 274.8115015974441 243.73162939297126 L 269.90415335463257 234.73482428115017 L 269.90415335463257 234.73482428115017 Q 261.7252396166134 222.4664536741214 261.7252396166134 207.7444089456869 L 261.7252396166134 98.96485623003196 L 261.7252396166134 98.96485623003196 Q 273.1757188498403 98.96485623003196 280.5367412140575 91.60383386581469 Q 287.89776357827475 84.24281150159744 287.89776357827475 72.7923322683706 Q 287.89776357827475 61.34185303514377 280.5367412140575 53.980830670926515 Q 273.1757188498403 46.61980830670927 261.7252396166134 46.61980830670927 L 235.55271565495207 46.61980830670927 L 235.55271565495207 46.61980830670927 Z M 356.6006389776358 224.92012779552715 L 356.6006389776358 239.64217252396165 L 356.6006389776358 224.92012779552715 L 356.6006389776358 239.64217252396165 Q 355.78274760383385 249.45686900958466 346.7859424920128 254.36421725239617 Q 337.7891373801917 260.0894568690096 328.7923322683706 255.18210862619807 L 318.1597444089457 248.63897763578274 L 318.1597444089457 248.63897763578274 Q 309.1629392971246 244.54952076677316 302.6198083067093 251.0926517571885 Q 293.62300319488816 260.9073482428115 286.26198083067095 273.1757188498403 Q 278.9009584664537 285.444089456869 275.62939297124603 298.53035143769966 Q 273.1757188498403 307.5271565495208 281.35463258785944 312.4345047923323 L 292.80511182108626 318.9776357827476 L 292.80511182108626 318.9776357827476 Q 300.9840255591054 324.702875399361 300.9840255591054 334.517571884984 Q 300.9840255591054 344.33226837060704 292.80511182108626 349.23961661341855 L 281.35463258785944 356.6006389776358 L 281.35463258785944 356.6006389776358 Q 273.1757188498403 361.50798722044726 275.62939297124603 370.5047923322684 Q 279.7188498402556 383.59105431309905 286.26198083067095 395.8594249201278 Q 293.62300319488816 408.12779552715654 302.6198083067093 417.94249201277955 Q 309.98083067092654 424.48562300319486 318.1597444089457 419.5782747603834 L 328.7923322683706 413.85303514376994 L 328.7923322683706 413.85303514376994 Q 337.7891373801917 408.9456869009585 346.7859424920128 413.85303514376994 Q 355.78274760383385 419.5782747603834 356.6006389776358 429.39297124600637 L 356.6006389776358 443.297124600639 L 356.6006389776358 443.297124600639 Q 356.6006389776358 453.11182108626195 365.59744408945687 455.5654952076677 Q 378.68370607028754 458.8370607028754 392.5878594249201 458.8370607028754 Q 406.49201277955274 458.8370607028754 419.5782747603834 455.5654952076677 Q 427.75718849840257 453.11182108626195 428.57507987220447 443.297124600639 L 428.57507987220447 429.39297124600637 L 428.57507987220447 429.39297124600637 Q 429.39297124600637 418.76038338658145 437.5718849840256 413.85303514376994 Q 446.56869009584665 408.9456869009585 455.5654952076677 413.03514376996804 L 467.0159744408946 419.5782747603834 L 467.0159744408946 419.5782747603834 Q 475.19488817891374 423.66773162939296 482.555910543131 417.94249201277955 Q 491.55271565495207 408.12779552715654 498.91373801916933 395.04153354632587 Q 505.45686900958464 382.77316293929715 509.54632587859425 369.6869009584665 Q 512 361.50798722044726 503.82108626198084 355.78274760383385 L 492.37060702875397 349.23961661341855 L 492.37060702875397 349.23961661341855 Q 484.1916932907348 344.33226837060704 484.1916932907348 334.517571884984 Q 484.1916932907348 324.702875399361 492.37060702875397 318.9776357827476 L 503.82108626198084 312.4345047923323 L 503.82108626198084 312.4345047923323 Q 512 307.5271565495208 509.54632587859425 298.53035143769966 Q 505.45686900958464 285.444089456869 498.91373801916933 273.1757188498403 Q 491.55271565495207 260.9073482428115 482.555910543131 250.2747603833866 Q 475.19488817891374 244.54952076677316 467.0159744408946 248.63897763578274 L 455.5654952076677 255.18210862619807 L 455.5654952076677 255.18210862619807 Q 446.56869009584665 260.0894568690096 437.5718849840256 254.36421725239617 Q 429.39297124600637 249.45686900958466 428.57507987220447 239.64217252396165 L 428.57507987220447 224.92012779552715 L 428.57507987220447 224.92012779552715 Q 427.75718849840257 215.92332268370606 419.5782747603834 212.6517571884984 Q 406.49201277955274 210.19808306709265 392.5878594249201 210.19808306709265 Q 378.68370607028754 210.19808306709265 365.59744408945687 212.6517571884984 Q 356.6006389776358 215.92332268370606 356.6006389776358 224.92012779552715 L 356.6006389776358 224.92012779552715 Z M 353.3290734824281 334.517571884984 Q 353.3290734824281 311.61661341853033 372.1405750798722 298.53035143769966 Q 392.5878594249201 287.89776357827475 413.03514376996804 298.53035143769966 Q 431.8466453674121 311.61661341853033 431.8466453674121 334.517571884984 Q 431.8466453674121 357.4185303514377 413.03514376996804 369.6869009584665 Q 392.5878594249201 381.1373801916933 372.1405750798722 369.6869009584665 Q 353.3290734824281 357.4185303514377 353.3290734824281 334.517571884984 L 353.3290734824281 334.517571884984 Z"})})}function rtt(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 56.888888888888886 56.888888888888886 Q 32.888888888888886 57.77777777777778 16.88888888888889 73.77777777777777 L 16.88888888888889 73.77777777777777 L 16.88888888888889 73.77777777777777 Q 0.8888888888888888 89.77777777777777 0 113.77777777777777 L 0 398.22222222222223 L 0 398.22222222222223 Q 0.8888888888888888 422.22222222222223 16.88888888888889 438.22222222222223 Q 32.888888888888886 454.22222222222223 56.888888888888886 455.1111111111111 L 455.1111111111111 455.1111111111111 L 455.1111111111111 455.1111111111111 Q 479.1111111111111 454.22222222222223 495.1111111111111 438.22222222222223 Q 511.1111111111111 422.22222222222223 512 398.22222222222223 L 512 113.77777777777777 L 512 113.77777777777777 Q 511.1111111111111 89.77777777777777 495.1111111111111 73.77777777777777 Q 479.1111111111111 57.77777777777778 455.1111111111111 56.888888888888886 L 56.888888888888886 56.888888888888886 L 56.888888888888886 56.888888888888886 Z M 128 284.44444444444446 L 184.88888888888889 284.44444444444446 L 128 284.44444444444446 L 184.88888888888889 284.44444444444446 Q 215.11111111111111 285.3333333333333 235.55555555555554 304.8888888888889 Q 255.11111111111111 325.3333333333333 256 355.55555555555554 Q 255.11111111111111 368.8888888888889 241.77777777777777 369.77777777777777 L 71.11111111111111 369.77777777777777 L 71.11111111111111 369.77777777777777 Q 57.77777777777778 368.8888888888889 56.888888888888886 355.55555555555554 Q 57.77777777777778 325.3333333333333 77.33333333333333 304.8888888888889 Q 97.77777777777777 285.3333333333333 128 284.44444444444446 L 128 284.44444444444446 Z M 99.55555555555556 199.11111111111111 Q 100.44444444444444 167.11111111111111 128 150.22222222222223 Q 156.44444444444446 134.22222222222223 184.88888888888889 150.22222222222223 Q 212.44444444444446 167.11111111111111 213.33333333333334 199.11111111111111 Q 212.44444444444446 231.11111111111111 184.88888888888889 248 Q 156.44444444444446 264 128 248 Q 100.44444444444444 231.11111111111111 99.55555555555556 199.11111111111111 L 99.55555555555556 199.11111111111111 Z M 327.1111111111111 170.66666666666666 L 440.8888888888889 170.66666666666666 L 327.1111111111111 170.66666666666666 L 440.8888888888889 170.66666666666666 Q 454.22222222222223 171.55555555555554 455.1111111111111 184.88888888888889 Q 454.22222222222223 198.22222222222223 440.8888888888889 199.11111111111111 L 327.1111111111111 199.11111111111111 L 327.1111111111111 199.11111111111111 Q 313.77777777777777 198.22222222222223 312.8888888888889 184.88888888888889 Q 313.77777777777777 171.55555555555554 327.1111111111111 170.66666666666666 L 327.1111111111111 170.66666666666666 Z M 327.1111111111111 227.55555555555554 L 440.8888888888889 227.55555555555554 L 327.1111111111111 227.55555555555554 L 440.8888888888889 227.55555555555554 Q 454.22222222222223 228.44444444444446 455.1111111111111 241.77777777777777 Q 454.22222222222223 255.11111111111111 440.8888888888889 256 L 327.1111111111111 256 L 327.1111111111111 256 Q 313.77777777777777 255.11111111111111 312.8888888888889 241.77777777777777 Q 313.77777777777777 228.44444444444446 327.1111111111111 227.55555555555554 L 327.1111111111111 227.55555555555554 Z M 327.1111111111111 284.44444444444446 L 440.8888888888889 284.44444444444446 L 327.1111111111111 284.44444444444446 L 440.8888888888889 284.44444444444446 Q 454.22222222222223 285.3333333333333 455.1111111111111 298.6666666666667 Q 454.22222222222223 312 440.8888888888889 312.8888888888889 L 327.1111111111111 312.8888888888889 L 327.1111111111111 312.8888888888889 Q 313.77777777777777 312 312.8888888888889 298.6666666666667 Q 313.77777777777777 285.3333333333333 327.1111111111111 284.44444444444446 L 327.1111111111111 284.44444444444446 Z"})})}function att({modal:i}){const t=xy(),e=Mx(),n=s=>{t(S7(s))};return Y.jsx(o0,{modal:i,children:Y.jsxs(BN,{flow:"row",children:[Y.jsx(qd,{onClick:()=>n("photo"),SvgIcon:ntt,text:"My_photo",textColor:e.pallet.textColor}),Y.jsx(qd,{onClick:()=>n("experience"),SvgIcon:stt,text:"Experience",textColor:e.pallet.textColor}),Y.jsx(qd,{onClick:()=>n("about_me"),SvgIcon:rtt,text:"About_me",textColor:e.pallet.textColor}),Y.jsx(qd,{onClick:()=>n("skills"),SvgIcon:itt,text:"Skills",textColor:e.pallet.textColor})]})})}var k_={};k_.d=(i,t)=>{for(var e in t)k_.o(t,e)&&!k_.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})};k_.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var sn=globalThis.pdfjsLib={};k_.d(sn,{AbortException:()=>c0,AnnotationEditorLayer:()=>ow,AnnotationEditorParamsType:()=>Ze,AnnotationEditorType:()=>dn,AnnotationEditorUIManager:()=>Kg,AnnotationLayer:()=>ant,AnnotationMode:()=>vd,ColorPicker:()=>_E,DOMSVGFactory:()=>I7,DrawLayer:()=>hw,FeatureTest:()=>Na,GlobalWorkerOptions:()=>Yh,ImageKind:()=>H4,InvalidPDFException:()=>IN,MissingPDFException:()=>l0,OPS:()=>cc,OutputScale:()=>tC,PDFDataRangeTransport:()=>DI,PDFDateString:()=>w7,PDFWorker:()=>$1,PasswordResponses:()=>utt,PermissionFlag:()=>ctt,PixelsPerInch:()=>np,RenderingCancelledException:()=>T7,TextLayer:()=>wC,UnexpectedResponseException:()=>UM,Util:()=>Le,VerbosityLevel:()=>OM,XfaLayer:()=>OI,build:()=>zet,createValidAbsoluteUrl:()=>ptt,fetchData:()=>FM,getDocument:()=>Det,getFilenameFromUrl:()=>Stt,getPdfFilenameFromUrl:()=>Ett,getXfaPageViewport:()=>Mtt,isDataScheme:()=>HM,isPdfFile:()=>C7,noContextMenu:()=>Ll,normalizeUnicode:()=>Att,setLayerDimensions:()=>Wg,shadow:()=>Fn,version:()=>Het});const ia=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),NN=[1,0,0,1,0,0],K5=[.001,0,0,.001,0,0],ott=1e7,t5=1.35,Po={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},vd={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ltt="pdfjs_internal_editor_",dn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ze={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},ctt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Yr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},H4={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ks={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},a_={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},OM={ERRORS:0,WARNINGS:1,INFOS:5},cc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},utt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let NM=OM.WARNINGS;function htt(i){Number.isInteger(i)&&(NM=i)}function ftt(){return NM}function IM(i){NM>=OM.INFOS&&console.log(`Info: ${i}`)}function An(i){NM>=OM.WARNINGS&&console.log(`Warning: ${i}`)}function Oi(i){throw new Error(i)}function js(i,t){i||Oi(t)}function dtt(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ptt(i,t=null,e=null){if(!i)return null;try{if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=_tt(i)}catch{}}const n=t?new URL(i,t):new URL(i);if(dtt(n))return n}catch{}return null}function Fn(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const up=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class J5 extends up{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Z5 extends up{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class IN extends up{constructor(t){super(t,"InvalidPDFException")}}class l0 extends up{constructor(t){super(t,"MissingPDFException")}}class UM extends up{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class mtt extends up{constructor(t){super(t,"FormatError")}}class c0 extends up{constructor(t){super(t,"AbortException")}}function UN(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Oi("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),a=i.subarray(s,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function PM(i){typeof i!="string"&&Oi("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function gtt(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function E7(i){const t=Object.create(null);for(const[e,n]of i)t[e]=n;return t}function vtt(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function ytt(){try{return new Function(""),!0}catch{return!1}}class Na{static get isLittleEndian(){return Fn(this,"isLittleEndian",vtt())}static get isEvalSupported(){return Fn(this,"isEvalSupported",ytt())}static get isOffscreenCanvasSupported(){return Fn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Fn(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Fn(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Fn(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const e5=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var ef,z4,$5;class Le{static makeHexColor(t,e,n){return`#${e5[t]}${e5[e]}${e5[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[n,s]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[s,r]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),a=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],s[0],r[0],a[0]),Math.min(n[1],s[1],r[1],a[1]),Math.max(n[0],s[0],r[0],a[0]),Math.max(n[1],s[1],r[1],a[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],l=(n+a)/2,u=Math.sqrt((n+a)**2-4*(n*a-r*s))/2,f=l+u||1,m=l-u||1;return[Math.sqrt(f),Math.sqrt(m)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[n,r,s,a]}static bezierBoundingBox(t,e,n,s,r,a,l,u,f){return f?(f[0]=Math.min(f[0],t,l),f[1]=Math.min(f[1],e,u),f[2]=Math.max(f[2],t,l),f[3]=Math.max(f[3],e,u)):f=[Math.min(t,l),Math.min(e,u),Math.max(t,l),Math.max(e,u)],k(this,ef,$5).call(this,t,n,r,l,e,s,a,u,3*(-t+3*(n-r)+l),6*(t-2*n+r),3*(n-t),f),k(this,ef,$5).call(this,t,n,r,l,e,s,a,u,3*(-e+3*(s-a)+u),6*(e-2*s+a),3*(s-e),f),f}}ef=new WeakSet,z4=function(t,e,n,s,r,a,l,u,f,m){if(f<=0||f>=1)return;const g=1-f,v=f*f,_=v*f,b=g*(g*(g*t+3*f*e)+3*v*n)+_*s,C=g*(g*(g*r+3*f*a)+3*v*l)+_*u;m[0]=Math.min(m[0],b),m[1]=Math.min(m[1],C),m[2]=Math.max(m[2],b),m[3]=Math.max(m[3],C)},$5=function(t,e,n,s,r,a,l,u,f,m,g,v){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&k(this,ef,z4).call(this,t,e,n,s,r,a,l,u,-g/m,v);return}const _=m**2-4*g*f;if(_<0)return;const b=Math.sqrt(_),C=2*f;k(this,ef,z4).call(this,t,e,n,s,r,a,l,u,(-m+b)/C,v),k(this,ef,z4).call(this,t,e,n,s,r,a,l,u,(-m-b)/C,v)},W(Le,ef);function _tt(i){return decodeURIComponent(escape(i))}let n5=null,wD=null;function Att(i){return n5||(n5=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,wD=new Map([["","t"]])),i.replaceAll(n5,(t,e,n)=>e?e.normalize("NFKC"):wD.get(n))}function xtt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let t=0;t<32;t++)i[t]=Math.floor(Math.random()*255);return UN(i)}const M7="pdfjs_internal_id_",gh={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function btt(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(UN(i))}const yh="http://www.w3.org/2000/svg",Cm=class Cm{};Je(Cm,"CSS",96),Je(Cm,"PDF",72),Je(Cm,"PDF_TO_CSS_UNITS",Cm.CSS/Cm.PDF);let np=Cm;async function FM(i,t="text"){if(p_(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class kx{constructor({viewBox:t,scale:e,rotation:n,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=s,this.offsetY=r;const l=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let f,m,g,v;switch(n%=360,n<0&&(n+=360),n){case 180:f=-1,m=0,g=0,v=1;break;case 90:f=0,m=1,g=1,v=0;break;case 270:f=0,m=-1,g=-1,v=0;break;case 0:f=1,m=0,g=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(g=-g,v=-v);let _,b,C,T;f===0?(_=Math.abs(u-t[1])*e+s,b=Math.abs(l-t[0])*e+r,C=(t[3]-t[1])*e,T=(t[2]-t[0])*e):(_=Math.abs(l-t[0])*e+s,b=Math.abs(u-t[1])*e+r,C=(t[2]-t[0])*e,T=(t[3]-t[1])*e),this.transform=[f*e,m*e,g*e,v*e,_-f*e*l-g*e*u,b-m*e*l-v*e*u],this.width=C,this.height=T}get rawDims(){const{viewBox:t}=this;return Fn(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new kx({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){return Le.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Le.applyTransform([t[0],t[1]],this.transform),n=Le.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return Le.applyInverseTransform([t,e],this.transform)}}class T7 extends up{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function HM(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function C7(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function Stt(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function Ett(i,t="document.pdf"){if(typeof i!="string")return t;if(HM(i))return An('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(i);let r=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class RD{constructor(){Je(this,"started",Object.create(null));Je(this,"times",[])}time(t){t in this.started&&An(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||An(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-s}ms
`);return t.join("")}}function p_(i,t){try{const{protocol:e}=t?new URL(i,t):new URL(i);return e==="http:"||e==="https:"}catch{return!1}}function Ll(i){i.preventDefault()}function LD(i){console.log("Deprecated API usage: "+i)}var uA;class w7{static toDateObject(t){if(!t||typeof t!="string")return null;x(this,uA)||G(this,uA,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=x(this,uA).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let u=parseInt(e[6],10);u=u>=0&&u<=59?u:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(a+=m,l+=g):f==="+"&&(a-=m,l-=g),new Date(Date.UTC(n,s,r,a,l,u))}}uA=new WeakMap,W(w7,uA);function Mtt(i,{scale:t=1,rotation:e=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new kx({viewBox:r,scale:t,rotation:e})}function R7(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(An(`Not a valid color format: "${i}"`),[0,0,0])}function Ttt(i){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,R7(n))}t.remove()}function Wi(i){const{a:t,b:e,c:n,d:s,e:r,f:a}=i.getTransform();return[t,e,n,s,r,a]}function vh(i){const{a:t,b:e,c:n,d:s,e:r,f:a}=i.getTransform().invertSelf();return[t,e,n,s,r,a]}function Wg(i,t,e=!1,n=!0){if(t instanceof kx){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:a}=i,l=Na.isCSSRoundSupported,u=`var(--scale-factor) * ${s}px`,f=`var(--scale-factor) * ${r}px`,m=l?`round(down, ${u}, var(--scale-round-x, 1px))`:`calc(${u})`,g=l?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!e||t.rotation%180===0?(a.width=m,a.height=g):(a.width=g,a.height=m)}n&&i.setAttribute("data-main-rotation",t.rotation)}class tC{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var yd,Um,uc,Pm,hA,fA,xE,PN,Ia,FN,HN,G4,zN,nC;const xh=class xh{constructor(t){W(this,Ia);W(this,yd,null);W(this,Um,null);W(this,uc);W(this,Pm,null);W(this,hA,null);G(this,uc,t),x(xh,fA)||G(xh,fA,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=G(this,yd,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=x(this,uc)._uiManager._signal;t.addEventListener("contextmenu",Ll,{signal:e}),t.addEventListener("pointerdown",k(xh,xE,PN),{signal:e});const n=G(this,Pm,document.createElement("div"));n.className="buttons",t.append(n);const s=x(this,uc).toolbarPosition;if(s){const{style:r}=t,a=x(this,uc)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return k(this,Ia,zN).call(this),t}get div(){return x(this,yd)}hide(){var t;x(this,yd).classList.add("hidden"),(t=x(this,Um))==null||t.hideDropdown()}show(){var t;x(this,yd).classList.remove("hidden"),(t=x(this,hA))==null||t.shown()}async addAltText(t){const e=await t.render();k(this,Ia,G4).call(this,e),x(this,Pm).prepend(e,x(this,Ia,nC)),G(this,hA,t)}addColorPicker(t){G(this,Um,t);const e=t.renderButton();k(this,Ia,G4).call(this,e),x(this,Pm).prepend(e,x(this,Ia,nC))}remove(){var t;x(this,yd).remove(),(t=x(this,Um))==null||t.destroy(),G(this,Um,null)}};yd=new WeakMap,Um=new WeakMap,uc=new WeakMap,Pm=new WeakMap,hA=new WeakMap,fA=new WeakMap,xE=new WeakSet,PN=function(t){t.stopPropagation()},Ia=new WeakSet,FN=function(t){x(this,uc)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},HN=function(t){x(this,uc)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},G4=function(t){const e=x(this,uc)._uiManager._signal;t.addEventListener("focusin",k(this,Ia,FN).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",k(this,Ia,HN).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ll,{signal:e})},zN=function(){const{editorType:t,_uiManager:e}=x(this,uc),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",x(xh,fA)[t]),k(this,Ia,G4).call(this,n),n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),x(this,Pm).append(n)},nC=function(){const t=document.createElement("div");return t.className="divider",t},W(xh,xE),W(xh,fA,null);let eC=xh;var dA,Fm,Hm,sp,GN,kN,VN;class Ctt{constructor(t){W(this,sp);W(this,dA,null);W(this,Fm,null);W(this,Hm);G(this,Hm,t)}show(t,e,n){const[s,r]=k(this,sp,kN).call(this,e,n),{style:a}=x(this,Fm)||G(this,Fm,k(this,sp,GN).call(this));t.append(x(this,Fm)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){x(this,Fm).remove()}}dA=new WeakMap,Fm=new WeakMap,Hm=new WeakMap,sp=new WeakSet,GN=function(){const t=G(this,Fm,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ll,{signal:x(this,Hm)._signal});const e=G(this,dA,document.createElement("div"));return e.className="buttons",t.append(e),k(this,sp,VN).call(this),t},kN=function(t,e){let n=0,s=0;for(const r of t){const a=r.y+r.height;if(a<n)continue;const l=r.x+(e?r.width:0);if(a>n){s=l,n=a;continue}e?l>s&&(s=l):l<s&&(s=l)}return[e?1-s:s,n]},VN=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=x(this,Hm)._signal;t.addEventListener("contextmenu",Ll,{signal:n}),t.addEventListener("click",()=>{x(this,Hm).highlightSelection("floating_button")},{signal:n}),x(this,dA).append(t)};function gE(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}function wtt(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var bE;class Rtt{constructor(){W(this,bE,0)}get id(){return`${ltt}${Sa(this,bE)._++}`}}bE=new WeakMap;var nv,pA,Kr,iv,k4;const H7=class H7{constructor(){W(this,iv);W(this,nv,xtt());W(this,pA,0);W(this,Kr,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Fn(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:r}=t;return k(this,iv,k4).call(this,`${e}_${n}_${s}_${r}`,t)}async getFromUrl(t){return k(this,iv,k4).call(this,t,t)}async getFromBlob(t,e){const n=await e;return k(this,iv,k4).call(this,t,n)}async getFromId(t){x(this,Kr)||G(this,Kr,new Map);const e=x(this,Kr).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){x(this,Kr)||G(this,Kr,new Map);let n=x(this,Kr).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${x(this,nv)}_${Sa(this,pA)._++}`,refCounter:1,isSvg:!1},x(this,Kr).set(t,n),x(this,Kr).set(n.id,n),n}getSvgUrl(t){const e=x(this,Kr).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;x(this,Kr)||G(this,Kr,new Map);const e=x(this,Kr).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(s=n.close)==null||s.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${x(this,nv)}_`)}};nv=new WeakMap,pA=new WeakMap,Kr=new WeakMap,iv=new WeakSet,k4=async function(t,e){x(this,Kr)||G(this,Kr,new Map);let n=x(this,Kr).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${x(this,nv)}_${Sa(this,pA)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(n.url=e,s=await FM(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=H7._isSVGFittingCanvas,a=new FileReader,l=new Image,u=new Promise((f,m)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,f()},a.onload=async()=>{const g=n.svgUrl=a.result;l.src=await r?`${g}#svgView(preserveAspectRatio(none))`:g},l.onerror=a.onerror=m});a.readAsDataURL(s),await u}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){console.error(s),n=null}return x(this,Kr).set(t,n),n&&x(this,Kr).set(n.id,n),n};let iC=H7;var or,_d,mA,lr;class Ltt{constructor(t=128){W(this,or,[]);W(this,_d,!1);W(this,mA);W(this,lr,-1);G(this,mA,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(s&&t(),x(this,_d))return;const u={cmd:t,undo:e,post:n,type:r};if(x(this,lr)===-1){x(this,or).length>0&&(x(this,or).length=0),G(this,lr,0),x(this,or).push(u);return}if(a&&x(this,or)[x(this,lr)].type===r){l&&(u.undo=x(this,or)[x(this,lr)].undo),x(this,or)[x(this,lr)]=u;return}const f=x(this,lr)+1;f===x(this,mA)?x(this,or).splice(0,1):(G(this,lr,f),f<x(this,or).length&&x(this,or).splice(f)),x(this,or).push(u)}undo(){if(x(this,lr)===-1)return;G(this,_d,!0);const{undo:t,post:e}=x(this,or)[x(this,lr)];t(),e==null||e(),G(this,_d,!1),G(this,lr,x(this,lr)-1)}redo(){if(x(this,lr)<x(this,or).length-1){G(this,lr,x(this,lr)+1),G(this,_d,!0);const{cmd:t,post:e}=x(this,or)[x(this,lr)];t(),e==null||e(),G(this,_d,!1)}}hasSomethingToUndo(){return x(this,lr)!==-1}hasSomethingToRedo(){return x(this,lr)<x(this,or).length-1}destroy(){G(this,or,null)}}or=new WeakMap,_d=new WeakMap,mA=new WeakMap,lr=new WeakMap;var SE,QN;class Vx{constructor(t){W(this,SE);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Na.platform;for(const[n,s,r={}]of t)for(const a of n){const l=a.startsWith("mac+");e&&l?(this.callbacks.set(a.slice(4),{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1))):!e&&!l&&(this.callbacks.set(a,{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(k(this,SE,QN).call(this,e));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:a=[],checker:l=null}}=n;l&&!l(t,e)||(s.bind(t,...a,e)(),r||(e.stopPropagation(),e.preventDefault()))}}SE=new WeakSet,QN=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const EE=class EE{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Ttt(t),Fn(this,"_colors",t)}convert(t){const e=R7(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((r,a)=>r===e[a]))return EE._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Le.makeHexColor(...e):t}};Je(EE,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let sC=EE;var sv,Ro,Vs,Cr,rv,Sh,av,hc,Ad,ov,zm,yu,fc,Gm,gA,vA,lv,yA,_u,xd,cv,bd,Au,ME,Sd,_A,Ed,km,AA,xA,cr,ui,Eh,Vm,bA,SA,Md,xu,Mh,EA,_l,pe,V4,rC,XN,jN,Q4,qN,YN,WN,aC,KN,oC,lC,JN,Ma,fd,ZN,$N,cC,tI,m_,uC;const Y1=class Y1{constructor(t,e,n,s,r,a,l,u,f,m,g){W(this,pe);W(this,sv,new AbortController);W(this,Ro,null);W(this,Vs,new Map);W(this,Cr,new Map);W(this,rv,null);W(this,Sh,null);W(this,av,null);W(this,hc,new Ltt);W(this,Ad,null);W(this,ov,0);W(this,zm,new Set);W(this,yu,null);W(this,fc,null);W(this,Gm,new Set);W(this,gA,!1);W(this,vA,!1);W(this,lv,!1);W(this,yA,null);W(this,_u,null);W(this,xd,null);W(this,cv,null);W(this,bd,!1);W(this,Au,null);W(this,ME,new Rtt);W(this,Sd,!1);W(this,_A,!1);W(this,Ed,null);W(this,km,null);W(this,AA,null);W(this,xA,null);W(this,cr,dn.NONE);W(this,ui,new Set);W(this,Eh,null);W(this,Vm,null);W(this,bA,null);W(this,SA,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});W(this,Md,[0,0]);W(this,xu,null);W(this,Mh,null);W(this,EA,null);W(this,_l,null);const v=this._signal=x(this,sv).signal;G(this,Mh,t),G(this,EA,e),G(this,rv,n),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:v}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),s._on("setpreference",this.onSetPreference.bind(this),{signal:v}),s._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:v}),k(this,pe,qN).call(this),k(this,pe,JN).call(this),k(this,pe,aC).call(this),G(this,Sh,r.annotationStorage),G(this,yA,r.filterFactory),G(this,Vm,a),G(this,cv,l||null),G(this,gA,u),G(this,vA,f),G(this,lv,m),G(this,xA,g||null),this.viewParameters={realScale:np.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=Y1.prototype,e=a=>x(a,Mh).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:u}=l;return u!=="text"&&u!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Fn(this,"_keyboardManager",new Vx([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&x(a,Mh).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&x(a,Mh).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,s;(t=x(this,_l))==null||t.resolve(),G(this,_l,null),(e=x(this,sv))==null||e.abort(),G(this,sv,null),this._signal=null;for(const r of x(this,Cr).values())r.destroy();x(this,Cr).clear(),x(this,Vs).clear(),x(this,Gm).clear(),G(this,Ro,null),x(this,ui).clear(),x(this,hc).destroy(),(n=x(this,rv))==null||n.destroy(),(s=x(this,Au))==null||s.hide(),G(this,Au,null),x(this,_u)&&(clearTimeout(x(this,_u)),G(this,_u,null)),x(this,xu)&&(clearTimeout(x(this,xu)),G(this,xu,null))}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return x(this,xA)}get useNewAltTextFlow(){return x(this,vA)}get useNewAltTextWhenAddingImage(){return x(this,lv)}get hcmFilter(){return Fn(this,"hcmFilter",x(this,Vm)?x(this,yA).addHCMFilter(x(this,Vm).foreground,x(this,Vm).background):"none")}get direction(){return Fn(this,"direction",getComputedStyle(x(this,Mh)).direction)}get highlightColors(){return Fn(this,"highlightColors",x(this,cv)?new Map(x(this,cv).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Fn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){G(this,AA,t)}editAltText(t,e=!1){var n;(n=x(this,rv))==null||n.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":G(this,lv,e);break}}onPageChanging({pageNumber:t}){G(this,ov,t-1)}focusMainContainer(){x(this,Mh).focus()}findParent(t,e){for(const n of x(this,Cr).values()){const{x:s,y:r,width:a,height:l}=n.div.getBoundingClientRect();if(t>=s&&t<=s+a&&e>=r&&e<=r+l)return n}return null}disableUserSelect(t=!1){x(this,EA).classList.toggle("noUserSelect",t)}addShouldRescale(t){x(this,Gm).add(t)}removeShouldRescale(t){x(this,Gm).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*np.PDF_TO_CSS_UNITS;for(const e of x(this,Gm))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a}=e,l=e.toString(),f=k(this,pe,V4).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(f);if(!m)return;e.empty();const g=k(this,pe,rC).call(this,f),v=x(this,cr)===dn.NONE,_=()=>{g==null||g.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a,text:l}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(dn.HIGHLIGHT,_);return}_()}addToAnnotationStorage(t){!t.isEmpty()&&x(this,Sh)&&!x(this,Sh).has(t.id)&&x(this,Sh).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,x(this,bd)&&(G(this,bd,!1),k(this,pe,Q4).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of x(this,ui))if(e.div.contains(t)){G(this,km,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!x(this,km))return;const[t,e]=x(this,km);G(this,km,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){k(this,pe,aC).call(this),k(this,pe,oC).call(this)}removeEditListeners(){k(this,pe,KN).call(this),k(this,pe,lC).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of x(this,fc))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of x(this,fc))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=x(this,Ro))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of x(this,ui)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const a of x(this,fc))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){An(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const u of n){const f=await s.deserialize(u);if(!f)return;r.push(f)}const a=()=>{for(const u of r)k(this,pe,cC).call(this,u);k(this,pe,uC).call(this,r)},l=()=>{for(const u of r)u.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(r){An(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),x(this,cr)!==dn.NONE&&!this.isEditorHandlingKeyboard&&Y1._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,x(this,bd)&&(G(this,bd,!1),k(this,pe,Q4).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(k(this,pe,YN).call(this),k(this,pe,oC).call(this),k(this,pe,Ma).call(this,{isEditing:x(this,cr)!==dn.NONE,isEmpty:k(this,pe,m_).call(this),hasSomethingToUndo:x(this,hc).hasSomethingToUndo(),hasSomethingToRedo:x(this,hc).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,pe,WN).call(this),k(this,pe,lC).call(this),k(this,pe,Ma).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!x(this,fc)){G(this,fc,t);for(const e of x(this,fc))k(this,pe,fd).call(this,e.defaultPropertiesToUpdate)}}getId(){return x(this,ME).id}get currentLayer(){return x(this,Cr).get(x(this,ov))}getLayer(t){return x(this,Cr).get(t)}get currentPageIndex(){return x(this,ov)}addLayer(t){x(this,Cr).set(t.pageIndex,t),x(this,Sd)?t.enable():t.disable()}removeLayer(t){x(this,Cr).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){if(x(this,cr)!==t&&!(x(this,_l)&&(await x(this,_l).promise,!x(this,_l)))){if(G(this,_l,Promise.withResolvers()),G(this,cr,t),t===dn.NONE){this.setEditingState(!1),k(this,pe,$N).call(this),x(this,_l).resolve();return}this.setEditingState(!0),await k(this,pe,ZN).call(this),this.unselectAll();for(const s of x(this,Cr).values())s.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),x(this,_l).resolve();return}for(const s of x(this,Vs).values())s.annotationElementId===e?(this.setSelected(s),s.enterInEditMode()):s.unselect();x(this,_l).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==x(this,cr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(x(this,fc)){switch(t){case Ze.CREATE:this.currentLayer.addNewEditor();return;case Ze.HIGHLIGHT_DEFAULT_COLOR:(n=x(this,AA))==null||n.updateColor(e);break;case Ze.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(x(this,bA)||G(this,bA,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of x(this,ui))s.updateParams(t,e);for(const s of x(this,fc))s.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const a of x(this,Vs).values())a.editorType===t&&a.show(e);(((r=x(this,bA))==null?void 0:r.get(Ze.HIGHLIGHT_SHOW_ALL))??!0)!==e&&k(this,pe,fd).call(this,[[Ze.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(x(this,_A)!==t){G(this,_A,t);for(const e of x(this,Cr).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of x(this,Vs).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return x(this,Vs).get(t)}addEditor(t){x(this,Vs).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(x(this,_u)&&clearTimeout(x(this,_u)),G(this,_u,setTimeout(()=>{this.focusMainContainer(),G(this,_u,null)},0))),x(this,Vs).delete(t.id),this.unselect(t),(!t.annotationElementId||!x(this,zm).has(t.annotationElementId))&&((e=x(this,Sh))==null||e.remove(t.id))}addDeletedAnnotationElement(t){x(this,zm).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return x(this,zm).has(t)}removeDeletedAnnotationElement(t){x(this,zm).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){x(this,Ro)!==t&&(G(this,Ro,t),t&&k(this,pe,fd).call(this,t.propertiesToUpdate))}updateUI(t){x(this,pe,tI)===t&&k(this,pe,fd).call(this,t.propertiesToUpdate)}toggleSelected(t){if(x(this,ui).has(t)){x(this,ui).delete(t),t.unselect(),k(this,pe,Ma).call(this,{hasSelectedEditor:this.hasSelection});return}x(this,ui).add(t),t.select(),k(this,pe,fd).call(this,t.propertiesToUpdate),k(this,pe,Ma).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of x(this,ui))e!==t&&e.unselect();x(this,ui).clear(),x(this,ui).add(t),t.select(),k(this,pe,fd).call(this,t.propertiesToUpdate),k(this,pe,Ma).call(this,{hasSelectedEditor:!0})}isSelected(t){return x(this,ui).has(t)}get firstSelectedEditor(){return x(this,ui).values().next().value}unselect(t){t.unselect(),x(this,ui).delete(t),k(this,pe,Ma).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return x(this,ui).size!==0}get isEnterHandled(){return x(this,ui).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){x(this,hc).undo(),k(this,pe,Ma).call(this,{hasSomethingToUndo:x(this,hc).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,pe,m_).call(this)})}redo(){x(this,hc).redo(),k(this,pe,Ma).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:x(this,hc).hasSomethingToRedo(),isEmpty:k(this,pe,m_).call(this)})}addCommands(t){x(this,hc).add(t),k(this,pe,Ma).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,pe,m_).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...x(this,ui)],e=()=>{for(const s of t)s.remove()},n=()=>{for(const s of t)k(this,pe,cC).call(this,s)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=x(this,Ro))==null||t.commitOrRemove()}hasSomethingToControl(){return x(this,Ro)||this.hasSelection}selectAll(){for(const t of x(this,ui))t.commit();k(this,pe,uC).call(this,x(this,Vs).values())}unselectAll(){if(!(x(this,Ro)&&(x(this,Ro).commitOrRemove(),x(this,cr)!==dn.NONE))&&this.hasSelection){for(const t of x(this,ui))t.unselect();x(this,ui).clear(),k(this,pe,Ma).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;x(this,Md)[0]+=t,x(this,Md)[1]+=e;const[s,r]=x(this,Md),a=[...x(this,ui)],l=1e3;x(this,xu)&&clearTimeout(x(this,xu)),G(this,xu,setTimeout(()=>{G(this,xu,null),x(this,Md)[0]=x(this,Md)[1]=0,this.addCommands({cmd:()=>{for(const u of a)x(this,Vs).has(u.id)&&u.translateInPage(s,r)},undo:()=>{for(const u of a)x(this,Vs).has(u.id)&&u.translateInPage(-s,-r)},mustExec:!1})},l));for(const u of a)u.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),G(this,yu,new Map);for(const t of x(this,ui))x(this,yu).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!x(this,yu))return!1;this.disableUserSelect(!1);const t=x(this,yu);G(this,yu,null);let e=!1;for(const[{x:s,y:r,pageIndex:a},l]of t)l.newX=s,l.newY=r,l.newPageIndex=a,e||(e=s!==l.savedX||r!==l.savedY||a!==l.savedPageIndex);if(!e)return!1;const n=(s,r,a,l)=>{if(x(this,Vs).has(s.id)){const u=x(this,Cr).get(l);u?s._setParentAndPosition(u,r,a):(s.pageIndex=l,s.x=r,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:a,newPageIndex:l}]of t)n(s,r,a,l)},undo:()=>{for(const[s,{savedX:r,savedY:a,savedPageIndex:l}]of t)n(s,r,a,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(x(this,yu))for(const n of x(this,yu).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||x(this,ui).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return x(this,Ro)===t}getActive(){return x(this,Ro)}getMode(){return x(this,cr)}get imageManager(){return Fn(this,"imageManager",new iC)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:a}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(f,m,g,v)=>({x:(m-s)/a,y:1-(f+g-n)/r,width:v/a,height:g/r});break;case"180":l=(f,m,g,v)=>({x:1-(f+g-n)/r,y:1-(m+v-s)/a,width:g/r,height:v/a});break;case"270":l=(f,m,g,v)=>({x:1-(m+v-s)/a,y:(f-n)/r,width:v/a,height:g/r});break;default:l=(f,m,g,v)=>({x:(f-n)/r,y:(m-s)/a,width:g/r,height:v/a});break}const u=[];for(let f=0,m=e.rangeCount;f<m;f++){const g=e.getRangeAt(f);if(!g.collapsed)for(const{x:v,y:_,width:b,height:C}of g.getClientRects())b===0||C===0||u.push(l(v,_,b,C))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:t,id:e}){(x(this,av)||G(this,av,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=x(this,av))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=x(this,av))==null?void 0:s.get(t.data.id);if(!e)return;const n=x(this,Sh).getRawValue(e);n&&(x(this,cr)===dn.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};sv=new WeakMap,Ro=new WeakMap,Vs=new WeakMap,Cr=new WeakMap,rv=new WeakMap,Sh=new WeakMap,av=new WeakMap,hc=new WeakMap,Ad=new WeakMap,ov=new WeakMap,zm=new WeakMap,yu=new WeakMap,fc=new WeakMap,Gm=new WeakMap,gA=new WeakMap,vA=new WeakMap,lv=new WeakMap,yA=new WeakMap,_u=new WeakMap,xd=new WeakMap,cv=new WeakMap,bd=new WeakMap,Au=new WeakMap,ME=new WeakMap,Sd=new WeakMap,_A=new WeakMap,Ed=new WeakMap,km=new WeakMap,AA=new WeakMap,xA=new WeakMap,cr=new WeakMap,ui=new WeakMap,Eh=new WeakMap,Vm=new WeakMap,bA=new WeakMap,SA=new WeakMap,Md=new WeakMap,xu=new WeakMap,Mh=new WeakMap,EA=new WeakMap,_l=new WeakMap,pe=new WeakSet,V4=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},rC=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of x(this,Cr).values())if(n.hasTextLayer(t))return n;return null},XN=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=k(this,pe,V4).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(x(this,Au)||G(this,Au,new Ctt(this)),x(this,Au).show(n,s,this.direction==="ltr"))},jN=function(){var r,a,l;const t=document.getSelection();if(!t||t.isCollapsed){x(this,Eh)&&((r=x(this,Au))==null||r.hide(),G(this,Eh,null),k(this,pe,Ma).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===x(this,Eh))return;const s=k(this,pe,V4).call(this,t).closest(".textLayer");if(!s){x(this,Eh)&&((a=x(this,Au))==null||a.hide(),G(this,Eh,null),k(this,pe,Ma).call(this,{hasSelectedText:!1}));return}if((l=x(this,Au))==null||l.hide(),G(this,Eh,e),k(this,pe,Ma).call(this,{hasSelectedText:!0}),!(x(this,cr)!==dn.HIGHLIGHT&&x(this,cr)!==dn.NONE)&&(x(this,cr)===dn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),G(this,bd,this.isShiftKeyDown),!this.isShiftKeyDown)){const u=x(this,cr)===dn.HIGHLIGHT?k(this,pe,rC).call(this,s):null;u==null||u.toggleDrawing();const f=new AbortController,m=this.combinedSignal(f),g=v=>{v.type==="pointerup"&&v.button!==0||(f.abort(),u==null||u.toggleDrawing(!0),v.type==="pointerup"&&k(this,pe,Q4).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("blur",g,{signal:m})}},Q4=function(t=""){x(this,cr)===dn.HIGHLIGHT?this.highlightSelection(t):x(this,gA)&&k(this,pe,XN).call(this)},qN=function(){document.addEventListener("selectionchange",k(this,pe,jN).bind(this),{signal:this._signal})},YN=function(){if(x(this,xd))return;G(this,xd,new AbortController);const t=this.combinedSignal(x(this,xd));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},WN=function(){var t;(t=x(this,xd))==null||t.abort(),G(this,xd,null)},aC=function(){if(x(this,Ed))return;G(this,Ed,new AbortController);const t=this.combinedSignal(x(this,Ed));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},KN=function(){var t;(t=x(this,Ed))==null||t.abort(),G(this,Ed,null)},oC=function(){if(x(this,Ad))return;G(this,Ad,new AbortController);const t=this.combinedSignal(x(this,Ad));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},lC=function(){var t;(t=x(this,Ad))==null||t.abort(),G(this,Ad,null)},JN=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Ma=function(t){Object.entries(t).some(([n,s])=>x(this,SA)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(x(this,SA),t)}),x(this,cr)===dn.HIGHLIGHT&&t.hasSelectedEditor===!1&&k(this,pe,fd).call(this,[[Ze.HIGHLIGHT_FREE,!0]]))},fd=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},ZN=async function(){if(!x(this,Sd)){G(this,Sd,!0);const t=[];for(const e of x(this,Cr).values())t.push(e.enable());await Promise.all(t);for(const e of x(this,Vs).values())e.enable()}},$N=function(){if(this.unselectAll(),x(this,Sd)){G(this,Sd,!1);for(const t of x(this,Cr).values())t.disable();for(const t of x(this,Vs).values())t.disable()}},cC=function(t){const e=x(this,Cr).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},tI=function(){let t=null;for(t of x(this,ui));return t},m_=function(){if(x(this,Vs).size===0)return!0;if(x(this,Vs).size===1)for(const t of x(this,Vs).values())return t.isEmpty();return!1},uC=function(t){for(const e of x(this,ui))e.unselect();x(this,ui).clear();for(const e of t)e.isEmpty()||(x(this,ui).add(e),e.select());k(this,pe,Ma).call(this,{hasSelectedEditor:this.hasSelection})},Je(Y1,"TRANSLATE_SMALL",1),Je(Y1,"TRANSLATE_BIG",10);let Kg=Y1;var ur,bu,dc,uv,Su,Lo,hv,Eu,to,Th,Qm,Mu,Td,Cc,g_,X4;const Ca=class Ca{constructor(t){W(this,Cc);W(this,ur,null);W(this,bu,!1);W(this,dc,null);W(this,uv,null);W(this,Su,null);W(this,Lo,null);W(this,hv,!1);W(this,Eu,null);W(this,to,null);W(this,Th,null);W(this,Qm,null);W(this,Mu,!1);G(this,to,t),G(this,Mu,t._uiManager.useNewAltTextFlow),x(Ca,Td)||G(Ca,Td,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Ca._l10n??(Ca._l10n=t)}async render(){const t=G(this,dc,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=G(this,uv,document.createElement("span"));t.append(e),x(this,Mu)?(t.classList.add("new"),t.setAttribute("data-l10n-id",x(Ca,Td).missing),e.setAttribute("data-l10n-id",x(Ca,Td)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=x(this,to)._uiManager._signal;t.addEventListener("contextmenu",Ll,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),x(this,to)._uiManager.editAltText(x(this,to)),x(this,Mu)&&x(this,to)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:x(this,Cc,g_)}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(G(this,hv,!0),s(r))},{signal:n}),await k(this,Cc,X4).call(this),t}finish(){x(this,dc)&&(x(this,dc).focus({focusVisible:x(this,hv)}),G(this,hv,!1))}isEmpty(){return x(this,Mu)?x(this,ur)===null:!x(this,ur)&&!x(this,bu)}hasData(){return x(this,Mu)?x(this,ur)!==null||!!x(this,Th):this.isEmpty()}get guessedText(){return x(this,Th)}async setGuessedText(t){x(this,ur)===null&&(G(this,Th,t),G(this,Qm,await Ca._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),k(this,Cc,X4).call(this))}toggleAltTextBadge(t=!1){var e;if(!x(this,Mu)||x(this,ur)){(e=x(this,Eu))==null||e.remove(),G(this,Eu,null);return}if(!x(this,Eu)){const n=G(this,Eu,document.createElement("div"));n.className="noAltTextBadge",x(this,to).div.append(n)}x(this,Eu).classList.toggle("hidden",!t)}serialize(t){let e=x(this,ur);return!t&&x(this,Th)===e&&(e=x(this,Qm)),{altText:e,decorative:x(this,bu),guessedText:x(this,Th),textWithDisclaimer:x(this,Qm)}}get data(){return{altText:x(this,ur),decorative:x(this,bu)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:r=!1}){n&&(G(this,Th,n),G(this,Qm,s)),!(x(this,ur)===t&&x(this,bu)===e)&&(r||(G(this,ur,t),G(this,bu,e)),k(this,Cc,X4).call(this))}toggle(t=!1){x(this,dc)&&(!t&&x(this,Lo)&&(clearTimeout(x(this,Lo)),G(this,Lo,null)),x(this,dc).disabled=!t)}shown(){x(this,to)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:x(this,Cc,g_)}})}destroy(){var t,e;(t=x(this,dc))==null||t.remove(),G(this,dc,null),G(this,uv,null),G(this,Su,null),(e=x(this,Eu))==null||e.remove(),G(this,Eu,null)}};ur=new WeakMap,bu=new WeakMap,dc=new WeakMap,uv=new WeakMap,Su=new WeakMap,Lo=new WeakMap,hv=new WeakMap,Eu=new WeakMap,to=new WeakMap,Th=new WeakMap,Qm=new WeakMap,Mu=new WeakMap,Td=new WeakMap,Cc=new WeakSet,g_=function(){return x(this,ur)&&"added"||x(this,ur)===null&&this.guessedText&&"review"||"missing"},X4=async function(){var s,r,a;const t=x(this,dc);if(!t)return;if(x(this,Mu)){if(t.classList.toggle("done",!!x(this,ur)),t.setAttribute("data-l10n-id",x(Ca,Td)[x(this,Cc,g_)]),(s=x(this,uv))==null||s.setAttribute("data-l10n-id",x(Ca,Td)[`${x(this,Cc,g_)}-label`]),!x(this,ur)){(r=x(this,Su))==null||r.remove();return}}else{if(!x(this,ur)&&!x(this,bu)){t.classList.remove("done"),(a=x(this,Su))==null||a.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=x(this,Su);if(!e){G(this,Su,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${x(this,to).id}`;const l=100,u=x(this,to)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(x(this,Lo)),G(this,Lo,null)},{once:!0}),t.addEventListener("mouseenter",()=>{G(this,Lo,setTimeout(()=>{G(this,Lo,null),x(this,Su).classList.add("show"),x(this,to)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:u}),t.addEventListener("mouseleave",()=>{var f;x(this,Lo)&&(clearTimeout(x(this,Lo)),G(this,Lo,null)),(f=x(this,Su))==null||f.classList.remove("show")},{signal:u})}x(this,bu)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=x(this,ur)),e.parentNode||t.append(e);const n=x(this,to).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},W(Ca,Td,null),Je(Ca,"_l10n",null);let vE=Ca;var Xm,pc,qi,fv,jm,wr,qm,Cd,MA,Ym,wd,TA,Wm,Ch,Tu,dv,pv,Al,CA,TE,vn,hC,wA,fC,dC,eI,nI,pC,mC,gC,iI,vC,sI,rI,aI,yC,v_;const si=class si{constructor(t){W(this,vn);W(this,Xm,null);W(this,pc,null);W(this,qi,null);W(this,fv,!1);W(this,jm,!1);W(this,wr,null);W(this,qm,null);W(this,Cd,null);W(this,MA,"");W(this,Ym,!1);W(this,wd,null);W(this,TA,!1);W(this,Wm,!1);W(this,Ch,!1);W(this,Tu,null);W(this,dv,0);W(this,pv,0);W(this,Al,null);Je(this,"_editToolbar",null);Je(this,"_initialOptions",Object.create(null));Je(this,"_initialData",null);Je(this,"_isVisible",!0);Je(this,"_uiManager",null);Je(this,"_focusEventsAllowed",!0);W(this,CA,!1);W(this,TE,si._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,a];const[l,u]=this.parentDimensions;this.x=t.x/l,this.y=t.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=si.prototype._resizeWithKeyboard,e=Kg.TRANSLATE_SMALL,n=Kg.TRANSLATE_BIG;return Fn(this,"_resizerKeyboardManager",new Vx([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],si.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Fn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Dtt({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(si._l10n??(si._l10n=t),si._l10nResizer||(si._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),si._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);si._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Oi("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return x(this,CA)}set _isDraggable(t){var e;G(this,CA,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=x(this,TE)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):k(this,vn,v_).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(x(this,Ym)?G(this,Ym,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[r,a]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/r,this.y=(e+s)/a,this.fixAndSetPosition()}translate(t,e){k(this,vn,hC).call(this,this.parentDimensions,t,e)}translateInPage(t,e){x(this,wd)||G(this,wd,[this.x,this.y]),k(this,vn,hC).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){x(this,wd)||G(this,wd,[this.x,this.y]);const[n,s]=this.parentDimensions;if(this.x+=t/n,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[l,u]=this.getBaseTranslation();r+=l,a+=u,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!x(this,wd)&&(x(this,wd)[0]!==this.x||x(this,wd)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=si,s=n/t,r=n/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:s,y:r,width:a,height:l}=this;if(a*=e,l*=n,s*=e,r*=n,this._mustFixPosition)switch(t){case 0:s=Math.max(0,Math.min(e-a,s)),r=Math.max(0,Math.min(n-l,r));break;case 90:s=Math.max(0,Math.min(e-l,s)),r=Math.min(n,Math.max(a,r));break;case 180:s=Math.min(e,Math.max(a,s)),r=Math.min(n,Math.max(l,r));break;case 270:s=Math.min(e,Math.max(l,s)),r=Math.max(0,Math.min(n-a,r));break}this.x=s/=e,this.y=r/=n;const[u,f]=this.getBaseTranslation();s+=u,r+=f;const{style:m}=this.div;m.left=`${(100*s).toFixed(2)}%`,m.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return k(n=si,wA,fC).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return k(n=si,wA,fC).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,s]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,x(this,jm)||(this.div.style.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,s=n.endsWith("%"),r=!x(this,jm)&&e.endsWith("%");if(s&&r)return;const[a,l]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!x(this,jm)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=x(this,qi))==null||t.finish()}async addEditToolbar(){return this._editToolbar||x(this,Wm)?this._editToolbar:(this._editToolbar=new eC(this),this.div.append(this._editToolbar.render()),x(this,qi)&&await this._editToolbar.addAltText(x(this,qi)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=x(this,qi))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){x(this,qi)||(vE.initialize(si._l10n),G(this,qi,new vE(this)),x(this,Xm)&&(x(this,qi).data=x(this,Xm),G(this,Xm,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=x(this,qi))==null?void 0:t.data}set altTextData(t){x(this,qi)&&(x(this,qi).data=t)}get guessedAltText(){var t;return(t=x(this,qi))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=x(this,qi))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=x(this,qi))==null?void 0:e.serialize(t)}hasAltText(){return!!x(this,qi)&&!x(this,qi).isEmpty()}hasAltTextData(){var t;return((t=x(this,qi))==null?void 0:t.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=x(this,fv)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),k(this,vn,vC).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),gE(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Na.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(G(this,Ym,!0),this._isDraggable){k(this,vn,iI).call(this,t);return}k(this,vn,gC).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){x(this,Tu)&&clearTimeout(x(this,Tu)),G(this,Tu,setTimeout(()=>{var t;G(this,Tu,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const s=this.parentScale,[r,a]=this.pageDimensions,[l,u]=this.pageTranslation,f=t/s,m=e/s,g=this.x*r,v=this.y*a,_=this.width*r,b=this.height*a;switch(n){case 0:return[g+f+l,a-v-m-b+u,g+f+_+l,a-v-m+u];case 90:return[g+m+l,a-v+f+u,g+m+b+l,a-v+f+_+u];case 180:return[g-f-_+l,a-v+m+u,g-f+l,a-v+m+b+u];case 270:return[g-m-b+l,a-v-f-_+u,g-m+l,a-v-f+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,r,a]=t,l=r-n,u=a-s;switch(this.rotation){case 0:return[n,e-a,l,u];case 90:return[n,e-s,u,l];case 180:return[r,e-s,l,u];case 270:return[r,e-a,u,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){G(this,Wm,!0)}disableEditMode(){G(this,Wm,!1)}isInEditMode(){return x(this,Wm)}shouldGetKeyboardEvents(){return x(this,Ch)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){k(this,vn,vC).call(this)}rotate(t){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Oi("An editor must be serializable")}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});s.rotation=t.rotation,G(s,Xm,t.accessibilityData);const[r,a]=s.pageDimensions,[l,u,f,m]=s.getRectInCurrentCoords(t.rect,a);return s.x=l/r,s.y=u/a,s.width=f/r,s.height=m/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t;if((t=x(this,Cd))==null||t.abort(),G(this,Cd,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),x(this,Tu)&&(clearTimeout(x(this,Tu)),G(this,Tu,null)),k(this,vn,v_).call(this),this.removeEditToolbar(),x(this,Al)){for(const e of x(this,Al).values())clearTimeout(e);G(this,Al,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,vn,eI).call(this),x(this,wr).classList.remove("hidden"),gE(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),G(this,qm,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=x(this,wr).children;if(!x(this,pc)){G(this,pc,Array.from(e));const a=k(this,vn,sI).bind(this),l=k(this,vn,rI).bind(this),u=this._uiManager._signal;for(const f of x(this,pc)){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",a,{signal:u}),f.addEventListener("blur",l,{signal:u}),f.addEventListener("focus",k(this,vn,aI).bind(this,m),{signal:u}),f.setAttribute("data-l10n-id",si._l10nResizer[m])}}const n=x(this,pc)[0];let s=0;for(const a of e){if(a===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(x(this,pc).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)x(this,wr).append(x(this,wr).firstChild);else if(r>s)for(let l=0;l<r-s;l++)x(this,wr).firstChild.before(x(this,wr).lastChild);let a=0;for(const l of e){const f=x(this,pc)[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",si._l10nResizer[f])}}k(this,vn,yC).call(this,0),G(this,Ch,!0),x(this,wr).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){x(this,Ch)&&k(this,vn,mC).call(this,x(this,MA),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){k(this,vn,v_).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=x(this,qi))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,s,r;(t=x(this,wr))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=x(this,qi))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return x(this,TA)}set isEditing(t){G(this,TA,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){G(this,jm,!0);const n=t/e,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){x(this,Al)||G(this,Al,new Map);const{action:n}=t;let s=x(this,Al).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),x(this,Al).delete(n),x(this,Al).size===0&&G(this,Al,null)},si._telemetryTimeout),x(this,Al).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),G(this,fv,!1)}disable(){this.div&&(this.div.tabIndex=-1),G(this,fv,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Xm=new WeakMap,pc=new WeakMap,qi=new WeakMap,fv=new WeakMap,jm=new WeakMap,wr=new WeakMap,qm=new WeakMap,Cd=new WeakMap,MA=new WeakMap,Ym=new WeakMap,wd=new WeakMap,TA=new WeakMap,Wm=new WeakMap,Ch=new WeakMap,Tu=new WeakMap,dv=new WeakMap,pv=new WeakMap,Al=new WeakMap,CA=new WeakMap,TE=new WeakMap,vn=new WeakSet,hC=function([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this.fixAndSetPosition()},wA=new WeakSet,fC=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},dC=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},eI=function(){if(x(this,wr))return;G(this,wr,document.createElement("div")),x(this,wr).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");x(this,wr).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",k(this,vn,nI).bind(this,n),{signal:e}),s.addEventListener("contextmenu",Ll,{signal:e}),s.tabIndex=-1}this.div.prepend(x(this,wr))},nI=function(t,e){var b;e.preventDefault();const{isMac:n}=Na.platform;if(e.button!==0||e.ctrlKey&&n)return;(b=x(this,qi))==null||b.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",k(this,vn,mC).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",Ll,{signal:a});const l=this.x,u=this.y,f=this.width,m=this.height,g=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const _=()=>{var C;r.abort(),this.parent.togglePointerEvents(!0),(C=x(this,qi))==null||C.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=g,this.div.style.cursor=v,k(this,vn,pC).call(this,l,u,f,m)};window.addEventListener("pointerup",_,{signal:a}),window.addEventListener("blur",_,{signal:a})},pC=function(t,e,n,s){const r=this.x,a=this.y,l=this.width,u=this.height;r===t&&a===e&&l===n&&u===s||this.addCommands({cmd:()=>{this.width=l,this.height=u,this.x=r,this.y=a;const[f,m]=this.parentDimensions;this.setDims(f*l,m*u),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=s,this.x=t,this.y=e;const[f,m]=this.parentDimensions;this.setDims(f*n,m*s),this.fixAndSetPosition()},mustExec:!0})},mC=function(t,e){const[n,s]=this.parentDimensions,r=this.x,a=this.y,l=this.width,u=this.height,f=si.MIN_SIZE/n,m=si.MIN_SIZE/s,g=tt=>Math.round(tt*1e4)/1e4,v=k(this,vn,dC).call(this,this.rotation),_=(tt,et)=>[v[0]*tt+v[2]*et,v[1]*tt+v[3]*et],b=k(this,vn,dC).call(this,360-this.rotation),C=(tt,et)=>[b[0]*tt+b[2]*et,b[1]*tt+b[3]*et];let T,S,R=!1,B=!1;switch(t){case"topLeft":R=!0,T=(tt,et)=>[0,0],S=(tt,et)=>[tt,et];break;case"topMiddle":T=(tt,et)=>[tt/2,0],S=(tt,et)=>[tt/2,et];break;case"topRight":R=!0,T=(tt,et)=>[tt,0],S=(tt,et)=>[0,et];break;case"middleRight":B=!0,T=(tt,et)=>[tt,et/2],S=(tt,et)=>[0,et/2];break;case"bottomRight":R=!0,T=(tt,et)=>[tt,et],S=(tt,et)=>[0,0];break;case"bottomMiddle":T=(tt,et)=>[tt/2,et],S=(tt,et)=>[tt/2,0];break;case"bottomLeft":R=!0,T=(tt,et)=>[0,et],S=(tt,et)=>[tt,0];break;case"middleLeft":B=!0,T=(tt,et)=>[0,et/2],S=(tt,et)=>[tt,et/2];break}const D=T(l,u),N=S(l,u);let I=_(...N);const F=g(r+I[0]),z=g(a+I[1]);let U=1,P=1,[X,ot]=this.screenToPageTranslation(e.movementX,e.movementY);if([X,ot]=C(X/n,ot/s),R){const tt=Math.hypot(l,u);U=P=Math.max(Math.min(Math.hypot(N[0]-D[0]-X,N[1]-D[1]-ot)/tt,1/l,1/u),f/l,m/u)}else B?U=Math.max(f,Math.min(1,Math.abs(N[0]-D[0]-X)))/l:P=Math.max(m,Math.min(1,Math.abs(N[1]-D[1]-ot)))/u;const it=g(l*U),ct=g(u*P);I=_(...S(it,ct));const dt=F-I[0],Q=z-I[1];this.width=it,this.height=ct,this.x=dt,this.y=Q,this.setDims(n*it,s*ct),this.fixAndSetPosition()},gC=function(t){const{isMac:e}=Na.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},iI=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();const n=new AbortController,s=this._uiManager.combinedSignal(n);if(e){this.div.classList.add("moving"),G(this,dv,t.clientX),G(this,pv,t.clientY);const a=l=>{const{clientX:u,clientY:f}=l,[m,g]=this.screenToPageTranslation(u-x(this,dv),f-x(this,pv));G(this,dv,u),G(this,pv,f),this._uiManager.dragSelectedEditors(m,g)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:s})}const r=()=>{n.abort(),e&&this.div.classList.remove("moving"),G(this,Ym,!1),this._uiManager.endDragSession()||k(this,vn,gC).call(this,t)};window.addEventListener("pointerup",r,{signal:s}),window.addEventListener("blur",r,{signal:s})},vC=function(){if(x(this,Cd)||!this.div)return;G(this,Cd,new AbortController);const t=this._uiManager.combinedSignal(x(this,Cd));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},sI=function(t){si._resizerKeyboardManager.exec(this,t)},rI=function(t){var e;x(this,Ch)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==x(this,wr)&&k(this,vn,v_).call(this)},aI=function(t){G(this,MA,x(this,Ch)?t:"")},yC=function(t){if(x(this,pc))for(const e of x(this,pc))e.tabIndex=t},v_=function(){if(G(this,Ch,!1),k(this,vn,yC).call(this,-1),x(this,qm)){const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=x(this,qm);k(this,vn,pC).call(this,t,e,n,s),G(this,qm,null)}},W(si,wA),Je(si,"_l10n",null),Je(si,"_l10nResizer",null),Je(si,"_borderLineWidth",-1),Je(si,"_colorManager",new sC),Je(si,"_zIndex",1),Je(si,"_telemetryTimeout",1e3);let di=si;class Dtt extends di{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const DD=3285377520,vl=4294901760,gu=65535;class oI{constructor(t){this.h1=t?t&4294967295:DD,this.h2=t?t&4294967295:DD}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let C=0,T=t.length;C<T;C++){const S=t.charCodeAt(C);S<=255?e[n++]=S:(e[n++]=S>>>8,e[n++]=S&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,a=new Uint32Array(e.buffer,0,s);let l=0,u=0,f=this.h1,m=this.h2;const g=3432918353,v=461845907,_=g&gu,b=v&gu;for(let C=0;C<s;C++)C&1?(l=a[C],l=l*g&vl|l*_&gu,l=l<<15|l>>>17,l=l*v&vl|l*b&gu,f^=l,f=f<<13|f>>>19,f=f*5+3864292196):(u=a[C],u=u*g&vl|u*_&gu,u=u<<15|u>>>17,u=u*v&vl|u*b&gu,m^=u,m=m<<13|m>>>19,m=m*5+3864292196);switch(l=0,r){case 3:l^=e[s*4+2]<<16;case 2:l^=e[s*4+1]<<8;case 1:l^=e[s*4],l=l*g&vl|l*_&gu,l=l<<15|l>>>17,l=l*v&vl|l*b&gu,s&1?f^=l:m^=l}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&vl|t*36045&gu,e=e*4283543511&vl|((e<<16|t>>>16)*2950163797&vl)>>>16,t^=e>>>1,t=t*444984403&vl|t*60499&gu,e=e*3301882366&vl|((e<<16|t>>>16)*3120437893&vl)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const _C=Object.freeze({map:null,hash:"",transfer:void 0});var Km,Jm,hr,CE,lI;class L7{constructor(){W(this,CE);W(this,Km,!1);W(this,Jm,null);W(this,hr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=x(this,hr).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return x(this,hr).get(t)}remove(t){if(x(this,hr).delete(t),x(this,hr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of x(this,hr).values())if(e instanceof di)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=x(this,hr).get(t);let s=!1;if(n!==void 0)for(const[r,a]of Object.entries(e))n[r]!==a&&(s=!0,n[r]=a);else s=!0,x(this,hr).set(t,e);s&&k(this,CE,lI).call(this),e instanceof di&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return x(this,hr).has(t)}getAll(){return x(this,hr).size>0?E7(x(this,hr)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return x(this,hr).size}resetModified(){x(this,Km)&&(G(this,Km,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new cI(this)}get serializable(){if(x(this,hr).size===0)return _C;const t=new Map,e=new oI,n=[],s=Object.create(null);let r=!1;for(const[a,l]of x(this,hr)){const u=l instanceof di?l.serialize(!1,s):l;u&&(t.set(a,u),e.update(`${a}:${JSON.stringify(u)}`),r||(r=!!u.bitmap))}if(r)for(const a of t.values())a.bitmap&&n.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:_C}get editorStats(){let t=null;const e=new Map;for(const n of x(this,hr).values()){if(!(n instanceof di))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:r}=s;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const a=t[r]||(t[r]=new Map);for(const[l,u]of Object.entries(s)){if(l==="type")continue;let f=a.get(l);f||(f=new Map,a.set(l,f));const m=f.get(u)??0;f.set(u,m+1)}}for(const[n,s]of e)t[n]=s.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){G(this,Jm,null)}get modifiedIds(){if(x(this,Jm))return x(this,Jm);const t=[];for(const e of x(this,hr).values())!(e instanceof di)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return G(this,Jm,{ids:new Set(t),hash:t.join(",")})}}Km=new WeakMap,Jm=new WeakMap,hr=new WeakMap,CE=new WeakSet,lI=function(){x(this,Km)||(G(this,Km,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var RA;class cI extends L7{constructor(e){super();W(this,RA);const{map:n,hash:s,transfer:r}=e.serializable,a=structuredClone(n,r?{transfer:r}:null);G(this,RA,{map:a,hash:s,transfer:r})}get print(){Oi("Should not call PrintAnnotationStorage.print")}get serializable(){return x(this,RA)}get modifiedIds(){return Fn(this,"modifiedIds",{ids:new Set,hash:""})}}RA=new WeakMap;var mv;class Btt{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){W(this,mv,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),x(this,mv).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||x(this,mv).has(t.loadedName))){if(js(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:r}=t,a=new FontFace(n,s,r);this.addNativeFontFace(a);try{await a.load(),x(this,mv).add(n),e==null||e(t)}catch{An(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Oi("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw An(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Fn(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(ia||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Fn(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(js(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Fn(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(D,N){return D.charCodeAt(N)<<24|D.charCodeAt(N+1)<<16|D.charCodeAt(N+2)<<8|D.charCodeAt(N+3)&255}function s(D,N,I,F){const z=D.substring(0,N),U=D.substring(N+I);return z+F+U}let r,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const u=l.getContext("2d");let f=0;function m(D,N){if(++f>30){An("Load test font never loaded."),N();return}if(u.font="30px "+D,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(m.bind(null,D,N))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,g.length,g);const b=16,C=1482184792;let T=n(v,b);for(r=0,a=g.length-3;r<a;r+=4)T=T-C+n(g,r)|0;r<g.length&&(T=T-C+n(g+"XXX",r)|0),v=s(v,b,4,gtt(T));const S=`url(data:font/opentype;base64,${btoa(v)});`,R=`@font-face {font-family:"${g}";src:${S}}`;this.insertRule(R);const B=this._document.createElement("div");B.style.visibility="hidden",B.style.width=B.style.height="10px",B.style.position="absolute",B.style.top=B.style.left="0px";for(const D of[t.loadedName,g]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=D,B.append(N)}this._document.body.append(B),m(g,()=>{B.remove(),e.complete()})}}mv=new WeakMap;class Ott{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${btt(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(r){An(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(r,a){};const s=[];for(let r=0,a=n.length;r<a;)switch(n[r++]){case gh.BEZIER_CURVE_TO:{const[l,u,f,m,g,v]=n.slice(r,r+6);s.push(_=>_.bezierCurveTo(l,u,f,m,g,v)),r+=6}break;case gh.MOVE_TO:{const[l,u]=n.slice(r,r+2);s.push(f=>f.moveTo(l,u)),r+=2}break;case gh.LINE_TO:{const[l,u]=n.slice(r,r+2);s.push(f=>f.lineTo(l,u)),r+=2}break;case gh.QUADRATIC_CURVE_TO:{const[l,u,f,m]=n.slice(r,r+4);s.push(g=>g.quadraticCurveTo(l,u,f,m)),r+=4}break;case gh.RESTORE:s.push(l=>l.restore());break;case gh.SAVE:s.push(l=>l.save());break;case gh.SCALE:js(s.length===2,"Scale command is only valid at the third position.");break;case gh.TRANSFORM:{const[l,u,f,m,g,v]=n.slice(r,r+6);s.push(_=>_.transform(l,u,f,m,g,v)),r+=6}break;case gh.TRANSLATE:{const[l,u]=n.slice(r,r+2);s.push(f=>f.translate(l,u)),r+=2}break}return this.compiledGlyphs[e]=function(a,l){s[0](a),s[1](a),a.scale(l,-l);for(let u=2,f=s.length;u<f;u++)s[u](a)}}}var LA;class uI{constructor({enableHWA:t=!1}){W(this,LA,!1);G(this,LA,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!x(this,LA)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Oi("Abstract method `_createCanvas` called.")}}LA=new WeakMap;class Ntt extends uI{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class hI{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Oi("Abstract method `_fetch` called.")}}class fI extends hI{async _fetch(t){const e=await FM(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):PM(e)}}class dI{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,r){return"none"}destroy(t=!1){}}var Zm,$m,Cu,wh,Jr,wE,tg,xe,Wr,U1,P1,j4,F1,pI,AC,H1,y_,__,xC,A_;class Itt extends dI{constructor({docId:e,ownerDocument:n=globalThis.document}){super();W(this,xe);W(this,Zm);W(this,$m);W(this,Cu);W(this,wh);W(this,Jr);W(this,wE);W(this,tg,0);G(this,wh,e),G(this,Jr,n)}addFilter(e){if(!e)return"none";let n=x(this,xe,Wr).get(e);if(n)return n;const[s,r,a]=k(this,xe,j4).call(this,e),l=e.length===1?s:`${s}${r}${a}`;if(n=x(this,xe,Wr).get(l),n)return x(this,xe,Wr).set(e,n),n;const u=`g_${x(this,wh)}_transfer_map_${Sa(this,tg)._++}`,f=k(this,xe,F1).call(this,u);x(this,xe,Wr).set(e,f),x(this,xe,Wr).set(l,f);const m=k(this,xe,H1).call(this,u);return k(this,xe,__).call(this,s,r,a,m),f}addHCMFilter(e,n){var b;const s=`${e}-${n}`,r="base";let a=x(this,xe,U1).get(r);if((a==null?void 0:a.key)===s||(a?((b=a.filter)==null||b.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},x(this,xe,U1).set(r,a)),!e||!n))return a.url;const l=k(this,xe,A_).call(this,e);e=Le.makeHexColor(...l);const u=k(this,xe,A_).call(this,n);if(n=Le.makeHexColor(...u),x(this,xe,P1).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return a.url;const f=new Array(256);for(let C=0;C<=255;C++){const T=C/255;f[C]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const m=f.join(","),g=`g_${x(this,wh)}_hcm_filter`,v=a.filter=k(this,xe,H1).call(this,g);k(this,xe,__).call(this,m,m,m,v),k(this,xe,AC).call(this,v);const _=(C,T)=>{const S=l[C]/255,R=u[C]/255,B=new Array(T+1);for(let D=0;D<=T;D++)B[D]=S+D/T*(R-S);return B.join(",")};return k(this,xe,__).call(this,_(0,5),_(1,5),_(2,5),v),a.url=k(this,xe,F1).call(this,g),a.url}addAlphaFilter(e){let n=x(this,xe,Wr).get(e);if(n)return n;const[s]=k(this,xe,j4).call(this,[e]),r=`alpha_${s}`;if(n=x(this,xe,Wr).get(r),n)return x(this,xe,Wr).set(e,n),n;const a=`g_${x(this,wh)}_alpha_map_${Sa(this,tg)._++}`,l=k(this,xe,F1).call(this,a);x(this,xe,Wr).set(e,l),x(this,xe,Wr).set(r,l);const u=k(this,xe,H1).call(this,a);return k(this,xe,xC).call(this,s,u),l}addLuminosityFilter(e){let n=x(this,xe,Wr).get(e||"luminosity");if(n)return n;let s,r;if(e?([s]=k(this,xe,j4).call(this,[e]),r=`luminosity_${s}`):r="luminosity",n=x(this,xe,Wr).get(r),n)return x(this,xe,Wr).set(e,n),n;const a=`g_${x(this,wh)}_luminosity_map_${Sa(this,tg)._++}`,l=k(this,xe,F1).call(this,a);x(this,xe,Wr).set(e,l),x(this,xe,Wr).set(r,l);const u=k(this,xe,H1).call(this,a);return k(this,xe,pI).call(this,u),e&&k(this,xe,xC).call(this,s,u),l}addHighlightHCMFilter(e,n,s,r,a){var R;const l=`${n}-${s}-${r}-${a}`;let u=x(this,xe,U1).get(e);if((u==null?void 0:u.key)===l||(u?((R=u.filter)==null||R.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},x(this,xe,U1).set(e,u)),!n||!s))return u.url;const[f,m]=[n,s].map(k(this,xe,A_).bind(this));let g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[_,b]=[r,a].map(k(this,xe,A_).bind(this));v<g&&([g,v,_,b]=[v,g,b,_]),x(this,xe,P1).style.color="";const C=(B,D,N)=>{const I=new Array(256),F=(v-g)/N,z=B/255,U=(D-B)/(255*N);let P=0;for(let X=0;X<=N;X++){const ot=Math.round(g+X*F),it=z+X*U;for(let ct=P;ct<=ot;ct++)I[ct]=it;P=ot+1}for(let X=P;X<256;X++)I[X]=I[P-1];return I.join(",")},T=`g_${x(this,wh)}_hcm_${e}_filter`,S=u.filter=k(this,xe,H1).call(this,T);return k(this,xe,AC).call(this,S),k(this,xe,__).call(this,C(_[0],b[0],5),C(_[1],b[1],5),C(_[2],b[2],5),S),u.url=k(this,xe,F1).call(this,T),u.url}destroy(e=!1){e&&x(this,xe,U1).size!==0||(x(this,Cu)&&(x(this,Cu).parentNode.parentNode.remove(),G(this,Cu,null)),x(this,$m)&&(x(this,$m).clear(),G(this,$m,null)),G(this,tg,0))}}Zm=new WeakMap,$m=new WeakMap,Cu=new WeakMap,wh=new WeakMap,Jr=new WeakMap,wE=new WeakMap,tg=new WeakMap,xe=new WeakSet,Wr=function(){return x(this,$m)||G(this,$m,new Map)},U1=function(){return x(this,wE)||G(this,wE,new Map)},P1=function(){if(!x(this,Cu)){const e=x(this,Jr).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=x(this,Jr).createElementNS(yh,"svg");s.setAttribute("width",0),s.setAttribute("height",0),G(this,Cu,x(this,Jr).createElementNS(yh,"defs")),e.append(s),s.append(x(this,Cu)),x(this,Jr).body.append(e)}return x(this,Cu)},j4=function(e){if(e.length===1){const f=e[0],m=new Array(256);for(let v=0;v<256;v++)m[v]=f[v]/255;const g=m.join(",");return[g,g,g]}const[n,s,r]=e,a=new Array(256),l=new Array(256),u=new Array(256);for(let f=0;f<256;f++)a[f]=n[f]/255,l[f]=s[f]/255,u[f]=r[f]/255;return[a.join(","),l.join(","),u.join(",")]},F1=function(e){if(x(this,Zm)===void 0){G(this,Zm,"");const n=x(this,Jr).URL;n!==x(this,Jr).baseURI&&(HM(n)?An('#createUrl: ignore "data:"-URL for performance reasons.'):G(this,Zm,n.split("#",1)[0]))}return`url(${x(this,Zm)}#${e})`},pI=function(e){const n=x(this,Jr).createElementNS(yh,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},AC=function(e){const n=x(this,Jr).createElementNS(yh,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},H1=function(e){const n=x(this,Jr).createElementNS(yh,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),x(this,xe,P1).append(n),n},y_=function(e,n,s){const r=x(this,Jr).createElementNS(yh,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},__=function(e,n,s,r){const a=x(this,Jr).createElementNS(yh,"feComponentTransfer");r.append(a),k(this,xe,y_).call(this,a,"feFuncR",e),k(this,xe,y_).call(this,a,"feFuncG",n),k(this,xe,y_).call(this,a,"feFuncB",s)},xC=function(e,n){const s=x(this,Jr).createElementNS(yh,"feComponentTransfer");n.append(s),k(this,xe,y_).call(this,s,"feFuncA",e)},A_=function(e){return x(this,xe,P1).style.color=e,R7(getComputedStyle(x(this,xe,P1)).getPropertyValue("color"))};class mI{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Oi("Abstract method `_fetch` called.")}}class gI extends mI{async _fetch(t){const e=await FM(t,"arraybuffer");return new Uint8Array(e)}}if(ia){var bC=Promise.withResolvers(),V_=null;(async()=>{const t=await v4(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await v4(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await v4(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await v4(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,a;return new Map(Object.entries({fs:t,http:e,https:n,url:s,canvas:r,path2d:a}))})().then(t=>{V_=t,bC.resolve()},t=>{An(`loadPackages: ${t}`),V_=new Map,bC.resolve()})}class ip{static get promise(){return bC.promise}static get(t){return V_==null?void 0:V_.get(t)}}async function vI(i){const e=await ip.get("fs").promises.readFile(i);return new Uint8Array(e)}class Utt extends dI{}class Ptt extends uI{_createCanvas(t,e){return ip.get("canvas").createCanvas(t,e)}}class Ftt extends hI{async _fetch(t){return vI(t)}}class Htt extends mI{async _fetch(t){return vI(t)}}const Ra={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function SC(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),i.clip(s)}class D7{getPattern(){Oi("Abstract method `getPattern` called.")}}class ztt extends D7{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let r;if(s===Ra.STROKE||s===Ra.FILL){const a=e.current.getClippedPathBoundingBox(s,Wi(t))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,u=Math.ceil(a[3]-a[1])||1,f=e.cachedCanvases.getCanvas("pattern",l,u),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-a[0],-a[1]),n=Le.transform(n,[1,0,0,1,a[0],a[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),SC(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),r=t.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(n);r.setTransform(g)}else SC(t,this._bbox),r=this._createGradient(t);return r}}function i5(i,t,e,n,s,r,a,l){const u=t.coords,f=t.colors,m=i.data,g=i.width*4;let v;u[e+1]>u[n+1]&&(v=e,e=n,n=v,v=r,r=a,a=v),u[n+1]>u[s+1]&&(v=n,n=s,s=v,v=a,a=l,l=v),u[e+1]>u[n+1]&&(v=e,e=n,n=v,v=r,r=a,a=v);const _=(u[e]+t.offsetX)*t.scaleX,b=(u[e+1]+t.offsetY)*t.scaleY,C=(u[n]+t.offsetX)*t.scaleX,T=(u[n+1]+t.offsetY)*t.scaleY,S=(u[s]+t.offsetX)*t.scaleX,R=(u[s+1]+t.offsetY)*t.scaleY;if(b>=R)return;const B=f[r],D=f[r+1],N=f[r+2],I=f[a],F=f[a+1],z=f[a+2],U=f[l],P=f[l+1],X=f[l+2],ot=Math.round(b),it=Math.round(R);let ct,dt,Q,tt,et,_t,J,at;for(let xt=ot;xt<=it;xt++){if(xt<T){const Ut=xt<b?0:(b-xt)/(b-T);ct=_-(_-C)*Ut,dt=B-(B-I)*Ut,Q=D-(D-F)*Ut,tt=N-(N-z)*Ut}else{let Ut;xt>R?Ut=1:T===R?Ut=0:Ut=(T-xt)/(T-R),ct=C-(C-S)*Ut,dt=I-(I-U)*Ut,Q=F-(F-P)*Ut,tt=z-(z-X)*Ut}let Et;xt<b?Et=0:xt>R?Et=1:Et=(b-xt)/(b-R),et=_-(_-S)*Et,_t=B-(B-U)*Et,J=D-(D-P)*Et,at=N-(N-X)*Et;const lt=Math.round(Math.min(ct,et)),wt=Math.round(Math.max(ct,et));let Bt=g*xt+lt*4;for(let Ut=lt;Ut<=wt;Ut++)Et=(ct-Ut)/(ct-et),Et<0?Et=0:Et>1&&(Et=1),m[Bt++]=dt-(dt-_t)*Et|0,m[Bt++]=Q-(Q-J)*Et|0,m[Bt++]=tt-(tt-at)*Et|0,m[Bt++]=255}}function Gtt(i,t,e){const n=t.coords,s=t.colors;let r,a;switch(t.type){case"lattice":const l=t.verticesPerRow,u=Math.floor(n.length/l)-1,f=l-1;for(r=0;r<u;r++){let m=r*l;for(let g=0;g<f;g++,m++)i5(i,e,n[m],n[m+1],n[m+l],s[m],s[m+1],s[m+l]),i5(i,e,n[m+l+1],n[m+1],n[m+l],s[m+l+1],s[m+1],s[m+l])}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)i5(i,e,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class ktt extends D7{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const l=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-l,m=Math.ceil(this._bounds[3])-u,g=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),_=f/g,b=m/v,C={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-u,scaleX:1/_,scaleY:1/b},T=g+2*2,S=v+2*2,R=n.getCanvas("mesh",T,S),B=R.context,D=B.createImageData(g,v);if(e){const I=D.data;for(let F=0,z=I.length;F<z;F+=4)I[F]=e[0],I[F+1]=e[1],I[F+2]=e[2],I[F+3]=255}for(const I of this._figures)Gtt(D,I,C);return B.putImageData(D,2,2),{canvas:R.canvas,offsetX:l-2*_,offsetY:u-2*b,scaleX:_,scaleY:b}}getPattern(t,e,n,s){SC(t,this._bbox);let r;if(s===Ra.SHADING)r=Le.singularValueDecompose2dScale(Wi(t));else if(r=Le.singularValueDecompose2dScale(e.baseTransform),this.matrix){const l=Le.singularValueDecompose2dScale(this.matrix);r=[r[0]*l[0],r[1]*l[1]]}const a=this._createMeshCanvas(r,s===Ra.SHADING?null:this._background,e.cachedCanvases);return s!==Ra.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class Vtt extends D7{getPattern(){return"hotpink"}}function Qtt(i){switch(i[0]){case"RadialAxial":return new ztt(i);case"Mesh":return new ktt(i);case"Dummy":return new Vtt}throw new Error(`Unknown IR type: ${i[0]}`)}const BD={COLORED:1,UNCOLORED:2},RE=class RE{constructor(t,e,n,s,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:s,tilingType:r,color:a,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:f}=this;u=Math.abs(u),f=Math.abs(f),IM("TilingType: "+r);const m=e[0],g=e[1],v=e[2],_=e[3],b=v-m,C=_-g,T=Le.singularValueDecompose2dScale(this.matrix),S=Le.singularValueDecompose2dScale(this.baseTransform),R=T[0]*S[0],B=T[1]*S[1];let D=b,N=C,I=!1,F=!1;const z=Math.ceil(u*R),U=Math.ceil(f*B),P=Math.ceil(b*R),X=Math.ceil(C*B);z>=P?D=u:I=!0,U>=X?N=f:F=!0;const ot=this.getSizeAndScale(D,this.ctx.canvas.width,R),it=this.getSizeAndScale(N,this.ctx.canvas.height,B),ct=t.cachedCanvases.getCanvas("pattern",ot.size,it.size),dt=ct.context,Q=l.createCanvasGraphics(dt);if(Q.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Q,s,a),dt.translate(-ot.scale*m,-it.scale*g),Q.transform(ot.scale,0,0,it.scale,0,0),dt.save(),this.clipBbox(Q,m,g,v,_),Q.baseTransform=Wi(Q.ctx),Q.executeOperatorList(n),Q.endDrawing(),dt.restore(),I||F){const tt=ct.canvas;I&&(D=u),F&&(N=f);const et=this.getSizeAndScale(D,this.ctx.canvas.width,R),_t=this.getSizeAndScale(N,this.ctx.canvas.height,B),J=et.size,at=_t.size,xt=t.cachedCanvases.getCanvas("pattern-workaround",J,at),Et=xt.context,lt=I?Math.floor(b/u):0,wt=F?Math.floor(C/f):0;for(let Bt=0;Bt<=lt;Bt++)for(let Ut=0;Ut<=wt;Ut++)Et.drawImage(tt,J*Bt,at*Ut,J,at,0,0,J,at);return{canvas:xt.canvas,scaleX:et.scale,scaleY:_t.scale,offsetX:m,offsetY:g}}return{canvas:ct.canvas,scaleX:ot.scale,scaleY:it.scale,offsetX:m,offsetY:g}}getSizeAndScale(t,e,n){const s=Math.max(RE.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=s?r=s:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,s,r){const a=s-e,l=r-n;t.ctx.rect(e,n,a,l),t.current.updateRectMinMax(Wi(t.ctx),[e,n,s,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,r=t.current;switch(e){case BD.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case BD.UNCOLORED:const l=Le.makeHexColor(n[0],n[1],n[2]);s.fillStyle=l,s.strokeStyle=l,r.fillColor=l,r.strokeColor=l;break;default:throw new mtt(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,s){let r=n;s!==Ra.SHADING&&(r=Le.transform(r,e.baseTransform),this.matrix&&(r=Le.transform(r,this.matrix)));const a=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const u=t.createPattern(a.canvas,"repeat");return u.setTransform(l),u}};Je(RE,"MAX_PATTERN_SIZE",3e3);let EC=RE;function Xtt({src:i,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const l=Na.isLittleEndian?4278190080:255,[u,f]=a?[r,l]:[l,r],m=n>>3,g=n&7,v=i.length;e=new Uint32Array(e.buffer);let _=0;for(let b=0;b<s;b++){for(const T=t+m;t<T;t++){const S=t<v?i[t]:255;e[_++]=S&128?f:u,e[_++]=S&64?f:u,e[_++]=S&32?f:u,e[_++]=S&16?f:u,e[_++]=S&8?f:u,e[_++]=S&4?f:u,e[_++]=S&2?f:u,e[_++]=S&1?f:u}if(g===0)continue;const C=t<v?i[t++]:255;for(let T=0;T<g;T++)e[_++]=C&1<<7-T?f:u}return{srcPos:t,destPos:_}}const OD=16,ND=100,jtt=15,ID=10,UD=1e3,io=16;function qtt(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},i.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},i.transform=function(n,s,r,a,l,u){t.transform(n,s,r,a,l,u),this.__originalTransform(n,s,r,a,l,u)},i.setTransform=function(n,s,r,a,l,u){t.setTransform(n,s,r,a,l,u),this.__originalSetTransform(n,s,r,a,l,u)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){t.rotate(n),this.__originalRotate(n)},i.clip=function(n){t.clip(n),this.__originalClip(n)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,s,r,a,l){t.bezierCurveTo(e,n,s,r,a,l),this.__originalBezierCurveTo(e,n,s,r,a,l)},i.rect=function(e,n,s,r){t.rect(e,n,s,r),this.__originalRect(e,n,s,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Ytt{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function A4(i,t,e,n,s,r,a,l,u,f){const[m,g,v,_,b,C]=Wi(i);if(g===0&&v===0){const R=a*m+b,B=Math.round(R),D=l*_+C,N=Math.round(D),I=(a+u)*m+b,F=Math.abs(Math.round(I)-B)||1,z=(l+f)*_+C,U=Math.abs(Math.round(z)-N)||1;return i.setTransform(Math.sign(m),0,0,Math.sign(_),B,N),i.drawImage(t,e,n,s,r,0,0,F,U),i.setTransform(m,g,v,_,b,C),[F,U]}if(m===0&&_===0){const R=l*v+b,B=Math.round(R),D=a*g+C,N=Math.round(D),I=(l+f)*v+b,F=Math.abs(Math.round(I)-B)||1,z=(a+u)*g+C,U=Math.abs(Math.round(z)-N)||1;return i.setTransform(0,Math.sign(g),Math.sign(v),0,B,N),i.drawImage(t,e,n,s,r,0,0,U,F),i.setTransform(m,g,v,_,b,C),[U,F]}i.drawImage(t,e,n,s,r,a,l,u,f);const T=Math.hypot(m,g),S=Math.hypot(v,_);return[T*u,S*f]}function Wtt(i){const{width:t,height:e}=i;if(t>UD||e>UD)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let a=new Uint8Array(r*(e+1)),l,u,f;const m=t+7&-8;let g=new Uint8Array(m*e),v=0;for(const S of i.data){let R=128;for(;R>0;)g[v++]=S&R?0:255,R>>=1}let _=0;for(v=0,g[v]!==0&&(a[0]=1,++_),u=1;u<t;u++)g[v]!==g[v+1]&&(a[u]=g[v]?2:1,++_),v++;for(g[v]!==0&&(a[u]=2,++_),l=1;l<e;l++){v=l*m,f=l*r,g[v-m]!==g[v]&&(a[f]=g[v]?1:8,++_);let S=(g[v]?4:0)+(g[v-m]?8:0);for(u=1;u<t;u++)S=(S>>2)+(g[v+1]?4:0)+(g[v-m+1]?8:0),s[S]&&(a[f+u]=s[S],++_),v++;if(g[v-m]!==g[v]&&(a[f+u]=g[v]?2:4,++_),_>n)return null}for(v=m*(e-1),f=l*r,g[v]!==0&&(a[f]=8,++_),u=1;u<t;u++)g[v]!==g[v+1]&&(a[f+u]=g[v]?4:8,++_),v++;if(g[v]!==0&&(a[f+u]=4,++_),_>n)return null;const b=new Int32Array([0,r,-1,0,-r,0,0,0,1]),C=new Path2D;for(l=0;_&&l<=e;l++){let S=l*r;const R=S+t;for(;S<R&&!a[S];)S++;if(S===R)continue;C.moveTo(S%r,l);const B=S;let D=a[S];do{const N=b[D];do S+=N;while(!a[S]);const I=a[S];I!==5&&I!==10?(D=I,a[S]=0):(D=I&51*D>>4,a[S]&=D>>2|D<<2),C.lineTo(S%r,S/r|0),a[S]||--_}while(B!==S);--l}return g=null,a=null,function(S){S.save(),S.scale(1/t,-1/e),S.translate(0,-e),S.fill(C),S.beginPath(),S.restore()}}class PD{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=NN,this.textMatrixScale=1,this.fontMatrix=K5,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Yr.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=Le.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=Le.applyTransform(e,t),s=Le.applyTransform(e.slice(2),t),r=Le.applyTransform([e[0],e[3]],t),a=Le.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],s[0],r[0],a[0]),this.minY=Math.min(this.minY,n[1],s[1],r[1],a[1]),this.maxX=Math.max(this.maxX,n[0],s[0],r[0],a[0]),this.maxY=Math.max(this.maxY,n[1],s[1],r[1],a[1])}updateScalingPathMinMax(t,e){Le.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,s,r,a,l,u,f,m){const g=Le.bezierBoundingBox(e,n,s,r,a,l,u,f,m);m||this.updateRectMinMax(t,g)}getPathBoundingBox(t=Ra.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Ra.STROKE){e||Oi("Stroke bounding box must include transform.");const s=Le.singularValueDecompose2dScale(e),r=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;n[0]-=r,n[1]-=a,n[2]+=r,n[3]+=a}return n}updateClipFromPath(){const t=Le.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Ra.FILL,e=null){return Le.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function FD(i,t){if(typeof ImageData<"u"&&t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%io,r=(e-s)/io,a=s===0?r:r+1,l=i.createImageData(n,io);let u=0,f;const m=t.data,g=l.data;let v,_,b,C;if(t.kind===H4.GRAYSCALE_1BPP){const T=m.byteLength,S=new Uint32Array(g.buffer,0,g.byteLength>>2),R=S.length,B=n+7>>3,D=4294967295,N=Na.isLittleEndian?4278190080:255;for(v=0;v<a;v++){for(b=v<r?io:s,f=0,_=0;_<b;_++){const I=T-u;let F=0;const z=I>B?n:I*8-7,U=z&-8;let P=0,X=0;for(;F<U;F+=8)X=m[u++],S[f++]=X&128?D:N,S[f++]=X&64?D:N,S[f++]=X&32?D:N,S[f++]=X&16?D:N,S[f++]=X&8?D:N,S[f++]=X&4?D:N,S[f++]=X&2?D:N,S[f++]=X&1?D:N;for(;F<z;F++)P===0&&(X=m[u++],P=128),S[f++]=X&P?D:N,P>>=1}for(;f<R;)S[f++]=0;i.putImageData(l,0,v*io)}}else if(t.kind===H4.RGBA_32BPP){for(_=0,C=n*io*4,v=0;v<r;v++)g.set(m.subarray(u,u+C)),u+=C,i.putImageData(l,0,_),_+=io;v<a&&(C=n*s*4,g.set(m.subarray(u,u+C)),i.putImageData(l,0,_))}else if(t.kind===H4.RGB_24BPP)for(b=io,C=n*b,v=0;v<a;v++){for(v>=r&&(b=s,C=n*b),f=0,_=C;_--;)g[f++]=m[u++],g[f++]=m[u++],g[f++]=m[u++],g[f++]=255;i.putImageData(l,0,v*io)}else throw new Error(`bad image kind: ${t.kind}`)}function HD(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%io,r=(e-s)/io,a=s===0?r:r+1,l=i.createImageData(n,io);let u=0;const f=t.data,m=l.data;for(let g=0;g<a;g++){const v=g<r?io:s;({srcPos:u}=Xtt({src:f,srcPos:u,dest:m,width:n,height:v,nonBlackColor:0})),i.putImageData(l,0,g*io)}}function o_(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function x4(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!ia){const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}}function zD(i,t){if(t)return!0;const e=Le.singularValueDecompose2dScale(i);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*np.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const Ktt=["butt","round","square"],Jtt=["miter","round","bevel"],Ztt={},GD={};var rp,MC,TC;const z7=class z7{constructor(t,e,n,s,r,{optionalContentConfig:a,markedContentStack:l=null},u,f){W(this,rp);this.ctx=t,this.current=new PD(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new Ytt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=l,n){const u=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...Wi(this.compositeCtx))}this.ctx.save(),x4(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Wi(this.ctx)}executeOperatorList(t,e,n,s){const r=t.argsArray,a=t.fnArray;let l=e||0;const u=r.length;if(u===l)return l;const f=u-l>ID&&typeof n=="function",m=f?Date.now()+jtt:0;let g=0;const v=this.commonObjs,_=this.objs;let b;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,n),l;if(b=a[l],b!==cc.dependency)this[b].apply(this,r[l]);else for(const C of r[l]){const T=C.startsWith("g_")?v:_;if(!T.has(C))return T.get(C,n),l}if(l++,l===u)return l;if(f&&++g>ID){if(Date.now()>m)return n(),l;g=0}}}endDrawing(){k(this,rp,MC).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),k(this,rp,TC).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),l=n,u=s,f="prescale1",m,g;for(;r>2&&l>1||a>2&&u>1;){let v=l,_=u;r>2&&l>1&&(v=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/v),a>2&&u>1&&(_=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,a/=u/_),m=this.cachedCanvases.getCanvas(f,v,_),g=m.context,g.clearRect(0,0,v,_),g.drawImage(t,0,0,l,u,0,0,v,_),t=m.canvas,l=v,u=_,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:u}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:s}=t,r=this.current.fillColor,a=this.current.patternFill,l=Wi(e);let u,f,m,g;if((t.bitmap||t.data)&&t.count>1){const z=t.bitmap||t.data.buffer;f=JSON.stringify(a?l:[l.slice(0,4),r]),u=this._cachedBitmapsMap.get(z),u||(u=new Map,this._cachedBitmapsMap.set(z,u));const U=u.get(f);if(U&&!a){const P=Math.round(Math.min(l[0],l[2])+l[4]),X=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:U,offsetX:P,offsetY:X}}m=U}m||(g=this.cachedCanvases.getCanvas("maskCanvas",n,s),HD(g.context,t));let v=Le.transform(l,[1/n,0,0,-1/s,0,0]);v=Le.transform(v,[1,0,0,1,0,-s]);const[_,b,C,T]=Le.getAxialAlignedBoundingBox([0,0,n,s],v),S=Math.round(C-_)||1,R=Math.round(T-b)||1,B=this.cachedCanvases.getCanvas("fillCanvas",S,R),D=B.context,N=_,I=b;D.translate(-N,-I),D.transform(...v),m||(m=this._scaleImage(g.canvas,vh(D)),m=m.img,u&&a&&u.set(f,m)),D.imageSmoothingEnabled=zD(Wi(D),t.interpolate),A4(D,m,0,0,m.width,m.height,0,0,n,s),D.globalCompositeOperation="source-in";const F=Le.transform(vh(D),[1,0,0,1,-N,-I]);return D.fillStyle=a?r.getPattern(e,this,F,Ra.FILL):r,D.fillRect(0,0,n,s),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(f,B.canvas)),{canvas:B.canvas,offsetX:Math.round(N),offsetY:Math.round(I)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=Ktt[t]}setLineJoin(t){this.ctx.lineJoin=Jtt[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...Wi(this.suspendedCtx)),o_(this.suspendedCtx,r),qtt(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o_(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const r=s[0],a=s[1],l=s[2]-r,u=s[3]-a;l===0||u===0||(this.genericComposeSMask(e.context,n,l,u,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,r,a,l,u,f,m,g){let v=t.canvas,_=u-m,b=f-g;if(a){const T=Le.makeHexColor(...a);if(_<0||b<0||_+n>v.width||b+s>v.height){const S=this.cachedCanvases.getCanvas("maskExtension",n,s),R=S.context;R.drawImage(v,-_,-b),R.globalCompositeOperation="destination-atop",R.fillStyle=T,R.fillRect(0,0,n,s),R.globalCompositeOperation="source-over",v=S.canvas,_=b=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(_,b,n,s),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=T,t.fillRect(_,b,n,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const C=new Path2D;C.rect(u,f,n,s),e.clip(C),e.globalCompositeOperation="destination-in",e.drawImage(v,_,b,n,s,u,f,n,s),e.restore()}save(){this.inSMaskMode?(o_(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o_(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,s,r,a){this.ctx.transform(t,e,n,s,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const s=this.ctx,r=this.current;let a=r.x,l=r.y,u,f;const m=Wi(s),g=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,v=g?n.slice(0):null;for(let _=0,b=0,C=t.length;_<C;_++)switch(t[_]|0){case cc.rectangle:a=e[b++],l=e[b++];const T=e[b++],S=e[b++],R=a+T,B=l+S;s.moveTo(a,l),T===0||S===0?s.lineTo(R,B):(s.lineTo(R,l),s.lineTo(R,B),s.lineTo(a,B)),g||r.updateRectMinMax(m,[a,l,R,B]),s.closePath();break;case cc.moveTo:a=e[b++],l=e[b++],s.moveTo(a,l),g||r.updatePathMinMax(m,a,l);break;case cc.lineTo:a=e[b++],l=e[b++],s.lineTo(a,l),g||r.updatePathMinMax(m,a,l);break;case cc.curveTo:u=a,f=l,a=e[b+4],l=e[b+5],s.bezierCurveTo(e[b],e[b+1],e[b+2],e[b+3],a,l),r.updateCurvePathMinMax(m,u,f,e[b],e[b+1],e[b+2],e[b+3],a,l,v),b+=6;break;case cc.curveTo2:u=a,f=l,s.bezierCurveTo(a,l,e[b],e[b+1],e[b+2],e[b+3]),r.updateCurvePathMinMax(m,u,f,a,l,e[b],e[b+1],e[b+2],e[b+3],v),a=e[b+2],l=e[b+3],b+=4;break;case cc.curveTo3:u=a,f=l,a=e[b+2],l=e[b+3],s.bezierCurveTo(e[b],e[b+1],a,l,a,l),r.updateCurvePathMinMax(m,u,f,e[b],e[b+1],a,l,a,l,v),b+=4;break;case cc.closePath:s.closePath();break}g&&r.updateScalingPathMinMax(m,v),r.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,vh(e),Ra.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(e.save(),e.fillStyle=n.getPattern(e,this,vh(e),Ra.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Ztt}eoClip(){this.pendingClip=GD}beginText(){this.current.textMatrix=NN,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const n=this.commonObjs.get(t),s=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=n.fontMatrix||K5,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&An("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const r=n.loadedName||"sans-serif",a=((m=n.systemFontInfo)==null?void 0:m.css)||`"${r}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const u=n.italic?"italic":"normal";let f=e;e<OD?f=OD:e>ND&&(f=ND),this.current.fontSizeScale=e/f,this.ctx.font=`${u} ${l} ${f}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,s,r,a){this.current.textMatrix=[t,e,n,s,r,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,s){const r=this.ctx,a=this.current,l=a.font,u=a.textRenderingMode,f=a.fontSize/a.fontSizeScale,m=u&Yr.FILL_STROKE_MASK,g=!!(u&Yr.ADD_TO_PATH_FLAG),v=a.patternFill&&!l.missingFile;let _;(l.disableFontFace||g||v)&&(_=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||v?(r.save(),r.translate(e,n),r.beginPath(),_(r,f),s&&r.setTransform(...s),(m===Yr.FILL||m===Yr.FILL_STROKE)&&r.fill(),(m===Yr.STROKE||m===Yr.FILL_STROKE)&&r.stroke(),r.restore()):((m===Yr.FILL||m===Yr.FILL_STROKE)&&r.fillText(t,e,n),(m===Yr.STROKE||m===Yr.FILL_STROKE)&&r.strokeText(t,e,n)),g&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Wi(r),x:e,y:n,fontSize:f,addToPath:_})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return Fn(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const r=this.ctx,a=e.fontSizeScale,l=e.charSpacing,u=e.wordSpacing,f=e.fontDirection,m=e.textHScale*f,g=t.length,v=n.vertical,_=v?1:-1,b=n.defaultVMetrics,C=s*e.fontMatrix[0],T=e.textRenderingMode===Yr.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),f>0?r.scale(m,-1):r.scale(m,1);let S;if(e.patternFill){r.save();const I=e.fillColor.getPattern(r,this,vh(r),Ra.FILL);S=Wi(r),r.restore(),r.fillStyle=I}let R=e.lineWidth;const B=e.textMatrixScale;if(B===0||R===0){const I=e.textRenderingMode&Yr.FILL_STROKE_MASK;(I===Yr.STROKE||I===Yr.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=B;if(a!==1&&(r.scale(a,a),R/=a),r.lineWidth=R,n.isInvalidPDFjsFont){const I=[];let F=0;for(const z of t)I.push(z.unicode),F+=z.width;r.fillText(I.join(""),0,0),e.x+=F*C*m,r.restore(),this.compose();return}let D=0,N;for(N=0;N<g;++N){const I=t[N];if(typeof I=="number"){D+=_*I*s/1e3;continue}let F=!1;const z=(I.isSpace?u:0)+l,U=I.fontChar,P=I.accent;let X,ot,it=I.width;if(v){const dt=I.vmetric||b,Q=-(I.vmetric?dt[1]:it*.5)*C,tt=dt[2]*C;it=dt?-dt[0]:it,X=Q/a,ot=(D+tt)/a}else X=D/a,ot=0;if(n.remeasure&&it>0){const dt=r.measureText(U).width*1e3/s*a;if(it<dt&&this.isFontSubpixelAAEnabled){const Q=it/dt;F=!0,r.save(),r.scale(Q,1),X/=Q}else it!==dt&&(X+=(it-dt)/2e3*s/a)}if(this.contentVisible&&(I.isInFont||n.missingFile)){if(T&&!P)r.fillText(U,X,ot);else if(this.paintChar(U,X,ot,S),P){const dt=X+s*P.offset.x/a,Q=ot-s*P.offset.y/a;this.paintChar(P.fontChar,dt,Q,S)}}const ct=v?it*C-z*f:it*C+z*f;D+=ct,F&&r.restore()}v?e.y-=D:e.x+=D*m,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,s=n.font,r=n.fontSize,a=n.fontDirection,l=s.vertical?1:-1,u=n.charSpacing,f=n.wordSpacing,m=n.textHScale*a,g=n.fontMatrix||K5,v=t.length,_=n.textRenderingMode===Yr.INVISIBLE;let b,C,T,S;if(!(_||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(m,a),b=0;b<v;++b){if(C=t[b],typeof C=="number"){S=l*C*r/1e3,this.ctx.translate(S,0),n.x+=S*m;continue}const R=(C.isSpace?f:0)+u,B=s.charProcOperatorList[C.operatorListId];if(!B){An(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),e.scale(r,r),e.transform(...g),this.executeOperatorList(B),this.restore()),T=Le.applyTransform([C.width,0],g)[0]*r+R,e.translate(T,0),n.x+=T*m}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,s,r,a){this.ctx.rect(n,s,r-n,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],s=this.baseTransform||Wi(this.ctx),r={createCanvasGraphics:a=>new z7(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new EC(t,n,this.ctx,r,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=Le.makeHexColor(t,e,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=Le.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=Qtt(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,vh(e),Ra.SHADING);const s=vh(e);if(s){const{width:r,height:a}=e.canvas,[l,u,f,m]=Le.getAxialAlignedBoundingBox([0,0,r,a],s);this.ctx.fillRect(l,u,f-l,m-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Oi("Should not call beginInlineImage")}beginImageData(){Oi("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Wi(this.ctx),e)){const n=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],n,s),this.current.updateRectMinMax(Wi(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||IM("TODO: Support non-isolated groups."),t.knockout&&An("Knockout groups not supported.");const n=Wi(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=Le.getAxialAlignedBoundingBox(t.bbox,Wi(e));const r=[0,0,e.canvas.width,e.canvas.height];s=Le.intersect(s,r)||[0,0,0,0];const a=Math.floor(s[0]),l=Math.floor(s[1]),u=Math.max(Math.ceil(s[2])-a,1),f=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,f]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,u,f),v=g.context;v.translate(-a,-l),v.transform(...n),t.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,l),e.save()),o_(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Wi(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=Le.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,s,r){if(k(this,rp,MC).call(this),x4(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=l;const[u,f]=Le.singularValueDecompose2dScale(Wi(this.ctx)),{viewportScale:m}=this,g=Math.ceil(a*this.outputScaleX*m),v=Math.ceil(l*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(g,v);const{canvas:_,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(u,0,0,-f,0,l*f),x4(this.ctx)}else x4(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],a,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new PD(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),k(this,rp,TC).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=Wtt(t)),s.compiled)){s.compiled(n);return}const r=this._createMaskCanvas(t),a=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,s=0,r,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const u=Wi(l);l.transform(e,n,s,r,0,0);const f=this._createMaskCanvas(t);l.setTransform(1,0,0,1,f.offsetX-u[4],f.offsetY-u[5]);for(let m=0,g=a.length;m<g;m+=2){const v=Le.transform(u,[e,n,s,r,a[m],a[m+1]]),[_,b]=Le.applyTransform([0,0],v);l.drawImage(f.canvas,_,b)}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const r of t){const{data:a,width:l,height:u,transform:f}=r,m=this.cachedCanvases.getCanvas("maskCanvas",l,u),g=m.context;g.save();const v=this.getObject(a,r);HD(g,v),g.globalCompositeOperation="source-in",g.fillStyle=s?n.getPattern(g,this,vh(e),Ra.FILL):n,g.fillRect(0,0,l,u),g.restore(),e.save(),e.transform(...f),e.scale(1,-1),A4(e,m.canvas,0,0,l,u,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){An("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,s){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){An("Dependent image isn't ready yet");return}const a=r.width,l=r.height,u=[];for(let f=0,m=s.length;f<m;f+=2)u.push({transform:[e,0,0,n,s[f],s[f+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(r,u)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,s),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,s=this.ctx;if(this.save(),!ia){const{filter:l}=s;l!=="none"&&l!==""&&(s.filter="none")}s.scale(1/e,-1/n);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const u=this.cachedCanvases.getCanvas("inlineImage",e,n).context;FD(u,t),r=this.applyTransferMapsToCanvas(u)}const a=this._scaleImage(r,vh(s));s.imageSmoothingEnabled=zD(Wi(s),t.interpolate),A4(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const r=t.width,a=t.height,u=this.cachedCanvases.getCanvas("inlineImage",r,a).context;FD(u,t),s=this.applyTransferMapsToCanvas(u)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),A4(n,s,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===GD?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Wi(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:r}=this.ctx.getTransform();let a,l;if(n===0&&s===0){const u=Math.abs(e),f=Math.abs(r);if(u===f)if(t===0)a=l=1/u;else{const m=u*t;a=l=m<1?1/m:1}else if(t===0)a=1/u,l=1/f;else{const m=u*t,g=f*t;a=m<1?1/m:1,l=g<1?1/g:1}}else{const u=Math.abs(e*r-n*s),f=Math.hypot(e,n),m=Math.hypot(s,r);if(t===0)a=m/u,l=f/u;else{const g=t*u;a=m>g?m/g:1,l=f>g?f/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[s,r]=this.getScaleForStroking();if(e.lineWidth=n||1,s===1&&r===1){e.stroke();return}const a=e.getLineDash();if(t&&e.save(),e.scale(s,r),a.length>0){const l=Math.max(s,r);e.setLineDash(a.map(u=>u/l)),e.lineDashOffset/=l}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};rp=new WeakSet,MC=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},TC=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let Z1=z7;for(const i in cc)Z1.prototype[i]!==void 0&&(Z1.prototype[cc[i]]=Z1.prototype[i]);var DA,BA;class Yh{static get workerPort(){return x(this,DA)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");G(this,DA,t)}static get workerSrc(){return x(this,BA)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");G(this,BA,t)}}DA=new WeakMap,BA=new WeakMap,W(Yh,DA,null),W(Yh,BA,"");const b4={DATA:1,ERROR:2},Ts={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Co(i){switch(i instanceof Error||typeof i=="object"&&i!==null||Oi('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new c0(i.message);case"MissingPDFException":return new l0(i.message);case"PasswordException":return new J5(i.message,i.code);case"UnexpectedResponseException":return new UM(i.message,i.status);case"UnknownErrorException":return new Z5(i.message,i.details);default:return new Z5(i.message,i.toString())}}var gv,wl,yI,_I,AI,q4;class x_{constructor(t,e,n){W(this,wl);W(this,gv,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",k(this,wl,yI).bind(this),{signal:x(this,gv).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(a){r.reject(a)}return r.promise}sendWithStream(t,e,n,s){const r=this.streamId++,a=this.sourceName,l=this.targetName,u=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[r]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:a,targetName:l,action:t,streamId:r,data:e,desiredSize:f.desiredSize},s),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[r].pullCall=m,u.postMessage({sourceName:a,targetName:l,stream:Ts.PULL,streamId:r,desiredSize:f.desiredSize}),m.promise},cancel:f=>{js(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[r].cancelCall=m,this.streamControllers[r].isClosed=!0,u.postMessage({sourceName:a,targetName:l,stream:Ts.CANCEL,streamId:r,reason:Co(f)}),m.promise}},n)}destroy(){var t;(t=x(this,gv))==null||t.abort(),G(this,gv,null)}}gv=new WeakMap,wl=new WeakSet,yI=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){k(this,wl,AI).call(this,t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===b4.DATA)s.resolve(t.data);else if(t.callback===b4.ERROR)s.reject(Co(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,r=this.comObj;new Promise(function(a){a(e(t.data))}).then(function(a){r.postMessage({sourceName:n,targetName:s,callback:b4.DATA,callbackId:t.callbackId,data:a})},function(a){r.postMessage({sourceName:n,targetName:s,callback:b4.ERROR,callbackId:t.callbackId,reason:Co(a)})});return}if(t.streamId){k(this,wl,_I).call(this,t);return}e(t.data)},_I=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,a=this,l=this.actionHandler[t.action],u={enqueue(f,m=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:Ts.ENQUEUE,streamId:e,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Ts.CLOSE,streamId:e}),delete a.streamSinks[e])},error(f){js(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Ts.ERROR,streamId:e,reason:Co(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,new Promise(function(f){f(l(t.data,u))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Ts.START_COMPLETE,streamId:e,success:!0})},function(f){r.postMessage({sourceName:n,targetName:s,stream:Ts.START_COMPLETE,streamId:e,reason:Co(f)})})},AI=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,a=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case Ts.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(Co(t.reason));break;case Ts.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(Co(t.reason));break;case Ts.PULL:if(!l){r.postMessage({sourceName:n,targetName:s,stream:Ts.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,new Promise(function(u){var f;u((f=l.onPull)==null?void 0:f.call(l))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Ts.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:s,stream:Ts.PULL_COMPLETE,streamId:e,reason:Co(u)})});break;case Ts.ENQUEUE:if(js(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case Ts.CLOSE:if(js(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),k(this,wl,q4).call(this,a,e);break;case Ts.ERROR:js(a,"error should have stream controller"),a.controller.error(Co(t.reason)),k(this,wl,q4).call(this,a,e);break;case Ts.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(Co(t.reason)),k(this,wl,q4).call(this,a,e);break;case Ts.CANCEL:if(!l)break;new Promise(function(u){var f;u((f=l.onCancel)==null?void 0:f.call(l,Co(t.reason)))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Ts.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:s,stream:Ts.CANCEL_COMPLETE,streamId:e,reason:Co(u)})}),l.sinkCapability.reject(Co(t.reason)),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},q4=async function(t,e){var n,s,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var eg,OA;class $tt{constructor({parsedData:t,rawData:e}){W(this,eg);W(this,OA);G(this,eg,t),G(this,OA,e)}getRaw(){return x(this,OA)}get(t){return x(this,eg).get(t)??null}getAll(){return E7(x(this,eg))}has(t){return x(this,eg).has(t)}}eg=new WeakMap,OA=new WeakMap;const z1=Symbol("INTERNAL");var NA,IA,UA,vv;class tet{constructor(t,{name:e,intent:n,usage:s,rbGroups:r}){W(this,NA,!1);W(this,IA,!1);W(this,UA,!1);W(this,vv,!0);G(this,NA,!!(t&Po.DISPLAY)),G(this,IA,!!(t&Po.PRINT)),this.name=e,this.intent=n,this.usage=s,this.rbGroups=r}get visible(){if(x(this,UA))return x(this,vv);if(!x(this,vv))return!1;const{print:t,view:e}=this.usage;return x(this,NA)?(e==null?void 0:e.viewState)!=="OFF":x(this,IA)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==z1&&Oi("Internal method `_setVisible` called."),G(this,UA,n),G(this,vv,e)}}NA=new WeakMap,IA=new WeakMap,UA=new WeakMap,vv=new WeakMap;var Rd,hi,yv,_v,PA,CC;class eet{constructor(t,e=Po.DISPLAY){W(this,PA);W(this,Rd,null);W(this,hi,new Map);W(this,yv,null);W(this,_v,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,G(this,_v,t.order);for(const n of t.groups)x(this,hi).set(n.id,new tet(e,n));if(t.baseState==="OFF")for(const n of x(this,hi).values())n._setVisible(z1,!1);for(const n of t.on)x(this,hi).get(n)._setVisible(z1,!0);for(const n of t.off)x(this,hi).get(n)._setVisible(z1,!1);G(this,yv,this.getHash())}}isVisible(t){if(x(this,hi).size===0)return!0;if(!t)return IM("Optional content group not defined."),!0;if(t.type==="OCG")return x(this,hi).has(t.id)?x(this,hi).get(t.id).visible:(An(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return k(this,PA,CC).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(x(this,hi).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(!x(this,hi).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(!x(this,hi).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!x(this,hi).has(e))return An(`Optional content group not found: ${e}`),!0;if(x(this,hi).get(e).visible)return!1}return!0}return An(`Unknown optional content policy ${t.policy}.`),!0}return An(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const s=x(this,hi).get(t);if(!s){An(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const a of s.rbGroups)for(const l of a)l!==t&&((r=x(this,hi).get(l))==null||r._setVisible(z1,!1,!0));s._setVisible(z1,!!e,!0),G(this,Rd,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=x(this,hi).get(s);if(r)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}G(this,Rd,null)}get hasInitialVisibility(){return x(this,yv)===null||this.getHash()===x(this,yv)}getOrder(){return x(this,hi).size?x(this,_v)?x(this,_v).slice():[...x(this,hi).keys()]:null}getGroups(){return x(this,hi).size>0?E7(x(this,hi)):null}getGroup(t){return x(this,hi).get(t)||null}getHash(){if(x(this,Rd)!==null)return x(this,Rd);const t=new oI;for(const[e,n]of x(this,hi))t.update(`${e}:${n.visible}`);return G(this,Rd,t.hexdigest())}}Rd=new WeakMap,hi=new WeakMap,yv=new WeakMap,_v=new WeakMap,PA=new WeakSet,CC=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const r=t[s];let a;if(Array.isArray(r))a=k(this,PA,CC).call(this,r);else if(x(this,hi).has(r))a=x(this,hi).get(r).visible;else return An(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class net{constructor(t,{disableRange:e=!1,disableStream:n=!1}){js(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const u=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((u,f)=>{this._onReceiveData({begin:u,chunk:f})}),t.addProgressListener((u,f)=>{this._onProgress({loaded:u,total:f})}),t.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});js(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,s,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){js(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new iet(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new set(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class iet{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=C7(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class set{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ret(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let m=l(e);return m=unescape(m),m=u(m),m=f(m),r(m)}if(e=a(i),e){const m=f(e);return r(m)}if(e=n("filename","i").exec(i),e){e=e[1];let m=l(e);return m=f(m),r(m)}function n(m,g){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function s(m,g){if(m){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(m,{fatal:!0}),_=PM(g);g=v.decode(_),t=!1}catch{}}return g}function r(m){return t&&/[\x80-\xff]/.test(m)&&(m=s("utf-8",m),t&&(m=s("iso-8859-1",m))),m}function a(m){const g=[];let v;const _=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=_.exec(m))!==null;){let[,C,T,S]=v;if(C=parseInt(C,10),C in g){if(C===0)break;continue}g[C]=[T,S]}const b=[];for(let C=0;C<g.length&&C in g;++C){let[T,S]=g[C];S=l(S),T&&(S=unescape(S),C===0&&(S=u(S))),b.push(S)}return b.join("")}function l(m){if(m.startsWith('"')){const g=m.slice(1).split('\\"');for(let v=0;v<g.length;++v){const _=g[v].indexOf('"');_!==-1&&(g[v]=g[v].slice(0,_),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}m=g.join('"')}return m}function u(m){const g=m.indexOf("'");if(g===-1)return m;const v=m.slice(0,g),b=m.slice(g+1).replace(/^[^']*'/,"");return s(v,b)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,_,b){if(_==="q"||_==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,T){return String.fromCharCode(parseInt(T,16))}),s(v,b);try{b=atob(b)}catch{}return s(v,b)})}return""}function B7(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function O7({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function N7(i){const t=i.get("Content-Disposition");if(t){let e=ret(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(C7(e))return e}return null}function zM(i,t){return i===404||i===0&&t.startsWith("file:")?new l0('Missing PDF "'+t+'".'):new UM(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i)}function xI(i){return i===200||i===206}function bI(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function SI(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(An(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class kD{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=B7(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return js(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new aet(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new oet(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class aet{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),s=e.url;fetch(s,bI(n,this._withCredentials,this._abortController)).then(r=>{if(!xI(r.status))throw zM(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:l,suggestedLength:u}=O7({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=u||this._contentLength,this._filename=N7(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new c0("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:SI(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class oet{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const a=s.url;fetch(a,bI(r,this._withCredentials,this._abortController)).then(l=>{if(!xI(l.status))throw zM(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:SI(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const s5=200,r5=206;function cet(i){const t=i.response;return typeof t!="string"?t:PM(t).buffer}class uet{constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=B7(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const s={begin:t,end:e};for(const r in n)s[r]=n[r];return this.request(s)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,a]of this.headers)e.setRequestHeader(r,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=r5):s.expectedStatus=s5,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var s;const n=this.pendingRequests[t];n&&((s=n.onProgress)==null||s.call(n,e))}onStateChange(t,e){var u,f,m;const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){(u=n.onError)==null||u.call(n,s.status);return}const r=s.status||s5;if(!(r===s5&&n.expectedStatus===r5)&&r!==n.expectedStatus){(f=n.onError)==null||f.call(n,s.status);return}const l=cet(s);if(r===r5){const g=s.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);n.onDone({begin:parseInt(v[1],10),chunk:l})}else l?n.onDone({begin:0,chunk:l}):(m=n.onError)==null||m.call(n,s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class het{constructor(t){this._source=t,this._manager=new uet(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return js(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new fet(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new det(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class fet{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=new Headers(e.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[l,...u]=a.split(": ");return[l,u.join(": ")]})),{allowRangeRequests:s,suggestedLength:r}=O7({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=N7(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=zM(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class det{constructor(t,e,n){this._manager=t;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=zM(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const pet=/^[a-z][a-z0-9\-+.]+:/i;function met(i){if(pet.test(i))return new URL(i);const t=ip.get("url");return new URL(t.pathToFileURL(i))}function EI(i,t,e){return i.protocol==="http:"?ip.get("http").request(i,{headers:t},e):ip.get("https").request(i,{headers:t},e)}class get{constructor(t){this.source=t,this.url=met(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=B7(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return js(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new _et(this):new vet(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new Aet(this,t,e):new yet(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class MI{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new c0("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class TI{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class vet extends MI{constructor(t){super(t);const e=Object.fromEntries(t.headers),n=s=>{if(s.statusCode===404){const u=new l0(`Missing PDF "${this._url}".`);this._storedError=u,this._headersCapability.reject(u);return}this._headersCapability.resolve(),this._setReadableStream(s);const r=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:l}=O7({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=N7(r)};this._request=EI(this._url,e,n),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class yet extends TI{constructor(t,e,n){super(t);const s=Object.fromEntries(t.headers);s.Range=`bytes=${e}-${n-1}`;const r=a=>{if(a.statusCode===404){const l=new l0(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(a)};this._request=EI(this._url,s,r),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class _et extends MI{constructor(t){super(t);const e=ip.get("fs");e.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new l0(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class Aet extends TI{constructor(t,e,n){super(t);const s=ip.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:n-1}))}}const xet=1e5,Ja=30,bet=.8;var u9,Ld,eo,FA,HA,ng,Rh,zA,GA,ig,Av,xv,Dd,bv,kA,Sv,sg,VA,QA,rs,rg,ag,XA,Bd,Ev,of,CI,wI,RC,ko,Y4,LC,RI,LI;let wC=(rs=class{constructor({textContentSource:t,container:e,viewport:n}){W(this,of);W(this,Ld,Promise.withResolvers());W(this,eo,null);W(this,FA,!1);W(this,HA,!!((u9=globalThis.FontInspector)!=null&&u9.enabled));W(this,ng,null);W(this,Rh,null);W(this,zA,0);W(this,GA,0);W(this,ig,null);W(this,Av,null);W(this,xv,0);W(this,Dd,0);W(this,bv,Object.create(null));W(this,kA,[]);W(this,Sv,null);W(this,sg,[]);W(this,VA,new WeakMap);W(this,QA,null);var u;if(t instanceof ReadableStream)G(this,Sv,t);else if(typeof t=="object")G(this,Sv,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');G(this,eo,G(this,Av,e)),G(this,Dd,n.scale*(globalThis.devicePixelRatio||1)),G(this,xv,n.rotation),G(this,Rh,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:a,pageY:l}=n.rawDims;G(this,QA,[1,0,0,-1,-a,l+r]),G(this,GA,s),G(this,zA,r),k(u=rs,ko,RI).call(u),Wg(e,n),x(this,Ld).promise.finally(()=>{x(rs,Ev).delete(this),G(this,Rh,null),G(this,bv,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Na.platform;return Fn(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{x(this,ig).read().then(({value:e,done:n})=>{if(n){x(this,Ld).resolve();return}x(this,ng)??G(this,ng,e.lang),Object.assign(x(this,bv),e.styles),k(this,of,CI).call(this,e.items),t()},x(this,Ld).reject)};return G(this,ig,x(this,Sv).getReader()),x(rs,Ev).add(this),t(),x(this,Ld).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==x(this,xv)&&(e==null||e(),G(this,xv,s),Wg(x(this,Av),{rotation:s})),n!==x(this,Dd)){e==null||e(),G(this,Dd,n);const a={div:null,properties:null,ctx:k(r=rs,ko,Y4).call(r,x(this,ng))};for(const l of x(this,sg))a.properties=x(this,VA).get(l),a.div=l,k(this,of,RC).call(this,a)}}cancel(){var e;const t=new c0("TextLayer task cancelled.");(e=x(this,ig))==null||e.cancel(t).catch(()=>{}),G(this,ig,null),x(this,Ld).reject(t)}get textDivs(){return x(this,sg)}get textContentItemsStr(){return x(this,kA)}static cleanup(){if(!(x(this,Ev).size>0)){x(this,rg).clear();for(const{canvas:t}of x(this,ag).values())t.remove();x(this,ag).clear()}}},Ld=new WeakMap,eo=new WeakMap,FA=new WeakMap,HA=new WeakMap,ng=new WeakMap,Rh=new WeakMap,zA=new WeakMap,GA=new WeakMap,ig=new WeakMap,Av=new WeakMap,xv=new WeakMap,Dd=new WeakMap,bv=new WeakMap,kA=new WeakMap,Sv=new WeakMap,sg=new WeakMap,VA=new WeakMap,QA=new WeakMap,rg=new WeakMap,ag=new WeakMap,XA=new WeakMap,Bd=new WeakMap,Ev=new WeakMap,of=new WeakSet,CI=function(t){var s,r;if(x(this,FA))return;(r=x(this,Rh)).ctx??(r.ctx=k(s=rs,ko,Y4).call(s,x(this,ng)));const e=x(this,sg),n=x(this,kA);for(const a of t){if(e.length>xet){An("Ignoring additional textDivs for performance reasons."),G(this,FA,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=x(this,eo);G(this,eo,document.createElement("span")),x(this,eo).classList.add("markedContent"),a.id!==null&&x(this,eo).setAttribute("id",`${a.id}`),l.append(x(this,eo))}else a.type==="endMarkedContent"&&G(this,eo,x(this,eo).parentNode);continue}n.push(a.str),k(this,of,wI).call(this,a)}},wI=function(t){var C;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};x(this,sg).push(e);const s=Le.transform(x(this,QA),t.transform);let r=Math.atan2(s[1],s[0]);const a=x(this,bv)[t.fontName];a.vertical&&(r+=Math.PI/2);let l=x(this,HA)&&a.fontSubstitution||a.fontFamily;l=rs.fontFamilyMap.get(l)||l;const u=Math.hypot(s[2],s[3]),f=u*k(C=rs,ko,LI).call(C,l,x(this,ng));let m,g;r===0?(m=s[4],g=s[5]-f):(m=s[4]+f*Math.sin(r),g=s[5]-f*Math.cos(r));const v="calc(var(--scale-factor)*",_=e.style;x(this,eo)===x(this,Av)?(_.left=`${(100*m/x(this,GA)).toFixed(2)}%`,_.top=`${(100*g/x(this,zA)).toFixed(2)}%`):(_.left=`${v}${m.toFixed(2)}px)`,_.top=`${v}${g.toFixed(2)}px)`),_.fontSize=`${v}${(x(rs,Bd)*u).toFixed(2)}px)`,_.fontFamily=l,n.fontSize=u,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,x(this,HA)&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const T=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);T!==S&&Math.max(T,S)/Math.min(T,S)>1.5&&(b=!0)}if(b&&(n.canvasWidth=a.vertical?t.height:t.width),x(this,VA).set(e,n),x(this,Rh).div=e,x(this,Rh).properties=n,k(this,of,RC).call(this,x(this,Rh)),n.hasText&&x(this,eo).append(e),n.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),x(this,eo).append(T)}},RC=function(t){var l;const{div:e,properties:n,ctx:s}=t,{style:r}=e;let a="";if(x(rs,Bd)>1&&(a=`scale(${1/x(rs,Bd)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=r,{canvasWidth:f,fontSize:m}=n;k(l=rs,ko,LC).call(l,s,m*x(this,Dd),u);const{width:g}=s.measureText(e.textContent);g>0&&(a=`scaleX(${f*x(this,Dd)/g}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(r.transform=a)},ko=new WeakSet,Y4=function(t=null){let e=x(this,ag).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),x(this,ag).set(t,e),x(this,XA).set(e,{size:0,family:""})}return e},LC=function(t,e,n){const s=x(this,XA).get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)},RI=function(){if(x(this,Bd)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),G(this,Bd,t.getBoundingClientRect().height),t.remove()},LI=function(t,e){const n=x(this,rg).get(t);if(n)return n;const s=k(this,ko,Y4).call(this,e);s.canvas.width=s.canvas.height=Ja,k(this,ko,LC).call(this,s,Ja,t);const r=s.measureText("");let a=r.fontBoundingBoxAscent,l=Math.abs(r.fontBoundingBoxDescent);if(a){const m=a/(a+l);return x(this,rg).set(t,m),s.canvas.width=s.canvas.height=0,m}s.strokeStyle="red",s.clearRect(0,0,Ja,Ja),s.strokeText("g",0,0);let u=s.getImageData(0,0,Ja,Ja).data;l=0;for(let m=u.length-1-3;m>=0;m-=4)if(u[m]>0){l=Math.ceil(m/4/Ja);break}s.clearRect(0,0,Ja,Ja),s.strokeText("A",0,Ja),u=s.getImageData(0,0,Ja,Ja).data,a=0;for(let m=0,g=u.length;m<g;m+=4)if(u[m]>0){a=Ja-Math.floor(m/4/Ja);break}s.canvas.width=s.canvas.height=0;const f=a?a/(a+l):bet;return x(this,rg).set(t,f),f},W(rs,ko),W(rs,rg,new Map),W(rs,ag,new Map),W(rs,XA,new WeakMap),W(rs,Bd,null),W(rs,Ev,new Set),rs);class cA{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(r){var u;if(!r)return;let a=null;const l=r.name;if(l==="#text")a=r.value;else if(cA.shouldBuildText(l))(u=r==null?void 0:r.attributes)!=null&&u.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&e.push({str:a}),!!r.children)for(const f of r.children)s(f)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const Eet=65536,Met=100,Tet=5e3,Cet=ia?Ptt:Ntt,wet=ia?Ftt:fI,Ret=ia?Utt:Itt,Let=ia?Htt:gI;function Det(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new DC,{docId:e}=t,n=i.url?Bet(i.url):null,s=i.data?Oet(i.data):null,r=i.httpHeaders||null,a=i.withCredentials===!0,l=i.password??null,u=i.range instanceof DI?i.range:null,f=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:Eet;let m=i.worker instanceof $1?i.worker:null;const g=i.verbosity,v=typeof i.docBaseUrl=="string"&&!HM(i.docBaseUrl)?i.docBaseUrl:null,_=typeof i.cMapUrl=="string"?i.cMapUrl:null,b=i.cMapPacked!==!1,C=i.CMapReaderFactory||wet,T=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,S=i.StandardFontDataFactory||Let,R=i.stopAtErrors!==!0,B=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,D=i.isEvalSupported!==!1,N=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!ia,I=typeof i.isChrome=="boolean"?i.isChrome:!Na.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),F=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,z=typeof i.disableFontFace=="boolean"?i.disableFontFace:ia,U=i.fontExtraProperties===!0,P=i.enableXfa===!0,X=i.ownerDocument||globalThis.document,ot=i.disableRange===!0,it=i.disableStream===!0,ct=i.disableAutoFetch===!0,dt=i.pdfBug===!0,Q=i.CanvasFactory||Cet,tt=i.FilterFactory||Ret,et=i.enableHWA===!0,_t=u?u.length:i.length??NaN,J=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!ia&&!z,at=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:C===fI&&S===gI&&_&&T&&p_(_,document.baseURI)&&p_(T,document.baseURI);i.canvasFactory&&LD("`canvasFactory`-instance option, please use `CanvasFactory` instead."),i.filterFactory&&LD("`filterFactory`-instance option, please use `FilterFactory` instead.");const xt=null;htt(g);const Et={canvasFactory:new Q({ownerDocument:X,enableHWA:et}),filterFactory:new tt({docId:e,ownerDocument:X}),cMapReaderFactory:at?null:new C({baseUrl:_,isCompressed:b}),standardFontDataFactory:at?null:new S({baseUrl:T})};if(!m){const Bt={verbosity:g,port:Yh.workerPort};m=Bt.port?$1.fromPort(Bt):new $1(Bt),t._worker=m}const lt={docId:e,apiVersion:"4.8.69",data:s,password:l,disableAutoFetch:ct,rangeChunkSize:f,length:_t,docBaseUrl:v,enableXfa:P,evaluatorOptions:{maxImageSize:B,disableFontFace:z,ignoreErrors:R,isEvalSupported:D,isOffscreenCanvasSupported:N,isChrome:I,canvasMaxAreaInBytes:F,fontExtraProperties:U,useSystemFonts:J,cMapUrl:at?_:null,standardFontDataUrl:at?T:null}},wt={disableFontFace:z,fontExtraProperties:U,ownerDocument:X,pdfBug:dt,styleElement:xt,loadingParams:{disableAutoFetch:ct,enableXfa:P}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Bt=m.messageHandler.sendWithPromise("GetDocRequest",lt,s?[s.buffer]:null);let Ut;if(u)Ut=new net(u,{disableRange:ot,disableStream:it});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Wt;ia?Wt=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&p_(n)?kD:get:Wt=p_(n)?kD:het,Ut=new Wt({url:n,length:_t,httpHeaders:r,withCredentials:a,rangeChunkSize:f,disableRange:ot,disableStream:it})}return Bt.then(Wt=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ve=new x_(e,Wt,m.port),ee=new Pet(ve,t,Ut,wt,Et);t._transport=ee,ve.send("Ready",null)})}).catch(t._capability.reject),t}function Bet(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(ia&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Oet(i){if(ia&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return PM(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function VD(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var LE;const DE=class DE{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Sa(DE,LE)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};LE=new WeakMap,W(DE,LE,0);let DC=DE,DI=class{constructor(t,e,n=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Oi("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class Net{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Fn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Od,Lh,El,G1,W4;class Iet{constructor(t,e,n,s=!1){W(this,El);W(this,Od,null);W(this,Lh,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new RD:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new BI,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new kx({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Fn(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:s=vd.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:f=null,printAnnotationStorage:m=null,isEditing:g=!1}){var D,N;(D=this._stats)==null||D.time("Overall");const v=this._transport.getRenderingIntent(n,s,m,g),{renderingIntent:_,cacheKey:b}=v;G(this,Lh,!1),k(this,El,W4).call(this),l||(l=this._transport.getOptionalContentConfig(_));let C=this._intentStates.get(b);C||(C=Object.create(null),this._intentStates.set(b,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const T=!!(_&Po.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(N=this._stats)==null||N.time("Page Request"),this._pumpOperatorList(v));const S=I=>{var F;C.renderTasks.delete(R),(this._maybeCleanupAfterRender||T)&&G(this,Lh,!0),k(this,El,G1).call(this,!T),I?(R.capability.reject(I),this._abortOperatorList({intentState:C,reason:I instanceof Error?I:new Error(I)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new OC({callback:S,params:{canvasContext:t,viewport:e,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:f});(C.renderTasks||(C.renderTasks=new Set)).add(R);const B=R.task;return Promise.all([C.displayReadyCapability.promise,l]).then(([I,F])=>{var z;if(this.destroyed){S();return}if((z=this._stats)==null||z.time("Rendering"),!(F.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:I,optionalContentConfig:F}),R.operatorListChanged()}).catch(S),B}getOperatorList({intent:t="display",annotationMode:e=vd.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var f;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(u))}const a=this._transport.getRenderingIntent(t,e,n,s,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let u;return l.opListReadCapability||(u=Object.create(null),u.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(u),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>cA.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function r(){a.read().then(function({value:u,done:f}){if(f){n(l);return}l.lang??(l.lang=u.lang),Object.assign(l.styles,u.styles),l.items.push(...u.items),r()},s)}const a=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),G(this,Lh,!1),k(this,El,W4).call(this),Promise.all(t)}cleanup(t=!1){G(this,Lh,!0);const e=k(this,El,G1).call(this,!1);return t&&e&&this._stats&&(this._stats=new RD),e}_startRenderPage(t,e){var s,r;const n=this._intentStates.get(e);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&k(this,El,G1).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:r,transfer:a}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},a).getReader(),f=this._intentStates.get(e);f.streamReader=u;const m=()=>{u.read().then(({value:g,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),m())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();k(this,El,G1).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof T7){let s=Met;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new c0(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Od=new WeakMap,Lh=new WeakMap,El=new WeakSet,G1=function(t=!1){if(k(this,El,W4).call(this),!x(this,Lh)||this.destroyed)return!1;if(t)return G(this,Od,setTimeout(()=>{G(this,Od,null),k(this,El,G1).call(this,!1)},Tet)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),G(this,Lh,!1),!0},W4=function(){x(this,Od)&&(clearTimeout(x(this,Od)),G(this,Od,null))};var Dh,BE;class Uet{constructor(){W(this,Dh,new Map);W(this,BE,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};x(this,BE).then(()=>{for(const[s]of x(this,Dh))s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){An("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}x(this,Dh).set(e,s)}removeEventListener(t,e){const n=x(this,Dh).get(e);n==null||n(),x(this,Dh).delete(e)}terminate(){for(const[,t]of x(this,Dh))t==null||t();x(this,Dh).clear()}}Dh=new WeakMap,BE=new WeakMap;var OE,og,lg,Mv,K4,Tv,J4;const Hi=class Hi{constructor({name:t=null,port:e=null,verbosity:n=ftt()}={}){W(this,Mv);var s;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((s=x(Hi,lg))!=null&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(x(Hi,lg)||G(Hi,lg,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return ia?Promise.all([ip.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new x_("main","worker",t),this._messageHandler.on("ready",function(){}),k(this,Mv,K4).call(this)}_initialize(){if(x(Hi,og)||x(Hi,Tv,J4)){this._setupFakeWorker();return}let{workerSrc:t}=Hi;try{Hi._isSameOrigin(window.location.href,t)||(t=Hi._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new x_("main","worker",e),s=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),n.on("test",l=>{if(r.abort(),this.destroyed||!l){s();return}this._messageHandler=n,this._port=e,this._webWorker=e,k(this,Mv,K4).call(this)}),n.on("ready",l=>{if(r.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{IM("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){x(Hi,og)||(An("Setting up fake worker."),G(Hi,og,!0)),Hi._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new Uet;this._port=e;const n=`fake${Sa(Hi,OE)._++}`,s=new x_(n+"_worker",n,e);t.setup(s,e),this._messageHandler=new x_(n,n+"_worker",e),k(this,Mv,K4).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=x(Hi,lg))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=x(this,lg))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Hi(t)}static get workerSrc(){if(Yh.workerSrc)return Yh.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Fn(this,"_setupFakeWorkerGlobal",(async()=>x(this,Tv,J4)?x(this,Tv,J4):(await import(this.workerSrc)).WorkerMessageHandler)())}};OE=new WeakMap,og=new WeakMap,lg=new WeakMap,Mv=new WeakSet,K4=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Tv=new WeakSet,J4=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},W(Hi,Tv),W(Hi,OE,0),W(Hi,og,!1),W(Hi,lg),ia&&(G(Hi,og,!0),Yh.workerSrc||(Yh.workerSrc="./pdf.worker.mjs")),Hi._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const s=new URL(e,n);return n.origin===s.origin},Hi._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let $1=Hi;var Bh,wu,Cv,wv,Ru,cg,b_;class Pet{constructor(t,e,n,s,r){W(this,cg);W(this,Bh,new Map);W(this,wu,new Map);W(this,Cv,new Map);W(this,wv,new Map);W(this,Ru,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new BI,this.fontLoader=new Btt({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Fn(this,"annotationStorage",new L7)}getRenderingIntent(t,e=vd.ENABLE,n=null,s=!1,r=!1){let a=Po.DISPLAY,l=_C;switch(t){case"any":a=Po.ANY;break;case"display":break;case"print":a=Po.PRINT;break;default:An(`getRenderingIntent - invalid intent: ${t}`)}const u=a&Po.PRINT&&n instanceof cI?n:this.annotationStorage;switch(e){case vd.DISABLE:a+=Po.ANNOTATIONS_DISABLE;break;case vd.ENABLE:break;case vd.ENABLE_FORMS:a+=Po.ANNOTATIONS_FORMS;break;case vd.ENABLE_STORAGE:a+=Po.ANNOTATIONS_STORAGE,l=u.serializable;break;default:An(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(a+=Po.IS_EDITING),r&&(a+=Po.OPLIST);const{ids:f,hash:m}=u.modifiedIds,g=[a,l.hash,m];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:l,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=x(this,Ru))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of x(this,wu).values())t.push(s._destroy());x(this,wu).clear(),x(this,Cv).clear(),x(this,wv).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),x(this,Bh).clear(),this.filterFactory.destroy(),wC.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new c0("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{js(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){s.close();return}js(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:a}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=u=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:u.loaded,total:u.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:a}}),t.on("GetRangeReader",(n,s)=>{js(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:a,done:l}){if(l){s.close();return}js(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{r.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new Net(n,this))}),t.on("DocException",function(n){let s;switch(n.name){case"PasswordException":s=new J5(n.message,n.code);break;case"InvalidPDFException":s=new IN(n.message);break;case"MissingPDFException":s=new l0(n.message);break;case"UnexpectedResponseException":s=new UM(n.message,n.status);break;case"UnknownErrorException":s=new Z5(n.message,n.details);break;default:Oi("DocException - expected a valid Error.")}e._capability.reject(s)}),t.on("PasswordRequest",n=>{if(G(this,Ru,Promise.withResolvers()),e.onPassword){const s=r=>{r instanceof Error?x(this,Ru).reject(r):x(this,Ru).resolve({password:r})};try{e.onPassword(s,n.code)}catch(r){x(this,Ru).reject(r)}}else x(this,Ru).reject(new J5(n.message,n.code));return x(this,Ru).promise}),t.on("DataLoaded",n=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;x(this,wu).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,r])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:l,fontExtraProperties:u,pdfBug:f}=this._params;if("error"in r){const _=r.error;An(`Error during font loading: ${_}`),this.commonObjs.resolve(n,_);break}const m=f&&((a=globalThis.FontInspector)!=null&&a.enabled)?(_,b)=>globalThis.FontInspector.fontAdded(_,b):null,g=new Ott(r,{disableFontFace:l,inspectFont:m});this.fontLoader.bind(g).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u&&g.data&&(g.data=null),this.commonObjs.resolve(n,g)});break;case"CopyLocalImage":const{imageRef:v}=r;js(v,"The imageRef must be defined.");for(const _ of x(this,wu).values())for(const[,b]of _.objs)if((b==null?void 0:b.ref)===v)return b.dataLen?(this.commonObjs.resolve(n,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,r,a])=>{var u;if(this.destroyed)return;const l=x(this,wu).get(s);if(!l.objs.has(n)){if(l._intentStates.size===0){(u=a==null?void 0:a.bitmap)==null||u.close();return}switch(r){case"Image":l.objs.resolve(n,a),(a==null?void 0:a.dataLen)>ott&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&An("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=x(this,Cv).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&x(this,wv).set(r.refStr,t);const a=new Iet(e,r,this,this._params.pdfBug);return x(this,wu).set(e,a),a});return x(this,Cv).set(e,s),s}getPageIndex(t){return VD(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return k(this,cg,b_).call(this,"GetFieldObjects")}hasJSActions(){return k(this,cg,b_).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return k(this,cg,b_).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return k(this,cg,b_).call(this,"GetOptionalContentConfig").then(e=>new eet(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=x(this,Bh).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,a;return{info:s[0],metadata:s[1]?new $tt(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return x(this,Bh).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of x(this,wu).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),x(this,Bh).clear(),this.filterFactory.destroy(!0),wC.cleanup()}}cachedPageNumber(t){if(!VD(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return x(this,wv).get(e)??null}}Bh=new WeakMap,wu=new WeakMap,Cv=new WeakMap,wv=new WeakMap,Ru=new WeakMap,cg=new WeakSet,b_=function(t,e=null){const n=x(this,Bh).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return x(this,Bh).set(t,s),s};const S4=Symbol("INITIAL_DATA");var mc,jA,BC;class BI{constructor(){W(this,jA);W(this,mc,Object.create(null))}get(t,e=null){if(e){const s=k(this,jA,BC).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=x(this,mc)[t];if(!n||n.data===S4)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=x(this,mc)[t];return!!e&&e.data!==S4}resolve(t,e=null){const n=k(this,jA,BC).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in x(this,mc)){const{data:n}=x(this,mc)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}G(this,mc,Object.create(null))}*[Symbol.iterator](){for(const t in x(this,mc)){const{data:e}=x(this,mc)[t];e!==S4&&(yield[t,e])}}}mc=new WeakMap,jA=new WeakSet,BC=function(t){var e;return(e=x(this,mc))[t]||(e[t]={...Promise.withResolvers(),data:S4})};var Nd;class Fet{constructor(t){W(this,Nd,null);G(this,Nd,t),this.onContinue=null}get promise(){return x(this,Nd).capability.promise}cancel(t=0){x(this,Nd).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=x(this,Nd).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=x(this,Nd);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Nd=new WeakMap;var Id,ug;const wm=class wm{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:l,canvasFactory:u,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:g=!1,pageColors:v=null}){W(this,Id,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=u,this.filterFactory=f,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Fet(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,u;if(this.cancelled)return;if(this._canvas){if(x(wm,ug).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");x(wm,ug).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:r,background:a}=this.params;this.gfx=new Z1(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),x(this,Id)&&(window.cancelAnimationFrame(x(this,Id)),G(this,Id,null)),x(wm,ug).delete(this._canvas),this.callback(t||new T7(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?G(this,Id,window.requestAnimationFrame(()=>{G(this,Id,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),x(wm,ug).delete(this._canvas),this.callback())))}};Id=new WeakMap,ug=new WeakMap,W(wm,ug,new WeakSet);let OC=wm;const Het="4.8.69",zet="3634dab10";function QD(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function l_(i){return Math.max(0,Math.min(255,255*i))}class XD{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=l_(t),[t,t,t]}static G_HTML([t]){const e=QD(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(l_)}static RGB_HTML(t){return`#${t.map(QD).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[l_(1-Math.min(1,t+s)),l_(1-Math.min(1,n+s)),l_(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,r=1-e,a=1-n,l=Math.min(s,r,a);return["CMYK",s,r,a,l]}}class Get{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Oi("Abstract method `_createSVG` called.")}}class I7 extends Get{_createSVG(t){return document.createElementNS(yh,t)}}class OI{static setupStorage(t,e,n,s,r){const a=s.getValue(e,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?t.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{s.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const l of n.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const u=l.target.options,f=u.selectedIndex===-1?"":u[u.selectedIndex].value;s.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:r}){const{attributes:a}=e,l=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[u,f]of Object.entries(a))if(f!=null)switch(u){case"class":f.length&&t.setAttribute(u,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!l||u!=="href"&&u!=="newWindow")&&t.setAttribute(u,f)}l&&r.addLinkAttributes(t,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(t,a.dataId,e,n)}static render(t){var g,v;const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,r=t.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:r,linkService:n});const l=r!=="richText",u=t.div;if(u.append(a),t.viewport){const _=`matrix(${t.viewport.transform.join(",")})`;u.style.transform=_}l&&u.setAttribute("class","xfaLayer xfaFont");const f=[];if(s.children.length===0){if(s.value){const _=document.createTextNode(s.value);a.append(_),l&&cA.shouldBuildText(s.name)&&f.push(_)}return{textDivs:f}}const m=[[s,-1,a]];for(;m.length>0;){const[_,b,C]=m.at(-1);if(b+1===_.children.length){m.pop();continue}const T=_.children[++m.at(-1)[1]];if(T===null)continue;const{name:S}=T;if(S==="#text"){const B=document.createTextNode(T.value);f.push(B),C.append(B);continue}const R=(g=T==null?void 0:T.attributes)!=null&&g.xmlns?document.createElementNS(T.attributes.xmlns,S):document.createElement(S);if(C.append(R),T.attributes&&this.setAttributes({html:R,element:T,storage:e,intent:r,linkService:n}),((v=T.children)==null?void 0:v.length)>0)m.push([T,-1,R]);else if(T.value){const B=document.createTextNode(T.value);l&&cA.shouldBuildText(S)&&f.push(B),R.append(B)}}for(const _ of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Qx=1e3,ket=9,Jg=new WeakSet;function tf(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class Vet{static create(t){switch(t.data.annotationType){case ks.LINK:return new NI(t);case ks.TEXT:return new Qet(t);case ks.WIDGET:switch(t.data.fieldType){case"Tx":return new Xet(t);case"Btn":return t.data.radioButton?new PI(t):t.data.checkBox?new qet(t):new Yet(t);case"Ch":return new Wet(t);case"Sig":return new jet(t)}return new u0(t);case ks.POPUP:return new IC(t);case ks.FREETEXT:return new kI(t);case ks.LINE:return new Jet(t);case ks.SQUARE:return new Zet(t);case ks.CIRCLE:return new $et(t);case ks.POLYLINE:return new VI(t);case ks.CARET:return new ent(t);case ks.INK:return new U7(t);case ks.POLYGON:return new tnt(t);case ks.HIGHLIGHT:return new QI(t);case ks.UNDERLINE:return new nnt(t);case ks.SQUIGGLY:return new int(t);case ks.STRIKEOUT:return new snt(t);case ks.STAMP:return new XI(t);case ks.FILEATTACHMENT:return new rnt(t);default:return new vs(t)}}}var hg,Rv,Lv,qA,NC;const G7=class G7{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){W(this,qA);W(this,hg,null);W(this,Rv,!1);W(this,Lv,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return G7._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;x(this,hg)||G(this,hg,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&k(this,qA,NC).call(this,e),(n=x(this,Lv))==null||n.popup.updateEdited(t)}resetEdited(){var t;x(this,hg)&&(k(this,qA,NC).call(this,x(this,hg).rect),(t=x(this,Lv))==null||t.popup.resetEdited(),G(this,hg,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof u0||(r.tabIndex=Qx);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof IC){const{rotation:C}=e;return!e.hasOwnCanvas&&C!==0&&this.setRotation(C,r),r}const{width:l,height:u}=tf(e.rect);if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const C=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(C>0||T>0){const R=`calc(${C}px * var(--scale-factor)) / calc(${T}px * var(--scale-factor))`;a.borderRadius=R}else if(this instanceof PI){const R=`calc(${l}px * var(--scale-factor)) / calc(${u}px * var(--scale-factor))`;a.borderRadius=R}switch(e.borderStyle.style){case a_.SOLID:a.borderStyle="solid";break;case a_.DASHED:a.borderStyle="dashed";break;case a_.BEVELED:An("Unimplemented border style: beveled");break;case a_.INSET:An("Unimplemented border style: inset");break;case a_.UNDERLINE:a.borderBottomStyle="solid";break}const S=e.borderColor||null;S?(G(this,Rv,!0),a.borderColor=Le.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):a.borderWidth=0}const f=Le.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:g,pageX:v,pageY:_}=s.rawDims;a.left=`${100*(f[0]-v)/m}%`,a.top=`${100*(f[1]-_)/g}%`;const{rotation:b}=e;return e.hasOwnCanvas||b===0?(a.width=`${100*l/m}%`,a.height=`${100*u/g}%`):this.setRotation(b,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:a}=tf(this.data.rect);let l,u;t%180===0?(l=100*r/n,u=100*a/s):(l=100*a/n,u=100*r/s),e.style.width=`${l}%`,e.style.height=`${u}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const r=s.detail[e],a=r[0],l=r.slice(1);s.target.style[n]=XD[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:XD[`${a}_rgb`](l)})};return Fn(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||n[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,r]of Object.entries(e)){const a=n[s];if(a){const l={detail:{[s]:r},target:t};a(l),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,r]=this.data.rect.map(C=>Math.fround(C));if(t.length===8){const[C,T,S,R]=t.subarray(2,6);if(s===C&&r===T&&e===S&&n===R)return}const{style:a}=this.container;let l;if(x(this,Rv)){const{borderColor:C,borderWidth:T}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const u=s-e,f=r-n,{svgFactory:m}=this,g=m.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0);const v=m.createElement("defs");g.append(v);const _=m.createElement("clipPath"),b=`clippath_${this.data.id}`;_.setAttribute("id",b),_.setAttribute("clipPathUnits","objectBoundingBox"),v.append(_);for(let C=2,T=t.length;C<T;C+=8){const S=t[C],R=t[C+1],B=t[C+2],D=t[C+3],N=m.createElement("rect"),I=(B-e)/u,F=(r-R)/f,z=(S-B)/u,U=(R-D)/f;N.setAttribute("x",I),N.setAttribute("y",F),N.setAttribute("width",z),N.setAttribute("height",U),_.append(N),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${F}" width="${z}" height="${U}"/>`)}x(this,Rv)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(g),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{data:t}=this,e=G(this,Lv,new IC({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Oi("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:a,exportValues:l}of s){if(r===-1||a===e)continue;const u=typeof l=="string"?l:null,f=document.querySelector(`[data-element-id="${a}"]`);if(f&&!Jg.has(f)){An(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:u,domElement:f})}return n}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,a=s.getAttribute("data-element-id");a!==e&&Jg.has(s)&&n.push({id:a,exportValue:r,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};hg=new WeakMap,Rv=new WeakMap,Lv=new WeakMap,qA=new WeakSet,NC=function(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:l,pageY:u}}}}=this;n==null||n.splice(0,4,...t);const{width:f,height:m}=tf(t);e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(a-t[3]+u)/a}%`,s===0?(e.width=`${100*f/r}%`,e.height=`${100*m/a}%`):this.setRotation(s)};let vs=G7;var Fo,bm,II,UI;class NI extends vs{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});W(this,Fo);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action),r=!0):e.attachment?(k(this,Fo,II).call(this,s,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(k(this,Fo,UI).call(this,s,e.setOCGState),r=!0):e.dest?(this._bindLink(s,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&k(this,Fo,bm).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),k(this,Fo,bm).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const a=s.get(r);a&&(e[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),k(this,Fo,bm).call(this)}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),k(this,Fo,bm).call(this),!this._fieldObjects){An('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var g;s==null||s();const{fields:r,refs:a,include:l}=n,u=[];if(r.length!==0||a.length!==0){const v=new Set(a);for(const _ of r){const b=this._fieldObjects[_]||[];for(const{id:C}of b)v.add(C)}for(const _ of Object.values(this._fieldObjects))for(const b of _)v.has(b.id)===l&&u.push(b)}else for(const v of Object.values(this._fieldObjects))u.push(...v);const f=this.annotationStorage,m=[];for(const v of u){const{id:_}=v;switch(m.push(_),v.type){case"text":{const C=v.defaultValue||"";f.setValue(_,{value:C});break}case"checkbox":case"radiobutton":{const C=v.defaultValue===v.exportValues;f.setValue(_,{value:C});break}case"combobox":case"listbox":{const C=v.defaultValue||"";f.setValue(_,{value:C});break}default:continue}const b=document.querySelector(`[data-element-id="${_}"]`);if(b){if(!Jg.has(b)){An(`_bindResetFormAction - element not allowed: ${_}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Fo=new WeakSet,bm=function(){this.container.setAttribute("data-internal-link","")},II=function(e,n,s=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,s),!1},k(this,Fo,bm).call(this)},UI=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),k(this,Fo,bm).call(this)};class Qet extends vs{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class u0 extends vs{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Na.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,r){n.includes("mouse")?t.addEventListener(n,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(n,a=>{var l;if(n==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a)}}))})}_setEventListeners(t,e,n,s){var r,a,l;for(const[u,f]of n)(f==="Action"||(r=this.data.actions)!=null&&r[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,u,f,s),f==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Le.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||ket,r=t.style;let a;const l=2,u=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-l),m=Math.round(f/(t5*s))||1,g=f/m;a=Math.min(s,u(g/t5))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(s,u(f/t5))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=Le.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Xet extends u0{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=n),r.setValue(a.id,{[s]:n})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let l=a.value||"";const u=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;u&&l.length>u&&(l=l.slice(0,u));let f=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const m={userValue:l,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",f??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Jg.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Qx,this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",v=>{t.setValue(e,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",v=>{const _=this.data.defaultFieldValue??"";n.value=m.userValue=_,m.formattedValue=null});let g=v=>{const{formattedValue:_}=m;_!=null&&(v.target.value=_),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",_=>{var C;if(m.focused)return;const{target:b}=_;m.userValue&&(b.value=m.userValue),m.lastCommittedValue=b.value,m.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const b={value(C){m.userValue=C.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),C.target.value=m.userValue},formattedValue(C){const{formattedValue:T}=C.detail;m.formattedValue=T,T!=null&&C.target!==document.activeElement&&(C.target.value=T),t.setValue(e,{formattedValue:T})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var B;const{charLimit:T}=C.detail,{target:S}=C;if(T===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",T);let R=m.userValue;!R||R.length<=T||(R=R.slice(0,T),S.value=m.userValue=R,t.setValue(e,{value:R}),(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(b,_)}),n.addEventListener("keydown",_=>{var T;m.commitKey=1;let b=-1;if(_.key==="Escape"?b=0:_.key==="Enter"&&!this.data.multiLine?b=2:_.key==="Tab"&&(m.commitKey=3),b===-1)return;const{value:C}=_.target;m.lastCommittedValue!==C&&(m.lastCommittedValue=C,m.userValue=C,(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:b,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const v=g;g=null,n.addEventListener("blur",_=>{var C,T;if(!m.focused||!_.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(m.focused=!1);const{value:b}=_.target;m.userValue=b,m.lastCommittedValue!==b&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:m.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}})),v(_)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",_=>{var N;m.lastCommittedValue=null;const{data:b,target:C}=_,{value:T,selectionStart:S,selectionEnd:R}=C;let B=S,D=R;switch(_.inputType){case"deleteWordBackward":{const I=T.substring(0,S).match(/\w*[^\w]*$/);I&&(B-=I[0].length);break}case"deleteWordForward":{const I=T.substring(S).match(/^[^\w]*\w*/);I&&(D+=I[0].length);break}case"deleteContentBackward":S===R&&(B-=1);break;case"deleteContentForward":S===R&&(D+=1);break}_.preventDefault(),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:b||"",willCommit:!1,selStart:B,selEnd:D}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing=`calc(${_}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class jet extends u0{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class qet extends u0{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Jg.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Qx,r.addEventListener("change",a=>{const{name:l,checked:u}=a.target;for(const f of this._getElementsByName(l,n)){const m=u&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(n,{value:u})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue||"Off";a.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const l={value(u){u.target.checked=u.detail.value!=="Off",t.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class PI extends u0{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const a of this._getElementsByName(e.fieldName,n))t.setValue(a.id,{value:!1});const r=document.createElement("input");if(Jg.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=Qx,r.addEventListener("change",a=>{const{name:l,checked:u}=a.target;for(const f of this._getElementsByName(l,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:u})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue;a.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const u={value:f=>{const m=a===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const v=m&&g.id===n;g.domElement&&(g.domElement.checked=v),t.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Yet extends NI{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class Wet extends u0{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Jg.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Qx;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",m=>{const g=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===g});for(const m of this.data.options){const g=document.createElement("option");g.textContent=m.displayValue,g.value=m.exportValue,n.value.includes(m.exportValue)&&(g.setAttribute("selected",!0),r=!1),s.append(g)}let a=null;if(r){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),s.prepend(m),a=()=>{m.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const l=m=>{const g=m?"value":"textContent",{options:v,multiple:_}=s;return _?Array.prototype.filter.call(v,b=>b.selected).map(b=>b[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let u=l(!1);const f=m=>{const g=m.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",m=>{const g={value(v){a==null||a();const _=v.detail.value,b=new Set(Array.isArray(_)?_:[_]);for(const C of s.options)C.selected=b.has(C.value);t.setValue(e,{value:l(!0)}),u=l(!1)},multipleSelection(v){s.multiple=!0},remove(v){const _=s.options,b=v.detail.remove;_[b].selected=!1,s.remove(b),_.length>0&&Array.prototype.findIndex.call(_,T=>T.selected)===-1&&(_[0].selected=!0),t.setValue(e,{value:l(!0),items:f(v)}),u=l(!1)},clear(v){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),u=l(!1)},insert(v){const{index:_,displayValue:b,exportValue:C}=v.detail.insert,T=s.children[_],S=document.createElement("option");S.textContent=b,S.value=C,T?T.before(S):s.append(S),t.setValue(e,{value:l(!0),items:f(v)}),u=l(!1)},items(v){const{items:_}=v.detail;for(;s.length!==0;)s.remove(0);for(const b of _){const{displayValue:C,exportValue:T}=b,S=document.createElement("option");S.textContent=C,S.value=T,s.append(S)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:l(!0),items:f(v)}),u=l(!1)},indices(v){const _=new Set(v.detail.indices);for(const b of v.target.options)b.selected=_.has(b.index);t.setValue(e,{value:l(!0)}),u=l(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,m)}),s.addEventListener("input",m=>{var _;const g=l(!0),v=l(!1);t.setValue(e,{value:g}),m.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:u,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):s.addEventListener("input",function(m){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class IC extends vs{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:vs._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Ket({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${M7}${n}`).join(",")),this.container}}var Dv,NE,IE,Bv,fg,ss,Oh,Ov,YA,WA,Nv,Nh,gc,Ih,KA,Uh,JA,dg,pg,Ai,Z4,UC,FI,HI,zI,GI,$4,t3,PC;class Ket{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:r,contentsObj:a,richText:l,parent:u,rect:f,parentRect:m,open:g}){W(this,Ai);W(this,Dv,k(this,Ai,zI).bind(this));W(this,NE,k(this,Ai,PC).bind(this));W(this,IE,k(this,Ai,t3).bind(this));W(this,Bv,k(this,Ai,$4).bind(this));W(this,fg,null);W(this,ss,null);W(this,Oh,null);W(this,Ov,null);W(this,YA,null);W(this,WA,null);W(this,Nv,null);W(this,Nh,!1);W(this,gc,null);W(this,Ih,null);W(this,KA,null);W(this,Uh,null);W(this,JA,null);W(this,dg,null);W(this,pg,!1);var v;G(this,ss,t),G(this,JA,s),G(this,Oh,a),G(this,Uh,l),G(this,WA,u),G(this,fg,e),G(this,KA,f),G(this,Nv,m),G(this,YA,n),G(this,Ov,w7.toDateObject(r)),this.trigger=n.flatMap(_=>_.getElementsToTriggerPopup());for(const _ of this.trigger)_.addEventListener("click",x(this,Bv)),_.addEventListener("mouseenter",x(this,IE)),_.addEventListener("mouseleave",x(this,NE)),_.classList.add("popupTriggerArea");for(const _ of n)(v=_.container)==null||v.addEventListener("keydown",x(this,Dv));x(this,ss).hidden=!0,g&&k(this,Ai,$4).call(this)}render(){if(x(this,gc))return;const t=G(this,gc,document.createElement("div"));if(t.className="popup",x(this,fg)){const r=t.style.outlineColor=Le.makeHexColor(...x(this,fg));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=Le.makeHexColor(...x(this,fg).map(l=>Math.floor(.7*(255-l)+l)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=x(this,JA),t.append(e),x(this,Ov)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:x(this,Ov).valueOf()})),e.append(r)}const s=x(this,Ai,Z4);if(s)OI.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(x(this,Oh));t.append(r)}x(this,ss).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const l=s[r];n.append(document.createTextNode(l)),r<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;x(this,dg)||G(this,dg,{contentsObj:x(this,Oh),richText:x(this,Uh)}),t&&G(this,Ih,null),e&&(G(this,Uh,k(this,Ai,HI).call(this,e)),G(this,Oh,null)),(n=x(this,gc))==null||n.remove(),G(this,gc,null)}resetEdited(){var t;x(this,dg)&&({contentsObj:Sa(this,Oh)._,richText:Sa(this,Uh)._}=x(this,dg),G(this,dg,null),(t=x(this,gc))==null||t.remove(),G(this,gc,null),G(this,Ih,null))}forceHide(){G(this,pg,this.isVisible),x(this,pg)&&(x(this,ss).hidden=!0)}maybeShow(){x(this,pg)&&(x(this,gc)||k(this,Ai,t3).call(this),G(this,pg,!1),x(this,ss).hidden=!1)}get isVisible(){return x(this,ss).hidden===!1}}Dv=new WeakMap,NE=new WeakMap,IE=new WeakMap,Bv=new WeakMap,fg=new WeakMap,ss=new WeakMap,Oh=new WeakMap,Ov=new WeakMap,YA=new WeakMap,WA=new WeakMap,Nv=new WeakMap,Nh=new WeakMap,gc=new WeakMap,Ih=new WeakMap,KA=new WeakMap,Uh=new WeakMap,JA=new WeakMap,dg=new WeakMap,pg=new WeakMap,Ai=new WeakSet,Z4=function(){const t=x(this,Uh),e=x(this,Oh);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&x(this,Uh).html||null},UC=function(){var t,e,n;return((n=(e=(t=x(this,Ai,Z4))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},FI=function(){var t,e,n;return((n=(e=(t=x(this,Ai,Z4))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},HI=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:x(this,Ai,FI),fontSize:x(this,Ai,UC)?`calc(${x(this,Ai,UC)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return n},zI=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&x(this,Nh))&&k(this,Ai,$4).call(this)},GI=function(){if(x(this,Ih)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:r}}}=x(this,WA);let a=!!x(this,Nv),l=a?x(this,Nv):x(this,KA);for(const b of x(this,YA))if(!l||Le.intersect(b.data.rect,l)!==null){l=b.data.rect,a=!0;break}const u=Le.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),m=a?l[2]-l[0]+5:0,g=u[0]+m,v=u[1];G(this,Ih,[100*(g-s)/e,100*(v-r)/n]);const{style:_}=x(this,ss);_.left=`${x(this,Ih)[0]}%`,_.top=`${x(this,Ih)[1]}%`},$4=function(){G(this,Nh,!x(this,Nh)),x(this,Nh)?(k(this,Ai,t3).call(this),x(this,ss).addEventListener("click",x(this,Bv)),x(this,ss).addEventListener("keydown",x(this,Dv))):(k(this,Ai,PC).call(this),x(this,ss).removeEventListener("click",x(this,Bv)),x(this,ss).removeEventListener("keydown",x(this,Dv)))},t3=function(){x(this,gc)||this.render(),this.isVisible?x(this,Nh)&&x(this,ss).classList.add("focused"):(k(this,Ai,GI).call(this),x(this,ss).hidden=!1,x(this,ss).style.zIndex=parseInt(x(this,ss).style.zIndex)+1e3)},PC=function(){x(this,ss).classList.remove("focused"),!(x(this,Nh)||!this.isVisible)&&(x(this,ss).hidden=!0,x(this,ss).style.zIndex=parseInt(x(this,ss).style.zIndex)-1e3)};class kI extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=dn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ZA;class Jet extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,ZA,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:s}=tf(e.rect),r=this.svgFactory.create(n,s,!0),a=G(this,ZA,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,ZA)}addHighlightArea(){this.container.classList.add("highlightArea")}}ZA=new WeakMap;var $A;class Zet extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,$A,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:s}=tf(e.rect),r=this.svgFactory.create(n,s,!0),a=e.borderStyle.width,l=G(this,$A,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",n-a),l.setAttribute("height",s-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,$A)}addHighlightArea(){this.container.classList.add("highlightArea")}}$A=new WeakMap;var tx;class $et extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,tx,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:s}=tf(e.rect),r=this.svgFactory.create(n,s,!0),a=e.borderStyle.width,l=G(this,tx,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",s/2),l.setAttribute("rx",n/2-a/2),l.setAttribute("ry",s/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,tx)}addHighlightArea(){this.container.classList.add("highlightArea")}}tx=new WeakMap;var ex;class VI extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,ex,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:r}}=this;if(!n)return this.container;const{width:a,height:l}=tf(e),u=this.svgFactory.create(a,l,!0);let f=[];for(let g=0,v=n.length;g<v;g+=2){const _=n[g]-e[0],b=e[3]-n[g+1];f.push(`${_},${b}`)}f=f.join(" ");const m=G(this,ex,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",f),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),u.append(m),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return x(this,ex)}addHighlightArea(){this.container.classList.add("highlightArea")}}ex=new WeakMap;class tnt extends VI{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ent extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var nx;class U7 extends vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});W(this,nx,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?dn.HIGHLIGHT:dn.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:n,borderStyle:s,popupRef:r}}=this,{width:a,height:l}=tf(e),u=this.svgFactory.create(a,l,!0);for(const f of n){let m=[];for(let v=0,_=f.length;v<_;v+=2){const b=f[v]-e[0],C=e[3]-f[v+1];m.push(`${b},${C}`)}m=m.join(" ");const g=this.svgFactory.createElement(this.svgElementName);x(this,nx).push(g),g.setAttribute("points",m),g.setAttribute("stroke-width",s.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),u.append(g)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return x(this,nx)}addHighlightArea(){this.container.classList.add("highlightArea")}}nx=new WeakMap;class QI extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=dn.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class nnt extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class int extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class snt extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class XI extends vs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=dn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ix,sx,FC;class rnt extends vs{constructor(e){var s;super(e,{isRenderable:!0});W(this,sx);W(this,ix,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",k(this,sx,FC).bind(this)),G(this,ix,s);const{isMac:r}=Na.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&k(this,sx,FC).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return x(this,ix)}addHighlightArea(){this.container.classList.add("highlightArea")}}ix=new WeakMap,sx=new WeakSet,FC=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var rx,mg,gg,ax,$g,jI,HC,h9;let ant=(h9=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:a,structTreeLayer:l}){W(this,$g);W(this,rx,null);W(this,mg,null);W(this,gg,new Map);W(this,ax,null);this.div=t,G(this,rx,e),G(this,mg,n),G(this,ax,l||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return x(this,gg).size>0}async render(t){var a;const{annotations:e}=t,n=this.div;Wg(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new I7,annotationStorage:t.annotationStorage||new L7,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const u=l.annotationType===ks.POPUP;if(u){const g=s.get(l.id);if(!g)continue;r.elements=g}else{const{width:g,height:v}=tf(l.rect);if(g<=0||v<=0)continue}r.data=l;const f=Vet.create(r);if(!f.isRenderable)continue;if(!u&&l.popupRef){const g=s.get(l.popupRef);g?g.push(f):s.set(l.popupRef,[f])}const m=f.render();l.hidden&&(m.style.visibility="hidden"),await k(this,$g,jI).call(this,m,l.id),f._isEditable&&(x(this,gg).set(f.data.id,f),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(f))}k(this,$g,HC).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Wg(e,{rotation:t.rotation}),k(this,$g,HC).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(x(this,gg).values())}getEditableAnnotation(t){return x(this,gg).get(t)}},rx=new WeakMap,mg=new WeakMap,gg=new WeakMap,ax=new WeakMap,$g=new WeakSet,jI=async function(t,e){var a,l;const n=t.firstChild||t,s=n.id=`${M7}${e}`,r=await((a=x(this,ax))==null?void 0:a.getAriaAttributes(s));if(r)for(const[u,f]of r)n.setAttribute(u,f);this.div.append(t),(l=x(this,rx))==null||l.moveElementInDOM(this.div,t,n,!1)},HC=function(){if(!x(this,mg))return;const t=this.div;for(const[e,n]of x(this,mg)){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):s.append(n)}x(this,mg).clear()},h9);const E4=/\r\n?|\n/g;var vc,Do,ox,vg,Bo,Ls,qI,YI,WI,e3,nf,n3,i3,KI,GC,JI;const Ci=class Ci extends di{constructor(e){super({...e,name:"freeTextEditor"});W(this,Ls);W(this,vc);W(this,Do,"");W(this,ox,`${this.id}-editor`);W(this,vg,null);W(this,Bo);G(this,vc,e.color||Ci._defaultColor||di._defaultLineColor),G(this,Bo,e.fontSize||Ci._defaultFontSize)}static get _keyboardManager(){const e=Ci.prototype,n=a=>a.isEmpty(),s=Kg.TRANSLATE_SMALL,r=Kg.TRANSLATE_BIG;return Fn(this,"_keyboardManager",new Vx([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){di.initialize(e,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Ze.FREETEXT_SIZE:Ci._defaultFontSize=n;break;case Ze.FREETEXT_COLOR:Ci._defaultColor=n;break}}updateParams(e,n){switch(e){case Ze.FREETEXT_SIZE:k(this,Ls,qI).call(this,n);break;case Ze.FREETEXT_COLOR:k(this,Ls,YI).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ze.FREETEXT_SIZE,Ci._defaultFontSize],[Ze.FREETEXT_COLOR,Ci._defaultColor||di._defaultLineColor]]}get propertiesToUpdate(){return[[Ze.FREETEXT_SIZE,x(this,Bo)],[Ze.FREETEXT_COLOR,x(this,vc)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ci._internalPadding*e,-(Ci._internalPadding+x(this,Bo))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(dn.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),G(this,vg,new AbortController);const e=this._uiManager.combinedSignal(x(this,vg));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",x(this,ox)),this._isDraggable=!0,(e=x(this,vg))==null||e.abort(),G(this,vg,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=x(this,Do),n=G(this,Do,k(this,Ls,WI).call(this).trimEnd());if(e===n)return;const s=r=>{if(G(this,Do,r),!r){this.remove();return}k(this,Ls,i3).call(this),this._uiManager.rebuild(this),k(this,Ls,e3).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),k(this,Ls,e3).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ci._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",x(this,ox)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${x(this,Bo)}px * var(--scale-factor))`,s.color=x(this,vc),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),gE(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,f]=this.getInitialTranslation();[u,f]=this.pageTranslationToScreen(u,f);const[m,g]=this.pageDimensions,[v,_]=this.pageTranslation;let b,C;switch(this.rotation){case 0:b=e+(l[0]-v)/m,C=n+this.height-(l[1]-_)/g;break;case 90:b=e+(l[0]-v)/m,C=n-(l[1]-_)/g,[u,f]=[f,-u];break;case 180:b=e-this.width+(l[0]-v)/m,C=n-(l[1]-_)/g,[u,f]=[-u,-f];break;case 270:b=e+(l[0]-v-this.height*g)/m,C=n+(l[1]-_-this.width*m)/g,[u,f]=[-f,u];break}this.setAt(b*r,C*a,u,f)}else this.setAt(e*r,n*a,this.width*r,this.height*a);k(this,Ls,i3).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var b,C,T;const n=e.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=k(b=Ci,nf,GC).call(b,n.getData("text")||"").replaceAll(E4,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:u,startOffset:f}=l,m=[],g=[];if(u.nodeType===Node.TEXT_NODE){const S=u.parentElement;if(g.push(u.nodeValue.slice(f).replaceAll(E4,"")),S!==this.editorDiv){let R=m;for(const B of this.editorDiv.childNodes){if(B===S){R=g;continue}R.push(k(C=Ci,nf,n3).call(C,B))}}m.push(u.nodeValue.slice(0,f).replaceAll(E4,""))}else if(u===this.editorDiv){let S=m,R=0;for(const B of this.editorDiv.childNodes)R++===f&&(S=g),S.push(k(T=Ci,nf,n3).call(T,B))}G(this,Do,`${m.join(`
`)}${r}${g.join(`
`)}`),k(this,Ls,i3).call(this);const v=new Range;let _=m.reduce((S,R)=>S+R.length,0);for(const{firstChild:S}of this.editorDiv.childNodes)if(S.nodeType===Node.TEXT_NODE){const R=S.nodeValue.length;if(_<=R){v.setStart(S,_),v.setEnd(S,_);break}_-=R}a.removeAllRanges(),a.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,s){var l;let r=null;if(e instanceof kI){const{data:{defaultAppearanceData:{fontSize:u,fontColor:f},rect:m,rotation:g,id:v,popupRef:_},textContent:b,textPosition:C,parent:{page:{pageNumber:T}}}=e;if(!b||b.length===0)return null;r=e={annotationType:dn.FREETEXT,color:Array.from(f),fontSize:u,value:b.join(`
`),position:C,pageIndex:T-1,rect:m.slice(0),rotation:g,id:v,deleted:!1,popupRef:_}}const a=await super.deserialize(e,n,s);return G(a,Bo,e.fontSize),G(a,vc,Le.makeHexColor(...e.color)),G(a,Do,k(l=Ci,nf,GC).call(l,e.value)),a.annotationElementId=e.id||null,a._initialData=r,a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ci._internalPadding*this.parentScale,s=this.getRect(n,n),r=di._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:x(this,vc)),a={annotationType:dn.FREETEXT,color:r,fontSize:x(this,Bo),value:k(this,Ls,KI).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?a:this.annotationElementId&&!k(this,Ls,JI).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${x(this,Bo)}px * var(--scale-factor))`,s.color=x(this,vc),n.replaceChildren();for(const a of x(this,Do).split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),n.append(l)}const r=Ci._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:x(this,Do)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};vc=new WeakMap,Do=new WeakMap,ox=new WeakMap,vg=new WeakMap,Bo=new WeakMap,Ls=new WeakSet,qI=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-x(this,Bo))*this.parentScale),G(this,Bo,r),k(this,Ls,e3).call(this)},s=x(this,Bo);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},YI=function(e){const n=r=>{G(this,vc,this.editorDiv.style.color=r)},s=x(this,vc);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},WI=function(){var s;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(k(s=Ci,nf,n3).call(s,r)),n=r);return e.join(`
`)},e3=function(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,l=a.style.display,u=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()},nf=new WeakSet,n3=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(E4,"")},i3=function(){if(this.editorDiv.replaceChildren(),!!x(this,Do))for(const e of x(this,Do).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},KI=function(){return x(this,Do).replaceAll(""," ")},GC=function(e){return e.replaceAll(" ","")},JI=function(e){const{value:n,fontSize:s,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((l,u)=>l!==r[u])||e.pageIndex!==a},W(Ci,nf),Je(Ci,"_freeTextDefaultContent",""),Je(Ci,"_internalPadding",0),Je(Ci,"_defaultColor",null),Je(Ci,"_defaultFontSize",10),Je(Ci,"_type","freetext"),Je(Ci,"_editorType",dn.FREETEXT);let zC=Ci;class ZI{toSVGPath(){Oi("Abstract method `toSVGPath` must be implemented.")}get box(){Oi("Abstract getter `box` must be implemented.")}serialize(t,e){Oi("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Oi("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Oi("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Oo,yc,Iv,Uv,Lu,Mn,yg,_g,lx,cx,Pv,Fv,Ud,ux,UE,PE,Ys,S_,$I,tU,eU,nU,iU,sU;const bh=class bh{constructor({x:t,y:e},n,s,r,a,l=0){W(this,Ys);W(this,Oo);W(this,yc,[]);W(this,Iv);W(this,Uv);W(this,Lu,[]);W(this,Mn,new Float64Array(18));W(this,yg);W(this,_g);W(this,lx);W(this,cx);W(this,Pv);W(this,Fv);W(this,Ud,[]);G(this,Oo,n),G(this,Fv,r*s),G(this,Uv,a),x(this,Mn).set([NaN,NaN,NaN,NaN,t,e],6),G(this,Iv,l),G(this,cx,x(bh,ux)*s),G(this,lx,x(bh,PE)*s),G(this,Pv,s),x(this,Ud).push(t,e)}isEmpty(){return isNaN(x(this,Mn)[8])}add({x:t,y:e}){var U;G(this,yg,t),G(this,_g,e);const[n,s,r,a]=x(this,Oo);let[l,u,f,m]=x(this,Mn).subarray(8,12);const g=t-f,v=e-m,_=Math.hypot(g,v);if(_<x(this,lx))return!1;const b=_-x(this,cx),C=b/_,T=C*g,S=C*v;let R=l,B=u;l=f,u=m,f+=T,m+=S,(U=x(this,Ud))==null||U.push(t,e);const D=-S/b,N=T/b,I=D*x(this,Fv),F=N*x(this,Fv);return x(this,Mn).set(x(this,Mn).subarray(2,8),0),x(this,Mn).set([f+I,m+F],4),x(this,Mn).set(x(this,Mn).subarray(14,18),12),x(this,Mn).set([f-I,m-F],16),isNaN(x(this,Mn)[6])?(x(this,Lu).length===0&&(x(this,Mn).set([l+I,u+F],2),x(this,Lu).push(NaN,NaN,NaN,NaN,(l+I-n)/r,(u+F-s)/a),x(this,Mn).set([l-I,u-F],14),x(this,yc).push(NaN,NaN,NaN,NaN,(l-I-n)/r,(u-F-s)/a)),x(this,Mn).set([R,B,l,u,f,m],6),!this.isEmpty()):(x(this,Mn).set([R,B,l,u,f,m],6),Math.abs(Math.atan2(B-u,R-l)-Math.atan2(S,T))<Math.PI/2?([l,u,f,m]=x(this,Mn).subarray(2,6),x(this,Lu).push(NaN,NaN,NaN,NaN,((l+f)/2-n)/r,((u+m)/2-s)/a),[l,u,R,B]=x(this,Mn).subarray(14,18),x(this,yc).push(NaN,NaN,NaN,NaN,((R+l)/2-n)/r,((B+u)/2-s)/a),!0):([R,B,l,u,f,m]=x(this,Mn).subarray(0,6),x(this,Lu).push(((R+5*l)/6-n)/r,((B+5*u)/6-s)/a,((5*l+f)/6-n)/r,((5*u+m)/6-s)/a,((l+f)/2-n)/r,((u+m)/2-s)/a),[f,m,l,u,R,B]=x(this,Mn).subarray(12,18),x(this,yc).push(((R+5*l)/6-n)/r,((B+5*u)/6-s)/a,((5*l+f)/6-n)/r,((5*u+m)/6-s)/a,((l+f)/2-n)/r,((u+m)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=x(this,Lu),e=x(this,yc);if(isNaN(x(this,Mn)[6])&&!this.isEmpty())return k(this,Ys,$I).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);k(this,Ys,eU).call(this,n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return k(this,Ys,tU).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,s,r,a){return new rU(t,e,n,s,r,a)}getOutlines(){var g;const t=x(this,Lu),e=x(this,yc),n=x(this,Mn),[s,r,a,l]=x(this,Oo),u=new Float64Array((((g=x(this,Ud))==null?void 0:g.length)??0)+2);for(let v=0,_=u.length-2;v<_;v+=2)u[v]=(x(this,Ud)[v]-s)/a,u[v+1]=(x(this,Ud)[v+1]-r)/l;if(u[u.length-2]=(x(this,yg)-s)/a,u[u.length-1]=(x(this,_g)-r)/l,isNaN(n[6])&&!this.isEmpty())return k(this,Ys,nU).call(this,u);const f=new Float64Array(x(this,Lu).length+24+x(this,yc).length);let m=t.length;for(let v=0;v<m;v+=2){if(isNaN(t[v])){f[v]=f[v+1]=NaN;continue}f[v]=t[v],f[v+1]=t[v+1]}m=k(this,Ys,sU).call(this,f,m);for(let v=e.length-6;v>=6;v-=6)for(let _=0;_<6;_+=2){if(isNaN(e[v+_])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[v+_],f[m+1]=e[v+_+1],m+=2}return k(this,Ys,iU).call(this,f,m),this.newFreeDrawOutline(f,u,x(this,Oo),x(this,Pv),x(this,Iv),x(this,Uv))}};Oo=new WeakMap,yc=new WeakMap,Iv=new WeakMap,Uv=new WeakMap,Lu=new WeakMap,Mn=new WeakMap,yg=new WeakMap,_g=new WeakMap,lx=new WeakMap,cx=new WeakMap,Pv=new WeakMap,Fv=new WeakMap,Ud=new WeakMap,ux=new WeakMap,UE=new WeakMap,PE=new WeakMap,Ys=new WeakSet,S_=function(){const t=x(this,Mn).subarray(4,6),e=x(this,Mn).subarray(16,18),[n,s,r,a]=x(this,Oo);return[(x(this,yg)+(t[0]-e[0])/2-n)/r,(x(this,_g)+(t[1]-e[1])/2-s)/a,(x(this,yg)+(e[0]-t[0])/2-n)/r,(x(this,_g)+(e[1]-t[1])/2-s)/a]},$I=function(){const[t,e,n,s]=x(this,Oo),[r,a,l,u]=k(this,Ys,S_).call(this);return`M${(x(this,Mn)[2]-t)/n} ${(x(this,Mn)[3]-e)/s} L${(x(this,Mn)[4]-t)/n} ${(x(this,Mn)[5]-e)/s} L${r} ${a} L${l} ${u} L${(x(this,Mn)[16]-t)/n} ${(x(this,Mn)[17]-e)/s} L${(x(this,Mn)[14]-t)/n} ${(x(this,Mn)[15]-e)/s} Z`},tU=function(t){const e=x(this,yc);t.push(`L${e[4]} ${e[5]} Z`)},eU=function(t){const[e,n,s,r]=x(this,Oo),a=x(this,Mn).subarray(4,6),l=x(this,Mn).subarray(16,18),[u,f,m,g]=k(this,Ys,S_).call(this);t.push(`L${(a[0]-e)/s} ${(a[1]-n)/r} L${u} ${f} L${m} ${g} L${(l[0]-e)/s} ${(l[1]-n)/r}`)},nU=function(t){const e=x(this,Mn),[n,s,r,a]=x(this,Oo),[l,u,f,m]=k(this,Ys,S_).call(this),g=new Float64Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-s)/a,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-s)/a,NaN,NaN,NaN,NaN,l,u,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-s)/a,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-s)/a],0),this.newFreeDrawOutline(g,t,x(this,Oo),x(this,Pv),x(this,Iv),x(this,Uv))},iU=function(t,e){const n=x(this,yc);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},sU=function(t,e){const n=x(this,Mn).subarray(4,6),s=x(this,Mn).subarray(16,18),[r,a,l,u]=x(this,Oo),[f,m,g,v]=k(this,Ys,S_).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/l,(n[1]-a)/u,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-a)/u],e),e+=24},W(bh,ux,8),W(bh,UE,2),W(bh,PE,x(bh,ux)+x(bh,UE));let yE=bh;var Hv,Ag,Ph,hx,No,fx,ms,ro,E_,M_,aU;class rU extends ZI{constructor(e,n,s,r,a,l){super();W(this,ro);W(this,Hv);W(this,Ag,null);W(this,Ph);W(this,hx);W(this,No);W(this,fx);W(this,ms);G(this,ms,e),G(this,No,n),G(this,Hv,s),G(this,fx,r),G(this,Ph,a),G(this,hx,l),k(this,ro,aU).call(this,l);const{x:u,y:f,width:m,height:g}=x(this,Ag);for(let v=0,_=e.length;v<_;v+=2)e[v]=(e[v]-u)/m,e[v+1]=(e[v+1]-f)/g;for(let v=0,_=n.length;v<_;v+=2)n[v]=(n[v]-u)/m,n[v+1]=(n[v+1]-f)/g}toSVGPath(){const e=[`M${x(this,ms)[4]} ${x(this,ms)[5]}`];for(let n=6,s=x(this,ms).length;n<s;n+=6){if(isNaN(x(this,ms)[n])){e.push(`L${x(this,ms)[n+4]} ${x(this,ms)[n+5]}`);continue}e.push(`C${x(this,ms)[n]} ${x(this,ms)[n+1]} ${x(this,ms)[n+2]} ${x(this,ms)[n+3]} ${x(this,ms)[n+4]} ${x(this,ms)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,s,r],a){const l=s-e,u=r-n;let f,m;switch(a){case 0:f=k(this,ro,E_).call(this,x(this,ms),e,r,l,-u),m=k(this,ro,E_).call(this,x(this,No),e,r,l,-u);break;case 90:f=k(this,ro,M_).call(this,x(this,ms),e,n,l,u),m=k(this,ro,M_).call(this,x(this,No),e,n,l,u);break;case 180:f=k(this,ro,E_).call(this,x(this,ms),s,n,-l,u),m=k(this,ro,E_).call(this,x(this,No),s,n,-l,u);break;case 270:f=k(this,ro,M_).call(this,x(this,ms),s,r,-l,-u),m=k(this,ro,M_).call(this,x(this,No),s,r,-l,-u);break}return{outline:Array.from(f),points:[Array.from(m)]}}get box(){return x(this,Ag)}newOutliner(e,n,s,r,a,l=0){return new yE(e,n,s,r,a,l)}getNewOutline(e,n){const{x:s,y:r,width:a,height:l}=x(this,Ag),[u,f,m,g]=x(this,Hv),v=a*m,_=l*g,b=s*m+u,C=r*g+f,T=this.newOutliner({x:x(this,No)[0]*v+b,y:x(this,No)[1]*_+C},x(this,Hv),x(this,fx),e,x(this,hx),n??x(this,Ph));for(let S=2;S<x(this,No).length;S+=2)T.add({x:x(this,No)[S]*v+b,y:x(this,No)[S+1]*_+C});return T.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Hv=new WeakMap,Ag=new WeakMap,Ph=new WeakMap,hx=new WeakMap,No=new WeakMap,fx=new WeakMap,ms=new WeakMap,ro=new WeakSet,E_=function(e,n,s,r,a){const l=new Float64Array(e.length);for(let u=0,f=e.length;u<f;u+=2)l[u]=n+e[u]*r,l[u+1]=s+e[u+1]*a;return l},M_=function(e,n,s,r,a){const l=new Float64Array(e.length);for(let u=0,f=e.length;u<f;u+=2)l[u]=n+e[u+1]*r,l[u+1]=s+e[u]*a;return l},aU=function(e){const n=x(this,ms);let s=n[4],r=n[5],a=s,l=r,u=s,f=r,m=s,g=r;const v=e?Math.max:Math.min;for(let S=6,R=n.length;S<R;S+=6){if(isNaN(n[S]))a=Math.min(a,n[S+4]),l=Math.min(l,n[S+5]),u=Math.max(u,n[S+4]),f=Math.max(f,n[S+5]),g<n[S+5]?(m=n[S+4],g=n[S+5]):g===n[S+5]&&(m=v(m,n[S+4]));else{const B=Le.bezierBoundingBox(s,r,...n.slice(S,S+6));a=Math.min(a,B[0]),l=Math.min(l,B[1]),u=Math.max(u,B[2]),f=Math.max(f,B[3]),g<B[3]?(m=B[2],g=B[3]):g===B[3]&&(m=v(m,B[2]))}s=n[S+4],r=n[S+5]}const _=a-x(this,Ph),b=l-x(this,Ph),C=u-a+2*x(this,Ph),T=f-l+2*x(this,Ph);G(this,Ag,{x:_,y:b,width:C,height:T,lastPoint:[m,g]})};var dx,Pd,_c,Ua,oU,s3,lU,cU,kC;class jD{constructor(t,e=0,n=0,s=!0){W(this,Ua);W(this,dx);W(this,Pd,[]);W(this,_c,[]);let r=1/0,a=-1/0,l=1/0,u=-1/0;const f=10**-4;for(const{x:T,y:S,width:R,height:B}of t){const D=Math.floor((T-e)/f)*f,N=Math.ceil((T+R+e)/f)*f,I=Math.floor((S-e)/f)*f,F=Math.ceil((S+B+e)/f)*f,z=[D,I,F,!0],U=[N,I,F,!1];x(this,Pd).push(z,U),r=Math.min(r,D),a=Math.max(a,N),l=Math.min(l,I),u=Math.max(u,F)}const m=a-r+2*n,g=u-l+2*n,v=r-n,_=l-n,b=x(this,Pd).at(s?-1:-2),C=[b[0],b[2]];for(const T of x(this,Pd)){const[S,R,B]=T;T[0]=(S-v)/m,T[1]=(R-_)/g,T[2]=(B-_)/g}G(this,dx,{x:v,y:_,width:m,height:g,lastPoint:C})}getOutlines(){x(this,Pd).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of x(this,Pd))e[3]?(t.push(...k(this,Ua,kC).call(this,e)),k(this,Ua,lU).call(this,e)):(k(this,Ua,cU).call(this,e),t.push(...k(this,Ua,kC).call(this,e)));return k(this,Ua,oU).call(this,t)}}dx=new WeakMap,Pd=new WeakMap,_c=new WeakMap,Ua=new WeakSet,oU=function(t){const e=[],n=new Set;for(const a of t){const[l,u,f]=a;e.push([l,u,a],[l,f,a])}e.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=e.length;a<l;a+=2){const u=e[a][2],f=e[a+1][2];u.push(f),f.push(u),n.add(u),n.add(f)}const s=[];let r;for(;n.size>0;){const a=n.values().next().value;let[l,u,f,m,g]=a;n.delete(a);let v=l,_=u;for(r=[l,f],s.push(r);;){let b;if(n.has(m))b=m;else if(n.has(g))b=g;else break;n.delete(b),[l,u,f,m,g]=b,v!==l&&(r.push(v,_,l,_===u?u:f),v=l),_=_===u?f:u}r.push(v,_)}return new ont(s,x(this,dx))},s3=function(t){const e=x(this,_c);let n=0,s=e.length-1;for(;n<=s;){const r=n+s>>1,a=e[r][0];if(a===t)return r;a<t?n=r+1:s=r-1}return s+1},lU=function([,t,e]){const n=k(this,Ua,s3).call(this,t);x(this,_c).splice(n,0,[t,e])},cU=function([,t,e]){const n=k(this,Ua,s3).call(this,t);for(let s=n;s<x(this,_c).length;s++){const[r,a]=x(this,_c)[s];if(r!==t)break;if(r===t&&a===e){x(this,_c).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[r,a]=x(this,_c)[s];if(r!==t)break;if(r===t&&a===e){x(this,_c).splice(s,1);return}}},kC=function(t){const[e,n,s]=t,r=[[e,n,s]],a=k(this,Ua,s3).call(this,s);for(let l=0;l<a;l++){const[u,f]=x(this,_c)[l];for(let m=0,g=r.length;m<g;m++){const[,v,_]=r[m];if(!(f<=v||_<=u)){if(v>=u){if(_>f)r[m][1]=f;else{if(g===1)return[];r.splice(m,1),m--,g--}continue}r[m][2]=u,_>f&&r.push([e,f,_])}}}return r};var px,zv;class ont extends ZI{constructor(e,n){super();W(this,px);W(this,zv);G(this,zv,e),G(this,px,n)}toSVGPath(){const e=[];for(const n of x(this,zv)){let[s,r]=n;e.push(`M${s} ${r}`);for(let a=2;a<n.length;a+=2){const l=n[a],u=n[a+1];l===s?(e.push(`V${u}`),r=u):u===r&&(e.push(`H${l}`),s=l)}e.push("Z")}return e.join(" ")}serialize([e,n,s,r],a){const l=[],u=s-e,f=r-n;for(const m of x(this,zv)){const g=new Array(m.length);for(let v=0;v<m.length;v+=2)g[v]=e+m[v]*u,g[v+1]=r-m[v+1]*f;l.push(g)}return l}get box(){return x(this,px)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}px=new WeakMap,zv=new WeakMap;class VC extends yE{newFreeDrawOutline(t,e,n,s,r,a){return new lnt(t,e,n,s,r,a)}get classNamesForDrawing(){return["highlight","free"]}}class lnt extends rU{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,e,n,s,r,a=0){return new VC(t,e,n,s,r,a)}}var Ac,xg,Gv,Qs,mx,kv,gx,vx,Fd,xc,Vv,yx,_i,QC,XC,jC,Sm,uU,dd;const $a=class $a{constructor({editor:t=null,uiManager:e=null}){W(this,_i);W(this,Ac,null);W(this,xg,null);W(this,Gv);W(this,Qs,null);W(this,mx,!1);W(this,kv,!1);W(this,gx,null);W(this,vx);W(this,Fd,null);W(this,xc,null);W(this,Vv);var n;t?(G(this,kv,!1),G(this,Vv,Ze.HIGHLIGHT_COLOR),G(this,gx,t)):(G(this,kv,!0),G(this,Vv,Ze.HIGHLIGHT_DEFAULT_COLOR)),G(this,xc,(t==null?void 0:t._uiManager)||e),G(this,vx,x(this,xc)._eventBus),G(this,Gv,(t==null?void 0:t.color)||((n=x(this,xc))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),x($a,yx)||G($a,yx,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Fn(this,"_keyboardManager",new Vx([[["Escape","mac+Escape"],$a.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],$a.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],$a.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],$a.prototype._moveToPrevious],[["Home","mac+Home"],$a.prototype._moveToBeginning],[["End","mac+End"],$a.prototype._moveToEnd]]))}renderButton(){const t=G(this,Ac,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=x(this,xc)._signal;t.addEventListener("click",k(this,_i,Sm).bind(this),{signal:e}),t.addEventListener("keydown",k(this,_i,jC).bind(this),{signal:e});const n=G(this,xg,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=x(this,Gv),t.append(n),t}renderMainDropdown(){const t=G(this,Qs,k(this,_i,QC).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===x(this,Ac)){k(this,_i,Sm).call(this,t);return}const e=t.target.getAttribute("data-color");e&&k(this,_i,XC).call(this,e,t)}_moveToNext(t){var e,n;if(!x(this,_i,dd)){k(this,_i,Sm).call(this,t);return}if(t.target===x(this,Ac)){(e=x(this,Qs).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=x(this,Qs))==null?void 0:e.firstChild)||t.target===x(this,Ac)){x(this,_i,dd)&&this._hideDropdownFromKeyboard();return}x(this,_i,dd)||k(this,_i,Sm).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!x(this,_i,dd)){k(this,_i,Sm).call(this,t);return}(e=x(this,Qs).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!x(this,_i,dd)){k(this,_i,Sm).call(this,t);return}(e=x(this,Qs).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=x(this,Qs))==null||t.classList.add("hidden"),(e=x(this,Fd))==null||e.abort(),G(this,Fd,null)}_hideDropdownFromKeyboard(){var t;if(!x(this,kv)){if(!x(this,_i,dd)){(t=x(this,gx))==null||t.unselect();return}this.hideDropdown(),x(this,Ac).focus({preventScroll:!0,focusVisible:x(this,mx)})}}updateColor(t){if(x(this,xg)&&(x(this,xg).style.backgroundColor=t),!x(this,Qs))return;const e=x(this,xc).highlightColors.values();for(const n of x(this,Qs).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=x(this,Ac))==null||t.remove(),G(this,Ac,null),G(this,xg,null),(e=x(this,Qs))==null||e.remove(),G(this,Qs,null)}};Ac=new WeakMap,xg=new WeakMap,Gv=new WeakMap,Qs=new WeakMap,mx=new WeakMap,kv=new WeakMap,gx=new WeakMap,vx=new WeakMap,Fd=new WeakMap,xc=new WeakMap,Vv=new WeakMap,yx=new WeakMap,_i=new WeakSet,QC=function(){const t=document.createElement("div"),e=x(this,xc)._signal;t.addEventListener("contextmenu",Ll,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of x(this,xc).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",x($a,yx)[n]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=s,r.setAttribute("aria-selected",s===x(this,Gv)),r.addEventListener("click",k(this,_i,XC).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",k(this,_i,jC).bind(this),{signal:e}),t},XC=function(t,e){e.stopPropagation(),x(this,vx).dispatch("switchannotationeditorparams",{source:this,type:x(this,Vv),value:t})},jC=function(t){$a._keyboardManager.exec(this,t)},Sm=function(t){if(x(this,_i,dd)){this.hideDropdown();return}if(G(this,mx,t.detail===0),x(this,Fd)||(G(this,Fd,new AbortController),window.addEventListener("pointerdown",k(this,_i,uU).bind(this),{signal:x(this,xc).combinedSignal(x(this,Fd))})),x(this,Qs)){x(this,Qs).classList.remove("hidden");return}const e=G(this,Qs,k(this,_i,QC).call(this));x(this,Ac).append(e)},uU=function(t){var e;(e=x(this,Qs))!=null&&e.contains(t.target)||this.hideDropdown()},dd=function(){return x(this,Qs)&&!x(this,Qs).classList.contains("hidden")},W($a,yx,null);let _E=$a;var Qv,_x,Fh,bg,Xv,xl,Ax,xx,Sg,bc,Zr,no,jv,Hh,Xs,qv,bl,bx,un,qC,r3,hU,fU,dU,YC,Em,Ml,k1,pU,a3,T_,mU,gU,vU,yU,_U;const $n=class $n extends di{constructor(e){super({...e,name:"highlightEditor"});W(this,un);W(this,Qv,null);W(this,_x,0);W(this,Fh);W(this,bg,null);W(this,Xv,null);W(this,xl,null);W(this,Ax,null);W(this,xx,0);W(this,Sg,null);W(this,bc,null);W(this,Zr,null);W(this,no,!1);W(this,jv,null);W(this,Hh);W(this,Xs,null);W(this,qv,"");W(this,bl);W(this,bx,"");this.color=e.color||$n._defaultColor,G(this,bl,e.thickness||$n._defaultThickness),G(this,Hh,e.opacity||$n._defaultOpacity),G(this,Fh,e.boxes||null),G(this,bx,e.methodOfCreation||""),G(this,qv,e.text||""),this._isDraggable=!1,e.highlightId>-1?(G(this,no,!0),k(this,un,r3).call(this,e),k(this,un,Em).call(this)):x(this,Fh)&&(G(this,Qv,e.anchorNode),G(this,_x,e.anchorOffset),G(this,Ax,e.focusNode),G(this,xx,e.focusOffset),k(this,un,qC).call(this),k(this,un,Em).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=$n.prototype;return Fn(this,"_keyboardManager",new Vx([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:x(this,no)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:x(this,bl),methodOfCreation:x(this,bx)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var s;di.initialize(e,n),$n._defaultColor||($n._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Ze.HIGHLIGHT_DEFAULT_COLOR:$n._defaultColor=n;break;case Ze.HIGHLIGHT_THICKNESS:$n._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return x(this,jv)}updateParams(e,n){switch(e){case Ze.HIGHLIGHT_COLOR:k(this,un,hU).call(this,n);break;case Ze.HIGHLIGHT_THICKNESS:k(this,un,fU).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ze.HIGHLIGHT_DEFAULT_COLOR,$n._defaultColor],[Ze.HIGHLIGHT_THICKNESS,$n._defaultThickness]]}get propertiesToUpdate(){return[[Ze.HIGHLIGHT_COLOR,this.color||$n._defaultColor],[Ze.HIGHLIGHT_THICKNESS,x(this,bl)||$n._defaultThickness],[Ze.HIGHLIGHT_FREE,x(this,no)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(G(this,Xv,new _E({editor:this})),e.addColorPicker(x(this,Xv))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,un,T_).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,k(this,un,T_).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){k(this,un,YC).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,un,Em).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?k(this,un,YC).call(this):e&&(k(this,un,Em).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,a,l;const{drawLayer:n}=this.parent;let s;x(this,no)?(e=(e-this.rotation+360)%360,s=k(r=$n,Ml,k1).call(r,x(this,bc).box,e)):s=k(a=$n,Ml,k1).call(a,this,e),n.rotate(x(this,Zr),e),n.rotate(x(this,Xs),e),n.updateBox(x(this,Zr),s),n.updateBox(x(this,Xs),k(l=$n,Ml,k1).call(l,x(this,xl).box,e))}render(){if(this.div)return this.div;const e=super.render();x(this,qv)&&(e.setAttribute("aria-label",x(this,qv)),e.setAttribute("role","mark")),x(this,no)?e.classList.add("free"):this.div.addEventListener("keydown",k(this,un,pU).bind(this),{signal:this._uiManager._signal});const n=G(this,Sg,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=x(this,bg);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),gE(this,x(this,Sg),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(x(this,Xs),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(x(this,Xs),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:k(this,un,a3).call(this,!0);break;case 1:case 3:k(this,un,a3).call(this,!1);break}}select(){var e,n;super.select(),x(this,Xs)&&((e=this.parent)==null||e.drawLayer.removeClass(x(this,Xs),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(x(this,Xs),"selected"))}unselect(){var e;super.unselect(),x(this,Xs)&&((e=this.parent)==null||e.drawLayer.removeClass(x(this,Xs),"selected"),x(this,no)||k(this,un,a3).call(this,!1))}get _mustFixPosition(){return!x(this,no)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(x(this,Zr),e),this.parent.drawLayer.show(x(this,Xs),e))}static startHighlighting(e,n,{target:s,x:r,y:a}){const{x:l,y:u,width:f,height:m}=s.getBoundingClientRect(),g=new AbortController,v=e.combinedSignal(g),_=C=>{C.preventDefault(),C.stopPropagation()},b=C=>{g.abort(),k(this,Ml,yU).call(this,e,C)};window.addEventListener("blur",b,{signal:v}),window.addEventListener("pointerup",b,{signal:v}),window.addEventListener("pointerdown",_,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Ll,{signal:v}),s.addEventListener("pointermove",k(this,Ml,vU).bind(this,e),{signal:v}),this._freeHighlight=new VC({x:r,y:a},[l,u,f,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(e,n,s){var C,T,S,R;let r=null;if(e instanceof QI){const{data:{quadPoints:B,rect:D,rotation:N,id:I,color:F,opacity:z,popupRef:U},parent:{page:{pageNumber:P}}}=e;r=e={annotationType:dn.HIGHLIGHT,color:Array.from(F),opacity:z,quadPoints:B,boxes:null,pageIndex:P-1,rect:D.slice(0),rotation:N,id:I,deleted:!1,popupRef:U}}else if(e instanceof U7){const{data:{inkLists:B,rect:D,rotation:N,id:I,color:F,borderStyle:{rawWidth:z},popupRef:U},parent:{page:{pageNumber:P}}}=e;r=e={annotationType:dn.HIGHLIGHT,color:Array.from(F),thickness:z,inkLists:B,boxes:null,pageIndex:P-1,rect:D.slice(0),rotation:N,id:I,deleted:!1,popupRef:U}}const{color:a,quadPoints:l,inkLists:u,opacity:f}=e,m=await super.deserialize(e,n,s);m.color=Le.makeHexColor(...a),G(m,Hh,f||1),u&&G(m,bl,e.thickness),m.annotationElementId=e.id||null,m._initialData=r;const[g,v]=m.pageDimensions,[_,b]=m.pageTranslation;if(l){const B=G(m,Fh,[]);for(let D=0;D<l.length;D+=8)B.push({x:(l[D]-_)/g,y:1-(l[D+1]-b)/v,width:(l[D+2]-l[D])/g,height:(l[D+1]-l[D+5])/v});k(C=m,un,qC).call(C),k(T=m,un,Em).call(T),m.rotate(m.rotation)}else if(u){G(m,no,!0);const B=u[0],D={x:B[0]-_,y:v-(B[1]-b)},N=new VC(D,[0,0,g,v],1,x(m,bl)/2,!0,.001);for(let z=0,U=B.length;z<U;z+=2)D.x=B[z]-_,D.y=v-(B[z+1]-b),N.add(D);const{id:I,clipPathId:F}=n.drawLayer.draw(N,m.color,m._defaultOpacity,!0);k(S=m,un,r3).call(S,{highlightOutlines:N.getOutlines(),highlightId:I,clipPathId:F}),k(R=m,un,Em).call(R)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=di._colorManager.convert(this.color),r={annotationType:dn.HIGHLIGHT,color:s,opacity:x(this,Hh),thickness:x(this,bl),quadPoints:k(this,un,mU).call(this),outlines:k(this,un,gU).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:k(this,un,T_).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!k(this,un,_U).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Qv=new WeakMap,_x=new WeakMap,Fh=new WeakMap,bg=new WeakMap,Xv=new WeakMap,xl=new WeakMap,Ax=new WeakMap,xx=new WeakMap,Sg=new WeakMap,bc=new WeakMap,Zr=new WeakMap,no=new WeakMap,jv=new WeakMap,Hh=new WeakMap,Xs=new WeakMap,qv=new WeakMap,bl=new WeakMap,bx=new WeakMap,un=new WeakSet,qC=function(){const e=new jD(x(this,Fh),.001);G(this,bc,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=x(this,bc).box;const n=new jD(x(this,Fh),.0025,.001,this._uiManager.direction==="ltr");G(this,xl,n.getOutlines());const{lastPoint:s}=x(this,xl).box;G(this,jv,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},r3=function({highlightOutlines:e,highlightId:n,clipPathId:s}){var g,v;if(G(this,bc,e),G(this,xl,e.getNewOutline(x(this,bl)/2+1.5,.0025)),n>=0)G(this,Zr,n),G(this,bg,s),this.parent.drawLayer.finalizeLine(n,e),G(this,Xs,this.parent.drawLayer.drawOutline(x(this,xl)));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(x(this,Zr),e),this.parent.drawLayer.updateBox(x(this,Zr),k(g=$n,Ml,k1).call(g,x(this,bc).box,(_-this.rotation+360)%360)),this.parent.drawLayer.updateLine(x(this,Xs),x(this,xl)),this.parent.drawLayer.updateBox(x(this,Xs),k(v=$n,Ml,k1).call(v,x(this,xl).box,_))}const{x:a,y:l,width:u,height:f}=e.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=u,this.height=f;break;case 90:{const[_,b]=this.parentDimensions;this.x=l,this.y=1-a,this.width=u*b/_,this.height=f*_/b;break}case 180:this.x=1-a,this.y=1-l,this.width=u,this.height=f;break;case 270:{const[_,b]=this.parentDimensions;this.x=1-l,this.y=a,this.width=u*b/_,this.height=f*_/b;break}}const{lastPoint:m}=x(this,xl).box;G(this,jv,[(m[0]-a)/u,(m[1]-l)/f])},hU=function(e){const n=(a,l)=>{var u,f,m;this.color=a,(u=this.parent)==null||u.drawLayer.changeColor(x(this,Zr),a),(f=x(this,Xv))==null||f.updateColor(a),G(this,Hh,l),(m=this.parent)==null||m.drawLayer.changeOpacity(x(this,Zr),l)},s=this.color,r=x(this,Hh);this.addCommands({cmd:n.bind(this,e,$n._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},fU=function(e){const n=x(this,bl),s=r=>{G(this,bl,r),k(this,un,dU).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},dU=function(e){if(!x(this,no))return;k(this,un,r3).call(this,{highlightOutlines:x(this,bc).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},YC=function(){x(this,Zr)===null||!this.parent||(this.parent.drawLayer.remove(x(this,Zr)),G(this,Zr,null),this.parent.drawLayer.remove(x(this,Xs)),G(this,Xs,null))},Em=function(e=this.parent){x(this,Zr)===null&&({id:Sa(this,Zr)._,clipPathId:Sa(this,bg)._}=e.drawLayer.draw(x(this,bc),this.color,x(this,Hh)),G(this,Xs,e.drawLayer.drawOutline(x(this,xl))),x(this,Sg)&&(x(this,Sg).style.clipPath=x(this,bg)))},Ml=new WeakSet,k1=function({x:e,y:n,width:s,height:r},a){switch(a){case 90:return{x:1-n-r,y:e,width:r,height:s};case 180:return{x:1-e-s,y:1-n-r,width:s,height:r};case 270:return{x:n,y:1-e-s,width:r,height:s}}return{x:e,y:n,width:s,height:r}},pU=function(e){$n._keyboardManager.exec(this,e)},a3=function(e){if(!x(this,Qv))return;const n=window.getSelection();e?n.setPosition(x(this,Qv),x(this,_x)):n.setPosition(x(this,Ax),x(this,xx))},T_=function(){return x(this,no)?this.rotation:0},mU=function(){if(x(this,no))return null;const[e,n]=this.pageDimensions,[s,r]=this.pageTranslation,a=x(this,Fh),l=new Float32Array(a.length*8);let u=0;for(const{x:f,y:m,width:g,height:v}of a){const _=f*e+s,b=(1-m-v)*n+r;l[u]=l[u+4]=_,l[u+1]=l[u+3]=b,l[u+2]=l[u+6]=_+g*e,l[u+5]=l[u+7]=b+v*n,u+=8}return l},gU=function(e){return x(this,bc).serialize(e,k(this,un,T_).call(this))},vU=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},yU=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},_U=function(e){const{color:n}=this._initialData;return e.color.some((s,r)=>s!==n[r])},W($n,Ml),Je($n,"_defaultColor",null),Je($n,"_defaultOpacity",1),Je($n,"_defaultThickness",12),Je($n,"_type","highlight"),Je($n,"_editorType",dn.HIGHLIGHT),Je($n,"_freeHighlightId",-1),Je($n,"_freeHighlight",null),Je($n,"_freeHighlightClipId","");let AE=$n;var Eg,Mg,Du,zh,Sl,Tg,Cg,wg,Gh,Yv,Rg,Lg,Hd,oe,AU,xU,bU,SU,KC,EU,JC,MU,TU,CU,wU,RU,Mm,ZC,$C,tw,o3,l3,V1,ew,c3,lf,LU,nw,DU,BU,iw,u3,C_;const ji=class ji extends di{constructor(e){super({...e,name:"inkEditor"});W(this,oe);W(this,Eg,0);W(this,Mg,0);W(this,Du,null);W(this,zh,new Path2D);W(this,Sl,!1);W(this,Tg,null);W(this,Cg,!1);W(this,wg,!1);W(this,Gh,null);W(this,Yv,null);W(this,Rg,0);W(this,Lg,0);W(this,Hd,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,n){di.initialize(e,n)}static updateDefaultParams(e,n){switch(e){case Ze.INK_THICKNESS:ji._defaultThickness=n;break;case Ze.INK_COLOR:ji._defaultColor=n;break;case Ze.INK_OPACITY:ji._defaultOpacity=n/100;break}}updateParams(e,n){switch(e){case Ze.INK_THICKNESS:k(this,oe,AU).call(this,n);break;case Ze.INK_COLOR:k(this,oe,xU).call(this,n);break;case Ze.INK_OPACITY:k(this,oe,bU).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ze.INK_THICKNESS,ji._defaultThickness],[Ze.INK_COLOR,ji._defaultColor||di._defaultLineColor],[Ze.INK_OPACITY,Math.round(ji._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Ze.INK_THICKNESS,this.thickness||ji._defaultThickness],[Ze.INK_COLOR,this.color||ji._defaultColor||di._defaultLineColor],[Ze.INK_OPACITY,Math.round(100*(this.opacity??ji._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(k(this,oe,o3).call(this),k(this,oe,l3).call(this)),this.isAttachedToDOM||(this.parent.add(this),k(this,oe,V1).call(this)),k(this,oe,C_).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,x(this,Du)&&(clearTimeout(x(this,Du)),G(this,Du,null)),(e=x(this,Gh))==null||e.disconnect(),G(this,Gh,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,n]=this.parentDimensions,s=this.width*e,r=this.height*n;this.setDimensions(s,r)}enableEditMode(){x(this,Sl)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,k(this,oe,ZC).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),k(this,oe,$C).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){x(this,Sl)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),G(this,Sl,!0),this.div.classList.add("disabled"),k(this,oe,C_).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||x(this,Sl)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),k(this,oe,EU).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),k(this,oe,JC).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),k(this,oe,tw).call(this,e)}canvasPointerleave(e){k(this,oe,tw).call(this,e)}get isResizable(){return!this.isEmpty()&&x(this,Sl)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,a,l]=k(this,oe,SU).call(this);if(this.setAt(s,r,0,0),this.setDims(a,l),k(this,oe,o3).call(this),this.width){const[u,f]=this.parentDimensions;this.setAspectRatio(this.width*u,this.height*f),this.setAt(e*u,n*f,this.width*u,this.height*f),G(this,wg,!0),k(this,oe,V1).call(this),this.setDims(this.width*u,this.height*f),k(this,oe,Mm).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return k(this,oe,l3).call(this),this.div}setDimensions(e,n){const s=Math.round(e),r=Math.round(n);if(x(this,Rg)===s&&x(this,Lg)===r)return;G(this,Rg,s),G(this,Lg,r),this.canvas.style.visibility="hidden";const[a,l]=this.parentDimensions;this.width=e/a,this.height=n/l,this.fixAndSetPosition(),x(this,Sl)&&k(this,oe,ew).call(this,e,n),k(this,oe,V1).call(this),k(this,oe,Mm).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(e,n,s){var T,S,R;if(e instanceof U7)return null;const r=await super.deserialize(e,n,s);r.thickness=e.thickness,r.color=Le.makeHexColor(...e.color),r.opacity=e.opacity;const[a,l]=r.pageDimensions,u=r.width*a,f=r.height*l,m=r.parentScale,g=e.thickness/2;G(r,Sl,!0),G(r,Rg,Math.round(u)),G(r,Lg,Math.round(f));const{paths:v,rect:_,rotation:b}=e;for(let{bezier:B}of v){B=k(T=ji,lf,DU).call(T,B,_,b);const D=[];r.paths.push(D);let N=m*(B[0]-g),I=m*(B[1]-g);for(let z=2,U=B.length;z<U;z+=6){const P=m*(B[z]-g),X=m*(B[z+1]-g),ot=m*(B[z+2]-g),it=m*(B[z+3]-g),ct=m*(B[z+4]-g),dt=m*(B[z+5]-g);D.push([[N,I],[P,X],[ot,it],[ct,dt]]),N=ct,I=dt}const F=k(this,lf,LU).call(this,D);r.bezierPath2D.push(F)}const C=k(S=r,oe,iw).call(S);return G(r,Mg,Math.max(di.MIN_SIZE,C[2]-C[0])),G(r,Eg,Math.max(di.MIN_SIZE,C[3]-C[1])),k(R=r,oe,ew).call(R,u,f),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),n=di._colorManager.convert(this.ctx.strokeStyle);return{annotationType:dn.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:k(this,oe,BU).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Eg=new WeakMap,Mg=new WeakMap,Du=new WeakMap,zh=new WeakMap,Sl=new WeakMap,Tg=new WeakMap,Cg=new WeakMap,wg=new WeakMap,Gh=new WeakMap,Yv=new WeakMap,Rg=new WeakMap,Lg=new WeakMap,Hd=new WeakMap,oe=new WeakSet,AU=function(e){const n=r=>{this.thickness=r,k(this,oe,C_).call(this)},s=this.thickness;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},xU=function(e){const n=r=>{this.color=r,k(this,oe,Mm).call(this)},s=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},bU=function(e){const n=r=>{this.opacity=r,k(this,oe,Mm).call(this)};e/=100;const s=this.opacity;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},SU=function(){const{parentRotation:e,parentDimensions:[n,s]}=this;switch(e){case 90:return[0,s,s,n];case 180:return[n,s,n,s];case 270:return[n,0,s,n];default:return[0,0,n,s]}},KC=function(){const{ctx:e,color:n,opacity:s,thickness:r,parentScale:a,scaleFactor:l}=this;e.lineWidth=r*a/l,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${n}${wtt(s)}`},EU=function(e,n){this.canvas.addEventListener("contextmenu",Ll,{signal:this._uiManager._signal}),k(this,oe,$C).call(this),G(this,Tg,new AbortController);const s=this._uiManager.combinedSignal(x(this,Tg));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,x(this,wg)||(G(this,wg,!0),k(this,oe,V1).call(this),this.thickness||(this.thickness=ji._defaultThickness),this.color||(this.color=ji._defaultColor||di._defaultLineColor),this.opacity??(this.opacity=ji._defaultOpacity)),this.currentPath.push([e,n]),G(this,Cg,!1),k(this,oe,KC).call(this),G(this,Hd,()=>{k(this,oe,CU).call(this),x(this,Hd)&&window.requestAnimationFrame(x(this,Hd))}),window.requestAnimationFrame(x(this,Hd))},JC=function(e,n){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===s&&n===r)return;const a=this.currentPath;let l=x(this,zh);if(a.push([e,n]),G(this,Cg,!0),a.length<=2){l.moveTo(...a[0]),l.lineTo(e,n);return}a.length===3&&(G(this,zh,l=new Path2D),l.moveTo(...a[0])),k(this,oe,wU).call(this,l,...a.at(-3),...a.at(-2),e,n)},MU=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);x(this,zh).lineTo(...e)},TU=function(e,n){G(this,Hd,null),e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),k(this,oe,JC).call(this,e,n),k(this,oe,MU).call(this);let s;if(this.currentPath.length!==1)s=k(this,oe,RU).call(this);else{const f=[e,n];s=[[f,f.slice(),f.slice(),f]]}const r=x(this,zh),a=this.currentPath;this.currentPath=[],G(this,zh,new Path2D);const l=()=>{this.allRawPaths.push(a),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},u=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(k(this,oe,o3).call(this),k(this,oe,l3).call(this)),k(this,oe,C_).call(this))};this.addCommands({cmd:l,undo:u,mustExec:!0})},CU=function(){if(!x(this,Cg))return;G(this,Cg,!1);const e=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),s=n.map(l=>l[0]),r=n.map(l=>l[1]);Math.min(...s)-e,Math.max(...s)+e,Math.min(...r)-e,Math.max(...r)+e;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const l of this.bezierPath2D)a.stroke(l);a.stroke(x(this,zh)),a.restore()},wU=function(e,n,s,r,a,l,u){const f=(n+r)/2,m=(s+a)/2,g=(r+l)/2,v=(a+u)/2;e.bezierCurveTo(f+2*(r-f)/3,m+2*(a-m)/3,g+2*(r-g)/3,v+2*(a-v)/3,g,v)},RU=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const n=[];let s,[r,a]=e[0];for(s=1;s<e.length-2;s++){const[_,b]=e[s],[C,T]=e[s+1],S=(_+C)/2,R=(b+T)/2,B=[r+2*(_-r)/3,a+2*(b-a)/3],D=[S+2*(_-S)/3,R+2*(b-R)/3];n.push([[r,a],B,D,[S,R]]),[r,a]=[S,R]}const[l,u]=e[s],[f,m]=e[s+1],g=[r+2*(l-r)/3,a+2*(u-a)/3],v=[f+2*(l-f)/3,m+2*(u-m)/3];return n.push([[r,a],g,v,[f,m]]),n},Mm=function(){if(this.isEmpty()){k(this,oe,c3).call(this);return}k(this,oe,KC).call(this);const{canvas:e,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),k(this,oe,c3).call(this);for(const s of this.bezierPath2D)n.stroke(s)},ZC=function(){if(x(this,Yv))return;G(this,Yv,new AbortController);const e=this._uiManager.combinedSignal(x(this,Yv));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})},$C=function(){var e;(e=this.pointerdownAC)==null||e.abort(),this.pointerdownAC=null},tw=function(e){var n;(n=x(this,Tg))==null||n.abort(),G(this,Tg,null),k(this,oe,ZC).call(this),x(this,Du)&&clearTimeout(x(this,Du)),G(this,Du,setTimeout(()=>{G(this,Du,null),this.canvas.removeEventListener("contextmenu",Ll)},10)),k(this,oe,TU).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},o3=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},l3=function(){G(this,Gh,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),x(this,Gh).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=x(this,Gh))==null||e.disconnect(),G(this,Gh,null)},{once:!0})},V1=function(){if(!x(this,wg))return;const[e,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),k(this,oe,c3).call(this)},ew=function(e,n){const s=k(this,oe,u3).call(this),r=(e-s)/x(this,Mg),a=(n-s)/x(this,Eg);this.scaleFactor=Math.min(r,a)},c3=function(){const e=k(this,oe,u3).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},lf=new WeakSet,LU=function(e){const n=new Path2D;for(let s=0,r=e.length;s<r;s++){const[a,l,u,f]=e[s];s===0&&n.moveTo(...a),n.bezierCurveTo(l[0],l[1],u[0],u[1],f[0],f[1])}return n},nw=function(e,n,s){const[r,a,l,u]=n;switch(s){case 0:for(let f=0,m=e.length;f<m;f+=2)e[f]+=r,e[f+1]=u-e[f+1];break;case 90:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=e[f+1]+r,e[f+1]=g+a}break;case 180:for(let f=0,m=e.length;f<m;f+=2)e[f]=l-e[f],e[f+1]+=a;break;case 270:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=l-e[f+1],e[f+1]=u-g}break;default:throw new Error("Invalid rotation")}return e},DU=function(e,n,s){const[r,a,l,u]=n;switch(s){case 0:for(let f=0,m=e.length;f<m;f+=2)e[f]-=r,e[f+1]=u-e[f+1];break;case 90:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=e[f+1]-a,e[f+1]=g-r}break;case 180:for(let f=0,m=e.length;f<m;f+=2)e[f]=l-e[f],e[f+1]-=a;break;case 270:for(let f=0,m=e.length;f<m;f+=2){const g=e[f];e[f]=u-e[f+1],e[f+1]=l-g}break;default:throw new Error("Invalid rotation")}return e},BU=function(e,n,s,r){var m,g;const a=[],l=this.thickness/2,u=e*n+l,f=e*s+l;for(const v of this.paths){const _=[],b=[];for(let C=0,T=v.length;C<T;C++){const[S,R,B,D]=v[C];if(S[0]===D[0]&&S[1]===D[1]&&T===1){const it=e*S[0]+u,ct=e*S[1]+f;_.push(it,ct),b.push(it,ct);break}const N=e*S[0]+u,I=e*S[1]+f,F=e*R[0]+u,z=e*R[1]+f,U=e*B[0]+u,P=e*B[1]+f,X=e*D[0]+u,ot=e*D[1]+f;C===0&&(_.push(N,I),b.push(N,I)),_.push(F,z,U,P,X,ot),b.push(F,z),C===T-1&&b.push(X,ot)}a.push({bezier:k(m=ji,lf,nw).call(m,_,r,this.rotation),points:k(g=ji,lf,nw).call(g,b,r,this.rotation)})}return a},iw=function(){let e=1/0,n=-1/0,s=1/0,r=-1/0;for(const a of this.paths)for(const[l,u,f,m]of a){const g=Le.bezierBoundingBox(...l,...u,...f,...m);e=Math.min(e,g[0]),s=Math.min(s,g[1]),n=Math.max(n,g[2]),r=Math.max(r,g[3])}return[e,s,n,r]},u3=function(){return x(this,Sl)?Math.ceil(this.thickness*this.parentScale):0},C_=function(e=!1){if(this.isEmpty())return;if(!x(this,Sl)){k(this,oe,Mm).call(this);return}const n=k(this,oe,iw).call(this),s=k(this,oe,u3).call(this);G(this,Mg,Math.max(di.MIN_SIZE,n[2]-n[0])),G(this,Eg,Math.max(di.MIN_SIZE,n[3]-n[1]));const r=Math.ceil(s+x(this,Mg)*this.scaleFactor),a=Math.ceil(s+x(this,Eg)*this.scaleFactor),[l,u]=this.parentDimensions;this.width=r/l,this.height=a/u,this.setAspectRatio(r,a);const f=this.translationX,m=this.translationY;this.translationX=-n[0],this.translationY=-n[1],k(this,oe,V1).call(this),k(this,oe,Mm).call(this),G(this,Rg,r),G(this,Lg,a),this.setDims(r,a);const g=e?s/this.scaleFactor/2:0;this.translate(f-this.translationX-g,m-this.translationY-g)},W(ji,lf),Je(ji,"_defaultColor",null),Je(ji,"_defaultOpacity",1),Je(ji,"_defaultThickness",1),Je(ji,"_type","ink"),Je(ji,"_editorType",dn.INK);let WC=ji;var Yi,Rr,zd,kh,Gd,Wv,Bu,Vh,Ou,Io,Kv,On,w_,R_,h3,rw,OU,f3,aw,d3,NU,IU;const Q_=class Q_ extends di{constructor(e){super({...e,name:"stampEditor"});W(this,On);W(this,Yi,null);W(this,Rr,null);W(this,zd,null);W(this,kh,null);W(this,Gd,null);W(this,Wv,"");W(this,Bu,null);W(this,Vh,null);W(this,Ou,null);W(this,Io,!1);W(this,Kv,!1);G(this,kh,e.bitmapUrl),G(this,Gd,e.bitmapFile)}static initialize(e,n){di.initialize(e,n)}static get supportedTypes(){return Fn(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Fn(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(dn.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:l}=e||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:a,height:l,channels:r.length/(a*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const f=u.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e,n;x(this,Rr)&&(G(this,Yi,null),this._uiManager.imageManager.deleteId(x(this,Rr)),(e=x(this,Bu))==null||e.remove(),G(this,Bu,null),(n=x(this,Vh))==null||n.disconnect(),G(this,Vh,null),x(this,Ou)&&(clearTimeout(x(this,Ou)),G(this,Ou,null))),super.remove()}rebuild(){if(!this.parent){x(this,Rr)&&k(this,On,h3).call(this);return}super.rebuild(),this.div!==null&&(x(this,Rr)&&x(this,Bu)===null&&k(this,On,h3).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(x(this,zd)||x(this,Yi)||x(this,kh)||x(this,Gd)||x(this,Rr))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),x(this,Yi)?k(this,On,rw).call(this):k(this,On,h3).call(this),this.width&&!this.annotationElementId){const[s,r]=this.parentDimensions;this.setAt(e*s,n*r,this.width*s,this.height*r)}return this.div}copyCanvas(e,n,s=!1){var _;e||(e=224);const{width:r,height:a}=x(this,Yi),l=new tC;let u=x(this,Yi),f=r,m=a,g=null;if(n){if(r>n||a>n){const z=Math.min(n/r,n/a);f=Math.floor(r*z),m=Math.floor(a*z)}g=document.createElement("canvas");const b=g.width=Math.ceil(f*l.sx),C=g.height=Math.ceil(m*l.sy);x(this,Io)||(u=k(this,On,f3).call(this,b,C));const T=g.getContext("2d");T.filter=this._uiManager.hcmFilter;let S="white",R="#cfcfd8";this._uiManager.hcmFilter!=="none"?R="black":(_=window.matchMedia)!=null&&_.call(window,"(prefers-color-scheme: dark)").matches&&(S="#8f8f9d",R="#42414d");const B=15,D=B*l.sx,N=B*l.sy,I=new OffscreenCanvas(D*2,N*2),F=I.getContext("2d");F.fillStyle=S,F.fillRect(0,0,D*2,N*2),F.fillStyle=R,F.fillRect(0,0,D,N),F.fillRect(D,N,D,N),T.fillStyle=T.createPattern(I,"repeat"),T.fillRect(0,0,b,C),T.drawImage(u,0,0,u.width,u.height,0,0,b,C)}let v=null;if(s){let b,C;if(l.symmetric&&u.width<e&&u.height<e)b=u.width,C=u.height;else if(u=x(this,Yi),r>e||a>e){const R=Math.min(e/r,e/a);b=Math.floor(r*R),C=Math.floor(a*R),x(this,Io)||(u=k(this,On,f3).call(this,b,C))}const S=new OffscreenCanvas(b,C).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,C),v={width:b,height:C,data:S.getImageData(0,0,b,C).data}}return{canvas:g,width:f,height:m,imageData:v}}getImageForAltText(){return x(this,Bu)}static async deserialize(e,n,s){var C;let r=null;if(e instanceof XI){const{data:{rect:T,rotation:S,id:R,structParent:B,popupRef:D},container:N,parent:{page:{pageNumber:I}}}=e,F=N.querySelector("canvas"),z=s.imageManager.getFromCanvas(N.id,F);F.remove();const U=((C=await n._structTree.getAriaAttributes(`${M7}${R}`))==null?void 0:C.get("aria-label"))||"";r=e={annotationType:dn.STAMP,bitmapId:z.id,bitmap:z.bitmap,pageIndex:I-1,rect:T.slice(0),rotation:S,id:R,deleted:!1,accessibilityData:{decorative:!1,altText:U},isSvg:!1,structParent:B,popupRef:D}}const a=await super.deserialize(e,n,s),{rect:l,bitmap:u,bitmapUrl:f,bitmapId:m,isSvg:g,accessibilityData:v}=e;m&&s.imageManager.isValidId(m)?(G(a,Rr,m),u&&G(a,Yi,u)):G(a,kh,f),G(a,Io,g);const[_,b]=a.pageDimensions;return a.width=(l[2]-l[0])/_,a.height=(l[3]-l[1])/b,a.annotationElementId=e.id||null,v&&(a.altTextData=v),a._initialData=r,G(a,Kv,!!r),a}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:dn.STAMP,bitmapId:x(this,Rr),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:x(this,Io),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=k(this,On,d3).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const u=k(this,On,IU).call(this,s);if(u.isSame)return null;u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||(n.stamps=new Map);const l=x(this,Io)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(x(this,Rr)))n.stamps.set(x(this,Rr),{area:l,serialized:s}),s.bitmap=k(this,On,d3).call(this,!1);else if(x(this,Io)){const u=n.stamps.get(x(this,Rr));l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=k(this,On,d3).call(this,!1))}return s}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};Yi=new WeakMap,Rr=new WeakMap,zd=new WeakMap,kh=new WeakMap,Gd=new WeakMap,Wv=new WeakMap,Bu=new WeakMap,Vh=new WeakMap,Ou=new WeakMap,Io=new WeakMap,Kv=new WeakMap,On=new WeakSet,w_=function(e,n=!1){if(!e){this.remove();return}G(this,Yi,e.bitmap),n||(G(this,Rr,e.id),G(this,Io,e.isSvg)),e.file&&G(this,Wv,e.file.name),k(this,On,rw).call(this)},R_=function(){if(G(this,zd,null),this._uiManager.enableWaiting(!1),!!x(this,Bu)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&x(this,Yi)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&x(this,Yi)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},h3=function(){if(x(this,Rr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(x(this,Rr)).then(s=>k(this,On,w_).call(this,s,!0)).finally(()=>k(this,On,R_).call(this));return}if(x(this,kh)){const s=x(this,kh);G(this,kh,null),this._uiManager.enableWaiting(!0),G(this,zd,this._uiManager.imageManager.getFromUrl(s).then(r=>k(this,On,w_).call(this,r)).finally(()=>k(this,On,R_).call(this)));return}if(x(this,Gd)){const s=x(this,Gd);G(this,Gd,null),this._uiManager.enableWaiting(!0),G(this,zd,this._uiManager.imageManager.getFromFile(s).then(r=>k(this,On,w_).call(this,r)).finally(()=>k(this,On,R_).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Q_.supportedTypesStr;const n=this._uiManager._signal;G(this,zd,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),k(this,On,w_).call(this,r)}s()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>k(this,On,R_).call(this))),e.click()},rw=function(){const{div:e}=this;let{width:n,height:s}=x(this,Yi);const[r,a]=this.pageDimensions,l=.75;if(this.width)n=this.width*r,s=this.height*a;else if(n>l*r||s>l*a){const g=Math.min(l*r/n,l*a/s);n*=g,s*=g}const[u,f]=this.parentDimensions;this.setDims(n*u/r,s*f/a),this._uiManager.enableWaiting(!1);const m=G(this,Bu,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),k(this,On,aw).call(this,n,s),k(this,On,NU).call(this),x(this,Kv)||(this.parent.addUndoableEditor(this),G(this,Kv,!0)),this._reportTelemetry({action:"inserted_image"}),x(this,Wv)&&m.setAttribute("aria-label",x(this,Wv))},OU=function(e,n){var l;const[s,r]=this.parentDimensions;this.width=e/s,this.height=n/r,(l=this._initialOptions)!=null&&l.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,x(this,Ou)!==null&&clearTimeout(x(this,Ou)),G(this,Ou,setTimeout(()=>{G(this,Ou,null),k(this,On,aw).call(this,e,n)},200))},f3=function(e,n){const{width:s,height:r}=x(this,Yi);let a=s,l=r,u=x(this,Yi);for(;a>2*e||l>2*n;){const f=a,m=l;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(a,l);g.getContext("2d").drawImage(u,0,0,f,m,0,0,a,l),u=g.transferToImageBitmap()}return u},aw=function(e,n){const s=new tC,r=Math.ceil(e*s.sx),a=Math.ceil(n*s.sy),l=x(this,Bu);if(!l||l.width===r&&l.height===a)return;l.width=r,l.height=a;const u=x(this,Io)?x(this,Yi):k(this,On,f3).call(this,r,a),f=l.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(u,0,0,u.width,u.height,0,0,r,a)},d3=function(e){if(e){if(x(this,Io)){const r=this._uiManager.imageManager.getSvgUrl(x(this,Rr));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=x(this,Yi),n.getContext("2d").drawImage(x(this,Yi),0,0),n.toDataURL()}if(x(this,Io)){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*np.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*np.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,a);return l.getContext("2d").drawImage(x(this,Yi),0,0,x(this,Yi).width,x(this,Yi).height,0,0,r,a),l.transferToImageBitmap()}return structuredClone(x(this,Yi))},NU=function(){this._uiManager._signal&&(G(this,Vh,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&k(this,On,OU).call(this,n.width,n.height)})),x(this,Vh).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=x(this,Vh))==null||e.disconnect(),G(this,Vh,null)},{once:!0}))},IU=function(e){var f;const{rect:n,pageIndex:s,accessibilityData:{altText:r}}=this._initialData,a=e.rect.every((m,g)=>Math.abs(m-n[g])<1),l=e.pageIndex===s,u=(((f=e.accessibilityData)==null?void 0:f.alt)||"")===r;return{isSame:a&&l&&u,isSameAltText:u}},Je(Q_,"_type","stamp"),Je(Q_,"_editorType",dn.STAMP);let sw=Q_;var Dg,Jv,Nu,kd,Qh,Uo,Vd,Zv,$v,$r,Xh,Ue,Qd,Or,UU,lw,cw,uw,p3;const oc=class oc{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:r,annotationLayer:a,drawLayer:l,textLayer:u,viewport:f,l10n:m}){W(this,Or);W(this,Dg);W(this,Jv,!1);W(this,Nu,null);W(this,kd,null);W(this,Qh,null);W(this,Uo,new Map);W(this,Vd,!1);W(this,Zv,!1);W(this,$v,!1);W(this,$r,null);W(this,Xh,null);W(this,Ue);const g=[...x(oc,Qd).values()];if(!oc._initialized){oc._initialized=!0;for(const v of g)v.initialize(m,t)}t.registerEditorTypes(g),G(this,Ue,t),this.pageIndex=e,this.div=n,G(this,Dg,r),G(this,Nu,a),this.viewport=f,G(this,$r,u),this.drawLayer=l,this._structTree=s,x(this,Ue).addLayer(this)}get isEmpty(){return x(this,Uo).size===0}get isInvisible(){return this.isEmpty&&x(this,Ue).getMode()===dn.NONE}updateToolbar(t){x(this,Ue).updateToolbar(t)}updateMode(t=x(this,Ue).getMode()){switch(k(this,Or,p3).call(this),t){case dn.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case dn.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case dn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of x(oc,Qd).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=x(this,$r))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(x(this,Ue).getMode()!==dn.INK)return;if(!t){for(const n of x(this,Uo).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){x(this,Ue).setEditingState(t)}addCommands(t){x(this,Ue).addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=x(this,Nu))==null||e.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of x(this,Uo).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(x(this,Ue).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!x(this,Nu))return;const e=x(this,Nu).getEditableAnnotations();for(const n of e){if(n.hide(),x(this,Ue).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;G(this,$v,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of x(this,Uo).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(x(this,Nu)){const r=x(this,Nu).getEditableAnnotations();for(const a of r){const{id:l}=a.data;if(x(this,Ue).isDeletedAnnotationElement(l))continue;let u=e.get(l);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=t.get(l),u&&(x(this,Ue).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}k(this,Or,p3).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of x(oc,Qd).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),G(this,$v,!1)}getEditableAnnotation(t){var e;return((e=x(this,Nu))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){x(this,Ue).getActive()!==t&&x(this,Ue).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=x(this,$r))!=null&&t.div&&!x(this,Xh)){G(this,Xh,new AbortController);const e=x(this,Ue).combinedSignal(x(this,Xh));x(this,$r).div.addEventListener("pointerdown",k(this,Or,UU).bind(this),{signal:e}),x(this,$r).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=x(this,$r))!=null&&t.div&&x(this,Xh)&&(x(this,Xh).abort(),G(this,Xh,null),x(this,$r).div.classList.remove("highlighting"))}enableClick(){if(x(this,kd))return;G(this,kd,new AbortController);const t=x(this,Ue).combinedSignal(x(this,kd));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){var t;(t=x(this,kd))==null||t.abort(),G(this,kd,null)}attach(t){x(this,Uo).set(t.id,t);const{annotationElementId:e}=t;e&&x(this,Ue).isDeletedAnnotationElement(e)&&x(this,Ue).removeDeletedAnnotationElement(t)}detach(t){var e;x(this,Uo).delete(t.id),(e=x(this,Dg))==null||e.removePointerInTextLayer(t.contentDiv),!x(this,$v)&&t.annotationElementId&&x(this,Ue).addDeletedAnnotationElement(t)}remove(t){this.detach(t),x(this,Ue).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,x(this,Zv)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(x(this,Ue).addDeletedAnnotationElement(t.annotationElementId),di.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),x(this,Ue).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),x(this,Ue).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!x(this,Qh)&&(t._focusEventsAllowed=!1,G(this,Qh,setTimeout(()=>{G(this,Qh,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:x(this,Ue)._signal}),e.focus())},0))),t._structTreeParentId=(n=x(this,Dg))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return x(this,Ue).getId()}combinedSignal(t){return x(this,Ue).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=x(this,Or,lw))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){x(this,Ue).updateToolbar(t),x(this,Ue).updateMode(t);const{offsetX:n,offsetY:s}=k(this,Or,uw).call(this),r=this.getNextId(),a=k(this,Or,cw).call(this,{parent:this,id:r,x:n,y:s,uiManager:x(this,Ue),isCentered:!0,...e});a&&this.add(a)}async deserialize(t){var e;return await((e=x(oc,Qd).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,x(this,Ue)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),r=k(this,Or,cw).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:x(this,Ue),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(k(this,Or,uw).call(this),!0)}setSelected(t){x(this,Ue).setSelected(t)}toggleSelected(t){x(this,Ue).toggleSelected(t)}unselect(t){x(this,Ue).unselect(t)}pointerup(t){const{isMac:e}=Na.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&x(this,Vd)){if(G(this,Vd,!1),!x(this,Jv)){G(this,Jv,!0);return}if(x(this,Ue).getMode()===dn.STAMP){x(this,Ue).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(x(this,Ue).getMode()===dn.HIGHLIGHT&&this.enableTextSelection(),x(this,Vd)){G(this,Vd,!1);return}const{isMac:e}=Na.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;G(this,Vd,!0);const n=x(this,Ue).getActive();G(this,Jv,!n||n.isEmpty())}findNewParent(t,e,n){const s=x(this,Ue).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}destroy(){var t,e;((t=x(this,Ue).getActive())==null?void 0:t.parent)===this&&(x(this,Ue).commitOrRemove(),x(this,Ue).setActiveEditor(null)),x(this,Qh)&&(clearTimeout(x(this,Qh)),G(this,Qh,null));for(const n of x(this,Uo).values())(e=x(this,Dg))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,x(this,Uo).clear(),x(this,Ue).removeLayer(this)}render({viewport:t}){this.viewport=t,Wg(this.div,t);for(const e of x(this,Ue).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){x(this,Ue).commitOrRemove(),k(this,Or,p3).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Wg(this.div,{rotation:n}),e!==n)for(const s of x(this,Uo).values())s.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return x(this,Ue).viewParameters.realScale}};Dg=new WeakMap,Jv=new WeakMap,Nu=new WeakMap,kd=new WeakMap,Qh=new WeakMap,Uo=new WeakMap,Vd=new WeakMap,Zv=new WeakMap,$v=new WeakMap,$r=new WeakMap,Xh=new WeakMap,Ue=new WeakMap,Qd=new WeakMap,Or=new WeakSet,UU=function(t){x(this,Ue).unselectAll();const{target:e}=t;if(e===x(this,$r).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&x(this,$r).div.contains(e)){const{isMac:n}=Na.platform;if(t.button!==0||t.ctrlKey&&n)return;x(this,Ue).showAllEditors("highlight",!0,!0),x(this,$r).div.classList.add("free"),this.toggleDrawing(),AE.startHighlighting(this,x(this,Ue).direction==="ltr",{target:x(this,$r).div,x:t.x,y:t.y}),x(this,$r).div.addEventListener("pointerup",()=>{x(this,$r).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:x(this,Ue)._signal}),t.preventDefault()}},lw=function(){return x(oc,Qd).get(x(this,Ue).getMode())},cw=function(t){const e=x(this,Or,lw);return e?new e.prototype.constructor(t):null},uw=function(){const{x:t,y:e,width:n,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,t),a=Math.max(0,e),l=Math.min(window.innerWidth,t+n),u=Math.min(window.innerHeight,e+s),f=(r+l)/2-t,m=(a+u)/2-e,[g,v]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:g,offsetY:v}},p3=function(){G(this,Zv,!0);for(const t of x(this,Uo).values())t.isEmpty()&&t.remove();G(this,Zv,!1)},Je(oc,"_initialized",!1),W(oc,Qd,new Map([zC,WC,sw,AE].map(t=>[t._editorType,t])));let ow=oc;var Iu,Sx,Cs,jh,Ex,fw,t0,dw,PU;const Tr=class Tr{constructor({pageIndex:t}){W(this,t0);W(this,Iu,null);W(this,Sx,0);W(this,Cs,new Map);W(this,jh,new Map);this.pageIndex=t}setParent(t){if(!x(this,Iu)){G(this,Iu,t);return}if(x(this,Iu)!==t){if(x(this,Cs).size>0)for(const e of x(this,Cs).values())e.remove(),t.append(e);G(this,Iu,t)}}static get _svgFactory(){return Fn(this,"_svgFactory",new I7)}draw(t,e,n,s=!1){const r=Sa(this,Sx)._++,a=k(this,t0,dw).call(this,t.box);a.classList.add(...t.classNamesForDrawing);const l=Tr._svgFactory.createElement("defs");a.append(l);const u=Tr._svgFactory.createElement("path");l.append(u);const f=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",f),u.setAttribute("d",t.toSVGPath()),s&&x(this,jh).set(r,u);const m=k(this,t0,PU).call(this,l,f),g=Tr._svgFactory.createElement("use");return a.append(g),a.setAttribute("fill",e),a.setAttribute("fill-opacity",n),g.setAttribute("href",`#${f}`),x(this,Cs).set(r,a),{id:r,clipPathId:`url(#${m})`}}drawOutline(t){const e=Sa(this,Sx)._++,n=k(this,t0,dw).call(this,t.box);n.classList.add(...t.classNamesForOutlining);const s=Tr._svgFactory.createElement("defs");n.append(s);const r=Tr._svgFactory.createElement("path");s.append(r);const a=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",a),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let l;if(t.mustRemoveSelfIntersections){const m=Tr._svgFactory.createElement("mask");s.append(m),l=`mask_p${this.pageIndex}_${e}`,m.setAttribute("id",l),m.setAttribute("maskUnits","objectBoundingBox");const g=Tr._svgFactory.createElement("rect");m.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const v=Tr._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${a}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const u=Tr._svgFactory.createElement("use");n.append(u),u.setAttribute("href",`#${a}`),l&&u.setAttribute("mask",`url(#${l})`);const f=u.cloneNode();return n.append(f),u.classList.add("mainOutline"),f.classList.add("secondaryOutline"),x(this,Cs).set(e,n),e}finalizeLine(t,e){const n=x(this,jh).get(t);x(this,jh).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){x(this,Cs).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}updatePath(t,e){x(this,jh).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var n;k(n=Tr,Ex,fw).call(n,x(this,Cs).get(t),e)}show(t,e){x(this,Cs).get(t).classList.toggle("hidden",!e)}rotate(t,e){x(this,Cs).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){x(this,Cs).get(t).setAttribute("fill",e)}changeOpacity(t,e){x(this,Cs).get(t).setAttribute("fill-opacity",e)}addClass(t,e){x(this,Cs).get(t).classList.add(e)}removeClass(t,e){x(this,Cs).get(t).classList.remove(e)}getSVGRoot(t){return x(this,Cs).get(t)}remove(t){x(this,jh).delete(t),x(this,Iu)!==null&&(x(this,Cs).get(t).remove(),x(this,Cs).delete(t))}destroy(){G(this,Iu,null);for(const t of x(this,Cs).values())t.remove();x(this,Cs).clear(),x(this,jh).clear()}};Iu=new WeakMap,Sx=new WeakMap,Cs=new WeakMap,jh=new WeakMap,Ex=new WeakSet,fw=function(t,{x:e=0,y:n=0,width:s=1,height:r=1}={}){const{style:a}=t;a.top=`${100*n}%`,a.left=`${100*e}%`,a.width=`${100*s}%`,a.height=`${100*r}%`},t0=new WeakSet,dw=function(t){var n;const e=Tr._svgFactory.create(1,1,!0);return x(this,Iu).append(e),e.setAttribute("aria-hidden",!0),k(n=Tr,Ex,fw).call(n,e,t),e},PU=function(t,e){const n=Tr._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Tr._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},W(Tr,Ex);let hw=Tr;var cnt=sn.AbortException,unt=sn.AnnotationEditorLayer,hnt=sn.AnnotationEditorParamsType,fnt=sn.AnnotationEditorType,dnt=sn.AnnotationEditorUIManager,FU=sn.AnnotationLayer,HU=sn.AnnotationMode,pnt=sn.ColorPicker,mnt=sn.DOMSVGFactory,gnt=sn.DrawLayer,vnt=sn.FeatureTest,P7=sn.GlobalWorkerOptions,ynt=sn.ImageKind,_nt=sn.InvalidPDFException,Ant=sn.MissingPDFException,xnt=sn.OPS,bnt=sn.OutputScale,Snt=sn.PDFDataRangeTransport,Ent=sn.PDFDateString,Mnt=sn.PDFWorker,Tnt=sn.PasswordResponses,Cnt=sn.PermissionFlag,wnt=sn.PixelsPerInch,Rnt=sn.RenderingCancelledException,zU=sn.TextLayer,Lnt=sn.UnexpectedResponseException,Dnt=sn.Util,Bnt=sn.VerbosityLevel,Ont=sn.XfaLayer,Nnt=sn.build,Int=sn.createValidAbsoluteUrl,Unt=sn.fetchData,GU=sn.getDocument,Pnt=sn.getFilenameFromUrl,Fnt=sn.getPdfFilenameFromUrl,Hnt=sn.getXfaPageViewport,znt=sn.isDataScheme,Gnt=sn.isPdfFile,knt=sn.noContextMenu,Vnt=sn.normalizeUnicode,Qnt=sn.setLayerDimensions,Xnt=sn.shadow,jnt=sn.version;const qnt=Object.freeze(Object.defineProperty({__proto__:null,AbortException:cnt,AnnotationEditorLayer:unt,AnnotationEditorParamsType:hnt,AnnotationEditorType:fnt,AnnotationEditorUIManager:dnt,AnnotationLayer:FU,AnnotationMode:HU,ColorPicker:pnt,DOMSVGFactory:mnt,DrawLayer:gnt,FeatureTest:vnt,GlobalWorkerOptions:P7,ImageKind:ynt,InvalidPDFException:_nt,MissingPDFException:Ant,OPS:xnt,OutputScale:bnt,PDFDataRangeTransport:Snt,PDFDateString:Ent,PDFWorker:Mnt,PasswordResponses:Tnt,PermissionFlag:Cnt,PixelsPerInch:wnt,RenderingCancelledException:Rnt,TextLayer:zU,UnexpectedResponseException:Lnt,Util:Dnt,VerbosityLevel:Bnt,XfaLayer:Ont,build:Nnt,createValidAbsoluteUrl:Int,fetchData:Unt,getDocument:GU,getFilenameFromUrl:Pnt,getPdfFilenameFromUrl:Fnt,getXfaPageViewport:Hnt,isDataScheme:znt,isPdfFile:Gnt,noContextMenu:knt,normalizeUnicode:Vnt,setLayerDimensions:Qnt,shadow:Xnt,version:jnt},Symbol.toStringTag,{value:"Module"}));var ar=function(i,t,e){if(e||arguments.length===2)for(var n=0,s=t.length,r;n<s;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return i.concat(r||Array.prototype.slice.call(t))},Ynt=["onCopy","onCut","onPaste"],Wnt=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Knt=["onFocus","onBlur"],Jnt=["onInput","onInvalid","onReset","onSubmit"],Znt=["onLoad","onError"],$nt=["onKeyDown","onKeyPress","onKeyUp"],tit=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],eit=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],nit=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],iit=["onSelect"],sit=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],rit=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],ait=["onScroll"],oit=["onWheel"],lit=["onAnimationStart","onAnimationEnd","onAnimationIteration"],cit=["onTransitionEnd"],uit=["onToggle"],hit=["onChange"],fit=ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar(ar([],Ynt,!0),Wnt,!0),Knt,!0),Jnt,!0),Znt,!0),$nt,!0),tit,!0),eit,!0),nit,!0),iit,!0),sit,!0),rit,!0),ait,!0),oit,!0),lit,!0),cit,!0),hit,!0),uit,!0);function kU(i,t){var e={};return fit.forEach(function(n){var s=i[n];s&&(t?e[n]=function(r){return s(r,t(n))}:e[n]=s)}),e}function Xx(i){var t=!1,e=new Promise(function(n,s){i.then(function(r){return!t&&n(r)}).catch(function(r){return!t&&s(r)})});return{promise:e,cancel:function(){t=!0}}}function VU(i){var t,e,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(t=0;t<s;t++)i[t]&&(e=VU(i[t]))&&(n&&(n+=" "),n+=e)}else for(e in i)i[e]&&(n&&(n+=" "),n+=e);return n}function GM(){for(var i,t,e=0,n="",s=arguments.length;e<s;e++)(i=arguments[e])&&(t=VU(i))&&(n&&(n+=" "),n+=t);return n}var dit="Invariant failed";function Si(i,t){if(!i)throw new Error(dit)}var a5,qD;function pit(){if(qD)return a5;qD=1;var i=function(){};return a5=i,a5}var mit=pit();const ta=FE(mit);var YD=Object.prototype.hasOwnProperty;function WD(i,t,e){for(e of i.keys())if(tv(e,t))return e}function tv(i,t){var e,n,s;if(i===t)return!0;if(i&&t&&(e=i.constructor)===t.constructor){if(e===Date)return i.getTime()===t.getTime();if(e===RegExp)return i.toString()===t.toString();if(e===Array){if((n=i.length)===t.length)for(;n--&&tv(i[n],t[n]););return n===-1}if(e===Set){if(i.size!==t.size)return!1;for(n of i)if(s=n,s&&typeof s=="object"&&(s=WD(t,s),!s)||!t.has(s))return!1;return!0}if(e===Map){if(i.size!==t.size)return!1;for(n of i)if(s=n[0],s&&typeof s=="object"&&(s=WD(t,s),!s)||!tv(n[1],t.get(s)))return!1;return!0}if(e===ArrayBuffer)i=new Uint8Array(i),t=new Uint8Array(t);else if(e===DataView){if((n=i.byteLength)===t.byteLength)for(;n--&&i.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===t.byteLength)for(;n--&&i[n]===t[n];);return n===-1}if(!e||typeof i=="object"){n=0;for(e in i)if(YD.call(i,e)&&++n&&!YD.call(t,e)||!(e in t)||!tv(i[e],t[e]))return!1;return Object.keys(t).length===n}}return i!==i&&t!==t}const QU=ut.createContext(null);function ev({children:i,type:t}){return Y.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:i})}const git="noopener noreferrer nofollow";class vit{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Si(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Si(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{Si(this.pdfDocument),Si(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Si(Array.isArray(e));const n=e[0];new Promise(s=>{Si(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{s(r)}).catch(()=>{Si(!1)}):typeof n=="number"?s(n):Si(!1)}).then(s=>{const r=s+1;Si(this.pdfViewer),Si(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:s,pageNumber:r})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;Si(this.pdfViewer),Si(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||git,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const KD={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},kM=typeof window<"u",XU=kM&&window.location.protocol==="file:";function yit(i){return typeof i<"u"}function vm(i){return yit(i)&&i!==null}function _it(i){return typeof i=="string"}function Ait(i){return i instanceof ArrayBuffer}function xit(i){return Si(kM),i instanceof Blob}function pw(i){return _it(i)&&/^data:/.test(i)}function JD(i){Si(pw(i));const[t="",e=""]=i.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function bit(){return kM&&window.devicePixelRatio||1}const jU="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function ZD(){ta(!XU,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${jU}`)}function Sit(){ta(!XU,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${jU}`)}function Zg(i){i!=null&&i.cancel&&i.cancel()}function mw(i,t){return Object.defineProperty(i,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function Eit(i){return i.name==="RenderingCancelledException"}function Mit(i){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=s=>{if(!s.target)return e(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}function Tit(i,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function yy(){return ut.useReducer(Tit,{value:void 0,error:void 0})}var Cit=function(i,t,e,n){function s(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function l(m){try{f(n.next(m))}catch(g){a(g)}}function u(m){try{f(n.throw(m))}catch(g){a(g)}}function f(m){m.done?r(m.value):s(m.value).then(l,u)}f((n=n.apply(i,t||[])).next())})},$D=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e};const{PDFDataRangeTransport:wit}=qnt,Rit=(i,t)=>{switch(t){case KD.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");i(e);break}case KD.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");i(e);break}}};function t9(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const Lit=ut.forwardRef(function(t,e){var{children:n,className:s,error:r="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:l,file:u,inputRef:f,imageResourcesPath:m,loading:g="Loading PDF",noData:v="No PDF file specified.",onItemClick:_,onLoadError:b,onLoadProgress:C,onLoadSuccess:T,onPassword:S=Rit,onSourceError:R,onSourceSuccess:B,options:D,renderMode:N,rotate:I}=t,F=$D(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[z,U]=yy(),{value:P,error:X}=z,[ot,it]=yy(),{value:ct,error:dt}=ot,Q=ut.useRef(new vit),tt=ut.useRef([]),et=ut.useRef(void 0),_t=ut.useRef(void 0);u&&u!==et.current&&t9(u)&&(ta(!tv(u,et.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),et.current=u),D&&D!==_t.current&&(ta(!tv(D,_t.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),_t.current=D);const J=ut.useRef({scrollPageIntoView:se=>{const{dest:Z,pageNumber:Kt,pageIndex:Ft=Kt-1}=se;if(_){_({dest:Z,pageIndex:Ft,pageNumber:Kt});return}const Vt=tt.current[Ft];if(Vt){Vt.scrollIntoView();return}ta(!1,`An internal link leading to page ${Kt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});ut.useImperativeHandle(e,()=>({linkService:Q,pages:tt,viewer:J}),[]);function at(){B&&B()}function xt(){X&&(ta(!1,X.toString()),R&&R(X))}function Et(){U({type:"RESET"})}ut.useEffect(Et,[u,U]);const lt=ut.useCallback(()=>Cit(this,void 0,void 0,function*(){if(!u)return null;if(typeof u=="string")return pw(u)?{data:JD(u)}:(ZD(),{url:u});if(u instanceof wit)return{range:u};if(Ait(u))return{data:u};if(kM&&xit(u))return{data:yield Mit(u)};if(Si(typeof u=="object"),Si(t9(u)),"url"in u&&typeof u.url=="string"){if(pw(u.url)){const{url:se}=u,Z=$D(u,["url"]),Kt=JD(se);return Object.assign({data:Kt},Z)}ZD()}return u}),[u]);ut.useEffect(()=>{const se=Xx(lt());return se.promise.then(Z=>{U({type:"RESOLVE",value:Z})}).catch(Z=>{U({type:"REJECT",error:Z})}),()=>{Zg(se)}},[lt,U]),ut.useEffect(()=>{if(!(typeof P>"u")){if(P===!1){xt();return}at()}},[P]);function wt(){ct&&(T&&T(ct),tt.current=new Array(ct.numPages),Q.current.setDocument(ct))}function Bt(){dt&&(ta(!1,dt.toString()),b&&b(dt))}ut.useEffect(function(){it({type:"RESET"})},[it,P]),ut.useEffect(function(){if(!P)return;const Z=D?Object.assign(Object.assign({},P),D):P,Kt=GU(Z);C&&(Kt.onProgress=C),S&&(Kt.onPassword=S);const Ft=Kt,Vt=Ft.promise.then(Gt=>{it({type:"RESOLVE",value:Gt})}).catch(Gt=>{Ft.destroyed||it({type:"REJECT",error:Gt})});return()=>{Vt.finally(()=>Ft.destroy())}},[D,it,P]),ut.useEffect(()=>{if(!(typeof ct>"u")){if(ct===!1){Bt();return}wt()}},[ct]),ut.useEffect(function(){Q.current.setViewer(J.current),Q.current.setExternalLinkRel(a),Q.current.setExternalLinkTarget(l)},[a,l]);const Ut=ut.useCallback((se,Z)=>{tt.current[se]=Z},[]),Wt=ut.useCallback(se=>{delete tt.current[se]},[]),ve=ut.useMemo(()=>({imageResourcesPath:m,linkService:Q.current,onItemClick:_,pdf:ct,registerPage:Ut,renderMode:N,rotate:I,unregisterPage:Wt}),[m,_,ct,Ut,N,I,Wt]),ee=ut.useMemo(()=>kU(F,()=>ct),[F,ct]);function Ye(){return Y.jsx(QU.Provider,{value:ve,children:n})}function we(){return u?ct==null?Y.jsx(ev,{type:"loading",children:typeof g=="function"?g():g}):ct===!1?Y.jsx(ev,{type:"error",children:typeof r=="function"?r():r}):Ye():Y.jsx(ev,{type:"no-data",children:typeof v=="function"?v():v})}return Y.jsx("div",Object.assign({className:GM("react-pdf__Document",s),ref:f,style:{"--scale-factor":"1"}},ee,{children:we()}))});function qU(){return ut.useContext(QU)}function YU(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=i.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(r){e.forEach(function(a){typeof a=="function"?a(r):a&&(a.current=r)})}}const WU=ut.createContext(null),KU={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Dit=/^H(\d+)$/;function Bit(i){return i in KU}function VM(i){return"children"in i}function JU(i){return VM(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function Oit(i){const t={};if(VM(i)){const{role:e}=i,n=e.match(Dit);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(Bit(e)){const s=KU[e];s&&(t.role=s)}}return t}function ZU(i){const t={};if(VM(i)){if(i.alt!==void 0&&(t["aria-label"]=i.alt),i.lang!==void 0&&(t.lang=i.lang),JU(i)){const[e]=i.children;if(e){const n=ZU(e);return Object.assign(Object.assign({},t),n)}}}else"id"in i&&(t["aria-owns"]=i.id);return t}function Nit(i){return i?Object.assign(Object.assign({},Oit(i)),ZU(i)):null}function $U({className:i,node:t}){const e=ut.useMemo(()=>Nit(t),[t]),n=ut.useMemo(()=>!VM(t)||JU(t)?null:t.children.map((s,r)=>Y.jsx($U,{node:s},r)),[t]);return Y.jsx("span",Object.assign({className:i},e,{children:n}))}function QM(){return ut.useContext(WU)}function Iit(){const i=QM();Si(i);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=i,[n,s]=yy(),{value:r,error:a}=n,{customTextRenderer:l,page:u}=i;function f(){r&&e&&e(r)}function m(){a&&(ta(!1,a.toString()),t&&t(a))}return ut.useEffect(function(){s({type:"RESET"})},[s,u]),ut.useEffect(function(){if(l||!u)return;const v=Xx(u.getStructTree()),_=v;return v.promise.then(b=>{s({type:"RESOLVE",value:b})}).catch(b=>{s({type:"REJECT",error:b})}),()=>Zg(_)},[l,u,s]),ut.useEffect(()=>{if(r!==void 0){if(r===!1){m();return}f()}},[r]),r?Y.jsx($U,{className:"react-pdf__Page__structTree structTree",node:r}):null}const e9=HU;function Uit(i){const t=QM();Si(t);const e=Object.assign(Object.assign({},t),i),{_className:n,canvasBackground:s,devicePixelRatio:r=bit(),onRenderError:a,onRenderSuccess:l,page:u,renderForms:f,renderTextLayer:m,rotate:g,scale:v}=e,{canvasRef:_}=i;Si(u);const b=ut.useRef(null);function C(){u&&l&&l(mw(u,v))}function T(D){Eit(D)||(ta(!1,D.toString()),a&&a(D))}const S=ut.useMemo(()=>u.getViewport({scale:v*r,rotation:g}),[r,u,g,v]),R=ut.useMemo(()=>u.getViewport({scale:v,rotation:g}),[u,g,v]);ut.useEffect(function(){if(!u)return;u.cleanup();const{current:N}=b;if(!N)return;N.width=S.width,N.height=S.height,N.style.width=`${Math.floor(R.width)}px`,N.style.height=`${Math.floor(R.height)}px`,N.style.visibility="hidden";const I={annotationMode:f?e9.ENABLE_FORMS:e9.ENABLE,canvasContext:N.getContext("2d",{alpha:!1}),viewport:S};s&&(I.background=s);const F=u.render(I),z=F;return F.promise.then(()=>{N.style.visibility="",C()}).catch(T),()=>Zg(z)},[s,u,f,S,R]);const B=ut.useCallback(()=>{const{current:D}=b;D&&(D.width=0,D.height=0)},[]);return ut.useEffect(()=>B,[B]),Y.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:YU(_,b),style:{display:"block",userSelect:"none"},children:m?Y.jsx(Iit,{}):null})}function Pit(i){return"str"in i}function Fit(){const i=QM();Si(i);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:a,pageIndex:l,pageNumber:u,rotate:f,scale:m}=i;Si(a);const[g,v]=yy(),{value:_,error:b}=g,C=ut.useRef(null);ta(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function T(){_&&n&&n(_)}function S(){b&&(ta(!1,b.toString()),e&&e(b))}ut.useEffect(function(){v({type:"RESET"})},[a,v]),ut.useEffect(function(){if(!a)return;const z=Xx(a.getTextContent()),U=z;return z.promise.then(P=>{v({type:"RESOLVE",value:P})}).catch(P=>{v({type:"REJECT",error:P})}),()=>Zg(U)},[a,v]),ut.useEffect(()=>{if(_!==void 0){if(_===!1){S();return}T()}},[_]);const R=ut.useCallback(()=>{r&&r()},[r]),B=ut.useCallback(F=>{ta(!1,F.toString()),s&&s(F)},[s]);function D(){const F=C.current;F&&F.classList.add("selecting")}function N(){const F=C.current;F&&F.classList.remove("selecting")}const I=ut.useMemo(()=>a.getViewport({scale:m,rotation:f}),[a,f,m]);return ut.useLayoutEffect(function(){if(!a||!_)return;const{current:z}=C;if(!z)return;z.innerHTML="";const U=a.streamTextContent({includeMarkedContent:!0}),P={container:z,textContentSource:U,viewport:I},X=new zU(P),ot=X;return X.render().then(()=>{const it=document.createElement("div");it.className="endOfContent",z.append(it);const ct=z.querySelectorAll('[role="presentation"]');if(t){let dt=0;_.items.forEach((Q,tt)=>{if(!Pit(Q))return;const et=ct[dt];if(!et)return;const _t=t(Object.assign({pageIndex:l,pageNumber:u,itemIndex:tt},Q));et.innerHTML=_t,dt+=Q.str&&Q.hasEOL?2:1})}R()}).catch(B),()=>Zg(ot)},[t,B,R,a,l,u,_,I]),Y.jsx("div",{className:GM("react-pdf__Page__textContent","textLayer"),onMouseUp:N,onMouseDown:D,ref:C})}function Hit(){const i=qU(),t=QM();Si(t);const e=Object.assign(Object.assign({},i),t),{imageResourcesPath:n,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:u,page:f,pdf:m,renderForms:g,rotate:v,scale:_=1}=e;Si(m),Si(f),Si(s);const[b,C]=yy(),{value:T,error:S}=b,R=ut.useRef(null);ta(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function B(){T&&a&&a(T)}function D(){S&&(ta(!1,S.toString()),r&&r(S))}ut.useEffect(function(){C({type:"RESET"})},[C,f]),ut.useEffect(function(){if(!f)return;const U=Xx(f.getAnnotations()),P=U;return U.promise.then(X=>{C({type:"RESOLVE",value:X})}).catch(X=>{C({type:"REJECT",error:X})}),()=>{Zg(P)}},[C,f]),ut.useEffect(()=>{if(T!==void 0){if(T===!1){D();return}B()}},[T]);function N(){u&&u()}function I(z){ta(!1,`${z}`),l&&l(z)}const F=ut.useMemo(()=>f.getViewport({scale:_,rotation:v}),[f,v,_]);return ut.useEffect(function(){if(!m||!f||!s||!T)return;const{current:U}=R;if(!U)return;const P=F.clone({dontFlip:!0}),X={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:U,l10n:null,page:f,structTreeLayer:null,viewport:P},ot={annotations:T,annotationStorage:m.annotationStorage,div:U,imageResourcesPath:n,linkService:s,page:f,renderForms:g,viewport:P};U.innerHTML="";try{new FU(X).render(ot),N()}catch(it){I(it)}return()=>{}},[T,n,s,f,m,g,F]),Y.jsx("div",{className:GM("react-pdf__Page__annotations","annotationLayer"),ref:R})}var zit=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e};const n9=1;function Git(i){const t=qU(),e=Object.assign(Object.assign({},t),i),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:a,children:l,className:u,customRenderer:f,customTextRenderer:m,devicePixelRatio:g,error:v="Failed to load the page.",height:_,inputRef:b,loading:C="Loading page",noData:T="No page specified.",onGetAnnotationsError:S,onGetAnnotationsSuccess:R,onGetStructTreeError:B,onGetStructTreeSuccess:D,onGetTextError:N,onGetTextSuccess:I,onLoadError:F,onLoadSuccess:z,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:P,onRenderError:X,onRenderSuccess:ot,onRenderTextLayerError:it,onRenderTextLayerSuccess:ct,pageIndex:dt,pageNumber:Q,pdf:tt,registerPage:et,renderAnnotationLayer:_t=!0,renderForms:J=!1,renderMode:at="canvas",renderTextLayer:xt=!0,rotate:Et,scale:lt=n9,unregisterPage:wt,width:Bt}=e,Ut=zit(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Wt,ve]=yy(),{value:ee,error:Ye}=Wt,we=ut.useRef(null);Si(tt);const se=vm(Q)?Q-1:dt??null,Z=Q??(vm(dt)?dt+1:null),Kt=Et??(ee?ee.rotate:null),Ft=ut.useMemo(()=>{if(!ee)return null;let ne=1;const te=lt??n9;if(Bt||_){const ge=ee.getViewport({scale:1,rotation:Kt});Bt?ne=Bt/ge.width:_&&(ne=_/ge.height)}return te*ne},[_,ee,Kt,lt,Bt]);ut.useEffect(function(){return()=>{vm(se)&&s&&wt&&wt(se)}},[s,tt,se,wt]);function Vt(){if(z){if(!ee||!Ft)return;z(mw(ee,Ft))}if(s&&et){if(!vm(se)||!we.current)return;et(se,we.current)}}function Gt(){Ye&&(ta(!1,Ye.toString()),F&&F(Ye))}ut.useEffect(function(){ve({type:"RESET"})},[ve,tt,se]),ut.useEffect(function(){if(!tt||!Z)return;const te=Xx(tt.getPage(Z)),ge=te;return te.promise.then(De=>{ve({type:"RESOLVE",value:De})}).catch(De=>{ve({type:"REJECT",error:De})}),()=>Zg(ge)},[ve,tt,Z]),ut.useEffect(()=>{if(ee!==void 0){if(ee===!1){Gt();return}Vt()}},[ee,Ft]);const be=ut.useMemo(()=>ee&&vm(se)&&Z&&vm(Kt)&&vm(Ft)?{_className:n,canvasBackground:r,customTextRenderer:m,devicePixelRatio:g,onGetAnnotationsError:S,onGetAnnotationsSuccess:R,onGetStructTreeError:B,onGetStructTreeSuccess:D,onGetTextError:N,onGetTextSuccess:I,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:P,onRenderError:X,onRenderSuccess:ot,onRenderTextLayerError:it,onRenderTextLayerSuccess:ct,page:ee,pageIndex:se,pageNumber:Z,renderForms:J,renderTextLayer:xt,rotate:Kt,scale:Ft}:null,[n,r,m,g,S,R,B,D,N,I,U,P,X,ot,it,ct,ee,se,Z,J,xt,Kt,Ft]),qt=ut.useMemo(()=>kU(Ut,()=>ee&&(Ft?mw(ee,Ft):void 0)),[Ut,ee,Ft]),$=`${se}@${Ft}/${Kt}`;function V(){switch(at){case"custom":return Si(f),Y.jsx(f,{},`${$}_custom`);case"none":return null;case"canvas":default:return Y.jsx(Uit,{canvasRef:a},`${$}_canvas`)}}function vt(){return xt?Y.jsx(Fit,{},`${$}_text`):null}function It(){return _t?Y.jsx(Hit,{},`${$}_annotations`):null}function Xt(){return Y.jsxs(WU.Provider,{value:be,children:[V(),vt(),It(),l]})}function Ot(){return Z?tt===null||ee===void 0||ee===null?Y.jsx(ev,{type:"loading",children:typeof C=="function"?C():C}):tt===!1||ee===!1?Y.jsx(ev,{type:"error",children:typeof v=="function"?v():v}):Xt():Y.jsx(ev,{type:"no-data",children:typeof T=="function"?T():T})}return Y.jsx("div",Object.assign({className:GM(n,u),"data-page-number":Z,ref:YU(b,we),style:{"--scale-factor":`${Ft}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},qt,{children:Ot()}))}Sit();P7.workerSrc="pdf.worker.mjs";function kit(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 36.57142857142857 0 Q 20.571428571428573 0 10.285714285714286 10.285714285714286 L 10.285714285714286 10.285714285714286 L 10.285714285714286 10.285714285714286 Q 0 20.571428571428573 0 36.57142857142857 L 0 146.28571428571428 L 0 146.28571428571428 Q 0 162.28571428571428 10.285714285714286 172.57142857142858 Q 20.571428571428573 182.85714285714286 36.57142857142857 182.85714285714286 Q 52.57142857142857 182.85714285714286 62.857142857142854 172.57142857142858 Q 73.14285714285714 162.28571428571428 73.14285714285714 146.28571428571428 L 73.14285714285714 73.14285714285714 L 73.14285714285714 73.14285714285714 L 146.28571428571428 73.14285714285714 L 146.28571428571428 73.14285714285714 Q 162.28571428571428 73.14285714285714 172.57142857142858 62.857142857142854 Q 182.85714285714286 52.57142857142857 182.85714285714286 36.57142857142857 Q 182.85714285714286 20.571428571428573 172.57142857142858 10.285714285714286 Q 162.28571428571428 0 146.28571428571428 0 L 36.57142857142857 0 L 36.57142857142857 0 Z M 73.14285714285714 365.7142857142857 Q 73.14285714285714 349.7142857142857 62.857142857142854 339.42857142857144 L 62.857142857142854 339.42857142857144 L 62.857142857142854 339.42857142857144 Q 52.57142857142857 329.14285714285717 36.57142857142857 329.14285714285717 Q 20.571428571428573 329.14285714285717 10.285714285714286 339.42857142857144 Q 0 349.7142857142857 0 365.7142857142857 L 0 475.42857142857144 L 0 475.42857142857144 Q 0 491.42857142857144 10.285714285714286 501.7142857142857 Q 20.571428571428573 512 36.57142857142857 512 L 146.28571428571428 512 L 146.28571428571428 512 Q 162.28571428571428 512 172.57142857142858 501.7142857142857 Q 182.85714285714286 491.42857142857144 182.85714285714286 475.42857142857144 Q 182.85714285714286 459.42857142857144 172.57142857142858 449.14285714285717 Q 162.28571428571428 438.85714285714283 146.28571428571428 438.85714285714283 L 73.14285714285714 438.85714285714283 L 73.14285714285714 438.85714285714283 L 73.14285714285714 365.7142857142857 L 73.14285714285714 365.7142857142857 Z M 365.7142857142857 0 Q 349.7142857142857 0 339.42857142857144 10.285714285714286 L 339.42857142857144 10.285714285714286 L 339.42857142857144 10.285714285714286 Q 329.14285714285717 20.571428571428573 329.14285714285717 36.57142857142857 Q 329.14285714285717 52.57142857142857 339.42857142857144 62.857142857142854 Q 349.7142857142857 73.14285714285714 365.7142857142857 73.14285714285714 L 438.85714285714283 73.14285714285714 L 438.85714285714283 73.14285714285714 L 438.85714285714283 146.28571428571428 L 438.85714285714283 146.28571428571428 Q 438.85714285714283 162.28571428571428 449.14285714285717 172.57142857142858 Q 459.42857142857144 182.85714285714286 475.42857142857144 182.85714285714286 Q 491.42857142857144 182.85714285714286 501.7142857142857 172.57142857142858 Q 512 162.28571428571428 512 146.28571428571428 L 512 36.57142857142857 L 512 36.57142857142857 Q 512 20.571428571428573 501.7142857142857 10.285714285714286 Q 491.42857142857144 0 475.42857142857144 0 L 365.7142857142857 0 L 365.7142857142857 0 Z M 512 365.7142857142857 Q 512 349.7142857142857 501.7142857142857 339.42857142857144 L 501.7142857142857 339.42857142857144 L 501.7142857142857 339.42857142857144 Q 491.42857142857144 329.14285714285717 475.42857142857144 329.14285714285717 Q 459.42857142857144 329.14285714285717 449.14285714285717 339.42857142857144 Q 438.85714285714283 349.7142857142857 438.85714285714283 365.7142857142857 L 438.85714285714283 438.85714285714283 L 438.85714285714283 438.85714285714283 L 365.7142857142857 438.85714285714283 L 365.7142857142857 438.85714285714283 Q 349.7142857142857 438.85714285714283 339.42857142857144 449.14285714285717 Q 329.14285714285717 459.42857142857144 329.14285714285717 475.42857142857144 Q 329.14285714285717 491.42857142857144 339.42857142857144 501.7142857142857 Q 349.7142857142857 512 365.7142857142857 512 L 475.42857142857144 512 L 475.42857142857144 512 Q 491.42857142857144 512 501.7142857142857 501.7142857142857 Q 512 491.42857142857144 512 475.42857142857144 L 512 365.7142857142857 L 512 365.7142857142857 Z"})})}function Vit(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 128 0 Q 101 1 83 19 L 83 19 L 83 19 Q 65 37 64 64 L 64 448 L 64 448 Q 65 475 83 493 Q 101 511 128 512 L 384 512 L 384 512 Q 411 511 429 493 Q 447 475 448 448 L 448 160 L 448 160 L 320 160 L 320 160 Q 306 160 297 151 Q 288 142 288 128 L 288 0 L 288 0 L 128 0 L 128 0 Z M 320 0 L 320 128 L 320 0 L 320 128 L 448 128 L 448 128 L 320 0 L 320 0 Z M 280 232 L 280 334 L 280 232 L 280 334 L 311 303 L 311 303 Q 328 289 345 303 Q 359 320 345 337 L 273 409 L 273 409 Q 256 423 239 409 L 167 337 L 167 337 Q 153 320 167 303 Q 184 289 201 303 L 232 334 L 232 334 L 232 232 L 232 232 Q 234 210 256 208 Q 278 210 280 232 L 280 232 Z"})})}const Qit=me.div`
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  width: 100%;
  z-index: 100;
  background-color: rgba(255, 255, 255, 0.5);
`,Xit=me.img`
  width: 100px;
`,jit="/vibefolio/loader/Loading1.png",qit="/vibefolio/loader/Loading2.png",Yit="/vibefolio/loader/Loading3.png",Wit="/vibefolio/loader/Loading4.png",Kit="/vibefolio/loader/Loading5.png",Jit="/vibefolio/loader/Loading6.png",i9=[jit,qit,Yit,Wit,Kit,Jit],s9=["cursor-loading-start","cursor-loading-mid","cursor-loading-end"],r9=300;function tP(){const[i,t]=ut.useState(0),[e,n]=ut.useState(0),s=ut.useRef(performance.now()),r=ut.useRef(performance.now()),a=ut.useRef(0);return ut.useEffect(()=>{const l=u=>{const f=u-s.current,m=u-r.current;f>=r9&&(t(g=>(g+1)%i9.length),s.current=u),m>=r9*2&&(n(g=>(g+1)%s9.length),r.current=u),a.current=requestAnimationFrame(l)};return a.current=requestAnimationFrame(l),()=>{a.current&&cancelAnimationFrame(a.current)}},[]),Y.jsx(Qit,{className:s9[e],children:Y.jsx(Xit,{src:i9[i],alt:"Loading frame"})})}P7.workerSrc="pdfjs/pdf.worker.min.mjs";const o5="pdf/cv-mykyta-antonov.pdf";function Zit({modal:i}){const[t,e]=ut.useState(!0),n=()=>{window.open(o5,"_blank","noopener noreferrer")},s=async()=>{fetch(o5).then(r=>{r.blob().then(a=>{const l=window.URL.createObjectURL(a),u=document.createElement("a");u.href=l,u.download="cv-mykyta-antonov.pdf",u.click()})})};return Y.jsxs(o0,{modal:i,buttons:[{Icon:Y.jsx(kit,{}),onClick:n,key:"expand"},{Icon:Y.jsx(Vit,{}),onClick:()=>setTimeout(s,0),key:"download"}],children:[t&&Y.jsx(tP,{}),Y.jsx(Lit,{onLoadSuccess:()=>e(!1),onLoadError:()=>e(!1),file:o5,children:Y.jsx(Git,{renderTextLayer:!1,renderAnnotationLayer:!1,pageNumber:1})})]})}const $it=me.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  padding: 10px;
`,tst=me.div`
  display: flex;
  width: 100%;
  padding-left: 50px;
  padding-top: 10px;
  height: 50px;
`,est=me.button`
  position: relative;
  width: 120px;
  height: 100%;
  background-color: ${({backgroundColor:i})=>i};

  border: 2px solid ${({theme:i})=>i.pallet.textColor};
  border-bottom: ${({backgroundColor:i})=>`2px solid ${i}`};
  border-top-left-radius: 4px;
  border-top-right-radius: 50%;
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;

  margin-right: -32px;
  transform: translateY(2px);

  z-index: ${({zIndex:i,isActive:t})=>t?10:i};

  color: ${({isActive:i})=>i?"var(--white-color)":"inherit"};

  &:hover {
    color: var(--white-color);
  }
`,nst=me.div`
  display: flex;
  width: 100%;
  height: 100%;
  background-color: ${({backgroundColor:i})=>i};
  z-index: 100;
  border: 2px solid ${({theme:i})=>i.pallet.textColor};
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  padding: 10px;
`,ist=me.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  gap: 20px;
`,M4=me.input`
  width: 100%;
  height: 30px;
  background-color: var(--white-color);
  border-radius: 4px;
  font-weight: 600;
  color: 2px solid ${({theme:i})=>i.pallet.textColor};

  &:disabled {
    color: gray;
  }
`,l5=me.label`
  display: flex;
  align-items: center;
  color: var(--white-color);

  span {
    display: inline-block;
    width: 70px;
  }
`,a9=me.div`
  display: flex;
  flex-direction: column;
  gap: 5px;
  width: 100%;
  height: fit-content;
`,sst=me.textarea`
  width: 100%;
  height: 100%;
  border-radius: 4px;
  resize: none;
`,rst=me.div`
  display: flex;
  justify-content: flex-end;
  align-items: center;
`,ast=me.button`
  width: fit-content;
  padding: 4px;
  border-radius: 4px;
  color: var(--white-color);
  box-shadow: 2px 2px 0px 1px rgba(0, 0, 0, 0.75);
`;me.div`
  display: grid;
  grid-template-columns: 150px 1fr;
  width: 100%;

  background-color: ${({theme:i})=>i.pallet.thirdColor};
  border-radius: 4px;
`;me.div`
  display: flex;
  flex-direction: column;
  width: 100%;

  border-right: 2px solid ${({theme:i})=>i.pallet.textColor};
`;me.button`
  display: flex;
  flex-direction: column;
  align-items: self-start;
  width: 100%;
  height: min-content;
  line-height: 1.2;
  padding: 4px 2px;
`;me.span`
  display: inline-block;
  font-weight: 900;

  max-width: 98%;
  white-space: nowrap;
  overflow: hidden !important;
  text-overflow: ellipsis;
`;me.span`
  display: inline-block;
  font-size: 14px;
  font-weight: 600;
  font-family: "monospace";

  max-width: 98%;
  white-space: nowrap;
  overflow: hidden !important;
  text-overflow: ellipsis;
`;me.span`
  display: inline-block;
  opacity: 0.7;
  font-size: 12px;

  max-width: 98%;
  white-space: nowrap;
  overflow: hidden !important;
  text-overflow: ellipsis;
`;me.div`
  display: flex;
  flex-direction: column;
  width: 100%;
`;class jx{constructor(t=0,e="Network Error"){this.status=t,this.text=e}}const ost=()=>{if(!(typeof localStorage>"u"))return{get:i=>Promise.resolve(localStorage.getItem(i)),set:(i,t)=>Promise.resolve(localStorage.setItem(i,t)),remove:i=>Promise.resolve(localStorage.removeItem(i))}},Dr={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:ost()},F7=i=>i?typeof i=="string"?{publicKey:i}:i.toString()==="[object Object]"?i:{}:{},lst=(i,t="https://api.emailjs.com")=>{if(!i)return;const e=F7(i);Dr.publicKey=e.publicKey,Dr.blockHeadless=e.blockHeadless,Dr.storageProvider=e.storageProvider,Dr.blockList=e.blockList,Dr.limitRate=e.limitRate,Dr.origin=e.origin||t},eP=async(i,t,e={})=>{const n=await fetch(Dr.origin+i,{method:"POST",headers:e,body:t}),s=await n.text(),r=new jx(n.status,s);if(n.ok)return r;throw r},nP=(i,t,e)=>{if(!i||typeof i!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e||typeof e!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},cst=i=>{if(i&&i.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},iP=i=>i.webdriver||!i.languages||i.languages.length===0,sP=()=>new jx(451,"Unavailable For Headless Browser"),ust=(i,t)=>{if(!Array.isArray(i))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},hst=i=>{var t;return!((t=i.list)!=null&&t.length)||!i.watchVariable},fst=(i,t)=>i instanceof FormData?i.get(t):i[t],rP=(i,t)=>{if(hst(i))return!1;ust(i.list,i.watchVariable);const e=fst(t,i.watchVariable);return typeof e!="string"?!1:i.list.includes(e)},aP=()=>new jx(403,"Forbidden"),dst=(i,t)=>{if(typeof i!="number"||i<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},pst=async(i,t,e)=>{const n=Number(await e.get(i)||0);return t-Date.now()+n},oP=async(i,t,e)=>{if(!t.throttle||!e)return!1;dst(t.throttle,t.id);const n=t.id||i;return await pst(n,t.throttle,e)>0?!0:(await e.set(n,Date.now().toString()),!1)},lP=()=>new jx(429,"Too Many Requests"),mst=async(i,t,e,n)=>{const s=F7(n),r=s.publicKey||Dr.publicKey,a=s.blockHeadless||Dr.blockHeadless,l=s.storageProvider||Dr.storageProvider,u={...Dr.blockList,...s.blockList},f={...Dr.limitRate,...s.limitRate};return a&&iP(navigator)?Promise.reject(sP()):(nP(r,i,t),cst(e),e&&rP(u,e)?Promise.reject(aP()):await oP(location.pathname,f,l)?Promise.reject(lP()):eP("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:r,service_id:i,template_id:t,template_params:e}),{"Content-type":"application/json"}))},gst=i=>{if(!i||i.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},vst=i=>typeof i=="string"?document.querySelector(i):i,yst=async(i,t,e,n)=>{const s=F7(n),r=s.publicKey||Dr.publicKey,a=s.blockHeadless||Dr.blockHeadless,l=Dr.storageProvider||s.storageProvider,u={...Dr.blockList,...s.blockList},f={...Dr.limitRate,...s.limitRate};if(a&&iP(navigator))return Promise.reject(sP());const m=vst(e);nP(r,i,t),gst(m);const g=new FormData(m);return rP(u,g)?Promise.reject(aP()):await oP(location.pathname,f,l)?Promise.reject(lP()):(g.append("lib_version","4.4.1"),g.append("service_id",i),g.append("template_id",t),g.append("user_id",r),eP("/api/v1.0/email/send-form",g))},_st={init:lst,send:mst,sendForm:yst,EmailJSResponseStatus:jx};function Ast(){const[i,t]=ut.useState(!1),e=ut.useRef(null),n=xy(),s=async r=>{if(r.preventDefault(),!!e.current){t(!0);try{await _st.sendForm("service_lm3u50h","template_7vobhdn",e.current,{publicKey:"omhAz0lvyswze0XoT"}),n(Y5(`The letter has been sent. 
I will contact you soon `))}catch(a){console.error(a),n(Y5("I apologize, something went wrong ","fail"))}finally{t(!1)}}};return Y.jsxs(ist,{ref:e,onSubmit:s,children:[i&&Y.jsx(tP,{}),Y.jsxs(a9,{children:[Y.jsxs(l5,{children:[Y.jsx("span",{children:"From:"}),Y.jsx(M4,{type:"email",name:"email",required:!0})]}),Y.jsxs(l5,{children:[Y.jsx("span",{children:"To:"}),Y.jsx(M4,{className:"not-allowed",disabled:!0,type:"email",name:"fake_to",value:"Me"})]}),Y.jsxs(l5,{children:[Y.jsx("span",{children:"Name:"}),Y.jsx(M4,{type:"text",name:"name",required:!0})]})]}),Y.jsxs(a9,{style:{flexGrow:1},children:[Y.jsx(M4,{placeholder:"Title",type:"text",name:"title",required:!0}),Y.jsx(sst,{placeholder:"Message",name:"message",required:!0})]}),Y.jsx(rst,{children:Y.jsx(ast,{className:"cursor-pointer",type:"submit",children:"Send"})})]})}function T4(){return Y.jsx(Y.Fragment,{children:"In Construction"})}const c5=[{name:"Contact Me",color:"#345995",component:Ast},{name:"Inbox",color:"#62A87C",component:T4},{name:"Outbox",color:"#9C0D38",component:T4},{name:"Spam",color:"#FCBA04",component:T4},{name:"Trash",color:"#CAA8F5",component:T4}];function xst({modal:i}){const[t,e]=ut.useState(c5[0]);return Y.jsx(o0,{modal:i,children:Y.jsxs($it,{children:[Y.jsx(tst,{children:Y.jsx("div",{style:{display:"flex"},children:c5.map((n,s)=>Y.jsx(est,{className:"cursor-pointer",onClick:()=>e(n),isActive:t.name===n.name,zIndex:c5.length-s,backgroundColor:n.color,children:n.name}))})}),Y.jsx(nst,{backgroundColor:t.color,children:Y.jsx(t.component,{})})]})})}const o9=document.getElementById("modal-root");function bst(){const i=XE(t=>t.modals);return!o9||i.modals.length===0?null:ON.createPortal(Y.jsx(Y.Fragment,{children:i.modals.filter(({isOpen:t})=>t).map(t=>{switch(t.type){case"photo":return Y.jsx(C$,{modal:t},t.type);case"about_me":return Y.jsx(R$,{modal:t},t.type);case"skills":return Y.jsx(F$,{modal:t},t.type);case"experience":return Y.jsx(ett,{modal:t},t.type);case"folder":return Y.jsx(att,{modal:t},t.type);case"pdf":return Y.jsx(Zit,{modal:t},t.type);case"contact_me":return Y.jsx(xst,{modal:t},t.type);default:return null}})}),o9)}const Sst=Ay`
  0%{
    animation-timing-function:$ease-in-quint;
    transform:scale(0.000,0.0001) translate3d(0,0,0);
    -webkit-filter:brightness(50);
    filter:brightness(50);
  }

  60%{
    transform:scale(1.3,0.001) translate3d(0,0,0);
    -webkit-filter:brightness(10);
    filter:brightness(10);
  }

  100%{
    transform:scale(1,1.3) translate3d(0,0,0);
    -webkit-filter:brightness(1);
    filter:brightness(1);
    opacity:1;
  }
`,Est=me.div`
  position: absolute;
  inset: 0;
  z-index: 9999;
  background-color: black;
`,Mst=me.div`
  width: 100%;
  height: 100%;
  animation: ${Sst} 1s linear forwards;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: black;
`,Tst=me.pre`
  font-family: monospace;
  color: #00ffcc;
`,Cst=me.span`
  color: #ff6347;
`,l9=me.span`
  color: #ffa500;
`;function wst({onFinish:i}){const{progress:t}=oW(),{start:e}=cN(),[n,s]=ut.useState(!1),{playIntro:r,isLoaded:a,loadProgress:l}=BM(),u=t===100&&n&&a,[f,m]=ut.useState("");ut.useEffect(()=>{const _=setInterval(()=>{m(b=>b==="..."?"":b+".")},300);return()=>clearInterval(_)},[]);const g=ut.useCallback(()=>{i(),r(),e()},[i,r,e]),v=ut.useCallback(_=>{_.key==="Enter"&&u&&g()},[u,g]);return ut.useEffect(()=>{document.fonts.ready.then(()=>s(!0))},[]),ut.useEffect(()=>(window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)),[v]),Y.jsx(Est,{children:Y.jsx(Mst,{children:Y.jsxs(Tst,{children:[["> Booting PortfolioOS v1.0",`> Loading 3D assets.... ${Math.round(t).toString().padEnd(3," ")}%`,`> Fonts system......... ${n?"OK":"LOADING"}`,`> Audio system......... ${a?"OK":`${Math.round(l)}%`}`,"> CRT Display.......... ONLINE"].join(`
`),Y.jsxs(Y.Fragment,{children:[`
> Employment status.... `,Y.jsx(Cst,{children:"UNEMPLOYED"})]}),Y.jsxs(Y.Fragment,{children:[`
> Job seek subsystem... `,Y.jsxs(l9,{children:["SCANNING NETWORK",f]})]}),Y.jsxs(Y.Fragment,{children:[`
> Floppy drive......... `,Y.jsx(l9,{children:"NOT FOUND  SKIPPING"})]}),u&&Y.jsxs(Y.Fragment,{children:[`
> Boot sequence complete. Press `,Y.jsx("span",{onClick:g,className:"cursor-pointer",style:{textDecoration:"underline"},children:"ENTER"})," to continue..."]})]})})})}const Rst=Ay`
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
`,Lst=Ay`
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(100%);
  }
`,Dst=me.div`
  position: fixed;
  bottom: 0;
  right: 0;
  padding: 0 10px 10px 0;
  display: flex;
  flex-direction: column;
  gap: 5px;
  align-items: flex-end;
  z-index: 1000;
  pointer-events: none;
`,Bst=me.div`
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;
  border: 2px solid ${({theme:i})=>i.pallet.textColor};
  background-color: ${({theme:i})=>i.pallet.thirdColor};
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  width: 250px;
  min-height: 80px;
  pointer-events: auto;
  transition: transform 0.3s ease;

  animation: ${({isVisible:i})=>i?j_`
          ${Rst} 0.4s ease-out forwards
        `:j_`
          ${Lst} 0.4s ease-in forwards
        `};
`,Ost=me.div`
  min-width: 25px;
  min-height: 25px;
  max-width: 25px;
  max-height: 25px;
`,Nst=me.div`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
`,Ist=me.span`
  font-weight: 900;
`,Ust=me.span`
  font-size: 12px;
  white-space: pre-line;
`;function Pst(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 256 512 Q 326 511 384 478 L 384 478 L 384 478 Q 442 444 478 384 Q 512 323 512 256 Q 512 189 478 128 Q 442 68 384 34 Q 326 1 256 0 Q 186 1 128 34 Q 70 68 34 128 Q 0 189 0 256 Q 0 323 34 384 Q 70 444 128 478 Q 186 511 256 512 L 256 512 Z M 369 209 L 241 337 L 369 209 L 241 337 Q 224 351 207 337 L 143 273 L 143 273 Q 129 256 143 239 Q 160 225 177 239 L 224 286 L 224 286 L 335 175 L 335 175 Q 352 161 369 175 Q 383 192 369 209 L 369 209 Z"})})}function Fst(i){return Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",...i,children:Y.jsx("path",{d:"M 256 512 Q 326 511 384 478 L 384 478 L 384 478 Q 442 444 478 384 Q 512 323 512 256 Q 512 189 478 128 Q 442 68 384 34 Q 326 1 256 0 Q 186 1 128 34 Q 70 68 34 128 Q 0 189 0 256 Q 0 323 34 384 Q 70 444 128 478 Q 186 511 256 512 L 256 512 Z M 175 175 Q 192 161 209 175 L 256 222 L 256 222 L 303 175 L 303 175 Q 320 161 337 175 Q 351 192 337 209 L 290 256 L 290 256 L 337 303 L 337 303 Q 351 320 337 337 Q 320 351 303 337 L 256 290 L 256 290 L 209 337 L 209 337 Q 192 351 175 337 Q 161 320 175 303 L 222 256 L 222 256 L 175 209 L 175 209 Q 161 192 175 175 L 175 175 Z"})})}const Hst={success:Pst,fail:Fst};function zst({text:i,id:t,result:e="success",sound:n}){const s=xy(),[r,a]=ut.useState(!0);ut.useEffect(()=>{n&&n()},[]);const l=ut.useCallback(()=>{a(!1),setTimeout(()=>s(XZ(t)),400)},[s,t]);ut.useEffect(()=>{const f=setTimeout(l,5e3);return()=>clearTimeout(f)},[s,l,t]);const u=Hst[e];return Y.jsxs(Bst,{className:"cursor-pointer",onClick:l,isVisible:r,children:[Y.jsx(Ost,{children:Y.jsx(u,{fill:e==="success"?"green":"red"})}),Y.jsxs(Nst,{children:[Y.jsx(Ist,{children:e.charAt(0).toUpperCase()+e.slice(1)}),Y.jsx(Ust,{children:i})]})]})}const c9=document.getElementById("popup-root"),Gst={confirm:()=>Y.jsx("div",{}),toast:zst};function kst(){const{playNotification:i}=BM(),t=XE(e=>e.popups.popups.filter(n=>n.type==="toast"));return!c9||t.length===0?null:ON.createPortal(Y.jsx(Dst,{children:t.map(e=>{const{type:n,id:s,text:r,result:a}=e,l=Gst[n];return l?Y.jsx(l,{sound:i,result:a,text:r,id:s},s):null})}),c9)}const Vst=1024,Qst=600;function Xst(){const[i,t]=ut.useState(!0),[e,n]=ut.useState(!1),s=XE(l=>l.themes),{playClickDown:r,playClickUp:a}=BM();return ut.useEffect(()=>(window.addEventListener("mousedown",r),window.addEventListener("mouseup",a),()=>{window.removeEventListener("mousedown",r),window.removeEventListener("mouseup",a)}),[r,a]),ut.useEffect(()=>{const l=()=>{const{innerWidth:u,innerHeight:f}=window;t(u>=Vst&&f>=Qst)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),i?Y.jsxs(sH,{theme:s,children:[Y.jsx(uH,{}),Y.jsx(cH,{}),!e&&Y.jsx(wst,{onFinish:()=>n(!0)}),Y.jsxs(hH,{bootDone:e,children:[Y.jsx(FJ,{}),Y.jsx(a$,{}),Y.jsx(bst,{}),Y.jsx(kst,{})]})]}):Y.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[Y.jsx("h1",{children:"The screen is too small"}),Y.jsx("span",{children:"Desktop only"})]})}const cP={mainColor:"#BFECFF",secondColor:"#FFCCEA",thirdColor:"#FFF6E3",textColor:"#1D1C1A "},jst={mainColor:"#000000",secondColor:"#CD1715",thirdColor:"#19260A",textColor:"#7DBB02"},qst={name:"pastel",fontFamily:"'Manrope', sans-serif",pallet:cP},uP=A7({name:"themes",initialState:qst,reducers:{changeTheme:(i,t)=>{switch(t.payload){case"pastel":return{name:"pastel",fontFamily:"'Manrope', sans-serif",pallet:cP};case"code":return{name:"code",fontFamily:"'VT323', monospace;",pallet:jst}}}}}),{changeTheme:lrt}=uP.actions,Yst=uP.reducer,Wst=cZ({reducer:{modals:DZ,themes:Yst,popups:qZ}});aF.createRoot(document.getElementById("root")).render(Y.jsx(ut.StrictMode,{children:Y.jsx(TH,{store:Wst,children:Y.jsx(zZ,{children:Y.jsx(JW,{children:Y.jsx(Xst,{})})})})}));
